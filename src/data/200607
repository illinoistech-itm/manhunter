From java-user-return-21730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 07:24:40 2006
Return-Path: <java-user-return-21730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45197 invoked from network); 1 Jul 2006 07:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 07:24:40 -0000
Received: (qmail 19317 invoked by uid 500); 1 Jul 2006 07:24:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18311 invoked by uid 500); 1 Jul 2006 07:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18300 invoked by uid 99); 1 Jul 2006 07:24:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 00:24:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.210] (HELO pro7.rediffmailpro.com) (203.199.83.210)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Jul 2006 00:24:32 -0700
Received: (qmail 13745 invoked from network); 1 Jul 2006 07:22:15 -0000
Received: from unknown (HELO Amit) (59.181.103.41)
  by mailserver with SMTP; 1 Jul 2006 07:22:15 -0000
Reply-To: <amitk@techepoch.com>
From: "Amit" <amitk@techepoch.com>
To: <java-user@lucene.apache.org>,
	<java-user-get.123_145@lucene.apache.org>
Cc: <java-user-faq@lucene.apache.org>
Subject: FW: how Boolean query work internally  in lucene
Date: Sat, 1 Jul 2006 12:54:04 +0530
Message-ID: <APEIIFMNKNHNCFFBLFAKMEJPCAAA.amitk@techepoch.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi All,

I just want to know how the lucene processes the Boolean query internally??

As per my knowledge:

   if I search for "java apache".
   Note: let consider i want documents that contents both words and i
constructed boolean query for that (i.e. +java +apache).

   Please let me clear if i wrong how lucene process this query?
   First it search for all document for java then for apache and after that
it take the intersection of these to sets. is it?
   if so where i want to know where lucene take the intersection and how
process the query??


 I would appreciate any response.

  Thanks in advance.

Thanks and Regards,
Amit



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 07:38:10 2006
Return-Path: <java-user-return-21731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46131 invoked from network); 1 Jul 2006 07:38:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 07:38:10 -0000
Received: (qmail 23433 invoked by uid 500); 1 Jul 2006 07:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23384 invoked by uid 500); 1 Jul 2006 07:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23373 invoked by uid 99); 1 Jul 2006 07:38:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 00:38:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.191] (HELO pro6.rediffmailpro.com) (203.199.83.191)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Jul 2006 00:38:03 -0700
Received: (qmail 25791 invoked from network); 1 Jul 2006 07:35:48 -0000
Received: from unknown (HELO Amit) (59.181.103.41)
  by mailserver with SMTP; 1 Jul 2006 07:35:48 -0000
Reply-To: <amitk@techepoch.com>
From: "Amit" <amitk@techepoch.com>
To: <java-user@lucene.apache.org>,
	<java-user-help@lucene.apache.org>
Subject: RE: how Boolean query work internally  in lucene
Date: Sat, 1 Jul 2006 13:07:37 +0530
Message-ID: <APEIIFMNKNHNCFFBLFAKMEKACAAA.amitk@techepoch.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
In-Reply-To: <APEIIFMNKNHNCFFBLFAKKEJOCAAA.amitk@techepoch.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I just want to know how the lucene processes the Boolean query internally??

As per my knowledge:

   if I search for "java apache".
   Note: let consider i want documents that contents both words and i
constructed boolean query for that (i.e. +java +apache).

   Please let me clear if i wrong how lucene process this query?
   First it search for all document for java then for apache and after that
it take the intersection of these to sets. is it?
   if so where i want to know where lucene take the intersection and how
process the query??


 I would appreciate any response.

  Thanks in advance.

Thanks and Regards,
Amit



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 08:10:12 2006
Return-Path: <java-user-return-21732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53408 invoked from network); 1 Jul 2006 08:10:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 08:10:12 -0000
Received: (qmail 40985 invoked by uid 500); 1 Jul 2006 08:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40953 invoked by uid 500); 1 Jul 2006 08:10:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40941 invoked by uid 99); 1 Jul 2006 08:10:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:10:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:10:02 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout2-sn1.fre.skanova.net (7.2.075)
        id 44A135F1000EFE0A for java-user@lucene.apache.org; Sat, 1 Jul 2006 10:09:38 +0200
Subject: Re: Sorting & SQL-Database
From: karl wettin <kalle@snigel.net>
To: java-user@lucene.apache.org
In-Reply-To: <200607010110.50154.dominik@dbruhn.de>
References: <200607010110.50154.dominik@dbruhn.de>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Sat, 01 Jul 2006 10:09:01 +0200
Message-Id: <1151741341.423.121.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 2006-07-01 at 01:10 +0200, Dominik Bruhn wrote:

> SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);
> 
> Where LUCENERESULT is like 2,3,19,3,5.
> 
> This works fine but got one problem: The Search-Result of Lucene is order by 
> relevance and so the id-list is also sorted by relevance. But the result of 
> the SQL-Query is sorted by the id which destroys the relevance-sorting.
> 
> Does anybody know a work-arround?

This is really a question you should ask in the forum of your RDBMS. You
could always execute multiple SQL-queries within the same statement
without too much loss. But I'm certain there is a way to enforce the
order as you specified it in the WHERE-clause.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 08:27:41 2006
Return-Path: <java-user-return-21733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57599 invoked from network); 1 Jul 2006 08:27:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 08:27:41 -0000
Received: (qmail 50966 invoked by uid 500); 1 Jul 2006 08:27:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50931 invoked by uid 500); 1 Jul 2006 08:27:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50920 invoked by uid 99); 1 Jul 2006 08:27:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:27:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [158.36.80.149] (HELO pat.hia.no) (158.36.80.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:27:34 -0700
Received: from [158.36.80.151] (helo=mail-mx2.hia.no)
	by pat.hia.no with esmtp (Exim 4.44)
	id 1Fwaoq-0006nX-48
	for java-user@lucene.apache.org; Sat, 01 Jul 2006 10:27:12 +0200
Received: from localhost ([127.0.0.1] helo=mail-mx2.hia.no)
	by mail-mx2.hia.no with esmtp (Exim 4.44)
	id 1Fwaop-0001lH-Vv
	for java-user@lucene.apache.org; Sat, 01 Jul 2006 10:27:12 +0200
Received: from ghybel239.grm.hia.no ([128.39.146.239] helo=lettmelk)
	by mail-mx2.hia.no with esmtp (Exim 4.44)
	id 1Fwaop-0001l6-9O
	for java-user@lucene.apache.org; Sat, 01 Jul 2006 10:27:11 +0200
Date: Sat, 01 Jul 2006 10:27:00 +0200
To: java-user@lucene.apache.org
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <200607010110.50154.dominik@dbruhn.de> <1151741341.423.121.camel@localhost>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tbz4fan6oftp72@lettmelk>
In-Reply-To: <1151741341.423.121.camel@localhost>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-3, 29.06.2006), Outbound message
X-Antivirus-Status: Clean
Subject: Re: Sorting & SQL-Database
X-Spam-Checker-Version: SpamAssassin 3.0.6 (2005-12-07) on pat.hia.no
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Mon, 31 Jan 2005 16:42:16 +0100)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.5 required=5.0 tests=GREYLIST_ISWHITE 
	autolearn=failed version=3.0.6
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well, it is common in most databasesystems, that if you dont specify a  =

sort, you get the results sorted by id, or by when the rows are inserted=
  =

into the db.

The quickest way for you is to write around your query.
instead of doing one query, just do where queries with equals. this woul=
d  =

produce a bit overflow if you have your database on an external server, =
 =

but again, the quickest query to ever run in sql are equals-queries. Sin=
ce  =

the ID is unique (i hope so), it should be no problem at all.
... WHERE id =3D 2;
... WHERE id =3D 3
... WHERE id =3D 19
and so on would give you the correct relevance-order.

On Sat, 01 Jul 2006 10:09:01 +0200, karl wettin <kalle@snigel.net> wrote=
:

> On Sat, 2006-07-01 at 01:10 +0200, Dominik Bruhn wrote:
>
>> SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);
>>
>> Where LUCENERESULT is like 2,3,19,3,5.
>>
>> This works fine but got one problem: The Search-Result of Lucene is  =

>> order by
>> relevance and so the id-list is also sorted by relevance. But the  =

>> result of
>> the SQL-Query is sorted by the id which destroys the relevance-sortin=
g.
>>
>> Does anybody know a work-arround?
>
> This is really a question you should ask in the forum of your RDBMS. Y=
ou
> could always execute multiple SQL-queries within the same statement
> without too much loss. But I'm certain there is a way to enforce the
> order as you specified it in the WHERE-clause.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 08:38:02 2006
Return-Path: <java-user-return-21734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58191 invoked from network); 1 Jul 2006 08:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 08:38:01 -0000
Received: (qmail 54244 invoked by uid 500); 1 Jul 2006 08:37:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54216 invoked by uid 500); 1 Jul 2006 08:37:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54205 invoked by uid 99); 1 Jul 2006 08:37:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:37:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.37] (HELO smtp-vbr17.xs4all.nl) (194.109.24.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:37:54 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr17.xs4all.nl (8.13.6/8.13.6) with ESMTP id k618bWEx062077
	for <java-user@lucene.apache.org>; Sat, 1 Jul 2006 10:37:32 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Any existing query types that support equivalent of  "-not interested" ?
Date: Sat, 1 Jul 2006 10:37:31 +0200
User-Agent: KMail/1.8.2
References: <20060630154726.22284.qmail@web26009.mail.ukl.yahoo.com> <200606301922.03113.paul.elschot@xs4all.nl> <44A5AF52.1040604@yahoo.co.uk>
In-Reply-To: <44A5AF52.1040604@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607011037.31777.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 01 July 2006 01:10, markharw00d wrote:
> 
> >Maybe this:
> >
> >SpanNotQuery(interested, SpanNearQuery(not,interested))
> >
> >with a SpanTermQuery for each term?
> >  
> >
> 
> Thanks, Paul. This is working well for me and I can happily use multiple 
> SpanTermQueries embedded in a SpanOrQuery in place of each of the single 
> words in your example.

I've never tried it myself, so it's good to hear that it actually works...

> 
> SpanNotQuery(
> 	SpanOrQuery(interested,curious...) 
> 	SpanNearQuery(
> 		SpanOrQuery(not,wasnt,isnt,...)
> 		SpanOrQuery(interested,curious...)
> 		)
> 	)

How about sth like this to get rid of the duplicates in there:

SpanNotNearQuery(includeSpanQuery, excludeSpanQuery, distance, ordered)

?
Writing the SpanScorer for that would be some work, though.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 08:52:20 2006
Return-Path: <java-user-return-21735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59607 invoked from network); 1 Jul 2006 08:52:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 08:52:20 -0000
Received: (qmail 63655 invoked by uid 500); 1 Jul 2006 08:52:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63287 invoked by uid 500); 1 Jul 2006 08:52:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63276 invoked by uid 99); 1 Jul 2006 08:52:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:52:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 01:52:14 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.13.6/8.13.6) with ESMTP id k618pq5j061656
	for <java-user@lucene.apache.org>; Sat, 1 Jul 2006 10:51:53 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: how Boolean query work internally  in lucene
Date: Sat, 1 Jul 2006 10:51:52 +0200
User-Agent: KMail/1.8.2
References: <APEIIFMNKNHNCFFBLFAKMEKACAAA.amitk@techepoch.com>
In-Reply-To: <APEIIFMNKNHNCFFBLFAKMEKACAAA.amitk@techepoch.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607011051.52204.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 01 July 2006 09:37, Amit wrote:
> Hi All,
> 
> I just want to know how the lucene processes the Boolean query internally??
> 
> As per my knowledge:
> 
>    if I search for "java apache".

This is a PhraseQuery internally in Lucene.

>    Note: let consider i want documents that contents both words and i
> constructed boolean query for that (i.e. +java +apache).
> 
>    Please let me clear if i wrong how lucene process this query?
>    First it search for all document for java then for apache and after that
> it take the intersection of these to sets. is it?
>    if so where i want to know where lucene take the intersection and how
> process the query??

It's a mix of determining the documents per term and merging.
It works in the order of the internal document number, (which is the order
of addition to the index, ) for both sets of documents.
To determine the next matching document each set of documents
advances to the document number at or after the current document of the
other set, until both sets have the same document number.

The intersection is taken in ConjunctionScorer and the sets are
represented by a TermScorer, both viewable in this package:
http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene/search/
Advancing to a document number at or after a given document number
is done in the skipTo() methods.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 11:25:30 2006
Return-Path: <java-user-return-21736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84809 invoked from network); 1 Jul 2006 11:25:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 11:25:30 -0000
Received: (qmail 53258 invoked by uid 500); 1 Jul 2006 11:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53226 invoked by uid 500); 1 Jul 2006 11:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53211 invoked by uid 99); 1 Jul 2006 11:25:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 04:25:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.210] (HELO pro7.rediffmailpro.com) (203.199.83.210)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Jul 2006 04:25:23 -0700
Received: (qmail 31223 invoked from network); 1 Jul 2006 11:23:05 -0000
Received: from unknown (HELO Amit) (59.181.103.41)
  by mailserver with SMTP; 1 Jul 2006 11:23:05 -0000
Reply-To: <amitk@techepoch.com>
From: "Amit" <amitk@techepoch.com>
To: <java-user@lucene.apache.org>
Subject: RE: how Boolean query work internally  in lucene
Date: Sat, 1 Jul 2006 16:54:55 +0530
Message-ID: <APEIIFMNKNHNCFFBLFAKIEKDCAAA.amitk@techepoch.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
In-Reply-To: <200607011051.52204.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Paul for quick reply.

regards,
Amit

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
Sent: Saturday, July 01, 2006 2:22 PM
To: java-user@lucene.apache.org
Subject: Re: how Boolean query work internally in lucene


On Saturday 01 July 2006 09:37, Amit wrote:
> Hi All,
>
> I just want to know how the lucene processes the Boolean query
internally??
>
> As per my knowledge:
>
>    if I search for "java apache".

This is a PhraseQuery internally in Lucene.

>    Note: let consider i want documents that contents both words and i
> constructed boolean query for that (i.e. +java +apache).
>
>    Please let me clear if i wrong how lucene process this query?
>    First it search for all document for java then for apache and after
that
> it take the intersection of these to sets. is it?
>    if so where i want to know where lucene take the intersection and how
> process the query??

It's a mix of determining the documents per term and merging.
It works in the order of the internal document number, (which is the order
of addition to the index, ) for both sets of documents.
To determine the next matching document each set of documents
advances to the document number at or after the current document of the
other set, until both sets have the same document number.

The intersection is taken in ConjunctionScorer and the sets are
represented by a TermScorer, both viewable in this package:
http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene/se
arch/
Advancing to a document number at or after a given document number
is done in the skipTo() methods.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 12:36:41 2006
Return-Path: <java-user-return-21737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92280 invoked from network); 1 Jul 2006 12:36:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 12:36:40 -0000
Received: (qmail 82984 invoked by uid 500); 1 Jul 2006 12:36:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82949 invoked by uid 500); 1 Jul 2006 12:36:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82938 invoked by uid 99); 1 Jul 2006 12:36:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 05:36:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Jul 2006 05:36:33 -0700
Received: (qmail 21219 invoked from network); 1 Jul 2006 12:36:13 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@67.38.14.191)
  by ws6-3.us4.outblaze.com with SMTP; 1 Jul 2006 12:36:13 -0000
Message-ID: <44A66C3C.6090201@curtin.com>
Date: Sat, 01 Jul 2006 08:36:12 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sorting & SQL-Database
References: <200607010110.50154.dominik@dbruhn.de>
In-Reply-To: <200607010110.50154.dominik@dbruhn.de>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dominik Bruhn wrote:
> Hy,
> i use Lucene to index a SQL-Table which contains three fields: a index-field, 
> the text to search in and another field. When adding a lucene document I let 
> Lucene index the search-field and also save the id along with it in the 
> lucene index.
> 
> Uppon searching I collect all ids and add them to a java-string with commas in 
> between to issue a SQL-Query like this one:
> 
> SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);
> 
> Where LUCENERESULT is like 2,3,19,3,5.
> 
> This works fine but got one problem: The Search-Result of Lucene is order by 
> relevance and so the id-list is also sorted by relevance. But the result of 
> the SQL-Query is sorted by the id which destroys the relevance-sorting.
> 
> Does anybody know a work-arround?

Sounds like you need to save the score from your Lucene search along with the 
ids, and use them in an ORDER BY clause in your SQL statement.  One way to do 
this would be to put the Lucene results into a working / temporary table, join 
that table into your real table in the query, and ORDER BY score.  Something 
along these lines:

TRUNCATE TABLE tmptable;
INSERT INTO tmptable (id, score) VALUES ([LUCENEID1], [LUCENESCORE1]);
INSERT INTO tmptable (id, score) VALUES ([LUCENEID2], [LUCENESCORE2]);
...

SELECT b.id, b.addfield
FROM tmptable a, table b
WHERE (b.id = a.id)
ORDER BY a.score DESC;

ORDER BY is the normal way in SQL to get ordered results.  In general, there 
is no guarantee of ordering from a SELECT statement without ORDER BY (although 
most RDBMS engines tend to return the rows in the order they were INSERTed, 
possibly perturbed by subsequent DELETEs and UPDATEs).

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 01 12:56:28 2006
Return-Path: <java-user-return-21738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94352 invoked from network); 1 Jul 2006 12:56:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2006 12:56:28 -0000
Received: (qmail 90258 invoked by uid 500); 1 Jul 2006 12:56:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90230 invoked by uid 500); 1 Jul 2006 12:56:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90219 invoked by uid 99); 1 Jul 2006 12:56:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 05:56:23 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 05:56:22 -0700
Received: by py-out-1112.google.com with SMTP id d80so1003447pyd
        for <java-user@lucene.apache.org>; Sat, 01 Jul 2006 05:56:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d54besNPusGC/E/v08jUZntNAMuHS3Bak4YYhTU9QWJOS4b+qAF8mczxpgJt0E04UBU0uS419W07mf4kRTnuatsMZ9029hLos73PTE6LUSoPgOXHWW7K6hUKPVxNfyZgZfi9BYjh5o9wSBC+pwHRBk0Kon6bn0bqYw9+lS3vPAg=
Received: by 10.35.78.9 with SMTP id f9mr1350432pyl;
        Sat, 01 Jul 2006 05:56:01 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Sat, 1 Jul 2006 05:56:01 -0700 (PDT)
Message-ID: <359a92830607010556l443365aav6142ce1d72c1c9e7@mail.gmail.com>
Date: Sat, 1 Jul 2006 08:56:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Null field values
In-Reply-To: <586B46B62C73C44AA8F4302E01A84A84611F@exchange.gotuit.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44015_7200761.1151758561748"
References: <586B46B62C73C44AA8F4302E01A84A84611F@exchange.gotuit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44015_7200761.1151758561748
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When you indexed the fields you can't get back, did you use Field.Store.YES?
I've been confused by the fact that Luke can "reconstruct" fields that
aren't stored, but are indexed....

If that isn't the problem, perhaps you could post some code snippets.....

Best
Erick

------=_Part_44015_7200761.1151758561748--

From java-user-return-21739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 02 06:58:14 2006
Return-Path: <java-user-return-21739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37540 invoked from network); 2 Jul 2006 06:58:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jul 2006 06:58:14 -0000
Received: (qmail 76277 invoked by uid 500); 2 Jul 2006 06:58:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76184 invoked by uid 500); 2 Jul 2006 06:58:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76173 invoked by uid 99); 2 Jul 2006 06:58:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 23:58:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [132.68.238.33] (HELO mailgw2.technion.ac.il) (132.68.238.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Jul 2006 23:58:05 -0700
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id 94CD939021B
	for <java-user@lucene.apache.org>; Sun,  2 Jul 2006 09:57:41 +0300 (IDT)
X-Virus-Scanned: by amavisd-new at technion.ac.il
Received: from mailgw2.technion.ac.il ([127.0.0.1])
	by localhost (mailgw2.technion.ac.il [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id yO1rKgE7DOyQ for <java-user@lucene.apache.org>;
	Sun,  2 Jul 2006 09:57:41 +0300 (IDT)
Received: from fermat.math.technion.ac.il (fermat.math.technion.ac.il [132.68.115.6])
	by mailgw2.technion.ac.il (Postfix) with ESMTP id 3EEEE390263
	for <java-user@lucene.apache.org>; Sun,  2 Jul 2006 09:57:36 +0300 (IDT)
Received: from fermat.math.technion.ac.il (localhost [127.0.0.1])
	by fermat.math.technion.ac.il (8.12.10/8.12.10) with ESMTP id k626vZlf005485
	for <java-user@lucene.apache.org>; Sun, 2 Jul 2006 09:57:35 +0300 (IDT)
Received: (from nyh@localhost)
	by fermat.math.technion.ac.il (8.12.10/8.12.10/Submit) id k626vZoM005484
	for java-user@lucene.apache.org; Sun, 2 Jul 2006 09:57:35 +0300 (IDT)
X-Authentication-Warning: fermat.math.technion.ac.il: nyh set sender to nyh@math.technion.ac.il using -f
Date: Sun, 2 Jul 2006 09:57:35 +0300
From: "Nadav Har'El" <nyh@math.technion.ac.il>
To: java-user@lucene.apache.org
Subject: Re: HitCollector and Sort Objects
Message-ID: <20060702065735.GA5026@fermat.math.technion.ac.il>
References: <44A446F5.8000505@getopt.org> <20060629235351.11620.qmail@web34105.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <20060629235351.11620.qmail@web34105.mail.mud.yahoo.com>
User-Agent: Mutt/1.4.2i
Hebrew-Date: 6 Tammuz 5766
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, Jun 29, 2006, James Pine wrote about "HitCollector and Sort Objects":
> I have one type of search where I pass in a Query and
> a Sort (built with a SortField and Decompresses) and
> deal with the Hits object, and another which takes a
> Query and a HitCollector, which I then run my own
> sorting on the results.
> 
> I'd like to combine both into one call so that I can
> get the results sorted and have the collected data
> available. Is that crazy talk? Does the way document
> ids stream through the HitCollector prevent sorting
> them first?

The best thing for you to do without changing Lucene is to use the

	search(Query query, HitCollector results)

method. The collect() in the HitCollector you'll write will do what you
want it to do, and finally call collect() of a TopFieldDocCollector
object that you'll creat. TopFieldDocCollector collects the top-ranking
documents using a given Sort (see its documentation).

This will give you a "TopDocs", not a "Hits" object. But when you know
in advance how many results you want (which is almost always the case),
this is enough for you.

I raised the idea of having a search() method which returns a Hits and
calls a HitCollector, but was convinced that TopDocs+HitCollector is
actually better. See:

http://www.gossamer-threads.com/lists/lucene/java-dev/37277

Maybe this should be in the FAQ.

-- 
Nadav Har'El                        |        Sunday, Jul 2 2006, 6 Tammuz 5766
IBM Haifa Research Lab              |-----------------------------------------
                                    |Recursive, adj.: See Recursive
http://nadav.harel.org.il           |

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 02 11:38:31 2006
Return-Path: <java-user-return-21740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7705 invoked from network); 2 Jul 2006 11:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jul 2006 11:38:31 -0000
Received: (qmail 18366 invoked by uid 500); 2 Jul 2006 11:38:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18331 invoked by uid 500); 2 Jul 2006 11:38:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18316 invoked by uid 99); 2 Jul 2006 11:38:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jul 2006 04:38:25 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of foxwu718@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jul 2006 04:38:24 -0700
Received: by nf-out-0910.google.com with SMTP id p46so769493nfa
        for <java-user@lucene.apache.org>; Sun, 02 Jul 2006 04:38:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=hL/CT8r69ECK0HJZWB8uw+3xghLILIzlKvZ7KxQy+AOLo27MGsvHQd6WMQGEBoU/XqusHR4a27Rl5ub4F09gHHyMuYzbGYHzRa5IKgAQA1IA5pM10VVWrV0Ecu8fbok18keg5F0yDMzqkfxmWNi1tiAwt9m1VGbFDnt2/cabXbk=
Received: by 10.48.43.11 with SMTP id q11mr1566307nfq;
        Sun, 02 Jul 2006 04:38:02 -0700 (PDT)
Received: by 10.48.221.2 with HTTP; Sun, 2 Jul 2006 04:38:02 -0700 (PDT)
Message-ID: <9e7ba420607020438u7a5f35e7l5220f7b6b4f2ae48@mail.gmail.com>
Date: Sun, 2 Jul 2006 19:38:02 +0800
From: "wu fox" <foxwu718@gmail.com>
To: java-user@lucene.apache.org
Subject: How to index chm and ppt files?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29988_13932919.1151840282876"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_29988_13932919.1151840282876
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgYWxsOgogSGFzIGFueW9uZSBpbmRleGVkIGNobSBhbmQgcHB0IGZpbGVzP0xJQSBkb2Vzbid0
IGhhdmUgYW4gYW5zd2VyIDooIHRoYW5rcwppbiBhZHZhbmNlCi0tIAqwrsn6u+6jrLCuRk9YCg==
------=_Part_29988_13932919.1151840282876--

From java-user-return-21741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 02 14:15:01 2006
Return-Path: <java-user-return-21741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42810 invoked from network); 2 Jul 2006 14:15:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jul 2006 14:15:01 -0000
Received: (qmail 97372 invoked by uid 500); 2 Jul 2006 14:14:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97334 invoked by uid 500); 2 Jul 2006 14:14:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97320 invoked by uid 99); 2 Jul 2006 14:14:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jul 2006 07:14:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Jul 2006 07:14:54 -0700
Received: from fluffy.internal.torchbox.com ([192.168.1.20])
	by fluffy.torchbox.com with esmtp (Exim 4.50)
	id 1Fx2iT-0004Z6-KP
	for java-user@lucene.apache.org; Sun, 02 Jul 2006 15:14:30 +0100
Date: Sun, 2 Jul 2006 15:14:28 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@fluffy.internal.torchbox.com
To: java-user@lucene.apache.org
Subject: Re: How to index chm and ppt files?
In-Reply-To: <9e7ba420607020438u7a5f35e7l5220f7b6b4f2ae48@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607021511370.16235@fluffy.internal.torchbox.com>
References: <9e7ba420607020438u7a5f35e7l5220f7b6b4f2ae48@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Score: -104.4 (---------------------------------------------------)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sun, 2 Jul 2006, wu fox wrote:
> Has anyone indexed chm and ppt files?

For powerpoint, use hslf from POI:
	http://jakarta.apache.org/poi/hslf/quick-guide.html

> LIA doesn't have an answer :(

Try the lucene wiki FAQ (esp section 3):
	http://wiki.apache.org/jakarta-lucene/LuceneFAQ

It has entries for many of the more common formats, and you can add others
as you find them

Nick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 08:52:46 2006
Return-Path: <java-user-return-21742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1497 invoked from network); 3 Jul 2006 08:52:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 08:52:45 -0000
Received: (qmail 950 invoked by uid 500); 3 Jul 2006 08:52:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 912 invoked by uid 500); 3 Jul 2006 08:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 900 invoked by uid 99); 3 Jul 2006 08:52:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 01:52:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterv85@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 01:52:37 -0700
Received: by ug-out-1314.google.com with SMTP id u2so1413352uge
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 01:52:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=U2u9qLf+zgLaczbS4QV5y3m1s0Ejl9JbKI2uSkCDAuGoSKGaZyRkn1FsgKCR50fRYy9mDT9oCKNISfxQd8ck2kCjiPd+XJ74DJQlxEWyxFZcgkXhvvmoPLoBgoQ7uCocZje/Lp3obZH2ODcI7PCeKIVv2D8wwABtC04FEmcyOgc=
Received: by 10.67.29.12 with SMTP id g12mr5541578ugj;
        Mon, 03 Jul 2006 01:52:15 -0700 (PDT)
Received: by 10.66.223.5 with HTTP; Mon, 3 Jul 2006 01:52:15 -0700 (PDT)
Message-ID: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com>
Date: Mon, 3 Jul 2006 09:52:15 +0100
From: "peter velthuis" <peterv85@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing very slow.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

When i start the program its fast.. about 10 docs per second. but
after about 15000 it slows down very much. Now it does 1 doc per
second and it is at nr# 40 000 after a whole night indexing. These are
VERY small docs with very little information.. THis is what and how i
index it:

      Document doc = new Document();
                                 doc.add(new Field("field1", field1,
Field.Store.YES,
                        Field.Index.TOKENIZED));
                                 doc.add(new Field("field2", field2,
Field.Store.YES,
                        Field.Index.TOKENIZED));
                                 doc.add(new Field("field3", field3,
Field.Store.YES,
                        Field.Index.TOKENIZED));
                                 doc.add(new Field("field4", field4,
Field.Store.YES,
                        Field.Index.TOKENIZED));
                                 doc.add(new Field("field5", field5,
Field.Store.YES,
                        Field.Index.TOKENIZED));
                                doc.add(new Field("field6", field6,
Field.Store.YES,
                        Field.Index.TOKENIZED));
                                doc.add(new Field("contents",
contents, Field.Store.NO,
                        Field.Index.TOKENIZED));



and this:


    String indexDirectory = "lucdex2";

    private void indexDocument(Document document) throws Exception {
        Analyzer analyzer  = new StandardAnalyzer();
        IndexWriter writer = new IndexWriter(indexDirectory, analyzer, false);
      //  writer.setUseCompoundFile(true);
        writer.addDocument(document);
        writer.optimize();
        writer.close();



I read the data out mysql database.. but that cant be the problem..
since data is in memory.

Also i use cygwin, when i try indexing on windows in a program like
netbeans or BlueJ it crashes windows after about 5000 docs. it sais
"beep" and a complete shutdown...

Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 09:37:16 2006
Return-Path: <java-user-return-21743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16025 invoked from network); 3 Jul 2006 09:37:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 09:37:15 -0000
Received: (qmail 66274 invoked by uid 500); 3 Jul 2006 09:37:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66247 invoked by uid 500); 3 Jul 2006 09:37:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66233 invoked by uid 99); 3 Jul 2006 09:37:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 02:37:09 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [158.36.80.149] (HELO pat.hia.no) (158.36.80.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 02:37:07 -0700
Received: from [158.36.80.151] (helo=mail-mx2.hia.no)
	by pat.hia.no with esmtp (Exim 4.44)
	id 1FxKrC-0004xT-Pf
	for java-user@lucene.apache.org; Mon, 03 Jul 2006 11:36:43 +0200
Received: from localhost ([127.0.0.1] helo=mail-mx2.hia.no)
	by mail-mx2.hia.no with esmtp (Exim 4.44)
	id 1FxKrC-0001e2-LK
	for java-user@lucene.apache.org; Mon, 03 Jul 2006 11:36:42 +0200
Received: from gnomade83.grm.hia.no ([128.39.50.83] helo=lettmelk.grm.hia.no)
	by mail-mx2.hia.no with esmtp (Exim 4.44)
	id 1FxKrB-0001dm-Jv
	for java-user@lucene.apache.org; Mon, 03 Jul 2006 11:36:42 +0200
Date: Mon, 03 Jul 2006 11:36:29 +0200
To: java-user@lucene.apache.org
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tb3wy3iyoftp72@lettmelk.grm.hia.no>
In-Reply-To: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-3, 29.06.2006), Outbound message
X-Antivirus-Status: Clean
Subject: Re: Indexing very slow.
X-Spam-Checker-Version: SpamAssassin 3.0.6 (2005-12-07) on pat.hia.no
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Mon, 31 Jan 2005 16:42:16 +0100)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.5 required=5.0 tests=GREYLIST_ISWHITE 
	autolearn=failed version=3.0.6
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My guess is if that you actually do a complete select * from you db, and=
  =

manage all objects all at once, this will be a problem for your jvm, may=
be  =

running out of memory is the problem you encounter, strings tend to be a=
  =

bit of a memory issue in java :(

My suggestion is that you do paginating and offsetting while getting fro=
m  =

db (and indexing the results).

so.. you could managed your "last indexed" doc, predefine a "step"  =

variable, then select with a limit of lastindexed, step, then updating  =

your last indexed variable for each iteration. Of course the step variab=
le  =

should not be too low either, because this will demand to much load on t=
he  =

database connection.

Also, you might reconsider tokenizing all fields... is it neccessary? Yo=
u  =

have to store all of them? (i dont know the usage of your index, so its =
a  =

bit hard to know for sure)

- Aleksander

On Mon, 03 Jul 2006 10:52:15 +0200, peter velthuis <peterv85@gmail.com> =
 =

wrote:

> When i start the program its fast.. about 10 docs per second. but
> after about 15000 it slows down very much. Now it does 1 doc per
> second and it is at nr# 40 000 after a whole night indexing. These are=

> VERY small docs with very little information.. THis is what and how i
> index it:
>
>       Document doc =3D new Document();
>                                  doc.add(new Field("field1", field1,
> Field.Store.YES,
>                         Field.Index.TOKENIZED));
>                                  doc.add(new Field("field2", field2,
> Field.Store.YES,
>                         Field.Index.TOKENIZED));
>                                  doc.add(new Field("field3", field3,
> Field.Store.YES,
>                         Field.Index.TOKENIZED));
>                                  doc.add(new Field("field4", field4,
> Field.Store.YES,
>                         Field.Index.TOKENIZED));
>                                  doc.add(new Field("field5", field5,
> Field.Store.YES,
>                         Field.Index.TOKENIZED));
>                                 doc.add(new Field("field6", field6,
> Field.Store.YES,
>                         Field.Index.TOKENIZED));
>                                 doc.add(new Field("contents",
> contents, Field.Store.NO,
>                         Field.Index.TOKENIZED));
>
>
>
> and this:
>
>
>     String indexDirectory =3D "lucdex2";
>
>     private void indexDocument(Document document) throws Exception {
>         Analyzer analyzer  =3D new StandardAnalyzer();
>         IndexWriter writer =3D new IndexWriter(indexDirectory, analyze=
r,  =

> false);
>       //  writer.setUseCompoundFile(true);
>         writer.addDocument(document);
>         writer.optimize();
>         writer.close();
>
>
>
> I read the data out mysql database.. but that cant be the problem..
> since data is in memory.
>
> Also i use cygwin, when i try indexing on windows in a program like
> netbeans or BlueJ it crashes windows after about 5000 docs. it sais
> "beep" and a complete shutdown...
>
> Peter
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 09:43:42 2006
Return-Path: <java-user-return-21744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20337 invoked from network); 3 Jul 2006 09:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 09:43:41 -0000
Received: (qmail 79000 invoked by uid 500); 3 Jul 2006 09:43:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78974 invoked by uid 500); 3 Jul 2006 09:43:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78885 invoked by uid 99); 3 Jul 2006 09:43:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 02:43:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.20.168.25] (HELO mail.spline-software.com) (217.20.168.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 02:43:31 -0700
Received: by mail.spline-software.com (Postfix, from userid 12)
	id 876FE1A7928; Mon,  3 Jul 2006 12:43:07 +0300 (EEST)
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by mail.spline-software.com (Postfix) with ESMTP id 878AC1A76FA
	for <java-user@lucene.apache.org>; Mon,  3 Jul 2006 12:43:06 +0300 (EEST)
Message-ID: <44A8E6A7.7050305@i-hypergrid.com>
Date: Mon, 03 Jul 2006 12:43:03 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Indexing very slow.
References: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com>
In-Reply-To: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com>
Content-Type: multipart/alternative;
 boundary="------------080305020603010805080800"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on spline.jforce
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.8 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_MESSAGE autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------080305020603010805080800
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Problem is hidden in these lines:
 >       writer.optimize();
 >       writer.close();

You should keep one index writer open for all document additions and 
close it only after adding last document.

Optimize() merges all index segments to single segment and as index 
grows it takes longer and longer. Optimizing has no impact on indexing 
so it should be performed once at the end of indexing to optimize index 
for searching.

peter velthuis wrote:
> When i start the program its fast.. about 10 docs per second. but
> after about 15000 it slows down very much. Now it does 1 doc per
> second and it is at nr# 40 000 after a whole night indexing. These are
> VERY small docs with very little information.. THis is what and how i
> index it:
>
>      Document doc = new Document();
>                                 doc.add(new Field("field1", field1,
> Field.Store.YES,
>                        Field.Index.TOKENIZED));
>                                 doc.add(new Field("field2", field2,
> Field.Store.YES,
>                        Field.Index.TOKENIZED));
>                                 doc.add(new Field("field3", field3,
> Field.Store.YES,
>                        Field.Index.TOKENIZED));
>                                 doc.add(new Field("field4", field4,
> Field.Store.YES,
>                        Field.Index.TOKENIZED));
>                                 doc.add(new Field("field5", field5,
> Field.Store.YES,
>                        Field.Index.TOKENIZED));
>                                doc.add(new Field("field6", field6,
> Field.Store.YES,
>                        Field.Index.TOKENIZED));
>                                doc.add(new Field("contents",
> contents, Field.Store.NO,
>                        Field.Index.TOKENIZED));
>
>
>
> and this:
>
>
>    String indexDirectory = "lucdex2";
>
>    private void indexDocument(Document document) throws Exception {
>        Analyzer analyzer  = new StandardAnalyzer();
>        IndexWriter writer = new IndexWriter(indexDirectory, analyzer, 
> false);
>      //  writer.setUseCompoundFile(true);
>        writer.addDocument(document);
>        writer.optimize();
>        writer.close();
>
>
>
> I read the data out mysql database.. but that cant be the problem..
> since data is in memory.
>
> Also i use cygwin, when i try indexing on windows in a program like
> netbeans or BlueJ it crashes windows after about 5000 docs. it sais
> "beep" and a complete shutdown...
>
> Peter
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
regards,
Volodymyr Bychkoviak


--------------080305020603010805080800--

From java-user-return-21745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 10:00:42 2006
Return-Path: <java-user-return-21745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28546 invoked from network); 3 Jul 2006 10:00:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 10:00:42 -0000
Received: (qmail 11341 invoked by uid 500); 3 Jul 2006 10:00:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11316 invoked by uid 500); 3 Jul 2006 10:00:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11305 invoked by uid 99); 3 Jul 2006 10:00:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:00:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [158.36.80.149] (HELO pat.hia.no) (158.36.80.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:00:34 -0700
Received: from [158.36.80.150] (helo=mail-mx1.hia.no)
	by pat.hia.no with esmtp (Exim 4.44)
	id 1FxLDv-0005Am-9o
	for java-user@lucene.apache.org; Mon, 03 Jul 2006 12:00:12 +0200
Received: from localhost ([127.0.0.1] helo=mail-mx1.hia.no)
	by mail-mx1.hia.no with esmtp (Exim 4.44)
	id 1FxLDv-00082z-4r
	for java-user@lucene.apache.org; Mon, 03 Jul 2006 12:00:11 +0200
Received: from gnomade83.grm.hia.no ([128.39.50.83] helo=lettmelk.grm.hia.no)
	by mail-mx1.hia.no with esmtp (Exim 4.44)
	id 1FxLDu-00082p-B8
	for java-user@lucene.apache.org; Mon, 03 Jul 2006 12:00:10 +0200
Date: Mon, 03 Jul 2006 11:59:58 +0200
To: java-user@lucene.apache.org
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com> <44A8E6A7.7050305@i-hypergrid.com>
Content-Transfer-Encoding: Quoted-Printable
Message-ID: <op.tb3x18u4oftp72@lettmelk.grm.hia.no>
In-Reply-To: <44A8E6A7.7050305@i-hypergrid.com>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0626-3, 29.06.2006), Outbound message
X-Antivirus-Status: Clean
Subject: Re: Indexing very slow.
X-Spam-Checker-Version: SpamAssassin 3.0.6 (2005-12-07) on pat.hia.no
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Mon, 31 Jan 2005 16:42:16 +0100)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.5 required=5.0 tests=GREYLIST_ISWHITE 
	autolearn=failed version=3.0.6
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah, didnt see that, yeah, you should have something like

new IndexWriter..

	for each document, writer.add

writer.optimize()
writer.close()

batching it up will make it faster, yes

On Mon, 03 Jul 2006 11:43:03 +0200, Volodymyr Bychkoviak  =

<vbychkoviak@i-hypergrid.com> wrote:

> Problem is hidden in these lines:
>  >       writer.optimize();
>  >       writer.close();
>
> You should keep one index writer open for all document additions and
> close it only after adding last document.
>
> Optimize() merges all index segments to single segment and as index
> grows it takes longer and longer. Optimizing has no impact on indexing=

> so it should be performed once at the end of indexing to optimize inde=
x
> for searching.
>
> peter velthuis wrote:
>> When i start the program its fast.. about 10 docs per second. but
>> after about 15000 it slows down very much. Now it does 1 doc per
>> second and it is at nr# 40 000 after a whole night indexing. These ar=
e
>> VERY small docs with very little information.. THis is what and how i=

>> index it:
>>
>>      Document doc =3D new Document();
>>                                 doc.add(new Field("field1", field1,
>> Field.Store.YES,
>>                        Field.Index.TOKENIZED));
>>                                 doc.add(new Field("field2", field2,
>> Field.Store.YES,
>>                        Field.Index.TOKENIZED));
>>                                 doc.add(new Field("field3", field3,
>> Field.Store.YES,
>>                        Field.Index.TOKENIZED));
>>                                 doc.add(new Field("field4", field4,
>> Field.Store.YES,
>>                        Field.Index.TOKENIZED));
>>                                 doc.add(new Field("field5", field5,
>> Field.Store.YES,
>>                        Field.Index.TOKENIZED));
>>                                doc.add(new Field("field6", field6,
>> Field.Store.YES,
>>                        Field.Index.TOKENIZED));
>>                                doc.add(new Field("contents",
>> contents, Field.Store.NO,
>>                        Field.Index.TOKENIZED));
>>
>>
>>
>> and this:
>>
>>
>>    String indexDirectory =3D "lucdex2";
>>
>>    private void indexDocument(Document document) throws Exception {
>>        Analyzer analyzer  =3D new StandardAnalyzer();
>>        IndexWriter writer =3D new IndexWriter(indexDirectory, analyze=
r,
>> false);
>>      //  writer.setUseCompoundFile(true);
>>        writer.addDocument(document);
>>        writer.optimize();
>>        writer.close();
>>
>>
>>
>> I read the data out mysql database.. but that cant be the problem..
>> since data is in memory.
>>
>> Also i use cygwin, when i try indexing on windows in a program like
>> netbeans or BlueJ it crashes windows after about 5000 docs. it sais
>> "beep" and a complete shutdown...
>>
>> Peter
>>
>> ---------------------------------------------------------------------=

>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>



-- =

Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 10:34:20 2006
Return-Path: <java-user-return-21746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43525 invoked from network); 3 Jul 2006 10:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 10:34:20 -0000
Received: (qmail 70769 invoked by uid 500); 3 Jul 2006 10:34:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70725 invoked by uid 500); 3 Jul 2006 10:34:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70714 invoked by uid 99); 3 Jul 2006 10:34:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:34:13 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.54.11.87] (HELO bmapps.persistent.co.in) (202.54.11.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:34:12 -0700
Received: from mail.persistent.co.in (unknown [10.12.0.1])
	by bmapps.persistent.co.in (Symantec Mail Security) with ESMTP id 631591016;
	Mon,  3 Jul 2006 15:59:50 +0530 (IST)
Received: (from mail6.persistent.co.in [59.163.69.2])
	by mail6.persistent.co.in (MOS 3.7.5-GA)
	with HTTPS/1.1 id AMD25482 (AUTH amit_kkumar);
	Mon,  3 Jul 2006 15:59:48 +0530 (IST)
From: <amit_kkumar@persistent.co.in>
Subject: Re: question
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
X-Mailer: Mirapoint Webmail Direct 3.7.5-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding:7bit
Message-Id: <20060703155948.AMD25482@mail6.persistent.co.in>
Date: Mon,  3 Jul 2006 15:59:48 +0530 (IST)
X-Junkmail-Whitelist: YES (by domain whitelist at mail6.persistent.co.in)
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thanks it is working fine now 

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 10:37:40 2006
Return-Path: <java-user-return-21747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45050 invoked from network); 3 Jul 2006 10:37:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 10:37:39 -0000
Received: (qmail 75925 invoked by uid 500); 3 Jul 2006 10:37:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75878 invoked by uid 500); 3 Jul 2006 10:37:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75857 invoked by uid 99); 3 Jul 2006 10:37:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:37:30 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterv85@gmail.com designates 72.14.214.194 as permitted sender)
Received: from [72.14.214.194] (HELO hu-out-0102.google.com) (72.14.214.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:37:26 -0700
Received: by hu-out-0102.google.com with SMTP id 28so639217hub
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 03:37:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dJ4dP/Dzb308CCuxHmwXOBYiQZspkJHa44C640US3xWf3byV4uDaNZBs+qo625ajzYI1jDNDrUPTPPj2wWX/lOQ3OLMnG1cu0D/IhIzh2wLhmMt/6GfabsvfojVFn7U4juhcn4NAUAAcg+JnZBGl0JU0/caXH3S8moMQAvu0bt0=
Received: by 10.67.19.13 with SMTP id w13mr5615885ugi;
        Mon, 03 Jul 2006 03:37:04 -0700 (PDT)
Received: by 10.66.223.5 with HTTP; Mon, 3 Jul 2006 03:37:04 -0700 (PDT)
Message-ID: <3d159d980607030337i1c737d10ie165542af03a30a2@mail.gmail.com>
Date: Mon, 3 Jul 2006 11:37:04 +0100
From: "peter velthuis" <peterv85@gmail.com>
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
Subject: Re: Indexing very slow.
In-Reply-To: <op.tb3wy3iyoftp72@lettmelk.grm.hia.no>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com>
	 <op.tb3wy3iyoftp72@lettmelk.grm.hia.no>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I select it in parts, chunks of 5000  records with the limit keyword..
the thing is it starts very fast..but then slows down so i doubt it
has to do with tokenizing


2006/7/3, Aleksander M. Stensby <aleksander.stensby@integrasco.no>:
> My guess is if that you actually do a complete select * from you db, and
> manage all objects all at once, this will be a problem for your jvm, maybe
> running out of memory is the problem you encounter, strings tend to be a
> bit of a memory issue in java :(
>
> My suggestion is that you do paginating and offsetting while getting from
> db (and indexing the results).
>
> so.. you could managed your "last indexed" doc, predefine a "step"
> variable, then select with a limit of lastindexed, step, then updating
> your last indexed variable for each iteration. Of course the step variable
> should not be too low either, because this will demand to much load on the
> database connection.
>
> Also, you might reconsider tokenizing all fields... is it neccessary? You
> have to store all of them? (i dont know the usage of your index, so its a
> bit hard to know for sure)
>
> - Aleksander
>
> On Mon, 03 Jul 2006 10:52:15 +0200, peter velthuis <peterv85@gmail.com>
> wrote:
>
> > When i start the program its fast.. about 10 docs per second. but
> > after about 15000 it slows down very much. Now it does 1 doc per
> > second and it is at nr# 40 000 after a whole night indexing. These are
> > VERY small docs with very little information.. THis is what and how i
> > index it:
> >
> >       Document doc = new Document();
> >                                  doc.add(new Field("field1", field1,
> > Field.Store.YES,
> >                         Field.Index.TOKENIZED));
> >                                  doc.add(new Field("field2", field2,
> > Field.Store.YES,
> >                         Field.Index.TOKENIZED));
> >                                  doc.add(new Field("field3", field3,
> > Field.Store.YES,
> >                         Field.Index.TOKENIZED));
> >                                  doc.add(new Field("field4", field4,
> > Field.Store.YES,
> >                         Field.Index.TOKENIZED));
> >                                  doc.add(new Field("field5", field5,
> > Field.Store.YES,
> >                         Field.Index.TOKENIZED));
> >                                 doc.add(new Field("field6", field6,
> > Field.Store.YES,
> >                         Field.Index.TOKENIZED));
> >                                 doc.add(new Field("contents",
> > contents, Field.Store.NO,
> >                         Field.Index.TOKENIZED));
> >
> >
> >
> > and this:
> >
> >
> >     String indexDirectory = "lucdex2";
> >
> >     private void indexDocument(Document document) throws Exception {
> >         Analyzer analyzer  = new StandardAnalyzer();
> >         IndexWriter writer = new IndexWriter(indexDirectory, analyzer,
> > false);
> >       //  writer.setUseCompoundFile(true);
> >         writer.addDocument(document);
> >         writer.optimize();
> >         writer.close();
> >
> >
> >
> > I read the data out mysql database.. but that cant be the problem..
> > since data is in memory.
> >
> > Also i use cygwin, when i try indexing on windows in a program like
> > netbeans or BlueJ it crashes windows after about 5000 docs. it sais
> > "beep" and a complete shutdown...
> >
> > Peter
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
> Tlf.: +47 41 22 82 72
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 10:51:46 2006
Return-Path: <java-user-return-21748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50787 invoked from network); 3 Jul 2006 10:51:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 10:51:44 -0000
Received: (qmail 90731 invoked by uid 500); 3 Jul 2006 10:51:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90306 invoked by uid 500); 3 Jul 2006 10:51:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90295 invoked by uid 99); 3 Jul 2006 10:51:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:51:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:51:36 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id 60702108CAC; Mon,  3 Jul 2006 12:53:36 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 71440108CAB
	for <java-user@lucene.apache.org>; Mon,  3 Jul 2006 12:53:35 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id A1D0BC069
	for <java-user@lucene.apache.org>; Mon,  3 Jul 2006 12:52:02 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: Indexing PPT classes hslf
Date: Mon, 3 Jul 2006 12:51:09 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <APEIIFMNKNHNCFFBLFAKIEKDCAAA.amitk@techepoch.com>
Thread-Index: AcadASp8NVeva0HSTQK0gD7Sgg8g3QBirEAA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060703105202.A1D0BC069@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all!

I=B4ve used the classes =
"org.apache.poi.hslf.extractor.PowerPointExtractor"
and "org.apache.poi.hslf.extractor.QuickButCruddyTextExtractor" with
lucene2.0 to extract text but when I try to use the other classes such =
as
"org.apache.poi.hslf.HSLFSlideShow", "org.apache.poi.hslf.record.Record" =
I
get the following error [Exception in thread "main"
java.lang.NoSuchMethodError:main]

Can anyone help me?
Thanks

Regards,
Teresa.


-----Mensaje original-----
De: Amit [mailto:amitk@techepoch.com]=20
Enviado el: s=E1bado, 01 de julio de 2006 13:25
Para: java-user@lucene.apache.org
Asunto: RE: how Boolean query work internally in lucene

Thanks Paul for quick reply.

regards,
Amit

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
Sent: Saturday, July 01, 2006 2:22 PM
To: java-user@lucene.apache.org
Subject: Re: how Boolean query work internally in lucene


On Saturday 01 July 2006 09:37, Amit wrote:
> Hi All,
>
> I just want to know how the lucene processes the Boolean query
internally??
>
> As per my knowledge:
>
>    if I search for "java apache".

This is a PhraseQuery internally in Lucene.

>    Note: let consider i want documents that contents both words and i
> constructed boolean query for that (i.e. +java +apache).
>
>    Please let me clear if i wrong how lucene process this query?
>    First it search for all document for java then for apache and after
that
> it take the intersection of these to sets. is it?
>    if so where i want to know where lucene take the intersection and =
how
> process the query??

It's a mix of determining the documents per term and merging.
It works in the order of the internal document number, (which is the =
order
of addition to the index, ) for both sets of documents.
To determine the next matching document each set of documents
advances to the document number at or after the current document of the
other set, until both sets have the same document number.

The intersection is taken in ConjunctionScorer and the sets are
represented by a TermScorer, both viewable in this package:
http://svn.apache.org/viewvc/lucene/java/trunk/src/java/org/apache/lucene=
/se
arch/
Advancing to a document number at or after a given document number
is done in the skipTo() methods.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 10:57:53 2006
Return-Path: <java-user-return-21749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55468 invoked from network); 3 Jul 2006 10:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 10:57:53 -0000
Received: (qmail 670 invoked by uid 500); 3 Jul 2006 10:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 642 invoked by uid 500); 3 Jul 2006 10:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 631 invoked by uid 99); 3 Jul 2006 10:57:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:57:46 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of peterv85@gmail.com designates 72.14.214.197 as permitted sender)
Received: from [72.14.214.197] (HELO hu-out-0102.google.com) (72.14.214.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 03:57:46 -0700
Received: by hu-out-0102.google.com with SMTP id 28so643003hub
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 03:57:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=m45UfS1AfOUNYgicXflkQYvNexXd+hORcbeAQzOwIPxBX9SJWH7Ys6Atp/9e90UoG17bhZohqkYO9aY7kztn78rsNQnafKCR7+eaDmJv+RoLffsmjrDABgAMXwm8NWwea21FaED47kY7B6YwahuCZ0sT2BFRerDl8rd66TtUSzA=
Received: by 10.66.221.19 with SMTP id t19mr5647631ugg;
        Mon, 03 Jul 2006 03:57:24 -0700 (PDT)
Received: by 10.66.223.5 with HTTP; Mon, 3 Jul 2006 03:57:24 -0700 (PDT)
Message-ID: <3d159d980607030357g662886cbte7493fe3c3539ec1@mail.gmail.com>
Date: Mon, 3 Jul 2006 11:57:24 +0100
From: "peter velthuis" <peterv85@gmail.com>
To: java-user@lucene.apache.org, aleksander.stensby@integrasco.no
Subject: Re: Indexing very slow.
In-Reply-To: <op.tb3x18u4oftp72@lettmelk.grm.hia.no>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <3d159d980607030152n5d7bd2fbg7b88ea80eaae47d2@mail.gmail.com>
	 <44A8E6A7.7050305@i-hypergrid.com>
	 <op.tb3x18u4oftp72@lettmelk.grm.hia.no>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hehe that works.. its now racing thourgh 10 000 docs in a couple seconds :)

2006/7/3, Aleksander M. Stensby <aleksander.stensby@integrasco.no>:
> Ah, didnt see that, yeah, you should have something like
>
> new IndexWriter..
>
>         for each document, writer.add
>
> writer.optimize()
> writer.close()
>
> batching it up will make it faster, yes
>
> On Mon, 03 Jul 2006 11:43:03 +0200, Volodymyr Bychkoviak
> <vbychkoviak@i-hypergrid.com> wrote:
>
> > Problem is hidden in these lines:
> >  >       writer.optimize();
> >  >       writer.close();
> >
> > You should keep one index writer open for all document additions and
> > close it only after adding last document.
> >
> > Optimize() merges all index segments to single segment and as index
> > grows it takes longer and longer. Optimizing has no impact on indexing
> > so it should be performed once at the end of indexing to optimize index
> > for searching.
> >
> > peter velthuis wrote:
> >> When i start the program its fast.. about 10 docs per second. but
> >> after about 15000 it slows down very much. Now it does 1 doc per
> >> second and it is at nr# 40 000 after a whole night indexing. These are
> >> VERY small docs with very little information.. THis is what and how i
> >> index it:
> >>
> >>      Document doc = new Document();
> >>                                 doc.add(new Field("field1", field1,
> >> Field.Store.YES,
> >>                        Field.Index.TOKENIZED));
> >>                                 doc.add(new Field("field2", field2,
> >> Field.Store.YES,
> >>                        Field.Index.TOKENIZED));
> >>                                 doc.add(new Field("field3", field3,
> >> Field.Store.YES,
> >>                        Field.Index.TOKENIZED));
> >>                                 doc.add(new Field("field4", field4,
> >> Field.Store.YES,
> >>                        Field.Index.TOKENIZED));
> >>                                 doc.add(new Field("field5", field5,
> >> Field.Store.YES,
> >>                        Field.Index.TOKENIZED));
> >>                                doc.add(new Field("field6", field6,
> >> Field.Store.YES,
> >>                        Field.Index.TOKENIZED));
> >>                                doc.add(new Field("contents",
> >> contents, Field.Store.NO,
> >>                        Field.Index.TOKENIZED));
> >>
> >>
> >>
> >> and this:
> >>
> >>
> >>    String indexDirectory = "lucdex2";
> >>
> >>    private void indexDocument(Document document) throws Exception {
> >>        Analyzer analyzer  = new StandardAnalyzer();
> >>        IndexWriter writer = new IndexWriter(indexDirectory, analyzer,
> >> false);
> >>      //  writer.setUseCompoundFile(true);
> >>        writer.addDocument(document);
> >>        writer.optimize();
> >>        writer.close();
> >>
> >>
> >>
> >> I read the data out mysql database.. but that cant be the problem..
> >> since data is in memory.
> >>
> >> Also i use cygwin, when i try indexing on windows in a program like
> >> netbeans or BlueJ it crashes windows after about 5000 docs. it sais
> >> "beep" and a complete shutdown...
> >>
> >> Peter
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
>
> --
> Aleksander M. Stensby
> Software Developer
> Integrasco A/S
> aleksander.stensby@integrasco.no
> Tlf.: +47 41 22 82 72
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 13:11:53 2006
Return-Path: <java-user-return-21750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6360 invoked from network); 3 Jul 2006 13:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 13:11:52 -0000
Received: (qmail 72542 invoked by uid 500); 3 Jul 2006 13:11:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72313 invoked by uid 500); 3 Jul 2006 13:11:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72301 invoked by uid 99); 3 Jul 2006 13:11:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 06:11:45 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alessio.pace@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 06:11:42 -0700
Received: by nf-out-0910.google.com with SMTP id p46so1053041nfa
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 06:11:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=GbtigmPSVOdlnuZgonqIzDnyMtkWSNCvTK63knzNkeYlNNZ1YNMNTxK/U4AqpHcVRKQIkk1fdfZK9K1xAzjsfWI2QXRFmyJ2zhFnrudOiQJfc8I9vH8lxa1L+PzMk0sM4T+SB+8m14andTUYe62+F86Rb/3r64rUmqTq6ROriK0=
Received: by 10.49.27.10 with SMTP id e10mr2376553nfj;
        Mon, 03 Jul 2006 06:11:21 -0700 (PDT)
Received: by 10.48.162.9 with HTTP; Mon, 3 Jul 2006 06:11:21 -0700 (PDT)
Message-ID: <84987d20607030611y332146c5j1b9ad706bee0f79c@mail.gmail.com>
Date: Mon, 3 Jul 2006 15:11:21 +0200
From: "Alessio Pace" <alessio.pace@gmail.com>
To: java-user@lucene.apache.org
Subject: Unit testing: Hits not implementing an interface and being final
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_30565_28407237.1151932281678"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_30565_28407237.1151932281678
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

I wanted just to share my issues with unit testing a component collaborating
with a Hits object.

The scenario is: I have a web page pagination component (say, it shows N
results per page) over the Hits results found in the Lucene index.

I want to test the pagination itselft, so I would like to provide it with a
stub or mock Hits implementation. The problem is that Hits does not
implement and interface, is final and has no public constructor (I am using
Lucene 1.4.3, but the latest 2.x seems to be the same, which prevents me
from subclassing it or mocking it (with EasyMock2 for example).

So my solution would be to change my component collaborator type from Hits
to a MyHits interface, which has a MyHitsImpl that works by delegation on a
concrete Hits object..

Any thoughts about it?

Best regards,

-- 
Alessio Pace.
http://www.jroller.com/page/alessiopace

------=_Part_30565_28407237.1151932281678--

From java-user-return-21751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 14:07:58 2006
Return-Path: <java-user-return-21751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31244 invoked from network); 3 Jul 2006 14:07:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 14:07:58 -0000
Received: (qmail 67088 invoked by uid 500); 3 Jul 2006 14:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66869 invoked by uid 500); 3 Jul 2006 14:07:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66858 invoked by uid 99); 3 Jul 2006 14:07:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:07:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.40.70] (HELO fluffy.torchbox.com) (81.187.40.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:07:50 -0700
Received: from grenache.internal.torchbox.com ([192.168.1.81])
	by fluffy.torchbox.com with esmtp (Exim 4.50)
	id 1FxP5E-0001Hk-Od
	for java-user@lucene.apache.org; Mon, 03 Jul 2006 15:07:29 +0100
Date: Mon, 3 Jul 2006 15:07:28 +0100 (BST)
From: Nick Burch <nick@torchbox.com>
X-X-Sender: nick@localhost.localdomain
To: java-user@lucene.apache.org
Subject: Re: Indexing PPT classes hslf
In-Reply-To: <20060703105202.A1D0BC069@mad.isoco.net>
Message-ID: <Pine.LNX.4.64.0607031505330.3421@localhost.localdomain>
References: <20060703105202.A1D0BC069@mad.isoco.net>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="8323328-14969034-1151935648=:3421"
X-Spam-Score: -104.4 (---------------------------------------------------)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--8323328-14969034-1151935648=:3421
Content-Type: TEXT/PLAIN; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: QUOTED-PRINTABLE

On Mon, 3 Jul 2006, mcarcelen wrote:
> I=B4ve used the classes "org.apache.poi.hslf.extractor.PowerPointExtracto=
r"
> and "org.apache.poi.hslf.extractor.QuickButCruddyTextExtractor" with
> lucene2.0 to extract text but when I try to use the other classes such as
> "org.apache.poi.hslf.HSLFSlideShow", "org.apache.poi.hslf.record.Record" =
I
> get the following error [Exception in thread "main"
> java.lang.NoSuchMethodError:main]

FYI - you will probably have more luck asking on poi-users, rather than=20
here

As for your problem, are you trying to execute=20
"org.apache.poi.hslf.HSLFSlideShow"? If so, that's your problem. The only=
=20
HSLF classes with main methods (i.e. that you can directly call) are the=20
two extractor ones.

Nick

--8323328-14969034-1151935648=:3421
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--8323328-14969034-1151935648=:3421--

From java-user-return-21752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 14:15:09 2006
Return-Path: <java-user-return-21752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37138 invoked from network); 3 Jul 2006 14:15:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 14:15:09 -0000
Received: (qmail 83815 invoked by uid 500); 3 Jul 2006 14:15:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83787 invoked by uid 500); 3 Jul 2006 14:15:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83776 invoked by uid 99); 3 Jul 2006 14:15:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:15:02 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:15:01 -0700
Received: by py-out-1112.google.com with SMTP id d80so1498061pyd
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 07:14:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZutbuAlc8fKqm6wl7FCz2Xr10vxyglAW2oYcc9rTMlZyu+OkJmKyPqMIBMnI9h1OmsFM6zpEz+iF+7yb8C2Fp1UQmVMn17p7hNjvNPHWhghtwkob8fHTF/+I6UhlRNKIjaCfhSGBZ/A7Cb+eIfYl9Ve4I4tj0S7m9Y3LZ8BOhWM=
Received: by 10.35.84.16 with SMTP id m16mr2791438pyl;
        Mon, 03 Jul 2006 07:14:40 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Mon, 3 Jul 2006 07:14:40 -0700 (PDT)
Message-ID: <359a92830607030714g2bd0dbbfhde6044df5eca383c@mail.gmail.com>
Date: Mon, 3 Jul 2006 10:14:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unit testing: Hits not implementing an interface and being final
In-Reply-To: <84987d20607030611y332146c5j1b9ad706bee0f79c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13686_33109735.1151936080335"
References: <84987d20607030611y332146c5j1b9ad706bee0f79c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13686_33109735.1151936080335
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Don't know if this helps or hurts, but my approach for unit tests was to
implement an index in a RAMdir for each test, index enough documents for my
tests that I could strictly control and just do searches, man...

True, the weakness was that the data sets are very small, and this more of a
"black box" test than one might want. I suppose one could argue that since I
wasn't actually looking at a disk file, I wasn't testing a major portion of
the system. But it sure caught a bunch of my programming errors <G>....

I had to do some fancy dancing to build an infrastructure that allowed my
tests to index from a "semi-real" document characteristic of my problem
space, which allowed me to have the indexing code in the loop as well...

In essence, I forwent (what is the past tense of forgo anyway?) mock objects
in favor of real objects and contrived a test that went fast enough that I
didn't need to deal with mock objects and was self-contained.

I had to make sure my search interface took a searcher object (a Dirctory
would do), but that wasn't hard..

Warning: I'm not the most experienced unit tester in the world <G>, but it
seems to me that the fewer mock objects in the system, the fewer disconnects
there are between what you think you are testing and what you are really
testing, so I favor real objects over mock objects when it's reasonably
straight-forward.

GIven that I know nothing about your problem space, though, this may be a
totally useless approach <G>....

Best
Erick

------=_Part_13686_33109735.1151936080335--

From java-user-return-21753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 14:39:05 2006
Return-Path: <java-user-return-21753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45614 invoked from network); 3 Jul 2006 14:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 14:39:05 -0000
Received: (qmail 16437 invoked by uid 500); 3 Jul 2006 14:39:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15702 invoked by uid 500); 3 Jul 2006 14:38:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15691 invoked by uid 99); 3 Jul 2006 14:38:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:38:58 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alessio.pace@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:38:57 -0700
Received: by nf-out-0910.google.com with SMTP id p46so1078617nfa
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 07:38:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=US9ymFtu30dabrwPT450L9i4dVSSziwIqZs7+GX6t+keiMfdy5Cop6cIRrl0lfELbLKfjS+Ktdh7iJtNw0Vwd7NRs62vH2GvH6veDek9q+jyj2MqpIdddYxBrICXVEu0+MFYCllJaF7S9P9o7xInioHN1Lc2RtMHWmv9/N0xVKk=
Received: by 10.48.47.3 with SMTP id u3mr2474213nfu;
        Mon, 03 Jul 2006 07:38:36 -0700 (PDT)
Received: by 10.48.162.9 with HTTP; Mon, 3 Jul 2006 07:38:36 -0700 (PDT)
Message-ID: <84987d20607030738h320e239bn704a03b6c48046b9@mail.gmail.com>
Date: Mon, 3 Jul 2006 16:38:36 +0200
From: "Alessio Pace" <alessio.pace@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Unit testing: Hits not implementing an interface and being final
In-Reply-To: <359a92830607030714g2bd0dbbfhde6044df5eca383c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_31565_19371863.1151937516007"
References: <84987d20607030611y332146c5j1b9ad706bee0f79c@mail.gmail.com>
	 <359a92830607030714g2bd0dbbfhde6044df5eca383c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_31565_19371863.1151937516007
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
thanks Erick for the answer.

The problem is that I am using Lucene through the Hibernate support, to map
trasparently Java domain entities to a file system Lucene index (no support
for a RAM Index at the moment, as far as I saw).

So some of my unit tests (which collaborate at some level with Lucene
functionalities) are a little slow because they all write to disk (and the
index is destroyed and recreated in each test class, to be self contained).

But anyway, they require me to set up an index, populate it, make a search
on it, just to have a bunch of Hits, even when what I have to test is not
integration with the inner content of the Hits object (I don't care if it is
"real" or a wrong search result, I just need it, so I wanted to subclass or
mock it).

And yes, I do value as well integration testing, but sometimes I prefer to
do just unit testing, so that I can easily detect how far from the bug I am
:-)

Thanks again, regards,

-- 
Alessio Pace.
http://www.jroller.com/page/alessiopace

On 7/3/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> Don't know if this helps or hurts, but my approach for unit tests was to
> implement an index in a RAMdir for each test, index enough documents for
> my
> tests that I could strictly control and just do searches, man...
>
> True, the weakness was that the data sets are very small, and this more of
> a
> "black box" test than one might want. I suppose one could argue that since
> I
> wasn't actually looking at a disk file, I wasn't testing a major portion
> of
> the system. But it sure caught a bunch of my programming errors <G>....
>
> I had to do some fancy dancing to build an infrastructure that allowed my
> tests to index from a "semi-real" document characteristic of my problem
> space, which allowed me to have the indexing code in the loop as well...
>
> In essence, I forwent (what is the past tense of forgo anyway?) mock
> objects
> in favor of real objects and contrived a test that went fast enough that I
> didn't need to deal with mock objects and was self-contained.
>
> I had to make sure my search interface took a searcher object (a Dirctory
> would do), but that wasn't hard..
>
> Warning: I'm not the most experienced unit tester in the world <G>, but it
> seems to me that the fewer mock objects in the system, the fewer
> disconnects
> there are between what you think you are testing and what you are really
> testing, so I favor real objects over mock objects when it's reasonably
> straight-forward.
>
> GIven that I know nothing about your problem space, though, this may be a
> totally useless approach <G>....
>
> Best
> Erick
>
>

------=_Part_31565_19371863.1151937516007--

From java-user-return-21754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 14:42:59 2006
Return-Path: <java-user-return-21754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49252 invoked from network); 3 Jul 2006 14:42:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 14:42:59 -0000
Received: (qmail 23144 invoked by uid 500); 3 Jul 2006 14:42:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23117 invoked by uid 500); 3 Jul 2006 14:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23106 invoked by uid 99); 3 Jul 2006 14:42:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:42:53 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of brunovieira19@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 07:42:52 -0700
Received: by py-out-1112.google.com with SMTP id e30so1450825pya
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 07:42:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=NMt6ntqtWX1wv5ZZp31JXinurd1xXM3ZDiOiTpoyDI5lORhL/Kt3Doz5WJTQPANUciI6Wbp+FHZfTtsm12QNQyw+PCQNwD+VU3sEcmzqx5lpK/SAOfGVLKF7IZ+B/x2UXCMCke5PQ6gaM1V3QS1gntldDApHSFE1V4Unwa+SZWo=
Received: by 10.35.37.18 with SMTP id p18mr941519pyj;
        Mon, 03 Jul 2006 07:42:32 -0700 (PDT)
Received: by 10.35.58.2 with HTTP; Mon, 3 Jul 2006 07:42:32 -0700 (PDT)
Message-ID: <9cde41450607030742jb64b0c0p71d4732ba5bc132c@mail.gmail.com>
Date: Mon, 3 Jul 2006 11:42:32 -0300
From: "Bruno Vieira" <brunovieira19@gmail.com>
To: java-user@lucene.apache.org
Subject: Memory Leak IndexSearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_64584_4440847.1151937752277"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_64584_4440847.1151937752277
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

I am working on a project with around 35000 documents (8 text fields with
256 chars at most for each field) on lucene. But unfortunately this index is
updated at every moment and I need that these new items be in the results of
my search as fast as possible.

I have an IndexSearcher, then I do a search getting the last 10 results with
ordering by a name field and the memory allocated is 13mb, I close the
IndexSearcher because the lucene database was updated by and external
application and I create a new IndexSearcher, do the same search again
wanting to get the last 10 results with ordering by a name field and the
memory allocated is 15mb. At every time I do this cycle the memory increase
in 2mb, so in a moment I have a memory leak.

If the database is not updated and i do not create a new IndexSearcher i can
do searches forever without memory leak.

Why when I close an IndexSearcher (indexSearcher.close(); indexSearcher =
new IndexSearcher("/database/") ;)after some searches with ordering and open
a new one the memory is not free ?

Thanks to any suggestions.

Bruno

------=_Part_64584_4440847.1151937752277--

From java-user-return-21755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 17:29:59 2006
Return-Path: <java-user-return-21755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2980 invoked from network); 3 Jul 2006 17:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 17:29:58 -0000
Received: (qmail 85047 invoked by uid 500); 3 Jul 2006 17:29:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85011 invoked by uid 500); 3 Jul 2006 17:29:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84996 invoked by uid 99); 3 Jul 2006 17:29:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 10:29:52 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 10:29:52 -0700
Received: by py-out-1112.google.com with SMTP id d80so1558773pyd
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 10:29:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tDoRnhENN1y1UR+mTvPhlp2OZ+wzvN8kqk4CuCJFRptRZuiOPLdIGR6kUcxfwG/dpuuJvGWFsNqzlCiN7PdThqVMXLYDD/z8ndkLICj8khlXmqH4TrxpNYXdBvxHovQcN5oizI54iTRFSges+Ol8KmOC15oseDibmRXxZwrYTN4=
Received: by 10.35.121.9 with SMTP id y9mr2940230pym;
        Mon, 03 Jul 2006 10:29:31 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Mon, 3 Jul 2006 10:29:31 -0700 (PDT)
Message-ID: <359a92830607031029m3a44fb4fo33313651c76f0aa5@mail.gmail.com>
Date: Mon, 3 Jul 2006 13:29:31 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Memory Leak IndexSearcher
In-Reply-To: <9cde41450607030742jb64b0c0p71d4732ba5bc132c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17223_16689495.1151947771573"
References: <9cde41450607030742jb64b0c0p71d4732ba5bc132c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17223_16689495.1151947771573
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, *assuming* that you're working in Java, you can't predict very much
about when the garbage collector actually goes about freeing memory.
Depending on how memory is measured, you may or may not be getting an
accurate count.

I wonder what would happen if you allowed the JVM only a *little* more
memory than you need. I suspect that you'd see memory increase to the
maximum then fluctuate near the max forever as the gc would then be forced
to collect the memory that was being marked as free (but not necessarily
returned to the heap by the GC promptly) by re-opening the IndexSearcher.

Hope this helps
Erick

------=_Part_17223_16689495.1151947771573--

From java-user-return-21756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 17:52:46 2006
Return-Path: <java-user-return-21756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14153 invoked from network); 3 Jul 2006 17:52:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 17:52:46 -0000
Received: (qmail 13912 invoked by uid 500); 3 Jul 2006 17:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13876 invoked by uid 500); 3 Jul 2006 17:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13865 invoked by uid 99); 3 Jul 2006 17:52:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 10:52:41 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of galeas@gmx.de designates 213.165.64.21 as permitted sender)
Received: from [213.165.64.21] (HELO mail.gmx.net) (213.165.64.21)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 03 Jul 2006 10:52:40 -0700
Received: (qmail invoked by alias); 03 Jul 2006 17:52:18 -0000
Received: from p5083FAE1.dip.t-dialin.net (EHLO patricio) [80.131.250.225]
  by mail.gmx.net (mp032) with SMTP; 03 Jul 2006 19:52:18 +0200
X-Authenticated: #24368204
From: "Patricio" <galeas@gmx.de>
To: <java-user@lucene.apache.org>
Subject: QueryTerms vs. IndexTerms
Date: Mon, 3 Jul 2006 19:52:17 +0200
Message-ID: <000001c69ec9$6df29f70$1602a8c0@patricio>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: Acaexk49CtxJlU2ZRfm12+Wbm+XqfQAAvaHQ
In-Reply-To: <359a92830607031029m3a44fb4fo33313651c76f0aa5@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, I'm novice in Java.
I try to understand how the query terms are matched with the index terms to
calculate the Hits.

I thought that the class "IndexSearcher" was responsible for this process,
but apparently the classes "Scorer" and "HitCollector" are essential to
determine the retrieved documents.

I looked for this information in "Lucene in Action", but unfortunately I
couldn't find enough details (in Chapter 3.2) about this topic.
 
Does somebody know where takes place (source code) this comparison?

Thank You in advance
Best regards,
Patricio

PS: I'm using Lucene 2.0.0.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 18:50:16 2006
Return-Path: <java-user-return-21757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27092 invoked from network); 3 Jul 2006 18:50:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 18:50:16 -0000
Received: (qmail 77175 invoked by uid 500); 3 Jul 2006 18:50:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77137 invoked by uid 500); 3 Jul 2006 18:50:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77123 invoked by uid 99); 3 Jul 2006 18:50:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 11:50:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 11:50:09 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.6/8.13.6) with ESMTP id k63InkYK018344
	for <java-user@lucene.apache.org>; Mon, 3 Jul 2006 20:49:47 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: QueryTerms vs. IndexTerms
Date: Mon, 3 Jul 2006 20:49:41 +0200
User-Agent: KMail/1.8.2
References: <000001c69ec9$6df29f70$1602a8c0@patricio>
In-Reply-To: <000001c69ec9$6df29f70$1602a8c0@patricio>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607032049.43018.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 03 July 2006 19:52, Patricio wrote:
> Hello, I'm novice in Java.
> I try to understand how the query terms are matched with the index terms to
> calculate the Hits.
> 
> I thought that the class "IndexSearcher" was responsible for this process,
> but apparently the classes "Scorer" and "HitCollector" are essential to
> determine the retrieved documents.
> 
> I looked for this information in "Lucene in Action", but unfortunately I
> couldn't find enough details (in Chapter 3.2) about this topic.
>  
> Does somebody know where takes place (source code) this comparison?

One place is PrefixQuery.rewrite(IndexReader). Here a prefixed query term,
for example prefer*, is replaced by terms in the index, for example by prefer,
preferable, prefered, preference.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 21:26:45 2006
Return-Path: <java-user-return-21758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79120 invoked from network); 3 Jul 2006 21:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 21:26:45 -0000
Received: (qmail 48304 invoked by uid 500); 3 Jul 2006 21:26:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47972 invoked by uid 500); 3 Jul 2006 21:26:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47954 invoked by uid 99); 3 Jul 2006 21:26:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 14:26:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of monsurh@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO nz-out-0102.google.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 14:26:38 -0700
Received: by nz-out-0102.google.com with SMTP id o1so934086nzf
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 14:26:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=d+2wH8V66BebEHcbzu/pD9IpjAaVsYn6fFnuUvb6OCg4sbHVOt/h7v1OpKRNmTv5HWcneAvWh9lfhdMhtrnzDmDdSkAeZ+o3k0LxwIdUHvi8oqtV+d0K2R+qYzPfBTFYS7KE0ZdgRVmWo1NEMhK/God3RRG2/9yXbFnvnMt1DLA=
Received: by 10.36.134.3 with SMTP id h3mr2540080nzd;
        Mon, 03 Jul 2006 14:26:17 -0700 (PDT)
Received: by 10.36.5.16 with HTTP; Mon, 3 Jul 2006 14:26:17 -0700 (PDT)
Message-ID: <de98de150607031426j34bd3843p16da7dde359e6cbb@mail.gmail.com>
Date: Mon, 3 Jul 2006 17:26:17 -0400
From: "Monsur Hossain" <monsurh@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting & SQL-Database
In-Reply-To: <200607010110.50154.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <200607010110.50154.dominik@dbruhn.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 6/30/06, Dominik Bruhn <dominik@dbruhn.de> wrote:
> SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);
>
> Where LUCENERESULT is like 2,3,19,3,5.
>
> This works fine but got one problem: The Search-Result of Lucene is order by
> relevance and so the id-list is also sorted by relevance. But the result of
> the SQL-Query is sorted by the id which destroys the relevance-sorting.
>
> Does anybody know a work-arround?

We have the same issue and solve this through code.  As you're
generating the list of IDs for the SQL query, also generate a hash
that maps the ID to its position.  When reading back the data from the
database, read the position hash, and insert the item into the
appropriate position in an array.  Yeah, you're doing the sorting
yourself, but in our case, we're only returning 10 items per page, so
its not a huge performance hit.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 03 21:30:22 2006
Return-Path: <java-user-return-21759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79790 invoked from network); 3 Jul 2006 21:30:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2006 21:30:22 -0000
Received: (qmail 50782 invoked by uid 500); 3 Jul 2006 21:30:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50749 invoked by uid 500); 3 Jul 2006 21:30:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50738 invoked by uid 99); 3 Jul 2006 21:30:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 14:30:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of wouter@2at.nl designates 213.154.233.61 as permitted sender)
Received: from [213.154.233.61] (HELO kronos.2at.net) (213.154.233.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 14:30:16 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: wildcard in phrase query: problem with idf / scoring; QueryParser; MultiPhraseQuery
Date: Mon, 3 Jul 2006 23:29:52 +0200
Message-ID: <B50FE8BF4F9CF24FB800E28DBB1A2FE026D681@gaia.2at.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: wildcard in phrase query: problem with idf / scoring; QueryParser; MultiPhraseQuery
Thread-Index: Acae568NiVUzx0zIRjSoQbLWJq0OdQ==
From: "W.H. van Atteveldt" <wouter@2at.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dear List,

I am using lucene to count the number of hits of queries in documents
(ie taking raw frequencies as scores), which seems to work fairly well
using a modified Similarity, returning freq for tf and 1.0 for everyting
else, and a HitCollector to collect the hits.

I also want to allow 'prefix phrase queries', ie "microsoft app*". If I
understand the doc and mailing list correctly, there is some 'backend
plumbing' for this in the sense of the MultiPhraseQuery, but the
QueryParser does not handle this. Is this correct? Will this change in
the near future?

Assuming it is, I subclassed the QueryParser to handle phrase prefixes,
replacing getFieldQuery by a version that calls the super, and if the
result is a phrase query and the text contains an asterisk tries to
create a MultiPhraseQuery. This seems to work ok, returning a
MultiPhraseQuery "microsoft (app application ..)" for the above query.
That said, it is highly inelegant and does silly things like using
String.split rather than the analyzer because that removes wildcards.
I'm sure this can be done more elegantly... but it feels wrong to meddle
with things like QueryParsers given the fact that I'm a lucene novice. I
assume the normal parser refuses to do this because it uses the
indexreader (which is only available at rewrite time?), but why is there
no WildcardPhraseQuery that gets rewritten to an appropriate
MultiPhraseQuery?

Anyway, the problem now is that queries return very high scores, which
seem to be something like [actual score * nterms^2], where nterms is the
number of terms in the new phrase. The searcher.explanation is that ifd
equals nterms (see below). Strange enough, both idf(.) functions in my
HitCountSimilarity never seem to get called (as revealed by a strategic
System.err.println), even though the idf for normal queries is 1.0 (as
it should be) and the first line in my main function is
[Similarity.setDefault(new HitCountSimilarity());]. So.... obviously I
am doing something wrong?

Any help greatly appreciated!

-- Wouter

------------ explanation of "from ira*" (on random doc) ------------

289.0 =3D weight(body:"from (irae irakly iran irandokht irani iranian
iranians iranica irantzu iraq iraqi iraqis iraqs irascible irate
irational)" in 4032), product of:
  17.0 =3D queryWeight(body:"from (irae irakly iran irandokht irani
iranian iranians iranica irantzu iraq iraqi iraqis iraqs irascible irate
irational)"), product of:
    17.0 =3D idf(body:"from (irae irakly iran irandokht irani iranian
iranians iranica irantzu iraq iraqi iraqis iraqs irascible irate
irational)")
    1.0 =3D queryNorm
  17.0 =3D fieldWeight(body:"from (irae irakly iran irandokht irani
iranian iranians iranica irantzu iraq iraqi iraqis iraqs irascible irate
irational)" in 4032), product of:
    1.0 =3D tf(phraseFreq=3D1.0)
    17.0 =3D idf(body:"from (irae irakly iran irandokht irani iranian
iranians iranica irantzu iraq iraqi iraqis iraqs irascible irate
irational)")
    1.0 =3D fieldNorm(field=3Dbody, doc=3D4032)

------------ exmplanation of "ira*" (on random doc) -----------

3.0 =3D sum of:
  2.0 =3D fieldWeight(body:ira in 4797), product of:
    2.0 =3D tf(termFreq(body:ira)=3D2)
    1.0 =3D idf(docFreq=3D389)
    1.0 =3D fieldNorm(field=3Dbody, doc=3D4797)
  1.0 =3D fieldWeight(body:iran in 4797), product of:
    1.0 =3D tf(termFreq(body:iran)=3D1)
    1.0 =3D idf(docFreq=3D325)
    1.0 =3D fieldNorm(field=3Dbody, doc=3D4797)

------------ PrefixPhraseQueryAnalyzer.java ----------

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.*;
import org.apache.lucene.document.Document;
import org.apache.lucene.index.*;
import org.apache.lucene.search.*;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.queryParser.ParseException;

import java.util.*;

public class PrefixPhraseQueryParser extends QueryParser {

    public Term[] expand(String field, String prefix) throws
java.io.IOException
    {
        ArrayList<Term> terms =3D new ArrayList<Term>();
        TermEnum t =3D ir.terms(new Term(field, prefix));
        while(t.next() && t.term().text().startsWith(prefix)) {
            if (t.term().text().matches("\\w+"))
                terms.add(t.term());
        }
        t.close();
        return (Term[]) terms.toArray(new Term[0]);
    }

    private IndexReader ir;
    public PrefixPhraseQueryParser(String f, Analyzer a, IndexReader ir)
    {
        super(f,a);
        this.ir =3D ir;
    }

    protected org.apache.lucene.search.Query getFieldQuery(String field,
                                  String queryText,
                                  int slop) throws ParseException
    {
        org.apache.lucene.search.Query result =3D
super.getFieldQuery(field, queryText, slop);

        if ((result instanceof PhraseQuery) && queryText.contains("*"))
{
            MultiPhraseQuery mqr =3D new MultiPhraseQuery();
            for (String s : queryText.split("[\\s]+")) {
                if (s.contains("*")) {
                    String pref =3D s.substring(0, s.length() - 1);
                    if (pref.contains("*"))
                        throw new ParseException("Can only handle prefix
queries within phrases (eg 'al q*')");
                    try {
                        Term[] terms =3D expand(field, pref);
                        mqr.add(terms);
                    } catch(java.io.IOException e) {throw new
ParseException("Error while expanding : "+e);}
                } else
                    mqr.add(new Term(field, s));
            }
            result =3D mqr;

        }
        return result;
    }

    public static void main(String[] args) throws Exception {
 	<snip>
    }
}


-------- HitCountSimilarity.java ----------

import  org.apache.lucene.search.*;
import java.util.*;

public class HitCountSimilarity extends Similarity {

    public float coord(int overlap, int maxOverlap)
    {
        // Computes a score factor based on the fraction of all query
terms that a document contains.
        return 1.0f;
    }


    public float idf(Collection terms, Searcher searcher)
    {
        // Computes a score factor for a phrase.
        System.err.println("--*-- "+terms.size());
        return 1.0f;
    }

    public float idf(int docFreq, int numDocs)
    {
        // Computes a score factor based on a term's document frequency
(the number of documents which contain the term)\
.
        System.err.println("--!-- "+docFreq+"/"+numDocs);
        return 1.0f;
    }

    public float idf(org.apache.lucene.index.Term term, Searcher
searcher)
    {
        // Computes a score factor for a simple term.
        return 1.0f;
    }

    public float lengthNorm(String fieldName, int numTokens)
    {
        // Computes the normalization value for a field given the total
number of terms contained in a field.
        return 1.0f;
    }

    public float queryNorm(float sumOfSquaredWeights)
    {
        // Computes the normalization value for a query given the sum of
the squared weights of each of the query terms.
        return 1.0f;
   }

    public float sloppyFreq(int distance)
    {
        return 1.0f;
    }

    public float tf(float freq)
    {
        // Computes a score factor based on a term or phrase's frequency
in a document.
        return freq;
    }

    public float tf(int freq)
    {
        // Computes a score factor based on a term or phrase's frequency
in a document.
        return freq;
    }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 04:53:59 2006
Return-Path: <java-user-return-21760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66340 invoked from network); 4 Jul 2006 04:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 04:53:58 -0000
Received: (qmail 78835 invoked by uid 500); 4 Jul 2006 04:53:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78799 invoked by uid 500); 4 Jul 2006 04:53:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78788 invoked by uid 99); 4 Jul 2006 04:53:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 21:53:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lukas.vlcek@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 21:53:51 -0700
Received: by nf-out-0910.google.com with SMTP id p46so1326677nfa
        for <java-user@lucene.apache.org>; Mon, 03 Jul 2006 21:53:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=XHreB/VGFKZ2g+EU8Cyl7pmuUEDwpmqsVbDKZoSMsPXh3XcxMPG69Adzka6RqTrMGmPoxAAT1eKmog4gaxkkf533tMy7OlAPD20GkDekr+ajFDmzEieuY17jjxGfbT20QZUBsHgha1+JwFXuu7Rl9ZGdU+pg/aycZgL5EFxTqy0=
Received: by 10.48.202.15 with SMTP id z15mr2960083nff;
        Mon, 03 Jul 2006 21:53:30 -0700 (PDT)
Received: by 10.48.217.6 with HTTP; Mon, 3 Jul 2006 21:53:30 -0700 (PDT)
Message-ID: <52c3ddca0607032153l13df728ey1ef5701be3d43f47@mail.gmail.com>
Date: Tue, 4 Jul 2006 06:53:30 +0200
From: "Lukas Vlcek" <lukas.vlcek@gmail.com>
Reply-To: java-user@lucene.apache.org
To: java-user@lucene.apache.org
Subject: Re: Sorting & SQL-Database
In-Reply-To: <de98de150607031426j34bd3843p16da7dde359e6cbb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <200607010110.50154.dominik@dbruhn.de>
	 <de98de150607031426j34bd3843p16da7dde359e6cbb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Looking at your problem I can think of one solution for small and
*midsize* result sets. (And I have to say it may be similar to what
Aleksander proposes).
Write workaround query in the following form:

select addfield from (
  select addfield, generated_counter from table where id = 2
  union
  select addfield, generated_counter from table where id = 4
  union
  select addfield, generated_counter from table where id = 1
  ...
  select addfield, generated_counter from table where id = 3
) order by generated_counter;

I am not sure but that generated counter could be taken from DB
sequence (something like select seq.nextvalue() from dual) or
generated in Java while you compose the SQL statement.

Well, this is what I have on my mind while I've just got up and my
brain is still booting...

Lukas

On 7/3/06, Monsur Hossain <monsurh@gmail.com> wrote:
> On 6/30/06, Dominik Bruhn <dominik@dbruhn.de> wrote:
> > SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);
> >
> > Where LUCENERESULT is like 2,3,19,3,5.
> >
> > This works fine but got one problem: The Search-Result of Lucene is order by
> > relevance and so the id-list is also sorted by relevance. But the result of
> > the SQL-Query is sorted by the id which destroys the relevance-sorting.
> >
> > Does anybody know a work-arround?
>
> We have the same issue and solve this through code.  As you're
> generating the list of IDs for the SQL query, also generate a hash
> that maps the ID to its position.  When reading back the data from the
> database, read the position hash, and insert the item into the
> appropriate position in an array.  Yeah, you're doing the sorting
> yourself, but in our case, we're only returning 10 items per page, so
> its not a huge performance hit.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 06:28:16 2006
Return-Path: <java-user-return-21761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86112 invoked from network); 4 Jul 2006 06:28:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 06:28:15 -0000
Received: (qmail 57705 invoked by uid 500); 4 Jul 2006 06:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57074 invoked by uid 500); 4 Jul 2006 06:28:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57061 invoked by uid 99); 4 Jul 2006 06:28:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 23:28:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [164.164.87.55] (HELO srit_mail.renaissance-it.com) (164.164.87.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Jul 2006 23:28:08 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C69F32.FB9B4D6D"
Subject: Apache Lucene Search Engine
Date: Tue, 4 Jul 2006 11:57:54 +0530
Message-ID: <7451DFE76F314044AA7B34ABD08C97C141BFE7@srit_mail.renaissance-it.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Apache Lucene Search Engine
Thread-Index: AcafMvsb140bv+dCRGCEZdDkRMMQmA==
From: "Sarvadnya Mutalik" <sarvadnya.mutalik@renaissance-it.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C69F32.FB9B4D6D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all, I need information about which version of Apache Lucene search
engine you recommend,=20
which is stable and recomended for production or mission-critical
systems.



Thanks in advance
Regards,
Sam

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
The information transmitted is intended only for the person or entity to
which it is addressed and may contain confidential and/or privileged
material. Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited. If you
received this in error, please contact the sender and delete all copies
from any computer.




------_=_NextPart_001_01C69F32.FB9B4D6D--

From java-user-return-21762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 08:16:20 2006
Return-Path: <java-user-return-21762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28080 invoked from network); 4 Jul 2006 08:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 08:16:19 -0000
Received: (qmail 19878 invoked by uid 500); 4 Jul 2006 08:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19554 invoked by uid 500); 4 Jul 2006 08:16:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19537 invoked by uid 99); 4 Jul 2006 08:16:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 01:16:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 01:16:10 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting & SQL-Database
Date: Tue, 4 Jul 2006 09:15:48 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE7C22E3@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting & SQL-Database
thread-index: AcafJdwO2FgWnKMwSPuo9lmtJYEHNgAG4nZg
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The simplest solution to this I would suggest is to decode the id to
relevance score e.g.

Select id, addfield
>From mytable
Where id in (1,2,3,4,5,50,60,70)
Order by case id when 1 then 0.9 when 2 then 0.8 when 3 then 0.7 ....
end desc

You will have to generate the in () and the case statement but this will
do it. It will still go pear shaped when two ids have the same score
unless you fiddle this.

Mike


www.ardentia.com the home of NetSearch
-----Original Message-----
From: Lukas Vlcek [mailto:lukas.vlcek@gmail.com]=20
Sent: 04 July 2006 05:54
To: java-user@lucene.apache.org
Subject: Re: Sorting & SQL-Database

Hi,

Looking at your problem I can think of one solution for small and
*midsize* result sets. (And I have to say it may be similar to what
Aleksander proposes).
Write workaround query in the following form:

select addfield from (
  select addfield, generated_counter from table where id =3D 2
  union
  select addfield, generated_counter from table where id =3D 4
  union
  select addfield, generated_counter from table where id =3D 1
  ...
  select addfield, generated_counter from table where id =3D 3
) order by generated_counter;

I am not sure but that generated counter could be taken from DB
sequence (something like select seq.nextvalue() from dual) or
generated in Java while you compose the SQL statement.

Well, this is what I have on my mind while I've just got up and my
brain is still booting...

Lukas

On 7/3/06, Monsur Hossain <monsurh@gmail.com> wrote:
> On 6/30/06, Dominik Bruhn <dominik@dbruhn.de> wrote:
> > SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);
> >
> > Where LUCENERESULT is like 2,3,19,3,5.
> >
> > This works fine but got one problem: The Search-Result of Lucene is
order by
> > relevance and so the id-list is also sorted by relevance. But the
result of
> > the SQL-Query is sorted by the id which destroys the
relevance-sorting.
> >
> > Does anybody know a work-arround?
>
> We have the same issue and solve this through code.  As you're
> generating the list of IDs for the SQL query, also generate a hash
> that maps the ID to its position.  When reading back the data from the
> database, read the position hash, and insert the item into the
> appropriate position in an array.  Yeah, you're doing the sorting
> yourself, but in our case, we're only returning 10 items per page, so
> its not a huge performance hit.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 10:55:50 2006
Return-Path: <java-user-return-21763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67584 invoked from network); 4 Jul 2006 10:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 10:55:50 -0000
Received: (qmail 46079 invoked by uid 500); 4 Jul 2006 10:55:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46041 invoked by uid 500); 4 Jul 2006 10:55:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46030 invoked by uid 99); 4 Jul 2006 10:55:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 03:55:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 03:55:42 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id ED527A7CE6; Tue,  4 Jul 2006 12:57:43 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 8A583108CD0
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 12:57:41 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id 2E79AC069
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 12:55:15 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: Examples Lucene In Action
Date: Tue, 4 Jul 2006 12:55:15 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0025_01C69F69.184538D0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcafWFSdUVr7qjKKQ66CmDWj6K9yow==
Message-Id: <20060704105515.2E79AC069@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.1 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_MESSAGE autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0025_01C69F69.184538D0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,=20

I=B4m trying to run the source examples that are included in the book
Mannig-Lucene in Action but I get bugs

I=B4m working in windows, this is the first example, it try to run =
Indexer.

=20

% java lia.meetlucene.Indexer build/index/lucene

=20

Can anyone help me?

Thanks a lot=20

Teresa


------=_NextPart_000_0025_01C69F69.184538D0--


From java-user-return-21764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 11:57:22 2006
Return-Path: <java-user-return-21764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87921 invoked from network); 4 Jul 2006 11:57:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 11:57:22 -0000
Received: (qmail 34875 invoked by uid 500); 4 Jul 2006 11:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34847 invoked by uid 500); 4 Jul 2006 11:57:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34836 invoked by uid 99); 4 Jul 2006 11:57:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 04:57:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 04:57:14 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D898630EFCD3; Tue,  4 Jul 2006 07:56:53 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 82AC730EFCD3
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 07:56:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <20060704105515.2E79AC069@mad.isoco.net>
References: <20060704105515.2E79AC069@mad.isoco.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <25A22251-179B-46D6-B579-641013F35CCF@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Examples Lucene In Action
Date: Tue, 4 Jul 2006 07:56:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Teresa,

What bugs are you getting, specifically?   (always a helpful addition =20=

to a bug report :)

One thing you can try is simply unzipping the source code package and =20=

running "ant" to ensure all is well.

One thing to note is the code from the book, the original code that =20
is, is for Lucene 1.4.3, and because of the changed API the code in =20
the book requires some slight changes to work with Lucene 2.0.  =20
Months ago I updated the code to work with the (then upcoming) 2.0 =20
API.  I have not uploaded that code though, but will do so soon.

	Erik

On Jul 4, 2006, at 6:55 AM, mcarcelen wrote:

> Hi,
>
> I=B4m trying to run the source examples that are included in the book
> Mannig-Lucene in Action but I get bugs
>
> I=B4m working in windows, this is the first example, it try to run =20
> Indexer.
>
>
>
> % java lia.meetlucene.Indexer build/index/lucene
>
>
>
> Can anyone help me?
>
> Thanks a lot
>
> Teresa
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 11:59:49 2006
Return-Path: <java-user-return-21765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88859 invoked from network); 4 Jul 2006 11:59:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 11:59:49 -0000
Received: (qmail 41859 invoked by uid 500); 4 Jul 2006 11:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41799 invoked by uid 500); 4 Jul 2006 11:59:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41719 invoked by uid 99); 4 Jul 2006 11:59:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 04:59:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 04:59:40 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C113930EFCD3; Tue,  4 Jul 2006 07:59:19 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0B9F430EFCD3
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 07:59:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v750)
In-Reply-To: <7451DFE76F314044AA7B34ABD08C97C141BFE7@srit_mail.renaissance-it.com>
References: <7451DFE76F314044AA7B34ABD08C97C141BFE7@srit_mail.renaissance-it.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D9C9B5B9-7456-40E0-93E1-0F0CA322FC10@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Apache Lucene Search Engine
Date: Tue, 4 Jul 2006 07:59:09 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.750)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jul 4, 2006, at 2:27 AM, Sarvadnya Mutalik wrote:
> Hi all, I need information about which version of Apache Lucene search
> engine you recommend,
> which is stable and recomended for production or mission-critical
> systems.

Lucene 2.0 is the latest release version.  That is the recommended  
starting point today.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 12:39:42 2006
Return-Path: <java-user-return-21766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2209 invoked from network); 4 Jul 2006 12:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 12:39:42 -0000
Received: (qmail 94938 invoked by uid 500); 4 Jul 2006 12:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94909 invoked by uid 500); 4 Jul 2006 12:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94898 invoked by uid 99); 4 Jul 2006 12:39:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 05:39:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [164.164.87.55] (HELO srit_mail.renaissance-it.com) (164.164.87.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 05:39:34 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Apache Lucene 2.0
Date: Tue, 4 Jul 2006 18:09:21 +0530
Message-ID: <7451DFE76F314044AA7B34ABD08C97C141C1CF@srit_mail.renaissance-it.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Apache Lucene 2.0
Thread-Index: AcafYWC4M/FQNvgwS1GGML5vVkCgBQAABMvA
From: "Sarvadnya Mutalik" <sarvadnya.mutalik@renaissance-it.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erik, I'm trying to run the example given along with Lucene 2.0,
but its giving error.=20
I tried debuging it, but unnable to find the solution.

The error message it gives is as follows..

Error compiling file:=20
D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\/results_js
p.j-ava=20
    [javac] Compiling 1 source file=20

D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_jsp
.ja-va:167:=20
parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser=20
cannot be applied to=20
(java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)=20
                        query =3D QueryParser.parse(queryString,
"contents", analyzer);
                                           ^=20
Note:=20
D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_jsp
.ja-va=20
uses or overrides a deprecated API.=20
Note: Recompile with -Xlint:deprecation for details.=20
Note:=20
D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_jsp
.ja-va=20
uses unchecked or unsafe operations.=20
Note: Recompile with -Xlint:unchecked for details.=20
1 error=20


Here, point to be noted is that, the method "parse" in QueryParser.java
is not static and also its signature is "parse(String query)" and not
"parse(queryString, "contents", analyzer)".

I'm not getting what's happening. Need your help.

Regards
Sam



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Tuesday, July 04, 2006 5:29 PM
To: java-user@lucene.apache.org
Subject: Re: Apache Lucene Search Engine

On Jul 4, 2006, at 2:27 AM, Sarvadnya Mutalik wrote:
> Hi all, I need information about which version of Apache Lucene search

> engine you recommend, which is stable and recomended for production or

> mission-critical systems.

Lucene 2.0 is the latest release version.  That is the recommended
starting point today.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 13:29:35 2006
Return-Path: <java-user-return-21767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24748 invoked from network); 4 Jul 2006 13:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 13:29:34 -0000
Received: (qmail 55120 invoked by uid 500); 4 Jul 2006 13:29:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55085 invoked by uid 500); 4 Jul 2006 13:29:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55074 invoked by uid 99); 4 Jul 2006 13:29:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 06:29:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 06:29:26 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id 2BE96108CD3; Tue,  4 Jul 2006 15:31:29 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 71D98108CCA
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 15:31:28 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id 458A1C06B
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 15:29:02 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: RE: Apache Lucene Search Engine
Date: Tue, 4 Jul 2006 15:29:02 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcafYVj5PsbOXZQgQWq1Ht4rKLpZnQAC405A
In-Reply-To: <D9C9B5B9-7456-40E0-93E1-0F0CA322FC10@ehatchersolutions.com>
Message-Id: <20060704132902.458A1C06B@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.1 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,=20
Thanks a lot Erik for your help
You=B4re right, I was wrong with the version of Lucene and the bugs were =
in my
head.
I=B4m sure I=B4ll soon ask more about Lucene

Regards
Teresa =20

-----Mensaje original-----
De: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Enviado el: martes, 04 de julio de 2006 13:59
Para: java-user@lucene.apache.org
Asunto: Re: Apache Lucene Search Engine

On Jul 4, 2006, at 2:27 AM, Sarvadnya Mutalik wrote:
> Hi all, I need information about which version of Apache Lucene search
> engine you recommend,
> which is stable and recomended for production or mission-critical
> systems.

Lucene 2.0 is the latest release version.  That is the recommended =20
starting point today.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 14:24:02 2006
Return-Path: <java-user-return-21768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44280 invoked from network); 4 Jul 2006 14:24:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 14:24:02 -0000
Received: (qmail 53716 invoked by uid 500); 4 Jul 2006 14:23:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53686 invoked by uid 500); 4 Jul 2006 14:23:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53674 invoked by uid 99); 4 Jul 2006 14:23:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:23:55 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.145.48.34] (HELO mail-relay1.yahoo.com) (216.145.48.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:23:55 -0700
Received: from [192.168.1.140] (adsl-70-231-156-142.dsl.snfc21.sbcglobal.net [70.231.156.142])
	by mail-relay1.yahoo.com (8.13.6/8.13.6/mr1) with ESMTP id k64ENWVY000233
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 4 Jul 2006 07:23:34 -0700 (PDT)
Mime-Version: 1.0
Message-Id: <p06230966c0d029698ffd@[192.168.1.140]>
In-Reply-To: 
 <7451DFE76F314044AA7B34ABD08C97C141C1CF@srit_mail.renaissance-it.com>
References: 
 <7451DFE76F314044AA7B34ABD08C97C141C1CF@srit_mail.renaissance-it.com>
Date: Tue, 4 Jul 2006 07:23:30 -0700
To: java-user@lucene.apache.org
From: Winton Davies <wdavies@yahoo-inc.com>
Subject: RE: Apache Lucene 2.0
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Replace the line

query = QueryParser.parse(queryString, "contents", analyzer);

in
lucene/src/jsp/results.jsp

with

   QueryParser qp = new QueryParser("contents", analyzer);
                  query = qp.parse(queryString);


Something changed in the QP api - this reflects the new call. I'm not 
sure if its the only change that needs to be made, but it now all 
works for me.

Winton


>Thanks Erik, I'm trying to run the example given along with Lucene 2.0,
>but its giving error.
>I tried debuging it, but unnable to find the solution.
>
>The error message it gives is as follows..
>
>Error compiling file:
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\/results_js
>p.j-ava
>     [javac] Compiling 1 source file
>
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_jsp
>.ja-va:167:
>parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser
>cannot be applied to
>(java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
>                         query = QueryParser.parse(queryString,
>"contents", analyzer);
>                                            ^
>Note:
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_jsp
>.ja-va
>uses or overrides a deprecated API.
>Note: Recompile with -Xlint:deprecation for details.
>Note:
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_jsp
>.ja-va
>uses unchecked or unsafe operations.
>Note: Recompile with -Xlint:unchecked for details.
>1 error
>
>
>Here, point to be noted is that, the method "parse" in QueryParser.java
>is not static and also its signature is "parse(String query)" and not
>"parse(queryString, "contents", analyzer)".
>
>I'm not getting what's happening. Need your help.
>
>Regards
>Sam
>
>
>
>-----Original Message-----
>From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>Sent: Tuesday, July 04, 2006 5:29 PM
>To: java-user@lucene.apache.org
>Subject: Re: Apache Lucene Search Engine
>
>On Jul 4, 2006, at 2:27 AM, Sarvadnya Mutalik wrote:
>>  Hi all, I need information about which version of Apache Lucene search
>
>>  engine you recommend, which is stable and recomended for production or
>
>>  mission-critical systems.
>
>Lucene 2.0 is the latest release version.  That is the recommended
>starting point today.
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 14:42:13 2006
Return-Path: <java-user-return-21769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51039 invoked from network); 4 Jul 2006 14:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 14:42:13 -0000
Received: (qmail 1769 invoked by uid 500); 4 Jul 2006 14:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1735 invoked by uid 500); 4 Jul 2006 14:42:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1724 invoked by uid 99); 4 Jul 2006 14:42:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:42:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [164.164.87.55] (HELO srit_mail.renaissance-it.com) (164.164.87.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:42:06 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Apache Lucene 2.0
Date: Tue, 4 Jul 2006 20:11:51 +0530
Message-ID: <7451DFE76F314044AA7B34ABD08C97C141C1F8@srit_mail.renaissance-it.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Apache Lucene 2.0
Thread-Index: AcafdYj781Omb66JQvmt/L1LnFx24wAAhlDQ
From: "Sarvadnya Mutalik" <sarvadnya.mutalik@renaissance-it.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is working!

Thanks Winton.

Regards
Sam

-----Original Message-----
From: Winton Davies [mailto:wdavies@yahoo-inc.com]=20
Sent: Tuesday, July 04, 2006 7:54 PM
To: java-user@lucene.apache.org
Subject: RE: Apache Lucene 2.0

Hi,

Replace the line

query =3D QueryParser.parse(queryString, "contents", analyzer);

in
lucene/src/jsp/results.jsp

with

   QueryParser qp =3D new QueryParser("contents", analyzer);
                  query =3D qp.parse(queryString);


Something changed in the QP api - this reflects the new call. I'm not
sure if its the only change that needs to be made, but it now all works
for me.

Winton


>Thanks Erik, I'm trying to run the example given along with Lucene 2.0,

>but its giving error.
>I tried debuging it, but unnable to find the solution.
>
>The error message it gives is as follows..
>
>Error compiling file:
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\/results_j
>s
>p.j-ava
>     [javac] Compiling 1 source file
>
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_js
>p
>.ja-va:167:
>parse(java.lang.String) in org.apache.lucene.queryParser.QueryParser
>cannot be applied to
>(java.lang.String,java.lang.String,org.apache.lucene.analysis.Analyzer)
>                         query =3D QueryParser.parse(queryString,=20
>"contents", analyzer);
>                                            ^
>Note:
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_js
>p
>.ja-va
>uses or overrides a deprecated API.
>Note: Recompile with -Xlint:deprecation for details.
>Note:
>D:\projects\server\web\tomcat\work\_\localhost\rChive\Lucene\results_js
>p
>.ja-va
>uses unchecked or unsafe operations.
>Note: Recompile with -Xlint:unchecked for details.
>1 error
>
>
>Here, point to be noted is that, the method "parse" in QueryParser.java

>is not static and also its signature is "parse(String query)" and not=20
>"parse(queryString, "contents", analyzer)".
>
>I'm not getting what's happening. Need your help.
>
>Regards
>Sam
>
>
>
>-----Original Message-----
>From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>Sent: Tuesday, July 04, 2006 5:29 PM
>To: java-user@lucene.apache.org
>Subject: Re: Apache Lucene Search Engine
>
>On Jul 4, 2006, at 2:27 AM, Sarvadnya Mutalik wrote:
>>  Hi all, I need information about which version of Apache Lucene=20
>> search
>
>>  engine you recommend, which is stable and recomended for production=20
>> or
>
>>  mission-critical systems.
>
>Lucene 2.0 is the latest release version.  That is the recommended=20
>starting point today.
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 14:49:53 2006
Return-Path: <java-user-return-21770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52499 invoked from network); 4 Jul 2006 14:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 14:49:53 -0000
Received: (qmail 15416 invoked by uid 500); 4 Jul 2006 14:49:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15038 invoked by uid 500); 4 Jul 2006 14:49:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15026 invoked by uid 99); 4 Jul 2006 14:49:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:49:47 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of amashtakov@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:49:46 -0700
Received: by py-out-1112.google.com with SMTP id d80so1876194pyd
        for <java-user@lucene.apache.org>; Tue, 04 Jul 2006 07:49:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=g39wioKbd8vV1ko963G4hshMwibeKiSGUFBtjhVtjEP8uafOY19hlBXYJEqZen4jkgVJf73CAxM90pWMcwmVxu0NXjTKj0ZuircSw6ERhmtKrKViCySvk/wESbc7Ae7PiH37GMq/03h1JbjQYfPByZ+b7wuzuV1bLYe+WIj1fdA=
Received: by 10.35.84.16 with SMTP id m16mr4067054pyl;
        Tue, 04 Jul 2006 07:49:25 -0700 (PDT)
Received: by 10.35.52.18 with HTTP; Tue, 4 Jul 2006 07:49:25 -0700 (PDT)
Message-ID: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
Date: Tue, 4 Jul 2006 17:49:25 +0300
From: "Alexander Mashtakov" <amashtakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene and database
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_79581_26345775.1152024565630"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_79581_26345775.1152024565630
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,

I'm looking for a solution/best practices concerning Lucene and SQL database
integration.
The database (MySQL) is already developed and contains data. I've tried
MySQL full-text
search, but it's quite slow and doesn't have the possibility to intergate
custom analyzers.
Phrase search is perfomed only in boolean mode and doesn't return relevance
factor :(

The idea is to manage full-text indexes (titles, keywords, summaries) and
perform search
using Lucene. The resultset will include ID's that will be appended to SQL
query in order
to apply additional filters based on foreign keys (categories mappings,
etc).

But, the database is going to be big enough, and the list of IDs returned by
Lucene too. This
may cause high memory usage and slow sql query speed (for instance 1000 IDs
in "IN (id1, id2 ...)"
sql filter)


Any ideas, suggestions ?

-- 
Thank you,
/Alexander

------=_Part_79581_26345775.1152024565630--

From java-user-return-21771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 14:58:16 2006
Return-Path: <java-user-return-21771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53901 invoked from network); 4 Jul 2006 14:58:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 14:58:16 -0000
Received: (qmail 27230 invoked by uid 500); 4 Jul 2006 14:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27205 invoked by uid 500); 4 Jul 2006 14:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27194 invoked by uid 99); 4 Jul 2006 14:55:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:55:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of giulio.cesare@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:55:13 -0700
Received: by wr-out-0506.google.com with SMTP id i11so837111wra
        for <java-user@lucene.apache.org>; Tue, 04 Jul 2006 07:54:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=X18ozZSqA7gcWvS7+pww2xMoQkHNUgxUYPWH0kiKtaMxCjKlP+t0i72hZzOnnjtMNcLEILArgUd7OQVUf7PgmcYbLc82pazFIb25V5Nc8FP29eiQMf7ZvHfF+K3zItNVVYuXIeB4zb3qT6n7YVNm4iWGh1FNgQgh2dL71m7P8g0=
Received: by 10.54.111.2 with SMTP id j2mr1729785wrc;
        Tue, 04 Jul 2006 07:53:17 -0700 (PDT)
Received: by 10.54.91.20 with HTTP; Tue, 4 Jul 2006 07:54:51 -0700 (PDT)
Message-ID: <ff737ac30607040754w29cdb147g7255111ff393e0e2@mail.gmail.com>
Date: Tue, 4 Jul 2006 16:54:51 +0200
From: "Giulio Cesare Solaroli" <giulio.cesare@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and database
In-Reply-To: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Alexander,

if the set of foreign keys you are using to filter the lucene results
with some SQL query, I suggest you to include the foreign keys values
as additional lucene fields, and let lucene return you the exact set
of document IDs.

I had excellent results with this technique.

Hope this helps.

Best regards,

Giulio Cesare Solaroli



On 7/4/06, Alexander Mashtakov <amashtakov@gmail.com> wrote:
> Hi folks,
>
> I'm looking for a solution/best practices concerning Lucene and SQL database
> integration.
> The database (MySQL) is already developed and contains data. I've tried
> MySQL full-text
> search, but it's quite slow and doesn't have the possibility to intergate
> custom analyzers.
> Phrase search is perfomed only in boolean mode and doesn't return relevance
> factor :(
>
> The idea is to manage full-text indexes (titles, keywords, summaries) and
> perform search
> using Lucene. The resultset will include ID's that will be appended to SQL
> query in order
> to apply additional filters based on foreign keys (categories mappings,
> etc).
>
> But, the database is going to be big enough, and the list of IDs returned by
> Lucene too. This
> may cause high memory usage and slow sql query speed (for instance 1000 IDs
> in "IN (id1, id2 ...)"
> sql filter)
>
>
> Any ideas, suggestions ?
>
> --
> Thank you,
> /Alexander
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 14:58:27 2006
Return-Path: <java-user-return-21772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54970 invoked from network); 4 Jul 2006 14:58:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 14:58:26 -0000
Received: (qmail 40373 invoked by uid 500); 4 Jul 2006 14:57:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40312 invoked by uid 500); 4 Jul 2006 14:57:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40253 invoked by uid 99); 4 Jul 2006 14:57:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:57:47 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tobias382@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 07:57:45 -0700
Received: by nf-out-0910.google.com with SMTP id m19so904744nfc
        for <java-user@lucene.apache.org>; Tue, 04 Jul 2006 07:57:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mrDtEDeY9l78p3/98nWUNnp0yZZHKUMM1mSw1XZQr2btagDpTA+qwmLkEyfI1PzkWReXdEwERhabETFtIMVaJVdsrv60ca4ojVKaW8MqegphChiD0b8LtFfQBufKyAa0UewdcNHm/zt4qzq8hdmFG8H2UL3bxZ6uM1o/YW3q3vk=
Received: by 10.78.166.7 with SMTP id o7mr1342256hue;
        Tue, 04 Jul 2006 07:57:23 -0700 (PDT)
Received: by 10.78.202.8 with HTTP; Tue, 4 Jul 2006 07:57:23 -0700 (PDT)
Message-ID: <55ed38ea0607040757y418aa5beo7f7e7be7b23abe8a@mail.gmail.com>
Date: Tue, 4 Jul 2006 09:57:23 -0500
From: "Matthew Turland" <tobias382@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and database
In-Reply-To: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20251_22508174.1152025043801"
References: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_20251_22508174.1152025043801
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If I'm understanding you correctly, you're using Lucene to store IDs and
index the columns that would normally be full-text indices in MySQL, then
use the IDs to retrieve the information from the database. This is more of a
MySQL issue than a Lucene issue, but it suggests a flaw in your approach:
why not simply store all the data you want to retrieve in Lucene? If the
data in your database changes, you would have to rebuild your Lucene index
anyway. My $0.02.

On 7/4/06, Alexander Mashtakov <amashtakov@gmail.com> wrote:
>
> Hi folks,
>
> I'm looking for a solution/best practices concerning Lucene and SQL
> database
> integration.
> The database (MySQL) is already developed and contains data. I've tried
> MySQL full-text
> search, but it's quite slow and doesn't have the possibility to intergate
> custom analyzers.
> Phrase search is perfomed only in boolean mode and doesn't return
> relevance
> factor :(
>
> The idea is to manage full-text indexes (titles, keywords, summaries) and
> perform search
> using Lucene. The resultset will include ID's that will be appended to SQL
> query in order
> to apply additional filters based on foreign keys (categories mappings,
> etc).
>
> But, the database is going to be big enough, and the list of IDs returned
> by
> Lucene too. This
> may cause high memory usage and slow sql query speed (for instance 1000
> IDs
> in "IN (id1, id2 ...)"
> sql filter)
>
>
> Any ideas, suggestions ?
>
> --
> Thank you,
> /Alexander
>
>

------=_Part_20251_22508174.1152025043801--

From java-user-return-21773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 15:11:44 2006
Return-Path: <java-user-return-21773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58338 invoked from network); 4 Jul 2006 15:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 15:11:43 -0000
Received: (qmail 69353 invoked by uid 500); 4 Jul 2006 15:11:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68983 invoked by uid 500); 4 Jul 2006 15:11:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68972 invoked by uid 99); 4 Jul 2006 15:11:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 08:11:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of amashtakov@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO nz-out-0102.google.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 08:11:36 -0700
Received: by nz-out-0102.google.com with SMTP id v1so1086850nzb
        for <java-user@lucene.apache.org>; Tue, 04 Jul 2006 08:11:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aSFeiB3NnMz78cKoBOLqEESAycMEK5g0z99/S8lPFm0vcGr/lMOVYCtQ8NyV8cYoP3+lLKWD/puYnLKDvGe4KBwfsvr5Tlq7b5O705pfVIB0txeWPeiYuDdGZ9UMhE8c6jbsd10gizhiDOj9vICbR5WZ6oQipQ2eNL3slG8ejr0=
Received: by 10.36.74.19 with SMTP id w19mr5047659nza;
        Tue, 04 Jul 2006 08:11:15 -0700 (PDT)
Received: by 10.35.52.18 with HTTP; Tue, 4 Jul 2006 08:11:15 -0700 (PDT)
Message-ID: <5e966dac0607040811g2ed5e9a6pb902028413f774b3@mail.gmail.com>
Date: Tue, 4 Jul 2006 18:11:15 +0300
From: "Alexander Mashtakov" <amashtakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and database
In-Reply-To: <ff737ac30607040754w29cdb147g7255111ff393e0e2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_79906_16274869.1152025875250"
References: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
	 <ff737ac30607040754w29cdb147g7255111ff393e0e2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_79906_16274869.1152025875250
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you *Giulio,*

I read some information about this approach. Is it possible to store in
Lucene field
several FKs ? For example, a document has serveral mappings to category
table (N:M).
The other question is about dates - is it possible to query Lucene for date
interval (from YYYY-MM-DD to YYYY-MM-DD) ?
And the last (but no least ;) - in database, there are mappings (N:M) which
contains additional attributes, that have to be searchable - for
example one document may reference other documents (M:N) with attribute
typeOf (isPartOf, IsVersionOf). Is it possible
to include typeOf together with N:M map ?

Sorry, may be questions are stupid but I've just started to investigate
Lucene ;)

Thank you,
/Alexander


On 7/4/06, Giulio Cesare Solaroli <giulio.cesare@gmail.com> wrote:
>
> Hi Alexander,
>
> if the set of foreign keys you are using to filter the lucene results
> with some SQL query, I suggest you to include the foreign keys values
> as additional lucene fields, and let lucene return you the exact set
> of document IDs.
>
> I had excellent results with this technique.
>
> Hope this helps.
>
> Best regards,
>
> Giulio Cesare Solaroli
>
>
>
> On 7/4/06, Alexander Mashtakov <amashtakov@gmail.com> wrote:
> > Hi folks,
> >
> > I'm looking for a solution/best practices concerning Lucene and SQL
> database
> > integration.
> > The database (MySQL) is already developed and contains data. I've tried
> > MySQL full-text
> > search, but it's quite slow and doesn't have the possibility to
> intergate
> > custom analyzers.
> > Phrase search is perfomed only in boolean mode and doesn't return
> relevance
> > factor :(
> >
> > The idea is to manage full-text indexes (titles, keywords, summaries)
> and
> > perform search
> > using Lucene. The resultset will include ID's that will be appended to
> SQL
> > query in order
> > to apply additional filters based on foreign keys (categories mappings,
> > etc).
> >
> > But, the database is going to be big enough, and the list of IDs
> returned by
> > Lucene too. This
> > may cause high memory usage and slow sql query speed (for instance 1000
> IDs
> > in "IN (id1, id2 ...)"
> > sql filter)
> >
> >
> > Any ideas, suggestions ?
> >
> > --
> > Thank you,
> > /Alexander
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
/Alexander

------=_Part_79906_16274869.1152025875250--

From java-user-return-21774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 15:21:29 2006
Return-Path: <java-user-return-21774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61131 invoked from network); 4 Jul 2006 15:21:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 15:21:28 -0000
Received: (qmail 87179 invoked by uid 500); 4 Jul 2006 15:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87138 invoked by uid 500); 4 Jul 2006 15:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87127 invoked by uid 99); 4 Jul 2006 15:21:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 08:21:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 04 Jul 2006 08:21:21 -0700
Received: (qmail 316 invoked from network); 4 Jul 2006 15:21:01 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@67.38.14.191)
  by ws6-3.us4.outblaze.com with SMTP; 4 Jul 2006 15:21:00 -0000
Message-ID: <44AA875D.5070203@curtin.com>
Date: Tue, 04 Jul 2006 11:21:01 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene and database
References: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
In-Reply-To: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Alexander Mashtakov wrote:

> But, the database is going to be big enough, and the list of IDs 
> returned by
> Lucene too. This
> may cause high memory usage and slow sql query speed (for instance 1000 IDs
> in "IN (id1, id2 ...)"
> sql filter)

For this part, I recommend using a working table to hold the IDs that result 
from your Lucene search, then use a join instead of the IN operator in your 
SQL query.  Oracle/Sybase/SQLServer all have array capabilities in their APIs 
that make an insertion of a 1000 integers pretty darn fast, so I'm guessing 
that MySQL has such a thing too.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 16:41:37 2006
Return-Path: <java-user-return-21775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55360 invoked from network); 4 Jul 2006 16:41:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 16:41:37 -0000
Received: (qmail 5367 invoked by uid 500); 4 Jul 2006 16:41:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4958 invoked by uid 500); 4 Jul 2006 16:41:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4946 invoked by uid 99); 4 Jul 2006 16:41:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 09:41:30 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 04 Jul 2006 09:41:29 -0700
Received: (qmail 56814 invoked by uid 60001); 4 Jul 2006 16:41:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ROHGEfJPNxgmPGbT1ondW1j/5gxGKeHnBoqY+mZ9AtvqaGVs5GAipqqQ1tZPcoUQEq2qbYLWSMwkHMsgZp4lY4oeEykNoYM+CY/tjt9r0WuVVSXelN/xEi84VGRE1yfMA6HXk1Rc2rxCL0/qazJDVETXfBhQPIJrfNGaZ35/+rk=  ;
Message-ID: <20060704164108.56812.qmail@web50308.mail.yahoo.com>
Received: from [72.229.167.99] by web50308.mail.yahoo.com via HTTP; Tue, 04 Jul 2006 09:41:08 PDT
Date: Tue, 4 Jul 2006 09:41:08 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Examples Lucene In Action
To: java-user@lucene.apache.org
In-Reply-To: <20060704105515.2E79AC069@mad.isoco.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you are working in Windows, then "build/index/lucene" may not work.

Otis

----- Original Message ----
From: mcarcelen <mcarcelen@isoco.com>
To: java-user@lucene.apache.org
Sent: Tuesday, July 4, 2006 6:55:15 AM
Subject: Examples Lucene In Action

Hi,=20

I=C2=B4m trying to run the source examples that are included in the book
Mannig-Lucene in Action but I get bugs

I=C2=B4m working in windows, this is the first example, it try to run Index=
er.

=20

% java lia.meetlucene.Indexer build/index/lucene

=20

Can anyone help me?

Thanks a lot=20

Teresa





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 17:57:31 2006
Return-Path: <java-user-return-21776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88380 invoked from network); 4 Jul 2006 17:57:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 17:57:30 -0000
Received: (qmail 92438 invoked by uid 500); 4 Jul 2006 17:57:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92406 invoked by uid 500); 4 Jul 2006 17:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92393 invoked by uid 99); 4 Jul 2006 17:57:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 10:57:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=PLING_PLING
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 10:57:23 -0700
Received: from localhost (unknown [127.0.0.1])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id B2A3966
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 17:57:00 +0000 (UTC)
Received: from libra.cs.put.poznan.pl ([127.0.0.1])
 by localhost (libra.cs.put.poznan.pl [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 23090-09 for <java-user@lucene.apache.org>;
 Tue,  4 Jul 2006 19:56:55 +0200 (CEST)
Received: from [150.254.130.25] (idss-dw-2.cs.put.poznan.pl [150.254.130.25])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 76B527B
	for <java-user@lucene.apache.org>; Tue,  4 Jul 2006 19:56:55 +0200 (CEST)
Message-ID: <44AAABEF.9060308@cs.put.poznan.pl>
Date: Tue, 04 Jul 2006 19:57:03 +0200
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Carrot 2 with lucene prototype!!!
References: <20060629171811.73305.qmail@web30213.mail.mud.yahoo.com>
In-Reply-To: <20060629171811.73305.qmail@web30213.mail.mud.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at cs.put.poznan.pl
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Everything you need is already out there (in Carrot2 SVN):

- checkout the repository
- build a webapp demo and try it (it works with Google and Yahoo APIs)
- now add a custom input component utilizing a pre-built Lucene index 
and you're set.

D.


arun sharma(rinku) wrote:
> Hello gentlemen,
>    
>   I am novice to lucene and carrot 2 but I have urgent requirement for building a prototype using lucene and carrot2. Please help me with working web application demo along with code.
>    
>   Thanks 
>    
>   Arun
> 
>  			
> ---------------------------------
> Sneak preview the  all-new Yahoo.com. It's not radically different. Just radically better. 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 22:23:38 2006
Return-Path: <java-user-return-21777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28927 invoked from network); 4 Jul 2006 22:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 22:23:38 -0000
Received: (qmail 18828 invoked by uid 500); 4 Jul 2006 22:23:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18268 invoked by uid 500); 4 Jul 2006 22:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18256 invoked by uid 99); 4 Jul 2006 22:23:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 15:23:31 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO wx-out-0102.google.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 15:23:30 -0700
Received: by wx-out-0102.google.com with SMTP id s8so708300wxc
        for <java-user@lucene.apache.org>; Tue, 04 Jul 2006 15:23:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bRqblipsQDf5J5cfaCVmr+LT/E7ZZ0sUBHYMARiYcNBYebUiR5MdxQYqMWpBy1w7/aF4FtavF7midp1Ap8cE3Otfbb579U3DPhyQLIwyM2w1DF/sgv7jz+YurqPi2CYuHeyFNCXxUTEQnusaSEM4TNi7F15CjWd9E8yY01KAFRI=
Received: by 10.70.117.18 with SMTP id p18mr8135056wxc;
        Tue, 04 Jul 2006 15:23:09 -0700 (PDT)
Received: by 10.70.11.19 with HTTP; Tue, 4 Jul 2006 15:23:09 -0700 (PDT)
Message-ID: <6e3ae6310607041523i7e8a8683n1894245e26b2a2e0@mail.gmail.com>
Date: Tue, 4 Jul 2006 15:23:09 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and database
In-Reply-To: <5e966dac0607040811g2ed5e9a6pb902028413f774b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
	 <ff737ac30607040754w29cdb147g7255111ff393e0e2@mail.gmail.com>
	 <5e966dac0607040811g2ed5e9a6pb902028413f774b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For your date interval search requirement, Lucene can do range search.
You need to use ConstantScoreRangeQuery for better performance.

You'd better select all your additional attributes into the lucene
document. This will lead to some data duplications, especially look up
values. But it's a tradeoff for faster response and not really a
problem.

Chris Lu
-----------------------------------
Lucene Search on Any Databases/Applications
http://www.dbsight.net

On 7/4/06, Alexander Mashtakov <amashtakov@gmail.com> wrote:
> Thank you *Giulio,*
>
> I read some information about this approach. Is it possible to store in
> Lucene field
> several FKs ? For example, a document has serveral mappings to category
> table (N:M).
> The other question is about dates - is it possible to query Lucene for date
> interval (from YYYY-MM-DD to YYYY-MM-DD) ?
> And the last (but no least ;) - in database, there are mappings (N:M) which
> contains additional attributes, that have to be searchable - for
> example one document may reference other documents (M:N) with attribute
> typeOf (isPartOf, IsVersionOf). Is it possible
> to include typeOf together with N:M map ?
>
> Sorry, may be questions are stupid but I've just started to investigate
> Lucene ;)
>
> Thank you,
> /Alexander
>
>
> On 7/4/06, Giulio Cesare Solaroli <giulio.cesare@gmail.com> wrote:
> >
> > Hi Alexander,
> >
> > if the set of foreign keys you are using to filter the lucene results
> > with some SQL query, I suggest you to include the foreign keys values
> > as additional lucene fields, and let lucene return you the exact set
> > of document IDs.
> >
> > I had excellent results with this technique.
> >
> > Hope this helps.
> >
> > Best regards,
> >
> > Giulio Cesare Solaroli
> >
> >
> >
> > On 7/4/06, Alexander Mashtakov <amashtakov@gmail.com> wrote:
> > > Hi folks,
> > >
> > > I'm looking for a solution/best practices concerning Lucene and SQL
> > database
> > > integration.
> > > The database (MySQL) is already developed and contains data. I've tried
> > > MySQL full-text
> > > search, but it's quite slow and doesn't have the possibility to
> > intergate
> > > custom analyzers.
> > > Phrase search is perfomed only in boolean mode and doesn't return
> > relevance
> > > factor :(
> > >
> > > The idea is to manage full-text indexes (titles, keywords, summaries)
> > and
> > > perform search
> > > using Lucene. The resultset will include ID's that will be appended to
> > SQL
> > > query in order
> > > to apply additional filters based on foreign keys (categories mappings,
> > > etc).
> > >
> > > But, the database is going to be big enough, and the list of IDs
> > returned by
> > > Lucene too. This
> > > may cause high memory usage and slow sql query speed (for instance 1000
> > IDs
> > > in "IN (id1, id2 ...)"
> > > sql filter)
> > >
> > >
> > > Any ideas, suggestions ?
> > >
> > > --
> > > Thank you,
> > > /Alexander
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> /Alexander
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 04 22:48:53 2006
Return-Path: <java-user-return-21778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33441 invoked from network); 4 Jul 2006 22:48:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2006 22:48:53 -0000
Received: (qmail 40847 invoked by uid 500); 4 Jul 2006 22:48:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40813 invoked by uid 500); 4 Jul 2006 22:48:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40801 invoked by uid 99); 4 Jul 2006 22:48:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 15:48:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of giulio.cesare@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 15:48:47 -0700
Received: by wr-out-0506.google.com with SMTP id i11so904070wra
        for <java-user@lucene.apache.org>; Tue, 04 Jul 2006 15:48:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Zx+dCpM6359JDa9cO1FlOmQiKpkMZh/Svsw5gnsaUyZtxw8hyfOxtwmHKYDQmnArz/0+uOsd59y4qFzvqU5/Lni9AhD3MMzOQWpim73SVE3rMQccaKy5b0Kfmof0Ma1wqzMrZg8K2jRePyxGBwkKMgRMqB4y0dQ68BuStjMeslU=
Received: by 10.54.93.12 with SMTP id q12mr2283859wrb;
        Tue, 04 Jul 2006 15:48:23 -0700 (PDT)
Received: by 10.54.91.20 with HTTP; Tue, 4 Jul 2006 15:48:23 -0700 (PDT)
Message-ID: <ff737ac30607041548k7de6155bi3fb9472c1331dd41@mail.gmail.com>
Date: Wed, 5 Jul 2006 00:48:23 +0200
From: "Giulio Cesare Solaroli" <giulio.cesare@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: Lucene and database
In-Reply-To: <5e966dac0607040811g2ed5e9a6pb902028413f774b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
	 <ff737ac30607040754w29cdb147g7255111ff393e0e2@mail.gmail.com>
	 <5e966dac0607040811g2ed5e9a6pb902028413f774b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Alexander,

to solve your problem, you have to carefully understand how lucene
handles fields.

Lucene can handle the value of the document fields in different ways;
the different aspects to care of are:
- indexing: whether the value is indexed or not. It may look strange
to store data on a Lucene index without indexing it, but your records
IDs probably feet this scenario, as usually you never search record by
ID.
- stored: whether you want Lucene to store the full value of the
field. In your scenario, you probably need to store only the record ID
on the Lucene index, as all the data are probably better kept on the
MySQL database.
- tokenized: in order to provide useful text search, you need to
tokenize the "text" field(s), but you will better avoid to tokenize
date fields. For "foreign keys" fields, if you need to store only a
single value, you probably better avoid tokenize it. If instead you
need to store a "list" of foreign key values, your probably set the
value of the field with a (spare separated) values and let Lucene
tokenize it.

Lucene manages also other way to work with the field values, but you
should not immediately need to understand them for your current need.

Now, what you really need to do is realize that Lucene basically
handles only strings, but you have quite a few "knobs" to tune. After
understanding the option that Lucene offers you, go back to your
problem and try to find out how to let Lucene encode your information
in order to achieve your expected result.

If the content of the DB is updated, and you can not manage to reindex
the whole DB every time you need to synchronize its content, you will
need also to define an update strategy for the Lucene index.

Regards,

Giulio Cesare Solaroli


On 7/4/06, Alexander Mashtakov <amashtakov@gmail.com> wrote:
> Thank you *Giulio,*
>
> I read some information about this approach. Is it possible to store in
> Lucene field
> several FKs ? For example, a document has serveral mappings to category
> table (N:M).
> The other question is about dates - is it possible to query Lucene for date
> interval (from YYYY-MM-DD to YYYY-MM-DD) ?
> And the last (but no least ;) - in database, there are mappings (N:M) which
> contains additional attributes, that have to be searchable - for
> example one document may reference other documents (M:N) with attribute
> typeOf (isPartOf, IsVersionOf). Is it possible
> to include typeOf together with N:M map ?
>
> Sorry, may be questions are stupid but I've just started to investigate
> Lucene ;)
>
> Thank you,
> /Alexander
>
>
> On 7/4/06, Giulio Cesare Solaroli <giulio.cesare@gmail.com> wrote:
> >
> > Hi Alexander,
> >
> > if the set of foreign keys you are using to filter the lucene results
> > with some SQL query, I suggest you to include the foreign keys values
> > as additional lucene fields, and let lucene return you the exact set
> > of document IDs.
> >
> > I had excellent results with this technique.
> >
> > Hope this helps.
> >
> > Best regards,
> >
> > Giulio Cesare Solaroli
> >
> >
> >
> > On 7/4/06, Alexander Mashtakov <amashtakov@gmail.com> wrote:
> > > Hi folks,
> > >
> > > I'm looking for a solution/best practices concerning Lucene and SQL
> > database
> > > integration.
> > > The database (MySQL) is already developed and contains data. I've tried
> > > MySQL full-text
> > > search, but it's quite slow and doesn't have the possibility to
> > intergate
> > > custom analyzers.
> > > Phrase search is perfomed only in boolean mode and doesn't return
> > relevance
> > > factor :(
> > >
> > > The idea is to manage full-text indexes (titles, keywords, summaries)
> > and
> > > perform search
> > > using Lucene. The resultset will include ID's that will be appended to
> > SQL
> > > query in order
> > > to apply additional filters based on foreign keys (categories mappings,
> > > etc).
> > >
> > > But, the database is going to be big enough, and the list of IDs
> > returned by
> > > Lucene too. This
> > > may cause high memory usage and slow sql query speed (for instance 1000
> > IDs
> > > in "IN (id1, id2 ...)"
> > > sql filter)
> > >
> > >
> > > Any ideas, suggestions ?
> > >
> > > --
> > > Thank you,
> > > /Alexander
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
> /Alexander
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 06:53:11 2006
Return-Path: <java-user-return-21779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30397 invoked from network); 5 Jul 2006 06:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 06:53:11 -0000
Received: (qmail 44121 invoked by uid 500); 5 Jul 2006 06:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43450 invoked by uid 500); 5 Jul 2006 06:53:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43434 invoked by uid 99); 5 Jul 2006 06:53:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Jul 2006 23:53:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.219] (HELO promail4.rediffmailpro.com) (203.199.83.219)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 04 Jul 2006 23:53:03 -0700
Received: (qmail 31609 invoked from network); 5 Jul 2006 06:50:40 -0000
Received: from unknown (HELO Amit) (59.181.103.41)
  by mailserver with SMTP; 5 Jul 2006 06:50:40 -0000
Reply-To: <amitk@techepoch.com>
From: "Amit" <amitk@techepoch.com>
To: <java-user@lucene.apache.org>
Subject: Function writing using lucene
Date: Wed, 5 Jul 2006 12:22:32 +0530
Message-ID: <APEIIFMNKNHNCFFBLFAKEEKKCAAA.amitk@techepoch.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

As i am new in lucene i need help to write some function on lucene.
Pls see below i list out functionality i want.

i need term membership means term belongs to which fields.

 e.g.  if enter query like: lucene apache
       so it return me lucene apache is member of contents
       As per my knowledge lucene index on each term like:
                                                           contents:lucene
                                                           contents:apache
       so i need intersection of these two or many set.

i have some query, which kind of filter we can use in lucene to filter out
documents ids?
is it have sortorder by docid in asc or desc?
can i write custom filter?


i would appreciate any kind of reply.

Thanks in advance.


Regards,
Amit


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 13:02:57 2006
Return-Path: <java-user-return-21780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92946 invoked from network); 5 Jul 2006 13:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 13:02:57 -0000
Received: (qmail 75820 invoked by uid 500); 5 Jul 2006 13:02:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75666 invoked by uid 500); 5 Jul 2006 13:02:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75606 invoked by uid 99); 5 Jul 2006 13:02:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 06:02:35 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 06:02:33 -0700
Received: by py-out-1112.google.com with SMTP id d80so2186390pyd
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 06:02:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=XrFnD0Z97CbEDPi/JLUC1l97M1/77xRGOTTor5mEbuogdQxEebnuetMRgBoj3oeBhQmAZtlFklGV0RoFKlUkm6opDf+4cYaDDnd8LvINQ8eQm3eQExp+YzPJ2eUMT0X9A3UARrsPOzMzZbsMecM6i0AV7F8y4waSSt3UrkW1Ol0=
Received: by 10.35.99.14 with SMTP id b14mr5109718pym;
        Wed, 05 Jul 2006 06:02:13 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 5 Jul 2006 06:02:12 -0700 (PDT)
Message-ID: <359a92830607050602v400be461x87cb01932e89f6ce@mail.gmail.com>
Date: Wed, 5 Jul 2006 09:02:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, amitk@techepoch.com
Subject: Re: Function writing using lucene
In-Reply-To: <APEIIFMNKNHNCFFBLFAKEEKKCAAA.amitk@techepoch.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47459_16087999.1152104532977"
References: <APEIIFMNKNHNCFFBLFAKEEKKCAAA.amitk@techepoch.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47459_16087999.1152104532977
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Amit:

You can make arbitrarily complex boolean clauses, see BooleanQuery. For
that, you don't need a filter. You can add boolean clauses with MUST, SHOULD
and MUST NOT (AND, OR,  NOT). Filters are for restricting queries that
create (under the covers) a large BooleanQuery. You shouldn't think about
filters unless there is a demonstrated need. You'll know that when you get a
TooManyClauses exception <G>. There is a discussion of this in the book
Lucene In Action, a book that I highly recommend.

For instance, something like should get the documents that have both
"lucene" and "apache" in the contents field:
BooleanQuery bq = new BooleanQuery;
bq.add(new TermQuery(new Term("content", "lucene")),
BooleanClause.Occur.MUST);
bq.add(new TermQuery(new Term("content", "apache")),
BooleanClause.Occur.MUST);
Hits hits = Searcher.search(bq);

For that matter, the QueryParser will do all this for you if you give it the
right string. It's up to you whether you let QueryParser construct the
clause for you or construct the BooleanQuery yourself.

Note that you can sort however you want using the Searcher.search(Query,
Sort) form of the search call. Sorting takes time, though.....

I don't understand why you care about "filtering out document IDs". You
submit a query and get a Hits object back. Then you fetch the Document from
the Hits object that contains your data. Document IDs are an integral part
of the document (and assigned by Lucene at index time). I have a hard time
imagining why you'd even want to try to filter them out, I'm not sure the
question makes sense in the Lucene context.

The default return order is by relevance, doc id has nothing to do with it.

You can certainly write a custom filter, but be really sure you need it
first. Wildcard queries and prefix queries are prime candidates for filters
in my experience.

If you haven't gotten a copy of Lucene In Action, I strongly recommend that
you do. It explains a LOT about how Lucene works and should be used.

Also, get a copy of Luke to examine your indexes and allow you to play
around with the query syntax. It'll save you a LOT of time and effort.

Hope this helps
Erick

------=_Part_47459_16087999.1152104532977--

From java-user-return-21781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 13:05:03 2006
Return-Path: <java-user-return-21781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94186 invoked from network); 5 Jul 2006 13:05:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 13:05:03 -0000
Received: (qmail 88927 invoked by uid 500); 5 Jul 2006 13:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88899 invoked by uid 500); 5 Jul 2006 13:04:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88888 invoked by uid 99); 5 Jul 2006 13:04:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 06:04:57 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 06:04:56 -0700
Received: by py-out-1112.google.com with SMTP id d80so2187234pyd
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 06:04:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fApEQmhitOH0pgj4zlFpgRd98VfYPeeeC7vnCblo0wai5yaJrInOBgKRXgAlbNizprf9tMHdxzmaXYFBCteaZwK6wJrXxIUXklnt7PozzzNu9fSChz/i0eT1jr226XNS4HPMylLS8OTaFag4ck/FcGHSJxHcX4kkSFaymO5PAu8=
Received: by 10.35.34.18 with SMTP id m18mr3201198pyj;
        Wed, 05 Jul 2006 06:04:35 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 5 Jul 2006 06:04:35 -0700 (PDT)
Message-ID: <359a92830607050604k3c1286f9yd2b3b21a8bcfc015@mail.gmail.com>
Date: Wed, 5 Jul 2006 09:04:35 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: Lucene and database
In-Reply-To: <ff737ac30607041548k7de6155bi3fb9472c1331dd41@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47515_28639799.1152104675650"
References: <5e966dac0607040749o21e0d212m780e3a652e8aa069@mail.gmail.com>
	 <ff737ac30607040754w29cdb147g7255111ff393e0e2@mail.gmail.com>
	 <5e966dac0607040811g2ed5e9a6pb902028413f774b3@mail.gmail.com>
	 <ff737ac30607041548k7de6155bi3fb9472c1331dd41@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47515_28639799.1152104675650
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Alexander:

You might also look through the mail archive for "database". There have been
several dicsussions on that topic with input from people far more
knowledgable than me that you might find relevant <G>.....

Erick

------=_Part_47515_28639799.1152104675650--

From java-user-return-21782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 18:07:49 2006
Return-Path: <java-user-return-21782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22542 invoked from network); 5 Jul 2006 18:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 18:07:48 -0000
Received: (qmail 91886 invoked by uid 500); 5 Jul 2006 18:07:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91859 invoked by uid 500); 5 Jul 2006 18:07:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91843 invoked by uid 99); 5 Jul 2006 18:07:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 11:07:42 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.103] (HELO web34105.mail.mud.yahoo.com) (66.163.178.103)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Jul 2006 11:07:41 -0700
Received: (qmail 21404 invoked by uid 60001); 5 Jul 2006 18:07:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=dHVMg+80dYxIBPC+UY+WiYpB8Nkgx5TFqBSQSd25VVDNA4qPU+UbNZyC/290K5gLjm86WiF2VP7eKrulx/L04VN4dt/aTR+tk72v3D16KgOKPzaRJdtID0Pizgej4xM2xU5/Uofg2+AWNiGwRWNVklD2PwikReGcIqkoOI5IBqo=  ;
Message-ID: <20060705180719.21402.qmail@web34105.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34105.mail.mud.yahoo.com via HTTP; Wed, 05 Jul 2006 11:07:19 PDT
Date: Wed, 5 Jul 2006 11:07:19 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: BitSet in a HitCollector
To: java-user@lucene.apache.org
In-Reply-To: <20060702065735.GA5026@fermat.math.technion.ac.il>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Everyone,

I'm using a HitCollector and would like to know the
total number of results that matched a given query.
Based on the JavaDoc, I this will do the trick:

Searcher searcher = new IndexSearcher(indexReader);
   final BitSet bits = new
BitSet(indexReader.maxDoc());
   searcher.search(query, new HitCollector() {
       public void collect(int doc, float score) {
         bits.set(doc);
       }
     });
int numResults = bits.cardinality();

If I want to know the total number of results inside
of the HitCollector, i.e. before the collect method
has ever been called, I think I could pass the Query
and Searcher objects into the HitCollector and do this
in its constructor:

BitSet bits = (new
QueryFilter(query)).bits(searcher.getIndexReader());
int numResults = bits.cardinality();

Is there a performance penalty using the QueryFilter?
Is Lucene executing another pass over the index in
order to populate the BitSet and then doing another
pass while calling the collect method? Thanx.

JAMES



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 18:16:43 2006
Return-Path: <java-user-return-21783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27239 invoked from network); 5 Jul 2006 18:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 18:16:43 -0000
Received: (qmail 7395 invoked by uid 500); 5 Jul 2006 18:16:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7369 invoked by uid 500); 5 Jul 2006 18:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7358 invoked by uid 99); 5 Jul 2006 18:16:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 11:16:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.164.102.196] (HELO mail.gotuit.com) (216.164.102.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 11:16:36 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Null field values
Date: Wed, 5 Jul 2006 14:16:14 -0400
Message-ID: <586B46B62C73C44AA8F4302E01A84A846143@exchange.gotuit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Null field values
Thread-Index: AcadDcY/lgcV8XcgSOuF9MDaeEk7DgDUQQgw
From: "Seeta Somagani" <seeta@gotuit.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I figured that out. I was opening up a different, but similar, index.
That was made evident when I printed out the document.
Thanks so much,
Seeta

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Saturday, July 01, 2006 8:56 AM
To: java-user@lucene.apache.org
Subject: Re: Null field values

When you indexed the fields you can't get back, did you use
Field.Store.YES?
I've been confused by the fact that Luke can "reconstruct" fields that
aren't stored, but are indexed....

If that isn't the problem, perhaps you could post some code
snippets.....

Best
Erick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 21:45:53 2006
Return-Path: <java-user-return-21784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4342 invoked from network); 5 Jul 2006 21:45:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 21:45:53 -0000
Received: (qmail 30642 invoked by uid 500); 5 Jul 2006 21:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30324 invoked by uid 500); 5 Jul 2006 21:45:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30313 invoked by uid 99); 5 Jul 2006 21:45:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 14:45:47 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 14:45:45 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FyFBV-0006rI-7T
	for java-user@lucene.apache.org; Wed, 05 Jul 2006 14:45:25 -0700
Message-ID: <5189803.post@talk.nabble.com>
Date: Wed, 5 Jul 2006 14:21:29 -0700 (PDT)
From: gloria_white <whitgloria@gmail.com>
To: java-user@lucene.apache.org
Subject: Best way to Add items to Index in Real Time
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: whitgloria@gmail.com
X-Nabble-From: gloria_white <whitgloria@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


We have a Lucene index of a small size(about 150k items) that requires
additions/deletions several times in a day. We could add or delete 3 to 4k
documents everytime we perform these operations. 
While we perform this operation, we still need to be 'online' and available
for searching. And if we perform these operations while search is going on,
we get conflict errors, causing either the indexing process or the search
operation to fail. 
What is the best way to handle this scenario so that while we can add/delete
documents from index in real time and also allow search to take place?

thanks a lot! 

Gloria
-- 
View this message in context: http://www.nabble.com/Best-way-to-Add-items-to-Index-in-Real-Time-tf1897254.html#a5189803
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 22:23:42 2006
Return-Path: <java-user-return-21785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18812 invoked from network); 5 Jul 2006 22:23:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:23:42 -0000
Received: (qmail 84947 invoked by uid 500); 5 Jul 2006 22:23:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83974 invoked by uid 500); 5 Jul 2006 22:23:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83963 invoked by uid 99); 5 Jul 2006 22:23:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:23:36 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 05 Jul 2006 15:23:36 -0700
Received: (qmail 42357 invoked by uid 60001); 5 Jul 2006 22:23:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ESdpi7WY73pCqLZzF0UFkrOFvHTZBP6oVbsJvYFEyrcuaFAYTenZuprooxjkMrDhxUoXkJezrkEkzWr3aigW8bjYhDYdZT6v9sLyxyMaUA96Qa5FaLAtaLUbrKzMh3HMIiW8zgFon84GpQZJtzNRk+U2Uzk+Uc0kTybHkSr8+I8=  ;
Message-ID: <20060705222314.42355.qmail@web50301.mail.yahoo.com>
Received: from [72.229.167.99] by web50301.mail.yahoo.com via HTTP; Wed, 05 Jul 2006 15:23:14 PDT
Date: Wed, 5 Jul 2006 15:23:14 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Best way to Add items to Index in Real Time
To: java-user@lucene.apache.org
In-Reply-To: <5189803.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you are getting errors while searching and at the same either adding or deleting documents, chances are you are not using the API correctly and following the concurrency rules (described many times on this list).  Yo ucan search and modify your index at the same time.  Adding and deleting documents is best done in batches (e.g. run your deletions first, close IndexReader that did deletions (could be the same one that is used for searching), open IndexWriter, add documents, close writer, re-open IndexSearcher/Reader for searching so your changes are visible).

Otis

----- Original Message ----
From: gloria_white <whitgloria@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, July 5, 2006 5:21:29 PM
Subject: Best way to Add items to Index in Real Time


We have a Lucene index of a small size(about 150k items) that requires
additions/deletions several times in a day. We could add or delete 3 to 4k
documents everytime we perform these operations. 
While we perform this operation, we still need to be 'online' and available
for searching. And if we perform these operations while search is going on,
we get conflict errors, causing either the indexing process or the search
operation to fail. 
What is the best way to handle this scenario so that while we can add/delete
documents from index in real time and also allow search to take place?

thanks a lot! 

Gloria
-- 
View this message in context: http://www.nabble.com/Best-way-to-Add-items-to-Index-in-Real-Time-tf1897254.html#a5189803
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 22:42:08 2006
Return-Path: <java-user-return-21786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23873 invoked from network); 5 Jul 2006 22:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:42:07 -0000
Received: (qmail 7378 invoked by uid 500); 5 Jul 2006 22:42:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6392 invoked by uid 500); 5 Jul 2006 22:42:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6380 invoked by uid 99); 5 Jul 2006 22:42:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:42:01 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.252.124.53] (HELO medicor.wustl.edu) (128.252.124.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:42:00 -0700
Subject: Fw: tomcat 5 can't find static method FSDirectory.getDirectory( String s, boolean
 b)?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF920DDA17.84725FD9-ON862571A2.007C9023-862571A2.007CA968@msnotes.wustl.edu>
From: maffittd@mir.wustl.edu
Date: Wed, 5 Jul 2006 17:41:37 -0500
X-MIMETrack: Serialize by Router on Medicor/Washington University(Release 6.5.5 HF255|March
 31, 2006) at 07/05/2006 05:41:59 PM
MIME-Version: 1.0
Content-type: multipart/mixed; 
	Boundary="0__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3
Content-type: multipart/related; 
	Boundary="1__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3"

--1__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3
Content-type: multipart/alternative; 
	Boundary="2__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3"

--2__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: quoted-printable





---
David Maffitt, Senior Programmer-Analyst
Washington University School of Medicine      maffittd@mir.wustl.edu
Electronic Radiology Laboratory                         voice  314.362.=
6965
Mallinckrodt Institute of Radiology                       fax
314.362.6971
510 S. Kingshighway, St. Louis, MO 63110

----- Forwarded by David Maffitt/MIR/Medicine/Washington University on
07/05/2006 05:40 PM -----
                                                                       =
    
             David                                                     =
    
             Maffitt/MIR/Medic                                         =
    
             ine/Washington                                            =
 To 
             University                java-user@lucene.apache.org     =
    
                                                                       =
 cc 
             07/05/2006 05:32                                          =
    
             PM                                                    Subj=
ect 
                                       tomcat 5 can't find static metho=
d   
                                       FSDirectory.getDirectory( String=
 s, 
                                       boolean b)?                     =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    




I'm attempting to create a jsp that returns hits from a lucene index bu=
t
have the problem that tomcat does not seem to find the class defintion =
for
FSDirectory.  I'm running tomcat 5.0 on Debian linux 3.1 running kernel=
 2.4
and lucene 1.9.1.

The error:
javax.servlet.ServletException

org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageCon=
textImpl.java:846)


org.apache.jasper.runtime.PageContextImpl.access$11(PageContextImpl.jav=
a:784)


org.apache.jasper.runtime.PageContextImpl$12.run(PageContextImpl.java:7=
66)
        java.security.AccessController.doPrivileged(Native Method)

org.apache.jasper.runtime.PageContextImpl.handlePageException(PageConte=
xtImpl.java:764)

        org.apache.jsp.query_jsp._jspService(query_jsp.java:266)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.j=
ava:324)


org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292=
)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.ja=
va:39)


sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccesso=
rImpl.java:25)

        java.lang.reflect.Method.invoke(Method.java:585)

org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
        java.security.AccessController.doPrivileged(Native Method)
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)

org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:272=
)

org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.ja=
va:161)javax.servlet.ServletException


org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageCon=
textImpl.java:846)


org.apache.jasper.runtime.PageContextImpl.access$11(PageContextImpl.jav=
a:784)


org.apache.jasper.runtime.PageContextImpl$12.run(PageContextImpl.java:7=
66)
        java.security.AccessController.doPrivileged(Native Method)

org.apache.jasper.runtime.PageContextImpl.handlePageException(PageConte=
xtImpl.java:764)

        org.apache.jsp.query_jsp._jspService(query_jsp.java:266)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.j=
ava:324)


org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292=
)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.ja=
va:39)


sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccesso=
rImpl.java:25)

        java.lang.reflect.Method.invoke(Method.java:585)

org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
        java.security.AccessController.doPrivileged(Native Method)
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)

org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:272=
)

org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.ja=
va:161)javax.servlet.ServletException


org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageCon=
textImpl.java:846)


org.apache.jasper.runtime.PageContextImpl.access$11(PageContextImpl.jav=
a:784)


org.apache.jasper.runtime.PageContextImpl$12.run(PageContextImpl.java:7=
66)
        java.security.AccessController.doPrivileged(Native Method)

org.apache.jasper.runtime.PageContextImpl.handlePageException(PageConte=
xtImpl.java:764)

        org.apache.jsp.query_jsp._jspService(query_jsp.java:266)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.j=
ava:324)


org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292=
)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.ja=
va:39)


sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccesso=
rImpl.java:25)

        java.lang.reflect.Method.invoke(Method.java:585)

org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
        java.security.AccessController.doPrivileged(Native Method)
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)

org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:272=
)

org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.ja=
va:161)

root cause:
java.lang.NoClassDefFoundError

edu.wustl.mir.ccir.query.QueryEngine.setDirectory(QueryEngine.java:43)
        edu.wustl.mir.ccir.taglib.SetDirectory.doTag(SetDirectory.java:=
44)

org.apache.jsp.query_jsp._jspx_meth_ccir_setDirectory_0(query_jsp.java:=
282)
        org.apache.jsp.query_jsp._jspService(query_jsp.java:135)
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)

org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.j=
ava:324)


org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:292=
)
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.ja=
va:39)


sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccesso=
rImpl.java:25)

        java.lang.reflect.Method.invoke(Method.java:585)

org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:243)
        java.security.AccessController.doPrivileged(Native Method)
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)

org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:272=
)

org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.ja=
va:161)


results from accessing ccir/query.jsp.  Also attached is the QueryEngin=
e
bean code.

lucene-core-1.9.1.jar is in webapps/ccir/WEB-INF/lib

Has anyone seen this before and suggest a fix or work around?  I'm
currently stuck.


---
David Maffitt, Senior Programmer-Analyst
Washington University School of Medicine      maffittd@mir.wustl.edu
Electronic Radiology Laboratory                         voice  314.362.=
6965
Mallinckrodt Institute of Radiology                       fax
314.362.6971
510 S. Kingshighway, St. Louis, MO 63110(See attached file: query.jsp)(=
See
attached file: QueryEngine.java)(See attached file: SetDirectory.java)=

--2__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3
Content-type: text/html; charset=US-ASCII
Content-Disposition: inline
Content-transfer-encoding: quoted-printable

<html><body>
<p><br>
---<br>
David Maffitt, Senior Programmer-Analyst<br>
Washington University School of Medicine      maffittd@mir.wustl.edu<br=
>
Electronic Radiology Laboratory                         voice  314.362.=
6965<br>
Mallinckrodt Institute of Radiology                       fax    314.36=
2.6971<br>
510 S. Kingshighway, St. Louis, MO 63110<br>
<br>
<font size=3D"2" color=3D"#800080">----- Forwarded by David Maffitt/MIR=
/Medicine/Washington University</font><font size=3D"2" color=3D"#800080=
"> on 07/05/2006 05:40 PM</font><font size=3D"2" color=3D"#800080"> ---=
--</font><br>
<br>

<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td style=3D"background-image:url(cid:40__=3D09BBFB3=
1DFEF16B38f9e8a@msnotes.wustl.edu); background-repeat: no-repeat; " wid=
th=3D"40%">
<ul>
<ul>
<ul>
<ul><b><font size=3D"2">David Maffitt/MIR/Medicine/Washington Universit=
y</font></b><font size=3D"2"> </font>
<p><font size=3D"2">07/05/2006 05:32 PM</font></ul>
</ul>
</ul>
</ul>
</td><td width=3D"60%">
<table width=3D"100%" border=3D"0" cellspacing=3D"0" cellpadding=3D"0">=

<tr valign=3D"top"><td width=3D"1%"><img src=3D"cid:50__=3D09BBFB31DFEF=
16B38f9e8a@msnotes.wustl.edu" border=3D"0" height=3D"1" width=3D"58" al=
t=3D""><br>
<div align=3D"right"><font size=3D"2">To</font></div></td><td width=3D"=
100%"><img src=3D"cid:50__=3D09BBFB31DFEF16B38f9e8a@msnotes.wustl.edu" =
border=3D"0" height=3D"1" width=3D"1" alt=3D""><br>
<font size=3D"2">java-user@lucene.apache.org</font></td></tr>

<tr valign=3D"top"><td width=3D"1%"><img src=3D"cid:50__=3D09BBFB31DFEF=
16B38f9e8a@msnotes.wustl.edu" border=3D"0" height=3D"1" width=3D"58" al=
t=3D""><br>
<div align=3D"right"><font size=3D"2">cc</font></div></td><td width=3D"=
100%"><img src=3D"cid:50__=3D09BBFB31DFEF16B38f9e8a@msnotes.wustl.edu" =
border=3D"0" height=3D"1" width=3D"1" alt=3D""><br>
</td></tr>

<tr valign=3D"top"><td width=3D"1%"><img src=3D"cid:50__=3D09BBFB31DFEF=
16B38f9e8a@msnotes.wustl.edu" border=3D"0" height=3D"1" width=3D"58" al=
t=3D""><br>
<div align=3D"right"><font size=3D"2">Subject</font></div></td><td widt=
h=3D"100%"><img src=3D"cid:50__=3D09BBFB31DFEF16B38f9e8a@msnotes.wustl.=
edu" border=3D"0" height=3D"1" width=3D"1" alt=3D""><br>
<font size=3D"2">tomcat 5 can't find static method FSDirectory.getDirec=
tory( String s, boolean b)?</font></td></tr>
</table>

<table border=3D"0" cellspacing=3D"0" cellpadding=3D"0">
<tr valign=3D"top"><td width=3D"58"><img src=3D"cid:50__=3D09BBFB31DFEF=
16B38f9e8a@msnotes.wustl.edu" border=3D"0" height=3D"1" width=3D"1" alt=
=3D""></td><td width=3D"336"><img src=3D"cid:50__=3D09BBFB31DFEF16B38f9=
e8a@msnotes.wustl.edu" border=3D"0" height=3D"1" width=3D"1" alt=3D""><=
/td></tr>
</table>
</td></tr>
</table>
<br>
I'm attempting to create a jsp that returns hits from a lucene index bu=
t have the problem that tomcat does not seem to find the class defintio=
n for FSDirectory.  I'm running tomcat 5.0 on Debian linux 3.1 running =
kernel 2.4 and lucene 1.9.1.<br>
<br>
The error:<br>
javax.servlet.ServletException<br>
        org.apache.jasper.runtime.PageContextImpl.doHandlePageException=
(PageContextImpl.java:846)<br>
        org.apache.jasper.runtime.PageContextImpl.access$11(PageContext=
Impl.java:784)<br>
        org.apache.jasper.runtime.PageContextImpl$12.run(PageContextImp=
l.java:766)<br>
        java.security.AccessController.doPrivileged(Native Method)<br>
        org.apache.jasper.runtime.PageContextImpl.handlePageException(P=
ageContextImpl.java:764)<br>
        org.apache.jsp.query_jsp._jspService(query_jsp.java:266)<br>
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletW=
rapper.java:324)<br>
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.=
java:292)<br>
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>=

        sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccesso=
rImpl.java:39)<br>
        sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMetho=
dAccessorImpl.java:25)<br>
        java.lang.reflect.Method.invoke(Method.java:585)<br>
        org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.ja=
va:243)<br>
        java.security.AccessController.doPrivileged(Native Method)<br>
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)<br=
>
        org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.=
java:272)<br>
        org.apache.catalina.security.SecurityUtil.doAsPrivilege(Securit=
yUtil.java:161)javax.servlet.ServletException<br>
        org.apache.jasper.runtime.PageContextImpl.doHandlePageException=
(PageContextImpl.java:846)<br>
        org.apache.jasper.runtime.PageContextImpl.access$11(PageContext=
Impl.java:784)<br>
        org.apache.jasper.runtime.PageContextImpl$12.run(PageContextImp=
l.java:766)<br>
        java.security.AccessController.doPrivileged(Native Method)<br>
        org.apache.jasper.runtime.PageContextImpl.handlePageException(P=
ageContextImpl.java:764)<br>
        org.apache.jsp.query_jsp._jspService(query_jsp.java:266)<br>
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletW=
rapper.java:324)<br>
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.=
java:292)<br>
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>=

        sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccesso=
rImpl.java:39)<br>
        sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMetho=
dAccessorImpl.java:25)<br>
        java.lang.reflect.Method.invoke(Method.java:585)<br>
        org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.ja=
va:243)<br>
        java.security.AccessController.doPrivileged(Native Method)<br>
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)<br=
>
        org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.=
java:272)<br>
        org.apache.catalina.security.SecurityUtil.doAsPrivilege(Securit=
yUtil.java:161)javax.servlet.ServletException<br>
        org.apache.jasper.runtime.PageContextImpl.doHandlePageException=
(PageContextImpl.java:846)<br>
        org.apache.jasper.runtime.PageContextImpl.access$11(PageContext=
Impl.java:784)<br>
        org.apache.jasper.runtime.PageContextImpl$12.run(PageContextImp=
l.java:766)<br>
        java.security.AccessController.doPrivileged(Native Method)<br>
        org.apache.jasper.runtime.PageContextImpl.handlePageException(P=
ageContextImpl.java:764)<br>
        org.apache.jsp.query_jsp._jspService(query_jsp.java:266)<br>
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletW=
rapper.java:324)<br>
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.=
java:292)<br>
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>=

        sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccesso=
rImpl.java:39)<br>
        sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMetho=
dAccessorImpl.java:25)<br>
        java.lang.reflect.Method.invoke(Method.java:585)<br>
        org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.ja=
va:243)<br>
        java.security.AccessController.doPrivileged(Native Method)<br>
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)<br=
>
        org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.=
java:272)<br>
        org.apache.catalina.security.SecurityUtil.doAsPrivilege(Securit=
yUtil.java:161)<br>
root cause:<br>
java.lang.NoClassDefFoundError<br>
        edu.wustl.mir.ccir.query.QueryEngine.setDirectory(QueryEngine.j=
ava:43)<br>
        edu.wustl.mir.ccir.taglib.SetDirectory.doTag(SetDirectory.java:=
44)<br>
        org.apache.jsp.query_jsp._jspx_meth_ccir_setDirectory_0(query_j=
sp.java:282)<br>
        org.apache.jsp.query_jsp._jspService(query_jsp.java:135)<br>
        org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:=
94)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        org.apache.jasper.servlet.JspServletWrapper.service(JspServletW=
rapper.java:324)<br>
        org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.=
java:292)<br>
        org.apache.jasper.servlet.JspServlet.service(JspServlet.java:23=
6)<br>
        javax.servlet.http.HttpServlet.service(HttpServlet.java:802)<br=
>
        sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>=

        sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccesso=
rImpl.java:39)<br>
        sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMetho=
dAccessorImpl.java:25)<br>
        java.lang.reflect.Method.invoke(Method.java:585)<br>
        org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.ja=
va:243)<br>
        java.security.AccessController.doPrivileged(Native Method)<br>
        javax.security.auth.Subject.doAsPrivileged(Subject.java:517)<br=
>
        org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.=
java:272)<br>
        org.apache.catalina.security.SecurityUtil.doAsPrivilege(Securit=
yUtil.java:161)<br>
<br>
results from accessing ccir/query.jsp.  Also attached is the QueryEngin=
e bean code.<br>
<br>
lucene-core-1.9.1.jar is in webapps/ccir/WEB-INF/lib<br>
<br>
Has anyone seen this before and suggest a fix or work around?  I'm curr=
ently stuck.<br>
<br>
<br>
---<br>
David Maffitt, Senior Programmer-Analyst<br>
Washington University School of Medicine      maffittd@mir.wustl.edu<br=
>
Electronic Radiology Laboratory                         voice  314.362.=
6965<br>
Mallinckrodt Institute of Radiology                       fax    314.36=
2.6971<br>
510 S. Kingshighway, St. Louis, MO 63110<i>(See attached file: query.js=
p)</i><i>(See attached file: QueryEngine.java)</i><i>(See attached file=
: SetDirectory.java)</i></body></html>=


--2__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3--


--1__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3
Content-type: image/gif; 
	name="ecblank.gif"
Content-Disposition: inline; filename="ecblank.gif"
Content-ID: <50__=09BBFB31DFEF16B38f9e8a@msnotes.wustl.edu>
Content-transfer-encoding: base64

R0lGODlhEAABAIAAAAAAAP///yH5BAEAAAEALAAAAAAQAAEAAAIEjI8ZBQA7


--1__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3--



--0__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0__=09BBFB31DFEF16B38f9e8a93df938690918c09BBFB31DFEF16B3--


From java-user-return-21787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 22:50:40 2006
Return-Path: <java-user-return-21787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26253 invoked from network); 5 Jul 2006 22:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:50:40 -0000
Received: (qmail 23321 invoked by uid 500); 5 Jul 2006 22:50:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22963 invoked by uid 500); 5 Jul 2006 22:50:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22952 invoked by uid 99); 5 Jul 2006 22:50:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:50:34 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.252.124.53] (HELO medicor.wustl.edu) (128.252.124.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:50:33 -0700
Subject: code in question for tomcat 5 can't find static method
 FSDirectory.getDirectory( String s, boolean b)?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF78521CB9.9B3A2010-ON862571A2.007D143E-862571A2.007D7154@msnotes.wustl.edu>
From: maffittd@mir.wustl.edu
Date: Wed, 5 Jul 2006 17:50:09 -0500
X-MIMETrack: Serialize by Router on Medicor/Washington University(Release 6.5.5 HF255|March
 31, 2006) at 07/05/2006 05:50:32 PM
MIME-Version: 1.0
Content-type: multipart/mixed; 
	Boundary="0__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE
Content-type: multipart/alternative; 
	Boundary="1__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE"

--1__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE
Content-type: text/plain; charset=US-ASCII


I don't think the attached code made it through on the first post.  Here is
a second try.

(See attached file: SetDirectory.java)(See attached file: query.jsp)(See
attached file: QueryEngine.java)

---
David Maffitt, Senior Programmer-Analyst
Washington University School of Medicine      maffittd@mir.wustl.edu
Electronic Radiology Laboratory                         voice  314.362.6965
Mallinckrodt Institute of Radiology                       fax
314.362.6971
510 S. Kingshighway, St. Louis, MO 63110
--1__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE
Content-type: text/html; charset=US-ASCII
Content-Disposition: inline

<html><body>
<p>I don't think the attached code made it through on the first post.  Here is a second try.<br>
<br>
<i>(See attached file: SetDirectory.java)</i><i>(See attached file: query.jsp)</i><i>(See attached file: QueryEngine.java)</i><br>
<br>
---<br>
David Maffitt, Senior Programmer-Analyst<br>
Washington University School of Medicine      maffittd@mir.wustl.edu<br>
Electronic Radiology Laboratory                         voice  314.362.6965<br>
Mallinckrodt Institute of Radiology                       fax    314.362.6971<br>
510 S. Kingshighway, St. Louis, MO 63110<br>
</body></html>

--1__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE--



--0__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0__=09BBFB31DFEE92AE8f9e8a93df938690918c09BBFB31DFEE92AE--


From java-user-return-21788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 22:56:11 2006
Return-Path: <java-user-return-21788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27198 invoked from network); 5 Jul 2006 22:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 22:56:10 -0000
Received: (qmail 34630 invoked by uid 500); 5 Jul 2006 22:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34604 invoked by uid 500); 5 Jul 2006 22:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34593 invoked by uid 99); 5 Jul 2006 22:56:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:56:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of buschmic@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 15:56:03 -0700
Received: by wr-out-0506.google.com with SMTP id i34so1089866wra
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 15:55:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=C0laIQPJrr4dsDoiB406EEsEFGxn0n7/FAXmtIme/Nvomd92N4YeIGDiPTScXA/lOJ1tLuwInZv7xIM6qr3NmE6WnUYVqyVjp2uDbfGP71zqViLZVYsPDq7yRZedNHWvUvVixZLbHMjB/FJsh9//inrS2OWq9U7ucIYxgSg+TlI=
Received: by 10.54.76.18 with SMTP id y18mr3310331wra;
        Wed, 05 Jul 2006 15:55:42 -0700 (PDT)
Received: from ?192.168.0.65? ( [80.146.118.188])
        by mx.gmail.com with ESMTP id 35sm1192658wra.2006.07.05.15.55.41;
        Wed, 05 Jul 2006 15:55:42 -0700 (PDT)
Message-ID: <44AC436A.5000407@gmail.com>
Date: Thu, 06 Jul 2006 00:55:38 +0200
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Best way to Add items to Index in Real Time
References: <20060705222314.42355.qmail@web50301.mail.yahoo.com>
In-Reply-To: <20060705222314.42355.qmail@web50301.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:
> If you are getting errors while searching and at the same either adding or deleting documents, chances are you are not using the API correctly and following the concurrency rules (described many times on this list).  Yo ucan search and modify your index at the same time.  Adding and deleting documents is best done in batches (e.g. run your deletions first, close IndexReader that did deletions (could be the same one that is used for searching), open IndexWriter, add documents, close writer, re-open IndexSearcher/Reader for searching so your changes are visible).
>
> Otis
>
>   

Hi,

check out this nice patch, it could be useful for your use case:

http://issues.apache.org/jira/browse/LUCENE-565
http://www.gossamer-threads.com/lists/lucene/java-dev/35317

It provides better performance when you have a big number of 
update/delete operations.

Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 23:22:00 2006
Return-Path: <java-user-return-21789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34670 invoked from network); 5 Jul 2006 23:22:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 23:22:00 -0000
Received: (qmail 71501 invoked by uid 500); 5 Jul 2006 23:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71290 invoked by uid 500); 5 Jul 2006 23:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71275 invoked by uid 99); 5 Jul 2006 23:21:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:21:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:21:52 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FyGgT-0000oq-KB
	for java-user@lucene.apache.org; Wed, 05 Jul 2006 16:21:29 -0700
Message-ID: <5191394.post@talk.nabble.com>
Date: Wed, 5 Jul 2006 16:21:29 -0700 (PDT)
From: gloria_white <whitgloria@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Best way to Add items to Index in Real Time
In-Reply-To: <20060705222314.42355.qmail@web50301.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: whitgloria@gmail.com
X-Nabble-From: gloria_white <whitgloria@gmail.com>
References: <5189803.post@talk.nabble.com> <20060705222314.42355.qmail@web50301.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


thanks for the response Otis!
I'm a novice with this, so I'll appreciate your patience. 
I'm using a batch program for doing the additions and deletions while a
separate web app for searching. How can I ensure that these two different
apps (one making the changes to index and the other just searching) don't
run into each others' paths? Or am I ignorant of something really basic
here?

Thanks
-- 
View this message in context: http://www.nabble.com/Best-way-to-Add-items-to-Index-in-Real-Time-tf1897254.html#a5191394
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 05 23:58:31 2006
Return-Path: <java-user-return-21790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48786 invoked from network); 5 Jul 2006 23:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2006 23:58:31 -0000
Received: (qmail 19275 invoked by uid 500); 5 Jul 2006 23:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19233 invoked by uid 500); 5 Jul 2006 23:58:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19222 invoked by uid 99); 5 Jul 2006 23:58:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:58:25 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heng.mei@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 16:58:24 -0700
Received: by py-out-1112.google.com with SMTP id d80so2409371pyd
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 16:58:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Vfq5epXVuP9asWkaO0jUW8fD8Q1+KdJebeDY5ME2r4kPsmYqWacNsK5AHxxUz7H1e/OMZYC2jQ0R7mldvkie1VNi3SFB9HHdONoZCkspv0RmDt2r5nZIEiqTOBfatmrgnPMHx7N1k3TpbXZwAkQllbNNrIQztzASU3rPO2iFac8=
Received: by 10.35.70.17 with SMTP id x17mr5689189pyk;
        Wed, 05 Jul 2006 16:58:03 -0700 (PDT)
Received: by 10.35.64.15 with HTTP; Wed, 5 Jul 2006 16:58:03 -0700 (PDT)
Message-ID: <b9fbc60a0607051658t66576edob06490689e92783c@mail.gmail.com>
Date: Wed, 5 Jul 2006 16:58:03 -0700
From: "Heng Mei" <heng.mei@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexSearcher memory leak?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi experts,
There seems to be a strange memory leak with the IndexSearcher.
I get an OutOfMemoryException after a few iterations of the following loop:
LOOP:
 	ramdir = new RAMDirectory( "path/to/my/directory" );
	searcher = new IndexSearcher( reader );
        searcher.search(new TermQuery( new Term( "field", "keyword")));
        searcher.close();
        ramdir.close();
END LOOP:
Note, ramdir and searcher are both instance variables.
The index is about 100mb, and the process is run with -Xmx256m.
**Strangely enough, if I comment out the "searcher.search()" line,
then there is no error.   Or, if I make searcher a local variable
(instead of an instance variable), then there also is no error.  I'm
running this on windows xp.

Has anyone observed this type of behavior before?
Any idea what might be causing the memory leak?

much thanks,
~Heng

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 00:08:22 2006
Return-Path: <java-user-return-21791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50836 invoked from network); 6 Jul 2006 00:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 00:08:22 -0000
Received: (qmail 31106 invoked by uid 500); 6 Jul 2006 00:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31071 invoked by uid 500); 6 Jul 2006 00:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31060 invoked by uid 99); 6 Jul 2006 00:08:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:08:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.193.231.187] (HELO mail.cbrese.com) (66.193.231.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:08:16 -0700
Received: by mail.cbrese.com (Postfix, from userid 1003)
	id E3127BD9942; Wed,  5 Jul 2006 17:07:54 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0-gr0 (2005-09-13) on newcastle
X-Spam-Level: 
Received: from [192.168.0.123] (wsip-70-168-51-174.sd.sd.cox.net [70.168.51.174])
	by mail.cbrese.com (Postfix) with ESMTP id 259CBBD9930
	for <java-user@lucene.apache.org>; Wed,  5 Jul 2006 17:07:44 -0700 (PDT)
From: Jason Calabrese <mail@jasoncalabrese.com>
To: java-user@lucene.apache.org
Subject: Inserting a document into an index at a specified position
Date: Wed, 5 Jul 2006 17:06:29 -0700
User-Agent: KMail/1.9.1
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607051706.29317.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.8 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0-gr0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

For performance reasons we keep our index of over a million documents ordered 
alphabeticaly.  This way for an alpha sort we can just use the index order.  
This works very good, but I'm now looking for a way to insert a single 
document to the index in the correct position.  

Is there any standard way to do this?

--Jason

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 00:32:18 2006
Return-Path: <java-user-return-21792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55435 invoked from network); 6 Jul 2006 00:32:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 00:32:18 -0000
Received: (qmail 48985 invoked by uid 500); 6 Jul 2006 00:32:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48959 invoked by uid 500); 6 Jul 2006 00:32:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48948 invoked by uid 99); 6 Jul 2006 00:32:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:32:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:32:11 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2FC095B7A0; Wed,  5 Jul 2006 17:31:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2812D7F403
	for <java-user@lucene.apache.org>; Wed,  5 Jul 2006 17:31:51 -0700 (PDT)
Date: Wed, 5 Jul 2006 17:31:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Best way to Add items to Index in Real Time
In-Reply-To: <5191394.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0607051722110.31288@hal.rescomp.berkeley.edu>
References: <5189803.post@talk.nabble.com> <20060705222314.42355.qmail@web50301.mail.yahoo.com>
 <5191394.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm a novice with this, so I'll appreciate your patience.
: I'm using a batch program for doing the additions and deletions while a
: separate web app for searching. How can I ensure that these two different
: apps (one making the changes to index and the other just searching) don't
: run into each others' paths? Or am I ignorant of something really basic
: here?

if both of these applications are running on the same machine, then the
built in locking mechanims in the Lucene code base should prevent any
errors from happening unless you circumvent the locks (you would have to
go out of your way to do this).  if the applications are on seperate
machines writing to some shared disk hen that may be the source of your
problem -- the lock files are by default stored in the system tmp
directly, even if you changed the location of the lock files (the mailing
list archive has info on how to do this) there is no garuntee that it will
work because some "remote filesystems" (notably NFS) have issues with
garunteeing a consistent "view" of the index directroy (again, google can
fill you in)

your best bet (assumming i'm right and you are working on two differnet
machines) is to use a copy the index to local disk i na new location
(seperate from the "old" index crrently in use) open a new searcher, and
then swap the refrences.  This is (approximately) the approach taken by
Solr.

If i'm wrong about the multiple machine thing, then i have no idea what's
causing your problem .. cna you post some more details -- preferably
including some stack traces from the various types of crashes (you said
both the indexing app and the searching app occasional crash)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 00:40:56 2006
Return-Path: <java-user-return-21793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57142 invoked from network); 6 Jul 2006 00:40:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 00:40:55 -0000
Received: (qmail 59425 invoked by uid 500); 6 Jul 2006 00:40:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59385 invoked by uid 500); 6 Jul 2006 00:40:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59374 invoked by uid 99); 6 Jul 2006 00:40:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:40:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:40:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B6CD95B7A0; Wed,  5 Jul 2006 17:40:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AB93F7F403
	for <java-user@lucene.apache.org>; Wed,  5 Jul 2006 17:40:29 -0700 (PDT)
Date: Wed, 5 Jul 2006 17:40:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: BitSet in a HitCollector
In-Reply-To: <20060705180719.21402.qmail@web34105.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0607051732420.31288@hal.rescomp.berkeley.edu>
References: <20060705180719.21402.qmail@web34105.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm using a HitCollector and would like to know the
: total number of results that matched a given query.
: Based on the JavaDoc, I this will do the trick:

you don't need a BitSet in that case, you could find that out just using
an int...

    public CountingCollector extends HitCollector {
      public int count = 0;
      public void collect(int doc, float score) { count++ };
    }
    CountingCollector c = new CountingCollector();
    searcher.search(query, c)
    int numResults = c.count;

: If I want to know the total number of results inside
: of the HitCollector, i.e. before the collect method
: has ever been called, I think I could pass the Query
: and Searcher objects into the HitCollector and do this
: in its constructor:
:
: BitSet bits = (new
: QueryFilter(query)).bits(searcher.getIndexReader());
: int numResults = bits.cardinality();

This question doesn't make a lot of sense to me, why do you need to know
the total number ofresults before the collect method is called? .. what
you are suggesting here (using QueryFilter in this way) is perfectly
legal, but it's going to do just as much work as using a HitCollector will
(possibly more, i can't remember).

: Is Lucene executing another pass over the index in
: order to populate the BitSet and then doing another
: pass while calling the collect method? Thanx.

in your last example, you never us your HitCollector, so i'm not sure what
you mean, but assuming you aresking about combining those examples into
something like this....

  Searcher searcher = new IndexSearcher(indexReader);
  BitSet bits = (new QueryFilter(query)).bits(searcher.getIndexReader());
  final int numResults = bits.cardinality();
  searcher.search(query, new HitCollector() {
       public void collect(int doc, float score) {
          /* do something with numResults and doc and score */
       }
  });

...then yes, you are most definitely making two passes to do do that.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 00:55:40 2006
Return-Path: <java-user-return-21794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60027 invoked from network); 6 Jul 2006 00:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 00:55:39 -0000
Received: (qmail 69727 invoked by uid 500); 6 Jul 2006 00:55:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69702 invoked by uid 500); 6 Jul 2006 00:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69691 invoked by uid 99); 6 Jul 2006 00:55:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:55:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 17:55:33 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E9B865B7A2; Wed,  5 Jul 2006 17:55:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E49BF7F403
	for <java-user@lucene.apache.org>; Wed,  5 Jul 2006 17:55:08 -0700 (PDT)
Date: Wed, 5 Jul 2006 17:55:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher memory leak?
In-Reply-To: <b9fbc60a0607051658t66576edob06490689e92783c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607051750030.3753@hal.rescomp.berkeley.edu>
References: <b9fbc60a0607051658t66576edob06490689e92783c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I get an OutOfMemoryException after a few iterations of the following loop:
: LOOP:
:  	ramdir = new RAMDirectory( "path/to/my/directory" );
: 	searcher = new IndexSearcher( reader );
:         searcher.search(new TermQuery( new Term( "field", "keyword")));
:         searcher.close();
:         ramdir.close();
: END LOOP:
: Note, ramdir and searcher are both instance variables.

But what is "reader" ?  .. where is it initialized ?

I'm guessing this isn't hte exact code that gives you an OOM (since there
seems to be some code missing)

if you can post a complete small example program (with main method) that
demonstrates this problem -- or even better a self contained JUNit test --
then people can try to reproduce it.

(if the root of the issue is opening a RAMDirectory based on an
FSDirectory you can create the on disk directory using the system tmpdir
in your JUnit setUp method)

I suspect that somewhere in there you have another line that looks like...

     reader = IndexReader.open( ramdir );

...and that may be causing your problem.   If you open an IndexReader
explicitly, then IndexSearcher.close() won't close it for you





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 04:51:03 2006
Return-Path: <java-user-return-21795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12595 invoked from network); 6 Jul 2006 04:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 04:51:03 -0000
Received: (qmail 94800 invoked by uid 500); 6 Jul 2006 04:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94766 invoked by uid 500); 6 Jul 2006 04:50:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94754 invoked by uid 99); 6 Jul 2006 04:50:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 21:50:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heng.mei@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 21:50:56 -0700
Received: by py-out-1112.google.com with SMTP id w49so2794200pyg
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 21:50:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ONw4HfaL9C0FvqB2OMOP5FOFvv2c6IU+1DuQNTP0qsd+y8gegJ4lARqRpDUF3qQzRJHAzUQu/05eqPzrqLCddYczij6xLWEWojj9/LDSJ6mH5StBr3Z5Oy0VA5TA1RKGA6VI2dVcKWaXIkyJgESh4C++nfmMLTQo6fh8HINLz3A=
Received: by 10.35.82.15 with SMTP id j15mr304643pyl;
        Wed, 05 Jul 2006 21:50:35 -0700 (PDT)
Received: by 10.35.64.15 with HTTP; Wed, 5 Jul 2006 21:50:35 -0700 (PDT)
Message-ID: <b9fbc60a0607052150s307ef0ebi83535920a8eb7e57@mail.gmail.com>
Date: Wed, 5 Jul 2006 21:50:35 -0700
From: "Heng Mei" <heng.mei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher memory leak?
In-Reply-To: <Pine.LNX.4.58.0607051750030.3753@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_52236_4973182.1152161435304"
References: <b9fbc60a0607051658t66576edob06490689e92783c@mail.gmail.com>
	 <Pine.LNX.4.58.0607051750030.3753@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_52236_4973182.1152161435304
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the fast response -- you're right, I had a typo in the code snippet.

I've attached the test code that reproduces the OutOfMemoryException.
The code is a simple main method that repeatedly opens/searches/closes
an index using RAMDirectory.  Maybe there's something I'm overlooking,
but it appears that when the Searcher is declared outside of the loop,
that's when the OutOfMemoryException occurs.  If the searcher is
declared inside of the loop, then there's no memory problem.

The motivation for this test code is that I plan to write a
long-running server that periodically reopens an index -- so clearly
I'd want to be able to close and open the index without leaking any
memory.

Any insight on why the memory exception occurs and how to resolve it
would be greatly appreciated.


Thanks!
~Heng

On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : I get an OutOfMemoryException after a few iterations of the following loop:
> : LOOP:
> :       ramdir = new RAMDirectory( "path/to/my/directory" );
> :       searcher = new IndexSearcher( reader );
> :         searcher.search(new TermQuery( new Term( "field", "keyword")));
> :         searcher.close();
> :         ramdir.close();
> : END LOOP:
> : Note, ramdir and searcher are both instance variables.
>
> But what is "reader" ?  .. where is it initialized ?
>
> I'm guessing this isn't hte exact code that gives you an OOM (since there
> seems to be some code missing)
>
> if you can post a complete small example program (with main method) that
> demonstrates this problem -- or even better a self contained JUNit test --
> then people can try to reproduce it.
>
> (if the root of the issue is opening a RAMDirectory based on an
> FSDirectory you can create the on disk directory using the system tmpdir
> in your JUnit setUp method)
>
> I suspect that somewhere in there you have another line that looks like...
>
>      reader = IndexReader.open( ramdir );
>
> ...and that may be causing your problem.   If you open an IndexReader
> explicitly, then IndexSearcher.close() won't close it for you
>
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


------=_Part_52236_4973182.1152161435304
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_52236_4973182.1152161435304--

From java-user-return-21796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 04:57:04 2006
Return-Path: <java-user-return-21796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13318 invoked from network); 6 Jul 2006 04:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 04:57:04 -0000
Received: (qmail 645 invoked by uid 500); 6 Jul 2006 04:56:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 249 invoked by uid 500); 6 Jul 2006 04:56:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 236 invoked by uid 99); 6 Jul 2006 04:56:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 21:56:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 21:56:56 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 033715B78C; Wed,  5 Jul 2006 21:56:27 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D92397F403
	for <java-user@lucene.apache.org>; Wed,  5 Jul 2006 21:56:27 -0700 (PDT)
Date: Wed, 5 Jul 2006 21:56:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher memory leak?
In-Reply-To: <b9fbc60a0607052150s307ef0ebi83535920a8eb7e57@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607052153300.13482@hal.rescomp.berkeley.edu>
References: <b9fbc60a0607051658t66576edob06490689e92783c@mail.gmail.com> 
 <Pine.LNX.4.58.0607051750030.3753@hal.rescomp.berkeley.edu>
 <b9fbc60a0607052150s307ef0ebi83535920a8eb7e57@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


The mailing list server doesn't allow most attachments (i think the magic
incantation is to make sure your mail client indicates that the
attachments are plain text -- not some fancy type like text/x-java-source
or application/x-java)

try including it inline in your email.



: Date: Wed, 5 Jul 2006 21:50:35 -0700
: From: Heng Mei <heng.mei@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Re: IndexSearcher memory leak?
:
: Thanks for the fast response -- you're right, I had a typo in the code snippet.
:
: I've attached the test code that reproduces the OutOfMemoryException.
: The code is a simple main method that repeatedly opens/searches/closes
: an index using RAMDirectory.  Maybe there's something I'm overlooking,
: but it appears that when the Searcher is declared outside of the loop,
: that's when the OutOfMemoryException occurs.  If the searcher is
: declared inside of the loop, then there's no memory problem.
:
: The motivation for this test code is that I plan to write a
: long-running server that periodically reopens an index -- so clearly
: I'd want to be able to close and open the index without leaking any
: memory.
:
: Any insight on why the memory exception occurs and how to resolve it
: would be greatly appreciated.
:
:
: Thanks!
: ~Heng
:
: On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
: > : I get an OutOfMemoryException after a few iterations of the following loop:
: > : LOOP:
: > :       ramdir = new RAMDirectory( "path/to/my/directory" );
: > :       searcher = new IndexSearcher( reader );
: > :         searcher.search(new TermQuery( new Term( "field", "keyword")));
: > :         searcher.close();
: > :         ramdir.close();
: > : END LOOP:
: > : Note, ramdir and searcher are both instance variables.
: >
: > But what is "reader" ?  .. where is it initialized ?
: >
: > I'm guessing this isn't hte exact code that gives you an OOM (since there
: > seems to be some code missing)
: >
: > if you can post a complete small example program (with main method) that
: > demonstrates this problem -- or even better a self contained JUNit test --
: > then people can try to reproduce it.
: >
: > (if the root of the issue is opening a RAMDirectory based on an
: > FSDirectory you can create the on disk directory using the system tmpdir
: > in your JUnit setUp method)
: >
: > I suspect that somewhere in there you have another line that looks like...
: >
: >      reader = IndexReader.open( ramdir );
: >
: > ...and that may be causing your problem.   If you open an IndexReader
: > explicitly, then IndexSearcher.close() won't close it for you
: >
: >
: >
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
: >
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 05:32:22 2006
Return-Path: <java-user-return-21797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22332 invoked from network); 6 Jul 2006 05:32:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 05:32:21 -0000
Received: (qmail 37328 invoked by uid 500); 6 Jul 2006 05:32:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37287 invoked by uid 500); 6 Jul 2006 05:32:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37275 invoked by uid 99); 6 Jul 2006 05:32:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:32:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heng.mei@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:32:13 -0700
Received: by py-out-1112.google.com with SMTP id w49so2802479pyg
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 22:31:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Y0Ocp+SVxug10X7yGzPidMaCb5uMCCSsSHbEU3HunTwjs8g9zVQRGA9lDOy/GSizB9H1p85YhedSBS62n8NQmTeIUarM8EL0T1hXApVqmP4a7Gj8FuDIbYRvtpfksZL33V4jJBE13ISKvGOu4Z2KKO1kVrxYEfi7hGJBxRtoSIM=
Received: by 10.35.60.16 with SMTP id n16mr351347pyk;
        Wed, 05 Jul 2006 22:31:53 -0700 (PDT)
Received: by 10.35.64.15 with HTTP; Wed, 5 Jul 2006 22:31:53 -0700 (PDT)
Message-ID: <b9fbc60a0607052231t7378acfejd5e1f5fd4f4584c3@mail.gmail.com>
Date: Wed, 5 Jul 2006 22:31:53 -0700
From: "Heng Mei" <heng.mei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher memory leak?
In-Reply-To: <Pine.LNX.4.58.0607052153300.13482@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b9fbc60a0607051658t66576edob06490689e92783c@mail.gmail.com>
	 <Pine.LNX.4.58.0607051750030.3753@hal.rescomp.berkeley.edu>
	 <b9fbc60a0607052150s307ef0ebi83535920a8eb7e57@mail.gmail.com>
	 <Pine.LNX.4.58.0607052153300.13482@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

import org.apache.lucene.search.Searcher;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.RAMDirectory;

/**
 *  Index is ~100mb.
 *  Run with -Xmx256m on Windows XP
 *
 *  OutOfMemoryException encountered after repeatedly
 *      opening/searching/closing an index.
 *  Seems to only occur when Searcher scope is outside the loop
 */
public class TestOpenClose {
	public static void main(String[] args) throws Exception {
		String db = "C:/data/index";
		String field = "field";
		String term = "keywords";

		//Normal behavior - no memory exceptions
		//The Searcher's scope is inside the loop
		for(int i = 0; i < 5; ++i){			
			System.out.println(i);
			RAMDirectory ramdir = new RAMDirectory( db );
		    	Searcher searcher = new IndexSearcher( ramdir );
	        	searcher.search(new TermQuery( new Term(field, term)));
		        searcher.close();
		        ramdir.close();
		}

		//OutOfMemoryException after a few iterations
		//Search scope is outside the loop
		Searcher searcher = null;
		for(int i = 0; i < 5; ++i){			
			System.out.println(i);
			RAMDirectory ramdir = new RAMDirectory( db );
			searcher = new IndexSearcher( ramdir );
		        searcher.search(new TermQuery( new Term(field, term)));
	        	searcher.close();
		        ramdir.close();
		}
	}
}

On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> The mailing list server doesn't allow most attachments (i think the magic
> incantation is to make sure your mail client indicates that the
> attachments are plain text -- not some fancy type like text/x-java-source
> or application/x-java)
>
> try including it inline in your email.
>
>
>
> : Date: Wed, 5 Jul 2006 21:50:35 -0700
> : From: Heng Mei <heng.mei@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Re: IndexSearcher memory leak?
> :
> : Thanks for the fast response -- you're right, I had a typo in the code snippet.
> :
> : I've attached the test code that reproduces the OutOfMemoryException.
> : The code is a simple main method that repeatedly opens/searches/closes
> : an index using RAMDirectory.  Maybe there's something I'm overlooking,
> : but it appears that when the Searcher is declared outside of the loop,
> : that's when the OutOfMemoryException occurs.  If the searcher is
> : declared inside of the loop, then there's no memory problem.
> :
> : The motivation for this test code is that I plan to write a
> : long-running server that periodically reopens an index -- so clearly
> : I'd want to be able to close and open the index without leaking any
> : memory.
> :
> : Any insight on why the memory exception occurs and how to resolve it
> : would be greatly appreciated.
> :
> :
> : Thanks!
> : ~Heng
> :
> : On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : > : I get an OutOfMemoryException after a few iterations of the following loop:
> : > : LOOP:
> : > :       ramdir = new RAMDirectory( "path/to/my/directory" );
> : > :       searcher = new IndexSearcher( reader );
> : > :         searcher.search(new TermQuery( new Term( "field", "keyword")));
> : > :         searcher.close();
> : > :         ramdir.close();
> : > : END LOOP:
> : > : Note, ramdir and searcher are both instance variables.
> : >
> : > But what is "reader" ?  .. where is it initialized ?
> : >
> : > I'm guessing this isn't hte exact code that gives you an OOM (since there
> : > seems to be some code missing)
> : >
> : > if you can post a complete small example program (with main method) that
> : > demonstrates this problem -- or even better a self contained JUNit test --
> : > then people can try to reproduce it.
> : >
> : > (if the root of the issue is opening a RAMDirectory based on an
> : > FSDirectory you can create the on disk directory using the system tmpdir
> : > in your JUnit setUp method)
> : >
> : > I suspect that somewhere in there you have another line that looks like...
> : >
> : >      reader = IndexReader.open( ramdir );
> : >
> : > ...and that may be causing your problem.   If you open an IndexReader
> : > explicitly, then IndexSearcher.close() won't close it for you
> : >
> : >
> : >
> : >
> : >
> : > -Hoss
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> :
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 05:58:34 2006
Return-Path: <java-user-return-21798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33887 invoked from network); 6 Jul 2006 05:58:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 05:58:33 -0000
Received: (qmail 62802 invoked by uid 500); 6 Jul 2006 05:58:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62771 invoked by uid 500); 6 Jul 2006 05:58:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62760 invoked by uid 99); 6 Jul 2006 05:58:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:58:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [164.164.87.55] (HELO srit_mail.renaissance-it.com) (164.164.87.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 22:58:26 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A0C1.2BEE5FD4"
Subject: Problem : Searching with Lucene 2.0
Date: Thu, 6 Jul 2006 11:28:15 +0530
Message-ID: <7451DFE76F314044AA7B34ABD08C97C141C694@srit_mail.renaissance-it.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem : Searching with Lucene 2.0
Thread-Index: AcagwSuNBZCSyTR4TPGsvdQdFYP3IA==
From: "Sarvadnya Mutalik" <sarvadnya.mutalik@renaissance-it.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A0C1.2BEE5FD4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi, I'm using Lucene 2.0, latest ver of Apache Lucene search engine.
After successfully indexing, when I tried to search, I'm not able to get
the complete information.
In the following code snippet, I'm getting the values for  "doctitle"
and "summary" as null.
While it says there are two results.


	for (int i =3D startindex; i < (thispage + startindex); i++) {  //
for each element

                        Document doc =3D hits.doc(i);
//get the next document=20
                        String doctitle =3D doc.get("title");
//get its title
                        String url =3D doc.get("path");
//get its url field

                        if ((doctitle =3D=3D null) || =
doctitle.equals(""))
//use the url if it has no title
                                doctitle =3D url;


		String summary =3D doc.get("summary");

		......
		......
	}

Please help..

Regards,
Sam

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
The information transmitted is intended only for the person or entity to
which it is addressed and may contain confidential and/or privileged
material. Any review, retransmission, dissemination or other use of, or
taking of any action in reliance upon, this information by persons or
entities other than the intended recipient is prohibited. If you
received this in error, please contact the sender and delete all copies
from any computer.




------_=_NextPart_001_01C6A0C1.2BEE5FD4--

From java-user-return-21799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 06:09:00 2006
Return-Path: <java-user-return-21799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52164 invoked from network); 6 Jul 2006 06:08:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 06:08:59 -0000
Received: (qmail 482 invoked by uid 500); 6 Jul 2006 06:08:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 455 invoked by uid 500); 6 Jul 2006 06:08:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 444 invoked by uid 99); 6 Jul 2006 06:08:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:08:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:08:53 -0700
Received: by py-out-1112.google.com with SMTP id w49so2809525pyg
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 23:08:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UnRI6H+BySi+DY48CrGLu77t4wyYf5low0/uyZpGeDcojrmp7ERkeMxn/fmj91XrBs1pF688nlpiLW+Ymb36CmpSB0pAZmNBpMgGXpIGn0cLRoaHcM8vWNqD4yVow/TeAaZONd6o/pwuYlyVRZxFQjYWb36c08Qd1+F3PFFSgg4=
Received: by 10.35.34.18 with SMTP id m18mr387413pyj;
        Wed, 05 Jul 2006 23:08:32 -0700 (PDT)
Received: by 10.35.8.7 with HTTP; Wed, 5 Jul 2006 23:08:32 -0700 (PDT)
Message-ID: <8e7e4d020607052308q3044e404xe4ac1899de11c624@mail.gmail.com>
Date: Thu, 6 Jul 2006 14:08:32 +0800
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem : Searching with Lucene 2.0
In-Reply-To: <7451DFE76F314044AA7B34ABD08C97C141C694@srit_mail.renaissance-it.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58139_32470150.1152166112288"
References: <7451DFE76F314044AA7B34ABD08C97C141C694@srit_mail.renaissance-it.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_58139_32470150.1152166112288
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

How you index "doctitle" and "summary".
The Store parameter must be "COMPRESS" or "YES"

On 7/6/06, Sarvadnya Mutalik <sarvadnya.mutalik@renaissance-it.com> wrote:
>
> Hi, I'm using Lucene 2.0, latest ver of Apache Lucene search engine.
> After successfully indexing, when I tried to search, I'm not able to get
> the complete information.
> In the following code snippet, I'm getting the values for  "doctitle"
> and "summary" as null.
> While it says there are two results.
>
>
>         for (int i = startindex; i < (thispage + startindex); i++) {  //
> for each element
>
>                         Document doc = hits.doc(i);
> //get the next document
>                         String doctitle = doc.get("title");
> //get its title
>                         String url = doc.get("path");
> //get its url field
>
>                         if ((doctitle == null) || doctitle.equals(""))
> //use the url if it has no title
>                                 doctitle = url;
>
>
>                 String summary = doc.get("summary");
>
>                 ......
>                 ......
>         }
>
> Please help..
>
> Regards,
> Sam
>
> =========================================
> The information transmitted is intended only for the person or entity to
> which it is addressed and may contain confidential and/or privileged
> material. Any review, retransmission, dissemination or other use of, or
> taking of any action in reliance upon, this information by persons or
> entities other than the intended recipient is prohibited. If you
> received this in error, please contact the sender and delete all copies
> from any computer.
>
>
>
>
>


-- 
--
Yueyu Lin

------=_Part_58139_32470150.1152166112288--

From java-user-return-21800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 06:27:33 2006
Return-Path: <java-user-return-21800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63289 invoked from network); 6 Jul 2006 06:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 06:27:33 -0000
Received: (qmail 22130 invoked by uid 500); 6 Jul 2006 06:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22094 invoked by uid 500); 6 Jul 2006 06:27:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22082 invoked by uid 99); 6 Jul 2006 06:27:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:27:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [164.164.87.55] (HELO srit_mail.renaissance-it.com) (164.164.87.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:27:26 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Problem : Searching with Lucene 2.0
Date: Thu, 6 Jul 2006 11:57:14 +0530
Message-ID: <7451DFE76F314044AA7B34ABD08C97C141C6BC@srit_mail.renaissance-it.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem : Searching with Lucene 2.0
Thread-Index: AcagwrRtzuc0ahkiRQ6BiDP4Iu0yCAAANieg
From: "Sarvadnya Mutalik" <sarvadnya.mutalik@renaissance-it.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm using the indexing technique as illustrated in the example provided
by Lucene 2.0. (as in demo =3D=3D> IndexFiles.java)
The Indexing the method  is as bellow....


  static void indexDocs(IndexWriter writer, File file) throws
IOException {

    // do not try to index files that cannot be read
    if (file.canRead()) {
      if (file.isDirectory()) {
        String[] files =3D file.list();
        // an IO error could occur
        if (files !=3D null) {
          for (int i =3D 0; i < files.length; i++) {
            indexDocs(writer, new File(file, files[i]));  //Recursive
call (calling the same method)
          }
        }
      }=20

      else {
        System.out.println("adding " + file);
        try {
          writer.addDocument(FileDocument.Document(file)); //writer is
the object of=20
        }
        // at least on windows, some temporary files raise this
exception with an "access denied" message
        // checking if the file can be read doesn't help
        catch (FileNotFoundException fnfe) {
	//To be filled
        }
      }
    }
  }

Need your help..

Regards
Sam

-----Original Message-----
From: yueyu lin [mailto:popeyelin@gmail.com]=20
Sent: Thursday, July 06, 2006 11:39 AM
To: java-user@lucene.apache.org
Subject: Re: Problem : Searching with Lucene 2.0

How you index "doctitle" and "summary".
The Store parameter must be "COMPRESS" or "YES"

On 7/6/06, Sarvadnya Mutalik <sarvadnya.mutalik@renaissance-it.com>
wrote:
>
> Hi, I'm using Lucene 2.0, latest ver of Apache Lucene search engine.
> After successfully indexing, when I tried to search, I'm not able to=20
> get the complete information.
> In the following code snippet, I'm getting the values for  "doctitle"
> and "summary" as null.
> While it says there are two results.
>
>
>         for (int i =3D startindex; i < (thispage + startindex); i++) { =
=20
> // for each element
>
>                         Document doc =3D hits.doc(i); //get the next=20
> document
>                         String doctitle =3D doc.get("title"); //get =
its=20
> title
>                         String url =3D doc.get("path"); //get its url=20
> field
>
>                         if ((doctitle =3D=3D null) || =
doctitle.equals(""))

> //use the url if it has no title
>                                 doctitle =3D url;
>
>
>                 String summary =3D doc.get("summary");
>
>                 ......
>                 ......
>         }
>
> Please help..
>
> Regards,
> Sam
>
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> The information transmitted is intended only for the person or entity=20
> to which it is addressed and may contain confidential and/or=20
> privileged material. Any review, retransmission, dissemination or=20
> other use of, or taking of any action in reliance upon, this=20
> information by persons or entities other than the intended recipient=20
> is prohibited. If you received this in error, please contact the=20
> sender and delete all copies from any computer.
>
>
>
>
>


--
--
Yueyu Lin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 06:54:49 2006
Return-Path: <java-user-return-21801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69222 invoked from network); 6 Jul 2006 06:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 06:54:49 -0000
Received: (qmail 57114 invoked by uid 500); 6 Jul 2006 06:54:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57090 invoked by uid 500); 6 Jul 2006 06:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57079 invoked by uid 99); 6 Jul 2006 06:54:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:54:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:54:41 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 5A1EB187BD; Thu,  6 Jul 2006 06:54:19 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 3AD64187BC
	for <java-user@lucene.apache.org>; Thu,  6 Jul 2006 06:54:15 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher memory leak?
Date: Thu, 6 Jul 2006 07:54:17 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0019_01C6A0D1.60795050"
Thread-Index: AcagvY2B4C95holwR12U+y7i6aHaIgACqt1Q
In-Reply-To: <b9fbc60a0607052231t7378acfejd5e1f5fd4f4584c3@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060706065415.3AD64187BC@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0019_01C6A0D1.60795050
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

My two bits...

If you consider (say) the 2nd pass of the loop...

	Searcher searcher = null;
	for(int i = 0; i < 5; ++i){			
		RAMDirectory ramdir = new RAMDirectory( db );
                        // <- Consider this moment
		searcher = new IndexSearcher( ramdir );
	}

... you will have two references to RAMDirectory objects in existence. The
Searcher retains a reference to the previously constructed RAMDirectory.

You could nullify the Searcher before contructing the new RAMDirectory to
avoid this.

	Searcher searcher = null;
	for(int i = 0; i < 5; ++i){
		searcher = null;   <- No searcher now to retain the
reference
		RAMDirectory ramdir = new RAMDirectory( db );
                        // <- Consider this moment
		searcher = new IndexSearcher( ramdir );
	}

-----Original Message-----
From: Heng Mei [mailto:heng.mei@gmail.com] 
Sent: 06 July 2006 06:32
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher memory leak?

import org.apache.lucene.search.Searcher;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.*;
import org.apache.lucene.index.*;
import org.apache.lucene.store.RAMDirectory;

/**
 *  Index is ~100mb.
 *  Run with -Xmx256m on Windows XP
 *
 *  OutOfMemoryException encountered after repeatedly
 *      opening/searching/closing an index.
 *  Seems to only occur when Searcher scope is outside the loop  */ public
class TestOpenClose {
	public static void main(String[] args) throws Exception {
		String db = "C:/data/index";
		String field = "field";
		String term = "keywords";

		//Normal behavior - no memory exceptions
		//The Searcher's scope is inside the loop
		for(int i = 0; i < 5; ++i){			
			System.out.println(i);
			RAMDirectory ramdir = new RAMDirectory( db );
		    	Searcher searcher = new IndexSearcher( ramdir );
	        	searcher.search(new TermQuery( new Term(field,
term)));
		        searcher.close();
		        ramdir.close();
		}

		//OutOfMemoryException after a few iterations
		//Search scope is outside the loop
		Searcher searcher = null;
		for(int i = 0; i < 5; ++i){			
			System.out.println(i);
			RAMDirectory ramdir = new RAMDirectory( db );
			searcher = new IndexSearcher( ramdir );
		        searcher.search(new TermQuery( new Term(field,
term)));
	        	searcher.close();
		        ramdir.close();
		}
	}
}

On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> The mailing list server doesn't allow most attachments (i think the 
> magic incantation is to make sure your mail client indicates that the 
> attachments are plain text -- not some fancy type like 
> text/x-java-source or application/x-java)
>
> try including it inline in your email.
>
>
>
> : Date: Wed, 5 Jul 2006 21:50:35 -0700
> : From: Heng Mei <heng.mei@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Re: IndexSearcher memory leak?
> :
> : Thanks for the fast response -- you're right, I had a typo in the code
snippet.
> :
> : I've attached the test code that reproduces the OutOfMemoryException.
> : The code is a simple main method that repeatedly 
> opens/searches/closes
> : an index using RAMDirectory.  Maybe there's something I'm 
> overlooking,
> : but it appears that when the Searcher is declared outside of the 
> loop,
> : that's when the OutOfMemoryException occurs.  If the searcher is
> : declared inside of the loop, then there's no memory problem.
> :
> : The motivation for this test code is that I plan to write a
> : long-running server that periodically reopens an index -- so clearly
> : I'd want to be able to close and open the index without leaking any
> : memory.
> :
> : Any insight on why the memory exception occurs and how to resolve it
> : would be greatly appreciated.
> :
> :
> : Thanks!
> : ~Heng
> :
> : On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : > : I get an OutOfMemoryException after a few iterations of the
following loop:
> : > : LOOP:
> : > :       ramdir = new RAMDirectory( "path/to/my/directory" );
> : > :       searcher = new IndexSearcher( reader );
> : > :         searcher.search(new TermQuery( new Term( "field",
"keyword")));
> : > :         searcher.close();
> : > :         ramdir.close();
> : > : END LOOP:
> : > : Note, ramdir and searcher are both instance variables.
> : >
> : > But what is "reader" ?  .. where is it initialized ?
> : >
> : > I'm guessing this isn't hte exact code that gives you an OOM 
> (since there
> : > seems to be some code missing)
> : >
> : > if you can post a complete small example program (with main 
> method) that
> : > demonstrates this problem -- or even better a self contained JUNit 
> test --
> : > then people can try to reproduce it.
> : >
> : > (if the root of the issue is opening a RAMDirectory based on an
> : > FSDirectory you can create the on disk directory using the system 
> tmpdir
> : > in your JUnit setUp method)
> : >
> : > I suspect that somewhere in there you have another line that looks
like...
> : >
> : >      reader = IndexReader.open( ramdir );
> : >
> : > ...and that may be causing your problem.   If you open an IndexReader
> : > explicitly, then IndexSearcher.close() won't close it for you
> : >
> : >
> : >
> : >
> : >
> : > -Hoss
> : >
> : >
> : > 
> ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> : >
> :
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0019_01C6A0D1.60795050
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcwNjA2
NTQxNVowIwYJKoZIhvcNAQkEMRYEFGU4MNvTQqZ/xyfvwnkyr1u6JoJBMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAD0k+4VtE+IemJ/3zpkJDui9vHheFkuonISs
b2a17R1zsfGhULM1ngvrxgNNdyOL5cvP5+VDelC9Uicb8cxuiOgdFLJPxxHTwIcMDbXkelcKZiKA
GcKFv1ptL3rSY3cZ1WtChcDklzALRdx6CcrtdLPT1oBMzjMi0n0h5bbEWp7/jmQTbOC3ixmWzh8M
2gf5PRcQo1PGHvY5JgEyUzvhgKEtJZ4JY0p//Kp/4pgzrewhnGF7WGMeOpGe1u7FK8IsuiWkODn/
06FWgN/qHsj1bAFLf/x/SI45l4/7rPL3Ol4/Y/uP0BKlPeB9b1GVW/HNBJuktfiiAOtvPLzLefAy
auQAAAAAAAA=

------=_NextPart_000_0019_01C6A0D1.60795050--


From java-user-return-21802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 06:57:20 2006
Return-Path: <java-user-return-21802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70983 invoked from network); 6 Jul 2006 06:57:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 06:57:20 -0000
Received: (qmail 60716 invoked by uid 500); 6 Jul 2006 06:57:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60387 invoked by uid 500); 6 Jul 2006 06:57:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60373 invoked by uid 99); 6 Jul 2006 06:57:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:57:13 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Jul 2006 23:57:12 -0700
Received: by py-out-1112.google.com with SMTP id w49so2818019pyg
        for <java-user@lucene.apache.org>; Wed, 05 Jul 2006 23:56:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qVNFnHfIfwLWshvZmKZmyfG4yyukchkkCxDRx1o7juD4qa7Hmddb2xZzkaM4LJqNir6/jJ50l9U8gZ18cHP1dlKLeJbMWYcqnY3EzCe93ISddaxm4uKyK8Z+xBFO6/8o8rXW8r91YqCiBw4XCBotzcgQXnOtwY4sFo429F9282g=
Received: by 10.35.135.12 with SMTP id m12mr439919pyn;
        Wed, 05 Jul 2006 23:56:52 -0700 (PDT)
Received: by 10.35.8.7 with HTTP; Wed, 5 Jul 2006 23:56:51 -0700 (PDT)
Message-ID: <8e7e4d020607052356r195f19acp3acd715fffafebbc@mail.gmail.com>
Date: Thu, 6 Jul 2006 14:56:51 +0800
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem : Searching with Lucene 2.0
In-Reply-To: <7451DFE76F314044AA7B34ABD08C97C141C6BC@srit_mail.renaissance-it.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_58434_16326937.1152169011957"
References: <7451DFE76F314044AA7B34ABD08C97C141C6BC@srit_mail.renaissance-it.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_58434_16326937.1152169011957
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I didn't see the demo codes. You should look into the
indexDocs(IndexWriter,File) function  to see if it stores these kinds of
contents.

On 7/6/06, Sarvadnya Mutalik <sarvadnya.mutalik@renaissance-it.com> wrote:
>
> I'm using the indexing technique as illustrated in the example provided
> by Lucene 2.0. (as in demo ==> IndexFiles.java)
> The Indexing the method  is as bellow....
>
>
>   static void indexDocs(IndexWriter writer, File file) throws
> IOException {
>
>     // do not try to index files that cannot be read
>     if (file.canRead()) {
>       if (file.isDirectory()) {
>         String[] files = file.list();
>         // an IO error could occur
>         if (files != null) {
>           for (int i = 0; i < files.length; i++) {
>             indexDocs(writer, new File(file, files[i]));  //Recursive
> call (calling the same method)
>           }
>         }
>       }
>
>       else {
>         System.out.println("adding " + file);
>         try {
>           writer.addDocument(FileDocument.Document(file)); //writer is
> the object of
>         }
>         // at least on windows, some temporary files raise this
> exception with an "access denied" message
>         // checking if the file can be read doesn't help
>         catch (FileNotFoundException fnfe) {
>         //To be filled
>         }
>       }
>     }
>   }
>
> Need your help..
>
> Regards
> Sam
>
> -----Original Message-----
> From: yueyu lin [mailto:popeyelin@gmail.com]
> Sent: Thursday, July 06, 2006 11:39 AM
> To: java-user@lucene.apache.org
> Subject: Re: Problem : Searching with Lucene 2.0
>
> How you index "doctitle" and "summary".
> The Store parameter must be "COMPRESS" or "YES"
>
> On 7/6/06, Sarvadnya Mutalik <sarvadnya.mutalik@renaissance-it.com>
> wrote:
> >
> > Hi, I'm using Lucene 2.0, latest ver of Apache Lucene search engine.
> > After successfully indexing, when I tried to search, I'm not able to
> > get the complete information.
> > In the following code snippet, I'm getting the values for  "doctitle"
> > and "summary" as null.
> > While it says there are two results.
> >
> >
> >         for (int i = startindex; i < (thispage + startindex); i++) {
> > // for each element
> >
> >                         Document doc = hits.doc(i); //get the next
> > document
> >                         String doctitle = doc.get("title"); //get its
> > title
> >                         String url = doc.get("path"); //get its url
> > field
> >
> >                         if ((doctitle == null) || doctitle.equals(""))
>
> > //use the url if it has no title
> >                                 doctitle = url;
> >
> >
> >                 String summary = doc.get("summary");
> >
> >                 ......
> >                 ......
> >         }
> >
> > Please help..
> >
> > Regards,
> > Sam
> >
> > =========================================
> > The information transmitted is intended only for the person or entity
> > to which it is addressed and may contain confidential and/or
> > privileged material. Any review, retransmission, dissemination or
> > other use of, or taking of any action in reliance upon, this
> > information by persons or entities other than the intended recipient
> > is prohibited. If you received this in error, please contact the
> > sender and delete all copies from any computer.
> >
> >
> >
> >
> >
>
>
> --
> --
> Yueyu Lin
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
--
Yueyu Lin

------=_Part_58434_16326937.1152169011957--

From java-user-return-21803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 08:28:41 2006
Return-Path: <java-user-return-21803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18365 invoked from network); 6 Jul 2006 08:28:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 08:28:40 -0000
Received: (qmail 96174 invoked by uid 500); 6 Jul 2006 08:28:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96142 invoked by uid 500); 6 Jul 2006 08:28:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96131 invoked by uid 99); 6 Jul 2006 08:28:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:28:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heng.mei@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:28:32 -0700
Received: by py-out-1112.google.com with SMTP id w49so2837360pyg
        for <java-user@lucene.apache.org>; Thu, 06 Jul 2006 01:28:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=S9o/77wac447ddnHCuxn4P83zQaPjANYMAcnV26QOP1UTmjOnin4GhtyXGwVNC/gBofy/qrgsD2jHAgxSmg5evyspRaAxuhLVmPMyFZAHl96YEJhgCnRUgHcZCTUxi3cIwvXMP4ahWvYNeXh2BWsy1Mn+CxjcM34K6UHOmxKJE4=
Received: by 10.35.121.9 with SMTP id y9mr125172pym;
        Thu, 06 Jul 2006 01:28:12 -0700 (PDT)
Received: by 10.35.64.15 with HTTP; Thu, 6 Jul 2006 01:28:11 -0700 (PDT)
Message-ID: <b9fbc60a0607060128ga2179b7r1dcfafd51b58776e@mail.gmail.com>
Date: Thu, 6 Jul 2006 01:28:11 -0700
From: "Heng Mei" <heng.mei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher memory leak?
In-Reply-To: <20060706065415.3AD64187BC@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <b9fbc60a0607052231t7378acfejd5e1f5fd4f4584c3@mail.gmail.com>
	 <20060706065415.3AD64187BC@mail.seseit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the helpful tip, it makes sense now.

I had previously assumed (wrongly) that RAMDirectory.close() would
free up its memory buffers.. but i guess I needed to RTFC...
RAMDirectory.close() is just an empty method.

On 7/5/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> My two bits...
>
> If you consider (say) the 2nd pass of the loop...
>
>         Searcher searcher = null;
>         for(int i = 0; i < 5; ++i){
>                 RAMDirectory ramdir = new RAMDirectory( db );
>                         // <- Consider this moment
>                 searcher = new IndexSearcher( ramdir );
>         }
>
> ... you will have two references to RAMDirectory objects in existence. The
> Searcher retains a reference to the previously constructed RAMDirectory.
>
> You could nullify the Searcher before contructing the new RAMDirectory to
> avoid this.
>
>         Searcher searcher = null;
>         for(int i = 0; i < 5; ++i){
>                 searcher = null;   <- No searcher now to retain the
> reference
>                 RAMDirectory ramdir = new RAMDirectory( db );
>                         // <- Consider this moment
>                 searcher = new IndexSearcher( ramdir );
>         }
>
> -----Original Message-----
> From: Heng Mei [mailto:heng.mei@gmail.com]
> Sent: 06 July 2006 06:32
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher memory leak?
>
> import org.apache.lucene.search.Searcher;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.*;
> import org.apache.lucene.index.*;
> import org.apache.lucene.store.RAMDirectory;
>
> /**
>  *  Index is ~100mb.
>  *  Run with -Xmx256m on Windows XP
>  *
>  *  OutOfMemoryException encountered after repeatedly
>  *      opening/searching/closing an index.
>  *  Seems to only occur when Searcher scope is outside the loop  */ public
> class TestOpenClose {
>         public static void main(String[] args) throws Exception {
>                 String db = "C:/data/index";
>                 String field = "field";
>                 String term = "keywords";
>
>                 //Normal behavior - no memory exceptions
>                 //The Searcher's scope is inside the loop
>                 for(int i = 0; i < 5; ++i){
>                         System.out.println(i);
>                         RAMDirectory ramdir = new RAMDirectory( db );
>                         Searcher searcher = new IndexSearcher( ramdir );
>                         searcher.search(new TermQuery( new Term(field,
> term)));
>                         searcher.close();
>                         ramdir.close();
>                 }
>
>                 //OutOfMemoryException after a few iterations
>                 //Search scope is outside the loop
>                 Searcher searcher = null;
>                 for(int i = 0; i < 5; ++i){
>                         System.out.println(i);
>                         RAMDirectory ramdir = new RAMDirectory( db );
>                         searcher = new IndexSearcher( ramdir );
>                         searcher.search(new TermQuery( new Term(field,
> term)));
>                         searcher.close();
>                         ramdir.close();
>                 }
>         }
> }
>
> On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> > The mailing list server doesn't allow most attachments (i think the
> > magic incantation is to make sure your mail client indicates that the
> > attachments are plain text -- not some fancy type like
> > text/x-java-source or application/x-java)
> >
> > try including it inline in your email.
> >
> >
> >
> > : Date: Wed, 5 Jul 2006 21:50:35 -0700
> > : From: Heng Mei <heng.mei@gmail.com>
> > : Reply-To: java-user@lucene.apache.org
> > : To: java-user@lucene.apache.org
> > : Subject: Re: IndexSearcher memory leak?
> > :
> > : Thanks for the fast response -- you're right, I had a typo in the code
> snippet.
> > :
> > : I've attached the test code that reproduces the OutOfMemoryException.
> > : The code is a simple main method that repeatedly
> > opens/searches/closes
> > : an index using RAMDirectory.  Maybe there's something I'm
> > overlooking,
> > : but it appears that when the Searcher is declared outside of the
> > loop,
> > : that's when the OutOfMemoryException occurs.  If the searcher is
> > : declared inside of the loop, then there's no memory problem.
> > :
> > : The motivation for this test code is that I plan to write a
> > : long-running server that periodically reopens an index -- so clearly
> > : I'd want to be able to close and open the index without leaking any
> > : memory.
> > :
> > : Any insight on why the memory exception occurs and how to resolve it
> > : would be greatly appreciated.
> > :
> > :
> > : Thanks!
> > : ~Heng
> > :
> > : On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > : > : I get an OutOfMemoryException after a few iterations of the
> following loop:
> > : > : LOOP:
> > : > :       ramdir = new RAMDirectory( "path/to/my/directory" );
> > : > :       searcher = new IndexSearcher( reader );
> > : > :         searcher.search(new TermQuery( new Term( "field",
> "keyword")));
> > : > :         searcher.close();
> > : > :         ramdir.close();
> > : > : END LOOP:
> > : > : Note, ramdir and searcher are both instance variables.
> > : >
> > : > But what is "reader" ?  .. where is it initialized ?
> > : >
> > : > I'm guessing this isn't hte exact code that gives you an OOM
> > (since there
> > : > seems to be some code missing)
> > : >
> > : > if you can post a complete small example program (with main
> > method) that
> > : > demonstrates this problem -- or even better a self contained JUNit
> > test --
> > : > then people can try to reproduce it.
> > : >
> > : > (if the root of the issue is opening a RAMDirectory based on an
> > : > FSDirectory you can create the on disk directory using the system
> > tmpdir
> > : > in your JUnit setUp method)
> > : >
> > : > I suspect that somewhere in there you have another line that looks
> like...
> > : >
> > : >      reader = IndexReader.open( ramdir );
> > : >
> > : > ...and that may be causing your problem.   If you open an IndexReader
> > : > explicitly, then IndexSearcher.close() won't close it for you
> > : >
> > : >
> > : >
> > : >
> > : >
> > : > -Hoss
> > : >
> > : >
> > : >
> > ---------------------------------------------------------------------
> > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : > For additional commands, e-mail: java-user-help@lucene.apache.org
> > : >
> > : >
> > :
> > :
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 08:29:38 2006
Return-Path: <java-user-return-21804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18564 invoked from network); 6 Jul 2006 08:29:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 08:29:38 -0000
Received: (qmail 98410 invoked by uid 500); 6 Jul 2006 08:29:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98073 invoked by uid 500); 6 Jul 2006 08:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98062 invoked by uid 99); 6 Jul 2006 08:29:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:29:32 -0700
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.54.11.87] (HELO bmapps.persistent.co.in) (202.54.11.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:29:31 -0700
Received: from mail.persistent.co.in (unknown [10.12.0.1])
	by bmapps.persistent.co.in (Symantec Mail Security) with ESMTP id A4FD4108E
	for <java-user@lucene.apache.org>; Thu,  6 Jul 2006 13:52:03 +0530 (IST)
Received: (from mail6.persistent.co.in [10.77.36.24])
	by mail6.persistent.co.in (MOS 3.7.5-GA)
	with HTTPS/1.1 id AME61959 (AUTH amit_kkumar);
	Thu,  6 Jul 2006 13:52:02 +0530 (IST)
From: <amit_kkumar@persistent.co.in>
Subject: regarding priority of displaying paths of
 indexed files
To: java-user@lucene.apache.org
X-Mailer: Mirapoint Webmail Direct 3.7.5-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding:7bit
Message-Id: <20060706135202.AME61959@mail6.persistent.co.in>
Date: Thu,  6 Jul 2006 13:52:02 +0530 (IST)
X-Junkmail-Whitelist: YES (by domain whitelist at mail6.persistent.co.in)
X-Brightmail-Tracker: AAAAAA==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi all,

i am want to ask if files are indexed

and on Query search in what order the paths of files are
displayed.

is it the highest no. of match occur in one file will be
displayed first than others ?

regards
amit kumar

DISCLAIMER
==========
This e-mail may contain privileged and confidential information which is the property of Persistent Systems Pvt. Ltd. It is intended only for the use of the individual or entity to which it is addressed. If you are not the intended recipient, you are not authorized to read, retain, copy, print, distribute or use this message. If you have received this communication in error, please notify the sender and delete all copies of this message. Persistent Systems Pvt. Ltd. does not accept any liability for virus infected mails.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 08:49:40 2006
Return-Path: <java-user-return-21805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25532 invoked from network); 6 Jul 2006 08:49:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 08:49:40 -0000
Received: (qmail 32056 invoked by uid 500); 6 Jul 2006 08:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32020 invoked by uid 500); 6 Jul 2006 08:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32009 invoked by uid 99); 6 Jul 2006 08:49:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:49:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 01:49:31 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id C78CA187BD; Thu,  6 Jul 2006 08:49:10 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 1A2A3187BC
	for <java-user@lucene.apache.org>; Thu,  6 Jul 2006 08:49:07 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: IndexSearcher memory leak?
Date: Thu, 6 Jul 2006 09:49:09 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0029_01C6A0E1.6D75CBC0"
Thread-Index: Acag1i8VUDw/DEMZTdi1zI86Jtb9owAAgyag
In-Reply-To: <b9fbc60a0607060128ga2179b7r1dcfafd51b58776e@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060706084907.1A2A3187BC@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0029_01C6A0E1.6D75CBC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

> i guess I needed to RTFC

I found that recently too. My only contribution to Lucene has been asking
for a Javadoc addition to prevent others from falling into a trap, which I
fell into. My issue was http://issues.apache.org/jira/browse/LUCENE-594.
Similarly, you could ask for a Javadoc comment for RAMDirectory.close(),
which I expect would be valued by others.

-----Original Message-----
From: Heng Mei [mailto:heng.mei@gmail.com] 
Sent: 06 July 2006 09:28
To: java-user@lucene.apache.org
Subject: Re: IndexSearcher memory leak?

Thanks for the helpful tip, it makes sense now.

I had previously assumed (wrongly) that RAMDirectory.close() would free up
its memory buffers.. but i guess I needed to RTFC...
RAMDirectory.close() is just an empty method.

On 7/5/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> My two bits...
>
> If you consider (say) the 2nd pass of the loop...
>
>         Searcher searcher = null;
>         for(int i = 0; i < 5; ++i){
>                 RAMDirectory ramdir = new RAMDirectory( db );
>                         // <- Consider this moment
>                 searcher = new IndexSearcher( ramdir );
>         }
>
> ... you will have two references to RAMDirectory objects in existence. 
> The Searcher retains a reference to the previously constructed
RAMDirectory.
>
> You could nullify the Searcher before contructing the new RAMDirectory 
> to avoid this.
>
>         Searcher searcher = null;
>         for(int i = 0; i < 5; ++i){
>                 searcher = null;   <- No searcher now to retain the
> reference
>                 RAMDirectory ramdir = new RAMDirectory( db );
>                         // <- Consider this moment
>                 searcher = new IndexSearcher( ramdir );
>         }
>
> -----Original Message-----
> From: Heng Mei [mailto:heng.mei@gmail.com]
> Sent: 06 July 2006 06:32
> To: java-user@lucene.apache.org
> Subject: Re: IndexSearcher memory leak?
>
> import org.apache.lucene.search.Searcher;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.*;
> import org.apache.lucene.index.*;
> import org.apache.lucene.store.RAMDirectory;
>
> /**
>  *  Index is ~100mb.
>  *  Run with -Xmx256m on Windows XP
>  *
>  *  OutOfMemoryException encountered after repeatedly
>  *      opening/searching/closing an index.
>  *  Seems to only occur when Searcher scope is outside the loop  */ 
> public class TestOpenClose {
>         public static void main(String[] args) throws Exception {
>                 String db = "C:/data/index";
>                 String field = "field";
>                 String term = "keywords";
>
>                 //Normal behavior - no memory exceptions
>                 //The Searcher's scope is inside the loop
>                 for(int i = 0; i < 5; ++i){
>                         System.out.println(i);
>                         RAMDirectory ramdir = new RAMDirectory( db );
>                         Searcher searcher = new IndexSearcher( ramdir );
>                         searcher.search(new TermQuery( new Term(field, 
> term)));
>                         searcher.close();
>                         ramdir.close();
>                 }
>
>                 //OutOfMemoryException after a few iterations
>                 //Search scope is outside the loop
>                 Searcher searcher = null;
>                 for(int i = 0; i < 5; ++i){
>                         System.out.println(i);
>                         RAMDirectory ramdir = new RAMDirectory( db );
>                         searcher = new IndexSearcher( ramdir );
>                         searcher.search(new TermQuery( new Term(field, 
> term)));
>                         searcher.close();
>                         ramdir.close();
>                 }
>         }
> }
>
> On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> >
> > The mailing list server doesn't allow most attachments (i think the 
> > magic incantation is to make sure your mail client indicates that 
> > the attachments are plain text -- not some fancy type like 
> > text/x-java-source or application/x-java)
> >
> > try including it inline in your email.
> >
> >
> >
> > : Date: Wed, 5 Jul 2006 21:50:35 -0700
> > : From: Heng Mei <heng.mei@gmail.com>
> > : Reply-To: java-user@lucene.apache.org
> > : To: java-user@lucene.apache.org
> > : Subject: Re: IndexSearcher memory leak?
> > :
> > : Thanks for the fast response -- you're right, I had a typo in the 
> > code
> snippet.
> > :
> > : I've attached the test code that reproduces the OutOfMemoryException.
> > : The code is a simple main method that repeatedly 
> > opens/searches/closes
> > : an index using RAMDirectory.  Maybe there's something I'm 
> > overlooking,
> > : but it appears that when the Searcher is declared outside of the 
> > loop,
> > : that's when the OutOfMemoryException occurs.  If the searcher is
> > : declared inside of the loop, then there's no memory problem.
> > :
> > : The motivation for this test code is that I plan to write a
> > : long-running server that periodically reopens an index -- so 
> > clearly
> > : I'd want to be able to close and open the index without leaking 
> > any
> > : memory.
> > :
> > : Any insight on why the memory exception occurs and how to resolve 
> > it
> > : would be greatly appreciated.
> > :
> > :
> > : Thanks!
> > : ~Heng
> > :
> > : On 7/5/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> > : > : I get an OutOfMemoryException after a few iterations of the
> following loop:
> > : > : LOOP:
> > : > :       ramdir = new RAMDirectory( "path/to/my/directory" );
> > : > :       searcher = new IndexSearcher( reader );
> > : > :         searcher.search(new TermQuery( new Term( "field",
> "keyword")));
> > : > :         searcher.close();
> > : > :         ramdir.close();
> > : > : END LOOP:
> > : > : Note, ramdir and searcher are both instance variables.
> > : >
> > : > But what is "reader" ?  .. where is it initialized ?
> > : >
> > : > I'm guessing this isn't hte exact code that gives you an OOM 
> > (since there
> > : > seems to be some code missing)
> > : >
> > : > if you can post a complete small example program (with main
> > method) that
> > : > demonstrates this problem -- or even better a self contained 
> > JUNit test --
> > : > then people can try to reproduce it.
> > : >
> > : > (if the root of the issue is opening a RAMDirectory based on an
> > : > FSDirectory you can create the on disk directory using the 
> > system tmpdir
> > : > in your JUnit setUp method)
> > : >
> > : > I suspect that somewhere in there you have another line that 
> > looks
> like...
> > : >
> > : >      reader = IndexReader.open( ramdir );
> > : >
> > : > ...and that may be causing your problem.   If you open an
IndexReader
> > : > explicitly, then IndexSearcher.close() won't close it for you
> > : >
> > : >
> > : >
> > : >
> > : >
> > : > -Hoss
> > : >
> > : >
> > : >
> > --------------------------------------------------------------------
> > -
> > : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > : > For additional commands, e-mail: 
> > java-user-help@lucene.apache.org
> > : >
> > : >
> > :
> > :
> >
> >
> >
> > -Hoss
> >
> >
> > --------------------------------------------------------------------
> > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0029_01C6A0E1.6D75CBC0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcwNjA4
NDkwOVowIwYJKoZIhvcNAQkEMRYEFP4IBeGu9YV5fj7ARJPRI8ZnkvboMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIGdx8xjIMklWtb2NIVYzGLeN3L7n+APdhDP
TRBfZoovP5xPSM9OpPo2Xx0Ab12Imn+1jr9cnxiXvEgr5vFyVtduS/GDg779qUfqzAx/VqILne1p
dwOmYrD9clS2l1DUH+McjjWObD6uYCOBQppRuyy5+rgpBTWuIxL07lvBTsjc+01jvUaZYM8qAhQW
o2DiFv4SRiUGIWLUA/LOMIVTbybRdgdeUtkuPEwUvdC58JZn33optSKuu0eznQBUtAnL1610+CV0
0623h3Eba1R534yTUXjZqRlKKgLSJLKYK3h65ClB8XzdBXd3Rqdy7zMCc7Ly7AILhqEoDzDymCzz
ndsAAAAAAAA=

------=_NextPart_000_0029_01C6A0E1.6D75CBC0--


From java-user-return-21806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 15:09:38 2006
Return-Path: <java-user-return-21806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13572 invoked from network); 6 Jul 2006 15:09:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 15:09:38 -0000
Received: (qmail 80337 invoked by uid 500); 6 Jul 2006 15:09:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80295 invoked by uid 500); 6 Jul 2006 15:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80284 invoked by uid 99); 6 Jul 2006 15:09:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 08:09:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.22.3.98] (HELO mail.insiders.de) (193.22.3.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 08:09:30 -0700
Received: from insiders.de (unknown [193.22.3.33])
	by mail.insiders.de (Postfix) with ESMTP id 523C04D5B43
	for <java-user@lucene.apache.org>; Thu,  6 Jul 2006 17:09:08 +0200 (CEST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A10D.FA272DDA"
Subject: Berkeley DB JEDirectory Performance
Date: Thu, 6 Jul 2006 17:06:45 +0200
Message-ID: <D4E368C6FE4C57499CBCE2A0B476C8B05CE777@nebukadnezar.insiders.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Berkeley DB JEDirectory Performance
thread-index: AcahDcusnJv7SFOSTJawuNELqpBwRQ==
From: "Johannes Christen" <j.christen@insiders.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A10D.FA272DDA
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all.
=20
I just want to share my experience with the Berkeley DB JEDirectory
implementation from the contrib. area. I spend two days evaluating and
testing it and found out that it does work, but has very bad performance
and very high disk requirements for medium size document volume.=20
=20
I indexed about 78000 documents (DPA news items) in the FSDirectory and
the JEDirectory, and here are the results:
=20
Disk usage (index size):
FSDirectory: 322 MB
JEDirectory: 4650 MB
=20
Indexing Performance:
FSDirectory: 84 minutes
JEDirectory: 402 minutes
=20
Searching:
Initial opening of the JEDirectory took about 45 minutes.
The searching itself was ok, but still about 1.5 times slower than with
the FSDirectory.
=20
Ok. I hope than helped people who consider using the Berkeley DB
directory implementation in their application. It may do a good job if
you want to use transactions in small environments, but if the amount of
documents is getting big I wouldn't recommend the JEDirectory
implementation.
=20
Bye for now
=20
    Jo Christen
=20
=20

------_=_NextPart_001_01C6A10D.FA272DDA--

From java-user-return-21807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 15:33:11 2006
Return-Path: <java-user-return-21807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24334 invoked from network); 6 Jul 2006 15:33:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 15:33:11 -0000
Received: (qmail 38449 invoked by uid 500); 6 Jul 2006 15:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38421 invoked by uid 500); 6 Jul 2006 15:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38410 invoked by uid 99); 6 Jul 2006 15:33:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 08:33:05 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.101] (HELO web34103.mail.mud.yahoo.com) (66.163.178.101)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Jul 2006 08:33:03 -0700
Received: (qmail 91114 invoked by uid 60001); 6 Jul 2006 15:32:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=XRPSoANaKuPI/nt0J4EcwgE4gyaTQ6ccmxzJf4O9RchLC55TgQ+38mghNYi9SWXUtDAafmwyMcKJcKXeaywKEsuSwuOfRejEKo0FXwfBAmDMY/cW5gFGkL1OHJTJjk6IzxUN5TdRxe2BvdqGV3iks6beSHAMm68acZRd/MYIfCg=  ;
Message-ID: <20060706153242.91112.qmail@web34103.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34103.mail.mud.yahoo.com via HTTP; Thu, 06 Jul 2006 08:32:42 PDT
Date: Thu, 6 Jul 2006 08:32:42 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: BitSet in a HitCollector
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0607051732420.31288@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey,

Sorry, I will explain a bit more about my collect
method. Currently my collect method is executing
IndexSearcher.doc(id) and storing some stuff in a Map
which I can then retrieve from the HitCollector (much
like the example in the Lucene In Action book). Of
course that's somewhat expensive, so I'd like to do
some statistical sampling based on the result set size
to try and speed things up.

The way I was thinking about doing this was, during
the collect method only executing
IndexSearcher.doc(id) on every Nth document, where N
is calculated dynamically based on a minimum number X.
The rule would be:

N = Max(1,(numResults / X))

In order to do this in the collect method, I need to
know the total number of results before ever invoking
the collect method right? That seemed to make a case
for the BitSet/QueryFilter in the constructor.

In addition, someone else on the list mentioned that
one of the reasons calling IndexSearcher.doc(id) in
the collect method was that it caused the disk to do a
lot of seeking. Maybe that's a moot point if one is
using a RAMDirectory or an FSDirectory small enough
that it gets cached by the OS anyway, but if it's not,
then I thought it might be more performant to have the
hitcollector set the Bits in the collect method and
then do another pass to do the statistical sampling. 

Either way it seems that to do the statistical
sampling that I envision I either need to calculate
the total result count/document id set in the
constructor, before calling the collect method, or
calculate the total result count/document id set in
the collect method and then execute some sort of
post-collect method, right? So I was just wondering
which method was better/faster. Thanx.

JAMES

--- Chris Hostetter <hossman_lucene@fucit.org> wrote:

> 
> : I'm using a HitCollector and would like to know
> the
> : total number of results that matched a given
> query.
> : Based on the JavaDoc, I this will do the trick:
> 
> you don't need a BitSet in that case, you could find
> that out just using
> an int...
> 
>     public CountingCollector extends HitCollector {
>       public int count = 0;
>       public void collect(int doc, float score) {
> count++ };
>     }
>     CountingCollector c = new CountingCollector();
>     searcher.search(query, c)
>     int numResults = c.count;
> 
> : If I want to know the total number of results
> inside
> : of the HitCollector, i.e. before the collect
> method
> : has ever been called, I think I could pass the
> Query
> : and Searcher objects into the HitCollector and do
> this
> : in its constructor:
> :
> : BitSet bits = (new
> :
> QueryFilter(query)).bits(searcher.getIndexReader());
> : int numResults = bits.cardinality();
> 
> This question doesn't make a lot of sense to me, why
> do you need to know
> the total number ofresults before the collect method
> is called? .. what
> you are suggesting here (using QueryFilter in this
> way) is perfectly
> legal, but it's going to do just as much work as
> using a HitCollector will
> (possibly more, i can't remember).
> 
> : Is Lucene executing another pass over the index in
> : order to populate the BitSet and then doing
> another
> : pass while calling the collect method? Thanx.
> 
> in your last example, you never us your
> HitCollector, so i'm not sure what
> you mean, but assuming you aresking about combining
> those examples into
> something like this....
> 
>   Searcher searcher = new
> IndexSearcher(indexReader);
>   BitSet bits = (new
> QueryFilter(query)).bits(searcher.getIndexReader());
>   final int numResults = bits.cardinality();
>   searcher.search(query, new HitCollector() {
>        public void collect(int doc, float score) {
>           /* do something with numResults and doc
> and score */
>        }
>   });
> 
> ...then yes, you are most definitely making two
> passes to do do that.
> 
> 
> 
> -Hoss
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 16:00:18 2006
Return-Path: <java-user-return-21808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36940 invoked from network); 6 Jul 2006 16:00:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 16:00:17 -0000
Received: (qmail 18236 invoked by uid 500); 6 Jul 2006 16:00:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18202 invoked by uid 500); 6 Jul 2006 16:00:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18191 invoked by uid 99); 6 Jul 2006 16:00:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 09:00:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.97.152.11] (HELO services04.student.cs.uwaterloo.ca) (129.97.152.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 09:00:10 -0700
Received: from rees.math.uwaterloo.ca (rees.math.uwaterloo.ca [129.97.204.28])
	by services04.student.cs.uwaterloo.ca (8.13.7/8.13.7) with ESMTP id k66FxhWw001088;
	Thu, 6 Jul 2006 11:59:43 -0400 (EDT)
Received: (from pgwillia@localhost)
	by rees.math.uwaterloo.ca (8.13.4/8.13.4) id k66FxXHP028177;
	Thu, 6 Jul 2006 11:59:33 -0400 (EDT)
Date: Thu, 6 Jul 2006 11:59:33 -0400 (EDT)
From: Tricia Williams <pgwillia@student.cs.uwaterloo.ca>
X-X-Sender: pgwillia@rees.math.uwaterloo.ca
To: James Pine <general_nogi@yahoo.com>
cc: java-user@lucene.apache.org
Subject: Re: BitSet in a HitCollector
In-Reply-To: <20060706153242.91112.qmail@web34103.mail.mud.yahoo.com>
Message-ID: <Pine.GSO.4.64.0607061149030.21833@rees.math.uwaterloo.ca>
References: <20060706153242.91112.qmail@web34103.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-2.0 (services04.student.cs.uwaterloo.ca [129.97.152.11]); Thu, 06 Jul 2006 11:59:48 -0400 (EDT)
X-Miltered: at demeter with ID 44AD336F.000 by Joe's j-chkmail (http://j-chkmail.ensmp.fr)!
X-Virus-Scanned: ClamAV version 0.88.2, clamav-milter version 0.88.2 on localhost
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi James,

    A paper was mentioned on this list in the last couple of months which 
presents a solution to your sampling problem without having to know the 
total results size in advance.  The paper 
(http://www2005.org/cdrom/docs/p245.pdf) presents two solutions which 
utilize a random variable.  One solution has you traverse the result set 
and select each document with probability p.  P is determined in advance. 
Alternately, the paper describes an algorithm (bottom of page 248) for 
determining a skip value which, while similar to the traversal, allows you 
to jump/skip over documents and save the probability computations for each 
document required by the first solution.

    I hope this helps!

Tricia

On Thu, 6 Jul 2006, James Pine wrote:

> Hey,
>
> Sorry, I will explain a bit more about my collect
> method. Currently my collect method is executing
> IndexSearcher.doc(id) and storing some stuff in a Map
> which I can then retrieve from the HitCollector (much
> like the example in the Lucene In Action book). Of
> course that's somewhat expensive, so I'd like to do
> some statistical sampling based on the result set size
> to try and speed things up.
>
> The way I was thinking about doing this was, during
> the collect method only executing
> IndexSearcher.doc(id) on every Nth document, where N
> is calculated dynamically based on a minimum number X.
> The rule would be:
>
> N = Max(1,(numResults / X))
>
> In order to do this in the collect method, I need to
> know the total number of results before ever invoking
> the collect method right? That seemed to make a case
> for the BitSet/QueryFilter in the constructor.
>
> In addition, someone else on the list mentioned that
> one of the reasons calling IndexSearcher.doc(id) in
> the collect method was that it caused the disk to do a
> lot of seeking. Maybe that's a moot point if one is
> using a RAMDirectory or an FSDirectory small enough
> that it gets cached by the OS anyway, but if it's not,
> then I thought it might be more performant to have the
> hitcollector set the Bits in the collect method and
> then do another pass to do the statistical sampling.
>
> Either way it seems that to do the statistical
> sampling that I envision I either need to calculate
> the total result count/document id set in the
> constructor, before calling the collect method, or
> calculate the total result count/document id set in
> the collect method and then execute some sort of
> post-collect method, right? So I was just wondering
> which method was better/faster. Thanx.
>
> JAMES
>
> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>>
>> : I'm using a HitCollector and would like to know
>> the
>> : total number of results that matched a given
>> query.
>> : Based on the JavaDoc, I this will do the trick:
>>
>> you don't need a BitSet in that case, you could find
>> that out just using
>> an int...
>>
>>     public CountingCollector extends HitCollector {
>>       public int count = 0;
>>       public void collect(int doc, float score) {
>> count++ };
>>     }
>>     CountingCollector c = new CountingCollector();
>>     searcher.search(query, c)
>>     int numResults = c.count;
>>
>> : If I want to know the total number of results
>> inside
>> : of the HitCollector, i.e. before the collect
>> method
>> : has ever been called, I think I could pass the
>> Query
>> : and Searcher objects into the HitCollector and do
>> this
>> : in its constructor:
>> :
>> : BitSet bits = (new
>> :
>> QueryFilter(query)).bits(searcher.getIndexReader());
>> : int numResults = bits.cardinality();
>>
>> This question doesn't make a lot of sense to me, why
>> do you need to know
>> the total number ofresults before the collect method
>> is called? .. what
>> you are suggesting here (using QueryFilter in this
>> way) is perfectly
>> legal, but it's going to do just as much work as
>> using a HitCollector will
>> (possibly more, i can't remember).
>>
>> : Is Lucene executing another pass over the index in
>> : order to populate the BitSet and then doing
>> another
>> : pass while calling the collect method? Thanx.
>>
>> in your last example, you never us your
>> HitCollector, so i'm not sure what
>> you mean, but assuming you aresking about combining
>> those examples into
>> something like this....
>>
>>   Searcher searcher = new
>> IndexSearcher(indexReader);
>>   BitSet bits = (new
>> QueryFilter(query)).bits(searcher.getIndexReader());
>>   final int numResults = bits.cardinality();
>>   searcher.search(query, new HitCollector() {
>>        public void collect(int doc, float score) {
>>           /* do something with numResults and doc
>> and score */
>>        }
>>   });
>>
>> ...then yes, you are most definitely making two
>> passes to do do that.
>>
>>
>>
>> -Hoss
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail:
>> java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail:
>> java-user-help@lucene.apache.org
>>
>>
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 16:00:59 2006
Return-Path: <java-user-return-21809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37282 invoked from network); 6 Jul 2006 16:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 16:00:59 -0000
Received: (qmail 19962 invoked by uid 500); 6 Jul 2006 16:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19938 invoked by uid 500); 6 Jul 2006 16:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19926 invoked by uid 99); 6 Jul 2006 16:00:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 09:00:54 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 09:00:53 -0700
Received: by py-out-1112.google.com with SMTP id w49so2958106pyg
        for <java-user@lucene.apache.org>; Thu, 06 Jul 2006 09:00:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ofO/9Ml5UWuyJpNPWJjCF+wPghy5M7zi4F6nyJogTm9Hmfc7OmYA/OWzp1jbZnuakrbHswz4oL37WyLEU/hLgGLtFeFMuk/6s9h6wSLzWzeBVsGekNXnyQjZLvtYoOHMwY/MVaS8qDjeTGvlUBK2pDFDQFsUj6uXm/pN6bWW3b4=
Received: by 10.35.27.1 with SMTP id e1mr1037039pyj;
        Thu, 06 Jul 2006 09:00:32 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Thu, 6 Jul 2006 09:00:32 -0700 (PDT)
Message-ID: <359a92830607060900t1d562e2ew182e42e8d1a424a8@mail.gmail.com>
Date: Thu, 6 Jul 2006 12:00:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Berkeley DB JEDirectory Performance
In-Reply-To: <D4E368C6FE4C57499CBCE2A0B476C8B05CE777@nebukadnezar.insiders.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4252_2082049.1152201632461"
References: <D4E368C6FE4C57499CBCE2A0B476C8B05CE777@nebukadnezar.insiders.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4252_2082049.1152201632461
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks, I always appreciate someone else doing work for me <G>....

Best
Erick

------=_Part_4252_2082049.1152201632461--

From java-user-return-21810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 17:48:22 2006
Return-Path: <java-user-return-21810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77202 invoked from network); 6 Jul 2006 17:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 17:48:21 -0000
Received: (qmail 25489 invoked by uid 500); 6 Jul 2006 17:48:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24820 invoked by uid 500); 6 Jul 2006 17:48:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24807 invoked by uid 500); 6 Jul 2006 17:48:15 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 24804 invoked by uid 99); 6 Jul 2006 17:48:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 10:48:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 10:48:12 -0700
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id C3B991E65
	for <lucene-user@jakarta.apache.org>; Thu,  6 Jul 2006 11:47:51 -0600 (MDT)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 30814-06 for <lucene-user@jakarta.apache.org>;
	Thu, 6 Jul 2006 11:47:47 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 688848C2
	for <lucene-user@jakarta.apache.org>; Thu,  6 Jul 2006 11:47:47 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A124.4ADE6B46"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Managing a large archival (and constantly changing) database
Date: Thu, 6 Jul 2006 11:47:47 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB406D1D2@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Managing a large archival (and constantly changing) database
thread-index: AcahJEDNGCkqsQzqQPKj82p1pKqvlg==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A124.4ADE6B46
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I've been asked to do a project which provides full-text search for a
large database of articles.  The expectation is that most of the
articles are fairly small (<2k bytes).  There will be an initial
population of around 400,000 articles.  There will then be approximately
2000 new articles added each day (they need to be added in "real time"
(within a few minutes of arrival), but will be spread out during the
day).  So, roughly another 700,000 articles each year.

=20

I've read enough to believe that having a lucene database of several
million articles is doable.  And, adding 2000 articles per day wouldn't
seem to be that many.  My concern is the real-time nature of the
application.  I'm a bit nervous (perhaps without justification) at
simply growing one monolithic lucene database.  Should there be a crash,
the database will be unusable and I'll have to rebuild from scratch
(which, based on my experience, would be hours of time).

=20

Some of my thoughts were:

1)     having monthly databases and using MultiSearcher to search across
them.  That way my exposure for a corrupted database is limited to this
month's database.  This would also seem to give me somewhat better
control--meaning a) if the search was generating lots of hits, I could
display the results a month at a time and not bury them with output.  It
would also spread their search CPU out better and not prevent other
individuals from doing a search.  If there were very few results, I
could sleep between each month's search and again, not lock everyone
else out from searches.

2)     Have a "this month's" searchable and an "everything else"
searchable.  At the beginning of each month, I would consolidate the
previous month's database into the "everything else" searchable.  This
would give more consistent results for relevancy ranked searches.  But,
it means that a bad search could return lots of results.

=20

Has anyone else dealt with a similar problem?  Am I expecting too much
from Lucene running on a single machine (or should I be looking at
Hadoop?).  Any comments or links to previous discussions on this topic
would be appreciated.

=20

Scott

=20

=20


------_=_NextPart_001_01C6A124.4ADE6B46--

From java-user-return-21811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 18:22:03 2006
Return-Path: <java-user-return-21811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86459 invoked from network); 6 Jul 2006 18:22:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 18:22:03 -0000
Received: (qmail 81108 invoked by uid 500); 6 Jul 2006 18:21:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80558 invoked by uid 500); 6 Jul 2006 18:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80546 invoked by uid 99); 6 Jul 2006 18:21:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:21:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Lawrence@theladders.com designates 67.151.144.115 as permitted sender)
Received: from [67.151.144.115] (HELO hermes.laddersoffice.com) (67.151.144.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 11:21:55 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Managing a large archival (and constantly changing) database
Date: Thu, 6 Jul 2006 14:21:34 -0400
Message-ID: <15FC71D155A0F8429C3636B72C2ED52E19BF73@hermes.laddersoffice.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Managing a large archival (and constantly changing) database
thread-index: AcahJEDNGCkqsQzqQPKj82p1pKqvlgAAKT/w
From: "Larry Ogrodnek" <Lawrence@theladders.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We have a similar setup, although probably only 1/5th the number of
documents and updates.  I'd suggest just making periodic index backups.

I've been storing my index as follows:

<workdir>/<index-name>/data/ (lucene index directory)
<workdir>/<index-name>/backups/

The "data" is what's passed into IndexWriter/IndexReader.  Additionally,
I create/update a .last_update file, which just contains the timestamp
of when the last update was started, so when the app starts up it only
needs to retrieve updates from the db since then.

Periodically the app copies the contents of data into a new directory in
backups named by the date/time, e.g. backups/2007-07-04.110051.  If
needed, I can delete data and replace the contents with the latest
backup, and the app will only retrieve records updated since the backup
was made (using the backup's .last_update)...

I'd recommend making the complete index creation from scratch a normal
operation as much as possible (but you're right, for that number of
documents it will take awhile).  It's been really helpful here when
doing additional deploys for testing, or deciding we want to index
things differently, etc...

-larry


-----Original Message-----
From: Scott Smith [mailto:ssmith@mainstreamdata.com]=20
Sent: Thursday, July 06, 2006 1:48 PM
To: lucene-user@jakarta.apache.org
Subject: Managing a large archival (and constantly changing) database

I've been asked to do a project which provides full-text search for a
large database of articles.  The expectation is that most of the
articles are fairly small (<2k bytes).  There will be an initial
population of around 400,000 articles.  There will then be approximately
2000 new articles added each day (they need to be added in "real time"
(within a few minutes of arrival), but will be spread out during the
day).  So, roughly another 700,000 articles each year.

=20

I've read enough to believe that having a lucene database of several
million articles is doable.  And, adding 2000 articles per day wouldn't
seem to be that many.  My concern is the real-time nature of the
application.  I'm a bit nervous (perhaps without justification) at
simply growing one monolithic lucene database.  Should there be a crash,
the database will be unusable and I'll have to rebuild from scratch
(which, based on my experience, would be hours of time).

=20

Some of my thoughts were:

1)     having monthly databases and using MultiSearcher to search across
them.  That way my exposure for a corrupted database is limited to this
month's database.  This would also seem to give me somewhat better
control--meaning a) if the search was generating lots of hits, I could
display the results a month at a time and not bury them with output.  It
would also spread their search CPU out better and not prevent other
individuals from doing a search.  If there were very few results, I
could sleep between each month's search and again, not lock everyone
else out from searches.

2)     Have a "this month's" searchable and an "everything else"
searchable.  At the beginning of each month, I would consolidate the
previous month's database into the "everything else" searchable.  This
would give more consistent results for relevancy ranked searches.  But,
it means that a bad search could return lots of results.

=20

Has anyone else dealt with a similar problem?  Am I expecting too much
from Lucene running on a single machine (or should I be looking at
Hadoop?).  Any comments or links to previous discussions on this topic
would be appreciated.

=20

Scott

=20

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 19:09:45 2006
Return-Path: <java-user-return-21812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1958 invoked from network); 6 Jul 2006 19:09:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 19:09:45 -0000
Received: (qmail 4017 invoked by uid 500); 6 Jul 2006 19:09:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3130 invoked by uid 500); 6 Jul 2006 19:09:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3119 invoked by uid 99); 6 Jul 2006 19:09:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:09:39 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.105] (HELO web34107.mail.mud.yahoo.com) (66.163.178.105)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Jul 2006 12:09:38 -0700
Received: (qmail 50986 invoked by uid 60001); 6 Jul 2006 19:09:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zJYaX5Db1Mo7+QHzhQLI2uu520gBJ3pjGirdzwv7P774qRafzEI6/DA1gCvqvh2EID9cK6+JDFk9lZSEtIDQARRHTYcIx6kpTLo/pSVVTzNEWD5mVSx4ErthYH6aNBLtf7FodJ0aMkNwkLW0Y6uHmTXnSYXOYJOuOmIOo2eS6VE=  ;
Message-ID: <20060706190917.50984.qmail@web34107.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34107.mail.mud.yahoo.com via HTTP; Thu, 06 Jul 2006 12:09:17 PDT
Date: Thu, 6 Jul 2006 12:09:17 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: RE: Managing a large archival (and constantly changing) database
To: java-user@lucene.apache.org
In-Reply-To: <15FC71D155A0F8429C3636B72C2ED52E19BF73@hermes.laddersoffice.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey,

I found this thread to be very useful when deciding
upon an indexing strategy. 

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html

The system I work on has 3 million or so documents and
it was (until a non-lucene performance issue came up)
setup to add/delete new documents every 15 minutes in
a similar manner as described in the thread. We were
adding/deleting a few thousand documents every 15
minutes, during peak traffic. We have a dedicated
indexing machine and distribute portions of our index
across multiple machines, but you could still follow
the pattern all on one box, just with separate
processes/threads. 

Even though lucene allows certain types of index
operations to happen concurrently with search
activity, IMHO, if you can decouple the indexing
process from the searching process your system as a
whole will be more flexible and scalable with only a
little extra maintenance overhead.

JAMES

--- Larry Ogrodnek <Lawrence@theladders.com> wrote:

> We have a similar setup, although probably only
> 1/5th the number of
> documents and updates.  I'd suggest just making
> periodic index backups.
> 
> I've been storing my index as follows:
> 
> <workdir>/<index-name>/data/ (lucene index
> directory)
> <workdir>/<index-name>/backups/
> 
> The "data" is what's passed into
> IndexWriter/IndexReader.  Additionally,
> I create/update a .last_update file, which just
> contains the timestamp
> of when the last update was started, so when the app
> starts up it only
> needs to retrieve updates from the db since then.
> 
> Periodically the app copies the contents of data
> into a new directory in
> backups named by the date/time, e.g.
> backups/2007-07-04.110051.  If
> needed, I can delete data and replace the contents
> with the latest
> backup, and the app will only retrieve records
> updated since the backup
> was made (using the backup's .last_update)...
> 
> I'd recommend making the complete index creation
> from scratch a normal
> operation as much as possible (but you're right, for
> that number of
> documents it will take awhile).  It's been really
> helpful here when
> doing additional deploys for testing, or deciding we
> want to index
> things differently, etc...
> 
> -larry
> 
> 
> -----Original Message-----
> From: Scott Smith [mailto:ssmith@mainstreamdata.com]
> 
> Sent: Thursday, July 06, 2006 1:48 PM
> To: lucene-user@jakarta.apache.org
> Subject: Managing a large archival (and constantly
> changing) database
> 
> I've been asked to do a project which provides
> full-text search for a
> large database of articles.  The expectation is that
> most of the
> articles are fairly small (<2k bytes).  There will
> be an initial
> population of around 400,000 articles.  There will
> then be approximately
> 2000 new articles added each day (they need to be
> added in "real time"
> (within a few minutes of arrival), but will be
> spread out during the
> day).  So, roughly another 700,000 articles each
> year.
> 
>  
> 
> I've read enough to believe that having a lucene
> database of several
> million articles is doable.  And, adding 2000
> articles per day wouldn't
> seem to be that many.  My concern is the real-time
> nature of the
> application.  I'm a bit nervous (perhaps without
> justification) at
> simply growing one monolithic lucene database. 
> Should there be a crash,
> the database will be unusable and I'll have to
> rebuild from scratch
> (which, based on my experience, would be hours of
> time).
> 
>  
> 
> Some of my thoughts were:
> 
> 1)     having monthly databases and using
> MultiSearcher to search across
> them.  That way my exposure for a corrupted database
> is limited to this
> month's database.  This would also seem to give me
> somewhat better
> control--meaning a) if the search was generating
> lots of hits, I could
> display the results a month at a time and not bury
> them with output.  It
> would also spread their search CPU out better and
> not prevent other
> individuals from doing a search.  If there were very
> few results, I
> could sleep between each month's search and again,
> not lock everyone
> else out from searches.
> 
> 2)     Have a "this month's" searchable and an
> "everything else"
> searchable.  At the beginning of each month, I would
> consolidate the
> previous month's database into the "everything else"
> searchable.  This
> would give more consistent results for relevancy
> ranked searches.  But,
> it means that a bad search could return lots of
> results.
> 
>  
> 
> Has anyone else dealt with a similar problem?  Am I
> expecting too much
> from Lucene running on a single machine (or should I
> be looking at
> Hadoop?).  Any comments or links to previous
> discussions on this topic
> would be appreciated.
> 
>  
> 
> Scott
> 
>  
> 
>  
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 19:25:47 2006
Return-Path: <java-user-return-21813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14343 invoked from network); 6 Jul 2006 19:25:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 19:25:47 -0000
Received: (qmail 31458 invoked by uid 500); 6 Jul 2006 19:25:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31423 invoked by uid 500); 6 Jul 2006 19:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31411 invoked by uid 99); 6 Jul 2006 19:25:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:25:40 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: error (asf.osuosl.org: local policy)
Received: from [63.240.77.81] (HELO sccrmhc11.comcast.net) (63.240.77.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:25:35 -0700
Received: from best.com (c-24-6-61-94.hsd1.ca.comcast.net[24.6.61.94])
          by comcast.net (sccrmhc11) with SMTP
          id <20060706192453011009crone>; Thu, 6 Jul 2006 19:24:53 +0000
Message-ID: <44AD637C.1000301@best.com>
Date: Thu, 06 Jul 2006 12:24:44 -0700
From: Maurice Yarrow <yarrow@best.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4.1) Gecko/20031114
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users <java-user@lucene.apache.org>
Subject: Finding docNum of a given indexed file
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello Lucene community

So, having looked at the api and at numerous email postings and exchanges,
I see that updating a particular document in the index that represents a 
given file
that has changed involves

1) deleting with deleteDocument (of either IndexReader or IndexModifier)

and then

2) adding with addDocument (of either IndexReader or IndexModifier)

Question:
Is there any way to directly get the docNum of the document representing
the index file, given the file or file name ?

I see that unique terms are one way to identify this, but consider an index
for a tree of XML files, where two of them differ only by one word, and in
one of these, that word has changed.  However, that word alone may not
uniquely identify the XML file.

So:
Could the file name (fully qualified filepath/filename) be used as the 
search
term ?

Could the entire file be stringified (one long string, with or without 
new-lines)
and that be used as the term (probably not, since not tokenized) ?

Can the entire file be tokenized and uniqued, and this list of terms be 
used ?
(Once again, this might represent more than one file that just happen to 
contain
the same terms but ordered differently.)

Anyhow, this does seem like something that needs to be done frequently, but
is not directly supported.   Am I wrong ?   Please advise how this is 
best done.

Maurice Yarrow


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 19:53:05 2006
Return-Path: <java-user-return-21814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23680 invoked from network); 6 Jul 2006 19:53:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 19:53:04 -0000
Received: (qmail 72009 invoked by uid 500); 6 Jul 2006 19:52:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71973 invoked by uid 500); 6 Jul 2006 19:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71958 invoked by uid 99); 6 Jul 2006 19:52:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:52:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 12:52:56 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 06 Jul 2006 15:52:35 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Jul 2006 15:52:31 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A135.B96059E2"
Subject: BooleanQuery question
Date: Thu, 6 Jul 2006 15:57:24 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81133B63E6@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery question
thread-index: AcahNmaVdrUY9ozqTESQ0CUbBBjfxQ==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Jul 2006 19:52:31.0143 (UTC) FILETIME=[B78CBB70:01C6A135]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A135.B96059E2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a BooleanQuery that looks like this:

=20

BooleanQuery query =3D new BooleanQuery();

=20

TermQuery term1 =3D new TermQuery(new Term(ID, "1234"));

TermQuery term2 =3D new TermQuery(new Term(ID, "2344"));

TermQuery term2 =3D new TermQuery(new Term(ID, "2323"));

TermQuery termLocation =3D new TermQuery(new Term(LOCATION, "A1"));

TermQuery termLanguage =3D new TermQuery(new Term(LANGUAGE, "ENU"));

=20

query.add(term1, BooleanClause.Occur.Should);

query.add(term2, BooleanClause.Occur.Should);

query.add(term3, BooleanClause.Occur.Should);

query.add(termLocation, BooleanClause.Occur.MUST);

query.add(termLanguage, BooleanClause.Occur.MUST);

=20

It produces this:

=20

ID: 1234 ID:2344 ID:2323 +LOCATION:A1 +LANGUAGE:ENU

=20

I just want results that have:

ID: 1234 OR 2344 OR 2323

LOCATION: A1=20

LANGUAGE: ENU

=20

This query returns everything from my index.  How would I create a query
that will only return results the must have LOCATION and LANGUAGE and
have only those three IDs.


------_=_NextPart_001_01C6A135.B96059E2--

From java-user-return-21815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 20:05:00 2006
Return-Path: <java-user-return-21815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27601 invoked from network); 6 Jul 2006 20:05:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 20:05:00 -0000
Received: (qmail 90494 invoked by uid 500); 6 Jul 2006 20:04:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89892 invoked by uid 500); 6 Jul 2006 20:04:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89881 invoked by uid 99); 6 Jul 2006 20:04:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 13:04:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Jul 2006 13:04:54 -0700
Received: (qmail 9242 invoked from network); 6 Jul 2006 20:04:27 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.4.148)
  by ws6-1.us4.outblaze.com with SMTP; 6 Jul 2006 20:04:27 -0000
Message-ID: <44AD6CCD.9050807@curtin.com>
Date: Thu, 06 Jul 2006 16:04:29 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: BooleanQuery question
References: <0D6A3C278F4DC346B98DF4D2F1397E81133B63E6@UREXCHVS3.ur.com>
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81133B63E6@UREXCHVS3.ur.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Van Nguyen wrote:

> I just want results that have:
> 
> ID: 1234 OR 2344 OR 2323
> 
> LOCATION: A1 
> 
> LANGUAGE: ENU
> 
> This query returns everything from my index.  How would I create a query
> that will only return results the must have LOCATION and LANGUAGE and
> have only those three IDs.

I think you'll need to put the three ID-based TermQuerys into a 
sub-BooleanQuery instead of the top-level query.  Something like this:

BooleanQuery subquery = new BooleanQuery();
subquery.add(term1, BooleanClause.Occur.Should);
subquery.add(term2, BooleanClause.Occur.Should);
subquery.add(term3, BooleanClause.Occur.Should);
query.add(subquery, BooleanClause.Occur.MUST);

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 20:58:05 2006
Return-Path: <java-user-return-21816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44059 invoked from network); 6 Jul 2006 20:58:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 20:58:05 -0000
Received: (qmail 63065 invoked by uid 500); 6 Jul 2006 20:58:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62455 invoked by uid 500); 6 Jul 2006 20:57:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62444 invoked by uid 99); 6 Jul 2006 20:57:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 13:57:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 13:57:56 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 25DA65B778; Thu,  6 Jul 2006 13:57:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1169B7F403
	for <java-user@lucene.apache.org>; Thu,  6 Jul 2006 13:57:34 -0700 (PDT)
Date: Thu, 6 Jul 2006 13:57:34 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Managing a large archival (and constantly changing) database
In-Reply-To: <20060706190917.50984.qmail@web34107.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0607061355060.23916@hal.rescomp.berkeley.edu>
References: <20060706190917.50984.qmail@web34107.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I found this thread to be very useful when deciding
: upon an indexing strategy.
:
: http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html

FYI: that thread was the basis of the mechanism Solr uses to create
"snapshots" of indexes for replication fro ma Master to multiple Slaves.

My understanding of the orriginal poster's needs makes me think Solr might
be an ideal solution...

	http://incubator.apache.org/solr/features.html
	http://incubator.apache.org/solr/tutorial.html




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 21:14:36 2006
Return-Path: <java-user-return-21817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50635 invoked from network); 6 Jul 2006 21:14:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 21:14:36 -0000
Received: (qmail 89665 invoked by uid 500); 6 Jul 2006 21:14:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89639 invoked by uid 500); 6 Jul 2006 21:14:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89628 invoked by uid 99); 6 Jul 2006 21:14:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 14:14:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 14:14:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id C29C35B770; Thu,  6 Jul 2006 14:14:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BD0377F403
	for <java-user@lucene.apache.org>; Thu,  6 Jul 2006 14:14:08 -0700 (PDT)
Date: Thu, 6 Jul 2006 14:14:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Finding docNum of a given indexed file
In-Reply-To: <44AD637C.1000301@best.com>
Message-ID: <Pine.LNX.4.58.0607061411270.23916@hal.rescomp.berkeley.edu>
References: <44AD637C.1000301@best.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Could the file name (fully qualified filepath/filename) be used as the
: search
: term ?
:
: Could the entire file be stringified (one long string, with or without
: new-lines)
: and that be used as the term (probably not, since not tokenized) ?

either of those can work -- it all depends on how you want to define a
"unique" file for the purposes of deleting the old one to add the new one
-- all that matters fordeleting by term is that you can specify a term --
how big that term is is irrelevant, so you can certinaly index the full
path as an UNTOKENIZED field, or you could index the entire string
contents of the file (with newlines) as a an UNTOKENIZED Field -- it all
depends on what you consider the "same" file.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 06 23:55:00 2006
Return-Path: <java-user-return-21818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94943 invoked from network); 6 Jul 2006 23:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2006 23:54:59 -0000
Received: (qmail 79701 invoked by uid 500); 6 Jul 2006 23:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79355 invoked by uid 500); 6 Jul 2006 23:54:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79344 invoked by uid 99); 6 Jul 2006 23:54:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 16:54:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 16:54:52 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id 91BAA368181
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 01:54:29 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 06970-07 for <java-user@lucene.apache.org>;
	Fri, 7 Jul 2006 01:54:21 +0200 (CEST)
Received: from localhost (dslb-084-057-147-036.pools.arcor-ip.net [84.57.147.36])
	by flacons.org (flacons.org) with ESMTP id B14F536813D
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 01:54:20 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Searching for similiar texts
Date: Fri, 7 Jul 2006 01:54:20 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607070154.20206.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy,
I index articles using two fields, one for the title and one for the text. Now 
I want to display 5 similiar Articles for every Article during viewing. How 
can I manage this? Any premade solutions?

Thanks
-- 
Dominik Bruhn
mailto: dominik@dbruhn.de
http://www.dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 01:07:37 2006
Return-Path: <java-user-return-21819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10547 invoked from network); 7 Jul 2006 01:07:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 01:07:37 -0000
Received: (qmail 62512 invoked by uid 500); 7 Jul 2006 01:07:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62460 invoked by uid 500); 7 Jul 2006 01:07:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62448 invoked by uid 99); 7 Jul 2006 01:07:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 18:07:27 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.227] (HELO web50314.mail.yahoo.com) (206.190.39.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Jul 2006 18:07:26 -0700
Received: (qmail 29661 invoked by uid 60001); 7 Jul 2006 01:06:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=YFM+eBelQ0MDoFHQ66H61yfFgRIXhaX/XKCf+9J8zYs325TqKchcBAfaI4AopB16FrNQR8F6UYZjnAdovKJMgXetHGVJ2qjixUDfi2Seor0i5BE2WbLc+IFZ/+M/7tPcFY7QKjn5rmZK3fTlnVa7p9vtHif0DBbI1L9fQ/6gG1s=  ;
Message-ID: <20060707010649.29659.qmail@web50314.mail.yahoo.com>
Received: from [72.229.167.99] by web50314.mail.yahoo.com via HTTP; Thu, 06 Jul 2006 18:06:49 PDT
Date: Thu, 6 Jul 2006 18:06:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Searching for similiar texts
To: java-user@lucene.apache.org
In-Reply-To: <200607070154.20206.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Look for MoreLikeThis class in Lucene's contrib/ directory.

Otis

----- Original Message ----
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Sent: Thursday, July 6, 2006 7:54:20 PM
Subject: Searching for similiar texts

Hy,
I index articles using two fields, one for the title and one for the text. Now 
I want to display 5 similiar Articles for every Article during viewing. How 
can I manage this? Any premade solutions?

Thanks
-- 
Dominik Bruhn
mailto: dominik@dbruhn.de
http://www.dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 02:47:22 2006
Return-Path: <java-user-return-21820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47134 invoked from network); 7 Jul 2006 02:47:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 02:47:22 -0000
Received: (qmail 64461 invoked by uid 500); 7 Jul 2006 02:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64428 invoked by uid 500); 7 Jul 2006 02:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64417 invoked by uid 99); 7 Jul 2006 02:47:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 19:47:16 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rajiv.roopan@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 19:47:13 -0700
Received: by ug-out-1314.google.com with SMTP id u2so398024uge
        for <java-user@lucene.apache.org>; Thu, 06 Jul 2006 19:46:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=p1OcXfllslE/v9h9TT/zbJLASc0rfR0Ckqf8MoxPbbcHOWMm5qsUJ4TF4kAQTn5sMhl4k5o5bYUEC1jA7ndq0TrGT/vgZQwAaTsVxr9W77mWiyo/tDmOVKrY8bUQ9LGZuKBV1bRFpc8tkNChHFDo2s21YQpFqbpZtIecqmKULgE=
Received: by 10.67.101.8 with SMTP id d8mr1462318ugm;
        Thu, 06 Jul 2006 19:46:52 -0700 (PDT)
Received: by 10.66.220.7 with HTTP; Thu, 6 Jul 2006 19:46:52 -0700 (PDT)
Message-ID: <5a8b64620607061946r1ec727f2jd0b652b58f0ca46@mail.gmail.com>
Date: Thu, 6 Jul 2006 22:46:52 -0400
From: "Rajiv Roopan" <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene search formula
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_15049_4611507.1152240412041"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_15049_4611507.1152240412041
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,
   I was recently looking thru the lucene in action book and came across the
scoring formula. I was wondering if the formula has changed since the book
was written?

  Also was wondering if someone can breifly explain what the IDF(t) term in
the formula means? In the book it says that it's the inverse document
frequency of the term but doesn't explain beyond that?

thanks,
rajiv

------=_Part_15049_4611507.1152240412041--

From java-user-return-21821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 04:30:18 2006
Return-Path: <java-user-return-21821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77681 invoked from network); 7 Jul 2006 04:30:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 04:30:18 -0000
Received: (qmail 44684 invoked by uid 500); 7 Jul 2006 04:30:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44647 invoked by uid 500); 7 Jul 2006 04:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44636 invoked by uid 99); 7 Jul 2006 04:30:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 21:30:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.209] (HELO mailpro5.rediffmailpro.com) (203.199.83.209)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Jul 2006 21:30:11 -0700
Received: (qmail 4383 invoked from network); 7 Jul 2006 04:27:50 -0000
Received: from unknown (HELO Amit) (59.181.103.41)
  by mailserver with SMTP; 7 Jul 2006 04:27:50 -0000
Reply-To: <amitk@techepoch.com>
From: "Amit" <amitk@techepoch.com>
To: "Erick Erickson" <erickerickson@gmail.com>,
	<java-user@lucene.apache.org>
Subject: RE: Function writing using lucene
Date: Fri, 7 Jul 2006 09:59:45 +0530
Message-ID: <APEIIFMNKNHNCFFBLFAKEELACAAA.amitk@techepoch.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0025_01C6A1AC.13370EA0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <359a92830607050602v400be461x87cb01932e89f6ce@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0025_01C6A1AC.13370EA0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Thanks Erick for reply.it will help us.

Regards,
Amit
  -----Original Message-----
  From: Erick Erickson [mailto:erickerickson@gmail.com]
  Sent: Wednesday, July 05, 2006 6:32 PM
  To: java-user@lucene.apache.org; amitk@techepoch.com
  Subject: Re: Function writing using lucene


  Amit:

  You can make arbitrarily complex boolean clauses, see BooleanQuery. For
that, you don't need a filter. You can add boolean clauses with MUST, SHOULD
and MUST NOT (AND, OR,  NOT). Filters are for restricting queries that
create (under the covers) a large BooleanQuery. You shouldn't think about
filters unless there is a demonstrated need. You'll know that when you get a
TooManyClauses exception <G>. There is a discussion of this in the book
Lucene In Action, a book that I highly recommend.

  For instance, something like should get the documents that have both
"lucene" and "apache" in the contents field:
  BooleanQuery bq = new BooleanQuery;
  bq.add(new TermQuery(new Term("content", "lucene")),
BooleanClause.Occur.MUST);
  bq.add(new TermQuery(new Term("content", "apache")),
BooleanClause.Occur.MUST);
  Hits hits = Searcher.search(bq);

  For that matter, the QueryParser will do all this for you if you give it
the right string. It's up to you whether you let QueryParser construct the
clause for you or construct the BooleanQuery yourself.

  Note that you can sort however you want using the Searcher.search(Query,
Sort) form of the search call. Sorting takes time, though.....

  I don't understand why you care about "filtering out document IDs". You
submit a query and get a Hits object back. Then you fetch the Document from
the Hits object that contains your data. Document IDs are an integral part
of the document (and assigned by Lucene at index time). I have a hard time
imagining why you'd even want to try to filter them out, I'm not sure the
question makes sense in the Lucene context.

  The default return order is by relevance, doc id has nothing to do with
it.

  You can certainly write a custom filter, but be really sure you need it
first. Wildcard queries and prefix queries are prime candidates for filters
in my experience.

  If you haven't gotten a copy of Lucene In Action, I strongly recommend
that you do. It explains a LOT about how Lucene works and should be used.

  Also, get a copy of Luke to examine your indexes and allow you to play
around with the query syntax. It'll save you a LOT of time and effort.

  Hope this helps
  Erick


------=_NextPart_000_0025_01C6A1AC.13370EA0--


From java-user-return-21822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 05:02:14 2006
Return-Path: <java-user-return-21822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84223 invoked from network); 7 Jul 2006 05:02:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 05:02:14 -0000
Received: (qmail 73844 invoked by uid 500); 7 Jul 2006 05:02:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73381 invoked by uid 500); 7 Jul 2006 05:02:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73370 invoked by uid 99); 7 Jul 2006 05:02:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 22:02:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 22:02:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B3EF95B7A8; Thu,  6 Jul 2006 22:01:39 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id AC82E7F403
	for <java-user@lucene.apache.org>; Thu,  6 Jul 2006 22:01:39 -0700 (PDT)
Date: Thu, 6 Jul 2006 22:01:39 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene search formula
In-Reply-To: <5a8b64620607061946r1ec727f2jd0b652b58f0ca46@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607062157430.11242@hal.rescomp.berkeley.edu>
References: <5a8b64620607061946r1ec727f2jd0b652b58f0ca46@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:    I was recently looking thru the lucene in action book and came across the
: scoring formula. I was wondering if the formula has changed since the book
: was written?

no, but the book has some mistakes, and the scoring formula is one of
them...
http://lucenebook.com/blog/errata/
http://lucenebook.com/blog/errata/2005/01/24/scoring_formula_omission.html

:   Also was wondering if someone can breifly explain what the IDF(t) term in
: the formula means? In the book it says that it's the inverse document
: frequency of the term but doesn't explain beyond that?

1) google is your friend.
2) it's pretty much exactly what it sounds like ... it's the inverse of
the document frequency for that term .. the more frequent the term is,
the more documents it appears in, the lower the value is.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 05:10:49 2006
Return-Path: <java-user-return-21823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85285 invoked from network); 7 Jul 2006 05:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 05:10:49 -0000
Received: (qmail 79153 invoked by uid 500); 7 Jul 2006 05:10:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79115 invoked by uid 500); 7 Jul 2006 05:10:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79104 invoked by uid 99); 7 Jul 2006 05:10:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Jul 2006 22:10:43 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.56] (HELO web50302.mail.yahoo.com) (206.190.38.56)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 06 Jul 2006 22:10:42 -0700
Received: (qmail 92527 invoked by uid 60001); 7 Jul 2006 05:10:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=hb0Y6uO+/lkHi+P1jKwdPpEm5olTchV9ACTRz3OeCojl95bZQ7I5JsrtUJf3MG4lSGr3HHU7U6qPN6rgdYbubOM8/RnKAallnpDY06YkZNSl7zVtFOqmgw38+qp8GxYIoBWboRJv1NflejU2A6PFtAtwgP7GTKED6vg+s/OEJGo=  ;
Message-ID: <20060707051021.92522.qmail@web50302.mail.yahoo.com>
Received: from [72.229.167.99] by web50302.mail.yahoo.com via HTTP; Thu, 06 Jul 2006 22:10:20 PDT
Date: Thu, 6 Jul 2006 22:10:20 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene search formula
To: java-user@lucene.apache.org
In-Reply-To: <5a8b64620607061946r1ec727f2jd0b652b58f0ca46@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The formula hasn't changed (but the first printing of the book had a portion of it missing, check javadoc for (Default?)Similarity for the real and current formula).

Here is a simple IDF example, or at least how I "visualize" IDF.
You have an index with a bunch of documents and terms in it.  A term T can appear some number of times in this index, say N times.  You can think of the IDF of the term T is "1/N" (not really 1/N, but....  log(numDocs/(docFreq+1)) + 1).  The more frequent the term in the index, the smaller its weight (the less important it is during scoring).

Otis

----- Original Message ----
From: Rajiv Roopan <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, July 6, 2006 10:46:52 PM
Subject: Lucene search formula

Hello,
   I was recently looking thru the lucene in action book and came across the
scoring formula. I was wondering if the formula has changed since the book
was written?

  Also was wondering if someone can breifly explain what the IDF(t) term in
the formula means? In the book it says that it's the inverse document
frequency of the term but doesn't explain beyond that?

thanks,
rajiv




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 07:58:59 2006
Return-Path: <java-user-return-21824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46626 invoked from network); 7 Jul 2006 07:58:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 07:58:59 -0000
Received: (qmail 13350 invoked by uid 500); 7 Jul 2006 07:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13314 invoked by uid 500); 7 Jul 2006 07:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13303 invoked by uid 99); 7 Jul 2006 07:58:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 00:58:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [164.164.87.55] (HELO srit_mail.renaissance-it.com) (164.164.87.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 00:58:51 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A19B.2798D7AE"
Subject: Nutch- Better than Lucene?
Date: Fri, 7 Jul 2006 13:28:38 +0530
Message-ID: <7451DFE76F314044AA7B34ABD08C97C143DA85@srit_mail.renaissance-it.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Nutch- Better than Lucene?
Thread-Index: AcahmLrOHSSfdI7AQxGb3zJCDFMfUQAAmD4g
From: "Sarvadnya Mutalik" <sarvadnya.mutalik@renaissance-it.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A19B.2798D7AE
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable



> http://wiki.apache.org/nutch/Nutch_-_The_Java_Search_Engine

------_=_NextPart_001_01C6A19B.2798D7AE--

From java-user-return-21825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 09:03:14 2006
Return-Path: <java-user-return-21825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64925 invoked from network); 7 Jul 2006 09:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 09:03:14 -0000
Received: (qmail 97241 invoked by uid 500); 7 Jul 2006 09:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96247 invoked by uid 500); 7 Jul 2006 09:03:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96236 invoked by uid 99); 7 Jul 2006 09:03:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:03:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:03:06 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 1D792187BD; Fri,  7 Jul 2006 09:02:43 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id D75B6187BC
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 09:02:35 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Managing a large archival (and constantly changing) database
Date: Fri, 7 Jul 2006 10:02:38 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0013_01C6A1AC.78B12540"
thread-index: AcahL8GViA6UmSuOQ6STOri1Ou7PXAAcpFfw
In-Reply-To: <20060706190917.50984.qmail@web34107.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060707090235.D75B6187BC@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0013_01C6A1AC.78B12540
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I should probably direct this to Doug Cutting, but following that thread I
come to Doug's post at
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html . 

Doug says:

> 1. On the index master, periodically checkpoint the index. Every minute or
so the IndexWriter is closed and a 'cp -lr index index.DATE' command is
executed from Java, where DATE is the current date and time. This
efficiently makes a copy of the index when its in a consistent state by
constructing a tree of hard links. If Lucene re-writes any files (e.g., the
segments file) a new inode is created and the copy is unchanged. 

How can that be so? When the segments file is re-written it will surely
clobber the copy rather than creating a new INODE, because it has the same
name... wouldn't it?

What makes it different from (say)...

	mkdir x
	echo original > x/x.txt
	cp -lr x x.copy
	echo update > x/x.txt
	diff x/x.txt x.copy/x.txt

...where x.copy/x.txt has "update" rather than "original" (certainly on
Linux).

-----Original Message-----
From: James Pine [mailto:general_nogi@yahoo.com] 
Sent: 06 July 2006 20:09
To: java-user@lucene.apache.org
Subject: RE: Managing a large archival (and constantly changing) database

Hey,

I found this thread to be very useful when deciding upon an indexing
strategy. 

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html

The system I work on has 3 million or so documents and it was (until a
non-lucene performance issue came up) setup to add/delete new documents
every 15 minutes in a similar manner as described in the thread. We were
adding/deleting a few thousand documents every 15 minutes, during peak
traffic. We have a dedicated indexing machine and distribute portions of our
index across multiple machines, but you could still follow the pattern all
on one box, just with separate processes/threads. 

Even though lucene allows certain types of index operations to happen
concurrently with search activity, IMHO, if you can decouple the indexing
process from the searching process your system as a whole will be more
flexible and scalable with only a little extra maintenance overhead.

JAMES

--- Larry Ogrodnek <Lawrence@theladders.com> wrote:

> We have a similar setup, although probably only 1/5th the number of 
> documents and updates.  I'd suggest just making periodic index 
> backups.
> 
> I've been storing my index as follows:
> 
> <workdir>/<index-name>/data/ (lucene index
> directory)
> <workdir>/<index-name>/backups/
> 
> The "data" is what's passed into
> IndexWriter/IndexReader.  Additionally, I create/update a .last_update 
> file, which just contains the timestamp of when the last update was 
> started, so when the app starts up it only needs to retrieve updates 
> from the db since then.
> 
> Periodically the app copies the contents of data into a new directory 
> in backups named by the date/time, e.g.
> backups/2007-07-04.110051.  If
> needed, I can delete data and replace the contents with the latest 
> backup, and the app will only retrieve records updated since the 
> backup was made (using the backup's .last_update)...
> 
> I'd recommend making the complete index creation from scratch a normal 
> operation as much as possible (but you're right, for that number of 
> documents it will take awhile).  It's been really helpful here when 
> doing additional deploys for testing, or deciding we want to index 
> things differently, etc...
> 
> -larry
> 
> 
> -----Original Message-----
> From: Scott Smith [mailto:ssmith@mainstreamdata.com]
> 
> Sent: Thursday, July 06, 2006 1:48 PM
> To: lucene-user@jakarta.apache.org
> Subject: Managing a large archival (and constantly
> changing) database
> 
> I've been asked to do a project which provides full-text search for a 
> large database of articles.  The expectation is that most of the 
> articles are fairly small (<2k bytes).  There will be an initial 
> population of around 400,000 articles.  There will then be 
> approximately 2000 new articles added each day (they need to be added 
> in "real time"
> (within a few minutes of arrival), but will be spread out during the 
> day).  So, roughly another 700,000 articles each year.
> 
>  
> 
> I've read enough to believe that having a lucene database of several 
> million articles is doable.  And, adding 2000 articles per day 
> wouldn't seem to be that many.  My concern is the real-time nature of 
> the application.  I'm a bit nervous (perhaps without
> justification) at
> simply growing one monolithic lucene database. 
> Should there be a crash,
> the database will be unusable and I'll have to rebuild from scratch 
> (which, based on my experience, would be hours of time).
> 
>  
> 
> Some of my thoughts were:
> 
> 1)     having monthly databases and using
> MultiSearcher to search across
> them.  That way my exposure for a corrupted database is limited to 
> this month's database.  This would also seem to give me somewhat 
> better control--meaning a) if the search was generating lots of hits, 
> I could display the results a month at a time and not bury them with 
> output.  It would also spread their search CPU out better and not 
> prevent other individuals from doing a search.  If there were very few 
> results, I could sleep between each month's search and again, not lock 
> everyone else out from searches.
> 
> 2)     Have a "this month's" searchable and an
> "everything else"
> searchable.  At the beginning of each month, I would consolidate the 
> previous month's database into the "everything else"
> searchable.  This
> would give more consistent results for relevancy ranked searches.  
> But, it means that a bad search could return lots of results.
> 
>  
> 
> Has anyone else dealt with a similar problem?  Am I
> expecting too much
> from Lucene running on a single machine (or should I
> be looking at
> Hadoop?).  Any comments or links to previous
> discussions on this topic
> would be appreciated.
> 
>  
> 
> Scott
> 
>  
> 
>  
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0013_01C6A1AC.78B12540
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcwNzA5
MDIzNVowIwYJKoZIhvcNAQkEMRYEFNfEJt+m5Eu6xi5LknDg4JE4KLUsMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIXVcBtfOPMJdj+ffFxSBQvMgye49FjCHGsN
5hoU1S08OLAjO4mOQbRSM3RG3O2YziOeCoaXgjHOcZM+eP6MUE0qEaEvAD6mR++EAxpLtsCRqpft
gKhoY0kU+7xFv3PxwbhKR9imcgTBy7vyD0jn6AZp4UDYeSusWGLoA9GgSCLEgzerWo0Vfrm9Eayn
mcTIk5SRw3mBdua6ijuG7GCyX00unO3/7vFMR8OT24pd/U6Gy3nvTZZnSWLtwhIU70tpLxAHSyzh
ctKWnJjsB0C8cMmphuTA8cfnNu3LJ9SyCviRook83SY5PNKLYPZt3lAVtmyrECmrkmtFEK/oZRpz
IukAAAAAAAA=

------=_NextPart_000_0013_01C6A1AC.78B12540--


From java-user-return-21826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 09:07:45 2006
Return-Path: <java-user-return-21826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65961 invoked from network); 7 Jul 2006 09:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 09:07:45 -0000
Received: (qmail 3188 invoked by uid 500); 7 Jul 2006 09:07:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2755 invoked by uid 500); 7 Jul 2006 09:07:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2744 invoked by uid 99); 7 Jul 2006 09:07:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:07:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [158.36.80.149] (HELO pat.hia.no) (158.36.80.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 02:07:38 -0700
Received: from [158.36.80.150] (helo=mail-mx1.hia.no)
	by pat.hia.no with esmtp (Exim 4.44)
	id 1FymIs-0006tu-86
	for java-user@lucene.apache.org; Fri, 07 Jul 2006 11:07:14 +0200
Received: from localhost ([127.0.0.1] helo=mail-mx1.hia.no)
	by mail-mx1.hia.no with esmtp (Exim 4.44)
	id 1FymIs-0006VL-3b
	for java-user@lucene.apache.org; Fri, 07 Jul 2006 11:07:14 +0200
Received: from gnomade83.grm.hia.no ([128.39.50.83] helo=lettmelk.grm.hia.no)
	by mail-mx1.hia.no with esmtp (Exim 4.44)
	id 1FymIr-0006V0-BE
	for java-user@lucene.apache.org; Fri, 07 Jul 2006 11:07:13 +0200
Date: Fri, 07 Jul 2006 11:07:05 +0200
To: java-user@lucene.apache.org
Reply-To: aleksander.stensby@integrasco.no
From: "Aleksander M. Stensby" <aleksander.stensby@integrasco.no>
Organization: Integrasco A/S
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
MIME-Version: 1.0
References: <5a8b64620607061946r1ec727f2jd0b652b58f0ca46@mail.gmail.com>
Content-Transfer-Encoding: 7bit
Message-ID: <op.tca994aaoftp72@lettmelk.grm.hia.no>
In-Reply-To: <5a8b64620607061946r1ec727f2jd0b652b58f0ca46@mail.gmail.com>
User-Agent: Opera Mail/9.00 (Win32)
X-Antivirus: avast! (VPS 0627-2, 06.07.2006), Outbound message
X-Antivirus-Status: Clean
Subject: Re: Lucene search formula
X-Spam-Checker-Version: SpamAssassin 3.0.6 (2005-12-07) on pat.hia.no
X-Spam-Level: 
X-SA-Exim-Version: 4.2 (built Mon, 31 Jan 2005 16:42:16 +0100)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.5 required=5.0 tests=GREYLIST_ISWHITE 
	autolearn=failed version=3.0.6
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have written a paper about Topic Detection and Tracking, where I also  
explain the TF-IDF-scheme. If you like, i can send you the paper.

Aleksander

On Fri, 07 Jul 2006 04:46:52 +0200, Rajiv Roopan <rajiv.roopan@gmail.com>  
wrote:

> Hello,
>    I was recently looking thru the lucene in action book and came across  
> the
> scoring formula. I was wondering if the formula has changed since the  
> book
> was written?
>
>   Also was wondering if someone can breifly explain what the IDF(t) term  
> in
> the formula means? In the book it says that it's the inverse document
> frequency of the term but doesn't explain beyond that?
>
> thanks,
> rajiv



-- 
Aleksander M. Stensby
Software Developer
Integrasco A/S
aleksander.stensby@integrasco.no
Tlf.: +47 41 22 82 72

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 10:14:35 2006
Return-Path: <java-user-return-21827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82801 invoked from network); 7 Jul 2006 10:14:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 10:14:35 -0000
Received: (qmail 93904 invoked by uid 500); 7 Jul 2006 10:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93864 invoked by uid 500); 7 Jul 2006 10:14:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93849 invoked by uid 99); 7 Jul 2006 10:14:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 03:14:28 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 03:14:27 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id 655FA368049
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 12:14:06 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 19621-06 for <java-user@lucene.apache.org>;
	Fri, 7 Jul 2006 12:14:01 +0200 (CEST)
Received: from localhost (dslb-084-057-177-196.pools.arcor-ip.net [84.57.177.196])
	by flacons.org (flacons.org) with ESMTP id 11B9236801E
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 12:13:57 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: addIndexes getting slower and slower plus eating up Mem
Date: Fri, 7 Jul 2006 12:13:55 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607071213.55963.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy, 
I use the following code to index about 1 Million Documents to a empty index:
=============
	private static void do_searchindex(Connection target) throws 
SQLException,IOException {
		int i=1164;
		PostIndexer.createIndexDir();	//Creates Index-Director
		IndexWriter fsWriter = new IndexWriter(PostIndexer.getIndexDir(), 
PostIndexer.getAnalyser(), false);
		while (do_searchindex(fsWriter,target,i)>0) {
			i++;
		}
		fsWriter.close();
	}

	private static int do_searchindex(IndexWriter writer,Connection ctarget,int 
page) throws SQLException,IOException {
		ResultSet rs = ctarget.createStatement().executeQuery("SELECT 
postid,db_post.threadid,posttext,db_thread.threadtitle FROM db_post LEFT JOIN 
db_thread ON (db_thread.threadid=db_post.threadid) ORDER BY postid DESC 
LIMIT "+(page*500)+",500 ;");
		int c=0;
		
		RAMDirectory ramDir = new RAMDirectory();
		IndexWriter ramWriter = new IndexWriter(ramDir, PostIndexer.getAnalyser(), 
true);
		
		while (rs.next()) {
			
PostIndexer.addToIndex(ramWriter,rs.getInt("postid"),rs.getString("posttext"),rs.getString("threadtitle"));
			c++;
		}
		writer.addIndexes(new Directory[] { ramDir });
		ramWriter.close();
		
		rs.close();
		System.out.println("Did Page "+page);
		return(c);		
	}
=================

The Code for "PostIndex.addToIndex" is:
===============
Document doc = new Document();
		Field title = new 
Field("title",threadtitle,Field.Store.NO,Field.Index.TOKENIZED,Field.TermVector.NO);
		title.setBoost(2);
		
		doc.add(title);
		doc.add(new 
Field("text",posttext,Field.Store.NO,Field.Index.TOKENIZED,Field.TermVector.YES));
		doc.add(new Field("id",""+postid,Field.Store.YES, 
Field.Index.UN_TOKENIZED));
					
		writer.addDocument(doc);	
============

When I run this code the first 500 Entries get added in about 2 seconds. But 
for the 1167*500 to (1167+1)*500 Entries it takes more than 10 Minutes. Also 
the RAM-Usage is increasing dramatically. Is this a normal behaviour, or is 
it a mistake in my code or is it a bug in Lucene? I remeber someone here on 
the list talking about this problem but cant find the post anymore.
Thanks
-- 
Dominik Bruhn
mailto: dominik@dbruhn.de
http://www.dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 10:23:43 2006
Return-Path: <java-user-return-21828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86209 invoked from network); 7 Jul 2006 10:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 10:23:43 -0000
Received: (qmail 9267 invoked by uid 500); 7 Jul 2006 10:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8940 invoked by uid 500); 7 Jul 2006 10:23:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8928 invoked by uid 99); 7 Jul 2006 10:23:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 03:23:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.35] (HELO web26013.mail.ukl.yahoo.com) (217.146.177.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 07 Jul 2006 03:23:34 -0700
Received: (qmail 86181 invoked by uid 60001); 7 Jul 2006 10:23:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=n0Fa5N23LNAbsSGamRwCL5NSa8LEm0+9QNgHAlmFTn/8c+cz8v8AV2PQeQbL2DJProd8rKX2oHBmHH8hv/0wF2/6A26Nuz4rDsJ8upuAcMUbdO7JaxpB28DLQ7UUF3lnOlONX0d8OIaf6Z86G3lAps7IFDPQe11ao4Vkllx1l/U=  ;
Message-ID: <20060707102312.86179.qmail@web26013.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Fri, 07 Jul 2006 10:23:12 GMT
Date: Fri, 7 Jul 2006 10:23:12 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: addIndexes getting slower and slower plus eating up Mem
To: java-user@lucene.apache.org
In-Reply-To: <200607071213.55963.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The answer is because addIndexes() currently always does an optimize post-merge. If I recall correctly optimize() will create a complete copy of the existing index during the optimize process then delete the old one so this shouldn't be done too often.

Out of interest, why are you using a RAMDirectory here? An IndexWriter uses one internally of size IndexWriter.setMaxBufferedDocs so you get the benefits of buffering automatically when writing to a File-based directory.

Cheers
Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 10:39:08 2006
Return-Path: <java-user-return-21829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91539 invoked from network); 7 Jul 2006 10:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 10:39:07 -0000
Received: (qmail 38876 invoked by uid 500); 7 Jul 2006 10:39:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38680 invoked by uid 500); 7 Jul 2006 10:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38669 invoked by uid 99); 7 Jul 2006 10:39:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 03:39:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 03:39:00 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id B31D136808F
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 12:38:39 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 24514-05 for <java-user@lucene.apache.org>;
	Fri, 7 Jul 2006 12:38:34 +0200 (CEST)
Received: from localhost (dslb-084-057-177-196.pools.arcor-ip.net [84.57.177.196])
	by flacons.org (flacons.org) with ESMTP id 58BD4368071
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 12:38:32 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Re: addIndexes getting slower and slower plus eating up Mem
Date: Fri, 7 Jul 2006 12:38:31 +0200
User-Agent: KMail/1.9.3
References: <20060707102312.86179.qmail@web26013.mail.ukl.yahoo.com>
In-Reply-To: <20060707102312.86179.qmail@web26013.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607071238.31602.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy,

On Friday 07 July 2006 12:23 mark harwood wrote:
> Out of interest, why are you using a RAMDirectory here? An IndexWriter uses
> one internally of size IndexWriter.setMaxBufferedDocs so you get the
> benefits of buffering automatically when writing to a File-based directory.
realy? I read the trick here and so I did it. I'll try without it to see if 
its a difference!

Thanks
-- 
Dominik Bruhn
mailto: dominik@dbruhn.de
http://www.dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 10:54:47 2006
Return-Path: <java-user-return-21830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95288 invoked from network); 7 Jul 2006 10:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 10:54:46 -0000
Received: (qmail 61230 invoked by uid 500); 7 Jul 2006 10:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61001 invoked by uid 500); 7 Jul 2006 10:54:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60990 invoked by uid 99); 7 Jul 2006 10:54:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 03:54:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 03:54:39 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FynyU-0007H1-Oy
	for java-user@lucene.apache.org; Fri, 07 Jul 2006 03:54:18 -0700
Message-ID: <5215244.post@talk.nabble.com>
Date: Fri, 7 Jul 2006 03:54:18 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: modify existing non-indexed field
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Is it possible to modify a stored field but not indexed? for example, if I
have a field like this:
new Field("address", address, Field.Store.YES, Field.Index.NO)

and I want to modify it like this:
hits.doc(i).getField("address").set("11 Diana Street");

Is it possible?
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5215244
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 13:49:10 2006
Return-Path: <java-user-return-21831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60435 invoked from network); 7 Jul 2006 13:49:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 13:49:09 -0000
Received: (qmail 45035 invoked by uid 500); 7 Jul 2006 13:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44863 invoked by uid 500); 7 Jul 2006 13:49:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44852 invoked by uid 99); 7 Jul 2006 13:49:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 06:49:03 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 06:49:01 -0700
Received: by py-out-1112.google.com with SMTP id w49so3259083pyg
        for <java-user@lucene.apache.org>; Fri, 07 Jul 2006 06:48:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JRWVrf+9l5pSOTyWcs4BXZp70icoSQ62VXQSHaT5Pq/8SfyxQe2SedLDl5w6VVJ6owIZCtHV7rqgEFP+gYOv0Ht1XMEXb13QBjl4+6peskI8DdeAcSz7nob5oVoBnv7ZUXJ1D2mp+LjDVYMl68SVMSvWQv6zdMWmrq/1bO0OAWs=
Received: by 10.35.85.1 with SMTP id n1mr2163806pyl;
        Fri, 07 Jul 2006 06:48:41 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Fri, 7 Jul 2006 06:48:41 -0700 (PDT)
Message-ID: <359a92830607070648j4a2e0157v7e9aa2dfde2c4db8@mail.gmail.com>
Date: Fri, 7 Jul 2006 09:48:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <5215244.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21785_13250492.1152280121257"
References: <5215244.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21785_13250492.1152280121257
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think you've done anything to the index. This code is really
equivalent to something like

Field field = hits.doc(i).getField('address");
field.set("11 Diana Street");

You've changed the value of the field instance, but that is essentially a
local variable (even though not explicit in your original snippet).

It's been discussed often that Lucene doesn't allow in-place modifications
of a document, you have to drop and re-add it. If your snippet worked, it'd
allow in-place modifications and I'd be surprised if the experts knew that
but never mentioned it to us common folk <G>.....

Of course I've been totally wrong before....

Best
Erick

------=_Part_21785_13250492.1152280121257--

From java-user-return-21832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 14:21:23 2006
Return-Path: <java-user-return-21832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71381 invoked from network); 7 Jul 2006 14:21:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 14:21:23 -0000
Received: (qmail 3006 invoked by uid 500); 7 Jul 2006 14:21:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2984 invoked by uid 500); 7 Jul 2006 14:21:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2969 invoked by uid 99); 7 Jul 2006 14:21:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:21:17 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:21:10 -0700
Received: by ug-out-1314.google.com with SMTP id u2so561893uge
        for <java-user@lucene.apache.org>; Fri, 07 Jul 2006 07:20:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=ScPJ5b9TLmj9NEXj5SJLiG0RgR47o6480I51CepXLBCm8Jq/IWo/4ql/gaVvRRZrSCi/wbu/3DVJHeJl2CPZZpZv7wAwZTxZ8I7Bq3vyB6fOmVsctBQUw0sh/xZ+eq+yXhDRvzeGgRqLMlAqtBJqi5mPERsF+okd+Cr/MX25eN8=
Received: by 10.67.24.13 with SMTP id b13mr2069994ugj;
        Fri, 07 Jul 2006 07:20:42 -0700 (PDT)
Received: by 10.67.91.5 with HTTP; Fri, 7 Jul 2006 07:20:42 -0700 (PDT)
Message-ID: <ab0709bf0607070720g4c6d5719qa57502aaf839d05e@mail.gmail.com>
Date: Fri, 7 Jul 2006 10:20:42 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Modifying the standard analyzer
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52721_1941725.1152282042604"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_52721_1941725.1152282042604
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have added support for sent/para prox search by modifying the notspan
query. In doing so I have changed the standard analyzer javacc .jj file.
Here is my problem:

the javacc generated StandardTokenizer next() method is declared to throw a
ParseException

  final public org.apache.lucene.analysis.Token next() throws
ParseException, IOException {

unfortunately, org.apache.lucene.analysis.Token next() only throws an
IOException.

I do not understand this problem because the code seemed to work fine before
I changed the .jj file even though the StandardTokenizer next() method seems
to throw a ParseException in the original lucene code. Why does it compile
fine to begin with?

I have seen mention of this in my searching but never an answer. Right now I
am just eating the ParseException in the next() method but this is a pain
because I have to write in the code to eat it everytime I gen the javacc
files. What a pain for the next guy who has to mess with my code.

Any ideas?

Thanks,

mark

------=_Part_52721_1941725.1152282042604--

From java-user-return-21833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 14:32:45 2006
Return-Path: <java-user-return-21833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77326 invoked from network); 7 Jul 2006 14:32:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 14:32:45 -0000
Received: (qmail 22316 invoked by uid 500); 7 Jul 2006 14:32:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22236 invoked by uid 500); 7 Jul 2006 14:32:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21860 invoked by uid 99); 7 Jul 2006 14:32:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:32:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.193.231.187] (HELO mail.cbrese.com) (66.193.231.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:32:23 -0700
Received: by mail.cbrese.com (Postfix, from userid 1003)
	id E19B1ABED87; Fri,  7 Jul 2006 07:31:56 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0-gr0 (2005-09-13) on newcastle
X-Spam-Level: 
Received: from cpe-70-95-226-234.san.res.rr.com (cpe-70-95-226-234.san.res.rr.com [70.95.226.234])
	by mail.cbrese.com (Postfix) with ESMTP id 4F348A6EF95
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 07:31:52 -0700 (PDT)
From: Jason Calabrese <mail@jasoncalabrese.com>
To: java-user@lucene.apache.org
Subject: Re: Inserting a document into an index at a specified position
Date: Fri, 7 Jul 2006 07:42:28 -0700
User-Agent: KMail/1.9.1
References: <200607051706.29317.mail@jasoncalabrese.com>
In-Reply-To: <200607051706.29317.mail@jasoncalabrese.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607070742.28829.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.9 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0-gr0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

All,

I sent this the other day, but didn't get any responses.  I'm hoping that it 
was just missed, so I'm trying again.

There has to be a better way to to insert a document in to an index then 
reindexing everything.

--Jason

On Wednesday 05 July 2006 5:06 pm, Jason Calabrese wrote:
> All,
>
> For performance reasons we keep our index of over a million documents
> ordered alphabeticaly.  This way for an alpha sort we can just use the
> index order. This works very good, but I'm now looking for a way to insert
> a single document to the index in the correct position.
>
> Is there any standard way to do this?
>
> --Jason

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 14:38:30 2006
Return-Path: <java-user-return-21834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79121 invoked from network); 7 Jul 2006 14:38:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 14:38:30 -0000
Received: (qmail 32461 invoked by uid 500); 7 Jul 2006 14:38:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32094 invoked by uid 500); 7 Jul 2006 14:38:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32083 invoked by uid 99); 7 Jul 2006 14:38:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:38:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.61.29.3] (HELO hydra.dcs.bbk.ac.uk) (193.61.29.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 07:38:14 -0700
Received: from pczz (dhcp42.dcs.bbk.ac.uk [193.61.29.132])
	by hydra.dcs.bbk.ac.uk (8.13.6+Sun/8.13.6) with ESMTP id k67EasTt022550;
	Fri, 7 Jul 2006 15:36:54 +0100 (BST)
From: "zheng" <zheng@dcs.bbk.ac.uk>
To: <java-user@lucene.apache.org>,
        "'Otis Gospodnetic'" <otis_gospodnetic@yahoo.com>
Subject: RE: Lucene search formula
Date: Fri, 7 Jul 2006 15:36:44 +0100
Message-ID: <003a01c6a1d2$c53c5f30$122c3dc1@dcs.bbk.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
thread-index: Acahg8G/Xah6vEDSRDqYY975WigsJAAS5REg
In-Reply-To: <20060707051021.92522.qmail@web50302.mail.yahoo.com>
X-Scanned-By: MIMEDefang 2.56
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Can somebody explain the lengthNorm, queryNorm and coord in lucene?
lengthNorm is the (term freq)/(total terms number) or (term freq)/(max term
freq) or something else. queryNorm is the (term squared
weight)/(sumOfSqureWeights)? Why we still need queryNorm when it will not
affect the score for a certain query? How to calculate the coord value?
Thanks.

ZZ

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: 07 July 2006 06:10
To: java-user@lucene.apache.org
Subject: Re: Lucene search formula

The formula hasn't changed (but the first printing of the book had a portion
of it missing, check javadoc for (Default?)Similarity for the real and
current formula).

Here is a simple IDF example, or at least how I "visualize" IDF.
You have an index with a bunch of documents and terms in it.  A term T can
appear some number of times in this index, say N times.  You can think of
the IDF of the term T is "1/N" (not really 1/N, but....
log(numDocs/(docFreq+1)) + 1).  The more frequent the term in the index, the
smaller its weight (the less important it is during scoring).

Otis

----- Original Message ----
From: Rajiv Roopan <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, July 6, 2006 10:46:52 PM
Subject: Lucene search formula

Hello,
   I was recently looking thru the lucene in action book and came across the
scoring formula. I was wondering if the formula has changed since the book
was written?

  Also was wondering if someone can breifly explain what the IDF(t) term in
the formula means? In the book it says that it's the inverse document
frequency of the term but doesn't explain beyond that?

thanks,
rajiv




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 15:06:45 2006
Return-Path: <java-user-return-21835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88844 invoked from network); 7 Jul 2006 15:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 15:06:44 -0000
Received: (qmail 89143 invoked by uid 500); 7 Jul 2006 15:06:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89116 invoked by uid 500); 7 Jul 2006 15:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89105 invoked by uid 99); 7 Jul 2006 15:06:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 08:06:38 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 08:06:20 -0700
Received: by py-out-1112.google.com with SMTP id w49so3288311pyg
        for <java-user@lucene.apache.org>; Fri, 07 Jul 2006 08:05:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uF7cvkTRJLQ2nNTB2p929DSBwVFdXfxaPjsx6/G4MdKMUgWMu7nYQuZGzC//d5KTiHp/I3Q/yXLRW8RgJH7/UVuRJKu//F4ux36NDaFTWn6WgBGn0c2PatCsq7uDVDdrWeHAUageMY3Y48YPFjxJqxEnHlm6HUsfCYjRfpsbXqw=
Received: by 10.35.106.15 with SMTP id i15mr2245553pym;
        Fri, 07 Jul 2006 08:05:54 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Fri, 7 Jul 2006 08:05:53 -0700 (PDT)
Message-ID: <359a92830607070805h46f852e5r3e04d296b6118ead@mail.gmail.com>
Date: Fri, 7 Jul 2006 11:05:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inserting a document into an index at a specified position
In-Reply-To: <200607070742.28829.mail@jasoncalabrese.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23151_13122801.1152284753694"
References: <200607051706.29317.mail@jasoncalabrese.com>
	 <200607070742.28829.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_23151_13122801.1152284753694
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

When you say you keep your documents ordered alphabetically, it's confusing
to me. Are you saying that you pre-sort all your documents then insert them
one after another so that automatically-generated internal Lucene ID maps
exactly to the alphabetical ordering? That is, for any document IDs D1 and
D2 and any documents C1 and C2 (where C1 and C2 are the alphabetical
representations of the documents, whatever that means) if D1 < D2 then C1 <
C2?

The short answer is that you can't insert a document into a Lucene index and
have any control whatsoever about the assigned document ID. The assigned
document ID is always greater than the maximum document ID already in your
index.

But it doesn't make sense to try. You have documents A, B, D that you index.
They get IDs 1, 2, 3. Now you want to index document C. What sort of
document ID would you expect? 2.5? Or do I completely misunderstand your
problem?

Would it work to just index a field for each document that contained the
alphabetical representation and use that for retrieval ordering? I *think*
you can use a FilteredTermEnum with a new Term("field", "") to enumerate all
the terms in an index ( They are guaranteed to be in lexical order.....).
Then you let lucene do your sorting... I'm a little fuzzy on how to go from
there to a document, but I suspect there's a way.

Hope this helps
Erick

------=_Part_23151_13122801.1152284753694--

From java-user-return-21836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 15:35:00 2006
Return-Path: <java-user-return-21836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97140 invoked from network); 7 Jul 2006 15:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 15:34:59 -0000
Received: (qmail 31705 invoked by uid 500); 7 Jul 2006 15:34:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31667 invoked by uid 500); 7 Jul 2006 15:34:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31656 invoked by uid 99); 7 Jul 2006 15:34:53 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 08:34:53 -0700
Content-class: urn:content-classes:message
Subject: Searcher performance
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A1DA.C85DE578"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Fri, 7 Jul 2006 16:34:08 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE7F8895@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searcher performance
Thread-Index: Acah2snTVUZtm+P4RZKAvkrvAGxEHw==
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A1DA.C85DE578
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

What performs best across multiple indexes:

=20

Each index with an IndexReader with an IndexSearcher on top and the
searchers linked with a ParallelMultiSearcher

=20

Or

=20

Each index with an IndexReader linked with a MultiReader and an
IndexSearcher on top

=20

Many Thanks

=20

Mike

=20

www.ardentia.com the home of NetSearch

=20


------_=_NextPart_001_01C6A1DA.C85DE578--

From java-user-return-21837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 15:41:35 2006
Return-Path: <java-user-return-21837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98765 invoked from network); 7 Jul 2006 15:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 15:41:35 -0000
Received: (qmail 45310 invoked by uid 500); 7 Jul 2006 15:41:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45152 invoked by uid 500); 7 Jul 2006 15:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45139 invoked by uid 99); 7 Jul 2006 15:41:28 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.163.178.112] (HELO web34114.mail.mud.yahoo.com) (66.163.178.112)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 07 Jul 2006 08:41:28 -0700
Received: (qmail 80735 invoked by uid 60001); 7 Jul 2006 15:40:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=oqpHEOO/RGESrmbmLZCcjItze4Xll3y2lAFEsuA50tuvWnT3L48RAlZos/7DmZGtkwEHxPnZen8MqsoGM/V+ljnLCuS2d5xwvc8VWRqwI8FwJp7LB/tJ0ReJlkbKiTE973PPo95SzipWKzPUfOaRFlVdvDh6fim/4FWWiRpEAl0=  ;
Message-ID: <20060707154003.80733.qmail@web34114.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34114.mail.mud.yahoo.com via HTTP; Fri, 07 Jul 2006 08:40:02 PDT
Date: Fri, 7 Jul 2006 08:40:02 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: RE: Managing a large archival (and constantly changing) database
To: java-user@lucene.apache.org
In-Reply-To: <20060707090235.D75B6187BC@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--- "Rob Staveley (Tom)" <rstaveley@seseit.com> wrote:

> Doug says:
> 
> > 1. On the index master, periodically checkpoint
> the index. Every minute or
> so the IndexWriter is closed and a 'cp -lr index
> index.DATE' command is
> executed from Java, where DATE is the current date
> and time. This
> efficiently makes a copy of the index when its in a
> consistent state by
> constructing a tree of hard links. If Lucene
> re-writes any files (e.g., the
> segments file) a new inode is created and the copy
> is unchanged. 
> 
> How can that be so? When the segments file is
> re-written it will surely
> clobber the copy rather than creating a new INODE,
> because it has the same
> name... wouldn't it?
>
> 
> What makes it different from (say)...
> 
> 	mkdir x
> 	echo original > x/x.txt
> 	cp -lr x x.copy
> 	echo update > x/x.txt
> 	diff x/x.txt x.copy/x.txt
> 
> ...where x.copy/x.txt has "update" rather than
> "original" (certainly on
> Linux).

I agree in your example, both x/x.txt and x.copy/x.txt
will contain "update"; however if the lucene internals
do this:

 	mkdir x
 	echo original > x/x.txt
 	cp -lr x x.copy
-->     rm x/x.txt
 	echo update > x/x.txt
 	diff x/x.txt x.copy/x.txt

Then x/x.txt will have a different inode from
x.copy/x.txt and their contents will be differ right?

JAMES
> 
> -----Original Message-----
> From: James Pine [mailto:general_nogi@yahoo.com] 
> Sent: 06 July 2006 20:09
> To: java-user@lucene.apache.org
> Subject: RE: Managing a large archival (and
> constantly changing) database
> 
> Hey,
> 
> I found this thread to be very useful when deciding
> upon an indexing
> strategy. 
> 
>
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12700.html
> 
> The system I work on has 3 million or so documents
> and it was (until a
> non-lucene performance issue came up) setup to
> add/delete new documents
> every 15 minutes in a similar manner as described in
> the thread. We were
> adding/deleting a few thousand documents every 15
> minutes, during peak
> traffic. We have a dedicated indexing machine and
> distribute portions of our
> index across multiple machines, but you could still
> follow the pattern all
> on one box, just with separate processes/threads. 
> 
> Even though lucene allows certain types of index
> operations to happen
> concurrently with search activity, IMHO, if you can
> decouple the indexing
> process from the searching process your system as a
> whole will be more
> flexible and scalable with only a little extra
> maintenance overhead.
> 
> JAMES
> 
> --- Larry Ogrodnek <Lawrence@theladders.com> wrote:
> 
> > We have a similar setup, although probably only
> 1/5th the number of 
> > documents and updates.  I'd suggest just making
> periodic index 
> > backups.
> > 
> > I've been storing my index as follows:
> > 
> > <workdir>/<index-name>/data/ (lucene index
> > directory)
> > <workdir>/<index-name>/backups/
> > 
> > The "data" is what's passed into
> > IndexWriter/IndexReader.  Additionally, I
> create/update a .last_update 
> > file, which just contains the timestamp of when
> the last update was 
> > started, so when the app starts up it only needs
> to retrieve updates 
> > from the db since then.
> > 
> > Periodically the app copies the contents of data
> into a new directory 
> > in backups named by the date/time, e.g.
> > backups/2007-07-04.110051.  If
> > needed, I can delete data and replace the contents
> with the latest 
> > backup, and the app will only retrieve records
> updated since the 
> > backup was made (using the backup's
> .last_update)...
> > 
> > I'd recommend making the complete index creation
> from scratch a normal 
> > operation as much as possible (but you're right,
> for that number of 
> > documents it will take awhile).  It's been really
> helpful here when 
> > doing additional deploys for testing, or deciding
> we want to index 
> > things differently, etc...
> > 
> > -larry
> > 
> > 
> > -----Original Message-----
> > From: Scott Smith
> [mailto:ssmith@mainstreamdata.com]
> > 
> > Sent: Thursday, July 06, 2006 1:48 PM
> > To: lucene-user@jakarta.apache.org
> > Subject: Managing a large archival (and constantly
> > changing) database
> > 
> > I've been asked to do a project which provides
> full-text search for a 
> > large database of articles.  The expectation is
> that most of the 
> > articles are fairly small (<2k bytes).  There will
> be an initial 
> > population of around 400,000 articles.  There will
> then be 
> > approximately 2000 new articles added each day
> (they need to be added 
> > in "real time"
> > (within a few minutes of arrival), but will be
> spread out during the 
> > day).  So, roughly another 700,000 articles each
> year.
> > 
> >  
> > 
> > I've read enough to believe that having a lucene
> database of several 
> > million articles is doable.  And, adding 2000
> articles per day 
> > wouldn't seem to be that many.  My concern is the
> real-time nature of 
> > the application.  I'm a bit nervous (perhaps
> without
> > justification) at
> > simply growing one monolithic lucene database. 
> > Should there be a crash,
> > the database will be unusable and I'll have to
> rebuild from scratch 
> > (which, based on my experience, would be hours of
> time).
> > 
> >  
> > 
> > Some of my thoughts were:
> > 
> > 1)     having monthly databases and using
> > MultiSearcher to search across
> > them.  That way my exposure for a corrupted
> database is limited to 
> > this month's database.  This would also seem to
> give me somewhat 
> > better control--meaning a) if the search was
> generating lots of hits, 
> > I could display the results a month at a time and
> not bury them with 
> > output.  It would also spread their search CPU out
> better and not 
> > prevent other individuals from doing a search.  If
> there were very few 
> > results, I could sleep between each month's search
> and again, not lock 
> > everyone else out from searches.
> > 
> > 2)     Have a "this month's" searchable and an
> > "everything else"
> > searchable.  At the beginning of each month, I
> would consolidate the 
> > previous month's database into the "everything
> else"
> > searchable.  This
> > would give more consistent results for relevancy
> ranked searches.  
> > But, it means that a bad search could return lots
> of 
=== message truncated ===


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 16:12:35 2006
Return-Path: <java-user-return-21838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5425 invoked from network); 7 Jul 2006 16:12:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 16:12:35 -0000
Received: (qmail 86791 invoked by uid 500); 7 Jul 2006 16:12:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86358 invoked by uid 500); 7 Jul 2006 16:12:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86336 invoked by uid 99); 7 Jul 2006 16:12:29 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.193.231.187] (HELO mail.cbrese.com) (66.193.231.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 09:12:28 -0700
Received: by mail.cbrese.com (Postfix, from userid 1003)
	id 2D969AE9749; Fri,  7 Jul 2006 09:11:37 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0-gr0 (2005-09-13) on newcastle
X-Spam-Level: 
X-Spam-Status: No, score=-1.9 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0-gr0
Received: from [192.168.0.123] (wsip-70-168-51-174.sd.sd.cox.net [70.168.51.174])
	by mail.cbrese.com (Postfix) with ESMTP id 4900DAE9749
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 09:11:32 -0700 (PDT)
From: Jason Calabrese <mail@jasoncalabrese.com>
To: java-user@lucene.apache.org
Subject: Re: Inserting a document into an index at a specified position
Date: Fri, 7 Jul 2006 09:10:17 -0700
User-Agent: KMail/1.9.1
References: <200607051706.29317.mail@jasoncalabrese.com> <200607070742.28829.mail@jasoncalabrese.com> <359a92830607070805h46f852e5r3e04d296b6118ead@mail.gmail.com>
In-Reply-To: <359a92830607070805h46f852e5r3e04d296b6118ead@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-6"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607070910.17505.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> When you say you keep your documents ordered alphabetically, it's confusing
> to me. Are you saying that you pre-sort all your documents then insert them
> one after another so that automatically-generated internal Lucene ID maps
> exactly to the alphabetical ordering? That is, for any document IDs D1 and
> D2 and any documents C1 and C2 (where C1 and C2 are the alphabetical
> representations of the documents, whatever that means) if D1 < D2 then C1 <
> C2?

Yes, this is a pre-sort. For our application we have some fairly large result 
sets and using the standard sort on a name field was too slow.  By 
pre-sorting before we index we can make sure that all the docs are inserted 
in alpha order, and then sort them by index order just as fast or faster than 
the standard relvance sort.

This:
Hits hits = searcher.search(query, Sort.INDEXORDER);

is much faster than:
Hits hits = searcher.search(query, new Sort("fullname"));

> The short answer is that you can't insert a document into a Lucene index
> and have any control whatsoever about the assigned document ID. The
> assigned document ID is always greater than the maximum document ID already
> in your index.

I know that there is no direct way to insert a doc a at a specified position 
with a single IndexWriter method, but it seems that there is a better way 
then reindexing everything.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 17:04:35 2006
Return-Path: <java-user-return-21839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20837 invoked from network); 7 Jul 2006 17:04:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:04:35 -0000
Received: (qmail 65782 invoked by uid 500); 7 Jul 2006 17:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65310 invoked by uid 500); 7 Jul 2006 17:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65298 invoked by uid 99); 7 Jul 2006 17:04:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:04:29 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 07 Jul 2006 10:04:17 -0700
Received: (qmail 98347 invoked by uid 60001); 7 Jul 2006 17:02:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=6CQ5W038l1/a2DkBGW9DyShS+5VCA9PvrLNCOcWNjQYoCFQA84ICyPG3wjtO1kR247j75RFJyZp6vLo9lYHlqsGJh033eeKQrzr9Ip5w/D9xLB+WhOQUYNvSXPCxDn0JbWIFbY4rghD9T/UWkt69GdzRlJ3dV4wcHwgp4a/uRUQ=  ;
Message-ID: <20060707170234.98344.qmail@web50301.mail.yahoo.com>
Received: from [72.229.167.99] by web50301.mail.yahoo.com via HTTP; Fri, 07 Jul 2006 10:02:34 PDT
Date: Fri, 7 Jul 2006 10:02:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
In-Reply-To: <5215244.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, you can do something like that, but of course you have to delete the old Document, and add the new, modified oneto the index, too.  I do something like that on one of the Simpy.com indices and it works nicely.

Otis

----- Original Message ----
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Sent: Friday, July 7, 2006 6:54:18 AM
Subject: modify existing non-indexed field


Is it possible to modify a stored field but not indexed? for example, if I
have a field like this:
new Field("address", address, Field.Store.YES, Field.Index.NO)

and I want to modify it like this:
hits.doc(i).getField("address").set("11 Diana Street");

Is it possible?
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5215244
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 17:13:11 2006
Return-Path: <java-user-return-21840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22613 invoked from network); 7 Jul 2006 17:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:13:11 -0000
Received: (qmail 76441 invoked by uid 500); 7 Jul 2006 17:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76279 invoked by uid 500); 7 Jul 2006 17:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76268 invoked by uid 99); 7 Jul 2006 17:13:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:13:05 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 07 Jul 2006 10:12:55 -0700
Received: (qmail 25082 invoked by uid 60001); 7 Jul 2006 17:10:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=YsccDWPJbVhDBCk3w8TSTE5hORx3XcpNL6F7ytClIbfUBElIk4XbaCvq64uxFVnk2b/kR2DtmIiBZE6qrJcBCo0rYYOpcMZja79T/YWzdTNYivy6QDQEyNbSbq8DMFtqB4WfpipliuBheSqcVuWNsWWWFIaYzTfebe51d+rWKN0=  ;
Message-ID: <20060707171005.25080.qmail@web50310.mail.yahoo.com>
Received: from [72.229.167.99] by web50310.mail.yahoo.com via HTTP; Fri, 07 Jul 2006 10:10:05 PDT
Date: Fri, 7 Jul 2006 10:10:05 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Berkeley DB JEDirectory Performance
To: java-user@lucene.apache.org
In-Reply-To: <D4E368C6FE4C57499CBCE2A0B476C8B05CE777@nebukadnezar.insiders.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Jo.  You may want to look for Andi Vajda's email with performance numbers, too.  I think he did send them out when he first contributed DbDirectory, and I don't recall the numbers being this bad.

Otis

----- Original Message ----
From: Johannes Christen <j.christen@insiders.de>
To: java-user@lucene.apache.org
Sent: Thursday, July 6, 2006 11:06:45 AM
Subject: Berkeley DB JEDirectory Performance

Hi all.
 
I just want to share my experience with the Berkeley DB JEDirectory
implementation from the contrib. area. I spend two days evaluating and
testing it and found out that it does work, but has very bad performance
and very high disk requirements for medium size document volume. 
 
I indexed about 78000 documents (DPA news items) in the FSDirectory and
the JEDirectory, and here are the results:
 
Disk usage (index size):
FSDirectory: 322 MB
JEDirectory: 4650 MB
 
Indexing Performance:
FSDirectory: 84 minutes
JEDirectory: 402 minutes
 
Searching:
Initial opening of the JEDirectory took about 45 minutes.
The searching itself was ok, but still about 1.5 times slower than with
the FSDirectory.
 
Ok. I hope than helped people who consider using the Berkeley DB
directory implementation in their application. It may do a good job if
you want to use transactions in small environments, but if the amount of
documents is getting big I wouldn't recommend the JEDirectory
implementation.
 
Bye for now
 
    Jo Christen
 
 




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 17:29:21 2006
Return-Path: <java-user-return-21841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27578 invoked from network); 7 Jul 2006 17:29:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:29:20 -0000
Received: (qmail 96575 invoked by uid 500); 7 Jul 2006 17:29:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96532 invoked by uid 500); 7 Jul 2006 17:29:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96504 invoked by uid 99); 7 Jul 2006 17:29:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:29:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:29:07 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2B3A75B7A5; Fri,  7 Jul 2006 10:28:12 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 24FF97F403
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 10:28:12 -0700 (PDT)
Date: Fri, 7 Jul 2006 10:28:12 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Nutch- Better than Lucene?
In-Reply-To: <7451DFE76F314044AA7B34ABD08C97C143DA85@srit_mail.renaissance-it.com>
Message-ID: <Pine.LNX.4.58.0607071022470.11958@hal.rescomp.berkeley.edu>
References: <7451DFE76F314044AA7B34ABD08C97C143DA85@srit_mail.renaissance-it.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Subject: Nutch- Better than Lucene?

: > http://wiki.apache.org/nutch/Nutch_-_The_Java_Search_Engine

Asking if Nutch is better then Lucene is like asking if a Truck is better
then a Combustion Engine -- you can't compare them.  A truck is a vehicle
tht does stuff, and it gets it's power from a Combustion Engine, but the
engine itself could actually be used to power a great many other things
(not just vehicles)

Lucene is a Java IR Library or a "search library" if you will -- Nutch
uses the Lucene library to power the searching it does, but there is a lot
of other stuff going on in Butch (crawling for example) ... if you wnat a
"search engine" then Nutch is your man, if you want a "search library"
then use Lucene directly.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 17:32:09 2006
Return-Path: <java-user-return-21842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30020 invoked from network); 7 Jul 2006 17:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 17:32:09 -0000
Received: (qmail 7247 invoked by uid 500); 7 Jul 2006 17:32:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7219 invoked by uid 500); 7 Jul 2006 17:32:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7208 invoked by uid 99); 7 Jul 2006 17:32:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:32:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 10:31:53 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EF5F95B7AD; Fri,  7 Jul 2006 10:31:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C9A757F403
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 10:31:01 -0700 (PDT)
Date: Fri, 7 Jul 2006 10:31:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Searcher performance
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE7F8895@staf-exm-01.ardentia.co.uk>
Message-ID: <Pine.LNX.4.58.0607071030240.11958@hal.rescomp.berkeley.edu>
References: <0B1C92228C5C8D45AA7450F78B3FB9DE7F8895@staf-exm-01.ardentia.co.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


there was a thread discussing the performance differneces just recently...

http://www.nabble.com/forum/Search.jtp?forum=44&local=y&query=MultiReader+MultiSearcher



: Date: Fri, 7 Jul 2006 16:34:08 +0100
: From: Mike Streeton <mike.streeton@ardentia.co.uk>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Searcher performance
:
: What performs best across multiple indexes:
:
:
:
: Each index with an IndexReader with an IndexSearcher on top and the
: searchers linked with a ParallelMultiSearcher
:
:
:
: Or
:
:
:
: Each index with an IndexReader linked with a MultiReader and an
: IndexSearcher on top
:
:
:
: Many Thanks
:
:
:
: Mike
:
:
:
: www.ardentia.com the home of NetSearch
:
:
:
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 18:11:32 2006
Return-Path: <java-user-return-21843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44109 invoked from network); 7 Jul 2006 18:11:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 18:11:32 -0000
Received: (qmail 63503 invoked by uid 500); 7 Jul 2006 18:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62999 invoked by uid 500); 7 Jul 2006 18:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62988 invoked by uid 99); 7 Jul 2006 18:11:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 11:11:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.111.224.171] (HELO empburmail20.Burlington.Emptoris.com) (63.111.224.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 11:11:17 -0700
Received: from empburmail.Burlington.Emptoris.com ([10.10.50.14]) by empburmail20.Burlington.Emptoris.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 7 Jul 2006 14:10:24 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Nutch- Better than Lucene?
Date: Fri, 7 Jul 2006 14:10:22 -0400
Message-ID: <9F47FE95F43B1D41B9063D0271B2D7FF012E4A0C@empburmail.Burlington.Emptoris.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Nutch- Better than Lucene?
Thread-Index: Acah6uGJ/xLxFytJRoimxSMTkChrFAABacxg
From: "Wang, Jeff" <jwang@emptoris.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Jul 2006 18:10:24.0060 (UTC) FILETIME=[9DEFCFC0:01C6A1F0]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Heh, you said it better than I.  I was just about to reply with the
witty "Nutch is Lucene, isn't it?"

Jeff

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Friday, July 07, 2006 10:28 AM
To: java-user@lucene.apache.org
Subject: Re: Nutch- Better than Lucene?


: Subject: Nutch- Better than Lucene?

: > http://wiki.apache.org/nutch/Nutch_-_The_Java_Search_Engine

Asking if Nutch is better then Lucene is like asking if a Truck is
better
then a Combustion Engine -- you can't compare them.  A truck is a
vehicle
tht does stuff, and it gets it's power from a Combustion Engine, but the
engine itself could actually be used to power a great many other things
(not just vehicles)

Lucene is a Java IR Library or a "search library" if you will -- Nutch
uses the Lucene library to power the searching it does, but there is a
lot
of other stuff going on in Butch (crawling for example) ... if you wnat
a
"search engine" then Nutch is your man, if you want a "search library"
then use Lucene directly.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 18:51:02 2006
Return-Path: <java-user-return-21844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54015 invoked from network); 7 Jul 2006 18:51:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 18:51:02 -0000
Received: (qmail 20441 invoked by uid 500); 7 Jul 2006 18:50:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19944 invoked by uid 500); 7 Jul 2006 18:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19933 invoked by uid 99); 7 Jul 2006 18:50:56 -0000
Received-SPF: pass (hermes.apache.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 11:50:56 -0700
Received: (qmail 951 invoked from network); 7 Jul 2006 18:50:18 -0000
Received: from unknown (HELO p5496f37d.dip.t-dialin.net) ([pbs]695637@[84.150.243.125])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 7 Jul 2006 18:50:18 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Modifying the standard analyzer
Date: Fri, 7 Jul 2006 20:51:05 +0200
User-Agent: KMail/1.8.2
References: <ab0709bf0607070720g4c6d5719qa57502aaf839d05e@mail.gmail.com>
In-Reply-To: <ab0709bf0607070720g4c6d5719qa57502aaf839d05e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200607072051.05485@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Freitag 07 Juli 2006 16:20, Mark Miller wrote:

> the javacc generated StandardTokenizer next() method is declared to
> throw a ParseException
>
> =C2=A0 final public org.apache.lucene.analysis.Token next() throws
> ParseException, IOException {
>
> unfortunately, org.apache.lucene.analysis.Token next() only throws an
> IOException.

But ParseException extends IOException, so I don't see a problem there.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 19:06:13 2006
Return-Path: <java-user-return-21845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60216 invoked from network); 7 Jul 2006 19:06:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 19:06:12 -0000
Received: (qmail 48865 invoked by uid 500); 7 Jul 2006 19:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48342 invoked by uid 500); 7 Jul 2006 19:06:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48329 invoked by uid 99); 7 Jul 2006 19:06:07 -0000
Received-SPF: pass (hermes.apache.org: domain of markrmiller@gmail.com designates 64.233.184.239 as permitted sender)
Received: from [64.233.184.239] (HELO wr-out-0506.google.com) (64.233.184.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:06:07 -0700
Received: by wr-out-0506.google.com with SMTP id 50so1138689wri
        for <java-user@lucene.apache.org>; Fri, 07 Jul 2006 12:04:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=g6eXCCyGijSQCxVD2z93w/0eDH+KFiJoWOlByls0eAe0fniSnW7vm28IUZEjRAostlmJ9eQcLqj0cA1WCb10Gr7QQLiq471vxYW1RJ4926I6oXXk4axrG9eArfCanSAcT0s+9MbN5lJIERblMk9wDLRtETpXSufirdEyQTQ8J0g=
Received: by 10.54.92.19 with SMTP id p19mr1905838wrb;
        Fri, 07 Jul 2006 12:04:46 -0700 (PDT)
Received: from ?192.168.1.101? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 64sm1245673wra.2006.07.07.12.04.45;
        Fri, 07 Jul 2006 12:04:46 -0700 (PDT)
Message-ID: <44AEB05B.1030505@gmail.com>
Date: Fri, 07 Jul 2006 15:04:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Modifying the standard analyzer
References: <ab0709bf0607070720g4c6d5719qa57502aaf839d05e@mail.gmail.com> <200607072051.05485@danielnaber.de>
In-Reply-To: <200607072051.05485@danielnaber.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> On Freitag 07 Juli 2006 16:20, Mark Miller wrote:
>
>   
>> the javacc generated StandardTokenizer next() method is declared to
>> throw a ParseException
>>
>>   final public org.apache.lucene.analysis.Token next() throws
>> ParseException, IOException {
>>
>> unfortunately, org.apache.lucene.analysis.Token next() only throws an
>> IOException.
>>     
>
> But ParseException extends IOException, so I don't see a problem there.
>
> Regards
>  Daniel
>
>   
I wish my compiler agreed with you:) Which it seems to do until you 
rebuild the files with javacc. I saw at least two other posts about this 
problem on the web with no answer given...

This guy also found the same issue:
(could only get this from google cache)

http://216.239.51.104/search?q=cache:CSV6j48f0-AJ:mail-archives.apache.org/mod_mbox/jakarta-lucene-user/200310.mbox/%253CDCEE3C62548AFE48ADF88CBFDB8260A203CBBA51%40NGMAIL3%253E+lucene+standardtokenizer+throws+parseexception&hl=en&gl=us&ct=clnk&cd=1


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 19:33:04 2006
Return-Path: <java-user-return-21846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75867 invoked from network); 7 Jul 2006 19:33:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 19:33:04 -0000
Received: (qmail 91147 invoked by uid 500); 7 Jul 2006 19:32:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91113 invoked by uid 500); 7 Jul 2006 19:32:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91102 invoked by uid 99); 7 Jul 2006 19:32:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:32:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:32:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id ECC8A5B775; Fri,  7 Jul 2006 12:31:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DF25A7F403
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 12:31:50 -0700 (PDT)
Date: Fri, 7 Jul 2006 12:31:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Modifying the standard analyzer
In-Reply-To: <44AEB05B.1030505@gmail.com>
Message-ID: <Pine.LNX.4.58.0607071225240.14107@hal.rescomp.berkeley.edu>
References: <ab0709bf0607070720g4c6d5719qa57502aaf839d05e@mail.gmail.com>
 <200607072051.05485@danielnaber.de> <44AEB05B.1030505@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > But ParseException extends IOException, so I don't see a problem there.

: I wish my compiler agreed with you:) Which it seems to do until you
: rebuild the files with javacc. I saw at least two other posts about this
: problem on the web with no answer given...

: This guy also found the same issue:
: (could only get this from google cache)

the reason you could only get the google cache was because the mailinst
changed names a while back, but if you find the new URL and look at
the replies you'll see the answer...

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200310.mbox/%3cF362EED0-FB9F-11D7-9907-000393A564E6@ehatchersolutions.com%3e

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 19:38:49 2006
Return-Path: <java-user-return-21847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77417 invoked from network); 7 Jul 2006 19:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 19:38:48 -0000
Received: (qmail 329 invoked by uid 500); 7 Jul 2006 19:38:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 265 invoked by uid 500); 7 Jul 2006 19:38:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 172 invoked by uid 99); 7 Jul 2006 19:38:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:38:40 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:38:33 -0700
Received: by ug-out-1314.google.com with SMTP id u2so677948uge
        for <java-user@lucene.apache.org>; Fri, 07 Jul 2006 12:37:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=TwVghEIlzMtc5BzEi4jg673PNsAaszHF7ii61dFM2JIQjNnGfzra5Yvnj0tdyXwnBTz9BufK7cJtGNn5oQDjfsWEJAaQusHRZ94Ky0gtjr406Dhmuv2g+6Jb3imFETkdxZcYYZnC+N9bPuBtP3+RYs5oDrE7fhVjd1C+2a4LBRY=
Received: by 10.66.221.19 with SMTP id t19mr2396077ugg;
        Fri, 07 Jul 2006 12:37:43 -0700 (PDT)
Received: by 10.67.91.5 with HTTP; Fri, 7 Jul 2006 12:37:43 -0700 (PDT)
Message-ID: <ab0709bf0607071237w7454b7ccye8d25b3ca2043128@mail.gmail.com>
Date: Fri, 7 Jul 2006 15:37:43 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying the standard analyzer
In-Reply-To: <Pine.LNX.4.58.0607071225240.14107@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59455_10680643.1152301063145"
References: <ab0709bf0607070720g4c6d5719qa57502aaf839d05e@mail.gmail.com>
	 <200607072051.05485@danielnaber.de> <44AEB05B.1030505@gmail.com>
	 <Pine.LNX.4.58.0607071225240.14107@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_59455_10680643.1152301063145
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you so much. I apologize for my ignorance.

Mark

On 7/7/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> : > But ParseException extends IOException, so I don't see a problem
> there.
>
> : I wish my compiler agreed with you:) Which it seems to do until you
> : rebuild the files with javacc. I saw at least two other posts about this
> : problem on the web with no answer given...
>
> : This guy also found the same issue:
> : (could only get this from google cache)
>
> the reason you could only get the google cache was because the mailinst
> changed names a while back, but if you find the new URL and look at
> the replies you'll see the answer...
>
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200310.mbox/%3cF362EED0-FB9F-11D7-9907-000393A564E6@ehatchersolutions.com%3e
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_59455_10680643.1152301063145--

From java-user-return-21848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 19:40:44 2006
Return-Path: <java-user-return-21848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78130 invoked from network); 7 Jul 2006 19:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 19:40:44 -0000
Received: (qmail 5387 invoked by uid 500); 7 Jul 2006 19:40:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5362 invoked by uid 500); 7 Jul 2006 19:40:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5351 invoked by uid 99); 7 Jul 2006 19:40:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:40:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:40:30 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8702B5B775; Fri,  7 Jul 2006 12:39:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7245E7F403
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 12:39:31 -0700 (PDT)
Date: Fri, 7 Jul 2006 12:39:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Managing a large archival (and constantly changing) database
In-Reply-To: <20060707090235.D75B6187BC@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0607071236120.18567@hal.rescomp.berkeley.edu>
References: <20060707090235.D75B6187BC@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: How can that be so? When the segments file is re-written it will surely
: clobber the copy rather than creating a new INODE, because it has the same
: name... wouldn't it?

if you take a look at SegmentInfos.java you'll see that an existing
segments file is never modified.  a new segments file is created (named
creatively "segments.new" and once it is complete, it is renamed
"segments" in the index directory (so the old inode is completley
unmodified and still accessible from the cloned directory)

: 	echo update > x/x.txt

i believe what is happening is analogous to...

        echo update > x/x.new
        mv x/x.new x/x.txt


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 19:52:53 2006
Return-Path: <java-user-return-21849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81912 invoked from network); 7 Jul 2006 19:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 19:52:53 -0000
Received: (qmail 28601 invoked by uid 500); 7 Jul 2006 19:52:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28572 invoked by uid 500); 7 Jul 2006 19:52:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28559 invoked by uid 99); 7 Jul 2006 19:52:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:52:46 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 12:52:39 -0700
Received: by py-out-1112.google.com with SMTP id w49so3373311pyg
        for <java-user@lucene.apache.org>; Fri, 07 Jul 2006 12:52:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mE+Hoe+NcwE1IBKMTf3JNLdHX/xK0j8Nm6FKkBMKFtYqk9oE9uSX88GSZw14T5DHQwUBEYn+qavdZz5rvIuEA8Lz/ZPJxu7GrQhRAs8aUyJQ/Brzoj4EAnhYTfHR5579dzwWhy9eRWCEegay15r/h7XMeOyh5PGd8r6PXWkaGds=
Received: by 10.35.134.12 with SMTP id l12mr2487862pyn;
        Fri, 07 Jul 2006 12:52:00 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Fri, 7 Jul 2006 12:52:00 -0700 (PDT)
Message-ID: <359a92830607071252o3380862asfc67e81de9b23949@mail.gmail.com>
Date: Fri, 7 Jul 2006 15:52:00 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Inserting a document into an index at a specified position
In-Reply-To: <200607070910.17505.mail@jasoncalabrese.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_29062_9896579.1152301920245"
References: <200607051706.29317.mail@jasoncalabrese.com>
	 <200607070742.28829.mail@jasoncalabrese.com>
	 <359a92830607070805h46f852e5r3e04d296b6118ead@mail.gmail.com>
	 <200607070910.17505.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_29062_9896579.1152301920245
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Did you use a Hits object to assemble your results? And is that what you're
measuring when you say it's slow? In other words, were you measuring the
time it took to execute the statement

Hits hits = searcher.search(query, new Sort("fullname"));

or the time it took to iterate over the Hits object and do something? If the
latter, your problem may really be the fact that the Hits object re-issues
the search every 100 retrievals or so (this has been discussed in the mail
archive...) and you'd get satisfactory performance by using a lower-level
interface HitCollector(?) TopDocs(?).

Otherwise, I haven't a clue, but you probably already realized that...

Best
Erick

------=_Part_29062_9896579.1152301920245--

From java-user-return-21850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 20:53:51 2006
Return-Path: <java-user-return-21850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3161 invoked from network); 7 Jul 2006 20:53:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 20:53:51 -0000
Received: (qmail 32311 invoked by uid 500); 7 Jul 2006 20:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32285 invoked by uid 500); 7 Jul 2006 20:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32274 invoked by uid 99); 7 Jul 2006 20:53:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 13:53:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 13:53:33 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 69529187BD; Fri,  7 Jul 2006 20:52:36 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id F3F7E187BC
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 20:52:32 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Managing a large archival (and constantly changing) database
Date: Fri, 7 Jul 2006 21:52:38 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: Acah/TtHGZ3Ngd+BRXmEo59Y//6uGQACehCQ
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0036_01C6A20F.A96D0060"
In-Reply-To: <Pine.LNX.4.58.0607071236120.18567@hal.rescomp.berkeley.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060707205232.F3F7E187BC@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0036_01C6A20F.A96D0060
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Aha, OK that makes sense. Likewise James Pine's explanation. Thanks both of
you.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 07 July 2006 20:40
To: java-user@lucene.apache.org
Subject: RE: Managing a large archival (and constantly changing) database


: How can that be so? When the segments file is re-written it will surely
: clobber the copy rather than creating a new INODE, because it has the same
: name... wouldn't it?

if you take a look at SegmentInfos.java you'll see that an existing segments
file is never modified.  a new segments file is created (named creatively
"segments.new" and once it is complete, it is renamed "segments" in the
index directory (so the old inode is completley unmodified and still
accessible from the cloned directory)

: 	echo update > x/x.txt

i believe what is happening is analogous to...

        echo update > x/x.new
        mv x/x.new x/x.txt


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0036_01C6A20F.A96D0060
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcwNzIw
NTIzN1owIwYJKoZIhvcNAQkEMRYEFK20LkYjzABrjcpKSo7YBKm5SHcoMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAEK1lE611exgsxuxwkk0a7koXh6A2mHoPpHI
vwT4tSJso217Ok3/r0ehF2H29/S9Uurh/ktmT9pG5U1y3/AuL+UFoNM594qh7hIg80NqStZg+YTh
tSzta1ssElolxvcjLwUPYZWXBOEvg83v4G9UBq4m4QmMzIB4G9GY0CrQzQL7x0LHm1E1SBc//hvU
4naahZm50O2JfH3gql6YF81DwqUwmPRgwr0ebqI6coxIXaQ42Ytho5fNKn7GrwiMYpfkD8bDPv5w
kDcIuzirIzWGGwQnyRCpsNVukIcYG/+WmnMUXkWe3x/qVlzOfKGHE2uz2o/Kv46X8RwWTlmXd2Ob
T3UAAAAAAAA=

------=_NextPart_000_0036_01C6A20F.A96D0060--


From java-user-return-21851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 21:23:03 2006
Return-Path: <java-user-return-21851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13908 invoked from network); 7 Jul 2006 21:23:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 21:23:02 -0000
Received: (qmail 83884 invoked by uid 500); 7 Jul 2006 21:22:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83429 invoked by uid 500); 7 Jul 2006 21:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83415 invoked by uid 99); 7 Jul 2006 21:22:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 14:22:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.193.231.187] (HELO mail.cbrese.com) (66.193.231.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 14:22:45 -0700
Received: by mail.cbrese.com (Postfix, from userid 1003)
	id 73CE9BD9E29; Fri,  7 Jul 2006 14:22:02 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0-gr0 (2005-09-13) on newcastle
X-Spam-Level: 
Received: from [192.168.0.123] (wsip-70-168-51-174.sd.sd.cox.net [70.168.51.174])
	by mail.cbrese.com (Postfix) with ESMTP id 8DBE7BD9C35
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 14:21:56 -0700 (PDT)
From: Jason Calabrese <mail@jasoncalabrese.com>
To: java-user@lucene.apache.org
Subject: Re: Inserting a document into an index at a specified position
Date: Fri, 7 Jul 2006 14:20:41 -0700
User-Agent: KMail/1.9.1
References: <200607051706.29317.mail@jasoncalabrese.com> <200607070910.17505.mail@jasoncalabrese.com> <359a92830607071252o3380862asfc67e81de9b23949@mail.gmail.com>
In-Reply-To: <359a92830607071252o3380862asfc67e81de9b23949@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-6"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607071420.41591.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.9 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0-gr0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We only display the 10 hits at a time, so we don't need to iterate through all 
the hits.

It feels like there should be a way to pull a document out 1 index and stick 
it into an other and bring all the unstored fields along with it.

On Friday 07 July 2006 12:52, Erick Erickson wrote:
>  Did you use a Hits object to assemble your results? And is that what
> you're measuring when you say it's slow? In other words, were you measuring
> the time it took to execute the statement
>
> Hits hits = searcher.search(query, new Sort("fullname"));
>
> or the time it took to iterate over the Hits object and do something? If
> the latter, your problem may really be the fact that the Hits object
> re-issues the search every 100 retrievals or so (this has been discussed in
> the mail archive...) and you'd get satisfactory performance by using a
> lower-level interface HitCollector(?) TopDocs(?).
>
> Otherwise, I haven't a clue, but you probably already realized that...
>
> Best
> Erick

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 22:04:20 2006
Return-Path: <java-user-return-21852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24493 invoked from network); 7 Jul 2006 22:04:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 22:04:20 -0000
Received: (qmail 38772 invoked by uid 500); 7 Jul 2006 22:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38522 invoked by uid 500); 7 Jul 2006 22:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38511 invoked by uid 99); 7 Jul 2006 22:04:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:04:14 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:04:02 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FyyQB-0000Xq-PX
	for java-user@lucene.apache.org; Fri, 07 Jul 2006 15:03:35 -0700
Message-ID: <5225348.post@talk.nabble.com>
Date: Fri, 7 Jul 2006 15:03:35 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <20060707170234.98344.qmail@web50301.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


but if you remove it and add it again, you'll need to re-index it again.
don't you? When you do re-index, you'll have to close the reader, which
would pause the search. Any better way of doint it?
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5225348
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 07 22:54:41 2006
Return-Path: <java-user-return-21853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41637 invoked from network); 7 Jul 2006 22:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2006 22:54:40 -0000
Received: (qmail 15611 invoked by uid 500); 7 Jul 2006 22:54:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15575 invoked by uid 500); 7 Jul 2006 22:54:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15562 invoked by uid 99); 7 Jul 2006 22:54:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:54:35 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 15:54:33 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.6/8.13.6) with ESMTP id k67MsCob027064
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 7 Jul 2006 22:54:12 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k67MuxTH117208
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 8 Jul 2006 00:56:59 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k67MsBbQ007791
	for <java-user@lucene.apache.org>; Sat, 8 Jul 2006 00:54:11 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k67MsBxv007788
	for <java-user@lucene.apache.org>; Sat, 8 Jul 2006 00:54:11 +0200
In-Reply-To: <5225348.post@talk.nabble.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 7 Jul 2006 15:52:22 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 08/07/2006 01:56:58
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> dan2000 <liudan@ntlworld.com> wrote on 07/07/2006 15:03:35:
> but if you remove it and add it again, you'll need to re-index it again.
> don't you? When you do re-index, you'll have to close the reader, which
> would pause the search. Any better way of doint it?

INHO yes and no -

There's no need to close the searcher (or the reader associated with the
searcher) in order to add that doc again, however it is required to close
the reader that is used for deleting a document in order to open a writer
for adding the updated document. Also, in order for this document to become
visible to search, a new searcher must be opened. This does not necessarily
means "pausing the search" - it is possible to open a new searcher in the
background (as done in Solr) and when it is ready - to switch to serve new
queries with the new searcher and close (and free) the old searcher once
its serviced queries are "completed". Solr (
http://incubator.apache.org/solr) does something similar, and it also warms
newly created searchers.

If the the update of these non-idexed field happens a lot, perhaps a side
data store would be more adequate, i.e. Lucene would store a unique docID
(non-indexed field) for each document, and at search time that ID would be
used to look-up the (updatable) values in the side data store. This means
additional code complexity and, search performance penalty if many result
documents are of interest for every search.

The approach of updating the documents <delete/add> moves the overhead to
indexing while making search faster and the application code simpler. If
this is the selected approach, especially if the updates cannot be easily
"batched" (i.e. delete 1000 docs to be updated, add back those updated 1000
docs), then the following may be of interest - a related proposal to "allow
updating documents with no need to repeatedly open/close reader/writer":
- http://issues.apache.org/jira/browse/LUCENE-565
- http://www.gossamer-threads.com/lists/lucene/java-dev/35317

Hope this helps,
Doron



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 08 02:01:49 2006
Return-Path: <java-user-return-21854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71804 invoked from network); 8 Jul 2006 02:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 02:01:49 -0000
Received: (qmail 14245 invoked by uid 500); 8 Jul 2006 02:01:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14211 invoked by uid 500); 8 Jul 2006 02:01:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14197 invoked by uid 99); 8 Jul 2006 02:01:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 19:01:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Jul 2006 19:01:43 -0700
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 83D3BD7
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 20:01:22 -0600 (MDT)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 12161-04 for <java-user@lucene.apache.org>;
	Fri, 7 Jul 2006 20:01:19 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id B1FF92220
	for <java-user@lucene.apache.org>; Fri,  7 Jul 2006 20:01:19 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Managing a large archival (and constantly changing) database
Date: Fri, 7 Jul 2006 20:01:20 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB406D1E4@exchange.slc.mainstreamdata.com>
in-reply-to: <20060707205232.F3F7E187BC@mail.seseit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Managing a large archival (and constantly changing) database
thread-index: Acah/TtHGZ3Ngd+BRXmEo59Y//6uGQACehCQAArHubA=
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks to everyone who commented.  Clearly, I have a lot to think about,
but thanks for the help.

Scott

-----Original Message-----
From: Rob Staveley (Tom) [mailto:rstaveley@seseit.com]=20
Sent: Friday, July 07, 2006 2:53 PM
To: java-user@lucene.apache.org
Subject: RE: Managing a large archival (and constantly changing)
database

Aha, OK that makes sense. Likewise James Pine's explanation. Thanks both
of
you.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 07 July 2006 20:40
To: java-user@lucene.apache.org
Subject: RE: Managing a large archival (and constantly changing)
database


: How can that be so? When the segments file is re-written it will
surely
: clobber the copy rather than creating a new INODE, because it has the
same
: name... wouldn't it?

if you take a look at SegmentInfos.java you'll see that an existing
segments
file is never modified.  a new segments file is created (named
creatively
"segments.new" and once it is complete, it is renamed "segments" in the
index directory (so the old inode is completley unmodified and still
accessible from the cloned directory)

: 	echo update > x/x.txt

i believe what is happening is analogous to...

        echo update > x/x.new
        mv x/x.new x/x.txt


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 08 07:47:10 2006
Return-Path: <java-user-return-21855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80780 invoked from network); 8 Jul 2006 07:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 07:47:09 -0000
Received: (qmail 1920 invoked by uid 500); 8 Jul 2006 07:47:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1894 invoked by uid 500); 8 Jul 2006 07:47:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1883 invoked by uid 99); 8 Jul 2006 07:47:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:47:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:47:02 -0700
Received: (qmail 17736 invoked from network); 8 Jul 2006 07:46:39 -0000
Received: from unknown (HELO p5496ddcc.dip.t-dialin.net) ([pbs]695637@[84.150.221.204])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 8 Jul 2006 07:46:39 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
Date: Sat, 8 Jul 2006 09:47:28 +0200
User-Agent: KMail/1.8.2
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com>
In-Reply-To: <5225348.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607080947.28784@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Samstag 08 Juli 2006 00:03, dan2000 wrote:

> When you do re-index, you'll have to close the reader, which
> would pause the search. Any better way of doint it?

Try using IndexModifier (added in Lucene 1.9).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 08 07:50:57 2006
Return-Path: <java-user-return-21856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81607 invoked from network); 8 Jul 2006 07:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 07:50:57 -0000
Received: (qmail 6956 invoked by uid 500); 8 Jul 2006 07:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6925 invoked by uid 500); 8 Jul 2006 07:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6914 invoked by uid 99); 8 Jul 2006 07:50:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:50:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of easyjava@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 00:50:51 -0700
Received: by py-out-1112.google.com with SMTP id w49so3479047pyg
        for <java-user@lucene.apache.org>; Sat, 08 Jul 2006 00:50:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=YU4/7ED2F6b2+jBlegwo1G/x7eS4nic8I27mPDbTe+WZP+ceqFD0N8iuFnXvp+/SZR5v1JnwqQcZtn3k6OuqjWaOfRb/6nOY/1g5cUowvBZga0VC82GcKzQ0Let8IBnmZVD0hq4VEb2PJvi9LlE1NDJMNVAbnJiOsE/J0VD8RNM=
Received: by 10.35.63.2 with SMTP id q2mr2965101pyk;
        Sat, 08 Jul 2006 00:50:30 -0700 (PDT)
Received: by 10.35.118.20 with HTTP; Sat, 8 Jul 2006 00:50:30 -0700 (PDT)
Message-ID: <8062ce150607080050v2b9e11e0k67dbede17493bc77@mail.gmail.com>
Date: Sat, 8 Jul 2006 15:50:30 +0800
From: "yuexiang zhang" <easyjava@gmail.com>
To: java-user@lucene.apache.org
Subject: java.lang.OutOfMemoryError when search in large index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4246_8296578.1152345030497"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4246_8296578.1152345030497
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have finished importing 10,000,000 docments into Lucene 2.0 .

Every  document includes  journalTitle and articleTitle both of which should
be sortable, so I
add other two fields : journalTitle_sort and  articleTitle_sort both of
which use un_tokenized option for
indexer.

When I   query by "journaltitle:advertising" and sort by journaltitle_sort,
it 's ok for return "total result num is 28684"
But when I use the same query and change sort field from journaltitle_sort
to articleTitle_sort, java.lang.OutOfMemoryError  happens.
Then I try set JVM options to "-Xmx2048m", it also do take affect,
java.lang.OutOfMemoryError  happens too.

I think maybe lucene preload all  unique sortable field vlaue into memory,
but my articleTitle_sort has too large different values because of
un_tokenized  option.

Who can help me? Thanks!

------=_Part_4246_8296578.1152345030497--

From java-user-return-21857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 08 08:26:49 2006
Return-Path: <java-user-return-21857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86162 invoked from network); 8 Jul 2006 08:26:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 08:26:48 -0000
Received: (qmail 34035 invoked by uid 500); 8 Jul 2006 08:26:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33999 invoked by uid 500); 8 Jul 2006 08:26:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33979 invoked by uid 99); 8 Jul 2006 08:26:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 01:26:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 01:26:42 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1Fz88r-0002ZK-Fs
	for java-user@lucene.apache.org; Sat, 08 Jul 2006 01:26:21 -0700
Message-ID: <5229084.post@talk.nabble.com>
Date: Sat, 8 Jul 2006 01:26:21 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com> <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Thanks a lot Doron. 

I thought I had to close all readers and searchers in order to new
IndexWriter, otherwise I keep getting Lock timeout exception in a
multithreaded environment. In my case, modifying/adding/deleting only
happens occasionally, so I don't have a IndexWritter that is open all the
time. In order to avoid lock timeout exception, I had to put a real lock in
my search method, and a write lock in my add/modify method. I know this is
not efficient enough since all the readers/searcher are re-opened each time
adding/modifing happens.

>From what you said, I'm thinking of switching to IndexModifier. Before that,
I have a few more questions:
1. without using an exclusive lock, is there anyway to new a IndexModifier
or IndexWritter while IndexReaders are serving search queries? or do I have
to new a IndexWriiter when system starts and keep it open all the time?
2. When adding a new document, and calling optimize(), do I have to close
the readers/searchers?
3. In my case, updating non-idexed fields happens a lot, can you explain the
side data store in more detail? I'm not sure with this approch. Do you mean
creating a seperate database and stores lucene's ids?

-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5229084
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 08 09:41:57 2006
Return-Path: <java-user-return-21858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96138 invoked from network); 8 Jul 2006 09:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 09:41:56 -0000
Received: (qmail 88702 invoked by uid 500); 8 Jul 2006 09:41:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88037 invoked by uid 500); 8 Jul 2006 09:41:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88022 invoked by uid 99); 8 Jul 2006 09:41:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 02:41:50 -0700
X-ASF-Spam-Status: No, hits=3.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_HAS_MIXED_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [202.43.219.103] (HELO web8415.mail.in.yahoo.com) (202.43.219.103)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 08 Jul 2006 02:41:49 -0700
Received: (qmail 97961 invoked by uid 60001); 8 Jul 2006 09:41:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=gUS/czzgEB4mjop6M9xOkbNfJy0OhO7T5JfWjupiQKKyo2Ag2cTo9V0pJ4BhPipH644jWv49G34EwHL4yGs0Q5NN9px48MxFhwcDDrZ4j/7Cz8vtZ3PyqWcKqYcOP6RqTiIY+k1FRX+Ko0XzCH9ulngq+qNPhkt+MUaWyY+bBQk=  ;
Message-ID: <20060708094127.97959.qmail@web8415.mail.in.yahoo.com>
Received: from [210.212.244.134] by web8415.mail.in.yahoo.com via HTTP; Sat, 08 Jul 2006 10:41:27 BST
Date: Sat, 8 Jul 2006 10:41:27 +0100 (BST)
From: John Bonn <j0nyb0ny@yahoo.co.in>
Subject: SpanNearQuery with support for missing words 
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello folks !
 
I'm looking for a way to search for a phrase, where in
I shud get a hit even if some (N) words in the query
phrase is not matching or even not inorder, i.e. it
shud match maximum to the query string. I also need to
get the Spans for the hits for highlighting. 
 
SpanNearQuery is quite helpful with inorder set to
false and for getting the spans.  Is it possible to
modify SpanNearQuery, so that it wud return the spans
of the max match string ?? 
 
---> The quick brown fox jumps over the lazy dog 
 
Query : quick brainy fox 
 
it should give me <quick brown fox>...
 
We can prolly (must) have a parameter for N, the
number of term mismatches allowed. It will surely be
helpful in search also... 
 
Any thoughts ?? 
 
Regards...
 
Jonny !



		
__________________________________________________________
Yahoo! India Answers: Share what you know. Learn something new
http://in.answers.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 08 12:16:41 2006
Return-Path: <java-user-return-21859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25476 invoked from network); 8 Jul 2006 12:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 12:16:41 -0000
Received: (qmail 93473 invoked by uid 500); 8 Jul 2006 12:16:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93448 invoked by uid 500); 8 Jul 2006 12:16:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 31916 invoked by uid 99); 8 Jul 2006 08:20:18 -0000
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_HAS_MIXED_NUMS,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of j0nb0ny@gmail.com designates 64.233.166.176 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cFcMdNlKSXXZ1An3TvWa7VzaZoISe3ADRHxp1ZXr0iB1neoLTZLOpIPyeSAAEYUA8e33gUeeYdDUtF80j/kPjVHpEXyj52ezJ+kGleFVt6Ty9S48RVEgw533S7EvpXSCCImxVFu+imZbKZZkIJKeRAhVo1xfBuosjxvx0DyhQek=
Message-ID: <e513cf320607080119o9001794p46388fa5b37ad1f7@mail.gmail.com>
Date: Sat, 8 Jul 2006 13:49:56 +0530
From: "Jon Bon Jovi" <j0nb0ny@gmail.com>
To: java-user@lucene.apache.org
Subject: SpanNearQuery with support for missing words (Or?)
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_49157_11674749.1152346796995"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_49157_11674749.1152346796995
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello folks !

I'm looking for a way to search for a phrase, where in I shud get a hit even
if some (N) words in the query phrase is not matching or even not inorder,
i.e. it shud match maximum to the query string. I also need to get the Spans
for the hits for highlighting.

SpanNearQuery is quite helpful with inorder set to false and for getting the
spans.  Is it possible to modify SpanNearQuery, so that it wud return the
spans of the max match string ??

---> The quick brown fox jumps over the lazy dog

Query : quick brainy fox

it should give me <quick brown fox>...

We can prolly (must) have a parameter for N, the number of term mismatches
allowed. It will surely be helpful in search also...

Any thoughts ??

Regards...

Jonny !

------=_Part_49157_11674749.1152346796995--

From java-user-return-21860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 08 15:06:03 2006
Return-Path: <java-user-return-21860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59883 invoked from network); 8 Jul 2006 15:06:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2006 15:06:03 -0000
Received: (qmail 14164 invoked by uid 500); 8 Jul 2006 15:05:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14124 invoked by uid 500); 8 Jul 2006 15:05:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14111 invoked by uid 99); 8 Jul 2006 15:05:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 08:05:57 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of george.abraham.lucene@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 08:05:55 -0700
Received: by nf-out-0910.google.com with SMTP id h2so348323nfe
        for <java-user@lucene.apache.org>; Sat, 08 Jul 2006 08:05:34 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=gDBf63Xba1fm5tQpEykhgbsUuURPGpVc5aEopELIpPYM+6GevxBpRH+dWb6bv6ntdQlK+HvVTIZ7JfdLPqHMLQ+AzlWiE+lZynkQa86ZBP1jMfIAfbVJcVlbqMENgPe3JBbSgZZcL0YGC/OCJItYji6pAxFna+RpipFn/SgnhYE=
Received: by 10.49.51.8 with SMTP id d8mr2304512nfk;
        Sat, 08 Jul 2006 08:05:33 -0700 (PDT)
Received: by 10.49.94.18 with HTTP; Sat, 8 Jul 2006 08:05:03 -0700 (PDT)
Message-ID: <9ba0336c0607080805u6a3b2098yc241333bce7feae3@mail.gmail.com>
Date: Sat, 8 Jul 2006 11:05:03 -0400
From: "George Abraham" <george.abraham.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting & SQL-Database
In-Reply-To: <200607010110.50154.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47439_7187360.1152371103357"
References: <200607010110.50154.dominik@dbruhn.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47439_7187360.1152371103357
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Dominik,
Sorry I saw this a little late, but I asked a similar question back in Dec
2005 and Jeff Rodenburg gave me some splendid help which we are implementing
even now. Here is the gist of his solution.

- Include the Lucene Doc's score (or sequential order, as an int) with the
list of id values.
- Create an XML string, then pass as it as a text parameter to a stored
procedure.  The XML string contains a set of id values and their associated
document score or order value.
- Read the text parameter within a stored procedure into a declared table
using OPENXML
- Join the declared table with your existing resultset code on the id values
- Order the resultset by the order value included in the XML

Here is some sample code for the stored procedure:

/*******************************************************/
create procedure dbo.Get_Records_ByXml (
    @xmlSource    text
)
as

/*
<Documents>
    <Doc>
        <Id>123</Id>
        <ScoreOrder>1</ScoreOrder>
    </Doc>
    <Doc>
        <Id>456</Id>
        <ScoreOrder>2</ScoreOrder>
    </Doc>
    <Doc>
        <Id>789</Id>
        <ScoreOrder>3</ScoreOrder>
    </Doc>
</Documents>
*/

set nocount on
/* xmlHandle */
declare    @xmlHandle            int

-- SQL's internal stored procedure to prep the @xmlSource stream for reading
by OPENXML
exec sp_xml_preparedocument @xmlHandle OUTPUT, @xmlSource

declare    @docs table (
    Id            int,
    ScoreOrder    int
)

-- Use OPENXML to populate declared table
insert into @docs
select    Id,    ScoreOrder
from    openxml (@xmlHandle, '/Documents/Doc',1)
        with    (
            Id                int        'Id',
            ScoreOrder        int        'ScoreOrder'
        )

-- Declared table is populated, ready to be joined with other tables
select    Id, ScoreOrder
from    @docs
order by ScoreOrder asc

-- SQL's internal stored procedure to drop the @xmlSource stream handle from
memory
exec sp_xml_removedocument @xmlHandle

set nocount off
go


declare @text varchar(8000)

select    @text =
'<Documents>' +
' <Doc>' +
'  <Id>123</Id>' +
'  <ScoreOrder>1</ScoreOrder>' +
' </Doc>' +
' <Doc>' +
'  <Id>456</Id>' +
'  <ScoreOrder>2</ScoreOrder>' +
' </Doc>' +
' <Doc>' +
'  <Id>789</Id>' +
'  <ScoreOrder>3</ScoreOrder>' +
' </Doc>' +
'</Documents>'

exec Get_Records_ByXml @xmlSource=@text

/*
-- Returns this result

Id    ScoreOrder
----  ----------
123   1
456   2
789   3
*/

Hope that helps!

George


On 6/30/06, Dominik Bruhn <dominik@dbruhn.de> wrote:
>
> Hy,
> i use Lucene to index a SQL-Table which contains three fields: a
> index-field,
> the text to search in and another field. When adding a lucene document I
> let
> Lucene index the search-field and also save the id along with it in the
> lucene index.
>
> Uppon searching I collect all ids and add them to a java-string with
> commas in
> between to issue a SQL-Query like this one:
>
> SELECT id,addfield FROM table WHERE id IN ([LUCENERESULT]);
>
> Where LUCENERESULT is like 2,3,19,3,5.
>
> This works fine but got one problem: The Search-Result of Lucene is order
> by
> relevance and so the id-list is also sorted by relevance. But the result
> of
> the SQL-Query is sorted by the id which destroys the relevance-sorting.
>
> Does anybody know a work-arround?
>
>
> Thanks
> --
> Dominik Bruhn
> mailto: dominik@dbruhn.de
> http://www.dbruhn.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_47439_7187360.1152371103357--

From java-user-return-21861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 02:32:33 2006
Return-Path: <java-user-return-21861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32345 invoked from network); 9 Jul 2006 02:32:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 02:32:28 -0000
Received: (qmail 8573 invoked by uid 500); 9 Jul 2006 02:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7318 invoked by uid 500); 9 Jul 2006 02:31:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 18624 invoked by uid 99); 8 Jul 2006 16:54:54 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of giesen2@gmail.com designates 64.233.184.229 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=D1ehs3fIKWIzNxQcKQYdHnRqOu367Y3Xo0L3lzD2MDXJGxVZxwgSZgH1LSzOGPu2gQotWOca37BGFjTRJelhquL8gzIqz9tKkYKYcBC2BFBAKwgSbfn9nAs1AF9A909Qoq/l8HZkM2ymtCU2M1HFMwYsUQTxu/S4Y6/uXZvb0f8=
Message-ID: <1947084a0607080954w4ed08af0k1ec7522ca0ee9892@mail.gmail.com>
Date: Sat, 8 Jul 2006 11:54:33 -0500
From: "Giesen Giesen" <giesen2@gmail.com>
To: java-user@lucene.apache.org
Subject: Location Search: Latitude + Longitude
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How do I do distance based searches with Lucene? I can do this in SQL
with longitude/latitude values, but can this be done in Lucene?

I can't do my full search in the database as I want the fast fuzzy
search capabilities of Lucene.  It is possible to do the main search
in Lucene and then do post filtering on distance outside of Lucene.
Does anyone have a better idea? How are other people handling this?
This seems a common task.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 02:49:09 2006
Return-Path: <java-user-return-21862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40117 invoked from network); 9 Jul 2006 02:49:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 02:49:06 -0000
Received: (qmail 39639 invoked by uid 500); 9 Jul 2006 02:48:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38615 invoked by uid 500); 9 Jul 2006 02:48:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37054 invoked by uid 99); 9 Jul 2006 02:48:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 19:48:05 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 12:55:07 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FzIt4-0006cW-Ga
	for java-user@lucene.apache.org; Sat, 08 Jul 2006 12:54:46 -0700
Message-ID: <5234403.post@talk.nabble.com>
Date: Sat, 8 Jul 2006 12:54:46 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: TermQuery doesn't support non-english charecters
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


When non-English word is used in TermQuery, it always returns null. With
other types query, I could pass in an language specific analyzer. but with
this TermQuery, I can't find anyway to specify the language. 
-- 
View this message in context: http://www.nabble.com/TermQuery-doesn%27t-support-non-english-charecters-tf1911988.html#a5234403
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 03:07:13 2006
Return-Path: <java-user-return-21863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56082 invoked from network); 9 Jul 2006 03:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 03:07:07 -0000
Received: (qmail 79746 invoked by uid 500); 9 Jul 2006 03:05:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79656 invoked by uid 500); 9 Jul 2006 03:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79578 invoked by uid 99); 9 Jul 2006 03:05:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 20:05:42 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 13:17:48 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.6/8.13.6) with ESMTP id k68KHQat089140
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Sat, 8 Jul 2006 20:17:26 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k68KKFtj143374
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 8 Jul 2006 22:20:15 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k68KHQQ1009828
	for <java-user@lucene.apache.org>; Sat, 8 Jul 2006 22:17:26 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k68KHQCC009823
	for <java-user@lucene.apache.org>; Sat, 8 Jul 2006 22:17:26 +0200
In-Reply-To: <5229084.post@talk.nabble.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sat, 8 Jul 2006 13:16:38 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 08/07/2006 23:20:14
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> From what you said, I'm thinking of switching to IndexModifier.

Yes, IndexModifier would synchronize add/delete.  One should notice the
performance comment in IndexModifier
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexModifier.html
 - "While you can freely mix calls to add() and delete() using this class,
you should batch you calls for best performance. For example, if you want
to update 20 documents, you should first delete all those documents, then
add all the new documents."

> Before that,
> I have a few more questions:
> 1. without using an exclusive lock, is there anyway to new a
IndexModifier
> or IndexWritter while IndexReaders are serving search queries? or do I
have
> to new a IndexWriiter when system starts and keep it open all the time?

It is possible to open an IndexWriter while a searcher is open. For search
to "feel" the changes made by the writer, a new searcher should be opened
(after the writer is closed or after it writes from memory to disk. With
IndexModifier, the flush() method can be used.)

> 2. When adding a new document, and calling optimize(), do I have to close
> the readers/searchers?

No need to close searchers.
"Lucene in Action" book, chapter 2.9 explains this much better than I can,
and draws a table of "what can run with what else".

> 3. In my case, updating non-idexed fields happens a lot, can you explain
the
> side data store in more detail? I'm not sure with this approach. Do you
mean
> creating a separate database and stores lucene's ids?

Yes, a separate store, with mapping from ID to mutable fields of the
document with this ID. When adding a doc to Lucene, a stored field would be
added to contain the ID of the added doc. At search time, the ID would be
retrieved for that doc, and can be used to fetch the mutable fields from
the separate store. But I think it is better to start with the simpler
approach - updating documents in Lucene - and turn to something more
complex only if there are unacceptable performance issues due to updating
these documents fields.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 03:50:59 2006
Return-Path: <java-user-return-21864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93758 invoked from network); 9 Jul 2006 03:50:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 03:50:58 -0000
Received: (qmail 94085 invoked by uid 500); 9 Jul 2006 03:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94049 invoked by uid 500); 9 Jul 2006 03:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94038 invoked by uid 99); 9 Jul 2006 03:50:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 20:50:53 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Jul 2006 20:50:52 -0700
Received: by nf-out-0910.google.com with SMTP id k26so181412nfc
        for <java-user@lucene.apache.org>; Sat, 08 Jul 2006 20:50:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=kBXWXiSDqkyphMOjyaDdwexKkiboX2qysDUM8Hzyt+EmpWI6Vpha14Z2HCASgAmPMMRc6nswYumadlrzX0aE/0g3ZorWaN5UhMVmCNQf8Ynfrko69Q3bXB7rDJ6b7SRhyx19CQnrnjJnoSMlp8CWYTV7rmLm6JcWdbuJTkQS1FU=
Received: by 10.78.185.7 with SMTP id i7mr1256695huf;
        Sat, 08 Jul 2006 20:50:31 -0700 (PDT)
Received: by 10.78.155.3 with HTTP; Sat, 8 Jul 2006 20:50:31 -0700 (PDT)
Message-ID: <5d5204510607082050s5ca5b376gb69088492d506b65@mail.gmail.com>
Date: Sun, 9 Jul 2006 11:50:31 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: FileDocument : cannot resolve symbol
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56684_30576719.1152417031523"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_56684_30576719.1152417031523
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

when i try javac Package: org.apache.lucene.demo;
name is IndexFiles.java

it show me : FileDocument  ,error info : cannot resolve symbol


how can i compile it?

------=_Part_56684_30576719.1152417031523--

From java-user-return-21865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 08:33:03 2006
Return-Path: <java-user-return-21865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77004 invoked from network); 9 Jul 2006 08:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 08:33:02 -0000
Received: (qmail 99060 invoked by uid 500); 9 Jul 2006 08:32:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99035 invoked by uid 500); 9 Jul 2006 08:32:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99019 invoked by uid 99); 9 Jul 2006 08:32:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 01:32:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of galeas@gmx.de designates 213.165.64.21 as permitted sender)
Received: from [213.165.64.21] (HELO mail.gmx.net) (213.165.64.21)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 09 Jul 2006 01:32:48 -0700
Received: (qmail invoked by alias); 09 Jul 2006 08:32:20 -0000
Received: from p5083D343.dip.t-dialin.net (EHLO patricio) [80.131.211.67]
  by mail.gmx.net (mp042) with SMTP; 09 Jul 2006 10:32:20 +0200
X-Authenticated: #24368204
From: "Patricio" <galeas@gmx.de>
To: <java-user@lucene.apache.org>
Subject: AW: Location Search: Latitude + Longitude
Date: Sun, 9 Jul 2006 10:32:21 +0200
Message-ID: <000b01c6a332$33d13a00$1602a8c0@patricio>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <1947084a0607080954w4ed08af0k1ec7522ca0ee9892@mail.gmail.com>
Thread-Index: Acai/9MtL5OjAiIBQBWRzGhcwCHnyAAL/kdQ
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
In the Book "Lucene in Action" Chapter 6 "Extending search", there is an
example for indexing geographical information, and order the search =
results
based on distances between 2 points (x,y)->(y,z).
I think that it could be interesting for you.
Patricio

-----Urspr=FCngliche Nachricht-----
Von: Giesen Giesen [mailto:giesen2@gmail.com]=20
Gesendet: Samstag, 8. Juli 2006 18:55
An: java-user@lucene.apache.org
Betreff: Location Search: Latitude + Longitude

How do I do distance based searches with Lucene? I can do this in SQL
with longitude/latitude values, but can this be done in Lucene?

I can't do my full search in the database as I want the fast fuzzy
search capabilities of Lucene.  It is possible to do the main search
in Lucene and then do post filtering on distance outside of Lucene.
Does anyone have a better idea? How are other people handling this?
This seems a common task.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 09:17:46 2006
Return-Path: <java-user-return-21866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87999 invoked from network); 9 Jul 2006 09:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 09:17:46 -0000
Received: (qmail 26495 invoked by uid 500); 9 Jul 2006 09:17:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26069 invoked by uid 500); 9 Jul 2006 09:17:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26058 invoked by uid 99); 9 Jul 2006 09:17:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 02:17:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 02:17:29 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.13.6/8.13.6) with ESMTP id k699H0af094105
	for <java-user@lucene.apache.org>; Sun, 9 Jul 2006 11:17:01 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: SpanNearQuery with support for missing words
Date: Sun, 9 Jul 2006 11:16:59 +0200
User-Agent: KMail/1.8.2
References: <20060708094127.97959.qmail@web8415.mail.in.yahoo.com>
In-Reply-To: <20060708094127.97959.qmail@web8415.mail.in.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607091116.59798.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Jonny,

On Saturday 08 July 2006 11:41, John Bonn wrote:
> Hello folks !
>  
> I'm looking for a way to search for a phrase, where in
> I shud get a hit even if some (N) words in the query
> phrase is not matching or even not inorder, i.e. it
> shud match maximum to the query string. I also need to
> get the Spans for the hits for highlighting. 
>  
> SpanNearQuery is quite helpful with inorder set to
> false and for getting the spans.  Is it possible to
> modify SpanNearQuery, so that it wud return the spans
> of the max match string ?? 
>  
> ---> The quick brown fox jumps over the lazy dog 
>  
> Query : quick brainy fox 
>  
> it should give me <quick brown fox>...
>  
> We can prolly (must) have a parameter for N, the
> number of term mismatches allowed. It will surely be
> helpful in search also... 
>  

When modifying NearSpans, I'd start from here:
http://issues.apache.org/jira/browse/LUCENE-569

To have the unordered case match with fewer than all given
subqueries/clauses, have a look at the NearSpansUnordered in the
above issue. It uses a queue with the minimum at the top of the
queue, and it maintains a maximum within that queue.
To match fewer than all given clauses, the queue should have
the size of the number of clauses that you'd like to match.
For the remaining non matching clauses, the same queue cannot
be used, but perhaps another one.

It's better to continue this on java-dev. It's not clear to me how you'd
like to treat the case of no missing words, and relaxing the matching
conditions in NearSpans can (/will) be tricky...

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 10:57:35 2006
Return-Path: <java-user-return-21867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7706 invoked from network); 9 Jul 2006 10:57:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 10:57:34 -0000
Received: (qmail 11680 invoked by uid 500); 9 Jul 2006 10:57:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11655 invoked by uid 500); 9 Jul 2006 10:57:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11644 invoked by uid 99); 9 Jul 2006 10:57:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 03:57:18 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CBA3D30EFCD4; Sun,  9 Jul 2006 06:56:07 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id E5D4D30EFCD4
	for <java-user@lucene.apache.org>; Sun,  9 Jul 2006 06:56:05 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5234403.post@talk.nabble.com>
References: <5234403.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1F4C0193-FDB1-467B-B3FB-AFD2E5D877AF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: TermQuery doesn't support non-english charecters
Date: Sun, 9 Jul 2006 06:56:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 8, 2006, at 3:54 PM, dan2000 wrote:
> When non-English word is used in TermQuery, it always returns null.  
> With
> other types query, I could pass in an language specific analyzer.  
> but with
> this TermQuery, I can't find anyway to specify the language.

What other types of queries are you referring to?   No built-in Query  
subclass uses an analyzer.  All terms handed to these Querys must  
"pre analyzed", such that they match how terms were indexed.  You can  
always run through an analyzer to build up queries, just like  
QueryParser does.  Look at AnalyzerDemo (or is it AnalysisDemo?) in  
the Lucene in Action codebase which does this, as well as the  
internals to QueryParser.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 11:13:39 2006
Return-Path: <java-user-return-21868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10351 invoked from network); 9 Jul 2006 11:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 11:13:39 -0000
Received: (qmail 20548 invoked by uid 500); 9 Jul 2006 11:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20530 invoked by uid 500); 9 Jul 2006 11:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20518 invoked by uid 99); 9 Jul 2006 11:13:34 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 04:13:23 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FzXAW-0004Or-0W
	for java-user@lucene.apache.org; Sun, 09 Jul 2006 04:09:44 -0700
Message-ID: <5238973.post@talk.nabble.com>
Date: Sun, 9 Jul 2006 04:09:44 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery doesn't support non-english charecters
In-Reply-To: <1F4C0193-FDB1-467B-B3FB-AFD2E5D877AF@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5234403.post@talk.nabble.com> <1F4C0193-FDB1-467B-B3FB-AFD2E5D877AF@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Ok, here is my code:
Term term = new Term(myField, myKey);
TermQuery query = new TermQuery(term);
mySearcher.search(query);

If myKey is an English, everything works fine. If myKey is not an English,
it always return null.

With other types queries, I can use this:
Query query = new QueryParser(myField,
myLanguageAnalyzer).parse(myField+":"+myKey);
mySearcher.search(query);

But this returns more than one result which is not what i wanted. That's why
I need to use TermQuery to do ID/Key based search. Any idea?
-- 
View this message in context: http://www.nabble.com/TermQuery-doesn%27t-support-non-english-charecters-tf1911988.html#a5238973
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 11:22:40 2006
Return-Path: <java-user-return-21869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10778 invoked from network); 9 Jul 2006 11:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 11:22:40 -0000
Received: (qmail 23362 invoked by uid 500); 9 Jul 2006 11:22:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23328 invoked by uid 500); 9 Jul 2006 11:22:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23317 invoked by uid 99); 9 Jul 2006 11:22:34 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 04:22:18 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FzXMF-0004Zc-Vi
	for java-user@lucene.apache.org; Sun, 09 Jul 2006 04:21:52 -0700
Message-ID: <5239040.post@talk.nabble.com>
Date: Sun, 9 Jul 2006 04:21:51 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com> <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com> <5229084.post@talk.nabble.com> <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Thanks a lot Doron. I'm gonna give it a try now. The problem I've had before
was that I set my writer to null right after close it. That's why I got lock
timeout exception when i try to create a the writer again. Guess I just need
to close it, and re-open it would avoid the locking problems then.

Thanks.
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5239040
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 11:50:59 2006
Return-Path: <java-user-return-21870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13519 invoked from network); 9 Jul 2006 11:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 11:50:59 -0000
Received: (qmail 33026 invoked by uid 500); 9 Jul 2006 11:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32988 invoked by uid 500); 9 Jul 2006 11:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32977 invoked by uid 99); 9 Jul 2006 11:50:53 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of amashtakov@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 04:50:43 -0700
Received: by py-out-1112.google.com with SMTP id w49so3676407pyg
        for <java-user@lucene.apache.org>; Sun, 09 Jul 2006 04:49:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=aWi6aw1FEl4NR7sCAFmgAyWeFYJcU/J0UyrMC1cpQWNq5DY30Z7RayfQg9vABFLQWe7czwq8Cg0vGhSzZZZU0wMiSTyeP0EvlecPAnuW2a5AqhqftRuExPRiEEaqK4/M3aTgZ305Rf4QfKiAIEsnHlmnhSzlXH34ea2Gk+v9jJc=
Received: by 10.35.21.1 with SMTP id y1mr4036893pyi;
        Sun, 09 Jul 2006 04:49:09 -0700 (PDT)
Received: by 10.35.52.18 with HTTP; Sun, 9 Jul 2006 04:49:09 -0700 (PDT)
Message-ID: <5e966dac0607090449w15d31490q6e22a02a1b586d01@mail.gmail.com>
Date: Sun, 9 Jul 2006 14:49:09 +0300
From: "Alexander Mashtakov" <amashtakov@gmail.com>
To: java-user@lucene.apache.org
Subject: Indexing and searching multiple languages
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55311_18083894.1152445749231"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_55311_18083894.1152445749231
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,
I'd like to ask your advice about how to organize index for documents
in multiple languages.

As an input:

 The database which holds the documents metadata. Each document consists
from
 language-neutral attributes, such as: document_id, date, categories mapping

 and language-dependent attributes, such as title, author, abstract etc.

 Each document has a default language record - "EN" and may have several
        records with language-dependent attributes translated to other
languages - for example
 "Russian" (one record per-language, with FK to document_id).

 Each document has a list of "attachments" (PDF, MSOffice files) with the
language
 "indicator". Attachment's language is selected from the controlled
vocabulary
   during the file upload and includes western/eastern european languages.

The search should be performed within the documents metadata and attachments
as well
in -ALL- languages (i.e. user just types in search term and click on button
- probably this
is a different topic about how to detect input language in order to apply
appropriate
analyzer to QueryParser).


At this moment of time I'm thinking about the following alternatives:


1. The simple one - create one record per-document with the basic
   metadata structure and include all languages for a given attribute
   in a single field - for example title will contain -ALL- translaltion
(EN, RU, etc).
   The "Contents" field will hold -ALL- attachments texts for a given
document.

2. Create a single record for each metadata language in one index. Create
second index
   with attachments - one record per document.


The first approach is easier, but I'm not sure whether the score will be
calculated correctly
In second approach - I don't know how to "join" the results from MultiQuery
and don't know
how it'll affect the performance (Sorry, I've just started to experiment
with Lucene).

Any ideas, suggestions ?

Thank you,
/Alexander

------=_Part_55311_18083894.1152445749231--

From java-user-return-21871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 12:11:49 2006
Return-Path: <java-user-return-21871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15864 invoked from network); 9 Jul 2006 12:11:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 12:11:49 -0000
Received: (qmail 42787 invoked by uid 500); 9 Jul 2006 12:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42752 invoked by uid 500); 9 Jul 2006 12:11:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42740 invoked by uid 99); 9 Jul 2006 12:11:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 05:11:32 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 22E0230EFCD5; Sun,  9 Jul 2006 08:10:29 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id CAD8930EFCD4
	for <java-user@lucene.apache.org>; Sun,  9 Jul 2006 08:10:18 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5238973.post@talk.nabble.com>
References: <5234403.post@talk.nabble.com> <1F4C0193-FDB1-467B-B3FB-AFD2E5D877AF@ehatchersolutions.com> <5238973.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C89F2ACB-67EF-4A82-B047-1F47656AD706@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: TermQuery doesn't support non-english charecters
Date: Sun, 9 Jul 2006 08:10:15 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What exactly is the value of myKey that doesn't work?   What text did  
you index (and with what Analyzer) that you expect to find?

If myField is a tokenized field, you need to be sure myKey has the  
same analysis done to it to match what would have gotten indexed.

	Erik


On Jul 9, 2006, at 7:09 AM, dan2000 wrote:

>
> Ok, here is my code:
> Term term = new Term(myField, myKey);
> TermQuery query = new TermQuery(term);
> mySearcher.search(query);
>
> If myKey is an English, everything works fine. If myKey is not an  
> English,
> it always return null.
>
> With other types queries, I can use this:
> Query query = new QueryParser(myField,
> myLanguageAnalyzer).parse(myField+":"+myKey);
> mySearcher.search(query);
>
> But this returns more than one result which is not what i wanted.  
> That's why
> I need to use TermQuery to do ID/Key based search. Any idea?
> -- 
> View this message in context: http://www.nabble.com/TermQuery-doesn% 
> 27t-support-non-english-charecters-tf1911988.html#a5238973
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 12:36:17 2006
Return-Path: <java-user-return-21872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17720 invoked from network); 9 Jul 2006 12:36:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 12:36:16 -0000
Received: (qmail 51976 invoked by uid 500); 9 Jul 2006 12:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51940 invoked by uid 500); 9 Jul 2006 12:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51929 invoked by uid 99); 9 Jul 2006 12:36:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 05:36:10 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 05:35:59 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FzYPt-0005iT-LN
	for java-user@lucene.apache.org; Sun, 09 Jul 2006 05:29:41 -0700
Message-ID: <5239478.post@talk.nabble.com>
Date: Sun, 9 Jul 2006 05:29:41 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: TermQuery doesn't support non-english charecters
In-Reply-To: <C89F2ACB-67EF-4A82-B047-1F47656AD706@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ANSI_X3.4-1968
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5234403.post@talk.nabble.com> <1F4C0193-FDB1-467B-B3FB-AFD2E5D877AF@ehatchersolutions.com> <5238973.post@talk.nabble.com> <C89F2ACB-67EF-4A82-B047-1F47656AD706@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


yes, myField is a tokenized field. I've used ChineseAnalyzer. here is an
examle text ??

Let me explain what exactly what I want.

myField is a tokenized field:
new Field("key",key, Field.Store.YES, Field.Index.TOKENIZED)

I sometimes need to find the exact match. What would be the best way to find
a exact match for a tokenized field? I've tried:
Query query = new QueryParser(myField,
myLanguageAnalyzer).parse(myField+":"+myKey); 
mySearcher.search(query); 

But I always get a lot of relevant results with above code. The
myLanguageAnalyzer is the same analyzer that was used for indexing.  I just
want something like "key = myKey" instead of " key like myKey".
-- 
View this message in context: http://www.nabble.com/TermQuery-doesn%27t-support-non-english-charecters-tf1911988.html#a5239478
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 09 16:13:04 2006
Return-Path: <java-user-return-21873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64292 invoked from network); 9 Jul 2006 16:13:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2006 16:13:04 -0000
Received: (qmail 5017 invoked by uid 500); 9 Jul 2006 16:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4992 invoked by uid 500); 9 Jul 2006 16:12:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4981 invoked by uid 99); 9 Jul 2006 16:12:56 -0000
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=SPF_HELO_SOFTFAIL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Jul 2006 09:12:40 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.6/8.13.6) with ESMTP id k69GBBlb113916
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Sun, 9 Jul 2006 16:11:11 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k69GE1st139344
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 9 Jul 2006 18:14:01 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k69GBBld011431
	for <java-user@lucene.apache.org>; Sun, 9 Jul 2006 18:11:11 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k69GBBcG011428
	for <java-user@lucene.apache.org>; Sun, 9 Jul 2006 18:11:11 +0200
In-Reply-To: <5239040.post@talk.nabble.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF95E16205.0B9B15B3-ON882571A6.005841DB-882571A6.0058D685@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Sun, 9 Jul 2006 09:10:20 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 09/07/2006 19:14:01
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> The problem I've had before was that I set my writer to null
> right after close it. That's why I got lock timeout exception
> when i try to create a the writer again. Guess I just need
> to close it, and re-open it would avoid the
> locking problems then.

It is valid to nullify the just closed writer - can't see how
this could cause the lock time-out exception. If there a simple
stand-alone code snippet that regenerates this problem I can take
a look at it.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 08:08:42 2006
Return-Path: <java-user-return-21874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66456 invoked from network); 10 Jul 2006 08:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 08:08:42 -0000
Received: (qmail 57714 invoked by uid 500); 10 Jul 2006 08:08:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57671 invoked by uid 500); 10 Jul 2006 08:08:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57660 invoked by uid 99); 10 Jul 2006 08:08:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 01:08:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 01:08:34 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 648155B779; Mon, 10 Jul 2006 01:08:11 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 580BB7F403
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 01:08:11 -0700 (PDT)
Date: Mon, 10 Jul 2006 01:08:11 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: FileDocument : cannot resolve symbol
In-Reply-To: <5d5204510607082050s5ca5b376gb69088492d506b65@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607100102080.26848@hal.rescomp.berkeley.edu>
References: <5d5204510607082050s5ca5b376gb69088492d506b65@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: when i try javac Package: org.apache.lucene.demo;
: name is IndexFiles.java
:
: it show me : FileDocument  ,error info : cannot resolve symbol
:
:
: how can i compile it?

The supported method for compiling Lucene is to use the ant build.xml
file.  If you take a look at the BUILD.txt file you'll find more
information.  If you run ant "package-zip" and still get compilation
errors, please mail the complete error message and someone will probably
be ablt to help you.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 08:18:36 2006
Return-Path: <java-user-return-21875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73340 invoked from network); 10 Jul 2006 08:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 08:18:35 -0000
Received: (qmail 77285 invoked by uid 500); 10 Jul 2006 08:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76658 invoked by uid 500); 10 Jul 2006 08:18:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76647 invoked by uid 99); 10 Jul 2006 08:18:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 01:18:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 01:18:26 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D07575B76C; Mon, 10 Jul 2006 01:18:05 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C77BC7F403
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 01:18:05 -0700 (PDT)
Date: Mon, 10 Jul 2006 01:18:05 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: java.lang.OutOfMemoryError when search in large index
In-Reply-To: <8062ce150607080050v2b9e11e0k67dbede17493bc77@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607100116550.26848@hal.rescomp.berkeley.edu>
References: <8062ce150607080050v2b9e11e0k67dbede17493bc77@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


These two threads may be educational...

http://www.nabble.com/OutOfMemory-error-while-sorting-tf1785358.html#a4862471

http://www.nabble.com/MemoryUsage-of-sorting-tf1861157.html#a5083259

: Date: Sat, 8 Jul 2006 15:50:30 +0800
: From: yuexiang zhang <easyjava@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: java.lang.OutOfMemoryError when search in large index
:
: I have finished importing 10,000,000 docments into Lucene 2.0 .
:
: Every  document includes  journalTitle and articleTitle both of which should
: be sortable, so I
: add other two fields : journalTitle_sort and  articleTitle_sort both of
: which use un_tokenized option for
: indexer.
:
: When I   query by "journaltitle:advertising" and sort by journaltitle_sort,
: it 's ok for return "total result num is 28684"
: But when I use the same query and change sort field from journaltitle_sort
: to articleTitle_sort, java.lang.OutOfMemoryError  happens.
: Then I try set JVM options to "-Xmx2048m", it also do take affect,
: java.lang.OutOfMemoryError  happens too.
:
: I think maybe lucene preload all  unique sortable field vlaue into memory,
: but my articleTitle_sort has too large different values because of
: un_tokenized  option.
:
: Who can help me? Thanks!
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 10:25:06 2006
Return-Path: <java-user-return-21876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9648 invoked from network); 10 Jul 2006 10:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 10:25:06 -0000
Received: (qmail 31047 invoked by uid 500); 10 Jul 2006 10:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30810 invoked by uid 500); 10 Jul 2006 10:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30796 invoked by uid 99); 10 Jul 2006 10:24:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 03:24:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 03:24:56 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1FzswN-0004qz-TM
	for java-user@lucene.apache.org; Mon, 10 Jul 2006 03:24:36 -0700
Message-ID: <5249234.post@talk.nabble.com>
Date: Mon, 10 Jul 2006 03:24:35 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <OF95E16205.0B9B15B3-ON882571A6.005841DB-882571A6.0058D685@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com> <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com> <5229084.post@talk.nabble.com> <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com> <5239040.post@talk.nabble.com> <OF95E16205.0B9B15B3-ON882571A6.005841DB-882571A6.0058D685@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Here is the simplified code that causes problem (Lock obtain timed out).
MyIndexer is used for indexing and searching. IndexTest starts 5 threads for
indexing and 100 threads for searching.

MyIndexer.java
public class MyIndexer
{
    File m_IndexFile;
    IndexReader m_IndexReader;
    Directory m_Directory;
    Searcher m_Searcher;
    Analyzer m_Analyzer;
    ReentrantReadWriteLock lock = new ReentrantReadWriteLock();

    public MyIndexer(File a_IndexFile) throws IOException
    {
        m_IndexFile = a_IndexFile;
        m_Analyzer = new StandardAnalyzer();
        m_Directory = FSDirectory.getDirectory(m_IndexFile, false);
        m_IndexReader = IndexReader.open(m_Directory);
        m_Searcher = new IndexSearcher(m_IndexReader);
    }

    public void addAndIndex(String a_Name) throws IOException
    {
        // lock.writeLock().lock();
        try
        {
            IndexWriter indexWriter = new IndexWriter(m_Directory,
m_Analyzer,
                    false);
            Document doc = new Document();
            doc.add(new Field("name", a_Name, Field.Store.YES,
                    Field.Index.TOKENIZED));
            indexWriter.addDocument(doc);
            indexWriter.optimize();
            indexWriter.close();
        }
        finally
        {
            // lock.writeLock().unlock();
        }
    }

    public Hits search(String a_Query)
    {
        try
        {
            // lock.readLock().lock();
            Query query = new QueryParser("name",
m_Analyzer).parse(a_Query);
            Hits hits = m_Searcher.search(query);
            return hits;
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            // lock.readLock().unlock();
        }
        return null;
    }
}

IndexTest.java
public class IndexTest extends Thread
{
    private boolean m_DoIndex = true;
    static MyIndexer m_IndexEntity;

    public IndexTest(boolean a_DoIndex)
    {
        m_DoIndex = a_DoIndex;
    }

    public static void main(String[] args) throws Exception
    {
        m_IndexEntity = new MyIndexer(new File(
                "C:/mytest/myindex"));

        for (int i = 0; i < 5; i++)
        {
            new IndexTest(true).start();
        }

        for (int i = 0; i < 100; i++)
        {
            new IndexTest(false).start();
        }

    }

    @Override
    public void run()
    {
        for (int i = 0; i < 50; i++)
        {
            try
            {
                if (m_DoIndex)
                {
                    String name = "Nick" + i;

                    System.out.println("Add and Indexing...");
                    m_IndexEntity.addAndIndex(name);
                    Thread.sleep(100);
                }
                else
                {
                    System.out.println("Searching...");
                    m_IndexEntity.search("name:Nick" + i);
                    Thread.sleep(20);
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }
        }
    }
}

-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5249234
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 13:57:08 2006
Return-Path: <java-user-return-21877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96807 invoked from network); 10 Jul 2006 13:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 13:57:07 -0000
Received: (qmail 90947 invoked by uid 500); 10 Jul 2006 13:57:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90908 invoked by uid 500); 10 Jul 2006 13:57:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90897 invoked by uid 99); 10 Jul 2006 13:56:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 06:56:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 06:56:59 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B673630EFCD6; Mon, 10 Jul 2006 09:56:38 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 6556730EFCD5
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 09:56:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5239478.post@talk.nabble.com>
References: <5234403.post@talk.nabble.com> <1F4C0193-FDB1-467B-B3FB-AFD2E5D877AF@ehatchersolutions.com> <5238973.post@talk.nabble.com> <C89F2ACB-67EF-4A82-B047-1F47656AD706@ehatchersolutions.com> <5239478.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <300276B2-0E3E-47E3-B140-ECD69F6D40A2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: TermQuery doesn't support non-english charecters
Date: Mon, 10 Jul 2006 09:56:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 9, 2006, at 8:29 AM, dan2000 wrote:

>
> yes, myField is a tokenized field. I've used ChineseAnalyzer. here  
> is an
> examle text ??
>
> Let me explain what exactly what I want.
>
> myField is a tokenized field:
> new Field("key",key, Field.Store.YES, Field.Index.TOKENIZED)
>
> I sometimes need to find the exact match. What would be the best  
> way to find
> a exact match for a tokenized field? I've tried:
> Query query = new QueryParser(myField,
> myLanguageAnalyzer).parse(myField+":"+myKey);
> mySearcher.search(query);
>
> But I always get a lot of relevant results with above code. The
> myLanguageAnalyzer is the same analyzer that was used for  
> indexing.  I just
> want something like "key = myKey" instead of " key like myKey".

I recommend you index the data into two separate fields, one  
tokenized, and one untokenized.  And vary which field you use  
depending on whether you want = or LIKE.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 14:04:24 2006
Return-Path: <java-user-return-21878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99682 invoked from network); 10 Jul 2006 14:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 14:04:24 -0000
Received: (qmail 5022 invoked by uid 500); 10 Jul 2006 14:04:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4443 invoked by uid 500); 10 Jul 2006 14:04:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4432 invoked by uid 99); 10 Jul 2006 14:04:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 07:04:16 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 07:04:16 -0700
Received: by nf-out-0910.google.com with SMTP id a25so660779nfc
        for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 07:03:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RTaljUuUhVV+TvzNeVgWDglXImEmaBcDZhxCDdw25MfWtmkNlDs2bqNP7+Qk0Frg/NvjGU/qIazPj3JpENOdyxLzISkp2IsOO6TbYgIms40pt+42Fq6EWw4bpnhJdz5EauU81XVCDAumj+1gvdhVeKaqsC/1z44C8z68Scv3XDQ=
Received: by 10.78.136.7 with SMTP id j7mr1678207hud;
        Mon, 10 Jul 2006 07:03:54 -0700 (PDT)
Received: by 10.78.155.3 with HTTP; Mon, 10 Jul 2006 07:03:52 -0700 (PDT)
Message-ID: <5d5204510607100703g661aa0e6q6a7b3f0d2308ea19@mail.gmail.com>
Date: Mon, 10 Jul 2006 22:03:54 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FileDocument : cannot resolve symbol
In-Reply-To: <Pine.LNX.4.58.0607100102080.26848@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_72224_20399406.1152540234617"
References: <5d5204510607082050s5ca5b376gb69088492d506b65@mail.gmail.com>
	 <Pine.LNX.4.58.0607100102080.26848@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_72224_20399406.1152540234617
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i fix it...when i "import org.apache.lucene.demo.FileDocument;"

and thk u for ur answer.

2006/7/10, Chris Hostetter <hossman_lucene@fucit.org>:
>
>
> : when i try javac Package: org.apache.lucene.demo;
> : name is IndexFiles.java
> :
> : it show me : FileDocument  ,error info : cannot resolve symbol
> :
> :
> : how can i compile it?
>
> The supported method for compiling Lucene is to use the ant build.xml
> file.  If you take a look at the BUILD.txt file you'll find more
> information.  If you run ant "package-zip" and still get compilation
> errors, please mail the complete error message and someone will probably
> be ablt to help you.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_72224_20399406.1152540234617--

From java-user-return-21879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 14:30:05 2006
Return-Path: <java-user-return-21879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10379 invoked from network); 10 Jul 2006 14:30:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 14:30:04 -0000
Received: (qmail 59892 invoked by uid 500); 10 Jul 2006 14:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59870 invoked by uid 500); 10 Jul 2006 14:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59804 invoked by uid 99); 10 Jul 2006 14:29:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 07:29:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 07:29:49 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k6AETKgK018395
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 07:29:20 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Mon, 10 
	Jul 2006 07:29:15 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Some obvious questions that I'll be happy to put on the WIKI
Date: Mon, 10 Jul 2006 07:29:15 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855DC@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Some obvious questions that I'll be happy to put on the WIKI
Thread-Index: AcakLTdXQRGKBrZZTdu7GzBOExwzzQ==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14558.003)
X-imss-scores: Clean:76.24283 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Big fan of lucene already.  Just looking for some advice, with apologies
in advance if it's been already answerd in the list and I just didn't
search right.

1. Lets say I want to store a term in MORE than one way: e.g., I want to
store the soundex version of a word and the real version of a word.  All
of the examples of extending analyzer return one thing (I think it's a
token string).  But what I want to do is something like IF this is just
a string of more than 4 characters, THEN store its literal AND soundex
versions.  I'm thinking I need to do something to tokenstream, but I'm
not sure what.

2. I've got a bunch of names assocated with a single person (aliases)
(document): e.g., "Gary Furash", "Gary 'The Nose' Furash", "Gary
Furnham".  If I stick them all in the same field ("names"), and search
on "Gary", that document gets overly weighted - since the name shows up
3 times.  So, I could just override the analyzer and only put in Gary
once (dedupe the names), but then I loose some of the nearness stuff:
that is, if a user types "Gary Furash", the document should hit higher -
those words are close together.

Thanks all.

Gary Furash, MBA, PMP, Applications Manager
Maricopa County Attorney's Office

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 14:30:57 2006
Return-Path: <java-user-return-21880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10844 invoked from network); 10 Jul 2006 14:30:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 14:30:57 -0000
Received: (qmail 62717 invoked by uid 500); 10 Jul 2006 14:30:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62691 invoked by uid 500); 10 Jul 2006 14:30:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62542 invoked by uid 99); 10 Jul 2006 14:30:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 07:30:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 07:30:37 -0700
Received: from (10.64.1.106) by webshield.cihi.ca via smtp
	 id 2434_5c2c5442_1021_11db_8adc_003048245df9;
	Mon, 10 Jul 2006 10:35:47 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A42D.519E0710"
Subject: Lucene-In-Action book - any details?..
Date: Mon, 10 Jul 2006 10:29:57 -0400
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F06766D51@tormail01.cihi.ca>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene-In-Action book - any details?..
Thread-Index: AcakLVF122zwxQdtTyaMAN/2MlVnNA==
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A42D.519E0710
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
Can anyone, pls, advise, based on which version of Lucene the 'Lucene in
Action' book is written? I've looked at various releases
(http://gulus.usherbrooke.ca/pub/appl/apache/lucene/java/archive/), and
it seems like there was a big gap between 1.4 and 1.9 release (over a
year), with 1.4 release around end of 2004. I assume the book is based
on 1.4 then, but there must have been a great deal of rework done since
then, especially that no new versions have been released for such a long
time (again, assuming, the changes were quite big and not
incremental...). So, how outdated the book is from these prospectives:
=20
- basics and overall architecture
- main algorithms descriptions (from which performance for different use
cases can be approximated)
- functionality
- API
=20
Thanks a lot!
=20
Vlad

------_=_NextPart_001_01C6A42D.519E0710--

From java-user-return-21881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 15:45:34 2006
Return-Path: <java-user-return-21881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47313 invoked from network); 10 Jul 2006 15:45:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 15:45:34 -0000
Received: (qmail 70216 invoked by uid 500); 10 Jul 2006 15:45:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70118 invoked by uid 500); 10 Jul 2006 15:45:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70055 invoked by uid 99); 10 Jul 2006 15:45:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:45:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:45:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 35BE630EFCD5; Mon, 10 Jul 2006 11:44:46 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id A445C30EFCD5
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 11:44:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <373399D6389D8C42B4EAD9BE2B6B5C5F06766D51@tormail01.cihi.ca>
References: <373399D6389D8C42B4EAD9BE2B6B5C5F06766D51@tormail01.cihi.ca>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9FE1F699-11AB-43EA-9EDE-8A927C6D9843@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene-In-Action book - any details?..
Date: Mon, 10 Jul 2006 11:44:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Vlad,

You're right - LIA 1st edition was written for Lucene 1.4.x.  All of  
the code works fine with Lucene 1.9 (with deprecation warnings that  
can be safely ignored), but documented tweaks are necessary to get  
the LIA code to compile with Lucene 2.0.

The coverage of the basics and architecture is still current and  
relevant, as well as algorithms, techniques, functionality, and for  
the most part the API as well.  There are some new features in  
1.9/2.0 that, of course, are not covered (if only I had that time  
machine handy).  Otis and I are in the planning stages of the 2nd  
edition, the calm before the storm.  The 2nd edition should see the  
light of day by the end of the year, or perhaps in early '07 - that  
is the best clarity I get from the crystal ball today.

Overall I think those new to Lucene will benefit from Lucene in  
Action 1st edition, and add to that reading Lucene 2.0 CHANGES.txt to  
catch up on API tweaks and new features.

	Erik

On Jul 10, 2006, at 10:29 AM, Vladimir Olenin wrote:

> Hi,
>
> Can anyone, pls, advise, based on which version of Lucene the  
> 'Lucene in
> Action' book is written? I've looked at various releases
> (http://gulus.usherbrooke.ca/pub/appl/apache/lucene/java/archive/),  
> and
> it seems like there was a big gap between 1.4 and 1.9 release (over a
> year), with 1.4 release around end of 2004. I assume the book is based
> on 1.4 then, but there must have been a great deal of rework done  
> since
> then, especially that no new versions have been released for such a  
> long
> time (again, assuming, the changes were quite big and not
> incremental...). So, how outdated the book is from these prospectives:
>
> - basics and overall architecture
> - main algorithms descriptions (from which performance for  
> different use
> cases can be approximated)
> - functionality
> - API
>
> Thanks a lot!
>
> Vlad


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 15:49:53 2006
Return-Path: <java-user-return-21882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49569 invoked from network); 10 Jul 2006 15:49:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 15:49:52 -0000
Received: (qmail 81853 invoked by uid 500); 10 Jul 2006 15:49:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81830 invoked by uid 500); 10 Jul 2006 15:49:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81812 invoked by uid 99); 10 Jul 2006 15:49:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:49:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.207.78.3] (HELO tormail01.cihi.ca) (205.207.78.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:49:34 -0700
Received: from (10.64.1.106) by webshield.cihi.ca via smtp
	 id 64ec_646d9e8a_102c_11db_97c1_003048245df9;
	Mon, 10 Jul 2006 11:54:44 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene-In-Action book - any details?..
Date: Mon, 10 Jul 2006 11:48:55 -0400
Message-ID: <373399D6389D8C42B4EAD9BE2B6B5C5F06766DF9@tormail01.cihi.ca>
In-Reply-To: <9FE1F699-11AB-43EA-9EDE-8A927C6D9843@ehatchersolutions.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene-In-Action book - any details?..
Thread-Index: AcakN9pQOyagLra9QfC6wRVaq/V/XAAAHgzQ
From: "Vladimir Olenin" <VOlenin@cihi.ca>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, Eric.=20


Vlad

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Monday, July 10, 2006 11:45 AM
To: java-user@lucene.apache.org
Subject: Re: Lucene-In-Action book - any details?..

Vlad,

You're right - LIA 1st edition was written for Lucene 1.4.x.  All of the
code works fine with Lucene 1.9 (with deprecation warnings that can be
safely ignored), but documented tweaks are necessary to get the LIA code
to compile with Lucene 2.0.

The coverage of the basics and architecture is still current and
relevant, as well as algorithms, techniques, functionality, and for the
most part the API as well.  There are some new features in 1.9/2.0 that,
of course, are not covered (if only I had that time machine handy).
Otis and I are in the planning stages of the 2nd edition, the calm
before the storm.  The 2nd edition should see the light of day by the
end of the year, or perhaps in early '07 - that is the best clarity I
get from the crystal ball today.

Overall I think those new to Lucene will benefit from Lucene in Action
1st edition, and add to that reading Lucene 2.0 CHANGES.txt to catch up
on API tweaks and new features.

	Erik

On Jul 10, 2006, at 10:29 AM, Vladimir Olenin wrote:

> Hi,
>
> Can anyone, pls, advise, based on which version of Lucene the 'Lucene=20
> in Action' book is written? I've looked at various releases=20
> (http://gulus.usherbrooke.ca/pub/appl/apache/lucene/java/archive/),
> and
> it seems like there was a big gap between 1.4 and 1.9 release (over a=20
> year), with 1.4 release around end of 2004. I assume the book is based

> on 1.4 then, but there must have been a great deal of rework done=20
> since then, especially that no new versions have been released for=20
> such a long time (again, assuming, the changes were quite big and not=20
> incremental...). So, how outdated the book is from these prospectives:
>
> - basics and overall architecture
> - main algorithms descriptions (from which performance for different=20
> use cases can be approximated)
> - functionality
> - API
>
> Thanks a lot!
>
> Vlad


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 15:56:53 2006
Return-Path: <java-user-return-21883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52136 invoked from network); 10 Jul 2006 15:56:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 15:56:52 -0000
Received: (qmail 95742 invoked by uid 500); 10 Jul 2006 15:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95708 invoked by uid 500); 10 Jul 2006 15:56:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95697 invoked by uid 99); 10 Jul 2006 15:56:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:56:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:56:35 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k6AFu6El007426
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 08:56:06 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Mon, 10 
	Jul 2006 08:56:05 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: How do you use a different analyzer by field?
Date: Mon, 10 Jul 2006 08:56:04 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855E9@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do you use a different analyzer by field?
Thread-Index: AcakOVjHAD01NjZZRueA3yFCOxxrOQ==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14558.003)
X-imss-scores: Clean:28.11163 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe I'm approaching this wrong (apologies) and didn't search correctly
through the archives (mia culpa), but...

If I want to apply a different analyzer to different fields in the
document, how do I do that?  It seems like when you create the index you
pass it an analyzer, and that's the one you're stuck with for any field
added to a document added to the index.  However, for field A, (a type
of case number) I might want to do X, for field B, I might want to do Y.
I could put all this in a bunch of if statements in the analyzer, but
that seems sort of odd - well, not if the assumption of the lucene
creators is that you're always indexing a single coherent real-world
document (which it may have been).

Thanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 15:58:12 2006
Return-Path: <java-user-return-21884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52792 invoked from network); 10 Jul 2006 15:58:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 15:58:12 -0000
Received: (qmail 98453 invoked by uid 500); 10 Jul 2006 15:58:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98421 invoked by uid 500); 10 Jul 2006 15:58:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98410 invoked by uid 99); 10 Jul 2006 15:58:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:58:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 08:57:56 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k6AFvT8V007862
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 08:57:29 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Mon, 10 
	Jul 2006 08:57:29 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: What are norms?
Date: Mon, 10 Jul 2006 08:57:28 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855EA@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What are norms?
Thread-Index: AcakOYtNRYvN9TNSQX+Ih5u875S9YA==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14558.003)
X-imss-scores: Clean:58.48892 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm guessing they're neither the guy from Cheers nor the sociology term
;-)

The examples have you creating them before you do searches.  What are
they?  The javadoc doesn't really explain their function (or at least
not in a way I could figure out).  Thanks.

G

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 16:07:47 2006
Return-Path: <java-user-return-21885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56343 invoked from network); 10 Jul 2006 16:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 16:07:47 -0000
Received: (qmail 25714 invoked by uid 500); 10 Jul 2006 16:07:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25103 invoked by uid 500); 10 Jul 2006 16:07:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25092 invoked by uid 99); 10 Jul 2006 16:07:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 09:07:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 09:07:30 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k6AG733r010243
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 09:07:03 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Mon, 10 
	Jul 2006 09:07:02 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: General Approach: Analyzer versus Query
Date: Mon, 10 Jul 2006 09:07:02 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855EB@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: General Approach: Analyzer versus Query
Thread-Index: AcakOuFGX8f1jd5sQdaj0f/zLXpt3g==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14558.003)
X-imss-scores: Clean:50.60928 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

For some things, it's obvious that you would have to put them both on
the front end (during indexing) and on the back end.  E.g., if you want
to do a soundex search, you'd want to encode the words with their
soundex version during index creation, and when you query incode the
user's search input as a soundex version.

In other cases, it's not clear to me what the right approach is.  Let's
say user's are sorting by a formatted number: e.g., YYYYNNNNNN, like
2005123456.  User's might put in "05123456" or "2005123456".  In either
case, that query would be considered a hit, with 2005123456 being more
exact than 05123456, but still a good hit.

I could (1) up front, put in both versions of the numbers or (2) during
query, play with the number and search both ways.  What's the best
practice approach?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 16:19:28 2006
Return-Path: <java-user-return-21886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59926 invoked from network); 10 Jul 2006 16:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 16:19:28 -0000
Received: (qmail 54553 invoked by uid 500); 10 Jul 2006 16:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54522 invoked by uid 500); 10 Jul 2006 16:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54511 invoked by uid 99); 10 Jul 2006 16:19:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 09:19:21 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.242] (HELO web50309.mail.yahoo.com) (206.190.38.242)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Jul 2006 09:19:11 -0700
Received: (qmail 2427 invoked by uid 60001); 10 Jul 2006 16:18:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=LzvHfWUXG7ZN885A4LGFtTLtVzHTbA7EKi1xby7S/I78loMmwRd7K4KgeAL4Q7rle8I+0VSh7uvej1gHVqYePr1i9iB9kikaJH9cXskTUq69RPM9T5zmbG7QNX7gAHAen39AnVLFK1e1Egp65PFE9iWNS5gnfPGwiW3w4EUVZMU=  ;
Message-ID: <20060710161844.2425.qmail@web50309.mail.yahoo.com>
Received: from [72.229.167.99] by web50309.mail.yahoo.com via HTTP; Mon, 10 Jul 2006 09:18:44 PDT
Date: Mon, 10 Jul 2006 09:18:44 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How do you use a different analyzer by field?
To: java-user@lucene.apache.org
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855E9@mcaosx2.ca.mcao.maricopa.gov>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Use PerFieldAnalyzerWrapper

----- Original Message ----
From: Furash Gary <furashg@mcao.maricopa.gov>
To: java-user@lucene.apache.org
Sent: Monday, July 10, 2006 11:56:04 AM
Subject: How do you use a different analyzer by field?

Maybe I'm approaching this wrong (apologies) and didn't search correctly
through the archives (mia culpa), but...

If I want to apply a different analyzer to different fields in the
document, how do I do that?  It seems like when you create the index you
pass it an analyzer, and that's the one you're stuck with for any field
added to a document added to the index.  However, for field A, (a type
of case number) I might want to do X, for field B, I might want to do Y.
I could put all this in a bunch of if statements in the analyzer, but
that seems sort of odd - well, not if the assumption of the lucene
creators is that you're always indexing a single coherent real-world
document (which it may have been).

Thanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 17:01:37 2006
Return-Path: <java-user-return-21887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76738 invoked from network); 10 Jul 2006 17:01:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 17:01:37 -0000
Received: (qmail 52860 invoked by uid 500); 10 Jul 2006 17:01:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52836 invoked by uid 500); 10 Jul 2006 17:01:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52825 invoked by uid 99); 10 Jul 2006 17:01:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 10:01:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 10:01:22 -0700
Received: by py-out-1112.google.com with SMTP id w49so3986896pyg
        for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 10:00:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HpZSfBtW/dweNuMCRRBzki57r8E7u2azoevnR03a0IiQglcbILKJvEn7kXKJvTeaEmxu+4ygNSl0emAjL+eO0AGjK6t4RwHrMRa7rEfjUKfdpu0HiKlW9dvMbY7LImNX7FOpUgYk7KPJZTdDTG6jbAsCqxMwp6dDTy1DCMMlh0w=
Received: by 10.35.134.12 with SMTP id l12mr5238084pyn;
        Mon, 10 Jul 2006 10:00:40 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 10 Jul 2006 10:00:40 -0700 (PDT)
Message-ID: <c68e39170607101000y2ef7d233i213ca3bd613109ad@mail.gmail.com>
Date: Mon, 10 Jul 2006 13:00:40 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What are norms?
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855EA@mcaosx2.ca.mcao.maricopa.gov>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855EA@mcaosx2.ca.mcao.maricopa.gov>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Norms are per indexed-field.  For every document it's the product of
the lengthNorm and the index-time boost.  It's really more of an
implementation detail that you shouldn't need to know about unless you
have a lot of indexed fields and want to omit them for memory reasons.

See DefaultSimilarity javadoc for lengthNorm... it's what makes hits
on shorter fields score higher.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

On 7/10/06, Furash Gary <furashg@mcao.maricopa.gov> wrote:
> I'm guessing they're neither the guy from Cheers nor the sociology term
> ;-)
>
> The examples have you creating them before you do searches.  What are
> they?  The javadoc doesn't really explain their function (or at least
> not in a way I could figure out).  Thanks.
>
> G

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 18:47:33 2006
Return-Path: <java-user-return-21888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20284 invoked from network); 10 Jul 2006 18:47:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 18:47:33 -0000
Received: (qmail 51596 invoked by uid 500); 10 Jul 2006 18:47:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51550 invoked by uid 500); 10 Jul 2006 18:47:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51530 invoked by uid 99); 10 Jul 2006 18:47:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 11:47:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 11:47:23 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 10 Jul 2006 14:47:02 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 10 Jul 2006 14:46:56 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: BooleanQuery question
Date: Mon, 10 Jul 2006 14:51:51 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81134E4B8C@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery question
Thread-Index: AcahN4K5GfnxIie4SOG03bba/WZ+7gDGl+LQ
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Jul 2006 18:46:56.0398 (UTC) FILETIME=[37E94AE0:01C6A451]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That worked... thanks!

-----Original Message-----
From: Michael D. Curtin [mailto:mike@curtin.com]=20
Sent: Thursday, July 06, 2006 1:04 PM
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery question

Van Nguyen wrote:

> I just want results that have:
>=20
> ID: 1234 OR 2344 OR 2323
>=20
> LOCATION: A1=20
>=20
> LANGUAGE: ENU
>=20
> This query returns everything from my index.  How would I create a
query
> that will only return results the must have LOCATION and LANGUAGE and
> have only those three IDs.

I think you'll need to put the three ID-based TermQuerys into a=20
sub-BooleanQuery instead of the top-level query.  Something like this:

BooleanQuery subquery =3D new BooleanQuery();
subquery.add(term1, BooleanClause.Occur.Should);
subquery.add(term2, BooleanClause.Occur.Should);
subquery.add(term3, BooleanClause.Occur.Should);
query.add(subquery, BooleanClause.Occur.MUST);

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 19:40:51 2006
Return-Path: <java-user-return-21889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49477 invoked from network); 10 Jul 2006 19:40:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 19:40:51 -0000
Received: (qmail 55349 invoked by uid 500); 10 Jul 2006 19:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55325 invoked by uid 500); 10 Jul 2006 19:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55314 invoked by uid 99); 10 Jul 2006 19:40:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:40:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 12:40:39 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.6/8.13.6) with ESMTP id k6AJeI8f023260
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 19:40:18 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6AJhAgd115542
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 21:43:10 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6AJeHOu013199
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 21:40:17 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6AJeDQE013161
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 21:40:13 +0200
In-Reply-To: <5249234.post@talk.nabble.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF70C239BF.EC027ED9-ON882571A7.0065881B-882571A7.006BF84A@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 10 Jul 2006 12:39:19 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 10/07/2006 22:43:05
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The lock time out exception is caused by trying to open multiple
IndexWriter objects in parallel - each of the 5 threads is creating its own
IndexWriter object in each invocation of addAndIndex(). This cannot work -
I think that chapter 2.9 of "Lucene in Action" is essential reading for
fixing this test program.

It seems that this code is just for testing multi-threading and not for
efficiency/correctness, but just in case, notice that (1) Optimizing and
closing the IndexWriter after each doc added is very inefficient, and (2)
Since a single IndexSearcher/Reader object is created only once (there's a
single call to new MyIndexer(), in the main()) - this searcher/reader would
not reflect any doc additions done afterwards.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 10 23:51:53 2006
Return-Path: <java-user-return-21890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34668 invoked from network); 10 Jul 2006 23:51:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2006 23:51:53 -0000
Received: (qmail 34684 invoked by uid 500); 10 Jul 2006 23:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34438 invoked by uid 500); 10 Jul 2006 23:51:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34427 invoked by uid 99); 10 Jul 2006 23:51:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 16:51:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 16:51:45 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 10 Jul 2006 19:51:24 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 10 Jul 2006 19:51:18 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A47B.C0535E37"
Subject: question regarding Field.Index.UN_TOKENZED
Date: Mon, 10 Jul 2006 19:56:16 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81134E4EC7@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: question regarding Field.Index.UN_TOKENZED
Thread-Index: AcakfG6jGAwcnVFdSNeYD0iSfw5Z6w==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Jul 2006 23:51:18.0246 (UTC) FILETIME=[BCD22860:01C6A47B]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A47B.C0535E37
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I'm storing a field in an index with that option
(Field.Index.UN_TOKENZIED).

=20

The String that is being stored is: NORTH SAFETY PRODUCT (all uppercase)

=20

When I try a wildcard query against that field, it only produces results
if the query term is capitalized. =20

=20

I'm using the StandardAnalyzer class as my analyzer.  I've also tried
using the KeywordAnalyzer, but that doesn't return the results I was
looking for.

=20

Is there an analyzer that tokenizes the whole field and is not case
sensitive or is there a way to store a term with the UN_TOKENIZED option
(needs to be UN_TOKENIZED for sorting purposes) and search against that
field ignoring the case?

=20


------_=_NextPart_001_01C6A47B.C0535E37--

From java-user-return-21891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 01:30:25 2006
Return-Path: <java-user-return-21891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64527 invoked from network); 11 Jul 2006 01:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 01:30:25 -0000
Received: (qmail 63431 invoked by uid 500); 11 Jul 2006 01:30:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62448 invoked by uid 500); 11 Jul 2006 01:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62437 invoked by uid 99); 11 Jul 2006 01:30:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 18:30:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 18:30:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 097FD5B774; Mon, 10 Jul 2006 18:29:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E89EB7F403
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 18:29:48 -0700 (PDT)
Date: Mon, 10 Jul 2006 18:29:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Some obvious questions that I'll be happy to put on the WIKI
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855DC@mcaosx2.ca.mcao.maricopa.gov>
Message-ID: <Pine.LNX.4.58.0607101822270.9142@hal.rescomp.berkeley.edu>
References: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855DC@mcaosx2.ca.mcao.maricopa.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Furash: welcome to Lucene.  I suspect you'll find it extremely
advantageous to pick up a copy of "Lucene In Action" it has a lot of great
examples that may help you understand some of these questions...

: token string).  But what I want to do is something like IF this is just
: a string of more than 4 characters, THEN store its literal AND soundex
: versions.  I'm thinking I need to do something to tokenstream, but I'm
: not sure what.

take a look at the position increment -- it allows analyzers to specify
that two tokens appear at the same spot.

: 2. I've got a bunch of names assocated with a single person (aliases)
: (document): e.g., "Gary Furash", "Gary 'The Nose' Furash", "Gary
: Furnham".  If I stick them all in the same field ("names"), and search
: on "Gary", that document gets overly weighted - since the name shows up
: 3 times.  So, I could just override the analyzer and only put in Gary
: once (dedupe the names), but then I loose some of the nearness stuff:
: that is, if a user types "Gary Furash", the document should hit higher -
: those words are close together.

there's a few things you can do here ... first off you need to remember
that "Gary Furash" and "Gary 'The Nose' Furash" can both match on a query
for the phrase "Gary Furash" if you turn up the slop value.  Second, you
can alter things like the tf value to reduce the impact of having "Gary"
in the field more then once -- it's even possible to override the
Similarty class (and thus the tf function) used on an individual Query (so
you can only have it affect queries on the "name" field and not the other
fields (but it's not exactly easy).

lastly, you can always put aliases in a seperate field from proper names
and search on them seperately.

it really comes down to what is important to you.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 01:33:43 2006
Return-Path: <java-user-return-21892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65119 invoked from network); 11 Jul 2006 01:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 01:33:42 -0000
Received: (qmail 67525 invoked by uid 500); 11 Jul 2006 01:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67493 invoked by uid 500); 11 Jul 2006 01:33:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67479 invoked by uid 99); 11 Jul 2006 01:33:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 18:33:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 18:33:35 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 71F7E5B770; Mon, 10 Jul 2006 18:33:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6643F7F403
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 18:33:15 -0700 (PDT)
Date: Mon, 10 Jul 2006 18:33:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: General Approach: Analyzer versus Query
In-Reply-To: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855EB@mcaosx2.ca.mcao.maricopa.gov>
Message-ID: <Pine.LNX.4.58.0607101830290.9142@hal.rescomp.berkeley.edu>
References: <A8F90A7E212A1B49A8A9EBF2E5C3E106056855EB@mcaosx2.ca.mcao.maricopa.gov>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I could (1) up front, put in both versions of the numbers or (2) during
: query, play with the number and search both ways.  What's the best
: practice approach?

In the imortal words of Erik Hatcher...

	"It Depends :)"

#1 takes up more space on disk and in memory, and makes it imposible to
sort on that field (you can only sort on fields with 0 or 1 terms per doc)
... #2 makes the query take a little longer ... you really won't notice a
difference if you have an index of 1000 Documents and one user, but you
might if you have 1,000,000 items and 100 concurrent users.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 01:38:19 2006
Return-Path: <java-user-return-21893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66376 invoked from network); 11 Jul 2006 01:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 01:38:18 -0000
Received: (qmail 72550 invoked by uid 500); 11 Jul 2006 01:38:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72521 invoked by uid 500); 11 Jul 2006 01:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72510 invoked by uid 99); 11 Jul 2006 01:38:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 18:38:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 18:38:12 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 047E05B774; Mon, 10 Jul 2006 18:37:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0096B7F403
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 18:37:51 -0700 (PDT)
Date: Mon, 10 Jul 2006 18:37:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: question regarding Field.Index.UN_TOKENZED
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81134E4EC7@UREXCHVS3.ur.com>
Message-ID: <Pine.LNX.4.58.0607101835240.9142@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E81134E4EC7@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm storing a field in an index with that option
: (Field.Index.UN_TOKENZIED).

the key to understanding your problem, is to realize that...

	UN_TOKENIZED == Not Analyzed


...personally, i think name of the constant is missleading.


: The String that is being stored is: NORTH SAFETY PRODUCT (all uppercase)

: When I try a wildcard query against that field, it only produces results
: if the query term is capitalized.

that's because the term you've put in the index in capitalized.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 02:33:30 2006
Return-Path: <java-user-return-21894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77141 invoked from network); 11 Jul 2006 02:33:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 02:33:29 -0000
Received: (qmail 32307 invoked by uid 500); 11 Jul 2006 02:33:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32237 invoked by uid 500); 11 Jul 2006 02:33:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32172 invoked by uid 99); 11 Jul 2006 02:33:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 19:33:15 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 19:33:14 -0700
Received: by nf-out-0910.google.com with SMTP id p77so161901nfc
        for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 19:32:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=m0EAUvryvRspbMDgdB8Bdn+FJXbC+yfMi3smbXzaEgO7yoYI8KivaQ28FJeOI86QpWR4M+1ICfFty4Hr+PoEgfGgLdXEWEqVBo2yQGFPU0dJMuhCliuPd7P1jhiw+l0o/yj8CxlRX4lbLK7FLjlWOAEU6EkE+fFtcKgnLsxv91o=
Received: by 10.78.165.16 with SMTP id n16mr1965422hue;
        Mon, 10 Jul 2006 19:32:52 -0700 (PDT)
Received: by 10.78.184.19 with HTTP; Mon, 10 Jul 2006 19:32:52 -0700 (PDT)
Message-ID: <6c33f9950607101932g50ac4e79s76e6c73931315933@mail.gmail.com>
Date: Tue, 11 Jul 2006 10:32:52 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Reducing the boost for a particular Term
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a index from which I have a number of documents from authors,
but would like to drop the relevance/score for documents from one
particular author using the query. That is for documents returned by
querying: (content:"miracle cure"), I would like to reduce the
relevancy of authorid:3024

However I tried several combinations and they didnt work the way I
expected, e.g.

+(content:"miracle cure") (authorid:3024^0.5)
=> increases authorid:3024 score instead

+(content:"miracle cure") +(authorid:3024^0.5 ((-authorid:3024))^10.0)
=> The boosted optional prohibited term seems to have no effect

+(content:"miracle cure") (-authorid:3024^0.5)
=> Again, the boosted optional prohibited term seems to have no effect

Also this approach appears to add a small modifier to the overall
relevancy returned by +(content:"miracle cure"). Is there a better way
to do a multiplicative modification - so that for example the score as
returned by +(content:"miracle cure") is reduced to 0.6 of its value
if the authorid is 3024.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 03:41:15 2006
Return-Path: <java-user-return-21895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98718 invoked from network); 11 Jul 2006 03:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 03:41:15 -0000
Received: (qmail 26759 invoked by uid 500); 11 Jul 2006 03:41:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25802 invoked by uid 500); 11 Jul 2006 03:41:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25791 invoked by uid 99); 11 Jul 2006 03:41:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 20:41:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 20:41:08 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 519E25B770; Mon, 10 Jul 2006 20:40:46 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4CCBB7F403
	for <java-user@lucene.apache.org>; Mon, 10 Jul 2006 20:40:46 -0700 (PDT)
Date: Mon, 10 Jul 2006 20:40:46 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Reducing the boost for a particular Term
In-Reply-To: <6c33f9950607101932g50ac4e79s76e6c73931315933@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607102029500.13314@hal.rescomp.berkeley.edu>
References: <6c33f9950607101932g50ac4e79s76e6c73931315933@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: particular author using the query. That is for documents returned by
: querying: (content:"miracle cure"), I would like to reduce the
: relevancy of authorid:3024

: +(content:"miracle cure") +(authorid:3024^0.5 ((-authorid:3024))^10.0)
: => The boosted optional prohibited term seems to have no effect
:
: +(content:"miracle cure") (-authorid:3024^0.5)
: => Again, the boosted optional prohibited term seems to have no effect

that's because you can't have a boolean query containing nothing but
negative clauses ... to "penalize" documents that match a query, you must
reward documents which match the inverse of that query.   From a Set
perspective the inverse of a query like "authorid:3024" is...

      +(+matchalldocs:true -authorid:3024)

...but for your purposes, you could just as easily use...

   +content:"miracle cure" +(+content:"miracle cure" -authorid:3024)

: Also this approach appears to add a small modifier to the overall
: relevancy returned by +(content:"miracle cure"). Is there a better way
: to do a multiplicative modification - so that for example the score as
: returned by +(content:"miracle cure") is reduced to 0.6 of its value
: if the authorid is 3024.

First off: don't place to much stock in the specific numeric score value
returned by a search, Scores aren't absolute, so trying to do absolute
things to them isn't really meaningful.

Second: take a look at the Explanation class (and the Searcher.explain
method) ... it will help you understand why you get the scores you are
getting, and how methods in the Similarity class (which you can change)
affect things.  With the query structure i outlined above, you can
probably get pretty close to what you want just by tewaking the boosts.

Third: if you really want to go all out, you could write a HitCollector to
penalize documents by performing some arbitrary match on the
scores of documents matching some specific criteria (like the authorid)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 03:46:40 2006
Return-Path: <java-user-return-21896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 332 invoked from network); 11 Jul 2006 03:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 03:46:40 -0000
Received: (qmail 34167 invoked by uid 500); 11 Jul 2006 03:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34144 invoked by uid 500); 11 Jul 2006 03:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34133 invoked by uid 99); 11 Jul 2006 03:46:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Jul 2006 20:46:33 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.113] (HELO web34115.mail.mud.yahoo.com) (66.163.178.113)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Jul 2006 20:46:32 -0700
Received: (qmail 59426 invoked by uid 60001); 11 Jul 2006 03:46:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=hMHc6CRRINBUw1xFpvJ8f2dkUpwRmecXZ82WihwpDQcZMQSp1fxr9u1q9T3lAnK4Q2zbpVHcRLPDgsz13UEwac9Cln5/lWZzdwopaC4teeU3vFRAR9OZU4NASrnoL64xD46iH5MJTI8gw4L1fmBN4g+8ME5V9R+ai4Je2tzSBjA=  ;
Message-ID: <20060711034611.59424.qmail@web34115.mail.mud.yahoo.com>
Received: from [66.166.72.28] by web34115.mail.mud.yahoo.com via HTTP; Mon, 10 Jul 2006 20:46:11 PDT
Date: Mon, 10 Jul 2006 20:46:11 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: Re: General Approach: Analyzer versus Query
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0607101830290.9142@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Would Lucene's FuzzyQuery be useful in this case? I
suppose it would depend on how meaningful the
sequences of numbers are.

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/FuzzyQuery.html

--- Chris Hostetter <hossman_lucene@fucit.org> wrote:

> 
> : I could (1) up front, put in both versions of the
> numbers or (2) during
> : query, play with the number and search both ways. 
> What's the best
> : practice approach?
> 
> In the imortal words of Erik Hatcher...
> 
> 	"It Depends :)"
> 
> #1 takes up more space on disk and in memory, and
> makes it imposible to
> sort on that field (you can only sort on fields with
> 0 or 1 terms per doc)
> ... #2 makes the query take a little longer ... you
> really won't notice a
> difference if you have an index of 1000 Documents
> and one user, but you
> might if you have 1,000,000 items and 100 concurrent
> users.
> 
> 
> 
> -Hoss
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 07:54:21 2006
Return-Path: <java-user-return-21897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98182 invoked from network); 11 Jul 2006 07:54:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 07:54:19 -0000
Received: (qmail 41715 invoked by uid 500); 11 Jul 2006 07:53:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41301 invoked by uid 500); 11 Jul 2006 07:53:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40878 invoked by uid 99); 11 Jul 2006 07:53:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 00:53:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 00:53:43 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id 4356B108C97; Tue, 11 Jul 2006 09:55:57 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 2D9FAA7CCC
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 09:55:55 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id E734DC06B
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 09:53:46 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: Lucene WordExtractor
Date: Tue, 11 Jul 2006 09:53:17 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <20060711034611.59424.qmail@web34115.mail.mud.yahoo.com>
Thread-Index: AcaknK9TRUlpGg5wRWCJN35vH9z8pgAIMlJA
Message-Id: <20060711075346.E734DC06B@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi all!
I=B4m working with poi-bin-3.0-alpha2-20060616
I=B4m trying to extract text from a Word document using the class
org.apache.poi.hwpf.extractor.WordExtractor but I get the following bugs
"Exception in thread main java.lang.NoSuchMethodError"
I have also tried with the parameter -doc and the name of the word =
document
but without success
I=B4ve execute the classes QuickTest.class and HWPFDocument.class, also =
with
bugs
Can anyone help me?
Thanks all
Cheers=20
Teresa


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 09:31:00 2006
Return-Path: <java-user-return-21898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32163 invoked from network); 11 Jul 2006 09:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 09:30:59 -0000
Received: (qmail 30065 invoked by uid 500); 11 Jul 2006 09:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30030 invoked by uid 500); 11 Jul 2006 09:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30016 invoked by uid 99); 11 Jul 2006 09:30:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:30:53 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 02:30:52 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G0EZc-0004US-9R
	for java-user@lucene.apache.org; Tue, 11 Jul 2006 02:30:32 -0700
Message-ID: <5266343.post@talk.nabble.com>
Date: Tue, 11 Jul 2006 02:30:32 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <OF70C239BF.EC027ED9-ON882571A7.0065881B-882571A7.006BF84A@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com> <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com> <5229084.post@talk.nabble.com> <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com> <5239040.post@talk.nabble.com> <OF95E16205.0B9B15B3-ON882571A6.005841DB-882571A6.0058D685@il.ibm.com> <5249234.post@talk.nabble.com> <OF70C239BF.EC027ED9-ON882571A7.0065881B-882571A7.006BF84A@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Thanks for your advice Doron. I've tried changing to one indexing thread
(instead of 5) but still get the same problem. can't figure out why this
happens.
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5266343
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 10:16:17 2006
Return-Path: <java-user-return-21899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48543 invoked from network); 11 Jul 2006 10:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 10:16:17 -0000
Received: (qmail 94536 invoked by uid 500); 11 Jul 2006 10:16:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93975 invoked by uid 500); 11 Jul 2006 10:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93964 invoked by uid 99); 11 Jul 2006 10:16:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:16:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:16:07 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 5A6BA187BF; Tue, 11 Jul 2006 10:15:46 +0000 (GMT)
Received: from scwdev01rob (62-249-249-2.no-dns-yet.enta.net [62.249.249.2])
	by mail.seseit.com (Postfix) with ESMTP id CCAC9187BE
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 10:15:43 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Compressed fields
Date: Tue, 11 Jul 2006 11:16:41 +0100
Message-ID: <001401c6a4d3$1bcf8f40$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Acai/9WQYvt8qCkSRZ2EkaaLJInycQB0qPwg
In-Reply-To: <1947084a0607080954w4ed08af0k1ec7522ca0ee9892@mail.gmail.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What's a sensible guideline for length of an un-indexed field and whether to
store it compressed or not? I have a 300 character document synopsis, which
I store. Would there be any saving having it compressed?

Can you have an index with a stored un-indexed field which is sometimes
compressed and sometimes not?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 10:21:42 2006
Return-Path: <java-user-return-21900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50879 invoked from network); 11 Jul 2006 10:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 10:21:41 -0000
Received: (qmail 12504 invoked by uid 500); 11 Jul 2006 10:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12462 invoked by uid 500); 11 Jul 2006 10:21:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12426 invoked by uid 99); 11 Jul 2006 10:21:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:21:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:21:28 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T7969f150b588ad3ee41aac@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 11 Jul 2006 12:21:05 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A4D3.B66E7E7A"
Subject: Query?
Date: Tue, 11 Jul 2006 12:21:03 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E5@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query?
Thread-Index: Acak07a2irDv3acUQEqMJTEHBfG+lw==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A4D3.B66E7E7A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

How to parse this kind of query?
COM(2006) 0001
=20

------_=_NextPart_001_01C6A4D3.B66E7E7A--

From java-user-return-21901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 10:41:36 2006
Return-Path: <java-user-return-21901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60465 invoked from network); 11 Jul 2006 10:41:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 10:41:35 -0000
Received: (qmail 52390 invoked by uid 500); 11 Jul 2006 10:41:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52333 invoked by uid 500); 11 Jul 2006 10:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52289 invoked by uid 99); 11 Jul 2006 10:41:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:41:26 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hefest@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 03:41:25 -0700
Received: by py-out-1112.google.com with SMTP id z59so3737386pyg
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 03:41:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Z5Qbv178g91YYc1ZQfGbMUMAFZzxdhcoCWAuBB1C61oZ6Ma0YGXgC/d9gVNLhvtT1fGNUDeGWVnGp6dSrGQY+Nh8RfuK9UpgmmkbeV9GAKoo23UHO1gNR5p1RCHcDJvfOSfGj7C1sdIjowZv5qIEHmF/fV9EPqzVCwrcm4nku8Y=
Received: by 10.35.82.15 with SMTP id j15mr6417552pyl;
        Tue, 11 Jul 2006 03:41:05 -0700 (PDT)
Received: by 10.35.54.16 with HTTP; Tue, 11 Jul 2006 03:41:05 -0700 (PDT)
Message-ID: <d487eb8e0607110341gf2ac35ck1b4b862dbacdb6bd@mail.gmail.com>
Date: Tue, 11 Jul 2006 12:41:05 +0200
From: "Tomi NA" <hefest@gmail.com>
To: java-user@lucene.apache.org
Subject: combined filesystem and web search
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I plan to make lucene (and nutch) a key element in an intranet
solution, but I only know about lucene what I've read in the last
couple of days.
Here's what I'd like opinions about.

I would like to build a single point of access to data on intranet web
pages and LAN shared documents.

I've looked into the file:// vs. http:// issue and it seems that it
doesn't make sense securitywise to use file:// so I'd make the shares
accessible through a web server and *then* index them.
However, if I leverage the web inbuilt lucene search, I'd build two
"indices" (please pardon the lack of knowledge of lucene terminology).
Can I search over two indices? Do I have to merge them? How would I do
the former or the latter?
Is there a good explanation somewhere how to set up incremental
indexing, rather than e.g. building the whole index over nightly?
Will lucene produce usable results, knowing that there'll be no rich
interlinking between a major part of the content (shared docs) to base
ranking upon? I know lucene uses a number of criteria to rank
documents upon: I'm asking about real-world experiences and subjective
grading quality impressions.
Does anyone have similar experiences with intranet  enterprise data searching?

Cheers,
Tomi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 11:41:23 2006
Return-Path: <java-user-return-21902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84983 invoked from network); 11 Jul 2006 11:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 11:41:22 -0000
Received: (qmail 78051 invoked by uid 500); 11 Jul 2006 11:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78026 invoked by uid 500); 11 Jul 2006 11:41:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78004 invoked by uid 99); 11 Jul 2006 11:41:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 04:41:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 04:41:12 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 1D4DF187BF; Tue, 11 Jul 2006 11:40:51 +0000 (GMT)
Received: from scwdev01rob (62-249-249-2.no-dns-yet.enta.net [62.249.249.2])
	by mail.seseit.com (Postfix) with ESMTP id 3C63A187BE
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 11:40:48 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Missing fields used for a sort
Date: Tue, 11 Jul 2006 12:41:45 +0100
Message-ID: <001501c6a4de$fe424a10$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Acai/9WQYvt8qCkSRZ2EkaaLJInycQB0qPwgAAL3U/A=
In-Reply-To: <001401c6a4d3$1bcf8f40$8b01a8c0@office.ems>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I want to sort on a field that doesn't exist in all documents in my
index, can I have a default value for documents which lack that field (e.g.
MAXINT or 0)?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 12:57:42 2006
Return-Path: <java-user-return-21903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19151 invoked from network); 11 Jul 2006 12:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 12:57:42 -0000
Received: (qmail 66711 invoked by uid 500); 11 Jul 2006 12:57:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66686 invoked by uid 500); 11 Jul 2006 12:57:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66657 invoked by uid 99); 11 Jul 2006 12:57:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 05:57:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 05:57:29 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T796a8023fa88ad3ee41aac@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 11 Jul 2006 14:57:05 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A4E9.82821160"
Subject: Query using parenthesis
Date: Tue, 11 Jul 2006 14:57:05 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E7@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query using parenthesis
Thread-Index: Acak6YJlaCak5H2uQ56OCCfis0NcWg==
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A4E9.82821160
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

How to parse this query COM(2005) 0123 in LukeAll?
I have this result cocnumber: com
????

------_=_NextPart_001_01C6A4E9.82821160--

From java-user-return-21904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 13:14:42 2006
Return-Path: <java-user-return-21904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25323 invoked from network); 11 Jul 2006 13:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 13:14:41 -0000
Received: (qmail 13261 invoked by uid 500); 11 Jul 2006 13:14:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13226 invoked by uid 500); 11 Jul 2006 13:14:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13148 invoked by uid 99); 11 Jul 2006 13:14:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:14:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:14:24 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D298E30EFCD6; Tue, 11 Jul 2006 09:14:03 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 448DF30EFCD5
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 09:13:59 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E7@EPLUXSEX01.ep.parl.union.eu>
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E7@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CAE090D4-0CB2-4EE7-BC0C-B8EF479F7B17@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query using parenthesis
Date: Tue, 11 Jul 2006 09:13:50 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jul 11, 2006, at 8:57 AM, WATHELET Thomas wrote:
> How to parse this query COM(2005) 0123 in LukeAll?
> I have this result cocnumber: com
> ????

Your question is not clear.  But I'm always happy to lend a hand...

Try the query:
	COM\(2005\) 0123

Parentheses are special characters with Lucene's QueryParser, so  
escaping them with a backslash is needed.

But also be aware of the analyzer setting and the parsed query Luke  
displays.  Your question brings up a whole slew of Lucene  
Troubleshooting 101 steps:

   * What exactly are you trying to find?
   * How was it indexed?
      - What analyzer(s), what field types
   * What are your users interacting with to search the index?   
(probably not Luke, right?)
   * How will the users interface build the queries issued?

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 13:28:46 2006
Return-Path: <java-user-return-21905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37673 invoked from network); 11 Jul 2006 13:28:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 13:28:46 -0000
Received: (qmail 51092 invoked by uid 500); 11 Jul 2006 13:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50790 invoked by uid 500); 11 Jul 2006 13:28:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50774 invoked by uid 99); 11 Jul 2006 13:28:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:28:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:28:38 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T796a9cab8c88ad3ee41aac@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 11 Jul 2006 15:28:15 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Query using parenthesis
Date: Tue, 11 Jul 2006 15:28:14 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E8@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query using parenthesis
Thread-Index: Acak7RTQ7RpKKvaeQTmRyDsUd8XUQgAADAEg
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have an index with this field:
stored/uncompressed,indexed,tokenized<docnumber:SEC(2006) 0350>.
I'm using LukeAll to query myIndex and when I try to search in the
docnumber field with this query COM\(2005\) 0123 in the query detail
panel I retrive this: docnumber:sec ()
Do you know LukeAll?

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 11 July 2006 15:14
To: java-user@lucene.apache.org
Subject: Re: Query using parenthesis

On Jul 11, 2006, at 8:57 AM, WATHELET Thomas wrote:
> How to parse this query COM(2005) 0123 in LukeAll?
> I have this result cocnumber: com
> ????

Your question is not clear.  But I'm always happy to lend a hand...

Try the query:
	COM\(2005\) 0123

Parentheses are special characters with Lucene's QueryParser, so =20
escaping them with a backslash is needed.

But also be aware of the analyzer setting and the parsed query Luke =20
displays.  Your question brings up a whole slew of Lucene =20
Troubleshooting 101 steps:

   * What exactly are you trying to find?
   * How was it indexed?
      - What analyzer(s), what field types
   * What are your users interacting with to search the index?  =20
(probably not Luke, right?)
   * How will the users interface build the queries issued?

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 13:37:57 2006
Return-Path: <java-user-return-21906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40542 invoked from network); 11 Jul 2006 13:37:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 13:37:56 -0000
Received: (qmail 75027 invoked by uid 500); 11 Jul 2006 13:37:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75004 invoked by uid 500); 11 Jul 2006 13:37:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74993 invoked by uid 99); 11 Jul 2006 13:37:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:37:49 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:37:49 -0700
Received: by py-out-1112.google.com with SMTP id z59so3785624pyg
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 06:37:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qmA8rB1xFRuuMP5dBB4v/E/74nwoRn+RIdMScklWkp3A40bISip8TF3GCalaf6SG8j98c8bkuWPIReOTrh83tE9rKDF2LdQO2rvmzJr7fTNgPRRNDyb0YKIzJe9D8BN+aB7M5pTjqGh6yAzF/G4n6YQFb/162n1IY2vEystLnd0=
Received: by 10.35.34.18 with SMTP id m18mr6613551pyj;
        Tue, 11 Jul 2006 06:37:28 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 11 Jul 2006 06:37:28 -0700 (PDT)
Message-ID: <359a92830607110637y1cc40678if4d52b16001873ad@mail.gmail.com>
Date: Tue, 11 Jul 2006 09:37:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query?
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E5@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25191_27706695.1152625048269"
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E5@EPLUXSEX01.ep.parl.union.eu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25191_27706695.1152625048269
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Could you provide a bit more information? What's important or not about this
query? And how does that import relate to what you've indexed?

In other words, what do you *want* it to mean?

Best
Erick

------=_Part_25191_27706695.1152625048269--

From java-user-return-21907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 13:51:58 2006
Return-Path: <java-user-return-21907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48494 invoked from network); 11 Jul 2006 13:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 13:51:58 -0000
Received: (qmail 13504 invoked by uid 500); 11 Jul 2006 13:51:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13467 invoked by uid 500); 11 Jul 2006 13:51:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13455 invoked by uid 99); 11 Jul 2006 13:51:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:51:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:51:50 -0700
Received: from [10.10.150.44] ([10.10.150.44])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.6/8.13.4) with ESMTP id k6BDphkI022155
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 08:51:45 -0500
Message-ID: <44B3ACCD.7090801@wolfram.com>
Date: Tue, 11 Jul 2006 09:51:09 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene WordExtractor
References: <20060711075346.E734DC06B@mad.isoco.net>
In-Reply-To: <20060711075346.E734DC06B@mad.isoco.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is a separate user mailing list for poi. Use it.

There are three jar files. Check the scratchpad jar. You have to send in 
a FileInputStream(not the filename) as an argument to the WordExtractor 
class.

suba suresh.

mcarcelen wrote:
> Hi all!
> Im working with poi-bin-3.0-alpha2-20060616
> Im trying to extract text from a Word document using the class
> org.apache.poi.hwpf.extractor.WordExtractor but I get the following bugs
> "Exception in thread main java.lang.NoSuchMethodError"
> I have also tried with the parameter -doc and the name of the word document
> but without success
> Ive execute the classes QuickTest.class and HWPFDocument.class, also with
> bugs
> Can anyone help me?
> Thanks all
> Cheers 
> Teresa
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 13:58:57 2006
Return-Path: <java-user-return-21908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53857 invoked from network); 11 Jul 2006 13:58:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 13:58:56 -0000
Received: (qmail 32958 invoked by uid 500); 11 Jul 2006 13:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32921 invoked by uid 500); 11 Jul 2006 13:58:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32910 invoked by uid 99); 11 Jul 2006 13:58:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:58:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:58:47 -0700
Received: by py-out-1112.google.com with SMTP id z59so3793084pyg
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 06:58:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e9TrQfxCapaGfIheRG1pcmGiZAnobUPk79i7SgZdHzpIzk6wcWWpOyrDQ/S2Gbqjajti94xpvpXslUB0a0WBPXuTp0Sg1Ga3uJY3ZZiTJLRPhKgfP0P6VuZbPWpQ+Q3eKGV+Q/P0/MbYua1pTSeQHvNPqBPM5rBGxAWfGnQ2C8E=
Received: by 10.35.78.9 with SMTP id f9mr6224824pyl;
        Tue, 11 Jul 2006 06:48:27 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 11 Jul 2006 06:48:27 -0700 (PDT)
Message-ID: <359a92830607110648i22e770f6n7ee1381b1160ebd8@mail.gmail.com>
Date: Tue, 11 Jul 2006 09:48:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: combined filesystem and web search
In-Reply-To: <d487eb8e0607110341gf2ac35ck1b4b862dbacdb6bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25399_22348972.1152625707424"
References: <d487eb8e0607110341gf2ac35ck1b4b862dbacdb6bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25399_22348972.1152625707424
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can answer a few of these. If you haven't yet, you'd do yourself a favor
to pick up the book "Lucene in Action". It's written to the 1.4 code-base,
the examples compile but give deprecated warnings for the 1.9 code base, and
need a few more tweaks for the 2.0 code base.

Also, download a copy of Luke. It's invaluable for looking at an index to
answer questions like "why isn't this query returning what I thought it
should?".

That said, see below, and understand that I have exactly one 500K document
(growing to 1M over the next few months) project under my belt with Lucene,
so my opinions are those of an relative novice....

On 7/11/06, Tomi NA <hefest@gmail.com> wrote:
>
> I plan to make lucene (and nutch) a key element in an intranet
> solution, but I only know about lucene what I've read in the last
> couple of days.
> Here's what I'd like opinions about.
>
> I would like to build a single point of access to data on intranet web
> pages and LAN shared documents.
>
> I've looked into the file:// vs. http:// issue and it seems that it
> doesn't make sense securitywise to use file:// so I'd make the shares
> accessible through a web server and *then* index them.
> However, if I leverage the web inbuilt lucene search, I'd build two
> "indices" (please pardon the lack of knowledge of lucene terminology).
> Can I search over two indices? Do I have to merge them? How would I do
> the former or the latter?


I'll let folks who understand security answer this one <G>.



Is there a good explanation somewhere how to set up incremental
> indexing, rather than e.g. building the whole index over nightly?


See Luncen in Action (LIA). The short answer is yes. In the simplest form,
you can just add new data to a currently-existing index. You probably want
to make a copy just in case your power goes out or something.

Then there's IndexMergeTool which I haven't used, but looks interesting.

Then there's the possibility of using a MultiSearcher, but I'll leave it to
the experts to talk about how that combines results....

Will lucene produce usable results, knowing that there'll be no rich
> interlinking between a major part of the content (shared docs) to base
> ranking upon? I know lucene uses a number of criteria to rank
> documents upon: I'm asking about real-world experiences and subjective
> grading quality impressions.
> Does anyone have similar experiences with intranet  enterprise data
> searching?
>
> Cheers,
> Tomi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25399_22348972.1152625707424--

From java-user-return-21909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 13:59:40 2006
Return-Path: <java-user-return-21909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54272 invoked from network); 11 Jul 2006 13:59:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 13:59:39 -0000
Received: (qmail 35365 invoked by uid 500); 11 Jul 2006 13:59:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35341 invoked by uid 500); 11 Jul 2006 13:59:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35306 invoked by uid 99); 11 Jul 2006 13:59:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:59:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 06:59:22 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T796ab8caab88ad3ee41aac@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 11 Jul 2006 15:58:58 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Query?
Date: Tue, 11 Jul 2006 15:58:58 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E9@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query?
Thread-Index: Acak7z4R720ueLSnRMyc/vyZqUQ00wAAecog
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have an index with this field:
stored/uncompressed,indexed,tokenized<docnumber:SEC(2006) 0350>.
I'm using RangeQuery to query the index:	TermQuery termQuery =3D
new TermQuery(new Term("docnumber", "SEC(2006) 0350"));
=09
combinedQueries.add(termQuery, MUST);

The query that I send is:
SEC(2006) 0350

The resulting query that Lucene produces :=20
+docnumber:SEC\(2006\) 0350

I'm using the class simpleanalyser for the search.

And I have no result but this data SEC(2006) 0350 is present in the
index "docnumber field"

Thank's in advence

Wathelet
Thomas

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 11 July 2006 15:37
To: java-user@lucene.apache.org
Subject: Re: Query?

Could you provide a bit more information? What's important or not about
this
query? And how does that import relate to what you've indexed?

In other words, what do you *want* it to mean?

Best
Erick



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:09:56 2006
Return-Path: <java-user-return-21910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62930 invoked from network); 11 Jul 2006 14:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:09:56 -0000
Received: (qmail 73540 invoked by uid 500); 11 Jul 2006 14:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73518 invoked by uid 500); 11 Jul 2006 14:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73507 invoked by uid 99); 11 Jul 2006 14:09:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:09:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:09:46 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k6BE9LTi021491
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 07:09:21 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Tue, 11 
	Jul 2006 07:09:21 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Re: General Approach: Analyzer versus Query
Date: Tue, 11 Jul 2006 07:09:20 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E4554@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: General Approach: Analyzer versus Query
Thread-Index: AcakpoONs1pKIghoQHinvDHTikEjHg==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14560.003)
X-imss-scores: Clean:41.87916 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Disk is cheap, and I can always put the field elsewhere if I need to
sort on it, but user response time ... Priceless.  I'll give #1 a shot.
I'm going to try encoding them in the same position, see what happens.

Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:10:04 2006
Return-Path: <java-user-return-21911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63017 invoked from network); 11 Jul 2006 14:10:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:10:04 -0000
Received: (qmail 73600 invoked by uid 500); 11 Jul 2006 14:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73572 invoked by uid 500); 11 Jul 2006 14:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73554 invoked by uid 99); 11 Jul 2006 14:09:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:09:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:09:47 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k6BE9LX2021490
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 07:09:21 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Tue, 11 
	Jul 2006 07:09:20 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Re: How do you use a different analyzer by field?
Date: Tue, 11 Jul 2006 07:09:19 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E4553@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: How do you use a different analyzer by field?
Thread-Index: AcakpiVWyhfWn9P3Q664ySi1E5Gd1w==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14560.003)
X-imss-scores: Clean:57.20043 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my defense I assumed it would be more obscurely named ;-)

G

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:10:13 2006
Return-Path: <java-user-return-21912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63078 invoked from network); 11 Jul 2006 14:10:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:10:13 -0000
Received: (qmail 73915 invoked by uid 500); 11 Jul 2006 14:09:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73875 invoked by uid 500); 11 Jul 2006 14:09:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73807 invoked by uid 99); 11 Jul 2006 14:09:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:09:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [156.42.10.187] (HELO mb2.maricopa.gov) (156.42.10.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:09:46 -0700
Received: from mcaoswss.mcao.maricopa.gov (mcao.maricopa.gov [156.42.237.191])
	by mb2.maricopa.gov (8.13.1/9.99.9) with ESMTP id k6BE9J3m021479
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 07:09:19 -0700 (MST)
Received: from mcaosx2.ca.mcao.maricopa.gov ([156.42.113.201]) by 
	mcaoswss.mcao.maricopa.gov with InterScan Message Security Suite; Tue, 11 
	Jul 2006 07:09:18 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset=us-ascii
Content-Transfer-Encoding: quoted-printable
Subject: Re: Some obvious questions that I'll be happy to put on the WIKI 
Date: Tue, 11 Jul 2006 07:09:17 -0700
Message-ID: <A8F90A7E212A1B49A8A9EBF2E5C3E106058E4552@mcaosx2.ca.mcao.maricopa.gov>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: Some obvious questions that I'll be happy to put on the 
	WIKI 
Thread-Index: Acakpf4T6G9qNiPGRKS74D6EE0pEXA==
From: "Furash Gary" <furashg@mcao.maricopa.gov>
To: <java-user@lucene.apache.org>
X-imss-version: 2.040
X-imss-result: Passed
X-imss-scanInfo: M:P L:E SM:0
X-imss-tmaseResult: TT:0 TS:0.0000 TC:00 TRN:0 TV:3.52.1006(14560.003)
X-imss-scores: Clean:49.41573 C:2 M:4 S:5 R:5
X-imss-settings: Baseline:2 C:3 M:3 S:3 R:3 (0.1500 0.1500)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=09
Thanks.  It sounds like putting tokens in the same spot for names makes
sense, so I end up with:
	Gary 			Furash
	[Soundex Gary] 	[Soundex Furash]
is the way to go.  I had seen a quote that mention positioning at the
same spot but it didn't make any sense at that point.

It sounds like the slop value is the way to go on first pass.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:15:00 2006
Return-Path: <java-user-return-21913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65575 invoked from network); 11 Jul 2006 14:15:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:15:00 -0000
Received: (qmail 90637 invoked by uid 500); 11 Jul 2006 14:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90611 invoked by uid 500); 11 Jul 2006 14:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90600 invoked by uid 99); 11 Jul 2006 14:14:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:14:53 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:14:52 -0700
Received: by py-out-1112.google.com with SMTP id z59so3799195pyg
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 07:14:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YIwU7BXq+zW5TL1Y00snKZQYwZqIgeHNapF2jgp2FrjfBwh01YMSUPYGNHBhrh4LAl3Nxj+wrGPyJR04j75qap4LvcoWJzCKJJ78q4zTRtOKXXyluOgpEY8F9Q1EIJXrDPO2wX6+/DopWwNnBRNQUcAiqUgLWbkiTLNKHGyDvTI=
Received: by 10.35.78.9 with SMTP id f9mr6258749pyl;
        Tue, 11 Jul 2006 07:14:32 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 11 Jul 2006 07:14:32 -0700 (PDT)
Message-ID: <359a92830607110714l6b7a4101nf38aa88f66df4b8d@mail.gmail.com>
Date: Tue, 11 Jul 2006 10:14:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort
In-Reply-To: <001501c6a4de$fe424a10$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26200_9302845.1152627272065"
References: <001401c6a4d3$1bcf8f40$8b01a8c0@office.ems>
	 <001501c6a4de$fe424a10$8b01a8c0@office.ems>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26200_9302845.1152627272065
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Quote from Chris...

"you can only sort on fields with 0 or 1 terms per doc" from a post of his
today even....

So I guess all the documents without a particular field all get defaulted
for you. Which end of the list they get placed at I guess you'll find out
<G>...

Erick

------=_Part_26200_9302845.1152627272065--

From java-user-return-21914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:18:02 2006
Return-Path: <java-user-return-21914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67676 invoked from network); 11 Jul 2006 14:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:18:02 -0000
Received: (qmail 98018 invoked by uid 500); 11 Jul 2006 14:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97981 invoked by uid 500); 11 Jul 2006 14:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97970 invoked by uid 99); 11 Jul 2006 14:17:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:17:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:17:53 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id D471BA7CD5; Tue, 11 Jul 2006 16:20:09 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id E1195A7CB3
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 16:20:08 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id A039BC0BB
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 16:18:00 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene WordExtractor
Date: Tue, 11 Jul 2006 16:17:30 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <44B3ACCD.7090801@wolfram.com>
Thread-Index: Acak8UBUpZE3OrBtTNOOeKAx7fIwiAAA2gWQ
Message-Id: <20060711141800.A039BC0BB@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks suba
Sorry

-----Mensaje original-----
De: Suba Suresh [mailto:subas@wolfram.com]=20
Enviado el: martes, 11 de julio de 2006 15:51
Para: java-user@lucene.apache.org
Asunto: Re: Lucene WordExtractor

There is a separate user mailing list for poi. Use it.

There are three jar files. Check the scratchpad jar. You have to send in =

a FileInputStream(not the filename) as an argument to the WordExtractor=20
class.

suba suresh.

mcarcelen wrote:
> Hi all!
> I=B4m working with poi-bin-3.0-alpha2-20060616
> I=B4m trying to extract text from a Word document using the class
> org.apache.poi.hwpf.extractor.WordExtractor but I get the following =
bugs
> "Exception in thread main java.lang.NoSuchMethodError"
> I have also tried with the parameter -doc and the name of the word
document
> but without success
> I=B4ve execute the classes QuickTest.class and HWPFDocument.class, =
also with
> bugs
> Can anyone help me?
> Thanks all
> Cheers=20
> Teresa
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:30:43 2006
Return-Path: <java-user-return-21915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75143 invoked from network); 11 Jul 2006 14:30:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:30:43 -0000
Received: (qmail 32454 invoked by uid 500); 11 Jul 2006 14:30:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32431 invoked by uid 500); 11 Jul 2006 14:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32420 invoked by uid 99); 11 Jul 2006 14:30:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:30:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:30:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A57AE30EFCD7; Tue, 11 Jul 2006 10:30:14 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id A8D2430EFCD6
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 10:30:09 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E8@EPLUXSEX01.ep.parl.union.eu>
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E8@EPLUXSEX01.ep.parl.union.eu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C433BD4E-AA73-42CF-8D58-25BC5A442253@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query using parenthesis
Date: Tue, 11 Jul 2006 10:30:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 11, 2006, at 9:28 AM, WATHELET Thomas wrote:
> I have an index with this field:
> stored/uncompressed,indexed,tokenized<docnumber:SEC(2006) 0350>.
> I'm using LukeAll to query myIndex and when I try to search in the
> docnumber field with this query COM\(2005\) 0123 in the query detail
> panel I retrive this: docnumber:sec ()
> Do you know LukeAll?

Yes, I know Luke well.  LukeAll refers to the name of the JAR file,  
but Luke itself is the name of the tool.  A wonderful tool, indeed!

What analyzer are you using with the search screen?   What analyzer  
did you use when you built your index?   Have a look at the document  
details in Luke and look at the "tokenized" data for the docnumber  
field.  These are the "terms" you can use to find that document, but  
you tokenized it so it is likely split into several pieces.  Do you  
really want to tokenize your docnumber field?  This is a usability  
question - "it depends" is all I can say at this point :)

	Erik



>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 11 July 2006 15:14
> To: java-user@lucene.apache.org
> Subject: Re: Query using parenthesis
>
> On Jul 11, 2006, at 8:57 AM, WATHELET Thomas wrote:
>> How to parse this query COM(2005) 0123 in LukeAll?
>> I have this result cocnumber: com
>> ????
>
> Your question is not clear.  But I'm always happy to lend a hand...
>
> Try the query:
> 	COM\(2005\) 0123
>
> Parentheses are special characters with Lucene's QueryParser, so
> escaping them with a backslash is needed.
>
> But also be aware of the analyzer setting and the parsed query Luke
> displays.  Your question brings up a whole slew of Lucene
> Troubleshooting 101 steps:
>
>    * What exactly are you trying to find?
>    * How was it indexed?
>       - What analyzer(s), what field types
>    * What are your users interacting with to search the index?
> (probably not Luke, right?)
>    * How will the users interface build the queries issued?
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:37:34 2006
Return-Path: <java-user-return-21916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79307 invoked from network); 11 Jul 2006 14:37:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:37:33 -0000
Received: (qmail 52810 invoked by uid 500); 11 Jul 2006 14:37:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52769 invoked by uid 500); 11 Jul 2006 14:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52691 invoked by uid 99); 11 Jul 2006 14:37:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:37:16 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:37:16 -0700
Received: by py-out-1112.google.com with SMTP id z59so3807382pyg
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 07:36:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cxLJBUmHCR8sKjw2hrsr/TQiNLkx19slXNSRHC5+tQSRujzdVjCAeVRgJ+ZenCPrXWULLJKvIuR4PbPyp+YP3hYW7AwpDhtsgd7rYp80LeXZwL8pHf/vpyk9PjTM3wnJ9yUpaBrbRUu+gutT2YL/TjAPfS3ijGAZmdyXxQgOev0=
Received: by 10.35.63.2 with SMTP id q2mr6689082pyk;
        Tue, 11 Jul 2006 07:36:55 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 11 Jul 2006 07:36:55 -0700 (PDT)
Message-ID: <c68e39170607110736n77050189j7e1f216268199c19@mail.gmail.com>
Date: Tue, 11 Jul 2006 10:36:55 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort
In-Reply-To: <359a92830607110714l6b7a4101nf38aa88f66df4b8d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <001401c6a4d3$1bcf8f40$8b01a8c0@office.ems>
	 <001501c6a4de$fe424a10$8b01a8c0@office.ems>
	 <359a92830607110714l6b7a4101nf38aa88f66df4b8d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
> So I guess all the documents without a particular field all get defaulted
> for you. Which end of the list they get placed at I guess you'll find out
> <G>...

For lucene, it depends on what direction you are sorting.

Solr gives control over this in it's schema... here are some snippets
from the example schema.xml:

    <!-- The optional sortMissingLast and sortMissingFirst attributes are
         currently supported on types that are sorted internally as a strings.
       - If sortMissingLast="true" then a sort on this field will
cause documents
       without the field to come after documents with the field,
       regardless of the requested sort order (asc or desc).
       - If sortMissingFirst="true" then a sort on this field will
cause documents
       without the field to come before documents with the field,
       regardless of the requested sort order.
       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
       then default lucene sorting will be used which places docs
without the field
       first in an ascending sort and last in a descending sort.
    -->

    <!-- Numeric field types that manipulate the value into
         a string value that isn't human readable in it's internal form,
         but with a lexicographic ordering the same as the numeric ordering
         so that range queries correctly work. -->
    <fieldtype name="sint" class="solr.SortableIntField"
sortMissingLast="true"/>
    <fieldtype name="slong" class="solr.SortableLongField"
sortMissingLast="true"/>
    <fieldtype name="sfloat" class="solr.SortableFloatField"
sortMissingLast="true"/>
    <fieldtype name="sdouble" class="solr.SortableDoubleField"
sortMissingLast="true"/>


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:44:15 2006
Return-Path: <java-user-return-21917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82336 invoked from network); 11 Jul 2006 14:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:44:14 -0000
Received: (qmail 74737 invoked by uid 500); 11 Jul 2006 14:44:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74699 invoked by uid 500); 11 Jul 2006 14:44:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74611 invoked by uid 99); 11 Jul 2006 14:44:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:44:03 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:43:59 -0700
Received: by py-out-1112.google.com with SMTP id z59so3810215pyg
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 07:43:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Qr9cE/jM8+q6VTir38Tx5gzt5cAFNMtSd+F258l+/Wzw734mO4xbcUM2I1rzYMsrTij8h7cEL31WEPV1CQCDxwU5yVAskh4SzTm4Lwlu3adjxh1JPGYudKbeVV2U8z5Q+4x0XEJbBDqLikVIcHH3ysqO5VUgmw8pVNb9B1E+HgU=
Received: by 10.35.57.5 with SMTP id j5mr6706768pyk;
        Tue, 11 Jul 2006 07:33:39 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 11 Jul 2006 07:33:39 -0700 (PDT)
Message-ID: <359a92830607110733l6de60f0wf3cf000ae480285c@mail.gmail.com>
Date: Tue, 11 Jul 2006 10:33:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Query?
In-Reply-To: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E9@EPLUXSEX01.ep.parl.union.eu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26691_19889528.1152628419155"
References: <AD97D5F23B201C448EAB13B4F6DA6A421BF3E9@EPLUXSEX01.ep.parl.union.eu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26691_19889528.1152628419155
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What tokenizer did you use to index the document number? Just about all
tokenizers split on spaces, so you'd have indexed this as at least two
separate terms because of the space before the 0350. I'd really recommend
downloading a copy of Luke so you can examine your index and see exactly
what got indexed. That's saved me a bunch of times....

I wonder whether you want to store this UN_TOKENIZED instead?

Best
Erick

On 7/11/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> I have an index with this field:
> stored/uncompressed,indexed,tokenized<docnumber:SEC(2006) 0350>.
> I'm using RangeQuery to query the index:        TermQuery termQuery =
> new TermQuery(new Term("docnumber", "SEC(2006) 0350"));
>
> combinedQueries.add(termQuery, MUST);
>
> The query that I send is:
> SEC(2006) 0350
>
> The resulting query that Lucene produces :
> +docnumber:SEC\(2006\) 0350
>
> I'm using the class simpleanalyser for the search.
>
> And I have no result but this data SEC(2006) 0350 is present in the
> index "docnumber field"
>
> Thank's in advence
>
> Wathelet
> Thomas
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 11 July 2006 15:37
> To: java-user@lucene.apache.org
> Subject: Re: Query?
>
> Could you provide a bit more information? What's important or not about
> this
> query? And how does that import relate to what you've indexed?
>
> In other words, what do you *want* it to mean?
>
> Best
> Erick
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26691_19889528.1152628419155--

From java-user-return-21918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:53:55 2006
Return-Path: <java-user-return-21918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87863 invoked from network); 11 Jul 2006 14:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:53:54 -0000
Received: (qmail 6285 invoked by uid 500); 11 Jul 2006 14:53:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6265 invoked by uid 500); 11 Jul 2006 14:53:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6254 invoked by uid 99); 11 Jul 2006 14:53:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:53:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [136.173.62.228] (HELO SMTP15.europarl.europa.eu) (136.173.62.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:53:46 -0700
Received: from epluxsex01.ep.parl.union.eu (unverified) by SMTP15.europarl.europa.eu
 (European Parliament) with ESMTP id <T796aea9ee688ad3ee41aac@SMTP15.europarl.europa.eu> for <java-user@lucene.apache.org>;
 Tue, 11 Jul 2006 16:53:23 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Query?
Date: Tue, 11 Jul 2006 16:53:22 +0200
Message-ID: <AD97D5F23B201C448EAB13B4F6DA6A429A67C7@EPLUXSEX01.ep.parl.union.eu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Query?
Thread-Index: Acak+H3xt2nJiuXOS7mX270j3oefoAAAHoMg
From: "WATHELET Thomas" <thomas.wathelet@europarl.europa.eu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok now I have UN_TOKENIZED this field and now in LUKE I see the entire
term(SEC(2006) 0123) instead before I only see SEC.
And the wonderfull thing now that it's working.
Thank's a lot to Erik and Erick.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: 11 July 2006 16:34
To: java-user@lucene.apache.org
Subject: Re: Query?

What tokenizer did you use to index the document number? Just about all
tokenizers split on spaces, so you'd have indexed this as at least two
separate terms because of the space before the 0350. I'd really
recommend
downloading a copy of Luke so you can examine your index and see exactly
what got indexed. That's saved me a bunch of times....

I wonder whether you want to store this UN_TOKENIZED instead?

Best
Erick

On 7/11/06, WATHELET Thomas <thomas.wathelet@europarl.europa.eu> wrote:
>
> I have an index with this field:
> stored/uncompressed,indexed,tokenized<docnumber:SEC(2006) 0350>.
> I'm using RangeQuery to query the index:        TermQuery termQuery =
=3D
> new TermQuery(new Term("docnumber", "SEC(2006) 0350"));
>
> combinedQueries.add(termQuery, MUST);
>
> The query that I send is:
> SEC(2006) 0350
>
> The resulting query that Lucene produces :
> +docnumber:SEC\(2006\) 0350
>
> I'm using the class simpleanalyser for the search.
>
> And I have no result but this data SEC(2006) 0350 is present in the
> index "docnumber field"
>
> Thank's in advence
>
> Wathelet
> Thomas
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: 11 July 2006 15:37
> To: java-user@lucene.apache.org
> Subject: Re: Query?
>
> Could you provide a bit more information? What's important or not
about
> this
> query? And how does that import relate to what you've indexed?
>
> In other words, what do you *want* it to mean?
>
> Best
> Erick
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 14:55:40 2006
Return-Path: <java-user-return-21919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88928 invoked from network); 11 Jul 2006 14:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 14:55:39 -0000
Received: (qmail 16593 invoked by uid 500); 11 Jul 2006 14:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16567 invoked by uid 500); 11 Jul 2006 14:55:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16556 invoked by uid 99); 11 Jul 2006 14:55:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:55:31 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 07:55:30 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id BABB1A663F
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 17:55:09 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id AD4FBA6640; Tue, 11 Jul 2006 17:55:09 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from [10.0.0.73] (mile-r.intranet [10.0.0.73])
	by mail.datagroup.ro (Postfix) with ESMTP id 86B21A663F
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 17:55:03 +0300 (EEST)
Message-ID: <44B3BBC7.9050708@level7.ro>
Date: Tue, 11 Jul 2006 17:55:03 +0300
From: Mile Rosu <mile.rosu@level7.ro>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Searching for a phrase which spans on 2 pages
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 11072006 #194189, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I am working on an application similar to google books which allows 
searching on documents which represent a scanned page. Of course, one 
might search for a phrase starting at the end of one page and ending at 
the beginning of the next one. In this case I do not know how I might 
treat this. Both pages should be returned as hit results.
Do you have any idea on how this situation might be handled?

Thank you,
Mile Rosu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 16:56:58 2006
Return-Path: <java-user-return-21920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42864 invoked from network); 11 Jul 2006 16:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 16:56:58 -0000
Received: (qmail 7790 invoked by uid 500); 11 Jul 2006 16:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7741 invoked by uid 500); 11 Jul 2006 16:56:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7712 invoked by uid 99); 11 Jul 2006 16:56:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 09:56:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 09:56:49 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 99B9A187BF; Tue, 11 Jul 2006 16:56:27 +0000 (GMT)
Received: from scwdev01rob (62-249-249-2.no-dns-yet.enta.net [62.249.249.2])
	by mail.seseit.com (Postfix) with ESMTP id ADAC3187BE
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 16:56:23 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Missing fields used for a sort
Date: Tue, 11 Jul 2006 17:57:20 +0100
Message-ID: <005801c6a50b$147dcd50$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Acak94mnTgHIN4JDSWivmMJr0ZGXAgAEx35w
In-Reply-To: <c68e39170607110736n77050189j7e1f216268199c19@mail.gmail.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the info both of you. Of course Lucene obeys Murphy's law that
the missing ones appear first when you reverse sort, which is what Murphy's
law says you want to do. 

Does solr have a custom build of Lucene in it, or is the functionality
required to required to get the missing ones to the end of the list
something that can be configured anyhow in Lucene?

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 11 July 2006 15:37
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort

On 7/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
> So I guess all the documents without a particular field all get defaulted
> for you. Which end of the list they get placed at I guess you'll find out
> <G>...

For lucene, it depends on what direction you are sorting.

Solr gives control over this in it's schema... here are some snippets
from the example schema.xml:

    <!-- The optional sortMissingLast and sortMissingFirst attributes are
         currently supported on types that are sorted internally as a
strings.
       - If sortMissingLast="true" then a sort on this field will
cause documents
       without the field to come after documents with the field,
       regardless of the requested sort order (asc or desc).
       - If sortMissingFirst="true" then a sort on this field will
cause documents
       without the field to come before documents with the field,
       regardless of the requested sort order.
       - If sortMissingLast="false" and sortMissingFirst="false" (the
default),
       then default lucene sorting will be used which places docs
without the field
       first in an ascending sort and last in a descending sort.
    -->

    <!-- Numeric field types that manipulate the value into
         a string value that isn't human readable in it's internal form,
         but with a lexicographic ordering the same as the numeric ordering
         so that range queries correctly work. -->
    <fieldtype name="sint" class="solr.SortableIntField"
sortMissingLast="true"/>
    <fieldtype name="slong" class="solr.SortableLongField"
sortMissingLast="true"/>
    <fieldtype name="sfloat" class="solr.SortableFloatField"
sortMissingLast="true"/>
    <fieldtype name="sdouble" class="solr.SortableDoubleField"
sortMissingLast="true"/>


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 17:05:48 2006
Return-Path: <java-user-return-21921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46317 invoked from network); 11 Jul 2006 17:05:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 17:05:48 -0000
Received: (qmail 26344 invoked by uid 500); 11 Jul 2006 17:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26199 invoked by uid 500); 11 Jul 2006 17:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26188 invoked by uid 99); 11 Jul 2006 17:05:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:05:40 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:05:39 -0700
Received: by py-out-1112.google.com with SMTP id d80so4420954pyd
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 10:05:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=l0bqLsdpIJT2Z7bKPHcZPfLHHc912Z0LOUk8OIxvCEj+fHYxDVm/h0AlC42cP4VdJhJ8CoqMHp7q5V0rQRN/5qRA8cvYl8+VM2XAvMTc/gOb8dx3VF8rO7WmiZXrA5fUkDvfdW2TvMwCGtEvR/xAaYkm3Tnu3QVtYc2fo9Gi968=
Received: by 10.35.88.18 with SMTP id q18mr6885493pyl;
        Tue, 11 Jul 2006 10:05:19 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 11 Jul 2006 10:05:19 -0700 (PDT)
Message-ID: <c68e39170607111005x6140d06aw25ba7926608bb573@mail.gmail.com>
Date: Tue, 11 Jul 2006 13:05:19 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort
In-Reply-To: <005801c6a50b$147dcd50$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170607110736n77050189j7e1f216268199c19@mail.gmail.com>
	 <005801c6a50b$147dcd50$8b01a8c0@office.ems>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/11/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> Thanks for the info both of you. Of course Lucene obeys Murphy's law that
> the missing ones appear first when you reverse sort, which is what Murphy's
> law says you want to do.
>
> Does solr have a custom build of Lucene in it, or is the functionality
> required to required to get the missing ones to the end of the list
> something that can be configured anyhow in Lucene?

Solr uses stock-lucene and builds on top of it.
The bits that put missing values at the end is here:
http://issues.apache.org/jira/browse/LUCENE-406

And in Solr here:
http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/search/MissingStringLastComparatorSource.java?revision=382610&view=markup


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 17:12:27 2006
Return-Path: <java-user-return-21922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49527 invoked from network); 11 Jul 2006 17:12:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 17:12:27 -0000
Received: (qmail 46176 invoked by uid 500); 11 Jul 2006 17:12:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46153 invoked by uid 500); 11 Jul 2006 17:12:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46142 invoked by uid 99); 11 Jul 2006 17:12:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:12:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:12:18 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 13EF5187BF; Tue, 11 Jul 2006 17:11:58 +0000 (GMT)
Received: from scwdev01rob (62-249-249-2.no-dns-yet.enta.net [62.249.249.2])
	by mail.seseit.com (Postfix) with ESMTP id 6C375187BE
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 17:11:55 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Missing fields used for a sort
Date: Tue, 11 Jul 2006 18:12:51 +0100
Message-ID: <007b01c6a50d$3fd35450$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcalDEAVoO48g9nlRnKp6oDYuMVBWAAAO8+A
In-Reply-To: <c68e39170607111005x6140d06aw25ba7926608bb573@mail.gmail.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can't thank you enough, Yonik :-)

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 11 July 2006 18:05
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort

On 7/11/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> Thanks for the info both of you. Of course Lucene obeys Murphy's law that
> the missing ones appear first when you reverse sort, which is what
Murphy's
> law says you want to do.
>
> Does solr have a custom build of Lucene in it, or is the functionality
> required to required to get the missing ones to the end of the list
> something that can be configured anyhow in Lucene?

Solr uses stock-lucene and builds on top of it.
The bits that put missing values at the end is here:
http://issues.apache.org/jira/browse/LUCENE-406

And in Solr here:
http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/s
earch/MissingStringLastComparatorSource.java?revision=382610&view=markup


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 17:18:26 2006
Return-Path: <java-user-return-21923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51885 invoked from network); 11 Jul 2006 17:18:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 17:18:26 -0000
Received: (qmail 67398 invoked by uid 500); 11 Jul 2006 17:18:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67363 invoked by uid 500); 11 Jul 2006 17:18:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67352 invoked by uid 99); 11 Jul 2006 17:18:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:18:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 10:18:18 -0700
Received: by py-out-1112.google.com with SMTP id d80so4425599pyd
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 10:17:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uKs1Ay9tmWK5/E8xnTgzOOaPI3HBRGbqhgR7bzgxButObmkRNOPBXY9SaR2Jk9g5VtuJkSblTPDfeXJfCc3HS9fsDhw2z3gRriOR8E94NfvJFx+q7sEY1h9lCKkcFH4Q5S22/xBvyLD5Bh6HlHl7nMZAR+FHSjetyusva/eeKRk=
Received: by 10.35.88.18 with SMTP id q18mr6902385pyl;
        Tue, 11 Jul 2006 10:17:57 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 11 Jul 2006 10:17:57 -0700 (PDT)
Message-ID: <c68e39170607111017g28c6d2d3t49d7ca389cd8cfbf@mail.gmail.com>
Date: Tue, 11 Jul 2006 13:17:57 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort
In-Reply-To: <007b01c6a50d$3fd35450$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170607111005x6140d06aw25ba7926608bb573@mail.gmail.com>
	 <007b01c6a50d$3fd35450$8b01a8c0@office.ems>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Oh, and here is how Solr uses it to construct the correct lucene Sort objects:
http://svn.apache.org/viewvc/incubator/solr/trunk/src/java/org/apache/solr/search/Sorting.java?view=markup


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 19:33:33 2006
Return-Path: <java-user-return-21924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24280 invoked from network); 11 Jul 2006 19:33:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 19:33:32 -0000
Received: (qmail 11225 invoked by uid 500); 11 Jul 2006 19:33:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11189 invoked by uid 500); 11 Jul 2006 19:33:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11178 invoked by uid 99); 11 Jul 2006 19:33:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 12:33:25 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.100] (HELO web34102.mail.mud.yahoo.com) (66.163.178.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Jul 2006 12:33:24 -0700
Received: (qmail 78183 invoked by uid 60001); 11 Jul 2006 19:33:03 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=xfuAcasbB0nR/zViaeymKG70RL/eEpYrCMsv9RPpNZm3rlxfVsYNQ39sLzkn8g6tXhjp1NQu2dCfg3nu7jA8DrNtcnmtwkUB8H2RZYElftli3Ob8ZT2m76m10TLDWDVsq/liJVgEbuOq1GavGgAhq3IvmBMETpO1hDY5Ohc8XkM=  ;
Message-ID: <20060711193303.78181.qmail@web34102.mail.mud.yahoo.com>
Received: from [63.206.223.196] by web34102.mail.mud.yahoo.com via HTTP; Tue, 11 Jul 2006 12:33:03 PDT
Date: Tue, 11 Jul 2006 12:33:03 -0700 (PDT)
From: James Pine <general_nogi@yahoo.com>
Subject: SortComparatorSources and ScoreDocComparators
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Everyone,

I've had success in the past creating my own
SortComparatorSources and ScoreDocComparators (basing
my code on sec 6.1 from LIA); however, I'm starting to
run into some performance issues with large indexes.
When I started to probe deeper it seems that
enumerating through the TermDocs for a given field
amounts to looking at every document in my index. So
if I have 1M documents, but my search only matches
10K, my ScoreDocComparator ends up performing 990K
unnecessary score computations. Looking through the
source code of FieldSortedHitQueue, I see that there
is an attempt to do some caching of comparators. That
makes a lot of sense for plain old indexed sort
fields, but doesn't help at all for custom sort
calculations right?

Is there a way to tell Lucene to perform the sort
operation after the search/filter? I'm currently using
a TopFieldDocCollector in my search as opposed to a
search method which returns a Hits object. Thanx.

JAMES

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 19:48:55 2006
Return-Path: <java-user-return-21925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34679 invoked from network); 11 Jul 2006 19:48:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 19:48:55 -0000
Received: (qmail 44715 invoked by uid 500); 11 Jul 2006 19:48:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44694 invoked by uid 500); 11 Jul 2006 19:48:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44683 invoked by uid 99); 11 Jul 2006 19:48:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 12:48:48 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 12:48:47 -0700
Received: by py-out-1112.google.com with SMTP id e30so41115pya
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 12:48:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=th3Z8U3ALbQdlxBKhNhTHuVfZnoO+LITn7efw7QLEnhKbMiQZ4GugDct7U5vjfvaWmCyOAwMl4noB3tJwyaCjLwxADYqh0wx8BAZCMl448CLtbAM2hflQga8SizPiI2WH1Fbf7EnZheFdtlnBXxBii0oUAJkbDNJcZof8JaLULg=
Received: by 10.35.82.15 with SMTP id j15mr7083127pyl;
        Tue, 11 Jul 2006 12:48:26 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 11 Jul 2006 12:48:26 -0700 (PDT)
Message-ID: <359a92830607111248s21f4cf6cs7b109d714dcdb531@mail.gmail.com>
Date: Tue, 11 Jul 2006 15:48:26 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort
In-Reply-To: <007b01c6a50d$3fd35450$8b01a8c0@office.ems>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33389_2549726.1152647306728"
References: <c68e39170607111005x6140d06aw25ba7926608bb573@mail.gmail.com>
	 <007b01c6a50d$3fd35450$8b01a8c0@office.ems>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33389_2549726.1152647306728
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On 7/11/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
>
> I can't thank you enough, Yonik :-)
>

send money <G>.....

------=_Part_33389_2549726.1152647306728--

From java-user-return-21926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 20:04:23 2006
Return-Path: <java-user-return-21926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41489 invoked from network); 11 Jul 2006 20:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 20:04:23 -0000
Received: (qmail 72211 invoked by uid 500); 11 Jul 2006 20:04:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72172 invoked by uid 500); 11 Jul 2006 20:04:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72161 invoked by uid 99); 11 Jul 2006 20:04:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 13:04:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 13:04:15 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 11 Jul 2006 16:03:52 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 11 Jul 2006 16:03:45 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A525.2043178A"
Subject: RangeQuery question?
Date: Tue, 11 Jul 2006 16:08:47 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81134E5469@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RangeQuery question?
Thread-Index: AcalJdFUPDAaXZS2T5SwCl/Z5L5mIQ==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Jul 2006 20:03:45.0700 (UTC) FILETIME=[1DAEB640:01C6A525]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A525.2043178A
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is there a RangeQuery equivalent that can query date range on two
different fields?

=20

Term startTerm =3D new Term("startDate", "20060710");

Term endTerm =3D new Term("endDate", "20060711");

=20

RangeQuery q =3D new RangeQuery(startTerm, endTerm, true);

=20

=20


------_=_NextPart_001_01C6A525.2043178A--

From java-user-return-21927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 20:24:16 2006
Return-Path: <java-user-return-21927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48946 invoked from network); 11 Jul 2006 20:24:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 20:24:15 -0000
Received: (qmail 2497 invoked by uid 500); 11 Jul 2006 20:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2472 invoked by uid 500); 11 Jul 2006 20:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2460 invoked by uid 99); 11 Jul 2006 20:24:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 13:24:08 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 13:24:05 -0700
Received: by py-out-1112.google.com with SMTP id d80so4489525pyd
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 13:23:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=s8XlcNuCREXm8SeGBUzLAEWyFMJsBNENIiIpJtgKn6URNaHsWy6dUrkYHhmn3RlsQL8Ep6kJwIP9ot2d2yoKB3kaj1Q3u5z/zV0T1tNDU/hkv2b5eGPvZkg2CF4Vb3dPO/Kkq+ygsbdPksxnNm7QKyRIuCdmlBAKZnT8hShHDJg=
Received: by 10.35.20.14 with SMTP id x14mr7116830pyi;
        Tue, 11 Jul 2006 13:23:44 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 11 Jul 2006 13:23:44 -0700 (PDT)
Message-ID: <359a92830607111323k5eac184dx55fdd6ff1ca8aa34@mail.gmail.com>
Date: Tue, 11 Jul 2006 16:23:44 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for a phrase which spans on 2 pages
In-Reply-To: <44B3BBC7.9050708@level7.ro>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34532_1840248.1152649424360"
References: <44B3BBC7.9050708@level7.ro>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_34532_1840248.1152649424360
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can think of several approaches, but the experts will no doubt show me up
<G>..

1> index the entire book as a single document. Also, index the beginning and
ending offset of each page in separate "documents". Assuming you can find
the offset in the big doc of each matching phrase, you can also find out
what pages each match starts on and ends on, and if they are different you'd
know to display two pages. Not sure what this does to relevancy.......

2> Index, say, the 10 words on the previous page and 10 words on the next
page with the current page. You'd have to make sure your match wasn't
entirely within the 10 words you prepended or appended to the "match" page
(again by match position) when you returned data.

3> Have a series of "joiner" "documents". One for the 9 words of page n, and
9 words of  page n + 1 (along with the page number). Another set for 8
before and 8 after. etc. down to 1. If your phrase was 10 words, you'd
search your normal pages, and the 9 word "joiner" pages. Any match in the
joiners would be a page spanner. Again, what does that do to relevancy?


Note that there is no requirement that every document have the same fields,
so your searches can be disjoint. Also, I'm assuming that you can reasonably
decide that, say, 10 word phrases are the max you'll respect, which may not
be true.

I have no idea whether these are reasonable approaches given your problem
domain....

Best
Erick

------=_Part_34532_1840248.1152649424360--

From java-user-return-21928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 21:41:19 2006
Return-Path: <java-user-return-21928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82504 invoked from network); 11 Jul 2006 21:41:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 21:41:18 -0000
Received: (qmail 61094 invoked by uid 500); 11 Jul 2006 21:41:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60218 invoked by uid 500); 11 Jul 2006 21:41:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60202 invoked by uid 99); 11 Jul 2006 21:41:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 14:41:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 14:41:10 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.6/8.13.6) with ESMTP id k6BLeleF159396
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 21:40:48 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6BLhbZ9135558
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 23:43:38 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6BLegkk026407
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 23:40:42 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6BLeftp026215
	for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 23:40:41 +0200
In-Reply-To: <5266343.post@talk.nabble.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFA8B2C1B8.1191E9AE-ON882571A8.0075A271-882571A8.0076B5F0@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 11 Jul 2006 14:36:38 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 12/07/2006 00:43:34
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I've tried changing to one indexing thread
> (instead of 5) but still get the same problem. can't figure out why this
> happens.

The program as listed seems to accesss an existing index - since 'create'
is always <false> for both 'FSDirectory.getDirectoy(,)' and 'new
IndexWriter(,,)'. Perhaps an old lock file exists for that index, e.g.
because a program that was writing to that index was 'killed'. It seems
'cleaner' to create, at the start of the test program, a fresh index with a
few docs, and only then start the threads that attempt to add/search that
index.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 22:52:00 2006
Return-Path: <java-user-return-21929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6515 invoked from network); 11 Jul 2006 22:51:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 22:51:59 -0000
Received: (qmail 90092 invoked by uid 500); 11 Jul 2006 22:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90073 invoked by uid 500); 11 Jul 2006 22:51:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90062 invoked by uid 99); 11 Jul 2006 22:51:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 15:51:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hefest@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 15:51:51 -0700
Received: by py-out-1112.google.com with SMTP id e30so15957pya
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 15:51:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=VrIHZedV5frGeAKGcAtBdGNCDrJOGxo5ljdSbqSI/QcUW9VMoRFjvT2pmaU8JlC8FHRp8MOKFBwwHj8FNHRFxKaWN9UmNHzCZOUdBXEPzda3/u7PpmIntkOQa890ZxKHjqmO6D81CWQ+2LLP+uTRs79473L67ktP+86ERmw/8Vk=
Received: by 10.35.134.12 with SMTP id l12mr64986pyn;
        Tue, 11 Jul 2006 15:51:31 -0700 (PDT)
Received: by 10.35.54.16 with HTTP; Tue, 11 Jul 2006 15:51:30 -0700 (PDT)
Message-ID: <d487eb8e0607111551u300bfea4q600ce8b543751716@mail.gmail.com>
Date: Wed, 12 Jul 2006 00:51:30 +0200
From: "Tomi NA" <hefest@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: combined filesystem and web search
In-Reply-To: <359a92830607110648i22e770f6n7ee1381b1160ebd8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <d487eb8e0607110341gf2ac35ck1b4b862dbacdb6bd@mail.gmail.com>
	 <359a92830607110648i22e770f6n7ee1381b1160ebd8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/11/06, Erick Erickson <erickerickson@gmail.com> wrote:
> I can answer a few of these. If you haven't yet, you'd do yourself a favor
> to pick up the book "Lucene in Action". It's written to the 1.4 code-base,
> the examples compile but give deprecated warnings for the 1.9 code base, and
> need a few more tweaks for the 2.0 code base.

I wish people would start selling .pdf books online... :(

> Also, download a copy of Luke. It's invaluable for looking at an index to
> answer questions like "why isn't this query returning what I thought it
> should?".

Thanks for the tip, I'll be sure to try it out. Sounds like a good tool to have.

> Is there a good explanation somewhere how to set up incremental
> > indexing, rather than e.g. building the whole index over nightly?
>
> See Luncen in Action (LIA). The short answer is yes. In the simplest form,
> you can just add new data to a currently-existing index. You probably want

This will probably sound like a ridiculous question but...*how* would
I add new data to an existing index? Did you mean literally "add" as
in index an additional directory or website, rather than "refresh the
index of the currently indexed documents, now that they've changed"?

> to make a copy just in case your power goes out or something.

I'd imagine a search index in an intranet is probably the easiest
thing to rebuild if it comes to data loss due to a blackout: I'm now
worried about that at the moment. If the indexing becomes a multiday
effort (which I highly doubt it will), then I'll start to worry.
Still, I'd like to have the option of using multiple indices.

> Then there's IndexMergeTool which I haven't used, but looks interesting.

I haven't ran into it. Can you direct me to a document or two?

> Then there's the possibility of using a MultiSearcher, but I'll leave it to
> the experts to talk about how that combines results....

>From what I gathered from the mailing list archives, I guessed that
MultiSearcher'd come up. Where should I start?

No comments on ranking of documents with no real interlinking to help?

t.n.a.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 23:03:09 2006
Return-Path: <java-user-return-21930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9551 invoked from network); 11 Jul 2006 23:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 23:03:08 -0000
Received: (qmail 1936 invoked by uid 500); 11 Jul 2006 23:03:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1903 invoked by uid 500); 11 Jul 2006 23:03:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1891 invoked by uid 99); 11 Jul 2006 23:03:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 16:03:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 16:03:01 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15553C39@mailer.syr.edu>; Tue, 11 Jul 2006 19:02:40 -0400
Message-ID: <44B42E10.8040101@syr.edu>
Date: Tue, 11 Jul 2006 19:02:40 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: combined filesystem and web search
References: <d487eb8e0607110341gf2ac35ck1b4b862dbacdb6bd@mail.gmail.com>	 <359a92830607110648i22e770f6n7ee1381b1160ebd8@mail.gmail.com> <d487eb8e0607111551u300bfea4q600ce8b543751716@mail.gmail.com>
In-Reply-To: <d487eb8e0607111551u300bfea4q600ce8b543751716@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tomi NA wrote:
> I wish people would start selling .pdf books online... :(

Your wish is granted:

    <http://www.manning.com/hatcher2/>

>> Then there's IndexMergeTool which I haven't used, but looks interesting.
> 
> I haven't ran into it. Can you direct me to a document or two?

It's in contrib under miscellaneous/ (link to ViewVC markup view of 
source code):

<http://svn.apache.org/viewvc/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/misc/IndexMergeTool.java?view=markup>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 11 23:23:10 2006
Return-Path: <java-user-return-21931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13103 invoked from network); 11 Jul 2006 23:23:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2006 23:23:10 -0000
Received: (qmail 27208 invoked by uid 500); 11 Jul 2006 23:23:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26832 invoked by uid 500); 11 Jul 2006 23:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26821 invoked by uid 99); 11 Jul 2006 23:23:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 16:23:03 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hefest@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 16:23:02 -0700
Received: by py-out-1112.google.com with SMTP id e30so24129pya
        for <java-user@lucene.apache.org>; Tue, 11 Jul 2006 16:22:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sJsoAeH630ruK6FuJgroIOqq9Ab+TL0wOlm2sDaPzqhs4mydgetOnAw4EDX9n+yXfzY5ZKqvdq8pWqMesll3/KB9sj7tLjFIxye/KOE9zMZqbvoSY0XcYbrQ90+Iqw0p5sdKQvRW7wKJ1ZWaUZzAUk/CfS4YDiPgBxpfeY6xvB8=
Received: by 10.35.129.19 with SMTP id g19mr95934pyn;
        Tue, 11 Jul 2006 16:12:42 -0700 (PDT)
Received: by 10.35.54.16 with HTTP; Tue, 11 Jul 2006 16:12:42 -0700 (PDT)
Message-ID: <d487eb8e0607111612x1a4ddf58g911afbd4df29ba66@mail.gmail.com>
Date: Wed, 12 Jul 2006 01:12:42 +0200
From: "Tomi NA" <hefest@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: combined filesystem and web search
In-Reply-To: <44B42E10.8040101@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <d487eb8e0607110341gf2ac35ck1b4b862dbacdb6bd@mail.gmail.com>
	 <359a92830607110648i22e770f6n7ee1381b1160ebd8@mail.gmail.com>
	 <d487eb8e0607111551u300bfea4q600ce8b543751716@mail.gmail.com>
	 <44B42E10.8040101@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/12/06, Steven Rowe <sarowe@syr.edu> wrote:
> Tomi NA wrote:
> > I wish people would start selling .pdf books online... :(
>
> Your wish is granted:
>
>     <http://www.manning.com/hatcher2/>

Wow, that was fast! Thanks for the link.

> >> Then there's IndexMergeTool which I haven't used, but looks interesting.
> >
> > I haven't ran into it. Can you direct me to a document or two?
>
> It's in contrib under miscellaneous/ (link to ViewVC markup view of
> source code):
>
> <http://svn.apache.org/viewvc/lucene/java/trunk/contrib/miscellaneous/src/java/org/apache/lucene/misc/IndexMergeTool.java?view=markup>

Seems to do exactly what I need. A test will have to wait 'till
morning, though...
Thanks, Steven.

t.n.a.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 05:36:57 2006
Return-Path: <java-user-return-21932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25314 invoked from network); 12 Jul 2006 05:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 05:36:57 -0000
Received: (qmail 41601 invoked by uid 500); 12 Jul 2006 05:36:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41569 invoked by uid 500); 12 Jul 2006 05:36:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41558 invoked by uid 99); 12 Jul 2006 05:36:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 22:36:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.174.5.187] (HELO expredir4.cites.uiuc.edu) (128.174.5.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 22:36:47 -0700
Received: from [192.168.0.2] (vpn82-7e-92-5.near.uiuc.edu [130.126.146.5])
	by expredir4.cites.uiuc.edu (8.13.6/8.13.6) with ESMTP id k6C5aQAk014448;
	Wed, 12 Jul 2006 00:36:26 -0500 (CDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
To: java-user@lucene.apache.org
Message-Id: <761A6386-F9CE-460B-A0B0-95B30CB225F7@uiuc.edu>
Content-Type: multipart/alternative; boundary=Apple-Mail-8-429209171
Cc: Amit Kumar <amitku@uiuc.edu>
Subject: Storing Part of Speech information in Lucene Indices
From: Amit Kumar <amitku@uiuc.edu>
Date: Wed, 12 Jul 2006 00:36:24 -0500
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-8-429209171
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Hi,

A new project that I am investigating lucene for needs the  Parts of  
speech information for the tokens. I can  get that
information using NLP techniques  (GATE etc.), by pre processing the  
documents but I would like to  store that
information in the Indices. Something along the lines of

TermVectorOffsetInfo[?].getPartofSpeech();

I am writing to ask for your advice, you can tell me I am b o n k e r  
s  or let me know where I should start digging :).
Is that a good idea? Or would it be just less trouble for me to store  
the offset information along with parts of speech
outside Lucene.

Has anyone else done that?

Best,
Amit


ps: Thank you for putting the LuceneInAction source online, it was a  
great help to see the CategorizerTest.java.
I am ordering my copy of the book tomorrow :)

---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------







--Apple-Mail-8-429209171--

From java-user-return-21933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 05:50:25 2006
Return-Path: <java-user-return-21933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30487 invoked from network); 12 Jul 2006 05:50:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 05:50:24 -0000
Received: (qmail 60073 invoked by uid 500); 12 Jul 2006 05:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59466 invoked by uid 500); 12 Jul 2006 05:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59455 invoked by uid 99); 12 Jul 2006 05:50:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Jul 2006 22:50:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.12] (HELO smtpout08-04.prod.mesa1.secureserver.net) (64.202.165.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 11 Jul 2006 22:50:15 -0700
Received: (qmail 24316 invoked from network); 12 Jul 2006 05:49:54 -0000
Received: from unknown (202.153.32.162)
  by smtpout08-04.prod.mesa1.secureserver.net (64.202.165.12) with ESMTP; 12 Jul 2006 05:49:53 -0000
Subject: Adding synonym-index to an other index
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary="=-0PYEkVq231227+FOtDub"
Organization: iptouch
Date: Wed, 12 Jul 2006 11:20:33 +0530
Message-Id: <1152683433.4200.4.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-0PYEkVq231227+FOtDub
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Hi,
can we ever add the WordNet Synonym-Index to an other Index.?
I think this is a bit painful process.

For now, I retrieve the Synonyms of the words from the Search-Query and
hence reform the Search-Query.

Will the AddIndexes(indexes)  do this for us? Does the Merged Index give
meaningful results?

Please Help...   

thanks...    Ramesh Reddy


--=-0PYEkVq231227+FOtDub--


From java-user-return-21934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 07:25:07 2006
Return-Path: <java-user-return-21934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76180 invoked from network); 12 Jul 2006 07:25:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 07:25:07 -0000
Received: (qmail 13277 invoked by uid 500); 12 Jul 2006 07:24:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13245 invoked by uid 500); 12 Jul 2006 07:24:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13229 invoked by uid 99); 12 Jul 2006 07:24:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:24:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:24:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2C3265B764; Wed, 12 Jul 2006 00:24:23 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 23E6D7F403
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 00:24:23 -0700 (PDT)
Date: Wed, 12 Jul 2006 00:24:23 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Missing fields used for a sort
In-Reply-To: <359a92830607111248s21f4cf6cs7b109d714dcdb531@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607120022450.19817@hal.rescomp.berkeley.edu>
References: <c68e39170607111005x6140d06aw25ba7926608bb573@mail.gmail.com> 
 <007b01c6a50d$3fd35450$8b01a8c0@office.ems>
 <359a92830607111248s21f4cf6cs7b109d714dcdb531@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > I can't thank you enough, Yonik :-)
: >
:
: send money <G>.....

Bah! ... there's lots of money in the world, they print more and more of
it every day.

Quality Patches ... now there's something I bet Yonik would *really*
appreciate!  :)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 07:47:05 2006
Return-Path: <java-user-return-21935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86080 invoked from network); 12 Jul 2006 07:47:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 07:47:05 -0000
Received: (qmail 52805 invoked by uid 500); 12 Jul 2006 07:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52767 invoked by uid 500); 12 Jul 2006 07:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52756 invoked by uid 99); 12 Jul 2006 07:46:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:46:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 00:46:56 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 040AB5B764; Wed, 12 Jul 2006 00:46:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EC40D7F403
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 00:46:35 -0700 (PDT)
Date: Wed, 12 Jul 2006 00:46:35 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: RangeQuery question?
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81134E5469@UREXCHVS3.ur.com>
Message-ID: <Pine.LNX.4.58.0607120042310.19817@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E81134E5469@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) RangeQuery is the devil, don't use it.  If I weren't so lazy I would
change the javadocs for RangeQuery so that sentence was the class summary.
Takes a look at RangeFilter or ConstantScoreRangeQuery.

2) it's not clear what exactly you want your example to mean ... perhaps
you mean you want to match all docs with a field of "startDate
greater then "20060710" and a field of "endDate" less then "20060711", in
which case what you want to do is make a BooleanQuery containing two
ConstantScoreRangeQueries -- one on the startDate and one on the endDate.
... If that's not what you mean, then I don't understand your question.

: Is there a RangeQuery equivalent that can query date range on two
: different fields?
:
:
:
: Term startTerm = new Term("startDate", "20060710");
:
: Term endTerm = new Term("endDate", "20060711");
:
:
:
: RangeQuery q = new RangeQuery(startTerm, endTerm, true);



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 11:33:35 2006
Return-Path: <java-user-return-21936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72200 invoked from network); 12 Jul 2006 11:33:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:33:34 -0000
Received: (qmail 22727 invoked by uid 500); 12 Jul 2006 11:33:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22666 invoked by uid 500); 12 Jul 2006 11:33:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22634 invoked by uid 99); 12 Jul 2006 11:33:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:33:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:33:19 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id B798AA6660;
	Wed, 12 Jul 2006 14:32:57 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id 97227A663E; Wed, 12 Jul 2006 14:32:57 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from [10.0.0.73] (mile-r.intranet [10.0.0.73])
	by mail.datagroup.ro (Postfix) with ESMTP id 6885FA666A;
	Wed, 12 Jul 2006 12:09:31 +0300 (EEST)
Message-ID: <44B4BC4C.1050605@level7.ro>
Date: Wed, 12 Jul 2006 12:09:32 +0300
From: Mile Rosu <mile.rosu@level7.ro>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Searching for a phrase which spans on 2 pages
References: <44B3BBC7.9050708@level7.ro> <359a92830607111323k5eac184dx55fdd6ff1ca8aa34@mail.gmail.com>
In-Reply-To: <359a92830607111323k5eac184dx55fdd6ff1ca8aa34@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 12072006 #194388, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Erick,

I have been trying on Google Books some scenarios and apparently found a 
Google bug ...
It looks like they use number 2 approach, as this query illustrates it.

http://books.google.com/books?vid=ISBN1564968316&id=14Xx2T8tmMYC&pg=PA8&lpg=PA8&dq=%2B%22the+site+is+unburdened%22&sig=QRJSkKNLm0JlbkcWe2m1-y8YYz0

The phrase returns 2 hits, but if you look at the documents, only in the 
first one the phrase is visible.

Anyway, it makes possible finding something like:

http://books.google.com/books?q=%22sense+of+dissatisfaction+with+existing+elements%22&btnG=Search+Books
The returned page is the first one on which the phrase spans (but no 
more highlighting).

It seems we are really close to a good solution, now looking for a way 
to implementing it in terms of index structure.

Thanks again,
Mile Rosu


Erick Erickson wrote:
> I can think of several approaches, but the experts will no doubt show 
> me up
> <G>..
>
> 1> index the entire book as a single document. Also, index the 
> beginning and
> ending offset of each page in separate "documents". Assuming you can find
> the offset in the big doc of each matching phrase, you can also find out
> what pages each match starts on and ends on, and if they are different 
> you'd
> know to display two pages. Not sure what this does to relevancy.......
>
> 2> Index, say, the 10 words on the previous page and 10 words on the next
> page with the current page. You'd have to make sure your match wasn't
> entirely within the 10 words you prepended or appended to the "match" 
> page
> (again by match position) when you returned data.
>
> 3> Have a series of "joiner" "documents". One for the 9 words of page 
> n, and
> 9 words of  page n + 1 (along with the page number). Another set for 8
> before and 8 after. etc. down to 1. If your phrase was 10 words, you'd
> search your normal pages, and the 9 word "joiner" pages. Any match in the
> joiners would be a page spanner. Again, what does that do to relevancy?
>
>
> Note that there is no requirement that every document have the same 
> fields,
> so your searches can be disjoint. Also, I'm assuming that you can 
> reasonably
> decide that, say, 10 word phrases are the max you'll respect, which 
> may not
> be true.
>
> I have no idea whether these are reasonable approaches given your problem
> domain....
>
> Best
> Erick
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 11:37:36 2006
Return-Path: <java-user-return-21937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73329 invoked from network); 12 Jul 2006 11:37:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:37:36 -0000
Received: (qmail 31549 invoked by uid 500); 12 Jul 2006 11:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31519 invoked by uid 500); 12 Jul 2006 11:37:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31494 invoked by uid 99); 12 Jul 2006 11:37:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:37:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of angirash.tech@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:37:28 -0700
Received: by py-out-1112.google.com with SMTP id z59so185331pyg
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 04:37:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=rd9d52o0y447yyVFldfSWbPI5I67KaU7ca3EpKpdwSBCN4TZOPGMgAGF4fkPngAkL1naeFq0trmtfHsvIxmeDLXlXAhuUuv+7siavZ4MmJK72dJ9bUnWA4gsM+TvfF1Ny+dSSMab+UnBC+vzzFPor2Fu3JQpB5ZRmE18KxPCYz8=
Received: by 10.35.135.12 with SMTP id m12mr743187pyn;
        Wed, 12 Jul 2006 04:37:07 -0700 (PDT)
Received: by 10.35.98.9 with HTTP; Wed, 12 Jul 2006 04:37:07 -0700 (PDT)
Message-ID: <b5544d420607120437v78b22383t56dfc0305d9cfd6e@mail.gmail.com>
Date: Wed, 12 Jul 2006 17:07:07 +0530
From: "sudarshan angirash" <angirash.tech@gmail.com>
To: java-user@lucene.apache.org, c-dev@lucene.apache.org, 
	java-dev@lucene.apache.org, general@lucene.apache.org
Subject: query for search through lucene for BLOB
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3087_13461066.1152704227643"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3087_13461066.1152704227643
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi all

i have some PDF files stored in Oracle 9i as BLOB.
now i want to search for a string in those pdf files using Lucene. then i
want to show the selected PDF files which contains The String.

if you can give me any pointers about how to do it, then it will be a gr8
help for me.

regards
sudarshan

------=_Part_3087_13461066.1152704227643--

From java-user-return-21938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 11:40:04 2006
Return-Path: <java-user-return-21938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73963 invoked from network); 12 Jul 2006 11:40:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:40:03 -0000
Received: (qmail 35898 invoked by uid 500); 12 Jul 2006 11:39:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35870 invoked by uid 500); 12 Jul 2006 11:39:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35859 invoked by uid 99); 12 Jul 2006 11:39:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:39:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:39:55 -0700
Received: from [10.65.253.200] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15557C97@mailer.syr.edu>; Wed, 12 Jul 2006 7:39:34 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <761A6386-F9CE-460B-A0B0-95B30CB225F7@uiuc.edu>
References: <761A6386-F9CE-460B-A0B0-95B30CB225F7@uiuc.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5613A05C-E96A-4960-91F5-370E10C1EC0B@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: Storing Part of Speech information in Lucene Indices
Date: Wed, 12 Jul 2006 07:39:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Amit,

This is definitely something you can do.   What are your goals for  
it?  Do you want to search by word and POS or do you just want POS  
available for post processing?

You could just append the POS tag onto the end of your token as it  
gets indexed, something like foo_NN or foo_ADJ.  This approach may  
mean you have to use prefix query when you want to search against  
just "foo".    You could also have a parallel field to your main  
field that stores the POS.  Then you could access it via the term  
vectors array.

Also, we have been discussing on the developers list on how to add  
payloads to a posting (i.e. store related information at a position  
in the index) similar to what Google discusses in their original  
paper.  Unfortunately, this isn't implemented yet, but if you feel  
like helping out, check out the discussion on the developer's list  
(see Flexible Indexing).

-Grant

On Jul 12, 2006, at 1:36 AM, Amit Kumar wrote:

> Hi,
>
> A new project that I am investigating lucene for needs the  Parts  
> of speech information for the tokens. I can  get that
> information using NLP techniques  (GATE etc.), by pre processing  
> the documents but I would like to  store that
> information in the Indices. Something along the lines of
>
> TermVectorOffsetInfo[?].getPartofSpeech();
>
> I am writing to ask for your advice, you can tell me I am b o n k e  
> r s  or let me know where I should start digging :).
> Is that a good idea? Or would it be just less trouble for me to  
> store the offset information along with parts of speech
> outside Lucene.
>
> Has anyone else done that?
>
> Best,
> Amit
>
>
> ps: Thank you for putting the LuceneInAction source online, it was  
> a great help to see the CategorizerTest.java.
> I am ordering my copy of the book tomorrow :)
>
> ---------------------------------------------------------
> Amit Kumar
> Research Programmer
> The Graduate School of Library and Information Science
> University of Illinois, Urbana Champaign IL, 61820
> phone: 217-333-4118 fax: 217-244-3302
> ---------------------------------------------------------
>
>
>
>
>
>



--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 11:44:29 2006
Return-Path: <java-user-return-21939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74970 invoked from network); 12 Jul 2006 11:44:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:44:28 -0000
Received: (qmail 45643 invoked by uid 500); 12 Jul 2006 11:44:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45615 invoked by uid 500); 12 Jul 2006 11:44:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45598 invoked by uid 99); 12 Jul 2006 11:44:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:44:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:43:58 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching for a phrase which spans on 2 pages
Date: Wed, 12 Jul 2006 12:43:31 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE7F8CE6@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching for a phrase which spans on 2 pages
Thread-Index: Acak+hFUQh73snUtR/6f5uVE68000gArf3lg
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The simplest solution is always the best - when storing the page, do not
break up sentences. So a page will be all the sentences that occur on
it. If a sentence starts on one page and finishes on the next it will be
included in both pages in the index.

Hope this helps

Mike

www.ardentia.com the home of NetSearch
-----Original Message-----
From: Mile Rosu [mailto:mile.rosu@level7.ro]=20
Sent: 11 July 2006 15:55
To: java-user@lucene.apache.org
Subject: Searching for a phrase which spans on 2 pages

Hello,

I am working on an application similar to google books which allows=20
searching on documents which represent a scanned page. Of course, one=20
might search for a phrase starting at the end of one page and ending at=20
the beginning of the next one. In this case I do not know how I might=20
treat this. Both pages should be returned as hit results.
Do you have any idea on how this situation might be handled?

Thank you,
Mile Rosu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 11:50:58 2006
Return-Path: <java-user-return-21940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76725 invoked from network); 12 Jul 2006 11:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 11:50:57 -0000
Received: (qmail 57812 invoked by uid 500); 12 Jul 2006 11:50:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57781 invoked by uid 500); 12 Jul 2006 11:50:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57769 invoked by uid 99); 12 Jul 2006 11:50:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 04:50:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Jul 2006 04:50:48 -0700
Received: (qmail 38899 invoked by uid 60001); 12 Jul 2006 11:50:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ieERY3jhUkQHEGBd/uuoe3q7xaUvmCZNV+/GCFqyAeYPVgnsSToMtRz/rXzvwezNULw2Zwi0rDOUZ0SP8eEMzJpfcyY2Yf8r1a9XxMiAcT7XBlsGULaC6Oq3spBSgldzAXw3oWLLoc5Xvd/OTNTymlAeL/DUAMZWW+DOzCg6Z/o=  ;
Message-ID: <20060712115026.38897.qmail@web26002.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Wed, 12 Jul 2006 11:50:26 GMT
Date: Wed, 12 Jul 2006 11:50:26 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Storing Part of Speech information in Lucene Indices
To: java-user@lucene.apache.org
In-Reply-To: <761A6386-F9CE-460B-A0B0-95B30CB225F7@uiuc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could you not use a custom analyzer to inject "metadata" tokens into the index at the same position as the source tokens?

For example, given the text:
    The     cat     jumped     over     the     dog
your analyzer could emit tokens:
    [the]     [cat,_posNoun] [jumped,_posVerb]     [over]     [the]     [dog,_posNoun]

where the "_pos...." tokens have a zero position increment to effectively associate them with the term to which they relate (this is how the example SynonymTokenizer in the highlighter package works). The "_pos" prefix is used as a uniquefier for metadata tokens to avoid any name-clashes with any real content tokens.

Theoretically you could then construct queries where the queries mixed both data and your part-of-speech metadata eg you could use the position information based queries to find out what things normally have a particular verb applied to them:
     "jumped  _posNoun"~3
  or what verbs are commonly associated with a dog (caution advised here):
    "_posVerb the dog"~3
or to use an ambiguous word in a particular context/sense
    "_posVerb track"~1
 

Cheers,
Mark

----- Original Message ----
From: Amit Kumar <amitku@uiuc.edu>
To: java-user@lucene.apache.org
Cc: Amit Kumar <amitku@uiuc.edu>
Sent: Wednesday, 12 July, 2006 6:36:24 AM
Subject: Storing Part of Speech information in Lucene Indices

Hi,

A new project that I am investigating lucene for needs the  Parts of  
speech information for the tokens. I can  get that
information using NLP techniques  (GATE etc.), by pre processing the  
documents but I would like to  store that
information in the Indices. Something along the lines of

TermVectorOffsetInfo[?].getPartofSpeech();

I am writing to ask for your advice, you can tell me I am b o n k e r  
s  or let me know where I should start digging :).
Is that a good idea? Or would it be just less trouble for me to store  
the offset information along with parts of speech
outside Lucene.

Has anyone else done that?

Best,
Amit


ps: Thank you for putting the LuceneInAction source online, it was a  
great help to see the CategorizerTest.java.
I am ordering my copy of the book tomorrow :)

---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 13:10:08 2006
Return-Path: <java-user-return-21941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2081 invoked from network); 12 Jul 2006 13:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 13:10:08 -0000
Received: (qmail 56608 invoked by uid 500); 12 Jul 2006 13:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56582 invoked by uid 500); 12 Jul 2006 13:09:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56551 invoked by uid 99); 12 Jul 2006 13:09:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 06:09:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mile.rosu@level7.ro designates 193.230.233.11 as permitted sender)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 06:09:45 -0700
Received: from webserver.level7.ro (localhost [127.0.0.1])
	by webserver.level7.ro (Postfix) with ESMTP id C2CDAA663F;
	Wed, 12 Jul 2006 16:09:24 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 107)
	id B4FFBA663E; Wed, 12 Jul 2006 16:09:24 +0300 (EEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on webserver.level7.ro
X-Spam-Level: 
Received: from [10.0.0.73] (mile-r.intranet [10.0.0.73])
	by mail.datagroup.ro (Postfix) with ESMTP id 745BDA663F;
	Wed, 12 Jul 2006 16:09:18 +0300 (EEST)
Message-ID: <44B4F47F.8050900@level7.ro>
Date: Wed, 12 Jul 2006 16:09:19 +0300
From: Mile Rosu <mile.rosu@level7.ro>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: PhraseQuery - retrieving the fieldname
References: <44B3BBC7.9050708@level7.ro> <359a92830607111323k5eac184dx55fdd6ff1ca8aa34@mail.gmail.com>
In-Reply-To: <359a92830607111323k5eac184dx55fdd6ff1ca8aa34@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Anti-Virus: Kaspersky Anti-Virus for MailServers 5.5.10/RELEASE, bases: 12072006 #194433, status: clean
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-104.0 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	USER_IN_WHITELIST autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

A small problem this time: I would like to retrieve the field name of a 
PhraseQuery.
Could you tell me please which is the best way for this ?

Thank you,
Mile Rosu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 13:37:08 2006
Return-Path: <java-user-return-21942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17367 invoked from network); 12 Jul 2006 13:37:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 13:37:08 -0000
Received: (qmail 35430 invoked by uid 500); 12 Jul 2006 13:37:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35396 invoked by uid 500); 12 Jul 2006 13:37:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35385 invoked by uid 99); 12 Jul 2006 13:37:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 06:37:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 06:36:59 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G0etK-0004oZ-Bn
	for java-user@lucene.apache.org; Wed, 12 Jul 2006 06:36:38 -0700
Message-ID: <5288759.post@talk.nabble.com>
Date: Wed, 12 Jul 2006 06:36:38 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <OFA8B2C1B8.1191E9AE-ON882571A8.0075A271-882571A8.0076B5F0@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com> <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com> <5229084.post@talk.nabble.com> <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com> <5239040.post@talk.nabble.com> <OF95E16205.0B9B15B3-ON882571A6.005841DB-882571A6.0058D685@il.ibm.com> <5249234.post@talk.nabble.com> <OF70C239BF.EC027ED9-ON882571A7.0065881B-882571A7.006BF84A@il.ibm.com> <5266343.post@talk.nabble.com> <OFA8B2C1B8.1191E9AE-ON882571A8.0075A271-882571A8.0076B5F0@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I did clean everything but still getting the same problem. I'm using lucene
2.0. Do you get the same problem on your machine?
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5288759
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 14:21:52 2006
Return-Path: <java-user-return-21943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37280 invoked from network); 12 Jul 2006 14:21:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 14:21:52 -0000
Received: (qmail 74861 invoked by uid 500); 12 Jul 2006 14:21:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74838 invoked by uid 500); 12 Jul 2006 14:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74826 invoked by uid 99); 12 Jul 2006 14:21:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 07:21:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 07:21:42 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.155589E1@mailer.syr.edu>; Wed, 12 Jul 2006 10:21:19 -0400
Message-ID: <44B5055F.8070009@syr.edu>
Date: Wed, 12 Jul 2006 10:21:19 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: query for search through lucene for BLOB
References: <b5544d420607120437v78b22383t56dfc0305d9cfd6e@mail.gmail.com>
In-Reply-To: <b5544d420607120437v78b22383t56dfc0305d9cfd6e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Sudarshan,

When your question is Java usage related, you will almost certainly get 
better responses by asking just on the Java User list.  Oddly enough, 
hitting all of the mailing lists for the project at once with the same 
question is likely to *reduce* your chances of getting polite/on-topic 
responses.

To index PDF files, you need to first extract their content, and Lucene 
does not do this for you.  Here is the Lucene FAQ entry on the topic:

<http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-c45f8b25d786f4e384936fa93ce1137a23b7e422>

Chapter 7 of the excellent book Lucene in Action 
<http://lucenebook.com/> also covers this topic.

Once you have extracted the text for a document, you'll want to store a 
key for the document in a separate field in your Lucene index.  Then 
when you have hits from a search, you'll be able to use the DB key to 
retrieve the PDF blob from Oracle, then maybe save the it to a temp file 
and start Adobe Reader to display the doc(s).  Or something like that.

Steve

sudarshan angirash wrote:
> hi all
> 
> i have some PDF files stored in Oracle 9i as BLOB.
> now i want to search for a string in those pdf files using Lucene. then i
> want to show the selected PDF files which contains The String.
> 
> if you can give me any pointers about how to do it, then it will be a gr8
> help for me.
> 
> regards
> sudarshan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 15:16:11 2006
Return-Path: <java-user-return-21944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61411 invoked from network); 12 Jul 2006 15:16:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 15:16:10 -0000
Received: (qmail 46827 invoked by uid 500); 12 Jul 2006 15:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46797 invoked by uid 500); 12 Jul 2006 15:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46786 invoked by uid 99); 12 Jul 2006 15:16:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:16:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.174.5.186] (HELO expredir3.cites.uiuc.edu) (128.174.5.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:15:57 -0700
Received: from [10.0.0.140] (vpn82-7e-92-e2.near.uiuc.edu [130.126.146.226])
	by expredir3.cites.uiuc.edu (8.13.6/8.13.6) with ESMTP id k6CFFaYq013670
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:15:36 -0500 (CDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5613A05C-E96A-4960-91F5-370E10C1EC0B@syr.edu>
References: <761A6386-F9CE-460B-A0B0-95B30CB225F7@uiuc.edu> <5613A05C-E96A-4960-91F5-370E10C1EC0B@syr.edu>
Content-Type: multipart/alternative; boundary=Apple-Mail-11-463959148
Message-Id: <BDCA2945-F037-4061-8925-9C4F86D6053C@uiuc.edu>
From: Amit Kumar <amitku@uiuc.edu>
Subject: Re: Storing Part of Speech information in Lucene Indices
Date: Wed, 12 Jul 2006 10:15:34 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-11-463959148
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

We need to be able to search by word and POS and also have POS  
available for each occurrence.  Appending POS to the terms will  
create post processing nightmare to retrieve
term frequencies right? (I would have to add all the foo_NN and  
foo_ADJ etc.).

I can store the POS in a parallel field and access it via term  
vectors, but that wouldn't allow any kind of search on POS related  
fields right?  For example if I wanted to search for any
adjective with in 3 words of say a term or say If I wanted to get all  
the patterns that follow the sequence ADJ NN ADJ.

Let me look in the developer archives for the payload discussions,  
perhaps implementing that might satisfy my use cases.

Comments?

-Thanks
Amit



On Jul 12, 2006, at 6:39 AM, Grant Ingersoll wrote:

> Hi Amit,
>
> This is definitely something you can do.   What are your goals for  
> it?  Do you want to search by word and POS or do you just want POS  
> available for post processing?
>
> You could just append the POS tag onto the end of your token as it  
> gets indexed, something like foo_NN or foo_ADJ.  This approach may  
> mean you have to use prefix query when you want to search against  
> just "foo".    You could also have a parallel field to your main  
> field that stores the POS.  Then you could access it via the term  
> vectors array.
>
> Also, we have been discussing on the developers list on how to add  
> payloads to a posting (i.e. store related information at a position  
> in the index) similar to what Google discusses in their original  
> paper.  Unfortunately, this isn't implemented yet, but if you feel  
> like helping out, check out the discussion on the developer's list  
> (see Flexible Indexing).
>
> -Grant
>
> On Jul 12, 2006, at 1:36 AM, Amit Kumar wrote:
>
>> Hi,
>>
>> A new project that I am investigating lucene for needs the  Parts  
>> of speech information for the tokens. I can  get that
>> information using NLP techniques  (GATE etc.), by pre processing  
>> the documents but I would like to  store that
>> information in the Indices. Something along the lines of
>>
>> TermVectorOffsetInfo[?].getPartofSpeech();
>>
>> I am writing to ask for your advice, you can tell me I am b o n k  
>> e r s  or let me know where I should start digging :).
>> Is that a good idea? Or would it be just less trouble for me to  
>> store the offset information along with parts of speech
>> outside Lucene.
>>
>> Has anyone else done that?
>>
>> Best,
>> Amit
>>
>>
>> ps: Thank you for putting the LuceneInAction source online, it was  
>> a great help to see the CategorizerTest.java.
>> I am ordering my copy of the book tomorrow :)
>>
>> ---------------------------------------------------------
>> Amit Kumar
>> Research Programmer
>> The Graduate School of Library and Information Science
>> University of Illinois, Urbana Champaign IL, 61820
>> phone: 217-333-4118 fax: 217-244-3302
>> ---------------------------------------------------------
>>
>>
>>
>>
>>
>>
>
>
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
> Voice: 315-443-5484
> Fax: 315-443-6886
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------





--Apple-Mail-11-463959148--

From java-user-return-21945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 15:22:44 2006
Return-Path: <java-user-return-21945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64065 invoked from network); 12 Jul 2006 15:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 15:22:44 -0000
Received: (qmail 67512 invoked by uid 500); 12 Jul 2006 15:22:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67491 invoked by uid 500); 12 Jul 2006 15:22:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67478 invoked by uid 99); 12 Jul 2006 15:22:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:22:35 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:22:34 -0700
Received: by py-out-1112.google.com with SMTP id d80so335825pyd
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 08:22:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mjxDnAC571TP2+BixXbTEI4oBvAenprOmnqEP7vD/NdoeEIDIDH3BfilWWVAVh8g+FlRCTDn9g/iyu4r/OIxJNna6WjWAnGGZ6ckxjqv6k0WmYNR67wqcw9UqHji2LHv5azpcgnMIDG/uQY2xyfKzNIoxqawyDjyYDxgDoQEN8M=
Received: by 10.35.107.20 with SMTP id j20mr1010747pym;
        Wed, 12 Jul 2006 08:22:11 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 12 Jul 2006 08:22:11 -0700 (PDT)
Message-ID: <359a92830607120822r2f621a01p23bd4e4f70539613@mail.gmail.com>
Date: Wed, 12 Jul 2006 11:22:11 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: combined filesystem and web search
In-Reply-To: <d487eb8e0607111551u300bfea4q600ce8b543751716@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6407_31716213.1152717731328"
References: <d487eb8e0607110341gf2ac35ck1b4b862dbacdb6bd@mail.gmail.com>
	 <359a92830607110648i22e770f6n7ee1381b1160ebd8@mail.gmail.com>
	 <d487eb8e0607111551u300bfea4q600ce8b543751716@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6407_31716213.1152717731328
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I haven't used the multisearcher personally, so I'll let others chime in.
And I know nothing about the IndexMergeTool, I've only seen the interface in
the Lucene Javadoc. And I must say the documentation isn't real helpful :(.

To add to an existing index, just instantiate the IndexWriter with the
boolean create parameter set to 'false'. There's no contention problem with
one (or more) searchers searching an index while it's being modified.
HOWEVER, your searchers won't see the data you're adding UNTIL you close and
re-open the readers/searchers.

Best
Erick

------=_Part_6407_31716213.1152717731328--

From java-user-return-21946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 15:27:10 2006
Return-Path: <java-user-return-21946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66387 invoked from network); 12 Jul 2006 15:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 15:27:10 -0000
Received: (qmail 78806 invoked by uid 500); 12 Jul 2006 15:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78781 invoked by uid 500); 12 Jul 2006 15:27:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78770 invoked by uid 99); 12 Jul 2006 15:27:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:27:02 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:27:02 -0700
Received: by py-out-1112.google.com with SMTP id d80so338133pyd
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 08:26:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=e3QL2UseC2pyXkL02WJZRwcD2OLm+AJYyUCIxNil+YqY1ESscSLhaJoekQ69oDKR8PevgnQmcbvFx4AWIKqDxDQUwiSZBBgbKCMBvTTo2adyDF3d1W/Tswk/b4ddkv6NiZNvHGHM6IvtjAG3qOhh1qjMixsuwqbmB2gF9wGUfMA=
Received: by 10.35.106.15 with SMTP id i15mr977631pym;
        Wed, 12 Jul 2006 08:26:41 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 12 Jul 2006 08:26:41 -0700 (PDT)
Message-ID: <359a92830607120826t71eda96av9333ebb0748c8693@mail.gmail.com>
Date: Wed, 12 Jul 2006 11:26:41 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching for a phrase which spans on 2 pages
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE7F8CE6@staf-exm-01.ardentia.co.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6515_26041093.1152718001510"
References: <0B1C92228C5C8D45AA7450F78B3FB9DE7F8CE6@staf-exm-01.ardentia.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6515_26041093.1152718001510
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Sweet!

------=_Part_6515_26041093.1152718001510--

From java-user-return-21947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 15:48:36 2006
Return-Path: <java-user-return-21947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73758 invoked from network); 12 Jul 2006 15:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 15:48:35 -0000
Received: (qmail 28449 invoked by uid 500); 12 Jul 2006 15:48:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28423 invoked by uid 500); 12 Jul 2006 15:48:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28412 invoked by uid 99); 12 Jul 2006 15:48:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:48:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.81.148.13] (HELO smtp.isoco.com) (62.81.148.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:48:23 -0700
Received: by smtp.isoco.com (Postfix-smc, from userid 65534)
	id E5707A7CCB; Wed, 12 Jul 2006 17:50:35 +0200 (CEST)
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on 
	kilimanjaro.isoco.net
X-Spam-Level: 
Received: from mad.isoco.net (mad.isoco.net [172.18.0.11])
	by smtp.isoco.com (Postfix-smc) with ESMTP id 5B17A8FF4E
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 17:50:35 +0200 (CEST)
Received: from mcarcelen (darek.mad.isoco.net [172.18.2.70])
	by mad.isoco.net (Postfix) with ESMTP id BDA5EC06B
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 17:48:29 +0200 (CEST)
From: "mcarcelen" <mcarcelen@isoco.com>
To: <java-user@lucene.apache.org>
Subject: Lucene index database
Date: Wed, 12 Jul 2006 17:47:55 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: AcalxxjQQjd3ul4+T0+Ej+WKUqdpaQAAzwDA
In-Reply-To: <359a92830607120822r2f621a01p23bd4e4f70539613@mail.gmail.com>
Message-Id: <20060712154829.BDA5EC06B@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.1.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
Can Lucene index a database? PostgreSQL, Mysql, Access ?
Thanks
Cheers
Teresa



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 15:55:44 2006
Return-Path: <java-user-return-21948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77195 invoked from network); 12 Jul 2006 15:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 15:55:44 -0000
Received: (qmail 47532 invoked by uid 500); 12 Jul 2006 15:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47496 invoked by uid 500); 12 Jul 2006 15:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47470 invoked by uid 99); 12 Jul 2006 15:55:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 08:55:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Jul 2006 08:55:30 -0700
Received: (qmail 30527 invoked by uid 60001); 12 Jul 2006 15:55:09 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=TvucS4EsE1R55t7GtBelbn/TUBAbB7admdrgT7mgWYTzgAkCK8Do6SJXJgcfQRuziDMsazCiW0VuzYq398bkGs9n1yeomB/GPzQENZsYdX3mt/nGSSU8GA2Xdein8rK2a8/J1oUVFkLKg1npIgrvtS1Y4UpCpI2YOMUaDOPi804=  ;
Message-ID: <20060712155509.30525.qmail@web26007.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Wed, 12 Jul 2006 15:55:09 GMT
Date: Wed, 12 Jul 2006 15:55:09 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Storing Part of Speech information in Lucene Indices
To: java-user@lucene.apache.org
In-Reply-To: <BDCA2945-F037-4061-8925-9C4F86D6053C@uiuc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>Appending POS to the terms will create post processing nightmare

I think you may have missed the subtle distinction between Grant's suggestion and mine.

His suggestion was to append your POS info to the source token - creating a single token which combined both the original content and your POS info.
My suggestion was to generate *two* tokens - one is the original source token, untouched, the other is the POS token but the trick is to set the "position increment" to 0 for the POS token. This ensures that the POS token is considered to occur at exactly the same location as the source token. The original source token is untampered with and has all the usual stats in the index.The POS token and/or source token can be used interchangeably in queries on the same field so you can use position info eg phrase or span queries.

Cheers
Mark



----- Original Message ----
From: Amit Kumar <amitku@uiuc.edu>
To: java-user@lucene.apache.org
Sent: Wednesday, 12 July, 2006 4:15:34 PM
Subject: Re: Storing Part of Speech information in Lucene Indices

We need to be able to search by word and POS and also have POS  
available for each occurrence.  Appending POS to the terms will  
create post processing nightmare to retrieve
term frequencies right? (I would have to add all the foo_NN and  
foo_ADJ etc.).

I can store the POS in a parallel field and access it via term  
vectors, but that wouldn't allow any kind of search on POS related  
fields right?  For example if I wanted to search for any
adjective with in 3 words of say a term or say If I wanted to get all  
the patterns that follow the sequence ADJ NN ADJ.

Let me look in the developer archives for the payload discussions,  
perhaps implementing that might satisfy my use cases.

Comments?

-Thanks
Amit



On Jul 12, 2006, at 6:39 AM, Grant Ingersoll wrote:

> Hi Amit,
>
> This is definitely something you can do.   What are your goals for  
> it?  Do you want to search by word and POS or do you just want POS  
> available for post processing?
>
> You could just append the POS tag onto the end of your token as it  
> gets indexed, something like foo_NN or foo_ADJ.  This approach may  
> mean you have to use prefix query when you want to search against  
> just "foo".    You could also have a parallel field to your main  
> field that stores the POS.  Then you could access it via the term  
> vectors array.
>
> Also, we have been discussing on the developers list on how to add  
> payloads to a posting (i.e. store related information at a position  
> in the index) similar to what Google discusses in their original  
> paper.  Unfortunately, this isn't implemented yet, but if you feel  
> like helping out, check out the discussion on the developer's list  
> (see Flexible Indexing).
>
> -Grant
>
> On Jul 12, 2006, at 1:36 AM, Amit Kumar wrote:
>
>> Hi,
>>
>> A new project that I am investigating lucene for needs the  Parts  
>> of speech information for the tokens. I can  get that
>> information using NLP techniques  (GATE etc.), by pre processing  
>> the documents but I would like to  store that
>> information in the Indices. Something along the lines of
>>
>> TermVectorOffsetInfo[?].getPartofSpeech();
>>
>> I am writing to ask for your advice, you can tell me I am b o n k  
>> e r s  or let me know where I should start digging :).
>> Is that a good idea? Or would it be just less trouble for me to  
>> store the offset information along with parts of speech
>> outside Lucene.
>>
>> Has anyone else done that?
>>
>> Best,
>> Amit
>>
>>
>> ps: Thank you for putting the LuceneInAction source online, it was  
>> a great help to see the CategorizerTest.java.
>> I am ordering my copy of the book tomorrow :)
>>
>> ---------------------------------------------------------
>> Amit Kumar
>> Research Programmer
>> The Graduate School of Library and Information Science
>> University of Illinois, Urbana Champaign IL, 61820
>> phone: 217-333-4118 fax: 217-244-3302
>> ---------------------------------------------------------
>>
>>
>>
>>
>>
>>
>
>
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
> Voice: 315-443-5484
> Fax: 315-443-6886
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 16:00:24 2006
Return-Path: <java-user-return-21949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79542 invoked from network); 12 Jul 2006 16:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 16:00:23 -0000
Received: (qmail 55801 invoked by uid 500); 12 Jul 2006 16:00:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55763 invoked by uid 500); 12 Jul 2006 16:00:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55752 invoked by uid 99); 12 Jul 2006 16:00:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:00:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.174.5.96] (HELO expredir5.cites.uiuc.edu) (128.174.5.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:00:14 -0700
Received: from [128.174.155.107] (gslislap107.lis.uiuc.edu [128.174.155.107])
	by expredir5.cites.uiuc.edu (8.13.6/8.13.6) with ESMTP id k6CFxrK1016326
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:59:53 -0500 (CDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060712155509.30525.qmail@web26007.mail.ukl.yahoo.com>
References: <20060712155509.30525.qmail@web26007.mail.ukl.yahoo.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-14-466616226
Message-Id: <37016968-CCFF-4349-B955-4653AEF25E18@uiuc.edu>
From: Amit Kumar <amitku@uiuc.edu>
Subject: Re: Storing Part of Speech information in Lucene Indices
Date: Wed, 12 Jul 2006 10:59:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-14-466616226
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

You are right. I saw your email after pressing  send. Let me  
experiment. Thanks for the tip.

Best,
Amit

On Jul 12, 2006, at 10:55 AM, mark harwood wrote:

>>> Appending POS to the terms will create post processing nightmare
>
> I think you may have missed the subtle distinction between Grant's  
> suggestion and mine.
>
> His suggestion was to append your POS info to the source token -  
> creating a single token which combined both the original content  
> and your POS info.
> My suggestion was to generate *two* tokens - one is the original  
> source token, untouched, the other is the POS token but the trick  
> is to set the "position increment" to 0 for the POS token. This  
> ensures that the POS token is considered to occur at exactly the  
> same location as the source token. The original source token is  
> untampered with and has all the usual stats in the index.The POS  
> token and/or source token can be used interchangeably in queries on  
> the same field so you can use position info eg phrase or span queries.
>
> Cheers
> Mark
>
>
>
> ----- Original Message ----
> From: Amit Kumar <amitku@uiuc.edu>
> To: java-user@lucene.apache.org
> Sent: Wednesday, 12 July, 2006 4:15:34 PM
> Subject: Re: Storing Part of Speech information in Lucene Indices
>
> We need to be able to search by word and POS and also have POS
> available for each occurrence.  Appending POS to the terms will
> create post processing nightmare to retrieve
> term frequencies right? (I would have to add all the foo_NN and
> foo_ADJ etc.).
>
> I can store the POS in a parallel field and access it via term
> vectors, but that wouldn't allow any kind of search on POS related
> fields right?  For example if I wanted to search for any
> adjective with in 3 words of say a term or say If I wanted to get all
> the patterns that follow the sequence ADJ NN ADJ.
>
> Let me look in the developer archives for the payload discussions,
> perhaps implementing that might satisfy my use cases.
>
> Comments?
>
> -Thanks
> Amit
>
>
>
> On Jul 12, 2006, at 6:39 AM, Grant Ingersoll wrote:
>
>> Hi Amit,
>>
>> This is definitely something you can do.   What are your goals for
>> it?  Do you want to search by word and POS or do you just want POS
>> available for post processing?
>>
>> You could just append the POS tag onto the end of your token as it
>> gets indexed, something like foo_NN or foo_ADJ.  This approach may
>> mean you have to use prefix query when you want to search against
>> just "foo".    You could also have a parallel field to your main
>> field that stores the POS.  Then you could access it via the term
>> vectors array.
>>
>> Also, we have been discussing on the developers list on how to add
>> payloads to a posting (i.e. store related information at a position
>> in the index) similar to what Google discusses in their original
>> paper.  Unfortunately, this isn't implemented yet, but if you feel
>> like helping out, check out the discussion on the developer's list
>> (see Flexible Indexing).
>>
>> -Grant
>>
>> On Jul 12, 2006, at 1:36 AM, Amit Kumar wrote:
>>
>>> Hi,
>>>
>>> A new project that I am investigating lucene for needs the  Parts
>>> of speech information for the tokens. I can  get that
>>> information using NLP techniques  (GATE etc.), by pre processing
>>> the documents but I would like to  store that
>>> information in the Indices. Something along the lines of
>>>
>>> TermVectorOffsetInfo[?].getPartofSpeech();
>>>
>>> I am writing to ask for your advice, you can tell me I am b o n k
>>> e r s  or let me know where I should start digging :).
>>> Is that a good idea? Or would it be just less trouble for me to
>>> store the offset information along with parts of speech
>>> outside Lucene.
>>>
>>> Has anyone else done that?
>>>
>>> Best,
>>> Amit
>>>
>>>
>>> ps: Thank you for putting the LuceneInAction source online, it was
>>> a great help to see the CategorizerTest.java.
>>> I am ordering my copy of the book tomorrow :)
>>>
>>> ---------------------------------------------------------
>>> Amit Kumar
>>> Research Programmer
>>> The Graduate School of Library and Information Science
>>> University of Illinois, Urbana Champaign IL, 61820
>>> phone: 217-333-4118 fax: 217-244-3302
>>> ---------------------------------------------------------
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>>
>> --------------------------
>> Grant Ingersoll
>> Sr. Software Engineer
>> Center for Natural Language Processing
>> Syracuse University
>> 335 Hinds Hall
>> Syracuse, NY 13244
>> http://www.cnlp.org
>>
>> Voice: 315-443-5484
>> Fax: 315-443-6886
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------
> Amit Kumar
> Research Programmer
> The Graduate School of Library and Information Science
> University of Illinois, Urbana Champaign IL, 61820
> phone: 217-333-4118 fax: 217-244-3302
> ---------------------------------------------------------
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------
Amit Kumar
Research Programmer
The Graduate School of Library and Information Science
University of Illinois, Urbana Champaign IL, 61820
phone: 217-333-4118 fax: 217-244-3302
---------------------------------------------------------





--Apple-Mail-14-466616226--

From java-user-return-21950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 16:34:06 2006
Return-Path: <java-user-return-21950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93754 invoked from network); 12 Jul 2006 16:34:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 16:34:05 -0000
Received: (qmail 32823 invoked by uid 500); 12 Jul 2006 16:33:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32776 invoked by uid 500); 12 Jul 2006 16:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32744 invoked by uid 99); 12 Jul 2006 16:33:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:33:48 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:33:47 -0700
Received: by ug-out-1314.google.com with SMTP id y2so271035uge
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 09:33:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=uFCS0wAqFDoQaipFgRtJrLvACf4A8TNqCeY2+8PfKGRXpvbKqk0UlzCHiRMJdmXBGZvaenRzJ8RC5wj7rVreK6bz8nwDhEcqsSsDRtp1M1wFh2UPCaRLBPTXYnqvuw2p4jozog46Yg/HMA8ik8C/Uh6fDOAuDl6ar2A/NiUqSzM=
Received: by 10.66.224.19 with SMTP id w19mr71841ugg;
        Wed, 12 Jul 2006 09:33:26 -0700 (PDT)
Received: by 10.67.90.14 with HTTP; Wed, 12 Jul 2006 09:33:26 -0700 (PDT)
Message-ID: <ab0709bf0607120933l37c6e950q9eca472b5da8fa4a@mail.gmail.com>
Date: Wed, 12 Jul 2006 12:33:26 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Sort Cache
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7399_17316726.1152722006559"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7399_17316726.1152722006559
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am going to be working with a medium index of 200k to 1m documents.
Occasionaly, there will be single document corrections applied to this
index. I am worried about this action clearing my sort buffers. I saw the
method of priming another searcher, but if you have a bunch of fields that
may be sorted that could take longer than I want (I am trying to get as
close to realtime as possible). Would it make any sense in trying to save
the sort cache, insert the new doc in that (whatever that entails, I don't
know), and then pass the sort cache to a new searcher? Or something along
those lines...?

Does that sound completely crazy or do you have a much better way for me to
try? Or mabye I am worrying about nothing at all...

Thanks for comment,

Mark

------=_Part_7399_17316726.1152722006559--

From java-user-return-21951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 16:49:17 2006
Return-Path: <java-user-return-21951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2023 invoked from network); 12 Jul 2006 16:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 16:49:17 -0000
Received: (qmail 72426 invoked by uid 500); 12 Jul 2006 16:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72401 invoked by uid 500); 12 Jul 2006 16:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72390 invoked by uid 99); 12 Jul 2006 16:49:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:49:09 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:49:08 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id A511B368027
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 18:48:47 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 05605-01 for <java-user@lucene.apache.org>;
	Wed, 12 Jul 2006 18:48:43 +0200 (CEST)
Received: from localhost (dslb-084-057-167-168.pools.arcor-ip.net [84.57.167.168])
	by flacons.org (flacons.org) with ESMTP id 42D9F368050
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 18:48:42 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Reuse of IndexReader
Date: Wed, 12 Jul 2006 18:48:40 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607121848.40480.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy,
I got the following situation:
A Servlet runing in Tomcat5. When starting the servlet up it automatically 
creates a IndexReader and stores it in a static variable. For searching this 
variable is used. When adding a document to the index, I create a 
IndexWriter, write the Document, and close the IndexWriter again.
This leads into a problem: The IndexReader only searches in documents which 
were in the index when the Reader was created. Every Document added 
afterwards is not searched in. When I restart the Servlet I can search in 
those documents.

Is this a normal behaviour and how can I avoid this?

Thanks
-- 
Dominik Bruhn
mailto: dominik@dbruhn.de
http://www.dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 16:51:18 2006
Return-Path: <java-user-return-21952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2588 invoked from network); 12 Jul 2006 16:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 16:51:17 -0000
Received: (qmail 78615 invoked by uid 500); 12 Jul 2006 16:51:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78577 invoked by uid 500); 12 Jul 2006 16:51:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78566 invoked by uid 99); 12 Jul 2006 16:51:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:51:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 09:51:06 -0700
Received: from [10.65.253.200] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15559A57@mailer.syr.edu>; Wed, 12 Jul 2006 12:50:44 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <BDCA2945-F037-4061-8925-9C4F86D6053C@uiuc.edu>
References: <761A6386-F9CE-460B-A0B0-95B30CB225F7@uiuc.edu> <5613A05C-E96A-4960-91F5-370E10C1EC0B@syr.edu> <BDCA2945-F037-4061-8925-9C4F86D6053C@uiuc.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DC0D1A1B-BB64-40D0-A02E-DA1D0C4C8CDA@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: Storing Part of Speech information in Lucene Indices
Date: Wed, 12 Jul 2006 12:50:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think Mark's idea is better for this.  Although I seem to recall  
there being some caveats w/ multiple tokens at the same position, but  
I don't remember the details.  I _think_ term vectors don't like it,  
so if you need them, you might have troubles.  Perhaps a search of  
the mailing lists and JIRA might turn up something or maybe someone  
else remembers.  At any rate, it may not effect you, so I would try  
Mark's suggestion and see if it works.

-Grant

On Jul 12, 2006, at 11:15 AM, Amit Kumar wrote:

> We need to be able to search by word and POS and also have POS  
> available for each occurrence.  Appending POS to the terms will  
> create post processing nightmare to retrieve
> term frequencies right? (I would have to add all the foo_NN and  
> foo_ADJ etc.).
>
> I can store the POS in a parallel field and access it via term  
> vectors, but that wouldn't allow any kind of search on POS related  
> fields right?  For example if I wanted to search for any
> adjective with in 3 words of say a term or say If I wanted to get  
> all the patterns that follow the sequence ADJ NN ADJ.
>
> Let me look in the developer archives for the payload discussions,  
> perhaps implementing that might satisfy my use cases.
>
> Comments?
>
> -Thanks
> Amit
>
>
>
> On Jul 12, 2006, at 6:39 AM, Grant Ingersoll wrote:
>
>> Hi Amit,
>>
>> This is definitely something you can do.   What are your goals for  
>> it?  Do you want to search by word and POS or do you just want POS  
>> available for post processing?
>>
>> You could just append the POS tag onto the end of your token as it  
>> gets indexed, something like foo_NN or foo_ADJ.  This approach may  
>> mean you have to use prefix query when you want to search against  
>> just "foo".    You could also have a parallel field to your main  
>> field that stores the POS.  Then you could access it via the term  
>> vectors array.
>>
>> Also, we have been discussing on the developers list on how to add  
>> payloads to a posting (i.e. store related information at a  
>> position in the index) similar to what Google discusses in their  
>> original paper.  Unfortunately, this isn't implemented yet, but if  
>> you feel like helping out, check out the discussion on the  
>> developer's list (see Flexible Indexing).
>>
>> -Grant
>>
>> On Jul 12, 2006, at 1:36 AM, Amit Kumar wrote:
>>
>>> Hi,
>>>
>>> A new project that I am investigating lucene for needs the  Parts  
>>> of speech information for the tokens. I can  get that
>>> information using NLP techniques  (GATE etc.), by pre processing  
>>> the documents but I would like to  store that
>>> information in the Indices. Something along the lines of
>>>
>>> TermVectorOffsetInfo[?].getPartofSpeech();
>>>
>>> I am writing to ask for your advice, you can tell me I am b o n k  
>>> e r s  or let me know where I should start digging :).
>>> Is that a good idea? Or would it be just less trouble for me to  
>>> store the offset information along with parts of speech
>>> outside Lucene.
>>>
>>> Has anyone else done that?
>>>
>>> Best,
>>> Amit
>>>
>>>
>>> ps: Thank you for putting the LuceneInAction source online, it  
>>> was a great help to see the CategorizerTest.java.
>>> I am ordering my copy of the book tomorrow :)
>>>
>>> ---------------------------------------------------------
>>> Amit Kumar
>>> Research Programmer
>>> The Graduate School of Library and Information Science
>>> University of Illinois, Urbana Champaign IL, 61820
>>> phone: 217-333-4118 fax: 217-244-3302
>>> ---------------------------------------------------------
>>>
>>>
>>>
>>>
>>>
>>>
>>
>>
>>
>> --------------------------
>> Grant Ingersoll
>> Sr. Software Engineer
>> Center for Natural Language Processing
>> Syracuse University
>> 335 Hinds Hall
>> Syracuse, NY 13244
>> http://www.cnlp.org
>>
>> Voice: 315-443-5484
>> Fax: 315-443-6886
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------
> Amit Kumar
> Research Programmer
> The Graduate School of Library and Information Science
> University of Illinois, Urbana Champaign IL, 61820
> phone: 217-333-4118 fax: 217-244-3302
> ---------------------------------------------------------
>
>
>
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 17:00:25 2006
Return-Path: <java-user-return-21953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7207 invoked from network); 12 Jul 2006 17:00:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:00:24 -0000
Received: (qmail 6116 invoked by uid 500); 12 Jul 2006 17:00:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6079 invoked by uid 500); 12 Jul 2006 17:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6068 invoked by uid 99); 12 Jul 2006 17:00:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:00:16 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:00:15 -0700
Received: by py-out-1112.google.com with SMTP id z59so310747pyg
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 09:59:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HQhMInhHhgVlKF6ULlyak13ked3bCrh5/aQ9duJSOgsAu2fReEWxeR+f4VEFC3RV2Zstx8+4CXstiZDxBaRAm8A/TWwW6k404wBmVABabmH6WtwgU3Rv95IO5a2wljlVTy4lKqzUyLAPDvgeRoYatq2ntTSBT3z6Z44LRNXpmrE=
Received: by 10.35.9.15 with SMTP id m15mr1123865pyi;
        Wed, 12 Jul 2006 09:59:52 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 12 Jul 2006 09:59:52 -0700 (PDT)
Message-ID: <359a92830607120959w3428de43h904866eef4eaf143@mail.gmail.com>
Date: Wed, 12 Jul 2006 12:59:52 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index database
In-Reply-To: <20060712154829.BDA5EC06B@mad.isoco.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8696_18412338.1152723592595"
References: <359a92830607120822r2f621a01p23bd4e4f70539613@mail.gmail.com>
	 <20060712154829.BDA5EC06B@mad.isoco.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8696_18412338.1152723592595
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This has been extensively discussed in the mail archive, I think a search of
the archive would help you a lot.

The short form is no. There's nothing built into Lucene to help you index a
database. How would you define that anyway? <G>

That said, you can write a program to extract data from the database and
index that data. Depending on what you need to do, you can either store
enough data in the index to satisfy searches, or store data in each
"document" you index that allows you to "do the right thing" as far as the
database is concerned to satisfy searches.

Best
Erick

------=_Part_8696_18412338.1152723592595--

From java-user-return-21954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 17:00:51 2006
Return-Path: <java-user-return-21954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7353 invoked from network); 12 Jul 2006 17:00:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:00:51 -0000
Received: (qmail 8015 invoked by uid 500); 12 Jul 2006 17:00:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7984 invoked by uid 500); 12 Jul 2006 17:00:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7973 invoked by uid 99); 12 Jul 2006 17:00:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:00:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.184] (HELO smtpout.mac.com) (17.250.248.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:00:40 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout14/MantshX 4.0) with ESMTP id k6CH0JB6021312
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:00:19 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k6CH0Fmd022986
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:00:18 -0700 (PDT)
Message-ID: <44B52A9C.3040000@mac.com>
Date: Wed, 12 Jul 2006 13:00:12 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene index database
References: <20060712154829.BDA5EC06B@mad.isoco.net>
In-Reply-To: <20060712154829.BDA5EC06B@mad.isoco.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey there Teresa.

Short answer: Not directly.

Long answer:  Lucene is a set of libraries built for indexing text and 
then searching those indexes.  Not sure what you mean by indexing a 
database per se.  You could write some code to get the records you want 
from the database and then index those.  For example, if you have a ton 
of articles stored in a database you could grab those articles, pull the 
text, index and then use the lucene index for searches.  Once you found 
something you wanted you could go back to the database for additional 
information.

Hope this helps.
-Michael

mcarcelen wrote:

>Hi,
>Can Lucene index a database? PostgreSQL, Mysql, Access ?
>Thanks
>Cheers
>Teresa
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 17:01:41 2006
Return-Path: <java-user-return-21955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7796 invoked from network); 12 Jul 2006 17:01:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:01:41 -0000
Received: (qmail 11463 invoked by uid 500); 12 Jul 2006 17:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11431 invoked by uid 500); 12 Jul 2006 17:01:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11420 invoked by uid 99); 12 Jul 2006 17:01:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:01:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:01:31 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 69DFB30EFCD8; Wed, 12 Jul 2006 13:01:10 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4CE4430EFCD7
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 13:01:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <200607121848.40480.dominik@dbruhn.de>
References: <200607121848.40480.dominik@dbruhn.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D491BF55-3F5D-4CE9-AB41-05B7735955CA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Reuse of IndexReader
Date: Wed, 12 Jul 2006 13:01:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 12, 2006, at 12:48 PM, Dominik Bruhn wrote:

> Hy,
> I got the following situation:
> A Servlet runing in Tomcat5. When starting the servlet up it  
> automatically
> creates a IndexReader and stores it in a static variable. For  
> searching this
> variable is used. When adding a document to the index, I create a
> IndexWriter, write the Document, and close the IndexWriter again.
> This leads into a problem: The IndexReader only searches in  
> documents which
> were in the index when the Reader was created. Every Document added
> afterwards is not searched in. When I restart the Servlet I can  
> search in
> those documents.
>
> Is this a normal behaviour and how can I avoid this?

This is normal behavior.  You'll need to develop some scheme for  
opening a new IndexReader when it is appropriate.  Lots of caveats  
apply.  See Solr for a solid implementation of how this can be done.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 17:03:00 2006
Return-Path: <java-user-return-21956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8602 invoked from network); 12 Jul 2006 17:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:03:00 -0000
Received: (qmail 17168 invoked by uid 500); 12 Jul 2006 17:02:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17138 invoked by uid 500); 12 Jul 2006 17:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17098 invoked by uid 99); 12 Jul 2006 17:02:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:02:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.175] (HELO smtpout.mac.com) (17.250.248.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:02:36 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout05/MantshX 4.0) with ESMTP id k6CH2GV6000522
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:02:16 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k6CH2C8b026304
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:02:15 -0700 (PDT)
Message-ID: <44B52B14.1040207@mac.com>
Date: Wed, 12 Jul 2006 13:02:12 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene index database
References: <359a92830607120822r2f621a01p23bd4e4f70539613@mail.gmail.com> <20060712154829.BDA5EC06B@mad.isoco.net> <359a92830607120959w3428de43h904866eef4eaf143@mail.gmail.com>
In-Reply-To: <359a92830607120959w3428de43h904866eef4eaf143@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ha Erick,

we must have sent our responses at the same time :)

What Erick said :)

Erick Erickson wrote:

> This has been extensively discussed in the mail archive, I think a 
> search of
> the archive would help you a lot.
>
> The short form is no. There's nothing built into Lucene to help you 
> index a
> database. How would you define that anyway? <G>
>
> That said, you can write a program to extract data from the database and
> index that data. Depending on what you need to do, you can either store
> enough data in the index to satisfy searches, or store data in each
> "document" you index that allows you to "do the right thing" as far as 
> the
> database is concerned to satisfy searches.
>
> Best
> Erick
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 17:05:16 2006
Return-Path: <java-user-return-21957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10177 invoked from network); 12 Jul 2006 17:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:05:15 -0000
Received: (qmail 27784 invoked by uid 500); 12 Jul 2006 17:05:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27747 invoked by uid 500); 12 Jul 2006 17:05:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27731 invoked by uid 99); 12 Jul 2006 17:05:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:05:08 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:05:07 -0700
Received: by py-out-1112.google.com with SMTP id z59so312480pyg
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:04:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nfFBjiF0sRmHHJp4cUcGgzaQHpSFb4GQQQyjZQD32y4VyfTeJpOYWOe1yhcnJoH7J3uGThdgatDrwdU28MKjCP5kPr3o3tu+cph4TCj65EuWgXBg7yo3grpyt/XgLQpqde7fakO7eashU2NE+g/z7co7+OzmOFeIS4K52j8dXns=
Received: by 10.35.121.9 with SMTP id y9mr1127021pym;
        Wed, 12 Jul 2006 10:04:46 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 12 Jul 2006 10:04:46 -0700 (PDT)
Message-ID: <359a92830607121004k55af07c9h2fd06d94f939c1c5@mail.gmail.com>
Date: Wed, 12 Jul 2006 13:04:46 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reuse of IndexReader
In-Reply-To: <200607121848.40480.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8804_13160669.1152723886859"
References: <200607121848.40480.dominik@dbruhn.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8804_13160669.1152723886859
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is normal behavior. When you open a reader, it takes a snapshot of the
index and uses that snapshot until it is closed, and any updates to the
index in the meantime are invisible to that reader.

You could periodically close and reopen the reader to get the latest data,
it's not necessary to stop the program. But as you describe things, you'd
have to take care that you don't close the reader if one of your (I presume)
threads was actually using it.

Best
Erick

------=_Part_8804_13160669.1152723886859--

From java-user-return-21958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 17:06:55 2006
Return-Path: <java-user-return-21958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11820 invoked from network); 12 Jul 2006 17:06:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:06:54 -0000
Received: (qmail 35078 invoked by uid 500); 12 Jul 2006 17:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35050 invoked by uid 500); 12 Jul 2006 17:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35039 invoked by uid 99); 12 Jul 2006 17:06:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:06:46 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:06:45 -0700
Received: by py-out-1112.google.com with SMTP id z59so313172pyg
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 10:06:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=avFg4ldvBJLj/rlFV8BYJNQl1JEkRYEhIHeTvMaxRuoZeO6Y/KMaEE+WLpM7bRyoF9MFtOi9bBIHN+IteSED8RX90nU+fwkiaMqtgA9Ax7wbVpJ1HUbf36SNGGzBcUvBmLfxj4F6LpWCzB19JFwEQME5G9gT+DdPIi0z3g3U2iA=
Received: by 10.35.78.9 with SMTP id f9mr1099678pyl;
        Wed, 12 Jul 2006 10:06:25 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 12 Jul 2006 10:06:25 -0700 (PDT)
Message-ID: <359a92830607121006h5a6f1baen855c7dcf6889181@mail.gmail.com>
Date: Wed, 12 Jul 2006 13:06:25 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index database
In-Reply-To: <44B52B14.1040207@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8836_6154386.1152723985245"
References: <359a92830607120822r2f621a01p23bd4e4f70539613@mail.gmail.com>
	 <20060712154829.BDA5EC06B@mad.isoco.net>
	 <359a92830607120959w3428de43h904866eef4eaf143@mail.gmail.com>
	 <44B52B14.1040207@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8836_6154386.1152723985245
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What Michael said :).

------=_Part_8836_6154386.1152723985245--

From java-user-return-21959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 17:44:15 2006
Return-Path: <java-user-return-21959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25855 invoked from network); 12 Jul 2006 17:44:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 17:44:14 -0000
Received: (qmail 26561 invoked by uid 500); 12 Jul 2006 17:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26525 invoked by uid 500); 12 Jul 2006 17:44:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26513 invoked by uid 99); 12 Jul 2006 17:44:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:44:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dominik@dbruhn.de designates 213.239.217.207 as permitted sender)
Received: from [213.239.217.207] (HELO flacons.org) (213.239.217.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 10:44:05 -0700
Received: from localhost (localhost [127.0.0.1])
	by flacons.org (flacons.org) with ESMTP id A6ED5368049
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 19:43:45 +0200 (CEST)
Received: from flacons.org ([127.0.0.1])
	by localhost (debian [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 15562-06 for <java-user@lucene.apache.org>;
	Wed, 12 Jul 2006 19:43:41 +0200 (CEST)
Received: from localhost (dslb-084-057-167-168.pools.arcor-ip.net [84.57.167.168])
	by flacons.org (flacons.org) with ESMTP id 156D236802D
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 19:43:41 +0200 (CEST)
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Re: Reuse of IndexReader
Date: Wed, 12 Jul 2006 19:43:39 +0200
User-Agent: KMail/1.9.3
References: <200607121848.40480.dominik@dbruhn.de> <359a92830607121004k55af07c9h2fd06d94f939c1c5@mail.gmail.com>
In-Reply-To: <359a92830607121004k55af07c9h2fd06d94f939c1c5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607121943.39306.dominik@dbruhn.de>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at flacons.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hy,
thanks for your answers.
Uppon creation of the Reader, does Lucene copy the whole Index into RAM? Or is 
this cache filled while searching? How can I find out how long it takes to 
create the IndexReader? Just time to Create-Call?

Thanks
-- 
Dominik Bruhn
mailto: dominik@dbruhn.de
http://www.dbruhn.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 18:11:16 2006
Return-Path: <java-user-return-21960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35932 invoked from network); 12 Jul 2006 18:11:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 18:11:15 -0000
Received: (qmail 78986 invoked by uid 500); 12 Jul 2006 18:11:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78956 invoked by uid 500); 12 Jul 2006 18:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78940 invoked by uid 99); 12 Jul 2006 18:11:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 11:11:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 11:11:05 -0700
Received: by ug-out-1314.google.com with SMTP id y2so309122uge
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 11:10:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uQIa80MavHv+HU2uigR0BpbEYG+AtfaFb303KzhdnH1FvUuBUAfqnXEHcMDCYd2l/tnlVYBN2sX9foL4pCQrgY6z4ZUn/OCByy5bft9UlATgJJtXMbhJoBEqGDEv/lXON0ErzU2DkjDrjVsDqYC8QHQqRUdgEgsQd+hlyhw4JgI=
Received: by 10.66.244.10 with SMTP id r10mr650913ugh;
        Wed, 12 Jul 2006 11:10:41 -0700 (PDT)
Received: by 10.67.90.14 with HTTP; Wed, 12 Jul 2006 11:10:41 -0700 (PDT)
Message-ID: <ab0709bf0607121110t19289bdelfe28e4ddf7c1ec01@mail.gmail.com>
Date: Wed, 12 Jul 2006 14:10:41 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reuse of IndexReader
In-Reply-To: <200607121943.39306.dominik@dbruhn.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9674_25596919.1152727841041"
References: <200607121848.40480.dominik@dbruhn.de>
	 <359a92830607121004k55af07c9h2fd06d94f939c1c5@mail.gmail.com>
	 <200607121943.39306.dominik@dbruhn.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9674_25596919.1152727841041
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049

A good implementation for what you need.

- Mark

On 7/12/06, Dominik Bruhn <dominik@dbruhn.de> wrote:
>
> Hy,
> thanks for your answers.
> Uppon creation of the Reader, does Lucene copy the whole Index into RAM?
> Or is
> this cache filled while searching? How can I find out how long it takes to
> create the IndexReader? Just time to Create-Call?
>
> Thanks
> --
> Dominik Bruhn
> mailto: dominik@dbruhn.de
> http://www.dbruhn.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9674_25596919.1152727841041--

From java-user-return-21961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 19:25:37 2006
Return-Path: <java-user-return-21961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78481 invoked from network); 12 Jul 2006 19:25:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 19:25:37 -0000
Received: (qmail 27496 invoked by uid 500); 12 Jul 2006 19:25:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27469 invoked by uid 500); 12 Jul 2006 19:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27458 invoked by uid 99); 12 Jul 2006 19:25:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:25:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:25:29 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 78B675B798; Wed, 12 Jul 2006 12:25:01 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1E2817F403
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 12:25:01 -0700 (PDT)
Date: Wed, 12 Jul 2006 12:25:01 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sort Cache
In-Reply-To: <ab0709bf0607120933l37c6e950q9eca472b5da8fa4a@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607121216410.19202@hal.rescomp.berkeley.edu>
References: <ab0709bf0607120933l37c6e950q9eca472b5da8fa4a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: close to realtime as possible). Would it make any sense in trying to save
: the sort cache, insert the new doc in that (whatever that entails, I don't
: know), and then pass the sort cache to a new searcher? Or something along
: those lines...?

as crazy as this sounds -- it's even harder then you think.
deleting and re-adding a single document to your index can cause the
docIds of other documents to change as a result of segment merging -- so
reusing your FieldCache andjust making small modifications to it really
isn't feasible.

: try? Or mabye I am worrying about nothing at all...

Unless you have existing code and hard numbers demonstrating a
performance problem -- I wouldn't worry about it.  In my experience with
Solr, warming FieldCaches generaly only takes a few seconds. (It's
when I warm up 16,000 Filters that it takes a minute or two)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 19:40:20 2006
Return-Path: <java-user-return-21962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84739 invoked from network); 12 Jul 2006 19:40:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 19:40:20 -0000
Received: (qmail 60934 invoked by uid 500); 12 Jul 2006 19:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60909 invoked by uid 500); 12 Jul 2006 19:40:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60898 invoked by uid 99); 12 Jul 2006 19:40:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:40:12 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:40:11 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.6/8.13.6) with ESMTP id k6CJdmbY041042
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 19:39:48 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6CJghuD136538
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 21:42:43 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6CJdlaA000738
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 21:39:47 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6CJdl74000728
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 21:39:47 +0200
In-Reply-To: <5288759.post@talk.nabble.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFDA81886A.F25F2EB7-ON882571A9.006B187A-882571A9.006B3DF9@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 12 Jul 2006 12:31:22 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 12/07/2006 22:42:42
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I did clean everything but still getting the same problem. I'm using
lucene
> 2.0. Do you get the same problem on your machine?

Please try with this code - http://cdoronc.20m.com/tmp/indexingThreads.zip

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 19:41:28 2006
Return-Path: <java-user-return-21963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85268 invoked from network); 12 Jul 2006 19:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 19:41:28 -0000
Received: (qmail 63481 invoked by uid 500); 12 Jul 2006 19:41:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63445 invoked by uid 500); 12 Jul 2006 19:41:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63433 invoked by uid 99); 12 Jul 2006 19:41:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:41:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 12:41:18 -0700
Received: by ug-out-1314.google.com with SMTP id y2so354894uge
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 12:40:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZJBWv6WC3b3oYORSfQGSyNUNMibp1LFa95Va7U8O4DgMbt3wCHwXwGiAs7+b2ZmdIUZAL9ZdYqi0HpUsek2QZOrG1q0MGs4+tmo4PiidCD2cfq0mu2r7Z0rK/dVtJ5lunzl8FKpoqpESMPKdZu0cO1LRX0ec+jd43X8mymJLSVA=
Received: by 10.66.219.11 with SMTP id r11mr762632ugg;
        Wed, 12 Jul 2006 12:40:56 -0700 (PDT)
Received: by 10.67.90.14 with HTTP; Wed, 12 Jul 2006 12:40:56 -0700 (PDT)
Message-ID: <ab0709bf0607121240q5ff70dfbt4d2f67308af8ecc4@mail.gmail.com>
Date: Wed, 12 Jul 2006 15:40:56 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Reuse of IndexReader
In-Reply-To: <ab0709bf0607121110t19289bdelfe28e4ddf7c1ec01@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12181_32224811.1152733256726"
References: <200607121848.40480.dominik@dbruhn.de>
	 <359a92830607121004k55af07c9h2fd06d94f939c1c5@mail.gmail.com>
	 <200607121943.39306.dominik@dbruhn.de>
	 <ab0709bf0607121110t19289bdelfe28e4ddf7c1ec01@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12181_32224811.1152733256726
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have not seen an expert's comment on the previous code I linked to. It
seems (to my young inexperienced eyes) to do an optimal job of providing
realtime access to an index. Anyone else have some experience with this
code?

On 7/12/06, Mark Miller <markrmiller@gmail.com> wrote:
>
>
> http://www.nabble.com/Fwd%3A-Contribution%3A-LuceneIndexAccessor-t17416.html#a47049
>
> A good implementation for what you need.
>
> - Mark
>
>
> On 7/12/06, Dominik Bruhn <dominik@dbruhn.de> wrote:
> >
> > Hy,
> > thanks for your answers.
> > Uppon creation of the Reader, does Lucene copy the whole Index into RAM?
> > Or is
> > this cache filled while searching? How can I find out how long it takes
> > to
> > create the IndexReader? Just time to Create-Call?
> >
> > Thanks
> > --
> > Dominik Bruhn
> > mailto: dominik@dbruhn.de
> > http://www.dbruhn.de
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_12181_32224811.1152733256726--

From java-user-return-21964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 20:06:28 2006
Return-Path: <java-user-return-21964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93426 invoked from network); 12 Jul 2006 20:06:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 20:06:27 -0000
Received: (qmail 3202 invoked by uid 500); 12 Jul 2006 20:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3176 invoked by uid 500); 12 Jul 2006 20:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3165 invoked by uid 99); 12 Jul 2006 20:06:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 13:06:20 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 13:06:20 -0700
Received: by ug-out-1314.google.com with SMTP id y2so3292uge
        for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 13:05:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IeC6pgPL62nwx4e1XN6vqztgMYTXz4WTTiKXJhzAAzEA9FFqv8mpWvkmBLnlzEeeXP7HosmAtVZyito7mCky3aIB9w156mgpDKhQqs947r4uFxEl0+yGCSz79i6mzgMqA7+FLJ/bwy/l9R6MCtzqGD4CATu8s/QvawA0latt/sU=
Received: by 10.78.166.7 with SMTP id o7mr45245hue;
        Wed, 12 Jul 2006 13:05:58 -0700 (PDT)
Received: by 10.78.138.20 with HTTP; Wed, 12 Jul 2006 13:05:58 -0700 (PDT)
Message-ID: <6e3ae6310607121305u28f94d2cmf67074b051be6a3e@mail.gmail.com>
Date: Wed, 12 Jul 2006 13:05:58 -0700
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index database
In-Reply-To: <359a92830607120959w3428de43h904866eef4eaf143@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <359a92830607120822r2f621a01p23bd4e4f70539613@mail.gmail.com>
	 <20060712154829.BDA5EC06B@mad.isoco.net>
	 <359a92830607120959w3428de43h904866eef4eaf143@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What Erick and Michael said are all correct, or the same. :)

What Lucene can do is search data that stored into Document objects.
Lucene is said to be able to search html, pdf, etc, but that's because
those formats are relatively fixed. You can easily tell title,
content, etc.

With database, which has more complicated and flexible structures. You
need to code to select data, retrieve content, save into Lucene index,
parse the queries, render the results, and also, keep the index in
sync with the database, etc.

You are welcome to try DBSight to save most of these repeated efforts.

Chris Lu
-------------------------------------
Lucene Search On Any Databases/Applications
http://www.dbsight.net

On 7/12/06, Erick Erickson <erickerickson@gmail.com> wrote:
> This has been extensively discussed in the mail archive, I think a search of
> the archive would help you a lot.
>
> The short form is no. There's nothing built into Lucene to help you index a
> database. How would you define that anyway? <G>
>
> That said, you can write a program to extract data from the database and
> index that data. Depending on what you need to do, you can either store
> enough data in the index to satisfy searches, or store data in each
> "document" you index that allows you to "do the right thing" as far as the
> database is concerned to satisfy searches.
>
> Best
> Erick
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 21:54:52 2006
Return-Path: <java-user-return-21965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28749 invoked from network); 12 Jul 2006 21:54:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 21:54:51 -0000
Received: (qmail 2697 invoked by uid 500); 12 Jul 2006 21:54:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2457 invoked by uid 500); 12 Jul 2006 21:54:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2446 invoked by uid 99); 12 Jul 2006 21:54:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 14:54:44 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 14:54:43 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 12 Jul 2006 17:54:10 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 12 Jul 2006 17:54:03 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: RangeQuery question?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Wed, 12 Jul 2006 17:58:58 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E811367ABE4@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: RangeQuery question?
Thread-Index: Acalh1ytWhQowLQeQd2YzIEEwJTFtQAdvvdw
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jul 2006 21:54:03.0510 (UTC) FILETIME=[B09E2160:01C6A5FD]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Exactly what I was looking for.

Thanks!

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Wednesday, July 12, 2006 12:47 AM
To: java-user@lucene.apache.org
Subject: Re: RangeQuery question?


1) RangeQuery is the devil, don't use it.  If I weren't so lazy I would
change the javadocs for RangeQuery so that sentence was the class
summary.
Takes a look at RangeFilter or ConstantScoreRangeQuery.

2) it's not clear what exactly you want your example to mean ... perhaps
you mean you want to match all docs with a field of "startDate
greater then "20060710" and a field of "endDate" less then "20060711",
in
which case what you want to do is make a BooleanQuery containing two
ConstantScoreRangeQueries -- one on the startDate and one on the
endDate.
... If that's not what you mean, then I don't understand your question.

: Is there a RangeQuery equivalent that can query date range on two
: different fields?
:
:
:
: Term startTerm =3D new Term("startDate", "20060710");
:
: Term endTerm =3D new Term("endDate", "20060711");
:
:
:
: RangeQuery q =3D new RangeQuery(startTerm, endTerm, true);



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 12 22:04:53 2006
Return-Path: <java-user-return-21966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31374 invoked from network); 12 Jul 2006 22:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2006 22:04:52 -0000
Received: (qmail 19067 invoked by uid 500); 12 Jul 2006 22:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19042 invoked by uid 500); 12 Jul 2006 22:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19031 invoked by uid 99); 12 Jul 2006 22:04:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:04:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 15:04:44 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 12 Jul 2006 18:04:24 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 12 Jul 2006 18:04:16 -0400
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A5FF.2183F9D8"
Subject: how to find out if two fields are identical?
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Wed, 12 Jul 2006 18:09:10 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E811367AC0D@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to find out if two fields are identical?
Thread-Index: Acal/80a5/3dNad1Q12s7nsm57YKcg==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jul 2006 22:04:16.0838 (UTC) FILETIME=[1E308E60:01C6A5FF]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A5FF.2183F9D8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is there a way to compare the values of two fields to see if they are
the same?

=20

Let's say we have an index with these fields:

=20

ID:                2

childID:         7

parentID:       0

--------------------

ID:                3

childID:         6

parentID:       5

--------------------

ID:                4

childID:         2

parentID:       2

--------------------

=20

Based on these three documents, I want the query to return the third
document where childID=3DparentID.


------_=_NextPart_001_01C6A5FF.2183F9D8--

From java-user-return-21967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 02:01:45 2006
Return-Path: <java-user-return-21967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89929 invoked from network); 13 Jul 2006 02:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 02:01:44 -0000
Received: (qmail 19284 invoked by uid 500); 13 Jul 2006 02:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19196 invoked by uid 500); 13 Jul 2006 02:01:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19156 invoked by uid 99); 13 Jul 2006 02:01:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 19:01:36 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 19:01:35 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G0qVv-0000HQ-Aa
	for java-user@lucene.apache.org; Wed, 12 Jul 2006 19:01:15 -0700
Message-ID: <5300730.post@talk.nabble.com>
Date: Wed, 12 Jul 2006 18:49:08 -0700 (PDT)
From: kbforge1 <victorn@kbforge.com>
To: java-user@lucene.apache.org
Subject: kbforge 2.10 released
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13055_21664065.1152756075324"
X-Nabble-Sender: victorn@kbforge.com
X-Nabble-From: kbforge1 <victorn@kbforge.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13055_21664065.1152756075324
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


kbforge.com is pleased to announce Release 2.10 of kbforge, a desktop search
application of particular interest to people on the move, including software
developers.
kbforge is different from other desktop search applications because it
creates a database you can carry with you practically anywhere there is a
USB port to connect to, with complete interoperability between Windows and
Linux. A flash memory stick, a portable hard drive or even an MP3 player
have all been used. kbforge is also able to categorize the information
before it is indexed. Using databases and collections of databases, kbforge 
categorizes information into meaningful topics which can be searched
individually or in groups. A host of other features and options make kbforge
the ultimate tool for finding that elusive program fragment, or example or
article or tutorial. Databases can be refreshed automatically, on a
schedule.
kbforge can index inside .ZIP and .JAR files, remove HTML tags before
indexing, etc..
It uses Lucene for indexing and searching, and as the default database
manager. When used in conjunction with Lucene, kbforge is entirely self
contained and can run anywhere.

Written entirely in Java it is the first of its kind to run under Linux as
well as Windows.

kbforge Release 2.10 costs less than a slice of pizza and is just as
addictive, but unlike a slice of pizza it lasts forever and, in the unlikely
event that you don't like it, you will get all your money back.  

Go to http://www.kbforge.com/topics/kbfeatures.html 

Victor Negrin

vnegrin@kbforge.com
-- 
View this message in context: http://www.nabble.com/kbforge-2.10-released-tf1934597.html#a5300730
Sent from the Lucene - Java Users forum at Nabble.com.

------=_Part_13055_21664065.1152756075324--


From java-user-return-21968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 04:30:27 2006
Return-Path: <java-user-return-21968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27208 invoked from network); 13 Jul 2006 04:30:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 04:30:27 -0000
Received: (qmail 68324 invoked by uid 500); 13 Jul 2006 04:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67682 invoked by uid 500); 13 Jul 2006 04:30:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67671 invoked by uid 99); 13 Jul 2006 04:30:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 21:30:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Jul 2006 21:30:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B022A5B766; Wed, 12 Jul 2006 21:29:58 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id ACAF27F403
	for <java-user@lucene.apache.org>; Wed, 12 Jul 2006 21:29:58 -0700 (PDT)
Date: Wed, 12 Jul 2006 21:29:58 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: how to find out if two fields are identical?
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E811367AC0D@UREXCHVS3.ur.com>
Message-ID: <Pine.LNX.4.58.0607122126340.16591@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E811367AC0D@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Based on these three documents, I want the query to return the third
: document where childID=parentID.

the the best of my knowledge there is no easy way to do this using the
existing lucene query types -- but it would be fairly easy to impliment.

Since there are no "scoring" issues involved, i would suggest implimenting
it as a new Filter ... if you can allow yourself the constraint that no
document will have more then one value for either field, you can use the
FieldCache to do this very easily -- just iteratre over the FieldCache
arrays in unison, and record a Bit for each document where the value is
the same.

SOlving the more general case where a document matches if any Term it has
for Field X matches any Term it has for Field Y would certinaly be
trickier.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 07:13:10 2006
Return-Path: <java-user-return-21969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79606 invoked from network); 13 Jul 2006 07:13:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 07:13:10 -0000
Received: (qmail 61565 invoked by uid 500); 13 Jul 2006 07:13:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61536 invoked by uid 500); 13 Jul 2006 07:13:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61525 invoked by uid 99); 13 Jul 2006 07:13:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 00:13:02 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of cwho.work@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 00:13:00 -0700
Received: by nf-out-0910.google.com with SMTP id p46so18953nfa
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 00:12:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=FR5Pvqumo0XSlUIjqzRAoA5MZ7G90KdakwaINgnaHRpmSabo7yQyvnXorQu1ayJ3t4zzN2COBGlplORfAg3EkTpCkH5coD/xVpHP2u7XqvXxEbXG3K+Oj3lL64MC6NobcbKa/wMlYdpiGeA1b/vbduL1rR7nZ5rymPH7j8iCYfg=
Received: by 10.78.164.13 with SMTP id m13mr329851hue;
        Thu, 13 Jul 2006 00:12:38 -0700 (PDT)
Received: by 10.78.184.5 with HTTP; Thu, 13 Jul 2006 00:12:38 -0700 (PDT)
Message-ID: <6c33f9950607130012q6ea52279u865bcf0e45a3acd7@mail.gmail.com>
Date: Thu, 13 Jul 2006 15:12:38 +0800
From: "Chun Wei Ho" <cwho.work@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: QueryFilter and Memory
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I've been trying to adjust the weightings for my searches (thanks
Chris for his replies on that thread), and have been using
ConstantScoreQuery to even out scores from portions in my query that I
want to match but not to contribute to the ranking of that result.

I convert a BooleanQuery/TermQuery (partialQuery) to a constant score
one (before adding them to the overall BooleanQuery that gets
searched) as follows:
constantPartialQuery = new ConstantScoreQuery(new QueryFilter(partialQuery));

These partial queries are adhoc (created according to user input) and
not reused.

It worked but after some extended testing (like running a day of
queries) - i get a Java Heap OutOfMemory error. I'm wondering:

(a) Is there a better way to change a query to a constant score query
other than what I did above?

(b) I'm subclassing the QueryFilter not to cache the query results
(which might be the cause) since the queryfilters are not re-used.
Does anyone have an opinion on what else might be contributing to the
memory problem.

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 08:50:29 2006
Return-Path: <java-user-return-21970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35037 invoked from network); 13 Jul 2006 08:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 08:50:28 -0000
Received: (qmail 22275 invoked by uid 500); 13 Jul 2006 08:50:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22126 invoked by uid 500); 13 Jul 2006 08:50:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22115 invoked by uid 99); 13 Jul 2006 08:50:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 01:50:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 01:50:20 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G0wtU-0000AN-4g
	for java-user@lucene.apache.org; Thu, 13 Jul 2006 01:50:00 -0700
Message-ID: <5304328.post@talk.nabble.com>
Date: Thu, 13 Jul 2006 01:50:00 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <OFDA81886A.F25F2EB7-ON882571A9.006B187A-882571A9.006B3DF9@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com> <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com> <5229084.post@talk.nabble.com> <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com> <5239040.post@talk.nabble.com> <OF95E16205.0B9B15B3-ON882571A6.005841DB-882571A6.0058D685@il.ibm.com> <5249234.post@talk.nabble.com> <OF70C239BF.EC027ED9-ON882571A7.0065881B-882571A7.006BF84A@il.ibm.com> <5266343.post@talk.nabble.com> <OFA8B2C1B8.1191E9AE-ON882571A8.0075A271-882571A8.0076B5F0@il.ibm.com> <5288759.post@talk.nabble.com> <OFDA81886A.F25F2EB7-ON882571A9.006B187A-882571A9.006B3DF9@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


can't access the file:

Forbidden
Remote Host: [62.172.205.164]

You do not have permission to access
http://cdoronc.20m.com/tmp/indexingThreads.zip 
Data files must be stored on the same site they are linked from. 

Thank you for using 20m.com
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5304328
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 11:17:15 2006
Return-Path: <java-user-return-21971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85364 invoked from network); 13 Jul 2006 11:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 11:17:14 -0000
Received: (qmail 51209 invoked by uid 500); 13 Jul 2006 11:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51185 invoked by uid 500); 13 Jul 2006 11:17:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51174 invoked by uid 99); 13 Jul 2006 11:17:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 04:17:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.238] (HELO smtpout10-04.prod.mesa1.secureserver.net) (64.202.165.238)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jul 2006 04:17:06 -0700
Received: (qmail 6702 invoked from network); 13 Jul 2006 11:16:45 -0000
Received: from unknown (202.153.32.162)
  by smtpout10-04.prod.mesa1.secureserver.net (64.202.165.238) with ESMTP; 13 Jul 2006 11:16:42 -0000
Subject: RE: Searching for a phrase which spans on 2 pages
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: Mike Streeton <mike.streeton@ardentia.co.uk>, java-user@lucene.apache.org
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE7F8CE6@staf-exm-01.ardentia.co.uk>
References:
	 <0B1C92228C5C8D45AA7450F78B3FB9DE7F8CE6@staf-exm-01.ardentia.co.uk>
Content-Type: multipart/alternative; boundary="=-Oj8b2litzbINb/bdtQcx"
Organization: iptouch
Date: Thu, 13 Jul 2006 16:47:16 +0530
Message-Id: <1152789436.4194.9.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-Oj8b2litzbINb/bdtQcx
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Yes, this can be easily done using TokenStream class and hence getting
the the BestTokens.....
But ofcourse you have to have this content in the index.

DONE>>>>

Ramesh Reddy



On Wed, 2006-07-12 at 12:43 +0100, Mike Streeton wrote:

> The simplest solution is always the best - when storing the page, do not
> break up sentences. So a page will be all the sentences that occur on
> it. If a sentence starts on one page and finishes on the next it will be
> included in both pages in the index.
> 
> Hope this helps
> 
> Mike
> 
> www.ardentia.com the home of NetSearch
> -----Original Message-----
> From: Mile Rosu [mailto:mile.rosu@level7.ro] 
> Sent: 11 July 2006 15:55
> To: java-user@lucene.apache.org
> Subject: Searching for a phrase which spans on 2 pages
> 
> Hello,
> 
> I am working on an application similar to google books which allows 
> searching on documents which represent a scanned page. Of course, one 
> might search for a phrase starting at the end of one page and ending at 
> the beginning of the next one. In this case I do not know how I might 
> treat this. Both pages should be returned as hit results.
> Do you have any idea on how this situation might be handled?
> 
> Thank you,
> Mile Rosu
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

--=-Oj8b2litzbINb/bdtQcx--


From java-user-return-21972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 11:25:19 2006
Return-Path: <java-user-return-21972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89495 invoked from network); 13 Jul 2006 11:25:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 11:25:18 -0000
Received: (qmail 64378 invoked by uid 500); 13 Jul 2006 11:25:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64355 invoked by uid 500); 13 Jul 2006 11:25:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64344 invoked by uid 99); 13 Jul 2006 11:25:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 04:25:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.230] (HELO smtpout07-04.prod.mesa1.secureserver.net) (64.202.165.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jul 2006 04:25:11 -0700
Received: (qmail 14348 invoked from network); 13 Jul 2006 11:24:51 -0000
Received: from unknown (202.153.32.162)
  by smtpout07-04.prod.mesa1.secureserver.net (64.202.165.233) with ESMTP; 13 Jul 2006 11:24:50 -0000
Subject: Re: question regarding Field.Index.UN_TOKENZED
From: Ramesh Salla <ramesh.salla@iptouch.com>
Reply-To: ramesh.salla@iptouch.com
To: Chris Hostetter <hossman_lucene@fucit.org>, java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0607101835240.9142@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E81134E4EC7@UREXCHVS3.ur.com>
	 <Pine.LNX.4.58.0607101835240.9142@hal.rescomp.berkeley.edu>
Content-Type: multipart/alternative; boundary="=-yQCsizGOLu89WCHI0nV+"
Organization: iptouch
Date: Thu, 13 Jul 2006 16:55:27 +0530
Message-Id: <1152789927.4194.12.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.2 (2.2.2-5) 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=-yQCsizGOLu89WCHI0nV+
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

Are you using the StandardAnalyzer at the time of Indexing?
which one do u use at the time of Querying?

Ramesh Reddy


On Mon, 2006-07-10 at 18:37 -0700, Chris Hostetter wrote:

> : I'm storing a field in an index with that option
> : (Field.Index.UN_TOKENZIED).
> 
> the key to understanding your problem, is to realize that...
> 
> 	UN_TOKENIZED == Not Analyzed
> 
> 
> ...personally, i think name of the constant is missleading.
> 
> 
> : The String that is being stored is: NORTH SAFETY PRODUCT (all uppercase)
> 
> : When I try a wildcard query against that field, it only produces results
> : if the query term is capitalized.
> 
> that's because the term you've put in the index in capitalized.
> 
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

--=-yQCsizGOLu89WCHI0nV+--


From java-user-return-21973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 12:20:00 2006
Return-Path: <java-user-return-21973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13048 invoked from network); 13 Jul 2006 12:20:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 12:20:00 -0000
Received: (qmail 44733 invoked by uid 500); 13 Jul 2006 12:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44688 invoked by uid 500); 13 Jul 2006 12:19:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44677 invoked by uid 99); 13 Jul 2006 12:19:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 05:19:52 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hefest@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 05:19:52 -0700
Received: by py-out-1112.google.com with SMTP id w49so214078pyg
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 05:19:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=elcjEfE/DaCCLH30ZeNLphGucgwD+6CW+OiNtneN1FFOSI4U05BzNCBqddvD29AJnk/hplsuct8LXLnT0VZz6tqqRrZspNL6ohxVURdbbJUdzOO4Vs4FdFhPZDhDD+38NpYhL4te03gnw4BZ/LaAedWevLjtsAsE+pCbo/H+bSQ=
Received: by 10.35.111.14 with SMTP id o14mr642361pym;
        Thu, 13 Jul 2006 05:19:31 -0700 (PDT)
Received: by 10.35.54.16 with HTTP; Thu, 13 Jul 2006 05:19:31 -0700 (PDT)
Message-ID: <d487eb8e0607130519m3b60471dnc24abcfee849ad1a@mail.gmail.com>
Date: Thu, 13 Jul 2006 14:19:31 +0200
From: "Tomi NA" <hefest@gmail.com>
To: java-user@lucene.apache.org
Subject: accented characters, wildcards and other problems
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've done a bit of testing with accented characters (Croatian, to be
specific) and can't really explain what I see when I explore the index
with luke.
I've used accented characters in directory names, file names and file contents.
Now, in the list of terms (in "Top ranking terms", "Overview" tab) I
see that 2 out of 5 terms are misrepresented, but are indexed,
nonetheless.
The file names containing the problematic characters contain these
characters themselves, i.e. if the file name is "file[x].txt", the
file contents are "test[x]", where [x] represents the accented
character. What I'm not clear on is how can I see the problematic
*terms* in the list of terms, but not the documents they're stored in?

That's one issue. The other is somewhat simpler, I expect.
A search for "test*" returns no results. Acording to the FAQ, it
should, so what am I missing?

t.n.a.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 13:35:28 2006
Return-Path: <java-user-return-21974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47781 invoked from network); 13 Jul 2006 13:35:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 13:35:27 -0000
Received: (qmail 75656 invoked by uid 500); 13 Jul 2006 13:35:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75387 invoked by uid 500); 13 Jul 2006 13:35:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75370 invoked by uid 99); 13 Jul 2006 13:35:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 06:35:19 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 06:35:18 -0700
Received: from [192.168.0.102] (83.249.41.244) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D00358D69; Thu, 13 Jul 2006 15:34:56 +0200
Subject: Re: Can I do "Google Suggest" Like Search?
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <2B63BBC3F2F85B45A985FAD965DE969ECA1BF4@ITPXCHCLN1.enterprise.veritas.com>
References:
	 <2B63BBC3F2F85B45A985FAD965DE969ECA1BF4@ITPXCHCLN1.enterprise.veritas.com>
Content-Type: text/plain; charset=UTF-8
Organization: snigel heavy industries
Date: Thu, 13 Jul 2006 15:34:28 +0200
Message-Id: <1152797668.27370.449.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2006-05-24 at 13:11 +0530, Vikas Khengare wrote:
> So when I type L it will give me search options names which will
> start from L. Then when I will type Lu then it should give me
> options for names which are starting from Lu. & so on  

Vikas,

the Jira now contains code that does just that. It is a trie you will
have to train with user queries (that result something), and is not
based on the document corpus. 

http://issues.apache.org/jira/browse/LUCENE-625

I'd be more than happy to hear what you think of the API.

-- 
karl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 13:55:53 2006
Return-Path: <java-user-return-21975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55406 invoked from network); 13 Jul 2006 13:55:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 13:55:53 -0000
Received: (qmail 19660 invoked by uid 500); 13 Jul 2006 13:55:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19630 invoked by uid 500); 13 Jul 2006 13:55:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19609 invoked by uid 99); 13 Jul 2006 13:55:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 06:55:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 06:55:30 -0700
Received: from [10.10.150.44] ([10.10.150.44])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.6/8.13.4) with ESMTP id k6DDtKB8022319
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 08:55:26 -0500
Message-ID: <44B650A4.1040002@wolfram.com>
Date: Thu, 13 Jul 2006 09:54:44 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Out of memory error
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am indexing different document formats with lucene 1.9. One of the pdf 
file I am indexing is 300MG. Whenever the index writer hits that file it 
stops the indexing with "Out of Memory" exception. I am using the pdf 
box library to index. I have set the following merge factors in my code.

writer.setMergeFactor(1000);
writer.setMaxMergeDocs(9999999);
writer.setMaxBufferedDocs(1000);
writer.setMaxFieldLength(Integer.MAX_VALUE);

I would like any help and suggestions.

thanks,
suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 14:02:44 2006
Return-Path: <java-user-return-21976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58323 invoked from network); 13 Jul 2006 14:02:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 14:02:44 -0000
Received: (qmail 39443 invoked by uid 500); 13 Jul 2006 14:02:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38855 invoked by uid 500); 13 Jul 2006 14:02:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38844 invoked by uid 99); 13 Jul 2006 14:02:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 07:02:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 07:02:35 -0700
Received: by ug-out-1314.google.com with SMTP id o2so294485uge
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 07:02:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DAr2lXRKKWg6Y9MOLzzofBJQ5OuCyS7DhpI1PP337Xu+TOmNPDuVx+KXPThcGZBiW2ZrAXnCR2DJIArDZ2aRb6WgV6HJ284h7eNuvKLinFdfwfXxm4arZsxKT3xlHHbiiSc/biP1IK/V58MjqBgOvacN3MMelfmApR8XmBxyNv0=
Received: by 10.67.19.13 with SMTP id w13mr155354ugi;
        Thu, 13 Jul 2006 07:02:13 -0700 (PDT)
Received: by 10.67.90.14 with HTTP; Thu, 13 Jul 2006 07:02:13 -0700 (PDT)
Message-ID: <ab0709bf0607130702h57f8c51ftc436d14b17305662@mail.gmail.com>
Date: Thu, 13 Jul 2006 10:02:13 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do "Google Suggest" Like Search?
In-Reply-To: <1152797668.27370.449.camel@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14080_7271543.1152799333681"
References: <2B63BBC3F2F85B45A985FAD965DE969ECA1BF4@ITPXCHCLN1.enterprise.veritas.com>
	 <1152797668.27370.449.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14080_7271543.1152799333681
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Another option is to use Sun's free and soon to be open source Java Studio
Creator2. It's a great way to do JSF and provides an AJAX google suggest
type component. You can hook this component up to a lucene search and
*BOOM*...google suggest.

Here is a link to a "did you mean" tutorial as well (it may give some hints
in the implementation of suggest as well):

http://today.java.net/pub/a/today/2005/08/09/didyoumean.html

- Mark

On 7/13/06, karl wettin <karl.wettin@gmail.com> wrote:
>
> On Wed, 2006-05-24 at 13:11 +0530, Vikas Khengare wrote:
> > So when I type "L" it will give me search options names which will
> > start from "L". Then when I will type "Lu" then it should give me
> > options for names which are starting from "Lu". & so on =85=85
>
> Vikas,
>
> the Jira now contains code that does just that. It is a trie you will
> have to train with user queries (that result something), and is not
> based on the document corpus.
>
> http://issues.apache.org/jira/browse/LUCENE-625
>
> I'd be more than happy to hear what you think of the API.
>
> --
> karl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14080_7271543.1152799333681--

From java-user-return-21977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 14:23:41 2006
Return-Path: <java-user-return-21977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69120 invoked from network); 13 Jul 2006 14:23:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 14:23:41 -0000
Received: (qmail 99333 invoked by uid 500); 13 Jul 2006 14:23:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99298 invoked by uid 500); 13 Jul 2006 14:23:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99287 invoked by uid 99); 13 Jul 2006 14:23:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 07:23:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 07:23:32 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 90CFF187C0; Thu, 13 Jul 2006 14:23:09 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 42B9D187BF
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 14:22:44 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Out of memory error
Date: Thu, 13 Jul 2006 15:22:50 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <44B650A4.1040002@wolfram.com>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00E3_01C6A690.33B81000"
Thread-Index: AcamhBew1UQxSDV7Tmym0+RvBc2YNAAAs+9w
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060713142244.42B9D187BF@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00E3_01C6A690.33B81000
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

If you are using
http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#getText(o
rg.pdfbox.pdmodel.PDDocument), you are going to get a large String and may
need a 1G heap. 

If, however, you are using
http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#writeText
(org.pdfbox.pdmodel.PDDocument,%20java.io.Writer) to go via a temporary
file, you will not need so much RAM, but you need to use
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html
#Field(java.lang.String,%20java.io.Reader) to construct your Lucene field
(rather than
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html
#Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.document.Fi
eld.Store,%20org.apache.lucene.document.Field.Index)).

-----Original Message-----
From: Suba Suresh [mailto:subas@wolfram.com] 
Sent: 13 July 2006 14:55
To: java-user@lucene.apache.org
Subject: Out of memory error

I am indexing different document formats with lucene 1.9. One of the pdf
file I am indexing is 300MG. Whenever the index writer hits that file it
stops the indexing with "Out of Memory" exception. I am using the pdf box
library to index. I have set the following merge factors in my code.

writer.setMergeFactor(1000);
writer.setMaxMergeDocs(9999999);
writer.setMaxBufferedDocs(1000);
writer.setMaxFieldLength(Integer.MAX_VALUE);

I would like any help and suggestions.

thanks,
suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_00E3_01C6A690.33B81000
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxMzE0
MjI0OVowIwYJKoZIhvcNAQkEMRYEFPbgcu8e8Eq2EDPPihNhT0M0q2SAMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAFcum33g9rWF88WJJ8oIcIGUnqTuqdO5YKPA
1OYa52eNhGGAftk0Cf4qtQ6M7VJhdtx8cWyx1QC7SdwlCkGvSvKiTG2R6wTa0K9+B0uFoE7Cizv0
9CCwaD3XadngUoNpF9lMh5SRZv07F9yopPPJC44l7ylYOMjsjsnKeGsMQ7jEoylOknL9/4q5VOJ1
Q4pemKO5KIxAGMxiziIYTP1isewoy2R67t8BnZtIJ/EGrOEj7yISfiFS8VjaVwtM7gguGw78zc4D
2rRmtbqH+B5No61YG/NHEWtulz4xbI0mubScTi0Dhemchs+CN+Xa7cj9pJWGwRnijE0XuaaKopAa
2qIAAAAAAAA=

------=_NextPart_000_00E3_01C6A690.33B81000--


From java-user-return-21978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 14:31:05 2006
Return-Path: <java-user-return-21978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72604 invoked from network); 13 Jul 2006 14:31:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 14:31:04 -0000
Received: (qmail 15147 invoked by uid 500); 13 Jul 2006 14:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15128 invoked by uid 500); 13 Jul 2006 14:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15117 invoked by uid 99); 13 Jul 2006 14:30:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 07:30:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 07:30:56 -0700
Received: from [10.10.150.44] ([10.10.150.44])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.6/8.13.4) with ESMTP id k6DEUomc022927
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 09:30:52 -0500
Message-ID: <44B658F6.3040809@wolfram.com>
Date: Thu, 13 Jul 2006 10:30:14 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Out of memory error
References: <20060713142244.42B9D187BF@mail.seseit.com>
In-Reply-To: <20060713142244.42B9D187BF@mail.seseit.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks.

I am using the getText(PDDocument) method of the PDFTextStripper. I will 
try the other suggestion.

suba suresh.

Rob Staveley (Tom) wrote:
> If you are using
> http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#getText(o
> rg.pdfbox.pdmodel.PDDocument), you are going to get a large String and may
> need a 1G heap. 
> 
> If, however, you are using
> http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#writeText
> (org.pdfbox.pdmodel.PDDocument,%20java.io.Writer) to go via a temporary
> file, you will not need so much RAM, but you need to use
> http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html
> #Field(java.lang.String,%20java.io.Reader) to construct your Lucene field
> (rather than
> http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.html
> #Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.document.Fi
> eld.Store,%20org.apache.lucene.document.Field.Index)).
> 
> -----Original Message-----
> From: Suba Suresh [mailto:subas@wolfram.com] 
> Sent: 13 July 2006 14:55
> To: java-user@lucene.apache.org
> Subject: Out of memory error
> 
> I am indexing different document formats with lucene 1.9. One of the pdf
> file I am indexing is 300MG. Whenever the index writer hits that file it
> stops the indexing with "Out of Memory" exception. I am using the pdf box
> library to index. I have set the following merge factors in my code.
> 
> writer.setMergeFactor(1000);
> writer.setMaxMergeDocs(9999999);
> writer.setMaxBufferedDocs(1000);
> writer.setMaxFieldLength(Integer.MAX_VALUE);
> 
> I would like any help and suggestions.
> 
> thanks,
> suba suresh.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 15:15:55 2006
Return-Path: <java-user-return-21979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93703 invoked from network); 13 Jul 2006 15:15:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 15:15:54 -0000
Received: (qmail 44345 invoked by uid 500); 13 Jul 2006 15:15:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44312 invoked by uid 500); 13 Jul 2006 15:15:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44279 invoked by uid 99); 13 Jul 2006 15:15:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:15:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.128.80.6] (HELO yorktown.networkredux.net) (64.128.80.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:15:43 -0700
Received: from pdfbox by yorktown.networkredux.net with local (Exim 4.52)
	id 1G12uV-0008KB-Om
	for java-user@lucene.apache.org; Thu, 13 Jul 2006 08:15:27 -0700
From: "Ben Litchfield" <ben@benlitchfield.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory error
X-Mailer: NeoMail 1.27
X-IPAddress: 129.21.60.5
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Message-Id: <E1G12uV-0008KB-Om@yorktown.networkredux.net>
Date: Thu, 13 Jul 2006 08:15:27 -0700
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - yorktown.networkredux.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32027 32003] / [47 12]
X-AntiAbuse: Sender Address Domain - benlitchfield.com
X-Source: /bin/bash
X-Source-Args: sh -c /usr/local/cpanel/bin/sendmail_cpanel -oem -oi -F '"Ben Litchfield"' -f 'ben@benlitchfield.com' -t 1>&2 
X-Source-Dir: :/base
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

By 300MG I assume you mean 300MB.

You can also try extracting the text outside of lucene by using a 
PDFBox command line app.  

java org.pdfbox.ExtractText <pdffile>

you may need to increase the JRE memory like this

java -Xmx512m .pdfbox.ExtractText <pdffile>

OR

java -Xmx1024m .pdfbox.ExtractText <pdffile>


If this is still giving you an out of memory error then it is possibly 
an issue with PDFBox, if that is the case then please create an issue 
and attach/upload the PDF on the PDFBox site.


Ben



> Thanks.
> 
> I am using the getText(PDDocument) method of the PDFTextStripper. I 
will 
> try the other suggestion.
> 
> suba suresh.
> 
> Rob Staveley (Tom) wrote:
> > If you are using
> > 
http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#getTe
xt(o
> > rg.pdfbox.pdmodel.PDDocument), you are going to get a large String 
and may
> > need a 1G heap. 
> > 
> > If, however, you are using
> > 
http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#write
Text
> > (org.pdfbox.pdmodel.PDDocument,%20java.io.Writer) to go via a 
temporary
> > file, you will not need so much RAM, but you need to use
> > 
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.
html
> > #Field(java.lang.String,%20java.io.Reader) to construct your Lucene 
field
> > (rather than
> > 
http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Field.
html
> > #Field(java.lang.String,%20java.lang.String,%
20org.apache.lucene.document.Fi
> > eld.Store,%20org.apache.lucene.document.Field.Index)).
> > 
> > -----Original Message-----
> > From: Suba Suresh [mailto:subas@wolfram.com] 
> > Sent: 13 July 2006 14:55
> > To: java-user@lucene.apache.org
> > Subject: Out of memory error
> > 
> > I am indexing different document formats with lucene 1.9. One of 
the pdf
> > file I am indexing is 300MG. Whenever the index writer hits that 
file it
> > stops the indexing with "Out of Memory" exception. I am using the 
pdf box
> > library to index. I have set the following merge factors in my code.
> > 
> > writer.setMergeFactor(1000);
> > writer.setMaxMergeDocs(9999999);
> > writer.setMaxBufferedDocs(1000);
> > writer.setMaxFieldLength(Integer.MAX_VALUE);
> > 
> > I would like any help and suggestions.
> > 
> > thanks,
> > suba suresh.
> > 
> > --------------------------------------------------------------------
-
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 15:17:50 2006
Return-Path: <java-user-return-21980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94146 invoked from network); 13 Jul 2006 15:17:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 15:17:49 -0000
Received: (qmail 46821 invoked by uid 500); 13 Jul 2006 15:17:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46796 invoked by uid 500); 13 Jul 2006 15:17:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46784 invoked by uid 99); 13 Jul 2006 15:17:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:17:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:17:40 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 3D0C2187BF; Thu, 13 Jul 2006 15:17:19 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 9B7EB187BE
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 15:17:17 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Out of memory error
Date: Thu, 13 Jul 2006 16:17:24 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <44B658F6.3040809@wolfram.com>
Thread-Index: AcamiPfPHGT2XJcpTKGFYTO6A2xbeAABjfIw
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00FF_01C6A697.D36F7F50"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060713151717.9B7EB187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00FF_01C6A697.D36F7F50
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Let us know how you get on. There are a lot of people fighting very similar
battles on this list. 

-----Original Message-----
From: Suba Suresh [mailto:subas@wolfram.com] 
Sent: 13 July 2006 15:30
To: java-user@lucene.apache.org
Subject: Re: Out of memory error

Thanks.

I am using the getText(PDDocument) method of the PDFTextStripper. I will try
the other suggestion.

suba suresh.

Rob Staveley (Tom) wrote:
> If you are using
> http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#get
> Text(o rg.pdfbox.pdmodel.PDDocument), you are going to get a large 
> String and may need a 1G heap.
> 
> If, however, you are using
> http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#wri
> teText
> (org.pdfbox.pdmodel.PDDocument,%20java.io.Writer) to go via a 
> temporary file, you will not need so much RAM, but you need to use 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Fiel
> d.html
> #Field(java.lang.String,%20java.io.Reader) to construct your Lucene 
> field (rather than 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Fiel
> d.html 
> #Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.docum
> ent.Fi eld.Store,%20org.apache.lucene.document.Field.Index)).
> 
> -----Original Message-----
> From: Suba Suresh [mailto:subas@wolfram.com]
> Sent: 13 July 2006 14:55
> To: java-user@lucene.apache.org
> Subject: Out of memory error
> 
> I am indexing different document formats with lucene 1.9. One of the 
> pdf file I am indexing is 300MG. Whenever the index writer hits that 
> file it stops the indexing with "Out of Memory" exception. I am using 
> the pdf box library to index. I have set the following merge factors in my
code.
> 
> writer.setMergeFactor(1000);
> writer.setMaxMergeDocs(9999999);
> writer.setMaxBufferedDocs(1000);
> writer.setMaxFieldLength(Integer.MAX_VALUE);
> 
> I would like any help and suggestions.
> 
> thanks,
> suba suresh.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_00FF_01C6A697.D36F7F50
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxMzE1
MTcyNFowIwYJKoZIhvcNAQkEMRYEFPQfu16dIY6dKoHB3dDahB+oQMiiMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAFEh7ieOTIO6doNhPx1eYns1BQdTKhvV9Ob8
bT0xvv5a7EWu/imwvfGacwE8Ecw5YC6yWyycLROuolSdonGZBX1BsWn+nIAPJXnyEkTRUFTPW0D/
5iinjFOSYmQzs1uJNXucRecelNmgwG58prVco6TOoqyuzkNU+e34T+tEMLso55eg8nQvFieAs82X
H3nLfZ7E4Hb3jKVfYkNP2CYsXAmZjR+4q/ZOZ1V3GhevM4OfbvhrlPbdKZOARR/Ed1GxLPj6tdIq
dk+zufP05k1yEUORaR+0Pr7z+B3WiSIhk7+uUCckJaCqe9WDIYPH8DuTLCmPXSNU+NEP0jJCDBcE
P4YAAAAAAAA=

------=_NextPart_000_00FF_01C6A697.D36F7F50--


From java-user-return-21981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 15:39:04 2006
Return-Path: <java-user-return-21981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3822 invoked from network); 13 Jul 2006 15:39:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 15:39:03 -0000
Received: (qmail 84371 invoked by uid 500); 13 Jul 2006 15:38:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84339 invoked by uid 500); 13 Jul 2006 15:38:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84328 invoked by uid 99); 13 Jul 2006 15:38:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:38:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 08:38:53 -0700
Received: from [10.10.150.44] ([10.10.150.44])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.6/8.13.4) with ESMTP id k6DFcj7M024235
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 10:38:48 -0500
Message-ID: <44B668E0.1040903@wolfram.com>
Date: Thu, 13 Jul 2006 11:38:08 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Out of memory error
References: <20060713151717.9B7EB187BE@mail.seseit.com>
In-Reply-To: <20060713151717.9B7EB187BE@mail.seseit.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Definitely. Thanks for both the suggestions. Yes it is 300MB.(typo)

suba suresh.

Rob Staveley (Tom) wrote:
> Let us know how you get on. There are a lot of people fighting very similar
> battles on this list. 
> 
> -----Original Message-----
> From: Suba Suresh [mailto:subas@wolfram.com] 
> Sent: 13 July 2006 15:30
> To: java-user@lucene.apache.org
> Subject: Re: Out of memory error
> 
> Thanks.
> 
> I am using the getText(PDDocument) method of the PDFTextStripper. I will try
> the other suggestion.
> 
> suba suresh.
> 
> Rob Staveley (Tom) wrote:
> 
>>If you are using
>>http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#get
>>Text(o rg.pdfbox.pdmodel.PDDocument), you are going to get a large 
>>String and may need a 1G heap.
>>
>>If, however, you are using
>>http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#wri
>>teText
>>(org.pdfbox.pdmodel.PDDocument,%20java.io.Writer) to go via a 
>>temporary file, you will not need so much RAM, but you need to use 
>>http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Fiel
>>d.html
>>#Field(java.lang.String,%20java.io.Reader) to construct your Lucene 
>>field (rather than 
>>http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Fiel
>>d.html 
>>#Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.docum
>>ent.Fi eld.Store,%20org.apache.lucene.document.Field.Index)).
>>
>>-----Original Message-----
>>From: Suba Suresh [mailto:subas@wolfram.com]
>>Sent: 13 July 2006 14:55
>>To: java-user@lucene.apache.org
>>Subject: Out of memory error
>>
>>I am indexing different document formats with lucene 1.9. One of the 
>>pdf file I am indexing is 300MG. Whenever the index writer hits that 
>>file it stops the indexing with "Out of Memory" exception. I am using 
>>the pdf box library to index. I have set the following merge factors in my
> 
> code.
> 
>>writer.setMergeFactor(1000);
>>writer.setMaxMergeDocs(9999999);
>>writer.setMaxBufferedDocs(1000);
>>writer.setMaxFieldLength(Integer.MAX_VALUE);
>>
>>I would like any help and suggestions.
>>
>>thanks,
>>suba suresh.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 16:54:27 2006
Return-Path: <java-user-return-21982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33216 invoked from network); 13 Jul 2006 16:54:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 16:54:27 -0000
Received: (qmail 53846 invoked by uid 500); 13 Jul 2006 16:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53704 invoked by uid 500); 13 Jul 2006 16:54:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53693 invoked by uid 99); 13 Jul 2006 16:54:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 09:54:20 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jul 2006 09:54:19 -0700
Received: (qmail 5881 invoked by uid 60001); 13 Jul 2006 16:53:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=LN7RvXjj8Ga+49Wbdt9ZWkRr9sBTGo5Wq8h+dQAzYhC/XN3uo/fsE44GIR15qYW5MTJ9hy3YQcPH5L/Ac4Pugu9E9YnbyRVw+5cmc1jF/lBeXXBtZ2wBYTFNtJ2HNbd3OrPpcTYn2Z+RX+iH7KxhCo8PhSzE4i4rE30IoIpb670=  ;
Message-ID: <20060713165358.5879.qmail@web50315.mail.yahoo.com>
Received: from [72.229.167.99] by web50315.mail.yahoo.com via HTTP; Thu, 13 Jul 2006 09:53:58 PDT
Date: Thu, 13 Jul 2006 09:53:58 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: accented characters, wildcards and other problems
To: java-user@lucene.apache.org
In-Reply-To: <d487eb8e0607130519m3b60471dnc24abcfee849ad1a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Bok Tomi,

What do you mean by "terms are misrepresented"?  What should they be, and what are you seeing?

> What I'm not clear on is how can I see the problematic *terms* in the list of terms, but not the documents they're stored in?

Are you saying that the content got indexed, but the file names did not?

Out of curiosity (note my last name), I'm curious about what analyzer/tokenizer you're using.  Is there an equivallent of Porter stemmer for Croatian?  I could use that. :)

Otis

----- Original Message ----
From: Tomi NA <hefest@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, July 13, 2006 8:19:31 AM
Subject: accented characters, wildcards and other problems

I've done a bit of testing with accented characters (Croatian, to be
specific) and can't really explain what I see when I explore the index
with luke.
I've used accented characters in directory names, file names and file contents.
Now, in the list of terms (in "Top ranking terms", "Overview" tab) I
see that 2 out of 5 terms are misrepresented, but are indexed,
nonetheless.
The file names containing the problematic characters contain these
characters themselves, i.e. if the file name is "file[x].txt", the
file contents are "test[x]", where [x] represents the accented
character. What I'm not clear on is how can I see the problematic
*terms* in the list of terms, but not the documents they're stored in?

That's one issue. The other is somewhat simpler, I expect.
A search for "test*" returns no results. Acording to the FAQ, it
should, so what am I missing?

t.n.a.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 17:48:29 2006
Return-Path: <java-user-return-21983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56712 invoked from network); 13 Jul 2006 17:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 17:48:28 -0000
Received: (qmail 69288 invoked by uid 500); 13 Jul 2006 17:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69264 invoked by uid 500); 13 Jul 2006 17:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69253 invoked by uid 99); 13 Jul 2006 17:48:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 10:48:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 10:48:19 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.6/8.13.6) with ESMTP id k6DHlvTO163742
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 17:47:57 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6DHospe152214
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 19:50:54 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6DHlvME013617
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 19:47:57 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6DHlv0g013614
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 19:47:57 +0200
In-Reply-To: <5304328.post@talk.nabble.com>
Subject: Re: modify existing non-indexed field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFFFF54D89.AD107FD0-ON882571AA.0060EDBC-882571AA.0061C6A6@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 13 Jul 2006 10:47:58 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 13/07/2006 20:50:53
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> can't access the file:
> http://cdoronc.20m.com/tmp/indexingThreads.zip

Yes, this Web host sometimes behaves strange when clicking a link from a
mail program. Please try to copy
   cdoronc.20m.com/tmp
to the Web Browser (e.g. Firefox), click <Enter>.
This should show the content of that tmp folder, including the
downloadable file indexingThreads.zip

Hope this works,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 19:37:41 2006
Return-Path: <java-user-return-21984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3985 invoked from network); 13 Jul 2006 19:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 19:37:40 -0000
Received: (qmail 54064 invoked by uid 500); 13 Jul 2006 19:37:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54036 invoked by uid 500); 13 Jul 2006 19:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54025 invoked by uid 99); 13 Jul 2006 19:37:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 12:37:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.129.8.151] (HELO ipex2.johnshopkins.edu) (162.129.8.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 12:37:32 -0700
Received: from atis9nn0d91.monument1.jhmi.edu (HELO ATIS9NN0D91) ([162.129.49.150])
  by ipex2.johnshopkins.edu with SMTP; 13 Jul 2006 15:37:11 -0400
X-BrightmailFiltered: true
X-Brightmail-Tracker: AAAAAA==
X-IronPort-AV: i="4.06,238,1149480000"; 
   d="scan'208,217"; a="171286177:sNHT52970716"
Message-ID: <019001c6a6b3$bc12e6f0$963181a2@win.ad.jhu.edu>
Reply-To: "Zhao, Xin" <xzhao@jhu.edu>
From: "Zhao, Xin" <xzhao9@jhmi.edu>
To: <java-user@lucene.apache.org>
Subject: lengthnorm again
Date: Thu, 13 Jul 2006 15:37:10 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_018D_01C6A692.34E70830"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_018D_01C6A692.34E70830
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
I am sure this is a question been asked before. :-) I have done some =
research too, but still don't quite understand. I indexed 20 terms under =
field name "mesh", and set the boost accordingly from 20 to 1.(just some =
arbitrary numbers) But when I checked the index from Luke, the boosts =
all appear to be 1. I saw the pervious post said it is because the boost =
shows in Luke is the product of index-time boost and lengthnorm. But if =
it is the case, aren't they supposed to be different instead of value =
"1"? I guess I still don't fully understand 'lengthnorm".
Thank you,
Xin
 
------=_NextPart_000_018D_01C6A692.34E70830--


From java-user-return-21985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 20:34:14 2006
Return-Path: <java-user-return-21985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27404 invoked from network); 13 Jul 2006 20:34:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 20:34:14 -0000
Received: (qmail 74690 invoked by uid 500); 13 Jul 2006 20:33:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74606 invoked by uid 500); 13 Jul 2006 20:33:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74490 invoked by uid 99); 13 Jul 2006 20:33:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 13:33:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 13:33:55 -0700
Received: by py-out-1112.google.com with SMTP id z59so401284pyg
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 13:33:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rE83B3E3oeKubbkfkxH72+pjoGFsEYda1y4AlGF5XfA99505N0GXewb4UszpW/rhizw9pi/clXbpytjTW/rTs2q19qmvQApQsPGfBVjAW2CP9qCztidvvqbLQWroKU0wVKiLdP+xrUM3ZVwUutTSMvJf29P4T9ZU8c/x5gT/MD8=
Received: by 10.35.127.15 with SMTP id e15mr976940pyn;
        Thu, 13 Jul 2006 13:23:33 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Thu, 13 Jul 2006 13:23:33 -0700 (PDT)
Message-ID: <c68e39170607131323k728dd3cfj87e0493a09644793@mail.gmail.com>
Date: Thu, 13 Jul 2006 16:23:33 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lengthnorm again
In-Reply-To: <019001c6a6b3$bc12e6f0$963181a2@win.ad.jhu.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <019001c6a6b3$bc12e6f0$963181a2@win.ad.jhu.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/13/06, Zhao, Xin <xzhao9@jhmi.edu> wrote:
> Hi,
> I am sure this is a question been asked before. :-) I have done some research too, but still don't quite understand. I indexed 20 terms under field name "mesh", and set the boost accordingly from 20 to 1.(just some arbitrary numbers) But when I checked the index from Luke, the boosts all appear to be 1. I saw the pervious post said it is because the boost shows in Luke is the product of index-time boost and lengthnorm. But if it is the case, aren't they supposed to be different instead of value "1"? I guess I still don't fully understand 'lengthnorm".

I can't explain what you are seeing, but it sounds like your
understanding of what it should be is correct.
I guess you are either misinterpreting Luke's output,  not indexing
the docs correctly, or perhaps luke has a bug.
Did you index the terms with different boosts in separate documents?
There is only one norm per document for a specific indexed field.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 20:34:22 2006
Return-Path: <java-user-return-21986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27468 invoked from network); 13 Jul 2006 20:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 20:34:22 -0000
Received: (qmail 76800 invoked by uid 500); 13 Jul 2006 20:34:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76759 invoked by uid 500); 13 Jul 2006 20:34:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76596 invoked by uid 99); 13 Jul 2006 20:34:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 13:34:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.198.65.247] (HELO smtp.commercescience.com) (216.198.65.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 13:34:08 -0700
Received: from sourcecontrol.commercescience.com (216-198-65-248.client.cypresscom.net [216.198.65.248])
	by smtp.commercescience.com (Postfix) with ESMTP id AAD7DC8034
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 16:33:44 -0400 (EDT)
Received: from sourcecontrol.commercescience.com (localhost.localdomain [127.0.0.1])
	by sourcecontrol.commercescience.com (8.13.1/8.13.1) with ESMTP id k6DKXiWK027092
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 16:33:44 -0400
Received: from sourcecontrol.commercescience.com (root@localhost)
	by sourcecontrol.commercescience.com (8.13.1/8.13.1/Submit) with ESMTP id k6DKXisP027076
	for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 16:33:44 -0400
Date: Thu, 13 Jul 2006 16:33:44 -0400
From: "Ross Rankin" <ross@commercescience.com>
To: java-user <java-user@lucene.apache.org>
Message-ID: <H000006f00018a07.1152822823.sourcecontrol.commercescience.com@MHS>
x-scalix-Hops: 1
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="2_0_1a_5b915MHTML_=_01"
X-commercescience.com-MailScanner-Information: Please contact the ISP for more information
X-commercescience.com-MailScanner: Found to be clean
X-commercescience.com-MailScanner-From: ross@commercescience.com
Subject: HTMLParser
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--2_0_1a_5b915MHTML_=_01
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Since I cannot seem to access the HTMLParser mailing list and I saw the
library recommended here, I thought someone here that has used it
successfully can help me out. =20

I have HTML text stored in a database field which I want to add to a
Lucene document, but I want to remove the HTML tags, so HTMLParser
looked like it would fit the bill.

=20

First, it does not seem to be parsing=85 hence my first problem and it
also is throwing an exception along with this phrase sprinkled around
=93(No such file or directory)=94. =20

=20

I think I may be using it wrong, so here=92s what I have done.  In my
object where I create my document, I have the following code:

        StringExtractor extract =3D new
StringExtractor(record.get("column14").toString().trim());

        try {

            value =3D extract.extractStrings(false);

        } catch (ParserException pe) {

            System.out.println("Index Long Description Parser
Exception:" + pe.getMessage() );

            value =3D "";

        }

=20

What I get out in value is like the following:

<LI><FONT size=3D2>Crystal Clear III and 3D combfilter for natural, sharp=

images with enhanced quality </FONT>

<LI><FONT size=3D2>Compact and sleek design </FONT>

<LI><FONT size=3D2>Incredible Surround (No such file or directory)

=20

So the tags are still there and oddly the =91(No such file or directory)=92=

phrase is added which is not in the original text.

=20

Then I get a ParserException.

=20

What am I doing wrong?

=20

Thanks,

Ross



--2_0_1a_5b915MHTML_=_01--

From java-user-return-21987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 20:38:59 2006
Return-Path: <java-user-return-21987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30020 invoked from network); 13 Jul 2006 20:38:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 20:38:59 -0000
Received: (qmail 88567 invoked by uid 500); 13 Jul 2006 20:38:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88531 invoked by uid 500); 13 Jul 2006 20:38:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88518 invoked by uid 99); 13 Jul 2006 20:38:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 13:38:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.17] (HELO smtpout09-04.prod.mesa1.secureserver.net) (64.202.165.17)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Jul 2006 13:38:50 -0700
Received: (qmail 17538 invoked from network); 13 Jul 2006 20:38:29 -0000
Received: from unknown (209.204.147.7)
  by smtpout09-04.prod.mesa1.secureserver.net (64.202.165.17) with ESMTP; 13 Jul 2006 20:38:28 -0000
From: "Dejan Nenov" <dejannenov@jollyobject.com>
To: <java-user@lucene.apache.org>
Subject: Are Search Joins Possible between two Physically separate Indexes?
Date: Thu, 13 Jul 2006 13:38:28 -0700
Message-ID: <000b01c6a6bc$4c3c71d0$8380a8c0@dejanpc>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcamvEvoSxOe9LGqTDyYt2o0AxpfWw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Here is a use case I am trying to address.

I have two separate indexes, which contain sets of the same document
pool/corpus.
The two indexes have a different set of indexed fields.
One of the indexed fields is an external DocumentID.

I would like to perform searches, like a relational join, expressing:

"Return all fields (from both indexes) for document-ids that exist in both
indexes and where field-X in Index-1 contains "foo" and field-Y in Index-2
contains "bar".

How would you approach this. Do we need to handle the join logic ourselves,
or is there an API Approach - possibly around MultiSearcher, that is meant
to address this use case?

Dejan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 21:10:46 2006
Return-Path: <java-user-return-21988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46500 invoked from network); 13 Jul 2006 21:10:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 21:10:45 -0000
Received: (qmail 57670 invoked by uid 500); 13 Jul 2006 21:10:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57641 invoked by uid 500); 13 Jul 2006 21:10:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57624 invoked by uid 99); 13 Jul 2006 21:10:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 14:10:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 14:10:38 -0700
Received: by nf-out-0910.google.com with SMTP id x29so56362nfb
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 14:10:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Hj0huXFbCth9NSx75qI1WUkvCw59sxcF9mE0InTjYWGdgSJHt328o1R4XOPji9sUn1YCmQGrwLY5cX4NwNh3SINMS8RajZeZAA515++ZLgDrAgGt36M0e0yu8mi6l4SPoy24SgNRVd9o2BvokQu2I5BamQbhKFKwgHFvekZhzo0=
Received: by 10.78.185.7 with SMTP id i7mr1287729huf;
        Thu, 13 Jul 2006 14:10:16 -0700 (PDT)
Received: by 10.78.35.19 with HTTP; Thu, 13 Jul 2006 14:10:16 -0700 (PDT)
Message-ID: <8c0c601f0607131410j1c205226ha5b326a02c83f755@mail.gmail.com>
Date: Thu, 13 Jul 2006 23:10:16 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Are Search Joins Possible between two Physically separate Indexes?
In-Reply-To: <000b01c6a6bc$4c3c71d0$8380a8c0@dejanpc>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <000b01c6a6bc$4c3c71d0$8380a8c0@dejanpc>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Though I'm a newbie (which means I may be completely wrong), I don't
think this is possible "out of the box". The quickest would be to
write a filter which looks up document id's in the first index and
applies this to the second index to get the disired subset to search
over.

I may need this too, so I'm curious what the experts have to say

Regards

Paul

On 7/13/06, Dejan Nenov <dejannenov@jollyobject.com> wrote:
> Here is a use case I am trying to address.
>
> I have two separate indexes, which contain sets of the same document
> pool/corpus.
> The two indexes have a different set of indexed fields.
> One of the indexed fields is an external DocumentID.
>
> I would like to perform searches, like a relational join, expressing:
>
> "Return all fields (from both indexes) for document-ids that exist in both
> indexes and where field-X in Index-1 contains "foo" and field-Y in Index-2
> contains "bar".
>
> How would you approach this. Do we need to handle the join logic ourselves,
> or is there an API Approach - possibly around MultiSearcher, that is meant
> to address this use case?
>
> Dejan
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 21:35:29 2006
Return-Path: <java-user-return-21989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52828 invoked from network); 13 Jul 2006 21:35:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 21:35:28 -0000
Received: (qmail 92376 invoked by uid 500); 13 Jul 2006 21:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91983 invoked by uid 500); 13 Jul 2006 21:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91972 invoked by uid 99); 13 Jul 2006 21:35:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 14:35:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 14:35:21 -0700
Received: by py-out-1112.google.com with SMTP id d42so411544pyd
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 14:34:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=m8tT+H5DpTw0fKe2weBxX17iZT9wUVT1VrPhX0PWaMAu9a3OGYSmka/mKltGQi7XEWvbMkqJNQbkU0xNd6pZPkoJItr3C+nycnZKopxCP7IyaFz4gyIoby8Xs7HRaFVAH7UnoV5Szh3uPfdvQW7EK9hmtzASzscFy1BaULvJBMU=
Received: by 10.35.85.1 with SMTP id n1mr1031331pyl;
        Thu, 13 Jul 2006 14:34:28 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Thu, 13 Jul 2006 14:34:27 -0700 (PDT)
Message-ID: <c68e39170607131434r114ae3d0w88677a31ff42df1@mail.gmail.com>
Date: Thu, 13 Jul 2006 17:34:27 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: HTMLParser
In-Reply-To: <H000006f00018a07.1152822823.sourcecontrol.commercescience.com@MHS>
MIME-Version: 1.0
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <H000006f00018a07.1152822823.sourcecontrol.commercescience.com@MHS>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've never used HTMLParser, but if you have malformed., incomplete, or
optional HTML that would otherwise choke an HTML parser, you could use
Solr's HTMLStripping:

http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-031d5d3700=
10955fdcc529d208395cd556f4a73e

It's pretty stand-alone, so it should be trivial to rip it out of Solr
and re-use it in your Lucene project.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


On 7/13/06, Ross Rankin <ross@commercescience.com> wrote:
> Since I cannot seem to access the HTMLParser mailing list and I saw the
> library recommended here, I thought someone here that has used it
> successfully can help me out.
>
> I have HTML text stored in a database field which I want to add to a
> Lucene document, but I want to remove the HTML tags, so HTMLParser
> looked like it would fit the bill.
>
>
>
> First, it does not seem to be parsing=85 hence my first problem and it
> also is throwing an exception along with this phrase sprinkled around
> "(No such file or directory)".
>
>
>
> I think I may be using it wrong, so here's what I have done.  In my
> object where I create my document, I have the following code:
>
>         StringExtractor extract =3D new
> StringExtractor(record.get("column14").toString().trim());
>
>         try {
>
>             value =3D extract.extractStrings(false);
>
>         } catch (ParserException pe) {
>
>             System.out.println("Index Long Description Parser
> Exception:" + pe.getMessage() );
>
>             value =3D "";
>
>         }
>
>
>
> What I get out in value is like the following:
>
> <LI><FONT size=3D2>Crystal Clear III and 3D combfilter for natural, sharp
> images with enhanced quality </FONT>
>
> <LI><FONT size=3D2>Compact and sleek design </FONT>
>
> <LI><FONT size=3D2>Incredible Surround (No such file or directory)
>
>
>
> So the tags are still there and oddly the '(No such file or directory)'
> phrase is added which is not in the original text.
>
>
>
> Then I get a ParserException.
>
>
>
> What am I doing wrong?
>
>
>
> Thanks,
>
> Ross

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 13 23:07:18 2006
Return-Path: <java-user-return-21990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85745 invoked from network); 13 Jul 2006 23:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2006 23:07:18 -0000
Received: (qmail 34095 invoked by uid 500); 13 Jul 2006 23:07:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34038 invoked by uid 500); 13 Jul 2006 23:07:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34024 invoked by uid 99); 13 Jul 2006 23:07:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 16:07:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 16:07:11 -0700
Received: by nf-out-0910.google.com with SMTP id y25so20574nfb
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 16:06:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=OvvR3kzBs5SWZtf2bdIg8u1dB5TxZ8wWPZQFKmux0/Fp3jpLtALKHkB325jIIIPCkH9EqM1jncATgNxxyg7TU8ToiphmJaP6KTMtjN7wbyu+hRt+c7dSMOKljuPN/kHyDbNfdYwXzZroCX7Q9OkpnyOgCpl4yNoRJ8AUDF7CRR4=
Received: by 10.78.140.17 with SMTP id n17mr883399hud;
        Thu, 13 Jul 2006 16:06:49 -0700 (PDT)
Received: by 10.78.115.12 with HTTP; Thu, 13 Jul 2006 16:06:49 -0700 (PDT)
Message-ID: <b487c1370607131606k11efc9e8s3668fbd15de44b64@mail.gmail.com>
Date: Thu, 13 Jul 2006 19:06:49 -0400
From: "Beady Geraghty" <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: file format of index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_40469_22630348.1152832009949"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_40469_22630348.1152832009949
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As I understand from earlier answers to my question that
one can create an index on machine A,
and use  it   (search and merge with other indices) on Machine B.

I was reading the file format today.
http://lucene.apache.org/java/docs/fileformats.html

The index has Byte UInt32 UInt64 in most places, making it byte order
indepdent in these places.

However  a few spots has long and int.
For example in the Compound Files section, there is a
DataOffset-->Long

and in term Vectors, there is a
TVXVersion --> Int

Is this an oversight in the documentation or is the document correct, and
does this indicate that there will be problem using an index on a big Endian
machine which is created on a small Endian machine.

If both machines have the same Endian maybe the usage of Index created
elsewhere is still fine ?

I am starting to create quite a bit of code with the assumption that porting
and merging index is okay anywhere.    I would appreciate some more
input as to whether these fields mattered or not and whether the
documentation
is correct.

Thank you in advance.

------=_Part_40469_22630348.1152832009949--

From java-user-return-21991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 04:01:04 2006
Return-Path: <java-user-return-21991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95309 invoked from network); 14 Jul 2006 04:01:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 04:01:04 -0000
Received: (qmail 20986 invoked by uid 500); 14 Jul 2006 04:00:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20952 invoked by uid 500); 14 Jul 2006 04:00:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20935 invoked by uid 99); 14 Jul 2006 04:00:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 21:00:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Jul 2006 21:00:56 -0700
Received: by nf-out-0910.google.com with SMTP id p46so68697nfa
        for <java-user@lucene.apache.org>; Thu, 13 Jul 2006 21:00:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pgq1BdakXcm2UnceOVlX4rlVTbTq0zyZAnJS4D0LvmJs2GnevI4KIzjzPsePQMRQx5Do/K3MZH2aoDdLm5eLHA4tWVlpfzbFl+b8tN6qX4YGkAiNI11lGQs4Rq/NxsAvjrA2CfxV7wZtl5myFONNbC0Pc7HRPhkWt1cRFFJeZHM=
Received: by 10.78.177.3 with SMTP id z3mr1420016hue;
        Thu, 13 Jul 2006 21:00:35 -0700 (PDT)
Received: by 10.78.115.12 with HTTP; Thu, 13 Jul 2006 21:00:35 -0700 (PDT)
Message-ID: <b487c1370607132100g50a2762dvc61aef6cf3ba2165@mail.gmail.com>
Date: Fri, 14 Jul 2006 00:00:35 -0400
From: "Beady Geraghty" <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: file format of index
In-Reply-To: <b487c1370607131606k11efc9e8s3668fbd15de44b64@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47197_32147923.1152849635022"
References: <b487c1370607131606k11efc9e8s3668fbd15de44b64@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47197_32147923.1152849635022
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think that I may be misreading the documentation.
I didn't see the description of the Long and Int type under the "Primitive
Types" section, while reading about the description of Byte, UInt32, Uint64,
VInt. So, for some reason I thought that Long and Int are byte
order sensitive.

Upon re-reading the document,  I see that
"All other data types are defined as sequences of bytes, so file formats are
byte-order independent. "    I think that I should be fine.

Sorry for posting before reading more carefully.



On 7/13/06, Beady Geraghty <beadygeraghty@gmail.com> wrote:
>
>
> As I understand from earlier answers to my question that
> one can create an index on machine A,
> and use  it   (search and merge with other indices) on Machine B.
>
> I was reading the file format today.
> http://lucene.apache.org/java/docs/fileformats.html
>
> The index has Byte UInt32 UInt64 in most places, making it byte order
> indepdent in these places.
>
> However  a few spots has long and int.
> For example in the Compound Files section, there is a
> DataOffset-->Long
>
> and in term Vectors, there is a
> TVXVersion --> Int
>
> Is this an oversight in the documentation or is the document correct, and
> does this indicate that there will be problem using an index on a big
> Endian
> machine which is created on a small Endian machine.
>
> If both machines have the same Endian maybe the usage of Index created
> elsewhere is still fine ?
>
> I am starting to create quite a bit of code with the assumption that
> porting
> and merging index is okay anywhere.    I would appreciate some more
> input as to whether these fields mattered or not and whether the
> documentation
> is correct.
>
> Thank you in advance.
>
>
>

------=_Part_47197_32147923.1152849635022--

From java-user-return-21992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 10:56:13 2006
Return-Path: <java-user-return-21992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45947 invoked from network); 14 Jul 2006 10:56:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 10:56:12 -0000
Received: (qmail 95342 invoked by uid 500); 14 Jul 2006 10:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94962 invoked by uid 500); 14 Jul 2006 10:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94951 invoked by uid 99); 14 Jul 2006 10:56:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 03:56:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 03:56:02 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 361DE187BF; Fri, 14 Jul 2006 10:55:40 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id A3209187BE
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 10:55:38 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Date ranges - getting the approach right
Date: Fri, 14 Jul 2006 11:55:47 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_003A_01C6A73C.717BE860"
Thread-Index: AcanNA+16lFoVs8lQQKmGcroep8z5g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060714105538.A3209187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003A_01C6A73C.717BE860
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

For the sake of date ranges, I'm storing dates as YYYYMMDD in my e-mail
indexing application. 

My users typically want to limit their queries to ranges of dates, which
include today. The application is indexing in real time.

I gather I should prefer RangeQuery to ConstantScoreQuery+RangeFilter,
because it is faster not to use a Filter. However, I sometimes have to
combine my RangeQuery with a PrefixQuery and of course TooManyClauses
exceptions arise, when I exceed BooleanQuery.getMaxClauseCount(), which I've
currently left at the default 1024 value.

In a year of 365 days with e-mail messages arriving every day, can I assume
that an inclusive date range of 20050713-20060713 in a RangeQuery is going
to contribute 365 clauses to a BooleanQuery? Can I assume that 5 years would
mean 5 x 365 = 1825 clauses?

If so, how can I figure out how expensive is it in terms of memory
requirement to adjust the maximum clause count to deal with 5 year ranges?

i.e.

	// Increase the maximum clause count to cope with date ranges
	// up to 5 years - my worst case
	
BooleanQuery.setMaxClauseCount(BooleanQuery.getMaxClauseCount()+1825);

Do I need to consider whether this would significantly degrade performance
too?

An alternative would be to assume that my users are mostly going to ask for
e-mail arriving within the last day, two days, week, fortnight, month,
quarter, year, 5 years and pre-cache filters for these typical usage ranges
every time the clock rolls over, using a CachingWrapperFilter with
RangeFilter and to BooleanQuery that with a term query on today's date.

e.g.

	// Get the cache for predetermined (i.e. already cached) date range,

	// which doesn't include today, because we are indexing all the
time.
	// These ranges were pre-cached at midnight.
	CachingWrapperFilter wrapper = /*  ... */;

	BooleanQuery dateRangeBooleanQuery = new BooleanQuery();
	dateRangeBooleanQuery.add(
		new ConstantScoreQuery(new RangeFilter(wrapper))
		,BooleanClause.Occur.SHOULD
		);
	dateRangeBooleanQuery.add(
		new TermQuery("20060714")	// i.e. today
		,BooleanClause.Occur.SHOULD
		);

	BooleanQuery mainQuery = new BooleanQuery();
	mainQuery.add(
		dateRangeBooleanQuery
		,BooleanClause.Occur.MUST
		);

How can I figure out how expensive is it in terms of memory requirement to
retain CachingWrappeFilters for a set of date ranges?

------=_NextPart_000_003A_01C6A73C.717BE860
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNDEw
NTU0N1owIwYJKoZIhvcNAQkEMRYEFKixc8PhILnpgpP8xNjH0TTuC9yqMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAJm4U8/bA0dlGgKBXROJ0aLM+e2fa43ebKyv
0bGcx2BDiuAmFNVn1fW52dZ0wxpuTQI4fZT7ERakmETgBpT1tztMID61zg+EUalx55yYXGgXWu1s
bTzmn3pEflrzhPtlH97OqiKqzq9gj8LJ6iAOwKqdW04u9+hFMmwvWzIkV6alqym8bQEKmA1DPsps
uUEVWSSd585/YMFjTA93We90Ocnz5a2wAbj9OiC2a5LcciN8dLx+ga1mBvxDXCLQOmKr959TOtSF
OW+U92JdlIv07WHW4YMq5xyQUAlG8i2pnZ7fzfplgWwupdYQv7BVWra/WFWYWyJGs4JN58Xh8ydn
14gAAAAAAAA=

------=_NextPart_000_003A_01C6A73C.717BE860--


From java-user-return-21993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 11:10:44 2006
Return-Path: <java-user-return-21993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52266 invoked from network); 14 Jul 2006 11:10:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 11:10:44 -0000
Received: (qmail 13342 invoked by uid 500); 14 Jul 2006 11:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13317 invoked by uid 500); 14 Jul 2006 11:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13300 invoked by uid 99); 14 Jul 2006 11:10:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:10:33 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:10:32 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G1LYi-0005jB-4K
	for java-user@lucene.apache.org; Fri, 14 Jul 2006 04:10:12 -0700
Message-ID: <5324779.post@talk.nabble.com>
Date: Fri, 14 Jul 2006 04:10:12 -0700 (PDT)
From: dan2000 <liudan@ntlworld.com>
To: java-user@lucene.apache.org
Subject: Re: modify existing non-indexed field
In-Reply-To: <OFFFF54D89.AD107FD0-ON882571AA.0060EDBC-882571AA.0061C6A6@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: liudan@ntlworld.com
X-Nabble-From: dan2000 <liudan@ntlworld.com>
References: <5215244.post@talk.nabble.com> <20060707170234.98344.qmail@web50301.mail.yahoo.com> <5225348.post@talk.nabble.com> <OF71C3F89B.4CC9A6C3-ON882571A4.007A341D-882571A4.007DA4EF@il.ibm.com> <5229084.post@talk.nabble.com> <OFDEC1F83C.F5997D69-ON882571A5.005BD37D-882571A5.006F62EF@il.ibm.com> <5239040.post@talk.nabble.com> <OF95E16205.0B9B15B3-ON882571A6.005841DB-882571A6.0058D685@il.ibm.com> <5249234.post@talk.nabble.com> <OF70C239BF.EC027ED9-ON882571A7.0065881B-882571A7.006BF84A@il.ibm.com> <5266343.post@talk.nabble.com> <OFA8B2C1B8.1191E9AE-ON882571A8.0075A271-882571A8.0076B5F0@il.ibm.com> <5288759.post@talk.nabble.com> <OFDA81886A.F25F2EB7-ON882571A9.006B187A-882571A9.006B3DF9@il.ibm.com> <5304328.post@talk.nabble.com> <OFFFF54D89.AD107FD0-ON882571AA.0060EDBC-882571AA.0061C6A6@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Thanks Doron. The site you provided doesn't support firefox, that's why had
problem with downloading. 

Your code works fine and I've just noticed I didn't change the create
parameter to false when I've leaned the index directory. Sorry for my
mistake. 

Thanks a lot for your help Doron. You advice helped me a lot.
-- 
View this message in context: http://www.nabble.com/modify-existing-non-indexed-field-tf1905726.html#a5324779
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 11:18:38 2006
Return-Path: <java-user-return-21994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57585 invoked from network); 14 Jul 2006 11:18:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 11:18:37 -0000
Received: (qmail 27905 invoked by uid 500); 14 Jul 2006 11:18:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27761 invoked by uid 500); 14 Jul 2006 11:18:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27750 invoked by uid 99); 14 Jul 2006 11:18:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:18:29 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:18:28 -0700
Received: (qmail 11661 invoked from network); 14 Jul 2006 11:18:06 -0000
Received: from unknown (HELO [192.168.100.19]) ([pbs]078823@[195.143.217.178])
          (envelope-sender <supriya.shyamal@artnology.com>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 14 Jul 2006 11:18:06 -0000
Message-ID: <44B77D6C.3080501@artnology.com>
Date: Fri, 14 Jul 2006 13:18:04 +0200
From: Supriya Kumar Shyamal <supriya.shyamal@artnology.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: FileNotFoundException: occurs during the optimization of index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have common index which is shared by 6 application server through nfs. 
I use only one instance to maintain the index. other instances shares 
the index with readpnly nfs share so that I make sure the search 
instances does not corrupt the index. I do the index optimization 
everyday at 6:00 at that time I get the FileNotFoundException from the 
search log of the other instances.

I can imagine the problem like when the optimzation happens on the index 
at the same time some IndexSearcher is object is created for the search 
but before search is invoked the IndexWriter optimized the file so the 
segment list there on the IndexSearcher object is not there.

Can anybody suggest how to avoid this problem and concurrently access in 
the index accroos the network at the same time maintaining the index.

Thanks,
supriya

-- 
Mit freundlichen Gren / Regards
 
Supriya Kumar Shyamal

Software Developer
tel +49 (30) 443 50 99 -22
fax +49 (30) 443 50 99 -99
email supriya.shyamal@artnology.com
___________________________
artnology GmbH
Milastr. 4
10437 Berlin
___________________________

http://www.artnology.com
__________________________________________________________________________

 News / Aktuelle Projekte:
 * artnology gewinnt Ausschreibung des Bundesministeriums des Innern:
   Softwarelsung fr die Verwaltung der Sammlung zeitgenssischer
   Kunstwerke zur kulturellen Reprsentation des Bundes.

 Projektreferenzen:
 * Globaler eShop und Corporate-Site fr Springer: www.springeronline.com
 * E-Detailing-Portal fr Novartis: www.interaktiv.novartis.de
 * Service-Center-Plattform fr Biogen: www.ms-life.de
 * eCRM-System fr Grnenthal: www.gruenenthal.com

___________________________________________________________________________ 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 11:30:20 2006
Return-Path: <java-user-return-21995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61914 invoked from network); 14 Jul 2006 11:30:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 11:30:19 -0000
Received: (qmail 56570 invoked by uid 500); 14 Jul 2006 11:30:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56543 invoked by uid 500); 14 Jul 2006 11:30:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56532 invoked by uid 99); 14 Jul 2006 11:30:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:30:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [203.92.45.238] (HELO noidagw01.naukri.com) (203.92.45.238)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 04:30:11 -0700
Received: from [192.168.0.107] ([192.168.0.107])
	by noidagw01.naukri.com (8.13.4/8.13.4) with ESMTP id k6EBLrnE029859
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 16:52:03 +0530
Message-ID: <44B78020.7040403@naukri.com>
Date: Fri, 14 Jul 2006 16:59:36 +0530
From: Kapil Chhabra <kapil.chhabra@naukri.com>
User-Agent: Thunderbird 1.5 (X11/20060313)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException: occurs during the optimization of index
References: <44B77D6C.3080501@artnology.com>
In-Reply-To: <44B77D6C.3080501@artnology.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You may try to update a copy of the index and then
either replace the live index with the updated one
or instruct other instances to update the index path.

You may try this scenario if your index size is manageable. Hope this helps.

Regards,
kapilChhabra

Supriya Kumar Shyamal wrote:
> I have common index which is shared by 6 application server through 
> nfs. I use only one instance to maintain the index. other instances 
> shares the index with readpnly nfs share so that I make sure the 
> search instances does not corrupt the index. I do the index 
> optimization everyday at 6:00 at that time I get the 
> FileNotFoundException from the search log of the other instances.
>
> I can imagine the problem like when the optimzation happens on the 
> index at the same time some IndexSearcher is object is created for the 
> search but before search is invoked the IndexWriter optimized the file 
> so the segment list there on the IndexSearcher object is not there.
>
> Can anybody suggest how to avoid this problem and concurrently access 
> in the index accroos the network at the same time maintaining the index.
>
> Thanks,
> supriya
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 13:02:04 2006
Return-Path: <java-user-return-21996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98291 invoked from network); 14 Jul 2006 13:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 13:02:04 -0000
Received: (qmail 55340 invoked by uid 500); 14 Jul 2006 13:01:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55153 invoked by uid 500); 14 Jul 2006 13:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55142 invoked by uid 99); 14 Jul 2006 13:01:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 06:01:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 06:01:55 -0700
Received: by nf-out-0910.google.com with SMTP id l37so174120nfc
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 06:01:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jmYgFxYDmg/ABK3RN7hP7sjR3PQqRIJcrTf8Wp/pHgvh0StHX33fXCNOFpr1BvoWs8Wra++dmG9tGQuFxg3LI/WDixazqhc2NQ31A0eT6RqkMptyXWclRq2EogkVKtkiLWfOJT8gId6XPOhgFGIaMA7k3o6r8ngWXK7Czp1hQOg=
Received: by 10.78.165.16 with SMTP id n16mr1658190hue;
        Fri, 14 Jul 2006 06:01:33 -0700 (PDT)
Received: by 10.78.35.19 with HTTP; Fri, 14 Jul 2006 06:01:33 -0700 (PDT)
Message-ID: <8c0c601f0607140601p3a0e40e8re5beaa6a0a9257e6@mail.gmail.com>
Date: Fri, 14 Jul 2006 15:01:33 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Are Search Joins Possible between two Physically separate Indexes?
In-Reply-To: <8c0c601f0607131410j1c205226ha5b326a02c83f755@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <000b01c6a6bc$4c3c71d0$8380a8c0@dejanpc>
	 <8c0c601f0607131410j1c205226ha5b326a02c83f755@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry,

a filter won't help if I understood you correctly (a real join based
on the external DocumentID)

Paul

On 7/13/06, Paul Borgermans <paul.borgermans@gmail.com> wrote:
> Though I'm a newbie (which means I may be completely wrong), I don't
> think this is possible "out of the box". The quickest would be to
> write a filter which looks up document id's in the first index and
> applies this to the second index to get the disired subset to search
> over.
>
> I may need this too, so I'm curious what the experts have to say
>
> Regards
>
> Paul
>
> On 7/13/06, Dejan Nenov <dejannenov@jollyobject.com> wrote:
> > Here is a use case I am trying to address.
> >
> > I have two separate indexes, which contain sets of the same document
> > pool/corpus.
> > The two indexes have a different set of indexed fields.
> > One of the indexed fields is an external DocumentID.
> >
> > I would like to perform searches, like a relational join, expressing:
> >
> > "Return all fields (from both indexes) for document-ids that exist in both
> > indexes and where field-X in Index-1 contains "foo" and field-Y in Index-2
> > contains "bar".
> >
> > How would you approach this. Do we need to handle the join logic ourselves,
> > or is there an API Approach - possibly around MultiSearcher, that is meant
> > to address this use case?
> >
> > Dejan
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> http://walhalla.wordpress.com
>


-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-21997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 13:04:19 2006
Return-Path: <java-user-return-21997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98824 invoked from network); 14 Jul 2006 13:04:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 13:04:19 -0000
Received: (qmail 60517 invoked by uid 500); 14 Jul 2006 13:04:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60267 invoked by uid 500); 14 Jul 2006 13:04:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60254 invoked by uid 99); 14 Jul 2006 13:04:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 06:04:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 06:04:09 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 9A4C2187BF; Fri, 14 Jul 2006 13:03:47 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id B4D21187BE
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 13:03:46 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: Mixing compressed and uncompressed values
Date: Fri, 14 Jul 2006 14:03:56 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_008E_01C6A74E.589671A0"
Thread-Index: AcanRfbKHabpgT06T0iZlv1bttxjLQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060714130346.B4D21187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_008E_01C6A74E.589671A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Is this a bad idea?

	String synopsis = /* ....may be any length between 0 and 400
characters */

	// Store, but don't index the synopsis
	// If the synopsis is > 150 characters, we should compress it
	Field field = new Field(
		"synopsis",synopsis
		,synopsis.length() > 150 ? Field.Store.COMPRESS :
Field.Store.YES
		,Field.Index.NO
		);
	field.setOmitNorms(true);
	doc.add(field);

i.e. to compress only long values and wind up with an index with a field
with a mixture of compressed an uncompressed values

------=_NextPart_000_008E_01C6A74E.589671A0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNDEz
MDM1NlowIwYJKoZIhvcNAQkEMRYEFFprMATnGM0szilPerfJKJluCCJsMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAKLHQjqQH75m5l6pZIO/XHHNkz+Y3lhLjjEn
YXR1zEasFb8QNEEwo9Q1szIzC8tNI1YsCyTx/z7iausausB3lh+slP9A+uphxedkEPDeCqONfk35
EeWO3HSOZHwA6cQGzoro+SNmq3ihNVDrOS9RU00NcbJ+v7NdwMB6e9fNwgg8KNVY6U2j/EDNbHGV
cdtnuPzu1v+M8+9N3+ZvFexC1cCT7lwzHU3iU/ruNDl3IwGHBhml1KxGNzIwHghfq/4FSVI0gz0H
rAbqEtpJ7GW+XsGG4OSe3BfdCVLY8/wJBztXCI+IkxoWfUPGm8DyVbH9dSOIQ3AKFpK+tDb1RDg+
o1sAAAAAAAA=

------=_NextPart_000_008E_01C6A74E.589671A0--


From java-user-return-21998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 14:39:10 2006
Return-Path: <java-user-return-21998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50163 invoked from network); 14 Jul 2006 14:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 14:39:09 -0000
Received: (qmail 77758 invoked by uid 500); 14 Jul 2006 14:39:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77489 invoked by uid 500); 14 Jul 2006 14:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77477 invoked by uid 99); 14 Jul 2006 14:39:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 07:39:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 07:39:00 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 4820A187BF; Fri, 14 Jul 2006 14:38:37 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 02CB7187BE
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 14:38:35 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: What are norms?
Date: Fri, 14 Jul 2006 15:38:38 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00F3_01C6A75A.D354E7D0"
In-Reply-To: <c68e39170607101000y2ef7d233i213ca3bd613109ad@mail.gmail.com>
Thread-Index: AcakQoFBDIYdaaaGSKWpDP5FX7wBDQDDt0vQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060714143835.02CB7187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00F3_01C6A75A.D354E7D0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I'm trying to reduce the memory requirement of my application that has ~40
indexed fields. Would I be wasting my time omitting norms in this
application?

What would I lose by omitting norms? The ability to boost individual fields
as they are added to the index? Anything else?

[I want to check that I can get away without knowing about norms :-)]

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 10 July 2006 18:01
To: java-user@lucene.apache.org
Subject: Re: What are norms?

Norms are per indexed-field.  For every document it's the product of the
lengthNorm and the index-time boost.  It's really more of an implementation
detail that you shouldn't need to know about unless you have a lot of
indexed fields and want to omit them for memory reasons.

See DefaultSimilarity javadoc for lengthNorm... it's what makes hits on
shorter fields score higher.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

------=_NextPart_000_00F3_01C6A75A.D354E7D0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNDE0
MzMxNlowIwYJKoZIhvcNAQkEMRYEFPzgGdKHLPnWDKiJmsW1Vl04eS9fMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAFjOpK3DplZMCQmmaq58vsEREQ/HZe3FZBEB
pTZ718qcBFF/4h2ZjhmAA4ZPyxz/Q7Qc9EAcN/ZnxD8bLsjtaHglFolV5PKuyiVwsemEziqRcEV4
PYADJnIV/+dEmZpMMGksZH5mj1XN24DmfFVTpb85ifHk7MYa6SLExJmk4JU7O3g17R4fvIVW7m2N
VA3sqsl3Ywh9eX3LI3Zsq2R57tXNoW21W5lVWp13z0MZfCS6AJJIrwC9E+BWL43MQIqW9tUB16CK
rZ9kSuvY9ZeyakX/xHTuh25jTdN773zKcc9kP56Fue85Ui/lUPsWFOhhKwvX1LxeqRSoIA9iDXqf
wIEAAAAAAAA=

------=_NextPart_000_00F3_01C6A75A.D354E7D0--


From java-user-return-21999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 14:42:38 2006
Return-Path: <java-user-return-21999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52242 invoked from network); 14 Jul 2006 14:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 14:42:38 -0000
Received: (qmail 85620 invoked by uid 500); 14 Jul 2006 14:42:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85593 invoked by uid 500); 14 Jul 2006 14:42:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85576 invoked by uid 99); 14 Jul 2006 14:42:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 07:42:25 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 07:42:25 -0700
Received: by py-out-1112.google.com with SMTP id e30so667640pya
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 07:42:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=gqp/Np6J3GZyzlTDJsJZ+zM2e9tgutwHD55uGhw1gKsuPrX2XSBYqJaxEkaQ7vRwwEt3cageAeD+P1ZlBn1jYhhinREIYjoEocxb96VxAQdH3AFNwYzdDKHJm+QqylF9+D7EYLafvKRtWAtZRQeuovHSo72mj7nM5zghKA5HLS8=
Received: by 10.35.37.18 with SMTP id p18mr2060578pyj;
        Fri, 14 Jul 2006 07:42:04 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Fri, 14 Jul 2006 07:42:04 -0700 (PDT)
Message-ID: <c68e39170607140742j5df17fb7lbf5c09f9556fbd0d@mail.gmail.com>
Date: Fri, 14 Jul 2006 10:42:04 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What are norms?
In-Reply-To: <20060714143835.02CB7187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170607101000y2ef7d233i213ca3bd613109ad@mail.gmail.com>
	 <20060714143835.02CB7187BE@mail.seseit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> I'm trying to reduce the memory requirement of my application that has ~40
> indexed fields. Would I be wasting my time omitting norms in this
> application?
>
> What would I lose by omitting norms? The ability to boost individual fields
> as they are added to the index? Anything else?

Length normalization of the field.  Full-text matches on shorter
fields score higher because the match is seen as more specific.  You
loose that if you omit norms.  That's typically OK for short fields
like "title" anyway, and fields that aren't full-text (like dates,
numbers, etc).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 14:47:42 2006
Return-Path: <java-user-return-22000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55004 invoked from network); 14 Jul 2006 14:47:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 14:47:42 -0000
Received: (qmail 1593 invoked by uid 500); 14 Jul 2006 14:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1571 invoked by uid 500); 14 Jul 2006 14:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1560 invoked by uid 99); 14 Jul 2006 14:47:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 07:47:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 07:47:33 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 806A5187BF; Fri, 14 Jul 2006 14:47:09 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 3FD77187BE
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 14:47:05 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: What are norms?
Date: Fri, 14 Jul 2006 15:47:16 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_00FA_01C6A75C.C7EAEE10"
In-Reply-To: <c68e39170607140742j5df17fb7lbf5c09f9556fbd0d@mail.gmail.com>
Thread-Index: AcanU7u1ecQ/xQj7TzWQxWUa7WhoWgAAEdhw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060714144705.3FD77187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00FA_01C6A75C.C7EAEE10
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Got it. Thanks Yonik.

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 14 July 2006 15:42
To: java-user@lucene.apache.org
Subject: Re: What are norms?

On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> I'm trying to reduce the memory requirement of my application that has 
> ~40 indexed fields. Would I be wasting my time omitting norms in this 
> application?
>
> What would I lose by omitting norms? The ability to boost individual 
> fields as they are added to the index? Anything else?

Length normalization of the field.  Full-text matches on shorter fields
score higher because the match is seen as more specific.  You loose that if
you omit norms.  That's typically OK for short fields like "title" anyway,
and fields that aren't full-text (like dates, numbers, etc).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_00FA_01C6A75C.C7EAEE10
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNDE0
NDcxNVowIwYJKoZIhvcNAQkEMRYEFOlFxAepknwTkRYgLFlpkkndgsnWMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAAc4M6TlSERWZWny438myoLmm2JzzZ6h3hb0
/CjCX50iNAJcEpWdpwCA4LiG6wCFjrTOgiYGY+OMEtxb0aASe9N6VkAcGBR9nmbE0md3hkqgg2So
LjyWH0PemyMAMDQExg+5HQpdl7qowiMEJYF4p7oOuJGLretYoFnDn3eGMhyMfBijdsfZm/JnBMUn
GYcgZWH2adWwWTbNwsD23m12F2AZhr65+dlTjNbahViE1Um+m/0IAgdjFSG+RyYYJveprAg5WqQ6
KaGQevh7/8AJeIc+kvxgQEvttVK7eUZfHFN1HHz238kpputrpbekH6nsGlFyFsIuncX3aHHLaCXf
BD0AAAAAAAA=

------=_NextPart_000_00FA_01C6A75C.C7EAEE10--


From java-user-return-22001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 16:13:57 2006
Return-Path: <java-user-return-22001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94808 invoked from network); 14 Jul 2006 16:13:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 16:13:57 -0000
Received: (qmail 73687 invoked by uid 500); 14 Jul 2006 16:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73649 invoked by uid 500); 14 Jul 2006 16:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73638 invoked by uid 99); 14 Jul 2006 16:13:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 09:13:49 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hefest@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 09:13:48 -0700
Received: by py-out-1112.google.com with SMTP id c39so711981pyd
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 09:13:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=k4jNqlNZqnNYnbDtsERyI5tw0y2H3KT3J5N8jLtGKV0+5mH0KcL+sMAQ4r8UgsMOGOoAcb2FcRbQ59+56MaelgX3UlzapD2bfV3WeCVjmkbdzI3OUg75sbhMdEXlWhKSNaXckZY7kxNPL7whuIVzMMKm16rUfJC9rsIlgrsdZ9g=
Received: by 10.35.134.12 with SMTP id l12mr2158534pyn;
        Fri, 14 Jul 2006 09:13:28 -0700 (PDT)
Received: by 10.35.54.16 with HTTP; Fri, 14 Jul 2006 09:13:28 -0700 (PDT)
Message-ID: <d487eb8e0607140913h25652cf8ka8b481e0efc6283c@mail.gmail.com>
Date: Fri, 14 Jul 2006 18:13:28 +0200
From: "Tomi NA" <hefest@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: accented characters, wildcards and other problems
In-Reply-To: <20060713165358.5879.qmail@web50315.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <d487eb8e0607130519m3b60471dnc24abcfee849ad1a@mail.gmail.com>
	 <20060713165358.5879.qmail@web50315.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/13/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Bok Tomi,
>
> What do you mean by "terms are misrepresented"?  What should they be, and what are you seeing?

I mean 3/5 accented characters appear in the index with accents
correctly displayed, but the remaining 2 accented characters appear as
characters I don't know how to pronounce or what they're called -
somewhere along the line some kind of encoding/decoding process
mistakenly assumes the data is encoded in a certain way.
Update: I've managed to solve the problem localy (when I index a test
directory with accented characters on my ext3 partition), but when I
try indexing a directory I access via a samba mount, I'm stuck with
the old problem again. Could be the iocharset, although there are 2
other encoding related settings which might cause the problem.

> > What I'm not clear on is how can I see the problematic *terms* in the list of terms, but not the documents they're stored in?
>
> Are you saying that the content got indexed, but the file names did not?

I'm saying that I expect to see a list of indexed documents in the
"documents" list, and I don't see the documents containing the
problematic accented characters. However, I see the terms with the
problematic accented characters, although they are missrepresented.

> Out of curiosity (note my last name), I'm curious about what analyzer/tokenizer you're using.  Is there an equivallent of Porter stemmer for Croatian?  I could use that. :)

I'm very new to the technology, so I'm using whatever nutch is using
by default. As far as the stemmer's concerned, I'd say that wildcards
go a long way in providing the necessairy functionality, probably even
better than automatic stemming. However, I apreciate the fact that
most users' minds don't come with an inbuilt regexp constructor. :)
As far as Croatian is concerned, a stemming database was developed
just recently (by "completed" I mean "a usable language coverage") at
the department of Croatian language studies (for want of a better
word)...the problem is, however, it's not publicly available. You see,
when I pay my taxes out of which their salaries are paid, it doesn't
seem to obligate them produce value to me as their indirect invester.
But that's something I'd like to say to their faces, with just a tad
more feeling. ;)

t.n.a.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 17:13:35 2006
Return-Path: <java-user-return-22002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20629 invoked from network); 14 Jul 2006 17:13:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 17:13:35 -0000
Received: (qmail 75156 invoked by uid 500); 14 Jul 2006 17:13:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75135 invoked by uid 500); 14 Jul 2006 17:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75118 invoked by uid 99); 14 Jul 2006 17:13:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:13:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:13:26 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 5D743187BF; Fri, 14 Jul 2006 17:13:02 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 50AB9187BE
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 17:13:00 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject:  MissingStringLastComparatorSource and MultiSearcher
Date: Fri, 14 Jul 2006 18:13:11 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0136_01C6A771.2A551580"
Thread-Index: AcanaMhlin4MeHHKRD23/fNc087m6g==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060714171300.50AB9187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0136_01C6A771.2A551580
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Chris Hostetter and Yonik's MissingStringLastComparator looks like a neat
way to specify where to put null values when you want them to appear at the
end of reverse sorts rather than at the beginning, but I spotted the note...

    // Note: basing lastStringValue on the StringIndex won't work
    // with a multisearcher.

Is that a show-stopper for MultiSearchers, or does it just mean that it is a
bit less efficient?

------=_NextPart_000_0136_01C6A771.2A551580
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNDE3
MTMxMVowIwYJKoZIhvcNAQkEMRYEFLGRSEp1iAs78NOqqVhCArTFz6A1MGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAI/IGsuf+LOGF+d/j1uVxSDBW2pnaEp2HtFe
z/umDUpmJT3YXQex26byKtHSnOQIufHwxYQlEk9B7csrIAL+ISaRKuJzXnQuS1RmlZp4xdA1sbVv
KVBwWBBTeva6qGyZ4U3fpRHJne5CaqmSR3X50sRd4Kbnc2GVpDusk1UFpZLZ1y0DoPgJ+hCm76yO
TWOThKag5YF05zCluQIASuAGh/nHtzbnUBAwha9gDOIVXRVKBcbDAtsDcZglIgpV+KdbzT7Ki0yr
w/mP5Eg9crDifVyuKB7lopWZ0edUvzFBM/EBt9J+fAT6oGa1vaVE0v5U0ifVeDA1Aahntk9P806P
lhIAAAAAAAA=

------=_NextPart_000_0136_01C6A771.2A551580--


From java-user-return-22003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 17:30:58 2006
Return-Path: <java-user-return-22003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25737 invoked from network); 14 Jul 2006 17:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 17:30:58 -0000
Received: (qmail 3788 invoked by uid 500); 14 Jul 2006 17:30:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3765 invoked by uid 500); 14 Jul 2006 17:30:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3754 invoked by uid 99); 14 Jul 2006 17:30:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:30:50 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:30:49 -0700
Received: by py-out-1112.google.com with SMTP id c31so963062pyd
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 10:30:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Eo2wxrHlGVi1TVGVFHV5DpQrLk23lAsNIraGrQQo6C52QRf4GejBj4dg/zW5bASCxbrLfSiy0qUAvKVKLjOXAtG3cSgdn7ZOyiZcC33FpK9Xa3/gcP+6juURem5PPTQRB3trPzVFu3NxM/5S5WeRwvhfSULauBe4mQPfE0stvCQ=
Received: by 10.35.126.7 with SMTP id d7mr2256737pyn;
        Fri, 14 Jul 2006 10:30:29 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Fri, 14 Jul 2006 10:30:29 -0700 (PDT)
Message-ID: <c68e39170607141030p908009drc8d4ad2d28fce944@mail.gmail.com>
Date: Fri, 14 Jul 2006 13:30:29 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher
In-Reply-To: <20060714171300.50AB9187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060714171300.50AB9187BE@mail.seseit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> Chris Hostetter and Yonik's MissingStringLastComparator looks like a neat
> way to specify where to put null values when you want them to appear at the
> end of reverse sorts rather than at the beginning, but I spotted the note...
>
>     // Note: basing lastStringValue on the StringIndex won't work
>     // with a multisearcher.
>
> Is that a show-stopper for MultiSearchers, or does it just mean that it is a
> bit less efficient?
Short answer: it should work for 99.99999% of indicies :-)

That comment just related to the original code that's now commented
out that based the sort-value for missing values on the largest item
in the index.

To fix that, missingValueProxy was added and defaulted to bigString.
That's what will be used to collate results in a multisearcher when
the field value is missing.  So this scheme will only fail if you have
field values that compare bigger than bigString (or whatever you pass
in as missingValueProxy).

See the code below:


  public static final String
bigString="\uffff\uffff\uffff\uffff\uffff\uffff\uffff\uffffNULL_VAL";

  private final String missingValueProxy;

  public MissingStringLastComparatorSource() {
    this(bigString);
  }

  /**
	 * Returns the value used to sort the given document.  The
	 * object returned must implement the java.io.Serializable
	 * interface.  This is used by multisearchers to determine how to
collate results from their searchers.
	 * @see FieldDoc
	 * @param i Document
	 * @return Serializable object
	 */

  /** Creates a {@link SortComparatorSource} that uses
<tt>missingValueProxy</tt> as the value to return from
ScoreDocComparator.sortValue()
   * which is only used my multisearchers to determine how to collate
results from their searchers.
   *
   * @param missingValueProxy   The value returned when sortValue() is
called for a document missing the sort field.
   * This value is *not* normally used for sorting, but used to create
   */
  public MissingStringLastComparatorSource(String missingValueProxy) {
    this.missingValueProxy=missingValueProxy;
  }




-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 17:51:11 2006
Return-Path: <java-user-return-22004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34601 invoked from network); 14 Jul 2006 17:51:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 17:51:11 -0000
Received: (qmail 48794 invoked by uid 500); 14 Jul 2006 17:51:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48778 invoked by uid 500); 14 Jul 2006 17:51:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48767 invoked by uid 99); 14 Jul 2006 17:51:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:51:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 10:51:01 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id A3E87187BF; Fri, 14 Jul 2006 17:50:36 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 43DC0187BE
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 17:50:35 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: MissingStringLastComparatorSource and MultiSearcher
Date: Fri, 14 Jul 2006 18:50:47 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0149_01C6A776.6AF9C090"
In-Reply-To: <c68e39170607141030p908009drc8d4ad2d28fce944@mail.gmail.com>
Thread-Index: Acana0SLh3uCxkeZSLOUtD49XGEY7gAAL8SA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060714175035.43DC0187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0149_01C6A776.6AF9C090
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Neat :-)

I was wanting to apply this to a field, which sorts on INT. Specifically I'm
trying to achieve reverse chronological sorting on a timestamp field, which
stores YYMMDDHHI (i.e. resolves to 10 minutes and doesn't handle centuries).
Missing timestamps are assumed to be "old" (i.e. should appear at the end). 

I could get this to sort on String and use
MissingStringLastComparatorSource, but would this not be less efficient than
sorting in INT??

Is there a case for...

public class Sorting {
  public static SortField getSortField(String fieldName, int type, boolean
reverse, boolean nullLast, boolean nullFirst) {
      // ...
  }
}

....and handling all feasible SortField types?

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 14 July 2006 18:30
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher

On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> Chris Hostetter and Yonik's MissingStringLastComparator looks like a 
> neat way to specify where to put null values when you want them to 
> appear at the end of reverse sorts rather than at the beginning, but I
spotted the note...
>
>     // Note: basing lastStringValue on the StringIndex won't work
>     // with a multisearcher.
>
> Is that a show-stopper for MultiSearchers, or does it just mean that 
> it is a bit less efficient?
Short answer: it should work for 99.99999% of indicies :-)

That comment just related to the original code that's now commented out that
based the sort-value for missing values on the largest item in the index.

To fix that, missingValueProxy was added and defaulted to bigString.
That's what will be used to collate results in a multisearcher when the
field value is missing.  So this scheme will only fail if you have field
values that compare bigger than bigString (or whatever you pass in as
missingValueProxy).

See the code below:


  public static final String
bigString="\uffff\uffff\uffff\uffff\uffff\uffff\uffff\uffffNULL_VAL";

  private final String missingValueProxy;

  public MissingStringLastComparatorSource() {
    this(bigString);
  }

  /**
	 * Returns the value used to sort the given document.  The
	 * object returned must implement the java.io.Serializable
	 * interface.  This is used by multisearchers to determine how to
collate results from their searchers.
	 * @see FieldDoc
	 * @param i Document
	 * @return Serializable object
	 */

  /** Creates a {@link SortComparatorSource} that uses
<tt>missingValueProxy</tt> as the value to return from
ScoreDocComparator.sortValue()
   * which is only used my multisearchers to determine how to collate
results from their searchers.
   *
   * @param missingValueProxy   The value returned when sortValue() is
called for a document missing the sort field.
   * This value is *not* normally used for sorting, but used to create
   */
  public MissingStringLastComparatorSource(String missingValueProxy) {
    this.missingValueProxy=missingValueProxy;
  }




-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0149_01C6A776.6AF9C090
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNDE3
NTA0NlowIwYJKoZIhvcNAQkEMRYEFFWETIhbyWxZynBE+5bZQYWUniSGMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAFuSGol/GLop3hefgRL6hvEv0+jPGVwhxk1J
UjrRrr6oeKNAFwOfmDu8At7OI0x72GW9AxmopqejBUMxafa+2LRymHE9dotf6zxyCnLVCIse48bQ
vNGp2ooYQbSBNIMxyzClAkTBvimzMzCpTtXksNU/HAOcs0t6hWqOj41NgNvZcc6JcSHo/JavFR2W
gt3qns5NNPM6i8BnDRYa7GB1ZYe3B+64HLC5hKbsxHwtZPnO9ZmrPJRvBAjpuLXon3pvMLrH1M/d
763BGwHMi8S5E135PUZ43Ed2YQv7ESSfe3XIzZnM/2Z5Yf4uS+XTCUonooPyMX5aHZpTaS3FLI8r
kjgAAAAAAAA=

------=_NextPart_000_0149_01C6A776.6AF9C090--


From java-user-return-22005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 18:12:52 2006
Return-Path: <java-user-return-22005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44026 invoked from network); 14 Jul 2006 18:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 18:12:52 -0000
Received: (qmail 87085 invoked by uid 500); 14 Jul 2006 18:12:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86731 invoked by uid 500); 14 Jul 2006 18:12:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86714 invoked by uid 99); 14 Jul 2006 18:12:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:12:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.198.65.247] (HELO smtp.commercescience.com) (216.198.65.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:12:43 -0700
Received: from sourcecontrol.commercescience.com (216-198-65-248.client.cypresscom.net [216.198.65.248])
	by smtp.commercescience.com (Postfix) with ESMTP id 0BFBDC8275
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 14:12:18 -0400 (EDT)
Received: from sourcecontrol.commercescience.com (localhost.localdomain [127.0.0.1])
	by sourcecontrol.commercescience.com (8.13.1/8.13.1) with ESMTP id k6EICH1E017670
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 14:12:17 -0400
Received: from sourcecontrol.commercescience.com (root@localhost)
	by sourcecontrol.commercescience.com (8.13.1/8.13.1/Submit) with ESMTP id k6EICHH9017669
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 14:12:17 -0400
Date: Fri, 14 Jul 2006 14:12:17 -0400
From: "Ross Rankin" <ross@commercescience.com>
To: java-user <java-user@lucene.apache.org>
Message-ID: <H000006f000190e5.1152900736.sourcecontrol.commercescience.com@MHS>
In-Reply-To: <H000006f00018a07.1152822823.sourcecontrol.commercescience.com@MHS>
Subject: RE: HTMLParser
x-scalix-Hops: 1
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-commercescience.com-MailScanner-Information: Please contact the ISP for more information
X-commercescience.com-MailScanner: Found to be clean
X-commercescience.com-MailScanner-From: ross@commercescience.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok I got it fixed and though I would respond back so it was in the archiv=
e for the next poor soul...

Here's the code I used:
        StringBean sb =3D new StringBean ();
        String htmlSource =3D record.get("column14").toString().trim();=20
        Parser parser =3D new Parser(new Lexer(htmlSource));
        try {
            parser.visitAllNodesWith(sb);
        } catch (ParserException pe) {
            System.out.println("Index ParserException:" + pe.getMessage()=
);
        }
        value =3D sb.getStrings ();

-----Original Message-----
From: Ross Rankin=20
Sent: Thursday, July 13, 2006 4:34 PM
To: java-user
Subject: HTMLParser

Since I cannot seem to access the HTMLParser mailing list and I saw the
library recommended here, I thought someone here that has used it
successfully can help me out. =20

I have HTML text stored in a database field which I want to add to a
Lucene document, but I want to remove the HTML tags, so HTMLParser
looked like it would fit the bill.

=20

First, it does not seem to be parsing=85 hence my first problem and it
also is throwing an exception along with this phrase sprinkled around
=93(No such file or directory)=94. =20

=20

I think I may be using it wrong, so here=92s what I have done.  In my
object where I create my document, I have the following code:

        StringExtractor extract =3D new
StringExtractor(record.get("column14").toString().trim());

        try {

            value =3D extract.extractStrings(false);

        } catch (ParserException pe) {

            System.out.println("Index Long Description Parser
Exception:" + pe.getMessage() );

            value =3D "";

        }

=20

What I get out in value is like the following:

<LI><FONT size=3D2>Crystal Clear III and 3D combfilter for natural, sharp=

images with enhanced quality </FONT>

<LI><FONT size=3D2>Compact and sleek design </FONT>

<LI><FONT size=3D2>Incredible Surround (No such file or directory)

=20

So the tags are still there and oddly the =91(No such file or directory)=92=

phrase is added which is not in the original text.

=20

Then I get a ParserException.

=20

What am I doing wrong?

=20

Thanks,

Ross




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 18:58:43 2006
Return-Path: <java-user-return-22006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58049 invoked from network); 14 Jul 2006 18:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 18:58:42 -0000
Received: (qmail 50136 invoked by uid 500); 14 Jul 2006 18:58:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50109 invoked by uid 500); 14 Jul 2006 18:58:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50098 invoked by uid 99); 14 Jul 2006 18:58:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:58:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO datachange01.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 11:58:34 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A777.95CEBD2D"
Subject: PrefixQuery rewrite() bug, ignores max clause count
Date: Fri, 14 Jul 2006 14:59:08 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF014164EC@datachange01.dataconversions.biz>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: PrefixQuery rewrite() bug, ignores max clause count
Thread-Index: Acand5X2ZvC0coJqRDmkvtRqMPRgUw==
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A777.95CEBD2D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We recently ran into an issue while executing a simple prefix search
"name:b*", which results in a BooleanQuery$TooManyClauses exception.  At
first I found it odd that a single clause query was causing this, but as
I dug into the code I found where the PrefixQuery rewrites itself as a
BooleanQuery.  Unfortunately, it doesn't respect the maxClauseCount of
the BooleanQuery in the process.  Thus, when we hit a sufficiently large
number of results, this causes the TooManyClauses exception that a
number of people have posted about.
=20
Here is the code now (1.9.1):

	public class PrefixQuery extends Query {
	...
	  public Query rewrite(IndexReader reader) throws IOException {
	    BooleanQuery query =3D new BooleanQuery(true);
	    TermEnum enumerator =3D reader.terms(prefix);
	    try {
	      String prefixText =3D prefix.text();
	      String prefixField =3D prefix.field();
	      do {
	        Term term =3D enumerator.term();
	        if (term !=3D null &&
	            term.text().startsWith(prefixText) &&
	            term.field() =3D=3D prefixField) {
	          TermQuery tq =3D new TermQuery(term);   // found a match
	          tq.setBoost(getBoost());                // set the
boost
	          query.add(tq, BooleanClause.Occur.SHOULD);    // add
to query
	          //System.out.println("added " + term);
	        } else {
	          break;
	        }
	      } while (enumerator.next());
	    } finally {
	      enumerator.close();
	    }
	    return query;
	  }
	...
	}

I am no expert, but I suspect all that is needed is to watch for the max
clause count and then 'chunk' the boolean query.  I think the following
should work (changes in blue):
=20
    BooleanQuery query=3D new BooleanQuery(true);
    TermEnum enumerator =3D reader.terms(prefix);
    try {
      String prefixText =3D prefix.text();
      String prefixField =3D prefix.field();
      int count =3D 0;
      do {
        Term term =3D enumerator.term();
        if (term !=3D null &&
              term.text().startsWith(prefixText) &&
              term.field() =3D=3D prefixField) {
          count++;
          TermQuery tq =3D new TermQuery(term);   // found a match
          tq.setBoost(getBoost());                // set the boost
          if (count >=3D query.getMaxClauseCount()) {
            BooleanQuery subQuery =3D query;
            query =3D new BooleanQuery(true);
            query.add(subQuery, BooleanClause.Occur.SHOULD);
            count =3D 1;  //reset count to 1 (the sub query)
          }
          query.add(tq, BooleanClause.Occur.SHOULD);    // add to query
          //System.out.println("added " + term);
        } else {
          break;
        }
      } while (enumerator.next());
    } finally {
      enumerator.close();
    }
    return query;
  }
=20
=20
=20
Thanks,
Russell Allen

------_=_NextPart_001_01C6A777.95CEBD2D--

From java-user-return-22007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 19:38:23 2006
Return-Path: <java-user-return-22007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81657 invoked from network); 14 Jul 2006 19:38:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 19:38:23 -0000
Received: (qmail 17557 invoked by uid 500); 14 Jul 2006 19:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17114 invoked by uid 500); 14 Jul 2006 19:38:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17103 invoked by uid 99); 14 Jul 2006 19:38:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 12:38:16 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 12:38:15 -0700
Received: by nf-out-0910.google.com with SMTP id x29so26042nfb
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 12:37:54 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=H9sAFOSDZZlVQjirkT3y5oIBhFEZJVr/AXYsN5Wc9IP7cgcTKaAnK4TgdZ5eTXIEdq8r7IPeyD672A70zXJzaW11L3ieC1hdXlVBwo3Cmj+akBGf9PEZBr93mgcESrYqNghUTxzRUDqpZGkh+UoTSmVLhOrAFVa8IY7YTYKoSfc=
Received: by 10.78.151.15 with SMTP id y15mr1871879hud;
        Fri, 14 Jul 2006 12:37:54 -0700 (PDT)
Received: by 10.78.155.3 with HTTP; Fri, 14 Jul 2006 12:37:54 -0700 (PDT)
Message-ID: <5d5204510607141237w2c2e13ffx83b9df994820aebe@mail.gmail.com>
Date: Sat, 15 Jul 2006 03:37:54 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: is it wrong with my code?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_38565_16400560.1152905874337"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_38565_16400560.1152905874337
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i can compile it correctly.but it can not search anything.
i can't find error...so wanna u help me?




package kk;

import java.io.*;
import java.util.Date;
//import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.analysis.cjk.CJKAnalyzer;
import org.apache.lucene.document.Document;
//port org.apache.lucene.index.FilterIndexReader;
//import org.apache.lucene.index.IndexReader;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.*;
import org.apache.lucene.index.Term;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.search.Query;
import org.apache.lucene.index.*;

public class MySearch
{

public String test() {
return "test is ok hohoho";
}


// private MySearch()
// {
// }



// public static void main(String args[])
// throws Exception
// {
// String info = searchword(args[0],args[1]);
// System.out.println(info);
// }

public String searchword(String ss,String index_path) throws Exception {
String queryStr = ss;
String result = "Result:<br />";
File indexDir = new File(index_path);
FSDirectory directory = FSDirectory.getDirectory(indexDir,false);
if(!indexDir.exists()){
result = "The Lucene index is not exist";
return result;
}
IndexSearcher searcher = new IndexSearcher(directory);
CJKAnalyzer anlalyzer = new CJKAnalyzer();
QueryParser qp = new QueryParser("contents", anlalyzer);

Hits hits = searcher.search(qp.Query(queryStr));
if(hits.length()<=0){
System.out.println("result:<0" + hits.length());
return result;
}
for(int i = 0; i < hits.length(); i++){
Document document = hits.doc(i);
result += "<br />jl";
}
searcher.close();
System.out.println("result:<0" + hits.length());
return result;
}
}

------=_Part_38565_16400560.1152905874337--

From java-user-return-22008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 20:22:04 2006
Return-Path: <java-user-return-22008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94186 invoked from network); 14 Jul 2006 20:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 20:22:04 -0000
Received: (qmail 86501 invoked by uid 500); 14 Jul 2006 20:21:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86483 invoked by uid 500); 14 Jul 2006 20:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86472 invoked by uid 99); 14 Jul 2006 20:21:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 13:21:57 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 13:21:56 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6EKLYBH100196
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 20:21:35 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6EKOXjb094100
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 22:24:33 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6EKLYlc019008
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 22:21:34 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6EKLYsG019005
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 22:21:34 +0200
In-Reply-To: <5d5204510607141237w2c2e13ffx83b9df994820aebe@mail.gmail.com>
Subject: Re: is it wrong with my code?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF216AAE12.7277A62D-ON882571AB.006F9BC4-882571AB.006FDFE0@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 14 Jul 2006 13:21:58 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 14/07/2006 23:24:32
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Hits hits = searcher.search(qp.Query(queryStr));

I think it should be qp.parse(String query)   (rather than qp.Query(String
field))


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 20:59:54 2006
Return-Path: <java-user-return-22009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8624 invoked from network); 14 Jul 2006 20:59:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 20:59:54 -0000
Received: (qmail 66184 invoked by uid 500); 14 Jul 2006 20:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66156 invoked by uid 500); 14 Jul 2006 20:59:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66132 invoked by uid 99); 14 Jul 2006 20:59:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 13:59:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 13:59:41 -0700
Received: by py-out-1112.google.com with SMTP id d80so764207pyd
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 13:59:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=e0ogtPlecw8SMSDi4NrgDwvwNNbzSSiqzGbFlecTBOZD2DYgaiRbyn+LoMb0yTiJm6cmNZwJRfX1AIIN6emx68CDRZN2h4YxwHKW6li7FaCGP4CPlD72n9hjxfAZlv4DM7fcW5r7hoEKdn3tFhfu1OPOpnIFt1UuM3Zc0hppaQI=
Received: by 10.35.127.7 with SMTP id e7mr241449pyn;
        Fri, 14 Jul 2006 13:59:18 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Fri, 14 Jul 2006 13:59:18 -0700 (PDT)
Message-ID: <c68e39170607141359ta85cf24kfeb268e56d82d27c@mail.gmail.com>
Date: Fri, 14 Jul 2006 16:59:18 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher
In-Reply-To: <20060714175035.43DC0187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170607141030p908009drc8d4ad2d28fce944@mail.gmail.com>
	 <20060714175035.43DC0187BE@mail.seseit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> I was wanting to apply this to a field, which sorts on INT.

The problem with int is that the FieldCache stores the values as an
int[], and you can't tell when a value is missing.

> Specifically I'm
> trying to achieve reverse chronological sorting on a timestamp field, which
> stores YYMMDDHHI (i.e. resolves to 10 minutes and doesn't handle centuries).
> Missing timestamps are assumed to be "old" (i.e. should appear at the end).
>
> I could get this to sort on String and use
> MissingStringLastComparatorSource, but would this not be less efficient than
> sorting in INT??

String sorting takes more memory, but the speed is the same.  Local
sorting with the FieldCache for strings is done via the ordinal value
(no string compare is done, just int comparisons).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 23:16:39 2006
Return-Path: <java-user-return-22010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45002 invoked from network); 14 Jul 2006 23:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 23:16:39 -0000
Received: (qmail 48144 invoked by uid 500); 14 Jul 2006 23:16:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48121 invoked by uid 500); 14 Jul 2006 23:16:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48110 invoked by uid 99); 14 Jul 2006 23:16:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:16:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:16:30 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F2B7F5B772; Fri, 14 Jul 2006 16:16:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E66997F403
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 16:16:00 -0700 (PDT)
Date: Fri, 14 Jul 2006 16:16:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: PrefixQuery rewrite() bug, ignores max clause count
In-Reply-To: <E9BF7E0FD95D1143B399B129908A58FF014164EC@datachange01.dataconversions.biz>
Message-ID: <Pine.LNX.4.58.0607141607570.3459@hal.rescomp.berkeley.edu>
References: <E9BF7E0FD95D1143B399B129908A58FF014164EC@datachange01.dataconversions.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I dug into the code I found where the PrefixQuery rewrites itself as a
: BooleanQuery.  Unfortunately, it doesn't respect the maxClauseCount of
: the BooleanQuery in the process.  Thus, when we hit a sufficiently large
: number of results, this causes the TooManyClauses exception that a
: number of people have posted about.

this is the expected behavior of a PrefixQuery ... the
TooManyClausesException is explicitly thrown to ensure that a query
consuming too many resources isn't built, and your App is free to do
whatever you want in that situation.

: I am no expert, but I suspect all that is needed is to watch for the max
: clause count and then 'chunk' the boolean query.  I think the following
: should work (changes in blue):

1) colorzing your mail doesn't play nicely with the mailing list ...
sending "diffs" is the prefered way to show potential changes to the code.

2) assuming i understand what it is you've changed, you've "worked
arround" the TooManyClausesException in a somewhat complicated way (you
could just as easily increase the maxClauseCount and save yourslef some
headache) ... by doing this you bypass the whole point of having a
maClauseCount: to prevent a query that will consume too many resources
(namely RAM and query execution time) from being constructed.

3) your change modifies the core impacts from each of the Terms that match
the prefix ... if you don't care about the score impacts from the terms,
then there are other options.  Solr has a PrefixFilter class which can be
wrapped in a ConstantScoreQuery to support prefix queries regardless of
your term distribution.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 23:24:10 2006
Return-Path: <java-user-return-22011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47189 invoked from network); 14 Jul 2006 23:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 23:24:10 -0000
Received: (qmail 58308 invoked by uid 500); 14 Jul 2006 23:24:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57928 invoked by uid 500); 14 Jul 2006 23:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57914 invoked by uid 99); 14 Jul 2006 23:24:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:24:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:24:02 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AD9E55B772; Fri, 14 Jul 2006 16:23:42 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A3D8C7F403
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 16:23:42 -0700 (PDT)
Date: Fri, 14 Jul 2006 16:23:42 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: MissingStringLastComparatorSource and MultiSearcher
In-Reply-To: <20060714175035.43DC0187BE@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0607141618410.3459@hal.rescomp.berkeley.edu>
References: <20060714175035.43DC0187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I was wanting to apply this to a field, which sorts on INT. Specifically I'm
: trying to achieve reverse chronological sorting on a timestamp field, which
: stores YYMMDDHHI (i.e. resolves to 10 minutes and doesn't handle centuries).
: Missing timestamps are assumed to be "old" (i.e. should appear at the end).

for the record, MissingStringLastComparatorSource isn't really needed in
this case.  If a missing timestamp field should be interpreted as "old"
then normal Lucene "reverse" sorting (either String or int) should work
fine for a reverse chronological sort -- because in normal String sorting
"null" is low, and (i'm 99% sure)  in int sorting "null" is assigned a
value of 0.  In both cases, your "old"  docs will wind up where you want
them.

MissingStringLastComparatorSource comes in handy when you want docs
without a timestamp value to appear at the end of your list *regardless*
of wether the user selected "oldest first" or "newest first"



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 23:33:57 2006
Return-Path: <java-user-return-22012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49540 invoked from network); 14 Jul 2006 23:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 23:33:56 -0000
Received: (qmail 75021 invoked by uid 500); 14 Jul 2006 23:33:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74843 invoked by uid 500); 14 Jul 2006 23:33:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74832 invoked by uid 99); 14 Jul 2006 23:33:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:33:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:33:49 -0700
Received: from p00.ohwy.com ([68.116.38.195] helo=[192.168.4.126])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1G1XGD-000PEb-VT
	for java-user@lucene.apache.org; Fri, 14 Jul 2006 16:39:54 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <c68e39170607140742j5df17fb7lbf5c09f9556fbd0d@mail.gmail.com>
References: <c68e39170607101000y2ef7d233i213ca3bd613109ad@mail.gmail.com> <20060714143835.02CB7187BE@mail.seseit.com> <c68e39170607140742j5df17fb7lbf5c09f9556fbd0d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B422705E-3C8C-4640-97ED-4520437E915C@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: What are norms?
Date: Fri, 14 Jul 2006 16:33:26 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 14, 2006, at 7:42 AM, Yonik Seeley wrote:

> On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
>> What would I lose by omitting norms? The ability to boost  
>> individual fields
>> as they are added to the index? Anything else?
>
> Length normalization of the field.  Full-text matches on shorter
> fields score higher because the match is seen as more specific.  You
> loose that if you omit norms.  That's typically OK for short fields
> like "title" anyway, and fields that aren't full-text (like dates,
> numbers, etc).

Yonik, I disagree on one point.  I recommend against omitting norms  
for title fields.

Without norms, the titles "Duke Ellington" and "Duke Ellington meets  
Count Basie" will contribute equally to their respective document  
scores on a search for "Duke Ellington".  For most applications,  
exact title matches should win, so that's not optimal.

KinoSearch adopted a default tf() truncation scheme where all fields  
were normalized as if they contained a minimum of 100 tokens.  That  
achieved the desired outcome of stopping very short documents from  
scoring inappropriately high, but even with a boost assigned to a  
title field, I've found that I can't get really good IR precision  
without going back to a non-truncating tf() for title.

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 23:34:34 2006
Return-Path: <java-user-return-22013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50128 invoked from network); 14 Jul 2006 23:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 23:34:34 -0000
Received: (qmail 78131 invoked by uid 500); 14 Jul 2006 23:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78109 invoked by uid 500); 14 Jul 2006 23:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78094 invoked by uid 99); 14 Jul 2006 23:34:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:34:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:34:26 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 23B745B772; Fri, 14 Jul 2006 16:34:04 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1D3327F403
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 16:34:04 -0700 (PDT)
Date: Fri, 14 Jul 2006 16:34:04 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right
In-Reply-To: <20060714105538.A3209187BE@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0607141626470.3459@hal.rescomp.berkeley.edu>
References: <20060714105538.A3209187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I gather I should prefer RangeQuery to ConstantScoreQuery+RangeFilter,
: because it is faster not to use a Filter. However, I sometimes have to

It's not allways faster ... it really depends on how many matching terms
there are in your range.

: In a year of 365 days with e-mail messages arriving every day, can I assume
: that an inclusive date range of 20050713-20060713 in a RangeQuery is going
: to contribute 365 clauses to a BooleanQuery? Can I assume that 5 years would
: mean 5 x 365 = 1825 clauses?

those assumptions are valid is you are also assuming at least one
email message per day (the number of clauses a RangeQuery is based on the
number of unique terms in that range which actually exist in your index).

: An alternative would be to assume that my users are mostly going to ask for
: e-mail arriving within the last day, two days, week, fortnight, month,
: quarter, year, 5 years and pre-cache filters for these typical usage ranges
: every time the clock rolls over, using a CachingWrapperFilter with
: RangeFilter and to BooleanQuery that with a term query on today's date.

That would be my suggestion ... use RangeFilter for everything, cache and
pre-fetch any filters you expect to be very common (particularly things
that your UI makes very easy).  Wether you should cache all RangeFilters
depends largely on how often you plan on re-opening your IndexReader -- if
it's very frequent, then it may not be worth it; if it's very infrequent,
you may want to use soemthing smarter then CachingWrapperFilter so you
don't have a lot of one-off RangeFilters lieing arround forever taking up
RAM.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 14 23:49:51 2006
Return-Path: <java-user-return-22014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54058 invoked from network); 14 Jul 2006 23:49:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2006 23:49:51 -0000
Received: (qmail 92320 invoked by uid 500); 14 Jul 2006 23:49:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92288 invoked by uid 500); 14 Jul 2006 23:49:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92269 invoked by uid 99); 14 Jul 2006 23:49:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:49:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 16:49:44 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 206B15B772; Fri, 14 Jul 2006 16:49:22 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 19BB07F403
	for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 16:49:22 -0700 (PDT)
Date: Fri, 14 Jul 2006 16:49:22 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: What are norms?
In-Reply-To: <B422705E-3C8C-4640-97ED-4520437E915C@rectangular.com>
Message-ID: <Pine.LNX.4.58.0607141638140.3459@hal.rescomp.berkeley.edu>
References: <c68e39170607101000y2ef7d233i213ca3bd613109ad@mail.gmail.com>
 <20060714143835.02CB7187BE@mail.seseit.com>
 <c68e39170607140742j5df17fb7lbf5c09f9556fbd0d@mail.gmail.com>
 <B422705E-3C8C-4640-97ED-4520437E915C@rectangular.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > Length normalization of the field.  Full-text matches on shorter
: > fields score higher because the match is seen as more specific.  You
: > loose that if you omit norms.  That's typically OK for short fields
: > like "title" anyway, and fields that aren't full-text (like dates,
: > numbers, etc).
:
: Yonik, I disagree on one point.  I recommend against omitting norms
: for title fields.
:
: Without norms, the titles "Duke Ellington" and "Duke Ellington meets
: Count Basie" will contribute equally to their respective document
: scores on a search for "Duke Ellington".  For most applications,
: exact title matches should win, so that's not optimal.

I tend to agree with you, having a length normalized tf for "title"ish
fields is usefull, but it's really easy to construct examples either way
(a query for "ipod mini" scoring "ipod mini headphones" higher then "apple
ipod mini (black)" is the kind of thing i have to battle with every day)

However: I just wanted to point out:

 a) it is possible to score exact matches on (tokenized) fields very high
without using lengthNorm by indexing START and END tokens for the field as
well, and then including them in your sloppy phrase queries -- the
"tighter" match will score highest.

 b) generally speaking, the big win for omiting norms is when you're
dealing with fields where a large percentage of your docs don't have any
indexed terms for that field at all.  If you're talking about a field
that all of your documents have, the space taken up by the norms is
probably tiny compared to the space taken up by the terms.  it still may
be worthwhile (especially if every doc has exactly one term for that
field, or if there are only a handfully of unique terms) but don't expect
it to do anythign magical.  the savings from omiting norms on a field is
really easy to calculate: 1 byte times the number of docs in your index.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 00:07:57 2006
Return-Path: <java-user-return-22015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57044 invoked from network); 15 Jul 2006 00:07:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 00:07:57 -0000
Received: (qmail 9507 invoked by uid 500); 15 Jul 2006 00:07:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9104 invoked by uid 500); 15 Jul 2006 00:07:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9093 invoked by uid 99); 15 Jul 2006 00:07:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 17:07:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 17:07:50 -0700
Received: by py-out-1112.google.com with SMTP id z59so856158pyg
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 17:07:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=q22aQZGlWlczsGIdeYOTl0U8SjSn3FR5NZKd2Kdhs7GV8+dn6RSHlATGwTVHfUb8XKkxF7N0M7iLbkRH15/6roEv+G78xnT9jZX1YL4QwRvQDU8RvlR5HRxfEmKvwVmRWI7jDrlAufViT7V31BFad6WdIO3GkMYVCYxhRzw6qKo=
Received: by 10.35.9.15 with SMTP id m15mr155290pyi;
        Fri, 14 Jul 2006 17:07:29 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Fri, 14 Jul 2006 17:07:29 -0700 (PDT)
Message-ID: <c68e39170607141707s75b64f69gc04c190653a1b369@mail.gmail.com>
Date: Fri, 14 Jul 2006 20:07:29 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: What are norms?
In-Reply-To: <B422705E-3C8C-4640-97ED-4520437E915C@rectangular.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170607101000y2ef7d233i213ca3bd613109ad@mail.gmail.com>
	 <20060714143835.02CB7187BE@mail.seseit.com>
	 <c68e39170607140742j5df17fb7lbf5c09f9556fbd0d@mail.gmail.com>
	 <B422705E-3C8C-4640-97ED-4520437E915C@rectangular.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/14/06, Marvin Humphrey <marvin@rectangular.com> wrote:
> Yonik, I disagree on one point.  I recommend against omitting norms
> for title fields.

Well, yes, I should have said "sometimes", when you don't need or want
length normalization.  The scenarios where you don't want/need length
normalization in full-text fields is typically with fields that are
restricted to being short (like title or name).  It's definitely
corpus dependent though.

> KinoSearch adopted a default tf() truncation scheme where all fields
> were normalized as if they contained a minimum of 100 tokens.

The kind of "title" fields I was thinking of were definitely less than
100 tokens, so it amounts to the same thing (but my advice should have
been clearer).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 01:17:36 2006
Return-Path: <java-user-return-22016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75282 invoked from network); 15 Jul 2006 01:17:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 01:17:36 -0000
Received: (qmail 55230 invoked by uid 500); 15 Jul 2006 01:17:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55004 invoked by uid 500); 15 Jul 2006 01:17:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54993 invoked by uid 99); 15 Jul 2006 01:17:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 18:17:28 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 18:17:28 -0700
Received: by nf-out-0910.google.com with SMTP id m18so277178nfc
        for <java-user@lucene.apache.org>; Fri, 14 Jul 2006 18:17:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FcDFw6mnHgliJfkD7lQdsywXs/LpLdaXb8yA3ix1d8+9M8Q/NCVBK1Rdf4cVBx0MmRWCCFnyegWwKpXXMmbiCId/L5aY4W8Nan3RPsANLLCfnj8KwyuzpMCEeqqp1JztVDq49GdzccGdTHBU1AZ/JIsYMJaXoVODtQ7F8PScBUk=
Received: by 10.78.177.3 with SMTP id z3mr39529hue;
        Fri, 14 Jul 2006 18:17:04 -0700 (PDT)
Received: by 10.78.155.3 with HTTP; Fri, 14 Jul 2006 18:17:04 -0700 (PDT)
Message-ID: <5d5204510607141817v76d93ba4j2b29e42555bd0721@mail.gmail.com>
Date: Sat, 15 Jul 2006 09:17:04 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: is it wrong with my code?
In-Reply-To: <OF216AAE12.7277A62D-ON882571AB.006F9BC4-882571AB.006FDFE0@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42566_1496053.1152926224616"
References: <5d5204510607141237w2c2e13ffx83b9df994820aebe@mail.gmail.com>
	 <OF216AAE12.7277A62D-ON882571AB.006F9BC4-882571AB.006FDFE0@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_42566_1496053.1152926224616
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

yes,it can do...but now work for chinese search. english search is ok.

and how can i fix it?

2006/7/15, Doron Cohen <DORONC@il.ibm.com>:
>
> > Hits hits = searcher.search(qp.Query(queryStr));
>
> I think it should be qp.parse(String query)   (rather than qp.Query(String
> field))
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_42566_1496053.1152926224616--

From java-user-return-22017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 04:09:17 2006
Return-Path: <java-user-return-22017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3307 invoked from network); 15 Jul 2006 04:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 04:09:17 -0000
Received: (qmail 34444 invoked by uid 500); 15 Jul 2006 04:09:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34417 invoked by uid 500); 15 Jul 2006 04:09:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34406 invoked by uid 99); 15 Jul 2006 04:09:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Jul 2006 21:09:11 -0700
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_WHOIS,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 14 Jul 2006 21:09:10 -0700
Received: (qmail 90062 invoked by uid 60001); 15 Jul 2006 04:08:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;
  b=sogpMlBM6A04EMFAHaYHs9Gj/X2r5oLiUFsoWFX3IyGX6q3ctxZOhj9a57hD8mQso0duabEAFVnOw316YuY33vO8WJxlbIFQIy+GO1WLHYCTyhkIof1SHGskwAZsaBEvFwm2h+NnfF49JC2HYj3bPjkOqHANZHE+TIQ7+rmpzBo=  ;
Message-ID: <20060715040849.90060.qmail@web50315.mail.yahoo.com>
Received: from [72.229.167.99] by web50315.mail.yahoo.com via HTTP; Fri, 14 Jul 2006 21:08:49 PDT
Date: Fri, 14 Jul 2006 21:08:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: index local file system by lucene
To: java-user@lucene.apache.org
Cc: Feng Ji <fengji2004@gmail.com>
In-Reply-To: <d9fc81ea0607141626q683da309wca941c723ab25a3d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Feng,

That's a question for java-user, not java-dev.
Borrow the code from Lucene in Action - www.lucenebook.com - it has what you need.

Otis

----- Original Message ----
From: Feng Ji <fengji2004@gmail.com>
To: java-dev@lucene.apache.org
Sent: Friday, July 14, 2006 7:26:30 PM
Subject: index local file system by lucene

Hi there,

I wonder how difficult to implement lucene to index the local file system,
such as, word file or pdf file. I know conceptually, it should work with
lucene.

Any existing package does the similar effort?

thanks,

Feng Ji




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 08:16:55 2006
Return-Path: <java-user-return-22018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56143 invoked from network); 15 Jul 2006 08:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 08:16:55 -0000
Received: (qmail 41914 invoked by uid 500); 15 Jul 2006 08:16:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41396 invoked by uid 500); 15 Jul 2006 08:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41385 invoked by uid 99); 15 Jul 2006 08:16:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 01:16:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 01:16:47 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id A6172187BF; Sat, 15 Jul 2006 08:16:25 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 15D70187BE
	for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 08:16:22 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: MissingStringLastComparatorSource and MultiSearcher
Date: Sat, 15 Jul 2006 09:16:35 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.58.0607141618410.3459@hal.rescomp.berkeley.edu>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0010_01C6A7EF.5D42A970"
Thread-Index: AcannJhj6hyaAAuNR6awZkQ0pb7UbgASc1qw
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060715081622.15D70187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0010_01C6A7EF.5D42A970
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

:-) You're right! It remains the case that INT and FLOAT equivalents of
MissingStringLastComparatorSource would be useful for the reverse reverse
(i.e. not reverse) case :-)

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 15 July 2006 00:24
To: java-user@lucene.apache.org
Subject: RE: MissingStringLastComparatorSource and MultiSearcher


: I was wanting to apply this to a field, which sorts on INT. Specifically
I'm
: trying to achieve reverse chronological sorting on a timestamp field,
which
: stores YYMMDDHHI (i.e. resolves to 10 minutes and doesn't handle
centuries).
: Missing timestamps are assumed to be "old" (i.e. should appear at the
end).

for the record, MissingStringLastComparatorSource isn't really needed in
this case.  If a missing timestamp field should be interpreted as "old"
then normal Lucene "reverse" sorting (either String or int) should work fine
for a reverse chronological sort -- because in normal String sorting "null"
is low, and (i'm 99% sure)  in int sorting "null" is assigned a value of 0.
In both cases, your "old"  docs will wind up where you want them.

MissingStringLastComparatorSource comes in handy when you want docs without
a timestamp value to appear at the end of your list *regardless* of wether
the user selected "oldest first" or "newest first"



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0010_01C6A7EF.5D42A970
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNTA4
MTYzM1owIwYJKoZIhvcNAQkEMRYEFEouic607RiKogpRLAlZ4i1p49t0MGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAHhYsxfo4COOYYsTK7qppq991OlDH+N2ZYsy
8E7q9OpqFJ06xgIWVtGCaaB7rmoG5ZMQHVx9ggQVb2/ZSiWeGL/+5ZD+a/GzaJnqHzOneSXJ38QQ
8j3EmFqQVWlzJkv3M3CRZABJ2riDncUkKXnRYT5ta02g89bdWpbXoGOQlyJhz+MQ1+Zuw2lhUf+g
8/o9YBx5jOXb4z0lErlTfDMoBR6MWzT6ZUSUmxyTGJLoY4rYd0lRSWVgI54EQA3fBAvRv7mYhp2k
sTcbq1Oy7vUNkxpbiX1zBbzs9W2Jq7kndJs+etdyCX84al3BHQRN11mmBqrjFPFv2NbP0yrew3Sp
eDkAAAAAAAA=

------=_NextPart_000_0010_01C6A7EF.5D42A970--


From java-user-return-22019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 08:38:20 2006
Return-Path: <java-user-return-22019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58616 invoked from network); 15 Jul 2006 08:38:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 08:38:19 -0000
Received: (qmail 53144 invoked by uid 500); 15 Jul 2006 08:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53122 invoked by uid 500); 15 Jul 2006 08:38:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53110 invoked by uid 99); 15 Jul 2006 08:38:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 01:38:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 01:38:13 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id DB373187BF; Sat, 15 Jul 2006 08:37:51 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 7D7D0187BE
	for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 08:37:49 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: MissingStringLastComparatorSource and MultiSearcher
Date: Sat, 15 Jul 2006 09:38:02 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <c68e39170607141359ta85cf24kfeb268e56d82d27c@mail.gmail.com>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0017_01C6A7F2.5D86D700"
Thread-Index: AcaniHBpGFMwnOFHQ1+LxmxtRD9nGQAXqrjQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060715083749.7D7D0187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0017_01C6A7F2.5D86D700
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

> The problem with int is that the FieldCache stores the values as an int[],
and you can't tell when a value is missing.

I take it that missing values appear as 0, which would be an illegal value
for my case, but I accept your point that it isn't good enough for a general
solution.

> String sorting takes more memory, but the speed is the same.

Bearing in mind that 0 would have to be illegal for an int and 0.0f would
have to be illegal for a float, I would thinking of implementing the
SortField thus (plagiarising your design) to conserve memory...

Here's the SortField.FLOAT implementation (as a code snippet) - the
SortField.INT implementation is analogous, but uses
FieldCache.DEFAULT.getInts:

--------8<--------
case SortField.FLOAT:
	return new SortField(fieldName,
		new SortComparatorSource() {

			private final Comparable missingValueProxy;

			// Instance initialiser - this is how you do Ctors
in anonymous classes
			{
				missingValueProxy = new
Float(missingValueGoesLast ? Float.MAX_VALUE : Float.MIN_VALUE);
			}

			public ScoreDocComparator newComparator(IndexReader
reader,String fieldName) throws IOException {

				// Canonical representation of the String
(???)
				final String field = fieldName.intern();

				// Get the index of the field
				final float index[] =
FieldCache.DEFAULT.getFloats(reader,field);

				return new ScoreDocComparator() {

					public final int compare (final
ScoreDoc i, final ScoreDoc j) {

						final float fi =
index[i.doc];
						final float fj =
index[j.doc];

						// 0 is the magic position
of null
						if (fi==fj) return 0;
						if (fi==0.0f) return 1;
						if (fj==0.0f) return -1;
						return fi < fj ? -1 : 1;
					}

					public Comparable sortValue (final
ScoreDoc i) {
						float f = index[i.doc];
						return (0.0f == f) ?
missingValueProxy : new Float(f);
					}

					public int sortType() {
						return SortField.CUSTOM;
					}
				};
		        }

		} // SortComparatorSource

	); // Custom SortField for SortField.FLOAT
--------8<--------

By the way, this copies fieldName.intern() from your implementation, but I
confess I couldn't understand why that's used. Also, does the type returned
by ScoreDocComparator.sortType() relevant here? I made this
SortField.CUSTOM, but I'm not sure if it wouldn't be better for it to be
SortField.FLOAT in the above.

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 14 July 2006 21:59
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher

On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> I was wanting to apply this to a field, which sorts on INT.

The problem with int is that the FieldCache stores the values as an int[],
and you can't tell when a value is missing.

> Specifically I'm
> trying to achieve reverse chronological sorting on a timestamp field, 
> which stores YYMMDDHHI (i.e. resolves to 10 minutes and doesn't handle
centuries).
> Missing timestamps are assumed to be "old" (i.e. should appear at the
end).
>
> I could get this to sort on String and use 
> MissingStringLastComparatorSource, but would this not be less 
> efficient than sorting in INT??

String sorting takes more memory, but the speed is the same.  Local sorting
with the FieldCache for strings is done via the ordinal value (no string
compare is done, just int comparisons).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0017_01C6A7F2.5D86D700
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNTA4
MzgwMVowIwYJKoZIhvcNAQkEMRYEFGP2kAA6ZslkiVkkCGkia4qrdFsnMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAJjMp7BPqgTHJu5OsIZWP/O8kMT9HY1KG1i5
41jn47rfYBAS35hdMwLDx/FMaQ/xfbUnjKUgaWlKhm9wavydr6Mz1sKy4du0bY03OU4nq+9RRdtV
laLPzHTLtMpSzJoCNQ+6Gsu/J8GyE9f5dJMqKNT0OQssCXTOmdtMVKKIxI0G9JtxFXjoq/hqYy9a
TRQYMhn97PIhRaBYj+SU2elZ3aCnuHADmRow/SzPY62iB4mH+emUKTPJkzhHUiBkecjW+8SwuI7k
XuMYOVlDvgNFB4wYxrNeYpzOSg2NpG9sFTWvl/xxHP/GYHiuQH7BYw7kVa00me83Fsm3IqscM/gc
ZFQAAAAAAAA=

------=_NextPart_000_0017_01C6A7F2.5D86D700--


From java-user-return-22020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 09:17:09 2006
Return-Path: <java-user-return-22020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64924 invoked from network); 15 Jul 2006 09:17:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 09:17:09 -0000
Received: (qmail 75131 invoked by uid 500); 15 Jul 2006 09:17:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75101 invoked by uid 500); 15 Jul 2006 09:17:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75089 invoked by uid 99); 15 Jul 2006 09:17:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 02:17:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 02:17:02 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 8833E187BF; Sat, 15 Jul 2006 09:16:40 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 8F6B5187BE
	for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 09:16:38 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Date ranges - getting the approach right
Date: Sat, 15 Jul 2006 10:16:51 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.58.0607141626470.3459@hal.rescomp.berkeley.edu>
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0046_01C6A7F7.C9F86DE0"
Thread-Index: Acanngu5IQrzwh4uQhyLBzElc/6rhgAUBUZQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060715091638.8F6B5187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0046_01C6A7F7.C9F86DE0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

> It's not allways faster ... it really depends on how many matching terms
there are in your range.

Does the cached RangeFilter's performance drop off relative to RangeQuery
with a large number of matches then? 

> Wether you should cache all RangeFilters depends largely on how often you
plan on re-opening your IndexReader

Of course that's what I'd overlooked. There is no point in treating today's
hits separately, because I'll have to recreate the cached RangeFilter
everytime the index is re-opened anyhow, which means that I might as well
add today to the cache too. I'd got it into my head that I'd only need to
refresh the cached RangeFilters on midnight roll-over, but they will of
course be invalidated whenever the index is re-opened.

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 15 July 2006 00:34
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right


: I gather I should prefer RangeQuery to ConstantScoreQuery+RangeFilter,
: because it is faster not to use a Filter. However, I sometimes have to

It's not allways faster ... it really depends on how many matching terms
there are in your range.

: In a year of 365 days with e-mail messages arriving every day, can I
assume
: that an inclusive date range of 20050713-20060713 in a RangeQuery is going
: to contribute 365 clauses to a BooleanQuery? Can I assume that 5 years
would
: mean 5 x 365 = 1825 clauses?

those assumptions are valid is you are also assuming at least one email
message per day (the number of clauses a RangeQuery is based on the number
of unique terms in that range which actually exist in your index).

: An alternative would be to assume that my users are mostly going to ask
for
: e-mail arriving within the last day, two days, week, fortnight, month,
: quarter, year, 5 years and pre-cache filters for these typical usage
ranges
: every time the clock rolls over, using a CachingWrapperFilter with
: RangeFilter and to BooleanQuery that with a term query on today's date.

That would be my suggestion ... use RangeFilter for everything, cache and
pre-fetch any filters you expect to be very common (particularly things that
your UI makes very easy).  Wether you should cache all RangeFilters depends
largely on how often you plan on re-opening your IndexReader -- if it's very
frequent, then it may not be worth it; if it's very infrequent, you may want
to use soemthing smarter then CachingWrapperFilter so you don't have a lot
of one-off RangeFilters lieing arround forever taking up RAM.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0046_01C6A7F7.C9F86DE0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNTA5
MTY1MVowIwYJKoZIhvcNAQkEMRYEFOe7cAOls4PFOKPcXlM4a/0pm9kqMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAEQKkwj4OEteIJJ64lVdqH0R6w2yhJM0vBy4
v5Jtfvt24p9Vkfs8vPPmh+0VxgUdTkmUkqlgPBMmgUlQCJBEzBBgeEKBpEMGGbLS/Vco4c6YXYEX
gyjS9oTJ5qPH8iWpOpOWfHu4RO2TINJohsNz2yCwU9/UqPramYWrKZiO1U0OpoC0uHt75qgVMJsV
+Qiv4nlHLs7H8Zyco5LlSMoFYJTtLEtTUW+skpVXeVOOHdYd/M5sBKeaciYfOJo5jL4EwCRr/wfX
gu0vFlpoHAX/tl0s0xmvf1T16DjdXmGV0qlYISxlzPCU78wAGi7fdKa9ZgmKQKDg3Kv9q8aEtH3/
f10AAAAAAAA=

------=_NextPart_000_0046_01C6A7F7.C9F86DE0--


From java-user-return-22021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 14:24:04 2006
Return-Path: <java-user-return-22021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19525 invoked from network); 15 Jul 2006 14:24:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 14:24:04 -0000
Received: (qmail 11961 invoked by uid 500); 15 Jul 2006 14:23:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11936 invoked by uid 500); 15 Jul 2006 14:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11918 invoked by uid 99); 15 Jul 2006 14:23:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 07:23:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 07:23:57 -0700
Received: by nf-out-0910.google.com with SMTP id a25so148309nfc
        for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 07:23:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ev7ygseBfIKEujl3PS+NojxjsLeWcQCxAy8MNZlmQGnnHaLTTJIwOXNbYwgyWmj+boF+B3j9+yQq8PfKpZv2PApwKde6nxG+pi4o4QEyNHP6mYApWbdNrjGvM9pAzAymWPcX0FcTlVK1pDDfpiis94a8/YgQNSPdFCibfuXbh5w=
Received: by 10.78.185.7 with SMTP id i7mr189195huf;
        Sat, 15 Jul 2006 07:23:35 -0700 (PDT)
Received: by 10.78.155.3 with HTTP; Sat, 15 Jul 2006 07:23:35 -0700 (PDT)
Message-ID: <5d5204510607150723v3667484aw41cfdcd9c73885ad@mail.gmail.com>
Date: Sat, 15 Jul 2006 22:23:35 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: is it wrong with my code?
In-Reply-To: <5d5204510607141817v76d93ba4j2b29e42555bd0721@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_47356_11290764.1152973415377"
References: <5d5204510607141237w2c2e13ffx83b9df994820aebe@mail.gmail.com>
	 <OF216AAE12.7277A62D-ON882571AB.006F9BC4-882571AB.006FDFE0@il.ibm.com>
	 <5d5204510607141817v76d93ba4j2b29e42555bd0721@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_47356_11290764.1152973415377
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

who know?

2006/7/15, James liu <liuping.james@gmail.com>:
>
> yes,it can do...but now work for chinese search. english search is ok.
>
> and how can i fix it?
>
> 2006/7/15, Doron Cohen <DORONC@il.ibm.com>:
>
> > > Hits hits = searcher.search(qp.Query(queryStr));
> >
> > I think it should be qp.parse(String query)   (rather than qp.Query
> > (String
> > field))
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_47356_11290764.1152973415377--

From java-user-return-22022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 15:11:00 2006
Return-Path: <java-user-return-22022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25700 invoked from network); 15 Jul 2006 15:11:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 15:11:00 -0000
Received: (qmail 33135 invoked by uid 500); 15 Jul 2006 15:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32720 invoked by uid 500); 15 Jul 2006 15:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32709 invoked by uid 99); 15 Jul 2006 15:10:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 08:10:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 08:10:51 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 469A5187BF; Sat, 15 Jul 2006 15:10:29 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 2A27E187BE
	for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 15:10:24 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: MissingStringLastComparatorSource and MultiSearcher
Date: Sat, 15 Jul 2006 16:10:37 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	boundary="----=_NextPart_000_0020_01C6A829.34A0B270";
	protocol="application/x-pkcs7-signature";
	micalg=SHA1
Thread-index: AcaniHBpGFMwnOFHQ1+LxmxtRD9nGQAk9acw
In-Reply-To: <c68e39170607141359ta85cf24kfeb268e56d82d27c@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060715151024.2A27E187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0020_01C6A829.34A0B270
Content-Type: multipart/mixed;
	boundary="----=_NextPart_001_0021_01C6A829.34A0B270"


------=_NextPart_001_0021_01C6A829.34A0B270
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Incidentally, Yonik, is the logic for
org.apache.solr.search.Sorting#getStringSortField flawed? I don't see how
the same comparator can be used for forward and reverse sorts for the
non-null values. 

Methinks it is broken for reverse sorts where you specify nulls to appear
first.

I added this test to TestMissingStringLastComparatorSource.java from
http://issues.apache.org/jira/browse/LUCENE-406, which confirms my
suspicions ...or confirms that I'd never get a job in QA:

--------8<--------
public void testSortingReverseNullFirst() throws Exception {

	Hits result;

	boolean reverse = true;
	boolean nullLast = false;
	boolean nullFirst = true;

	Sort order = new Sort(Sorting.getStringSortField("data", reverse,
nullLast, nullFirst));

	result = s.search(ALL, order);

	assertEquals("didn't get all", data.length, result.length());

	assertEquals("wrong order 2", "0", result.doc(2).get("id"));
	assertEquals("wrong order 3", "3", result.doc(3).get("id"));
	assertEquals("wrong order 4", "6", result.doc(4).get("id"));
	assertEquals("wrong order 5", "7", result.doc(5).get("id"));
	assertEquals("wrong order 6", "4", result.doc(6).get("id"));
	assertEquals("wrong order 7", "1", result.doc(7).get("id"));
}
--------8<--------

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 14 July 2006 21:59
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher

On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> I was wanting to apply this to a field, which sorts on INT.

The problem with int is that the FieldCache stores the values as an int[],
and you can't tell when a value is missing.

> Specifically I'm
> trying to achieve reverse chronological sorting on a timestamp field, 
> which stores YYMMDDHHI (i.e. resolves to 10 minutes and doesn't handle
centuries).
> Missing timestamps are assumed to be "old" (i.e. should appear at the
end).
>
> I could get this to sort on String and use 
> MissingStringLastComparatorSource, but would this not be less 
> efficient than sorting in INT??

String sorting takes more memory, but the speed is the same.  Local sorting
with the FieldCache for strings is done via the ordinal value (no string
compare is done, just int comparisons).

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_001_0021_01C6A829.34A0B270
Content-Type: application/octet-stream;
	name="TestMissingStringLastComparatorSource.java"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="TestMissingStringLastComparatorSource.java"

package org.apache.lucene.search;

/**
 * Copyright 2005 Apache Software Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or =
implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import org.apache.lucene.index.Term;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
//import org.apache.lucene.document.DateField;		// Deprecated

import org.apache.solr.search.*;

import java.io.IOException;
import java.util.Random;
import java.util.BitSet;

import junit.framework.TestCase;

/**
 * Unit test that demonstrates the use of the
 * MissingStringLastComparatorSource, and demonstrates when *not* to use =
it.
 */
public class TestMissingStringLastComparatorSource extends TestCase {

    public static final boolean F =3D false;
    public static final boolean T =3D true;

    public static String[] data =3D new String [] {
        "A",
        "Z",
        null,
        "B",
        "Y",
        null,
        "C",
        "X"
    };


    RAMDirectory index =3D new RAMDirectory();
    IndexReader r;
    IndexSearcher s;
    Query ALL =3D new TermQuery(new Term("all","all"));

    public TestMissingStringLastComparatorSource(String name) {
	super(name);
    }
    public TestMissingStringLastComparatorSource() {
        super();
    }

    public void setUp() throws Exception {

        /* build an index */
        IndexWriter writer =3D new IndexWriter(index,
                                             new SimpleAnalyzer(), T);

        for (int i =3D 0; i < data.length; i++) {
            Document doc =3D new Document();
            doc.add(new =
Field("id",String.valueOf(i),Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc.add(new =
Field("all","all",Field.Store.YES,Field.Index.UN_TOKENIZED));
            if (null !=3D data[i]) {
                doc.add(new =
Field("data",data[i],Field.Store.YES,Field.Index.UN_TOKENIZED));
            }
            writer.addDocument(doc);
        }

        writer.optimize();
        writer.close();

        r =3D IndexReader.open(index);
        s =3D new IndexSearcher(r);

    }

    /**
     * An example of doing an ascending sort, but keeping records which
     * do not have the sort field at the end of the results.
     */
    public void testAscSort()
        throws Exception {

        Hits result;

        /* this will sort on the data column, in lexical order.
         * items with no value should come last
         */
        Sort order =3D new Sort
            (new SortField("data", new =
MissingStringLastComparatorSource()));

        result =3D s.search(ALL, order);

        assertEquals("didn't get all", data.length, result.length());

        assertEquals("wrong order 0", "0", result.doc(0).get("id"));
        assertEquals("wrong order 1", "3", result.doc(1).get("id"));
        assertEquals("wrong order 2", "6", result.doc(2).get("id"));
        assertEquals("wrong order 3", "7", result.doc(3).get("id"));
        assertEquals("wrong order 4", "4", result.doc(4).get("id"));
        assertEquals("wrong order 5", "1", result.doc(5).get("id"));


    }


    /**
     * same as testAscSort, but uses a secondary sort on the items
     * that are missing values from the primary sort.
     */
    public void testAscSortAndSecondary()
        throws Exception {

        Hits result;

        /* this will sort on the data column, in lexical order.
         * items with no value should come last
         */
        Sort order =3D new Sort(new SortField[] {
            new SortField("data", new =
MissingStringLastComparatorSource()),
            new SortField(null, SortField.DOC)
        });

        result =3D s.search(ALL, order);

        assertEquals("didn't get all", data.length, result.length());

        assertEquals("wrong order 0", "0", result.doc(0).get("id"));
        assertEquals("wrong order 1", "3", result.doc(1).get("id"));
        assertEquals("wrong order 2", "6", result.doc(2).get("id"));
        assertEquals("wrong order 3", "7", result.doc(3).get("id"));
        assertEquals("wrong order 4", "4", result.doc(4).get("id"));
        assertEquals("wrong order 5", "1", result.doc(5).get("id"));

        assertEquals("wrong order 6", "2", result.doc(6).get("id"));
        assertEquals("wrong order 7", "5", result.doc(7).get("id"));

    }

    /**
     * this test demonstrates how to sort records descending, leaving =
the
     * records without a value at the end -- in this case, we don't use
     * the MissingStringLastComparatorSource at all, becausing missing
     * items are already considered "low" and appear at the end of a
     * reversed sort.
     */
    public void testDscSort() throws Exception {

        Hits result;

        /* this should sort on the data column, in reverse lexical =
order.
         * items with no value should come last
         *
         * if we used MissingStringLastComparatorSource here, the
         * "reverse=3Dtrue" option on the Sort constructor, would result
         * in the records with no value for the field comming first.
         */
        Sort order =3D new Sort("data", true);


        result =3D s.search(ALL, order);

        assertEquals("didn't get all", data.length, result.length());

        assertEquals("wrong order 0", "1", result.doc(0).get("id"));
        assertEquals("wrong order 1", "4", result.doc(1).get("id"));
        assertEquals("wrong order 2", "7", result.doc(2).get("id"));
        assertEquals("wrong order 3", "6", result.doc(3).get("id"));
        assertEquals("wrong order 4", "3", result.doc(4).get("id"));
        assertEquals("wrong order 5", "0", result.doc(5).get("id"));

    }

	public void testSortingReverseNullFirst() throws Exception {

		Hits result;

		boolean reverse =3D true;
		boolean nullLast =3D false;
		boolean nullFirst =3D true;

		Sort order =3D new Sort(Sorting.getStringSortField("data", reverse, =
nullLast, nullFirst));

		result =3D s.search(ALL, order);

		assertEquals("didn't get all", data.length, result.length());

		assertEquals("wrong order 2", "0", result.doc(2).get("id"));
		assertEquals("wrong order 3", "3", result.doc(3).get("id"));
		assertEquals("wrong order 4", "6", result.doc(4).get("id"));
		assertEquals("wrong order 5", "7", result.doc(5).get("id"));
		assertEquals("wrong order 6", "4", result.doc(6).get("id"));
		assertEquals("wrong order 7", "1", result.doc(7).get("id"));
	}

	public static junit.framework.Test suite() {
		return new =
junit.framework.JUnit4TestAdapter(TestMissingStringLastComparatorSource.c=
lass);
	}

	public static void main(String args[]) {
		=
org.junit.runner.JUnitCore.main("org.apache.lucene.search.TestMissingStri=
ngLastComparatorSource");
	}

}

------=_NextPart_001_0021_01C6A829.34A0B270--

------=_NextPart_000_0020_01C6A829.34A0B270
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNTE1
MTAzNVowIwYJKoZIhvcNAQkEMRYEFLSj8/kwFOctMfcdSi3icWgPT9VRMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAAKtAXzWW8FhKcytCnp83AYQizYftg+tWBd5
xswplcI/DsoihyAvJywZfkapdhsVDgHKm5ey07kWgNkdEWkdOwMX9CF75y5x+GDUAoQnjIlNIQPt
iIDam2jlNZOBz9J2/ufi/iVSX+vY5TrkPdGKdGmCguxpiI9rFSZ68DZYJOob2Xv2RuPJaqzyjFQ0
IBnh+LQaHDtcVIqYEHjWsbaQymZSiOLh+8UYvmuoSSp4WyurhcFRL4L0Ibcyo6TJwxcaV9MxnvAN
aCIS1VNiyc0yrl9vDEZh85a6fl98vz1xAC9LLuTY3cXI8NjyOzt2QiiOn4i3MBEinvAJjQNgFhuS
A7EAAAAAAAA=

------=_NextPart_000_0020_01C6A829.34A0B270--


From java-user-return-22023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 15:52:24 2006
Return-Path: <java-user-return-22023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32573 invoked from network); 15 Jul 2006 15:52:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 15:52:23 -0000
Received: (qmail 54047 invoked by uid 500); 15 Jul 2006 15:52:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54026 invoked by uid 500); 15 Jul 2006 15:52:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54015 invoked by uid 99); 15 Jul 2006 15:52:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 08:52:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 08:52:16 -0700
Received: by py-out-1112.google.com with SMTP id z59so1005212pyg
        for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 08:51:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DmHqjvBRPlC8+NIWBTU40ST37KSZ+yCi/pobuOCqL5HEYjo+1nwD0uq8rUtnoszqX84jeVB1FKmT7SK+Cg2W656yYYtGtaEnHVU/ou3yR8cjkRdtFesJgCBXSte/rscG7pHX4NyOIUqIWA6Gnkig8eVqvrJqy9fgwVnSebCMeac=
Received: by 10.35.37.13 with SMTP id p13mr1118859pyj;
        Sat, 15 Jul 2006 08:51:55 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sat, 15 Jul 2006 08:51:55 -0700 (PDT)
Message-ID: <c68e39170607150851n4db12836wcf67e565fb2ff1c2@mail.gmail.com>
Date: Sat, 15 Jul 2006 11:51:55 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher
In-Reply-To: <20060715151024.2A27E187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170607141359ta85cf24kfeb268e56d82d27c@mail.gmail.com>
	 <20060715151024.2A27E187BE@mail.seseit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/15/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> Incidentally, Yonik, is the logic for
> org.apache.solr.search.Sorting#getStringSortField flawed? I don't see how
> the same comparator can be used for forward and reverse sorts for the
> non-null values.

The logic does cause a double-take at first glance :-)
It's the combination of the normal lucene string sort and
MissingStringLastComparatorSource that let you do all the
permutations.

Keep in mind that "reverse" in the Solr schema sense is not quite the
same as "reverse" to a Lucene SortField.

> Methinks it is broken for reverse sorts where you specify nulls to appear
> first.

Let's take this case specifically...

First the semantics:
   * @param nullFirst   true if null should come first, regardless of sort order

So if the sort is reversed, we want [null,null,Z,Y,...]

MissingStringLastComparatorSource orders null at the end in an
ascending sort.  So if the sort is completely reversed (in the lucene
sense), nulls will be at the beginning like we specified.

> I added this test to TestMissingStringLastComparatorSource.java from
> http://issues.apache.org/jira/browse/LUCENE-406, which confirms my
> suspicions ...or confirms that I'd never get a job in QA:

:-)

I haven't tried to run that test, but the non-null elements in your
test are ordered a bit funny for a reverse sort ;-)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


> --------8<--------
> public void testSortingReverseNullFirst() throws Exception {
>
>         Hits result;
>
>         boolean reverse = true;
>         boolean nullLast = false;
>         boolean nullFirst = true;
>
>         Sort order = new Sort(Sorting.getStringSortField("data", reverse,
> nullLast, nullFirst));
>
>         result = s.search(ALL, order);
>
>         assertEquals("didn't get all", data.length, result.length());
>
>         assertEquals("wrong order 2", "0", result.doc(2).get("id"));
>         assertEquals("wrong order 3", "3", result.doc(3).get("id"));
>         assertEquals("wrong order 4", "6", result.doc(4).get("id"));
>         assertEquals("wrong order 5", "7", result.doc(5).get("id"));
>         assertEquals("wrong order 6", "4", result.doc(6).get("id"));
>         assertEquals("wrong order 7", "1", result.doc(7).get("id"));
> }
> --------8<--------
>
> -----Original Message-----
> From: Yonik Seeley [mailto:yseeley@gmail.com]
> Sent: 14 July 2006 21:59
> To: java-user@lucene.apache.org
> Subject: Re: MissingStringLastComparatorSource and MultiSearcher
>
> On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> > I was wanting to apply this to a field, which sorts on INT.
>
> The problem with int is that the FieldCache stores the values as an int[],
> and you can't tell when a value is missing.
>
> > Specifically I'm
> > trying to achieve reverse chronological sorting on a timestamp field,
> > which stores YYMMDDHHI (i.e. resolves to 10 minutes and doesn't handle
> centuries).
> > Missing timestamps are assumed to be "old" (i.e. should appear at the
> end).
> >
> > I could get this to sort on String and use
> > MissingStringLastComparatorSource, but would this not be less
> > efficient than sorting in INT??
>
> String sorting takes more memory, but the speed is the same.  Local sorting
> with the FieldCache for strings is done via the ordinal value (no string
> compare is done, just int comparisons).
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 16:46:18 2006
Return-Path: <java-user-return-22024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39488 invoked from network); 15 Jul 2006 16:46:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 16:46:18 -0000
Received: (qmail 82844 invoked by uid 500); 15 Jul 2006 16:46:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82750 invoked by uid 500); 15 Jul 2006 16:46:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82738 invoked by uid 99); 15 Jul 2006 16:46:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 09:46:13 -0700
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 206.190.38.253 is neither permitted nor denied by domain of charbell@bellsouth.net)
Received: from [206.190.38.253] (HELO web50810.mail.yahoo.com) (206.190.38.253)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 15 Jul 2006 09:46:12 -0700
Received: (qmail 32789 invoked by uid 60001); 15 Jul 2006 16:45:50 -0000
Message-ID: <20060715164550.32787.qmail@web50810.mail.yahoo.com>
Received: from [70.152.121.106] by web50810.mail.yahoo.com via HTTP; Sat, 15 Jul 2006 09:45:50 PDT
X-RocketYMMF: quantumhyperspace
Date: Sat, 15 Jul 2006 09:45:50 -0700 (PDT)
From: Charles Bell <charbell@bellsouth.net>
Reply-To: charbell@bellsouth.net
Subject: Re: HTMLParser
To: java-user@lucene.apache.org
In-Reply-To: <H000006f00018a07.1152822823.sourcecontrol.commercescience.com@MHS>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The following little program should do the job for
you.


/* HTMLTextStripper.java
 * July 15, 2006
 */

import java.io.*;

import org.xml.sax.*;
import org.xml.sax.helpers.*;
import javax.xml.parsers.*;

/** HTMLTextStripper
 *  @author  Charles Bell
 *  @version July 15, 2006
 */
public class HTMLTextStripper extends DefaultHandler{
	
	private SAXParser parser = null;
		
	private String tempString = "";
	private boolean debug = false;
	private String errorMessage = "";
	
    public static void main(String[] args){
        new HTMLTextStripper().test();
    }
    
	public void test(){
        
        System.out.println(stripText("<html><body>This
is body text. <p>This is paragraph text.</p><p>This is
malformed html because of no end p
tag.</body></html>"));
        System.out.println("error: " +
getErrorMessage());
    }
	public String stripText(String html) {
        try{
		    parser =
SAXParserFactory.newInstance().newSAXParser();
        }catch(ParserConfigurationException pce){
           
System.err.println("ParserConfigurationException: " +
pce.getMessage());				
        }catch(SAXException saxe){
            System.err.println("SAXException: " +
saxe.getMessage());				
        }
        if (parser != null){
            try{
 
                InputSource inputsource = new
InputSource(new StringReader(html));
                parser.parse(inputsource, this);
            }catch(IOException ioe){
                errorMessage = errorMessage +
("IOException: " + ioe.getMessage());				
            }catch(SAXException saxe){
                errorMessage = errorMessage +
("SAXException: " + saxe.getMessage());				
            }
        }else{
            errorMessage = errorMessage + ("XML Reader
not initialized.");
        }
        
        return tempString;

    }
	
	public String getErrorMessage(){
		return errorMessage;
	}
	
	
	/** characters is called by the SAXparser when it 
	*   encounters character data in an xml document.
	*/
	public void characters(char[] ch, int start, int
length) throws SAXException{
		tempString = tempString + new
String(ch,start,length);
	}
	
}

--- Ross Rankin <ross@commercescience.com> wrote:

> Since I cannot seem to access the HTMLParser mailing
> list and I saw the
> library recommended here, I thought someone here
> that has used it
> successfully can help me out.  
> 
> I have HTML text stored in a database field which I
> want to add to a
> Lucene document, but I want to remove the HTML tags,
> so HTMLParser
> looked like it would fit the bill.
> 
>  
> 
> First, it does not seem to be parsing hence my
> first problem and it
> also is throwing an exception along with this phrase
> sprinkled around
> (No such file or directory).  
> 
>  
> 
> I think I may be using it wrong, so heres what I
> have done.  In my
> object where I create my document, I have the
> following code:
> 
>         StringExtractor extract = new
>
StringExtractor(record.get("column14").toString().trim());
> 
>         try {
> 
>             value = extract.extractStrings(false);
> 
>         } catch (ParserException pe) {
> 
>             System.out.println("Index Long
> Description Parser
> Exception:" + pe.getMessage() );
> 
>             value = "";
> 
>         }
> 
>  
> 
> What I get out in value is like the following:
> 
> <LI><FONT size=2>Crystal Clear III and 3D combfilter
> for natural, sharp
> images with enhanced quality </FONT>
> 
> <LI><FONT size=2>Compact and sleek design </FONT>
> 
> <LI><FONT size=2>Incredible Surround (No such file
> or directory)
> 
>  
> 
> So the tags are still there and oddly the (No such
> file or directory)
> phrase is added which is not in the original text.
> 
>  
> 
> Then I get a ParserException.
> 
>  
> 
> What am I doing wrong?
> 
>  
> 
> Thanks,
> 
> Ross
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 18:02:32 2006
Return-Path: <java-user-return-22025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49677 invoked from network); 15 Jul 2006 18:02:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 18:02:32 -0000
Received: (qmail 13975 invoked by uid 500); 15 Jul 2006 18:02:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13940 invoked by uid 500); 15 Jul 2006 18:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13929 invoked by uid 99); 15 Jul 2006 18:02:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 11:02:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 11:02:24 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 52CB4187BF; Sat, 15 Jul 2006 18:02:01 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 79B47187BE
	for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 18:01:55 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: MissingStringLastComparatorSource and MultiSearcher
Date: Sat, 15 Jul 2006 19:02:09 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_000D_01C6A841.2ABA7080"
Thread-index: AcaoJqgn9UQeXYxEQvqIeLJH1zxJ/QAEALQA
In-Reply-To: <c68e39170607150851n4db12836wcf67e565fb2ff1c2@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060715180155.79B47187BE@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000D_01C6A841.2ABA7080
Content-Type: multipart/mixed;
	boundary="----=_NextPart_001_000E_01C6A841.2ABA7080"


------=_NextPart_001_000E_01C6A841.2ABA7080
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 > I haven't tried to run that test, but the non-null elements in your test
are ordered a bit funny for a reverse sort ;-)

:-) OK, Revision attached. With my QA-credibility at an all time low, could
you see what you make of the attached test? The problem one is
testSortingReverseNullFirst. My reckoning is that you are forward-sorting
(or ascending-sorting if that's the right thing to say) the non-nulls. 

My feeling is that nullStringLastComparatorSource can only be applicable for
one of the four conditions and not two as you have it:
--------8<--------
  public static SortField getStringSortField(String fieldName, boolean
reverse, boolean nullLast, boolean nullFirst) {
    if (nullLast) {
      if (!reverse) return new SortField(fieldName,
nullStringLastComparatorSource);
      else return new SortField(fieldName, SortField.STRING, true);
    } else if (nullFirst) {
      if (reverse) return new SortField(fieldName,
nullStringLastComparatorSource); // <-- !!!
      else return new SortField(fieldName, SortField.STRING, false);
    } else {
      return new SortField(fieldName, SortField.STRING, reverse);
    }
  }
--------8<--------
-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com] 
Sent: 15 July 2006 16:52
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher

On 7/15/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> Incidentally, Yonik, is the logic for
> org.apache.solr.search.Sorting#getStringSortField flawed? I don't see 
> how the same comparator can be used for forward and reverse sorts for 
> the non-null values.

The logic does cause a double-take at first glance :-) It's the combination
of the normal lucene string sort and MissingStringLastComparatorSource that
let you do all the permutations.

Keep in mind that "reverse" in the Solr schema sense is not quite the same
as "reverse" to a Lucene SortField.

> Methinks it is broken for reverse sorts where you specify nulls to 
> appear first.

Let's take this case specifically...

First the semantics:
   * @param nullFirst   true if null should come first, regardless of sort
order

So if the sort is reversed, we want [null,null,Z,Y,...]

MissingStringLastComparatorSource orders null at the end in an ascending
sort.  So if the sort is completely reversed (in the lucene sense), nulls
will be at the beginning like we specified.

> I added this test to TestMissingStringLastComparatorSource.java from 
> http://issues.apache.org/jira/browse/LUCENE-406, which confirms my 
> suspicions ...or confirms that I'd never get a job in QA:

:-)

I haven't tried to run that test, but the non-null elements in your test are
ordered a bit funny for a reverse sort ;-)

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


> --------8<--------
> public void testSortingReverseNullFirst() throws Exception {
>
>         Hits result;
>
>         boolean reverse = true;
>         boolean nullLast = false;
>         boolean nullFirst = true;
>
>         Sort order = new Sort(Sorting.getStringSortField("data", 
> reverse, nullLast, nullFirst));
>
>         result = s.search(ALL, order);
>
>         assertEquals("didn't get all", data.length, result.length());
>
>         assertEquals("wrong order 2", "0", result.doc(2).get("id"));
>         assertEquals("wrong order 3", "3", result.doc(3).get("id"));
>         assertEquals("wrong order 4", "6", result.doc(4).get("id"));
>         assertEquals("wrong order 5", "7", result.doc(5).get("id"));
>         assertEquals("wrong order 6", "4", result.doc(6).get("id"));
>         assertEquals("wrong order 7", "1", result.doc(7).get("id")); }
> --------8<--------
>
> -----Original Message-----
> From: Yonik Seeley [mailto:yseeley@gmail.com]
> Sent: 14 July 2006 21:59
> To: java-user@lucene.apache.org
> Subject: Re: MissingStringLastComparatorSource and MultiSearcher
>
> On 7/14/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> > I was wanting to apply this to a field, which sorts on INT.
>
> The problem with int is that the FieldCache stores the values as an 
> int[], and you can't tell when a value is missing.
>
> > Specifically I'm
> > trying to achieve reverse chronological sorting on a timestamp 
> > field, which stores YYMMDDHHI (i.e. resolves to 10 minutes and 
> > doesn't handle
> centuries).
> > Missing timestamps are assumed to be "old" (i.e. should appear at 
> > the
> end).
> >
> > I could get this to sort on String and use 
> > MissingStringLastComparatorSource, but would this not be less 
> > efficient than sorting in INT??
>
> String sorting takes more memory, but the speed is the same.  Local 
> sorting with the FieldCache for strings is done via the ordinal value 
> (no string compare is done, just int comparisons).
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_001_000E_01C6A841.2ABA7080
Content-Type: application/octet-stream;
	name="TestMissingStringLastComparatorSource.java"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="TestMissingStringLastComparatorSource.java"

package org.apache.lucene.search;

/**
 * Copyright 2005 Apache Software Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or =
implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import org.apache.lucene.index.Term;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
//import org.apache.lucene.document.DateField;		// Deprecated

import org.apache.solr.search.*;

import java.io.IOException;
import java.util.Random;
import java.util.BitSet;

import junit.framework.TestCase;

/**
 * Unit test that demonstrates the use of the
 * MissingStringLastComparatorSource, and demonstrates when *not* to use =
it.
 */
public class TestMissingStringLastComparatorSource extends TestCase {

    public static final boolean F =3D false;
    public static final boolean T =3D true;

    public static String[] data =3D new String [] {
        "A",
        "Z",
        null,
        "B",
        "Y",
        null,
        "C",
        "X"
    };


    RAMDirectory index =3D new RAMDirectory();
    IndexReader r;
    IndexSearcher s;
    Query ALL =3D new TermQuery(new Term("all","all"));

    public TestMissingStringLastComparatorSource(String name) {
	super(name);
    }
    public TestMissingStringLastComparatorSource() {
        super();
    }

    public void setUp() throws Exception {

        /* build an index */
        IndexWriter writer =3D new IndexWriter(index,
                                             new SimpleAnalyzer(), T);

        for (int i =3D 0; i < data.length; i++) {
            Document doc =3D new Document();
            doc.add(new =
Field("id",String.valueOf(i),Field.Store.YES,Field.Index.UN_TOKENIZED));
            doc.add(new =
Field("all","all",Field.Store.YES,Field.Index.UN_TOKENIZED));
            if (null !=3D data[i]) {
                doc.add(new =
Field("data",data[i],Field.Store.YES,Field.Index.UN_TOKENIZED));
            }
            writer.addDocument(doc);
        }

        writer.optimize();
        writer.close();

        r =3D IndexReader.open(index);
        s =3D new IndexSearcher(r);

    }

    /**
     * An example of doing an ascending sort, but keeping records which
     * do not have the sort field at the end of the results.
     */
    public void testAscSort()
        throws Exception {

        Hits result;

        /* this will sort on the data column, in lexical order.
         * items with no value should come last
         */
        Sort order =3D new Sort
            (new SortField("data", new =
MissingStringLastComparatorSource()));

        result =3D s.search(ALL, order);

        assertEquals("didn't get all", data.length, result.length());

        assertEquals("wrong order 0", "0", result.doc(0).get("id"));
        assertEquals("wrong order 1", "3", result.doc(1).get("id"));
        assertEquals("wrong order 2", "6", result.doc(2).get("id"));
        assertEquals("wrong order 3", "7", result.doc(3).get("id"));
        assertEquals("wrong order 4", "4", result.doc(4).get("id"));
        assertEquals("wrong order 5", "1", result.doc(5).get("id"));


    }


    /**
     * same as testAscSort, but uses a secondary sort on the items
     * that are missing values from the primary sort.
     */
    public void testAscSortAndSecondary()
        throws Exception {

        Hits result;

        /* this will sort on the data column, in lexical order.
         * items with no value should come last
         */
        Sort order =3D new Sort(new SortField[] {
            new SortField("data", new =
MissingStringLastComparatorSource()),
            new SortField(null, SortField.DOC)
        });

        result =3D s.search(ALL, order);

        assertEquals("didn't get all", data.length, result.length());

        assertEquals("wrong order 0", "0", result.doc(0).get("id"));
        assertEquals("wrong order 1", "3", result.doc(1).get("id"));
        assertEquals("wrong order 2", "6", result.doc(2).get("id"));
        assertEquals("wrong order 3", "7", result.doc(3).get("id"));
        assertEquals("wrong order 4", "4", result.doc(4).get("id"));
        assertEquals("wrong order 5", "1", result.doc(5).get("id"));

        assertEquals("wrong order 6", "2", result.doc(6).get("id"));
        assertEquals("wrong order 7", "5", result.doc(7).get("id"));

    }

    /**
     * this test demonstrates how to sort records descending, leaving =
the
     * records without a value at the end -- in this case, we don't use
     * the MissingStringLastComparatorSource at all, becausing missing
     * items are already considered "low" and appear at the end of a
     * reversed sort.
     */
    public void testDscSort() throws Exception {

        Hits result;

        /* this should sort on the data column, in reverse lexical =
order.
         * items with no value should come last
         *
         * if we used MissingStringLastComparatorSource here, the
         * "reverse=3Dtrue" option on the Sort constructor, would result
         * in the records with no value for the field comming first.
         */
        Sort order =3D new Sort("data", true);


        result =3D s.search(ALL, order);

        assertEquals("didn't get all", data.length, result.length());

        assertEquals("wrong order 0", "1", result.doc(0).get("id"));
        assertEquals("wrong order 1", "4", result.doc(1).get("id"));
        assertEquals("wrong order 2", "7", result.doc(2).get("id"));
        assertEquals("wrong order 3", "6", result.doc(3).get("id"));
        assertEquals("wrong order 4", "3", result.doc(4).get("id"));
        assertEquals("wrong order 5", "0", result.doc(5).get("id"));

    }

	public void testSortingForwardNullFirst() throws Exception {

		Hits result;

		boolean reverse =3D false;
		boolean nullLast =3D false;
		boolean nullFirst =3D true;

		Sort order =3D new Sort(Sorting.getStringSortField("data", reverse, =
nullLast, nullFirst));

		result =3D s.search(ALL, order);

		assertEquals("didn't get all", data.length, result.length());

		assertEquals("wrong order 2", "0", result.doc(2).get("id"));
		assertEquals("wrong order 3", "3", result.doc(3).get("id"));
		assertEquals("wrong order 4", "6", result.doc(4).get("id"));
		assertEquals("wrong order 5", "7", result.doc(5).get("id"));
		assertEquals("wrong order 6", "4", result.doc(6).get("id"));
		assertEquals("wrong order 7", "1", result.doc(7).get("id"));
	}

	public void testSortingForwardNullLast() throws Exception {

		Hits result;

		boolean reverse =3D false;
		boolean nullLast =3D true;
		boolean nullFirst =3D false;

		Sort order =3D new Sort(Sorting.getStringSortField("data", reverse, =
nullLast, nullFirst));

		result =3D s.search(ALL, order);

		assertEquals("didn't get all", data.length, result.length());

		assertEquals("wrong order 0", "0", result.doc(0).get("id"));
		assertEquals("wrong order 1", "3", result.doc(1).get("id"));
		assertEquals("wrong order 2", "6", result.doc(2).get("id"));
		assertEquals("wrong order 3", "7", result.doc(3).get("id"));
		assertEquals("wrong order 4", "4", result.doc(4).get("id"));
		assertEquals("wrong order 5", "1", result.doc(5).get("id"));
	}


	public void testSortingReverseNullFirst() throws Exception {

		Hits result;

		boolean reverse =3D true;
		boolean nullLast =3D false;
		boolean nullFirst =3D true;

		Sort order =3D new Sort(Sorting.getStringSortField("data", reverse, =
nullLast, nullFirst));

		result =3D s.search(ALL, order);

		assertEquals("didn't get all", data.length, result.length());

		assertEquals("wrong order 2", "1", result.doc(2).get("id"));
		assertEquals("wrong order 3", "4", result.doc(3).get("id"));
		assertEquals("wrong order 4", "7", result.doc(4).get("id"));
		assertEquals("wrong order 5", "6", result.doc(5).get("id"));
		assertEquals("wrong order 6", "3", result.doc(6).get("id"));
		assertEquals("wrong order 7", "0", result.doc(7).get("id"));
	}


	public void testSortingReverseNullLast() throws Exception {

		Hits result;

		boolean reverse =3D true;
		boolean nullLast =3D true;
		boolean nullFirst =3D false;

		Sort order =3D new Sort(Sorting.getStringSortField("data", reverse, =
nullLast, nullFirst));

		result =3D s.search(ALL, order);

		assertEquals("didn't get all", data.length, result.length());

		assertEquals("wrong order 0", "1", result.doc(0).get("id"));
		assertEquals("wrong order 1", "4", result.doc(1).get("id"));
		assertEquals("wrong order 2", "7", result.doc(2).get("id"));
		assertEquals("wrong order 3", "6", result.doc(3).get("id"));
		assertEquals("wrong order 4", "3", result.doc(4).get("id"));
		assertEquals("wrong order 5", "0", result.doc(5).get("id"));
	}


	public static junit.framework.Test suite() {
		return new =
junit.framework.JUnit4TestAdapter(TestMissingStringLastComparatorSource.c=
lass);
	}

	public static void main(String args[]) {
		=
org.junit.runner.JUnitCore.main("org.apache.lucene.search.TestMissingStri=
ngLastComparatorSource");
	}

}

------=_NextPart_001_000E_01C6A841.2ABA7080--

------=_NextPart_000_000D_01C6A841.2ABA7080
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNTE4
MDIwNlowIwYJKoZIhvcNAQkEMRYEFCx6rG71UTB1/avDy7UkX7tyZwuaMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAAxso+wSVgcNgAsvPl4MUKStZiP9VGBl7Yw+
Q1lCEOL1wyYat+eyHgrYhYL/oYgT7ehsAqksc3avNwiF8MyMNxDBCpXdVoXQ7YOMbNdzKsFS5/sa
aNN2T3p9PM29fsHkr106htGguVfnTZLQGdxguhvgzT64JburlC08EIk8bkEPLyosFNoUc2vRqodp
baBOPqhHMqxjeVbEmzCNVJPiUscNxuwJDIfVDS8bnsau4+vtF6xQei0lWqZUzzanK0GOmlU9c3/G
cs1DqmRuEZr4JM1W5iLuBiZOgVqI/ch/KxI76uMHPoR84eJIMf0Xg7b0zYE4VWED7o4exSjUPoiF
VRMAAAAAAAA=

------=_NextPart_000_000D_01C6A841.2ABA7080--


From java-user-return-22026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 19:03:29 2006
Return-Path: <java-user-return-22026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56475 invoked from network); 15 Jul 2006 19:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 19:03:28 -0000
Received: (qmail 43175 invoked by uid 500); 15 Jul 2006 19:03:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42965 invoked by uid 500); 15 Jul 2006 19:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42954 invoked by uid 99); 15 Jul 2006 19:03:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 12:03:23 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 12:03:22 -0700
Received: by py-out-1112.google.com with SMTP id z59so1040157pyg
        for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 12:03:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=K2n8Xq2lmo7B7OcfT83gh7MX2ITgZuSV4K+BwmS9CAtxIcH69eiosGMJIiWeSzwPx+/io/L5FaYkPl61KDyrH8KokXJjzPzxxmsC+LhobdrgvLeKus728kymXUHiF00PnA0qyjV+Zuxq9mYRZbn7QTjU19deNAs19XosFv5s12Y=
Received: by 10.35.135.12 with SMTP id m12mr1336439pyn;
        Sat, 15 Jul 2006 11:53:02 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sat, 15 Jul 2006 11:53:02 -0700 (PDT)
Message-ID: <c68e39170607151153y4c73f6aj96fcfbdec9905029@mail.gmail.com>
Date: Sat, 15 Jul 2006 14:53:02 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MissingStringLastComparatorSource and MultiSearcher
In-Reply-To: <20060715180155.79B47187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <c68e39170607150851n4db12836wcf67e565fb2ff1c2@mail.gmail.com>
	 <20060715180155.79B47187BE@mail.seseit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/15/06, Rob Staveley (Tom) <rstaveley@seseit.com> wrote:
> The problem one is
> testSortingReverseNullFirst. My reckoning is that you are forward-sorting
> (or ascending-sorting if that's the right thing to say) the non-nulls.

OK, examples are probably easier to work with.
If we have a list of [A,null,Z] and we want that reverse sorted, then
we want nulls first, the result should be [null,Z,A].

If we were to use nullStringLastComparatorSource (which orders nulls
last in an *ascending* Lucene sort), the result would be [A,Z,null].
If we reverse this lucene sort, we get [null,Z,A], the desired result.

Ahhh, but in the code, we aren't doing the last reverse!  That does look wrong.

return new SortField(fieldName,nullStringLastComparatorSource); // <-- !!!

Great catch!  I think we never noticed because all of our usecases
called for nulls to sort last.  I'll add a test to Solr for this case.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 20:57:42 2006
Return-Path: <java-user-return-22027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77046 invoked from network); 15 Jul 2006 20:57:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 20:57:42 -0000
Received: (qmail 12546 invoked by uid 500); 15 Jul 2006 20:57:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12522 invoked by uid 500); 15 Jul 2006 20:57:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12511 invoked by uid 99); 15 Jul 2006 20:57:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 13:57:36 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 13:57:28 -0700
Received: by py-out-1112.google.com with SMTP id z59so1057576pyg
        for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 13:57:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sQmKmdtgmoVtodnngRh1rtUyO3dS3qlAU2AnsLSqNR3ut9ufSUy9axmjJwONbvviKOV+IJOuoLjc2CdaIDdlZhoblIDFfbcf3nUQ0kAycTyumxm05X0NDxTly+1Uz921GwBkJGgteay+b6rjKGm5Np+rSw+9xNVEJS3HF+mAo/8=
Received: by 10.35.78.9 with SMTP id f9mr1469330pyl;
        Sat, 15 Jul 2006 13:57:01 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Sat, 15 Jul 2006 13:57:01 -0700 (PDT)
Message-ID: <359a92830607151357t5708630dwf78182c900da2910@mail.gmail.com>
Date: Sat, 15 Jul 2006 16:57:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right
In-Reply-To: <20060715091638.8F6B5187BE@mail.seseit.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56781_16516427.1152997021805"
References: <Pine.LNX.4.58.0607141626470.3459@hal.rescomp.berkeley.edu>
	 <20060715091638.8F6B5187BE@mail.seseit.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_56781_16516427.1152997021805
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Does it make any sense at all to pre-calculate and permanently store date
range filters for each day? I'm assuming that you only add to your index,
and don't optimize it after deletions or do anything else that would change
the document IDs Lucene assigns AND you index each day's mail sequentially
by day. That last is important for this scheme. Really for any two mails
that get Lucene IDs  I1 and I2 sent on D1 and D2 if I1 < I2 then D1 < D2.

Chris: I am right aren't I? That it's guaranteed that for any document you
add, the new doc ID is greater than any already in the index?

If that's all true, you could just store the first and last Doc ID for each
day in a special index (or special "documents" in your main index) that
looked something like this:

Day 20060323
FirstDocId 234098
LastDocId 238909
.
.
.
Day 20060428
FirstDocId 334098
LastDocId 338909

So, creating a filter would consist of getting the FirstDocId of the first
day, the LastDocId of the last day and flipping on all the bits in your new
filter between those two Doc IDs. In this case, your filter would turn on
all the bits from 234098 to 338909 for a date range of March 23, 2006 to
April 28, 2006.

If you can't guarantee the condition above, this couldn't work. Really, this
is just a simple database table I guess <G>. I can imagine you could do
something similar with the actual bitmaps if your mails aren't sorted in
ascending date order. Instead of putting the doc IDs, you could store the
binary forms of the bitmaps and combine them all. But now we're getting to a
point where I have to question whether the time savings is worth it <G>....

Of course, the first question I should ask is whether you're sure there is
any real performance problem creating your filters on the fly. Premature
optimization and all that....

Anyway, this ocurred to me in a vision, in a flash (See Arlo Guthrie, "The
pickle song (the significance of the pickle)"), and might possibly even be
relevant to your problem, so I thought I'd send it along

Best
Erick

------=_Part_56781_16516427.1152997021805--

From java-user-return-22028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 15 21:12:15 2006
Return-Path: <java-user-return-22028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78517 invoked from network); 15 Jul 2006 21:12:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2006 21:12:15 -0000
Received: (qmail 19919 invoked by uid 500); 15 Jul 2006 21:12:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19355 invoked by uid 500); 15 Jul 2006 21:12:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19344 invoked by uid 99); 15 Jul 2006 21:12:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 14:12:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 14:12:02 -0700
Received: by py-out-1112.google.com with SMTP id z59so1059719pyg
        for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 14:11:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MjMchdAVtoCYwKDMBMH1azTB6Kg1v6PmqGQFZ2UnE171TXxMgW1TxtTjuNh2OP849O5zfxC2AdhgOTvWOhhVmvDCid8DvU/v4R9j54aEChWE/tAFEpvjxd/ULqVJwoKpSMLB2FbTPfbP7CGPdG/eY4l4ZyOkyHqncWiiuHhSc9Y=
Received: by 10.35.29.6 with SMTP id g6mr1487789pyj;
        Sat, 15 Jul 2006 14:11:35 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sat, 15 Jul 2006 14:11:35 -0700 (PDT)
Message-ID: <c68e39170607151411y43b1675dtc76f3b0cd3c15dc9@mail.gmail.com>
Date: Sat, 15 Jul 2006 17:11:35 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right
In-Reply-To: <359a92830607151357t5708630dwf78182c900da2910@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <Pine.LNX.4.58.0607141626470.3459@hal.rescomp.berkeley.edu>
	 <20060715091638.8F6B5187BE@mail.seseit.com>
	 <359a92830607151357t5708630dwf78182c900da2910@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/15/06, Erick Erickson <erickerickson@gmail.com> wrote:
> I'm assuming that you only add to your index,
> and don't optimize it after deletions or do anything else that would change
> the document IDs

That won't quite work... add() after delete() can change document ids
because it can cause a segment merge which removes deleted docs.

> If that's all true, you could just store the first and last Doc ID for each
> day

That you could still sort-of do.  Even though docids can change, they
won't be reordered with respect to eachother.  So if you index in date
order, you can do a lookup on each endpoint and know that all the ids
between are in the range.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 01:50:21 2006
Return-Path: <java-user-return-22029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22883 invoked from network); 16 Jul 2006 01:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 01:50:21 -0000
Received: (qmail 39094 invoked by uid 500); 16 Jul 2006 01:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39064 invoked by uid 500); 16 Jul 2006 01:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39053 invoked by uid 99); 16 Jul 2006 01:50:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Jul 2006 18:50:16 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.207.58.136] (HELO mail2.mailrooter.com) (65.207.58.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 15 Jul 2006 18:50:08 -0700
Received: from fei0018m031.hq.ferg.com ([172.16.105.131])
 by mail2.mailrooter.com (SMSSMTP 4.1.9.35) with SMTP id M2006071521443506580
 for <java-user@lucene.apache.org>; Sat, 15 Jul 2006 21:44:35 -0400
Received: from fei0018m001.hq.ferg.com ([172.16.105.14]) by fei0018m031.hq.ferg.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Sat, 15 Jul 2006 21:49:44 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A87A.1C660B9C"
Subject: Searching on Multiple fields
Date: Sat, 15 Jul 2006 21:49:44 -0400
Message-ID: <8C60F95D154DD34AA3AD319A5A093D840758CD89@fei0018m001.hq.ferg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching on Multiple fields
thread-index: Acaoeh7gYvAqkDHLRRSo7eLG9jdsiA==
From: <Rod.Madden@ferguson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 16 Jul 2006 01:49:44.0890 (UTC) FILETIME=[1CC6B9A0:01C6A87A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A87A.1C660B9C
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Currently, my Lucene search code allows the user to specify
which fields are searched ...I have now had a request to enhance
the code to allow the users to specify that certain=20
searchfields contain one value and other ( or all other ) fields
contain a different value.
=20
In Luke I can do following to run this type of search:
 +secondarySection:"Vendor Information" +title:types
=20

The relevant section of my code as it currently stands is
as follows: ...
.
.
.
// Is a Lucene FSDir object available
if (fsDir !=3D null) {
    is =3D new IndexSearcher(fsDir);
    // searchFields are those Lucene fields which I need to search for
the search term
    qp =3D new MultiFieldQueryParser(searchFields,new StopAnalyzer());
 =20
    if (qp !=3D null) {
        // stringToFind is search term I am searching for across all
fields
       query =3D qp.parse(stringToFind.toUpperCase());
    } // if ( fsDir !=3D null )
}
=20
Can anyone suggest how I need to proceed to mod this code to allow for=20
the new feature requested ...
=20
Thanks
=20
=20
=20
=20

------_=_NextPart_001_01C6A87A.1C660B9C--

From java-user-return-22030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 14:03:58 2006
Return-Path: <java-user-return-22030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64111 invoked from network); 16 Jul 2006 14:03:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 14:03:58 -0000
Received: (qmail 55176 invoked by uid 500); 16 Jul 2006 14:03:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55148 invoked by uid 500); 16 Jul 2006 14:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55137 invoked by uid 99); 16 Jul 2006 14:03:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 07:03:52 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 07:03:45 -0700
Received: by py-out-1112.google.com with SMTP id z59so1191813pyg
        for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 07:03:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OM16fTFJWbkzTQ1ARC9Szjmatr4ClZDOptF1oJDGeYFK+gxMG7EHEy3wbuu7yJFKsIgDRl8VKUp5bmBd0S3a1QEWYHtDGZGZi0Oe3lZknqKdpZZtgLfqZ4Rh/wUolyXvPQTm38q52/Ad/6rUIIjRs2o6Bi7GyXKiCmFtAguXE0I=
Received: by 10.35.11.15 with SMTP id o15mr2408419pyi;
        Sun, 16 Jul 2006 07:03:18 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Sun, 16 Jul 2006 07:03:18 -0700 (PDT)
Message-ID: <359a92830607160703i7195cc75h3b34dbb3729847b4@mail.gmail.com>
Date: Sun, 16 Jul 2006 10:03:18 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right
In-Reply-To: <c68e39170607151411y43b1675dtc76f3b0cd3c15dc9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62079_20257152.1153058598338"
References: <Pine.LNX.4.58.0607141626470.3459@hal.rescomp.berkeley.edu>
	 <20060715091638.8F6B5187BE@mail.seseit.com>
	 <359a92830607151357t5708630dwf78182c900da2910@mail.gmail.com>
	 <c68e39170607151411y43b1675dtc76f3b0cd3c15dc9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_62079_20257152.1153058598338
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the clarification. Let me re-state this and see if I got it
right.

1> if you never do any deletions (or recalculate your "special records"
after deletion/optimization), this could work as-is.

2> the safe way to do this would be to find the miniminum doc ID for the
start date, the maximum doc ID for the end date and make the filter by
flipping all the bits in the filter in between. Assuming that you indexed in
date-sorted order in the first place. There really can't be anything in the
system to do anything like this for you since it relies on the meta-data
that the mails were indexed in some specific order.

I actually like the second, it's less prone for getting out of whack.....

Thanks for the
Erick

------=_Part_62079_20257152.1153058598338--

From java-user-return-22031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 14:14:15 2006
Return-Path: <java-user-return-22031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65817 invoked from network); 16 Jul 2006 14:14:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 14:14:15 -0000
Received: (qmail 63757 invoked by uid 500); 16 Jul 2006 14:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63140 invoked by uid 500); 16 Jul 2006 14:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63129 invoked by uid 99); 16 Jul 2006 14:14:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 07:14:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 07:14:02 -0700
Received: by py-out-1112.google.com with SMTP id z59so1193587pyg
        for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 07:13:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=l0FOfXB3lVtmkdKkwqpxN//QzWqdUmF1KyqAQZBl2BgLOV/0JnQftoqhqKz8OpGQoEQQ4gZf820/BI3c8Hmd0CarEA3BRlT10OR+ZNRxrJ7DvrPxdIvR3R5u1qQyI1tz4VNUHeHW2PmQ5LTc3SPgcUWig3177pTGQ0ahgEaDn14=
Received: by 10.35.70.2 with SMTP id x2mr2421022pyk;
        Sun, 16 Jul 2006 07:13:02 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Sun, 16 Jul 2006 07:13:02 -0700 (PDT)
Message-ID: <359a92830607160713j6e7c5a6s9132c8cd25aa93e9@mail.gmail.com>
Date: Sun, 16 Jul 2006 10:13:02 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching on Multiple fields
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D840758CD89@fei0018m001.hq.ferg.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62131_28531293.1153059182565"
References: <8C60F95D154DD34AA3AD319A5A093D840758CD89@fei0018m001.hq.ferg.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_62131_28531293.1153059182565
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could always construct a BooleanQuery with all the necessary sub-clauses
on an as-needed basis. You can string the sub-clauses together in
arbitrarily complex ways. Be particularly aware that you one of the clauses
of a BooleanQuery may itself be a boolean query, so constructing something
like 'a and (b or c)' is equivalent to (fast pseudo code with parameters and
lotsa other stuff left out here)

BooleanQuery bqSub;
bqSub.add("b", SHOULD);
bqSub.add("c", SHOULD);

BooleanQuery bqTop;
bq.add(bqSub, MUST);
bq.add("a", MUST);

etc, etc, etc...

Best
Erick

------=_Part_62131_28531293.1153059182565--

From java-user-return-22032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 14:35:49 2006
Return-Path: <java-user-return-22032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67516 invoked from network); 16 Jul 2006 14:35:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 14:35:48 -0000
Received: (qmail 70604 invoked by uid 500); 16 Jul 2006 14:35:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70247 invoked by uid 500); 16 Jul 2006 14:35:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70235 invoked by uid 99); 16 Jul 2006 14:35:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 07:35:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 07:35:28 -0700
Received: by wr-out-0506.google.com with SMTP id i11so379112wra
        for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 07:35:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=h96D9wKxpr/4pvZNVVJPRFEGq+vG9DhYQX1SgtHfZQqvBd7Kg4TmTNzG5neO6w8G7XWzxoGLhs6dH06Vz/51gdRReQ1f17PMlPrX/+ILWxfMrctZ7z5ASy1kNPPOkH+ku2C11ed2M2UnMklT7QqImNIB+s2vp/f4WyunNBxIJ/I=
Received: by 10.54.152.12 with SMTP id z12mr1253842wrd;
        Sun, 16 Jul 2006 07:35:01 -0700 (PDT)
Received: from ?192.168.1.101? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 6sm1897852wrh.2006.07.16.07.35.00;
        Sun, 16 Jul 2006 07:35:00 -0700 (PDT)
Message-ID: <44BA4E9B.3010202@gmail.com>
Date: Sun, 16 Jul 2006 10:35:07 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Hits syncronization
References: <8C60F95D154DD34AA3AD319A5A093D840758CD89@fei0018m001.hq.ferg.com>
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D840758CD89@fei0018m001.hq.ferg.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does the Hits class need to use a Vector for it's cache? Is the cache 
somehow shared among threads or should this be an ArrayList to avoid 
synchronization costs? Also, I do not see any backing array size 
initialization. Is this because the default of 10 is optimal? Am I wrong 
all over the place?

- mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 15:22:14 2006
Return-Path: <java-user-return-22033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73672 invoked from network); 16 Jul 2006 15:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 15:22:14 -0000
Received: (qmail 96335 invoked by uid 500); 16 Jul 2006 15:22:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96308 invoked by uid 500); 16 Jul 2006 15:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96296 invoked by uid 99); 16 Jul 2006 15:22:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 08:22:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of karl.wettin@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 08:21:58 -0700
Received: by py-out-1112.google.com with SMTP id z59so1205414pyg
        for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 08:21:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fyYoUep42zZIBLOE7FgL9v+gC9SM7BjBE8v5gSSqgWP7QN9u6uF5t0UBqOl5eXOk1hK8lY9AtRvLNJfHLdylI5svxBTZg9n8CZctMSiIPrqlcraKzNzDkvm+q5UWxKRnBWexQmnpEeP6bhLLp7Jvu0xRDGRMrZKiw++8EJDAITo=
Received: by 10.35.37.13 with SMTP id p13mr2493603pyj;
        Sun, 16 Jul 2006 08:21:31 -0700 (PDT)
Received: by 10.35.122.7 with HTTP; Sun, 16 Jul 2006 08:21:31 -0700 (PDT)
Message-ID: <9fc755c20607160821h25c8d932ne920c64f82087c0f@mail.gmail.com>
Date: Sun, 16 Jul 2006 17:21:31 +0200
From: "karl wettin" <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hits syncronization
In-Reply-To: <44BA4E9B.3010202@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <8C60F95D154DD34AA3AD319A5A093D840758CD89@fei0018m001.hq.ferg.com>
	 <44BA4E9B.3010202@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/16/06, Mark Miller <markrmiller@gmail.com> wrote:
> Does the Hits class need to use a Vector for it's cache? Is the cache
> somehow shared among threads or should this be an ArrayList to avoid
> synchronization costs? Also, I do not see any backing array size
> initialization. Is this because the default of 10 is optimal? Am I wrong
> all over the place?

The Vector in Hits (Document, RAMDirectory and many more places) are
artifacts from the early days of Lucene (and Java). There has been
some discussion on if they should be replaced or not, but never got
anywhere.

You can safely change it to a JCF-list of your preference.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 18:26:06 2006
Return-Path: <java-user-return-22034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3386 invoked from network); 16 Jul 2006 18:26:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 18:26:05 -0000
Received: (qmail 2205 invoked by uid 500); 16 Jul 2006 18:26:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1216 invoked by uid 500); 16 Jul 2006 18:26:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1205 invoked by uid 99); 16 Jul 2006 18:26:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 11:26:00 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.207.58.147] (HELO mail1.mailrooter.com) (65.207.58.147)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Jul 2006 11:25:52 -0700
Received: from fei0018m031.hq.ferg.com ([172.16.105.131])
 by mail1.mailrooter.com (SMSSMTP 4.1.9.35) with SMTP id M2006071614155528768
 for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 14:15:55 -0400
Received: from fei0018m001.hq.ferg.com ([172.16.105.14]) by fei0018m031.hq.ferg.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Sun, 16 Jul 2006 14:25:19 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A905.31495448"
Subject: MultiField Query
Date: Sun, 16 Jul 2006 14:25:19 -0400
Message-ID: <8C60F95D154DD34AA3AD319A5A093D840758CD8B@fei0018m001.hq.ferg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiField Query
Thread-Index: AcapBRZDAExHyK4rTn6oKJxBmpI+Lw==
From: <Rod.Madden@ferguson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 16 Jul 2006 18:25:19.0697 (UTC) FILETIME=[317EEC10:01C6A905]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A905.31495448
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am using Lucene 2.0 and trying to use the MultiFieldQueryParser=20
in my search.
=20
I want to limit my search to documents which have "silly"
in "field1" ...within that subset of documents, I want documents which
have
"example" in "field2" OR "field3"
=20
The code fragment below is my attempt at this ...code blows
on the : Query query =3D qp.parse(...=20
statement ...
=20
Besides blowing, I believe that the MUST / MUST for field2 and field3
is inappropriate ...I really want to say ..if field1 has "silly"
return documents with "example" in field2 OR field3.
=20

Any suggestions for accomplishing this ?=20
=20
Someone suggested BooleanQuery but I was not sure how to merge
that concept in with the MultiFieldQueryParser ..
=20

.
.
.
=20
if (fsDir !=3D null) {
=20
 IndexSearcher is =3D new IndexSearcher(fsDir);
 MultiFieldQueryParser qp =3D=3D new =
MultiFieldQueryParser(searchFields,new
StopAnalyzer());
=20
 // Is a Lucene IndexSearcher object available
=20
 if (qp !=3D null) {
 =20
     String [] searchTerms   =3D {"silly",  "example"};             //
search terms
     String [] searchFields  =3D {"field1", "field2", "field3"};    //
search field names
=20
     //   silly MUST occur in field1 - example SHOULD occur in field2
     BooleanClause.Occur [] booleanClauses =3D=20
                             { BooleanClause.Occur.MUST,   =20
                               BooleanClause.Occur.MUST,
                               BooleanClause.Occur.MUST};
=20
     Query query =3D qp.parse(searchTerms, searchFields, booleanClauses,
new StopAnalyzer());
=20
     is.search(query);
=20
=20
Thanks
=20
=20

------_=_NextPart_001_01C6A905.31495448--

From java-user-return-22035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 18:38:09 2006
Return-Path: <java-user-return-22035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5780 invoked from network); 16 Jul 2006 18:38:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 18:38:08 -0000
Received: (qmail 12366 invoked by uid 500); 16 Jul 2006 18:38:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12334 invoked by uid 500); 16 Jul 2006 18:38:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12323 invoked by uid 99); 16 Jul 2006 18:38:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 11:38:03 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.125.99] (HELO web38808.mail.mud.yahoo.com) (209.191.125.99)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Jul 2006 11:37:54 -0700
Received: (qmail 32864 invoked by uid 60001); 16 Jul 2006 18:37:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type;
  b=RKGPOmizzf/o+ed7GjQBD7FZBDcgHXpNP1FiEzfx8ou4PZB7wA1jQTpPXwcXNGXsKt+rpC014XH8AH4kYf8/j0XOfi+2kuWCuSlbfCXrcfzDSztOMrGu8zAjd64I4nX/M8hoTXeRJTld7kgdSw8ZC5y5SrDkkQJwZ4jxJbwQ8Og=  ;
Message-ID: <20060716183727.32862.qmail@web38808.mail.mud.yahoo.com>
Received: from [66.57.36.109] by web38808.mail.mud.yahoo.com via HTTP; Sun, 16 Jul 2006 11:37:27 PDT
Date: Sun, 16 Jul 2006 11:37:27 -0700 (PDT)
From: Tom Gissel <trgissel@yahoo.com>
Reply-To: Tom Gissel <trgissel@yahoo.com>
Subject: Improving Lucene Reader Instanciation time
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm a lucene neophyte, so please forgive the simplicity of the my question.  I've been playing around with Lucene and have noticed that the instantiation of my IndexReader is taking long time using the following code:

            Directory directory = FSDirectory.getDirectory(this.indexDir, false);
            IndexReader reader = new FilterIndexReader(IndexReader.open(directory));

Based upon my very rough tests it seems the instantiation time takes anywhere from 1.7-2.5 seconds on my laptop and doesn't seem to be noticeably proportional to the number of entries in the index.  For instance with an index directory with 0 entries seems to take nearly the same amount of time as an index with several thousand entries.

I'm wondering if someone can point me to some documentation describing how to reduce the reader start up time.  Would a different IndexReader help,  or is there some sort of lazy loading mode?  


Thanks in advance for your help.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 18:38:32 2006
Return-Path: <java-user-return-22036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5865 invoked from network); 16 Jul 2006 18:38:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 18:38:32 -0000
Received: (qmail 13793 invoked by uid 500); 16 Jul 2006 18:38:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13767 invoked by uid 500); 16 Jul 2006 18:38:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13756 invoked by uid 99); 16 Jul 2006 18:38:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 11:38:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 11:38:17 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id A2D761886A; Sun, 16 Jul 2006 18:37:50 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id 0749118869
	for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 18:37:48 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Date ranges - getting the approach right
Date: Sun, 16 Jul 2006 19:38:04 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0034_01C6A90F.59957B10"
Thread-index: Acao4LDcppi7/1H3Q2q7wbds9giPBwAJFgmA
In-Reply-To: <359a92830607160703i7195cc75h3b34dbb3729847b4@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060716183748.0749118869@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0034_01C6A90F.59957B10
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

The second approach requires three hits, doesn't it?

(1) TermQuery on start date + sort on document ID
(2) TermQuery on end date + reverse sort on document ID
(3) The actual query with a filter on the above

Would that really be a saving?

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: 16 July 2006 15:03
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right

Thanks for the clarification. Let me re-state this and see if I got it
right.

1> if you never do any deletions (or recalculate your "special records"
after deletion/optimization), this could work as-is.

2> the safe way to do this would be to find the miniminum doc ID for the
start date, the maximum doc ID for the end date and make the filter by
flipping all the bits in the filter in between. Assuming that you indexed in
date-sorted order in the first place. There really can't be anything in the
system to do anything like this for you since it relies on the meta-data
that the mails were indexed in some specific order.

I actually like the second, it's less prone for getting out of whack.....

Thanks for the
Erick

------=_NextPart_000_0034_01C6A90F.59957B10
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcxNjE4
MzgwMVowIwYJKoZIhvcNAQkEMRYEFLCbdJTA3Tzs3M5mPcPw6mmmFn3EMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAAkfKXFX3I4TJ8+9hf3tUMvt/45B3/4brsXf
+Ni4ZuIwgex6w1ulSGwPgLPVMOI0v94IhvOQN7AUGHJ/GzOsDEd5CXtomA73G7n945LeRfOv3ZVz
h3mW0S6H0YXBzH09Eh4bnY1Vfh+05WbC5D5Rw9xSMCgHmrZzs6ZlS51cgNByuVbdm4VdX28iemOb
S58mocRIgeiH6stbB5aUvdcEFVZlNrtdjhRXuVvnmMptnR3RTOMmu7Qe7Mpkn+oH65rGS87e2ZdL
0bFOkbzYiYqMY+bPYrgQ6jNgLlE5ZTeVpW4A6hb8+R4TZkJm4s4uVGRuetAWZWTdcshpdvPtzmKP
+uUAAAAAAAA=

------=_NextPart_000_0034_01C6A90F.59957B10--


From java-user-return-22037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 16 19:47:11 2006
Return-Path: <java-user-return-22037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27408 invoked from network); 16 Jul 2006 19:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2006 19:47:10 -0000
Received: (qmail 66306 invoked by uid 500); 16 Jul 2006 19:47:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65440 invoked by uid 500); 16 Jul 2006 19:47:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65429 invoked by uid 99); 16 Jul 2006 19:47:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 12:47:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 12:46:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6CC255B763; Sun, 16 Jul 2006 12:46:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 59E387F403
	for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 12:46:24 -0700 (PDT)
Date: Sun, 16 Jul 2006 12:46:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: Date ranges - getting the approach right
In-Reply-To: <20060716183748.0749118869@mail.seseit.com>
Message-ID: <Pine.LNX.4.58.0607161240440.3992@hal.rescomp.berkeley.edu>
References: <20060716183748.0749118869@mail.seseit.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: The second approach requires three hits, doesn't it?
:
: (1) TermQuery on start date + sort on document ID
: (2) TermQuery on end date + reverse sort on document ID
: (3) The actual query with a filter on the above

You wouldn't need 3 queries for each date range you wanted to precompute,
you could use one pass over the TermEnum to seek forward to the first term
after the start of each range, and then seek a TermDocs to that term to
find the first doc in that range.   Then you can have a Filter that just
flat out knows the lowest and highest IDs for each range.

Basically you are precomputing all of your ranges in one low level
TermEnum scan instead of a seperate query/filter pass (which internally
does a TermEnum scan) for each range.

I've never really thought baout an approach like this (because i never
deal with indexes that only grow without deletes, and i *never* deal with
indexes where i know what order things are added in) but it seems like it
should work pretty well for ranges you know in advance are going to be
important ... those Filters should be pretty damn space efficient too --
they only have to keep track of two ints, not big BitSets lieing arround.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 00:04:13 2006
Return-Path: <java-user-return-22038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19419 invoked from network); 17 Jul 2006 00:04:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 00:04:12 -0000
Received: (qmail 76603 invoked by uid 500); 17 Jul 2006 00:04:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76571 invoked by uid 500); 17 Jul 2006 00:04:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76560 invoked by uid 99); 17 Jul 2006 00:04:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 17:04:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Jul 2006 17:03:57 -0700
Received: (qmail 24284 invoked from network); 17 Jul 2006 00:03:29 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.4.148)
  by ws6-1.us4.outblaze.com with SMTP; 17 Jul 2006 00:03:29 -0000
Message-ID: <44BAD3D2.4070904@curtin.com>
Date: Sun, 16 Jul 2006 20:03:30 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MultiField Query
References: <8C60F95D154DD34AA3AD319A5A093D840758CD8B@fei0018m001.hq.ferg.com>
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D840758CD8B@fei0018m001.hq.ferg.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rod.Madden@ferguson.com wrote:
> I am using Lucene 2.0 and trying to use the MultiFieldQueryParser 
> in my search.
>  
> I want to limit my search to documents which have "silly"
> in "field1" ...within that subset of documents, I want documents which
> have
> "example" in "field2" OR "field3"
>  
> The code fragment below is my attempt at this ...code blows
> on the : Query query = qp.parse(... 
> statement ...
>  
> Besides blowing, I believe that the MUST / MUST for field2 and field3
> is inappropriate ...I really want to say ..if field1 has "silly"
> return documents with "example" in field2 OR field3.
> 
> Any suggestions for accomplishing this ? 
>  
> Someone suggested BooleanQuery but I was not sure how to merge
> that concept in with the MultiFieldQueryParser ..

I can think of two ways to do what you want, one with a parsed query and one 
without.  With a parsed query:

Query q = QueryParser.parse("+field1:silly +(field2:example field3:example)",
                             "field1", new StopAnalyzer());

If you already know the exact structure of the query, then you can just build 
it up yourself, i.e. without the QueryParser, like so:

TermQuery t1 = new TermQuery(new Term("field1", "silly"));
TermQuery t2 = new TermQuery(new Term("field2", "example"));
TermQuery t3 = new TermQuery(new Term("field3", "example"));
Query subq = new BooleanQuery();
subq.add(t2, BooleanClause.Occur.Should);
subq.add(t3, BooleanClause.Occur.Should);
Query q = new BooleanQuery();
q.add(t1,   BooleanClause.Occur.MUST);
q.add(subq, BooleanClause.Occur.MUST);

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 03:08:43 2006
Return-Path: <java-user-return-22039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69096 invoked from network); 17 Jul 2006 03:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 03:08:42 -0000
Received: (qmail 68178 invoked by uid 500); 17 Jul 2006 03:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67484 invoked by uid 500); 17 Jul 2006 03:08:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67473 invoked by uid 99); 17 Jul 2006 03:08:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 20:08:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=DNS_FROM_RFC_POST,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.207.58.136] (HELO mail2.mailrooter.com) (65.207.58.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 16 Jul 2006 20:08:27 -0700
Received: from fei0018m031.hq.ferg.com ([172.16.105.131])
 by mail2.mailrooter.com (SMSSMTP 4.1.9.35) with SMTP id M2006071623025411579
 for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 23:02:54 -0400
Received: from fei0018m001.hq.ferg.com ([172.16.105.14]) by fei0018m031.hq.ferg.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Sun, 16 Jul 2006 23:08:03 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: MultiField Query
Date: Sun, 16 Jul 2006 23:08:03 -0400
Message-ID: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: MultiField Query
Thread-Index: AcapNI1Xw2AalVoJSn+HaO48BZvNGgAGNtMQ
From: <Rod.Madden@ferguson.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Jul 2006 03:08:03.0950 (UTC) FILETIME=[380C20E0:01C6A94E]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20
> I can think of two ways to do what you want, one with a parsed query
and one without.  With a parsed query:

> Query q =3D QueryParser.parse("+field1:silly +(field2:example
field3:example)",
>                             "field1", new StopAnalyzer());

When I try this ( using Lucene 2.0 API ) I get the error:
"..The method parse(String) is not applicable for arguments (String,
String, StopAnalyzer)


> If you already know the exact structure of the query, then you can
just build it up yourself, i.e. without the=20
> QueryParser, like so:

> TermQuery t1 =3D new TermQuery(new Term("field1", "silly")); TermQuery
t2 =3D new TermQuery(new Term("field2", "example")); > TermQuery t3 =3D =
new
TermQuery(new Term("field3", "example")); Query subq =3D new
BooleanQuery();=20
> subq.add(t2, BooleanClause.Occur.Should); subq.add(t3,
BooleanClause.Occur.Should);=20
> Query q =3D new BooleanQuery();
> q.add(t1,   BooleanClause.Occur.MUST);
> q.add(subq, BooleanClause.Occur.MUST);

When I try this I get the error:
The method add(TermQuery, BooleanClause.Occur) is undefined for type
Query

Could this be a 2.0 issue ?

Rod


-----Original Message-----
From: Michael D. Curtin [mailto:mike@curtin.com]=20
Sent: Sunday, July 16, 2006 8:04 PM
To: java-user@lucene.apache.org
Subject: Re: MultiField Query

Rod.Madden@ferguson.com wrote:
> I am using Lucene 2.0 and trying to use the MultiFieldQueryParser in=20
> my search.
> =20
> I want to limit my search to documents which have "silly"
> in "field1" ...within that subset of documents, I want documents which

> have "example" in "field2" OR "field3"
> =20
> The code fragment below is my attempt at this ...code blows on the :=20
> Query query =3D qp.parse(...
> statement ...
> =20
> Besides blowing, I believe that the MUST / MUST for field2 and field3=20
> is inappropriate ...I really want to say ..if field1 has "silly"
> return documents with "example" in field2 OR field3.
>=20
> Any suggestions for accomplishing this ?=20
> =20
> Someone suggested BooleanQuery but I was not sure how to merge that=20
> concept in with the MultiFieldQueryParser ..

I can think of two ways to do what you want, one with a parsed query and
one without.  With a parsed query:

Query q =3D QueryParser.parse("+field1:silly +(field2:example
field3:example)",
                             "field1", new StopAnalyzer());

If you already know the exact structure of the query, then you can just
build it up yourself, i.e. without the QueryParser, like so:

TermQuery t1 =3D new TermQuery(new Term("field1", "silly")); TermQuery =
t2
=3D new TermQuery(new Term("field2", "example")); TermQuery t3 =3D new
TermQuery(new Term("field3", "example")); Query subq =3D new
BooleanQuery(); subq.add(t2, BooleanClause.Occur.Should); subq.add(t3,
BooleanClause.Occur.Should); Query q =3D new BooleanQuery();
q.add(t1,   BooleanClause.Occur.MUST);
q.add(subq, BooleanClause.Occur.MUST);

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 06:27:50 2006
Return-Path: <java-user-return-22040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17947 invoked from network); 17 Jul 2006 06:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 06:27:49 -0000
Received: (qmail 95162 invoked by uid 500); 17 Jul 2006 06:27:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95132 invoked by uid 500); 17 Jul 2006 06:27:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95116 invoked by uid 99); 17 Jul 2006 06:27:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 23:27:43 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Jul 2006 23:27:35 -0700
Received: by nf-out-0910.google.com with SMTP id a25so156929nfc
        for <java-user@lucene.apache.org>; Sun, 16 Jul 2006 23:27:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=cREkiEJZHd0kwTdPqTkv9g6OCg7rQ/vNuhUX5jE3SCJwngwlUEoYWw6upwU9iJ3xF16XV+5GOeUHbhghWE8WM2fDG3eNy/WvbKItVl+OkvHHbF78byYzk+Cs5+obf1ZJHm+NTWHtSS96b90Wt2FoJkxxHVlyjw/LEYfZyjDcOrE=
Received: by 10.78.139.5 with SMTP id m5mr699887hud;
        Sun, 16 Jul 2006 23:27:07 -0700 (PDT)
Received: by 10.78.155.3 with HTTP; Sun, 16 Jul 2006 23:27:07 -0700 (PDT)
Message-ID: <5d5204510607162327x69b5d908uc860e7b26f62987@mail.gmail.com>
Date: Mon, 17 Jul 2006 14:27:07 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: how to use BNF
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65454_33272807.1153117627906"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_65454_33272807.1153117627906
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

i wanna use "+","-","and","or","not"

"*"

------=_Part_65454_33272807.1153117627906--

From java-user-return-22041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 11:58:45 2006
Return-Path: <java-user-return-22041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57571 invoked from network); 17 Jul 2006 11:58:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 11:58:45 -0000
Received: (qmail 98406 invoked by uid 500); 17 Jul 2006 11:58:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98375 invoked by uid 500); 17 Jul 2006 11:58:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98364 invoked by uid 99); 17 Jul 2006 11:58:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 04:58:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.158.62.107] (HELO ws6-4.us4.outblaze.com) (205.158.62.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Jul 2006 04:58:36 -0700
Received: (qmail 29045 invoked from network); 17 Jul 2006 11:58:15 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.4.148)
  by ws6-4.us4.outblaze.com with SMTP; 17 Jul 2006 11:58:15 -0000
Message-ID: <44BB7B57.1020309@curtin.com>
Date: Mon, 17 Jul 2006 07:58:15 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MultiField Query
References: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com>
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rod.Madden@ferguson.com wrote:
> When I try this ( using Lucene 2.0 API ) I get the error:
> "..The method parse(String) is not applicable for arguments (String,
> String, StopAnalyzer)
> 
> ...
> 
> When I try this I get the error:
> The method add(TermQuery, BooleanClause.Occur) is undefined for type
> Query
> 
> Could this be a 2.0 issue ?

Could be.  My system is running 1.4.3.  There probably are similar calls in 
2.0; check the javadocs.  Or maybe somebody else on the list can translate ...

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 13:00:08 2006
Return-Path: <java-user-return-22042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81689 invoked from network); 17 Jul 2006 13:00:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 13:00:07 -0000
Received: (qmail 47225 invoked by uid 500); 17 Jul 2006 12:59:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47202 invoked by uid 500); 17 Jul 2006 12:59:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47191 invoked by uid 99); 17 Jul 2006 12:59:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 05:59:59 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 05:59:58 -0700
Received: by py-out-1112.google.com with SMTP id z59so1449493pyg
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 05:59:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=VaRK48Pq8QIGAbz5k3T3azqllNSzgSNBr4JVjtuFZVa1Sj5WRGQ+hbaCekiDfKyGJIFM0kXyos6lFpRZ1vE9JASsqoSZhXEyZzpy1sXFUjKHpqyuDdJzi24FeUZssMIjWSU9TIhMfZsGjBDj+oWPnkPOk1SjTOKnXRUBNtKYr34=
Received: by 10.35.26.14 with SMTP id d14mr4000139pyj;
        Mon, 17 Jul 2006 05:59:38 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Mon, 17 Jul 2006 05:59:37 -0700 (PDT)
Message-ID: <359a92830607170559j65eac3dbs18bc202edcee1fdd@mail.gmail.com>
Date: Mon, 17 Jul 2006 08:59:37 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiField Query
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2461_22976723.1153141177996"
References: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2461_22976723.1153141177996
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm pretty sure your problem is

Query q = new BooleanQuery...

should be

BooleanQuery q = new BooleanQuery...


Best
Erick

------=_Part_2461_22976723.1153141177996--

From java-user-return-22043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 13:13:00 2006
Return-Path: <java-user-return-22043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86454 invoked from network); 17 Jul 2006 13:13:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 13:13:00 -0000
Received: (qmail 75539 invoked by uid 500); 17 Jul 2006 13:12:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75517 invoked by uid 500); 17 Jul 2006 13:12:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75506 invoked by uid 99); 17 Jul 2006 13:12:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 06:12:53 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 06:12:52 -0700
Received: by py-out-1112.google.com with SMTP id z59so1453630pyg
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 06:12:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RKtYC7oK5TUwWzgIvjlZkkv/BCx84yz8eghPhcxQb76M+c8ta6nnFRNW4AfIdzTF3n84PUZdabd7ig7LxYFBsjHQFKFSejGrRNUxBJ52cWE7DYqnZIFB1nEglk/Cr8e6j2MrG0xmHO3AafeyDjnCn/m4c36QAw9an4wDm0d5wMQ=
Received: by 10.35.41.14 with SMTP id t14mr4013073pyj;
        Mon, 17 Jul 2006 06:12:32 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Mon, 17 Jul 2006 06:12:32 -0700 (PDT)
Message-ID: <359a92830607170612u4cecab41h889e97499133a3c7@mail.gmail.com>
Date: Mon, 17 Jul 2006 09:12:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MultiField Query
In-Reply-To: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2754_23673373.1153141952094"
References: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2754_23673373.1153141952094
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

P.S.

Are you sure you're looking at the 2.0 docs? I don't see any
Query.parse(String,
String, Analyzer) in the 2.0 docs. Rather, I see
QueryParser(String field, Analyzer analyzer) and a non-static method
parse(String parse).

Best
Erick

------=_Part_2754_23673373.1153141952094--

From java-user-return-22044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 13:18:32 2006
Return-Path: <java-user-return-22044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87707 invoked from network); 17 Jul 2006 13:18:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 13:18:32 -0000
Received: (qmail 87421 invoked by uid 500); 17 Jul 2006 13:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87393 invoked by uid 500); 17 Jul 2006 13:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87381 invoked by uid 99); 17 Jul 2006 13:18:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 06:18:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO datachange01.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 06:18:16 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: PrefixQuery rewrite() bug, ignores max clause count
Date: Mon, 17 Jul 2006 09:18:53 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF014165E0@datachange01.dataconversions.biz>
In-Reply-To: <Pine.LNX.4.58.0607141607570.3459@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: PrefixQuery rewrite() bug, ignores max clause count
Thread-Index: Acanm65mm4y/Z6P6Qr2e7ZI9o0Te7gCBUZQA
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: 1) colorzing your mail doesn't play nicely with the mailing list ...
: sending "diffs" is the prefered way to show potential changes to the
code.

So I discovered on sending the message.  :)

: 2) assuming i understand what it is you've changed, you've "worked
arround" the TooManyClausesException in a somewhat complicated way (you
could just as : easily increase the maxClauseCount and save yourslef
some
: headache) ...=20

Actually, we have increased the maxClauseCount in our production code to
address this problem.  (We don't want to maintain a custom version of
Lucene.)

: by doing this you bypass the whole point of having a
: maClauseCount: to prevent a query that will consume too many resources
(namely RAM and query execution time) from being constructed.

I understand the concern for resources, but by throwing an exception you
have also preempted a legitimate query.  How then should one go about
performing a query for all document where a field begins with char X?
We have 60,000+ documents, of which B, S and T seem to be the most
common initial char (just over 7000 document each).  We are building an
'index' with the search results, thus the need for a query like:
"name:b*"

IMHO, both your concern for resources and the ability to query for
"name:b*" are legitimate.  Perhaps PrefixeQuery should be able to
gracefully degrade when it hits resource limits.  I admit I am at the
limit of my Lucene knowledge here, but I assume that rewrite() is an
optimization of the query and can be skipped (with some additional code)
at the cost of performance.=20

: 3) your change modifies the core impacts from each of the Terms that
match the prefix ... if you don't care about the score impacts from the
terms, then : there are other options.  Solr has a PrefixFilter class
which can be wrapped in a ConstantScoreQuery to support prefix queries
regardless of your term : : distribution.

We do not rank or score results at all (Lucene is a high speed index for
us).  As a result, I am blissfully ignorant of scoring results.  Out of
curiosity though, does the depth of a term in a query tree affect its
score?

I will take a look at PrefixFilter and ConstantScoreQuery.

Thanks!
Russell

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 13:23:54 2006
Return-Path: <java-user-return-22045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95616 invoked from network); 17 Jul 2006 13:23:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 13:23:54 -0000
Received: (qmail 4408 invoked by uid 500); 17 Jul 2006 13:23:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4372 invoked by uid 500); 17 Jul 2006 13:23:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4361 invoked by uid 99); 17 Jul 2006 13:23:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 06:23:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [205.158.62.107] (HELO ws6-4.us4.outblaze.com) (205.158.62.107)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Jul 2006 06:23:47 -0700
Received: (qmail 24645 invoked from network); 17 Jul 2006 13:23:25 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@68.73.4.148)
  by ws6-4.us4.outblaze.com with SMTP; 17 Jul 2006 13:23:25 -0000
Message-ID: <44BB8F4E.5080001@curtin.com>
Date: Mon, 17 Jul 2006 09:23:26 -0400
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: MultiField Query
References: <8C60F95D154DD34AA3AD319A5A093D840758CD8D@fei0018m001.hq.ferg.com> <359a92830607170559j65eac3dbs18bc202edcee1fdd@mail.gmail.com>
In-Reply-To: <359a92830607170559j65eac3dbs18bc202edcee1fdd@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick Erickson wrote:

> I'm pretty sure your problem is
> 
> Query q = new BooleanQuery...
> 
> should be
> 
> BooleanQuery q = new BooleanQuery...

Good catch!  That's why the add() method is barfing.  The parse() thing, 
though, is probably a change to the QueryParser interface for 2.0.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 13:54:31 2006
Return-Path: <java-user-return-22046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11953 invoked from network); 17 Jul 2006 13:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 13:54:30 -0000
Received: (qmail 93378 invoked by uid 500); 17 Jul 2006 13:54:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93355 invoked by uid 500); 17 Jul 2006 13:54:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93344 invoked by uid 99); 17 Jul 2006 13:54:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 06:54:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of aserba@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 06:54:23 -0700
Received: by nf-out-0910.google.com with SMTP id a25so243327nfc
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 06:54:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=O2jyUMfM/4BNK5GBNTCizeJ8ohcqoylNcoRQuc+NbW2AysJ2zhDFm4NaSOAdhVL9Emv+p4UyWPwbcdpIDrDtzd67dXo63K8Xmpr7y8gxWR+4OeXp5JGXJYqvrLTg35lHMPs8eW6wIB+GuuRl8GP1rKGygnqn/X1kvuxqqb355iU=
Received: by 10.78.185.7 with SMTP id i7mr844239huf;
        Mon, 17 Jul 2006 06:54:01 -0700 (PDT)
Received: by 10.78.75.16 with HTTP; Mon, 17 Jul 2006 06:54:01 -0700 (PDT)
Message-ID: <3e8ef54f0607170654j17376ca4mad444c7d73db22a0@mail.gmail.com>
Date: Mon, 17 Jul 2006 17:54:01 +0400
From: "Aleksey Serba" <aserba@gmail.com>
To: java-user@lucene.apache.org, "Peter Keegan" <peterlkeegan@gmail.com>, 
	"Yonik Seeley" <yseeley@gmail.com>
Subject: Re: question about custom sort method
In-Reply-To: <3e8ef54f0607170650h73836d8fx239454d546d142b3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060512111446.3kxu2k5frk8ws8sg@webmail.service.emory.edu>
	 <73A6FDD3-E17B-4CF9-921F-B7C74AE09850@ehatchersolutions.com>
	 <e994873a0605171340v2e5dffe3t1333dc6fb6598650@mail.gmail.com>
	 <3e8ef54f0607170650h73836d8fx239454d546d142b3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi!

Peter, I have exactly the same situation described below.
- I have DistanceComparatorSource to sort results by distance from
specified spatial coordinates point. Point is different for each
query.
- I do not close Searcher after each query.
- I get "java.lang.OutOfMemoryError: Java heap space" after several
request. Using www.yourkit.com's profiler and research lucene source
code i've found sort comparators caching and there's no any options.

Peter, did you find the solution do not cache these sorting values?


Yonik, thank you for your suggestion, we use solr codebase already :)
To tell the truth, first time i thought this is solr caching problem (
i've modify SolrIndexSearcher to get lucene Searcher and search
directly without any solr caching )

I can't figure out how to use FunctionQuery - is there any wiki pages
/ examples or something?

Thanks

Alex

On 5/18/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> Suppose I have a custom sorting 'DocScoreComparator' for computing distances
> on each search hit from a specified coordinate (similar to the
> DistanceComparatorSource example in LIA). Assume that the 'specified
> coordinate' is different for each query. This means a new custom comparator
> must be created for each query, which is ok. However, Lucene caches the
> comparator even though it will never be reused. This could result in heavy
> memory usage if many queries are performed before the IndexReader is
> updated.
>
> Is there any way to avoid having lucene cache the custom sorting objects?
>
>

On 5/12/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> Yes, it does compute these distances for all the terms for the field
> specified, but only once (per IndexReader).  This is where the
> techniques Solr employs comes in real handy... warming up caches by
> running searches and sorts before putting a index into service.


On 5/12/06, Urvashi Gadi <ugadi@emory.edu> wrote:
> I am looking at DistanceComparatorSource class (for csutom sorting) and
> looks like it calculates the distance for each record in the index and
> not just the records returned from search, making the system very slow.
>
> Is my observation correct? Are there ways to optimize this process?
>
> Thanks,
> Urvashi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 14:10:35 2006
Return-Path: <java-user-return-22047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21027 invoked from network); 17 Jul 2006 14:10:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 14:10:34 -0000
Received: (qmail 58918 invoked by uid 500); 17 Jul 2006 14:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58891 invoked by uid 500); 17 Jul 2006 14:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58865 invoked by uid 99); 17 Jul 2006 14:10:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 07:10:16 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rafael.rossini@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 07:10:15 -0700
Received: by nf-out-0910.google.com with SMTP id a25so248073nfc
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 07:09:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jeanZQEWJPpU6IUZ9T2O1Vy7+92zT0kfiK/YswLuo+rIb5tM7BT+DQ2ZtQRVo5HCDYJSfAtZvl5pn3qTBMWSFhzjt+VGpHjIcGfN7uu/ZGM/gr4nGwg94s64Vo/OXcW9TdyjxwHkoqH4g3Kwh5Zm1KZS9a9I/7G+Xm/jKXm+PsY=
Received: by 10.78.177.3 with SMTP id z3mr855845hue;
        Mon, 17 Jul 2006 07:09:53 -0700 (PDT)
Received: by 10.78.44.9 with HTTP; Mon, 17 Jul 2006 07:09:53 -0700 (PDT)
Message-ID: <a8d89b3b0607170709w33bae993peb978ec5a18a3ac@mail.gmail.com>
Date: Mon, 17 Jul 2006 11:09:53 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Problems with QueryParser
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3840_30501804.1153145393505"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3840_30501804.1153145393505
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all,

I=B4m using lucene 2.0.0 and I would like to generate a BooleanQuery from a
QueryParser. The problem is that when I parse a query like this: "(rafael
todor rossini)~2" the property of the BooleanQuery ,
minimumNumberShouldMatch is not setted properly. Is there a way of doing
that?

thanks in advance.

    Rossini

*


*

------=_Part_3840_30501804.1153145393505--

From java-user-return-22048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 14:55:13 2006
Return-Path: <java-user-return-22048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35541 invoked from network); 17 Jul 2006 14:55:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 14:55:13 -0000
Received: (qmail 47133 invoked by uid 500); 17 Jul 2006 14:55:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47095 invoked by uid 500); 17 Jul 2006 14:55:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47084 invoked by uid 99); 17 Jul 2006 14:55:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 07:55:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 07:55:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B7DC930EFCD5; Mon, 17 Jul 2006 10:54:44 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 4FD7C30EFCD4
	for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 10:54:33 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <3e8ef54f0607170654j17376ca4mad444c7d73db22a0@mail.gmail.com>
References: <20060512111446.3kxu2k5frk8ws8sg@webmail.service.emory.edu> <73A6FDD3-E17B-4CF9-921F-B7C74AE09850@ehatchersolutions.com> <e994873a0605171340v2e5dffe3t1333dc6fb6598650@mail.gmail.com> <3e8ef54f0607170650h73836d8fx239454d546d142b3@mail.gmail.com> <3e8ef54f0607170654j17376ca4mad444c7d73db22a0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <640545FD-9175-430A-A2B5-DF6CC2CBC42D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: question about custom sort method
Date: Mon, 17 Jul 2006 10:54:30 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is a known issue with the DistanceComparatorSource in the  
"Lucene in Action" source code:

	<http://www.lucenebook.com/blog/errata/2006/03/01/memory_leak.html>

Maybe this advice will help fix the issue you're having?

	Erik


On Jul 17, 2006, at 9:54 AM, Aleksey Serba wrote:

> Hi!
>
> Peter, I have exactly the same situation described below.
> - I have DistanceComparatorSource to sort results by distance from
> specified spatial coordinates point. Point is different for each
> query.
> - I do not close Searcher after each query.
> - I get "java.lang.OutOfMemoryError: Java heap space" after several
> request. Using www.yourkit.com's profiler and research lucene source
> code i've found sort comparators caching and there's no any options.
>
> Peter, did you find the solution do not cache these sorting values?
>
>
> Yonik, thank you for your suggestion, we use solr codebase already :)
> To tell the truth, first time i thought this is solr caching problem (
> i've modify SolrIndexSearcher to get lucene Searcher and search
> directly without any solr caching )
>
> I can't figure out how to use FunctionQuery - is there any wiki pages
> / examples or something?
>
> Thanks
>
> Alex
>
> On 5/18/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
>> Suppose I have a custom sorting 'DocScoreComparator' for computing  
>> distances
>> on each search hit from a specified coordinate (similar to the
>> DistanceComparatorSource example in LIA). Assume that the 'specified
>> coordinate' is different for each query. This means a new custom  
>> comparator
>> must be created for each query, which is ok. However, Lucene  
>> caches the
>> comparator even though it will never be reused. This could result  
>> in heavy
>> memory usage if many queries are performed before the IndexReader is
>> updated.
>>
>> Is there any way to avoid having lucene cache the custom sorting  
>> objects?
>>
>>
>
> On 5/12/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>> Yes, it does compute these distances for all the terms for the field
>> specified, but only once (per IndexReader).  This is where the
>> techniques Solr employs comes in real handy... warming up caches by
>> running searches and sorts before putting a index into service.
>
>
> On 5/12/06, Urvashi Gadi <ugadi@emory.edu> wrote:
>> I am looking at DistanceComparatorSource class (for csutom  
>> sorting) and
>> looks like it calculates the distance for each record in the index  
>> and
>> not just the records returned from search, making the system very  
>> slow.
>>
>> Is my observation correct? Are there ways to optimize this process?
>>
>> Thanks,
>> Urvashi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 15:38:01 2006
Return-Path: <java-user-return-22049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52669 invoked from network); 17 Jul 2006 15:38:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 15:38:01 -0000
Received: (qmail 19514 invoked by uid 500); 17 Jul 2006 15:37:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19484 invoked by uid 500); 17 Jul 2006 15:37:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19468 invoked by uid 99); 17 Jul 2006 15:37:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 08:37:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of aserba@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 08:37:52 -0700
Received: by nf-out-0910.google.com with SMTP id q29so262nfc
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 08:37:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=F85Wm45dPHlHl+O1WEKfLj8PgZhe/8Dp2UiX/JckjpNFWxAwtUC7Lrd5Y8ksMxQ34FBglxxNT3gXF6h25Emgdvz7aOmO2OwkhLBKrRrO+cEbMmyu59foisLPxrGwioNDx8zKDVgYaNvzKNHOYIsrfGMcjce8Z2F5P0zIsORm/fk=
Received: by 10.78.175.14 with SMTP id x14mr888366hue;
        Mon, 17 Jul 2006 08:37:31 -0700 (PDT)
Received: by 10.78.75.16 with HTTP; Mon, 17 Jul 2006 08:37:30 -0700 (PDT)
Message-ID: <3e8ef54f0607170837x3d7dd483i201af1280846e68f@mail.gmail.com>
Date: Mon, 17 Jul 2006 19:37:30 +0400
From: "Aleksey Serba" <aserba@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: question about custom sort method
In-Reply-To: <640545FD-9175-430A-A2B5-DF6CC2CBC42D@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060512111446.3kxu2k5frk8ws8sg@webmail.service.emory.edu>
	 <73A6FDD3-E17B-4CF9-921F-B7C74AE09850@ehatchersolutions.com>
	 <e994873a0605171340v2e5dffe3t1333dc6fb6598650@mail.gmail.com>
	 <3e8ef54f0607170650h73836d8fx239454d546d142b3@mail.gmail.com>
	 <3e8ef54f0607170654j17376ca4mad444c7d73db22a0@mail.gmail.com>
	 <640545FD-9175-430A-A2B5-DF6CC2CBC42D@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik,

I think Brian have the problem with continuous caching the same
sorting values, i.e. he has a few points to calc distance from.
In such case you can implement equals and hashCode methods based on
point value and you'll have one cached comparator per different center
point value.


On 7/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> There is a known issue with the DistanceComparatorSource in the
> "Lucene in Action" source code:
>
>         <http://www.lucenebook.com/blog/errata/2006/03/01/memory_leak.html>
>
> Maybe this advice will help fix the issue you're having?
>
>         Erik
>
>
> On Jul 17, 2006, at 9:54 AM, Aleksey Serba wrote:
>
> > Hi!
> >
> > Peter, I have exactly the same situation described below.
> > - I have DistanceComparatorSource to sort results by distance from
> > specified spatial coordinates point. Point is different for each
> > query.
> > - I do not close Searcher after each query.
> > - I get "java.lang.OutOfMemoryError: Java heap space" after several
> > request. Using www.yourkit.com's profiler and research lucene source
> > code i've found sort comparators caching and there's no any options.
> >
> > Peter, did you find the solution do not cache these sorting values?
> >
> >
> > Yonik, thank you for your suggestion, we use solr codebase already :)
> > To tell the truth, first time i thought this is solr caching problem (
> > i've modify SolrIndexSearcher to get lucene Searcher and search
> > directly without any solr caching )
> >
> > I can't figure out how to use FunctionQuery - is there any wiki pages
> > / examples or something?
> >
> > Thanks
> >
> > Alex
> >
> > On 5/18/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> >> Suppose I have a custom sorting 'DocScoreComparator' for computing
> >> distances
> >> on each search hit from a specified coordinate (similar to the
> >> DistanceComparatorSource example in LIA). Assume that the 'specified
> >> coordinate' is different for each query. This means a new custom
> >> comparator
> >> must be created for each query, which is ok. However, Lucene
> >> caches the
> >> comparator even though it will never be reused. This could result
> >> in heavy
> >> memory usage if many queries are performed before the IndexReader is
> >> updated.
> >>
> >> Is there any way to avoid having lucene cache the custom sorting
> >> objects?
> >>
> >>
> >
> > On 5/12/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >> Yes, it does compute these distances for all the terms for the field
> >> specified, but only once (per IndexReader).  This is where the
> >> techniques Solr employs comes in real handy... warming up caches by
> >> running searches and sorts before putting a index into service.
> >
> >
> > On 5/12/06, Urvashi Gadi <ugadi@emory.edu> wrote:
> >> I am looking at DistanceComparatorSource class (for csutom
> >> sorting) and
> >> looks like it calculates the distance for each record in the index
> >> and
> >> not just the records returned from search, making the system very
> >> slow.
> >>
> >> Is my observation correct? Are there ways to optimize this process?
> >>
> >> Thanks,
> >> Urvashi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 16:23:40 2006
Return-Path: <java-user-return-22050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68056 invoked from network); 17 Jul 2006 16:23:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 16:23:39 -0000
Received: (qmail 82894 invoked by uid 500); 17 Jul 2006 16:23:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82762 invoked by uid 500); 17 Jul 2006 16:23:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82709 invoked by uid 99); 17 Jul 2006 16:23:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:23:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 09:23:02 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G2Vrm-0001p8-5t
	for java-user@lucene.apache.org; Mon, 17 Jul 2006 09:22:42 -0700
Message-ID: <5363581.post@talk.nabble.com>
Date: Mon, 17 Jul 2006 09:07:51 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Part of Index (spezial Field) into Memory
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

i have a bigger index with around 10 GB. The most used field is the
"Name"-Field. So is there way to put a part of the index (maybe a special
field) into memory and the rest on disk ?

Thanks,
Neils
-- 
View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5363581
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 17:14:15 2006
Return-Path: <java-user-return-22051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83917 invoked from network); 17 Jul 2006 17:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:14:14 -0000
Received: (qmail 80977 invoked by uid 500); 17 Jul 2006 17:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80951 invoked by uid 500); 17 Jul 2006 17:14:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80940 invoked by uid 99); 17 Jul 2006 17:14:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:14:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:14:07 -0700
Received: by py-out-1112.google.com with SMTP id d80so1730553pyd
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 10:13:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=g+Nj7GYKBYNTjtNtlAtK7stsL3Dgvmb9fbXYV6cyC559tUsWhH5jEWKf0uMpHP3fy8PIUTlLuSSAingXyMXPuEdNtr0bof4jzt+ykxsJJ5aCh87u9KMYrX2vcQUaXj3zDGcfrmASK4shAqdjuuCPEvVzIDPuUk+gI/z4HxmyMUU=
Received: by 10.35.106.18 with SMTP id i18mr568043pym;
        Mon, 17 Jul 2006 10:13:47 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 17 Jul 2006 10:13:47 -0700 (PDT)
Message-ID: <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com>
Date: Mon, 17 Jul 2006 13:13:47 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <5363581.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5363581.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe separate indicies in conjunction with ParallelReader?

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

On 7/17/06, neils <neils@gmx.net> wrote:
>
> Hi,
>
> i have a bigger index with around 10 GB. The most used field is the
> "Name"-Field. So is there way to put a part of the index (maybe a special
> field) into memory and the rest on disk ?
>
> Thanks,
> Neils

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 17:20:46 2006
Return-Path: <java-user-return-22052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85653 invoked from network); 17 Jul 2006 17:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:20:46 -0000
Received: (qmail 96317 invoked by uid 500); 17 Jul 2006 17:20:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96290 invoked by uid 500); 17 Jul 2006 17:20:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96279 invoked by uid 99); 17 Jul 2006 17:20:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:20:39 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:20:39 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G2WlW-0003WE-WF
	for java-user@lucene.apache.org; Mon, 17 Jul 2006 10:20:19 -0700
Message-ID: <5364830.post@talk.nabble.com>
Date: Mon, 17 Jul 2006 10:20:18 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5363581.post@talk.nabble.com> <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hm,

so if following is possible than it would be great:

I have a table in SQL-Database with following columns: ID, Name, Forename,
Street, Phonenumber.

So i would make index for each column (ID will included in all indizies). 

After this i have 4 indicies. Name (in memory), Forename (on Disk), Street
(on Disk), Phonenumber (on Disk).

When now somebody search for name "kos" in the street "teststreet" can you
use parallelreader for this and how ?

Thank you very much!
Neils
-- 
View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5364830
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 17:34:49 2006
Return-Path: <java-user-return-22053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91590 invoked from network); 17 Jul 2006 17:34:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:34:49 -0000
Received: (qmail 26634 invoked by uid 500); 17 Jul 2006 17:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26160 invoked by uid 500); 17 Jul 2006 17:34:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26149 invoked by uid 99); 17 Jul 2006 17:34:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:34:42 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:34:42 -0700
Received: by py-out-1112.google.com with SMTP id d80so1738352pyd
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 10:34:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=j7LKy9LuOciir5N7xKOvIctg/sRPXsHNSBK6fxTew+K0Gn1JL78BbP7FfdgIKqPGNSclahvH92QOEd3BkjKw4hhGj19premz1156gHw0DFmj46LsadzPyU6fuqWr9BGbIpiXTaquV9GUIAB+u0F7QsUoTWeYGBhwA0s6CIPB1B0=
Received: by 10.35.61.2 with SMTP id o2mr4321172pyk;
        Mon, 17 Jul 2006 10:34:21 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 17 Jul 2006 10:34:21 -0700 (PDT)
Message-ID: <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com>
Date: Mon, 17 Jul 2006 13:34:21 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <5364830.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5363581.post@talk.nabble.com>
	 <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com>
	 <5364830.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

First, unless you know that the Name field being on disk is a
bottleneck, start simple.  Put everything in a single index.

If you really need the "Name" part to be entirely in memory, then
create two indicies, one with all of your fields except Name and
another with Name only.  Then load the Name index into a RAMDirectory,
and create a ParallelReader over the two different indicies.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server


On 7/17/06, neils <neils@gmx.net> wrote:
>
> Hm,
>
> so if following is possible than it would be great:
>
> I have a table in SQL-Database with following columns: ID, Name, Forename,
> Street, Phonenumber.
>
> So i would make index for each column (ID will included in all indizies).
>
> After this i have 4 indicies. Name (in memory), Forename (on Disk), Street
> (on Disk), Phonenumber (on Disk).
>
> When now somebody search for name "kos" in the street "teststreet" can you
> use parallelreader for this and how ?
>
> Thank you very much!
> Neils

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 17:43:24 2006
Return-Path: <java-user-return-22054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95188 invoked from network); 17 Jul 2006 17:43:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:43:24 -0000
Received: (qmail 43510 invoked by uid 500); 17 Jul 2006 17:43:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43485 invoked by uid 500); 17 Jul 2006 17:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43474 invoked by uid 99); 17 Jul 2006 17:43:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:43:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:43:17 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G2X7R-00046B-HQ
	for java-user@lucene.apache.org; Mon, 17 Jul 2006 10:42:57 -0700
Message-ID: <5365216.post@talk.nabble.com>
Date: Mon, 17 Jul 2006 10:42:57 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5363581.post@talk.nabble.com> <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com> <5364830.post@talk.nabble.com> <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Ok, that sound really good. But something is not really clear to me and maybe
you can bring up a little light in the dark :-))

I have two indicies now:

1. With ID, Name
2. With ID, Forename, Street, Phonenumber

When i perform query with parallelreader how do lucene gets the concurrent
documents which results of both indices? Do i have to specifie somewhere
that the "ID"field is the relation???

Thanks,
Neils :-))
-- 
View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5365216
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 17:48:38 2006
Return-Path: <java-user-return-22055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96055 invoked from network); 17 Jul 2006 17:48:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:48:37 -0000
Received: (qmail 47648 invoked by uid 500); 17 Jul 2006 17:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47617 invoked by uid 500); 17 Jul 2006 17:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47606 invoked by uid 99); 17 Jul 2006 17:48:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:48:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:48:31 -0700
Received: by py-out-1112.google.com with SMTP id d80so1743573pyd
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 10:48:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cqKdTTl7YFJ1y8mOrF9xdUrkTw2urPb/zB93ux96h+cXy6497SyTyoyd149PGuZAywrEdApsKDkYtP5NxS6NzGM8bQZGbxB25usag1z9CGE+4cmQI2FHuq5vnXioWewW165e6wJuwcYQ/Y0RtAfoV5sjK5wzIewtH+naq8zyi1Y=
Received: by 10.35.22.17 with SMTP id z17mr4338270pyi;
        Mon, 17 Jul 2006 10:48:11 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 17 Jul 2006 10:48:10 -0700 (PDT)
Message-ID: <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com>
Date: Mon, 17 Jul 2006 13:48:10 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <5365216.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5363581.post@talk.nabble.com>
	 <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com>
	 <5364830.post@talk.nabble.com>
	 <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com>
	 <5365216.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/17/06, neils <neils@gmx.net> wrote:
> 1. With ID, Name
> 2. With ID, Forename, Street, Phonenumber
>
> When i perform query with parallelreader how do lucene gets the concurrent
> documents which results of both indices? Do i have to specifie somewhere
> that the "ID"field is the relation???

It's complicated :-) that's why I suggested going with a normal index
first.  ParallelReader is "expert" usage IMO, and you have to
understand more of the Lucene internal workings to get it right.

You don't need "ID" in each index... and Lucene doesn't do any relational stuff.
To use ParallelReader, you need to make sure that the *internal*
lucene docids match up between the two indicies.  You do that by doing
adds and deletes in the same exact order on both indicies, or by
completely reindixing one of them while walking through the other in
docid order.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 17:54:13 2006
Return-Path: <java-user-return-22056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97938 invoked from network); 17 Jul 2006 17:54:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 17:54:13 -0000
Received: (qmail 58269 invoked by uid 500); 17 Jul 2006 17:54:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57932 invoked by uid 500); 17 Jul 2006 17:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57920 invoked by uid 99); 17 Jul 2006 17:54:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:54:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 10:54:05 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G2XHt-0004Mu-0W
	for java-user@lucene.apache.org; Mon, 17 Jul 2006 10:53:45 -0700
Message-ID: <5365363.post@talk.nabble.com>
Date: Mon, 17 Jul 2006 10:53:44 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5363581.post@talk.nabble.com> <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com> <5364830.post@talk.nabble.com> <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com> <5365216.post@talk.nabble.com> <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


ahhhh, ok i understand.

So when i loop thru my Databasetable i write two indicies the same time.
One for the name index, one for the other field in table. in that way i add
documents to the same time in both indicies and so they have to some
documentidentifiert.... right ?

Thanks a lot :-))
-- 
View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5365363
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 18:01:02 2006
Return-Path: <java-user-return-22057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 130 invoked from network); 17 Jul 2006 18:01:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 18:01:01 -0000
Received: (qmail 75421 invoked by uid 500); 17 Jul 2006 18:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75396 invoked by uid 500); 17 Jul 2006 18:00:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75381 invoked by uid 99); 17 Jul 2006 18:00:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:00:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 11:00:54 -0700
Received: by py-out-1112.google.com with SMTP id d80so1748253pyd
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 11:00:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sQKzHKaIwU/wwFEF5RS5FyUxoCfT9Woug6EwjrOph+y/CcTpisiXvRO5nqinOFKHtNnLafzghe8gl1s3FcZUhhsU3nbRu1ffQTbYB4e1NxCwJPDyEukDYICI/6sCXx6697xJCMBZycJKBCzQRxhKoCmQC6NAGikFAVxyrr2rO/w=
Received: by 10.35.90.20 with SMTP id s20mr4341949pyl;
        Mon, 17 Jul 2006 11:00:33 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 17 Jul 2006 11:00:33 -0700 (PDT)
Message-ID: <c68e39170607171100o68549f17i482dd0761bc67d35@mail.gmail.com>
Date: Mon, 17 Jul 2006 14:00:33 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <5365363.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5363581.post@talk.nabble.com>
	 <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com>
	 <5364830.post@talk.nabble.com>
	 <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com>
	 <5365216.post@talk.nabble.com>
	 <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com>
	 <5365363.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/17/06, neils <neils@gmx.net> wrote:
>
> ahhhh, ok i understand.
>
> So when i loop thru my Databasetable i write two indicies the same time.
> One for the name index, one for the other field in table. in that way i add
> documents to the same time in both indicies and so they have to some
> documentidentifiert.... right ?

Yep, that should work.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 19:00:12 2006
Return-Path: <java-user-return-22058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24618 invoked from network); 17 Jul 2006 19:00:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 19:00:11 -0000
Received: (qmail 87842 invoked by uid 500); 17 Jul 2006 19:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87819 invoked by uid 500); 17 Jul 2006 19:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87808 invoked by uid 99); 17 Jul 2006 19:00:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 12:00:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 12:00:04 -0700
Received: by py-out-1112.google.com with SMTP id d80so1770787pyd
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 11:59:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HmRxIvgrw7or0PMdVavE3IojQIAPORYi6Pir1sZ+329RSQoGWMNnGWgDPkkUqOBb3QhEs4lXnQdtcGIUZfbBywnEvQbNWcsucKgHjRkLKHrTXaJQctdGWvQoHVWtnTSo81KVgc+H9QfI19WF3Kffu7K+lBpKaXnVm2KpHjFmvLA=
Received: by 10.35.111.14 with SMTP id o14mr4411767pym;
        Mon, 17 Jul 2006 11:59:44 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 17 Jul 2006 11:59:44 -0700 (PDT)
Message-ID: <c68e39170607171159g6618071aoeb8525ea72acad04@mail.gmail.com>
Date: Mon, 17 Jul 2006 14:59:44 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: "Aleksey Serba" <aserba@gmail.com>
Subject: Re: question about custom sort method
Cc: java-user@lucene.apache.org
In-Reply-To: <3e8ef54f0607170654j17376ca4mad444c7d73db22a0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060512111446.3kxu2k5frk8ws8sg@webmail.service.emory.edu>
	 <73A6FDD3-E17B-4CF9-921F-B7C74AE09850@ehatchersolutions.com>
	 <e994873a0605171340v2e5dffe3t1333dc6fb6598650@mail.gmail.com>
	 <3e8ef54f0607170650h73836d8fx239454d546d142b3@mail.gmail.com>
	 <3e8ef54f0607170654j17376ca4mad444c7d73db22a0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/17/06, Aleksey Serba <aserba@gmail.com> wrote:
> Yonik, thank you for your suggestion, we use solr codebase already :)
> To tell the truth, first time i thought this is solr caching problem (
> i've modify SolrIndexSearcher to get lucene Searcher and search
> directly without any solr caching )
>
> I can't figure out how to use FunctionQuery - is there any wiki pages
> / examples or something?

For using it in Java code, there is the JavaDoc
http://incubator.apache.org/solr/docs/api/org/apache/solr/search/function/FunctionQuery.html

You would need to create your own ValueSource that would calculate the
distance between other ValueSources.

There is also a hack in SolrQueryParser that I never documented,
because it is a bit of a hack.  It can create FunctionQuerys for
built-in functions when it sees the magic field name _val_

So _val_:"myfield"  evaluates to the numeric value of myfield.
and you can do things like
_val_:"recip(rord(mydatefield),1000,1000,1)" to boost more recent
documents by a date field.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 19:41:06 2006
Return-Path: <java-user-return-22059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51428 invoked from network); 17 Jul 2006 19:41:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 19:41:06 -0000
Received: (qmail 76393 invoked by uid 500); 17 Jul 2006 19:41:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76271 invoked by uid 500); 17 Jul 2006 19:41:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76260 invoked by uid 99); 17 Jul 2006 19:41:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 12:41:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of vnguyen@ur.com designates 63.241.148.20 as permitted sender)
Received: from [63.241.148.20] (HELO ironport.ur.com) (63.241.148.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 12:40:59 -0700
Received: from unknown (HELO UREXCHSRV5.ur.com) ([10.6.134.35])
  by ironport.ur.com with ESMTP; 17 Jul 2006 15:40:37 -0400
X-OriginatingIP: 10.6.134.35
Received: from UREXCHVS3.ur.com ([10.6.138.34]) by UREXCHSRV5.ur.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 17 Jul 2006 15:40:27 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6A9D8.E031B2E8"
Subject: Question regarding URL encoding
Date: Mon, 17 Jul 2006 15:40:36 -0400
Message-ID: <0D6A3C278F4DC346B98DF4D2F1397E81137C470B@UREXCHVS3.ur.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question regarding URL encoding
Thread-Index: Acap2ZQ5g5Tl5LpBTASd7OoFe1iZ/Q==
From: "Van Nguyen" <vnguyen@ur.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Jul 2006 19:40:27.0320 (UTC) FILETIME=[DAA95B80:01C6A9D8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6A9D8.E031B2E8
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I'm trying to search my index using this search phrase:  1"

=20

That returns zero search results and throws a ParseException: Lexical =
error at line...  I can see that 1" is part of that particular document =
by searching that same document using a different search term.

=20

How should the Lucene index store characters like that - and characters =
with accents (foreign language: =E1, =ED, =E7, etc)?  Should it be =
encoded in UTF-8 before and stored that way:

=20

Fran=E7ois or Fran%c3%a7ois

1" or 1%22


------_=_NextPart_001_01C6A9D8.E031B2E8--

From java-user-return-22060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 21:46:08 2006
Return-Path: <java-user-return-22060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98721 invoked from network); 17 Jul 2006 21:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 21:46:07 -0000
Received: (qmail 52237 invoked by uid 500); 17 Jul 2006 21:46:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52202 invoked by uid 500); 17 Jul 2006 21:46:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52190 invoked by uid 99); 17 Jul 2006 21:46:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:46:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:46:00 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 33A135B784; Mon, 17 Jul 2006 14:45:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 2B7217F403
	for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 14:45:31 -0700 (PDT)
Date: Mon, 17 Jul 2006 14:45:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: PrefixQuery rewrite() bug, ignores max clause count
In-Reply-To: <E9BF7E0FD95D1143B399B129908A58FF014165E0@datachange01.dataconversions.biz>
Message-ID: <Pine.LNX.4.58.0607171434230.29532@hal.rescomp.berkeley.edu>
References: <E9BF7E0FD95D1143B399B129908A58FF014165E0@datachange01.dataconversions.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I understand the concern for resources, but by throwing an exception you
: have also preempted a legitimate query.  How then should one go about
: performing a query for all document where a field begins with char X?

that's the rub .. the "legitimacy" of the query is based on the index it
is executed against, and the maxClauseCount configured for that app .. a
prefix query for b* may be perfectly legitimate in a small index, but very
very bad in another ... that's what that exception is warning you about:
for your index, and your current maxClauseCount configuration, that query
is not legal.

: IMHO, both your concern for resources and the ability to query for
: "name:b*" are legitimate.  Perhaps PrefixeQuery should be able to
: gracefully degrade when it hits resource limits.  I admit I am at the

this has been discussed before, and the crux of the issue is that by
throwing this exception, PrefixQuery (or any other query that rewrites to
a BooleanQUery) is giving you the information you need to make your app
degrade in whatever way you want (gracefull or otherwise).  In apps like
Solr, RangeQueries are by based completely to prevent this problem,
PrefixQueries could likewise be avoided ... i believe Nutch may acutally
have something like what you describe (where if a query cases a toomancy
clauses exception, it rewrites that clause into a filter)

: limit of my Lucene knowledge here, but I assume that rewrite() is an
: optimization of the query and can be skipped (with some additional code)
: at the cost of performance.

nope.  In Lucene, there are two types of queries: primative, and
non-primative.  Primative queries are query classes that can create
Weights/Scorers to execute them, non-primate queries are just containers
that make it easy to model a particular type of search, but in the context
of particular index, "rewrite" themselves into primative queries.
(primative queries rewrite to themselves).  a PrefixQuery *must* rewrite
itself into a BooleanQuery containing one TermQuery for each term in the
index matching that prefix.

: We do not rank or score results at all (Lucene is a high speed index for
: us).  As a result, I am blissfully ignorant of scoring results.  Out of
: curiosity though, does the depth of a term in a query tree affect its
: score?

in a nut shell: yes.  not becuse "depth" really has any meaning to how
scoring works, but because the score produced by a boolean query when some
of it's clauses match depends on the number of clauses, so a boolean query
contaiing 10 terms scores differnetly then a boolean query cotaining 5
boolean queries each containing 2 term queries.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 21:49:03 2006
Return-Path: <java-user-return-22061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99305 invoked from network); 17 Jul 2006 21:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 21:49:03 -0000
Received: (qmail 55746 invoked by uid 500); 17 Jul 2006 21:48:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55709 invoked by uid 500); 17 Jul 2006 21:48:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55697 invoked by uid 99); 17 Jul 2006 21:48:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:48:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:48:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1001C5B78B; Mon, 17 Jul 2006 14:48:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id BF6137F403
	for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 14:48:31 -0700 (PDT)
Date: Mon, 17 Jul 2006 14:48:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Problems with QueryParser
In-Reply-To: <a8d89b3b0607170709w33bae993peb978ec5a18a3ac@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607171446000.29532@hal.rescomp.berkeley.edu>
References: <a8d89b3b0607170709w33bae993peb978ec5a18a3ac@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I=B4m using lucene 2.0.0 and I would like to generate a BooleanQuery from=
 a
: QueryParser. The problem is that when I parse a query like this: "(rafael
: todor rossini)~2" the property of the BooleanQuery ,
: minimumNumberShouldMatch is not setted properly. Is there a way of doing
: that?

if i remember correctly, when that feature was added to BooleanQuery, no
query parser support was written for it so a new task was cloned from
the orriginal to do this later ... yep, here it is...

=09https://issues.apache.org/jira/browse/LUCENE-466


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 21:53:36 2006
Return-Path: <java-user-return-22062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 987 invoked from network); 17 Jul 2006 21:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 21:53:36 -0000
Received: (qmail 66959 invoked by uid 500); 17 Jul 2006 21:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66931 invoked by uid 500); 17 Jul 2006 21:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66920 invoked by uid 99); 17 Jul 2006 21:53:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:53:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rafael.rossini@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:53:29 -0700
Received: by nf-out-0910.google.com with SMTP id m18so22202nfc
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 14:53:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kiHt9K7tAjC3KXvpGvWTNaAAydgP1l9PoQETxiHYv4wUmbcMibrTygAB2PEMQZyG99/UVQLAefhdKuemjS8Bh1X+w0AR3r1iG+AXwENSyzT+Uw8dAxtf0uDY93I4ckm5Gu/wwujHPzBwRpob8QdWG3ZP76K0csU6GUSW9K5dx+A=
Received: by 10.78.195.9 with SMTP id s9mr1161870huf;
        Mon, 17 Jul 2006 14:53:08 -0700 (PDT)
Received: by 10.78.44.9 with HTTP; Mon, 17 Jul 2006 14:53:07 -0700 (PDT)
Message-ID: <a8d89b3b0607171453t28e4b250xe858d0f9f485673@mail.gmail.com>
Date: Mon, 17 Jul 2006 18:53:07 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problems with QueryParser
In-Reply-To: <Pine.LNX.4.58.0607171446000.29532@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12135_15323519.1153173187743"
References: <a8d89b3b0607170709w33bae993peb978ec5a18a3ac@mail.gmail.com>
	 <Pine.LNX.4.58.0607171446000.29532@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12135_15323519.1153173187743
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Ok, thanks a lot.

On 7/17/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : I=B4m using lucene 2.0.0 and I would like to generate a BooleanQuery fr=
om
> a
> : QueryParser. The problem is that when I parse a query like this:
> "(rafael
> : todor rossini)~2" the property of the BooleanQuery ,
> : minimumNumberShouldMatch is not setted properly. Is there a way of doin=
g
> : that?
>
> if i remember correctly, when that feature was added to BooleanQuery, no
> query parser support was written for it so a new task was cloned from
> the orriginal to do this later ... yep, here it is...
>
>        https://issues.apache.org/jira/browse/LUCENE-466
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12135_15323519.1153173187743--

From java-user-return-22063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 17 21:55:34 2006
Return-Path: <java-user-return-22063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1285 invoked from network); 17 Jul 2006 21:55:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2006 21:55:34 -0000
Received: (qmail 69467 invoked by uid 500); 17 Jul 2006 21:55:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69430 invoked by uid 500); 17 Jul 2006 21:55:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69419 invoked by uid 99); 17 Jul 2006 21:55:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:55:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 14:55:28 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 6048C5B784; Mon, 17 Jul 2006 14:55:08 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 5C8907F403
	for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 14:55:08 -0700 (PDT)
Date: Mon, 17 Jul 2006 14:55:08 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Question regarding URL encoding
In-Reply-To: <0D6A3C278F4DC346B98DF4D2F1397E81137C470B@UREXCHVS3.ur.com>
Message-ID: <Pine.LNX.4.58.0607171451130.29532@hal.rescomp.berkeley.edu>
References: <0D6A3C278F4DC346B98DF4D2F1397E81137C470B@UREXCHVS3.ur.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



it sounds like you may be confused by a couple of differnet things:

1) you are getting a parse exception bcause the '"' character is
meaningful to the query parser ... it thinks you are trying to do a phraes
search but you haven't finished the phrase, try escaping it with \"

2) just because you've *stored* the value '1"' in a field in your document
doesn't mean that value was *indexed* with the '"' preserved ... it really
depends on your analyzer.  Lucene In Action has some great information on
understanding hwat the differnet analyzers do and how they work and how to
see exactly what terms are being indexed.

3) Lucene can store any legal Unicode character -- but what characters
actaully make it into your index depends on what Analyzer you use.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 03:00:35 2006
Return-Path: <java-user-return-22064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19534 invoked from network); 18 Jul 2006 03:00:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 03:00:35 -0000
Received: (qmail 43155 invoked by uid 500); 18 Jul 2006 03:00:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43025 invoked by uid 500); 18 Jul 2006 03:00:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43014 invoked by uid 99); 18 Jul 2006 03:00:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 20:00:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.46] (HELO smtpout.mac.com) (17.250.248.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 20:00:26 -0700
Received: from mac.com (webmail21-en1 [10.13.8.71])
	by smtpout.mac.com (Xserve/8.12.11/smtpout10/MantshX 4.0) with ESMTP id k6I305w5023642
	for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 20:00:05 -0700 (PDT)
Received: from webmail21 (localhost [127.0.0.1])
	by mac.com (Xserve/webmail21/MantshX 4.0) with ESMTP id k6I304ER021407
	for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 20:00:05 -0700 (PDT)
Received: from [68.169.42.62] by webmail.mac.com with HTTP; Mon, 17 Jul 2006 23:00:04 -0400
Message-ID: <11100659.1153191604815.JavaMail.michael_prichard@mac.com>
Date: Mon, 17 Jul 2006 23:00:04 -0400
From: Michael Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Subject: Building easy to use search guis?  How to save queries...
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: 68.169.42.62/instID=301
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Not sure if anyone out is doing this, thought about doing this or is just plain curious.  I want to figure out a way to build a search/rule gui's whereas the user can build searches much like building rules in some mail clients such as outlook or thunderbird.  For example, the user could use drop downs and text fields to build something like:

IF CONTENT MATCHES "aliens" THEN DO SOMETHING

Importantly lucene would be used to match "content" for "aliens" and then something would happen.  Going the other way, I need to be able to produce the statement in the GUI as represented.

SO, should I build an XML representation of what I need and parse that?  Is there something out there already doing something similar?  Ideas?

Thanks,
Michael
  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 03:42:06 2006
Return-Path: <java-user-return-22065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93677 invoked from network); 18 Jul 2006 03:42:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 03:42:06 -0000
Received: (qmail 80374 invoked by uid 500); 18 Jul 2006 03:42:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80331 invoked by uid 500); 18 Jul 2006 03:42:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80317 invoked by uid 99); 18 Jul 2006 03:42:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 20:42:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of marbux@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 20:41:59 -0700
Received: by wr-out-0506.google.com with SMTP id i22so633249wra
        for <java-user@lucene.apache.org>; Mon, 17 Jul 2006 20:41:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GqgLLajjK9ndRr3dVK9yt57DXaJQZI16hxp5zfuojt1jb+8UitV0G69bBRDXf7zXrQNhYfCIBYooSx8ZUL5fhl3nc8E49Y4zAU8FPGJOa8hI9EHQpc0G5JvPHOH6q8eG4qsCozAahD0ckW43/jxvnGbxXRmR+YAMaDmSkqfOug4=
Received: by 10.65.250.12 with SMTP id c12mr2234488qbs;
        Mon, 17 Jul 2006 20:41:39 -0700 (PDT)
Received: by 10.64.201.1 with HTTP; Mon, 17 Jul 2006 20:41:39 -0700 (PDT)
Message-ID: <2c60d980607172041j715a1980y4a0a627e4dfc2d21@mail.gmail.com>
Date: Mon, 17 Jul 2006 20:41:39 -0700
From: marbux <marbux@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Building easy to use search guis? How to save queries...
In-Reply-To: <11100659.1153191604815.JavaMail.michael_prichard@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_83275_16213546.1153194099065"
References: <11100659.1153191604815.JavaMail.michael_prichard@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_83275_16213546.1153194099065
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Isys desktop search does something along the lines of what you speak of.
There's a screen shot of the UI on this page: <
http://www.llrx.com/features/isys2.htm>. The art is a bit too small to read,
but the UI displays the resulting command line as the user builds a query
(small type in lower left of screen shot).

Basically, the user enters a term in the top of the screen, selects an
operand and clicks/enters that operand, then on to the next term and
operand, etc.

The scheme is pretty well-designed. It's very easy to use for novices.

Best regards,

Marbux

On 7/17/06, Michael Prichard <michael_prichard@mac.com> wrote:
>
> Not sure if anyone out is doing this, thought about doing this or is just
> plain curious.  I want to figure out a way to build a search/rule gui's
> whereas the user can build searches much like building rules in some mail
> clients such as outlook or thunderbird.  For example, the user could use
> drop downs and text fields to build something like:
>
> IF CONTENT MATCHES "aliens" THEN DO SOMETHING
>
> Importantly lucene would be used to match "content" for "aliens" and then
> something would happen.  Going the other way, I need to be able to produce
> the statement in the GUI as represented.
>
> SO, should I build an XML representation of what I need and parse
> that?  Is there something out there already doing something similar?  Ideas?
>
> Thanks,
> Michael
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_83275_16213546.1153194099065--

From java-user-return-22066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 05:09:11 2006
Return-Path: <java-user-return-22066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10825 invoked from network); 18 Jul 2006 05:09:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 05:09:11 -0000
Received: (qmail 67628 invoked by uid 500); 18 Jul 2006 05:09:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67604 invoked by uid 500); 18 Jul 2006 05:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67593 invoked by uid 99); 18 Jul 2006 05:09:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Jul 2006 22:09:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.12] (HELO smtpout08-04.prod.mesa1.secureserver.net) (64.202.165.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Jul 2006 22:09:03 -0700
Received: (qmail 26290 invoked from network); 18 Jul 2006 05:08:42 -0000
Received: from unknown (75.21.41.103)
  by smtpout08-04.prod.mesa1.secureserver.net (64.202.165.12) with ESMTP; 18 Jul 2006 05:08:42 -0000
From: "Dejan Nenov" <dejannenov@jollyobject.com>
To: <java-user@lucene.apache.org>
Subject: RE: Building easy to use search guis?  How to save queries...
Date: Mon, 17 Jul 2006 22:08:42 -0700
Organization: Dejan Nenov Privarte Email
Message-ID: <000101c6aa28$3d9d71a0$6564a8c0@safarijv.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcaqFlnYhk4CLEN6T1yQnsni81g6PwAEMvFg
In-Reply-To: <11100659.1153191604815.JavaMail.michael_prichard@mac.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael - 

Please take a look at our MakeTime UI here: http://www.maketime.com
It is in fact Lucene on the back end - albeit very hard to tell :)

Dejan

-----Original Message-----
From: Michael Prichard [mailto:michael_prichard@mac.com] 
Sent: Monday, July 17, 2006 8:00 PM
To: java-user@lucene.apache.org
Subject: Building easy to use search guis? How to save queries...

Not sure if anyone out is doing this, thought about doing this or is just
plain curious.  I want to figure out a way to build a search/rule gui's
whereas the user can build searches much like building rules in some mail
clients such as outlook or thunderbird.  For example, the user could use
drop downs and text fields to build something like:

IF CONTENT MATCHES "aliens" THEN DO SOMETHING

Importantly lucene would be used to match "content" for "aliens" and then
something would happen.  Going the other way, I need to be able to produce
the statement in the GUI as represented.

SO, should I build an XML representation of what I need and parse that?  Is
there something out there already doing something similar?  Ideas?

Thanks,
Michael
  

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 12:35:44 2006
Return-Path: <java-user-return-22067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8957 invoked from network); 18 Jul 2006 12:35:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 12:35:43 -0000
Received: (qmail 45029 invoked by uid 500); 18 Jul 2006 12:35:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44995 invoked by uid 500); 18 Jul 2006 12:35:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44984 invoked by uid 99); 18 Jul 2006 12:35:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:35:38 -0700
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_SBL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of askxuefeng@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO nz-out-0102.google.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:35:37 -0700
Received: by nz-out-0102.google.com with SMTP id i1so634264nzh
        for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 05:35:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:from:to:subject:date:message-id:mime-version:content-type:content-transfer-encoding:x-mailer:thread-index:x-mimeole;
        b=tV4oGtaV3K7CPgw6AkcwoW2j8OTAk++oAwKjBRnkN0gKQ7mi+RhS47rEjiD+Rve7l+qLq96qt2Q35WAMQagC/wYyDAt9fOc/Zu1zQ9j0e8jajts6O4J5t0aYZV4DbE5z/Oiq/H5f0MuQ3aSPwGLmKhq4O2KPOfNQBQpcjMfsYAE=
Received: by 10.36.118.1 with SMTP id q1mr1101265nzc;
        Tue, 18 Jul 2006 05:35:16 -0700 (PDT)
Received: from lymobile ( [221.220.179.76])
        by mx.gmail.com with ESMTP id 38sm725426nza.2006.07.18.05.35.14;
        Tue, 18 Jul 2006 05:35:16 -0700 (PDT)
From: "Liao Xuefeng" <askxuefeng@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Question about Field.TermVector
Date: Tue, 18 Jul 2006 20:35:05 +0800
Message-ID: <001401c6aa66$9b046360$6400a8c0@lymobile>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-index: AcaqZpb5lcXAb9O0Q8imjVRmik9TPw==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi, i'm using lucene 2.0. 

To index a very long text i use Field.Index.TOKENIZED & Field.Store.NO. I
don't know how to get its content (actually, only need words near keywords,
like google's results: ... found this keyword here...) without querying
database?

Someone told me using term vector to perform highlighting, but i found
little information about Field.TermVector, could anyone give me a sample
code?

Thanks in advance!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 12:55:26 2006
Return-Path: <java-user-return-22068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16083 invoked from network); 18 Jul 2006 12:55:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 12:55:26 -0000
Received: (qmail 81452 invoked by uid 500); 18 Jul 2006 12:55:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81424 invoked by uid 500); 18 Jul 2006 12:55:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81412 invoked by uid 99); 18 Jul 2006 12:55:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:55:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alexguo@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 05:55:18 -0700
Received: by py-out-1112.google.com with SMTP id e30so1844584pya
        for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 05:54:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=oCjPUXiCcYQftVKrjuLvCtdQy8Yq0DvG1twmDrRgl3e1eyh1yDA+G9sIF7TIVWgl88zuU5i93b+sTsSOt24J8kOfu7qqz+MdoCr0lqDEtN8ifdIJU1qKUSt+CGheKCo3G+UnucyLlQS0M1NklA/NYVaz4UiG18MyuKyoHf2iCzA=
Received: by 10.35.93.1 with SMTP id v1mr5455621pyl;
        Tue, 18 Jul 2006 05:54:56 -0700 (PDT)
Received: by 10.35.123.8 with HTTP; Tue, 18 Jul 2006 05:54:56 -0700 (PDT)
Message-ID: <d0b688940607180554n433c6da7t90a3344dfb88a667@mail.gmail.com>
Date: Tue, 18 Jul 2006 20:54:56 +0800
From: freeman <alexguo@gmail.com>
Reply-To: freeman@php.net
To: java-user@lucene.apache.org
Subject: Re: Question about Field.TermVector
In-Reply-To: <001401c6aa66$9b046360$6400a8c0@lymobile>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28528_12038620.1153227296544"
References: <001401c6aa66$9b046360$6400a8c0@lymobile>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_28528_12038620.1153227296544
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline

aHR0cDovL3d3dy5sdWNlbmUuY29tLmNuL2ZjLmh0bQoKbWF5YmUgaXQncyBoZWxwZnVsLgoKT24g
Ny8xOC8wNiwgTGlhbyBYdWVmZW5nIDxhc2t4dWVmZW5nQGdtYWlsLmNvbT4gd3JvdGU6Cj4KPiBo
aSwgaSdtIHVzaW5nIGx1Y2VuZSAyLjAuCj4KPiBUbyBpbmRleCBhIHZlcnkgbG9uZyB0ZXh0IGkg
dXNlIEZpZWxkLkluZGV4LlRPS0VOSVpFRCAmIEZpZWxkLlN0b3JlLk5PLiBJCj4gZG9uJ3Qga25v
dyBob3cgdG8gZ2V0IGl0cyBjb250ZW50IChhY3R1YWxseSwgb25seSBuZWVkIHdvcmRzIG5lYXIK
PiBrZXl3b3JkcywKPiBsaWtlIGdvb2dsZSdzIHJlc3VsdHM6IC4uLiBmb3VuZCB0aGlzIGtleXdv
cmQgaGVyZS4uLikgd2l0aG91dCBxdWVyeWluZwo+IGRhdGFiYXNlPwo+Cj4gU29tZW9uZSB0b2xk
IG1lIHVzaW5nIHRlcm0gdmVjdG9yIHRvIHBlcmZvcm0gaGlnaGxpZ2h0aW5nLCBidXQgaSBmb3Vu
ZAo+IGxpdHRsZSBpbmZvcm1hdGlvbiBhYm91dCBGaWVsZC5UZXJtVmVjdG9yLCBjb3VsZCBhbnlv
bmUgZ2l2ZSBtZSBhIHNhbXBsZQo+IGNvZGU/Cj4KPiBUaGFua3MgaW4gYWR2YW5jZSEKPgo+Cj4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+CgoKLS0gCsjDztLX39ffxOO1xMK3
Li4K
------=_Part_28528_12038620.1153227296544--

From java-user-return-22069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 13:56:43 2006
Return-Path: <java-user-return-22069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41691 invoked from network); 18 Jul 2006 13:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 13:56:43 -0000
Received: (qmail 12365 invoked by uid 500); 18 Jul 2006 13:56:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12344 invoked by uid 500); 18 Jul 2006 13:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12331 invoked by uid 99); 18 Jul 2006 13:56:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 06:56:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.182] (HELO smtpout.mac.com) (17.250.248.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 06:56:35 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout12/MantshX 4.0) with ESMTP id k6IDuEbN008051
	for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 06:56:14 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k6IDu8F5014237
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 06:56:14 -0700 (PDT)
Message-ID: <44BCE87D.4090701@mac.com>
Date: Tue, 18 Jul 2006 09:56:13 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Building easy to use search guis?  How to save queries...
References: <000101c6aa28$3d9d71a0$6564a8c0@safarijv.com>
In-Reply-To: <000101c6aa28$3d9d71a0$6564a8c0@safarijv.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That is really cool.  But I am looking for something that I could save 
and then recreate.  I am thinking of building an XML representation such as:

<if arg1="CONTENT" expr="EQ" arg2="aliens">
<then>
   <action type="email" >
       <to value="foo@bar.com" />
       <from value="bar@foo.com" />
       <cc value="foo@bar.com" />
       <message value="blah" />
    </action>
<then>
</if>

or something similar.  I just want to see if anyone has done something 
like this before....

even up to the point of saving searches....do you just save the query?

Thanks,
Michael

Dejan Nenov wrote:

>Michael - 
>
>Please take a look at our MakeTime UI here: http://www.maketime.com
>It is in fact Lucene on the back end - albeit very hard to tell :)
>
>Dejan
>
>-----Original Message-----
>From: Michael Prichard [mailto:michael_prichard@mac.com] 
>Sent: Monday, July 17, 2006 8:00 PM
>To: java-user@lucene.apache.org
>Subject: Building easy to use search guis? How to save queries...
>
>Not sure if anyone out is doing this, thought about doing this or is just
>plain curious.  I want to figure out a way to build a search/rule gui's
>whereas the user can build searches much like building rules in some mail
>clients such as outlook or thunderbird.  For example, the user could use
>drop downs and text fields to build something like:
>
>IF CONTENT MATCHES "aliens" THEN DO SOMETHING
>
>Importantly lucene would be used to match "content" for "aliens" and then
>something would happen.  Going the other way, I need to be able to produce
>the statement in the GUI as represented.
>
>SO, should I build an XML representation of what I need and parse that?  Is
>there something out there already doing something similar?  Ideas?
>
>Thanks,
>Michael
>  
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 14:03:25 2006
Return-Path: <java-user-return-22070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43661 invoked from network); 18 Jul 2006 14:03:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 14:03:25 -0000
Received: (qmail 23942 invoked by uid 500); 18 Jul 2006 14:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23912 invoked by uid 500); 18 Jul 2006 14:03:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23901 invoked by uid 99); 18 Jul 2006 14:03:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 07:03:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 07:03:17 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G2qA5-0006wP-CG
	for java-user@lucene.apache.org; Tue, 18 Jul 2006 07:02:57 -0700
Message-ID: <5378752.post@talk.nabble.com>
Date: Tue, 18 Jul 2006 07:02:57 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <c68e39170607171100o68549f17i482dd0761bc67d35@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5363581.post@talk.nabble.com> <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com> <5364830.post@talk.nabble.com> <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com> <5365216.post@talk.nabble.com> <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com> <5365363.post@talk.nabble.com> <c68e39170607171100o68549f17i482dd0761bc67d35@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

ok, I made the mention indexes for name, and the rest (2 indexes)

When i now make a search mit mulitsearcher on the name field, I can only
access the values in first (name) index. Not from the second one.

When i search in street field, i can access the values like street,
phonenumber, etc but not the name.

Somethink i'm doing wrong ... can you help ?

Thanks,
Neils
-- 
View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5378752
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 14:20:25 2006
Return-Path: <java-user-return-22071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50228 invoked from network); 18 Jul 2006 14:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 14:20:24 -0000
Received: (qmail 67506 invoked by uid 500); 18 Jul 2006 14:20:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67470 invoked by uid 500); 18 Jul 2006 14:20:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67459 invoked by uid 99); 18 Jul 2006 14:20:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 07:20:17 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dragon-fly999@hotmail.com designates 65.54.246.175 as permitted sender)
Received: from [65.54.246.175] (HELO bay0-omc2-s39.bay0.hotmail.com) (65.54.246.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 07:20:16 -0700
Received: from hotmail.com ([207.46.9.100]) by bay0-omc2-s39.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 18 Jul 2006 07:19:52 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 18 Jul 2006 07:19:51 -0700
Message-ID: <BAY119-F20ED7398C06AF49A9562DEB9630@phx.gbl>
Received: from 207.46.9.123 by by119fd.bay119.hotmail.msn.com with HTTP;
	Tue, 18 Jul 2006 14:19:48 GMT
X-Originating-IP: [206.35.175.10]
X-Originating-Email: [dragon-fly999@hotmail.com]
X-Sender: dragon-fly999@hotmail.com
From: "Dragon Fly" <dragon-fly999@hotmail.com>
To: java-user@lucene.apache.org
Subject: Empty fields ...
Date: Tue, 18 Jul 2006 10:19:48 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 18 Jul 2006 14:19:51.0999 (UTC) FILETIME=[3BEE0CF0:01C6AA75]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have 10 fields in my index and some of the fields can be empty.
I'd like to be able do something like "IS NOT NULL" in SQL.

For example:

    Name:Jane AND Addr IS NOT NULL AND Zip IS NOT NULL

    Zip:90210 AND Name IS NOT NULL

Is there an easy way to do this? Thank you.

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 14:42:00 2006
Return-Path: <java-user-return-22072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69865 invoked from network); 18 Jul 2006 14:41:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 14:41:59 -0000
Received: (qmail 5045 invoked by uid 500); 18 Jul 2006 14:41:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4835 invoked by uid 500); 18 Jul 2006 14:41:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4824 invoked by uid 99); 18 Jul 2006 14:41:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 07:41:53 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 07:41:52 -0700
Received: by py-out-1112.google.com with SMTP id e30so1145pya
        for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 07:41:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RF687j+FaFS0Z+6LnkeedQOJuCdOX/OtPRBuCW4OJTqxqSnhDrcjM6w6t4yE76THUs+LckMOpCD0ao5OhM+0OS2eMfYIzvk5pO0OrcflM/9n6ZvE6A1R/qWEf27EmWBogdplpYH052XGZo32658HtBFPzj+qZdmacy6BJxX8L2k=
Received: by 10.35.19.6 with SMTP id w6mr5588943pyi;
        Tue, 18 Jul 2006 07:41:28 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 18 Jul 2006 07:41:28 -0700 (PDT)
Message-ID: <359a92830607180741v6010a284h7764a2f7dcf1268c@mail.gmail.com>
Date: Tue, 18 Jul 2006 10:41:28 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <BAY119-F20ED7398C06AF49A9562DEB9630@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28660_14965036.1153233688691"
References: <BAY119-F20ED7398C06AF49A9562DEB9630@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_28660_14965036.1153233688691
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could use a filter. You'd just construct a filter with the bits on for
all docs that had that term. You could cache these to make future searchers
easier. I envision, say, caching one filter for each field and keeping them
around so you could re-use them whenever you wanted.

See ConstantScoreQuery, CachingWrapperFilter, Filter, etc.... Note, you'd
only have to construct these once and (I believe) that CachingWrapperFilter
will keep them around for you, for how long I'm unclear. I was quite
surprised by how quickly filters can be constructed.....

Hope this helps
Erick

------=_Part_28660_14965036.1153233688691--

From java-user-return-22073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 14:45:29 2006
Return-Path: <java-user-return-22073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72133 invoked from network); 18 Jul 2006 14:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 14:45:29 -0000
Received: (qmail 16447 invoked by uid 500); 18 Jul 2006 14:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16422 invoked by uid 500); 18 Jul 2006 14:45:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16407 invoked by uid 99); 18 Jul 2006 14:45:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 07:45:18 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.36] (HELO web26014.mail.ukl.yahoo.com) (217.146.177.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Jul 2006 07:45:15 -0700
Received: (qmail 86415 invoked by uid 60001); 18 Jul 2006 14:44:53 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=FB3/NgON1FlEsANxJedD4lbspxkb0h6h+9eSq0SclHssrzxv8hJQ+8lgBdSSnw5Ll8+UVjhSwVBWTletmDiFNwheyo5Sp+Y+7+/3fmb7af9aslp5mwpDPsuTSAihhGKV+fiTs3W+fuTgpSe6i2fdy+o9UBp7jSmOHO/InUP5cr4=  ;
Message-ID: <20060718144453.86413.qmail@web26014.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26014.mail.ukl.yahoo.com via HTTP; Tue, 18 Jul 2006 14:44:53 GMT
Date: Tue, 18 Jul 2006 14:44:53 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Building easy to use search guis?  How to save queries...
To: java-user@lucene.apache.org
In-Reply-To: <44BCE87D.4090701@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have you looked at the XML Query Parser in the "contrib" section of the SVN repository?
I have been using XSLT recently to mix dynamic content with query templates expressed as XML and then parsed by this framework.

If you don't like the default XML syntax used the parser can be configured to support your own choice of XML syntax and can be extended with custom QueryBuilder classes. See the Junit tests for examples.

Cheers
Mark

----- Original Message ----
From: Michael J. Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Sent: Tuesday, 18 July, 2006 2:56:13 PM
Subject: Re: Building easy to use search guis?  How to save queries...

That is really cool.  But I am looking for something that I could save 
and then recreate.  I am thinking of building an XML representation such as:

<if arg1="CONTENT" expr="EQ" arg2="aliens">
<then>
   <action type="email" >
       <to value="foo@bar.com" />
       <from value="bar@foo.com" />
       <cc value="foo@bar.com" />
       <message value="blah" />
    </action>
<then>
</if>

or something similar.  I just want to see if anyone has done something 
like this before....

even up to the point of saving searches....do you just save the query?

Thanks,
Michael

Dejan Nenov wrote:

>Michael - 
>
>Please take a look at our MakeTime UI here: http://www.maketime.com
>It is in fact Lucene on the back end - albeit very hard to tell :)
>
>Dejan
>
>-----Original Message-----
>From: Michael Prichard [mailto:michael_prichard@mac.com] 
>Sent: Monday, July 17, 2006 8:00 PM
>To: java-user@lucene.apache.org
>Subject: Building easy to use search guis? How to save queries...
>
>Not sure if anyone out is doing this, thought about doing this or is just
>plain curious.  I want to figure out a way to build a search/rule gui's
>whereas the user can build searches much like building rules in some mail
>clients such as outlook or thunderbird.  For example, the user could use
>drop downs and text fields to build something like:
>
>IF CONTENT MATCHES "aliens" THEN DO SOMETHING
>
>Importantly lucene would be used to match "content" for "aliens" and then
>something would happen.  Going the other way, I need to be able to produce
>the statement in the GUI as represented.
>
>SO, should I build an XML representation of what I need and parse that?  Is
>there something out there already doing something similar?  Ideas?
>
>Thanks,
>Michael
>  
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 15:04:10 2006
Return-Path: <java-user-return-22074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82871 invoked from network); 18 Jul 2006 15:04:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 15:04:10 -0000
Received: (qmail 67722 invoked by uid 500); 18 Jul 2006 15:04:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67691 invoked by uid 500); 18 Jul 2006 15:04:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67680 invoked by uid 99); 18 Jul 2006 15:04:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 08:04:03 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dragon-fly999@hotmail.com designates 65.54.246.231 as permitted sender)
Received: from [65.54.246.231] (HELO bay0-omc3-s31.bay0.hotmail.com) (65.54.246.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 08:04:02 -0700
Received: from hotmail.com ([207.46.9.85]) by bay0-omc3-s31.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 18 Jul 2006 08:03:42 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 18 Jul 2006 08:03:41 -0700
Message-ID: <BAY119-F561B25C08AC07774F1C98B9630@phx.gbl>
Received: from 207.46.9.123 by by119fd.bay119.hotmail.msn.com with HTTP;
	Tue, 18 Jul 2006 15:03:37 GMT
X-Originating-IP: [206.35.175.10]
X-Originating-Email: [dragon-fly999@hotmail.com]
X-Sender: dragon-fly999@hotmail.com
From: "Dragon Fly" <dragon-fly999@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
Date: Tue, 18 Jul 2006 11:03:37 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 18 Jul 2006 15:03:41.0735 (UTC) FILETIME=[5B5FEB70:01C6AA7B]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the quick reply, Erick.  A couple of follow-up questions though.
If I had 200 fields (instead of 10), would you still recommend the same
approach? Would 200 filters use up too much memory? Would 200 filters
be too slow to construct/search?

>From: "Erick Erickson" <erickerickson@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Empty fields ...
>Date: Tue, 18 Jul 2006 10:41:28 -0400
>
>You could use a filter. You'd just construct a filter with the bits on for
>all docs that had that term. You could cache these to make future searchers
>easier. I envision, say, caching one filter for each field and keeping them
>around so you could re-use them whenever you wanted.
>
>See ConstantScoreQuery, CachingWrapperFilter, Filter, etc.... Note, you'd
>only have to construct these once and (I believe) that CachingWrapperFilter
>will keep them around for you, for how long I'm unclear. I was quite
>surprised by how quickly filters can be constructed.....
>
>Hope this helps
>Erick

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today - it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 16:00:43 2006
Return-Path: <java-user-return-22075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7274 invoked from network); 18 Jul 2006 16:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 16:00:43 -0000
Received: (qmail 23918 invoked by uid 500); 18 Jul 2006 16:00:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23892 invoked by uid 500); 18 Jul 2006 16:00:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23881 invoked by uid 99); 18 Jul 2006 16:00:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:00:36 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:00:35 -0700
Received: by py-out-1112.google.com with SMTP id f25so481413pyf
        for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 09:00:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Bi42xHm3Bh+bsk032eGqyxPj6figC+SKhRLP+//1rxVyHZ+z8Ie1YhF18/Of2yfO46NnG4LushmCTsJAOr8CWnN22tfC0+fKkiwLzm9656JbkhETMwq87IlbcpfEFMHth7uuBjMJRKWtp2RMdlVMFp0kkkftPL/Zyg/NfDVG9PI=
Received: by 10.35.61.14 with SMTP id o14mr5688469pyk;
        Tue, 18 Jul 2006 09:00:14 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 18 Jul 2006 09:00:14 -0700 (PDT)
Message-ID: <c68e39170607180900s37b3edc7uf8ebd0123131f1bd@mail.gmail.com>
Date: Tue, 18 Jul 2006 12:00:14 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <5378752.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5363581.post@talk.nabble.com>
	 <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com>
	 <5364830.post@talk.nabble.com>
	 <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com>
	 <5365216.post@talk.nabble.com>
	 <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com>
	 <5365363.post@talk.nabble.com>
	 <c68e39170607171100o68549f17i482dd0761bc67d35@mail.gmail.com>
	 <5378752.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/18/06, neils <neils@gmx.net> wrote:
> ok, I made the mention indexes for name, and the rest (2 indexes)
>
> When i now make a search mit mulitsearcher on the name field, I can only
> access the values in first (name) index. Not from the second one.

Don't use a MultiSearcher or a ParallelMultiSearcher, create a
ParallelReader and then create an IndexSearcher, passing it the
reader.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 16:10:59 2006
Return-Path: <java-user-return-22076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11637 invoked from network); 18 Jul 2006 16:10:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 16:10:59 -0000
Received: (qmail 47602 invoked by uid 500); 18 Jul 2006 16:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46754 invoked by uid 500); 18 Jul 2006 16:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46743 invoked by uid 99); 18 Jul 2006 16:10:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:10:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 09:10:50 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G2s9V-0002iQ-Kj
	for java-user@lucene.apache.org; Tue, 18 Jul 2006 09:10:29 -0700
Message-ID: <5381183.post@talk.nabble.com>
Date: Tue, 18 Jul 2006 09:10:29 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <c68e39170607180900s37b3edc7uf8ebd0123131f1bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5363581.post@talk.nabble.com> <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com> <5364830.post@talk.nabble.com> <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com> <5365216.post@talk.nabble.com> <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com> <5365363.post@talk.nabble.com> <c68e39170607171100o68549f17i482dd0761bc67d35@mail.gmail.com> <5378752.post@talk.nabble.com> <c68e39170607180900s37b3edc7uf8ebd0123131f1bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Damn, of course  - sorry & thanks :-))

I will try this tomorrow.... :-)
-- 
View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5381183
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 17:09:22 2006
Return-Path: <java-user-return-22077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32325 invoked from network); 18 Jul 2006 17:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 17:09:21 -0000
Received: (qmail 37637 invoked by uid 500); 18 Jul 2006 17:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37385 invoked by uid 500); 18 Jul 2006 17:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37374 invoked by uid 99); 18 Jul 2006 17:09:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:09:15 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 10:09:14 -0700
Received: by py-out-1112.google.com with SMTP id f25so531929pyf
        for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 10:08:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=qavAy565ZYSp4p3J1/kUuWZ7sp5XQfFte1LMLeVeFHDFX1QzlG913KePomku+Tk6WCs5aChLor9vHEuYq0dxqCMVLWN8mwbUoMOyDuaOW3gF+tYP/IDlVPM0+UEr1y/BY2ar0SqxYLend104OqXD8QJ7bcW5j6S7yHH2CnBOeB0=
Received: by 10.35.18.4 with SMTP id v4mr5786264pyi;
        Tue, 18 Jul 2006 10:08:53 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Tue, 18 Jul 2006 10:08:53 -0700 (PDT)
Message-ID: <359a92830607181008h6d969158i86f552e5f14ffa65@mail.gmail.com>
Date: Tue, 18 Jul 2006 13:08:53 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <BAY119-F561B25C08AC07774F1C98B9630@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33368_25198847.1153242533504"
References: <BAY119-F561B25C08AC07774F1C98B9630@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33368_25198847.1153242533504
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Quoting the guys "it depends" <G>...

At root, a filter is a bitset. So size-wise, you are using 1 bit/doc (plus
some small overhead). Both the storage required and the time to construct
are dependent on the characteristics of your corpus. I guess the only way
you can answer that for your particular situation is to test with your
corpus. I can say that I was surprised at how very fast constructing a
filter was in my situation. Which has no relevance to your situation <G>....

More of "it depends" is the fluidity of your index. If you construct it once
and don't modify it, you could consider storing your filters permanently.
Either in files or as "special documents" in your index or perhaps even in a
meta-data index. You can store documents of meta-data just by putting in
fields that are in none of your other documents..... Deletions/additions and
re-optimizations will affect the internal lucene doc IDs, so you've got to
be careful here about synchronization...

You could consider constructing your filters all in a bunch when you open
your searcher. Again, depending upon whether you modify your searcher often
will determine whether you want to do this or not.

What I'd really recommend is that you start by constructing your filters on
the fly, without even a caching wrapper and get some timings, mostly for
your peace of mind. I'd also do some timings when combining filters, just
for yucks.. There's no reason not to use a caching wrapper if you expect to
use these filters, which will load the first user with a delay, but you can
warm up your filters by issuing some canned queries upon startup....

Only if constructing any filters on the fly and using a caching wrapper
proves unsatisfactory would I move on to any kind of permanent storage.
Premature optimization and all that....

So, I don't have a good answer since I don't have a detailed knowledge of
your problem, but it should be relatively easy for you to get a sense of
whether this is a reasonable approach or not.

Hope this helps
Erick

------=_Part_33368_25198847.1153242533504--

From java-user-return-22078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 18:47:10 2006
Return-Path: <java-user-return-22078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75059 invoked from network); 18 Jul 2006 18:47:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 18:47:09 -0000
Received: (qmail 14224 invoked by uid 500); 18 Jul 2006 18:47:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13563 invoked by uid 500); 18 Jul 2006 18:47:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13548 invoked by uid 99); 18 Jul 2006 18:47:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:47:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:47:01 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 7043FD90B81
	for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 14:46:39 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Tue, 18 Jul 2006 14:46:41 -0400
X-Sasl-enc: QRcx0T3vf/16iP5sAeNxiAbVnQOIe2FNjzZIbYH2h/bV 1153248394
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 2FF621E2C
	for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 14:46:34 -0400 (EDT)
Message-ID: <44BD2C8D.8050600@mikemccandless.com>
Date: Tue, 18 Jul 2006 14:46:37 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException: occurs during the optimization of index
References: <44B77D6C.3080501@artnology.com> <44B78020.7040403@naukri.com>
In-Reply-To: <44B78020.7040403@naukri.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> Can anybody suggest how to avoid this problem and concurrently access 
> in the index accroos the network at the same time maintaining the index.

Unfortunately, there are known issues with locking and NFS.  The lock 
files (and underlying locking protocol) do not work reliably when used 
over NFS, and I believe this exception (FileNotFoundException) is one of 
the manifestations of this.

We're working on making locking more flexible (see 
http://issues.apache.org/jira/browse/LUCENE-305), so this issue will 
hopefully be correctly addressed in a future version of Lucene.

But in the meantime as a workaround you could either do your own 
external locking (tricky) or you could take safe snapshots of your index 
and share that.  For example, your single Writer could make a safe 
snapshot of the index when the Writer is closed, and then have all 
Searchers cutover to this safe copy once it's done.

Definitely look at how the Solr project:

   http://incubator.apache.org/solr/features.html
   http://incubator.apache.org/solr/tutorial.html

accomplishes this.  They have developed a sophisticated "snapshot" 
capability for distributing index copies around.  Even if you don't use 
Solr and even if you still want a single copy of the index (not 1 per 
Searcher) you can still borrow Solr's techniques (the nice "cp -l -r" 
trick for example) for making a safe copy of the index.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 18:53:48 2006
Return-Path: <java-user-return-22079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77180 invoked from network); 18 Jul 2006 18:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 18:53:48 -0000
Received: (qmail 23378 invoked by uid 500); 18 Jul 2006 18:53:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23351 invoked by uid 500); 18 Jul 2006 18:53:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23340 invoked by uid 99); 18 Jul 2006 18:53:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:53:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 11:53:42 -0700
Received: by nf-out-0910.google.com with SMTP id l36so23929nfa
        for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 11:53:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=H9ML/hvybXk792ZLnyIQfzwPWHi/XbT4enlb+XXlQ76p/r9S2ElpiOSzWIyozh0ErkWhfCLuGmetts/GWzSX7TOQSqyYsoZR+UHOTo6xqRG1Ew/rlmue6YJLKB8S4u6R13DrHNuKHk7GYMnPMnVbW4hnzAYJEbULnYT7CbYVs98=
Received: by 10.78.195.9 with SMTP id s9mr1706839huf;
        Tue, 18 Jul 2006 11:53:20 -0700 (PDT)
Received: by 10.78.125.4 with HTTP; Tue, 18 Jul 2006 11:53:20 -0700 (PDT)
Message-ID: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
Date: Tue, 18 Jul 2006 20:53:20 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Index-Format difference between 1.4.3 and 2.0
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_56336_3946391.1153248800601"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_56336_3946391.1153248800601
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

sorry, didn't find the information elsewhere:

1.) Did the format of the lucene-index change between version 1.4.3 and 2.0?
2.) Is it possible to use the old Luke-Tool with a new lucene 2 index?

Thanks
lude

------=_Part_56336_3946391.1153248800601--

From java-user-return-22080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 18 19:00:47 2006
Return-Path: <java-user-return-22080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80878 invoked from network); 18 Jul 2006 19:00:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2006 19:00:47 -0000
Received: (qmail 38082 invoked by uid 500); 18 Jul 2006 19:00:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38054 invoked by uid 500); 18 Jul 2006 19:00:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38043 invoked by uid 99); 18 Jul 2006 19:00:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 12:00:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [80.236.3.115] (HELO nash.numericable.net) (80.236.3.115)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 12:00:40 -0700
Received: (qmail 16788 invoked from network); 18 Jul 2006 19:00:16 -0000
Received: from unknown (HELO [192.168.1.101]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by nash.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 18 Jul 2006 19:00:16 -0000
From: Nicolas =?iso-8859-15?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
Date: Tue, 18 Jul 2006 20:58:56 +0200
User-Agent: KMail/1.9.3
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
In-Reply-To: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200607182058.56551.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Mardi 18 Juillet 2006 20:53, lude a =E9crit=A0:
> Hello,
>
> sorry, didn't find the information elsewhere:
>
> 1.) Did the format of the lucene-index change between version 1.4.3 and
> 2.0? 2.) Is it possible to use the old Luke-Tool with a new lucene 2 inde=
x?
>
> Thanks
> lude

ASAIK, the format changed, but in a compatible way : a Lucene-2 app will be=
=20
able to read a 1.4 index. The index format change is there :=20
http://lucene.apache.org/java/docs/fileformats.html

And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to read a =
1.4=20
index.

Nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 02:25:04 2006
Return-Path: <java-user-return-22081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39593 invoked from network); 19 Jul 2006 02:25:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 02:25:04 -0000
Received: (qmail 49658 invoked by uid 500); 19 Jul 2006 02:24:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49623 invoked by uid 500); 19 Jul 2006 02:24:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49612 invoked by uid 99); 19 Jul 2006 02:24:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 19:24:58 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of kevindig@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 19:24:57 -0700
Received: by py-out-1112.google.com with SMTP id f25so166879pyf
        for <java-user@lucene.apache.org>; Tue, 18 Jul 2006 19:24:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=a2wTmbPMKwyiIDMkhmx1Pz9pl96MhV2x4/EiF6hUa7QahcLDmypXYQ4gtXPBEH02XtBxaSOvA0MFJJyyWJvxftJqyZaKgzAvLRjBhvZnOP6FizJMfDT4wUnxekI8IEXckhP41MJbh90uNat7Y3FJkkQ0pkkshebjwY7iE0gZPAE=
Received: by 10.35.107.20 with SMTP id j20mr374214pym;
        Tue, 18 Jul 2006 19:24:36 -0700 (PDT)
Received: from ?10.200.4.217? ( [218.19.43.57])
        by mx.gmail.com with ESMTP id j76sm199120pyd.2006.07.18.19.24.35;
        Tue, 18 Jul 2006 19:24:36 -0700 (PDT)
Message-ID: <44BD97E1.1020507@gmail.com>
Date: Wed, 19 Jul 2006 10:24:33 +0800
From: kevin <kevindig@gmail.com>
User-Agent: Thunderbird 1.5.0.2 (Windows/20060308)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com> <200607182058.56551.nicolas.lalevee@anyware-tech.com>
In-Reply-To: <200607182058.56551.nicolas.lalevee@anyware-tech.com>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
how to highlight the keyword in the search result summary ? can i use 
the /highlight/ package?
Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 05:14:32 2006
Return-Path: <java-user-return-22082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92778 invoked from network); 19 Jul 2006 05:14:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 05:14:32 -0000
Received: (qmail 94147 invoked by uid 500); 19 Jul 2006 05:14:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94110 invoked by uid 500); 19 Jul 2006 05:14:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94099 invoked by uid 99); 19 Jul 2006 05:14:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 22:14:26 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=FORGED_YAHOO_RCVD,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Jul 2006 22:14:25 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G34No-0004eY-Q4
	for java-user@lucene.apache.org; Tue, 18 Jul 2006 22:14:04 -0700
Message-ID: <5390696.post@talk.nabble.com>
Date: Tue, 18 Jul 2006 21:48:04 -0700 (PDT)
From: ericbae <ericbae@yahoo.com>
To: java-user@lucene.apache.org
Subject: Accessing "term frequency information" for documents
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: ericbae@yahoo.com
X-Nabble-From: ericbae <ericbae@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello.

What I want to access through Lucene is this.

I search for documents by inserting a particular query and for each result
that is returned, I want to view its term frequency information.

For example, if documents A and B are returned, is there a easy way to check
which words appear in A and B and how many times they appear?

thank you for your help in advance.
-- 
View this message in context: http://www.nabble.com/Accessing-%22term-frequency-information%22-for-documents-tf1964461.html#a5390696
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 08:40:35 2006
Return-Path: <java-user-return-22083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69940 invoked from network); 19 Jul 2006 08:40:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 08:40:35 -0000
Received: (qmail 32962 invoked by uid 500); 19 Jul 2006 08:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32430 invoked by uid 500); 19 Jul 2006 08:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32419 invoked by uid 99); 19 Jul 2006 08:40:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:40:28 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.70.192.55] (HELO smtp5.libero.it) (193.70.192.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 01:40:26 -0700
Received: from localhost (172.16.1.10) by smtp5.libero.it (7.0.027-DD01)
        id 4499264102649404 for java-user@lucene.apache.org; Wed, 19 Jul 2006 10:40:04 +0200
Received: from smtp1.libero.it ([172.16.1.224])
 by localhost (asav10.libero.it [193.70.192.88]) (amavisd-new, port 10024)
 with ESMTP id 32204-03-4 for <java-user@lucene.apache.org>;
 Wed, 19 Jul 2006 10:40:04 +0200 (CEST)
Received: from [192.168.1.2] (adsl-ull-79-131.44-151.net24.it [151.44.131.79])
	by smtp1.libero.it (Postfix) with ESMTP id 6BB48A8C44
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 10:40:04 +0200 (MEST)
Message-ID: <44BDEFFF.6040507@libero.it>
Date: Wed, 19 Jul 2006 10:40:31 +0200
From: Davide <davidin81@libero.it>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.0.2) Gecko/20060308 Thunderbird/1.5.0.2 Mnenhy/0.7.4.666
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Problem finding similar documents with MoreLikeThis method.
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I used the method MoreLikeThis (in search.similar package) of Lucene to
find similar documents, but the result is 0 documents also when I index
more times the same document. I don't understand why the search doesn't
work... Here I give you the code I used:

----------------------------------------------------------------------------

Directory indexDir = FSDirectory.getDirectory(INDEX_DIR, false);

IndexReader ir = IndexReader.open(indexDir);

IndexSearcher is = new IndexSearcher(indexDir);
	
MoreLikeThis mlt = new MoreLikeThis(ir);

Query query = mlt.like( *FileToSearchSimilar* );
	
System.out.println("The Query is: " + query);
	
Hits hits = is.search(query);
		
for (Iterator iterDoc = hits.iterator(); iterDoc.hasNext();) {
	    	
	Hit hit = (Hit)iterDoc.next();
	System.out.println("\n\nSimilar file: "+hit.get("path"));
}
	
		
ir.close();
is.close();
-----------------------------------------------------------------------------

Note that:
1) *FindToSearchSimilar* is a File i passed to MoreLikeThis
2) The index alredy contains *FileToSearchSimilar* (I previously indexed
more times the file)
3) The System.out.println("The Query is :" + query) print an empty query.

In the beginning I thought that the reason was I indexed field of files
without Field.TermVector.YES, but after I added a field (the same for
every doc) for each document in the index with this option, but nothing...

Sincerly I can't find the reason why MoreLikeThis doesn't work... I hope
someone have a suggestion or a solution.

Thanks in advance
Davide.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 09:23:08 2006
Return-Path: <java-user-return-22084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89102 invoked from network); 19 Jul 2006 09:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 09:23:07 -0000
Received: (qmail 14730 invoked by uid 500); 19 Jul 2006 09:22:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14708 invoked by uid 500); 19 Jul 2006 09:22:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14697 invoked by uid 99); 19 Jul 2006 09:22:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:22:59 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jul 2006 02:22:58 -0700
Received: (qmail 44134 invoked by uid 60001); 19 Jul 2006 09:22:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=A+tl9A24KPJOt4t2JBD/4PyKSZhUc0LGG4BHNCQ749CYLOwLl/PFwXwb91THX22NAswK6MlUG8NR3Ccn9Osl0OUcscQyLQXUchwF8smLoSWeBfcaVNPVe4+qjFpb1W8MvIaNjgx207/QDCxmkx1RmU9ErFb4N0qk45y+hcx+o2Q=  ;
Message-ID: <20060719092236.44132.qmail@web26002.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Wed, 19 Jul 2006 09:22:36 GMT
Date: Wed, 19 Jul 2006 09:22:36 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Problem finding similar documents with MoreLikeThis method.
To: java-user@lucene.apache.org
In-Reply-To: <44BDEFFF.6040507@libero.it>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Looks like the class defaults to only searching a field called "contents".

Either:
a) call setFieldNames() with null to force the class to use a list of all indexed fields derived from your IndexReader
or
b) call setFieldNames() with the explicit shortlist of field names you want to match on


Cheers
Mark

----- Original Message ----
From: Davide <davidin81@libero.it>
To: java-user@lucene.apache.org
Sent: Wednesday, 19 July, 2006 9:40:31 AM
Subject: Problem finding similar documents with MoreLikeThis method.

Hi,
I used the method MoreLikeThis (in search.similar package) of Lucene to
find similar documents, but the result is 0 documents also when I index
more times the same document. I don't understand why the search doesn't
work... Here I give you the code I used:

----------------------------------------------------------------------------

Directory indexDir = FSDirectory.getDirectory(INDEX_DIR, false);

IndexReader ir = IndexReader.open(indexDir);

IndexSearcher is = new IndexSearcher(indexDir);
    
MoreLikeThis mlt = new MoreLikeThis(ir);

Query query = mlt.like( *FileToSearchSimilar* );
    
System.out.println("The Query is: " + query);
    
Hits hits = is.search(query);
        
for (Iterator iterDoc = hits.iterator(); iterDoc.hasNext();) {
            
    Hit hit = (Hit)iterDoc.next();
    System.out.println("\n\nSimilar file: "+hit.get("path"));
}
    
        
ir.close();
is.close();
-----------------------------------------------------------------------------

Note that:
1) *FindToSearchSimilar* is a File i passed to MoreLikeThis
2) The index alredy contains *FileToSearchSimilar* (I previously indexed
more times the file)
3) The System.out.println("The Query is :" + query) print an empty query.

In the beginning I thought that the reason was I indexed field of files
without Field.TermVector.YES, but after I added a field (the same for
every doc) for each document in the index with this option, but nothing...

Sincerly I can't find the reason why MoreLikeThis doesn't work... I hope
someone have a suggestion or a solution.

Thanks in advance
Davide.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 09:59:56 2006
Return-Path: <java-user-return-22085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 750 invoked from network); 19 Jul 2006 09:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 09:59:56 -0000
Received: (qmail 60995 invoked by uid 500); 19 Jul 2006 09:59:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60967 invoked by uid 500); 19 Jul 2006 09:59:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60956 invoked by uid 99); 19 Jul 2006 09:59:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:59:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of aserba@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 02:59:47 -0700
Received: by nf-out-0910.google.com with SMTP id o63so171799nfa
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 02:59:25 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=do1iZXqCA8L0cov4yiGxhigCUxquPQRhH4pQ1C59wTuAGK64EZabE9oADDc+u5sxSHBAg6FssnbPjO3sEYvRuTJnwjSkBQ80rQNXp9rZsXn/bzh7aNnRCHiACUmn01dERDS5omYxI0B3HAUlG6+SE9OHbwpEHatWXPT6mCdCGeI=
Received: by 10.78.175.14 with SMTP id x14mr238481hue;
        Wed, 19 Jul 2006 02:59:25 -0700 (PDT)
Received: by 10.78.75.16 with HTTP; Wed, 19 Jul 2006 02:59:25 -0700 (PDT)
Message-ID: <3e8ef54f0607190259m124ff1cfwee723e155ff74a15@mail.gmail.com>
Date: Wed, 19 Jul 2006 13:59:25 +0400
From: "Aleksey Serba" <aserba@gmail.com>
To: java-user@lucene.apache.org, "Erik Hatcher" <erik@ehatchersolutions.com>
Subject: Re: question about custom sort method
In-Reply-To: <3e8ef54f0607170837x3d7dd483i201af1280846e68f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_44656_32414915.1153303165389"
References: <20060512111446.3kxu2k5frk8ws8sg@webmail.service.emory.edu>
	 <73A6FDD3-E17B-4CF9-921F-B7C74AE09850@ehatchersolutions.com>
	 <e994873a0605171340v2e5dffe3t1333dc6fb6598650@mail.gmail.com>
	 <3e8ef54f0607170650h73836d8fx239454d546d142b3@mail.gmail.com>
	 <3e8ef54f0607170654j17376ca4mad444c7d73db22a0@mail.gmail.com>
	 <640545FD-9175-430A-A2B5-DF6CC2CBC42D@ehatchersolutions.com>
	 <3e8ef54f0607170837x3d7dd483i201af1280846e68f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44656_32414915.1153303165389
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik,

You can reproduce OutOfMemory easily. I've attach test files - this is
altered DistanceSortingTest example from LIA book. Also you can
profile it and see caching of distances arrays.

I'll try to investigate the problem, make patch to trunk version
(probably non caching option) and get back to you later.

Thanks


On 7/17/06, Aleksey Serba <aserba@gmail.com> wrote:
> Erik,
>
> I think Brian have the problem with continuous caching the same
> sorting values, i.e. he has a few points to calc distance from.
> In such case you can implement equals and hashCode methods based on
> point value and you'll have one cached comparator per different center
> point value.
>
>
> On 7/17/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > There is a known issue with the DistanceComparatorSource in the
> > "Lucene in Action" source code:
> >
> >         <http://www.lucenebook.com/blog/errata/2006/03/01/memory_leak.html>
> >
> > Maybe this advice will help fix the issue you're having?
> >
> >         Erik
> >
> >
> > On Jul 17, 2006, at 9:54 AM, Aleksey Serba wrote:
> >
> > > Hi!
> > >
> > > Peter, I have exactly the same situation described below.
> > > - I have DistanceComparatorSource to sort results by distance from
> > > specified spatial coordinates point. Point is different for each
> > > query.
> > > - I do not close Searcher after each query.
> > > - I get "java.lang.OutOfMemoryError: Java heap space" after several
> > > request. Using www.yourkit.com's profiler and research lucene source
> > > code i've found sort comparators caching and there's no any options.
> > >
> > > Peter, did you find the solution do not cache these sorting values?
> > >
> > >
> > > Yonik, thank you for your suggestion, we use solr codebase already :)
> > > To tell the truth, first time i thought this is solr caching problem (
> > > i've modify SolrIndexSearcher to get lucene Searcher and search
> > > directly without any solr caching )
> > >
> > > I can't figure out how to use FunctionQuery - is there any wiki pages
> > > / examples or something?
> > >
> > > Thanks
> > >
> > > Alex
> > >
> > > On 5/18/06, Peter Keegan <peterlkeegan@gmail.com> wrote:
> > >> Suppose I have a custom sorting 'DocScoreComparator' for computing
> > >> distances
> > >> on each search hit from a specified coordinate (similar to the
> > >> DistanceComparatorSource example in LIA). Assume that the 'specified
> > >> coordinate' is different for each query. This means a new custom
> > >> comparator
> > >> must be created for each query, which is ok. However, Lucene
> > >> caches the
> > >> comparator even though it will never be reused. This could result
> > >> in heavy
> > >> memory usage if many queries are performed before the IndexReader is
> > >> updated.
> > >>
> > >> Is there any way to avoid having lucene cache the custom sorting
> > >> objects?
> > >>
> > >>
> > >
> > > On 5/12/06, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> > >> Yes, it does compute these distances for all the terms for the field
> > >> specified, but only once (per IndexReader).  This is where the
> > >> techniques Solr employs comes in real handy... warming up caches by
> > >> running searches and sorts before putting a index into service.
> > >
> > >
> > > On 5/12/06, Urvashi Gadi <ugadi@emory.edu> wrote:
> > >> I am looking at DistanceComparatorSource class (for csutom
> > >> sorting) and
> > >> looks like it calculates the distance for each record in the index
> > >> and
> > >> not just the records returned from search, making the system very
> > >> slow.
> > >>
> > >> Is my observation correct? Are there ways to optimize this process?
> > >>
> > >> Thanks,
> > >> Urvashi
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>


------=_Part_44656_32414915.1153303165389
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_44656_32414915.1153303165389--

From java-user-return-22086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 10:07:48 2006
Return-Path: <java-user-return-22086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3699 invoked from network); 19 Jul 2006 10:07:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 10:07:48 -0000
Received: (qmail 75704 invoked by uid 500); 19 Jul 2006 10:07:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75680 invoked by uid 500); 19 Jul 2006 10:07:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75669 invoked by uid 99); 19 Jul 2006 10:07:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:07:40 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:07:39 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G38xb-0002bp-2s
	for java-user@lucene.apache.org; Wed, 19 Jul 2006 03:07:19 -0700
Message-ID: <5393608.post@talk.nabble.com>
Date: Wed, 19 Jul 2006 03:07:18 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <c68e39170607180900s37b3edc7uf8ebd0123131f1bd@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5363581.post@talk.nabble.com> <c68e39170607171013m39d56f4clae08a16bbc6fffee@mail.gmail.com> <5364830.post@talk.nabble.com> <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com> <5365216.post@talk.nabble.com> <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com> <5365363.post@talk.nabble.com> <c68e39170607171100o68549f17i482dd0761bc67d35@mail.gmail.com> <5378752.post@talk.nabble.com> <c68e39170607180900s37b3edc7uf8ebd0123131f1bd@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

ok, i tried today and it works greate :-) Thanks a lot for your help.

...one question at least... Is sorting not possible with this
Parallelreader? I get an error. Here my code:

  Private Sub LoadParallelIndex()
        Ram = New Lucene.Net.Store.RAMDirectory("C:\Lucene\index0_Name")
        pr = New ParallelReader
        pr.Add(IndexReader.Open(Ram))
        pr.Add(IndexReader.Open("C:\Lucene\index0_Address"))
        pr.Add(IndexReader.Open("C:\Lucene\index0_Locality"))
        pr.Add(IndexReader.Open("C:\Lucene\index0_Phonenumbers"))
        searcher = New IndexSearcher(pr)
        Me.TextBox2.Text += "Added all indexes to ParallelReader" +
vbNewLine
    End Sub

    Private Sub ParallelSearch(ByVal q As String)
        Dim field As SortField = New SortField("Nachname", SortField.STRING,
True)
        Dim sortByName As Sort = New Sort(field)
        Dim query As Query = QueryParser.Parse(q, "Nachname", New
StandardAnalyzer)
        Dim hits As Hits = searcher.Search(query, sortByName)
        Me.TextBox2.Text = ("Found " + hits.Length().ToString + "
document(s) that matched query '" + q + vbNewLine)
        Me.Refresh()

        Dim numHits = hits.Length
        If numHits > 250 Then
            numHits = 250
        End If

        For i As Integer = 0 To numHits - 1
            Dim doc As Document = hits.Doc(i)
            Me.TextBox2.Text += (i + 1).ToString + ".) " +
doc.Get("Nachname").ToString + ", " + doc.Get("Postleitzahl").ToString + " "
+ doc.Get("Postort").ToString + ", " + doc.Get("Vorwahl").ToString + "-" +
doc.Get("Rufnummer").ToString + vbNewLine
        Next

    End Sub


Can you take a look at it ?

Thanks,
Neils
-- 
View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5393608
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 10:28:37 2006
Return-Path: <java-user-return-22087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11610 invoked from network); 19 Jul 2006 10:28:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 10:28:37 -0000
Received: (qmail 20304 invoked by uid 500); 19 Jul 2006 10:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20265 invoked by uid 500); 19 Jul 2006 10:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20221 invoked by uid 99); 19 Jul 2006 10:28:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:28:28 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.70.192.51] (HELO smtp1.libero.it) (193.70.192.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:28:27 -0700
Received: from localhost (172.16.1.177) by smtp1.libero.it (7.0.027-DD01)
        id 4499641B024DCE88 for java-user@lucene.apache.org; Wed, 19 Jul 2006 12:28:05 +0200
Received: from smtp2.libero.it ([172.16.1.225])
 by localhost (asav0.libero.it [193.70.192.9]) (amavisd-new, port 10024)
 with ESMTP id 18034-05-3 for <java-user@lucene.apache.org>;
 Wed, 19 Jul 2006 12:28:05 +0200 (CEST)
Received: from [192.168.1.2] (adsl-ull-79-131.44-151.net24.it [151.44.131.79])
	by smtp2.libero.it (Postfix) with ESMTP id 7A7F1A8C43
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 12:28:04 +0200 (MEST)
Message-ID: <44BE0956.3070704@libero.it>
Date: Wed, 19 Jul 2006 12:28:38 +0200
From: Davide <davidin81@libero.it>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.0.2) Gecko/20060308 Thunderbird/1.5.0.2 Mnenhy/0.7.4.666
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem finding similar documents with MoreLikeThis method.
References: <20060719092236.44132.qmail@web26002.mail.ukl.yahoo.com>
In-Reply-To: <20060719092236.44132.qmail@web26002.mail.ukl.yahoo.com>
Content-Type: multipart/mixed;
 boundary="------------030108080206060705010308"
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030108080206060705010308
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit


mark harwood wrote:
> Looks like the class defaults to only searching a field called "contents".
> 
> Either:
> a) call setFieldNames() with null to force the class to use a list of all indexed fields derived from your IndexReader
> or
> b) call setFieldNames() with the explicit shortlist of field names you want to match on
> 
> 
> Cheers
> Mark
> 

I've tried but It still doesn't work. I've called the method:

setFieldNames(new String[]{"Field1", "Field2", ...}) with "Field1",
"Field2" the fields I used when I index the files but nothing *Query* is
still empty and MoreLikeThis doesn't work... I don't think the problem
is this.


For simplicity I give you a general code (a test) that doesn't work, You
can try it and tell me if also for you the code doesn't work...

I have also tried the *main* code of MoreLikeThis class and it doesn't
work.. (I have changed the Index_dir and the document to add to index)

------------------------------------------------------------------------
-------------------- MoreLikeThis Test ---------------------------------
------------------------------------------------------------------------
	
//Build an IndexWriter object to build an index
IndexWriter writer = new IndexWriter("C:\\Temp\\index", new
StandardAnalyzer(), true);
	
//----- Adding a document to index ----	
Document doc = new Document();
File f = new File("C:\\Document.txt");
FileReader fileReader = new FileReader(f);
	        	
Field field = new Field("contents", fileReader, Field.TermVector.YES);
	
doc.add(field);	
writer.addDocument(doc);
//--------------------------------------

	
//Optimize index and close
writer.optimize();
System.out.println("The documents in the index are: "+writer.docCount());
writer.close();
		
		    	
//-------- Now try to find similar documents

Directory indexDir = FSDirectory.getDirectory("C:\\Temp\\index", false);

IndexReader ir = IndexReader.open(indexDir);

MoreLikeThis mlt = new MoreLikeThis(ir);

//mlt.setFieldNames(new String[] {"contents"});

Query query = null;
if (fr != null){
	System.out.println("Parsing FileReader: " + fr);
	query = mlt.like(fr);
	
}	
		
System.out.println("The Query is: " + query);
		    	
IndexSearcher is = new IndexSearcher(indexDir);
		    		
Hits hits = is.search(query);
		    		
for (Iterator iterDoc = hits.iterator(); iterDoc.hasNext();) {
		    	    	
	Hit hit = (Hit)iterDoc.next();		    	
	System.out.println("\n\nSimilar file: "+hit.get("contents"));
}
------------------------------------------------------------------------------
		
NOTE:
1) Document.txt is a text file containg some text


I really don't understand why It doesn't work... I'm feel lost... :(




--------------030108080206060705010308
Content-Type: text/plain;
 name="Document.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline;
 filename="Document.txt"

Riprendo quanto scritto da anonimo in precedenza (con piccole correzioni)=
, per dargli il giusto risalto, in quanto le argomentazioni addotte mi pa=
iono assolutamente interessanti.

-----------------------------------------

L'obbligo di corrispondere ad un Ente X una tassa di possesso di un'appar=
ecchiatura Z per fruizione di servizi erogati da X ma anche, in parte pre=
ponderante e totalmente gratuita, da un insieme di altri Enti YY, condizi=
ona in modo grave il diritto dell'utenza alla fruizione gratuita dei soli=
 servizi erogati da YY.
Se l'Ente X si configura come servizio pubblico deve erogare solo servizi=
o pubblico non finalizzato a lucro, e solo chi lo utilizza pu=F2 essere a=
ssoggettato a pagamento a favore del Pubblico Erario (e non certo di X) d=
i un equo corrispettivo del servizio effettivamente goduto, indipendentem=
ente da dubbie controversie sul possesso di apparecchiature Z.
Se l'Ente X non si configurasse come servizio pubblico, o anche laddove i=
l servizio di X assumesse di fatto le stesse caratteristiche di servizi p=
rivati forniti da Enti YY venendo meno alle regole di servizio pubblico, =
diventerebbe discriminatoria della libera concorrenza e implicitamente an=
ticostituzionale qualsiasi legge proponente introiti a favore del solo op=
eratore X e quindi a danno degli operatori YY.
Allo stato dell'arte attuale, pagare solo X per detenere un sistema Z di =
fruizione dei servizi di X+YY =E8 quanto meno ingiusto, monopolistico, an=
ticoncorrenziale, iniquamente penalizzante gli Enti YY, oltre che disgust=
oso nella forma in cui =E8 imposto.
E' come se i proventi della tassa di circolazione auto li incamerasse per=
 legge solo una certa azienda automobilistica nazionale... (a parte che l=
a realt=E0 non sar=E0 molto diversa).

---------------------------------------

Premesso ci=F2, ed in attesa che le nuove tecnologie di Z trasformino le =
modalit=E0 di fruizione di detti servizi, rendendo possibili forme di pag=
amento basate sugli effettivi utilizzi di quanto erogato sia da X che da =
YY a condizioni liberamente accettate dall'Utenza, diamo una serie di con=
sigli comportamentali, praticamente un prontuario per l'Utenza stessa.

-----------------------------------------------
Consigli comportamentali per l'Utenza.
-----------------------------------------------

Non possedete apparecchiature di tipo Z ossia soggette a versamento canon=
e, e X insiste a chiedervelo sottintendendo che siete evasore e minaccian=
dovi in conseguenza: inviate ad X raccomandata RR in cui dichiarate sotto=
 Vs. responsabilit=E0 di non avere alcun possesso di Z marchingeni sogget=
ti a canone, ma aggiungete che dimostrazione contraria spetta a X, restan=
do voi disponibili a verifica ispettiva legalmente autorizzata, ma eviden=
ziate che qualunque abuso in tal senso, come anche qualsiasi ulteriore in=
sistenza di richieste accompagnata o meno da velate minacce o anche qualu=
nque acquisizione illecita e/o non documentata di Vs. informazioni person=
ali coperte da privacy verranno valutate in sede competente.

Possedete un marchingeno Z soggetto a canone di cui gi=E0 corrispondete a=
d X tassa di possesso, e desiderate liberarvene: idem come sopra, stessa =
procedura, stessa raccomandata RR, cambia solo la frase "dichiaro di non =
possedere" con la frase "dichiaro di non aver pi=F9 in mio possesso". E' =
sufficente, garantito!

Avete appena acquistato un apparecchio Z, o ve lo hanno regalato, o l'ave=
te vinto alla lotteria, insomma ne siete in possesso, ma non lo avete anc=
ora regolarizzato, ad esempio perch=E8 non avete fatto in tempo in quanto=
 ve lo ha da poco regalato un altro soggetto regolarmente abbonato, come =
vostro nonno non convivente. Ma intanto, come rapace falco, il sinistro i=
spettore dell'Ente X vi piomba alla porta tra capo e collo: prima di conc=
edere l'accesso alla Vs. abitazione verificate bene l'attendibilit=E0 del=
le credenziali di chi pretende di ispezionarvi attraverso l'apertura parz=
iale della porta bloccata dal catenino, e se la cosa non appare pi=F9 che=
 legittima o anche se solo la qualifica con cui si =E8 definito inizialme=
nte il personaggio non corrisponde perfettamente alle credenziali esibite=
, chiamate direttamente la Polizia (113) denunciando tentata violazione d=
i domicilio e/o millantato credito, ma se non ve la sentite semplicemente=
 chiudete la porta contestando l'intervento; eventualmente il 113 lo fare=
te se il sinistro figuro prende a calci la porta... Se invece tutto =E8 l=
egalmente autorizzato (ed =E8 improbabile), prima di togliere la catena d=
ichiarate spontaneamente a priori il regalo, l'acquisto, la vincita o alt=
ro di X come cosa appena avvenuta, ed esternate la vostra intenzione di r=
egolarizzarne il possesso appena possibile: l'ispettore di X ha raggiunto=
 il suo scopo (assicurarsi la provvigione per acquisizione nuovo abbonato=
), vi far=E0 firmare tale dichiarazione, vi consegner=E0 il modulo di abb=
onamento standard non maggiorato, e vedrete che si placher=E0 senza neppu=
re entrare. Chiaramente anche il giorno dopo potreste decidere di buttar =
via l'apparecchio Z in questione, disgustati dalla qualit=E0 dei programm=
i trasmessi ...! In tal caso procedete come al punto precedente.

Non dovrebbero esseci altre casistiche (l'ultima va opportunamente interp=
retata).

---------------------------------------

Ovviamente, dopo aver ricevuto RR di ritorno relativa a raccomandata invi=
ata ad X coi suddenti contenuti, potete permettervi di ignorare ulteriori=
 comunicazioni; non state a mettere in campo altre sanguisughe per la sod=
disfazione di far zittire X, lasciate fare, siate superiori a queste begh=
e...

Comunque =E8 buona norma acquistare sempre Z in contanti, ed anche compon=
enti isolati di Z, o comunque riconducibili a presenza di Z, in modo da n=
on lasciar alcuna traccia dei Vs. acquisti; a meno che non vogliate diver=
tirvi a mettere in crisi X, che vi piomber=E0 addoso entro 6 mesi, e pote=
te farlo accusando X di essere entrato in possesso di Vs. info coperte da=
 privacy di cui non vi ha concesso preventiva documentazione di liceit=E0=
 e di identificazione delle fonti; ma sappiate che nel giro trascinate pu=
re il punto vendita e la Vs. banca ... si sa benissimo chi =E8 coinvolto.=
 Per=F2 ripeto, certe soddisfazioni costano quintali di sanguisughe, seco=
ndo me molto di pi=F9 della contropartita del sottile piacere che potrest=
e gustare dopo anni.

Date retta a me, siate superiori a queste beghe, e godetevi le Vs. risors=
e. In santa pace.

A buon intenditor poche parole.

Bye.
-----------------------------------------------------------
Modificato dall' autore il 01 giugno 2006 19.54
-----------------------------------------------------------


--------------030108080206060705010308
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------030108080206060705010308--

From java-user-return-22088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 10:32:49 2006
Return-Path: <java-user-return-22088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13076 invoked from network); 19 Jul 2006 10:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 10:32:49 -0000
Received: (qmail 29221 invoked by uid 500); 19 Jul 2006 10:32:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29194 invoked by uid 500); 19 Jul 2006 10:32:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29183 invoked by uid 99); 19 Jul 2006 10:32:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:32:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:32:40 -0700
Received: by nf-out-0910.google.com with SMTP id o63so177822nfa
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 03:32:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ffHA8ZY82euNS1rigVLzGijrpPWXaCuQ4RIJo6LXAoGHCV2javXLmtvtzDQijRwpjnAfbQw3/xaRNzDDXT1kMCPpoAl0sysjxc2tqsIXeSQAAKZgW10Jcmw1ALVrFOuY+QuPGtFsxewaK4199vWe13mk6sLTwDJFu8Bo97hV/Eg=
Received: by 10.78.167.12 with SMTP id p12mr247306hue;
        Wed, 19 Jul 2006 03:32:19 -0700 (PDT)
Received: by 10.78.125.4 with HTTP; Wed, 19 Jul 2006 03:32:19 -0700 (PDT)
Message-ID: <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>
Date: Wed, 19 Jul 2006 12:32:19 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
In-Reply-To: <200607182058.56551.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_75839_8313186.1153305139056"
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
	 <200607182058.56551.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_75839_8313186.1153305139056
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Nicolas,

thanks for answering.

You wrote:
> And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to read =
a
1.4

What do you mean?
The luke website stated:  "Current version is 0.6. It has been released on
16 Feb 2005."
How can Luke be a Lucene-2 application if it was released on Feb 2005?

lude


On 7/18/06, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
>
> Le Mardi 18 Juillet 2006 20:53, lude a =E9crit:
> > Hello,
> >
> > sorry, didn't find the information elsewhere:
> >
> > 1.) Did the format of the lucene-index change between version 1.4.3 and
> > 2.0? 2.) Is it possible to use the old Luke-Tool with a new lucene 2
> index?
> >
> > Thanks
> > lude
>
> ASAIK, the format changed, but in a compatible way : a Lucene-2 app will
> be
> able to read a 1.4 index. The index format change is there :
> http://lucene.apache.org/java/docs/fileformats.html
>
> And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to read =
a
> 1.4
> index.
>
> Nicolas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_75839_8313186.1153305139056--

From java-user-return-22089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 10:44:48 2006
Return-Path: <java-user-return-22089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17328 invoked from network); 19 Jul 2006 10:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 10:44:48 -0000
Received: (qmail 49579 invoked by uid 500); 19 Jul 2006 10:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49154 invoked by uid 500); 19 Jul 2006 10:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49143 invoked by uid 99); 19 Jul 2006 10:44:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:44:42 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.33] (HELO web26011.mail.ukl.yahoo.com) (217.146.177.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jul 2006 03:44:39 -0700
Received: (qmail 52593 invoked by uid 60001); 19 Jul 2006 10:44:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=m7ZMu9Fn/QUVUgFc9vH2rYanypnJif1RRKbucVYKW8+33s5BXr4GKTqQcUHuvS9pD+uru1QTK5tBdjr5KnjqSQ3CO8EuxwMMISGTxbl8xgiChjpLAjEjdG9bBOgcRlcJ2QVFYj2Cyi6H1hCodiLxzhYtI9SgKQxUHb1nIvyOV90=  ;
Message-ID: <20060719104417.52591.qmail@web26011.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26011.mail.ukl.yahoo.com via HTTP; Wed, 19 Jul 2006 10:44:17 GMT
Date: Wed, 19 Jul 2006 10:44:17 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Problem finding similar documents with MoreLikeThis method.
To: java-user@lucene.apache.org
In-Reply-To: <44BE0956.3070704@libero.it>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>if (fr !=3D null){
>>    System.out.println("Parsing FileReader: " + fr);
>>    query =3D mlt.like(fr);

Not clear from your code but "fr" isn't the same object as "fileReader" is =
it?
If so, that could be positioned at the end of the file and MoreLikeThis wou=
ld therefore read nothing.



----- Original Message ----
From: Davide <davidin81@libero.it>
To: java-user@lucene.apache.org
Sent: Wednesday, 19 July, 2006 11:28:38 AM
Subject: Re: Problem finding similar documents with MoreLikeThis method.


mark harwood wrote:
> Looks like the class defaults to only searching a field called "contents"=
.
>=20
> Either:
> a) call setFieldNames() with null to force the class to use a list of all=
 indexed fields derived from your IndexReader
> or
> b) call setFieldNames() with the explicit shortlist of field names you wa=
nt to match on
>=20
>=20
> Cheers
> Mark
>=20

I've tried but It still doesn't work. I've called the method:

setFieldNames(new String[]{"Field1", "Field2", ...}) with "Field1",
"Field2" the fields I used when I index the files but nothing *Query* is
still empty and MoreLikeThis doesn't work... I don't think the problem
is this.


For simplicity I give you a general code (a test) that doesn't work, You
can try it and tell me if also for you the code doesn't work...

I have also tried the *main* code of MoreLikeThis class and it doesn't
work.. (I have changed the Index_dir and the document to add to index)

------------------------------------------------------------------------
-------------------- MoreLikeThis Test ---------------------------------
------------------------------------------------------------------------
   =20
//Build an IndexWriter object to build an index
IndexWriter writer =3D new IndexWriter("C:\\Temp\\index", new
StandardAnalyzer(), true);
   =20
//----- Adding a document to index ----   =20
Document doc =3D new Document();
File f =3D new File("C:\\Document.txt");
FileReader fileReader =3D new FileReader(f);
               =20
Field field =3D new Field("contents", fileReader, Field.TermVector.YES);
   =20
doc.add(field);   =20
writer.addDocument(doc);
//--------------------------------------

   =20
//Optimize index and close
writer.optimize();
System.out.println("The documents in the index are: "+writer.docCount());
writer.close();
       =20
               =20
//-------- Now try to find similar documents

Directory indexDir =3D FSDirectory.getDirectory("C:\\Temp\\index", false);

IndexReader ir =3D IndexReader.open(indexDir);

MoreLikeThis mlt =3D new MoreLikeThis(ir);

//mlt.setFieldNames(new String[] {"contents"});

Query query =3D null;
if (fr !=3D null){
    System.out.println("Parsing FileReader: " + fr);
    query =3D mlt.like(fr);
   =20
}   =20
       =20
System.out.println("The Query is: " + query);
               =20
IndexSearcher is =3D new IndexSearcher(indexDir);
                   =20
Hits hits =3D is.search(query);
                   =20
for (Iterator iterDoc =3D hits.iterator(); iterDoc.hasNext();) {
                       =20
    Hit hit =3D (Hit)iterDoc.next();               =20
    System.out.println("\n\nSimilar file: "+hit.get("contents"));
}
---------------------------------------------------------------------------=
---
       =20
NOTE:
1) Document.txt is a text file containg some text


I really don't understand why It doesn't work... I'm feel lost... :(




Riprendo quanto scritto da anonimo in precedenza (con piccole correzioni), =
per dargli il giusto risalto, in quanto le argomentazioni addotte mi paiono=
 assolutamente interessanti.

-----------------------------------------

L'obbligo di corrispondere ad un Ente X una tassa di possesso di un'apparec=
chiatura Z per fruizione di servizi erogati da X ma anche, in parte prepond=
erante e totalmente gratuita, da un insieme di altri Enti YY, condiziona in=
 modo grave il diritto dell'utenza alla fruizione gratuita dei soli servizi=
 erogati da YY.
Se l'Ente X si configura come servizio pubblico deve erogare solo servizio =
pubblico non finalizzato a lucro, e solo chi lo utilizza pu=F2 essere assog=
gettato a pagamento a favore del Pubblico Erario (e non certo di X) di un e=
quo corrispettivo del servizio effettivamente goduto, indipendentemente da =
dubbie controversie sul possesso di apparecchiature Z.
Se l'Ente X non si configurasse come servizio pubblico, o anche laddove il =
servizio di X assumesse di fatto le stesse caratteristiche di servizi priva=
ti forniti da Enti YY venendo meno alle regole di servizio pubblico, divent=
erebbe discriminatoria della libera concorrenza e implicitamente anticostit=
uzionale qualsiasi legge proponente introiti a favore del solo operatore X =
e quindi a danno degli operatori YY.
Allo stato dell'arte attuale, pagare solo X per detenere un sistema Z di fr=
uizione dei servizi di X+YY =E8 quanto meno ingiusto, monopolistico, antico=
ncorrenziale, iniquamente penalizzante gli Enti YY, oltre che disgustoso ne=
lla forma in cui =E8 imposto.
E' come se i proventi della tassa di circolazione auto li incamerasse per l=
egge solo una certa azienda automobilistica nazionale... (a parte che la re=
alt=E0 non sar=E0 molto diversa).

---------------------------------------

Premesso ci=F2, ed in attesa che le nuove tecnologie di Z trasformino le mo=
dalit=E0 di fruizione di detti servizi, rendendo possibili forme di pagamen=
to basate sugli effettivi utilizzi di quanto erogato sia da X che da YY a c=
ondizioni liberamente accettate dall'Utenza, diamo una serie di consigli co=
mportamentali, praticamente un prontuario per l'Utenza stessa.

-----------------------------------------------
Consigli comportamentali per l'Utenza.
-----------------------------------------------

Non possedete apparecchiature di tipo Z ossia soggette a versamento canone,=
 e X insiste a chiedervelo sottintendendo che siete evasore e minacciandovi=
 in conseguenza: inviate ad X raccomandata RR in cui dichiarate sotto Vs. r=
esponsabilit=E0 di non avere alcun possesso di Z marchingeni soggetti a can=
one, ma aggiungete che dimostrazione contraria spetta a X, restando voi dis=
ponibili a verifica ispettiva legalmente autorizzata, ma evidenziate che qu=
alunque abuso in tal senso, come anche qualsiasi ulteriore insistenza di ri=
chieste accompagnata o meno da velate minacce o anche qualunque acquisizion=
e illecita e/o non documentata di Vs. informazioni personali coperte da pri=
vacy verranno valutate in sede competente.

Possedete un marchingeno Z soggetto a canone di cui gi=E0 corrispondete ad =
X tassa di possesso, e desiderate liberarvene: idem come sopra, stessa proc=
edura, stessa raccomandata RR, cambia solo la frase "dichiaro di non possed=
ere" con la frase "dichiaro di non aver pi=F9 in mio possesso". E' sufficen=
te, garantito!

Avete appena acquistato un apparecchio Z, o ve lo hanno regalato, o l'avete=
 vinto alla lotteria, insomma ne siete in possesso, ma non lo avete ancora =
regolarizzato, ad esempio perch=E8 non avete fatto in tempo in quanto ve lo=
 ha da poco regalato un altro soggetto regolarmente abbonato, come vostro n=
onno non convivente. Ma intanto, come rapace falco, il sinistro ispettore d=
ell'Ente X vi piomba alla porta tra capo e collo: prima di concedere l'acce=
sso alla Vs. abitazione verificate bene l'attendibilit=E0 delle credenziali=
 di chi pretende di ispezionarvi attraverso l'apertura parziale della porta=
 bloccata dal catenino, e se la cosa non appare pi=F9 che legittima o anche=
 se solo la qualifica con cui si =E8 definito inizialmente il personaggio n=
on corrisponde perfettamente alle credenziali esibite, chiamate direttament=
e la Polizia (113) denunciando tentata violazione di domicilio e/o millanta=
to credito, ma se non ve la sentite semplicemente chiudete la porta contest=
ando l'intervento;
 eventualmente il 113 lo farete se il sinistro figuro prende a calci la por=
ta... Se invece tutto =E8 legalmente autorizzato (ed =E8 improbabile), prim=
a di togliere la catena dichiarate spontaneamente a priori il regalo, l'acq=
uisto, la vincita o altro di X come cosa appena avvenuta, ed esternate la v=
ostra intenzione di regolarizzarne il possesso appena possibile: l'ispettor=
e di X ha raggiunto il suo scopo (assicurarsi la provvigione per acquisizio=
ne nuovo abbonato), vi far=E0 firmare tale dichiarazione, vi consegner=E0 i=
l modulo di abbonamento standard non maggiorato, e vedrete che si placher=
=E0 senza neppure entrare. Chiaramente anche il giorno dopo potreste decide=
re di buttar via l'apparecchio Z in questione, disgustati dalla qualit=E0 d=
ei programmi trasmessi ...! In tal caso procedete come al punto precedente.

Non dovrebbero esseci altre casistiche (l'ultima va opportunamente interpre=
tata).

---------------------------------------

Ovviamente, dopo aver ricevuto RR di ritorno relativa a raccomandata inviat=
a ad X coi suddenti contenuti, potete permettervi di ignorare ulteriori com=
unicazioni; non state a mettere in campo altre sanguisughe per la soddisfaz=
ione di far zittire X, lasciate fare, siate superiori a queste beghe...

Comunque =E8 buona norma acquistare sempre Z in contanti, ed anche componen=
ti isolati di Z, o comunque riconducibili a presenza di Z, in modo da non l=
asciar alcuna traccia dei Vs. acquisti; a meno che non vogliate divertirvi =
a mettere in crisi X, che vi piomber=E0 addoso entro 6 mesi, e potete farlo=
 accusando X di essere entrato in possesso di Vs. info coperte da privacy d=
i cui non vi ha concesso preventiva documentazione di liceit=E0 e di identi=
ficazione delle fonti; ma sappiate che nel giro trascinate pure il punto ve=
ndita e la Vs. banca ... si sa benissimo chi =E8 coinvolto. Per=F2 ripeto, =
certe soddisfazioni costano quintali di sanguisughe, secondo me molto di pi=
=F9 della contropartita del sottile piacere che potreste gustare dopo anni.

Date retta a me, siate superiori a queste beghe, e godetevi le Vs. risorse.=
 In santa pace.

A buon intenditor poche parole.

Bye.
-----------------------------------------------------------
Modificato dall' autore il 01 giugno 2006 19.54
-----------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 10:55:50 2006
Return-Path: <java-user-return-22090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20218 invoked from network); 19 Jul 2006 10:55:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 10:55:50 -0000
Received: (qmail 67660 invoked by uid 500); 19 Jul 2006 10:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67600 invoked by uid 500); 19 Jul 2006 10:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67589 invoked by uid 99); 19 Jul 2006 10:55:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:55:42 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.70.192.55] (HELO smtp5.libero.it) (193.70.192.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 03:55:40 -0700
Received: from localhost (172.16.1.212) by smtp5.libero.it (7.0.027-DD01)
        id 4499264102687E4F for java-user@lucene.apache.org; Wed, 19 Jul 2006 12:55:19 +0200
Received: from smtp0.libero.it ([172.16.1.204])
 by localhost (asav6.libero.it [193.70.192.40]) (amavisd-new, port 10024)
 with ESMTP id 24445-04-9 for <java-user@lucene.apache.org>;
 Wed, 19 Jul 2006 12:55:18 +0200 (CEST)
Received: from [192.168.1.2] (adsl-ull-79-131.44-151.net24.it [151.44.131.79])
	by smtp0.libero.it (Postfix) with ESMTP id C54B23338DE
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 12:55:17 +0200 (MEST)
Message-ID: <44BE0FBA.5030400@libero.it>
Date: Wed, 19 Jul 2006 12:55:54 +0200
From: Davide <davidin81@libero.it>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.0.2) Gecko/20060308 Thunderbird/1.5.0.2 Mnenhy/0.7.4.666
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem finding similar documents with MoreLikeThis method.
References: <20060719104417.52591.qmail@web26011.mail.ukl.yahoo.com>
In-Reply-To: <20060719104417.52591.qmail@web26011.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Mark,

Yes "fr" is fileReader but I don't think is positioned at the end of
file because the same problem occurs when I pass to MoreLikeThis the
File (C:\\Document.txt) instead of a fileReader...


So also if I write:

MoreLikeThis mlt = new MoreLikeThis(ir);
Query query = mlt.like(new File(C:\\Document.txt));

query is empty... I don't know...


mark harwood wrote:
>>> if (fr != null){
>>>    System.out.println("Parsing FileReader: " + fr);
>>>    query = mlt.like(fr);
> 
> Not clear from your code but "fr" isn't the same object as "fileReader" is it?
> If so, that could be positioned at the end of the file and MoreLikeThis would therefore read nothing.
> 
> 
> 
> ----- Original Message ----
> From: Davide <davidin81@libero.it>
> To: java-user@lucene.apache.org
> Sent: Wednesday, 19 July, 2006 11:28:38 AM
> Subject: Re: Problem finding similar documents with MoreLikeThis method.
> 
> 
> mark harwood wrote:
>> Looks like the class defaults to only searching a field called "contents".
>>
>> Either:
>> a) call setFieldNames() with null to force the class to use a list of all indexed fields derived from your IndexReader
>> or
>> b) call setFieldNames() with the explicit shortlist of field names you want to match on
>>
>>
>> Cheers
>> Mark
>>
> 
> I've tried but It still doesn't work. I've called the method:
> 
> setFieldNames(new String[]{"Field1", "Field2", ...}) with "Field1",
> "Field2" the fields I used when I index the files but nothing *Query* is
> still empty and MoreLikeThis doesn't work... I don't think the problem
> is this.
> 
> 
> For simplicity I give you a general code (a test) that doesn't work, You
> can try it and tell me if also for you the code doesn't work...
> 
> I have also tried the *main* code of MoreLikeThis class and it doesn't
> work.. (I have changed the Index_dir and the document to add to index)
> 
> ------------------------------------------------------------------------
> -------------------- MoreLikeThis Test ---------------------------------
> ------------------------------------------------------------------------
>     
> //Build an IndexWriter object to build an index
> IndexWriter writer = new IndexWriter("C:\\Temp\\index", new
> StandardAnalyzer(), true);
>     
> //----- Adding a document to index ----    
> Document doc = new Document();
> File f = new File("C:\\Document.txt");
> FileReader fileReader = new FileReader(f);
>                 
> Field field = new Field("contents", fileReader, Field.TermVector.YES);
>     
> doc.add(field);    
> writer.addDocument(doc);
> //--------------------------------------
> 
>     
> //Optimize index and close
> writer.optimize();
> System.out.println("The documents in the index are: "+writer.docCount());
> writer.close();
>         
>                 
> //-------- Now try to find similar documents
> 
> Directory indexDir = FSDirectory.getDirectory("C:\\Temp\\index", false);
> 
> IndexReader ir = IndexReader.open(indexDir);
> 
> MoreLikeThis mlt = new MoreLikeThis(ir);
> 
> //mlt.setFieldNames(new String[] {"contents"});
> 
> Query query = null;
> if (fr != null){
>     System.out.println("Parsing FileReader: " + fr);
>     query = mlt.like(fr);
>     
> }    
>         
> System.out.println("The Query is: " + query);
>                 
> IndexSearcher is = new IndexSearcher(indexDir);
>                     
> Hits hits = is.search(query);
>                     
> for (Iterator iterDoc = hits.iterator(); iterDoc.hasNext();) {
>                         
>     Hit hit = (Hit)iterDoc.next();                
>     System.out.println("\n\nSimilar file: "+hit.get("contents"));
> }
> ------------------------------------------------------------------------------
>         
> NOTE:
> 1) Document.txt is a text file containg some text
> 
> 
> I really don't understand why It doesn't work... I'm feel lost... :(
> 
> 
> 
> 
> Riprendo quanto scritto da anonimo in precedenza (con piccole correzioni), per dargli il giusto risalto, in quanto le argomentazioni addotte mi paiono assolutamente interessanti.
> 
> -----------------------------------------
> 
> L'obbligo di corrispondere ad un Ente X una tassa di possesso di un'apparecchiatura Z per fruizione di servizi erogati da X ma anche, in parte preponderante e totalmente gratuita, da un insieme di altri Enti YY, condiziona in modo grave il diritto dell'utenza alla fruizione gratuita dei soli servizi erogati da YY.
> Se l'Ente X si configura come servizio pubblico deve erogare solo servizio pubblico non finalizzato a lucro, e solo chi lo utilizza pu essere assoggettato a pagamento a favore del Pubblico Erario (e non certo di X) di un equo corrispettivo del servizio effettivamente goduto, indipendentemente da dubbie controversie sul possesso di apparecchiature Z.
> Se l'Ente X non si configurasse come servizio pubblico, o anche laddove il servizio di X assumesse di fatto le stesse caratteristiche di servizi privati forniti da Enti YY venendo meno alle regole di servizio pubblico, diventerebbe discriminatoria della libera concorrenza e implicitamente anticostituzionale qualsiasi legge proponente introiti a favore del solo operatore X e quindi a danno degli operatori YY.
> Allo stato dell'arte attuale, pagare solo X per detenere un sistema Z di fruizione dei servizi di X+YY  quanto meno ingiusto, monopolistico, anticoncorrenziale, iniquamente penalizzante gli Enti YY, oltre che disgustoso nella forma in cui  imposto.
> E' come se i proventi della tassa di circolazione auto li incamerasse per legge solo una certa azienda automobilistica nazionale... (a parte che la realt non sar molto diversa).
> 
> ---------------------------------------
> 
> Premesso ci, ed in attesa che le nuove tecnologie di Z trasformino le modalit di fruizione di detti servizi, rendendo possibili forme di pagamento basate sugli effettivi utilizzi di quanto erogato sia da X che da YY a condizioni liberamente accettate dall'Utenza, diamo una serie di consigli comportamentali, praticamente un prontuario per l'Utenza stessa.
> 
> -----------------------------------------------
> Consigli comportamentali per l'Utenza.
> -----------------------------------------------
> 
> Non possedete apparecchiature di tipo Z ossia soggette a versamento canone, e X insiste a chiedervelo sottintendendo che siete evasore e minacciandovi in conseguenza: inviate ad X raccomandata RR in cui dichiarate sotto Vs. responsabilit di non avere alcun possesso di Z marchingeni soggetti a canone, ma aggiungete che dimostrazione contraria spetta a X, restando voi disponibili a verifica ispettiva legalmente autorizzata, ma evidenziate che qualunque abuso in tal senso, come anche qualsiasi ulteriore insistenza di richieste accompagnata o meno da velate minacce o anche qualunque acquisizione illecita e/o non documentata di Vs. informazioni personali coperte da privacy verranno valutate in sede competente.
> 
> Possedete un marchingeno Z soggetto a canone di cui gi corrispondete ad X tassa di possesso, e desiderate liberarvene: idem come sopra, stessa procedura, stessa raccomandata RR, cambia solo la frase "dichiaro di non possedere" con la frase "dichiaro di non aver pi in mio possesso". E' sufficente, garantito!
> 
> Avete appena acquistato un apparecchio Z, o ve lo hanno regalato, o l'avete vinto alla lotteria, insomma ne siete in possesso, ma non lo avete ancora regolarizzato, ad esempio perch non avete fatto in tempo in quanto ve lo ha da poco regalato un altro soggetto regolarmente abbonato, come vostro nonno non convivente. Ma intanto, come rapace falco, il sinistro ispettore dell'Ente X vi piomba alla porta tra capo e collo: prima di concedere l'accesso alla Vs. abitazione verificate bene l'attendibilit delle credenziali di chi pretende di ispezionarvi attraverso l'apertura parziale della porta bloccata dal catenino, e se la cosa non appare pi che legittima o anche se solo la qualifica con cui si  definito inizialmente il personaggio non corrisponde perfettamente alle credenziali esibite, chiamate direttamente la Polizia (113) denunciando tentata violazione di domicilio e/o millantato credito, ma se non ve la sentite semplicemente chiudete la porta contestando l'intervento;
>  eventualmente il 113 lo farete se il sinistro figuro prende a calci la porta... Se invece tutto  legalmente autorizzato (ed  improbabile), prima di togliere la catena dichiarate spontaneamente a priori il regalo, l'acquisto, la vincita o altro di X come cosa appena avvenuta, ed esternate la vostra intenzione di regolarizzarne il possesso appena possibile: l'ispettore di X ha raggiunto il suo scopo (assicurarsi la provvigione per acquisizione nuovo abbonato), vi far firmare tale dichiarazione, vi consegner il modulo di abbonamento standard non maggiorato, e vedrete che si placher senza neppure entrare. Chiaramente anche il giorno dopo potreste decidere di buttar via l'apparecchio Z in questione, disgustati dalla qualit dei programmi trasmessi ...! In tal caso procedete come al punto precedente.
> 
> Non dovrebbero esseci altre casistiche (l'ultima va opportunamente interpretata).
> 
> ---------------------------------------
> 
> Ovviamente, dopo aver ricevuto RR di ritorno relativa a raccomandata inviata ad X coi suddenti contenuti, potete permettervi di ignorare ulteriori comunicazioni; non state a mettere in campo altre sanguisughe per la soddisfazione di far zittire X, lasciate fare, siate superiori a queste beghe...
> 
> Comunque  buona norma acquistare sempre Z in contanti, ed anche componenti isolati di Z, o comunque riconducibili a presenza di Z, in modo da non lasciar alcuna traccia dei Vs. acquisti; a meno che non vogliate divertirvi a mettere in crisi X, che vi piomber addoso entro 6 mesi, e potete farlo accusando X di essere entrato in possesso di Vs. info coperte da privacy di cui non vi ha concesso preventiva documentazione di liceit e di identificazione delle fonti; ma sappiate che nel giro trascinate pure il punto vendita e la Vs. banca ... si sa benissimo chi  coinvolto. Per ripeto, certe soddisfazioni costano quintali di sanguisughe, secondo me molto di pi della contropartita del sottile piacere che potreste gustare dopo anni.
> 
> Date retta a me, siate superiori a queste beghe, e godetevi le Vs. risorse. In santa pace.
> 
> A buon intenditor poche parole.
> 
> Bye.
> -----------------------------------------------------------
> Modificato dall' autore il 01 giugno 2006 19.54
> -----------------------------------------------------------
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 11:00:21 2006
Return-Path: <java-user-return-22091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21202 invoked from network); 19 Jul 2006 11:00:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 11:00:20 -0000
Received: (qmail 76241 invoked by uid 500); 19 Jul 2006 11:00:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76205 invoked by uid 500); 19 Jul 2006 11:00:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76194 invoked by uid 99); 19 Jul 2006 11:00:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:00:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [80.236.3.112] (HELO grove.numericable.net) (80.236.3.112)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:00:13 -0700
Received: (qmail 22580 invoked from network); 19 Jul 2006 10:59:48 -0000
Received: from unknown (HELO [192.168.1.101]) ([81.220.88.208])
          (envelope-sender <nicolas.lalevee@anyware-tech.com>)
          by grove.numericable.net (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 19 Jul 2006 10:59:48 -0000
From: Nicolas =?iso-8859-15?q?Lalev=E9e?= <nicolas.lalevee@anyware-tech.com>
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
Date: Wed, 19 Jul 2006 12:59:29 +0200
User-Agent: KMail/1.9.3
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com> <200607182058.56551.nicolas.lalevee@anyware-tech.com> <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>
In-Reply-To: <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>
Organization: Anyware Technologies
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200607191259.29548.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Le Mercredi 19 Juillet 2006 12:32, lude a =E9crit=A0:
> Hi Nicolas,
>
> thanks for answering.
>
> You wrote:
> > And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to read
> > a
>
> 1.4
>
> What do you mean?
> The luke website stated:  "Current version is 0.6. It has been released on
> 16 Feb 2005."
> How can Luke be a Lucene-2 application if it was released on Feb 2005?

Yes, I should have not used the word Lucene-2 application, sorry.
BTW, about the index format described here :=20
http://lucene.apache.org/java/docs/fileformats.html
there is only concern about if Lucene >=3D 1.9 or if Lucene <=3D 1.4. As Lu=
ke was=20
release with a Lucene-1.9, it will work with Lucene 2.0 index beacause a=20
index 1.9 and an index 2.0 are the same.

Nicolas.

>
> lude
>
> On 7/18/06, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
> > Le Mardi 18 Juillet 2006 20:53, lude a =E9crit:
> > > Hello,
> > >
> > > sorry, didn't find the information elsewhere:
> > >
> > > 1.) Did the format of the lucene-index change between version 1.4.3 a=
nd
> > > 2.0? 2.) Is it possible to use the old Luke-Tool with a new lucene 2
> >
> > index?
> >
> > > Thanks
> > > lude
> >
> > ASAIK, the format changed, but in a compatible way : a Lucene-2 app will
> > be
> > able to read a 1.4 index. The index format change is there :
> > http://lucene.apache.org/java/docs/fileformats.html
> >
> > And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to read
> > a 1.4
> > index.
> >
> > Nicolas
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 11:15:07 2006
Return-Path: <java-user-return-22092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26774 invoked from network); 19 Jul 2006 11:15:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 11:15:06 -0000
Received: (qmail 9987 invoked by uid 500); 19 Jul 2006 11:14:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9727 invoked by uid 500); 19 Jul 2006 11:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9716 invoked by uid 99); 19 Jul 2006 11:14:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:14:58 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.220] (HELO web26009.mail.ukl.yahoo.com) (217.12.10.220)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jul 2006 04:14:57 -0700
Received: (qmail 98189 invoked by uid 60001); 19 Jul 2006 11:14:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ny/9AqfgCifYoJFxj9oIEqfv9debKcAVHpvFcLtAJOwcmpyFf2ZdQffiEkITBB9Zu9iD2EUFxlCgEAgXlwwRhvkMiA4a38erFenuRYenyEyfm3ZIOWwZSj0kL3o+Jj0zPGN4nSmoFCCm0WlSKQQelALwbFYK47an/Kyv8Hj5Yh4=  ;
Message-ID: <20060719111434.98187.qmail@web26009.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26009.mail.ukl.yahoo.com via HTTP; Wed, 19 Jul 2006 11:14:34 GMT
Date: Wed, 19 Jul 2006 11:14:34 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Problem finding similar documents with MoreLikeThis method.
To: java-user@lucene.apache.org
In-Reply-To: <44BE0FBA.5030400@libero.it>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does your index have only the one document?

MoreLikeThis will only generate queries with terms that occur in more than =
"minDocFreq" (default setting is 5).

This is to avoid the large overheads associated with searching for very com=
mon words in your example text.




----- Original Message ----
From: Davide <davidin81@libero.it>
To: java-user@lucene.apache.org
Sent: Wednesday, 19 July, 2006 11:55:54 AM
Subject: Re: Problem finding similar documents with MoreLikeThis method.

Thanks Mark,

Yes "fr" is fileReader but I don't think is positioned at the end of
file because the same problem occurs when I pass to MoreLikeThis the
File (C:\\Document.txt) instead of a fileReader...


So also if I write:

MoreLikeThis mlt =3D new MoreLikeThis(ir);
Query query =3D mlt.like(new File(C:\\Document.txt));

query is empty... I don't know...


mark harwood wrote:
>>> if (fr !=3D null){
>>>    System.out.println("Parsing FileReader: " + fr);
>>>    query =3D mlt.like(fr);
>=20
> Not clear from your code but "fr" isn't the same object as "fileReader" i=
s it?
> If so, that could be positioned at the end of the file and MoreLikeThis w=
ould therefore read nothing.
>=20
>=20
>=20
> ----- Original Message ----
> From: Davide <davidin81@libero.it>
> To: java-user@lucene.apache.org
> Sent: Wednesday, 19 July, 2006 11:28:38 AM
> Subject: Re: Problem finding similar documents with MoreLikeThis method.
>=20
>=20
> mark harwood wrote:
>> Looks like the class defaults to only searching a field called "contents=
".
>>
>> Either:
>> a) call setFieldNames() with null to force the class to use a list of al=
l indexed fields derived from your IndexReader
>> or
>> b) call setFieldNames() with the explicit shortlist of field names you w=
ant to match on
>>
>>
>> Cheers
>> Mark
>>
>=20
> I've tried but It still doesn't work. I've called the method:
>=20
> setFieldNames(new String[]{"Field1", "Field2", ...}) with "Field1",
> "Field2" the fields I used when I index the files but nothing *Query* is
> still empty and MoreLikeThis doesn't work... I don't think the problem
> is this.
>=20
>=20
> For simplicity I give you a general code (a test) that doesn't work, You
> can try it and tell me if also for you the code doesn't work...
>=20
> I have also tried the *main* code of MoreLikeThis class and it doesn't
> work.. (I have changed the Index_dir and the document to add to index)
>=20
> ------------------------------------------------------------------------
> -------------------- MoreLikeThis Test ---------------------------------
> ------------------------------------------------------------------------
>    =20
> //Build an IndexWriter object to build an index
> IndexWriter writer =3D new IndexWriter("C:\\Temp\\index", new
> StandardAnalyzer(), true);
>    =20
> //----- Adding a document to index ----   =20
> Document doc =3D new Document();
> File f =3D new File("C:\\Document.txt");
> FileReader fileReader =3D new FileReader(f);
>                =20
> Field field =3D new Field("contents", fileReader, Field.TermVector.YES);
>    =20
> doc.add(field);   =20
> writer.addDocument(doc);
> //--------------------------------------
>=20
>    =20
> //Optimize index and close
> writer.optimize();
> System.out.println("The documents in the index are: "+writer.docCount());
> writer.close();
>        =20
>                =20
> //-------- Now try to find similar documents
>=20
> Directory indexDir =3D FSDirectory.getDirectory("C:\\Temp\\index", false)=
;
>=20
> IndexReader ir =3D IndexReader.open(indexDir);
>=20
> MoreLikeThis mlt =3D new MoreLikeThis(ir);
>=20
> //mlt.setFieldNames(new String[] {"contents"});
>=20
> Query query =3D null;
> if (fr !=3D null){
>     System.out.println("Parsing FileReader: " + fr);
>     query =3D mlt.like(fr);
>    =20
> }   =20
>        =20
> System.out.println("The Query is: " + query);
>                =20
> IndexSearcher is =3D new IndexSearcher(indexDir);
>                    =20
> Hits hits =3D is.search(query);
>                    =20
> for (Iterator iterDoc =3D hits.iterator(); iterDoc.hasNext();) {
>                        =20
>     Hit hit =3D (Hit)iterDoc.next();               =20
>     System.out.println("\n\nSimilar file: "+hit.get("contents"));
> }
> -------------------------------------------------------------------------=
-----
>        =20
> NOTE:
> 1) Document.txt is a text file containg some text
>=20
>=20
> I really don't understand why It doesn't work... I'm feel lost... :(
>=20
>=20
>=20
>=20
> Riprendo quanto scritto da anonimo in precedenza (con piccole correzioni)=
, per dargli il giusto risalto, in quanto le argomentazioni addotte mi paio=
no assolutamente interessanti.
>=20
> -----------------------------------------
>=20
> L'obbligo di corrispondere ad un Ente X una tassa di possesso di un'appar=
ecchiatura Z per fruizione di servizi erogati da X ma anche, in parte prepo=
nderante e totalmente gratuita, da un insieme di altri Enti YY, condiziona =
in modo grave il diritto dell'utenza alla fruizione gratuita dei soli servi=
zi erogati da YY.
> Se l'Ente X si configura come servizio pubblico deve erogare solo servizi=
o pubblico non finalizzato a lucro, e solo chi lo utilizza pu=F2 essere ass=
oggettato a pagamento a favore del Pubblico Erario (e non certo di X) di un=
 equo corrispettivo del servizio effettivamente goduto, indipendentemente d=
a dubbie controversie sul possesso di apparecchiature Z.
> Se l'Ente X non si configurasse come servizio pubblico, o anche laddove i=
l servizio di X assumesse di fatto le stesse caratteristiche di servizi pri=
vati forniti da Enti YY venendo meno alle regole di servizio pubblico, dive=
nterebbe discriminatoria della libera concorrenza e implicitamente anticost=
ituzionale qualsiasi legge proponente introiti a favore del solo operatore =
X e quindi a danno degli operatori YY.
> Allo stato dell'arte attuale, pagare solo X per detenere un sistema Z di =
fruizione dei servizi di X+YY =E8 quanto meno ingiusto, monopolistico, anti=
concorrenziale, iniquamente penalizzante gli Enti YY, oltre che disgustoso =
nella forma in cui =E8 imposto.
> E' come se i proventi della tassa di circolazione auto li incamerasse per=
 legge solo una certa azienda automobilistica nazionale... (a parte che la =
realt=E0 non sar=E0 molto diversa).
>=20
> ---------------------------------------
>=20
> Premesso ci=F2, ed in attesa che le nuove tecnologie di Z trasformino le =
modalit=E0 di fruizione di detti servizi, rendendo possibili forme di pagam=
ento basate sugli effettivi utilizzi di quanto erogato sia da X che da YY a=
 condizioni liberamente accettate dall'Utenza, diamo una serie di consigli =
comportamentali, praticamente un prontuario per l'Utenza stessa.
>=20
> -----------------------------------------------
> Consigli comportamentali per l'Utenza.
> -----------------------------------------------
>=20
> Non possedete apparecchiature di tipo Z ossia soggette a versamento canon=
e, e X insiste a chiedervelo sottintendendo che siete evasore e minacciando=
vi in conseguenza: inviate ad X raccomandata RR in cui dichiarate sotto Vs.=
 responsabilit=E0 di non avere alcun possesso di Z marchingeni soggetti a c=
anone, ma aggiungete che dimostrazione contraria spetta a X, restando voi d=
isponibili a verifica ispettiva legalmente autorizzata, ma evidenziate che =
qualunque abuso in tal senso, come anche qualsiasi ulteriore insistenza di =
richieste accompagnata o meno da velate minacce o anche qualunque acquisizi=
one illecita e/o non documentata di Vs. informazioni personali coperte da p=
rivacy verranno valutate in sede competente.
>=20
> Possedete un marchingeno Z soggetto a canone di cui gi=E0 corrispondete a=
d X tassa di possesso, e desiderate liberarvene: idem come sopra, stessa pr=
ocedura, stessa raccomandata RR, cambia solo la frase "dichiaro di non poss=
edere" con la frase "dichiaro di non aver pi=F9 in mio possesso". E' suffic=
ente, garantito!
>=20
> Avete appena acquistato un apparecchio Z, o ve lo hanno regalato, o l'ave=
te vinto alla lotteria, insomma ne siete in possesso, ma non lo avete ancor=
a regolarizzato, ad esempio perch=E8 non avete fatto in tempo in quanto ve =
lo ha da poco regalato un altro soggetto regolarmente abbonato, come vostro=
 nonno non convivente. Ma intanto, come rapace falco, il sinistro ispettore=
 dell'Ente X vi piomba alla porta tra capo e collo: prima di concedere l'ac=
cesso alla Vs. abitazione verificate bene l'attendibilit=E0 delle credenzia=
li di chi pretende di ispezionarvi attraverso l'apertura parziale della por=
ta bloccata dal catenino, e se la cosa non appare pi=F9 che legittima o anc=
he se solo la qualifica con cui si =E8 definito inizialmente il personaggio=
 non corrisponde perfettamente alle credenziali esibite, chiamate direttame=
nte la Polizia (113) denunciando tentata violazione di domicilio e/o millan=
tato credito, ma se non ve la sentite semplicemente chiudete la porta conte=
stando l'intervento;
>  eventualmente il 113 lo farete se il sinistro figuro prende a calci la p=
orta... Se invece tutto =E8 legalmente autorizzato (ed =E8 improbabile), pr=
ima di togliere la catena dichiarate spontaneamente a priori il regalo, l'a=
cquisto, la vincita o altro di X come cosa appena avvenuta, ed esternate la=
 vostra intenzione di regolarizzarne il possesso appena possibile: l'ispett=
ore di X ha raggiunto il suo scopo (assicurarsi la provvigione per acquisiz=
ione nuovo abbonato), vi far=E0 firmare tale dichiarazione, vi consegner=E0=
 il modulo di abbonamento standard non maggiorato, e vedrete che si placher=
=E0 senza neppure entrare. Chiaramente anche il giorno dopo potreste decide=
re di buttar via l'apparecchio Z in questione, disgustati dalla qualit=E0 d=
ei programmi trasmessi ...! In tal caso procedete come al punto precedente.
>=20
> Non dovrebbero esseci altre casistiche (l'ultima va opportunamente interp=
retata).
>=20
> ---------------------------------------
>=20
> Ovviamente, dopo aver ricevuto RR di ritorno relativa a raccomandata invi=
ata ad X coi suddenti contenuti, potete permettervi di ignorare ulteriori c=
omunicazioni; non state a mettere in campo altre sanguisughe per la soddisf=
azione di far zittire X, lasciate fare, siate superiori a queste beghe...
>=20
> Comunque =E8 buona norma acquistare sempre Z in contanti, ed anche compon=
enti isolati di Z, o comunque riconducibili a presenza di Z, in modo da non=
 lasciar alcuna traccia dei Vs. acquisti; a meno che non vogliate divertirv=
i a mettere in crisi X, che vi piomber=E0 addoso entro 6 mesi, e potete far=
lo accusando X di essere entrato in possesso di Vs. info coperte da privacy=
 di cui non vi ha concesso preventiva documentazione di liceit=E0 e di iden=
tificazione delle fonti; ma sappiate che nel giro trascinate pure il punto =
vendita e la Vs. banca ... si sa benissimo chi =E8 coinvolto. Per=F2 ripeto=
, certe soddisfazioni costano quintali di sanguisughe, secondo me molto di =
pi=F9 della contropartita del sottile piacere che potreste gustare dopo ann=
i.
>=20
> Date retta a me, siate superiori a queste beghe, e godetevi le Vs. risors=
e. In santa pace.
>=20
> A buon intenditor poche parole.
>=20
> Bye.
> -----------------------------------------------------------
> Modificato dall' autore il 01 giugno 2006 19.54
> -----------------------------------------------------------
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 11:53:36 2006
Return-Path: <java-user-return-22093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40532 invoked from network); 19 Jul 2006 11:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 11:53:36 -0000
Received: (qmail 95795 invoked by uid 500); 19 Jul 2006 11:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95764 invoked by uid 500); 19 Jul 2006 11:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95745 invoked by uid 99); 19 Jul 2006 11:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:53:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 04:53:27 -0700
Received: from [10.65.253.200] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.15588927@mailer.syr.edu>; Wed, 19 Jul 2006 7:53:05 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <5390696.post@talk.nabble.com>
References: <5390696.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1BE6A7A3-C9F7-44D5-96FE-CD0ACBF4327E@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: Accessing "term frequency information" for documents
Date: Wed, 19 Jul 2006 07:53:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You should take a look at the Term Vector classes.  See the "Lucene  
In Action" book or my talk at ApacheCon last year on http:// 
www.cnlp.org/apachecon2005

-Grant

On Jul 19, 2006, at 12:48 AM, ericbae wrote:

>
> Hello.
>
> What I want to access through Lucene is this.
>
> I search for documents by inserting a particular query and for each  
> result
> that is returned, I want to view its term frequency information.
>
> For example, if documents A and B are returned, is there a easy way  
> to check
> which words appear in A and B and how many times they appear?
>
> thank you for your help in advance.
> -- 
> View this message in context: http://www.nabble.com/Accessing-% 
> 22term-frequency-information%22-for-documents-tf1964461.html#a5390696
> Sent from the Lucene - Java Users forum at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 12:22:58 2006
Return-Path: <java-user-return-22094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49433 invoked from network); 19 Jul 2006 12:22:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 12:22:58 -0000
Received: (qmail 51918 invoked by uid 500); 19 Jul 2006 12:22:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51437 invoked by uid 500); 19 Jul 2006 12:22:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51420 invoked by uid 99); 19 Jul 2006 12:22:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:22:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of p.imbemba@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:22:50 -0700
Received: by nf-out-0910.google.com with SMTP id b2so171452nfe
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 05:22:28 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type;
        b=sGPMnSfk0zmTbyrmi05KirdJBsmq6yEjQF+UR3RlBh6BgK11ixbHTUx92smkS4pvRqs5S+BhvoMiJF/NMSsI8Xc78BKHZr//YMn5uWv7byVI9uPEXhr2wSjRq+wvnxp9b0YEof8/zV2okVGbMCkDtTUZvzZZm2e1r6qTKQAhDnM=
Received: by 10.48.1.4 with SMTP id 4mr1601784nfa;
        Wed, 19 Jul 2006 05:22:28 -0700 (PDT)
Received: from ?10.10.197.20? ( [193.206.186.101])
        by mx.gmail.com with ESMTP id o9sm1378459nfa.2006.07.19.05.22.27;
        Wed, 19 Jul 2006 05:22:28 -0700 (PDT)
Message-ID: <44BE2403.7030205@gmail.com>
Date: Wed, 19 Jul 2006 14:22:27 +0200
From: Pasquale Imbemba <p.imbemba@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Java User <java-user@lucene.apache.org>
Subject: Lock obtain time out
Content-Type: multipart/mixed;
 boundary="------------050301040208030405020406"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------050301040208030405020406
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

I am checking a txt file with entries against an index generated with 
Lucene. Of the enclosed Searcher.java class, I use the isInLex(String 
noun) method, i.e. I read every line of the txt file and compare using 
isInLex(String noun) against the index. If it's contained it returns 
true otherwise it returns false.

The entire comparison is started from the enclosed Merger.java class. I 
read here 
(http://issues.apache.org/jira/browse/LUCENE-307?page=comments#action_12417477) 
and after that I tried to close the reader (is.close() in the 
Searcher.java class), but the problem persists.

I would be grateful for some tip as this is my first approach to Lucene...

tia
Pasquale

--------------050301040208030405020406
Content-Type: text/java;
 name="Searcher.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Searcher.java"

package lexicon;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.Directory;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.Hits;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.search.Query;

public class Searcher {
	private final String INDEXDIR = "C:/luceneindex";
	
	
	public boolean isInLex(String noun){
		boolean found = false;
		try {
			Directory fsDir = FSDirectory.getDirectory(INDEXDIR, false);
			IndexSearcher is = new IndexSearcher(fsDir);			
			QueryParser parser = new QueryParser("contents", new StandardAnalyzer());
			Query query = parser.parse(noun);
			Hits hits = is.search(query);
			
			if (hits.length() >=1){
				found = true;
			}
			
		} catch (Exception e){
			System.err.println(e.getMessage());
		}
		return found;		
	}
}
--------------050301040208030405020406
Content-Type: text/java;
 name="Merger.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="Merger.java"

package lexicon;

import java.io.*;
import java.util.Vector;
import lexicon.Searcher;
import file.LineCounter;

public class Merger {
	private Searcher s;
	private Vector v;
	private String to;
	
	
	public void merge (String from, String to){
		this.to = to;
		String element;
		s = new Searcher();
		v = new Vector();
		try{
			InputStreamReader isr = new InputStreamReader(new FileInputStream(from));
			BufferedReader bf = new BufferedReader(isr);
			element = bf.readLine();
			while (element != null){
				if (!s.isInLex(element)){
					v.add(element);
				}
				element = bf.readLine();
			}
		} catch (Exception e){
			System.err.print("Error: "+ e.getMessage());
			System.exit(-1);
		}
		System.out.println(LineCounter.getNumberOfRows("C:/lexpool/NounsSenzaFreq.txt") + " lines in the Baroni file.");
		System.out.println(v.size() + " entries to be added.");
		//fillLexicon(v);
	}
	
	private void fillLexicon(Vector v){
		//TODO: write a procedure that takes the vector and stores its content to disk
	}
	
}

--------------050301040208030405020406
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------050301040208030405020406--

From java-user-return-22095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 12:23:12 2006
Return-Path: <java-user-return-22095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49503 invoked from network); 19 Jul 2006 12:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 12:23:11 -0000
Received: (qmail 52867 invoked by uid 500); 19 Jul 2006 12:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52840 invoked by uid 500); 19 Jul 2006 12:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52829 invoked by uid 99); 19 Jul 2006 12:23:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:23:05 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.70.192.52] (HELO smtp2.libero.it) (193.70.192.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:23:04 -0700
Received: from localhost (172.16.1.202) by smtp2.libero.it (7.0.027-DD01)
        id 4464BDCD05BA4F2F for java-user@lucene.apache.org; Wed, 19 Jul 2006 14:22:43 +0200
Received: from smtp0.libero.it ([172.16.1.204])
 by localhost (asav16.libero.it [193.70.193.3]) (amavisd-new, port 10024)
 with ESMTP id 09047-04-2 for <java-user@lucene.apache.org>;
 Wed, 19 Jul 2006 14:22:42 +0200 (CEST)
Received: from [192.168.1.2] (adsl-ull-79-131.44-151.net24.it [151.44.131.79])
	by smtp0.libero.it (Postfix) with ESMTP id 50AC73338DC
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 14:22:38 +0200 (MEST)
Message-ID: <44BE2439.2070407@libero.it>
Date: Wed, 19 Jul 2006 14:23:21 +0200
From: Davide <davidin81@libero.it>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.0.2) Gecko/20060308 Thunderbird/1.5.0.2 Mnenhy/0.7.4.666
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem finding similar documents with MoreLikeThis method.
References: <20060719111434.98187.qmail@web26009.mail.ukl.yahoo.com>
In-Reply-To: <20060719111434.98187.qmail@web26009.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


mark harwood wrote:
> Does your index have only the one document?
> 
> MoreLikeThis will only generate queries with terms that occur in more than "minDocFreq" (default setting is 5).
> 
> This is to avoid the large overheads associated with searching for very common words in your example text.
> 
> 
> 

Thanks very much Mark.
I have specified:

setMinDocFreq(0);

for testing and It works... the query now isn't empty and the search
return a document...
So I think that the "problem" was that...

Thank you
Davide.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 12:38:15 2006
Return-Path: <java-user-return-22096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53000 invoked from network); 19 Jul 2006 12:38:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 12:38:15 -0000
Received: (qmail 73827 invoked by uid 500); 19 Jul 2006 12:38:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73799 invoked by uid 500); 19 Jul 2006 12:38:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73765 invoked by uid 99); 19 Jul 2006 12:38:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:38:07 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dragon-fly999@hotmail.com designates 65.54.246.113 as permitted sender)
Received: from [65.54.246.113] (HELO bay0-omc1-s41.bay0.hotmail.com) (65.54.246.113)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 05:38:05 -0700
Received: from hotmail.com ([207.46.9.113]) by bay0-omc1-s41.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Jul 2006 05:37:44 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 19 Jul 2006 05:37:44 -0700
Message-ID: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl>
Received: from 207.46.9.123 by by119fd.bay119.hotmail.msn.com with HTTP;
	Wed, 19 Jul 2006 12:37:41 GMT
X-Originating-IP: [206.35.175.10]
X-Originating-Email: [dragon-fly999@hotmail.com]
X-Sender: dragon-fly999@hotmail.com
From: "Dragon Fly" <dragon-fly999@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
Date: Wed, 19 Jul 2006 08:37:41 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 19 Jul 2006 12:37:44.0345 (UTC) FILETIME=[21FA0090:01C6AB30]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My index gets rebuilt every night so I probably can afford
to construct the filters right after the index is rebuilt.  How
do I check each document (for empty fields) though? Would
I use an IndexReader to loop through the documents? If so,
which method(s) in the IndexReader class should I use?
termDocs()??? Thank you.

>From: "Erick Erickson" <erickerickson@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Empty fields ...
>Date: Tue, 18 Jul 2006 13:08:53 -0400
>
>Quoting the guys "it depends" <G>...
>
>At root, a filter is a bitset. So size-wise, you are using 1 bit/doc (plus
>some small overhead). Both the storage required and the time to construct
>are dependent on the characteristics of your corpus. I guess the only way
>you can answer that for your particular situation is to test with your
>corpus. I can say that I was surprised at how very fast constructing a
>filter was in my situation. Which has no relevance to your situation 
><G>....
>
>More of "it depends" is the fluidity of your index. If you construct it 
>once
>and don't modify it, you could consider storing your filters permanently.
>Either in files or as "special documents" in your index or perhaps even in 
>a
>meta-data index. You can store documents of meta-data just by putting in
>fields that are in none of your other documents..... Deletions/additions 
>and
>re-optimizations will affect the internal lucene doc IDs, so you've got to
>be careful here about synchronization...
>
>You could consider constructing your filters all in a bunch when you open
>your searcher. Again, depending upon whether you modify your searcher often
>will determine whether you want to do this or not.
>
>What I'd really recommend is that you start by constructing your filters on
>the fly, without even a caching wrapper and get some timings, mostly for
>your peace of mind. I'd also do some timings when combining filters, just
>for yucks.. There's no reason not to use a caching wrapper if you expect to
>use these filters, which will load the first user with a delay, but you can
>warm up your filters by issuing some canned queries upon startup....
>
>Only if constructing any filters on the fly and using a caching wrapper
>proves unsatisfactory would I move on to any kind of permanent storage.
>Premature optimization and all that....
>
>So, I don't have a good answer since I don't have a detailed knowledge of
>your problem, but it should be relatively easy for you to get a sense of
>whether this is a reasonable approach or not.
>
>Hope this helps
>Erick

_________________________________________________________________
FREE pop-up blocking with the new MSN Toolbar  get it now! 
http://toolbar.msn.click-url.com/go/onm00200415ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 13:29:49 2006
Return-Path: <java-user-return-22097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82987 invoked from network); 19 Jul 2006 13:29:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 13:29:49 -0000
Received: (qmail 86339 invoked by uid 500); 19 Jul 2006 13:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86310 invoked by uid 500); 19 Jul 2006 13:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86299 invoked by uid 99); 19 Jul 2006 13:29:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:29:42 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of puneet.lakhina@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:29:41 -0700
Received: by py-out-1112.google.com with SMTP id f25so546277pyf
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 06:29:20 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FfkaH9ulCU/LZDOJGR9pVnt5JTZHIT4icpsCmXzf7kkNzU7K6KAb9vcKVJ65Y+J6m6/qIZWIbXalTGVFVUDlDZyjn9lMapVsrKFRSjv75jzbrfrf1wNHPxjoxvBVg767OqXGp868aiEBD0bHeoJxy+vmFQbbcGj9LoTuZsjtBJg=
Received: by 10.35.127.15 with SMTP id e15mr1060695pyn;
        Wed, 19 Jul 2006 06:29:20 -0700 (PDT)
Received: by 10.35.40.15 with HTTP; Wed, 19 Jul 2006 06:29:20 -0700 (PDT)
Message-ID: <ec1c47780607190629g5808706ewef615c430a450ad8@mail.gmail.com>
Date: Wed, 19 Jul 2006 18:59:20 +0530
From: "Puneet Lakhina" <puneet.lakhina@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene with Simple Database
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_55155_10116913.1153315760759"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_55155_10116913.1153315760759
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hi,
I have till now used lucene mainly for searching through text files. I
wanted to know if its sensible to use lucene with a database which does not
have fields with large text values.
for e.g. a table like

id       Name            Address
1        Name1          name1,strreet1,city1,country1
2        Name2          name2,strreet2,city2,country2
3        Name3          name3,strreet3,city3,country3
4        Name4          name4,strreet4,city4,country4

with abt a 10000 records like this.

Is it worth using and maintaining a lucene index instead of just creating
indices in the database on the fields to be searched for. Will using lucene
offer any significant performance benefit.
How much of a performance overhead will updating the index(each time the
database changes) would be.
All these fields need not be analyzed.

ANy help would be gr8.
-- 
Puneet

------=_Part_55155_10116913.1153315760759--

From java-user-return-22098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 13:48:29 2006
Return-Path: <java-user-return-22098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97751 invoked from network); 19 Jul 2006 13:48:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 13:48:28 -0000
Received: (qmail 41970 invoked by uid 500); 19 Jul 2006 13:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41950 invoked by uid 500); 19 Jul 2006 13:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41934 invoked by uid 99); 19 Jul 2006 13:48:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:48:26 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:48:25 -0700
Received: by py-out-1112.google.com with SMTP id f25so559777pyf
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 06:48:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KG94wtyHpd+hkIFnHQ3L8H7jufpNL515N9jW+XwcK3ExNx339pLlgiklkD4t+1/8OYCvEgO2dfsBdQhxhqerZhwinfs8KPRkYpWh+EFK2lpelPLg0TpPm9ZjTjkwWUfykYYKQXpbvI0fiscOsFENoSPJ5OsApvBPN1dy5ceCz/0=
Received: by 10.35.111.7 with SMTP id o7mr1092663pym;
        Wed, 19 Jul 2006 06:48:04 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 19 Jul 2006 06:48:04 -0700 (PDT)
Message-ID: <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com>
Date: Wed, 19 Jul 2006 09:48:04 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52096_8441508.1153316884202"
References: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_52096_8441508.1153316884202
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try something like

TermDocs         termDocs = reader.termDocs();
termDocs.seek(new Term("<relevant field name here>", ""));
while (termDocs.next()) {
    bits.set(termDocs.doc());
}

I *think* (and I'm remembering things folks wrote, haven't done this myself)
that the empty string for the Term matches all terms. If not, you might have
to wrap in in an outer loop that loops through all the elements, something
like

        bits = new BitSet(reader.maxDoc());

        TermDocs         termDocs = reader.termDocs();
        FilteredTermEnum fEnum = new FilteredTermEnum(reader, new
Term(field, ""));

        for (Term term = null; (term = fEnum.term()) != null; fEnum.next())
{
            termDocs.seek(new Term(
                    field,
                    term.text()));

            while (termDocs.next()) {
                bits.set(termDocs.doc());
            }
        }



That said, it may be best for you to loop through each document and add that
doc to the relevant filters if it had the fields you're interested in. You'd
only be fetching each document once, so it'd only be one loop. I don't know
enough about relative efficiencies to make a call here, probably depends
upon how many docs you're dealing with. I'd stop at the first solution that
works with acceptable performance unless you expect your corpus to grow
significantly.... And since this is done in off hours, there's not a
pressing reason to go with the very most efficient solution unless it takes
a too long or you expect to have orders of magnitued more documents in your
index eventually.

Best
Erick

------=_Part_52096_8441508.1153316884202--

From java-user-return-22099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 13:58:14 2006
Return-Path: <java-user-return-22099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3143 invoked from network); 19 Jul 2006 13:58:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 13:58:14 -0000
Received: (qmail 78610 invoked by uid 500); 19 Jul 2006 13:58:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78567 invoked by uid 500); 19 Jul 2006 13:58:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78537 invoked by uid 99); 19 Jul 2006 13:58:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:58:03 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 06:58:01 -0700
Received: by py-out-1112.google.com with SMTP id f25so566671pyf
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 06:57:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bMXFuQHgR4nqNWtWAWE9H4R5ie9DDmeRLnYNQf0uwl95j4wRAv/zSUHAVuXcMjQOHHv8Ij8a4wHU+Ada+sNvBVk/CbqLJ/4VU1qKKAtdHrBw24mzug7lqgVyjdz3MFolhT0074nd4bpYCzwh5jnG7a9OOkec/Fol60sn0rXRTQI=
Received: by 10.35.111.7 with SMTP id o7mr1106763pym;
        Wed, 19 Jul 2006 06:57:40 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 19 Jul 2006 06:57:40 -0700 (PDT)
Message-ID: <359a92830607190657r45a70bdcu12a46667242261e0@mail.gmail.com>
Date: Wed, 19 Jul 2006 09:57:40 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene with Simple Database
In-Reply-To: <ec1c47780607190629g5808706ewef615c430a450ad8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52444_621326.1153317460640"
References: <ec1c47780607190629g5808706ewef615c430a450ad8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_52444_621326.1153317460640
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, it depends. Are you having performance problems with a database
solution? If not, why in the world would you want to introduce another layer
of complexity?

Personally, while I think Lucene is great, I wouldn't recommend it in the
situation you describe unless you are having problems with the database
solution. 10,000 records shouldn't make any reasonable database even start
to breathe hard, unless you're using it in ways that don't readily come to
my mind.

And if you are having performance issues, the first thing I'd do is look at
making my database use more efficient.

This assumes you *need* a database. If you are just searching records (and
not joining across tables etc.), then you might think about forgetting the
database all together and just using Lucene.

But I can't stress enough that introducing solution that requires both a DB
and Lucene just to be "more efficient" is a bad idea. It's may be a good
thing if you are solving a real problem, but not an abstract "it would just
be better" problem. And in either case, a dual solution shouldn't be
approached until after you've made sure your problem is not just mis-use of
the tool you're using.

Best
Erick

------=_Part_52444_621326.1153317460640--

From java-user-return-22100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 14:13:40 2006
Return-Path: <java-user-return-22100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11310 invoked from network); 19 Jul 2006 14:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 14:13:39 -0000
Received: (qmail 18577 invoked by uid 500); 19 Jul 2006 14:13:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18544 invoked by uid 500); 19 Jul 2006 14:13:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18529 invoked by uid 99); 19 Jul 2006 14:13:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 07:13:34 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dragon-fly999@hotmail.com designates 65.54.246.236 as permitted sender)
Received: from [65.54.246.236] (HELO bay0-omc3-s36.bay0.hotmail.com) (65.54.246.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 07:13:33 -0700
Received: from hotmail.com ([207.46.9.102]) by bay0-omc3-s36.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Jul 2006 07:13:12 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 19 Jul 2006 07:13:12 -0700
Message-ID: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl>
Received: from 207.46.9.123 by by119fd.bay119.hotmail.msn.com with HTTP;
	Wed, 19 Jul 2006 14:13:09 GMT
X-Originating-IP: [206.35.175.10]
X-Originating-Email: [dragon-fly999@hotmail.com]
X-Sender: dragon-fly999@hotmail.com
From: "Dragon Fly" <dragon-fly999@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
Date: Wed, 19 Jul 2006 10:13:09 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 19 Jul 2006 14:13:12.0634 (UTC) FILETIME=[784D89A0:01C6AB3D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you very much.

>From: "Erick Erickson" <erickerickson@gmail.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: Empty fields ...
>Date: Wed, 19 Jul 2006 09:48:04 -0400
>
>Try something like
>
>TermDocs         termDocs = reader.termDocs();
>termDocs.seek(new Term("<relevant field name here>", ""));
>while (termDocs.next()) {
>    bits.set(termDocs.doc());
>}
>
>I *think* (and I'm remembering things folks wrote, haven't done this 
>myself)
>that the empty string for the Term matches all terms. If not, you might 
>have
>to wrap in in an outer loop that loops through all the elements, something
>like
>
>        bits = new BitSet(reader.maxDoc());
>
>        TermDocs         termDocs = reader.termDocs();
>        FilteredTermEnum fEnum = new FilteredTermEnum(reader, new
>Term(field, ""));
>
>        for (Term term = null; (term = fEnum.term()) != null; fEnum.next())
>{
>            termDocs.seek(new Term(
>                    field,
>                    term.text()));
>
>            while (termDocs.next()) {
>                bits.set(termDocs.doc());
>            }
>        }
>
>
>
>That said, it may be best for you to loop through each document and add 
>that
>doc to the relevant filters if it had the fields you're interested in. 
>You'd
>only be fetching each document once, so it'd only be one loop. I don't know
>enough about relative efficiencies to make a call here, probably depends
>upon how many docs you're dealing with. I'd stop at the first solution that
>works with acceptable performance unless you expect your corpus to grow
>significantly.... And since this is done in off hours, there's not a
>pressing reason to go with the very most efficient solution unless it takes
>a too long or you expect to have orders of magnitued more documents in your
>index eventually.
>
>Best
>Erick

_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee 
Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 15:35:55 2006
Return-Path: <java-user-return-22101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53647 invoked from network); 19 Jul 2006 15:35:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 15:35:54 -0000
Received: (qmail 48150 invoked by uid 500); 19 Jul 2006 15:35:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48128 invoked by uid 500); 19 Jul 2006 15:35:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48117 invoked by uid 99); 19 Jul 2006 15:35:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 08:35:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 08:35:46 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id E9230D90FE2
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 11:35:24 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 19 Jul 2006 11:35:27 -0400
X-Sasl-enc: l7fvfGnsU+MVN68I3nNi6se9yGUZFxbWFdDBwoJ6wCZh 1153323326
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id CC1DD2970
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 11:35:26 -0400 (EDT)
Message-ID: <44BE513B.1090900@mikemccandless.com>
Date: Wed, 19 Jul 2006 11:35:23 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock obtain time out
References: <44BE2403.7030205@gmail.com>
In-Reply-To: <44BE2403.7030205@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I would be grateful for some tip as this is my first approach to Lucene...

Is it your IndexSearcher instantiation that's raising the Lock obtain 
time out exception?

Can you look in your java.io.tmpdir and see if there are any Lucene lock 
files present even when Lucene is not running?  If so (and you're 
certain you don't have Lucene running) you should remove those files 
manually and then retry your program?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 15:59:57 2006
Return-Path: <java-user-return-22102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68250 invoked from network); 19 Jul 2006 15:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 15:59:57 -0000
Received: (qmail 14214 invoked by uid 500); 19 Jul 2006 15:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14187 invoked by uid 500); 19 Jul 2006 15:59:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14176 invoked by uid 99); 19 Jul 2006 15:59:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 08:59:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [83.206.165.34] (HELO mx.4dconcept.fr) (83.206.165.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 08:59:50 -0700
Received: from localhost (localhost [127.0.0.1])
	by mx.4dconcept.fr (Postfix) with ESMTP id 86E8317820
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 17:59:41 +0200 (CEST)
Received: from mx.4dconcept.fr ([127.0.0.1])
 by localhost (messagerie.montigny.4dconcept.fr [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 31415-07 for <java-user@lucene.apache.org>;
 Wed, 19 Jul 2006 17:59:39 +0200 (CEST)
Received: from [192.168.1.200] (unknown [192.168.1.200])
	by mx.4dconcept.fr (Postfix) with ESMTP id 8F32B177C8
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 17:59:39 +0200 (CEST)
Message-ID: <44BE56F7.4020808@4dconcept.fr>
Date: Wed, 19 Jul 2006 17:59:51 +0200
From: Nicolas Labrot <labrot@4dconcept.fr>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: BooleanQuery question
References: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl>
In-Reply-To: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at messagerie
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have made a simple class that parse an XML boolean expression to 
create predefined query .

Here is an unroll construction from an xml topic which reduce the search 
on path "/bssrs" and exclude the file "abstract.htm" :

        subsubTermQuery1 = new TermQuery(new Term("FILE", "abstract.htm"));
        subsubBoolQuery1.add( new BooleanClause(subsubTermQuery1 , 
BooleanClause.Occur.SHOULD) );
    subBoolQuery1.add( new BooleanClause(subsubBoolQuery1, 
BooleanClause.Occur.MUST_NOT) );

    subTermQuery2 = new TermQuery(new Term("PATH", "/bssrs"));
    subBoolQuery2.add( new BooleanClause(subTermQuery2 , 
BooleanClause.Occur.SHOULD) );

boolQuery.add( new BooleanClause(subBoolQuery1, BooleanClause.Occur.MUST) );
boolQuery.add( new BooleanClause(subBoolQuery2, 
BooleanClause.Occur.MUST) );

That give me after boolQuery.toString() this expression :
+(-(FILE:abstract.htm)) +(PATH:/bssrs)

If  I search with boolQuery, Lucene doesn't find anything.
If I modify by hand the query from "+(-(FILE:abstract.htm)) 
+(PATH:/bssrs)" to "-(FILE:abstract.htm) +(PATH:/bssrs)", Lucene find 
the correct list of document.

Does somebody know why ?

Thanks in advance,

Nicolas






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 16:22:30 2006
Return-Path: <java-user-return-22103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81052 invoked from network); 19 Jul 2006 16:22:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 16:22:29 -0000
Received: (qmail 77055 invoked by uid 500); 19 Jul 2006 16:22:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77024 invoked by uid 500); 19 Jul 2006 16:22:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77013 invoked by uid 99); 19 Jul 2006 16:22:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:22:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:22:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1BEB45B76E; Wed, 19 Jul 2006 09:21:54 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0ADFF7F403
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 09:21:54 -0700 (PDT)
Date: Wed, 19 Jul 2006 09:21:54 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607190919120.12926@hal.rescomp.berkeley.edu>
References: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl>
 <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: TermDocs         termDocs = reader.termDocs();
: termDocs.seek(new Term("<relevant field name here>", ""));
: while (termDocs.next()) {
:     bits.set(termDocs.doc());
: }
:
: I *think* (and I'm remembering things folks wrote, haven't done this myself)
: that the empty string for the Term matches all terms. If not, you might have

not quite ... a token containing the empty string matches documents that
contain that token -- not common for simple indexes, but it has it's uses.

what you want to do is create a bitset for every document that has a value
in that field, and then invert the BitSet.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 16:25:29 2006
Return-Path: <java-user-return-22104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82214 invoked from network); 19 Jul 2006 16:25:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 16:25:29 -0000
Received: (qmail 83372 invoked by uid 500); 19 Jul 2006 16:25:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83346 invoked by uid 500); 19 Jul 2006 16:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83335 invoked by uid 99); 19 Jul 2006 16:25:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:25:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:25:22 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7E2065B76E; Wed, 19 Jul 2006 09:25:02 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 786687F403
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 09:25:02 -0700 (PDT)
Date: Wed, 19 Jul 2006 09:25:02 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery question
In-Reply-To: <44BE56F7.4020808@4dconcept.fr>
Message-ID: <Pine.LNX.4.58.0607190922370.12926@hal.rescomp.berkeley.edu>
References: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl> <44BE56F7.4020808@4dconcept.fr>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: If  I search with boolQuery, Lucene doesn't find anything.
: If I modify by hand the query from "+(-(FILE:abstract.htm))
: +(PATH:/bssrs)" to "-(FILE:abstract.htm) +(PATH:/bssrs)", Lucene find
: the correct list of document.
:
: Does somebody know why ?

you can't have a boolean query containing only MUST_NOT clauses (which is
what (-(FILE:abstract.htm)) is.  it matches no documents, so the mandatory
qualification on it causes the query to fail for all docs.


:
: Thanks in advance,
:
: Nicolas
:
:
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 16:31:16 2006
Return-Path: <java-user-return-22105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83585 invoked from network); 19 Jul 2006 16:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 16:31:16 -0000
Received: (qmail 96482 invoked by uid 500); 19 Jul 2006 16:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96030 invoked by uid 500); 19 Jul 2006 16:31:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96019 invoked by uid 99); 19 Jul 2006 16:31:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:31:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [83.206.165.34] (HELO mx.4dconcept.fr) (83.206.165.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:31:09 -0700
Received: from localhost (localhost [127.0.0.1])
	by mx.4dconcept.fr (Postfix) with ESMTP id E40A717834
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 18:31:00 +0200 (CEST)
Received: from mx.4dconcept.fr ([127.0.0.1])
 by localhost (messagerie.montigny.4dconcept.fr [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 32210-06 for <java-user@lucene.apache.org>;
 Wed, 19 Jul 2006 18:30:58 +0200 (CEST)
Received: from [192.168.1.200] (unknown [192.168.1.200])
	by mx.4dconcept.fr (Postfix) with ESMTP id 554A1177D3
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 18:30:58 +0200 (CEST)
Message-ID: <44BE5E4E.7050108@4dconcept.fr>
Date: Wed, 19 Jul 2006 18:31:10 +0200
From: Nicolas Labrot <labrot@4dconcept.fr>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery question
References: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl> <44BE56F7.4020808@4dconcept.fr> <Pine.LNX.4.58.0607190922370.12926@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0607190922370.12926@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: by amavisd-new at messagerie
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

In my mind this restriction only apply on a query with just a MUST_NOT 
clause and not to a composed query. I've wrong.

thanks a lot,

Nicolas

> : If  I search with boolQuery, Lucene doesn't find anything.
> : If I modify by hand the query from "+(-(FILE:abstract.htm))
> : +(PATH:/bssrs)" to "-(FILE:abstract.htm) +(PATH:/bssrs)", Lucene find
> : the correct list of document.
> :
> : Does somebody know why ?
>
> you can't have a boolean query containing only MUST_NOT clauses (which is
> what (-(FILE:abstract.htm)) is.  it matches no documents, so the mandatory
> qualification on it causes the query to fail for all docs.
>
>
> :
> : Thanks in advance,
> :
> : Nicolas
> :
> :
> :
> :
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>   


-- 
Nicolas LABROT
Dpartement Ingnierie des Systmes

4DCONCEPT (http://www.4dconcept.fr)
41-43 Avenue du Centre
78180 Montigny le Bretonneux
FRANCE
Tl. : +33 (0) 1 61 08 50 20 / Fax. : +33 (0) 1 61 38 24 41

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 16:35:16 2006
Return-Path: <java-user-return-22106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85258 invoked from network); 19 Jul 2006 16:35:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 16:35:16 -0000
Received: (qmail 5719 invoked by uid 500); 19 Jul 2006 16:35:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5688 invoked by uid 500); 19 Jul 2006 16:35:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5671 invoked by uid 99); 19 Jul 2006 16:35:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:35:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:35:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DC5A65B76E; Wed, 19 Jul 2006 09:34:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D32037F403
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 09:34:48 -0700 (PDT)
Date: Wed, 19 Jul 2006 09:34:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery question
In-Reply-To: <44BE5E4E.7050108@4dconcept.fr>
Message-ID: <Pine.LNX.4.58.0607190933120.12926@hal.rescomp.berkeley.edu>
References: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl> <44BE56F7.4020808@4dconcept.fr>
 <Pine.LNX.4.58.0607190922370.12926@hal.rescomp.berkeley.edu>
 <44BE5E4E.7050108@4dconcept.fr>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: In my mind this restriction only apply on a query with just a MUST_NOT
: clause and not to a composed query. I've wrong.

right ... it's an issue for any BooleanQuery, regardless of how that query
may be wrapped in other boolean queries.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 16:37:12 2006
Return-Path: <java-user-return-22107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86241 invoked from network); 19 Jul 2006 16:37:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 16:37:12 -0000
Received: (qmail 15240 invoked by uid 500); 19 Jul 2006 16:36:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15219 invoked by uid 500); 19 Jul 2006 16:36:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15200 invoked by uid 99); 19 Jul 2006 16:36:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:36:58 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 09:36:57 -0700
Received: by py-out-1112.google.com with SMTP id f25so678689pyf
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 09:36:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dJBwvSXzVUipil3sr7MeRU1wC0KM0fxgydx+TJcEjuKpZ7LbZwVL8LDyCWqBMpG9keklDcUCG+4PCcE0aRO2FY7e8C4Hwjx2nA2hY6a5JaecJ+Y932pz/WEK68cDH06cF4f5WQXTuv2Q+zv8bEP1wqUFmGxx01OgfcWYXOKTSa8=
Received: by 10.35.121.9 with SMTP id y9mr1333084pym;
        Wed, 19 Jul 2006 09:36:36 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 19 Jul 2006 09:36:36 -0700 (PDT)
Message-ID: <359a92830607190936r1b9cfedeh21615d17e7b99693@mail.gmail.com>
Date: Wed, 19 Jul 2006 12:36:36 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <Pine.LNX.4.58.0607190919120.12926@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_57267_5532418.1153326996758"
References: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl>
	 <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com>
	 <Pine.LNX.4.58.0607190919120.12926@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_57267_5532418.1153326996758
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Ok, I'm confused again, not unusual.... To create a bitset for the following
condition

Zip IS NOT NULL

why invert the bitset?



a token containing the empty string matches documents that
> contain that token
>

Isn't this exactly what he wants? Or am I mis-reading this? I'm reading it
as "any document that contains a ZIP will match a token containing the empty
string"..... Or am I getting tokens and terms all mixed up?


what you want to do is create a bitset for every document that has a value
> in that field, and then invert the BitSet.
>
>

------=_Part_57267_5532418.1153326996758--

From java-user-return-22108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 19:22:02 2006
Return-Path: <java-user-return-22108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58761 invoked from network); 19 Jul 2006 19:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 19:22:01 -0000
Received: (qmail 47813 invoked by uid 500); 19 Jul 2006 19:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47782 invoked by uid 500); 19 Jul 2006 19:21:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47771 invoked by uid 99); 19 Jul 2006 19:21:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 12:21:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 12:21:53 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DC6195B791; Wed, 19 Jul 2006 12:21:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D38C67F403
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 12:21:29 -0700 (PDT)
Date: Wed, 19 Jul 2006 12:21:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <359a92830607190936r1b9cfedeh21615d17e7b99693@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607191213320.21372@hal.rescomp.berkeley.edu>
References: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl> 
 <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com> 
 <Pine.LNX.4.58.0607190919120.12926@hal.rescomp.berkeley.edu>
 <359a92830607190936r1b9cfedeh21615d17e7b99693@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Zip IS NOT NULL
:
: why invert the bitset?

i think the orriginal request was to find all docs where the field did
*not* have any value ... or in your vernacular: where Zip IS NULL

: a token containing the empty string matches documents that
: > contain that token
: >
:
: Isn't this exactly what he wants? Or am I mis-reading this? I'm reading it
: as "any document that contains a ZIP will match a token containing the empty
: string"..... Or am I getting tokens and terms all mixed up?

terminology is generally confusing, but in addition to the already
discussed "do you wnat docs with values, or docs without values" issue,
you also seem to be confused about one other thing: If a doc has a
Term for field "Zip" with some value then it will *not* match a Term with
the value "" for that field -- the empty string is a regular token like
any other string, and a Term with the epty string as it's value is just
like any other Term.

If you want all docs that have any value ofr a field, you can use a
TermEnum to iterate over all Terms for that field, and use a TermDOcs to
iterate over all docs that have that Term -- recording every doc with any
value for that field.  If you want all docs that *don't* have a value, you
then invert that BitSet.

RangeFilter makes that first part of the problem easy by letting you
specify "null" for both the lower and upper bounds -- you can use it as
is, or look at it for insperation for your own code.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 20:08:42 2006
Return-Path: <java-user-return-22109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78773 invoked from network); 19 Jul 2006 20:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 20:08:42 -0000
Received: (qmail 22690 invoked by uid 500); 19 Jul 2006 20:08:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22669 invoked by uid 500); 19 Jul 2006 20:08:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22658 invoked by uid 99); 19 Jul 2006 20:08:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 13:08:35 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 13:08:34 -0700
Received: by py-out-1112.google.com with SMTP id f25so797047pyf
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 13:08:13 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=spOwMW9ENNCBIRvbGpcPTskfdA1VTH8csvCT/pXovIa64mge6Ybt5tpWZ+JNB1My+XORz6RhHaTd6oAu5ayKE0KxL3dGcn6R97uLmcNcfdnjvdPolAKIExwRcIppToHWm5Sm/bETDNYDU5lRRYLEQd52ih6FLdOm8/MW6TGWk/I=
Received: by 10.35.62.19 with SMTP id p19mr1650828pyk;
        Wed, 19 Jul 2006 13:08:13 -0700 (PDT)
Received: by 10.35.31.4 with HTTP; Wed, 19 Jul 2006 13:08:13 -0700 (PDT)
Message-ID: <359a92830607191308p7b7128bbx653c5b370c0c3c2f@mail.gmail.com>
Date: Wed, 19 Jul 2006 16:08:13 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <Pine.LNX.4.58.0607191213320.21372@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_62497_16215679.1153339693563"
References: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl>
	 <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com>
	 <Pine.LNX.4.58.0607190919120.12926@hal.rescomp.berkeley.edu>
	 <359a92830607190936r1b9cfedeh21615d17e7b99693@mail.gmail.com>
	 <Pine.LNX.4.58.0607191213320.21372@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_62497_16215679.1153339693563
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Chris:

Thanks much for that clarification, it helps a lot. The original request was
to find docs wthat were NOT NULL, so  I'm glad I'm not the only one who
remembers things...er...incongruently with reality <G>....

About empty values for a field. That'll teach me to try to remember without
looking back. I vaguely remember that "" had an "interesting" meaning in
some circumstance. Looking back, it was exactly what you said, wrapping a
TermDocs in a TermEnum....

But with your RangeFilter comment, that seems unnecessary. You can use a
RangeFilter with null, null as bounds, then just flip the bits in the
resulting bitset, right? Or, for that matter, if you know a-priori the
minimum and maximum possible values for a field, just make the RangeFilter
with those values and it's all done in one line of code. So somebody else
has already done all the work. Now if users like me would just read the
documentation.......

That way, the code created by experts worries about efficiency <G>.

Thanks again
Erick

------=_Part_62497_16215679.1153339693563--

From java-user-return-22110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 20:17:14 2006
Return-Path: <java-user-return-22110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81682 invoked from network); 19 Jul 2006 20:17:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 20:17:14 -0000
Received: (qmail 37775 invoked by uid 500); 19 Jul 2006 20:17:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37748 invoked by uid 500); 19 Jul 2006 20:17:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37737 invoked by uid 99); 19 Jul 2006 20:17:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 13:17:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 13:17:06 -0700
Received: by py-out-1112.google.com with SMTP id f25so801586pyf
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 13:16:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kfOYGFOunR2DbItVebkOjLjcd/zllzP01ylbLKSyngBM0STcfyWTheIRRmn4hXUzwr5rFSfGoR0ndYqnKVROrW1XzXtkzESZ6ddYeu5WzG1cIKjcVAmv59a88K3yDAfjOtmsK8lXJU2AihZtZHdNVZdQFVPOXLZIxYLqMtL2jzI=
Received: by 10.35.90.20 with SMTP id s20mr1649170pyl;
        Wed, 19 Jul 2006 13:16:46 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Wed, 19 Jul 2006 13:16:45 -0700 (PDT)
Message-ID: <c68e39170607191316x6b556362meff28d9ff909f88@mail.gmail.com>
Date: Wed, 19 Jul 2006 16:16:45 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Part of Index (spezial Field) into Memory
In-Reply-To: <5393608.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5363581.post@talk.nabble.com> <5364830.post@talk.nabble.com>
	 <c68e39170607171034r2e32b459wae645a04153e980b@mail.gmail.com>
	 <5365216.post@talk.nabble.com>
	 <c68e39170607171048x48b39a79we63fd86d73e8c03f@mail.gmail.com>
	 <5365363.post@talk.nabble.com>
	 <c68e39170607171100o68549f17i482dd0761bc67d35@mail.gmail.com>
	 <5378752.post@talk.nabble.com>
	 <c68e39170607180900s37b3edc7uf8ebd0123131f1bd@mail.gmail.com>
	 <5393608.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hmmm, Lucene.Net eh?
There have been a number of bug fixes to ParallelReader over the last
month or two... I wonder if they have been ported to Lucene.Net yet...
(I'm not sure how it's maintained).
You could file a Lucene.net bug, or make a test for the Java version
of Lucene and try it out.


-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

On 7/19/06, neils <neils@gmx.net> wrote:
>
> Hi,
>
> ok, i tried today and it works greate :-) Thanks a lot for your help.
>
> ...one question at least... Is sorting not possible with this
> Parallelreader? I get an error. Here my code:
>
>   Private Sub LoadParallelIndex()
>         Ram = New Lucene.Net.Store.RAMDirectory("C:\Lucene\index0_Name")
>         pr = New ParallelReader
>         pr.Add(IndexReader.Open(Ram))
>         pr.Add(IndexReader.Open("C:\Lucene\index0_Address"))
>         pr.Add(IndexReader.Open("C:\Lucene\index0_Locality"))
>         pr.Add(IndexReader.Open("C:\Lucene\index0_Phonenumbers"))
>         searcher = New IndexSearcher(pr)
>         Me.TextBox2.Text += "Added all indexes to ParallelReader" +
> vbNewLine
>     End Sub
>
>     Private Sub ParallelSearch(ByVal q As String)
>         Dim field As SortField = New SortField("Nachname", SortField.STRING,
> True)
>         Dim sortByName As Sort = New Sort(field)
>         Dim query As Query = QueryParser.Parse(q, "Nachname", New
> StandardAnalyzer)
>         Dim hits As Hits = searcher.Search(query, sortByName)
>         Me.TextBox2.Text = ("Found " + hits.Length().ToString + "
> document(s) that matched query '" + q + vbNewLine)
>         Me.Refresh()
>
>         Dim numHits = hits.Length
>         If numHits > 250 Then
>             numHits = 250
>         End If
>
>         For i As Integer = 0 To numHits - 1
>             Dim doc As Document = hits.Doc(i)
>             Me.TextBox2.Text += (i + 1).ToString + ".) " +
> doc.Get("Nachname").ToString + ", " + doc.Get("Postleitzahl").ToString + " "
> + doc.Get("Postort").ToString + ", " + doc.Get("Vorwahl").ToString + "-" +
> doc.Get("Rufnummer").ToString + vbNewLine
>         Next
>
>     End Sub
>
>
> Can you take a look at it ?
>
> Thanks,
> Neils
> --
> View this message in context: http://www.nabble.com/Part-of-Index-%28spezial-Field%29-into-Memory-tf1955582.html#a5393608
> Sent from the Lucene - Java Users forum at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 20:54:24 2006
Return-Path: <java-user-return-22111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96835 invoked from network); 19 Jul 2006 20:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 20:54:23 -0000
Received: (qmail 2618 invoked by uid 500); 19 Jul 2006 20:54:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2591 invoked by uid 500); 19 Jul 2006 20:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2571 invoked by uid 99); 19 Jul 2006 20:54:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 13:54:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.209.1.80] (HELO webmail.cymfony.com) (65.209.1.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 13:54:14 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: NFS/iSCSI SAN with Lucene
Date: Wed, 19 Jul 2006 16:53:51 -0400
Message-ID: <13F36D2926AD444697093282F20041B704A8BDC4@buf-ex01.cymfony.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NFS/iSCSI SAN with Lucene
Thread-Index: AcardXDSsNVh+PTeTm2FjkLc1Sdqcg==
From: "Peter Kim" <pkim@cymfony.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I did a search on the Lucene list archives, found a lot of posts about
the use of Lucene with NFS and how there are locking issues, but don't
see anybody coming to a real solution to this. Here's the most promising
thread I found:

http://www.gossamer-threads.com/lists/lucene/java-user/8302?search_strin
g=3Dnfs%20locking;#8302


Does anyone have any experience putting Lucene indexes on a SAN that's
connected over iSCSI rather than NFS? Does iSCSI have the same locking
issues as NFS?

Thanks,
Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 21:11:44 2006
Return-Path: <java-user-return-22112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3439 invoked from network); 19 Jul 2006 21:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 21:11:43 -0000
Received: (qmail 39051 invoked by uid 500); 19 Jul 2006 21:11:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39025 invoked by uid 500); 19 Jul 2006 21:11:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39014 invoked by uid 99); 19 Jul 2006 21:11:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:11:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of p.imbemba@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:11:36 -0700
Received: by nf-out-0910.google.com with SMTP id b2so325950nfe
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 14:11:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=UndaMz0XrHP27wdn2n9h2DBBzVQvEzxYFmYzXwvOzShsMzgmofF4AQcU6gRepRBpflUxr0KAE6REXli28n2Oac4/Ex5pPjT+p/dUgxgHuvp1AEFZCbRGvpcn87ksgClOAjWhVydeqHU/HiTzXLGvg3DudDPdbC32O6Jzov5MMs4=
Received: by 10.48.162.15 with SMTP id k15mr2047369nfe;
        Wed, 19 Jul 2006 14:11:14 -0700 (PDT)
Received: from ?192.168.0.3? ( [87.14.104.165])
        by mx.gmail.com with ESMTP id c1sm342052nfe.2006.07.19.14.11.11;
        Wed, 19 Jul 2006 14:11:14 -0700 (PDT)
Message-ID: <44BE9FE8.4080106@gmail.com>
Date: Wed, 19 Jul 2006 23:11:04 +0200
From: Pasquale Imbemba <p.imbemba@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock obtain time out (&OT: Mailing list settings)
References: <44BE2403.7030205@gmail.com> <44BE513B.1090900@mikemccandless.com>
In-Reply-To: <44BE513B.1090900@mikemccandless.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael McCandless wrote:

>
>> I would be grateful for some tip as this is my first approach to 
>> Lucene...
>
>
> Is it your IndexSearcher instantiation that's raising the Lock obtain 
> time out exception?

Yes that's true. I removed the lock files and that was the problem. 
Thanks a lot.

BTW is it possible to set mailinglist so to obtain my own message in the 
inbox, i.e. when sending to the ML, I get a copy as well as all other 
subscribers?

Bye
Pasquale

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 21:17:01 2006
Return-Path: <java-user-return-22113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4454 invoked from network); 19 Jul 2006 21:17:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 21:17:01 -0000
Received: (qmail 45950 invoked by uid 500); 19 Jul 2006 21:16:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45725 invoked by uid 500); 19 Jul 2006 21:16:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45714 invoked by uid 99); 19 Jul 2006 21:16:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:16:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:16:54 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 935A5D9158B
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 17:16:32 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Wed, 19 Jul 2006 17:16:35 -0400
X-Sasl-enc: q4MlIuGtrJzlKZMRN5Ka4KjTlVyLXys3YFJgpFWp3cg5 1153343786
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 49AEB8069
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 17:16:25 -0400 (EDT)
Message-ID: <44BEA12E.90107@mikemccandless.com>
Date: Wed, 19 Jul 2006 17:16:30 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock obtain time out (&OT: Mailing list settings)
References: <44BE2403.7030205@gmail.com> <44BE513B.1090900@mikemccandless.com> <44BE9FE8.4080106@gmail.com>
In-Reply-To: <44BE9FE8.4080106@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> BTW is it possible to set mailinglist so to obtain my own message in the 
> inbox, i.e. when sending to the ML, I get a copy as well as all other 
> subscribers?

If you are subscribed to java-user then you should have received your 
own original message (and my response) to the list -- are you not seeing 
that?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 21:20:05 2006
Return-Path: <java-user-return-22114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5391 invoked from network); 19 Jul 2006 21:20:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 21:20:05 -0000
Received: (qmail 50233 invoked by uid 500); 19 Jul 2006 21:20:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50209 invoked by uid 500); 19 Jul 2006 21:20:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50197 invoked by uid 99); 19 Jul 2006 21:20:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:20:00 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of p.imbemba@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:19:59 -0700
Received: by nf-out-0910.google.com with SMTP id b2so327990nfe
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 14:19:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CCHH8biFV3ke1T6+darlFNGHaFSkey6Gl4umrJdJmfBz80ojJLy2evkj+gw8gA0J7ywWuUEXbq7AXV2Rs8B2GDu9sSw3AcDakQc8nq8yqKdTVR2undcLA2JAm3Ydm/kbmYYUKzrsrfyFZsM6wWSaLOa9rrQcb1tmuRJY3+a8BZs=
Received: by 10.48.143.13 with SMTP id q13mr2083839nfd;
        Wed, 19 Jul 2006 14:19:38 -0700 (PDT)
Received: from ?192.168.0.3? ( [87.14.104.165])
        by mx.gmail.com with ESMTP id v20sm73742nfc.2006.07.19.14.19.33;
        Wed, 19 Jul 2006 14:19:37 -0700 (PDT)
Message-ID: <44BEA1DF.4080208@gmail.com>
Date: Wed, 19 Jul 2006 23:19:27 +0200
From: Pasquale Imbemba <p.imbemba@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.12) Gecko/20050915
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock obtain time out (&OT: Mailing list settings)
References: <44BE2403.7030205@gmail.com> <44BE513B.1090900@mikemccandless.com> <44BE9FE8.4080106@gmail.com> <44BEA12E.90107@mikemccandless.com>
In-Reply-To: <44BEA12E.90107@mikemccandless.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael McCandless wrote:

> If you are subscribed to java-user then you should have received your 
> own original message (and my response) to the list -- are you not 
> seeing that?

No, I didn't receive mine --just yours (and those of others of course).

Pasquale

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 19 21:49:28 2006
Return-Path: <java-user-return-22115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17372 invoked from network); 19 Jul 2006 21:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2006 21:49:28 -0000
Received: (qmail 11258 invoked by uid 500); 19 Jul 2006 21:49:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11235 invoked by uid 500); 19 Jul 2006 21:49:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11217 invoked by uid 99); 19 Jul 2006 21:49:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:49:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 14:49:22 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 70E79D909D3
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 17:49:00 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 19 Jul 2006 17:49:03 -0400
X-Sasl-enc: 0ow02JKH3NQKdVP3ijxdcPbEPAD47pMQX/R8wCGqtlJy 1153345742
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id D1274203C
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 17:49:02 -0400 (EDT)
Message-ID: <44BEA8CB.2020604@mikemccandless.com>
Date: Wed, 19 Jul 2006 17:48:59 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NFS/iSCSI SAN with Lucene
References: <13F36D2926AD444697093282F20041B704A8BDC4@buf-ex01.cymfony.com>
In-Reply-To: <13F36D2926AD444697093282F20041B704A8BDC4@buf-ex01.cymfony.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I did a search on the Lucene list archives, found a lot of posts about
> the use of Lucene with NFS and how there are locking issues, but don't
> see anybody coming to a real solution to this.

We are trying to fix this.  Many people seem to hit it.

The current plan is to first decouple the Locking implementation from 
the Directory implementation:

   http://issues.apache.org/jira/browse/LUCENE-305

and then create a Locking implementation that uses native OS locks 
instead of the simple file-existence locks (used now) that do not work 
with NFS.

But the development is still in process and so it won't be until a 
future Lucene release that this is fixed correctly.

A very good workaround is to use or be inspired by the approach that the 
Solr project:

   http://incubator.apache.org/solr/features.html
   http://incubator.apache.org/solr/tutorial.html

uses, described here:

   http://wiki.apache.org/solr/CollectionDistribution

The gist is, your single Java process that has an IndexWriter 
periodically snapshots the index at a known-safe time, and then the 
multiple Searchers switch to the latest snapshot once the snapshot is 
complete.

Solr actually distributes copies of the index to each Searcher's local 
storage, but you could probably modify this approach so that, instead, 
the Searchers all share a single copy off your SAN.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 00:15:58 2006
Return-Path: <java-user-return-22116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73274 invoked from network); 20 Jul 2006 00:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 00:15:58 -0000
Received: (qmail 47768 invoked by uid 500); 20 Jul 2006 00:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47727 invoked by uid 500); 20 Jul 2006 00:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 41617 invoked by uid 99); 19 Jul 2006 21:14:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
X-Sasl-enc: MU1fAVrWZeE9ETjDzdETfhq9uFBrsoaiJACy5qVFRwNi 1153343637
Message-ID: <44BEA092.9020507@mikemccandless.com>
Date: Wed, 19 Jul 2006 17:13:54 -0400
From: Michael McCandless <mail@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NFS/iSCSI SAN with Lucene
References: <13F36D2926AD444697093282F20041B704A8BDC4@buf-ex01.cymfony.com>
In-Reply-To: <13F36D2926AD444697093282F20041B704A8BDC4@buf-ex01.cymfony.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I did a search on the Lucene list archives, found a lot of posts about
> the use of Lucene with NFS and how there are locking issues, but don't
> see anybody coming to a real solution to this.

We are trying to fix this.  Many people seem to hit it.

The current plan is to first decouple the Locking implementation from 
the Directory implementation:

   http://issues.apache.org/jira/browse/LUCENE-305

and then create a Locking implementation that uses native OS locks 
instead of the simple file-existence locks (used now) that do not work 
with NFS.

But the development is still in process and so it won't be until a 
future Lucene release that this is fixed correctly.

A very good workaround is to use or be inspired by the approach that the 
Solr project:

   http://incubator.apache.org/solr/features.html
   http://incubator.apache.org/solr/tutorial.html

uses, described here:

   http://wiki.apache.org/solr/CollectionDistribution

The gist is, your single Java process that has an IndexWriter 
periodically snapshots the index at a known-safe time, and then the 
multiple Searchers switch to the latest snapshot once the snapshot is 
complete.

Solr actually distributes copies of the index to each Searcher's local 
storage, but you could probably modify this approach so that, instead, 
the Searchers all share a single copy off your SAN.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 01:13:37 2006
Return-Path: <java-user-return-22117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85417 invoked from network); 20 Jul 2006 01:13:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 01:13:36 -0000
Received: (qmail 94072 invoked by uid 500); 20 Jul 2006 01:13:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93763 invoked by uid 500); 20 Jul 2006 01:13:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93752 invoked by uid 99); 20 Jul 2006 01:13:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 18:13:30 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of marbux@gmail.com designates 64.233.184.229 as permitted sender)
Received: from [64.233.184.229] (HELO wr-out-0506.google.com) (64.233.184.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 18:13:29 -0700
Received: by wr-out-0506.google.com with SMTP id 68so186501wri
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 18:13:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=JjNwzXFnse5AfVmPynx0LFyw8FLy8Ux7NcIWQUke7cMZbDvPrJ9hs1pdzEWgQjrDQHXzvcgUvGemYTuCEOUFsSLU40AMUsbt6Ki/dKcj3kW0zxwe2pEjztAmyIkzxnW9HabL0oN+WdAFb2EQoEQb4paazDbNAXDCxjEpwtfiFRQ=
Received: by 10.65.219.2 with SMTP id w2mr1551762qbq;
        Wed, 19 Jul 2006 18:13:08 -0700 (PDT)
Received: by 10.64.201.1 with HTTP; Wed, 19 Jul 2006 18:13:08 -0700 (PDT)
Message-ID: <2c60d980607191813t4a0827d3lad85344b1ea03a6@mail.gmail.com>
Date: Wed, 19 Jul 2006 18:13:08 -0700
From: marbux <marbux@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene support for OpenDocument?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21439_24082119.1153357988404"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21439_24082119.1153357988404
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

The OpenDocument Fellowship attempts to maintain a directory of
applicatiopns supporting OpenDocument file formats. <
http://www.opendocumentfellowship.org/applicationsa>. I have been
attempting, without success, to determine whether Lucene supports
OpenDocument and if so to what extent, what versions/flavors of Lucene, etc.
I have seen some indications searchng the development mailing list archives
that ODF support was being implemented, but can't find any indication that
the work was ever completed.

Might someone on this list speak knowledgably to those subjects?

Best regards,

Marbux

------=_Part_21439_24082119.1153357988404--

From java-user-return-22118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 01:36:57 2006
Return-Path: <java-user-return-22118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97425 invoked from network); 20 Jul 2006 01:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 01:36:57 -0000
Received: (qmail 13071 invoked by uid 500); 20 Jul 2006 01:36:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12867 invoked by uid 500); 20 Jul 2006 01:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12856 invoked by uid 99); 20 Jul 2006 01:36:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 18:36:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 18:36:49 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id D2D71B762E
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 11:36:03 +1000 (EST)
Message-ID: <44BEDE4F.9000403@nuix.com.au>
Date: Thu, 20 Jul 2006 11:37:19 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene support for OpenDocument?
References: <2c60d980607191813t4a0827d3lad85344b1ea03a6@mail.gmail.com>
In-Reply-To: <2c60d980607191813t4a0827d3lad85344b1ea03a6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

marbux wrote:
> Hello,
> 
> The OpenDocument Fellowship attempts to maintain a directory of
> applicatiopns supporting OpenDocument file formats. <
> http://www.opendocumentfellowship.org/applicationsa>. I have been
> attempting, without success, to determine whether Lucene supports
> OpenDocument and if so to what extent, what versions/flavors of Lucene, 
> etc.
> I have seen some indications searchng the development mailing list archives
> that ODF support was being implemented, but can't find any indication that
> the work was ever completed.
> 
> Might someone on this list speak knowledgably to those subjects?

Lucene is a text indexing library, and hence it indexes text.  For any 
other format (HTML, Word, ODF, PDF, whatever) you have to find some way 
to extract the text from there to feed it into Lucene.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 02:24:10 2006
Return-Path: <java-user-return-22119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11031 invoked from network); 20 Jul 2006 02:24:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 02:24:10 -0000
Received: (qmail 55827 invoked by uid 500); 20 Jul 2006 02:24:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55790 invoked by uid 500); 20 Jul 2006 02:24:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55779 invoked by uid 99); 20 Jul 2006 02:24:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 19:24:03 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.47] (HELO smtpout.mac.com) (17.250.248.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 19:24:03 -0700
Received: from mac.com (webmail07-en1 [10.13.11.149])
	by smtpout.mac.com (Xserve/8.12.11/smtpout09/MantshX 4.0) with ESMTP id k6K2Ng7I016548
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 19:23:42 -0700 (PDT)
Received: from webmail07 (localhost [127.0.0.1])
	by mac.com (Xserve/webmail07/MantshX 4.0) with ESMTP id k6K2NgH9000719
	for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 19:23:42 -0700 (PDT)
Received: from [68.169.42.62] by webmail.mac.com with HTTP; Wed, 19 Jul 2006 22:23:42 -0400
Message-ID: <14452935.1153362222082.JavaMail.michael_prichard@mac.com>
Date: Wed, 19 Jul 2006 22:23:42 -0400
From: Michael Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Subject: Query does not work past 26 characters?!
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Originating-IP: 68.169.42.62/instID=103
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Tell me I am totally missing something here....

I created an index w/ StandardAnalyzer with two fields as follows:

Document doc = new Document();
doc.add(new Field("to", "michael@reallylonglonglonglongname.com", Field.Store.YES, Field.Index.TOKENIZED));
doc.add(new Field("content", "blah3 blah3 blah3", Field.Store.YES, Field.Index.TOKENIZED));
writer.addDocument(doc);

When I search for as follows:

PrefixQuery pq = new PrefixQuery(new Term("to", "michael@reallylonglonglong"));

I get a hit. That is good.

When I search a little more like:

PrefixQuery pq = new PrefixQuery(new Term("to", "michael@reallylonglonglongname"));

No hits!!

Same thing with QueryParser, etc.

Any ideas?

Thanks,
Michael

P.S.  I tried UN_TOKENIZED as well...but I don't think that messes with email addresses anyway.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 03:34:34 2006
Return-Path: <java-user-return-22120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29995 invoked from network); 20 Jul 2006 03:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 03:34:34 -0000
Received: (qmail 26015 invoked by uid 500); 20 Jul 2006 03:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25981 invoked by uid 500); 20 Jul 2006 03:34:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25967 invoked by uid 99); 20 Jul 2006 03:34:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 20:34:26 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 20:34:21 -0700
Received: by nf-out-0910.google.com with SMTP id m18so398448nfc
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 20:34:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Vej7/kgnz+AUD0fBX/7dkb630ZHIuVDgSmJ/uPk0xfwscBksYJhQNlOPxf1xZKiUMbN7NLzT6BQRzUUgMqkRoCxREWItztYjh3FksAdIjTtlP43qn0TEJzZ02Map8r8fOW/LiOv+qxgi25UQMVb0JJMbDecsE63NbHM7MdVO/6s=
Received: by 10.78.167.12 with SMTP id p12mr77070hue;
        Wed, 19 Jul 2006 20:34:00 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Wed, 19 Jul 2006 20:34:00 -0700 (PDT)
Message-ID: <5d5204510607192034v902d91by515d6ffa92d1ac6a@mail.gmail.com>
Date: Thu, 20 Jul 2006 11:34:00 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Subject: Can lucene query this result?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_66960_23378123.1153366440108"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_66960_23378123.1153366440108
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

for example:

$sql = "select count(*), user_group from groups where uid>0 group by
user_group;


can lucene query this result?

------=_Part_66960_23378123.1153366440108--

From java-user-return-22121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 04:31:58 2006
Return-Path: <java-user-return-22121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46593 invoked from network); 20 Jul 2006 04:31:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 04:31:58 -0000
Received: (qmail 76912 invoked by uid 500); 20 Jul 2006 04:31:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76878 invoked by uid 500); 20 Jul 2006 04:31:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76867 invoked by uid 99); 20 Jul 2006 04:31:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 21:31:51 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jul 2006 21:31:50 -0700
Received: (qmail 61295 invoked by uid 60001); 20 Jul 2006 04:31:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=C2L1kFtgk90g8aeDF6zDr5LPL2+A+iSUDX9H7CMoh0Ah6colDH9T4pP9brVOK6/GKlWhdsk2z9K4Lz0E3CWXO/E2bjiwXg3xMcLtcmLpSC03eVXIjfXgdebkAajfs22Dx/6g+8wojDSn0oglabPubXGk3oLCcfvsY/zARyYSOxc=  ;
Message-ID: <20060720043129.61293.qmail@web50311.mail.yahoo.com>
Received: from [63.192.54.218] by web50311.mail.yahoo.com via HTTP; Wed, 19 Jul 2006 21:31:29 PDT
Date: Wed, 19 Jul 2006 21:31:29 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Can lucene query this result?
To: java-user@lucene.apache.org
In-Reply-To: <5d5204510607192034v902d91by515d6ffa92d1ac6a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No.  Lucene is not a relational database and doesn't speak SQL.

Otis

----- Original Message ----
From: James liu <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, July 19, 2006 11:34:00 PM
Subject: Can lucene query this result?

for example:

$sql = "select count(*), user_group from groups where uid>0 group by
user_group;


can lucene query this result?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 04:35:57 2006
Return-Path: <java-user-return-22122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47401 invoked from network); 20 Jul 2006 04:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 04:35:56 -0000
Received: (qmail 84691 invoked by uid 500); 20 Jul 2006 04:35:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83787 invoked by uid 500); 20 Jul 2006 04:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83776 invoked by uid 99); 20 Jul 2006 04:35:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 21:35:51 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Jul 2006 21:35:50 -0700
Received: (qmail 97653 invoked by uid 60001); 20 Jul 2006 04:35:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=02JFpNI5ApD6FMr+0D8XWTRp7zUYcQ3YKLwsobVqkYs/J4S+QhizgXybpkNLg5G5WYVP/5z5FZ5vQLP9mCG+U/G+Yj2/Ayw+0UVwjzQFtVa01Tyhl3NtNjLPowFL5J6Xwy8A8O/VFyjRkwMoFvopj4a4SiN26GX0U+nicsnAGhE=  ;
Message-ID: <20060720043526.97651.qmail@web50301.mail.yahoo.com>
Received: from [63.192.54.218] by web50301.mail.yahoo.com via HTTP; Wed, 19 Jul 2006 21:35:26 PDT
Date: Wed, 19 Jul 2006 21:35:26 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Can lucene query this result?
To: java-user@lucene.apache.org
In-Reply-To: <20060720043129.61293.qmail@web50311.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well, you could use a range query with the "right side" of the query open/null, but this is not really what Lucene is designed for.

Otis

----- Original Message ----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
To: java-user@lucene.apache.org
Sent: Thursday, July 20, 2006 12:31:29 AM
Subject: Re: Can lucene query this result?

No.  Lucene is not a relational database and doesn't speak SQL.

Otis

----- Original Message ----
From: James liu <liuping.james@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, July 19, 2006 11:34:00 PM
Subject: Can lucene query this result?

for example:

$sql = "select count(*), user_group from groups where uid>0 group by
user_group;


can lucene query this result?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 04:36:18 2006
Return-Path: <java-user-return-22123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47460 invoked from network); 20 Jul 2006 04:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 04:36:18 -0000
Received: (qmail 85439 invoked by uid 500); 20 Jul 2006 04:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85175 invoked by uid 500); 20 Jul 2006 04:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85164 invoked by uid 99); 20 Jul 2006 04:36:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 21:36:10 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 21:36:08 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6K4Zkgh063160
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 04:35:46 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6K4crGH143900
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 06:38:53 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6K4ZkrS027884
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 06:35:46 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6K4Zkve027881
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 06:35:46 +0200
In-Reply-To: <14452935.1153362222082.JavaMail.michael_prichard@mac.com>
Subject: Re: Query does not work past 26 characters?!
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF86952E00.10E6DE4F-ON882571B1.0018C325-882571B1.0019352C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 19 Jul 2006 21:35:20 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 20/07/2006 07:38:52
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> doc.add(new Field("to",
>      "michael@reallylonglonglonglongname.com",
> ...
> PrefixQuery pq = new PrefixQuery(new Term("to",
>      "michael@reallylonglonglongname"));

Perhaps a typo in the query text -
   Indexed  text: "michael@reallylonglonglonglongname.com"
   Searched text: "michael@reallylonglonglongname"
The searched text is not a prefix of the indexed one.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 04:48:44 2006
Return-Path: <java-user-return-22124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50178 invoked from network); 20 Jul 2006 04:48:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 04:48:43 -0000
Received: (qmail 98814 invoked by uid 500); 20 Jul 2006 04:48:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97978 invoked by uid 500); 20 Jul 2006 04:48:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97967 invoked by uid 99); 20 Jul 2006 04:48:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 21:48:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of liuping.james@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 21:48:37 -0700
Received: by nf-out-0910.google.com with SMTP id p77so416452nfc
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 21:48:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y7NefJqgH94q9Q/u5rCGEmuTX4d+aL+a7jD6wSA/V63v+/uokmQi1dMTkyAUv+i5J17f/tXAuGLB6P8RiAXIn4mFJQ36BdJjqzEnohdU6SE+WDI2oaIR87WaSyz2yhidsKxrMVyoazaq2q1mMAnhJ7Ube7a0JOm7qyqQCbMB37c=
Received: by 10.78.178.5 with SMTP id a5mr92278huf;
        Wed, 19 Jul 2006 21:48:15 -0700 (PDT)
Received: by 10.78.155.15 with HTTP; Wed, 19 Jul 2006 21:48:10 -0700 (PDT)
Message-ID: <5d5204510607192148p7d78112bo888245bba19e46fe@mail.gmail.com>
Date: Thu, 20 Jul 2006 12:48:10 +0800
From: "James liu" <liuping.james@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Can lucene query this result?
In-Reply-To: <20060720043129.61293.qmail@web50311.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_67949_32981429.1153370890719"
References: <5d5204510607192034v902d91by515d6ffa92d1ac6a@mail.gmail.com>
	 <20060720043129.61293.qmail@web50311.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_67949_32981429.1153370890719
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You misunderstand.

This sql just tell what i wanna do.

i have five user_group and i wanna group result which lucene do.

2006/7/20, Otis Gospodnetic <otis_gospodnetic@yahoo.com>:
>
> No.  Lucene is not a relational database and doesn't speak SQL.
>
> Otis
>
> ----- Original Message ----
> From: James liu <liuping.james@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, July 19, 2006 11:34:00 PM
> Subject: Can lucene query this result?
>
> for example:
>
> $sql = "select count(*), user_group from groups where uid>0 group by
> user_group;
>
>
> can lucene query this result?
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_67949_32981429.1153370890719--

From java-user-return-22125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 06:03:06 2006
Return-Path: <java-user-return-22125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70237 invoked from network); 20 Jul 2006 06:03:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 06:03:06 -0000
Received: (qmail 62245 invoked by uid 500); 20 Jul 2006 06:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62222 invoked by uid 500); 20 Jul 2006 06:02:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62211 invoked by uid 99); 20 Jul 2006 06:02:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 23:02:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of heng.mei@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Jul 2006 23:02:58 -0700
Received: by py-out-1112.google.com with SMTP id e30so594015pya
        for <java-user@lucene.apache.org>; Wed, 19 Jul 2006 23:02:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MRbiNvlmUMVeFpAbhr84P5Nb7MMk9BWwZawSVKipRYNgxqYNWc6bZSZMqmThCYV0jaqDopg/J46YqYyHxWoq3KzhmzzYd9449KS065NSbwTwQ5ZqQ4eoDlXSH1h5q+MtvM1du/fDeSqO4Vc354moi/GUH6N3L+dPPry7I0Bq9+8=
Received: by 10.35.11.15 with SMTP id o15mr412097pyi;
        Wed, 19 Jul 2006 23:02:38 -0700 (PDT)
Received: by 10.35.64.6 with HTTP; Wed, 19 Jul 2006 23:02:38 -0700 (PDT)
Message-ID: <b9fbc60a0607192302t664aac7dxc31889ec956e8443@mail.gmail.com>
Date: Wed, 19 Jul 2006 23:02:38 -0700
From: "Heng Mei" <heng.mei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can lucene query this result?
In-Reply-To: <5d5204510607192148p7d78112bo888245bba19e46fe@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <5d5204510607192034v902d91by515d6ffa92d1ac6a@mail.gmail.com>
	 <20060720043129.61293.qmail@web50311.mail.yahoo.com>
	 <5d5204510607192148p7d78112bo888245bba19e46fe@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't think there's an easy "built-in" way for Lucene to do this.

What you can do is implement a HitCollector to process each doc hit
and maintain a count for each user_group.  You'll need to preload a
doc_id -> user_group mapping.  (Take a look at the code for
FieldCacheImpl.getInts() for sample code).

~Heng

On 7/19/06, James liu <liuping.james@gmail.com> wrote:
> You misunderstand.
>
> This sql just tell what i wanna do.
>
> i have five user_group and i wanna group result which lucene do.
>
> 2006/7/20, Otis Gospodnetic <otis_gospodnetic@yahoo.com>:
> >
> > No.  Lucene is not a relational database and doesn't speak SQL.
> >
> > Otis
> >
> > ----- Original Message ----
> > From: James liu <liuping.james@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, July 19, 2006 11:34:00 PM
> > Subject: Can lucene query this result?
> >
> > for example:
> >
> > $sql = "select count(*), user_group from groups where uid>0 group by
> > user_group;
> >
> >
> > can lucene query this result?
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 07:26:29 2006
Return-Path: <java-user-return-22126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93614 invoked from network); 20 Jul 2006 07:26:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 07:26:29 -0000
Received: (qmail 35084 invoked by uid 500); 20 Jul 2006 07:26:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35053 invoked by uid 500); 20 Jul 2006 07:26:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35042 invoked by uid 99); 20 Jul 2006 07:26:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:26:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:26:21 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 036BD5B776; Thu, 20 Jul 2006 00:25:51 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id F0C2E7F403
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 00:25:51 -0700 (PDT)
Date: Thu, 20 Jul 2006 00:25:51 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <359a92830607191308p7b7128bbx653c5b370c0c3c2f@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607200018400.21071@hal.rescomp.berkeley.edu>
References: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl> 
 <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com> 
 <Pine.LNX.4.58.0607190919120.12926@hal.rescomp.berkeley.edu> 
 <359a92830607190936r1b9cfedeh21615d17e7b99693@mail.gmail.com> 
 <Pine.LNX.4.58.0607191213320.21372@hal.rescomp.berkeley.edu>
 <359a92830607191308p7b7128bbx653c5b370c0c3c2f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Thanks much for that clarification, it helps a lot. The original request was
: to find docs wthat were NOT NULL, so  I'm glad I'm not the only one who

: But with your RangeFilter comment, that seems unnecessary. You can use a
: RangeFilter with null, null as bounds, then just flip the bits in the
: resulting bitset, right? Or, for that matter, if you know a-priori the

now maybe i'm confused again :) ... a RangeFilter *must* be given a
fieldName, but the lowerTerm/upperTerm params can be null -- if they are both
null, then the filter matches on all docs that have any value for that
field -- not on docs that have a "null value" for that field (because
there is no concept of "null" in Lucene -- just the idea of not having a
value.   So if you construct the RangeFilter as you describe, and flip the
bits, you'll get docs that *don't* have a value, which sounds like the
opposite of what you wnat, so don't flip the bits :)

: minimum and maximum possible values for a field, just make the RangeFilter
: with those values and it's all done in one line of code. So somebody else

right: if you know in advance the max/min values for a given field,
specifying them in the RangeFilter constructor is the same as specifying
null,null.

The JUnit test code for RangeFilter should make this a lot clearer then i
can in my imprefect prose.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 07:31:53 2006
Return-Path: <java-user-return-22127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94558 invoked from network); 20 Jul 2006 07:31:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 07:31:53 -0000
Received: (qmail 42490 invoked by uid 500); 20 Jul 2006 07:31:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42023 invoked by uid 500); 20 Jul 2006 07:31:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42012 invoked by uid 99); 20 Jul 2006 07:31:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:31:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucene.developer@googlemail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:31:45 -0700
Received: by nf-out-0910.google.com with SMTP id m18so436956nfc
        for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 00:31:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=oxV/TfF403L7zFFMj00rwu1NK30i5GFDgx4mYNAi4+XT3iUuYUOI93qCG/83ODII2WabMDpKn/KmcRj2UMYQTgvz6a30mgqFJYgVALgykw+BPCzXdCzRMs5izLBYaFr13jyjLj7jacJzubrhAhysVDVlP3Ti1W1tFM+tl+JIvt8=
Received: by 10.78.166.7 with SMTP id o7mr154730hue;
        Thu, 20 Jul 2006 00:31:24 -0700 (PDT)
Received: by 10.78.125.4 with HTTP; Thu, 20 Jul 2006 00:31:23 -0700 (PDT)
Message-ID: <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com>
Date: Thu, 20 Jul 2006 09:31:23 +0200
From: lude <lucene.developer@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
In-Reply-To: <200607191259.29548.nicolas.lalevee@anyware-tech.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_109789_27756887.1153380683988"
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
	 <200607182058.56551.nicolas.lalevee@anyware-tech.com>
	 <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>
	 <200607191259.29548.nicolas.lalevee@anyware-tech.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_109789_27756887.1153380683988
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

> As Luke was release with a Lucene-1.9 ....

Where did you get this information? From all I know Luke is based on Lucene
Version 1.4.3.


On 7/19/06, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
>
> Le Mercredi 19 Juillet 2006 12:32, lude a =E9crit:
> > Hi Nicolas,
> >
> > thanks for answering.
> >
> > You wrote:
> > > And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to
> read
> > > a
> >
> > 1.4
> >
> > What do you mean?
> > The luke website stated:  "Current version is 0.6. It has been released
> on
> > 16 Feb 2005."
> > How can Luke be a Lucene-2 application if it was released on Feb 2005?
>
> Yes, I should have not used the word Lucene-2 application, sorry.
> BTW, about the index format described here :
> http://lucene.apache.org/java/docs/fileformats.html
> there is only concern about if Lucene >=3D 1.9 or if Lucene <=3D 1.4. As =
Luke
> was
> release with a Lucene-1.9, it will work with Lucene 2.0 index beacause a
> index 1.9 and an index 2.0 are the same.
>
> Nicolas.
>
> >
> > lude
> >
> > On 7/18/06, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
> > > Le Mardi 18 Juillet 2006 20:53, lude a =E9crit:
> > > > Hello,
> > > >
> > > > sorry, didn't find the information elsewhere:
> > > >
> > > > 1.) Did the format of the lucene-index change between version 1.4.3=
and
> > > > 2.0? 2.) Is it possible to use the old Luke-Tool with a new lucene =
2
> > >
> > > index?
> > >
> > > > Thanks
> > > > lude
> > >
> > > ASAIK, the format changed, but in a compatible way : a Lucene-2 app
> will
> > > be
> > > able to read a 1.4 index. The index format change is there :
> > > http://lucene.apache.org/java/docs/fileformats.html
> > >
> > > And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to
> read
> > > a 1.4
> > > index.
> > >
> > > Nicolas
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_109789_27756887.1153380683988--

From java-user-return-22128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 07:42:15 2006
Return-Path: <java-user-return-22128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97660 invoked from network); 20 Jul 2006 07:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 07:42:15 -0000
Received: (qmail 59429 invoked by uid 500); 20 Jul 2006 07:42:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59161 invoked by uid 500); 20 Jul 2006 07:42:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59150 invoked by uid 99); 20 Jul 2006 07:42:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:42:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:42:07 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k6K7fiB14967
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 02:41:44 -0500
Message-ID: <44BF333B.6070604@getopt.org>
Date: Thu, 20 Jul 2006 09:39:39 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene support for OpenDocument?
References: <2c60d980607191813t4a0827d3lad85344b1ea03a6@mail.gmail.com> <44BEDE4F.9000403@nuix.com.au>
In-Reply-To: <44BEDE4F.9000403@nuix.com.au>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Noll wrote:
> marbux wrote:
>> Hello,
>>
>> The OpenDocument Fellowship attempts to maintain a directory of
>> applicatiopns supporting OpenDocument file formats. <
>> http://www.opendocumentfellowship.org/applicationsa>. I have been
>> attempting, without success, to determine whether Lucene supports
>> OpenDocument and if so to what extent, what versions/flavors of 
>> Lucene, etc.
>> I have seen some indications searchng the development mailing list 
>> archives
>> that ODF support was being implemented, but can't find any indication 
>> that
>> the work was ever completed.
>>
>> Might someone on this list speak knowledgably to those subjects?
>
> Lucene is a text indexing library, and hence it indexes text.  For any 
> other format (HTML, Word, ODF, PDF, whatever) you have to find some 
> way to extract the text from there to feed it into Lucene.

However, a sub-project of Lucene, Nutch (http://lucene.apache.org/nutch) 
does support nearly all ODF formats through a parse-oo plugin (with the 
exception of ODG and ODB).

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 07:57:58 2006
Return-Path: <java-user-return-22129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4153 invoked from network); 20 Jul 2006 07:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 07:57:58 -0000
Received: (qmail 79098 invoked by uid 500); 20 Jul 2006 07:57:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79076 invoked by uid 500); 20 Jul 2006 07:57:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79065 invoked by uid 99); 20 Jul 2006 07:57:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:57:50 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 00:57:49 -0700
Received: by py-out-1112.google.com with SMTP id e30so631265pya
        for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 00:57:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=F7d5UYhqjrB5Dv2Pcu1QoPjA85xuNgtLTFQWuWIJnbPXZt1JAqnYc5DBkUPhJqKPWvGf/sac28dLMwzRt6nZ0WnrthorxxObHgWiQjvcdUJP/Z4IGs4CdMkY8rWMBgs6h9PIbUlgOENXc5yjAi4R3JBG9McgoShTHja0oEb9H2g=
Received: by 10.35.123.10 with SMTP id a10mr578570pyn;
        Thu, 20 Jul 2006 00:57:27 -0700 (PDT)
Received: by 10.35.31.17 with HTTP; Thu, 20 Jul 2006 00:57:27 -0700 (PDT)
Message-ID: <8e7e4d020607200057s55b03fb2w8da8ece351f7133e@mail.gmail.com>
Date: Thu, 20 Jul 2006 15:57:27 +0800
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
In-Reply-To: <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4227_24097002.1153382247655"
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>
	 <200607182058.56551.nicolas.lalevee@anyware-tech.com>
	 <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>
	 <200607191259.29548.nicolas.lalevee@anyware-tech.com>
	 <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4227_24097002.1153382247655
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I'm using Luke to manage Lucene 1.9's index

On 7/20/06, lude <lucene.developer@googlemail.com> wrote:
>
> > As Luke was release with a Lucene-1.9 ....
>
> Where did you get this information? From all I know Luke is based on
> Lucene
> Version 1.4.3.
>
>
> On 7/19/06, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrote:
> >
> > Le Mercredi 19 Juillet 2006 12:32, lude a =E9crit:
> > > Hi Nicolas,
> > >
> > > thanks for answering.
> > >
> > > You wrote:
> > > > And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to
> > read
> > > > a
> > >
> > > 1.4
> > >
> > > What do you mean?
> > > The luke website stated:  "Current version is 0.6. It has been
> released
> > on
> > > 16 Feb 2005."
> > > How can Luke be a Lucene-2 application if it was released on Feb 2005=
?
> >
> > Yes, I should have not used the word Lucene-2 application, sorry.
> > BTW, about the index format described here :
> > http://lucene.apache.org/java/docs/fileformats.html
> > there is only concern about if Lucene >=3D 1.9 or if Lucene <=3D 1.4. A=
s
> Luke
> > was
> > release with a Lucene-1.9, it will work with Lucene 2.0 index beacause =
a
> > index 1.9 and an index 2.0 are the same.
> >
> > Nicolas.
> >
> > >
> > > lude
> > >
> > > On 7/18/06, Nicolas Lalev=E9e <nicolas.lalevee@anyware-tech.com> wrot=
e:
> > > > Le Mardi 18 Juillet 2006 20:53, lude a =E9crit:
> > > > > Hello,
> > > > >
> > > > > sorry, didn't find the information elsewhere:
> > > > >
> > > > > 1.) Did the format of the lucene-index change between version
> 1.4.3and
> > > > > 2.0? 2.) Is it possible to use the old Luke-Tool with a new lucen=
e
> 2
> > > >
> > > > index?
> > > >
> > > > > Thanks
> > > > > lude
> > > >
> > > > ASAIK, the format changed, but in a compatible way : a Lucene-2 app
> > will
> > > > be
> > > > able to read a 1.4 index. The index format change is there :
> > > > http://lucene.apache.org/java/docs/fileformats.html
> > > >
> > > > And about Luke, ASAIK too, is a Lucene-2 app, so it will be able to
> > read
> > > > a 1.4
> > > > index.
> > > >
> > > > Nicolas
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>


--=20
--
Yueyu Lin

------=_Part_4227_24097002.1153382247655--

From java-user-return-22130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 08:06:10 2006
Return-Path: <java-user-return-22130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8535 invoked from network); 20 Jul 2006 08:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 08:06:09 -0000
Received: (qmail 94144 invoked by uid 500); 20 Jul 2006 08:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93439 invoked by uid 500); 20 Jul 2006 08:06:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93428 invoked by uid 99); 20 Jul 2006 08:06:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 01:06:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 01:06:03 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k6K85iE01001
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 03:05:44 -0500
Message-ID: <44BF38DB.3060503@getopt.org>
Date: Thu, 20 Jul 2006 10:03:39 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>	 <200607182058.56551.nicolas.lalevee@anyware-tech.com>	 <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>	 <200607191259.29548.nicolas.lalevee@anyware-tech.com> <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com>
In-Reply-To: <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

lude wrote:
>> As Luke was release with a Lucene-1.9 ....
>
> Where did you get this information? From all I know Luke is based on 
> Lucene
> Version 1.4.3.
>

The latest version of Luke was released with an early snapshot of 1.9. I 
plan to release a 2.0-based version in a few days.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 08:30:11 2006
Return-Path: <java-user-return-22131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14931 invoked from network); 20 Jul 2006 08:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 08:30:11 -0000
Received: (qmail 30378 invoked by uid 500); 20 Jul 2006 08:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30307 invoked by uid 500); 20 Jul 2006 08:30:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30150 invoked by uid 99); 20 Jul 2006 08:29:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 01:29:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.61] (HELO randymail-a7.dreamhost.com) (208.97.132.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 01:29:56 -0700
Received: from [192.168.1.8] (unknown [82.153.237.45])
	by randymail-a7.dreamhost.com (Postfix) with ESMTP id 9D655B6F5A
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 01:29:35 -0700 (PDT)
Message-ID: <44BF3E2B.8070302@magpie.net>
Date: Thu, 20 Jul 2006 09:26:19 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Index-Format difference between 1.4.3 and 2.0
References: <a218b3050607181153k73be8315q7cd63d2a79cd9c06@mail.gmail.com>	 <200607182058.56551.nicolas.lalevee@anyware-tech.com>	 <a218b3050607190332k71f5942cjcd8f6565e403daff@mail.gmail.com>	 <200607191259.29548.nicolas.lalevee@anyware-tech.com> <a218b3050607200031x62d9d695ub10db8d642c274ca@mail.gmail.com> <44BF38DB.3060503@getopt.org>
In-Reply-To: <44BF38DB.3060503@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:

> lude wrote:
>
>>> As Luke was release with a Lucene-1.9 ....
>>
>>
>> Where did you get this information? From all I know Luke is based on 
>> Lucene
>> Version 1.4.3.
>>
>
> The latest version of Luke was released with an early snapshot of 1.9. 
> I plan to release a 2.0-based version in a few days.


I found Luke to be incompatible with indices built with Lucene 1.9, but 
it was trivial to compile a version of Luke against the official 1.9 
jars, which worked fine. If anyone else needs it before the official 
release you can download them here:


http://www.milesbarr.com/luke/luke-0.6.jar
http://www.milesbarr.com/luke/lukeall-0.6.jar
http://www.milesbarr.com/luke/lukemin-0.6.jar



Cheers,
Miles


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 09:40:11 2006
Return-Path: <java-user-return-22132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33444 invoked from network); 20 Jul 2006 09:40:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 09:40:11 -0000
Received: (qmail 25697 invoked by uid 500); 20 Jul 2006 09:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25668 invoked by uid 500); 20 Jul 2006 09:40:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25657 invoked by uid 99); 20 Jul 2006 09:40:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 02:40:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.70.192.55] (HELO smtp5.libero.it) (193.70.192.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 02:40:03 -0700
Received: from localhost (172.16.1.211) by smtp5.libero.it (7.0.027-DD01)
        id 44992641028187EA for java-user@lucene.apache.org; Thu, 20 Jul 2006 11:39:42 +0200
Received: from smtp2.libero.it ([172.16.1.225])
 by localhost (asav24.libero.it [193.70.193.11]) (amavisd-new, port 10024)
 with ESMTP id 13261-03-4 for <java-user@lucene.apache.org>;
 Thu, 20 Jul 2006 11:39:41 +0200 (CEST)
Received: from [192.168.1.2] (adsl-20-225.38-151.net24.it [151.38.225.20])
	by smtp2.libero.it (Postfix) with ESMTP id 6641FA8CA7
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 11:39:41 +0200 (MEST)
Message-ID: <44BF4FAF.1040204@libero.it>
Date: Thu, 20 Jul 2006 11:41:03 +0200
From: Davide <davidin81@libero.it>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.0.2) Gecko/20060308 Thunderbird/1.5.0.2 Mnenhy/0.7.4.666
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: PDF documents with "MoreLikeThis" class
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Scanned: with antispam and antivirus automated system at libero.it
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I'm using MoreLikeThis class to find similar documents... but I'm not
sure if it is correct to pass as argument a Pdf file to
*MoreLikeThis.like()* method.

Trying to be more clear:

1) In my Lucene index I add some PDF files (I use PDFBox to extract text
and add fields to index)
2) Now I want to search similar documents from a specific PDF file and I
have the PDF file name (C:\\Example.pdf)


*My question is: What is the correct way to call like() method when I
have to find similar PDF files?*

I use:
-------------------------------------------------------
MoreLikeThis mlt = new MoreLikeThis(IndexReader);		

Query query = mlt.like(*new File("C:\\Example.pdf")*);
-------------------------------------------------------

I don't sure It is the correct way because I think if I pass a file to
the like() method It is expected to receive a text file and not a PDF
file where the text is not visible...

Do I have to extract text from PDF file and then pass an InputStream
with the text inside? Or my way is ok?

Thanks for any suggestion,
Davide.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 11:34:03 2006
Return-Path: <java-user-return-22133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65790 invoked from network); 20 Jul 2006 11:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 11:34:03 -0000
Received: (qmail 96567 invoked by uid 500); 20 Jul 2006 11:33:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96530 invoked by uid 500); 20 Jul 2006 11:33:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96519 invoked by uid 99); 20 Jul 2006 11:33:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 04:33:56 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Jul 2006 04:33:53 -0700
Received: (qmail 77396 invoked by uid 60001); 20 Jul 2006 11:33:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=qNPCeSmaPpwF6X9mKLmrtrFRJWH0TjVvYa6tMSo/YpjE2oxivpLmaL3ifoz9/LHhTyO0HmNdCHkTlFvKfOokhZ+hp16GMR4Q5vDM4aQFFDA/F20m/Trb7E8dtsexweZrIf3MuA2xGvIH7PGVJsOOJn20xNsozPQl5jyEMpQUI8g=  ;
Message-ID: <20060720113327.77394.qmail@web26001.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Thu, 20 Jul 2006 11:33:27 GMT
Date: Thu, 20 Jul 2006 11:33:27 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: PDF documents with "MoreLikeThis" class
To: java-user@lucene.apache.org
In-Reply-To: <44BF4FAF.1040204@libero.it>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>Do I have to extract text from PDF file and then pass an InputStream with the text inside? 
Yes. 
Although technically you could pass the content unparsed it will contain a lot of unintelligible garbage in the form of markup and images.

All Lucene classes deliberately try and avoid the mucky business of parsing different specific document types.
This keeps the core engine very tightly focused on indexing and searching without having to deal with the ever-changing range of document formats.



----- Original Message ----
From: Davide <davidin81@libero.it>
To: java-user@lucene.apache.org
Sent: Thursday, 20 July, 2006 10:41:03 AM
Subject: PDF documents with "MoreLikeThis" class

Hi,
I'm using MoreLikeThis class to find similar documents... but I'm not
sure if it is correct to pass as argument a Pdf file to
*MoreLikeThis.like()* method.

Trying to be more clear:

1) In my Lucene index I add some PDF files (I use PDFBox to extract text
and add fields to index)
2) Now I want to search similar documents from a specific PDF file and I
have the PDF file name (C:\\Example.pdf)


*My question is: What is the correct way to call like() method when I
have to find similar PDF files?*

I use:
-------------------------------------------------------
MoreLikeThis mlt = new MoreLikeThis(IndexReader);        

Query query = mlt.like(*new File("C:\\Example.pdf")*);
-------------------------------------------------------

I don't sure It is the correct way because I think if I pass a file to
the like() method It is expected to receive a text file and not a PDF
file where the text is not visible...

Do I have to extract text from PDF file and then pass an InputStream
with the text inside? Or my way is ok?

Thanks for any suggestion,
Davide.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 11:50:49 2006
Return-Path: <java-user-return-22134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70566 invoked from network); 20 Jul 2006 11:50:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 11:50:49 -0000
Received: (qmail 23028 invoked by uid 500); 20 Jul 2006 11:50:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23003 invoked by uid 500); 20 Jul 2006 11:50:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22992 invoked by uid 99); 20 Jul 2006 11:50:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 04:50:42 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.47] (HELO smtpout.mac.com) (17.250.248.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 04:50:41 -0700
Received: from mac.com (webmail15-en1 [10.13.10.141])
	by smtpout.mac.com (Xserve/8.12.11/smtpout09/MantshX 4.0) with ESMTP id k6KBoKVc020667
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 04:50:20 -0700 (PDT)
Received: from webmail15 (localhost [127.0.0.1])
	by mac.com (Xserve/webmail15/MantshX 4.0) with ESMTP id k6KBoJj7021211
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 04:50:20 -0700 (PDT)
Received: from [68.169.42.62] by webmail.mac.com with HTTP; Thu, 20 Jul 2006 07:50:19 -0400
Message-ID: <7483833.1153396219164.JavaMail.michael_prichard@mac.com>
Date: Thu, 20 Jul 2006 07:50:19 -0400
From: Michael Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Subject: Re: Query does not work past 26 characters?!
in-reply-to: <OF86952E00.10E6DE4F-ON882571B1.0018C325-882571B1.0019352C@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
references: <OF86952E00.10E6DE4F-ON882571B1.0018C325-882571B1.0019352C@il.ibm.com>
X-Originating-IP: 68.169.42.62/instID=214
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ARRRGH!!! That's it.  Darn, I was half asleep last night when I was experimenting.  I totally feel like a dope.

It works....Thanks!
-Michael
 
On Thursday, July 20, 2006, at 00:36AM, Doron Cohen <DORONC@il.ibm.com> wrote:

>> doc.add(new Field("to",
>>      "michael@reallylonglonglonglongname.com",
>> ...
>> PrefixQuery pq = new PrefixQuery(new Term("to",
>>      "michael@reallylonglonglongname"));
>
>Perhaps a typo in the query text -
>   Indexed  text: "michael@reallylonglonglonglongname.com"
>   Searched text: "michael@reallylonglonglongname"
>The searched text is not a prefix of the indexed one.
>
>Regards,
>Doron
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 12:51:35 2006
Return-Path: <java-user-return-22135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41241 invoked from network); 20 Jul 2006 12:51:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 12:51:33 -0000
Received: (qmail 42870 invoked by uid 500); 20 Jul 2006 12:07:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42523 invoked by uid 500); 20 Jul 2006 12:07:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42394 invoked by uid 99); 20 Jul 2006 12:07:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 05:07:25 -0700
X-ASF-Spam-Status: No, hits=2.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 05:07:24 -0700
Received: by py-out-1112.google.com with SMTP id e30so717133pya
        for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 05:07:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ce323VHP/xgdvZKr5HQbU+kjhyugrkGMZYVE3L5iHOT/e/6nQmtlnNwzk4QcOvx4KJLR0QcXCITMVAT/0Zg+shLaE5mdb3t5A1GfGWAW4JfvRl5l7hORapl54J3n1P97/gKIAUuZdoy3vY6oNwPINy4M0bj9jDoCDWZ4sXogtq8=
Received: by 10.35.27.2 with SMTP id e2mr950066pyj;
        Thu, 20 Jul 2006 05:07:03 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Thu, 20 Jul 2006 05:07:03 -0700 (PDT)
Message-ID: <359a92830607200507p469313eo43adabce2619eb26@mail.gmail.com>
Date: Thu, 20 Jul 2006 08:07:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Empty fields ...
In-Reply-To: <Pine.LNX.4.58.0607200018400.21071@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_309_29596005.1153397223509"
References: <BAY119-F338966EC16626A23A25D47B9600@phx.gbl>
	 <359a92830607190648h381945dcgc664c4813b3b5d@mail.gmail.com>
	 <Pine.LNX.4.58.0607190919120.12926@hal.rescomp.berkeley.edu>
	 <359a92830607190936r1b9cfedeh21615d17e7b99693@mail.gmail.com>
	 <Pine.LNX.4.58.0607191213320.21372@hal.rescomp.berkeley.edu>
	 <359a92830607191308p7b7128bbx653c5b370c0c3c2f@mail.gmail.com>
	 <Pine.LNX.4.58.0607200018400.21071@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_309_29596005.1153397223509
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What? You actually want me to put forth some effort? That's crazy talk <G>..

Thanks, I think I've got it now.

Best
Erick

------=_Part_309_29596005.1153397223509--

From java-user-return-22136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 19:02:24 2006
Return-Path: <java-user-return-22136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70657 invoked from network); 20 Jul 2006 19:02:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:02:24 -0000
Received: (qmail 26286 invoked by uid 500); 20 Jul 2006 13:17:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26216 invoked by uid 500); 20 Jul 2006 13:17:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26181 invoked by uid 99); 20 Jul 2006 13:17:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 06:17:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 06:17:40 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 1B9811886A; Thu, 20 Jul 2006 13:17:18 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id 42C4E18869
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 13:17:16 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Date ranges - getting the approach right
Date: Thu, 20 Jul 2006 14:17:14 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_006C_01C6AC07.324614C0"
In-Reply-To: <359a92830607160703i7195cc75h3b34dbb3729847b4@mail.gmail.com>
Thread-Index: Acao4LDcppi7/1H3Q2q7wbds9giPBwDG0ZlA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060720131716.42C4E18869@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_006C_01C6AC07.324614C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Sorry for the delayed response. It takes me a while to get my head around
Lucene.

I've got parallel indexes, which means that chorological ordering by  doc ID
would need to be a bit more sophisticated. It strikes me that there must be
some performance advantage doing it though.

I'll see if I can get good enough performance without it, though.

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: 16 July 2006 15:03
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right

Thanks for the clarification. Let me re-state this and see if I got it
right.

1> if you never do any deletions (or recalculate your "special records"
after deletion/optimization), this could work as-is.

2> the safe way to do this would be to find the miniminum doc ID for the
start date, the maximum doc ID for the end date and make the filter by
flipping all the bits in the filter in between. Assuming that you indexed in
date-sorted order in the first place. There really can't be anything in the
system to do anything like this for you since it relies on the meta-data
that the mails were indexed in some specific order.

I actually like the second, it's less prone for getting out of whack.....

Thanks for the
Erick

------=_NextPart_000_006C_01C6AC07.324614C0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcyMDEz
MTcxM1owIwYJKoZIhvcNAQkEMRYEFFc6npZCpQ7XC2mnH3mZpiP56j7bMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAIAMSwg0ULbe3HDmfgXq4IoEbLMZdbTJ0iYz
+QSr0TzNzr+Yl/X52K1hdfZN6Yp+qJvZDA+w5yL1mEiExvjmkVDNVOrTlYgF1CT9jcX5gU+39UyQ
AW6wGdGylWb1rZF/pLiB9I7xihD88DJfW4HEP4sRxGG5UFehELO1UP79uGA6sPqwz6CWTLmeA3e4
3GK2Ytz+7eLALoAQ3mYNPeTVJMfOc/wj6hyobVPdVuq/H8ikpRAoKAi8tDfQf14ibYHxCWYX9QTc
H9w0ql74nfJHZqypmMwSzINoxG0PQt2r2JlNhhevIvwr68umop1YgnrymKppYCR6lMTTF6IorAvK
SqUAAAAAAAA=

------=_NextPart_000_006C_01C6AC07.324614C0--


From java-user-return-22137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 19:22:14 2006
Return-Path: <java-user-return-22137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1186 invoked from network); 20 Jul 2006 19:22:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:22:14 -0000
Received: (qmail 34614 invoked by uid 500); 20 Jul 2006 15:14:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34543 invoked by uid 500); 20 Jul 2006 15:14:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34518 invoked by uid 99); 20 Jul 2006 15:14:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 08:14:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 08:14:11 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Date ranges - getting the approach right
Date: Thu, 20 Jul 2006 16:13:51 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE828907@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Date ranges - getting the approach right
Thread-Index: AcapEKNRQRsxNu+pRDWQgULht7ZPPAC/Y8QQ
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is how we solve the range query problem using filters. The nice
part about it is you can use a range in a query so several ranges can be
ORed/ANDed or NOTed together if required, instead of applying a range
filter to the who query. (Assumes dates in YYYYMMDD format)

Hope this helps Mike.

Extend QueryParser:
	@Override
	protected Query getRangeQuery(String arg0, String arg1, String
arg2, boolean arg3) throws ParseException {
		return new FilteredQuery(new MatchAllDocsQuery(), new
RangeFilter(arg0,arg1,arg2,arg3,arg3));
	}

www.ardentia.com the home of NetSearch

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 16 July 2006 20:46
To: java-user@lucene.apache.org
Subject: RE: Date ranges - getting the approach right

: The second approach requires three hits, doesn't it?
:
: (1) TermQuery on start date + sort on document ID
: (2) TermQuery on end date + reverse sort on document ID
: (3) The actual query with a filter on the above

You wouldn't need 3 queries for each date range you wanted to
precompute,
you could use one pass over the TermEnum to seek forward to the first
term
after the start of each range, and then seek a TermDocs to that term to
find the first doc in that range.   Then you can have a Filter that just
flat out knows the lowest and highest IDs for each range.

Basically you are precomputing all of your ranges in one low level
TermEnum scan instead of a seperate query/filter pass (which internally
does a TermEnum scan) for each range.

I've never really thought baout an approach like this (because i never
deal with indexes that only grow without deletes, and i *never* deal
with
indexes where i know what order things are added in) but it seems like
it
should work pretty well for ranges you know in advance are going to be
important ... those Filters should be pretty damn space efficient too --
they only have to keep track of two ints, not big BitSets lieing
arround.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 19:33:26 2006
Return-Path: <java-user-return-22138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20084 invoked from network); 20 Jul 2006 19:33:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 19:33:26 -0000
Received: (qmail 42158 invoked by uid 500); 20 Jul 2006 16:15:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42120 invoked by uid 500); 20 Jul 2006 16:15:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42032 invoked by uid 99); 20 Jul 2006 16:15:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 09:15:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 09:15:20 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 0F5631886A; Thu, 20 Jul 2006 16:14:57 +0000 (GMT)
Received: from max (unknown [213.166.4.230])
	by mail.seseit.com (Postfix) with ESMTP id BB8BC18869
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 16:14:54 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Date ranges - getting the approach right
Date: Thu, 20 Jul 2006 17:14:58 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0079_01C6AC20.06F5C9A0"
In-Reply-To: <359a92830607160703i7195cc75h3b34dbb3729847b4@mail.gmail.com>
Thread-Index: Acao4LDcppi7/1H3Q2q7wbds9giPBwDKdF1g
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060720161454.BB8BC18869@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0079_01C6AC20.06F5C9A0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Wow. Looking at the implementation of
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.h
tml#open(org.apache.lucene.store.Directory) I've now realised that when you
create an IndexReader (clue it is abstract), you actually instantiate a
MultiReader, with an IndexReader for each segment. That's elegant, because
what the user knows as a MultiReader is actually a MultiReader or
MultiReaders.

So one the thing that would need to be engineered into MultiReader to
implement Erick's suggestion would be to make IndexReader[] subReaders
accessible (iteratable) for the sake of getting first document numbers for
dates in each segment. We'd need something similar for ParallelReader too,
so perhaps it would need to be an abstract method on IndexReader. In
addition to this, we'd need to have another file for each segment to
correlate date first document number with each date in the segment.

i.e.
--------8<--------
/**
 * Chronological filtering
 */

import java.util.BitSet;
import java.io.IOException;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.search.*;

public class ChronologicalFilter extends Filter {

	final String fieldName;
	final String lowerTerm;
	final String upperTerm;
	final boolean includeLower;
	final boolean includeUpper;

	public ChronologicalFilter(String fieldName, String lowerTerm,
String upperTerm, boolean includeLower, boolean includeUpper) {
		this.fieldName = fieldName;
		this.lowerTerm = lowerTerm;
		this.upperTerm = upperTerm;
		this.includeLower = includeLower;
		this.includeUpper = includeUpper;
	}

	@Override
	public BitSet bits(IndexReader reader) throws IOException {

		final BitSet bits = new BitSet(reader.maxDoc());

	/*
		// Lets say that reader.segmentReaders() was
		// Iterator<IndexReader> and allowed us to walk
		// through all the segment readers
		for (IndexReader segmentReader : reader.segmentReaders()) {
			// Our segment reader should have an associated
SortedMap of
			// dates and first document numbers - not sure what
the
			// best approach would be here
			SortedMap<Integer,Integer> dateDocNumMap =
MyUtils.getDateMapForSegmentReader(segmentReader, fieldName);

			// Set those bits...
		}
	*/

		return bits;
	}
}
--------8<--------

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: 16 July 2006 15:03
To: java-user@lucene.apache.org
Subject: Re: Date ranges - getting the approach right

Thanks for the clarification. Let me re-state this and see if I got it
right.

1> if you never do any deletions (or recalculate your "special records"
after deletion/optimization), this could work as-is.

2> the safe way to do this would be to find the miniminum doc ID for the
start date, the maximum doc ID for the end date and make the filter by
flipping all the bits in the filter in between. Assuming that you indexed in
date-sorted order in the first place. There really can't be anything in the
system to do anything like this for you since it relies on the meta-data
that the mails were indexed in some specific order.

I actually like the second, it's less prone for getting out of whack.....

Thanks for the
Erick

------=_NextPart_000_0079_01C6AC20.06F5C9A0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDcyMDE2
MTQ1OFowIwYJKoZIhvcNAQkEMRYEFC9kKubmexW4vq7wOS387tWcP8hpMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBAJJsbWe7CZalISlpyz8E9mTCg6Mwu1dAK5j2
+JxRvdEGo0KcLM2NxzxJyjSJY3CzKCwp3cR0nZDRLy5Q+4YOJad6d4oT0IMFXH3ApvkS1+BPBVfm
lncoE+tvmurAi8GvC1wmYtjZoe9ce/n9mleVd0c/t2dgjJd4pOPpKnDyHPC3aaX7EwpKhoOJhNIB
H6eO+a3Js85+DmyJ4zXZoB7v0mLJR4elqT/7UjaFN9xmoHlJihhg27018Sp81M1X1c90ufvsGFyO
/LXZ+1o6sDQdY5LLFcXhar0YREFk1c3IWyBfcqdEjIms8PBunZBw7/rB+OH1PWlOkmdxewIE2qQx
oYEAAAAAAAA=

------=_NextPart_000_0079_01C6AC20.06F5C9A0--


From java-user-return-22139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 20:01:53 2006
Return-Path: <java-user-return-22139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60643 invoked from network); 20 Jul 2006 20:01:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 20:01:53 -0000
Received: (qmail 57165 invoked by uid 500); 20 Jul 2006 19:17:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57108 invoked by uid 500); 20 Jul 2006 19:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57082 invoked by uid 99); 20 Jul 2006 19:17:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 12:17:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.209.1.80] (HELO webmail.cymfony.com) (65.209.1.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 12:17:23 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: NFS/iSCSI SAN with Lucene
Date: Thu, 20 Jul 2006 15:17:01 -0400
Message-ID: <13F36D2926AD444697093282F20041B704A8BFFC@buf-ex01.cymfony.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: NFS/iSCSI SAN with Lucene
Thread-Index: AcarfUeBnUQgUulVRF+pLvTAkmnxSwAs7bWw
From: "Peter Kim" <pkim@cymfony.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Mike,
Thanks for the information!

Peter=20

> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
> Sent: Wednesday, July 19, 2006 5:49 PM
> To: java-user@lucene.apache.org
> Subject: Re: NFS/iSCSI SAN with Lucene
>=20
>=20
> > I did a search on the Lucene list archives, found a lot of=20
> posts about=20
> > the use of Lucene with NFS and how there are locking=20
> issues, but don't=20
> > see anybody coming to a real solution to this.
>=20
> We are trying to fix this.  Many people seem to hit it.
>=20
> The current plan is to first decouple the Locking=20
> implementation from the Directory implementation:
>=20
>    http://issues.apache.org/jira/browse/LUCENE-305
>=20
> and then create a Locking implementation that uses native OS=20
> locks instead of the simple file-existence locks (used now)=20
> that do not work with NFS.
>=20
> But the development is still in process and so it won't be=20
> until a future Lucene release that this is fixed correctly.
>=20
> A very good workaround is to use or be inspired by the=20
> approach that the Solr project:
>=20
>    http://incubator.apache.org/solr/features.html
>    http://incubator.apache.org/solr/tutorial.html
>=20
> uses, described here:
>=20
>    http://wiki.apache.org/solr/CollectionDistribution
>=20
> The gist is, your single Java process that has an IndexWriter=20
> periodically snapshots the index at a known-safe time, and=20
> then the multiple Searchers switch to the latest snapshot=20
> once the snapshot is complete.
>=20
> Solr actually distributes copies of the index to each=20
> Searcher's local storage, but you could probably modify this=20
> approach so that, instead, the Searchers all share a single=20
> copy off your SAN.
>=20
> Mike
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 21:28:42 2006
Return-Path: <java-user-return-22140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14344 invoked from network); 20 Jul 2006 21:28:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 21:28:42 -0000
Received: (qmail 13023 invoked by uid 500); 20 Jul 2006 21:27:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12958 invoked by uid 500); 20 Jul 2006 21:27:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12931 invoked by uid 99); 20 Jul 2006 21:27:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 14:27:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 14:27:41 -0700
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id AD82D226A
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 15:27:20 -0600 (MDT)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 29711-07 for <java-user@lucene.apache.org>;
	Thu, 20 Jul 2006 15:27:13 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 90D98237
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 15:27:13 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6AC43.44883148"
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: Performance question
Date: Thu, 20 Jul 2006 15:27:13 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB4489624@exchange.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Performance question
thread-index: AcasQ0RusfYkNTBhSn2B5izYJ8+ubw==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6AC43.44883148
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I was reading a book on SQL query tuning.  The gist of it was that the
way to get the best performance (fastest execution) out of a SQL select
statement was to "create" execution plans where the most selective term
in the "where" clause is used first, the next most selective term is
used next, etc.  Those of you who write SQL statements know that's
easier said than done.

=20

However, that got me to thinking about the lucene queries I do.  I often
have a Boolean query that's made of a number of sub-queries.  Suppose I
have a BooleanQuery Q which is made up of sub-queries Q1, Q2, and Q3.
Q1 is more selective (gets fewer hits if applied all by itself) than Q2
or Q3.  Q2 is more selective than Q3 (but less selective than Q1).

=20

Does it matter what order I add the sub-queries to the BooleanQuery Q.
That is, is the execution speed for the search faster (slower) if I do:

=20

            Q.add(Q1, BooleanClause.Occur.MUST);

            Q.add(Q2, BooleanClause.Occur.MUST);

            Q.add(Q3, BooleanClause.Occur.MUST);

=20

As opposed to:

=20

            Q.add(Q3, BooleanClause.Occur.MUST);

            Q.add(Q2, BooleanClause.Occur.MUST);

            Q.add(Q1, BooleanClause.Occur.MUST);

=20

Or does it matter at all?

=20

There are cases where I know that, for 99% of the time, certain portions
of my queries are likely to be more selective and I could affect the
order they get added to the BooleanQuery.  Those of you who know lucene
internals, is there anything worth doing here?

=20

Scott=20

=20


------_=_NextPart_001_01C6AC43.44883148--

From java-user-return-22141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 20 22:28:00 2006
Return-Path: <java-user-return-22141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46534 invoked from network); 20 Jul 2006 22:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2006 22:27:59 -0000
Received: (qmail 67676 invoked by uid 500); 20 Jul 2006 22:27:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67335 invoked by uid 500); 20 Jul 2006 22:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67323 invoked by uid 99); 20 Jul 2006 22:27:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 15:27:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 15:27:50 -0700
Received: by nf-out-0910.google.com with SMTP id o63so675481nfa
        for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 15:27:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=W7Uih7NRghTQzuMlE7EAvpP/driCCAV8b+kPiYJpbuSK6tbhpMvaKGNgKm+eI4efAcRcqoYc3WK7IJSvKpTc1lpDH/CuPx4FYE2jQAWbuhUaL7xRcu7np7gpjQJJKk488PBBY1t8gWhstqCtpO94djBProDwdlxdU1mTjIHvJok=
Received: by 10.78.177.11 with SMTP id z11mr963128hue;
        Thu, 20 Jul 2006 15:27:28 -0700 (PDT)
Received: by 10.78.35.19 with HTTP; Thu, 20 Jul 2006 15:27:28 -0700 (PDT)
Message-ID: <8c0c601f0607201527n7a5e5971t2b93a743f51bdb94@mail.gmail.com>
Date: Fri, 21 Jul 2006 00:27:28 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lock obtain time out (&OT: Mailing list settings)
In-Reply-To: <44BEA1DF.4080208@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <44BE2403.7030205@gmail.com> <44BE513B.1090900@mikemccandless.com>
	 <44BE9FE8.4080106@gmail.com> <44BEA12E.90107@mikemccandless.com>
	 <44BEA1DF.4080208@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello

I suppose that you are using gmail?

It is just a property of gmail, take a look at thee archives after a
few hours,  you will find it back ;-)

for example:

http://mail-archives.apache.org/mod_mbox/lucene-java-user/

hth

--paul

On 7/19/06, Pasquale Imbemba <p.imbemba@gmail.com> wrote:
> Michael McCandless wrote:
>
> > If you are subscribed to java-user then you should have received your
> > own original message (and my response) to the list -- are you not
> > seeing that?
>
> No, I didn't receive mine --just yours (and those of others of course).
>
> Pasquale
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
http://walhalla.wordpress.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 00:46:55 2006
Return-Path: <java-user-return-22142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89742 invoked from network); 21 Jul 2006 00:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 00:46:55 -0000
Received: (qmail 80945 invoked by uid 500); 21 Jul 2006 00:46:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80510 invoked by uid 500); 21 Jul 2006 00:46:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80499 invoked by uid 99); 21 Jul 2006 00:46:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 17:46:48 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 17:46:46 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6L0kOaF096962
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 00:46:24 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6L0nXBk117550
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 02:49:33 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6L0kOqO009057
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 02:46:24 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6L0kOwW009054
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 02:46:24 +0200
In-Reply-To: <55F9EF953014514EB6BEE1F5198CEEB4489624@exchange.slc.mainstreamdata.com>
Subject: Re: Performance question
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF5739F481.9522BF15-ON882571B2.00023C77-882571B2.0004438A@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 20 Jul 2006 17:46:34 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 21/07/2006 03:49:32
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Does it matter what order I add the sub-queries to the BooleanQuery Q.
> That is, is the execution speed for the search faster (slower) if I do:
>             Q.add(Q1, BooleanClause.Occur.MUST);
>             Q.add(Q2, BooleanClause.Occur.MUST);
>             Q.add(Q3, BooleanClause.Occur.MUST);
> As opposed to:
>             Q.add(Q3, BooleanClause.Occur.MUST);
>             Q.add(Q2, BooleanClause.Occur.MUST);
>             Q.add(Q1, BooleanClause.Occur.MUST);
> Or does it matter at all?
>
> There are cases where I know that, for 99% of the time, certain portions
> of my queries are likely to be more selective and I could affect the
> order they get added to the BooleanQuery.  Those of you who know lucene
> internals, is there anything worth doing here?
> Scott

I think the order in which the query is composed would not matter, as
Lucene already takes care of this: the order by which the
<list-of-doc-ids-of-a-term> are traversed by ConjunctionScorer (in effect
for a boolean AND query) lets the more selective term lead the query
execution. In fact it seems to be stronger - assume an index with 3000
docs, and a query with 3 terms:
   +t1 +t2 +t3
Also assume that t1, t2, t3 is more selective (rare) for docs [d0,d1000),
t2 more selective for [d1000,d2000) and t3 more selective in [d2000,d3000).
The way Lucene traverses these doc-ids lists, would let t1 lead the
computation in the first range [0,1000], t2 lead it in the second range
[1000,2000), and t3 in the 3rd range.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 00:47:34 2006
Return-Path: <java-user-return-22143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89827 invoked from network); 21 Jul 2006 00:47:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 00:47:34 -0000
Received: (qmail 82534 invoked by uid 500); 21 Jul 2006 00:47:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82005 invoked by uid 500); 21 Jul 2006 00:47:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81994 invoked by uid 99); 21 Jul 2006 00:47:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 17:47:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.64.173.218] (HELO mach2.wwco.com) (69.64.173.218)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 17:47:27 -0700
Received: from [192.168.1.32] (69-175-210-93.chvlva.adelphia.net [69.175.210.93])
	(using TLSv1 with cipher RC4-SHA (128/128 bits))
	(No client certificate requested)
	by mach2.wwco.com (Postfix) with ESMTP id 24F869FD89D
	for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 20:47:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <4E2F7F38-4032-48FA-A64A-35BD0F0DAD2B@wwco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Walt Stoneburner <wls@wwco.com>
Subject: Understanding Lucene Slop
Date: Thu, 20 Jul 2006 20:47:04 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

   I'm trying to understand Lucene's slop value a little better, as  
what I'm able to Google about it seems a little ambiguous.

   My main goal is to search for a linear sequence of keywords in a  
specific order over a given range.  For instant I'd like a query of  
"fate ships" to find sentences like "Fate protects fools, little  
children, and ships named Enterprise."  But not the reverse order,  
such as "The ships' fate were revealed in a series of expeditions."

   My current understanding of slop is that if it is zero, the word  
"ships" and "fate" must be next to each other, but the order is  
unimportant, and that a slop of 7 or more would identify the first  
sentence (and also the second).

   Is there a way to direct Lucene that the order is, or is not,  
important?  (e.g. negative slop or something)

Thank you,
Walt Stoneburner, wls@wwco.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 01:46:01 2006
Return-Path: <java-user-return-22144-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10045 invoked from network); 21 Jul 2006 01:45:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 01:45:54 -0000
Received: (qmail 35398 invoked by uid 500); 21 Jul 2006 01:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34050 invoked by uid 500); 21 Jul 2006 01:44:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33333 invoked by uid 99); 21 Jul 2006 01:44:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 18:44:44 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Jul 2006 18:18:48 -0700
Received: by py-out-1112.google.com with SMTP id e30so1025488pya
        for <java-user@lucene.apache.org>; Thu, 20 Jul 2006 18:18:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hhwMgi9L2LmhWWt8wyUNryKOpnOQbMQB9h4CJSyUDrz9Dg8stslgiLh/g1VV2NM0BpSA0SmE1kCEAtmt+tYFtlLd54C2h7ueZXuvKBLxyqzlUK06MvH4NVlsGWrMRatdLB9sVErHARAJ0Mam/VNyUe2Cp8CxFqTmkQbBO0pSRfE=
Received: by 10.35.27.2 with SMTP id e2mr153982pyj;
        Thu, 20 Jul 2006 18:18:27 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Thu, 20 Jul 2006 18:18:27 -0700 (PDT)
Message-ID: <359a92830607201818m48ccec01j531a25e78328dcec@mail.gmail.com>
Date: Thu, 20 Jul 2006 21:18:27 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Understanding Lucene Slop
In-Reply-To: <4E2F7F38-4032-48FA-A64A-35BD0F0DAD2B@wwco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13999_20100970.1153444707376"
References: <4E2F7F38-4032-48FA-A64A-35BD0F0DAD2B@wwco.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13999_20100970.1153444707376
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you looked at SpanNearQuery? From what you describe, it looks to be
what you want. The constructor takes slop as well as a boolean whether order
is relevant. The array of SpanQuerys would probably consist of a bunch of
SpanTermQuerys.

Best
Erick

------=_Part_13999_20100970.1153444707376--

From java-user-return-22145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 10:10:32 2006
Return-Path: <java-user-return-22145-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66702 invoked from network); 21 Jul 2006 10:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 10:10:32 -0000
Received: (qmail 78588 invoked by uid 500); 21 Jul 2006 10:10:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78426 invoked by uid 500); 21 Jul 2006 10:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78312 invoked by uid 99); 21 Jul 2006 10:10:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:10:15 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 03:10:06 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k6LACCvj003474
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 12:12:12 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 4C6762C05C
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 12:09:42 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id A7E642C05B
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 12:09:40 +0200 (CEST)
Message-ID: <44C0A7E4.8090707@uni-hd.de>
Date: Fri, 21 Jul 2006 12:09:40 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem finding similar documents with MoreLikeThis method.
References: <20060719111434.98187.qmail@web26009.mail.ukl.yahoo.com> <44BE2439.2070407@libero.it>
In-Reply-To: <44BE2439.2070407@libero.it>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

inspired by this thread, I also tried to implement a MoreLikeThis
search. But I have the same Problem of a null query.

I did set the Fieldname to a Field that is stored in the Index.
But "like" just returns null.

Here is my Code:

			Hits hits = this.is.search(new TermQuery(new Term("katkey", Katkey)));
			System.out.println("DOCID:"+hits.id(0));
			System.out.println("hits:"+hits.doc(0).getField("kurz").stringValue()	);
			 MoreLikeThis mlt = new MoreLikeThis(this.ir);
			 mlt.setFieldNames( new String[] {"kurz"} );
			 mlt.setMinDocFreq(0);
			 Query query = mlt.like( hits.id(0) );
			 System.out.println("QUERY:"+query);
			 return this.query(query.toString(),0,10,0);


The Field "kurz" contains the following String:

003481627  M               <v>Swinton, Elizabeth DeSabato</v>: <a>The
graphic art of Onchi Koshiro</a> : innovation and tradition / Elizabeth
de Sab
ato Swinton
New York [u.a.]: Garland, <b>1986</b>. - XXVIII, 307, |&lt;180&gt;| S. :
zahlr. Ill.
ISBN 0-8240-6868-8


Any Ideas?

thanks in advance,
martin


Davide schrieb:
> mark harwood wrote:
>> Does your index have only the one document?
>>
>> MoreLikeThis will only generate queries with terms that occur in more than "minDocFreq" (default setting is 5).
>>
>> This is to avoid the large overheads associated with searching for very common words in your example text.
>>
>>
>>
> 
> Thanks very much Mark.
> I have specified:
> 
> setMinDocFreq(0);
> 
> for testing and It works... the query now isn't empty and the search
> return a document...
> So I think that the "problem" was that...
> 
> Thank you
> Davide.
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 11:17:45 2006
Return-Path: <java-user-return-22146-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93589 invoked from network); 21 Jul 2006 11:17:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 11:17:45 -0000
Received: (qmail 8472 invoked by uid 500); 21 Jul 2006 11:17:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8273 invoked by uid 500); 21 Jul 2006 11:17:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8262 invoked by uid 99); 21 Jul 2006 11:17:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 04:17:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.221] (HELO web26010.mail.ukl.yahoo.com) (217.12.10.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Jul 2006 04:17:36 -0700
Received: (qmail 83077 invoked by uid 60001); 21 Jul 2006 11:17:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RG1Hfrg76Q5frW9TnbF6I5MsAyjqA4XOpRa0kF12NFUgFu2kPHaZMe+92kqokW3iaIph6Q31vNOesYcPmo+B3coFchG2vyKJl3PC/XescpL99pm4Ku1Z5F1NrgnXLE+uAPM1nCtWVaaWyUfbSuZXurnRE1+FLcfO9IMzIShsAbY=  ;
Message-ID: <20060721111714.83075.qmail@web26010.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26010.mail.ukl.yahoo.com via HTTP; Fri, 21 Jul 2006 11:17:14 GMT
Date: Fri, 21 Jul 2006 11:17:14 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Reply-To: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Problem finding similar documents with MoreLikeThis method.
To: java-user@lucene.apache.org
In-Reply-To: <44C0A7E4.8090707@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does your index use StandardAnalyzer? Are your fields stored (Field.Store.Y=
ES)?

MoreLikeThis uses StandardAnalyzer by default to read the stored content fr=
om the example doc which may produce tokens that do not match those of the =
indexed content. Use setAnalyzer() to ensure they are in sync.




----- Original Message ----
From: Martin Braun <mbraun@uni-hd.de>
To: java-user@lucene.apache.org
Sent: Friday, 21 July, 2006 11:09:40 AM
Subject: Re: Problem finding similar documents with MoreLikeThis method.

Hello,

inspired by this thread, I also tried to implement a MoreLikeThis
search. But I have the same Problem of a null query.

I did set the Fieldname to a Field that is stored in the Index.
But "like" just returns null.

Here is my Code:

            Hits hits =3D this.is.search(new TermQuery(new Term("katkey", K=
atkey)));
            System.out.println("DOCID:"+hits.id(0));
            System.out.println("hits:"+hits.doc(0).getField("kurz").stringV=
alue()    );
             MoreLikeThis mlt =3D new MoreLikeThis(this.ir);
             mlt.setFieldNames( new String[] {"kurz"} );
             mlt.setMinDocFreq(0);
             Query query =3D mlt.like( hits.id(0) );
             System.out.println("QUERY:"+query);
             return this.query(query.toString(),0,10,0);


The Field "kurz" contains the following String:

003481627  M               <v>Swinton, Elizabeth DeSabato</v>: <a>=ACThe=AC
graphic art of Onchi Koshiro</a> : innovation and tradition / Elizabeth
de Sab
ato Swinton
New York [u.a.]: Garland, <b>1986</b>. - XXVIII, 307, |&lt;180&gt;| S. :
zahlr. Ill.
ISBN 0-8240-6868-8


Any Ideas?

thanks in advance,
martin


Davide schrieb:
> mark harwood wrote:
>> Does your index have only the one document?
>>
>> MoreLikeThis will only generate queries with terms that occur in more th=
an "minDocFreq" (default setting is 5).
>>
>> This is to avoid the large overheads associated with searching for very =
common words in your example text.
>>
>>
>>
>=20
> Thanks very much Mark.
> I have specified:
>=20
> setMinDocFreq(0);
>=20
> for testing and It works... the query now isn't empty and the search
> return a document...
> So I think that the "problem" was that...
>=20
> Thank you
> Davide.
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 13:03:43 2006
Return-Path: <java-user-return-22147-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29330 invoked from network); 21 Jul 2006 13:03:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 13:03:43 -0000
Received: (qmail 16264 invoked by uid 500); 21 Jul 2006 13:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16232 invoked by uid 500); 21 Jul 2006 13:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16221 invoked by uid 99); 21 Jul 2006 13:03:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 06:03:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 06:03:32 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k6LD5dvj012287
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 15:05:40 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 9B7202C05E
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 15:03:09 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 98B602C05D
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 15:03:07 +0200 (CEST)
Message-ID: <44C0D08B.8080200@uni-hd.de>
Date: Fri, 21 Jul 2006 15:03:07 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Problem finding similar documents with MoreLikeThis method.
References: <20060721111714.83075.qmail@web26010.mail.ukl.yahoo.com>
In-Reply-To: <20060721111714.83075.qmail@web26010.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi mark,
> Does your index use StandardAnalyzer? Are your fields stored (Field.Store.YES)?
Thanks! that was the hint in the right direction, the FIeld was Stored
but not indexed:

titleDocument.add(new Field("kurz", title.getKurz(), Field.Store.YES,
Field.Index.NO));
(That was the field for the short description of a document)

If I set the Fieldname to another Field (indexed with StandardAnalyzer)
which is Indexed (but not Stored) it works if I use the
like(StringReader ) Method but not with like(int docid).

This Code works:

			 MoreLikeThis mlt = new MoreLikeThis(this.ir);
			 mlt.setFieldNames( new String[] {"freitext"} );
			 mlt.setMinDocFreq(0);
	
	 Query query = mlt.like(new
StringReader(hits.doc(0).getField("kurz").stringValue()));

			 System.out.println("QUERY:"+query);

but it doesn't Work with mlt.like( hits.id(0) ); - I think because the
like method uses then the unstored "freitext" Field?

However that works for me because I can get the Document-Data from the
Database and use the like(StringReader) method.


The generated MLT-Query gets very specific so it only finds the same
Doc. Do you have any hints with which parameters I should start to play
to get the query more general?  Perhaps setMaxQueryTerms?

> 
> MoreLikeThis uses StandardAnalyzer by default to read the stored content from the example doc which may produce tokens that do not match those of the indexed content. Use setAnalyzer() to ensure they are in sync.
> 
> 
> 
> 
> ----- Original Message ----
> From: Martin Braun <mbraun@uni-hd.de>
> To: java-user@lucene.apache.org
> Sent: Friday, 21 July, 2006 11:09:40 AM
> Subject: Re: Problem finding similar documents with MoreLikeThis method.
> 
> Hello,
> 
> inspired by this thread, I also tried to implement a MoreLikeThis
> search. But I have the same Problem of a null query.
> 
> I did set the Fieldname to a Field that is stored in the Index.
> But "like" just returns null.
> 
> Here is my Code:
> 
>             Hits hits = this.is.search(new TermQuery(new Term("katkey", Katkey)));
>             System.out.println("DOCID:"+hits.id(0));
>             System.out.println("hits:"+hits.doc(0).getField("kurz").stringValue()    );
>              MoreLikeThis mlt = new MoreLikeThis(this.ir);
>              mlt.setFieldNames( new String[] {"kurz"} );
>              mlt.setMinDocFreq(0);
>              Query query = mlt.like( hits.id(0) );
>              System.out.println("QUERY:"+query);
>              return this.query(query.toString(),0,10,0);
> 
> 
> The Field "kurz" contains the following String:
> 
> 003481627  M               <v>Swinton, Elizabeth DeSabato</v>: <a>The
> graphic art of Onchi Koshiro</a> : innovation and tradition / Elizabeth
> de Sab
> ato Swinton
> New York [u.a.]: Garland, <b>1986</b>. - XXVIII, 307, |&lt;180&gt;| S. :
> zahlr. Ill.
> ISBN 0-8240-6868-8
> 
> 
> Any Ideas?
> 
> thanks in advance,
> martin
> 
> 
> Davide schrieb:
>> mark harwood wrote:
>>> Does your index have only the one document?
>>>
>>> MoreLikeThis will only generate queries with terms that occur in more than "minDocFreq" (default setting is 5).
>>>
>>> This is to avoid the large overheads associated with searching for very common words in your example text.
>>>
>>>
>>>
>> Thanks very much Mark.
>> I have specified:
>>
>> setMinDocFreq(0);
>>
>> for testing and It works... the query now isn't empty and the search
>> return a document...
>> So I think that the "problem" was that...
>>
>> Thank you
>> Davide.
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 13:48:08 2006
Return-Path: <java-user-return-22148-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48929 invoked from network); 21 Jul 2006 13:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 13:48:08 -0000
Received: (qmail 17426 invoked by uid 500); 21 Jul 2006 13:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17393 invoked by uid 500); 21 Jul 2006 13:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17381 invoked by uid 99); 21 Jul 2006 13:48:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 06:48:00 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.210.211 as permitted sender)
Received: from [129.206.210.211] (HELO relay2.uni-heidelberg.de) (129.206.210.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 06:48:00 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay2.uni-heidelberg.de (8.12.10/8.12.10) with ESMTP id k6LDo7vj022129
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 15:50:07 +0200 (MET DST)
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 5DDE62C05A
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 15:47:37 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id D10292C059
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 15:47:35 +0200 (CEST)
Message-ID: <44C0DAF7.7040003@uni-hd.de>
Date: Fri, 21 Jul 2006 15:47:35 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Where to find drill-down examples (source code) 
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I want to realize a drill-down Function aka "narrow search" aka "refine
search".

I want to have something like:

Refine by Date:
* 1990-2000 (30 Docs)
* 2001-2003 (200 Docs)
* 2004-2006 (10 Docs)

But not only DateRanges but also for other Categories.

What I have found in the List-Archives so far is that I have to  use
Filters for my search.

Does anybody knows where to find some Source Code, to get an Idea how to
implement this?
 I think that's a useful property for a search engine, so are there any
contributions for Lucene for that?

thanks,
martin



-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 14:16:44 2006
Return-Path: <java-user-return-22149-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59045 invoked from network); 21 Jul 2006 14:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 14:16:44 -0000
Received: (qmail 3350 invoked by uid 500); 21 Jul 2006 14:16:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3284 invoked by uid 500); 21 Jul 2006 14:16:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3273 invoked by uid 99); 21 Jul 2006 14:16:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:16:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.134.168.16] (HELO atlmaiexcp08.iss.local) (209.134.168.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:16:34 -0700
Received: from soumaiexcp01.iss.local ([207.231.129.197]) by atlmaiexcp08.iss.local with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 21 Jul 2006 10:16:10 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: StandardAnalyzer question
Date: Fri, 21 Jul 2006 10:16:09 -0400
Message-ID: <51540A3DDD507D40B6D47030C8C0C19101A3A1EE@soumaiexcp01.iss.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer question
Thread-Index: AcarT/K7vTe053BUQY68hSiRUBDPFwBf3hFg
From: "Ngo, Anh \(ISS Southfield\)" <ango@iss.net>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jul 2006 14:16:10.0777 (UTC) FILETIME=[374F8090:01C6ACD0]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello

The lucene 2.0.0 StandardAnalyzer does treat the "_"(underscore) as a
token.  Is there a way I can make StandardAnalyzer don't tokenize for
"_" or any given characters?

I'd like to keep all features that StandardAnalyzer have but want to
modified it a bit for my need? How do I control what character is
tokenizable.

Ex: Test_test1_test2 is my data
StandardAnalyzer: Test test1 test2 my data
I'd like to have:  Test_test_test2 my data


Please help.


Thanks,


Anh Ngo


-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Wednesday, July 19, 2006 12:25 PM
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery question


: If  I search with boolQuery, Lucene doesn't find anything.
: If I modify by hand the query from "+(-(FILE:abstract.htm))
: +(PATH:/bssrs)" to "-(FILE:abstract.htm) +(PATH:/bssrs)", Lucene find
: the correct list of document.
:
: Does somebody know why ?

you can't have a boolean query containing only MUST_NOT clauses (which
is
what (-(FILE:abstract.htm)) is.  it matches no documents, so the
mandatory
qualification on it causes the query to fail for all docs.


:
: Thanks in advance,
:
: Nicolas
:
:
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 14:30:21 2006
Return-Path: <java-user-return-22150-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63955 invoked from network); 21 Jul 2006 14:30:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 14:30:21 -0000
Received: (qmail 45414 invoked by uid 500); 21 Jul 2006 14:30:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45387 invoked by uid 500); 21 Jul 2006 14:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45357 invoked by uid 99); 21 Jul 2006 14:30:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:30:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.98] (HELO randymail-a2.dreamhost.com) (208.97.132.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:30:06 -0700
Received: from [192.168.1.132] (unknown [82.153.237.45])
	by randymail-a2.dreamhost.com (Postfix) with ESMTP id 16AFEEE7FC
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 07:29:43 -0700 (PDT)
Message-ID: <44C0E40B.2050306@magpie.net>
Date: Fri, 21 Jul 2006 15:26:19 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Where to find drill-down examples (source code)
References: <44C0DAF7.7040003@uni-hd.de>
In-Reply-To: <44C0DAF7.7040003@uni-hd.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Martin Braun wrote:

>I want to realize a drill-down Function aka "narrow search" aka "refine
>search".
>
>I want to have something like:
>
>Refine by Date:
>* 1990-2000 (30 Docs)
>* 2001-2003 (200 Docs)
>* 2004-2006 (10 Docs)
>
>But not only DateRanges but also for other Categories.
>
>What I have found in the List-Archives so far is that I have to  use
>Filters for my search.
>
>Does anybody knows where to find some Source Code, to get an Idea how to
>implement this?
> I think that's a useful property for a search engine, so are there any
>contributions for Lucene for that?
>

If you want to do a refined search I'd put the original query in a 
QueryFilter, which filters on the new search.

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/QueryFilter.html

e.g.

Query original = // saved from the last time the search was executed
QueryFilter filter = new QueryFilter(original);

QueryParser parser = ...
Searcher searcher = ...

String userQuery;
Query query = parser.parse(userQuery);

Hits hits = searcher.search(query, filter);


Fill in the blanks with however you normally get your QueryParser and 
IndexSearcher. You could store the old query on the session, or 
somewhere else.

Then the QueryFilter will ensure you're doing a refinement, but won't 
affect the scoring in the new search.


Alternatively, since you appear to only want to refine on dates and 
categories, you might want to put them in filters so they don't affect 
the score, and leave the query as is. In which case you can use a 
RangeQuery for the dates, and a wrap a TermQuery in a QueryFilter to 
handle the categories.

If you need multiple filters you can use the ChainedFilter class.




Miles



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 14:44:58 2006
Return-Path: <java-user-return-22151-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69617 invoked from network); 21 Jul 2006 14:44:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 14:44:58 -0000
Received: (qmail 89575 invoked by uid 500); 21 Jul 2006 14:44:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89311 invoked by uid 500); 21 Jul 2006 14:44:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89300 invoked by uid 99); 21 Jul 2006 14:44:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:44:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paul.borgermans@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 07:44:51 -0700
Received: by nf-out-0910.google.com with SMTP id o63so845399nfa
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 07:44:29 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=q/pmkwp+Q2OqcMNgoOQhtz6q3VxPnG5LS+vHCg0RCEvnm0zrX1ayMfsKwoVk2ktbPEtM0sx1pzQtth+dphj2PZGcFWEDwco5G/DehCO5eV3Lh6BtllZAwk/ICSeOdwZFiv/8Jap2OAG8bv4aZnLRwS7G4Oeqa4mm360ivi6Iz9c=
Received: by 10.78.151.3 with SMTP id y3mr397583hud;
        Fri, 21 Jul 2006 07:44:29 -0700 (PDT)
Received: by 10.78.35.1 with HTTP; Fri, 21 Jul 2006 07:44:29 -0700 (PDT)
Message-ID: <8c0c601f0607210744j7c4a6855o5fcbf45f932527ea@mail.gmail.com>
Date: Fri, 21 Jul 2006 16:44:29 +0200
From: "Paul Borgermans" <paul.borgermans@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery question
In-Reply-To: <Pine.LNX.4.58.0607190933120.12926@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl>
	 <44BE56F7.4020808@4dconcept.fr>
	 <Pine.LNX.4.58.0607190922370.12926@hal.rescomp.berkeley.edu>
	 <44BE5E4E.7050108@4dconcept.fr>
	 <Pine.LNX.4.58.0607190933120.12926@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

>you can't have a boolean query containing only MUST_NOT clauses (which is
>what (-(FILE:abstract.htm)) is.  it matches no documents, so the mandatory
>qualification on it causes the query to fail for all docs.

This is true for the search queries, but it makes sense in a query
filter IMHO. I encountered this and had to add a MUST clause on the
Filter with a trivial field in order not to break the Filter returning
zero documents.

Isn't this a conceptual bug in the case of constructing a filter along a query?

Regards

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 15:20:32 2006
Return-Path: <java-user-return-22152-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88867 invoked from network); 21 Jul 2006 15:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 15:20:32 -0000
Received: (qmail 96408 invoked by uid 500); 21 Jul 2006 15:20:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96377 invoked by uid 500); 21 Jul 2006 15:20:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96366 invoked by uid 99); 21 Jul 2006 15:20:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 08:20:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [68.142.198.204] (HELO smtp105.sbc.mail.mud.yahoo.com) (68.142.198.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Jul 2006 08:20:24 -0700
Received: (qmail 52623 invoked from network); 21 Jul 2006 15:20:02 -0000
Received: from unknown (HELO ?192.168.50.160?) (kkrugler@pacbell.net@69.17.55.128 with plain)
  by smtp105.sbc.mail.mud.yahoo.com with SMTP; 21 Jul 2006 15:20:01 -0000
Mime-Version: 1.0
Message-Id: <p0623091ec0e69b1895b7@[192.168.50.160]>
In-Reply-To: <44C0DAF7.7040003@uni-hd.de>
References: <44C0DAF7.7040003@uni-hd.de>
Date: Fri, 21 Jul 2006 07:57:43 -0700
To: java-user@lucene.apache.org
From: Ken Krugler <kkrugler_lists@transpac.com>
Subject: Re: Where to find drill-down examples (source code)
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>Hello all,
>
>I want to realize a drill-down Function aka "narrow search" aka "refine
>search".
>
>I want to have something like:
>
>Refine by Date:
>* 1990-2000 (30 Docs)
>* 2001-2003 (200 Docs)
>* 2004-2006 (10 Docs)
>
>But not only DateRanges but also for other Categories.
>
>What I have found in the List-Archives so far is that I have to  use
>Filters for my search.
>
>Does anybody knows where to find some Source Code, to get an Idea how to
>implement this?

One example (I think) is:

http://www.krugle.com/files/cvs/savannah.nongnu.org/sdx/sdx_v2/src/java/fr/gouv/culture/sdx/search/lucene/query/DateIntervalQuery.java

-- Ken
-- 
Ken Krugler
Krugle, Inc.
+1 530-210-6378
"Find Code, Find Answers"

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 18:43:38 2006
Return-Path: <java-user-return-22153-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79172 invoked from network); 21 Jul 2006 18:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 18:43:37 -0000
Received: (qmail 50576 invoked by uid 500); 21 Jul 2006 18:43:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50487 invoked by uid 500); 21 Jul 2006 18:43:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50474 invoked by uid 99); 21 Jul 2006 18:43:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:43:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:43:29 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Fri, 21 Jul 2006 14:43:08 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
To: java-user@lucene.apache.org
Message-Id: <E2306077-A633-4CEF-B366-95620F857942@genome.chop.edu>
Content-Type: multipart/alternative; boundary=Apple-Mail-2--893437451
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Fastest Method for Searching (need all results)
Date: Fri, 21 Jul 2006 14:43:41 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-2--893437451
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

My index contains approximately 5 millions documents.  During a  
search, I need to grab the value of a field for every document in the  
result set.  I am currently using a HitCollector to search.  Below is  
my code:

searcher.search(query, new HitCollector(){
                         public void collect(int doc, float score){
                                 if(searcher.doc(doc).get("SYM") !=  
null){
                                     addSymbolsToHash(searcher.doc 
(doc).get("SYM").split("ENDOFSYM"));
                                 }
                         }
                     });

This is fairly fast for small and medium-sized result sets.  However,  
it gets slow as the result set grows.  I read this on HitCollector's  
API page:

"For good search performance, implementations of this method should  
not call Searcher.doc(int) or Reader.document(int) on every document  
number encountered. Doing so can slow searches by an order of  
magnitude or more."

Along with this implementation, I've also tried using FieldCache.   
This faired better with large-sized result sets, but worse with small  
and medium-sized result sets.  Anyone have any ideas of what the best  
approach might be?

Thanks a lot,
Ryan
--Apple-Mail-2--893437451--

From java-user-return-22154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 18:47:37 2006
Return-Path: <java-user-return-22154-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79819 invoked from network); 21 Jul 2006 18:47:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 18:47:36 -0000
Received: (qmail 63447 invoked by uid 500); 21 Jul 2006 18:47:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63424 invoked by uid 500); 21 Jul 2006 18:47:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63410 invoked by uid 99); 21 Jul 2006 18:47:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:47:29 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=RCVD_IN_SORBS_WEB,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:47:28 -0700
Received: (qmail 14691 invoked from network); 21 Jul 2006 18:47:06 -0000
Received: from unknown (HELO p5496fe52.dip.t-dialin.net) ([pbs]695637@[84.150.254.82])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 21 Jul 2006 18:47:06 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question
Date: Fri, 21 Jul 2006 20:49:09 +0200
User-Agent: KMail/1.8.2
References: <51540A3DDD507D40B6D47030C8C0C19101A3A1EE@soumaiexcp01.iss.net>
In-Reply-To: <51540A3DDD507D40B6D47030C8C0C19101A3A1EE@soumaiexcp01.iss.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200607212049.09196@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Freitag 21 Juli 2006 16:16, Ngo, Anh (ISS Southfield) wrote:

> The lucene 2.0.0 StandardAnalyzer does treat the "_"(underscore) as a
> token. =C2=A0Is there a way I can make StandardAnalyzer don't tokenize for
> "_" or any given characters?

You need to add "_" to the #LETTER definition in StandardTokenizer.jj, then=
=20
rebuild StandardTokenizer.java using the appropriate and task.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 18:58:20 2006
Return-Path: <java-user-return-22155-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84229 invoked from network); 21 Jul 2006 18:58:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 18:58:19 -0000
Received: (qmail 86448 invoked by uid 500); 21 Jul 2006 18:58:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85853 invoked by uid 500); 21 Jul 2006 18:58:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85842 invoked by uid 99); 21 Jul 2006 18:58:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:58:13 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Jul 2006 11:58:11 -0700
Received: (qmail 37041 invoked by uid 60001); 21 Jul 2006 18:57:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=32jhDTRA9RhuqdYf41p48PHK7mDN809ijOtXvW0T6LxmGnynTZHd0cgckNockSNUVgiEkiKFDBdWPtG7NSBuAr85JqvP8pbytWZekukVQdRDqgdg1rnp2aFctBvSDh4IzcJ9QUFnKtczQgfkdsVWVfDIBfDJWieJjeekizlVHwI=  ;
Message-ID: <20060721185750.37039.qmail@web50313.mail.yahoo.com>
Received: from [66.92.180.250] by web50313.mail.yahoo.com via HTTP; Fri, 21 Jul 2006 11:57:50 PDT
Date: Fri, 21 Jul 2006 11:57:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Fastest Method for Searching (need all results)
To: java-user@lucene.apache.org
In-Reply-To: <E2306077-A633-4CEF-B366-95620F857942@genome.chop.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I haven't had the chance to use this new feature yet, but have you tried with selective field loading, so that you can load only that 1 field from your index and not all of them?

Otis

----- Original Message ----
From: Ryan O'Hara <ohara@genome.chop.edu>
To: java-user@lucene.apache.org
Sent: Friday, July 21, 2006 2:43:41 PM
Subject: Fastest Method for Searching (need all results)

My index contains approximately 5 millions documents.  During a  
search, I need to grab the value of a field for every document in the  
result set.  I am currently using a HitCollector to search.  Below is  
my code:

searcher.search(query, new HitCollector(){
                         public void collect(int doc, float score){
                                 if(searcher.doc(doc).get("SYM") !=  
null){
                                     addSymbolsToHash(searcher.doc 
(doc).get("SYM").split("ENDOFSYM"));
                                 }
                         }
                     });

This is fairly fast for small and medium-sized result sets.  However,  
it gets slow as the result set grows.  I read this on HitCollector's  
API page:

"For good search performance, implementations of this method should  
not call Searcher.doc(int) or Reader.document(int) on every document  
number encountered. Doing so can slow searches by an order of  
magnitude or more."

Along with this implementation, I've also tried using FieldCache.   
This faired better with large-sized result sets, but worse with small  
and medium-sized result sets.  Anyone have any ideas of what the best  
approach might be?

Thanks a lot,
Ryan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 18:59:33 2006
Return-Path: <java-user-return-22156-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84530 invoked from network); 21 Jul 2006 18:59:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 18:59:32 -0000
Received: (qmail 90711 invoked by uid 500); 21 Jul 2006 18:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90544 invoked by uid 500); 21 Jul 2006 18:59:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90533 invoked by uid 99); 21 Jul 2006 18:59:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:59:26 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 11:59:25 -0700
Received: by wr-out-0506.google.com with SMTP id 37so391363wra
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 11:59:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ix1pA+jKXEbkD8an37ZMv7MfacMjbIlXKpq9sUwmtjEcu814dZpmIQ8HAeruDRotgApCvIn2pgPYv0jcU58GZR9jxi5/po21cwgeLeYn9D67NdsN/xDgsyWS3YV7xKmNozLd4j/aI6+zMRMdMeDhn7xQvUY4E2TAVIyY2RMTz6I=
Received: by 10.54.93.15 with SMTP id q15mr1096136wrb;
        Fri, 21 Jul 2006 11:59:04 -0700 (PDT)
Received: from ?192.168.1.101? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id g3sm1626936wra.2006.07.21.11.59.03;
        Fri, 21 Jul 2006 11:59:04 -0700 (PDT)
Message-ID: <44C12408.3060209@gmail.com>
Date: Fri, 21 Jul 2006 14:59:20 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Fastest Method for Searching (need all results)
References: <E2306077-A633-4CEF-B366-95620F857942@genome.chop.edu>
In-Reply-To: <E2306077-A633-4CEF-B366-95620F857942@genome.chop.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ryan O'Hara wrote:
> My index contains approximately 5 millions documents.  During a 
> search, I need to grab the value of a field for every document in the 
> result set.  I am currently using a HitCollector to search.  Below is 
> my code:
>
> searcher.search(query, new HitCollector(){
>                         public void collect(int doc, float score){
>                                 if(searcher.doc(doc).get("SYM") != null){
>                                     
> addSymbolsToHash(searcher.doc(doc).get("SYM").split("ENDOFSYM"));
>                                 }
>                         }
>                     });
>
> This is fairly fast for small and medium-sized result sets.  However, 
> it gets slow as the result set grows.  I read this on HitCollector's 
> API page:
>
> "For good search performance, implementations of this method should 
> not call Searcher.doc(int) or Reader.document(int) on every document 
> number encountered. Doing so can slow searches by an order of 
> magnitude or more."
>
> Along with this implementation, I've also tried using FieldCache.  
> This faired better with large-sized result sets, but worse with small 
> and medium-sized result sets.  Anyone have any ideas of what the best 
> approach might be?
>
> Thanks a lot,
> Ryan
Perhaps I am speaking too quickly, but I would try by not grabbing the 
value of the field for every document in the results set. Someone will 
see that value or use it for a couple million hits? Could be I 
suppose...but if not than axe it. Grab the first few thousand (or MUCH 
less) and if they need more head back in and grab more.


- mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 19:05:18 2006
Return-Path: <java-user-return-22157-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86690 invoked from network); 21 Jul 2006 19:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:05:18 -0000
Received: (qmail 2840 invoked by uid 500); 21 Jul 2006 19:05:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2813 invoked by uid 500); 21 Jul 2006 19:05:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2760 invoked by uid 99); 21 Jul 2006 19:05:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:05:04 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:05:03 -0700
Received: by wr-out-0506.google.com with SMTP id 37so392004wra
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 12:04:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=MEZfQQXigRCgI7pqLt7+PNioZ+LufwQqIuCtp5zLn3SCUFwBELfAnAyaqrg7juUne+6Wxo/wOyz1MxsXN812M8mFsFZw82V6slCgV4ejLiu4tCgYcwgZ/x14+J6ge87HoE/luoQngd0WGMHbC2wt+pke0qzrwAu1V9SuXwlXerA=
Received: by 10.54.146.6 with SMTP id t6mr1087318wrd;
        Fri, 21 Jul 2006 12:04:43 -0700 (PDT)
Received: from ?192.168.1.101? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id g2sm2565038wra.2006.07.21.12.04.42;
        Fri, 21 Jul 2006 12:04:42 -0700 (PDT)
Message-ID: <44C1255B.1050104@gmail.com>
Date: Fri, 21 Jul 2006 15:04:59 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Where to find drill-down examples (source code)
References: <44C0DAF7.7040003@uni-hd.de> <p0623091ec0e69b1895b7@[192.168.50.160]>
In-Reply-To: <p0623091ec0e69b1895b7@[192.168.50.160]>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ken Krugler wrote:
>> Hello all,
>>
>> I want to realize a drill-down Function aka "narrow search" aka "refine
>> search".
>>
>> I want to have something like:
>>
>> Refine by Date:
>> * 1990-2000 (30 Docs)
>> * 2001-2003 (200 Docs)
>> * 2004-2006 (10 Docs)
>>
>> But not only DateRanges but also for other Categories.
>>
>> What I have found in the List-Archives so far is that I have to  use
>> Filters for my search.
>>
>> Does anybody knows where to find some Source Code, to get an Idea how to
>> implement this?
>
> One example (I think) is:
>
> http://www.krugle.com/files/cvs/savannah.nongnu.org/sdx/sdx_v2/src/java/fr/gouv/culture/sdx/search/lucene/query/DateIntervalQuery.java 
>
>
> -- Ken
from the lucene wiki:

Can Lucene do a "search within search", so that the second search is 
constrained by the results of the first query?

Yes. There are two primary options:

  *

      Use QueryFilter with the previous query as the filter. (you can 
search the mailing list archives for QueryFilter and Doug Cutting's 
recommendations against using it for this purpose)
    *

      Combine the previous query with the current query using 
BooleanQuery, using the previous query as required.

The BooleanQuery approach is the recommended one.

unquote:
seems to me that simply adding your drilled down query part to the 
previous query with a BooleanQuery should do the trick.


- mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 19:11:40 2006
Return-Path: <java-user-return-22158-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88373 invoked from network); 21 Jul 2006 19:11:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:11:40 -0000
Received: (qmail 21772 invoked by uid 500); 21 Jul 2006 19:11:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21745 invoked by uid 500); 21 Jul 2006 19:11:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21734 invoked by uid 99); 21 Jul 2006 19:11:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:11:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:11:32 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Fri, 21 Jul 2006 15:11:12 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44C12408.3060209@gmail.com>
References: <E2306077-A633-4CEF-B366-95620F857942@genome.chop.edu> <44C12408.3060209@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2EAD1400-6F6D-4D71-A740-44EEEB20BE4E@genome.chop.edu>
Content-Transfer-Encoding: 7bit
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: Fastest Method for Searching (need all results)
Date: Fri, 21 Jul 2006 15:11:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Perhaps I am speaking too quickly, but I would try by not grabbing  
> the value of the field for every document in the results set.  
> Someone will see that value or use it for a couple million hits?  
> Could be I suppose...but if not than axe it. Grab the first few  
> thousand (or MUCH less) and if they need more head back in and grab  
> more.
>
>
> - mark

I need all values of a certain field from each document.  More  
specifically, I need a compilation of all symbols in the result set.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 19:19:50 2006
Return-Path: <java-user-return-22159-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90034 invoked from network); 21 Jul 2006 19:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:19:50 -0000
Received: (qmail 32932 invoked by uid 500); 21 Jul 2006 19:19:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32897 invoked by uid 500); 21 Jul 2006 19:19:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32886 invoked by uid 99); 21 Jul 2006 19:19:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:19:44 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:19:43 -0700
Received: by wr-out-0506.google.com with SMTP id 37so393562wra
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 12:19:23 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=kM8++j9S0/46VHfenZvijuDdjTUZ6q3nr9dUf7oDtoQvk/bYlfpuN8qveKFZsS3twqQEK4exfv+y2RhsAPiWufzmcTw10VbB4qaMfqGLO22qyJ7zNylRXwdBlJ6uZHy3ocErGf33YbCb5GRPeIsvqMmUE0Fp/24wmcYzh/LjO5g=
Received: by 10.54.69.13 with SMTP id r13mr1089725wra;
        Fri, 21 Jul 2006 12:19:23 -0700 (PDT)
Received: from ?192.168.1.101? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 45sm2567204wri.2006.07.21.12.19.22;
        Fri, 21 Jul 2006 12:19:22 -0700 (PDT)
Message-ID: <44C128CA.5020703@gmail.com>
Date: Fri, 21 Jul 2006 15:19:38 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Fastest Method for Searching (need all results)
References: <20060721185750.37039.qmail@web50313.mail.yahoo.com>
In-Reply-To: <20060721185750.37039.qmail@web50313.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Provides a new api, IndexReader.document(int doc, String[] fields).  A document containing
only the specified fields is created.  The other fields of the document are not loaded, although
unfortunately uncompressed strings still have to be scanned because the length information
in the index is for UTF-8 encoded chars and not bytes.  This is useful for applications that
need quick access to a small subset of the fields.  It can be used in conjunction with or
for some uses instead of ParallelReader.

Does this mean that you must be compressing the fields to really take advantage of this? Or does 'scanned' not infer a load.

- mark


Otis Gospodnetic wrote:
> I haven't had the chance to use this new feature yet, but have you tried with selective field loading, so that you can load only that 1 field from your index and not all of them?
>
> Otis
>
>
>
>   



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 19:26:35 2006
Return-Path: <java-user-return-22160-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98108 invoked from network); 21 Jul 2006 19:26:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:26:35 -0000
Received: (qmail 47086 invoked by uid 500); 21 Jul 2006 19:26:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47064 invoked by uid 500); 21 Jul 2006 19:26:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47053 invoked by uid 99); 21 Jul 2006 19:26:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:26:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:26:27 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Fri, 21 Jul 2006 15:26:06 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060721185750.37039.qmail@web50313.mail.yahoo.com>
References: <20060721185750.37039.qmail@web50313.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D6C54010-C8BD-4BC3-A5F2-93F14CE42B10@genome.chop.edu>
Content-Transfer-Encoding: 7bit
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: Fastest Method for Searching (need all results)
Date: Fri, 21 Jul 2006 15:26:37 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I haven't had the chance to use this new feature yet, but have you  
> tried with selective field loading, so that you can load only that  
> 1 field from your index and not all of them?

I have not tried selective field loading, but it sounds like a good  
idea.  What class is it in?  Any more information would be  
appreciated.  Thanks again.

Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 19:44:57 2006
Return-Path: <java-user-return-22161-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2399 invoked from network); 21 Jul 2006 19:44:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:44:57 -0000
Received: (qmail 72439 invoked by uid 500); 21 Jul 2006 19:44:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72315 invoked by uid 500); 21 Jul 2006 19:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72304 invoked by uid 99); 21 Jul 2006 19:44:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:44:50 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.134.168.16] (HELO atlmaiexcp08.iss.local) (209.134.168.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:44:49 -0700
Received: from soumaiexcp01.iss.local ([207.231.129.197]) by atlmaiexcp08.iss.local with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 21 Jul 2006 15:44:27 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: StandardAnalyzer question
Date: Fri, 21 Jul 2006 15:44:26 -0400
Message-ID: <51540A3DDD507D40B6D47030C8C0C19101A3A1F0@soumaiexcp01.iss.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer question
Thread-Index: Acas9iOlppfaHxS/TS2yQYdfc5d+/QAB6i5w
From: "Ngo, Anh \(ISS Southfield\)" <ango@iss.net>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jul 2006 19:44:27.0619 (UTC) FILETIME=[138B1330:01C6ACFE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


What is #LETTER definition in SnardarTokernize.jj?


I saw:

| <#P: ("_"|"-"|"/"|"."|",") >
| <#HAS_DIGIT:					  // at least one digit
    (<LETTER>|<DIGIT>)*
    <DIGIT>
    (<LETTER>|<DIGIT>)*
  >


Should I remove "_" and recompile the source code?

Sincerely,


Anh Ngo

-----Original Message-----
From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]=20
Sent: Friday, July 21, 2006 2:49 PM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question

On Freitag 21 Juli 2006 16:16, Ngo, Anh (ISS Southfield) wrote:

> The lucene 2.0.0 StandardAnalyzer does treat the "_"(underscore) as a
> token. =A0Is there a way I can make StandardAnalyzer don't tokenize =
for
> "_" or any given characters?

You need to add "_" to the #LETTER definition in StandardTokenizer.jj, =
then=20
rebuild StandardTokenizer.java using the appropriate and task.

Regards
 Daniel

--=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 19:51:20 2006
Return-Path: <java-user-return-22162-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3648 invoked from network); 21 Jul 2006 19:51:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:51:20 -0000
Received: (qmail 83536 invoked by uid 500); 21 Jul 2006 19:51:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83197 invoked by uid 500); 21 Jul 2006 19:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83186 invoked by uid 99); 21 Jul 2006 19:51:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:51:14 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:51:13 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1333390uge
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 12:50:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=au4qMV7QnaxwEdMi7jHacyewfEbBLy097KmjKnUkJ9F/KapCNsYCEua7s39RrYQpV2k5loy8HNjeNcxqcUS4JeuWAiow5E2NF/5JWogpANb6xa0AHK6n6dPJyv15s1nPtGl/BtuQd11V9igWYtv0qgTxoqOZRv8mvg1ZiEvlbts=
Received: by 10.67.22.2 with SMTP id z2mr1040809ugi;
        Fri, 21 Jul 2006 12:50:51 -0700 (PDT)
Received: by 10.67.90.14 with HTTP; Fri, 21 Jul 2006 12:50:51 -0700 (PDT)
Message-ID: <ab0709bf0607211250n2d4f04ceo98a3fceba5395190@mail.gmail.com>
Date: Fri, 21 Jul 2006 15:50:51 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question
In-Reply-To: <51540A3DDD507D40B6D47030C8C0C19101A3A1F0@soumaiexcp01.iss.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_203131_11698783.1153511451325"
References: <51540A3DDD507D40B6D47030C8C0C19101A3A1F0@soumaiexcp01.iss.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_203131_11698783.1153511451325
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I do not beleive so. If you look above you will see that #P is only used
when looking for a num: a host ip, a phone number, etc. You will be removing
that ability to recognize a "_" while rooting those tokens out. It will
still be parsed when tokenizing an EMAIL as well. I dont think this is the
behavior you want.

- Mark

On 7/21/06, Ngo, Anh (ISS Southfield) <ango@iss.net> wrote:
>
>
> What is #LETTER definition in SnardarTokernize.jj?
>
>
> I saw:
>
> | <#P: ("_"|"-"|"/"|"."|",") >
> | <#HAS_DIGIT:                                    // at least one digit
>     (<LETTER>|<DIGIT>)*
>     <DIGIT>
>     (<LETTER>|<DIGIT>)*
>   >
>
>
> Should I remove "_" and recompile the source code?
>
> Sincerely,
>
>
> Anh Ngo
>
> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]
> Sent: Friday, July 21, 2006 2:49 PM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer question
>
> On Freitag 21 Juli 2006 16:16, Ngo, Anh (ISS Southfield) wrote:
>
> > The lucene 2.0.0 StandardAnalyzer does treat the "_"(underscore) as a
> > token. Is there a way I can make StandardAnalyzer don't tokenize for
> > "_" or any given characters?
>
> You need to add "_" to the #LETTER definition in StandardTokenizer.jj,
> then
> rebuild StandardTokenizer.java using the appropriate and task.
>
> Regards
> Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_203131_11698783.1153511451325--

From java-user-return-22163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 19:59:45 2006
Return-Path: <java-user-return-22163-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8224 invoked from network); 21 Jul 2006 19:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 19:59:45 -0000
Received: (qmail 99804 invoked by uid 500); 21 Jul 2006 19:59:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99322 invoked by uid 500); 21 Jul 2006 19:59:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99310 invoked by uid 99); 21 Jul 2006 19:59:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:59:39 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.134.168.15] (HELO atlmaiexcp07.iss.local) (209.134.168.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 12:59:38 -0700
Received: from soumaiexcp01.iss.local ([207.231.129.197]) by atlmaiexcp07.iss.local with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 21 Jul 2006 15:59:15 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: StandardAnalyzer question
Date: Fri, 21 Jul 2006 15:59:14 -0400
Message-ID: <51540A3DDD507D40B6D47030C8C0C19101A3A1F1@soumaiexcp01.iss.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer question
Thread-Index: Acas/wpOiZEFxeqqTsmAUIpjOONFKAAAP4Qg
From: "Ngo, Anh \(ISS Southfield\)" <ango@iss.net>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jul 2006 19:59:15.0603 (UTC) FILETIME=[24D2AE30:01C6AD00]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello Mark,


Please show me how to add "-" to #LETTER definition


Thanks,


Anh Ngo

-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]=20
Sent: Friday, July 21, 2006 3:51 PM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question

I do not beleive so. If you look above you will see that #P is only used
when looking for a num: a host ip, a phone number, etc. You will be
removing
that ability to recognize a "_" while rooting those tokens out. It will
still be parsed when tokenizing an EMAIL as well. I dont think this is
the
behavior you want.

- Mark

On 7/21/06, Ngo, Anh (ISS Southfield) <ango@iss.net> wrote:
>
>
> What is #LETTER definition in SnardarTokernize.jj?
>
>
> I saw:
>
> | <#P: ("_"|"-"|"/"|"."|",") >
> | <#HAS_DIGIT:                                    // at least one
digit
>     (<LETTER>|<DIGIT>)*
>     <DIGIT>
>     (<LETTER>|<DIGIT>)*
>   >
>
>
> Should I remove "_" and recompile the source code?
>
> Sincerely,
>
>
> Anh Ngo
>
> -----Original Message-----
> From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]
> Sent: Friday, July 21, 2006 2:49 PM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer question
>
> On Freitag 21 Juli 2006 16:16, Ngo, Anh (ISS Southfield) wrote:
>
> > The lucene 2.0.0 StandardAnalyzer does treat the "_"(underscore) as
a
> > token. Is there a way I can make StandardAnalyzer don't tokenize for
> > "_" or any given characters?
>
> You need to add "_" to the #LETTER definition in StandardTokenizer.jj,
> then
> rebuild StandardTokenizer.java using the appropriate and task.
>
> Regards
> Daniel
>
> --
> http://www.danielnaber.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 20:05:51 2006
Return-Path: <java-user-return-22164-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9163 invoked from network); 21 Jul 2006 20:05:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 20:05:50 -0000
Received: (qmail 5358 invoked by uid 500); 21 Jul 2006 20:05:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4786 invoked by uid 500); 21 Jul 2006 20:05:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4775 invoked by uid 99); 21 Jul 2006 20:05:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 13:05:44 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 13:05:42 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1338464uge
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 13:05:21 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JTX94o9cTond2CET9c+Y5t9CZM9Z9jCPFFEPOu8On36BXjK0U13TNhC6trmfGx0pfzbUSD5V68x6u5PsRWDatGumgTiU0MG9fo9Hm7BTEZpZIWaIGhhjcD0OQYybT5iA5IqQpHSmxINroUsL0A8JYjIVT4AfKv51aqzgXPtWDuY=
Received: by 10.66.224.19 with SMTP id w19mr1050520ugg;
        Fri, 21 Jul 2006 13:05:21 -0700 (PDT)
Received: by 10.67.90.14 with HTTP; Fri, 21 Jul 2006 13:05:20 -0700 (PDT)
Message-ID: <ab0709bf0607211305l5b4242d8h4e06f7845994d547@mail.gmail.com>
Date: Fri, 21 Jul 2006 16:05:20 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question
In-Reply-To: <ab0709bf0607211250n2d4f04ceo98a3fceba5395190@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_203484_21551478.1153512320952"
References: <51540A3DDD507D40B6D47030C8C0C19101A3A1F0@soumaiexcp01.iss.net>
	 <ab0709bf0607211250n2d4f04ceo98a3fceba5395190@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_203484_21551478.1153512320952
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I take it back. Probably exactley what you want. Watch out if you're not
compiling all of lucene...you need to avoid a ParserException using ant if
you try to just extract the Standard Analyzer package (the recommended
approach).


On 7/21/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> I do not beleive so. If you look above you will see that #P is only used
> when looking for a num: a host ip, a phone number, etc. You will be removing
> that ability to recognize a "_" while rooting those tokens out. It will
> still be parsed when tokenizing an EMAIL as well. I dont think this is the
> behavior you want.
>
> - Mark
>
>
> On 7/21/06, Ngo, Anh (ISS Southfield) < ango@iss.net> wrote:
> >
> >
> > What is #LETTER definition in SnardarTokernize.jj?
> >
> >
> > I saw:
> >
> > | <#P: ("_"|"-"|"/"|"."|",") >
> > | <#HAS_DIGIT:                                    // at least one digit
> >     (<LETTER>|<DIGIT>)*
> >     <DIGIT>
> >     (<LETTER>|<DIGIT>)*
> >   >
> >
> >
> > Should I remove "_" and recompile the source code?
> >
> > Sincerely,
> >
> >
> > Anh Ngo
> >
> > -----Original Message-----
> > From: Daniel Naber [mailto: lucenelist2005@danielnaber.de]
> > Sent: Friday, July 21, 2006 2:49 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: StandardAnalyzer question
> >
> > On Freitag 21 Juli 2006 16:16, Ngo, Anh (ISS Southfield) wrote:
> >
> > > The lucene 2.0.0 StandardAnalyzer does treat the "_"(underscore) as a
> > > token. Is there a way I can make StandardAnalyzer don't tokenize for
> > > "_" or any given characters?
> >
> > You need to add "_" to the #LETTER definition in StandardTokenizer.jj,
> > then
> > rebuild StandardTokenizer.java using the appropriate and task.
> >
> > Regards
> > Daniel
> >
> > --
> > http://www.danielnaber.de
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_203484_21551478.1153512320952--

From java-user-return-22165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 20:09:59 2006
Return-Path: <java-user-return-22165-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9862 invoked from network); 21 Jul 2006 20:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 20:09:59 -0000
Received: (qmail 9700 invoked by uid 500); 21 Jul 2006 20:09:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9656 invoked by uid 500); 21 Jul 2006 20:09:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9645 invoked by uid 99); 21 Jul 2006 20:09:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 13:09:53 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 13:09:52 -0700
Received: by ug-out-1314.google.com with SMTP id y2so1339918uge
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 13:09:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pe3UJ7vNONqWzXLAPmToP32R7IEQTgnMdoVrujCbJ+lWgYR6ccO0RsSjoGXEZBkS1rhqEEW0RIZGYsbdYxT2i39aF73lB6Rh7YRJxntj74X5yal4GaVpqQrwKFu1wp7EJO9TICAXuDr5UQ48vMpCjb+zCrd5jm5i6NFchLOwgRw=
Received: by 10.67.29.12 with SMTP id g12mr1026018ugj;
        Fri, 21 Jul 2006 13:09:30 -0700 (PDT)
Received: by 10.67.90.14 with HTTP; Fri, 21 Jul 2006 13:09:28 -0700 (PDT)
Message-ID: <ab0709bf0607211309k1e3a8e24u85896582dfcf08ef@mail.gmail.com>
Date: Fri, 21 Jul 2006 16:09:28 -0400
From: "Mark Miller" <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question
In-Reply-To: <51540A3DDD507D40B6D47030C8C0C19101A3A1F1@soumaiexcp01.iss.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9_20444770.1153512568127"
References: <51540A3DDD507D40B6D47030C8C0C19101A3A1F1@soumaiexcp01.iss.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9_20444770.1153512568127
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

| < #LETTER:                      // unicode letters
      [
       "\u0041"-"\u005a",
       "\u0061"-"\u007a",
       "\u00c0"-"\u00d6",
       "\u00d8"-"\u00f6",
       "\u00f8"-"\u00ff",
       "\u0100"-"\u1fff"
      ]

becomes

| < #LETTER:                      // unicode letters
      [
       "\u0041"-"\u005a",
       "\u0061"-"\u007a",
       "\u00c0"-"\u00d6",
       "\u00d8"-"\u00f6",
       "\u00f8"-"\u00ff",
       "\u0100"-"\u1fff",
       "\u002d"
      ]

On 7/21/06, Ngo, Anh (ISS Southfield) <ango@iss.net> wrote:
>
>
> Hello Mark,
>
>
> Please show me how to add "-" to #LETTER definition
>
>
> Thanks,
>
>
> Anh Ngo
>
> -----Original Message-----
> From: Mark Miller [mailto:markrmiller@gmail.com]
> Sent: Friday, July 21, 2006 3:51 PM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer question
>
> I do not beleive so. If you look above you will see that #P is only used
> when looking for a num: a host ip, a phone number, etc. You will be
> removing
> that ability to recognize a "_" while rooting those tokens out. It will
> still be parsed when tokenizing an EMAIL as well. I dont think this is
> the
> behavior you want.
>
> - Mark
>
> On 7/21/06, Ngo, Anh (ISS Southfield) <ango@iss.net> wrote:
> >
> >
> > What is #LETTER definition in SnardarTokernize.jj?
> >
> >
> > I saw:
> >
> > | <#P: ("_"|"-"|"/"|"."|",") >
> > | <#HAS_DIGIT:                                    // at least one
> digit
> >     (<LETTER>|<DIGIT>)*
> >     <DIGIT>
> >     (<LETTER>|<DIGIT>)*
> >   >
> >
> >
> > Should I remove "_" and recompile the source code?
> >
> > Sincerely,
> >
> >
> > Anh Ngo
> >
> > -----Original Message-----
> > From: Daniel Naber [mailto:lucenelist2005@danielnaber.de]
> > Sent: Friday, July 21, 2006 2:49 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: StandardAnalyzer question
> >
> > On Freitag 21 Juli 2006 16:16, Ngo, Anh (ISS Southfield) wrote:
> >
> > > The lucene 2.0.0 StandardAnalyzer does treat the "_"(underscore) as
> a
> > > token. Is there a way I can make StandardAnalyzer don't tokenize for
> > > "_" or any given characters?
> >
> > You need to add "_" to the #LETTER definition in StandardTokenizer.jj,
> > then
> > rebuild StandardTokenizer.java using the appropriate and task.
> >
> > Regards
> > Daniel
> >
> > --
> > http://www.danielnaber.de
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9_20444770.1153512568127--

From java-user-return-22166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 20:12:13 2006
Return-Path: <java-user-return-22166-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10426 invoked from network); 21 Jul 2006 20:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 20:12:12 -0000
Received: (qmail 15966 invoked by uid 500); 21 Jul 2006 20:12:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15933 invoked by uid 500); 21 Jul 2006 20:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15915 invoked by uid 99); 21 Jul 2006 20:12:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 13:12:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.202] (HELO web25904.mail.ukl.yahoo.com) (217.12.10.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Jul 2006 13:12:04 -0700
Received: (qmail 2196 invoked by uid 60001); 21 Jul 2006 20:11:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Tue2sDMJMJ/cMmREH0tL+NXU9oGz4eAmgkokpZI80zc4T+ocysdap7vlxiFe1WbBTO9qIptO+GIFw5p9EgaprjOE/HpdVcAjGSO42PLLbovRud5JpkE4uyO0bGFWVD+CPAQ6iak5CTkfImk408uuFhw3Gq7gkPdqkHceW5QxdU8=  ;
Message-ID: <20060721201137.2194.qmail@web25904.mail.ukl.yahoo.com>
Received: from [84.131.205.253] by web25904.mail.ukl.yahoo.com via HTTP; Fri, 21 Jul 2006 20:11:37 GMT
Date: Fri, 21 Jul 2006 20:11:37 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Reply-To: eks dev <eksdev@yahoo.co.uk>
Subject: Re: Fastest Method for Searching (need all results)
To: java-user@lucene.apache.org
In-Reply-To: <E2306077-A633-4CEF-B366-95620F857942@genome.chop.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

have you tried to only collect doc-ids and see if the speed problem is there, or maybe to fetch only field values? If you have dense results it can easily be split() or addSymbolsToHash() what takes the time.

I see 3 possibilities what could be slow,  getting doc-ids, fetching field value or doing something with this value

Would be interesting to know what you get here 

yeah, I know, it sounds to naive, but sometimes  repeting the obvious helps

----- Original Message ----
From: Ryan O'Hara <ohara@genome.chop.edu>
To: java-user@lucene.apache.org
Sent: Friday, 21 July, 2006 8:43:41 PM
Subject: Fastest Method for Searching (need all results)

My index contains approximately 5 millions documents.  During a  
search, I need to grab the value of a field for every document in the  
result set.  I am currently using a HitCollector to search.  Below is  
my code:

searcher.search(query, new HitCollector(){
                         public void collect(int doc, float score){
                                 if(searcher.doc(doc).get("SYM") !=  
null){
                                     addSymbolsToHash(searcher.doc 
(doc).get("SYM").split("ENDOFSYM"));
                                 }
                         }
                     });

This is fairly fast for small and medium-sized result sets.  However,  
it gets slow as the result set grows.  I read this on HitCollector's  
API page:

"For good search performance, implementations of this method should  
not call Searcher.doc(int) or Reader.document(int) on every document  
number encountered. Doing so can slow searches by an order of  
magnitude or more."

Along with this implementation, I've also tried using FieldCache.   
This faired better with large-sized result sets, but worse with small  
and medium-sized result sets.  Anyone have any ideas of what the best  
approach might be?

Thanks a lot,
Ryan



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 20:31:09 2006
Return-Path: <java-user-return-22167-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16854 invoked from network); 21 Jul 2006 20:31:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 20:31:09 -0000
Received: (qmail 60167 invoked by uid 500); 21 Jul 2006 20:31:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60127 invoked by uid 500); 21 Jul 2006 20:31:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60116 invoked by uid 99); 21 Jul 2006 20:31:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 13:31:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 13:31:01 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6LKUcPn150452
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 20:30:38 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6LKXm1D141652
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 22:33:48 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6LKUclD032231
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 22:30:38 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6LKUcTO032228
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 22:30:38 +0200
In-Reply-To: <ab0709bf0607211309k1e3a8e24u85896582dfcf08ef@mail.gmail.com>
Subject: Re: StandardAnalyzer question
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF003502BB.B40CB5A3-ON882571B2.006FE75D-882571B2.00709196@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 21 Jul 2006 13:29:33 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF123 | April 14, 2006) at
 21/07/2006 23:33:47
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"\u002d" would add "-".
Originally request was for "_" - "\u005f"


"Mark Miller" <markrmiller@gmail.com> wrote on 21/07/2006 13:09:28:
> | < #LETTER:                      // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff"
>       ]
>
> becomes
>
> | < #LETTER:                      // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff",
>        "\u002d"
>       ]
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 21:22:37 2006
Return-Path: <java-user-return-22168-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33817 invoked from network); 21 Jul 2006 21:22:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 21:22:37 -0000
Received: (qmail 69593 invoked by uid 500); 21 Jul 2006 21:22:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69548 invoked by uid 500); 21 Jul 2006 21:22:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69537 invoked by uid 99); 21 Jul 2006 21:22:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:22:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.134.168.16] (HELO atlmaiexcp08.iss.local) (209.134.168.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:22:27 -0700
Received: from soumaiexcp01.iss.local ([207.231.129.197]) by atlmaiexcp08.iss.local with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 21 Jul 2006 17:22:06 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: StandardAnalyzer question
Date: Fri, 21 Jul 2006 17:22:05 -0400
Message-ID: <51540A3DDD507D40B6D47030C8C0C19101A3A1F2@soumaiexcp01.iss.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer question
Thread-Index: AcatBJq+BiTknG2JTqO+OyIIm6p75wABt6Ww
From: "Ngo, Anh \(ISS Southfield\)" <ango@iss.net>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jul 2006 21:22:06.0551 (UTC) FILETIME=[B7BD2670:01C6AD0B]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I did try it and recompile the whole package but it did not work

My #LETTER is:

| < #LETTER:					  // unicode letters
      [
       "\u0041"-"\u005a",
       "\u005f",
       "\u0061"-"\u007a",
       "\u00c0"-"\u00d6",
       "\u00d8"-"\u00f6",
       "\u00f8"-"\u00ff",
       "\u0100"-"\u1fff"
      ]
  >

Or:

| < #LETTER:					  // unicode letters
      [
       "\u0041"-"\u005a",
       "\u0061"-"\u007a",
       "\u00c0"-"\u00d6",
       "\u00d8"-"\u00f6",
       "\u00f8"-"\u00ff",
       "\u0100"-"\u1fff",
       "\u005f"
      ]
  >

Please help.



Anh Ngo

-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Friday, July 21, 2006 4:30 PM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question

"\u002d" would add "-".
Originally request was for "_" - "\u005f"


"Mark Miller" <markrmiller@gmail.com> wrote on 21/07/2006 13:09:28:
> | < #LETTER:                      // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff"
>       ]
>
> becomes
>
> | < #LETTER:                      // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff",
>        "\u002d"
>       ]
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 21:33:19 2006
Return-Path: <java-user-return-22169-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38357 invoked from network); 21 Jul 2006 21:33:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 21:33:19 -0000
Received: (qmail 82811 invoked by uid 500); 21 Jul 2006 21:33:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82399 invoked by uid 500); 21 Jul 2006 21:33:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82388 invoked by uid 99); 21 Jul 2006 21:33:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:33:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:33:12 -0700
Received: by wr-out-0506.google.com with SMTP id 57so477130wri
        for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 14:32:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=rMEe+Bl/Yuu25npyEEWR3aCXb6brpXZPkC1VGXV/n10S/XXHQP7U5BDcnu7fDsCgWNzTCREtwZtzPnBdeUB78KpLp1PWUosWu4duKdn7oKXisDhpoPPhU7+mw2F716REPdcGTjOzLwVZKGHVdL5MLABOU8np3v2xnnH5OdNX4Vk=
Received: by 10.54.60.15 with SMTP id i15mr1187403wra;
        Fri, 21 Jul 2006 14:32:50 -0700 (PDT)
Received: from ?192.168.1.101? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 65sm1749991wra.2006.07.21.14.32.49;
        Fri, 21 Jul 2006 14:32:50 -0700 (PDT)
Message-ID: <44C14812.9090308@gmail.com>
Date: Fri, 21 Jul 2006 17:33:06 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question
References: <51540A3DDD507D40B6D47030C8C0C19101A3A1F2@soumaiexcp01.iss.net>
In-Reply-To: <51540A3DDD507D40B6D47030C8C0C19101A3A1F2@soumaiexcp01.iss.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ngo, Anh (ISS Southfield) wrote:
> I did try it and recompile the whole package but it did not work
>
> My #LETTER is:
>
> | < #LETTER:					  // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u005f",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff"
>       ]
>   >
>
> Or:
>
> | < #LETTER:					  // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff",
>        "\u005f"
>       ]
>   >
>
> Please help.
>
>
>
> Anh Ngo
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com] 
> Sent: Friday, July 21, 2006 4:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer question
>
> "\u002d" would add "-".
> Originally request was for "_" - "\u005f"
>
>
> "Mark Miller" <markrmiller@gmail.com> wrote on 21/07/2006 13:09:28:
>   
>> | < #LETTER:                      // unicode letters
>>       [
>>        "\u0041"-"\u005a",
>>        "\u0061"-"\u007a",
>>        "\u00c0"-"\u00d6",
>>        "\u00d8"-"\u00f6",
>>        "\u00f8"-"\u00ff",
>>        "\u0100"-"\u1fff"
>>       ]
>>
>> becomes
>>
>> | < #LETTER:                      // unicode letters
>>       [
>>        "\u0041"-"\u005a",
>>        "\u0061"-"\u007a",
>>        "\u00c0"-"\u00d6",
>>        "\u00d8"-"\u00f6",
>>        "\u00f8"-"\u00ff",
>>        "\u0100"-"\u1fff",
>>        "\u002d"
>>       ]
>>
>>     
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
What failed? Error messages? You have JavaCC? Any info? Psychic power 
don't fail me now...


-mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 21 21:42:37 2006
Return-Path: <java-user-return-22170-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40717 invoked from network); 21 Jul 2006 21:42:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2006 21:42:37 -0000
Received: (qmail 99121 invoked by uid 500); 21 Jul 2006 21:42:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99096 invoked by uid 500); 21 Jul 2006 21:42:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99085 invoked by uid 99); 21 Jul 2006 21:42:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:42:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.134.168.16] (HELO atlmaiexcp08.iss.local) (209.134.168.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 14:42:29 -0700
Received: from soumaiexcp01.iss.local ([207.231.129.197]) by atlmaiexcp08.iss.local with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 21 Jul 2006 17:42:08 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: StandardAnalyzer question
Date: Fri, 21 Jul 2006 17:42:04 -0400
Message-ID: <51540A3DDD507D40B6D47030C8C0C19101A3A1F4@soumaiexcp01.iss.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: StandardAnalyzer question
Thread-Index: AcatDUk6rgcyfKwmRiOfM0A6AzUefgAASMPQ
From: "Ngo, Anh \(ISS Southfield\)" <ango@iss.net>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jul 2006 21:42:08.0105 (UTC) FILETIME=[83EBBD90:01C6AD0E]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


It works now.

Thank you very much.

I forgot to run javacc for the StandardTokenizer.jj


Sincerely,



Anh Ngo



-----Original Message-----
From: Mark Miller [mailto:markrmiller@gmail.com]=20
Sent: Friday, July 21, 2006 5:33 PM
To: java-user@lucene.apache.org
Subject: Re: StandardAnalyzer question

Ngo, Anh (ISS Southfield) wrote:
> I did try it and recompile the whole package but it did not work
>
> My #LETTER is:
>
> | < #LETTER:					  // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u005f",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff"
>       ]
>   >
>
> Or:
>
> | < #LETTER:					  // unicode letters
>       [
>        "\u0041"-"\u005a",
>        "\u0061"-"\u007a",
>        "\u00c0"-"\u00d6",
>        "\u00d8"-"\u00f6",
>        "\u00f8"-"\u00ff",
>        "\u0100"-"\u1fff",
>        "\u005f"
>       ]
>   >
>
> Please help.
>
>
>
> Anh Ngo
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
> Sent: Friday, July 21, 2006 4:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: StandardAnalyzer question
>
> "\u002d" would add "-".
> Originally request was for "_" - "\u005f"
>
>
> "Mark Miller" <markrmiller@gmail.com> wrote on 21/07/2006 13:09:28:
>  =20
>> | < #LETTER:                      // unicode letters
>>       [
>>        "\u0041"-"\u005a",
>>        "\u0061"-"\u007a",
>>        "\u00c0"-"\u00d6",
>>        "\u00d8"-"\u00f6",
>>        "\u00f8"-"\u00ff",
>>        "\u0100"-"\u1fff"
>>       ]
>>
>> becomes
>>
>> | < #LETTER:                      // unicode letters
>>       [
>>        "\u0041"-"\u005a",
>>        "\u0061"-"\u007a",
>>        "\u00c0"-"\u00d6",
>>        "\u00d8"-"\u00f6",
>>        "\u00f8"-"\u00ff",
>>        "\u0100"-"\u1fff",
>>        "\u002d"
>>       ]
>>
>>    =20
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  =20
What failed? Error messages? You have JavaCC? Any info? Psychic power=20
don't fail me now...


-mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 22 00:36:44 2006
Return-Path: <java-user-return-22171-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75168 invoked from network); 22 Jul 2006 00:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 00:36:44 -0000
Received: (qmail 95074 invoked by uid 500); 22 Jul 2006 00:36:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95055 invoked by uid 500); 22 Jul 2006 00:36:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95043 invoked by uid 99); 22 Jul 2006 00:36:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 17:36:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ssmith@mainstreamdata.com designates 209.63.42.21 as permitted sender)
Received: from [209.63.42.21] (HELO ns1.mainstreamdata.com) (209.63.42.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Jul 2006 17:36:35 -0700
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id F1E3E256
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 18:36:14 -0600 (MDT)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 10676-10 for <java-user@lucene.apache.org>;
	Fri, 21 Jul 2006 18:33:56 -0600 (MDT)
Received: from exchange.slc.mainstreamdata.com (exchange.slc.mainstreamdata.com [10.2.1.132])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 465641329
	for <java-user@lucene.apache.org>; Fri, 21 Jul 2006 18:33:56 -0600 (MDT)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: Performance question
Date: Fri, 21 Jul 2006 18:34:21 -0600
Message-ID: <55F9EF953014514EB6BEE1F5198CEEB44538DB@exchange.slc.mainstreamdata.com>
in-reply-to: <OF5739F481.9522BF15-ON882571B2.00023C77-882571B2.0004438A@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Performance question
thread-index: AcasXyyXFYNPvlZTS4CvqIcjt6IIeQAxw6IQ
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Interesting and thanks for the answer.  I guess I won't write code to
control the order clauses get added--one less thing to do :-)


-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Thursday, July 20, 2006 6:47 PM
To: java-user@lucene.apache.org
Subject: Re: Performance question

> Does it matter what order I add the sub-queries to the BooleanQuery Q.
> That is, is the execution speed for the search faster (slower) if I
do:
>             Q.add(Q1, BooleanClause.Occur.MUST);
>             Q.add(Q2, BooleanClause.Occur.MUST);
>             Q.add(Q3, BooleanClause.Occur.MUST);
> As opposed to:
>             Q.add(Q3, BooleanClause.Occur.MUST);
>             Q.add(Q2, BooleanClause.Occur.MUST);
>             Q.add(Q1, BooleanClause.Occur.MUST);
> Or does it matter at all?
>
> There are cases where I know that, for 99% of the time, certain
portions
> of my queries are likely to be more selective and I could affect the
> order they get added to the BooleanQuery.  Those of you who know
lucene
> internals, is there anything worth doing here?
> Scott

I think the order in which the query is composed would not matter, as
Lucene already takes care of this: the order by which the
<list-of-doc-ids-of-a-term> are traversed by ConjunctionScorer (in
effect
for a boolean AND query) lets the more selective term lead the query
execution. In fact it seems to be stronger - assume an index with 3000
docs, and a query with 3 terms:
   +t1 +t2 +t3
Also assume that t1, t2, t3 is more selective (rare) for docs
[d0,d1000),
t2 more selective for [d1000,d2000) and t3 more selective in
[d2000,d3000).
The way Lucene traverses these doc-ids lists, would let t1 lead the
computation in the first range [0,1000], t2 lead it in the second range
[1000,2000), and t3 in the 3rd range.

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 22 08:16:25 2006
Return-Path: <java-user-return-22172-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64918 invoked from network); 22 Jul 2006 08:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 08:16:25 -0000
Received: (qmail 79370 invoked by uid 500); 22 Jul 2006 08:16:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79328 invoked by uid 500); 22 Jul 2006 08:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79317 invoked by uid 99); 22 Jul 2006 08:16:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 01:16:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 01:16:18 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 56DBA5B76C; Sat, 22 Jul 2006 01:15:56 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3C6357F403
	for <java-user@lucene.apache.org>; Sat, 22 Jul 2006 01:15:56 -0700 (PDT)
Date: Sat, 22 Jul 2006 01:15:56 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery question
In-Reply-To: <8c0c601f0607210744j7c4a6855o5fcbf45f932527ea@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607220107250.25894@hal.rescomp.berkeley.edu>
References: <BAY119-F22D58E4D9473F8CEA166B6B9600@phx.gbl>  <44BE56F7.4020808@4dconcept.fr>
  <Pine.LNX.4.58.0607190922370.12926@hal.rescomp.berkeley.edu> 
 <44BE5E4E.7050108@4dconcept.fr>  <Pine.LNX.4.58.0607190933120.12926@hal.rescomp.berkeley.edu>
 <8c0c601f0607210744j7c4a6855o5fcbf45f932527ea@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: >you can't have a boolean query containing only MUST_NOT clauses (which is
: >what (-(FILE:abstract.htm)) is.  it matches no documents, so the mandatory
: >qualification on it causes the query to fail for all docs.
:
: This is true for the search queries, but it makes sense in a query
: filter IMHO. I encountered this and had to add a MUST clause on the
: Filter with a trivial field in order not to break the Filter returning
: zero documents.
:
: Isn't this a conceptual bug in the case of constructing a filter along a
: query?

I'm a little confused by what you mean, but i suspect it realates to one
of the following two issues...

1) a QueryFilter just provides a simple wrapper arround a Query to make
developing a "Filter" (ie: a cachable mechanism for identifing documents
without scoring) easy if you already have a Query with the logic you want
-- wrapping a QueryFilter arround a BooleanQuery doesn't change any
intrinsic rules about how a BooleanQuery works -- it just uses the results
in a differnet way.

2) It's trivial to write a Filter that selects all items which do *not*
match a Query -- by writting a Filter that flips the bits on a BitSet from
another filter and wrapping that arround a QueryFilter -- but in the
context of "search" you still need a Query to execute to positively select
and score some documents.  Your filter is only consulted to determine if
those documents are allowed.  It's the same problem as the BooleanQuery -
to do a search you need to score some documents and saying "these
documents should be excluded" isn't enough information.  If all you care
about is the set of documents (and not any scoring) then call the bits
method on your filter directly.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 22 15:38:04 2006
Return-Path: <java-user-return-22173-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40455 invoked from network); 22 Jul 2006 15:38:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 15:38:03 -0000
Received: (qmail 42289 invoked by uid 500); 22 Jul 2006 15:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42138 invoked by uid 500); 22 Jul 2006 15:37:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42126 invoked by uid 99); 22 Jul 2006 15:37:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 08:37:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [67.15.12.79] (HELO plesk.ev1servers.net) (67.15.12.79)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 08:37:56 -0700
Received: (qmail 29979 invoked from network); 22 Jul 2006 13:55:02 -0000
Received: from unknown (HELO user) (85.154.10.161)
  by example.ca with SMTP; 22 Jul 2006 13:55:02 -0000
From: "Kiran Joisher" <kiran.joisher@recreatesolutions.com>
To: <java-user@lucene.apache.org>
Subject: java.io.IOException: Cannot delete deletable
Date: Sat, 22 Jul 2006 19:49:51 +0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C6ADC8.14206690"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acatpnf9PQ5NHtYISwKTIUU+irIQyg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060722153756.C09A910FB012@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C6ADC8.14206690
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

I am trying to re-create index from scratch. But I get this exception. I
also close the IndexSearcher before doing this. 

 

java.io.IOException: Cannot delete deletable

        at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:195)

        at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:144

)

 

 

Any help greatly appreciated.

 

Thanks,

--Kiran

 

 


------=_NextPart_000_0000_01C6ADC8.14206690--


From java-user-return-22174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 22 16:00:46 2006
Return-Path: <java-user-return-22174-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42909 invoked from network); 22 Jul 2006 16:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 16:00:45 -0000
Received: (qmail 55648 invoked by uid 500); 22 Jul 2006 16:00:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55613 invoked by uid 500); 22 Jul 2006 16:00:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55602 invoked by uid 99); 22 Jul 2006 16:00:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 09:00:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of popeyelin@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 09:00:39 -0700
Received: by py-out-1112.google.com with SMTP id d80so2074614pyd
        for <java-user@lucene.apache.org>; Sat, 22 Jul 2006 09:00:18 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=iURegFNYp/NOxw5vb3Xm9HBlj5SV2zrQNO/FdcGfCHX14c4TsXV1eQNk0EAu1AC5+DDEor68qlsYAp02Tk+ArRADjChr+l3LEdr3s9BclgZZ8f4BvnDS6ql3k3aq1kKYh+Qv2tFl74Gtxh7BmFLG+Vwx0WVNpaJy3IVQO0DbDGY=
Received: by 10.35.57.5 with SMTP id j5mr3593359pyk;
        Sat, 22 Jul 2006 09:00:18 -0700 (PDT)
Received: by 10.35.31.17 with HTTP; Sat, 22 Jul 2006 09:00:18 -0700 (PDT)
Message-ID: <8e7e4d020607220900l693f5e4ch1fb3aedf6be9c60f@mail.gmail.com>
Date: Sun, 23 Jul 2006 00:00:18 +0800
From: "yueyu lin" <popeyelin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: java.io.IOException: Cannot delete deletable
In-Reply-To: <20060722153756.C09A910FB012@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35508_16128887.1153584018210"
References: <20060722153756.C09A910FB012@asf.osuosl.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_35508_16128887.1153584018210
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Delete them manually.

On 7/22/06, Kiran Joisher <kiran.joisher@recreatesolutions.com> wrote:
>
> Hi,
>
>
>
> I am trying to re-create index from scratch. But I get this exception. I
> also close the IndexSearcher before doing this.
>
>
>
> java.io.IOException: Cannot delete deletable
>
>         at org.apache.lucene.store.FSDirectory.create(FSDirectory.java
> :195)
>
>         at
> org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:144
>
> )
>
>
>
>
>
> Any help greatly appreciated.
>
>
>
> Thanks,
>
> --Kiran
>
>
>
>
>
>
>


-- 
--
Yueyu Lin

------=_Part_35508_16128887.1153584018210--

From java-user-return-22175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 22 19:15:02 2006
Return-Path: <java-user-return-22175-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75562 invoked from network); 22 Jul 2006 19:15:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 19:15:02 -0000
Received: (qmail 56032 invoked by uid 500); 22 Jul 2006 19:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56000 invoked by uid 500); 22 Jul 2006 19:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55989 invoked by uid 99); 22 Jul 2006 19:14:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 12:14:56 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.110] (HELO web32013.mail.mud.yahoo.com) (68.142.207.110)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 22 Jul 2006 12:14:52 -0700
Received: (qmail 9530 invoked by uid 60001); 22 Jul 2006 19:14:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=q223t1AywLQdm8lnR9yApW4kxhwbharkrMW+kbl5MB2kjUcX8rIdd995NdGwjzQ24qXVp+CT+0F4pwrgxM3GgjjR6NyjYitsbiiVeQSp90AXegVZ9Dws9xvlD7z0x9rns6J7Z+5bjYj6Ctl+YOxcHefqTdVhzJY7+K9imiS3sts=  ;
Message-ID: <20060722191430.9528.qmail@web32013.mail.mud.yahoo.com>
Received: from [70.22.204.100] by web32013.mail.mud.yahoo.com via HTTP; Sat, 22 Jul 2006 12:14:30 PDT
Date: Sat, 22 Jul 2006 12:14:30 -0700 (PDT)
From: Yiren Luo <yirenluo@yahoo.com>
Subject: data gathering
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have some files located at both UNIX and WINDOWS
platform. Would NFS mount and CIFS mount be sufficient
as data gathering for indexing? Is there anyway to
index data in the relational database?


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 22 20:59:47 2006
Return-Path: <java-user-return-22176-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12294 invoked from network); 22 Jul 2006 20:59:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2006 20:59:47 -0000
Received: (qmail 24325 invoked by uid 500); 22 Jul 2006 20:59:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23365 invoked by uid 500); 22 Jul 2006 20:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23354 invoked by uid 99); 22 Jul 2006 20:59:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 13:59:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [68.142.229.216] (HELO smtp102.biz.mail.re2.yahoo.com) (68.142.229.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 22 Jul 2006 13:59:41 -0700
Received: (qmail 86724 invoked from network); 22 Jul 2006 20:44:06 -0000
Received: from unknown (HELO EAGLE) (hwu@welpine.com@68.251.76.180 with login)
  by smtp102.biz.mail.re2.yahoo.com with SMTP; 22 Jul 2006 20:44:05 -0000
From: "Herbert Wu" <hwu@welpine.com>
To: <java-user@lucene.apache.org>
Subject: Special characher & ; : % index/search question
Date: Sat, 22 Jul 2006 15:43:51 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000A_01C6ADA5.A7730560"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: Acatz4n679IIsM5MSXGxItcMmmj7mA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060722205941.6DD8910FB00E@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000A_01C6ADA5.A7730560
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi, all,

My document's title field contains standalone(not contained inside a word)
special char such as &,:,%,; etc. With luke0.6 tool, I found that these
chars are not indexed in the title field or any other place and hence not
searchable. Is there any way to index these special chars for search? My env
are:

Lucene: version 2.0.0

Index parser: org.apache.lucene.analysis.standard.StandardAnalyzer

JDK: Java1.5

OS: XP sp2

Debugger: luke0.6

 

Any help is greatly appreciated!

 

-Herbert

 

 

 

 


------=_NextPart_000_000A_01C6ADA5.A7730560--



From java-user-return-22177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 23 00:48:09 2006
Return-Path: <java-user-return-22177-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60433 invoked from network); 23 Jul 2006 00:48:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jul 2006 00:48:08 -0000
Received: (qmail 81783 invoked by uid 500); 23 Jul 2006 00:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81748 invoked by uid 500); 23 Jul 2006 00:48:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81737 invoked by uid 99); 23 Jul 2006 00:48:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 17:48:03 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.108] (HELO web32011.mail.mud.yahoo.com) (68.142.207.108)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 22 Jul 2006 17:48:02 -0700
Received: (qmail 37197 invoked by uid 60001); 23 Jul 2006 00:47:41 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4mSGULI5wVb3kt6Rj5cDLs/6djrN+DjK96wVOLpo45+tviTQGXD6DS412/rgTJNFjJyIl9cZY7nkHslE6KnP4KKEGeByYPBhku+v2B1wBQdRZQ3i0arXx1H5ppPsgU61rWcQ38g/OdIovUe/v21xzTLBF3ZQ+Vl0y1aQqPRFpYs=  ;
Message-ID: <20060723004741.37195.qmail@web32011.mail.mud.yahoo.com>
Received: from [70.22.204.100] by web32011.mail.mud.yahoo.com via HTTP; Sat, 22 Jul 2006 17:47:41 PDT
Date: Sat, 22 Jul 2006 17:47:41 -0700 (PDT)
From: Yiren Luo <yirenluo@yahoo.com>
Subject: Re: Special characher & ; : % index/search question
To: java-user@lucene.apache.org
In-Reply-To: <20060722205941.6DD8910FB00E@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think org.apache.lucene.analysis.WhitespaceAnalyzer
would do it.

--- Herbert Wu <hwu@welpine.com> wrote:

> Hi, all,
> 
> My document's title field contains standalone(not
> contained inside a word)
> special char such as &,:,%,; etc. With luke0.6 tool,
> I found that these
> chars are not indexed in the title field or any
> other place and hence not
> searchable. Is there any way to index these special
> chars for search? My env
> are:
> 
> Lucene: version 2.0.0
> 
> Index parser:
> org.apache.lucene.analysis.standard.StandardAnalyzer
> 
> JDK: Java1.5
> 
> OS: XP sp2
> 
> Debugger: luke0.6
> 
>  
> 
> Any help is greatly appreciated!
> 
>  
> 
> -Herbert
> 
>  
> 
>  
> 
>  
> 
>  
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 23 01:56:43 2006
Return-Path: <java-user-return-22178-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72572 invoked from network); 23 Jul 2006 01:56:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jul 2006 01:56:42 -0000
Received: (qmail 6149 invoked by uid 500); 23 Jul 2006 01:56:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6116 invoked by uid 500); 23 Jul 2006 01:56:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6105 invoked by uid 99); 23 Jul 2006 01:56:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Jul 2006 18:56:37 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.102] (HELO web32005.mail.mud.yahoo.com) (68.142.207.102)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 22 Jul 2006 18:56:36 -0700
Received: (qmail 91244 invoked by uid 60001); 23 Jul 2006 01:56:15 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=21S9q8QmaLYwkfD0Cq40sPI0SBy1j/Ww1q9867YSmwpD6UGc23p/ZaYiVk9MlZ5QDzndVcyfJfW0grWMxZZxocuAZ8toAakhx+cxw8/ozM8BMtPsxA3AkYsVpPrMqgSIMJBNioTg07htL584Z07DsaSsV2E1Mn6tY92YIw0Q0tk=  ;
Message-ID: <20060723015615.91242.qmail@web32005.mail.mud.yahoo.com>
Received: from [70.22.204.100] by web32005.mail.mud.yahoo.com via HTTP; Sat, 22 Jul 2006 18:56:15 PDT
Date: Sat, 22 Jul 2006 18:56:15 -0700 (PDT)
From: Yiren Luo <yirenluo@yahoo.com>
Subject: Re: java.io.IOException: Cannot delete deletable
To: java-user@lucene.apache.org
In-Reply-To: <8e7e4d020607220900l693f5e4ch1fb3aedf6be9c60f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Find out what cause this might be helpful. It might be
a file system related issue because file.delete()
acctually invokes fs.delete(this). It isn't file
security related issue because a SecurityException
would otherwise be thrown.

--- yueyu lin <popeyelin@gmail.com> wrote:

> Delete them manually.
> 
> On 7/22/06, Kiran Joisher
> <kiran.joisher@recreatesolutions.com> wrote:
> >
> > Hi,
> >
> >
> >
> > I am trying to re-create index from scratch. But I
> get this exception. I
> > also close the IndexSearcher before doing this.
> >
> >
> >
> > java.io.IOException: Cannot delete deletable
> >
> >         at
>
org.apache.lucene.store.FSDirectory.create(FSDirectory.java
> > :195)
> >
> >         at
> >
>
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:144
> >
> > )
> >
> >
> >
> >
> >
> > Any help greatly appreciated.
> >
> >
> >
> > Thanks,
> >
> > --Kiran
> >
> >
> >
> >
> >
> >
> >
> 
> 
> -- 
> --
> Yueyu Lin
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 23 15:50:38 2006
Return-Path: <java-user-return-22179-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20012 invoked from network); 23 Jul 2006 15:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jul 2006 15:50:38 -0000
Received: (qmail 86796 invoked by uid 500); 23 Jul 2006 15:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86555 invoked by uid 500); 23 Jul 2006 15:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86543 invoked by uid 99); 23 Jul 2006 15:50:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 08:50:31 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 08:50:31 -0700
Received: by py-out-1112.google.com with SMTP id d80so2325653pyd
        for <java-user@lucene.apache.org>; Sun, 23 Jul 2006 08:50:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hI53PFKOaYw3fi0GT27cua+/OyYcMZ24stgALiMiWjMjYi9/vUqatooVCh0hb4KHVdEpP+BsVMJ0vUZfMjE3BJtK+j/SBZ0jH/W1gYWJKWt+75nMoT+1cLma42L2SRAo96KGEpP0dqAbd8E23Jx/rYLx7YZO4gjGErjSBbBsPlI=
Received: by 10.35.127.15 with SMTP id e15mr5680940pyn;
        Sun, 23 Jul 2006 08:50:10 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Sun, 23 Jul 2006 08:50:10 -0700 (PDT)
Message-ID: <359a92830607230850r1d8f65d6yd9a92c2fbcb80b3a@mail.gmail.com>
Date: Sun, 23 Jul 2006 11:50:10 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: data gathering
In-Reply-To: <20060722191430.9528.qmail@web32013.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44436_5306732.1153669810484"
References: <20060722191430.9528.qmail@web32013.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44436_5306732.1153669810484
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Both of these topics have been discussed at length in this forum. I think
you would be well served by searching the archive for both of these topics,
and you'd get your answer faster <G>.....

NFS mounts have problems that have been discussed recently.

There is nothing built into Lucene that indexes a database for you. You have
to write a program to extract the data from the DB and put it into a Lucene
index. Thereafter, you have to try to keep the two in synch.

Best
Erick

------=_Part_44436_5306732.1153669810484--

From java-user-return-22180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 23 15:56:14 2006
Return-Path: <java-user-return-22180-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20311 invoked from network); 23 Jul 2006 15:56:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jul 2006 15:56:14 -0000
Received: (qmail 90095 invoked by uid 500); 23 Jul 2006 15:56:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90065 invoked by uid 500); 23 Jul 2006 15:56:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90053 invoked by uid 99); 23 Jul 2006 15:56:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 08:56:07 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 08:56:07 -0700
Received: by py-out-1112.google.com with SMTP id d80so2326794pyd
        for <java-user@lucene.apache.org>; Sun, 23 Jul 2006 08:55:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ejtjLAEIXBSMLQY6kYpagKf2Spit7PCWJ3m/+8hFB4s/wxXhji6YmokV4FpgmIHceeQQN6TpWz9DJeMDU6Dcn7xwl2B36HrIfgGODZKKk0R0oc4AqZu0u8IfW/ItH0vfDgycljbtzNiuNYC7IHXwjWlXRlfxlhIvMjhBaIL5X7w=
Received: by 10.35.123.10 with SMTP id a10mr5687953pyn;
        Sun, 23 Jul 2006 08:55:45 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Sun, 23 Jul 2006 08:55:45 -0700 (PDT)
Message-ID: <359a92830607230855r69159933p1ec92e62e114900d@mail.gmail.com>
Date: Sun, 23 Jul 2006 11:55:45 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Special characher & ; : % index/search question
In-Reply-To: <20060722205941.6DD8910FB00E@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_44496_16999239.1153670145861"
References: <20060722205941.6DD8910FB00E@asf.osuosl.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_44496_16999239.1153670145861
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

the WhitespaceAnalyzer breaks up streams on whitespace, and will give you
these characters as tokens. Be careful to use it for indexing AND searching.
Also, make sure that's the analyzer in Luke if you submit queries that way
(it's a drop-down on the search page, upper right as I remember).

On 7/22/06, Herbert Wu <hwu@welpine.com> wrote:
>
> Hi, all,
>
> My document's title field contains standalone(not contained inside a word)
> special char such as &,:,%,; etc. With luke0.6 tool, I found that these
> chars are not indexed in the title field or any other place and hence not
> searchable. Is there any way to index these special chars for search? My
> env
> are:
>
> Lucene: version 2.0.0
>
> Index parser: org.apache.lucene.analysis.standard.StandardAnalyzer
>
> JDK: Java1.5
>
> OS: XP sp2
>
> Debugger: luke0.6
>
>
>
> Any help is greatly appreciated!
>
>
>
> -Herbert
>
>
>
>
>
>
>
>
>
>
>

------=_Part_44496_16999239.1153670145861--

From java-user-return-22181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 23 21:04:01 2006
Return-Path: <java-user-return-22181-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83968 invoked from network); 23 Jul 2006 21:04:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jul 2006 21:04:00 -0000
Received: (qmail 12988 invoked by uid 500); 23 Jul 2006 21:03:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12958 invoked by uid 500); 23 Jul 2006 21:03:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12945 invoked by uid 99); 23 Jul 2006 21:03:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 14:03:54 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of movingmarius@gmx.de designates 213.165.64.21 as permitted sender)
Received: from [213.165.64.21] (HELO mail.gmx.net) (213.165.64.21)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 23 Jul 2006 14:03:54 -0700
Received: (qmail invoked by alias); 23 Jul 2006 21:02:18 -0000
Received: from client434.sg.fr.studentenwohnheim-bw.de (EHLO client434.sg.fr.studentenwohnheim-bw.de) [141.70.115.180]
  by mail.gmx.net (mp033) with SMTP; 23 Jul 2006 23:02:18 +0200
X-Authenticated: #7090505
From: Marius Heinzmann <movingmarius@gmx.de>
To: java-user@lucene.apache.org
Subject: How to use a different score model?
Date: Sun, 23 Jul 2006 23:02:10 +0200
User-Agent: KMail/1.9.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607232302.10340.movingmarius@gmx.de>
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody,

im currently trying to figure out how to implement another score model in the 
lucene framework. But after reading a lot of source code and a little 
debugging it seems like i have to write a lot of score-classes -- for each 
query type one.
And finally i need to get lucene to use my score-classes somehow.

Well like you see there is still a lot missing in this picture, especially 
how the main search classes (Weight, Similarity, Scorer, Queries) interact to 
finally come to one score.
Unfortunately i haven't found a good documentation or tutorial or hint.
So if anybody knows one im glad to hear about it :)

What i have concluded so far is that:
 - Similarity encapsulates calculations for the IDF, TF, and so on.
 - Weight seems to be an auxillary class to be able to only have one instance
   of a query. (im really not sure what else this is used for)
 - Queries are all the different kinds of queries there are.
 - Scorers are implementations of the scoring model for all those kinds of
   queries.
(if i got something terribly wrong please correct me)

Now is this the correct or best way to use a different scoring model? It seems 
to me that there has to be a more elegant way, but i haven't found one.
I hope i didn't write too much senseless stuff for i am way too tired right 
now and i hope someone might help me :)

Greetings
 Marius Heinzmann

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 23 21:44:42 2006
Return-Path: <java-user-return-22182-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90978 invoked from network); 23 Jul 2006 21:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Jul 2006 21:44:42 -0000
Received: (qmail 48123 invoked by uid 500); 23 Jul 2006 21:44:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48103 invoked by uid 500); 23 Jul 2006 21:44:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48092 invoked by uid 99); 23 Jul 2006 21:44:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 14:44:36 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.147] (HELO web36412.mail.mud.yahoo.com) (209.191.85.147)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 23 Jul 2006 14:44:35 -0700
Received: (qmail 58880 invoked by uid 60001); 23 Jul 2006 21:44:14 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=fLpg4dSoZCgDS/y7UnkhwDfEM1N0lQHjIt4b9OxYrwdTXFbpn6wvWXEfHzmCCsR/DgTrS+bUv7eqnqBrDTrAKQibMkkQ2qJ5C66uVSq1i95+FvXl9Vjpgg4974c6TEVDbnYXrzRDS0QkmMnqEC9NZwBW30I/wuG6LTz0VYyIiUY=  ;
Message-ID: <20060723214414.58878.qmail@web36412.mail.mud.yahoo.com>
Received: from [24.125.100.254] by web36412.mail.mud.yahoo.com via HTTP; Sun, 23 Jul 2006 14:44:14 PDT
Date: Sun, 23 Jul 2006 14:44:14 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: How reliable is lucene indexing !!
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-106899931-1153691054=:56765"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-106899931-1153691054=:56765
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello Everyone,

We have an application and the current search is taking lot of time to return the results. We are doing a search against 8-9 database tables and 1.5 million records.

I want to increase the search speed and thinking of implementing lucene search. I went through the documentation and lucene seems promising for my application.

I have few doubts and would like to have some more insight on following points.

1. The application has around 150 users and they create all together 4000 inserts/updates in one day. I think of creating an index for 1.5 million records initially and then allow the inserts/updates to the index. The index size will approximately increase by 4000 records per day. 
Is lucene good for the application? Is it suitable for frequent inserts/updates?

2. The index has to be in sync with the database. Whenever  the user inserts/updates a record in the database, the index also needs to be updated accordingly. How do I handle the situation in where some process created write.lock/commit.lock and something went wrong and the lock files are still there. What would be the best practice/approach to handle this scenario?

Any help on this would be highly appreciated.

Thanks,
-Vasu

 		
---------------------------------
Do you Yahoo!?
 Everyone is raving about the  all-new Yahoo! Mail Beta.
--0-106899931-1153691054=:56765--

From java-user-return-22183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 01:53:07 2006
Return-Path: <java-user-return-22183-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33440 invoked from network); 24 Jul 2006 01:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 01:53:07 -0000
Received: (qmail 6236 invoked by uid 500); 24 Jul 2006 01:53:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6209 invoked by uid 500); 24 Jul 2006 01:53:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6198 invoked by uid 99); 24 Jul 2006 01:53:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 18:53:01 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.159 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 18:53:00 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn1.fre.skanova.net (7.2.075)
        id 44A135F100539992 for java-user@lucene.apache.org; Mon, 24 Jul 2006 03:52:38 +0200
Subject: dash-words
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 03:52:36 +0200
Message-Id: <1153705956.28605.144.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm want to filter words with a dash in them.

["x-men"]
["xmen"]
["x", "men"]

All of above should be synonyms. The problem is ["x", "men"] requiring a
distance between the terms and thus also matching "x-men men". Or? How
about storing ["x", "men"] as the first term and the use set a negative
position increment?

I could just try that prior to posting, :) but choose not to as I have a
feeling many of you already implemented something like this, that there
are multiple solutions to the problem?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 02:05:22 2006
Return-Path: <java-user-return-22184-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35098 invoked from network); 24 Jul 2006 02:05:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 02:05:22 -0000
Received: (qmail 14440 invoked by uid 500); 24 Jul 2006 02:05:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14158 invoked by uid 500); 24 Jul 2006 02:05:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14147 invoked by uid 99); 24 Jul 2006 02:05:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:05:16 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.159 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:05:15 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn1.fre.skanova.net (7.2.075)
        id 44A135F100539F87 for java-user@lucene.apache.org; Mon, 24 Jul 2006 04:04:54 +0200
Subject: Re: How reliable is lucene indexing !!
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <20060723214414.58878.qmail@web36412.mail.mud.yahoo.com>
References: <20060723214414.58878.qmail@web36412.mail.mud.yahoo.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 04:04:52 +0200
Message-Id: <1153706692.28605.158.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sun, 2006-07-23 at 14:44 -0700, vasu shah wrote:

> I have few doubts 

> The index size will approximately increase by 4000 records per
> day. Is lucene good for the application?

Sure.

>  Is it suitable for frequent inserts/updates?

Sure, but I don't consider 4000 new documents per day to be frequent.

> 2. The index has to be in sync with the database. Whenever the user
> inserts/updates a record in the database, the index also needs to be
> updated accordingly. 

> What would be the best practice/approach to handle this scenario?

Create an IndexWriter or Reader at commit-time and do the same changes
you did to the database. In case of update remove the index document and
create it again. 

> How do I handle the situation in where some process created 
> write.lock/commit.lock and something went wrong and the lock files are
> still there. 

You probably get locks due to bad use of readers and writers. Without
looking at the code you will only get abstract hints, so show us the
essence of what you are doing.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 02:24:46 2006
Return-Path: <java-user-return-22185-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38506 invoked from network); 24 Jul 2006 02:24:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 02:24:46 -0000
Received: (qmail 27979 invoked by uid 500); 24 Jul 2006 02:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27950 invoked by uid 500); 24 Jul 2006 02:24:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27939 invoked by uid 99); 24 Jul 2006 02:24:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:24:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.52.175] (HELO smtp106.biz.mail.re2.yahoo.com) (206.190.52.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 23 Jul 2006 19:24:39 -0700
Received: (qmail 69043 invoked from network); 24 Jul 2006 02:24:15 -0000
Received: from unknown (HELO EAGLE) (hwu@welpine.com@68.251.76.180 with login)
  by smtp106.biz.mail.re2.yahoo.com with SMTP; 24 Jul 2006 02:24:15 -0000
From: "Herbert Wu" <hwu@welpine.com>
To: <java-user@lucene.apache.org>
Subject: RE: Special characher & ; : % index/search question
Date: Sun, 23 Jul 2006 21:24:09 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <359a92830607230855r69159933p1ec92e62e114900d@mail.gmail.com>
Thread-Index: AcaucISMxCa8H+CORr6A0hMyseNbygAV004g
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060724022439.E554D10FB009@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



WhitespaceAnalyzer looks brutal. Is it possible that I keep StandardAnalyzer
and at the same time to tell the parser to keep a list of chars during
indexing?
-Herbert

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: Sunday, July 23, 2006 10:56 AM
To: java-user@lucene.apache.org
Subject: Re: Special characher & ; : % index/search question

the WhitespaceAnalyzer breaks up streams on whitespace, and will give you
these characters as tokens. Be careful to use it for indexing AND searching.
Also, make sure that's the analyzer in Luke if you submit queries that way
(it's a drop-down on the search page, upper right as I remember).

On 7/22/06, Herbert Wu <hwu@welpine.com> wrote:
>
> Hi, all,
>
> My document's title field contains standalone(not contained inside a word)
> special char such as &,:,%,; etc. With luke0.6 tool, I found that these
> chars are not indexed in the title field or any other place and hence not
> searchable. Is there any way to index these special chars for search? My
> env
> are:
>
> Lucene: version 2.0.0
>
> Index parser: org.apache.lucene.analysis.standard.StandardAnalyzer
>
> JDK: Java1.5
>
> OS: XP sp2
>
> Debugger: luke0.6
>
>
>
> Any help is greatly appreciated!
>
>
>
> -Herbert
>
>
>
>
>
>
>
>
>
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 02:31:44 2006
Return-Path: <java-user-return-22186-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39233 invoked from network); 24 Jul 2006 02:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 02:31:44 -0000
Received: (qmail 33450 invoked by uid 500); 24 Jul 2006 02:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33425 invoked by uid 500); 24 Jul 2006 02:31:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33414 invoked by uid 99); 24 Jul 2006 02:31:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:31:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of charliecmo@gmail.com designates 64.233.184.227 as permitted sender)
Received: from [64.233.184.227] (HELO wr-out-0506.google.com) (64.233.184.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:31:37 -0700
Received: by wr-out-0506.google.com with SMTP id 37so578105wra
        for <java-user@lucene.apache.org>; Sun, 23 Jul 2006 19:31:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:x-mailer:reply-to:x-priority:message-id:to:subject:mime-version:content-type:content-transfer-encoding:from;
        b=JDKSZxAjiYy8bt4mLTzhasDgnOWylLQRknjZDRRWtZcOmRPUhxavMLSkWuWcE6a1mucTihWrUFgA2TQPHlPZNptmIeLmgA73L53hxuLopwU28VR328CLrnFtd0f64RiD/T75+1HwWxwSUMhB3huLdbYF0f1F/6ERUkMvu7vWVec=
Received: by 10.54.70.5 with SMTP id s5mr3203379wra;
        Sun, 23 Jul 2006 19:31:16 -0700 (PDT)
Received: from cmo.mshome.net ( [129.111.226.103])
        by mx.gmail.com with ESMTP id 11sm2536501wrl.2006.07.23.19.31.15;
        Sun, 23 Jul 2006 19:31:16 -0700 (PDT)
Date: Sun, 23 Jul 2006 21:31:10 -0500
X-Mailer: The Bat! (v3.5) Professional
Reply-To: Charlie Zhao <CharlieCMO@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <1003434929.20060723213110@gmail.com>
To: java-user@lucene.apache.org
Subject: Span Query NLE
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
From: Charlie <charliecmo@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Would anyone give me a hint regarding the natural language expression
of the following span query?

------------if creating queries programmatically (it is in Lucene scr)

    SpanTermQuery t1 = new SpanTermQuery(new Term("field","six"));
    SpanTermQuery t2 = new SpanTermQuery(new Term("field","hundred"));
    SpanNearQuery tt1 = new SpanNearQuery(new SpanQuery[] {t1, t2}, 0,true);

    SpanTermQuery t3 = new SpanTermQuery(new Term("field","seven"));
    SpanTermQuery t4 = new SpanTermQuery(new Term("field","hundred"));
    SpanNearQuery tt2 = new SpanNearQuery(new SpanQuery[] {t3, t4}, 0,true);
    
    SpanTermQuery t5 = new SpanTermQuery(new Term("field","seven"));
    SpanTermQuery t6 = new SpanTermQuery(new Term("field","six"));

    SpanOrQuery to1 = new SpanOrQuery(new SpanQuery[] {tt1, tt2});
    SpanOrQuery to2 = new SpanOrQuery(new SpanQuery[] {t5, t6});
    
    SpanNearQuery query = new SpanNearQuery(new SpanQuery[] {to1, to2},
                                            100, true);
------------and it becomes:

spanNear([spanOr([spanNear([field:six, field:hundred], 0, true), spanNear([field:seven, field:hundred], 0, true)]), spanOr([field:seven, field:six])], 100, true)


------------what's its equivalence in natural language?

(something we can write in one line and can be parsed by QueryParser)
(if we have default field already)

e.g.

(("six hundred"~0 "six hundred"~0) AND (seven six))~100

-----------

Thanks,

Charlie



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 02:36:50 2006
Return-Path: <java-user-return-22187-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39773 invoked from network); 24 Jul 2006 02:36:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 02:36:49 -0000
Received: (qmail 36316 invoked by uid 500); 24 Jul 2006 02:36:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36290 invoked by uid 500); 24 Jul 2006 02:36:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36279 invoked by uid 99); 24 Jul 2006 02:36:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:36:42 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:36:41 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D0054B607 for java-user@lucene.apache.org; Mon, 24 Jul 2006 04:36:19 +0200
Subject: RE: Special characher & ; : % index/search question
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <20060724022439.E554D10FB009@asf.osuosl.org>
References: <20060724022439.E554D10FB009@asf.osuosl.org>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 04:36:17 +0200
Message-Id: <1153708578.28605.162.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sun, 2006-07-23 at 21:24 -0500, Herbert Wu wrote:

> WhitespaceAnalyzer looks brutal. Is it possible that I keep
> StandardAnalyzer and at the same time to tell the parser to keep a
> list of chars during indexing? 

Add something like:

| < #MYCHARACTERS:
      ("&" | ":" | "%" | ";")
  >

to the StandardTokenizer.jj and rebuild it.

Might cause some lexical indeterministic errors, so look out for those.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 02:50:34 2006
Return-Path: <java-user-return-22188-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41829 invoked from network); 24 Jul 2006 02:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 02:50:34 -0000
Received: (qmail 46221 invoked by uid 500); 24 Jul 2006 02:50:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45704 invoked by uid 500); 24 Jul 2006 02:50:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45693 invoked by uid 99); 24 Jul 2006 02:50:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:50:28 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 19:50:27 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44A2E86F004DC36F for java-user@lucene.apache.org; Mon, 24 Jul 2006 04:50:05 +0200
Subject: Re: Span Query NLE
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1003434929.20060723213110@gmail.com>
References: <1003434929.20060723213110@gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 04:50:03 +0200
Message-Id: <1153709403.28605.172.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sun, 2006-07-23 at 21:31 -0500, Charlie wrote:
> Would anyone give me a hint regarding the natural language expression
> of the following span query?

> spanNear([spanOr([spanNear([field:six, field:hundred], 0, true),
> spanNear([field:seven, field:hundred], 0, true)]),
> spanOr([field:seven, field:six])], 100, true)

> ------------what's its equivalence in natural language?

I'm sorry, but all queries are not supported by the QueryParser. Spans
beeing one of them. See QueryParser.jj to add your syntax.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 04:34:37 2006
Return-Path: <java-user-return-22189-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57684 invoked from network); 24 Jul 2006 04:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 04:34:36 -0000
Received: (qmail 34054 invoked by uid 500); 24 Jul 2006 04:34:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34016 invoked by uid 500); 24 Jul 2006 04:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34005 invoked by uid 99); 24 Jul 2006 04:34:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 21:34:30 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Jul 2006 21:34:30 -0700
Received: by py-out-1112.google.com with SMTP id d80so2497957pyd
        for <java-user@lucene.apache.org>; Sun, 23 Jul 2006 21:34:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Qmx+rWIGL3ONlEglcOR8VdAO8AmOfOiYniY540ub3YZ35qQP7dOEnN7ggC/Y8b/yU5jdyEZ+70Uj7wAnJMxdYXLy1yGaFylaY8NNaPcp4Izv2lAf7j+EaCC3gky581ky7YPDFWx6FXwJpglmZMGICiE55ym3UtmL+TU8sl/ub1k=
Received: by 10.35.96.11 with SMTP id y11mr6812445pyl;
        Sun, 23 Jul 2006 21:34:09 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Sun, 23 Jul 2006 21:34:09 -0700 (PDT)
Message-ID: <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
Date: Mon, 24 Jul 2006 00:34:09 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: dash-words
In-Reply-To: <1153705956.28605.144.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1153705956.28605.144.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/23/06, karl wettin <karl.wettin@gmail.com> wrote:
> I'm want to filter words with a dash in them.
>
> ["x-men"]
> ["xmen"]
> ["x", "men"]
>
> All of above should be synonyms. The problem is ["x", "men"] requiring a
> distance between the terms and thus also matching "x-men men".

WordDelimiterFilter from Solr does this:
http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b83870ca7890cd73b193cefed83c283339089

It also has the false match problem you mention... "x xmen" would
match a document with x-men, although this hasn't been a problem in
practise.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 07:05:20 2006
Return-Path: <java-user-return-22190-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90683 invoked from network); 24 Jul 2006 07:05:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 07:05:19 -0000
Received: (qmail 22140 invoked by uid 500); 24 Jul 2006 07:05:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21614 invoked by uid 500); 24 Jul 2006 07:05:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21597 invoked by uid 99); 24 Jul 2006 07:05:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:05:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:05:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D82875B774; Mon, 24 Jul 2006 00:04:35 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D1A887F403
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 00:04:35 -0700 (PDT)
Date: Mon, 24 Jul 2006 00:04:35 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Span Query NLE
In-Reply-To: <1153709403.28605.172.camel@localhost>
Message-ID: <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu>
References: <1003434929.20060723213110@gmail.com> <1153709403.28605.172.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > Would anyone give me a hint regarding the natural language expression
: > of the following span query?

: I'm sorry, but all queries are not supported by the QueryParser. Spans
: beeing one of them. See QueryParser.jj to add your syntax.

I think one of us is missunderstanding the question ... in my mind the
"natural language expression" for this query...

   spanNear([spanOr([spanNear([field:six, field:hundred], 0, true),
                     spanNear([field:seven, field:hundred], 0, true)
                    ]),
            spanOr([field:seven, field:six])],
            100, true)

...is...

  Either "six" followed by "hundred" with no gap between them, or "seven"
  followed by "hundred" with no gap between them; followed by either
  "seven" or "six" with a gap of no more no more then 100 tokens in
  between them.

It's a fairly contrived test case from TestSpansAdvanced if i'm not
mistaken, constructed purely to test some complex combinations.

An example that might make a little more sense is something like...

   spanNear([spanOr([spanNear([field:Erik, field:Hatcher], 0, true),
                     spanNear([field:Otis, field:Gospodnetic], 0, true)
                    ]),
            spanOr([field:Apache, field:Lucene])],
            100, false)

...which I would translate as...

  Either "Erik" followed by "Hatcher" with no gap between them, or "Otis"
  followed by "Gospodnetic" with no gap between them; near either
  "Apache" or "Lucene" with a gap of no more no more then 100 tokens in
  between them.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 07:18:28 2006
Return-Path: <java-user-return-22191-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94353 invoked from network); 24 Jul 2006 07:18:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 07:18:27 -0000
Received: (qmail 39647 invoked by uid 500); 24 Jul 2006 07:18:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39606 invoked by uid 500); 24 Jul 2006 07:18:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39595 invoked by uid 99); 24 Jul 2006 07:18:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:18:20 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:18:20 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k6O7Huso008288
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:17:57 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 2960F8B8ED
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:17:57 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 11919-01 for <java-user@lucene.apache.org>;
 Mon, 24 Jul 2006 09:17:56 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 219EB8B8EC
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:17:56 +0200 (CEST)
Message-ID: <44C47423.2000009@uni-hd.de>
Date: Mon, 24 Jul 2006 09:17:55 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: drill-down heuristics WAS: Where to find drill-down examples (source
 code)
References: <44C0DAF7.7040003@uni-hd.de> <44C0E40B.2050306@magpie.net>
In-Reply-To: <44C0E40B.2050306@magpie.net>
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi miles,

thanks for the response.
I think I didn't explain my Problem good enough.

The harder problem for me is how to get the proposals for the
refinement?  I have a date-range of 16xx to now, for about 4 bn. docs.
So the number of found documents could be quite large. But the
distribution of the dates could be very different form one query to another.
I hope there is a better way than to collect all dates with HitIterator,
and do statistics on the data?

Is there something that could be done while indexing?
What would be a high-performance heuristic?

The same problem with other categories like the author: how to find good
proposals for a given result set?

>> I want to have something like:
>>
>> Refine by Date:
>> * 1990-2000 (30 Docs)
>> * 2001-2003 (200 Docs)
>> * 2004-2006 (10 Docs)
>>
>> But not only DateRanges but also for other Categories.
>>
>> Does anybody knows where to find some Source Code, to get an Idea how to
>> implement this?
>> I think that's a useful property for a search engine, so are there any
>> contributions for Lucene for that?
>>
> 
> If you want to do a refined search I'd put the original query in a
> QueryFilter, which filters on the new search.
> 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/QueryFilter.html
> Alternatively, since you appear to only want to refine on dates and
> categories, you might want to put them in filters so they don't affect
> the score, and leave the query as is. In which case you can use a
> RangeQuery for the dates, and a wrap a TermQuery in a QueryFilter to
> handle the categories.
> 
> If you need multiple filters you can use the ChainedFilter class.
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 07:43:04 2006
Return-Path: <java-user-return-22192-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7555 invoked from network); 24 Jul 2006 07:43:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 07:43:04 -0000
Received: (qmail 79971 invoked by uid 500); 24 Jul 2006 07:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79942 invoked by uid 500); 24 Jul 2006 07:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79931 invoked by uid 99); 24 Jul 2006 07:42:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:42:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:42:57 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k6O7gZfh016102
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:42:35 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 90E9D8B8E7
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:42:35 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 12134-05 for <java-user@lucene.apache.org>;
 Mon, 24 Jul 2006 09:42:34 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id A560B8B8E1
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:42:34 +0200 (CEST)
Message-ID: <44C479EA.7000700@uni-hd.de>
Date: Mon, 24 Jul 2006 09:42:34 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Special characher & ; : % index/search question
References: <20060724022439.E554D10FB009@asf.osuosl.org> <1153708578.28605.162.camel@localhost>
In-Reply-To: <1153708578.28605.162.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi herbert,
>> WhitespaceAnalyzer looks brutal. Is it possible that I keep
>> StandardAnalyzer and at the same time to tell the parser to keep a
>> list of chars during indexing? 

Perhaps it would be sufficient to use the WhitespaceAnalyzer and keep
StandardAnalyzer for the other fields by using a PerFieldAnalyzerWrapper?

> 
> Add something like:
> 
> | < #MYCHARACTERS:
>       ("&" | ":" | "%" | ";")
>   >
> 
> to the StandardTokenizer.jj and rebuild it.
> 
> Might cause some lexical indeterministic errors, so look out for those.

... and you have to remember to do this again on each lucene-update.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 07:54:33 2006
Return-Path: <java-user-return-22193-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13099 invoked from network); 24 Jul 2006 07:54:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 07:54:33 -0000
Received: (qmail 10690 invoked by uid 500); 24 Jul 2006 07:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10669 invoked by uid 500); 24 Jul 2006 07:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10658 invoked by uid 99); 24 Jul 2006 07:54:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:54:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 00:54:26 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k6O7s4rT019692
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:54:04 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 763348B8E7
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:54:04 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 12666-05 for <java-user@lucene.apache.org>;
 Mon, 24 Jul 2006 09:54:03 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 75E428B8E1
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 09:54:03 +0200 (CEST)
Message-ID: <44C47C9B.5060606@uni-hd.de>
Date: Mon, 24 Jul 2006 09:54:03 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: dash-words
References: <1153705956.28605.144.camel@localhost> <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
In-Reply-To: <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley schrieb:
> On 7/23/06, karl wettin <karl.wettin@gmail.com> wrote:
>> I'm want to filter words with a dash in them.
>>
>> ["x-men"]
>> ["xmen"]
>> ["x", "men"]
>>
>> All of above should be synonyms. The problem is ["x", "men"] requiring a
>> distance between the terms and thus also matching "x-men men".
> 
> WordDelimiterFilter from Solr does this:
> http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#head-1c9b83870ca7890cd73b193cefed83c283339089
> 

I can recommend this too. I use it and it works fine! I just do a
LowerCaseFilter afterwards to avoid the downside:
"if source text is "powershot" then a query of "PowerShot" won't match!"


> 
> It also has the false match problem you mention... "x xmen" would
> match a document with x-men, although this hasn't been a problem in
> practise.
> 
> -Yonik
> http://incubator.apache.org/solr Solr, the open-source Lucene search server
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


-- 
Universitaetsbibliothek Heidelberg   Tel: +49 6221 54-2580
Ploeck 107-109, D-69117 Heidelberg   Fax: +49 6221 54-2623

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 08:36:31 2006
Return-Path: <java-user-return-22194-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31507 invoked from network); 24 Jul 2006 08:36:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 08:36:30 -0000
Received: (qmail 77188 invoked by uid 500); 24 Jul 2006 08:36:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77158 invoked by uid 500); 24 Jul 2006 08:36:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77142 invoked by uid 99); 24 Jul 2006 08:36:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:36:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.7.145.24] (HELO wasabi.infohazard.org) (207.7.145.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 01:36:22 -0700
Received: from [127.0.0.1] (localhost.localdomain [127.0.0.1])
	by wasabi.infohazard.org (Postfix) with ESMTP id 270B71798131
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 01:36:02 -0700 (PDT)
Message-ID: <44C48651.303@infohazard.org>
Date: Mon, 24 Jul 2006 01:35:29 -0700
From: Jeff Schnitzer <jeff@infohazard.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Architecture for indexing/searching mailing list archives
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi.  I'm the lead developer of SubEtha, a new java open source mailing 
list manager (http://subetha.tigris.org/).  I'm working on archive 
searching at the moment.  I've used Lucene with great success in a 
previous application, but some of the characteristics of this app have 
me seeking architectural advice:

* While most installations will have only a handful of lists, a 
sourceforge-sized installation might have thousands or even tens of 
thousands of (likely sparse) lists.
* Searching is always constrained to a specific list; you never search 
through the archives of more than one list at a time.

I have a thread that wakes up and periodically indexes all newly arrived 
mail.  Which would be the best approach?

1) Build a wholly separate index per mailing list.  For each search 
request, create a new IndexSearcher on the appropriate index and run the 
query.
2) Build a wholly separate index per mailing list.  Cache IndexSearchers 
that are created when search requests come in for each mailing list.  
Close and remove IndexSearchers from the cache when a list's index gets 
updated.
3) Build a single index that holds all messages, storing the associated 
list id as a field.  Use a Filter to limit each search to a specific 
list.  Use a single cached IndexSearcher that is closed and removed when 
the update process runs.

I'm guessing that #2 is the right answer, but I'm a little worried about 
what might happen in a server that indexes 10,000 lists.  In a 
long-running process, this could result in 10,000 cached 
IndexSearchers.  Too many open file handles?  Does IndexSearcher consume 
much memory?  It's fair to say that anyone that wishes to have this kind 
of capacity will have to do some tuning of the OS parameters, but I 
would like to understand the bounds of the problem a bit better.

Any advice?

Thanks,
Jeff Schnitzer
SubEtha Mailing List Manager - http://subetha.tigris.org/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 11:02:13 2006
Return-Path: <java-user-return-22195-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90385 invoked from network); 24 Jul 2006 11:02:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 11:02:13 -0000
Received: (qmail 7038 invoked by uid 500); 24 Jul 2006 11:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7017 invoked by uid 500); 24 Jul 2006 11:02:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7006 invoked by uid 99); 24 Jul 2006 11:02:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 04:02:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.98] (HELO randymail-a10.dreamhost.com) (208.97.132.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 04:02:05 -0700
Received: from [10.0.0.110] (mail2.runtime-collective.com [212.42.171.92])
	by randymail-a10.dreamhost.com (Postfix) with ESMTP id A040D10F679
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 04:01:42 -0700 (PDT)
From: Miles Barr <miles@magpie.net>
To: java-user@lucene.apache.org
Subject: Re: drill-down heuristics WAS: Where to find drill-down examples (source code)
Date: Mon, 24 Jul 2006 12:00:58 +0100
User-Agent: KMail/1.9.1
References: <44C0DAF7.7040003@uni-hd.de> <44C0E40B.2050306@magpie.net> <44C47423.2000009@uni-hd.de>
In-Reply-To: <44C47423.2000009@uni-hd.de>
Organization: Magpie
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607241200.58391.miles@magpie.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 24 July 2006 08:17, Martin Braun wrote:
> I think I didn't explain my Problem good enough.
>
> The harder problem for me is how to get the proposals for the
> refinement?  I have a date-range of 16xx to now, for about 4 bn. docs.
> So the number of found documents could be quite large. But the
> distribution of the dates could be very different form one query to
> another. I hope there is a better way than to collect all dates with
> HitIterator, and do statistics on the data?
>
> Is there something that could be done while indexing?
> What would be a high-performance heuristic?
>
> The same problem with other categories like the author: how to find good
> proposals for a given result set?

That's a lot trickier and there might be others on the list who can give a 
better answer. I think what you need to do is to extend HitCollector:

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/HitCollector.html

Your implementation will keep a count of dates and categories that the results 
are in. Then you can use this information to build up your refinements. The 
problem with this approach is that HitCollector#collect only provides you 
with the document number, not the document itself, hence you still have to 
load the document to find out its date and category, this will be slow for 
large result sets.

You might want to keep this metadata in another store so you can quickly look 
up the date and category based on the document number. This avoids having to 
load all the documents from Lucene, which is an expensive operation. The 
downside with this approach is that the document number changes when you 
optimise your index, hence you'll have to rebuild your metadata store each 
time you optimise.



Miles

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 11:52:13 2006
Return-Path: <java-user-return-22196-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5477 invoked from network); 24 Jul 2006 11:52:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 11:52:13 -0000
Received: (qmail 13357 invoked by uid 500); 24 Jul 2006 11:52:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13149 invoked by uid 500); 24 Jul 2006 11:52:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13134 invoked by uid 99); 24 Jul 2006 11:52:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 04:52:06 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 04:52:05 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44A2E86F004F22E7 for java-user@lucene.apache.org; Mon, 24 Jul 2006 13:51:44 +0200
Subject: Re: dash-words
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 13:51:41 +0200
Message-Id: <1153741901.28605.184.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 00:34 -0400, Yonik Seeley wrote:
> > filter words with a dash
> >
> > ["x-men"]
> > ["xmen"]
> > ["x", "men"]
> >
> > The problem is ["x", "men"] requiring a distance between the terms
> > and thus also matching "x-men men".
> 
> WordDelimiterFilter from Solr does this

> It also has the false match problem you mention...

Will it effect a phrase query?

I.e. would "the xmen are here" be a no-match as the filtered index data
would be "the x (men|xmen|x-men) are here"?

I'll write a test now.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 12:05:18 2006
Return-Path: <java-user-return-22197-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8813 invoked from network); 24 Jul 2006 12:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 12:05:18 -0000
Received: (qmail 31779 invoked by uid 500); 24 Jul 2006 12:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31762 invoked by uid 500); 24 Jul 2006 12:05:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31750 invoked by uid 99); 24 Jul 2006 12:05:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 05:05:11 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.159 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 05:05:10 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn1.fre.skanova.net (7.2.075)
        id 44A135F100551744 for java-user@lucene.apache.org; Mon, 24 Jul 2006 14:04:49 +0200
Subject: Re: Span Query NLE
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu>
References: <1003434929.20060723213110@gmail.com>
	 <1153709403.28605.172.camel@localhost>
	 <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 14:04:46 +0200
Message-Id: <1153742686.28605.198.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 00:04 -0700, Chris Hostetter wrote:

> > not supported by the QueryParser. 

> I think one of us is missunderstanding the question ... in my mind the
> "natural language expression" for this query...
> 
>    spanNear([spanOr([spanNear([field:six,

> ...is...
> 
>   Either "six" followed by

I think your eyes missed this part from the original post:

> > > and can be parsed by QueryParser

:-)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 13:16:20 2006
Return-Path: <java-user-return-22198-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32170 invoked from network); 24 Jul 2006 13:16:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 13:16:20 -0000
Received: (qmail 47995 invoked by uid 500); 24 Jul 2006 13:16:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47967 invoked by uid 500); 24 Jul 2006 13:16:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47956 invoked by uid 99); 24 Jul 2006 13:16:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:16:13 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:16:12 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44A2E86F004F6118 for java-user@lucene.apache.org; Mon, 24 Jul 2006 15:15:51 +0200
Subject: Re: dash-words
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1153741901.28605.184.camel@localhost>
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 15:15:47 +0200
Message-Id: <1153746947.28605.213.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 13:51 +0200, karl wettin wrote:
> On Mon, 2006-07-24 at 00:34 -0400, Yonik Seeley wrote:
> > > filter words with a dash
> > >
> > > ["x-men"]
> > > ["xmen"]
> > > ["x", "men"]
> > >
> > > The problem is ["x", "men"] requiring a distance between the terms
> > > and thus also matching "x-men men".
> > 
> > WordDelimiterFilter from Solr does this
> 
> > It also has the false match problem you mention...
> 
> Will it effect a phrase query?
> 
> I.e. would "the xmen are" be a no-match as the filtered index data
> would be "the x (men|xmen|x-men) are here"?
> 
> I'll write a test now.

Yes, it effects PhraseQuery. Only "the x men are" will match.



package org.apache.solr.analysis;

import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;

import java.io.Reader;
import java.util.HashSet;


public class TestWordDelimiterFilter {

    public static void main(String[] args) throws Exception {
        final String field = "field";

        Directory dir = new RAMDirectory();
        Analyzer a = new Analyzer();

        IndexWriter w = new IndexWriter(dir, a, true);
        Document d = new Document();
        d.add(new Field(field, "the x-men are here", Field.Store.NO, Field.Index.TOKENIZED, Field.TermVector.NO));
        w.addDocument(d);
        w.close();

        IndexSearcher is = new IndexSearcher(dir);

        PhraseQuery pq = new PhraseQuery();
        pq.add(new Term(field, "the"));
        pq.add(new Term(field, "x-men"));
        pq.add(new Term(field, "are"));
        System.out.println(is.search(pq).length());

        pq = new PhraseQuery();
        pq.add(new Term(field, "the"));
        pq.add(new Term(field, "xmen"));
        pq.add(new Term(field, "are"));
        System.out.println(is.search(pq).length());

        pq = new PhraseQuery();
        pq.add(new Term(field, "the"));
        pq.add(new Term(field, "x"));
        pq.add(new Term(field, "men"));
        pq.add(new Term(field, "are"));
        System.out.println(is.search(pq).length());

        is.close();
        dir.close();

    }

    public static class Analyzer extends org.apache.lucene.analysis.Analyzer {
        public TokenStream tokenStream(String fieldName, Reader reader) {
            TokenStream ts = new StandardAnalyzer(new HashSet()).tokenStream(fieldName, reader);
            ts = new WordDelimiterFilter(ts, 1,1,0,0,0);
            return ts;
        }
    }

}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 13:17:53 2006
Return-Path: <java-user-return-22199-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32528 invoked from network); 24 Jul 2006 13:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 13:17:53 -0000
Received: (qmail 50275 invoked by uid 500); 24 Jul 2006 13:17:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50251 invoked by uid 500); 24 Jul 2006 13:17:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50240 invoked by uid 99); 24 Jul 2006 13:17:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:17:46 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:17:45 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44A2E86F004F625D for java-user@lucene.apache.org; Mon, 24 Jul 2006 15:17:25 +0200
Subject: Re: dash-words
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1153746947.28605.213.camel@localhost>
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 15:17:21 +0200
Message-Id: <1153747041.28605.215.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 15:15 +0200, karl wettin wrote:
> Yes, it effects PhraseQuery. Only "the x men are" will match.

I'm stupid. Forget about it. I should of course analyze the query too.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 13:18:43 2006
Return-Path: <java-user-return-22200-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32783 invoked from network); 24 Jul 2006 13:18:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 13:18:42 -0000
Received: (qmail 53870 invoked by uid 500); 24 Jul 2006 13:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53837 invoked by uid 500); 24 Jul 2006 13:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53826 invoked by uid 99); 24 Jul 2006 13:18:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:18:36 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.151.11.162] (HELO smtp.ya.com) (62.151.11.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:18:35 -0700
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1G50K5-0004RG-00
	for java-user@lucene.apache.org; Mon, 24 Jul 2006 15:18:13 +0200
Message-ID: <36cc01c6af23$cd481fd0$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
References: <20060227093602.17363.qmail@web50313.mail.yahoo.com> <03d001c63b8e$ae80f6c0$1e8e10ac@yacom.ofi>
Subject: queryParser and sorting question
Date: Mon, 24 Jul 2006 15:19:32 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I'm, trying to execute a query to find some words, and I'm using

QueryParser queryParser = new MultiFieldQueryParser(new String[] {"tags", 
"title"}, ProcessConstants.analyzer);
Query query = queryParser.parse("word1 word2 word3");

I want to show the results sorted like this:

first, documents containing all of the three words, and this documents 
sorted by one of the index fields.
Next, documents containing two of the words, also sorted by the same field 
like before.
And so on.

How can I do this?

I wold like to avoid executing several queries of this kind:
"word1 + word2 + word3"
"word1 + word2 - word3"
"word1 - word2 + word3"
"word1 - word2 - word3"
.....

Thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 13:27:03 2006
Return-Path: <java-user-return-22201-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42046 invoked from network); 24 Jul 2006 13:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 13:27:00 -0000
Received: (qmail 77814 invoked by uid 500); 24 Jul 2006 13:26:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77782 invoked by uid 500); 24 Jul 2006 13:26:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77771 invoked by uid 99); 24 Jul 2006 13:26:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:26:53 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 06:26:52 -0700
Received: by py-out-1112.google.com with SMTP id d80so2666436pyd
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 06:25:58 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fhzUI7UF8npt4CdRJD4BnHUrC+M39gWfKd4gAqDwkE56f0S380cgh66UXMl0wMg/B8spUMBS5Uka+PSCfHMahxFNRKGaV52k56PA65FoXyVnvIBfZ3SgirUkNzkEE0lrcHY8ZAcP8sBE44eFEXKZYvEf/3PexB+PB/F8EBusb3U=
Received: by 10.35.111.7 with SMTP id o7mr7593615pym;
        Mon, 24 Jul 2006 06:25:58 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Mon, 24 Jul 2006 06:25:58 -0700 (PDT)
Message-ID: <359a92830607240625l5eac0b5ct7c9929da2470f0e4@mail.gmail.com>
Date: Mon, 24 Jul 2006 09:25:58 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Architecture for indexing/searching mailing list archives
In-Reply-To: <44C48651.303@infohazard.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_59232_24802244.1153747558761"
References: <44C48651.303@infohazard.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_59232_24802244.1153747558761
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I suspect that 3 is actually better. You can use CachingWrapperFilter to
cache the filters automatically. Also, I found that filters were much faster
to construct than I first thought.

That said, though, why bother with a filter? Why not just make the list part
of the query and let Lucene take care of it for you? So each query would
have a clause 'And list-id = <specific list here>). There was a discussion
last week about Lucene's attempts to restrict queries by the
most-restrictive clause first, so it seems to me that this is all done for
you without filters. I'd only think about filters *after* I had some
performance numbers.....

Philosophically (don't you hate that word) I'm reluctant to get any more
complicated than I have to before I have some performance numbers indicating
that complexity is required...


Best
Erick

------=_Part_59232_24802244.1153747558761--

From java-user-return-22202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 14:28:16 2006
Return-Path: <java-user-return-22202-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60963 invoked from network); 24 Jul 2006 14:28:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 14:28:16 -0000
Received: (qmail 15195 invoked by uid 500); 24 Jul 2006 14:28:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15164 invoked by uid 500); 24 Jul 2006 14:28:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15128 invoked by uid 99); 24 Jul 2006 14:28:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 07:28:07 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.146] (HELO web36411.mail.mud.yahoo.com) (209.191.85.146)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 24 Jul 2006 07:28:05 -0700
Received: (qmail 66183 invoked by uid 60001); 24 Jul 2006 14:27:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=MBKYEONbdIl7iD3LHHeC5nJIkXbxnykR2LLf1Z/kjcpyp0Cm2qnxOB7Kma4Q50WIFbaZAD4fv8WFjep7NWyBibzYG6qRJXCySRh1I2ZCexCxvy763V2KMVbRPbj2ek8JaVCUxMCNy+/HBkHyNEsr7CKKlQtjHPxtBnrQS4OGtX8=  ;
Message-ID: <20060724142745.66181.qmail@web36411.mail.mud.yahoo.com>
Received: from [208.210.219.129] by web36411.mail.mud.yahoo.com via HTTP; Mon, 24 Jul 2006 07:27:44 PDT
Date: Mon, 24 Jul 2006 07:27:44 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Re: How reliable is lucene indexing !!
To: java-user@lucene.apache.org
In-Reply-To: <1153706692.28605.158.camel@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-875916406-1153751264=:63758"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-875916406-1153751264=:63758
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you very much for the quick response. I was just a little skeptical about Lucene for my application.
   
  This user forum is really supportive by posting the replies immediately.
   
  Thanks,
  -Vasu

karl wettin <karl.wettin@gmail.com> wrote:
  On Sun, 2006-07-23 at 14:44 -0700, vasu shah wrote:

> I have few doubts 

> The index size will approximately increase by 4000 records per
> day. Is lucene good for the application?

Sure.

> Is it suitable for frequent inserts/updates?

Sure, but I don't consider 4000 new documents per day to be frequent.

> 2. The index has to be in sync with the database. Whenever the user
> inserts/updates a record in the database, the index also needs to be
> updated accordingly. 

> What would be the best practice/approach to handle this scenario?

Create an IndexWriter or Reader at commit-time and do the same changes
you did to the database. In case of update remove the index document and
create it again. 

> How do I handle the situation in where some process created 
> write.lock/commit.lock and something went wrong and the lock files are
> still there. 

You probably get locks due to bad use of readers and writers. Without
looking at the code you will only get abstract hints, so show us the
essence of what you are doing.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 			
---------------------------------
See the all-new, redesigned Yahoo.com.  Check it out.
--0-875916406-1153751264=:63758--

From java-user-return-22203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 14:30:52 2006
Return-Path: <java-user-return-22203-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62667 invoked from network); 24 Jul 2006 14:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 14:30:51 -0000
Received: (qmail 19976 invoked by uid 500); 24 Jul 2006 14:30:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19941 invoked by uid 500); 24 Jul 2006 14:30:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19930 invoked by uid 99); 24 Jul 2006 14:30:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 07:30:45 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.164 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 07:30:44 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn2.hy.skanova.net (7.2.075)
        id 44A2F19F004FFF15 for java-user@lucene.apache.org; Mon, 24 Jul 2006 16:30:23 +0200
Subject: Re: dash-words
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <1153747041.28605.215.camel@localhost>
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
	 <1153747041.28605.215.camel@localhost>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 16:30:19 +0200
Message-Id: <1153751420.28605.221.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 15:17 +0200, karl wettin wrote:
> On Mon, 2006-07-24 at 15:15 +0200, karl wettin wrote:
> > Yes, it effects PhraseQuery. Only "the x men are" will match.
> 
> I'm stupid. Forget about it. I should of course analyze the query too.

But still it fails on xmen. Could it have something to do with this:
   WordDelimiterFilter(ts, 1,1,0,0,0);

?

I can't figure out what the parameters does. ;)


The new code:

package org.apache.solr.analysis;

import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.queryParser.QueryParser;

import java.io.Reader;
import java.util.HashSet;


public class TestWordDelimiterFilter {

    public static void main(String[] args) throws Exception {
        final String field = "field";

        Directory dir = new RAMDirectory();
        Analyzer a = new Analyzer();

        IndexWriter w = new IndexWriter(dir, a, true);
        Document d = new Document();
        d.add(new Field(field, "the x-men are here", Field.Store.NO, Field.Index.TOKENIZED, Field.TermVector.NO));
        w.addDocument(d);
        w.close();

        IndexSearcher is = new IndexSearcher(dir);
        QueryParser qp = new QueryParser(field, a);
        System.out.println(is.search(qp.parse("\"the x men are\"")).length());
        System.out.println(is.search(qp.parse("\"the xmen are\"")).length()); // expected 1, get 0.
        System.out.println(is.search(qp.parse("\"the x-men are\"")).length());


        is.close();
        dir.close();

    }

    public static class Analyzer extends org.apache.lucene.analysis.Analyzer {
        public TokenStream tokenStream(String fieldName, Reader reader) {
            TokenStream ts = new StandardAnalyzer(new HashSet()).tokenStream(fieldName, reader);
            ts = new WordDelimiterFilter(ts, 1,1,0,0,0);
            return ts;
        }
    }

}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 15:37:02 2006
Return-Path: <java-user-return-22204-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97085 invoked from network); 24 Jul 2006 15:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 15:37:02 -0000
Received: (qmail 2925 invoked by uid 500); 24 Jul 2006 15:36:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2895 invoked by uid 500); 24 Jul 2006 15:36:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2883 invoked by uid 99); 24 Jul 2006 15:36:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 08:36:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [206.190.52.173] (HELO smtp104.biz.mail.re2.yahoo.com) (206.190.52.173)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 24 Jul 2006 08:36:54 -0700
Received: (qmail 20406 invoked from network); 24 Jul 2006 15:34:19 -0000
Received: from unknown (HELO EAGLE) (hwu@welpine.com@68.255.223.190 with login)
  by smtp104.biz.mail.re2.yahoo.com with SMTP; 24 Jul 2006 15:34:19 -0000
From: "Herbert Wu" <hwu@welpine.com>
To: <java-user@lucene.apache.org>
Subject: RE: Special characher & ; : % index/search question
Date: Mon, 24 Jul 2006 10:34:13 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <44C479EA.7000700@uni-hd.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Thread-Index: Acau9MxUlXgAeVOQTBS+PuhkBdeRmgAP7iQg
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20060724153654.C938F10FB00B@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Martin,
This may work if I can assume which field to contain the special chars. I
will look over the data and see if it is possible.
Thanks.
-Herbert

-----Original Message-----
From: Martin Braun [mailto:mbraun@uni-hd.de] 
Sent: Monday, July 24, 2006 2:43 AM
To: java-user@lucene.apache.org
Subject: Re: Special characher & ; : % index/search question

hi herbert,
>> WhitespaceAnalyzer looks brutal. Is it possible that I keep
>> StandardAnalyzer and at the same time to tell the parser to keep a
>> list of chars during indexing? 

Perhaps it would be sufficient to use the WhitespaceAnalyzer and keep
StandardAnalyzer for the other fields by using a PerFieldAnalyzerWrapper?

> 
> Add something like:
> 
> | < #MYCHARACTERS:
>       ("&" | ":" | "%" | ";")
>   >
> 
> to the StandardTokenizer.jj and rebuild it.
> 
> Might cause some lexical indeterministic errors, so look out for those.

... and you have to remember to do this again on each lucene-update.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 15:49:04 2006
Return-Path: <java-user-return-22205-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2473 invoked from network); 24 Jul 2006 15:49:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 15:49:04 -0000
Received: (qmail 28798 invoked by uid 500); 24 Jul 2006 15:49:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28226 invoked by uid 500); 24 Jul 2006 15:48:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28215 invoked by uid 99); 24 Jul 2006 15:48:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 08:48:57 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of charliecmo@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 08:48:57 -0700
Received: by wr-out-0506.google.com with SMTP id 37so648142wra
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 08:48:36 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:x-mailer:reply-to:x-priority:message-id:to:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding:from;
        b=g6fTq4tdw8DLPgDzT3LnAZ+VoErhvjvA9U+1qjLgWg92cqGhGUjHTKf/lwjLE7y3O/q8l8rz/ovusX6RXQiMSK0Yk0VB1bzCf6lv2Htcu0Zs4BxkKXxiyFhoaHL+bLar11pdGwD7lmkhRiB3C67MotJYzeBMkXMHjVdvr/pSWc8=
Received: by 10.54.84.1 with SMTP id h1mr3896837wrb;
        Mon, 24 Jul 2006 08:48:36 -0700 (PDT)
Received: from cmo.mshome.net ( [129.111.226.103])
        by mx.gmail.com with ESMTP id 44sm4616809wri.2006.07.24.08.48.35;
        Mon, 24 Jul 2006 08:48:35 -0700 (PDT)
Date: Mon, 24 Jul 2006 10:48:29 -0500
X-Mailer: The Bat! (v3.5) Professional
Reply-To: Charlie Zhao <CharlieCMO@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <809151923.20060724104829@gmail.com>
To: java-user@lucene.apache.org
Subject: Re[2]: Span Query NLE
In-Reply-To: <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu>
References: <1003434929.20060723213110@gmail.com>
 <1153709403.28605.172.camel@localhost>
 <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
From: Charlie <charliecmo@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for both of you, Karl and Chris.

You both made my intention even more clearer.

So now the question is:

   Is there a powerful QueryParser.jj can process span query syntax?

(prerequisite is: have we ever defined the Span Query Syntax?)

I will be boasting if I am claim to write one now. I had only one
compiler class and never feel good about it:)

-- 
Best regards,
 Charlie                            


---
Monday, July 24, 2006, 2:04:35 AM, you wrote:


: >> Would anyone give me a hint regarding the natural language expression
: >> of the following span query?

> : I'm sorry, but all queries are not supported by the QueryParser. Spans
> : beeing one of them. See QueryParser.jj to add your syntax.

> I think one of us is missunderstanding the question ... in my mind the
> "natural language expression" for this query...

>    spanNear([spanOr([spanNear([field:six, field:hundred], 0, true),
>                      spanNear([field:seven, field:hundred], 0, true)
>                     ]),
>             spanOr([field:seven, field:six])],
>             100, true)

> ...is...

>   Either "six" followed by "hundred" with no gap between them, or "seven"
>   followed by "hundred" with no gap between them; followed by either
>   "seven" or "six" with a gap of no more no more then 100 tokens in
>   between them.

> It's a fairly contrived test case from TestSpansAdvanced if i'm not
> mistaken, constructed purely to test some complex combinations.

> An example that might make a little more sense is something like...

>    spanNear([spanOr([spanNear([field:Erik, field:Hatcher], 0, true),
>                      spanNear([field:Otis, field:Gospodnetic], 0, true)
>                     ]),
>             spanOr([field:Apache, field:Lucene])],
>             100, false)

> ...which I would translate as...

>   Either "Erik" followed by "Hatcher" with no gap between them, or "Otis"
>   followed by "Gospodnetic" with no gap between them; near either
>   "Apache" or "Lucene" with a gap of no more no more then 100 tokens in
>   between them.


> -Hoss



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 17:44:51 2006
Return-Path: <java-user-return-22206-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47345 invoked from network); 24 Jul 2006 17:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 17:44:51 -0000
Received: (qmail 57543 invoked by uid 500); 24 Jul 2006 17:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57510 invoked by uid 500); 24 Jul 2006 17:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57499 invoked by uid 99); 24 Jul 2006 17:44:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:44:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:44:43 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A9AB530EFCD4; Mon, 24 Jul 2006 13:44:22 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [128.143.193.79] (d-128-193-79.bootp.Virginia.EDU [128.143.193.79])
	by ehatchersolutions.com (Postfix) with ESMTP id 02DEB30EFCD3
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 13:44:19 -0400 (EDT)
In-Reply-To: <809151923.20060724104829@gmail.com>
References: <1003434929.20060723213110@gmail.com> <1153709403.28605.172.camel@localhost> <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu> <809151923.20060724104829@gmail.com>
Mime-Version: 1.0 (Apple Message framework v752.2)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <271DE600-EABF-4690-B166-0FE1A789E9C0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Re[2]: Span Query NLE
Date: Mon, 24 Jul 2006 13:44:16 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The "surround" query parser in Lucene's contrib area implements a  
language to construct SpanQuery's.  Check out surround.txt in  
Subversion:

	<http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/surround/>

I have written a query parser for a client that allows construction  
of very sophisticated queries including the full spectrum of  
SpanQuery's, but the language is legacy and not something I'd wish  
upon the general public, and the code is proprietary anyway.  It does  
take some time for someone unfamiliar with JavaCC, such as myself  
initially, to implement a custom parser but it can be a huge success  
for a project to have this capability.

	Erik


On Jul 24, 2006, at 11:48 AM, Charlie wrote:

> Thanks for both of you, Karl and Chris.
>
> You both made my intention even more clearer.
>
> So now the question is:
>
>    Is there a powerful QueryParser.jj can process span query syntax?
>
> (prerequisite is: have we ever defined the Span Query Syntax?)
>
> I will be boasting if I am claim to write one now. I had only one
> compiler class and never feel good about it:)
>
> -- 
> Best regards,
>  Charlie
>
>
> ---
> Monday, July 24, 2006, 2:04:35 AM, you wrote:
>
>
> : >> Would anyone give me a hint regarding the natural language  
> expression
> : >> of the following span query?
>
>> : I'm sorry, but all queries are not supported by the QueryParser.  
>> Spans
>> : beeing one of them. See QueryParser.jj to add your syntax.
>
>> I think one of us is missunderstanding the question ... in my mind  
>> the
>> "natural language expression" for this query...
>
>>    spanNear([spanOr([spanNear([field:six, field:hundred], 0, true),
>>                      spanNear([field:seven, field:hundred], 0, true)
>>                     ]),
>>             spanOr([field:seven, field:six])],
>>             100, true)
>
>> ...is...
>
>>   Either "six" followed by "hundred" with no gap between them, or  
>> "seven"
>>   followed by "hundred" with no gap between them; followed by either
>>   "seven" or "six" with a gap of no more no more then 100 tokens in
>>   between them.
>
>> It's a fairly contrived test case from TestSpansAdvanced if i'm not
>> mistaken, constructed purely to test some complex combinations.
>
>> An example that might make a little more sense is something like...
>
>>    spanNear([spanOr([spanNear([field:Erik, field:Hatcher], 0, true),
>>                      spanNear([field:Otis, field:Gospodnetic], 0,  
>> true)
>>                     ]),
>>             spanOr([field:Apache, field:Lucene])],
>>             100, false)
>
>> ...which I would translate as...
>
>>   Either "Erik" followed by "Hatcher" with no gap between them, or  
>> "Otis"
>>   followed by "Gospodnetic" with no gap between them; near either
>>   "Apache" or "Lucene" with a gap of no more no more then 100  
>> tokens in
>>   between them.
>
>
>> -Hoss
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 17:56:09 2006
Return-Path: <java-user-return-22207-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51031 invoked from network); 24 Jul 2006 17:56:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 17:56:09 -0000
Received: (qmail 89406 invoked by uid 500); 24 Jul 2006 17:56:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89220 invoked by uid 500); 24 Jul 2006 17:56:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89209 invoked by uid 99); 24 Jul 2006 17:56:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:56:02 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 10:56:01 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D00572478 for java-user@lucene.apache.org; Mon, 24 Jul 2006 19:55:40 +0200
Subject: Re: Re[2]: Span Query NLE
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <271DE600-EABF-4690-B166-0FE1A789E9C0@ehatchersolutions.com>
References: <1003434929.20060723213110@gmail.com>
	 <1153709403.28605.172.camel@localhost>
	 <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu>
	 <809151923.20060724104829@gmail.com>
	 <271DE600-EABF-4690-B166-0FE1A789E9C0@ehatchersolutions.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 19:55:36 +0200
Message-Id: <1153763736.28605.227.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 13:44 -0400, Erik Hatcher wrote:
> It does take some time for someone unfamiliar with JavaCC, such as
> myself initially, to implement a custom parser but it can be a huge
> success for a project to have this capability. 

5 cents:

In case of anyone consider writing a new query parser that can be
contributed to Apache, I would recommend using ANTlr instead, as the
grammar can be compiled to most languages with a Lucene-port.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 18:50:09 2006
Return-Path: <java-user-return-22208-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68558 invoked from network); 24 Jul 2006 18:50:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 18:50:08 -0000
Received: (qmail 12223 invoked by uid 500); 24 Jul 2006 18:49:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12152 invoked by uid 500); 24 Jul 2006 18:49:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12132 invoked by uid 99); 24 Jul 2006 18:49:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 11:49:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.61] (HELO web86909.mail.ukl.yahoo.com) (217.12.13.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 24 Jul 2006 11:49:55 -0700
Received: (qmail 99446 invoked by uid 60001); 24 Jul 2006 18:49:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=qIGaWiUjzhyNRwDcg4oCsGPnw6ImngQ2l+Q6HGPbmGwD7uK5xEHcTQhmBjZYPfNRbu9OsCMYuEX2j824EAkjFkQH0ZlQlMqDCp/hI733j0vJHGR4a4Hy5hVYP3pXw4cVNzmAXsI7vt1nJmf9qS6+Ym26LtDx6bayplVFhQkCVUg=  ;
Message-ID: <20060724184934.99444.qmail@web86909.mail.ukl.yahoo.com>
Received: from [193.253.204.236] by web86909.mail.ukl.yahoo.com via HTTP; Mon, 24 Jul 2006 20:49:34 CEST
Date: Mon, 24 Jul 2006 20:49:34 +0200 (CEST)
From: John john <ze_barbary@yahoo.fr>
Subject: index articles with groups
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1431807873-1153766974=:98906"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1431807873-1153766974=:98906
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello, 
 
 I'm pretty new to lucene so I hope my question is not stupid :)
 
 I'd like to index articles but I want them to be in a group.
 such as:
 
 article1, article2 and article3 are in the group1
 article4 and article5 are in the group2
 
 Then if I search for a word which is present in article1 and article 2, i'd like to retrieve only one result because they are in the same group.
 
 Is it possible?
 
 Thanks
 

 		
---------------------------------
 Dcouvrez un nouveau moyen de poser toutes vos questions quelque soit le sujet ! Yahoo! Questions/Rponses pour partager vos connaissances, vos opinions et vos expriences. Cliquez ici. 
--0-1431807873-1153766974=:98906--

From java-user-return-22209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 24 19:12:19 2006
Return-Path: <java-user-return-22209-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78546 invoked from network); 24 Jul 2006 19:12:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2006 19:12:19 -0000
Received: (qmail 62854 invoked by uid 500); 24 Jul 2006 19:12:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62829 invoked by uid 500); 24 Jul 2006 19:12:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62818 invoked by uid 99); 24 Jul 2006 19:12:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 12:12:12 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 12:12:12 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44A2E86F00506728 for java-user@lucene.apache.org; Mon, 24 Jul 2006 21:11:50 +0200
Subject: Re: index articles with groups
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <20060724184934.99444.qmail@web86909.mail.ukl.yahoo.com>
References: <20060724184934.99444.qmail@web86909.mail.ukl.yahoo.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 24 Jul 2006 21:11:46 +0200
Message-Id: <1153768306.28605.239.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 20:49 +0200, John john wrote:

>  article1, article2 and article3 are in the group1
>  article4 and article5 are in the group2
>  
>  Then if I search for a word which is present in article1 and article
> 2, i'd like to retrieve only one result because they are in the same
> group.

This sounds very suspicious. My guts tell me you are attacking your
problem -- whatever it might be -- the wrong way. 

But OK, which one of the documents would you want as a result? Any of
them? Create a HitCollector, and if the the field with the group is
already collected, ignore the current document.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 00:53:01 2006
Return-Path: <java-user-return-22210-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85202 invoked from network); 25 Jul 2006 00:53:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 00:53:01 -0000
Received: (qmail 70385 invoked by uid 500); 25 Jul 2006 00:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70351 invoked by uid 500); 25 Jul 2006 00:52:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70338 invoked by uid 99); 25 Jul 2006 00:52:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 17:52:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.90.243.74] (HELO deloitte.ca) (216.90.243.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 17:52:54 -0700
Received: from ([10.55.44.174])
	by camail1.deloitte.ca with ESMTP  id KBBDB27.44349886;
	Mon, 24 Jul 2006 20:52:11 -0400
Received: from canat0411.ca.deloitte.com ([10.55.44.111]) by canat0474.ca.deloitte.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 24 Jul 2006 20:52:10 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: Newbie synonyms question
Date: Mon, 24 Jul 2006 20:52:10 -0400
Message-ID: <D3FB08E688E4954EADE12CCFFA2F2548014A6EF2@canat0411.ca.deloitte.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Newbie synonyms question
thread-index: AcavhI87pRNZJO0+Q6CQGKEjsWWt3g==
From: "Lee, Andrew J \(CA - Toronto\)" <andrlee@deloitte.ca>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Jul 2006 00:52:10.0830 (UTC) FILETIME=[8FB6BEE0:01C6AF84]
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6AF84.8FF69870"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6AF84.8FF69870
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Sorry if this question has already been answered, but it is regarding=0D=0A=
synonyms=2E=0D=0A=0D=0AI am using the WordNet/Synonyms index and using the =
following algorithm=0D=0Ato create synonym searches (this is a dumbed down =
version):=0D=0A=0D=0ALook up a the "base" word in the synonym index=0D=0AIn=
 my search string, replace all instances of the base word with=0D=0A"(synon=
ym1 | synonym 2 | =2E=2E=2E | synonym n)"=0D=0AUse this new search string a=
gainst my search index=0D=0A=0D=0A1)  Is there an easier / more efficient w=
ay to go about this?=0D=0A2)  Does Lucene have any built-in capability to h=
andle synonyms?  For=0D=0Aexample, can I point it to the synonym index and =
let Lucene perform all=0D=0Athe work of synonym lookup / replacement?=0D=0A=
=0D=0AThanks in advance,=0D=0A=0D=0AAndrew Lee=0D=0A=0D=0A=0D=0A=0D=0A=0D=
=0A-----------------------------------------=0D=0A*************************=
******************************************=0D=0A*******************=0D=0ACo=
nfidentiality Warning: This message and any attachments are=0D=0Aintended o=
nly for the use of the intended recipient(s), are=0D=0Aconfidential, and ma=
y be privileged=2E If you are not the intended=0D=0Arecipient, you are here=
by notified that any review, retransmission,=0D=0Aconversion to hard copy, =
copying, circulation or other use of this=0D=0Amessage and any attachments =
is strictly prohibited=2E If you are not=0D=0Athe intended recipient, pleas=
e notify the sender immediately by=0D=0Areturn e-mail, and delete this mess=
age and any attachments from=0D=0Ayour system=2E Thank you=2E=0D=0A=0D=0AIn=
formation confidentielle: Le pr=E9sent message, ainsi que tout=0D=0Afichier=
 qui y est joint, est envoy=E9 =E0 l'intention exclusive de=0D=0Ason ou de =
ses destinataires; il est de nature confidentielle et=0D=0Apeut constituer =
une information privil=E9gi=E9e=2E Nous avertissons=0D=0Atoute personne aut=
re que le destinataire pr=E9vu que tout examen,=0D=0Ar=E9acheminement, impr=
ession, copie, distribution ou autre=0D=0Autilisation de ce message et de t=
out fichier qui y est joint est=0D=0Astrictement interdit=2E Si vous n'=EAt=
es pas le destinataire pr=E9vu,=0D=0Aveuillez en aviser imm=E9diatement l'e=
xp=E9diteur par retour de=0D=0Acourriel et supprimer ce message et tout doc=
ument joint de votre=0D=0Asyst=E8me=2E Merci=2E=0D=0A**********************=
*********************************************=0D=0A*******************=0D=
=0A
------_=_NextPart_001_01C6AF84.8FF69870--


From java-user-return-22211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:06:05 2006
Return-Path: <java-user-return-22211-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87838 invoked from network); 25 Jul 2006 01:06:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:06:05 -0000
Received: (qmail 80889 invoked by uid 500); 25 Jul 2006 01:05:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80870 invoked by uid 500); 25 Jul 2006 01:05:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80859 invoked by uid 99); 25 Jul 2006 01:05:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:05:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:05:58 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1F9E45B77A; Mon, 24 Jul 2006 18:05:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 1C3907F403;
	Mon, 24 Jul 2006 18:05:31 -0700 (PDT)
Date: Mon, 24 Jul 2006 18:05:31 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: drill-down heuristics WAS: Where to find drill-down examples
 (source code)
In-Reply-To: <44C47423.2000009@uni-hd.de>
Message-ID: <Pine.LNX.4.58.0607241749430.29780@hal.rescomp.berkeley.edu>
References: <44C0DAF7.7040003@uni-hd.de> <44C0E40B.2050306@magpie.net>
 <44C47423.2000009@uni-hd.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This is generally refered to as "faceted" searching ... you might find
descriptions of how to generate the "counts" per facet by searching for
that kwyword in the archive .. it also comes up now and then under the
subject of "category counts"

There is however a seperate issue that it sounds like you need help with
first: picking the facets, ie deciding that for one users search it makes
sense to use decade ranges, but for another persons search it makes sense
to use individual years.

This is really a problem of personal prefrence, and not something that can
be solved purely with technology.  Each field might need seperate rules to
determine what facets to provide (ie: dates might make sense to narrow by
decade untill only one decade is matched by the search, then narrowed by
years untill only one year is valid, then by month etc...  but meanwhile
"author name" faceting might make sense to use initial first, and then
switch to two letter name prefixes, etc...)

one thing to keep in mind when picking facets for dates or numeric values,
is that even though you might think you are helping your users by giving
them facets with an "even distribution" of documents, you may actual
confuse them if they are trying to get a sense of how the data is
distributed ... like showing someone a line plot graph where the axises
change half way down hte line.

if i give you these facets/counts for your search results...

  1901-1910  23
  1911-1920  25
  1921-1930  21
  1931-1940  26
  1941-1950  19
  1951-1960  22
  1961-1970  23
  1971-1990  20
  1991-2000  22
  2000-2006  7

...you might not notice that one of those ranges is 20 years.




: Date: Mon, 24 Jul 2006 09:17:55 +0200
: From: Martin Braun <mbraun@uni-hd.de>
: Reply-To: java-user@lucene.apache.org, mbraun@uni-hd.de
: To: java-user@lucene.apache.org
: Subject: drill-down heuristics WAS: Where to find drill-down examples
:     (source code)
:
: hi miles,
:
: thanks for the response.
: I think I didn't explain my Problem good enough.
:
: The harder problem for me is how to get the proposals for the
: refinement?  I have a date-range of 16xx to now, for about 4 bn. docs.
: So the number of found documents could be quite large. But the
: distribution of the dates could be very different form one query to another.
: I hope there is a better way than to collect all dates with HitIterator,
: and do statistics on the data?
:
: Is there something that could be done while indexing?
: What would be a high-performance heuristic?
:
: The same problem with other categories like the author: how to find good
: proposals for a given result set?
:
: >> I want to have something like:
: >>
: >> Refine by Date:
: >> * 1990-2000 (30 Docs)
: >> * 2001-2003 (200 Docs)
: >> * 2004-2006 (10 Docs)
: >>
: >> But not only DateRanges but also for other Categories.
: >>
: >> Does anybody knows where to find some Source Code, to get an Idea how to
: >> implement this?
: >> I think that's a useful property for a search engine, so are there any
: >> contributions for Lucene for that?
: >>
: >
: > If you want to do a refined search I'd put the original query in a
: > QueryFilter, which filters on the new search.
: >
: > http://lucene.apache.org/java/docs/api/org/apache/lucene/search/QueryFilter.html
: > Alternatively, since you appear to only want to refine on dates and
: > categories, you might want to put them in filters so they don't affect
: > the score, and leave the query as is. In which case you can use a
: > RangeQuery for the dates, and a wrap a TermQuery in a QueryFilter to
: > handle the categories.
: >
: > If you need multiple filters you can use the ChainedFilter class.
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:08:46 2006
Return-Path: <java-user-return-22212-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89440 invoked from network); 25 Jul 2006 01:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:08:46 -0000
Received: (qmail 85478 invoked by uid 500); 25 Jul 2006 01:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85443 invoked by uid 500); 25 Jul 2006 01:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85432 invoked by uid 99); 25 Jul 2006 01:08:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:08:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:08:40 -0700
Received: by py-out-1112.google.com with SMTP id d80so2916450pyd
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 18:08:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=OIGDdfBKpuRu3iugx10F8MwptoWowFfa6xsxDQZA6JsYwt51zJyQ9iC2mHaHYjj7rDHlA1zhcJepAyHxkQ3TNPjCQSMhoe8kjO/3HTCl0KvtTSpSlJkCpQdrvfE5Ra6LFde7OjPCfvEDuGPE3dH98KGJiI8n2jQk3kHlDNbJDPw=
Received: by 10.35.111.7 with SMTP id o7mr8540279pym;
        Mon, 24 Jul 2006 18:08:19 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 24 Jul 2006 18:08:19 -0700 (PDT)
Message-ID: <c68e39170607241808v566f4d90v18b995d7ec7c6588@mail.gmail.com>
Date: Mon, 24 Jul 2006 21:08:19 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: dash-words
In-Reply-To: <1153741901.28605.184.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/24/06, karl wettin <karl.wettin@gmail.com> wrote:
> > WordDelimiterFilter from Solr does this
>
> > It also has the false match problem you mention...
>
> Will it effect a phrase query?

Yes... adding some slop to phrase queries is the best way to deal with that.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:14:41 2006
Return-Path: <java-user-return-22213-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90298 invoked from network); 25 Jul 2006 01:14:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:14:41 -0000
Received: (qmail 90509 invoked by uid 500); 25 Jul 2006 01:14:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90474 invoked by uid 500); 25 Jul 2006 01:14:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90463 invoked by uid 99); 25 Jul 2006 01:14:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:14:35 -0700
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:14:33 -0700
Received: by py-out-1112.google.com with SMTP id d80so2917885pyd
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 18:14:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uiTMuqaeBA9wKdSF+CW+FXQG32r+yyvH/JU359WzsIlv1gTIoW7NN6D8A16VCao1kHhmCkQyEcv7E+86s+fVIJLKyGb4HE25BEZlHY+/fM3yIn9IXMxrIEPx0mYCJQ1/e8X1R1PssiQuoFlvNQFGbmFcZMlr7pHGYrg0xdzNJnQ=
Received: by 10.35.62.19 with SMTP id p19mr8550230pyk;
        Mon, 24 Jul 2006 18:14:12 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 24 Jul 2006 18:14:12 -0700 (PDT)
Message-ID: <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
Date: Mon, 24 Jul 2006 21:14:12 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: dash-words
In-Reply-To: <1153751420.28605.221.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
	 <1153747041.28605.215.camel@localhost>
	 <1153751420.28605.221.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/24/06, karl wettin <karl.wettin@gmail.com> wrote:
> On Mon, 2006-07-24 at 15:17 +0200, karl wettin wrote:
> > On Mon, 2006-07-24 at 15:15 +0200, karl wettin wrote:
> > > Yes, it effects PhraseQuery. Only "the x men are" will match.
> >
> > I'm stupid. Forget about it. I should of course analyze the query too.
>
> But still it fails on xmen. Could it have something to do with this:
>    WordDelimiterFilter(ts, 1,1,0,0,0);
>
> ?
>
> I can't figure out what the parameters does. ;)

Yes, it will fail without slop... I don't think there is a practical
way around that.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:16:45 2006
Return-Path: <java-user-return-22214-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90671 invoked from network); 25 Jul 2006 01:16:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:16:44 -0000
Received: (qmail 93484 invoked by uid 500); 25 Jul 2006 01:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93449 invoked by uid 500); 25 Jul 2006 01:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93438 invoked by uid 99); 25 Jul 2006 01:16:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:16:39 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:16:37 -0700
Received: by py-out-1112.google.com with SMTP id d80so2918418pyd
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 18:16:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IiFpw6OFuBrNLfl7gpbeMu4VNVkzbCH6cMBIfXJFtmal5op5D0qehI7ug/5to+Gt/okALV/O7xZOJJh+eQB+oOHJ9dH5pSV1VTA6X3ideuxn+QkETvUg0TiY5CQ+CsOVIXVDno+QpIX1x1KxUk+LGCPgT64r1Ady/5Uiid9ywOM=
Received: by 10.35.93.15 with SMTP id v15mr8546197pyl;
        Mon, 24 Jul 2006 18:16:16 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 24 Jul 2006 18:16:16 -0700 (PDT)
Message-ID: <c68e39170607241816w2217a7cbp8da301c4fbddf258@mail.gmail.com>
Date: Mon, 24 Jul 2006 21:16:16 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: dash-words
In-Reply-To: <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
	 <1153747041.28605.215.camel@localhost>
	 <1153751420.28605.221.camel@localhost>
	 <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> > I can't figure out what the parameters does. ;)

Hopefully the wiki link I gave before will explain the parameters.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:26:40 2006
Return-Path: <java-user-return-22215-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97998 invoked from network); 25 Jul 2006 01:26:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:26:40 -0000
Received: (qmail 5017 invoked by uid 500); 25 Jul 2006 01:26:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4984 invoked by uid 500); 25 Jul 2006 01:26:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4973 invoked by uid 99); 25 Jul 2006 01:26:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:26:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of charliecmo@gmail.com designates 64.233.184.231 as permitted sender)
Received: from [64.233.184.231] (HELO wr-out-0506.google.com) (64.233.184.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:26:33 -0700
Received: by wr-out-0506.google.com with SMTP id 37so710947wra
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 18:26:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:date:x-mailer:reply-to:x-priority:message-id:to:cc:subject:in-reply-to:references:mime-version:content-type:content-transfer-encoding:from;
        b=erMlwLwDEFtqXR0E3S2R0yfdyGC9eceBUQtOumYHKutNfSMeu8J0ZMVlubT1yyOq066irB2azf5eOUUm/w2lxlOs4ToEzN8K3X0A93owCed+0K6faeObsmsRplX7mBvDSSab8t1HLJIt0+i10A/8wsIAnv853qaXdkoStLMbTgA=
Received: by 10.54.84.1 with SMTP id h1mr4467404wrb;
        Mon, 24 Jul 2006 18:26:12 -0700 (PDT)
Received: from cmo.mshome.net ( [129.111.226.103])
        by mx.gmail.com with ESMTP id 12sm8458956wrl.2006.07.24.18.26.11;
        Mon, 24 Jul 2006 18:26:11 -0700 (PDT)
Date: Mon, 24 Jul 2006 20:26:04 -0500
X-Mailer: The Bat! (v3.5) Professional
Reply-To: Charlie Zhao <CharlieCMO@gmail.com>
X-Priority: 3 (Normal)
Message-ID: <115497556.20060724202604@gmail.com>
To: Erik Hatcher <erik@ehatchersolutions.com>
CC: java-user@lucene.apache.org
Subject: Re[4]: Span Query NLE
In-Reply-To: <271DE600-EABF-4690-B166-0FE1A789E9C0@ehatchersolutions.com>
References: <1003434929.20060723213110@gmail.com>
 <1153709403.28605.172.camel@localhost>
 <Pine.LNX.4.58.0607232349330.2591@hal.rescomp.berkeley.edu>
 <809151923.20060724104829@gmail.com>
 <271DE600-EABF-4690-B166-0FE1A789E9C0@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
From: Charlie <charliecmo@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erik,

"surround" query parser is surely interesting to me.

I really wish surround.txt could explain more in detail and add more
examples, especially in its test cases, it will be very instrumental
to add similar test cases like what
org.apache.lucene.queryParser.TestQueryParser offered and show
assertQueryEquals().

Anyways, so what's the proper interpretation of the following:

         3w(a?a or bb?, cc+)

can "surround" be nested

    3w(4n(a?a AND bb?) AND cc+)

And have you seen/written examples to actually use "surround" query
parser? (not the proprietary one you have mentioned.) I am currently
looking at the package, not much doc to read though.

-- 
Best regards,
 Charlie                            


---
Monday, July 24, 2006, 12:44:16 PM, you wrote:

> The "surround" query parser in Lucene's contrib area implements a  
> language to construct SpanQuery's.  Check out surround.txt in  
> Subversion:

>        
> <http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/surround/>

> I have written a query parser for a client that allows construction
> of very sophisticated queries including the full spectrum of  
> SpanQuery's, but the language is legacy and not something I'd wish  
> upon the general public, and the code is proprietary anyway.  It does
> take some time for someone unfamiliar with JavaCC, such as myself  
> initially, to implement a custom parser but it can be a huge success
> for a project to have this capability.

>         Erik






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:27:17 2006
Return-Path: <java-user-return-22216-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99082 invoked from network); 25 Jul 2006 01:27:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:27:17 -0000
Received: (qmail 7636 invoked by uid 500); 25 Jul 2006 01:27:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7475 invoked by uid 500); 25 Jul 2006 01:27:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7464 invoked by uid 99); 25 Jul 2006 01:27:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:27:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:27:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AC0025B77B; Mon, 24 Jul 2006 18:26:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A81877F403
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 18:26:50 -0700 (PDT)
Date: Mon, 24 Jul 2006 18:26:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Architecture for indexing/searching mailing list archives
In-Reply-To: <359a92830607240625l5eac0b5ct7c9929da2470f0e4@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607241822290.29780@hal.rescomp.berkeley.edu>
References: <44C48651.303@infohazard.org> <359a92830607240625l5eac0b5ct7c9929da2470f0e4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I suspect that 3 is actually better. You can use CachingWrapperFilter to

I'm not so sure of that ... if you've got thousands of mailing lists, some
of which are used very infrequently, and you don't *ever* need to search
more then one at a time then having a seperate index for each will help
reduce the amount of "chachable" info you have to throw away every time
you get a new message.

Using just the Lucene mailing lists as an example: the FieldCache of the
Date field is something that's going to be very handy for sorting messages
by date ... if java-user/java-dev/java-commits/general/c-dev/c-user/etc.
are all all in one index, then any new message in any of those lists is
going to invalidate the FieldCache.  if you put them in seperate indexes
however, then a slew of mail to the java-user list doesn't affect the
java-dev list's date FieldCache.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:46:33 2006
Return-Path: <java-user-return-22217-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3716 invoked from network); 25 Jul 2006 01:46:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:46:33 -0000
Received: (qmail 20626 invoked by uid 500); 25 Jul 2006 01:46:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20589 invoked by uid 500); 25 Jul 2006 01:46:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20578 invoked by uid 99); 25 Jul 2006 01:46:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:46:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:46:27 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 1C6065B77A; Mon, 24 Jul 2006 18:46:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 111DE7F403
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 18:46:07 -0700 (PDT)
Date: Mon, 24 Jul 2006 18:46:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: queryParser and sorting question
In-Reply-To: <36cc01c6af23$cd481fd0$1e8e10ac@ecommerce.tspain.local>
Message-ID: <Pine.LNX.4.58.0607241842270.29780@hal.rescomp.berkeley.edu>
References: <20060227093602.17363.qmail@web50313.mail.yahoo.com>
 <03d001c63b8e$ae80f6c0$1e8e10ac@yacom.ofi> <36cc01c6af23$cd481fd0$1e8e10ac@ecommerce.tspain.local>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) subclass DefaultSimilarity so that tf/idf allways return either
0 or 1 (more info on this can be found in the archives).

2) sort on score, and then your specific field as a secondary sort.

Of the top of my head, that should give you what you want ... but there
may be something else about the score that you have to tweak with the
Similarity class ... Searcher.explain will help you check that you get
consistent scores in all of your potential cases.

: Date: Mon, 24 Jul 2006 15:19:32 +0200
: From: Enrique Lamas <enrique.lamas@corp.ya.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: queryParser and sorting question
:
: Hi,
: I'm, trying to execute a query to find some words, and I'm using
:
: QueryParser queryParser =3D new MultiFieldQueryParser(new String[] {"tags=
",
: "title"}, ProcessConstants.analyzer);
: Query query =3D queryParser.parse("word1 word2 word3");
:
: I want to show the results sorted like this:
:
: first, documents containing all of the three words, and this documents
: sorted by one of the index fields.
: Next, documents containing two of the words, also sorted by the same fiel=
d
: like before.
: And so on.
:
: =BFHow can I do this?
:
: I wold like to avoid executing several queries of this kind:
: "word1 + word2 + word3"
: "word1 + word2 - word3"
: "word1 - word2 + word3"
: "word1 - word2 - word3"
: .....
:
: Thanks
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 01:48:30 2006
Return-Path: <java-user-return-22218-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4283 invoked from network); 25 Jul 2006 01:48:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 01:48:30 -0000
Received: (qmail 23181 invoked by uid 500); 25 Jul 2006 01:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23153 invoked by uid 500); 25 Jul 2006 01:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23142 invoked by uid 99); 25 Jul 2006 01:48:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:48:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 18:48:24 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F1FB25B77A; Mon, 24 Jul 2006 18:48:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id EBA307F403
	for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 18:48:03 -0700 (PDT)
Date: Mon, 24 Jul 2006 18:48:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: index articles with groups
In-Reply-To: <20060724184934.99444.qmail@web86909.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.58.0607241846550.29780@hal.rescomp.berkeley.edu>
References: <20060724184934.99444.qmail@web86909.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:  Then if I search for a word which is present in article1 and article 2,
: i'd like to retrieve only one result because they are in the same group.

if you only want one result back per group, then odds are you want one
document per group -- nad index the text from all of the articles in that
group text in that single document.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 02:06:20 2006
Return-Path: <java-user-return-22219-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8917 invoked from network); 25 Jul 2006 02:06:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 02:06:20 -0000
Received: (qmail 35256 invoked by uid 500); 25 Jul 2006 02:06:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34562 invoked by uid 500); 25 Jul 2006 02:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34551 invoked by uid 99); 25 Jul 2006 02:06:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:06:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of namityadav@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 19:06:14 -0700
Received: by nf-out-0910.google.com with SMTP id o63so81414nfa
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 19:05:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=k6aAIBAiKlJSnGZejJ2Balaab+9uTvX+9UTdDCzoYBZMFz2ymsw6nd4dDoKx0HpByOcre9l+3XuurDsQ6jT3ExBRzc0tHB2uKG3Chu73Lnf2OEFzdoYURSP/G1wSyDgb+oryhHC0el3xCqudrl9MjYdyf0cUhqvz/PBoIlbyXtI=
Received: by 10.78.170.17 with SMTP id s17mr2042544hue;
        Mon, 24 Jul 2006 19:05:52 -0700 (PDT)
Received: by 10.78.100.7 with HTTP; Mon, 24 Jul 2006 19:05:52 -0700 (PDT)
Message-ID: <f0d8e9dd0607241905w478d3432r4c538f75d535d5f@mail.gmail.com>
Date: Mon, 24 Jul 2006 19:05:52 -0700
From: "Namit Yadav" <namityadav@gmail.com>
To: java-user@lucene.apache.org
Subject: Index Rows as Documents? Help me design a solution
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My question might be very easy for you Lucene experts. But after going
through the Lucene documentation / example, I haven't been able to
figure out how to solve this problem. I'll be really grateful if
someone can help me get a starting point here.

Our application tracks SMSes sent from a particular phone number. We
have gigs of logs that (Lets say) look like this

SomeUselessData1#SMSID#SomeData1#PhoneNumber
SomeUselessData2#SMSID#SomeData2
SomeUselessData3#SMSID#SomeData3
SomeUselessData4#SMSID#SomeData4
...
...

Now our search will obviously be done on the basis of the phone
number. So we need indexing so that we can:

1 List SMSIDs of all the SMSes that a phone number had sent (Each SMS
message will have a globally unique ID)
2 List SomeData1, SomeData2, SomeData3 and SomeData4 for a given SMSID.

How can I do this efficiently?

I wrote a sample piece of code where each row was a Document, and
PhoneNumber, SMSID and SomeData columns were Fields. The indexing was
taking much more than minutes for a 1 MB log file, so I realized that
I didn't do it right (You can guess how 'not' comfortable I am with
Lucene at present). I would expect to be able to index at least a of
GB of logs within 1 or 2 minutes.

Can someone please point me to the right examples, help me understand
what my Documents / Fields / Analyzers should be or help me design a
solution?

Thanks in advance

ps. I just now got Lucene in Action. Is there any example (or similar
concept) explained in the book? From what I see, none of the examples
really help me much.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 03:39:15 2006
Return-Path: <java-user-return-22220-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25069 invoked from network); 25 Jul 2006 03:39:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 03:39:14 -0000
Received: (qmail 88514 invoked by uid 500); 25 Jul 2006 03:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88482 invoked by uid 500); 25 Jul 2006 03:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88471 invoked by uid 99); 25 Jul 2006 03:39:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 20:39:09 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.53] (HELO web86901.mail.ukl.yahoo.com) (217.12.13.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 24 Jul 2006 20:39:08 -0700
Received: (qmail 95632 invoked by uid 60001); 25 Jul 2006 03:38:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=J4tgJy7hXAKT8oKhhp9yu6wOXFGMs1RARWe85liLc57hVldvnd3j3pMHMIKet4iKFRXO9n2QbImavFFQcnj9e3pl1qDSKjyZTgXR8ZH+I3e++FCunpysJkhc3mW3S8zLAQWIJmeKypzRaGunoW9RHXZtiK2ndpoXrozgSPMRUus=  ;
Message-ID: <20060725033846.95630.qmail@web86901.mail.ukl.yahoo.com>
Received: from [193.253.204.236] by web86901.mail.ukl.yahoo.com via HTTP; Tue, 25 Jul 2006 05:38:46 CEST
Date: Tue, 25 Jul 2006 05:38:46 +0200 (CEST)
From: John john <ze_barbary@yahoo.fr>
Subject: RE : Re: index articles with groups
To: java-user@lucene.apache.org
In-Reply-To: <1153768306.28605.239.camel@localhost>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1394075125-1153798726=:93642"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1394075125-1153798726=:93642
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Here more details because it seems that I did not give enough information :)
 
 I want to index my messsage board and each topic contains several posts. So my idea was to index each post with 3 fields (ID, title, post_content) 
 
 then I can search in each post and have a link with the title of the topic. However i got a problem with this method.
 Imagine I have a topic named "Linux better that Windows?" which contains 10 posts. I want to retrieve only one post from that topic if someone is searching topics which contains linux. You know what I mean?

karl wettin <karl.wettin@gmail.com> a crit : On Mon, 2006-07-24 at 20:49 +0200, John john wrote:

>  article1, article2 and article3 are in the group1
>  article4 and article5 are in the group2
>  
>  Then if I search for a word which is present in article1 and article
> 2, i'd like to retrieve only one result because they are in the same
> group.

This sounds very suspicious. My guts tell me you are attacking your
problem -- whatever it might be -- the wrong way. 

But OK, which one of the documents would you want as a result? Any of
them? Create a HitCollector, and if the the field with the group is
already collected, ignore the current document.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
 Dcouvrez un nouveau moyen de poser toutes vos questions quelque soit le sujet ! Yahoo! Questions/Rponses pour partager vos connaissances, vos opinions et vos expriences. Cliquez ici. 
--0-1394075125-1153798726=:93642--

From java-user-return-22221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 05:22:38 2006
Return-Path: <java-user-return-22221-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43110 invoked from network); 25 Jul 2006 05:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 05:22:38 -0000
Received: (qmail 76195 invoked by uid 500); 25 Jul 2006 05:22:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76156 invoked by uid 500); 25 Jul 2006 05:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76145 invoked by uid 99); 25 Jul 2006 05:22:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 22:22:32 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paulo.silveira@gmail.com designates 64.233.166.179 as permitted sender)
Received: from [64.233.166.179] (HELO py-out-1112.google.com) (64.233.166.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Jul 2006 22:22:31 -0700
Received: by py-out-1112.google.com with SMTP id d80so2980892pyd
        for <java-user@lucene.apache.org>; Mon, 24 Jul 2006 22:22:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition:x-google-sender-auth;
        b=c4fLfrL/wzThVsvc2QqdHGEhr9EHrujHS+aky3xe3RF8XoTMeXg1HOvNy+IqRVrecaNJHwxGkJ+KTzDOycf//M0Wmt8jJuzyy+XEqxIJ6RmwBBiKVutXj/WliNMQnUJ6PE9s5T9lplLokbHlGFYhXGwZlgglg9x6dgae7V2n4pA=
Received: by 10.35.89.10 with SMTP id r10mr8966899pyl;
        Mon, 24 Jul 2006 22:22:08 -0700 (PDT)
Received: by 10.35.64.7 with HTTP; Mon, 24 Jul 2006 22:22:08 -0700 (PDT)
Message-ID: <6026e8b0607242222w4f874365gba2b0831da0d639c@mail.gmail.com>
Date: Tue, 25 Jul 2006 02:22:08 -0300
From: "Paulo Silveira" <paulo.silveira@caelum.com.br>
Sender: paulo.silveira@gmail.com
To: java-user@lucene.apache.org
Subject: MultiFieldQueryParser.parse deprecated. What can I use?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Google-Sender-Auth: 6e2fd2bf261b0ed4
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello

What can I use as a drop in replacement? I mean, about the (String,
String[], Analyzer) one.

The 1.9.1 javadoc says to use QueryParser.parse, but I need to
construct the query first. Any util method or do I need to do the for?
If this is the solution, maybe it is more elegant to use the for to
create a big BooleanQuery, .adding new BooleanClause.Occur.Must
clauses each loop?

thanks

 --
Paulo E. A. Silveira
Caelum Ensino e Solu=E7=F5es em Java
http://www.caelum.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 07:08:01 2006
Return-Path: <java-user-return-22222-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68466 invoked from network); 25 Jul 2006 07:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 07:08:00 -0000
Received: (qmail 84958 invoked by uid 500); 25 Jul 2006 07:07:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84871 invoked by uid 500); 25 Jul 2006 07:07:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84860 invoked by uid 99); 25 Jul 2006 07:07:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:07:54 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.151.11.162] (HELO smtp.ya.com) (62.151.11.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:07:54 -0700
Received: from [62.151.16.240] (helo=elamas)
	by smtp.ya.com with smtp id 1G5H0t-00060X-00
	for java-user@lucene.apache.org; Tue, 25 Jul 2006 09:07:31 +0200
Message-ID: <39c901c6afb9$281f7a80$1e8e10ac@ecommerce.tspain.local>
From: "Enrique Lamas" <enrique.lamas@corp.ya.com>
To: <java-user@lucene.apache.org>
References: <20060227093602.17363.qmail@web50313.mail.yahoo.com> <03d001c63b8e$ae80f6c0$1e8e10ac@yacom.ofi> <36cc01c6af23$cd481fd0$1e8e10ac@ecommerce.tspain.local> <Pine.LNX.4.58.0607241842270.29780@hal.rescomp.berkeley.edu>
Subject: Re: queryParser and sorting question
Date: Tue, 25 Jul 2006 09:08:40 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2869
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Chris, I'll try that.

Bye

----- Original Message ----- 
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: Tuesday, July 25, 2006 3:46 AM
Subject: Re: queryParser and sorting question



1) subclass DefaultSimilarity so that tf/idf allways return either
0 or 1 (more info on this can be found in the archives).

2) sort on score, and then your specific field as a secondary sort.

Of the top of my head, that should give you what you want ... but there
may be something else about the score that you have to tweak with the
Similarity class ... Searcher.explain will help you check that you get
consistent scores in all of your potential cases.

: Date: Mon, 24 Jul 2006 15:19:32 +0200
: From: Enrique Lamas <enrique.lamas@corp.ya.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: queryParser and sorting question
:
: Hi,
: I'm, trying to execute a query to find some words, and I'm using
:
: QueryParser queryParser = new MultiFieldQueryParser(new String[] {"tags",
: "title"}, ProcessConstants.analyzer);
: Query query = queryParser.parse("word1 word2 word3");
:
: I want to show the results sorted like this:
:
: first, documents containing all of the three words, and this documents
: sorted by one of the index fields.
: Next, documents containing two of the words, also sorted by the same field
: like before.
: And so on.
:
: How can I do this?
:
: I wold like to avoid executing several queries of this kind:
: "word1 + word2 + word3"
: "word1 + word2 - word3"
: "word1 - word2 + word3"
: "word1 - word2 - word3"
: .....
:
: Thanks
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 07:12:11 2006
Return-Path: <java-user-return-22223-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69170 invoked from network); 25 Jul 2006 07:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 07:12:10 -0000
Received: (qmail 88976 invoked by uid 500); 25 Jul 2006 07:12:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88936 invoked by uid 500); 25 Jul 2006 07:12:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88924 invoked by uid 99); 25 Jul 2006 07:12:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:12:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:12:03 -0700
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k6P7BQYW011311
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 09:11:26 +0200
Received: from 127.0.0.1 (AVG SMTP 7.1.394 [268.10.4/396]); Tue, 25 Jul 2006 09:11:25 +0200
Message-ID: <44C5C41D.3080301@isb-sib.ch>
Date: Tue, 25 Jul 2006 09:11:25 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Precedence in PrecedenceQueryParser
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-ng-MailScanner-Information: Please contact the ISP for more information
X-sib-ng-MailScanner: Found to be clean
X-sib-ng-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The query "foo NOT bar AND baz" seems to be interpreted as "+foo -(+bar 
+baz)" (using default operator AND). Is this a bug, or a feature?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 07:25:59 2006
Return-Path: <java-user-return-22224-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79284 invoked from network); 25 Jul 2006 07:25:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 07:25:58 -0000
Received: (qmail 3375 invoked by uid 500); 25 Jul 2006 07:25:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3342 invoked by uid 500); 25 Jul 2006 07:25:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3327 invoked by uid 99); 25 Jul 2006 07:25:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:25:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:25:49 -0700
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k6P7PMYW012902
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 09:25:22 +0200
Received: from 127.0.0.1 (AVG SMTP 7.1.394 [268.10.4/396]); Tue, 25 Jul 2006 09:25:21 +0200
Message-ID: <44C5C761.7040402@isb-sib.ch>
Date: Tue, 25 Jul 2006 09:25:21 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Precedence in PrecedenceQueryParser (2)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-ng-MailScanner-Information: Please contact the ISP for more information
X-sib-ng-MailScanner: Found to be clean
X-sib-ng-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The query "foo bar OR baz" seems to be interpreted as "+foo bar baz", even 
when using default operator AND! "foo AND bar OR baz" on the other hand is 
interpreted as "(+foo +bar) baz", as expected.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 07:28:02 2006
Return-Path: <java-user-return-22225-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79975 invoked from network); 25 Jul 2006 07:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 07:28:01 -0000
Received: (qmail 7858 invoked by uid 500); 25 Jul 2006 07:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7825 invoked by uid 500); 25 Jul 2006 07:27:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7626 invoked by uid 99); 25 Jul 2006 07:27:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:27:52 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.43 as permitted sender)
Received: from [80.67.18.43] (HELO smtprelay05.ispgateway.de) (80.67.18.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 00:27:50 -0700
Received: (qmail 28967 invoked from network); 25 Jul 2006 07:27:28 -0000
Received: from unknown (HELO p5496f6d6.dip.t-dialin.net) ([pbs]695637@[84.150.246.214])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay05.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 25 Jul 2006 07:27:28 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
Date: Tue, 25 Jul 2006 09:27:30 +0200
User-Agent: KMail/1.8.2
References: <f0d8e9dd0607241905w478d3432r4c538f75d535d5f@mail.gmail.com>
In-Reply-To: <f0d8e9dd0607241905w478d3432r4c538f75d535d5f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607250927.30391@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Dienstag 25 Juli 2006 04:05, Namit Yadav wrote:

> 1 List SMSIDs of all the SMSes that a phone number had sent (Each SMS
> message will have a globally unique ID)
> 2 List SomeData1, SomeData2, SomeData3 and SomeData4 for a given SMSID.
>
> How can I do this efficiently?

Short answer: use a relational database, not Lucene. Why do want to use 
Lucene for this?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 08:11:55 2006
Return-Path: <java-user-return-22226-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95201 invoked from network); 25 Jul 2006 08:11:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 08:11:54 -0000
Received: (qmail 67599 invoked by uid 500); 25 Jul 2006 08:11:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67141 invoked by uid 500); 25 Jul 2006 08:11:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67129 invoked by uid 99); 25 Jul 2006 08:11:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:11:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 01:11:45 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4594730EFCD5; Tue, 25 Jul 2006 04:11:25 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 0D9DD30EFCD4
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 04:11:23 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44C5C41D.3080301@isb-sib.ch>
References: <44C5C41D.3080301@isb-sib.ch>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <88EFA28D-C6B5-4C6E-AD59-428A6F8FE15A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Precedence in PrecedenceQueryParser
Date: Tue, 25 Jul 2006 04:11:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jul 25, 2006, at 3:11 AM, Eric Jain wrote:
> The query "foo NOT bar AND baz" seems to be interpreted as "+foo - 
> (+bar +baz)" (using default operator AND). Is this a bug, or a  
> feature?

It's been a while since I've touched PrecedenceQueryParser, but I  
recall there still being some issues with it.  I agree that this  
seems like a bug and the NOT should have a higher precedence than AND.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 10:48:09 2006
Return-Path: <java-user-return-22227-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42514 invoked from network); 25 Jul 2006 10:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 10:48:09 -0000
Received: (qmail 74885 invoked by uid 500); 25 Jul 2006 10:48:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74867 invoked by uid 500); 25 Jul 2006 10:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74855 invoked by uid 99); 25 Jul 2006 10:48:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:48:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [4.17.250.5] (HELO l98uppx1.hewitt.com) (4.17.250.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 03:48:00 -0700
Received: from linkap11.hewitt.com (linkap11.hewitt.com [10.20.63.2])
	by l98uppx1.hewitt.com (8.13.6/8.12.11) with ESMTP id k6PAkPIZ009223
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 05:47:39 -0500 (CDT)
Received: from 10.20.63.62 by linkap11.hewitt.com with ESMTP (Tumbleweed
 MMS SMTP Relay); Tue, 25 Jul 2006 05:47:15 -0500
X-Server-Uuid: 63D4A988-65CA-4496-8491-BC1250F8D64A
To: java-user@lucene.apache.org
Subject: Grouping over multiple fields
MIME-Version: 1.0
X-Mailer: Lotus Notes 652HF1094 September 19, 2005
Message-ID: <OFE265D408.E2374770-ON652571B6.003A0E70-652571B6.003A8752@hewitt.com>
From: "Krishnendra Nandi" <krishnendra.nandi@hewitt.com>
Date: Tue, 25 Jul 2006 16:08:51 +0530
X-MIMETrack: S/MIME Sign by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 07/25/2006 04:09:17 PM, Serialize by Notes Client on Krishnendra
 Nandi/Gurgaon/Hewitt Associates(652HF1094|September 19, 2005) at
 07/25/2006 04:09:17 PM, Serialize complete at 07/25/2006 04:09:17 PM,
 S/MIME Sign failed at 07/25/2006 04:09:17 PM: The cryptographic key was
 not found, Serialize by Router on LINTNG1/National/Hewitt
 Associates(652HF396|September 21, 2004) at 07/25/2006 05:47:15 AM,
 Serialize complete at 07/25/2006 05:47:15 AM
X-WSS-ID: 68DB29F72GW462787-63-01
Content-Type: multipart/alternative;
 boundary="=_alternative 003A874D652571B6_="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 003A874D652571B6_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi All,

Can anybody help me out on this ..?

I have to search for a particular value over multiple fields and need to 
know if grouping is allowed over multiple fields 

eg.

<some query>    AND   ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish )

Introducing paranthesis "(" is giving me lexical error 

Thanks and Regards
Krishnendra Nandi
 
The information contained in this e-mail and any accompanying documents 
may contain information that is confidential or otherwise protected 
from disclosure. If you are not the intended recipient of this message, 
or if this message has been addressed to you in error, please 
immediately alert the sender by reply e-mail and then delete this message, 
including any attachments. Any dissemination, distribution or other use of 
the contents of this message by anyone other than the intended recipient 
is strictly prohibited.


--=_alternative 003A874D652571B6_=--


From java-user-return-22228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 11:00:28 2006
Return-Path: <java-user-return-22228-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48047 invoked from network); 25 Jul 2006 11:00:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 11:00:28 -0000
Received: (qmail 95295 invoked by uid 500); 25 Jul 2006 11:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95269 invoked by uid 500); 25 Jul 2006 11:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95258 invoked by uid 99); 25 Jul 2006 11:00:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 04:00:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.61] (HELO randymail-a7.dreamhost.com) (208.97.132.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 04:00:20 -0700
Received: from [192.168.1.8] (unknown [82.153.237.45])
	by randymail-a7.dreamhost.com (Postfix) with ESMTP id 055FDB6F13
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 03:59:58 -0700 (PDT)
Message-ID: <44C5F8DC.2060807@magpie.net>
Date: Tue, 25 Jul 2006 11:56:28 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Grouping over multiple fields
References: <OFE265D408.E2374770-ON652571B6.003A0E70-652571B6.003A8752@hewitt.com>
In-Reply-To: <OFE265D408.E2374770-ON652571B6.003A0E70-652571B6.003A8752@hewitt.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Krishnendra Nandi wrote:

>Can anybody help me out on this ..?
>
>I have to search for a particular value over multiple fields and need to 
>know if grouping is allowed over multiple fields 
>
>eg.
>
><some query>    AND   ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish )
>
>Introducing paranthesis "(" is giving me lexical error 
>  
>

I don't see anything wrong with this, but maybe the query parser doesn't 
like it. You could construct it programatically:

1. Use the QueryParser on <some query>
2. Create TermQuerys for AUTHOR_NAME and EMPLOYEE_NAME
3. Construct the necessary BooleanQuery

If it is the query parser and you need free text queries take a look at 
the JavaCC source and find the bit that handles nested queries and see 
why it doesn't like your field restrictions.




Miles

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 12:34:27 2006
Return-Path: <java-user-return-22229-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76895 invoked from network); 25 Jul 2006 12:34:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 12:34:27 -0000
Received: (qmail 47350 invoked by uid 500); 25 Jul 2006 12:34:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47318 invoked by uid 500); 25 Jul 2006 12:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47307 invoked by uid 99); 25 Jul 2006 12:34:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 05:34:20 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 05:34:19 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D00594476 for java-user@lucene.apache.org; Tue, 25 Jul 2006 14:33:57 +0200
Subject: Re: dash-words
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170607241816w2217a7cbp8da301c4fbddf258@mail.gmail.com>
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
	 <1153747041.28605.215.camel@localhost>
	 <1153751420.28605.221.camel@localhost>
	 <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
	 <c68e39170607241816w2217a7cbp8da301c4fbddf258@mail.gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 25 Jul 2006 14:33:49 +0200
Message-Id: <1153830830.28605.255.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-24 at 21:16 -0400, Yonik Seeley wrote:

> > > I can't figure out what the parameters does. ;)
> 
> Hopefully the wiki link I gave before will explain the parameters. 

Oh, I so totally missed that. Do you want me to java-doc it up and send
you the patch?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 13:11:55 2006
Return-Path: <java-user-return-22230-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90225 invoked from network); 25 Jul 2006 13:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 13:11:55 -0000
Received: (qmail 25249 invoked by uid 500); 25 Jul 2006 13:11:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25225 invoked by uid 500); 25 Jul 2006 13:11:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25214 invoked by uid 99); 25 Jul 2006 13:11:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 06:11:48 -0700
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.137] (HELO web36402.mail.mud.yahoo.com) (209.191.85.137)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Jul 2006 06:11:47 -0700
Received: (qmail 95390 invoked by uid 60001); 25 Jul 2006 13:11:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=x2vakOrwkzKNy1qtZGVM/SQt0l0yCKBABCnINUXNjaxB/YQ6tAZ59N7Ro1OX8u7gRg67frqFcX6hChCPjqPg7IxnW9NBLbOQ9dgaKWlmaDW+4n/Yo91GU6IvOLOiojN14/3i/I7L7I8LUde/OM89SyFUo6ElqDcGkRI4rm1GHoE=  ;
Message-ID: <20060725131126.95388.qmail@web36402.mail.mud.yahoo.com>
Received: from [208.210.219.129] by web36402.mail.mud.yahoo.com via HTTP; Tue, 25 Jul 2006 06:11:26 PDT
Date: Tue, 25 Jul 2006 06:11:26 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: IndexReader / IndexWriter Synchronization
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1113665849-1153833086=:93953"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1113665849-1153833086=:93953
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi,
   
  I went through the IndexModifier class. It says that - Although an instance of this class can be used from more than one thread, you will not get the best performance. You might want to use IndexReader and IndexWriter directly for that (but you will need to care about synchronization yourself then).
   
  If I use IndexReader and IndexWriter class for inserts/updates, then I need to handle the threading issues myself. Is there any other class (even in nightly build)  that I can use without having to take care of synchronization.
   
  Any help/pointers would be appreciated.
   
  Thanks,
  -Vasu

 __________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1113665849-1153833086=:93953--

From java-user-return-22231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 13:40:17 2006
Return-Path: <java-user-return-22231-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3199 invoked from network); 25 Jul 2006 13:40:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 13:40:17 -0000
Received: (qmail 59886 invoked by uid 500); 25 Jul 2006 13:40:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59856 invoked by uid 500); 25 Jul 2006 13:40:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59845 invoked by uid 99); 25 Jul 2006 13:40:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 06:40:10 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 06:40:10 -0700
Received: by py-out-1112.google.com with SMTP id d80so3116402pyd
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 06:39:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DRTItIJ6YZW7D+nEJo+cUUb4dp/b3qI9AIT4RnxWvAtfRbt0sVsJxzm0gyO1XqRQ8Cc1OQMrQUH7DTLxIB0MD2N9OHBF+XYSj6ItOv+3zYvWOE43/u1PmvYLueUyF2TRdqq5lht2SDulH1LxhWPvePXIgnybCXTVUlZi5krLyXM=
Received: by 10.35.70.2 with SMTP id x2mr9495692pyk;
        Tue, 25 Jul 2006 06:39:49 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 25 Jul 2006 06:39:48 -0700 (PDT)
Message-ID: <359a92830607250639h6dbf57b5n400a71b068bb160@mail.gmail.com>
Date: Tue, 25 Jul 2006 09:39:48 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
In-Reply-To: <f0d8e9dd0607241905w478d3432r4c538f75d535d5f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_80271_23733543.1153834788674"
References: <f0d8e9dd0607241905w478d3432r4c538f75d535d5f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_80271_23733543.1153834788674
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Indexing 1M of logs shouldn't take minutes, so  you're probably right.

A problem I've seen is opening/indexing/closing your index writer too often.
You should do something like... (really bad pseudo code here)

IndexWriter IW = new IndexWriter(....);
for (lots and lots and lots of records) {
   IW.addDocument();
}

IW.optimize();
IW.close();


Others have had a problem where they open/write/close the index writer for
EACH document, which is painfully slow.

Also, you might play around with IndexWriter.setMergeFactor and
setMaxBufferedDocs. If you set them too high, you'll run out of memory, but
they can make a difference in now fast your index is built....


If none of this is relevant, can you post a bit of (perhaps pseudo) code?

Best
Erick

------=_Part_80271_23733543.1153834788674--

From java-user-return-22232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 14:09:15 2006
Return-Path: <java-user-return-22232-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12101 invoked from network); 25 Jul 2006 14:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 14:09:15 -0000
Received: (qmail 35377 invoked by uid 500); 25 Jul 2006 14:09:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35344 invoked by uid 500); 25 Jul 2006 14:09:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35332 invoked by uid 99); 25 Jul 2006 14:09:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 07:09:07 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 07:09:07 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G5NaY-0008PV-SL
	for java-user@lucene.apache.org; Tue, 25 Jul 2006 07:08:46 -0700
Message-ID: <5485639.post@talk.nabble.com>
Date: Tue, 25 Jul 2006 06:49:07 -0700 (PDT)
From: headhunter <jleimbach@conet.de>
To: java-user@lucene.apache.org
Subject: Limit number of search results
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: jleimbach@conet.de
X-Nabble-From: headhunter <jleimbach@conet.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello,

I am looking for a way to limit the number of search results I retrieve when
searching.

I am only interested in (let's say) the first ten hits of a query.. maybe I
want to look at hits ten..twenty to, but usually only the first results are
important. 

Right now lucene searches through the entire index, returning way more than
the desired ten documents. 

Any way to limit this?

Thanks for answers,
Johannes
-- 
View this message in context: http://www.nabble.com/Limit-number-of-search-results-tf1998377.html#a5485639
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 14:22:40 2006
Return-Path: <java-user-return-22233-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16662 invoked from network); 25 Jul 2006 14:22:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 14:22:40 -0000
Received: (qmail 65418 invoked by uid 500); 25 Jul 2006 14:22:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65400 invoked by uid 500); 25 Jul 2006 14:22:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65389 invoked by uid 99); 25 Jul 2006 14:22:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 07:22:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 07:22:32 -0700
Received: by py-out-1112.google.com with SMTP id d80so3129907pyd
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 07:22:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=niSxmlUTqHWsP/wl1j8jaGxU41bP3xUY+Gbk9ZoJPQUQ9k9Y77V0nov9pDlps34bEJ46otie5X2DnmywSY4HSp/0vHxSruNqAAz4TBm18riSheD2zStSZ2LyMZXE/953L9D8t05Y76nLNb157WlKIhbFpGGspfOPqE3eBTqh154=
Received: by 10.35.100.6 with SMTP id c6mr9552765pym;
        Tue, 25 Jul 2006 07:22:07 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 25 Jul 2006 07:22:06 -0700 (PDT)
Message-ID: <c68e39170607250722t1f9406d9x7bda209c75b48a9f@mail.gmail.com>
Date: Tue, 25 Jul 2006 10:22:06 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: dash-words
In-Reply-To: <1153830830.28605.255.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
	 <1153747041.28605.215.camel@localhost>
	 <1153751420.28605.221.camel@localhost>
	 <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
	 <c68e39170607241816w2217a7cbp8da301c4fbddf258@mail.gmail.com>
	 <1153830830.28605.255.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/25/06, karl wettin <karl.wettin@gmail.com> wrote:
> On Mon, 2006-07-24 at 21:16 -0400, Yonik Seeley wrote:
>
> > > > I can't figure out what the parameters does. ;)
> >
> > Hopefully the wiki link I gave before will explain the parameters.
>
> Oh, I so totally missed that. Do you want me to java-doc it up and send
> you the patch?

Sure!

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 15:02:34 2006
Return-Path: <java-user-return-22234-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31064 invoked from network); 25 Jul 2006 15:02:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:02:34 -0000
Received: (qmail 63502 invoked by uid 500); 25 Jul 2006 15:02:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63472 invoked by uid 500); 25 Jul 2006 15:02:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63461 invoked by uid 99); 25 Jul 2006 15:02:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:02:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.98] (HELO randymail-a2.dreamhost.com) (208.97.132.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:02:26 -0700
Received: from [192.168.1.132] (unknown [82.153.237.45])
	by randymail-a2.dreamhost.com (Postfix) with ESMTP id BC688EE7BF
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 08:02:03 -0700 (PDT)
Message-ID: <44C63199.6040000@magpie.net>
Date: Tue, 25 Jul 2006 15:58:33 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
References: <5485639.post@talk.nabble.com>
In-Reply-To: <5485639.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

headhunter wrote:

>I am looking for a way to limit the number of search results I retrieve when
>searching.
>
>I am only interested in (let's say) the first ten hits of a query.. maybe I
>want to look at hits ten..twenty to, but usually only the first results are
>important. 
>
>Right now lucene searches through the entire index, returning way more than
>the desired ten documents. 
>
>Any way to limit this?
>  
>

Lucene only loads the first 100 hits from the index, the rest of the 
results are lazy loaded. I don't think you can reduce this number 
without changing the code.




Miles

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 15:24:44 2006
Return-Path: <java-user-return-22235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41776 invoked from network); 25 Jul 2006 15:24:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:24:43 -0000
Received: (qmail 38112 invoked by uid 500); 25 Jul 2006 15:24:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37867 invoked by uid 500); 25 Jul 2006 15:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37795 invoked by uid 99); 25 Jul 2006 15:24:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:24:35 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:24:34 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k6PFOCZ4019834
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 17:24:12 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 7AFFE8B8F7
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 17:24:11 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 14850-05 for <java-user@lucene.apache.org>;
 Tue, 25 Jul 2006 17:24:10 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 7EB8B8B8EF
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 17:24:10 +0200 (CEST)
Message-ID: <44C6379A.40000@uni-hd.de>
Date: Tue, 25 Jul 2006 17:24:10 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: dash-words
References: <1153705956.28605.144.camel@localhost>	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>	 <1153741901.28605.184.camel@localhost>	 <1153746947.28605.213.camel@localhost>	 <1153747041.28605.215.camel@localhost>	 <1153751420.28605.221.camel@localhost> <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
In-Reply-To: <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Yonik,

>> I can't figure out what the parameters does. ;)
> 
> Yes, it will fail without slop... I don't think there is a practical
> way around that.

I am trying to analyze your WordDelimiterFilter.

If I have x-men, after analyzing (with catenateAll) I get this:


 Analzying "The x-men story"
	de.unihd.ub.ftsearch.WordIndexAnalyzer:
		[the] [x] [men] [xmen] [story]


1: [the:0->3:word]
2: [x:4->5:word]
3: [men:6->9:word] [xmen:4->9:word]
4: [story:10->15:word]

1: [the]
2: [x]
3: [men] [xmen]
4: [story]


So a Phrase search to "The xmen story" will fail. With a slop of 1 the
doc will be found.

But when generating the query I won't know when to use a slop. So adding
slops isn't a nice solution.

Would it be a solution, to take the concatenated synonyms to both
Positions? Or are there any drawbacks with this?

1: [the]
2: [x] [xmen]
3: [men] [xmen]
4: [story]

thanks,
martin




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 15:36:01 2006
Return-Path: <java-user-return-22236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47269 invoked from network); 25 Jul 2006 15:36:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:36:01 -0000
Received: (qmail 76241 invoked by uid 500); 25 Jul 2006 15:35:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76209 invoked by uid 500); 25 Jul 2006 15:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76198 invoked by uid 99); 25 Jul 2006 15:35:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:35:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:35:53 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 8C425D9158B
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 11:35:31 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Tue, 25 Jul 2006 11:35:35 -0400
X-Sasl-enc: ssY0yrNUpUdVpo+R8IVgLS/Km4w/nQRio+4n1f2FDHET 1153841731
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id A2C49934C
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 11:35:31 -0400 (EDT)
Message-ID: <44C63A42.40804@mikemccandless.com>
Date: Tue, 25 Jul 2006 11:35:30 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexReader / IndexWriter Synchronization
References: <20060725131126.95388.qmail@web36402.mail.mud.yahoo.com>
In-Reply-To: <20060725131126.95388.qmail@web36402.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>   If I use IndexReader and IndexWriter class for inserts/updates, then I need to handle the threading issues myself. Is there any other class (even in nightly build)  that I can use without having to take care of synchronization.

All this means is your code must ensure only one "writer" (IndexWriter
adding docs or IndexReader removing docs) is open at a time.  If you
fail to do so, then the second "writer" you try to create will throw a
"Lock obtain timed out" IOException.

Otherwise these classes are fully thread safe.

The performance caveat in IndexModifier (that you should batch your
deletes and batch your adds) still applies, because you will need to
open/close an IndexReader for the former and an IndexWriter for the
latter.

The Lucene in Action book does a great job describing these
concurrency rules.

Also, you should first test IndexModifier to be really sure its
performance is not sufficient for your needs.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 15:37:41 2006
Return-Path: <java-user-return-22237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47771 invoked from network); 25 Jul 2006 15:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:37:41 -0000
Received: (qmail 82967 invoked by uid 500); 25 Jul 2006 15:37:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82648 invoked by uid 500); 25 Jul 2006 15:37:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82637 invoked by uid 99); 25 Jul 2006 15:37:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:37:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of laszlo.sera@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:37:34 -0700
Received: by nf-out-0910.google.com with SMTP id b2so261184nfe
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 08:37:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=qwnNQBmQVj9Ei21SKNa4BTwIVVU7JIOfHF0mq2uUfzO8QCZHr0U/r7byICreS9Hi/YxQmZNrR0FXCSkN9jCKQPQCJgaCixPmfVK9wtFuNEhdGIDJ0q58EWPqVumpwUaNrpUhbEgf9pWzkxJECr7/DK+5JiCs3QM4GFdbsp6/4mc=
Received: by 10.48.242.9 with SMTP id p9mr828601nfh;
        Tue, 25 Jul 2006 08:37:11 -0700 (PDT)
Received: by 10.49.9.3 with HTTP; Tue, 25 Jul 2006 08:37:11 -0700 (PDT)
Message-ID: <428c9d610607250837s4cc70e7fg9e1ac69db3b610b6@mail.gmail.com>
Date: Tue, 25 Jul 2006 17:37:11 +0200
From: "laszlo sera" <laszlo.sera@gmail.com>
To: java-user@lucene.apache.org
Subject: Article keyword counters
In-Reply-To: <428c9d610607250834m7f6c2474g99b867896c5943a2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <428c9d610607250834m7f6c2474g99b867896c5943a2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I need some help from the Lucene experts because I coulnd't find the
best solution for a problem...

The problem: we have article entities which can have multiple keywords:

- article #1: keyword #1, keyword#2, keyword#3
- article #2: keyword#2, keyword#3
- article #3: keyword#3
- article #4: keyword#4

I need to create a method to produce a list like this for keyword #2:

- keyword#1 (1)
- keyword#2 (2)
- keyword#3 (1)
- keyword#2 (0)

This list shows counters of keywords and a counter means that how many
article matches with the given keyword in the given scope (in this
example: keyword#2). So, there's one article which has keyword#1 and
keyword#2.

What's the best way to produce the counters?

Laci

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 15:41:24 2006
Return-Path: <java-user-return-22238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49550 invoked from network); 25 Jul 2006 15:41:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:41:24 -0000
Received: (qmail 93252 invoked by uid 500); 25 Jul 2006 15:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93222 invoked by uid 500); 25 Jul 2006 15:41:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 72092 invoked by uid 99); 25 Jul 2006 15:34:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6AFFF.C43043FD"
Subject: Matching accented with non-accented characters
Date: Tue, 25 Jul 2006 10:34:06 -0500
Message-ID: <28A7BB3E1FE1DF40AC6A4B6B2E70DBD4979646@HQEXCH.ad.navteq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Matching accented with non-accented characters
Thread-Index: Acav/8QPaDG++ccgQT+3J3rQTGfkow==
From: "Rajan, Renuka" <renuka.rajan@navteq.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6AFFF.C43043FD
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-NAIMIME-Disclaimer: 1
X-NAIMIME-Modified: 1

Hi All

=20

I am trying to match accented characters with non-accented characters in =
French/Spanish and other Western European languages.  The use case is tha=
t the users may type letters without accents in error and we still want t=
o be able to retrieve valid matches.  The one idea, albeit na=C3=AFve, is=
 to normalize the data on the inbound side as well as the data in the dat=
abase (prior to full text indexing) and retrieve matches. =20

=20

For instance if the database contains a word like BE/BE/ (/ being the equ=
ivalent of aigu since I don't have a French keyboard:-)) and the input is=
 erroneously provided as BE/BE (last aigu missing), we still want to be a=
ble retrieve BE/BE/ as a candidate match admittedly with an error margin.=
 =20

=20

Has anyone using Lucene successfully (ie in terms of decent performance A=
ND validity of results) to match non-accented characters with accented on=
es using some method?  Any method?  Anyone have suggestions to improve th=
e suggestion above?

=20

Any input will be greatly appreciated! Merci beaucoup :-)

Renuka



The information contained in this communication may be CONFIDENTIAL and i=
s intended only for the use of the recipient(s) named above.  If you are =
not the intended recipient, you are hereby notified that any disseminatio=
n, distribution, or copying of this communication, or any of its contents=
, is strictly prohibited.  If you have received this communication in err=
or, please notify the sender and delete/destroy the original message and =
any copy of it from your computer or paper files.

------_=_NextPart_001_01C6AFFF.C43043FD--

From java-user-return-22239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 15:43:03 2006
Return-Path: <java-user-return-22239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50053 invoked from network); 25 Jul 2006 15:43:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:43:02 -0000
Received: (qmail 99285 invoked by uid 500); 25 Jul 2006 15:42:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99249 invoked by uid 500); 25 Jul 2006 15:42:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99238 invoked by uid 99); 25 Jul 2006 15:42:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:42:56 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:42:55 -0700
Received: by py-out-1112.google.com with SMTP id d80so3154502pyd
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 08:42:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PmtwFf1qeVQpeDnWdul9soxE/IxK+ts6ccjqMCxNnyufcohPLFxfaZEjHD3Qr5H8L4p9dR6ZZ6yQnAWgB/freFmbi29ijWA/iou9CGWytGQaCW2HUXK9pd7mdOVE+Q59KsGJeMcLWtba3UgANbgbhX27l207jKU3fL0C/QM/as4=
Received: by 10.35.123.10 with SMTP id a10mr9662389pyn;
        Tue, 25 Jul 2006 08:42:35 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Tue, 25 Jul 2006 08:42:35 -0700 (PDT)
Message-ID: <c68e39170607250842l6169aca0w2d6313cb2e43d1b9@mail.gmail.com>
Date: Tue, 25 Jul 2006 11:42:35 -0400
From: "Yonik Seeley" <yseeley@gmail.com>
To: java-user@lucene.apache.org, mbraun@uni-hd.de
Subject: Re: dash-words
In-Reply-To: <44C6379A.40000@uni-hd.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
	 <1153747041.28605.215.camel@localhost>
	 <1153751420.28605.221.camel@localhost>
	 <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
	 <44C6379A.40000@uni-hd.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/25/06, Martin Braun <mbraun@uni-hd.de> wrote:
> Hi Yonik,
>
> >> I can't figure out what the parameters does. ;)
> >
> > Yes, it will fail without slop... I don't think there is a practical
> > way around that.
>
> I am trying to analyze your WordDelimiterFilter.
>
> If I have x-men, after analyzing (with catenateAll) I get this:
>
>
>  Analzying "The x-men story"
>         de.unihd.ub.ftsearch.WordIndexAnalyzer:
>                 [the] [x] [men] [xmen] [story]
>
>
> 1: [the:0->3:word]
> 2: [x:4->5:word]
> 3: [men:6->9:word] [xmen:4->9:word]
> 4: [story:10->15:word]
>
> 1: [the]
> 2: [x]
> 3: [men] [xmen]
> 4: [story]
>
>
> So a Phrase search to "The xmen story" will fail. With a slop of 1 the
> doc will be found.
>
> But when generating the query I won't know when to use a slop. So adding
> slops isn't a nice solution.

If you can't tolerate slop, this is a problem.

The only 100% solution that I could think of to this problem is to
re-index the entire stream (with a very large position gap inbetween)
for each variant.

"the x men story"
"the xmen story"

Problems:
1) combinatorial explosion very quickly (not practical at all)
2) messes up idfs pretty badly

Phrase slop is the easiest workaround, esp when you wanted slop anyway.

> Would it be a solution, to take the concatenated synonyms to both
> Positions? Or are there any drawbacks with this?

I considered that too... but it increases false matches, and it still
doesn't fix many phrase queries.

> 1: [the]
> 2: [x] [xmen]
> 3: [men] [xmen]
> 4: [story]

While "the xmen" and "xmen story" will now both match, "the xmen
story" will still fail to match.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 15:45:36 2006
Return-Path: <java-user-return-22240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51486 invoked from network); 25 Jul 2006 15:45:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 15:45:36 -0000
Received: (qmail 7314 invoked by uid 500); 25 Jul 2006 15:45:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7071 invoked by uid 500); 25 Jul 2006 15:45:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7054 invoked by uid 99); 25 Jul 2006 15:45:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 08:45:30 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.139] (HELO web36404.mail.mud.yahoo.com) (209.191.85.139)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Jul 2006 08:45:29 -0700
Received: (qmail 61581 invoked by uid 60001); 25 Jul 2006 15:45:08 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NszWqMqbSzY1ZrF7BQko87L6nFc9DPIGM/ArTWw3Ktkqcg39/d2fXn/0dIPJNbVe22IAf8cYjYaIyOO/4w7eIprUIA53O9l1sBBMhHLzO6DeNQfnR/LS5R2LH1SGtDu07zVnL8uK6bPBMRC+srbWTR4LAjoN77RbGvkQwlW3rsE=  ;
Message-ID: <20060725154508.61579.qmail@web36404.mail.mud.yahoo.com>
Received: from [208.210.219.129] by web36404.mail.mud.yahoo.com via HTTP; Tue, 25 Jul 2006 08:45:08 PDT
Date: Tue, 25 Jul 2006 08:45:08 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Re: IndexReader / IndexWriter Synchronization
To: java-user@lucene.apache.org
In-Reply-To: <44C63A42.40804@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1572568133-1153842308=:58426"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1572568133-1153842308=:58426
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Mike for the reply. I will look into Lucene in Action.
   
  I am not very good at threading. So I was looking if there is any api class (even in nightly builds) on top of the IndexReader/IndexWriter that takes care of concurrency rules. 
   
  Every developer must be facing this problem of concurrency while programming.
   
  Thanks again.
  -Vasu

Michael McCandless <lucene@mikemccandless.com> wrote:
  
> If I use IndexReader and IndexWriter class for inserts/updates, then I need to handle the threading issues myself. Is there any other class (even in nightly build) that I can use without having to take care of synchronization.

All this means is your code must ensure only one "writer" (IndexWriter
adding docs or IndexReader removing docs) is open at a time. If you
fail to do so, then the second "writer" you try to create will throw a
"Lock obtain timed out" IOException.

Otherwise these classes are fully thread safe.

The performance caveat in IndexModifier (that you should batch your
deletes and batch your adds) still applies, because you will need to
open/close an IndexReader for the former and an IndexWriter for the
latter.

The Lucene in Action book does a great job describing these
concurrency rules.

Also, you should first test IndexModifier to be really sure its
performance is not sufficient for your needs.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 			
---------------------------------
See the all-new, redesigned Yahoo.com.  Check it out.
--0-1572568133-1153842308=:58426--

From java-user-return-22241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 16:11:02 2006
Return-Path: <java-user-return-22241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62170 invoked from network); 25 Jul 2006 16:11:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:11:02 -0000
Received: (qmail 72615 invoked by uid 500); 25 Jul 2006 16:10:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72554 invoked by uid 500); 25 Jul 2006 16:10:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72536 invoked by uid 99); 25 Jul 2006 16:10:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:10:53 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:10:51 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D0059E204 for java-user@lucene.apache.org; Tue, 25 Jul 2006 18:10:30 +0200
Subject: Re: dash-words
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <c68e39170607250842l6169aca0w2d6313cb2e43d1b9@mail.gmail.com>
References: <1153705956.28605.144.camel@localhost>
	 <c68e39170607232134r561b1c0auad69e2a96d21caed@mail.gmail.com>
	 <1153741901.28605.184.camel@localhost>
	 <1153746947.28605.213.camel@localhost>
	 <1153747041.28605.215.camel@localhost>
	 <1153751420.28605.221.camel@localhost>
	 <c68e39170607241814h73dc9b19o21b7cb92fe07e652@mail.gmail.com>
	 <44C6379A.40000@uni-hd.de>
	 <c68e39170607250842l6169aca0w2d6313cb2e43d1b9@mail.gmail.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Tue, 25 Jul 2006 18:10:15 +0200
Message-Id: <1153843815.28605.269.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2006-07-25 at 11:42 -0400, Yonik Seeley wrote:
> > > Yes, it will fail without slop... I don't think there is a 
> > > practical way around that. 

It would of course be much easier if Lucene supported multiple token
dimensions instead of position increment only. 

> the x-men are here
>     x men
>     xmen

I've briefly talked about this on the dev-list (some month ago) when
position boosts was up for discussion. I don't know how much work this
really is, but it would be such a nice feature.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 16:18:13 2006
Return-Path: <java-user-return-22242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65037 invoked from network); 25 Jul 2006 16:18:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:18:13 -0000
Received: (qmail 93134 invoked by uid 500); 25 Jul 2006 16:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93106 invoked by uid 500); 25 Jul 2006 16:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93003 invoked by uid 99); 25 Jul 2006 16:17:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:17:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.29] (HELO out5.smtp.messagingengine.com) (66.111.4.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:17:56 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 9D129D91BC2
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 12:17:34 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Tue, 25 Jul 2006 12:17:38 -0400
X-Sasl-enc: KYhFuQjuOv+l44yLTcG/HqpiX6C22etQITDV4I0xB7Bj 1153844254
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 6E51D68D6
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 12:17:33 -0400 (EDT)
Message-ID: <44C6441C.8090101@mikemccandless.com>
Date: Tue, 25 Jul 2006 12:17:32 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexReader / IndexWriter Synchronization
References: <20060725154508.61579.qmail@web36404.mail.mud.yahoo.com>
In-Reply-To: <20060725154508.61579.qmail@web36404.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>   I am not very good at threading. So I was looking if there is any api class (even in nightly builds) on top of the IndexReader/IndexWriter that takes care of concurrency rules. 

This is exactly why IndexModifier was created (so you wouldn't have to 
worry about the details of closing/opening IndexReader/IndexWriter). 
There is also additional locking under the hood of those two classes 
that is abstracting away concurrency details so you don't have to worry 
about them.

>   Every developer must be facing this problem of concurrency while programming.

Definitely.  This is indeed one of the common sources of confusion about 
Lucene: the fact that you have to carefully open/close these two classes 
to do common operations is odd; the fact that you need an IndexReader to 
do deletes is "unexpected" (one would expect IndexWriter to do that).

There is work underway to enable IndexWriter to [efficiently] handle 
deletes -- there's been alot of lively discussion on lucene-dev & 
several iterations on possible patches -- see here:

   http://issues.apache.org/jira/browse/LUCENE-565

But this is very much "in process" now.  I don't know of anything else 
in the nightly builds (since 2.0) that address these issues yet.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 16:21:17 2006
Return-Path: <java-user-return-22243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65961 invoked from network); 25 Jul 2006 16:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:21:16 -0000
Received: (qmail 3750 invoked by uid 500); 25 Jul 2006 16:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3640 invoked by uid 500); 25 Jul 2006 16:21:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3627 invoked by uid 99); 25 Jul 2006 16:21:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:21:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:21:09 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6B006.491932B8"
Subject: Copying documents
Date: Tue, 25 Jul 2006 17:21:02 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE828C7F@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Copying documents
Thread-Index: AcawBlIRjMX3y4UVQn+kp0nRcqbOOA==
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6B006.491932B8
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

I want to copy a selection of documents from one index to another. I can
get the Document objects from the IndexReader and write them to the
target index using the IndexWriter. The problem I have is this loses
fields that have not been stored, is there a way round this.

=20

Thanks

=20

Mike

=20

www.ardentia.com the home of NetSearch

=20


------_=_NextPart_001_01C6B006.491932B8--

From java-user-return-22244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 16:45:06 2006
Return-Path: <java-user-return-22244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75067 invoked from network); 25 Jul 2006 16:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:45:06 -0000
Received: (qmail 58908 invoked by uid 500); 25 Jul 2006 16:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58662 invoked by uid 500); 25 Jul 2006 16:44:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58651 invoked by uid 99); 25 Jul 2006 16:44:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:44:59 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.191.85.140] (HELO web36405.mail.mud.yahoo.com) (209.191.85.140)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 25 Jul 2006 09:44:57 -0700
Received: (qmail 22723 invoked by uid 60001); 25 Jul 2006 16:44:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=cUut984U8UsD3tYzIT3vE/PoTRjp7EOytpfrL0ZqEYHl8rb6MaZov3/WbiQu5hsTVAVfIxNLvSZWvJvkCMo8CysCZGVpywhbYdQqmRwL6/wOoaDfH6J8EkMyZ/plWiMOJ/XuHbyYehfzku5f67gubPYhQqXVbKECxu8Ys64X5bo=  ;
Message-ID: <20060725164437.22721.qmail@web36405.mail.mud.yahoo.com>
Received: from [208.210.219.129] by web36405.mail.mud.yahoo.com via HTTP; Tue, 25 Jul 2006 09:44:37 PDT
Date: Tue, 25 Jul 2006 09:44:37 -0700 (PDT)
From: vasu shah <vasushah23@yahoo.com>
Subject: Re: IndexReader / IndexWriter Synchronization
To: java-user@lucene.apache.org
In-Reply-To: <44C6441C.8090101@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-96240655-1153845877=:22369"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-96240655-1153845877=:22369
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thanks Mike. Your explanation was really helpful. 
   
  I would use the IndexModifier class till the new IndexWriter class comes up.
   
  Thanks once again.
  -Vasu

Michael McCandless <lucene@mikemccandless.com> wrote:
  > I am not very good at threading. So I was looking if there is any api class (even in nightly builds) on top of the IndexReader/IndexWriter that takes care of concurrency rules. 

This is exactly why IndexModifier was created (so you wouldn't have to 
worry about the details of closing/opening IndexReader/IndexWriter). 
There is also additional locking under the hood of those two classes 
that is abstracting away concurrency details so you don't have to worry 
about them.

> Every developer must be facing this problem of concurrency while programming.

Definitely. This is indeed one of the common sources of confusion about 
Lucene: the fact that you have to carefully open/close these two classes 
to do common operations is odd; the fact that you need an IndexReader to 
do deletes is "unexpected" (one would expect IndexWriter to do that).

There is work underway to enable IndexWriter to [efficiently] handle 
deletes -- there's been alot of lively discussion on lucene-dev & 
several iterations on possible patches -- see here:

http://issues.apache.org/jira/browse/LUCENE-565

But this is very much "in process" now. I don't know of anything else 
in the nightly builds (since 2.0) that address these issues yet.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2/min or less.
--0-96240655-1153845877=:22369--

From java-user-return-22245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 16:58:07 2006
Return-Path: <java-user-return-22245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80209 invoked from network); 25 Jul 2006 16:58:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:58:06 -0000
Received: (qmail 98942 invoked by uid 500); 25 Jul 2006 16:57:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98917 invoked by uid 500); 25 Jul 2006 16:57:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98906 invoked by uid 99); 25 Jul 2006 16:57:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:57:59 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of namityadav@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:57:58 -0700
Received: by nf-out-0910.google.com with SMTP id o63so270666nfa
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 09:57:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=J3kCgyZS/UKkjJIjmYY3EuKjP1LtEyDm7t00M9a7+6qcC7ewN0jDyjUmoPN4CKB1fJtNRc9+Y9nLeqSFdpN7eV4yYW1njFyR+1q7XKTZtRKFsbSVirC5ji4zjlQg+IeR1c7M5xw+24k5OsgJojJx2M+IBeFlQUgKkLelCdWYM94=
Received: by 10.78.122.11 with SMTP id u11mr2446757huc;
        Tue, 25 Jul 2006 09:57:37 -0700 (PDT)
Received: by 10.78.100.7 with HTTP; Tue, 25 Jul 2006 09:57:37 -0700 (PDT)
Message-ID: <f0d8e9dd0607250957i13520002k3f2d380164173@mail.gmail.com>
Date: Tue, 25 Jul 2006 09:57:37 -0700
From: "Namit Yadav" <namityadav@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
In-Reply-To: <359a92830607250639h6dbf57b5n400a71b068bb160@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f0d8e9dd0607241905w478d3432r4c538f75d535d5f@mail.gmail.com>
	 <359a92830607250639h6dbf57b5n400a71b068bb160@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the suggestion, Erick!

As for why we can't use a relational database, we get all the logs
from an external application. And due to the nature of the business,
we need to continue maintaining the logs. Moreover, the search
requests are very infrequent .. so it doesn't make sense to (almost)
replicate the complete data in database.

Back to the problem. Erick, here is a sample indexFile method (Is this
how I am supposed to index the file?):

    private static void indexFile(IndexWriter writer, File f) {
        try {
            System.out.println("Indexing " + f.getCanonicalPath());
            BufferedReader br = new BufferedReader(new FileReader(f));
            String line = null;
            String[] columns = null;
            while((line = br.readLine())!=null) {
                columns = line.split("#");
                if(columns.length == 4) { // Rows not having 4 columns
are not useful for us
                        Document doc = new Document();
                        doc.add(new Field("msisdn", columns[0],
Field.Store.YES, Field.Index.TOKENIZED));
                        doc.add(new Field("messageid", columns[2],
Field.Store.YES, Field.Index.TOKENIZED));
                        doc.add(new Field("line", line,
Field.Store.YES, Field.Index.NO));
                        writer.addDocument(doc);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

On 7/25/06, Erick Erickson <erickerickson@gmail.com> wrote:
> Indexing 1M of logs shouldn't take minutes, so  you're probably right.
>
> A problem I've seen is opening/indexing/closing your index writer too often.
> You should do something like... (really bad pseudo code here)
>
> IndexWriter IW = new IndexWriter(....);
> for (lots and lots and lots of records) {
>    IW.addDocument();
> }
>
> IW.optimize();
> IW.close();
>
>
> Others have had a problem where they open/write/close the index writer for
> EACH document, which is painfully slow.
>
> Also, you might play around with IndexWriter.setMergeFactor and
> setMaxBufferedDocs. If you set them too high, you'll run out of memory, but
> they can make a difference in now fast your index is built....
>
>
> If none of this is relevant, can you post a bit of (perhaps pseudo) code?
>
> Best
> Erick
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 16:58:58 2006
Return-Path: <java-user-return-22246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80599 invoked from network); 25 Jul 2006 16:58:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 16:58:57 -0000
Received: (qmail 1546 invoked by uid 500); 25 Jul 2006 16:58:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1519 invoked by uid 500); 25 Jul 2006 16:58:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1508 invoked by uid 99); 25 Jul 2006 16:58:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:58:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.33.215.142] (HELO expasy-ng.isb-sib.ch) (192.33.215.142)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 09:58:50 -0700
Received: from [10.0.0.252] (lin-000 [192.33.215.254])
	(authenticated bits=0)
	by expasy-ng.isb-sib.ch (8.12.10/8.12.8) with ESMTP id k6PGwLYW024316
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 18:58:22 +0200
Received: from 127.0.0.1 (AVG SMTP 7.1.394 [268.10.4/396]); Tue, 25 Jul 2006 18:58:17 +0200
Message-ID: <44C64DA9.40604@isb-sib.ch>
Date: Tue, 25 Jul 2006 18:58:17 +0200
From: Eric Jain <Eric.Jain@isb-sib.ch>
Organization: Swiss Institute of Bioinformatics
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Matching accented with non-accented characters
References: <28A7BB3E1FE1DF40AC6A4B6B2E70DBD4979646@HQEXCH.ad.navteq.com>
In-Reply-To: <28A7BB3E1FE1DF40AC6A4B6B2E70DBD4979646@HQEXCH.ad.navteq.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-sib-ng-MailScanner-Information: Please contact the ISP for more information
X-sib-ng-MailScanner: Found to be clean
X-sib-ng-MailScanner-From: eric.jain@isb-sib.ch
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rajan, Renuka wrote:
> I am trying to match accented characters with non-accented characters in French/Spanish and 
 > other Western European languages.

ISOLatin1AccentFilter should do the job, though it works with single 
characters only, so "a umlaut" will match "a" but not "ae".

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 17:23:19 2006
Return-Path: <java-user-return-22247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87871 invoked from network); 25 Jul 2006 17:23:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 17:23:19 -0000
Received: (qmail 45457 invoked by uid 500); 25 Jul 2006 17:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45430 invoked by uid 500); 25 Jul 2006 17:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45419 invoked by uid 99); 25 Jul 2006 17:23:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 10:23:13 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 10:23:11 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6PHMnin168842
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 17:22:50 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6PHQ5N9141930
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 19:26:05 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6PHMnhV029120
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 19:22:49 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6PHMnQu029117
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 19:22:49 +0200
In-Reply-To: <6026e8b0607242222w4f874365gba2b0831da0d639c@mail.gmail.com>
Subject: Re: MultiFieldQueryParser.parse deprecated. What can I use?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFBBF2C95F.8401A8E0-ON882571B6.005E0E98-882571B6.005F6C52@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 25 Jul 2006 10:22:16 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 25/07/2006 20:26:05
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

(Seems 1.9 javadoc could be just a bit more clear on this.)
The following should do the work:
   QueryParser qp =3D new MultiFieldQueryParser(fields[], analyzer);
   Query =3D qp.parse(qtext);
Notice the difference in semantics as explained in the "deprecated" com=
ment
in 1.9.
Also see the setDefaultOperator() in the (2.0) constructor.

Regards,
Doron

paulo.silveira@gmail.com wrote on 24/07/2006 22:22:08:

> Hello
>
> What can I use as a drop in replacement? I mean, about the (String,
> String[], Analyzer) one.
>
> The 1.9.1 javadoc says to use QueryParser.parse, but I need to
> construct the query first. Any util method or do I need to do the for=
?
> If this is the solution, maybe it is more elegant to use the for to
> create a big BooleanQuery, .adding new BooleanClause.Occur.Must
> clauses each loop?
>
> thanks
>
>  --
> Paulo E. A. Silveira
> Caelum Ensino e Solu=E7=F5es em Java
> http://www.caelum.com.br/
>
> ---------------------------------------------------------------------=

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 17:41:16 2006
Return-Path: <java-user-return-22248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93294 invoked from network); 25 Jul 2006 17:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 17:41:15 -0000
Received: (qmail 88844 invoked by uid 500); 25 Jul 2006 17:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88826 invoked by uid 500); 25 Jul 2006 17:41:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88815 invoked by uid 99); 25 Jul 2006 17:41:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 10:41:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 10:41:07 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.155B36E0@mailer.syr.edu>; Tue, 25 Jul 2006 13:40:46 -0400
Message-ID: <44C6579D.7010909@syr.edu>
Date: Tue, 25 Jul 2006 13:40:45 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Matching accented with non-accented characters
References: <28A7BB3E1FE1DF40AC6A4B6B2E70DBD4979646@HQEXCH.ad.navteq.com>
In-Reply-To: <28A7BB3E1FE1DF40AC6A4B6B2E70DBD4979646@HQEXCH.ad.navteq.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rajan, Renuka wrote:
> I am trying to match accented characters with non-accented characters
> in French/Spanish and other Western European languages.  The use case
> is that the users may type letters without accents in error and we
> still want to be able to retrieve valid matches.  The one idea,
> albeit nave, is to normalize the data on the inbound side as well as
> the data in the database (prior to full text indexing) and retrieve
> matches.
> 
> For instance if the database contains a word like BE/BE/ (/ being the
> equivalent of aigu since I don't have a French keyboard:-)) and the
> input is erroneously provided as BE/BE (last aigu missing), we still
> want to be able retrieve BE/BE/ as a candidate match admittedly with
> an error margin.
> 
> Has anyone using Lucene successfully (ie in terms of decent
> performance AND validity of results) to match non-accented characters
> with accented ones using some method?  Any method?  Anyone have
> suggestions to improve the suggestion above?

Some of the work to do the deaccenting (normalization) is already done:

<http://lucene.apache.org/java/docs/api/org/apache/lucene/analysis/ISOLatin1AccentFilter.html>

Simplest method: Index and search against a single deaccented field.
This has the advantage that incompletely accented text (as in your
example) will still match.  The disadvantage is that terms which differ
only by accent(s) will be conflated, thus lowering average precision.
This may not be a big enough problem for you to justify greater effort,
though.

Three other alternatives (roughly in increasing order of complexity):

1. Put the original and the deaccented versions of the tokens at the
same position in a single field, and use the same analyzer to construct
queries.  The precision-lowering conflation effect mentioned above will
be partially offset by better scores for documents containing tokens
with accents that match those given by the user.

2. Have two fields on each document, one for the original
(non-deaccented) token stream, and another for the deaccented token
stream, which you can create using the above-linked
ISOLatin1AccentFilter.  Then when you perform searches, you can
construct a query against both fields, giving a higher boost to the
original (non-deaccented) field.  This is probably closest to the
solution you had in mind.

3. Use the ICU library
<http://ibm.com/software/globalization/icu/index.jsp> to create sort
keys for each token, which you would use both when indexing and
searching.  See Ken Krugler's post on this topic:
<http://mail-archives.apache.org/mod_mbox/lucene-java-user/200506.mbox/%3cp06210206bee85eceaa8c@%5b192.168.1.102%5d%3e>

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 18:07:31 2006
Return-Path: <java-user-return-22249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8040 invoked from network); 25 Jul 2006 18:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:07:30 -0000
Received: (qmail 70246 invoked by uid 500); 25 Jul 2006 18:07:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70226 invoked by uid 500); 25 Jul 2006 18:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70208 invoked by uid 99); 25 Jul 2006 18:07:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:07:22 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:07:21 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6PI6xQg077488
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 18:06:59 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6PIAFBX148056
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 20:10:15 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6PI6xDq022559
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 20:06:59 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6PI6xMh022553
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 20:06:59 +0200
In-Reply-To: <OFE265D408.E2374770-ON652571B6.003A0E70-652571B6.003A8752@hewitt.com>
Subject: Re: Grouping over multiple fields
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF65D918A3.FC45FADE-ON882571B6.0062DC17-882571B6.0063800D@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 25 Jul 2006 11:06:48 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 25/07/2006 21:10:15
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think the problem might be in the <some query> part.
At least with Lucene 2.0, parsing result is as expected -
  String qtxt  = "some text AND  ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish
)";
  Query q = new QueryParser("field",new WhitespaceAnalyzer()).parse(qtxt);
  System.out.println(q);
  --> field:some +field:text +(AUTHOR_NAME:krish EMPLOYEE_NAME:krish)

- Doron

"Krishnendra Nandi" <krishnendra.nandi@hewitt.com> wrote on 25/07/2006
03:38:51:

> Hi All,
>
> Can anybody help me out on this ..?
>
> I have to search for a particular value over multiple fields and need to
> know if grouping is allowed over multiple fields
>
> eg.
>
> <some query>    AND   ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish )
>
> Introducing paranthesis "(" is giving me lexical error
>
> Thanks and Regards
> Krishnendra Nandi
>
> The information contained in this e-mail and any accompanying documents
> may contain information that is confidential or otherwise protected
> from disclosure. If you are not the intended recipient of this message,
> or if this message has been addressed to you in error, please
> immediately alert the sender by reply e-mail and then delete this
message,
> including any attachments. Any dissemination, distribution or other use
of
> the contents of this message by anyone other than the intended recipient
> is strictly prohibited.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 18:10:27 2006
Return-Path: <java-user-return-22250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8408 invoked from network); 25 Jul 2006 18:10:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:10:26 -0000
Received: (qmail 77118 invoked by uid 500); 25 Jul 2006 18:10:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77095 invoked by uid 500); 25 Jul 2006 18:10:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77079 invoked by uid 99); 25 Jul 2006 18:10:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:10:18 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:10:18 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G5RLx-0007p2-IU
	for java-user@lucene.apache.org; Tue, 25 Jul 2006 11:09:57 -0700
Message-ID: <5490455.post@talk.nabble.com>
Date: Tue, 25 Jul 2006 11:09:57 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Sorting with Parallelreader fails
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
 
i have 3 indexfiles which i access over a parallelreader.
 
When i make a search, everything works fine, but....when i want to make a
search and sorting by a special
column i get an error. Here is my code:
 
 
Schnipp....
Dim field As SortField = New SortField("Streetname")
Dim sortByName As Sort = New Sort(Field)

Dim queri As Query = QueryParser.Parse(q, "Streetname", New
StandardAnalyzer)

hits = searcher.Search(queri, sortByName)

...Schnapp

Is there something wrong or is there a bug in parallelreader... ?

Thanks very much for you help :-))


-- 
View this message in context: http://www.nabble.com/Sorting-with-Parallelreader-fails-tf1999747.html#a5490455
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 18:36:06 2006
Return-Path: <java-user-return-22251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19763 invoked from network); 25 Jul 2006 18:36:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:36:06 -0000
Received: (qmail 26063 invoked by uid 500); 25 Jul 2006 18:35:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26034 invoked by uid 500); 25 Jul 2006 18:35:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26023 invoked by uid 99); 25 Jul 2006 18:35:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:35:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:35:57 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6PIZZLH144904
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 18:35:35 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6PIcp8O156596
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 20:38:51 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6PIZZHO026420
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 20:35:35 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6PIZZVJ026415
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 20:35:35 +0200
In-Reply-To: <OF65D918A3.FC45FADE-ON882571B6.0062DC17-882571B6.0063800D@il.ibm.com>
Subject: Re: Grouping over multiple fields
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFED009F9F.E3B0F888-ON882571B6.00644C81-882571B6.006567BB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 25 Jul 2006 11:27:36 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 25/07/2006 21:38:51
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Just realized that the <some text> part should also be grouped, so checked
that this variation also works:

qtxt = "some text AND  ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish )";
--->   field:some +field:text +(AUTHOR_NAME:krish EMPLOYEE_NAME:krish)

qtxt = "(some text) AND  ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish )";
--->   +(field:some field:text) +(AUTHOR_NAME:krish EMPLOYEE_NAME:krish)

qtxt = "<some text> AND  ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish )";
--->   field:<some +field:text> +(AUTHOR_NAME:krish EMPLOYEE_NAME:krish)

Last case just demonstrates that '<' is not part of Lucene's query syntax
(http://lucene.apache.org/java/docs/queryparsersyntax.html).

- Doron

> I think the problem might be in the <some query> part.
> At least with Lucene 2.0, parsing result is as expected -
>   String qtxt  = "some text AND  ( AUTHOR_NAME:krish OR
EMPLOYEE_NAME:krish
> )";
>   Query q = new QueryParser("field",new
WhitespaceAnalyzer()).parse(qtxt);
>   System.out.println(q);
>   --> field:some +field:text +(AUTHOR_NAME:krish EMPLOYEE_NAME:krish)
>
> - Doron
>
> "Krishnendra Nandi" <krishnendra.nandi@hewitt.com> wrote on 25/07/2006
> 03:38:51:
>
> > Hi All,
> >
> > Can anybody help me out on this ..?
> >
> > I have to search for a particular value over multiple fields and need
to
> > know if grouping is allowed over multiple fields
> >
> > eg.
> >
> > <some query>    AND   ( AUTHOR_NAME:krish OR EMPLOYEE_NAME:krish )
> >
> > Introducing paranthesis "(" is giving me lexical error
> >
> > Thanks and Regards
> > Krishnendra Nandi
> >
> > The information contained in this e-mail and any accompanying documents
> > may contain information that is confidential or otherwise protected
> > from disclosure. If you are not the intended recipient of this message,
> > or if this message has been addressed to you in error, please
> > immediately alert the sender by reply e-mail and then delete this
> message,
> > including any attachments. Any dissemination, distribution or other use
> of
> > the contents of this message by anyone other than the intended
recipient
> > is strictly prohibited.
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 18:39:42 2006
Return-Path: <java-user-return-22252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20643 invoked from network); 25 Jul 2006 18:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:39:42 -0000
Received: (qmail 35182 invoked by uid 500); 25 Jul 2006 18:39:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35146 invoked by uid 500); 25 Jul 2006 18:39:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35135 invoked by uid 99); 25 Jul 2006 18:39:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:39:35 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:39:34 -0700
Received: by py-out-1112.google.com with SMTP id d80so3208259pyd
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 11:39:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FDhU1x4uVWGIHIil3ZylCyrjGiLLZLdGfrMaL1neJDe0ChGQLu8JgTg9e/dVUWQ6DHpdWPWXVA0zDaFw081SEgYgY0FYPAAlD2Ge0OYtW8IvFeMLunQ3pirQAUg8qO1yrKfTPs9oD3+vlXggJK6TF6wrOXALO5g3uOZehookpO8=
Received: by 10.35.78.9 with SMTP id f9mr9885675pyl;
        Tue, 25 Jul 2006 11:39:12 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Tue, 25 Jul 2006 11:39:12 -0700 (PDT)
Message-ID: <359a92830607251139r1d20a6bfhb5279606d6993545@mail.gmail.com>
Date: Tue, 25 Jul 2006 14:39:12 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
In-Reply-To: <f0d8e9dd0607250957i13520002k3f2d380164173@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_87052_23970170.1153852752059"
References: <f0d8e9dd0607241905w478d3432r4c538f75d535d5f@mail.gmail.com>
	 <359a92830607250639h6dbf57b5n400a71b068bb160@mail.gmail.com>
	 <f0d8e9dd0607250957i13520002k3f2d380164173@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_87052_23970170.1153852752059
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The code looks good, *assuming* that the IndexWriter you pass in isn't
closed/opened between files (this would  be a problem if you have lots of
files to index......). I've had the IndexWriter.optimize method take a
loooong time to complete, so I typically don't do this until I'm entirely
done...

My application is indexing 10,000 documents in 15 seconds or so. These are
XML documents that need to be parsed and a dozen or so fields indexed FWIW.

An easy test for narrowing down where your problem is would be to just
comment out the writer.addDocument and take some timings. Then, perhaps,
comment out the open/close/optimize of the IndexWriter and see if *that*
made a measurable difference.

But if you're not opening and closing the index writer between files, I'm
stumped. I usually take a "divide and conquer" approach or haul out a
performance analyzer :(.

My experience is that Lucene indexes quite quickly, so I would assume it was
a problem in my code for quite a while before throwing in the towel.

You aren't by chance reading/writing over a network that may be slow are you
? (really grasping at straws here.....).

Best
Erick

------=_Part_87052_23970170.1153852752059--

From java-user-return-22253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 18:47:17 2006
Return-Path: <java-user-return-22253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24313 invoked from network); 25 Jul 2006 18:47:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:47:17 -0000
Received: (qmail 47902 invoked by uid 500); 25 Jul 2006 18:47:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47775 invoked by uid 500); 25 Jul 2006 18:47:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47764 invoked by uid 99); 25 Jul 2006 18:47:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:47:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:47:11 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E1F6F5B76C; Tue, 25 Jul 2006 11:46:50 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D20F17F403
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 11:46:50 -0700 (PDT)
Date: Tue, 25 Jul 2006 11:46:50 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Copying documents
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE828C7F@staf-exm-01.ardentia.co.uk>
Message-ID: <Pine.LNX.4.58.0607251144050.23489@hal.rescomp.berkeley.edu>
References: <0B1C92228C5C8D45AA7450F78B3FB9DE828C7F@staf-exm-01.ardentia.co.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I want to copy a selection of documents from one index to another. I can
: get the Document objects from the IndexReader and write them to the
: target index using the IndexWriter. The problem I have is this loses
: fields that have not been stored, is there a way round this.

there is no easy way to extract non-stored fields from an index.

if your goal is as you say just to verbatim copy documents from one index
to another, look at the IndexWriter.addIndexes method which merges the
Term lists directly (without trying to reconstruct the orriginal
documents)

if you only want a subset of your orriginal index, clone it's directory,
delete the docs you don't wnat to copy, and then add the index.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 18:52:31 2006
Return-Path: <java-user-return-22254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25826 invoked from network); 25 Jul 2006 18:52:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:52:31 -0000
Received: (qmail 56516 invoked by uid 500); 25 Jul 2006 18:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56434 invoked by uid 500); 25 Jul 2006 18:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56423 invoked by uid 99); 25 Jul 2006 18:52:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:52:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:52:24 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id E11B45B77A; Tue, 25 Jul 2006 11:52:03 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C68FF7F403
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 11:52:03 -0700 (PDT)
Date: Tue, 25 Jul 2006 11:52:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Article keyword counters
In-Reply-To: <428c9d610607250837s4cc70e7fg9e1ac69db3b610b6@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607251149040.23489@hal.rescomp.berkeley.edu>
References: <428c9d610607250834m7f6c2474g99b867896c5943a2@mail.gmail.com>
 <428c9d610607250837s4cc70e7fg9e1ac69db3b610b6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) please do not cross post to more then one lucene mailing list.  the
appropraites place for questions about using the Java Lucene library is
"java-user"

2) if you want the counts of all documents matching each keyword, then the
TermEnum.docFreq method can solve all of your problems.

if you want to know the counts in the context of a search that has
narrowed the document space, the problem becomes trickier -- you'll find
discussions on it if you search the archives for "faceted search"
"category counts" of "facet counts"



: Date: Tue, 25 Jul 2006 17:37:11 +0200
: From: laszlo sera <laszlo.sera@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Article keyword counters
:
: Hi all,
:
: I need some help from the Lucene experts because I coulnd't find the
: best solution for a problem...
:
: The problem: we have article entities which can have multiple keywords:
:
: - article #1: keyword #1, keyword#2, keyword#3
: - article #2: keyword#2, keyword#3
: - article #3: keyword#3
: - article #4: keyword#4
:
: I need to create a method to produce a list like this for keyword #2:
:
: - keyword#1 (1)
: - keyword#2 (2)
: - keyword#3 (1)
: - keyword#2 (0)
:
: This list shows counters of keywords and a counter means that how many
: article matches with the given keyword in the given scope (in this
: example: keyword#2). So, there's one article which has keyword#1 and
: keyword#2.
:
: What's the best way to produce the counters?
:
: Laci
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 18:58:37 2006
Return-Path: <java-user-return-22255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27331 invoked from network); 25 Jul 2006 18:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 18:58:37 -0000
Received: (qmail 65732 invoked by uid 500); 25 Jul 2006 18:58:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65694 invoked by uid 500); 25 Jul 2006 18:58:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65669 invoked by uid 99); 25 Jul 2006 18:58:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:58:22 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of laszlo.sera@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 11:58:21 -0700
Received: by nf-out-0910.google.com with SMTP id b2so327480nfe
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 11:58:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fLCPmI0oyh1yqTEnYKlw6rjdGLnTUpI+IU9O5L0EoP3OYy5Pg6eIfgsyOoJkYW+grGq5ahD72GMgDEwtgfJGlk/IR/88/6UfJdwaRmGrFOj8sPWpweKNvtZrk18zdpwOxY/WERpjunZWkJlBXCLrNCNZ4Oe9bM+QyIPTqc7fI5Y=
Received: by 10.48.48.15 with SMTP id v15mr1094727nfv;
        Tue, 25 Jul 2006 11:58:00 -0700 (PDT)
Received: by 10.49.9.3 with HTTP; Tue, 25 Jul 2006 11:57:59 -0700 (PDT)
Message-ID: <428c9d610607251157y209d2935m1f4f3b252d5fea29@mail.gmail.com>
Date: Tue, 25 Jul 2006 20:57:59 +0200
From: "laszlo sera" <laszlo.sera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Article keyword counters
In-Reply-To: <Pine.LNX.4.58.0607251149040.23489@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <428c9d610607250834m7f6c2474g99b867896c5943a2@mail.gmail.com>
	 <428c9d610607250837s4cc70e7fg9e1ac69db3b610b6@mail.gmail.com>
	 <Pine.LNX.4.58.0607251149040.23489@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,

Sorry for the cross posting but i'm newbie at the lucene community and
thanks for your instructions!

> if you want to know the counts in the context of a search that has
> narrowed the document space, the problem becomes trickier -- you'll find
> discussions on it if you search the archives for "faceted search"
> "category counts" of "facet counts"

Yes, this is the situation and I try to find the answer in the archive.

Laci

On 7/25/06, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> 1) please do not cross post to more then one lucene mailing list.  the
> appropraites place for questions about using the Java Lucene library is
> "java-user"
>
> 2) if you want the counts of all documents matching each keyword, then the
> TermEnum.docFreq method can solve all of your problems.
>
> if you want to know the counts in the context of a search that has
> narrowed the document space, the problem becomes trickier -- you'll find
> discussions on it if you search the archives for "faceted search"
> "category counts" of "facet counts"
>
>
>
> : Date: Tue, 25 Jul 2006 17:37:11 +0200
> : From: laszlo sera <laszlo.sera@gmail.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Article keyword counters
> :
> : Hi all,
> :
> : I need some help from the Lucene experts because I coulnd't find the
> : best solution for a problem...
> :
> : The problem: we have article entities which can have multiple keywords:
> :
> : - article #1: keyword #1, keyword#2, keyword#3
> : - article #2: keyword#2, keyword#3
> : - article #3: keyword#3
> : - article #4: keyword#4
> :
> : I need to create a method to produce a list like this for keyword #2:
> :
> : - keyword#1 (1)
> : - keyword#2 (2)
> : - keyword#3 (1)
> : - keyword#2 (0)
> :
> : This list shows counters of keywords and a counter means that how many
> : article matches with the given keyword in the given scope (in this
> : example: keyword#2). So, there's one article which has keyword#1 and
> : keyword#2.
> :
> : What's the best way to produce the counters?
> :
> : Laci
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 19:01:00 2006
Return-Path: <java-user-return-22256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28170 invoked from network); 25 Jul 2006 19:00:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 19:00:59 -0000
Received: (qmail 72627 invoked by uid 500); 25 Jul 2006 19:00:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72395 invoked by uid 500); 25 Jul 2006 19:00:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72384 invoked by uid 99); 25 Jul 2006 19:00:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:00:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:00:51 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.155B3FA5@mailer.syr.edu>; Tue, 25 Jul 2006 15:00:30 -0400
Message-ID: <44C66A4E.7090208@syr.edu>
Date: Tue, 25 Jul 2006 15:00:30 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sorting with Parallelreader fails
References: <5490455.post@talk.nabble.com>
In-Reply-To: <5490455.post@talk.nabble.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

neils wrote:
> Hi,
>  
> i have 3 indexfiles which i access over a parallelreader.
>  
> When i make a search, everything works fine, but....when i want to make a
> search and sorting by a special
> column i get an error.

You need to say exactly what the error is, right?  Or else we won't
know, hmmmm?  And then our "help" might need more quotation marks around
it to denote the vanishingly lower expectations we hold for it to
actually be that, do you see?????

> Here is my code:
>  
> Schnipp....
> Dim field As SortField = New SortField("Streetname")
> Dim sortByName As Sort = New Sort(Field)
> 
> Dim queri As Query = QueryParser.Parse(q, "Streetname", New
> StandardAnalyzer)
> 
> hits = searcher.Search(queri, sortByName)
> 
> ...Schnapp

And, por supuesto, posting what appears to be Visual Basic code
(presumably to be used with Lucene.Net) to an explicitly *Java* list
(dude, the name of the list is "java-user") may be prove fruitful than
you might hope....

> Is there something wrong or is there a bug in parallelreader... ?

I'm guessing that you're using the StandardAnalyzer to construct the
field values over which you want to sort.  This can emit multiple terms
in a single Field value, which is a no-no (for Lucene Sort, anyway).
From
<http://lucene.apache.org/java/docs/api/org/apache/lucene/search/Sort.html>:

     The fields used to determine sort order must
     be carefully chosen. Documents must contain a
     single term in such a field, and the value of
     the term should indicate the document's
     relative position in a given sort order. The
     field must be indexed, but should not be
     tokenized, and does not need to be stored...

Of course, maybe there is a problem with ParallelReader.  Have you
tested against a single index without changing anything else, to confirm
that this is actually the case?

Steve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 19:06:30 2006
Return-Path: <java-user-return-22257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29772 invoked from network); 25 Jul 2006 19:06:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 19:06:30 -0000
Received: (qmail 86324 invoked by uid 500); 25 Jul 2006 19:06:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86296 invoked by uid 500); 25 Jul 2006 19:06:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86265 invoked by uid 99); 25 Jul 2006 19:06:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:06:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:06:17 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.155B4008@mailer.syr.edu>; Tue, 25 Jul 2006 15:05:56 -0400
Message-ID: <44C66B94.5050606@syr.edu>
Date: Tue, 25 Jul 2006 15:05:56 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Sorting with Parallelreader fails
References: <5490455.post@talk.nabble.com> <44C66A4E.7090208@syr.edu>
In-Reply-To: <44C66A4E.7090208@syr.edu>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Steven Rowe wrote:
> And, por supuesto, posting what appears to be Visual Basic code
> (presumably to be used with Lucene.Net) to an explicitly *Java* list
> (dude, the name of the list is "java-user") may be prove fruitful than
> you might hope....

That should read: ... may prove *less* fruitful than you might hope ...




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 19:57:59 2006
Return-Path: <java-user-return-22258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50012 invoked from network); 25 Jul 2006 19:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 19:57:58 -0000
Received: (qmail 70481 invoked by uid 500); 25 Jul 2006 19:57:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70224 invoked by uid 500); 25 Jul 2006 19:57:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70213 invoked by uid 99); 25 Jul 2006 19:57:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:57:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 12:57:50 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k6PJvSGP025191
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 20:57:28 +0100
Received: from [192.168.0.22] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.139-alpha)
    via ESMTP; Tue, 25 Jul 2006 20:57:28 +0100 (BST)
Date: Tue, 25 Jul 2006 20:57:27 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44C677A7.2010500@scalix.com>
In-Reply-To: <28A7BB3E1FE1DF40AC6A4B6B2E70DBD4979646@HQEXCH.ad.navteq.com>
References: <28A7BB3E1FE1DF40AC6A4B6B2E70DBD4979646@HQEXCH.ad.navteq.com>
Subject: Re: Matching accented with non-accented characters
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.4 (X11/20060614)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1";
	format="flowed"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rajan, Renuka wrote:
> I am trying to match accented characters with non-accented characters in French/Spanish and other Western European languages.  The use case is that the users may type letters without accents in error and we still want to be able to retrieve valid matches.  The one idea, albeit nave, is to normalize the data on the inbound side as well as the data in the database (prior to full text indexing) and retrieve matches.  
>   
Look back through the archives a bit for  ISOLatin1AccentFilter.  It 
almost does the job and works reasonably well for western european  
characters.    You'll also find a posting of mine that presents a 
somewhat more complete filter based on the unicode decompositions.   If 
you can't find it I'll dig out the stuff I wrote and re-post it (and 
then maybe some kind soul will add it alongside ISOLatin1AccentFilter).

Eric Jain's comment about "" being converted to "a" instead of "ae" is 
a fair one, but it probably doesn't much matter.  Although I have seen 
"Mller" written as both "Muller" and "Mueller" so you're not going to 
be able to please everyone all the time without injecting synonyms and 
being very clever.   And if you're that clever you might catch both 
"encyclopedia" and "encyclopdia" -- the latter converted to 
"encyclopaedia" which isn't the same as "encyclopdia"!

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 21:26:58 2006
Return-Path: <java-user-return-22259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79375 invoked from network); 25 Jul 2006 21:26:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 21:26:57 -0000
Received: (qmail 28607 invoked by uid 500); 25 Jul 2006 21:26:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28586 invoked by uid 500); 25 Jul 2006 21:26:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28575 invoked by uid 99); 25 Jul 2006 21:26:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:26:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:26:49 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6PLQRPr174558
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 21:26:27 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6PLThsI156532
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 23:29:43 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6PLQQtB030784
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 23:26:26 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6PLQQm9030779
	for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 23:26:26 +0200
In-Reply-To: <f0d8e9dd0607250957i13520002k3f2d380164173@mail.gmail.com>
Subject: Re: Index Rows as Documents? Help me design a solution
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF9531BEA4.22DF89F6-ON882571B6.00710E6A-882571B6.00757D7E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 25 Jul 2006 14:23:18 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 26/07/2006 00:29:42
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Few comments -

> (from first posting in this thread)
> The indexing was taking much more than minutes for a 1 MB log file. ...
> I would expect to be able to index at least a of GB of logs within 1 or 2
minutes.

1-2 minutes per GB would be 30-60 GB/Hour, which for a single machine/jvm
is a lot - well at least I did not see Lucene index this fast.

> doc.add(new Field("msisdn", columns[0], Field.Store.YES,
Field.Index.TOKENIZED));
> doc.add(new Field("messageid", columns[2], Field.Store.YES,
Field.Index.TOKENIZED));

Is it really required to analyze the text for these fields - "msisdn" , "
messageid"?

> doc.add(new Field("line", line, Field.Store.YES, Field.Index.NO));

This is storing the original text of all input lines that are indexed -
quite an overhead.

- Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 25 21:45:12 2006
Return-Path: <java-user-return-22260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85406 invoked from network); 25 Jul 2006 21:45:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2006 21:45:12 -0000
Received: (qmail 59330 invoked by uid 500); 25 Jul 2006 21:45:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59296 invoked by uid 500); 25 Jul 2006 21:45:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59281 invoked by uid 99); 25 Jul 2006 21:45:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:45:06 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 14:45:05 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G5Uhp-0005oI-Bt
	for java-user@lucene.apache.org; Tue, 25 Jul 2006 14:44:45 -0700
Message-ID: <5493952.post@talk.nabble.com>
Date: Tue, 25 Jul 2006 14:44:45 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Sorting with Parallelreader fails
In-Reply-To: <44C66A4E.7090208@syr.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5490455.post@talk.nabble.com> <44C66A4E.7090208@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Steve,

thanks a lot for your help. I think problem will be that no single terms are
stored in that field. So i will take a look and make some furhter tests.

Regarding your advice to the "java-user" list, i think it is no problem to
send a short vb code to describe the problem. This group is (in my opinion)
for lucene. Of course lucene is first written in java, but due  ported to
different languages and i think not only "java-coding" programmer are having
questions to lucene. So there is no need to convert a code-part to java when
help is needed.

But anyway. I'm happy that you give me the right direction for my problem
:-)

Thanks.
-- 
View this message in context: http://www.nabble.com/Sorting-with-Parallelreader-fails-tf1999747.html#a5493952
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 02:36:20 2006
Return-Path: <java-user-return-22261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63111 invoked from network); 26 Jul 2006 02:36:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 02:36:20 -0000
Received: (qmail 79657 invoked by uid 500); 26 Jul 2006 02:36:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79618 invoked by uid 500); 26 Jul 2006 02:36:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79600 invoked by uid 99); 26 Jul 2006 02:36:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 19:36:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paulo.silveira@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 19:36:09 -0700
Received: by py-out-1112.google.com with SMTP id d80so3335672pyd
        for <java-user@lucene.apache.org>; Tue, 25 Jul 2006 19:35:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=R6lwMQTaWYRVB0QeUy3bpoL4uTIEN39L9barn+ocs/cJC2MwZGsXTS/omE82WBr+n8pa2vDUCx4Yd/M4vRK+fslahyGoo5AGl//2vpHdnX2Oh/dqmHnR8rr9KSVqKika8rcC3MM/IEsK3cLddkgV6SxCzf5bhGSVBB0Kg9qtdtg=
Received: by 10.35.105.18 with SMTP id h18mr10493466pym;
        Tue, 25 Jul 2006 19:35:48 -0700 (PDT)
Received: by 10.35.64.7 with HTTP; Tue, 25 Jul 2006 19:35:48 -0700 (PDT)
Message-ID: <6026e8b0607251935j295a694ge185da267036ea0b@mail.gmail.com>
Date: Tue, 25 Jul 2006 23:35:48 -0300
From: "Paulo Silveira" <paulo.silveira@caelum.com.br>
Sender: paulo.silveira@gmail.com
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser.parse deprecated. What can I use?
In-Reply-To: <OFBBF2C95F.8401A8E0-ON882571B6.005E0E98-882571B6.005F6C52@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6026e8b0607242222w4f874365gba2b0831da0d639c@mail.gmail.com>
	 <OFBBF2C95F.8401A8E0-ON882571B6.005E0E98-882571B6.005F6C52@il.ibm.com>
X-Google-Sender-Auth: 7692922b0ea08135
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hey doron, I solved the problem with

for (String field : fields) {
=09QueryParser qp =3D new QueryParser(field, SearchEngine.ANALYZER);
=09fieldsQuery.add(qp.parse(string), BooleanClause.Occur.SHOULD);
}

that seems to have the exact same effect of your suggestion
=09
MultiFieldQueryParser qp =3D new MultiFieldQueryParser(fields,
SearchEngine.ANALYZER);
fieldsQuery =3D qp.parse(string);

thanks a lot!!


On 7/25/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> (Seems 1.9 javadoc could be just a bit more clear on this.)
> The following should do the work:
>    QueryParser qp =3D new MultiFieldQueryParser(fields[], analyzer);
>    Query =3D qp.parse(qtext);
> Notice the difference in semantics as explained in the "deprecated" comme=
nt
> in 1.9.
> Also see the setDefaultOperator() in the (2.0) constructor.
>
> Regards,
> Doron
>
> paulo.silveira@gmail.com wrote on 24/07/2006 22:22:08:
>
> > Hello
> >
> > What can I use as a drop in replacement? I mean, about the (String,
> > String[], Analyzer) one.
> >
> > The 1.9.1 javadoc says to use QueryParser.parse, but I need to
> > construct the query first. Any util method or do I need to do the for?
> > If this is the solution, maybe it is more elegant to use the for to
> > create a big BooleanQuery, .adding new BooleanClause.Occur.Must
> > clauses each loop?
> >
> > thanks
> >
> >  --
> > Paulo E. A. Silveira
> > Caelum Ensino e Solu=E7=F5es em Java
> > http://www.caelum.com.br/
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Paulo E. A. Silveira
Caelum Ensino e Solu=E7=F5es em Java
http://www.caelum.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 04:35:40 2006
Return-Path: <java-user-return-22262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89630 invoked from network); 26 Jul 2006 04:35:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 04:35:40 -0000
Received: (qmail 89567 invoked by uid 500); 26 Jul 2006 04:35:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89539 invoked by uid 500); 26 Jul 2006 04:35:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89528 invoked by uid 99); 26 Jul 2006 04:35:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 21:35:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.116.38.223] (HELO rectangular.com) (68.116.38.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 21:35:33 -0700
Received: from [64.122.15.118] (helo=[192.168.2.106])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1G5bGy-0003gM-Eb
	for java-user@lucene.apache.org; Tue, 25 Jul 2006 21:45:28 -0700
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <6026e8b0607251935j295a694ge185da267036ea0b@mail.gmail.com>
References: <6026e8b0607242222w4f874365gba2b0831da0d639c@mail.gmail.com> <OFBBF2C95F.8401A8E0-ON882571B6.005E0E98-882571B6.005F6C52@il.ibm.com> <6026e8b0607251935j295a694ge185da267036ea0b@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0BD7C47F-6E3D-4396-8DB8-F911D34069DC@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: MultiFieldQueryParser.parse deprecated. What can I use?
Date: Tue, 25 Jul 2006 21:35:06 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 25, 2006, at 7:35 PM, Paulo Silveira wrote:

> hey doron, I solved the problem with
>
> for (String field : fields) {
> 	QueryParser qp = new QueryParser(field, SearchEngine.ANALYZER);
> 	fieldsQuery.add(qp.parse(string), BooleanClause.Occur.SHOULD);
> }

I believe that this will cause difficulties with prohibited terms.   
Say you have these two documents...

     Doc 1:
        title: a
        body:  foo
     Doc 2:
        title: b
        body:  bar

How many hits do you get for the query 'a -foo'?  The answer *should*  
be 0, since the presence of "foo" in the body should exclude doc 1.   
However, since the title matches against 'a -foo' ("a" is present,  
and "foo" is not), I believe you'll get a hit.

If you can solve that problem, and also return 1 hit for the query  
string "a +foo", let me know!

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 05:55:52 2006
Return-Path: <java-user-return-22263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11886 invoked from network); 26 Jul 2006 05:55:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 05:55:52 -0000
Received: (qmail 66648 invoked by uid 500); 26 Jul 2006 05:55:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66621 invoked by uid 500); 26 Jul 2006 05:55:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66610 invoked by uid 99); 26 Jul 2006 05:55:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 22:55:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 22:55:46 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G5cMf-0007Pb-JT
	for java-user@lucene.apache.org; Tue, 25 Jul 2006 22:55:25 -0700
Message-ID: <5498091.post@talk.nabble.com>
Date: Tue, 25 Jul 2006 22:55:25 -0700 (PDT)
From: headhunter <jleimbach@conet.de>
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
In-Reply-To: <44C63199.6040000@magpie.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: jleimbach@conet.de
X-Nabble-From: headhunter <jleimbach@conet.de>
References: <5485639.post@talk.nabble.com> <44C63199.6040000@magpie.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello Miles,

thanks for your answer. 

I guess the recommended way to implement paging of results is to do your own
query-results caching, right? Or does lucene also do this for me?


Johannes
-- 
View this message in context: http://www.nabble.com/Limit-number-of-search-results-tf1998377.html#a5498091
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 06:06:24 2006
Return-Path: <java-user-return-22264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14647 invoked from network); 26 Jul 2006 06:06:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 06:06:23 -0000
Received: (qmail 80612 invoked by uid 500); 26 Jul 2006 06:06:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80374 invoked by uid 500); 26 Jul 2006 06:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80362 invoked by uid 99); 26 Jul 2006 06:06:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:06:17 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:06:16 -0700
Received: (qmail 31399 invoked from network); 26 Jul 2006 06:05:54 -0000
Received: from unknown (HELO p5496d464.dip.t-dialin.net) ([pbs]695637@[84.150.212.100])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 26 Jul 2006 06:05:54 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
Date: Wed, 26 Jul 2006 08:06:02 +0200
User-Agent: KMail/1.8.2
References: <5485639.post@talk.nabble.com> <44C63199.6040000@magpie.net> <5498091.post@talk.nabble.com>
In-Reply-To: <5498091.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607260806.02204@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mittwoch 26 Juli 2006 07:55, headhunter wrote:

> I guess the recommended way to implement paging of results is to do your
> own query-results caching, right?

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-81ddcb6ef8573197a77e0c7b56b44cb27e6d7f09

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 06:10:30 2006
Return-Path: <java-user-return-22265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16341 invoked from network); 26 Jul 2006 06:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 06:10:30 -0000
Received: (qmail 86438 invoked by uid 500); 26 Jul 2006 06:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86413 invoked by uid 500); 26 Jul 2006 06:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86402 invoked by uid 99); 26 Jul 2006 06:10:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:10:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:10:21 -0700
Received: from [192.168.222.102] (host102.syd.nuix.com.au [192.168.222.102])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id C2426B7BF7
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 16:09:36 +1000 (EST)
Message-ID: <44C70783.6060305@nuix.com.au>
Date: Wed, 26 Jul 2006 16:11:15 +1000
From: Daniel Noll <daniel@nuix.com.au>
Organization: NUIX Pty Limited
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser.parse deprecated. What can I use?
References: <6026e8b0607242222w4f874365gba2b0831da0d639c@mail.gmail.com> <OFBBF2C95F.8401A8E0-ON882571B6.005E0E98-882571B6.005F6C52@il.ibm.com> <6026e8b0607251935j295a694ge185da267036ea0b@mail.gmail.com> <0BD7C47F-6E3D-4396-8DB8-F911D34069DC@rectangular.com>
In-Reply-To: <0BD7C47F-6E3D-4396-8DB8-F911D34069DC@rectangular.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Marvin Humphrey wrote:
> I believe that this will cause difficulties with prohibited terms.  Say 
> you have these two documents...
> 
>     Doc 1:
>        title: a
>        body:  foo
>     Doc 2:
>        title: b
>        body:  bar

It's not just prohibited terms.  Happens for required terms too.  A 
search for "a AND foo" would return no hits there even though it's a hit.

Daniel


-- 
Daniel Noll

Nuix Pty Ltd
Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902

This message is intended only for the named recipient. If you are not
the intended recipient you are notified that disclosing, copying,
distributing or taking any action in reliance on the contents of this
message or attachment is strictly prohibited.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 06:24:58 2006
Return-Path: <java-user-return-22266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21285 invoked from network); 26 Jul 2006 06:24:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 06:24:58 -0000
Received: (qmail 99148 invoked by uid 500); 26 Jul 2006 06:24:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99107 invoked by uid 500); 26 Jul 2006 06:24:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99094 invoked by uid 99); 26 Jul 2006 06:24:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:24:51 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Jul 2006 23:24:50 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G5coo-00085J-8l
	for java-user@lucene.apache.org; Tue, 25 Jul 2006 23:24:30 -0700
Message-ID: <5498319.post@talk.nabble.com>
Date: Tue, 25 Jul 2006 23:24:30 -0700 (PDT)
From: headhunter <jleimbach@conet.de>
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
In-Reply-To: <200607260806.02204@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: jleimbach@conet.de
X-Nabble-From: headhunter <jleimbach@conet.de>
References: <5485639.post@talk.nabble.com> <44C63199.6040000@magpie.net> <5498091.post@talk.nabble.com> <200607260806.02204@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello,

this really doesn't answer my question ;)

I've indeed read the FAQ (though I couldn't believe this point ;) .

Is it recommended to do the search again - discarding the uninteresting
values - because lucene caches the results, or just because lucene is so
damn fast?

Johannes
-- 
View this message in context: http://www.nabble.com/Limit-number-of-search-results-tf1998377.html#a5498319
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 07:17:54 2006
Return-Path: <java-user-return-22267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37390 invoked from network); 26 Jul 2006 07:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:17:54 -0000
Received: (qmail 69074 invoked by uid 500); 26 Jul 2006 07:17:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68673 invoked by uid 500); 26 Jul 2006 07:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68662 invoked by uid 99); 26 Jul 2006 07:17:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:17:47 -0700
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:17:45 -0700
Received: (qmail 18089 invoked from network); 26 Jul 2006 07:17:21 -0000
Received: from unknown (HELO p5496ce10.dip.t-dialin.net) ([pbs]695637@[84.150.206.16])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 26 Jul 2006 07:17:21 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
Date: Wed, 26 Jul 2006 09:17:30 +0200
User-Agent: KMail/1.8.2
References: <5485639.post@talk.nabble.com> <200607260806.02204@danielnaber.de> <5498319.post@talk.nabble.com>
In-Reply-To: <5498319.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607260917.30808@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mittwoch 26 Juli 2006 08:24, headhunter wrote:

> Is it recommended to do the search again - discarding the uninteresting
> values - because lucene caches the results, or just because lucene is so
> damn fast?

Lucene is fast enough in 99% of the cases. Caching is only done by the 
operating system on the I/O level.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 07:20:23 2006
Return-Path: <java-user-return-22268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37934 invoked from network); 26 Jul 2006 07:20:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:20:22 -0000
Received: (qmail 74482 invoked by uid 500); 26 Jul 2006 07:20:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73483 invoked by uid 500); 26 Jul 2006 07:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73472 invoked by uid 99); 26 Jul 2006 07:20:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:20:16 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:20:15 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G5dgQ-00010e-H1
	for java-user@lucene.apache.org; Wed, 26 Jul 2006 00:19:54 -0700
Message-ID: <5498842.post@talk.nabble.com>
Date: Wed, 26 Jul 2006 00:19:54 -0700 (PDT)
From: headhunter <jleimbach@conet.de>
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
In-Reply-To: <200607260917.30808@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: jleimbach@conet.de
X-Nabble-From: headhunter <jleimbach@conet.de>
References: <5485639.post@talk.nabble.com> <44C63199.6040000@magpie.net> <5498091.post@talk.nabble.com> <200607260806.02204@danielnaber.de> <5498319.post@talk.nabble.com> <200607260917.30808@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hello Daniel,

thank you for your answer. 

I'm still a little worried about doing uneccesarry work - this is totally
different from what I know when working with DBMS. 

Johannes
-- 
View this message in context: http://www.nabble.com/Limit-number-of-search-results-tf1998377.html#a5498842
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 07:54:57 2006
Return-Path: <java-user-return-22269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50080 invoked from network); 26 Jul 2006 07:54:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 07:54:57 -0000
Received: (qmail 13560 invoked by uid 500); 26 Jul 2006 07:54:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13535 invoked by uid 500); 26 Jul 2006 07:54:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13524 invoked by uid 99); 26 Jul 2006 07:54:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:54:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 00:54:50 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Copying documents
Date: Wed, 26 Jul 2006 08:54:44 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE828C9C@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Copying documents
Thread-Index: AcawGr+DmNepJfJ5S8eKyHGwb0qjbwAbXBXg
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,
   Thanks for this I will have to do it the long hand way, we are trying
to create "search marts" containing a smaller index from a much larger
one, so cloning and deleting will not work.

Thanks

Mike

www.ardentia.com the home of NetSearch

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 25 July 2006 19:47
To: java-user@lucene.apache.org
Subject: Re: Copying documents


: I want to copy a selection of documents from one index to another. I
can
: get the Document objects from the IndexReader and write them to the
: target index using the IndexWriter. The problem I have is this loses
: fields that have not been stored, is there a way round this.

there is no easy way to extract non-stored fields from an index.

if your goal is as you say just to verbatim copy documents from one
index
to another, look at the IndexWriter.addIndexes method which merges the
Term lists directly (without trying to reconstruct the orriginal
documents)

if you only want a subset of your orriginal index, clone it's directory,
delete the docs you don't wnat to copy, and then add the index.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 08:04:04 2006
Return-Path: <java-user-return-22270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52493 invoked from network); 26 Jul 2006 08:04:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 08:04:04 -0000
Received: (qmail 26527 invoked by uid 500); 26 Jul 2006 08:03:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26504 invoked by uid 500); 26 Jul 2006 08:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26491 invoked by uid 99); 26 Jul 2006 08:03:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:03:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:03:57 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 426CB5B77B; Wed, 26 Jul 2006 01:03:37 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3CEDB7F403
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 01:03:37 -0700 (PDT)
Date: Wed, 26 Jul 2006 01:03:37 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
In-Reply-To: <5498842.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0607260047002.22529@hal.rescomp.berkeley.edu>
References: <5485639.post@talk.nabble.com> <44C63199.6040000@magpie.net>
 <5498091.post@talk.nabble.com> <200607260806.02204@danielnaber.de>
 <5498319.post@talk.nabble.com> <200607260917.30808@danielnaber.de>
 <5498842.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I'm still a little worried about doing uneccesarry work - this is totally
: different from what I know when working with DBMS.

What are you describing as "uneccesarry work" examining every document
even though you only care about the first 10, or re-executing the search
when you want results 11-20 ?

In the first case: there is no uneccessary work.  Lucene must look at
every matching docId in order to determing which docs should be the first
10.

In the second case: if you feel you have a need to cache the results of a
search so that fetching page#2 can be fast that's entirely your call --
but the mantra of performance optimizations is don't do it untill you need
to.  Typically questions about caching and performance can only be
answered once you have some detailed performance numbers about your
specific use cases (which requires documenting exactly what your specific
use cases are, and then testing them) ... otherwise you're just guessing
and your "optimizations" could very well make things worse.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 08:10:11 2006
Return-Path: <java-user-return-22271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53892 invoked from network); 26 Jul 2006 08:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 08:10:10 -0000
Received: (qmail 36842 invoked by uid 500); 26 Jul 2006 08:10:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36424 invoked by uid 500); 26 Jul 2006 08:10:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36413 invoked by uid 99); 26 Jul 2006 08:10:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:10:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.187.175.75] (HELO staf-exm-01.ardentia.co.uk) (81.187.175.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:10:00 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index Rows as Documents? Help me design a solution
Date: Wed, 26 Jul 2006 09:09:56 +0100
Message-ID: <0B1C92228C5C8D45AA7450F78B3FB9DE828CA5@staf-exm-01.ardentia.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index Rows as Documents? Help me design a solution
Thread-Index: AcawMQ0Zu33cxkM+Q7WgMUoXpfpXfAAWHdQg
From: "Mike Streeton" <mike.streeton@ardentia.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The only way you might get the performance you want is to have multiple
IndexWriters writing to different indexes and then addAll are the end.
You would obviously have to handle the multi threading and distribution
of the parts of the log to each writer.

Mike

www.ardentia.com the home of NetSearch

-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: 25 July 2006 22:23
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution

Few comments -

> (from first posting in this thread)
> The indexing was taking much more than minutes for a 1 MB log file.
...
> I would expect to be able to index at least a of GB of logs within 1
or 2
minutes.

1-2 minutes per GB would be 30-60 GB/Hour, which for a single
machine/jvm
is a lot - well at least I did not see Lucene index this fast.

> doc.add(new Field("msisdn", columns[0], Field.Store.YES,
Field.Index.TOKENIZED));
> doc.add(new Field("messageid", columns[2], Field.Store.YES,
Field.Index.TOKENIZED));

Is it really required to analyze the text for these fields - "msisdn" ,
"
messageid"?

> doc.add(new Field("line", line, Field.Store.YES, Field.Index.NO));

This is storing the original text of all input lines that are indexed -
quite an overhead.

- Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 08:16:39 2006
Return-Path: <java-user-return-22272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59012 invoked from network); 26 Jul 2006 08:16:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 08:16:39 -0000
Received: (qmail 49754 invoked by uid 500); 26 Jul 2006 08:16:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49612 invoked by uid 500); 26 Jul 2006 08:16:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49600 invoked by uid 99); 26 Jul 2006 08:16:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:16:32 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 01:16:30 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G5eYs-0002D8-AF
	for java-user@lucene.apache.org; Wed, 26 Jul 2006 01:16:10 -0700
Message-ID: <5499379.post@talk.nabble.com>
Date: Wed, 26 Jul 2006 01:16:10 -0700 (PDT)
From: headhunter <jleimbach@conet.de>
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
In-Reply-To: <Pine.LNX.4.58.0607260047002.22529@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: jleimbach@conet.de
X-Nabble-From: headhunter <jleimbach@conet.de>
References: <5485639.post@talk.nabble.com> <44C63199.6040000@magpie.net> <5498091.post@talk.nabble.com> <200607260806.02204@danielnaber.de> <5498319.post@talk.nabble.com> <200607260917.30808@danielnaber.de> <5498842.post@talk.nabble.com> <Pine.LNX.4.58.0607260047002.22529@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Chris Hostetter wrote:
> 
> [..]
> 
> : In the first case: there is no uneccessary work.  Lucene must look at
> : every matching docId in order to determing which docs should be the
> first
> : 10.
> [..]
> 
Yes, you are right. Haven't thought of that :)

'Bout the second thing: You're right too.. I can indeed do other
optimimations which will work just fine !

Thanks for all your help!

Johannes


-- 
View this message in context: http://www.nabble.com/Limit-number-of-search-results-tf1998377.html#a5499379
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 09:09:54 2006
Return-Path: <java-user-return-22273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74195 invoked from network); 26 Jul 2006 09:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 09:09:54 -0000
Received: (qmail 46015 invoked by uid 500); 26 Jul 2006 09:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45987 invoked by uid 500); 26 Jul 2006 09:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45970 invoked by uid 99); 26 Jul 2006 09:09:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:09:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.59] (HELO web86907.mail.ukl.yahoo.com) (217.12.13.59)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Jul 2006 02:09:45 -0700
Received: (qmail 35670 invoked by uid 60001); 26 Jul 2006 09:09:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=BjwyK9MZW8GuUeAMpNiOZHlhV4zWhzXIXD4IpvWcczDxZ9FTLNuXe7SBauSAOnMbnvAkQ6pzpvGVvaTSuq/5roHt7cypOSugnfJ3AoV5v+JhOx/vb6XS6JMwtIhjvxqXmcwtfhWrrov6ggOcZ3UR45aw7j9AmSJEDzL+BVRelcU=  ;
Message-ID: <20060726090924.35668.qmail@web86907.mail.ukl.yahoo.com>
Received: from [193.253.247.218] by web86907.mail.ukl.yahoo.com via HTTP; Wed, 26 Jul 2006 11:09:24 CEST
Date: Wed, 26 Jul 2006 11:09:24 +0200 (CEST)
From: John john <ze_barbary@yahoo.fr>
Subject: RE : Re: index articles with groups
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0607241846550.29780@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1575460865-1153904964=:34742"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1575460865-1153904964=:34742
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Unfortunately this is not that easy. Because I must be able to retrieve only one article and if i index all the content in one document then all the document will be retrieved instead of the single article.

Chris Hostetter <hossman_lucene@fucit.org> a crit : 
:  Then if I search for a word which is present in article1 and article 2,
: i'd like to retrieve only one result because they are in the same group.

if you only want one result back per group, then odds are you want one
document per group -- nad index the text from all of the articles in that
group text in that single document.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



 		
---------------------------------
 Dcouvrez un nouveau moyen de poser toutes vos questions quelque soit le sujet ! Yahoo! Questions/Rponses pour partager vos connaissances, vos opinions et vos expriences. Cliquez ici. 
--0-1575460865-1153904964=:34742--

From java-user-return-22274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 09:51:29 2006
Return-Path: <java-user-return-22274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90887 invoked from network); 26 Jul 2006 09:51:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 09:51:29 -0000
Received: (qmail 13630 invoked by uid 500); 26 Jul 2006 09:51:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13600 invoked by uid 500); 26 Jul 2006 09:51:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13587 invoked by uid 99); 26 Jul 2006 09:51:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:51:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.30] (HELO mailrelay.is.nl) (213.133.33.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 02:51:21 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by mailrelay.is.nl (CommuniGate Pro SMTP 4.3.5)
  with ESMTP id 20531239 for java-user@lucene.apache.org; Wed, 26 Jul 2006 11:51:00 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Method to speed up caching for faceted navigation
Date: Wed, 26 Jul 2006 11:50:58 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7CEFE84A@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Method to speed up caching for faceted navigation
Thread-Index: AcawmLRGqVfQ9JNuR5qjAEeLsd11uw==
From: "Johan Stuyts" <j.stuyts@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am working on faceted navigation. This is nothing new but I am
anticpating an index that changes very frequently (every couple of
seconds). After the index has been updated, I need to cache the bit sets
of the facet values so I can do counting during searches later on.
Because I need to get a lot of bit sets often this needs to be as fast
as possible.

I did the following:
  IndexReader ir =3D ...;
  TermDocs td =3D ir.termDocs(new Term("facet name", "facet value"));
  while (td.next())
  {
    bitSet.set(td.doc());
  }

The problem with this code is that it gets the document IDs one by one.
I tried to optimize the loop by reading blocks of IDs by using
'read(int[], int[])', but this did not have a noticable effect.

I looked at the implementation of 'read(int[], int[])' in
'SegmentTermDocs' and saw that it did the following things:
- check if the document has a frequency higher than 1, and if so read
it;
- check if the document has been deleted, and if so don't add it to the
result;
- store the document IDs, counts and frequences in attributes instead of
local variables.

Given that the following preconditions hold in my situation:
- all documents have a frequency of 1 for the term;
- I never delete documents using the 'IndexReader' from which I get the
'TermDocs' object;
- I am only interested in the document IDs.

I made 'SegmentTermDocs' a public class and added the following method.
This method eliminates the overhead in the 'read(int[], int[]) method:
  public void readDocsWithoutFreqsAssumingNoDeletions(final BitSet
destination)
          throws IOException {
    int count =3D this.count;
    final int df =3D this.df;
    int doc =3D this.doc;
    while (count < df) {
      doc +=3D freqStream.readVInt() >>> 1;
      count++;

      destination.set(doc);
    }
    // Leave a consistent state
    this.doc =3D doc;
    freq =3D 1;
    this.count =3D df;
  }

By using the method above I gained a speed improvement of over 20%.

Will this method always work correctly given the preconditions?

Kind regards,

Johan Stuyts
Hippo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 13:15:53 2006
Return-Path: <java-user-return-22275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64076 invoked from network); 26 Jul 2006 13:15:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 13:15:52 -0000
Received: (qmail 36271 invoked by uid 500); 26 Jul 2006 13:15:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36242 invoked by uid 500); 26 Jul 2006 13:15:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36230 invoked by uid 99); 26 Jul 2006 13:15:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:15:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.5] (HELO randymail-a9.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:15:44 -0700
Received: from [192.168.1.132] (unknown [82.153.237.45])
	by randymail-a9.dreamhost.com (Postfix) with ESMTP id DD6D4EEBF9
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 06:15:22 -0700 (PDT)
Message-ID: <44C76A15.9010102@magpie.net>
Date: Wed, 26 Jul 2006 14:11:49 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Limit number of search results
References: <5485639.post@talk.nabble.com> <44C63199.6040000@magpie.net> <5498091.post@talk.nabble.com>
In-Reply-To: <5498091.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

headhunter wrote:

>I guess the recommended way to implement paging of results is to do your own
>query-results caching, right? Or does lucene also do this for me?
>

The other guys have covered caching of results in a general way, so I 
won't go into that.

For a search application I've written I have a separate class that acts 
as the model for a search. Basically it allows you to say how many 
results you want per page, and set the page number. Then you can have it 
spit out some XML for the results that should be visible, this includes 
title, search summary, link, etc. Similarly it can provide the necessary 
information to generate pagination links.

This object holds the reference to the Hits object, and is kept around 
for the duration of that user session. So I do cache the results and 
hence only execute the search once, but this is more as a consequence of 
how I modelled the interaction rather than a desire to cache.




Miles


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 13:46:35 2006
Return-Path: <java-user-return-22276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79083 invoked from network); 26 Jul 2006 13:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 13:46:34 -0000
Received: (qmail 27971 invoked by uid 500); 26 Jul 2006 13:46:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27949 invoked by uid 500); 26 Jul 2006 13:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27938 invoked by uid 99); 26 Jul 2006 13:46:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:46:27 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:46:26 -0700
Received: by py-out-1112.google.com with SMTP id d80so3505746pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 06:46:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SCLkC6opvrsz1Ej18ptiA6tdAyCb6CGwaUqbzkLk8EKjTcy1F94B6bIX8ozgyyUThAFDzb30Z0FamyJKhpt/iYnKY5cDK0mX3Ous+WFYiRRRijmBWocKtMHE45U64KBRJGT9MXCiOqJBkmWi54VZcc1NJqbvtMaBAMuDbIlEDwk=
Received: by 10.35.57.5 with SMTP id j5mr11350229pyk;
        Wed, 26 Jul 2006 06:46:06 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 26 Jul 2006 06:46:05 -0700 (PDT)
Message-ID: <359a92830607260646m54de89ddqdb2b48fbb49251af@mail.gmail.com>
Date: Wed, 26 Jul 2006 09:46:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: RE : Re: index articles with groups
In-Reply-To: <20060726090924.35668.qmail@web86907.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_102627_25462157.1153921565851"
References: <Pine.LNX.4.58.0607241846550.29780@hal.rescomp.berkeley.edu>
	 <20060726090924.35668.qmail@web86907.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_102627_25462157.1153921565851
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you're back to Karl's suggestion. Implement a HitCollector and
ignore all hits on a group ID after the first one. You even get the most
relevant article in the group that way <G>...

Best
Erick

------=_Part_102627_25462157.1153921565851--

From java-user-return-22277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 13:48:31 2006
Return-Path: <java-user-return-22277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79811 invoked from network); 26 Jul 2006 13:48:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 13:48:31 -0000
Received: (qmail 33118 invoked by uid 500); 26 Jul 2006 13:48:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33094 invoked by uid 500); 26 Jul 2006 13:48:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33083 invoked by uid 99); 26 Jul 2006 13:48:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:48:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.176] (HELO smtpout.mac.com) (17.250.248.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:48:24 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id k6QDm3fk020541
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 06:48:03 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k6QDm01U027338
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 06:48:02 -0700 (PDT)
Message-ID: <44C77287.4090104@mac.com>
Date: Wed, 26 Jul 2006 09:47:51 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Timestamps as milliseconds
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am working on indexing emails and have stored the data as 
milliseconds.  I was thinking of using a filter w/ my search that would 
only return the email in that data range.  I am currently indexing as 
follows:

doc.add(new Field("date", (String) itemContent.get("date").toString(), 
Field.Store.YES, Field.Index.UN_TOKENIZED));

does this look like a good approach to you all?

Thanks,
Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 13:56:30 2006
Return-Path: <java-user-return-22278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82670 invoked from network); 26 Jul 2006 13:56:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 13:56:30 -0000
Received: (qmail 56278 invoked by uid 500); 26 Jul 2006 13:56:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56254 invoked by uid 500); 26 Jul 2006 13:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56243 invoked by uid 99); 26 Jul 2006 13:56:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:56:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.98] (HELO randymail-a2.dreamhost.com) (208.97.132.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 06:56:21 -0700
Received: from [192.168.1.132] (unknown [82.153.237.45])
	by randymail-a2.dreamhost.com (Postfix) with ESMTP id 78FD7EE895
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 06:56:00 -0700 (PDT)
Message-ID: <44C7739B.3090805@magpie.net>
Date: Wed, 26 Jul 2006 14:52:27 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Timestamps as milliseconds
References: <44C77287.4090104@mac.com>
In-Reply-To: <44C77287.4090104@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael J. Prichard wrote:

> I am working on indexing emails and have stored the data as 
> milliseconds.  I was thinking of using a filter w/ my search that 
> would only return the email in that data range.  I am currently 
> indexing as follows:
>
> doc.add(new Field("date", (String) itemContent.get("date").toString(), 
> Field.Store.YES, Field.Index.UN_TOKENIZED));
>
> does this look like a good approach to you all?
>

Using milliseconds as your resolutions will make range searches very 
slow, since it has to enumerate so many values. I suggest using at most 
minutes instead.

But either way I suggest using DateTools rather than using a Date 
object's toString() form, i.e.:

doc.add(new Field("date", 
DateTools.dateToString(itemContent.get("date"), 
DateTools.Resolution.MILLISECOND), Field.Store.YES, 
Field.Index.UN_TOKENIZED));




Miles

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 14:24:54 2006
Return-Path: <java-user-return-22279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91892 invoked from network); 26 Jul 2006 14:24:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 14:24:54 -0000
Received: (qmail 15549 invoked by uid 500); 26 Jul 2006 14:24:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15528 invoked by uid 500); 26 Jul 2006 14:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15517 invoked by uid 99); 26 Jul 2006 14:24:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 07:24:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 07:24:46 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id 5A6317472B
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 16:24:23 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6B0BF.3FECF9D8"
Subject: Lock obtain timed out
Date: Wed, 26 Jul 2006 16:24:48 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BD85@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock obtain timed out
Thread-Index: AcawvzDYTTwIh2szSk6NtEOqtBcFYg==
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6B0BF.3FECF9D8
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Ok, this might have been answered somewhere, but I can't find it so here =
goes:
=20
When I close my application containing index writers the lock files are =
left in the temp directory causing an "Lock obtain timed out" error upon =
the next restart. I works of course if I remove the locks manually =
inbetween but that seems to be a strange solution. I am quite sure that =
this error didn't occur a couple of days ago, but I can't figure out =
why. I tried to add finalize methods that would close the writer but the =
don't seem to be invoked. I am currently trying to do a soulution based =
on Runtime.addShutdownHook(Thread) but I'm not sure that the shutdown =
thread can retrieve the index writer unless it is static. I guess that a =
shutdown hook could try to delete the lock files by guessing the file =
names but it seems a bad solution as well.=20
=20
--regards
=20
Bjorn
=20

------_=_NextPart_001_01C6B0BF.3FECF9D8--

From java-user-return-22280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 14:29:02 2006
Return-Path: <java-user-return-22280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94138 invoked from network); 26 Jul 2006 14:29:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 14:29:02 -0000
Received: (qmail 33818 invoked by uid 500); 26 Jul 2006 14:28:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33791 invoked by uid 500); 26 Jul 2006 14:28:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33780 invoked by uid 99); 26 Jul 2006 14:28:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 07:28:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.182] (HELO smtpout.mac.com) (17.250.248.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 07:28:54 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout12/MantshX 4.0) with ESMTP id k6QESYPY015369
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 07:28:34 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k6QESW1m014464
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 07:28:34 -0700 (PDT)
Message-ID: <44C77C01.1020403@mac.com>
Date: Wed, 26 Jul 2006 10:28:17 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Timestamps as milliseconds
References: <44C77287.4090104@mac.com> <44C7739B.3090805@magpie.net>
In-Reply-To: <44C7739B.3090805@magpie.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Miles Barr wrote:

> Michael J. Prichard wrote:
>
>> I am working on indexing emails and have stored the data as 
>> milliseconds.  I was thinking of using a filter w/ my search that 
>> would only return the email in that data range.  I am currently 
>> indexing as follows:
>>
>> doc.add(new Field("date", (String) 
>> itemContent.get("date").toString(), Field.Store.YES, 
>> Field.Index.UN_TOKENIZED));
>>
>> does this look like a good approach to you all?
>>
>
> Using milliseconds as your resolutions will make range searches very 
> slow, since it has to enumerate so many values. I suggest using at 
> most minutes instead.
>
> But either way I suggest using DateTools rather than using a Date 
> object's toString() form, i.e.:
>
> doc.add(new Field("date", 
> DateTools.dateToString(itemContent.get("date"), 
> DateTools.Resolution.MILLISECOND), Field.Store.YES, 
> Field.Index.UN_TOKENIZED));
>
>
>
>
> Miles
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
I guess the more I think about it I don't really care about the minutes 
in the initial.  All that matters is the date (i.e. 2006-07-25).  The 
only thing I would need the time for would be for sorting so I need to 
have that too.  Ideas?

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 14:33:44 2006
Return-Path: <java-user-return-22281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96404 invoked from network); 26 Jul 2006 14:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 14:33:44 -0000
Received: (qmail 51041 invoked by uid 500); 26 Jul 2006 14:33:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51009 invoked by uid 500); 26 Jul 2006 14:33:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50998 invoked by uid 99); 26 Jul 2006 14:33:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 07:33:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 07:33:37 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Wed, 26 Jul 2006 10:33:16 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
Content-Transfer-Encoding: 7bit
Message-Id: <5368C58F-7FE4-4BC9-8FE3-426D4AB4357D@genome.chop.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Can Field types affect search speed?
Date: Wed, 26 Jul 2006 10:33:15 -0400
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Currently, I have field "DOC" which is indexed, but not stored and  
not compressed.  This is the field that users query.  I also have a  
field "SYM" which is indexed and stored, but not compressed.  For  
every document returned in a query, I need its symbol.  Can field  
types (indexed vs. not indexed, compressed vs. not compressed, etc.)  
affect search speed?  If so, are my settings the optimal settings for  
my purposes, or is there a better combination of field settings?

On another note, does anyone know how to return the field values  
only, rather than the whole document?  This, I believe, would speed  
things up, but I haven't been able to find how to do it.

Thanks for the time and help,

Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 15:06:46 2006
Return-Path: <java-user-return-22282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11188 invoked from network); 26 Jul 2006 15:06:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 15:06:45 -0000
Received: (qmail 43767 invoked by uid 500); 26 Jul 2006 15:06:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43740 invoked by uid 500); 26 Jul 2006 15:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43729 invoked by uid 99); 26 Jul 2006 15:06:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 08:06:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.98] (HELO randymail-a4.dreamhost.com) (208.97.132.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 08:06:37 -0700
Received: from [192.168.1.132] (unknown [82.153.237.45])
	by randymail-a4.dreamhost.com (Postfix) with ESMTP id 4D4C719532F
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 08:06:15 -0700 (PDT)
Message-ID: <44C78412.8070802@magpie.net>
Date: Wed, 26 Jul 2006 16:02:42 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Timestamps as milliseconds
References: <44C77287.4090104@mac.com> <44C7739B.3090805@magpie.net> <44C77C01.1020403@mac.com>
In-Reply-To: <44C77C01.1020403@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael J. Prichard wrote:

> I guess the more I think about it I don't really care about the 
> minutes in the initial.  All that matters is the date (i.e. 
> 2006-07-25).  The only thing I would need the time for would be for 
> sorting so I need to have that too.  Ideas?
>

Store as much detail as you need to sort by. For display purposes just 
use java.text.SimpleDateFormat to only show the date and not the time.



Miles

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 15:58:26 2006
Return-Path: <java-user-return-22283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31787 invoked from network); 26 Jul 2006 15:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 15:58:25 -0000
Received: (qmail 75800 invoked by uid 500); 26 Jul 2006 15:58:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75780 invoked by uid 500); 26 Jul 2006 15:58:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75769 invoked by uid 99); 26 Jul 2006 15:58:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 08:58:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of namityadav@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 08:58:16 -0700
Received: by nf-out-0910.google.com with SMTP id o63so702142nfa
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 08:57:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rpGn3pqHOIK0sHXlTVDErDEIi7MVexNmIdEbOk6aOlvD+x1sw4MKRqeW+Rv2M2TlAa08hpNYO3FaOF3wsDeo34vcJ4heSMmdBTe53AJVv+BA6eLpKRPEO+Q+vGcodAsKe9nlzfOXMc+vLLmMcS1J5qEBpLIaT58clMRMhhShwdo=
Received: by 10.78.158.11 with SMTP id g11mr3214574hue;
        Wed, 26 Jul 2006 08:57:55 -0700 (PDT)
Received: by 10.78.100.7 with HTTP; Wed, 26 Jul 2006 08:57:54 -0700 (PDT)
Message-ID: <f0d8e9dd0607260857g11411981u4d9ad5fe1f0ad3f0@mail.gmail.com>
Date: Wed, 26 Jul 2006 08:57:54 -0700
From: "Namit Yadav" <namityadav@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
In-Reply-To: <0B1C92228C5C8D45AA7450F78B3FB9DE828CA5@staf-exm-01.ardentia.co.uk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_41779_307876.1153929474704"
References: <0B1C92228C5C8D45AA7450F78B3FB9DE828CA5@staf-exm-01.ardentia.co.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_41779_307876.1153929474704
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks all for the responses. I am very pleasently surprised at the helpful
responses that I am getting.

Okay, I think I still haven't understood Lucene well. I am sure that I am
not solving the problem the right way. So I am explaining the problem at a
very high level here .. please tell me what my design should be:

I have GBs of logs where each row is of the type
"Col1#Col2#Col3#Col4#Col5...". Now I want to be able to search the logs for
Col1 or Col2 and get all the rows containing these two columns.

Now what I do is, I run a shell script to split the logs into smaller files
of 1MB each, then index all the files just as the lucene example works. Then
when I search for a term, I get the log-file names that contain the data.
Then I buffer-read those files and find out rows containing the data.

I am very sure this is a very bad way of solving the problem. There should
be some way of me telling Lucene that it just needs to make sure that the
two columns Col1 and Col2 can be searched, and skip the rest. Then there
should be some way of telling Lucene to store the indexes in a way that a
search query can result the complete row when searched for Col1 or Col2,
instead of file-names containing the data.

I tried to have each row as a document, but as my first mail says, I didn't
get the kind of performance I wanted. I am going to run some checks (As
Erick suggested). But Doron's email has made me wonder if I am doing it
right at all.

Can you guys please help me understand how this problem can be best solved?

Thanks a lot for the help so far

On 7/26/06, Mike Streeton <mike.streeton@ardentia.co.uk> wrote:
>
> The only way you might get the performance you want is to have multiple
> IndexWriters writing to different indexes and then addAll are the end.
> You would obviously have to handle the multi threading and distribution
> of the parts of the log to each writer.
>
> Mike
>
> www.ardentia.com the home of NetSearch
>
> -----Original Message-----
> From: Doron Cohen [mailto:DORONC@il.ibm.com]
> Sent: 25 July 2006 22:23
> To: java-user@lucene.apache.org
> Subject: Re: Index Rows as Documents? Help me design a solution
>
> Few comments -
>
> > (from first posting in this thread)
> > The indexing was taking much more than minutes for a 1 MB log file.
> ...
> > I would expect to be able to index at least a of GB of logs within 1
> or 2
> minutes.
>
> 1-2 minutes per GB would be 30-60 GB/Hour, which for a single
> machine/jvm
> is a lot - well at least I did not see Lucene index this fast.
>
> > doc.add(new Field("msisdn", columns[0], Field.Store.YES,
> Field.Index.TOKENIZED));
> > doc.add(new Field("messageid", columns[2], Field.Store.YES,
> Field.Index.TOKENIZED));
>
> Is it really required to analyze the text for these fields - "msisdn" ,
> "
> messageid"?
>
> > doc.add(new Field("line", line, Field.Store.YES, Field.Index.NO));
>
> This is storing the original text of all input lines that are indexed -
> quite an overhead.
>
> - Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_41779_307876.1153929474704--

From java-user-return-22284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 16:24:17 2006
Return-Path: <java-user-return-22284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40812 invoked from network); 26 Jul 2006 16:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 16:24:17 -0000
Received: (qmail 51289 invoked by uid 500); 26 Jul 2006 16:24:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51241 invoked by uid 500); 26 Jul 2006 16:24:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51208 invoked by uid 99); 26 Jul 2006 16:24:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 09:24:08 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jbensley.ng@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 09:24:07 -0700
Received: by py-out-1112.google.com with SMTP id d80so3554352pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 09:23:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KKcCMT2ViujZvofGPnJc8JuvkRo29l45HrlM9PDtc19dNa/8SHkVIj6KjL0Eb1TIZSVFrsyAN99T7a5z4Bvu8n7oOAej+WMoiahoMza0DHWv5tEZSryY0FpyKdTdDDWc2z4l0bIkAm+KDOeJ//L2oysSQ/qpqk9zjJaZrK0KNoI=
Received: by 10.35.27.2 with SMTP id e2mr11552034pyj;
        Wed, 26 Jul 2006 09:23:44 -0700 (PDT)
Received: by 10.35.122.2 with HTTP; Wed, 26 Jul 2006 09:23:44 -0700 (PDT)
Message-ID: <e489d22a0607260923t28b8c75i424a7e46abc550b5@mail.gmail.com>
Date: Wed, 26 Jul 2006 11:23:44 -0500
From: "Jeremy Bensley" <jbensley.ng@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
In-Reply-To: <f0d8e9dd0607260857g11411981u4d9ad5fe1f0ad3f0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_125499_5246662.1153931024257"
References: <0B1C92228C5C8D45AA7450F78B3FB9DE828CA5@staf-exm-01.ardentia.co.uk>
	 <f0d8e9dd0607260857g11411981u4d9ad5fe1f0ad3f0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_125499_5246662.1153931024257
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Just my 0.02, but I think you are correct in creating one document per line
in your database in order to achieve your desired result.

In my experience, there are a few things that you might do differently :

The MaxBufferedDocs parameter has a huge impact on indexing speed. The
default of 10 is very 'safe', in that it uses very little memory but
severely restricts the indexer. Depending on the length of the lines in your
log and the RAM on the indexing machine, it seems like you could set this to
1000 or more; if you start running out of memory you could scale it back.

Also, it is probably not necessary to STORE the first two fields, since
those are your searching fields and you can retrieve that information from
the full line that does get stored. It might very slightly improve things if
your first two fields could be indexed UNTOKENIZED and avoid running the
analyzer.

If you are certain that your lines will not exceed a maximum length, you can
also set IndexWriter.setMaxFieldLength(max), which may also save you some
resources (memory, disk space). I think the default is 10000 characters,
which seems a bit large for your application.

I'm not an expert on Lucene, but I do know that changing these parameters in
my application makes a huge impact in performance.

Jeremy

On 7/26/06, Namit Yadav <namityadav@gmail.com> wrote:
>
> Thanks all for the responses. I am very pleasently surprised at the
> helpful
> responses that I am getting.
>
> Okay, I think I still haven't understood Lucene well. I am sure that I am
> not solving the problem the right way. So I am explaining the problem at a
> very high level here .. please tell me what my design should be:
>
> I have GBs of logs where each row is of the type
> "Col1#Col2#Col3#Col4#Col5...". Now I want to be able to search the logs
> for
> Col1 or Col2 and get all the rows containing these two columns.
>
> Now what I do is, I run a shell script to split the logs into smaller
> files
> of 1MB each, then index all the files just as the lucene example works.
> Then
> when I search for a term, I get the log-file names that contain the data.
> Then I buffer-read those files and find out rows containing the data.
>
> I am very sure this is a very bad way of solving the problem. There should
> be some way of me telling Lucene that it just needs to make sure that the
> two columns Col1 and Col2 can be searched, and skip the rest. Then there
> should be some way of telling Lucene to store the indexes in a way that a
> search query can result the complete row when searched for Col1 or Col2,
> instead of file-names containing the data.
>
> I tried to have each row as a document, but as my first mail says, I
> didn't
> get the kind of performance I wanted. I am going to run some checks (As
> Erick suggested). But Doron's email has made me wonder if I am doing it
> right at all.
>
> Can you guys please help me understand how this problem can be best
> solved?
>
> Thanks a lot for the help so far
>
> On 7/26/06, Mike Streeton <mike.streeton@ardentia.co.uk> wrote:
> >
> > The only way you might get the performance you want is to have multiple
> > IndexWriters writing to different indexes and then addAll are the end.
> > You would obviously have to handle the multi threading and distribution
> > of the parts of the log to each writer.
> >
> > Mike
> >
> > www.ardentia.com the home of NetSearch
> >
> > -----Original Message-----
> > From: Doron Cohen [mailto:DORONC@il.ibm.com]
> > Sent: 25 July 2006 22:23
> > To: java-user@lucene.apache.org
> > Subject: Re: Index Rows as Documents? Help me design a solution
> >
> > Few comments -
> >
> > > (from first posting in this thread)
> > > The indexing was taking much more than minutes for a 1 MB log file.
> > ...
> > > I would expect to be able to index at least a of GB of logs within 1
> > or 2
> > minutes.
> >
> > 1-2 minutes per GB would be 30-60 GB/Hour, which for a single
> > machine/jvm
> > is a lot - well at least I did not see Lucene index this fast.
> >
> > > doc.add(new Field("msisdn", columns[0], Field.Store.YES,
> > Field.Index.TOKENIZED));
> > > doc.add(new Field("messageid", columns[2], Field.Store.YES,
> > Field.Index.TOKENIZED));
> >
> > Is it really required to analyze the text for these fields - "msisdn" ,
> > "
> > messageid"?
> >
> > > doc.add(new Field("line", line, Field.Store.YES, Field.Index.NO));
> >
> > This is storing the original text of all input lines that are indexed -
> > quite an overhead.
> >
> > - Doron
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>

------=_Part_125499_5246662.1153931024257--

From java-user-return-22285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 16:56:11 2006
Return-Path: <java-user-return-22285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49217 invoked from network); 26 Jul 2006 16:56:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 16:56:11 -0000
Received: (qmail 34140 invoked by uid 500); 26 Jul 2006 16:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33979 invoked by uid 500); 26 Jul 2006 16:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33968 invoked by uid 99); 26 Jul 2006 16:56:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 09:56:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 09:56:03 -0700
Received: from [10.10.150.49] ([10.10.150.49])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k6QGtesC025705
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 11:55:43 -0500
Message-ID: <44C79E79.3000704@wolfram.com>
Date: Wed, 26 Jul 2006 12:55:21 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: email libraries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anyone know of good free email libraries I can use for lucene indexing 
for Windows Outlook Express and Unix emails??

suba suresh.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:04:32 2006
Return-Path: <java-user-return-22286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50956 invoked from network); 26 Jul 2006 17:04:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:04:31 -0000
Received: (qmail 47941 invoked by uid 500); 26 Jul 2006 17:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47915 invoked by uid 500); 26 Jul 2006 17:04:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47904 invoked by uid 99); 26 Jul 2006 17:04:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:04:24 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:04:24 -0700
Received: by py-out-1112.google.com with SMTP id d80so3567493pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 10:04:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EEsVWCp26fVpcY0kju0AbJuBsa9bQLgmDEl/N64DycX8Ak0hiXzCvHNuAPis/XlJFwqTdrOaEOxvOShrQo8RCm77EV6g/e8/ncNAZMGO0igOFIQBN6Aw1UL2PndXK1piQh5mrs514txglmwIG7OIo+PTCkHNZsWHHF0kj6t0SnI=
Received: by 10.35.70.2 with SMTP id x2mr11590976pyk;
        Wed, 26 Jul 2006 10:04:03 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 26 Jul 2006 10:04:03 -0700 (PDT)
Message-ID: <359a92830607261004t6825fbccrf8d4c6ca7bca8444@mail.gmail.com>
Date: Wed, 26 Jul 2006 13:04:03 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can Field types affect search speed?
In-Reply-To: <5368C58F-7FE4-4BC9-8FE3-426D4AB4357D@genome.chop.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106658_31782416.1153933443453"
References: <5368C58F-7FE4-4BC9-8FE3-426D4AB4357D@genome.chop.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_106658_31782416.1153933443453
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you using a Hits object to iterate over the results? If so, you are
re-executing the query every 100 docs or so under the covers, and if there
are many results, this is very bad.

If this is the case, you want to use a TopDocs or HitCollector to iterate
through the entire result set.

Of course, this could be entirely irrelevant to your problem......

My experience has been that "fetching the doc" isn't a problem speed-wise,
but I have no idea whether your app is different enough from mine to matter
in this regard.

Best
Erick

------=_Part_106658_31782416.1153933443453--

From java-user-return-22287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:15:42 2006
Return-Path: <java-user-return-22287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54340 invoked from network); 26 Jul 2006 17:15:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:15:42 -0000
Received: (qmail 68224 invoked by uid 500); 26 Jul 2006 17:15:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67801 invoked by uid 500); 26 Jul 2006 17:15:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67776 invoked by uid 99); 26 Jul 2006 17:15:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:15:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:15:34 -0700
Received: from [10.10.150.49] ([10.10.150.49])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k6QHFD28026044
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 12:15:14 -0500
Message-ID: <44C7A30E.5050801@wolfram.com>
Date: Wed, 26 Jul 2006 13:14:54 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Out of memory error
References: <20060713151717.9B7EB187BE@mail.seseit.com>
In-Reply-To: <20060713151717.9B7EB187BE@mail.seseit.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry for my late response. It took us some time to run it again. We 
increased the memory heap to 1G as you suggested and it works. The 
indexer is not crashing. (We are running into some other problem with a 
powerpoint file .That is for another email).

The code change with 
PDFTextStripper.writeText((org.pdfbox.pdmodel.PDDocument,%20java.io.Writer) 
did not work for us.


Thanks for all the help.

suba suresh.

Rob Staveley (Tom) wrote:
> Let us know how you get on. There are a lot of people fighting very similar
> battles on this list. 
> 
> -----Original Message-----
> From: Suba Suresh [mailto:subas@wolfram.com] 
> Sent: 13 July 2006 15:30
> To: java-user@lucene.apache.org
> Subject: Re: Out of memory error
> 
> Thanks.
> 
> I am using the getText(PDDocument) method of the PDFTextStripper. I will try
> the other suggestion.
> 
> suba suresh.
> 
> Rob Staveley (Tom) wrote:
> 
>>If you are using
>>http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#get
>>Text(o rg.pdfbox.pdmodel.PDDocument), you are going to get a large 
>>String and may need a 1G heap.
>>
>>If, however, you are using
>>http://www.pdfbox.org/javadoc/org/pdfbox/util/PDFTextStripper.html#wri
>>teText
>>(org.pdfbox.pdmodel.PDDocument,%20java.io.Writer) to go via a 
>>temporary file, you will not need so much RAM, but you need to use 
>>http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Fiel
>>d.html
>>#Field(java.lang.String,%20java.io.Reader) to construct your Lucene 
>>field (rather than 
>>http://lucene.apache.org/java/docs/api/org/apache/lucene/document/Fiel
>>d.html 
>>#Field(java.lang.String,%20java.lang.String,%20org.apache.lucene.docum
>>ent.Fi eld.Store,%20org.apache.lucene.document.Field.Index)).
>>
>>-----Original Message-----
>>From: Suba Suresh [mailto:subas@wolfram.com]
>>Sent: 13 July 2006 14:55
>>To: java-user@lucene.apache.org
>>Subject: Out of memory error
>>
>>I am indexing different document formats with lucene 1.9. One of the 
>>pdf file I am indexing is 300MG. Whenever the index writer hits that 
>>file it stops the indexing with "Out of Memory" exception. I am using 
>>the pdf box library to index. I have set the following merge factors in my
> 
> code.
> 
>>writer.setMergeFactor(1000);
>>writer.setMaxMergeDocs(9999999);
>>writer.setMaxBufferedDocs(1000);
>>writer.setMaxFieldLength(Integer.MAX_VALUE);
>>
>>I would like any help and suggestions.
>>
>>thanks,
>>suba suresh.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:23:37 2006
Return-Path: <java-user-return-22288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56856 invoked from network); 26 Jul 2006 17:23:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:23:37 -0000
Received: (qmail 81047 invoked by uid 500); 26 Jul 2006 17:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81020 invoked by uid 500); 26 Jul 2006 17:23:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81008 invoked by uid 99); 26 Jul 2006 17:23:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:23:31 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:23:30 -0700
Received: by py-out-1112.google.com with SMTP id d80so3572916pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 10:23:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GHzD6+CEy++uLZvrXqHt/TFf4YpgjicBwLIu6n0baNIFHWJsiWmihDSHaBGcAMuhAwt3rQ+suiMyfGADo2zGAnPv5KY7q554XEkgSuMf1H2Uk4/bOOPVtmgs3uVhXVzOsiYs1M96Sob5YF3kYFoQ2s/VFRQR5rgKKD9gXMlULuw=
Received: by 10.35.76.5 with SMTP id d5mr11615525pyl;
        Wed, 26 Jul 2006 10:23:05 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 26 Jul 2006 10:23:05 -0700 (PDT)
Message-ID: <359a92830607261023r6e7f9e04u25b7505327c27250@mail.gmail.com>
Date: Wed, 26 Jul 2006 13:23:05 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Timestamps as milliseconds
In-Reply-To: <44C77C01.1020403@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_106966_31628619.1153934585123"
References: <44C77287.4090104@mac.com> <44C7739B.3090805@magpie.net>
	 <44C77C01.1020403@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_106966_31628619.1153934585123
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

two ideas:

1> store a second field that contains the time resolution you need, and sort
by that. You can still search (quickly) by the day-resolution field.
2> If you KNOW that you are indexing the e-mails in time-order, then sorting
by doc_id will preserve the time ordering.

Erick

------=_Part_106966_31628619.1153934585123--

From java-user-return-22289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:39:53 2006
Return-Path: <java-user-return-22289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63165 invoked from network); 26 Jul 2006 17:39:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:39:53 -0000
Received: (qmail 17233 invoked by uid 500); 26 Jul 2006 17:39:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16208 invoked by uid 500); 26 Jul 2006 17:39:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16197 invoked by uid 99); 26 Jul 2006 17:39:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:39:47 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.159 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:39:46 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn1.fre.skanova.net (7.2.075)
        id 44A135F1005CA280 for java-user@lucene.apache.org; Wed, 26 Jul 2006 19:39:24 +0200
Subject: Re: Lock obtain timed out
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BD85@ad01.aza.se>
References: <6F4F5B8F19AA954DB9002305E4D6D14901BD85@ad01.aza.se>
Content-Type: text/plain; charset=ISO-8859-1
Organization: snigel heavy industries
Date: Wed, 26 Jul 2006 19:39:17 +0200
Message-Id: <1153935558.4881.116.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2006-07-26 at 16:24 +0200, Bjrn Ekengren wrote:
> When I close my application containing index writers the
> lock files are left in the temp directory causing an "Lock obtain
> timed out" error upon the next restart.

My guess is that you keep a writer open even though there is no activity
involving adding new documents. Unless I have a massive never ending
stream of new data arriving (many thousand per minute) I usually try not
to have an open writer. Opening, adding documents and closing the writer
in iterations.

It will help if you posted some code showing how you handle the writer.

> I am currently trying to do a soulution based on
> Runtime.addShutdownHook(Thread) but I'm not sure that the shutdown
> thread can retrieve the index writer unless it is static. I guess that
> a shutdown hook could try to delete the lock files by guessing the
> file names but it seems a bad solution as well. 

You probably should not have to do that.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:45:36 2006
Return-Path: <java-user-return-22290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65206 invoked from network); 26 Jul 2006 17:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:45:35 -0000
Received: (qmail 28410 invoked by uid 500); 26 Jul 2006 17:45:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28384 invoked by uid 500); 26 Jul 2006 17:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28373 invoked by uid 99); 26 Jul 2006 17:45:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:45:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [159.14.214.193] (HELO genomemail.chop.edu) (159.14.214.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:45:28 -0700
Received: from [159.14.214.144] ([159.14.214.144]) BY genomemail.chop.edu ([159.14.214.193])
 WITH ESMTP (4D WebSTAR V Mail (5.3.4)); Wed, 26 Jul 2006 13:45:08 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <359a92830607261004t6825fbccrf8d4c6ca7bca8444@mail.gmail.com>
References: <5368C58F-7FE4-4BC9-8FE3-426D4AB4357D@genome.chop.edu> <359a92830607261004t6825fbccrf8d4c6ca7bca8444@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A913FA9E-1B4C-44A9-8502-4929AB85E2CA@genome.chop.edu>
Content-Transfer-Encoding: 7bit
From: Ryan O'Hara <ohara@genome.chop.edu>
Subject: Re: Can Field types affect search speed?
Date: Wed, 26 Jul 2006 13:45:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm not using a Hits object.  I'm using a HitCollector.  I was just  
curious about whether Field settings could affect search  
performance.  Any ideas?

Ryan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:51:09 2006
Return-Path: <java-user-return-22291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67155 invoked from network); 26 Jul 2006 17:51:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:51:09 -0000
Received: (qmail 37836 invoked by uid 500); 26 Jul 2006 17:51:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37797 invoked by uid 500); 26 Jul 2006 17:51:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37785 invoked by uid 99); 26 Jul 2006 17:51:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:51:03 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:51:02 -0700
Received: by py-out-1112.google.com with SMTP id d80so3580531pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 10:50:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UsFFcp+EnY47MIDlcnjDr31G0tViqesG6mslbv/NXJu9F9e+RSJdwVAEJNS6nRE4EP9mPDavgLAd+/0guDtK+3r2muTzsJMWePjkHwK8Qt0Gdot34nmn4S8snHtwTpu8BmvdlkKeGSUDZLYGPeXok5vJSU4SV89t+ZA++wVPzH4=
Received: by 10.35.70.2 with SMTP id x2mr11648224pyk;
        Wed, 26 Jul 2006 10:50:40 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 26 Jul 2006 10:50:39 -0700 (PDT)
Message-ID: <359a92830607261050k1fb8742fudc8d0e2904f9a26@mail.gmail.com>
Date: Wed, 26 Jul 2006 13:50:39 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
In-Reply-To: <e489d22a0607260923t28b8c75i424a7e46abc550b5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_107523_21555903.1153936239970"
References: <0B1C92228C5C8D45AA7450F78B3FB9DE828CA5@staf-exm-01.ardentia.co.uk>
	 <f0d8e9dd0607260857g11411981u4d9ad5fe1f0ad3f0@mail.gmail.com>
	 <e489d22a0607260923t28b8c75i424a7e46abc550b5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_107523_21555903.1153936239970
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It feels to me like you're major problem might be file IO with all those
files. There's no need to split the files up first and then index the files.
Just read through the log and index each row. The code fragment you posted
should allow you to get the line back from the "line" field of each
document. That way, when you execute searches, you also avoid the file I/O.
Once indexed, you shouldn't have to go back to the disk to get the
data......

This scares me...

*********************
....Then
when I search for a term, I get the log-file names that contain the data.
Then I buffer-read those files and find out rows containing the data....
*********************

According to the fragment you posted, you already have the data in the index
and don't need to go to disk and get it. Which could be a major issue.....

Are we still talking about indexing speed or have we segued to search speed?
Jeremy's suggestion about MaxBufferedDocs is well heeded.....

One final confusion.... Watch the Hits object when searching. The hits
object is built for getting the first few hits (100 or so). If you iterate
over more documents than that, the Hits object will re-execute your query
every 100 or so documents. You'll want to think about a HitCollector or
TopDocs object for large result sets. Again, the quick timing thing is to
cut off your responses at, say, 50 and see how long the search takes as
opposed to collecting all responses. Ditto for the file I/O. If we're
talking about the search speed, try it without reading the files....


Keep us posted
Erick

------=_Part_107523_21555903.1153936239970--

From java-user-return-22292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:52:29 2006
Return-Path: <java-user-return-22292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67586 invoked from network); 26 Jul 2006 17:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:52:29 -0000
Received: (qmail 41058 invoked by uid 500); 26 Jul 2006 17:52:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41025 invoked by uid 500); 26 Jul 2006 17:52:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41014 invoked by uid 99); 26 Jul 2006 17:52:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:52:22 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:52:22 -0700
Received: by py-out-1112.google.com with SMTP id d80so3580871pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 10:52:01 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MkT7NkuCulBf+vVKGc1oiJREvFFvGrmGr472MyvoLcsoI9/JjaYBPwICzmd4jlv4eHYSf+iXPV/En4PsZiARjR5jYDMJCtCF5UKQ2hMwyXnmg+SO48m0vBQB0m68h1PEUQHQfZreMNIAI50v/mikiX72IN4qwU1hEgRsBwfUqzU=
Received: by 10.35.105.18 with SMTP id h18mr11659092pym;
        Wed, 26 Jul 2006 10:52:01 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 26 Jul 2006 10:52:01 -0700 (PDT)
Message-ID: <359a92830607261052x31db26a9w245f1c56e3bb1b66@mail.gmail.com>
Date: Wed, 26 Jul 2006 13:52:01 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can Field types affect search speed?
In-Reply-To: <A913FA9E-1B4C-44A9-8502-4929AB85E2CA@genome.chop.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_107543_11542682.1153936321488"
References: <5368C58F-7FE4-4BC9-8FE3-426D4AB4357D@genome.chop.edu>
	 <359a92830607261004t6825fbccrf8d4c6ca7bca8444@mail.gmail.com>
	 <A913FA9E-1B4C-44A9-8502-4929AB85E2CA@genome.chop.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_107543_11542682.1153936321488
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

nope, haven't had to worry about it yet <G>...

Erick

------=_Part_107543_11542682.1153936321488--

From java-user-return-22293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 17:52:47 2006
Return-Path: <java-user-return-22293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67707 invoked from network); 26 Jul 2006 17:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 17:52:47 -0000
Received: (qmail 42579 invoked by uid 500); 26 Jul 2006 17:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42547 invoked by uid 500); 26 Jul 2006 17:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42536 invoked by uid 99); 26 Jul 2006 17:52:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:52:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 10:52:40 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k6QHqICU005718
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 18:52:19 +0100
Received: from [192.168.0.16] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.139-alpha)
    via ESMTP; Wed, 26 Jul 2006 18:52:18 +0100 (BST)
Date: Wed, 26 Jul 2006 18:52:17 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44C7ABD1.7070609@scalix.com>
In-Reply-To: <44C79E79.3000704@wolfram.com>
References: <44C79E79.3000704@wolfram.com>
Subject: Re: email libraries
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.4 (X11/20060614)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Suba Suresh wrote:
> Anyone know of good free email libraries I can use for lucene indexing 
> for Windows Outlook Express and Unix emails??
javamail.   Not sure how you get hold of the messages from Outlook 
Express, but getting hold of the MIME message in most Unix-based message 
stores is relatively easy.   You might, however, prefer to go down the 
POP or IMAP route for getting hold of the messages to index -- either 
way, javamail is your friend.

jch

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 18:00:45 2006
Return-Path: <java-user-return-22294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70117 invoked from network); 26 Jul 2006 18:00:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 18:00:45 -0000
Received: (qmail 55703 invoked by uid 500); 26 Jul 2006 18:00:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55657 invoked by uid 500); 26 Jul 2006 18:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55636 invoked by uid 99); 26 Jul 2006 18:00:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:00:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:00:29 -0700
Received: from [10.10.150.49] ([10.10.150.49])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k6QI084K026907
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:00:09 -0500
Message-ID: <44C7AD94.9030509@wolfram.com>
Date: Wed, 26 Jul 2006 13:59:48 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: email libraries
References: <44C79E79.3000704@wolfram.com> <44C7ABD1.7070609@scalix.com>
In-Reply-To: <44C7ABD1.7070609@scalix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok. I will try it. I am a little stupid. When you said go down POP or 
IMAP route what did you mean? Is it for Unix/Linux alone that path?

thanks,
suba suresh.

John Haxby wrote:
> Suba Suresh wrote:
> 
>> Anyone know of good free email libraries I can use for lucene indexing 
>> for Windows Outlook Express and Unix emails??
> 
> javamail.   Not sure how you get hold of the messages from Outlook 
> Express, but getting hold of the MIME message in most Unix-based message 
> stores is relatively easy.   You might, however, prefer to go down the 
> POP or IMAP route for getting hold of the messages to index -- either 
> way, javamail is your friend.
> 
> jch
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 18:12:48 2006
Return-Path: <java-user-return-22295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73800 invoked from network); 26 Jul 2006 18:12:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 18:12:48 -0000
Received: (qmail 77629 invoked by uid 500); 26 Jul 2006 18:12:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77390 invoked by uid 500); 26 Jul 2006 18:12:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77379 invoked by uid 99); 26 Jul 2006 18:12:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:12:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:12:40 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k6QICVa14337
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:12:31 -0500
Message-ID: <44C7B064.4050305@getopt.org>
Date: Wed, 26 Jul 2006 20:11:48 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: email libraries
References: <44C79E79.3000704@wolfram.com> <44C7ABD1.7070609@scalix.com>
In-Reply-To: <44C7ABD1.7070609@scalix.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Haxby wrote:
> Suba Suresh wrote:
>> Anyone know of good free email libraries I can use for lucene 
>> indexing for Windows Outlook Express and Unix emails??
> javamail.   Not sure how you get hold of the messages from Outlook 
> Express, but getting hold of the MIME message in most Unix-based 
> message stores is relatively easy.   You might, however, prefer to go 
> down the POP or IMAP route for getting hold of the messages to index 
> -- either way, javamail is your friend.

Just for the record - I've been using javamail POP and IMAP providers in 
the past, and they were prone to hanging with some servers, and resource 
intensive. I've been also using Outlook (proper, not Outlook Express - 
this is AFAIK impossible to work with) via a Java-COM bridge such as 
Jawin or JNIWrapper plus Redemption . This also tends to be rather 
unstable, and requires a lot of fine-tuning ...

So, be prepared to suffer quite a bit. ;)

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 18:16:57 2006
Return-Path: <java-user-return-22296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74866 invoked from network); 26 Jul 2006 18:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 18:16:57 -0000
Received: (qmail 85284 invoked by uid 500); 26 Jul 2006 18:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85100 invoked by uid 500); 26 Jul 2006 18:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85089 invoked by uid 99); 26 Jul 2006 18:16:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:16:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.28] (HELO out4.smtp.messagingengine.com) (66.111.4.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 11:16:50 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id 64ADAD9226E
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 14:16:28 -0400 (EDT)
Received: from heartbeat2.messagingengine.com ([10.202.2.161])
  by frontend3.internal (MEProxy); Wed, 26 Jul 2006 14:16:32 -0400
X-Sasl-enc: N46aeieklClmU1ZWfyYR/Uy5jW7TVDD80v5HpzTHBXlX 1153937791
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 8C749EE5
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 14:16:31 -0400 (EDT)
Message-ID: <44C7B17A.4050901@mikemccandless.com>
Date: Wed, 26 Jul 2006 14:16:26 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lock obtain timed out
References: <6F4F5B8F19AA954DB9002305E4D6D14901BD85@ad01.aza.se> <1153935558.4881.116.camel@localhost>
In-Reply-To: <1153935558.4881.116.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>> When I close my application containing index writers the
>> lock files are left in the temp directory causing an "Lock obtain
>> timed out" error upon the next restart.
> 
> My guess is that you keep a writer open even though there is no activity
> involving adding new documents. Unless I have a massive never ending
> stream of new data arriving (many thousand per minute) I usually try not
> to have an open writer. Opening, adding documents and closing the writer
> in iterations.

It's also odd that you can repeat this so easily.  What OS/platform are 
you using?

The IndexWriter and IndexReader have their own finalizers to release 
(remove) the lock files.

Is it possible your JVM is exiting in a non-graceful manner (ie crashing)?

One known issue is Lucene just calls java.io.File.delete to remove the 
lock file, but doesn't check/confirm the returned result of this call 
that the file was actually deleted.  We are working on improving the 
locking by using native (OS) locks instead, which should correctly free 
lock files whenever the JVM process exits.  But this won't happen until 
a future Lucene release...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 19:19:53 2006
Return-Path: <java-user-return-22297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93408 invoked from network); 26 Jul 2006 19:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 19:19:52 -0000
Received: (qmail 98339 invoked by uid 500); 26 Jul 2006 19:19:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98315 invoked by uid 500); 26 Jul 2006 19:19:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98304 invoked by uid 99); 26 Jul 2006 19:19:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:19:46 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Jul 2006 12:19:44 -0700
Received: (qmail 80178 invoked by uid 60001); 26 Jul 2006 19:19:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=moXJyMq8bSS5rGTQaW3ZBKSjSVOuoCWguEIz8DZZQfUhtfZPtY+coBdTWZMahl9swuxAsrC52aVHHo2f0ujQqW+wj7PmARVs+B3iftkguZMmjFRuYOmz137FFmOjwhOuMu44T52myaNKKnBhgWZzbafFvyOX3h769VUH9pomk8A=  ;
Message-ID: <20060726191923.80176.qmail@web50308.mail.yahoo.com>
Received: from [72.229.167.99] by web50308.mail.yahoo.com via HTTP; Wed, 26 Jul 2006 12:19:23 PDT
Date: Wed, 26 Jul 2006 12:19:23 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Newbie synonyms question
To: java-user@lucene.apache.org
In-Reply-To: <D3FB08E688E4954EADE12CCFFA2F2548014A6EF2@canat0411.ca.deloitte.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Andrew,

There is othing built into Lucene for synonyms, but you can grab the code f=
rom Lucene in Action to see how they can be handled (plus: http://www.lucen=
ebook.com/search?query=3Dsynonyms for some context)

Otis

----- Original Message ----
From: "Lee, Andrew J (CA - Toronto)" <andrlee@deloitte.ca>
To: java-user@lucene.apache.org
Sent: Monday, July 24, 2006 8:52:10 PM
Subject: Newbie synonyms question

Sorry if this question has already been answered, but it is regarding

synonyms.



I am using the WordNet/Synonyms index and using the following algorithm

to create synonym searches (this is a dumbed down version):



Look up a the "base" word in the synonym index

In my search string, replace all instances of the base word with

"(synonym1 | synonym 2 | ... | synonym n)"

Use this new search string against my search index



1)  Is there an easier / more efficient way to go about this?

2)  Does Lucene have any built-in capability to handle synonyms?  For

example, can I point it to the synonym index and let Lucene perform all

the work of synonym lookup / replacement?



Thanks in advance,



Andrew Lee









-----------------------------------------

*******************************************************************

*******************

Confidentiality Warning: This message and any attachments are

intended only for the use of the intended recipient(s), are

confidential, and may be privileged. If you are not the intended

recipient, you are hereby notified that any review, retransmission,

conversion to hard copy, copying, circulation or other use of this

message and any attachments is strictly prohibited. If you are not

the intended recipient, please notify the sender immediately by

return e-mail, and delete this message and any attachments from

your system. Thank you.



Information confidentielle: Le pr=C3=A9sent message, ainsi que tout

fichier qui y est joint, est envoy=C3=A9 =C3=A0 l'intention exclusive de

son ou de ses destinataires; il est de nature confidentielle et

peut constituer une information privil=C3=A9gi=C3=A9e. Nous avertissons

toute personne autre que le destinataire pr=C3=A9vu que tout examen,

r=C3=A9acheminement, impression, copie, distribution ou autre

utilisation de ce message et de tout fichier qui y est joint est

strictement interdit. Si vous n'=C3=AAtes pas le destinataire pr=C3=A9vu,

veuillez en aviser imm=C3=A9diatement l'exp=C3=A9diteur par retour de

courriel et supprimer ce message et tout document joint de votre

syst=C3=A8me. Merci.

*******************************************************************

*******************





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 19:38:31 2006
Return-Path: <java-user-return-22298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4282 invoked from network); 26 Jul 2006 19:38:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 19:38:30 -0000
Received: (qmail 29955 invoked by uid 500); 26 Jul 2006 19:38:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29925 invoked by uid 500); 26 Jul 2006 19:38:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29901 invoked by uid 99); 26 Jul 2006 19:38:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:38:23 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of namityadav@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:38:21 -0700
Received: by nf-out-0910.google.com with SMTP id o63so771158nfa
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 12:37:59 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y19IW/2twy6Yuadbp7hAPcqyui0kM104uBKY4ReWLEQbzIEqejURcujEh62PVmiZSomAchTIOxqxL/gM6H2RvYFJItL7XYOXsWjbYjVhMTNbWr2HgYGu7nWDRvdXhyY7B01OD8VpGT8md3B8jf/kBfWVDbOy7H4k0t3fKT/WOi8=
Received: by 10.78.177.3 with SMTP id z3mr3408249hue;
        Wed, 26 Jul 2006 12:37:58 -0700 (PDT)
Received: by 10.78.100.7 with HTTP; Wed, 26 Jul 2006 12:37:58 -0700 (PDT)
Message-ID: <f0d8e9dd0607261237t30cae397u9a4f336309726684@mail.gmail.com>
Date: Wed, 26 Jul 2006 12:37:58 -0700
From: "Namit Yadav" <namityadav@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Rows as Documents? Help me design a solution
In-Reply-To: <359a92830607261050k1fb8742fudc8d0e2904f9a26@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_52108_29088713.1153942678456"
References: <0B1C92228C5C8D45AA7450F78B3FB9DE828CA5@staf-exm-01.ardentia.co.uk>
	 <f0d8e9dd0607260857g11411981u4d9ad5fe1f0ad3f0@mail.gmail.com>
	 <e489d22a0607260923t28b8c75i424a7e46abc550b5@mail.gmail.com>
	 <359a92830607261050k1fb8742fudc8d0e2904f9a26@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_52108_29088713.1153942678456
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the suggestions !

I am still talking about Indexing. The 'split the files' implementation was
just an experiment as I wasn't able to get the kind of performance I needed
from making rows as Documents. Now back to using rows as Documents:

As Erick and Jeremy suggested, the MaxBufferedDocs has helped improve the
performance a lot. I have set it to 1000 (Because each row is a Document for
me), and maxFieldLength to 50 (Although changing it hasn't shown any
difference in performance .. which surprised me). Now I see that a 2MB log
file was indexed in 30 secs. It has 66000 rows. Considering that Erick was
seeing 10000 XML docs getting indexed in 15 secs, I am assuming that 66000
much simpler documents getting indexed in 30 secs can still be improved?

Optimization is taking under 2 secs, so I am assuming that's not a problem
for now.

This is what my indexing is like:

        try {
            System.out.println("Indexing " + f.getCanonicalPath());
            BufferedReader br = new BufferedReader(new FileReader(f));
            String line = null;
            String[] columns = null;
            while((line = br.readLine())!=null) {
                columns = line.split("#");
                if(columns.length == 4) {
                        Document doc = new Document();
                        doc.add(new Field("msisdn", columns[0],
Field.Store.YES, Field.Index.NO));
                        doc.add(new Field("messageid", columns[2],
Field.Store.YES, Field.Index.NO));
                        doc.add(new Field("line", line, Field.Store.YES,
Field.Index.TOKENIZED));
                        writer.addDocument(doc);
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

It takes the BufferedReader 5 secs to read a 100 MB log file. So I am
assuming that the file-reading is not taking too much time here. I even
tried to just readLine and index it (Without the split() and without the
fields msisdn and messageid). It still took 30secs to index the file. So I
am almost sure that almost all the time is taken in the actual indexing.

Then I search like this (Search takes just a few millisecs, so I am happy
there. But I still want to let you experts tell me if I am doing something
wrong):

        Directory fsDir = FSDirectory.getDirectory(indexDir, false);
        IndexSearcher is = new IndexSearcher(fsDir);
        QueryParser parser = new QueryParser("line", new
StandardAnalyzer());
        Query query = parser.parse(q);
        Hits hits = is.search(query);
        int length = hits.length();
        if (length>100) length = 100;
        for (int i = 0; i < length; i++) {
            Document doc = hits.doc(i);
            String messageid = doc.get("messageid");
            // Ensure uniqueness of messageid before sending it to GUI
            System.out.println("messageid[" + i + "] = " + messageid);
        }
        // one messageID search
        System.out.print("Enter the messageID to get details of: ");
        String mid = new BufferedReader(new InputStreamReader(System.in
)).readLine().trim();
        System.out.println("Result: ");
        parser = new QueryParser("line", new StandardAnalyzer());
        query = parser.parse(mid);
        hits = is.search(query);
        for (int i = 0; i < hits.length(); i++) {
            Document doc = hits.doc(i);
            String row = doc.get("line");
            System.out.println(row);
        }

Regards
Namit

On 7/26/06, Erick Erickson <erickerickson@gmail.com> wrote:
>
> It feels to me like you're major problem might be file IO with all those
> files. There's no need to split the files up first and then index the
> files.
> Just read through the log and index each row. The code fragment you posted
> should allow you to get the line back from the "line" field of each
> document. That way, when you execute searches, you also avoid the file
> I/O.
> Once indexed, you shouldn't have to go back to the disk to get the
> data......
>
> This scares me...
>
> *********************
> ....Then
> when I search for a term, I get the log-file names that contain the data.
> Then I buffer-read those files and find out rows containing the data....
> *********************
>
> According to the fragment you posted, you already have the data in the
> index
> and don't need to go to disk and get it. Which could be a major issue.....
>
> Are we still talking about indexing speed or have we segued to search
> speed?
> Jeremy's suggestion about MaxBufferedDocs is well heeded.....
>
> One final confusion.... Watch the Hits object when searching. The hits
> object is built for getting the first few hits (100 or so). If you iterate
> over more documents than that, the Hits object will re-execute your query
> every 100 or so documents. You'll want to think about a HitCollector or
> TopDocs object for large result sets. Again, the quick timing thing is to
> cut off your responses at, say, 50 and see how long the search takes as
> opposed to collecting all responses. Ditto for the file I/O. If we're
> talking about the search speed, try it without reading the files....
>
>
> Keep us posted
> Erick
>
>

------=_Part_52108_29088713.1153942678456--

From java-user-return-22299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 19:53:46 2006
Return-Path: <java-user-return-22299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11160 invoked from network); 26 Jul 2006 19:53:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 19:53:46 -0000
Received: (qmail 57359 invoked by uid 500); 26 Jul 2006 19:53:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57333 invoked by uid 500); 26 Jul 2006 19:53:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57322 invoked by uid 99); 26 Jul 2006 19:53:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:53:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.185] (HELO smtpout.mac.com) (17.250.248.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 12:53:38 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout15/MantshX 4.0) with ESMTP id k6QJrIvp004541
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 12:53:18 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k6QJrDLL010188
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 12:53:17 -0700 (PDT)
Message-ID: <44C7C7E9.1010207@mac.com>
Date: Wed, 26 Jul 2006 15:52:09 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Timestamps as milliseconds
References: <44C77287.4090104@mac.com> <44C7739B.3090805@magpie.net> <44C77C01.1020403@mac.com>
In-Reply-To: <44C77C01.1020403@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael J. Prichard wrote:

> Miles Barr wrote:
>
>> Michael J. Prichard wrote:
>>
>>> I am working on indexing emails and have stored the data as 
>>> milliseconds.  I was thinking of using a filter w/ my search that 
>>> would only return the email in that data range.  I am currently 
>>> indexing as follows:
>>>
>>> doc.add(new Field("date", (String) 
>>> itemContent.get("date").toString(), Field.Store.YES, 
>>> Field.Index.UN_TOKENIZED));
>>>
>>> does this look like a good approach to you all?
>>>
>>
>> Using milliseconds as your resolutions will make range searches very 
>> slow, since it has to enumerate so many values. I suggest using at 
>> most minutes instead.
>>
>> But either way I suggest using DateTools rather than using a Date 
>> object's toString() form, i.e.:
>>
>> doc.add(new Field("date", 
>> DateTools.dateToString(itemContent.get("date"), 
>> DateTools.Resolution.MILLISECOND), Field.Store.YES, 
>> Field.Index.UN_TOKENIZED));
>>
>>
>>
>>
>> Miles
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> I guess the more I think about it I don't really care about the 
> minutes in the initial.  All that matters is the date (i.e. 
> 2006-07-25).  The only thing I would need the time for would be for 
> sorting so I need to have that too.  Ideas?
>
> Thanks!
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

On this note....I want do a RangeQuery on the date (but I only care 
about YYYYMMDD).  What's the best way to index that?  I plan on storing 
the timestamp for sorting only.

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 20:01:28 2006
Return-Path: <java-user-return-22300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14225 invoked from network); 26 Jul 2006 20:01:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:01:28 -0000
Received: (qmail 74895 invoked by uid 500); 26 Jul 2006 20:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74868 invoked by uid 500); 26 Jul 2006 20:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74857 invoked by uid 99); 26 Jul 2006 20:01:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:01:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.171.57.70] (HELO deloitte.ca) (209.171.57.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:01:21 -0700
Received: from ([10.55.44.174])
	by camail2.deloitte.ca with ESMTP  id KP-BYA98.42871544;
	Wed, 26 Jul 2006 16:01:25 -0400
Received: from canat0411.ca.deloitte.com ([10.55.44.111]) by canat0474.ca.deloitte.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 26 Jul 2006 16:00:09 -0400
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Transfer-Encoding: quoted-printable
Subject: RE: Newbie synonyms question
Date: Wed, 26 Jul 2006 16:00:08 -0400
Message-ID: <D3FB08E688E4954EADE12CCFFA2F2548014EEFD0@canat0411.ca.deloitte.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Newbie synonyms question
thread-index: Acaw6IQzLnij0+VvQqWXSXmuYJ718wABSy6A
From: "Lee, Andrew J \(CA - Toronto\)" <andrlee@deloitte.ca>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Jul 2006 20:00:09.0479 (UTC) FILETIME=[19004170:01C6B0EE]
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, Otis=2E  I think the SynonymAnalyzer is the way to go, injecting th=
e synonyms while removing the stop words=2E=0D=0A=0D=0AAndrew=0D=0A=0D=0A=
=0D=0A-----Original Message-----=0D=0AFrom: Otis Gospodnetic [mailto:otis_g=
ospodnetic@yahoo=2Ecom] =0D=0ASent: Wednesday, July 26, 2006 3:19 PM=0D=0AT=
o: java-user@lucene=2Eapache=2Eorg=0D=0ASubject: Re: Newbie synonyms questi=
on=0D=0A=0D=0AHi Andrew,=0D=0A=0D=0AThere is othing built into Lucene for s=
ynonyms, but you can grab the code from Lucene in Action to see how they ca=
n be handled (plus: http://www=2Elucenebook=2Ecom/search?query=3Dsynonyms f=
or some context)=0D=0A=0D=0AOtis=0D=0A=0D=0A----- Original Message ----=0D=
=0AFrom: "Lee, Andrew J (CA - Toronto)" <andrlee@deloitte=2Eca>=0D=0ATo: ja=
va-user@lucene=2Eapache=2Eorg=0D=0ASent: Monday, July 24, 2006 8:52:10 PM=
=0D=0ASubject: Newbie synonyms question=0D=0A=0D=0ASorry if this question h=
as already been answered, but it is regarding=0D=0A=0D=0Asynonyms=2E=0D=0A=
=0D=0A=0D=0A=0D=0AI am using the WordNet/Synonyms index and using the follo=
wing algorithm=0D=0A=0D=0Ato create synonym searches (this is a dumbed down=
 version):=0D=0A=0D=0A=0D=0A=0D=0ALook up a the "base" word in the synonym =
index=0D=0A=0D=0AIn my search string, replace all instances of the base wor=
d with=0D=0A=0D=0A"(synonym1 | synonym 2 | =2E=2E=2E | synonym n)"=0D=0A=0D=
=0AUse this new search string against my search index=0D=0A=0D=0A=0D=0A=0D=
=0A1)  Is there an easier / more efficient way to go about this?=0D=0A=0D=
=0A2)  Does Lucene have any built-in capability to handle synonyms?  For=0D=
=0A=0D=0Aexample, can I point it to the synonym index and let Lucene perfor=
m all=0D=0A=0D=0Athe work of synonym lookup / replacement?=0D=0A=0D=0A=0D=
=0A=0D=0AThanks in advance,=0D=0A=0D=0A=0D=0A=0D=0AAndrew Lee=0D=0A=0D=0A=
=0D=0A=0D=0A=0D=0A=0D=0A=0D=0A=0D=0A=0D=0A=0D=0A---------------------------=
--------------=0D=0A=0D=0A*************************************************=
******************=0D=0A=0D=0A*******************=0D=0A=0D=0AConfidentialit=
y Warning: This message and any attachments are=0D=0A=0D=0Aintended only fo=
r the use of the intended recipient(s), are=0D=0A=0D=0Aconfidential, and ma=
y be privileged=2E If you are not the intended=0D=0A=0D=0Arecipient, you ar=
e hereby notified that any review, retransmission,=0D=0A=0D=0Aconversion to=
 hard copy, copying, circulation or other use of this=0D=0A=0D=0Amessage an=
d any attachments is strictly prohibited=2E If you are not=0D=0A=0D=0Athe i=
ntended recipient, please notify the sender immediately by=0D=0A=0D=0Aretur=
n e-mail, and delete this message and any attachments from=0D=0A=0D=0Ayour =
system=2E Thank you=2E=0D=0A=0D=0A=0D=0A=0D=0AInformation confidentielle: L=
e pr=E9sent message, ainsi que tout=0D=0A=0D=0Afichier qui y est joint, est=
 envoy=E9 =E0 l'intention exclusive de=0D=0A=0D=0Ason ou de ses destinatair=
es; il est de nature confidentielle et=0D=0A=0D=0Apeut constituer une infor=
mation privil=E9gi=E9e=2E Nous avertissons=0D=0A=0D=0Atoute personne autre =
que le destinataire pr=E9vu que tout examen,=0D=0A=0D=0Ar=E9acheminement, i=
mpression, copie, distribution ou autre=0D=0A=0D=0Autilisation de ce messag=
e et de tout fichier qui y est joint est=0D=0A=0D=0Astrictement interdit=2E=
 Si vous n'=EAtes pas le destinataire pr=E9vu,=0D=0A=0D=0Aveuillez en avise=
r imm=E9diatement l'exp=E9diteur par retour de=0D=0A=0D=0Acourriel et suppr=
imer ce message et tout document joint de votre=0D=0A=0D=0Asyst=E8me=2E Mer=
ci=2E=0D=0A=0D=0A**********************************************************=
*********=0D=0A=0D=0A*******************=0D=0A=0D=0A=0D=0A=0D=0A=0D=0A=0D=
=0A---------------------------------------------------------------------=0D=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene=2Eapache=2Eorg=0D=
=0AFor additional commands, e-mail: java-user-help@lucene=2Eapache=2Eorg=0D=
=0A=0D=0A=0D=0A-----------------------------------------=0D=0A*************=
******************************************************=0D=0A***************=
****=0D=0AConfidentiality Warning: This message and any attachments are=0D=
=0Aintended only for the use of the intended recipient(s), are=0D=0Aconfide=
ntial, and may be privileged=2E If you are not the intended=0D=0Arecipient,=
 you are hereby notified that any review, retransmission,=0D=0Aconversion t=
o hard copy, copying, circulation or other use of this=0D=0Amessage and any=
 attachments is strictly prohibited=2E If you are not=0D=0Athe intended rec=
ipient, please notify the sender immediately by=0D=0Areturn e-mail, and del=
ete this message and any attachments from=0D=0Ayour system=2E Thank you=2E=
=0D=0A=0D=0AInformation confidentielle: Le pr=E9sent message, ainsi que tou=
t=0D=0Afichier qui y est joint, est envoy=E9 =E0 l'intention exclusive de=
=0D=0Ason ou de ses destinataires; il est de nature confidentielle et=0D=0A=
peut constituer une information privil=E9gi=E9e=2E Nous avertissons=0D=0Ato=
ute personne autre que le destinataire pr=E9vu que tout examen,=0D=0Ar=E9ac=
heminement, impression, copie, distribution ou autre=0D=0Autilisation de ce=
 message et de tout fichier qui y est joint est=0D=0Astrictement interdit=
=2E Si vous n'=EAtes pas le destinataire pr=E9vu,=0D=0Aveuillez en aviser i=
mm=E9diatement l'exp=E9diteur par retour de=0D=0Acourriel et supprimer ce m=
essage et tout document joint de votre=0D=0Asyst=E8me=2E Merci=2E=0D=0A****=
***************************************************************=0D=0A******=
*************=0D=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 20:04:37 2006
Return-Path: <java-user-return-22301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15240 invoked from network); 26 Jul 2006 20:04:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:04:37 -0000
Received: (qmail 82750 invoked by uid 500); 26 Jul 2006 20:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82724 invoked by uid 500); 26 Jul 2006 20:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82713 invoked by uid 99); 26 Jul 2006 20:04:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:04:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.164.102.196] (HELO mail.gotuit.com) (216.164.102.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:04:29 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Matched part of query
Date: Wed, 26 Jul 2006 16:04:03 -0400
Message-ID: <586B46B62C73C44AA8F4302E01A84A84031CEA@exchange.gotuit.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Matched part of query
Thread-Index: Acaw6HaSDqmR5hI4RlaCGXvoSUMLWgABay7w
From: "Seeta Somagani" <seeta@gotuit.com>
To: <java-user@lucene.apache.org>,
	"Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi all,

Is there a way to return with a hit, the part of the query that matched
in the corresponding document? I need to return combinations of
documents that together contain the query or a relatively large part of
the query.

Thanks,
Seeta

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 20:35:03 2006
Return-Path: <java-user-return-22302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24279 invoked from network); 26 Jul 2006 20:35:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:35:03 -0000
Received: (qmail 35140 invoked by uid 500); 26 Jul 2006 20:34:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35040 invoked by uid 500); 26 Jul 2006 20:34:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35029 invoked by uid 99); 26 Jul 2006 20:34:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:34:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.184] (HELO smtpout.mac.com) (17.250.248.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:34:54 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout14/MantshX 4.0) with ESMTP id k6QKYX3W017519
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:34:33 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k6QKYLed016471
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:34:32 -0700 (PDT)
Message-ID: <44C7D186.10005@mac.com>
Date: Wed, 26 Jul 2006 16:33:10 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: To Tokenize or Un_Tokenize?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If I want to search an email address (i.e. michael@foo.com) do I need to 
Tokenize that field?

doc.add(new Field("from", (String) itemContent.get("from"), 
Field.Store.YES, Field.Index.TOKENIZED));

-OR-

doc.add(new Field("from", (String) itemContent.get("from"), 
Field.Store.YES, Field.Index.UN_TOKENIZED));

Thx.
Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 20:39:36 2006
Return-Path: <java-user-return-22303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26520 invoked from network); 26 Jul 2006 20:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:39:35 -0000
Received: (qmail 48080 invoked by uid 500); 26 Jul 2006 20:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48059 invoked by uid 500); 26 Jul 2006 20:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48048 invoked by uid 99); 26 Jul 2006 20:39:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:39:29 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:39:28 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44A2E86F00572F09 for java-user@lucene.apache.org; Wed, 26 Jul 2006 22:39:06 +0200
Subject: Re: To Tokenize or Un_Tokenize?
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <44C7D186.10005@mac.com>
References: <44C7D186.10005@mac.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Wed, 26 Jul 2006 22:39:04 +0200
Message-Id: <1153946345.4881.130.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 2006-07-26 at 16:33 -0400, Michael J. Prichard wrote:
> If I want to search an email address (i.e. michael@foo.com) do I need to 
> Tokenize that field?

Do you want to match on the full address only, or on parts too? 

If A, don't tokenize. 
If B, tokenize. And write an analyzer that will handle it.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 20:44:51 2006
Return-Path: <java-user-return-22304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28255 invoked from network); 26 Jul 2006 20:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:44:50 -0000
Received: (qmail 63469 invoked by uid 500); 26 Jul 2006 20:44:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63444 invoked by uid 500); 26 Jul 2006 20:44:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63425 invoked by uid 99); 26 Jul 2006 20:44:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:44:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.173] (HELO smtpout.mac.com) (17.250.248.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:44:43 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id k6QKiNCe005756
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:44:23 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k6QKiK0H020570
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:44:22 -0700 (PDT)
Message-ID: <44C7D3DE.5070205@mac.com>
Date: Wed, 26 Jul 2006 16:43:10 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: To Tokenize or Un_Tokenize?
References: <44C7D186.10005@mac.com> <1153946345.4881.130.camel@localhost>
In-Reply-To: <1153946345.4881.130.camel@localhost>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

karl wettin wrote:

>On Wed, 2006-07-26 at 16:33 -0400, Michael J. Prichard wrote:
>  
>
>>If I want to search an email address (i.e. michael@foo.com) do I need to 
>>Tokenize that field?
>>    
>>
>
>Do you want to match on the full address only, or on parts too? 
>
>If A, don't tokenize. 
>If B, tokenize. And write an analyzer that will handle it.
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>
I am using a StandardAnalyzer which (i think) keeps the email intact.   
I think the most I need to do is a PrefixQuery.  Will that work w/ 
UN_TOKENIZED?

Now, say I do want to search on parts...I guess my analyzer would have 
to break the email apart as follows:

michael@foo.com  -->  [michael] [foo] [com] 

??

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 20:50:38 2006
Return-Path: <java-user-return-22305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29644 invoked from network); 26 Jul 2006 20:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:50:37 -0000
Received: (qmail 73982 invoked by uid 500); 26 Jul 2006 20:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73948 invoked by uid 500); 26 Jul 2006 20:50:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73937 invoked by uid 99); 26 Jul 2006 20:50:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:50:31 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Jul 2006 13:50:27 -0700
Received: (qmail 57987 invoked by uid 60001); 26 Jul 2006 20:50:06 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Bn0Jht7wmpF3sr0ZvEp3y0/9msoi1H5mCVMzbqPrNu87r2wRBRByL5UDk3sG6w1f+wfoJZd+D+z0UTUx8jZRni3rc7toLYbpvPN3IBpFwPZaNnp8vd8om2NvABQCtD1HWurgPK6OUQn8lSN1afhpqfchgz2HazodHG0N/KtasDc=  ;
Message-ID: <20060726205006.57985.qmail@web50303.mail.yahoo.com>
Received: from [72.229.167.99] by web50303.mail.yahoo.com via HTTP; Wed, 26 Jul 2006 13:50:06 PDT
Date: Wed, 26 Jul 2006 13:50:06 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: To Tokenize or Un_Tokenize?
To: java-user@lucene.apache.org
In-Reply-To: <44C7D186.10005@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You most certainly want to index the whole token, and likely portions of it (didn't you already ask this a few weeks ago?).
You will want to write your own Analyzer + Tokenizer that's email-address-format-aware and does things like:
emit the whole token
emit the username portion
email the fully qualified host name
email the fully qualified domain name

Perhaps you'll want to index some of these as separate fields, or perhaps you'll want to also index user@domain even if an email address looks like user@foo.domain

Otis
 

----- Original Message ----
From: Michael J. Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Sent: Wednesday, July 26, 2006 4:33:10 PM
Subject: To Tokenize or Un_Tokenize?

If I want to search an email address (i.e. michael@foo.com) do I need to 
Tokenize that field?

doc.add(new Field("from", (String) itemContent.get("from"), 
Field.Store.YES, Field.Index.TOKENIZED));

-OR-

doc.add(new Field("from", (String) itemContent.get("from"), 
Field.Store.YES, Field.Index.UN_TOKENIZED));

Thx.
Michael


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 20:55:08 2006
Return-Path: <java-user-return-22306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31013 invoked from network); 26 Jul 2006 20:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 20:55:08 -0000
Received: (qmail 81639 invoked by uid 500); 26 Jul 2006 20:55:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81615 invoked by uid 500); 26 Jul 2006 20:55:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81601 invoked by uid 99); 26 Jul 2006 20:55:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:55:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.185] (HELO smtpout.mac.com) (17.250.248.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 13:54:59 -0700
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout15/MantshX 4.0) with ESMTP id k6QKsdVr019147
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:54:39 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id k6QKsXX2006040
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 13:54:38 -0700 (PDT)
Message-ID: <44C7D641.5080100@mac.com>
Date: Wed, 26 Jul 2006 16:53:21 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: To Tokenize or Un_Tokenize?
References: <20060726205006.57985.qmail@web50303.mail.yahoo.com>
In-Reply-To: <20060726205006.57985.qmail@web50303.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

:) I probably did ask...my mind is turning into mush!  Hehe....

Ok...let me write me an email analyzer.

Thanks!
Michael

Otis Gospodnetic wrote:

>You most certainly want to index the whole token, and likely portions of it (didn't you already ask this a few weeks ago?).
>You will want to write your own Analyzer + Tokenizer that's email-address-format-aware and does things like:
>emit the whole token
>emit the username portion
>email the fully qualified host name
>email the fully qualified domain name
>
>Perhaps you'll want to index some of these as separate fields, or perhaps you'll want to also index user@domain even if an email address looks like user@foo.domain
>
>Otis
> 
>
>----- Original Message ----
>From: Michael J. Prichard <michael_prichard@mac.com>
>To: java-user@lucene.apache.org
>Sent: Wednesday, July 26, 2006 4:33:10 PM
>Subject: To Tokenize or Un_Tokenize?
>
>If I want to search an email address (i.e. michael@foo.com) do I need to 
>Tokenize that field?
>
>doc.add(new Field("from", (String) itemContent.get("from"), 
>Field.Store.YES, Field.Index.TOKENIZED));
>
>-OR-
>
>doc.add(new Field("from", (String) itemContent.get("from"), 
>Field.Store.YES, Field.Index.UN_TOKENIZED));
>
>Thx.
>Michael
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 21:05:10 2006
Return-Path: <java-user-return-22307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34596 invoked from network); 26 Jul 2006 21:05:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:05:10 -0000
Received: (qmail 98920 invoked by uid 500); 26 Jul 2006 21:05:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98884 invoked by uid 500); 26 Jul 2006 21:05:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98873 invoked by uid 99); 26 Jul 2006 21:05:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:05:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.48.84.103] (HELO mail.waite.net.nz) (210.48.84.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:05:03 -0700
Received: from localhost ([127.0.0.1])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1G5qYb-00024C-4x
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 09:04:41 +1200
Received: from mail.waite.net.nz ([127.0.0.1])
	by localhost (gandalf [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 07348-08 for <java-user@lucene.apache.org>;
	Thu, 27 Jul 2006 09:04:36 +1200 (NZST)
Received: from frodo.lan.waite.net.nz ([192.168.1.29])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1G5qYW-000246-4L
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 09:04:36 +1200
From: Paul Waite <paul@waite.net.nz>
To: java-user@lucene.apache.org
Subject: Filter updating
Date: Thu, 27 Jul 2006 09:04:35 +1200
User-Agent: KMail/1.9.1
References: <1153941587.98587.ezmlm@lucene.apache.org>
In-Reply-To: <1153941587.98587.ezmlm@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607270904.35728.paul@waite.net.nz>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at waite.net.nz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was wondering if there was a nice way to add documents to a cached filter
'manually' as it were.

The reason would be to avoid a complete refresh of the filter, if you
already knew the docids of the extra documents to add.

An example would be if I had a filter based on datetime, which contained
all documents since a recent fixed timestamp. Then as each new document
arrived, and was indexed it could be simply added to the filter quickly,
instead of having to rebuild it from scratch each time.

Cheers,
Paul.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 21:41:34 2006
Return-Path: <java-user-return-22308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46673 invoked from network); 26 Jul 2006 21:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:41:34 -0000
Received: (qmail 58671 invoked by uid 500); 26 Jul 2006 21:41:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58638 invoked by uid 500); 26 Jul 2006 21:41:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58627 invoked by uid 99); 26 Jul 2006 21:41:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:41:28 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:41:27 -0700
Received: by py-out-1112.google.com with SMTP id d80so3635756pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 14:41:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cMwudkOeFSK4ifyjFrUSaENWrh4GUu7+ulbs8xXVNS+PrcsqXNT5DM+y6yj8hU0myFeQ5oNm1tnvvamOFVnqgSp98hA0Pkvz7/9PI/4KFYTeCfAtNARzKRHruIUJK8587YUb0iRwORxBe5ZbrnI+PdBVewjpdGrfpY3j9aFZWXU=
Received: by 10.35.51.6 with SMTP id d6mr11947886pyk;
        Wed, 26 Jul 2006 14:41:06 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 26 Jul 2006 14:41:06 -0700 (PDT)
Message-ID: <359a92830607261441p110e5f65t4511fe14de72b684@mail.gmail.com>
Date: Wed, 26 Jul 2006 17:41:06 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Timestamps as milliseconds
In-Reply-To: <44C7C7E9.1010207@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_112734_12056518.1153950066862"
References: <44C77287.4090104@mac.com> <44C7739B.3090805@magpie.net>
	 <44C77C01.1020403@mac.com> <44C7C7E9.1010207@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_112734_12056518.1153950066862
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As Miles said, use the DateTools (lucene) class with a DAY resolution.
That'll give you a YYYYMMDD format, which won't blow your query with a
"TooManyClauses" exception.......

Remember that Lucene deals with strings, so you want to store things in
easily-manipulated string format, often one that's suitable for comparison.
Which is what you want to do when you create a RangeQuery

Erick

------=_Part_112734_12056518.1153950066862--

From java-user-return-22309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 21:50:23 2006
Return-Path: <java-user-return-22309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49797 invoked from network); 26 Jul 2006 21:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 21:50:23 -0000
Received: (qmail 80742 invoked by uid 500); 26 Jul 2006 21:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80704 invoked by uid 500); 26 Jul 2006 21:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80693 invoked by uid 99); 26 Jul 2006 21:50:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:50:17 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 14:50:17 -0700
Received: by py-out-1112.google.com with SMTP id d80so3637616pyd
        for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 14:49:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=fQ6Rym5cnpF2YZlz8Dntx3JUXre5IUCdPGPB5u7kBZxMJjTAwStqiaxKdLBnDHOaEOy83Qc8Bumw0FRp3nmSBmtc3/sLgmDuXoDNs+GqFS4afr84iIdYkVYLI0otlCDh9NI+SOWWnk7C03HkI+M5/t2xq7JZ4PafPuOM1+B9nb4=
Received: by 10.35.90.20 with SMTP id s20mr11934687pyl;
        Wed, 26 Jul 2006 14:49:55 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Wed, 26 Jul 2006 14:49:55 -0700 (PDT)
Message-ID: <359a92830607261449s661733e2h1c94f04784679dc6@mail.gmail.com>
Date: Wed, 26 Jul 2006 17:49:55 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter updating
In-Reply-To: <200607270904.35728.paul@waite.net.nz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_112867_5934213.1153950595330"
References: <1153941587.98587.ezmlm@lucene.apache.org>
	 <200607270904.35728.paul@waite.net.nz>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_112867_5934213.1153950595330
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, I *suppose* you could get the bitset from the pre-existing filter,
copy it to the bitset for your new filter, and play with the bits at the
end. I'm not sure how you get rid of your original filter if you use
CachingWrapperFilter though.........

But.... As "the guys" have pointed out in other contexts, be really sure
your doc IDs don't change out from under you. You can only count on this if
you never, Never, NEVER delete anything from the index and then add
something else between the times you build the first filter and the time you
modify it (at least I think I have this right).

That said, I wouldn't go down this route unless you have an actual,
real-live performance issue to deal with. Premature optimization being the
root of many, many, many evils. It'd be evil to debug if you mess up your
filter copying/modification.....

Best
Erick

------=_Part_112867_5934213.1153950595330--

From java-user-return-22310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 22:08:29 2006
Return-Path: <java-user-return-22310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56579 invoked from network); 26 Jul 2006 22:08:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 22:08:29 -0000
Received: (qmail 11205 invoked by uid 500); 26 Jul 2006 22:08:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10819 invoked by uid 500); 26 Jul 2006 22:08:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10808 invoked by uid 99); 26 Jul 2006 22:08:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 15:08:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 15:08:22 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6QM80lB150266
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 22:08:00 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6QMBIEl138490
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:11:18 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6QM7xKq002580
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:07:59 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6QM7x15002577
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:07:59 +0200
In-Reply-To: <44C70783.6060305@nuix.com.au>
Subject: Re: MultiFieldQueryParser.parse deprecated. What can I use?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF7B3CEF32.2A45CE75-ON882571B7.007378CA-882571B7.0079922A@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 26 Jul 2006 15:07:52 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 27/07/2006 01:11:17
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

By the resulted query toString(), boolean query would not work correctly:

qtxt:  a foo
[1]  Multi Field Query (OR) : (title:a body:a) (title:foo body:foo)
[2]  Multi Field Query (AND): +(title:a body:a) +(title:foo body:foo)
[3]  Boolean Query          : (title:a title:foo) (body:a body:foo)
--> By a chance, all are equivalent, returning doc1.

qtxt:  a -foo
[1]  Multi Field Query (OR) : (title:a body:a) -(title:foo body:foo)
[2]  Multi Field Query (AND): +(title:a body:a) -(title:foo body:foo)
[3]  Boolean Query          : (title:a -title:foo) (body:a -body:foo)
--> Here [1,2] "correctly" return no docs, but [3] returns doc1.

qtxt:  +a +foo
[1]  Multi Field Query (OR) : +(title:a body:a) +(title:foo body:foo)
[2]  Multi Field Query (AND): +(title:a body:a) +(title:foo body:foo)
[3]  Boolean Query          : (+title:a +title:foo) (+body:a +body:foo)
--> Now [1,2] "correctly" return doc1, but [3] returns no docs.

qtxt:  a +foo
[1]  Multi Field Query (OR) : (title:a body:a) +(title:foo body:foo)
[2]  Multi Field Query (AND): +(title:a body:a) +(title:foo body:foo)
[3]  Boolean Query          : (title:a +title:foo) (body:a +body:foo)
--> All "correctly" return doc1.

- Doron

Daniel Noll <daniel@nuix.com.au> wrote on 25/07/2006 23:11:15:

> Marvin Humphrey wrote:
> > I believe that this will cause difficulties with prohibited terms.  Say

> > you have these two documents...
> >
> >     Doc 1:
> >        title: a
> >        body:  foo
> >     Doc 2:
> >        title: b
> >        body:  bar
>
> It's not just prohibited terms.  Happens for required terms too.  A
> search for "a AND foo" would return no hits there even though it's a hit.
>
> Daniel
>
>
> --
> Daniel Noll
>
> Nuix Pty Ltd
> Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 0699
> Web: http://www.nuix.com.au/                        Fax: +61 2 9212 6902
>
> This message is intended only for the named recipient. If you are not
> the intended recipient you are notified that disclosing, copying,
> distributing or taking any action in reliance on the contents of this
> message or attachment is strictly prohibited.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 22:50:10 2006
Return-Path: <java-user-return-22311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66946 invoked from network); 26 Jul 2006 22:50:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 22:50:10 -0000
Received: (qmail 43150 invoked by uid 500); 26 Jul 2006 22:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43022 invoked by uid 500); 26 Jul 2006 22:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43011 invoked by uid 99); 26 Jul 2006 22:50:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 15:50:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 15:50:02 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6QMnean087736
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 26 Jul 2006 22:49:40 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6QMqwLa108448
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:52:58 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6QMneMu017332
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:49:40 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6QMnemG017329
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:49:40 +0200
In-Reply-To: <f0d8e9dd0607261237t30cae397u9a4f336309726684@mail.gmail.com>
Subject: Re: Index Rows as Documents? Help me design a solution
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF54A3C238.AC34422E-ON882571B7.007B64E8-882571B7.007D5EBE@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Wed, 26 Jul 2006 15:49:22 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 27/07/2006 01:52:58
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A document per row is seems correct to me too.

If search would be by msisdn / messageid, - and if, as it seems, these are
keywords, not free text that needs to be analyzed, they both should have
Index.UNTOKENIZED. Also, since no search is to be done by the line content,
the line should have Index.NO. Last, since the line is stored, no point in
storing also "msisdn" and "messageid", - Store.NO would be more efficient.

Just to verify again that we are trying to "solve the correct problem" here
- is it known, for the two columns used for searching - msisdn and
messageid (?) - what are the anticipated distributions of these columns?
I.e. how many rows would have the same value in each of these columns?
(More than 1 row I assume, otherwise no much point in using Lucene).

- Doron

>                         Document doc = new Document();
>                         doc.add(new Field("msisdn", columns[0],
> Field.Store.YES, Field.Index.NO));
>                         doc.add(new Field("messageid", columns[2],
> Field.Store.YES, Field.Index.NO));
>                         doc.add(new Field("line", line, Field.Store.YES,
> Field.Index.TOKENIZED));
>                         writer.addDocument(doc);


"Namit Yadav" <namityadav@gmail.com> wrote on 26/07/2006 12:37:58:

> Thanks for the suggestions !
>
> I am still talking about Indexing. The 'split the files' implementation
was
> just an experiment as I wasn't able to get the kind of performance I
needed
> from making rows as Documents. Now back to using rows as Documents:
>
> As Erick and Jeremy suggested, the MaxBufferedDocs has helped improve the
> performance a lot. I have set it to 1000 (Because each row is a Document
for
> me), and maxFieldLength to 50 (Although changing it hasn't shown any
> difference in performance .. which surprised me). Now I see that a 2MB
log
> file was indexed in 30 secs. It has 66000 rows. Considering that Erick
was
> seeing 10000 XML docs getting indexed in 15 secs, I am assuming that
66000
> much simpler documents getting indexed in 30 secs can still be improved?
>
> Optimization is taking under 2 secs, so I am assuming that's not a
problem
> for now.
>
> This is what my indexing is like:
>
>         try {
>             System.out.println("Indexing " + f.getCanonicalPath());
>             BufferedReader br = new BufferedReader(new FileReader(f));
>             String line = null;
>             String[] columns = null;
>             while((line = br.readLine())!=null) {
>                 columns = line.split("#");
>                 if(columns.length == 4) {
>                         Document doc = new Document();
>                         doc.add(new Field("msisdn", columns[0],
> Field.Store.YES, Field.Index.NO));
>                         doc.add(new Field("messageid", columns[2],
> Field.Store.YES, Field.Index.NO));
>                         doc.add(new Field("line", line, Field.Store.YES,
> Field.Index.TOKENIZED));
>                         writer.addDocument(doc);
>                 }
>             }
>         } catch (Exception e) {
>             e.printStackTrace();
>         }
>
> It takes the BufferedReader 5 secs to read a 100 MB log file. So I am
> assuming that the file-reading is not taking too much time here. I even
> tried to just readLine and index it (Without the split() and without the
> fields msisdn and messageid). It still took 30secs to index the file. So
I
> am almost sure that almost all the time is taken in the actual indexing.
>
> Then I search like this (Search takes just a few millisecs, so I am happy
> there. But I still want to let you experts tell me if I am doing
something
> wrong):
>
>         Directory fsDir = FSDirectory.getDirectory(indexDir, false);
>         IndexSearcher is = new IndexSearcher(fsDir);
>         QueryParser parser = new QueryParser("line", new
> StandardAnalyzer());
>         Query query = parser.parse(q);
>         Hits hits = is.search(query);
>         int length = hits.length();
>         if (length>100) length = 100;
>         for (int i = 0; i < length; i++) {
>             Document doc = hits.doc(i);
>             String messageid = doc.get("messageid");
>             // Ensure uniqueness of messageid before sending it to GUI
>             System.out.println("messageid[" + i + "] = " + messageid);
>         }
>         // one messageID search
>         System.out.print("Enter the messageID to get details of: ");
>         String mid = new BufferedReader(new InputStreamReader(System.in
> )).readLine().trim();
>         System.out.println("Result: ");
>         parser = new QueryParser("line", new StandardAnalyzer());
>         query = parser.parse(mid);
>         hits = is.search(query);
>         for (int i = 0; i < hits.length(); i++) {
>             Document doc = hits.doc(i);
>             String row = doc.get("line");
>             System.out.println(row);
>         }
>
> Regards
> Namit
>
> On 7/26/06, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > It feels to me like you're major problem might be file IO with all
those
> > files. There's no need to split the files up first and then index the
> > files.
> > Just read through the log and index each row. The code fragment you
posted
> > should allow you to get the line back from the "line" field of each
> > document. That way, when you execute searches, you also avoid the file
> > I/O.
> > Once indexed, you shouldn't have to go back to the disk to get the
> > data......
> >
> > This scares me...
> >
> > *********************
> > ....Then
> > when I search for a term, I get the log-file names that contain the
data.
> > Then I buffer-read those files and find out rows containing the
data....
> > *********************
> >
> > According to the fragment you posted, you already have the data in the
> > index
> > and don't need to go to disk and get it. Which could be a major
issue.....
> >
> > Are we still talking about indexing speed or have we segued to search
> > speed?
> > Jeremy's suggestion about MaxBufferedDocs is well heeded.....
> >
> > One final confusion.... Watch the Hits object when searching. The hits
> > object is built for getting the first few hits (100 or so). If you
iterate
> > over more documents than that, the Hits object will re-execute your
query
> > every 100 or so documents. You'll want to think about a HitCollector or
> > TopDocs object for large result sets. Again, the quick timing thing is
to
> > cut off your responses at, say, 50 and see how long the search takes as
> > opposed to collecting all responses. Ditto for the file I/O. If we're
> > talking about the search speed, try it without reading the files....
> >
> >
> > Keep us posted
> > Erick
> >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 26 23:09:27 2006
Return-Path: <java-user-return-22312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71462 invoked from network); 26 Jul 2006 23:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2006 23:09:27 -0000
Received: (qmail 69668 invoked by uid 500); 26 Jul 2006 23:09:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69629 invoked by uid 500); 26 Jul 2006 23:09:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69603 invoked by uid 99); 26 Jul 2006 23:09:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 16:09:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.13.53] (HELO web86901.mail.ukl.yahoo.com) (217.12.13.53)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Jul 2006 16:09:21 -0700
Received: (qmail 850 invoked by uid 60001); 26 Jul 2006 23:08:59 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UsF/u74JKpKKCEuVonWHp4yCxN3BMaU8M5MkRHYe2LvuNU8/5nfpiGEQibyMbMHY8bJtCcQQmS9RgOOGPWAptmg7tYKclyyL7fdSwjHMBMsE2cFWOD9gcwr2nsPAEZzcNZ97YtVT/1AcB/jKB4dfQfB8V5yox3L1WjwFeZOjt2Q=  ;
Message-ID: <20060726230859.848.qmail@web86901.mail.ukl.yahoo.com>
Received: from [217.128.75.168] by web86901.mail.ukl.yahoo.com via HTTP; Thu, 27 Jul 2006 01:08:59 CEST
Date: Thu, 27 Jul 2006 01:08:59 +0200 (CEST)
From: John john <ze_barbary@yahoo.fr>
Subject: Web search demo does not work
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-903087869-1153955339=:98504"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-903087869-1153955339=:98504
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello, 
 
 The web search demo does not work in lucene 2.0 because it seems that the files results.jsp use old methods.
 
 Is there a patch or something to fix this? or a file which is ok with lucene 2.0? I'd like to make some tests and I'm not familiar with JSP 
 
 Thanks
 
 		
---------------------------------
 Dcouvrez un nouveau moyen de poser toutes vos questions quelque soit le sujet ! Yahoo! Questions/Rponses pour partager vos connaissances, vos opinions et vos expriences. Cliquez ici. 
--0-903087869-1153955339=:98504--

From java-user-return-22313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 02:31:56 2006
Return-Path: <java-user-return-22313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17325 invoked from network); 27 Jul 2006 02:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 02:31:56 -0000
Received: (qmail 97610 invoked by uid 500); 27 Jul 2006 02:31:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97576 invoked by uid 500); 27 Jul 2006 02:31:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97565 invoked by uid 99); 27 Jul 2006 02:31:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 19:31:48 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 26 Jul 2006 19:31:47 -0700
Received: (qmail 21646 invoked by uid 60001); 27 Jul 2006 02:31:26 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=b+TllgJheYpGt5nHbTH5s/m49Io9kuJERKVbSYgWMXJ8Rqv2ybpiANaKJPsPP0n8P1Iz5j6W/yXAJetmt2cJPC9hjdNERgMXYdsca8SFRgdypFTQeXwfMpUw792t1SVUpHS1ECpMHs5CF3UsBkq+0ZI1mXyecUU1Qwnf0fRcOdE=  ;
Message-ID: <20060727023126.21644.qmail@web50304.mail.yahoo.com>
Received: from [72.229.167.99] by web50304.mail.yahoo.com via HTTP; Wed, 26 Jul 2006 19:31:26 PDT
Date: Wed, 26 Jul 2006 19:31:26 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Web search demo does not work
To: java-user@lucene.apache.org
In-Reply-To: <20060726230859.848.qmail@web86901.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Get code from SVN to get some demo fixes after 2.0.

Otis

----- Original Message ----
From: John john <ze_barbary@yahoo.fr>
To: java-user@lucene.apache.org
Sent: Wednesday, July 26, 2006 7:08:59 PM
Subject: Web search demo does not work

Hello,=20
=20
 The web search demo does not work in lucene 2.0 because it seems that the =
files results.jsp use old methods.
=20
 Is there a patch or something to fix this? or a file which is ok with luce=
ne 2.0? I'd like to make some tests and I'm not familiar with JSP=20
=20
 Thanks
=20
        =20
---------------------------------
 D=C3=A9couvrez un nouveau moyen de poser toutes vos questions quelque soit=
 le sujet ! Yahoo! Questions/R=C3=A9ponses pour partager vos connaissances,=
 vos opinions et vos exp=C3=A9riences. Cliquez ici.=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 06:59:52 2006
Return-Path: <java-user-return-22314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66298 invoked from network); 27 Jul 2006 06:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 06:59:52 -0000
Received: (qmail 32794 invoked by uid 500); 27 Jul 2006 06:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32462 invoked by uid 500); 27 Jul 2006 06:59:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32451 invoked by uid 99); 27 Jul 2006 06:59:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 23:59:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Jul 2006 23:59:43 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id 30E8D746C2
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 08:59:22 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lock obtain timed out
Date: Thu, 27 Jul 2006 08:59:47 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BD86@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock obtain timed out
Thread-Index: Acaw37suxa01OGiAQWeqsw/Antb64AAZrMTA
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

After some research on addShutdownHook it seems that Eclipse terminates =
program rather brutally giving neither finalize nor shutdownhook any =
chance to run. This is a known bug in Eclipse.
The application I'm writing is a server that keeps a reader and a writer =
open at all time. I realized last nigth this will not work since they =
both need a lock (reader when deleting and writer when adding) so I need =
a workaround. Is it possible to temporarily let the reader release the =
lock so that the writer can add a document or do I need to close it and =
open it again when writer is finished ?

OS: win xp
JVM: 1.5

/B
  _____ =20



-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]
Sent: den 26 juli 2006 20:16
To: java-user@lucene.apache.org
Subject: Re: Lock obtain timed out
Importance: Low


>> When I close my application containing index writers the
>> lock files are left in the temp directory causing an "Lock obtain
>> timed out" error upon the next restart.
>=20
> My guess is that you keep a writer open even though there is no =
activity
> involving adding new documents. Unless I have a massive never ending
> stream of new data arriving (many thousand per minute) I usually try =
not
> to have an open writer. Opening, adding documents and closing the =
writer
> in iterations.

It's also odd that you can repeat this so easily.  What OS/platform are=20
you using?

The IndexWriter and IndexReader have their own finalizers to release=20
(remove) the lock files.

Is it possible your JVM is exiting in a non-graceful manner (ie =
crashing)?

One known issue is Lucene just calls java.io.File.delete to remove the=20
lock file, but doesn't check/confirm the returned result of this call=20
that the file was actually deleted.  We are working on improving the=20
locking by using native (OS) locks instead, which should correctly free=20
lock files whenever the JVM process exits.  But this won't happen until=20
a future Lucene release...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 07:16:08 2006
Return-Path: <java-user-return-22315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71386 invoked from network); 27 Jul 2006 07:16:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 07:16:08 -0000
Received: (qmail 58812 invoked by uid 500); 27 Jul 2006 07:16:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58788 invoked by uid 500); 27 Jul 2006 07:16:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58777 invoked by uid 99); 27 Jul 2006 07:16:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:16:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:16:01 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2F8A95B77F; Thu, 27 Jul 2006 00:15:38 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 148557F403
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:15:38 -0700 (PDT)
Date: Thu, 27 Jul 2006 00:15:38 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: RE : Re: index articles with groups
In-Reply-To: <20060726090924.35668.qmail@web86907.mail.ukl.yahoo.com>
Message-ID: <Pine.LNX.4.58.0607270013230.8821@hal.rescomp.berkeley.edu>
References: <20060726090924.35668.qmail@web86907.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Unfortunately this is not that easy. Because I must be able to retrieve
: only one article and if i index all the content in one document then all
: the document will be retrieved instead of the single article.

i didn't say you had to *only* index the article contents in "group"
documents ... you can still index "article" based documents, and use a
Filter to decide wether you are interested in getting back "groups" or
"articles"

if you allways want to display article type information, even when
displaying "group" results, you have to decide which article in each group
is the "flagship" article, and store it's data in the gorups stored field.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 07:25:51 2006
Return-Path: <java-user-return-22316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79251 invoked from network); 27 Jul 2006 07:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 07:25:50 -0000
Received: (qmail 67494 invoked by uid 500); 27 Jul 2006 07:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67458 invoked by uid 500); 27 Jul 2006 07:25:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67447 invoked by uid 99); 27 Jul 2006 07:25:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:25:44 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.159 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.159] (HELO pne-smtpout2-sn1.fre.skanova.net) (81.228.11.159)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:25:43 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn1.fre.skanova.net (7.2.075)
        id 44A135F1005DEE56 for java-user@lucene.apache.org; Thu, 27 Jul 2006 09:25:22 +0200
Subject: RE: Lock obtain timed out
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BD86@ad01.aza.se>
References: <6F4F5B8F19AA954DB9002305E4D6D14901BD86@ad01.aza.se>
Content-Type: text/plain; charset=ISO-8859-1
Organization: snigel heavy industries
Date: Thu, 27 Jul 2006 09:25:17 +0200
Message-Id: <1153985118.4881.171.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-07-27 at 08:59 +0200, Bjrn Ekengren wrote:
> > > When I close my application containing index writers the
> > > lock files are left in the temp directory causing an "Lock obtain
> > > timed out" error upon the next restart.
> > 
> > My guess is that you keep a writer open even though there is no activity
> > involving adding new documents. Unless I have a massive never ending
> > stream of new data arriving (many thousand per minute) I usually try not
> > to have an open writer. Opening, adding documents and closing the writer
> > in iterations.
> 
> The application I'm writing is a server that keeps a reader and a
> writer open at all time. I realized last nigth this will not work
> since they both need a lock (reader when deleting and writer when
> adding) so I need a workaround. 

No offense, but your current solution is not viable. What you need is to
rewrite the code that handles your index, not a workaround. Or you could
wait for the new deleteDocument method in IndexWriter. Not sure when
that will be around though.

> Is it possible to temporarily let the reader release the lock so that
> the writer can add a document or do I need to close it and open it
> again when writer is finished ?

You release the lock by closing the reader... It is also possible to
plain old skip the creating of locks using -DdisableLuceneLocks=true,
but that might cause many other problems for you.

You are aware that no document will be deleted from the index until you
close the reader? If you keep a reader open at all times just for
deleting documents and never close it, they will not be deleted.

If you need to update lots of documents in your corpus (delete and add)
then first delete the documents with the reader, close it and add them
again with the writer. And then close the writer when you are done. And
don't open it again until you need to add documents again.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 07:44:56 2006
Return-Path: <java-user-return-22317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83691 invoked from network); 27 Jul 2006 07:44:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 07:44:56 -0000
Received: (qmail 97702 invoked by uid 500); 27 Jul 2006 07:44:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97679 invoked by uid 500); 27 Jul 2006 07:44:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97668 invoked by uid 99); 27 Jul 2006 07:44:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:44:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:44:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 543875B77F; Thu, 27 Jul 2006 00:44:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 49C4F7F403
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 00:44:21 -0700 (PDT)
Date: Thu, 27 Jul 2006 00:44:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Method to speed up caching for faceted navigation
In-Reply-To: <A955EA1F8FE31749AEC8C998082F6C7CEFE84A@hai01.hippo.local>
Message-ID: <Pine.LNX.4.58.0607270037530.8821@hal.rescomp.berkeley.edu>
References: <A955EA1F8FE31749AEC8C998082F6C7CEFE84A@hai01.hippo.local>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I looked at the implementation of 'read(int[], int[])' in
: 'SegmentTermDocs' and saw that it did the following things:
: - check if the document has a frequency higher than 1, and if so read
: it;
: - check if the document has been deleted, and if so don't add it to the
: result;
: - store the document IDs, counts and frequences in attributes instead of
: local variables.
:
: Given that the following preconditions hold in my situation:
: - all documents have a frequency of 1 for the term;
: - I never delete documents using the 'IndexReader' from which I get the
: 'TermDocs' object;
: - I am only interested in the document IDs.

I don't think it really matters wether you do deletes on the same
IndexReader -- what matters is if there has been any deletes done to the
index prior to opening the reader since it was last optimized.  The reason
being that deleting a document just causes a record of the deletion to be
made, but no Term/DOc mapping information is removed.

So if your index is read only and will never contain any deleted
documents, then your method may be safe (i'm not 100% certain of that,
just guessing) but if it's possible for documents to be deleted from your
index at some point, then i'm 99% sure your approach will result it
indicating matches on documents which are no longer "viable"


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 07:50:53 2006
Return-Path: <java-user-return-22318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85200 invoked from network); 27 Jul 2006 07:50:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 07:50:52 -0000
Received: (qmail 6508 invoked by uid 500); 27 Jul 2006 07:50:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6490 invoked by uid 500); 27 Jul 2006 07:50:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6478 invoked by uid 99); 27 Jul 2006 07:50:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:50:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.133.33.30] (HELO mailrelay.is.nl) (213.133.33.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 00:50:44 -0700
Received: from [213.133.51.241] (HELO hai01.hippo.local)
  by mailrelay.is.nl (CommuniGate Pro SMTP 4.3.5)
  with ESMTP id 20563590 for java-user@lucene.apache.org; Thu, 27 Jul 2006 09:50:19 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Method to speed up caching for faceted navigation
Date: Thu, 27 Jul 2006 09:50:19 +0200
Message-ID: <A955EA1F8FE31749AEC8C998082F6C7C87FA57@hai01.hippo.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Method to speed up caching for faceted navigation
Thread-Index: AcaxUIuxaI4ZVLv5S1uZkCLzRKBP8gAAFAHg
From: "Johan Stuyts" <j.stuyts@hippo.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> I don't think it really matters wether you do deletes on the same
> IndexReader -- what matters is if there has been any deletes=20
> done to the
> index prior to opening the reader since it was last=20
> optimized.  The reason
> being that deleting a document just causes a record of the=20
> deletion to be
> made, but no Term/DOc mapping information is removed.
>=20
> So if your index is read only and will never contain any deleted
> documents, then your method may be safe (i'm not 100% certain of that,
> just guessing) but if it's possible for documents to be=20
> deleted from your
> index at some point, then i'm 99% sure your approach will result it
> indicating matches on documents which are no longer "viable"

OK. I will also add the check for deleted documents. It didn't have much
of an effect on the performance anyway. Thanks.

Johan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 08:27:06 2006
Return-Path: <java-user-return-22319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1927 invoked from network); 27 Jul 2006 08:27:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 08:27:06 -0000
Received: (qmail 64488 invoked by uid 500); 27 Jul 2006 08:27:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64233 invoked by uid 500); 27 Jul 2006 08:27:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64222 invoked by uid 99); 27 Jul 2006 08:26:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 01:26:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.5] (HELO randymail-a9.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 01:26:57 -0700
Received: from [192.168.1.132] (unknown [82.153.237.45])
	by randymail-a9.dreamhost.com (Postfix) with ESMTP id 14B1AEEB6A
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 01:26:35 -0700 (PDT)
Message-ID: <44C877E5.7000801@magpie.net>
Date: Thu, 27 Jul 2006 09:23:01 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Timestamps as milliseconds
References: <44C77287.4090104@mac.com> <44C7739B.3090805@magpie.net>	 <44C77C01.1020403@mac.com> <44C7C7E9.1010207@mac.com> <359a92830607261441p110e5f65t4511fe14de72b684@mail.gmail.com>
In-Reply-To: <359a92830607261441p110e5f65t4511fe14de72b684@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick Erickson wrote:

> As Miles said, use the DateTools (lucene) class with a DAY resolution.
> That'll give you a YYYYMMDD format, which won't blow your query with a
> "TooManyClauses" exception.......
>
> Remember that Lucene deals with strings, so you want to store things in
> easily-manipulated string format, often one that's suitable for 
> comparison.
> Which is what you want to do when you create a RangeQuery


I think this is the way to go, have one field at DAY resolution for the 
RangeQuery and one field at MILLISECOND resolution for sorting.

The reason you want the coarsest resolution possible for RangeQuerys is 
that it works the same way as any other query, it tries to match tokens. 
To do this it enumerates all possible values between the two end points, 
so if there's a week between the two dates and the resolution is DAY, 
that's just seven values it tries to match against. If the resolution is 
MILLISECOND it tries to match against 604,800,000 values.



Miles


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 08:53:21 2006
Return-Path: <java-user-return-22320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7699 invoked from network); 27 Jul 2006 08:53:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 08:53:20 -0000
Received: (qmail 88510 invoked by uid 500); 27 Jul 2006 08:53:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88478 invoked by uid 500); 27 Jul 2006 08:53:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88467 invoked by uid 99); 27 Jul 2006 08:53:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 01:53:13 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of winters.mi@gmail.com designates 64.233.182.190 as permitted sender)
Received: from [64.233.182.190] (HELO nf-out-0910.google.com) (64.233.182.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 01:53:12 -0700
Received: by nf-out-0910.google.com with SMTP id o63so83964nfa
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 01:52:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=H4VT3B3WI4CR/LTuZLcQlxUuUSnjSA/jZGul2G8TUawn/nhmMporQ9XEShSGcHriM4/0lkhS2k32LgDCR0avd3F2jSCL1/9w+8mJDPVuoLzl+84oYTkXy2y/rsNsXqvf5UOb+sMVWgNFCcEmBrdCZ2yDHqCB7Itz/TTKNBLqxwo=
Received: by 10.82.109.9 with SMTP id h9mr300266buc;
        Thu, 27 Jul 2006 01:52:51 -0700 (PDT)
Received: by 10.82.133.3 with HTTP; Thu, 27 Jul 2006 01:52:50 -0700 (PDT)
Message-ID: <70da802d0607270152k315a6494t2f2c4bca7b5feb66@mail.gmail.com>
Date: Thu, 27 Jul 2006 16:52:51 +0800
From: "Jia Mi" <winters.mi@gmail.com>
To: java-user@lucene.apache.org
Subject: How to get TermFreq only in some query results
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28794_9401896.1153990371133"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_28794_9401896.1153990371133
Content-Type: text/plain; charset=ISO-2022-JP; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi everyone,

I am just developing an application using Lucene, and I know how to get the
Term Freq via the IndexReader for the whole corpus. But I wonder if I can
get the term freq statistics just inside the query results, like I want the
hot words in just recent two weeks added into Lucene indices, and how?

Thank you very much, any opinions would be apprecieated!

-- 
Best and Regards,
Jia Mi ($BJF2E(B)

------=_Part_28794_9401896.1153990371133--

From java-user-return-22321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 09:06:38 2006
Return-Path: <java-user-return-22321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12206 invoked from network); 27 Jul 2006 09:06:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 09:06:37 -0000
Received: (qmail 14022 invoked by uid 500); 27 Jul 2006 09:06:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13559 invoked by uid 500); 27 Jul 2006 09:06:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13548 invoked by uid 99); 27 Jul 2006 09:06:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:06:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:06:30 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id C27B4746C2
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 11:06:08 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: SOLVED: Lock obtain timed out 
Date: Thu, 27 Jul 2006 11:06:34 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BD87@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lock obtain timed out
Thread-Index: AcaxTfBJd5CPhfCKQYa+tbfMNcSMWwADF+9Q
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thancks everybody for the feedback. I now rewrote my app like this:

        synchronized (searcher.getWriteLock()){=20
            IndexReader reader =3D =
searcher.getIndexSearcher().getIndexReader();
            try {
                reader.deleteDocuments(new Term("id",id));
                reader.close();=20
                IIndexer indexer =3D searcher.getIndexer();
                addedDocuments =3D indexer.addDocument(id); //creates =
and close writer
                reader =3D IndexReader.open(searcher.getIndexDir());
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

Now there are write locks only during the short period the synchronized =
block runs. It gets a lot of opening and closing of the reader and =
writer but I guess that is the way is has to be.

/B

-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]
Sent: den 27 juli 2006 09:25
To: java-user@lucene.apache.org
Subject: RE: Lock obtain timed out
Importance: Low


On Thu, 2006-07-27 at 08:59 +0200, Bj=F6rn Ekengren wrote:
> > > When I close my application containing index writers the
> > > lock files are left in the temp directory causing an "Lock obtain
> > > timed out" error upon the next restart.
> >=20
> > My guess is that you keep a writer open even though there is no =
activity
> > involving adding new documents. Unless I have a massive never ending
> > stream of new data arriving (many thousand per minute) I usually try =
not
> > to have an open writer. Opening, adding documents and closing the =
writer
> > in iterations.
>=20
> The application I'm writing is a server that keeps a reader and a
> writer open at all time. I realized last nigth this will not work
> since they both need a lock (reader when deleting and writer when
> adding) so I need a workaround.=20

No offense, but your current solution is not viable. What you need is to
rewrite the code that handles your index, not a workaround. Or you could
wait for the new deleteDocument method in IndexWriter. Not sure when
that will be around though.

> Is it possible to temporarily let the reader release the lock so that
> the writer can add a document or do I need to close it and open it
> again when writer is finished ?

You release the lock by closing the reader... It is also possible to
plain old skip the creating of locks using -DdisableLuceneLocks=3Dtrue,
but that might cause many other problems for you.

You are aware that no document will be deleted from the index until you
close the reader? If you keep a reader open at all times just for
deleting documents and never close it, they will not be deleted.

If you need to update lots of documents in your corpus (delete and add)
then first delete the documents with the reader, close it and add them
again with the writer. And then close the writer when you are done. And
don't open it again until you need to add documents again.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 09:15:57 2006
Return-Path: <java-user-return-22322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14828 invoked from network); 27 Jul 2006 09:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 09:15:56 -0000
Received: (qmail 33078 invoked by uid 500); 27 Jul 2006 09:15:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33050 invoked by uid 500); 27 Jul 2006 09:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33039 invoked by uid 99); 27 Jul 2006 09:15:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:15:49 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:15:49 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D005F51CF for java-user@lucene.apache.org; Thu, 27 Jul 2006 11:15:27 +0200
Subject: Re: SOLVED: Lock obtain timed out
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6F4F5B8F19AA954DB9002305E4D6D14901BD87@ad01.aza.se>
References: <6F4F5B8F19AA954DB9002305E4D6D14901BD87@ad01.aza.se>
Content-Type: text/plain; charset=ISO-8859-1
Organization: snigel heavy industries
Date: Thu, 27 Jul 2006 11:15:21 +0200
Message-Id: <1153991722.4881.179.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thu, 2006-07-27 at 11:06 +0200, Bjrn Ekengren wrote:
> Thancks everybody for the feedback. I now rewrote my app like this:
> 
>         synchronized (searcher.getWriteLock()){ 
>             IndexReader reader = searcher.getIndexSearcher().getIndexReader();
>             try {
>                 reader.deleteDocuments(new Term("id",id));
>                 reader.close(); 
>                 IIndexer indexer = searcher.getIndexer();
>                 addedDocuments = indexer.addDocument(id); //creates and close writer
>                 reader = IndexReader.open(searcher.getIndexDir());
>             } catch (IOException e) {
>                 e.printStackTrace();
>             }
>         }
> 
> Now there are write locks only during the short period the synchronized
> block runs. It gets a lot of opening and closing of the reader and
> writer but I guess that is the way is has to be.

No, you should not have to do that. Do as I wrote:

> If you need to update lots of documents in your corpus (delete and
> add) then first delete the documents with the reader, close it and add
> them again with the writer. And then close the writer when you are
> done. And don't open it again until you need to add documents again.

So something like this instead:

>  IndexReader reader = new IndexReader(dir);
>  for (MyDocument doc : myDocuments) {
>      reader.deleteDocuments(new Term("id", id);
>  }
>  reader.close();
>  IndexWriter writer = new IndexWriter(dir, analyzer, false);
>  for (MyDocument doc : myDocuments) {
>      writer.addDocument(luceneDocFactory(doc));
>  }
>  writer.close();
>  setSearcher(new IndexSearcher(dir));




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 09:23:30 2006
Return-Path: <java-user-return-22323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16532 invoked from network); 27 Jul 2006 09:23:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 09:23:30 -0000
Received: (qmail 49025 invoked by uid 500); 27 Jul 2006 09:23:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48173 invoked by uid 500); 27 Jul 2006 09:23:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48157 invoked by uid 99); 27 Jul 2006 09:23:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:23:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.15.245.75] (HELO post01.avanza.se) (217.15.245.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:23:22 -0700
Received: from ad01.aza.se (ad01.aza.se [172.22.30.200])
	by post01.avanza.se (Postfix) with ESMTP id 8E6E0746A6
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 11:23:01 +0200 (MET DST)
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SOLVED: Lock obtain timed out
Date: Thu, 27 Jul 2006 11:23:27 +0200
Message-ID: <6F4F5B8F19AA954DB9002305E4D6D14901BD88@ad01.aza.se>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SOLVED: Lock obtain timed out
Thread-Index: AcaxXVJ64lsFNK0AQUmgV3XdCh3dfQAAD10Q
From: =?iso-8859-1?Q?Bj=F6rn_Ekengren?= <bjorn.ekengren@avanza.se>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I didn't describe the context fully. The app is a server that recieves =
updates randomly a couple of hundred times a day and I want the index to =
be updated at all times. If I would recieve several updates at once I =
could batch it but that is quite unlikely.

  _____ =20

Bj=F6rn Ekengren
Bankaktiebolaget Avanza
Tel:      08 5622 5055
Fax:     08 5622 5051
Mobil:  0708 618 055
=20
  _____ =20



-----Original Message-----
From: karl wettin [mailto:karl.wettin@gmail.com]
Sent: den 27 juli 2006 11:15
To: java-user@lucene.apache.org
Subject: Re: SOLVED: Lock obtain timed out
Importance: Low


On Thu, 2006-07-27 at 11:06 +0200, Bj=F6rn Ekengren wrote:
> Thancks everybody for the feedback. I now rewrote my app like this:
>=20
>         synchronized (searcher.getWriteLock()){=20
>             IndexReader reader =3D =
searcher.getIndexSearcher().getIndexReader();
>             try {
>                 reader.deleteDocuments(new Term("id",id));
>                 reader.close();=20
>                 IIndexer indexer =3D searcher.getIndexer();
>                 addedDocuments =3D indexer.addDocument(id); //creates =
and close writer
>                 reader =3D IndexReader.open(searcher.getIndexDir());
>             } catch (IOException e) {
>                 e.printStackTrace();
>             }
>         }
>=20
> Now there are write locks only during the short period the =
synchronized
> block runs. It gets a lot of opening and closing of the reader and
> writer but I guess that is the way is has to be.

No, you should not have to do that. Do as I wrote:

> If you need to update lots of documents in your corpus (delete and
> add) then first delete the documents with the reader, close it and add
> them again with the writer. And then close the writer when you are
> done. And don't open it again until you need to add documents again.

So something like this instead:

>  IndexReader reader =3D new IndexReader(dir);
>  for (MyDocument doc : myDocuments) {
>      reader.deleteDocuments(new Term("id", id);
>  }
>  reader.close();
>  IndexWriter writer =3D new IndexWriter(dir, analyzer, false);
>  for (MyDocument doc : myDocuments) {
>      writer.addDocument(luceneDocFactory(doc));
>  }
>  writer.close();
>  setSearcher(new IndexSearcher(dir));




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 09:49:24 2006
Return-Path: <java-user-return-22324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22783 invoked from network); 27 Jul 2006 09:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 09:49:24 -0000
Received: (qmail 99697 invoked by uid 500); 27 Jul 2006 09:49:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99668 invoked by uid 500); 27 Jul 2006 09:49:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99648 invoked by uid 99); 27 Jul 2006 09:49:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:49:01 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 02:48:59 -0700
Received: by ug-out-1314.google.com with SMTP id y2so153943uge
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 02:48:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=NBgJN4dE2YnH3zNDOWY0gYrZZE0rXxAbUQmdvSWwsqGcr5MIHr8o2uq3dgyzbzKId6cKuyo8l6+MVzUfKJjwVLHf8LvGQGVTCfWcoZuvRSHV1aKps6IpHeOVrQKl7GTLm1/wDt3JOUOVQ4ZYJW/4yPKYsKKAVFNDv7YSE6VMX9E=
Received: by 10.67.24.13 with SMTP id b13mr6980383ugj;
        Thu, 27 Jul 2006 02:48:38 -0700 (PDT)
Received: by 10.67.88.5 with HTTP; Thu, 27 Jul 2006 02:48:37 -0700 (PDT)
Message-ID: <4f2c7c9b0607270248x4130aec3gf6c57ee9a0806474@mail.gmail.com>
Date: Thu, 27 Jul 2006 17:48:38 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Consult some information about adding index while searching
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16216_3810068.1153993718344"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_16216_3810068.1153993718344
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I met this problem: when searching,  I add documents to index. Although I
instantiates a new IndexSearcher,  I can't retrieve the newly added
documents. I have to close the program and enter the program, then it will
be ok.

The platform is win xp. Is it the fault of xp?

Thank you in advance.

------=_Part_16216_3810068.1153993718344--

From java-user-return-22325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 10:54:54 2006
Return-Path: <java-user-return-22325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41265 invoked from network); 27 Jul 2006 10:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 10:54:54 -0000
Received: (qmail 47914 invoked by uid 500); 27 Jul 2006 10:54:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47858 invoked by uid 500); 27 Jul 2006 10:54:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47847 invoked by uid 99); 27 Jul 2006 10:54:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 03:54:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 03:54:46 -0700
Received: from frontend3.internal (frontend3.internal [10.202.2.152])
	by frontend1.messagingengine.com (Postfix) with ESMTP id B1718D92514
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 06:54:24 -0400 (EDT)
Received: from heartbeat1.messagingengine.com ([10.202.2.160])
  by frontend3.internal (MEProxy); Thu, 27 Jul 2006 06:54:28 -0400
X-Sasl-enc: v5kArWovwNliiuqF2Ad+Shqvj4PmZCBuG8EQ798ihmUY 1153997664
Received: from [10.17.4.3] (pool-72-70-33-84.bstnma.fios.verizon.net [72.70.33.84])
	by mail.messagingengine.com (Postfix) with ESMTP id 4FB6A6F1C
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 06:54:24 -0400 (EDT)
Message-ID: <44C89B5F.4020908@mikemccandless.com>
Date: Thu, 27 Jul 2006 06:54:23 -0400
From: Michael McCandless <lucene@mikemccandless.com>
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Consult some information about adding index while searching
References: <4f2c7c9b0607270248x4130aec3gf6c57ee9a0806474@mail.gmail.com>
In-Reply-To: <4f2c7c9b0607270248x4130aec3gf6c57ee9a0806474@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


> I met this problem: when searching,  I add documents to index. Although I
> instantiates a new IndexSearcher,  I can't retrieve the newly added
> documents. I have to close the program and enter the program, then it will
> be ok.

Did you close your IndexWriter (so it flushes all changes to disk) 
before instantiating a new IndexSearcher?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 11:51:37 2006
Return-Path: <java-user-return-22326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56943 invoked from network); 27 Jul 2006 11:51:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 11:51:37 -0000
Received: (qmail 26180 invoked by uid 500); 27 Jul 2006 11:51:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26161 invoked by uid 500); 27 Jul 2006 11:51:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26150 invoked by uid 99); 27 Jul 2006 11:51:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 04:51:30 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mbraun@uni-hd.de designates 129.206.100.212 as permitted sender)
Received: from [129.206.100.212] (HELO relay.uni-heidelberg.de) (129.206.100.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 04:51:29 -0700
Received: from serv25.ub.uni-heidelberg.de (serv25.ub.uni-heidelberg.de [147.142.186.75])
	by relay.uni-heidelberg.de (8.13.4/8.13.1) with ESMTP id k6RBp9Mi002741
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 13:51:09 +0200
Received: from localhost (localhost [127.0.0.1])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 7D76A8B818
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 13:51:06 +0200 (CEST)
Received: from serv25.ub.uni-heidelberg.de ([127.0.0.1])
 by localhost (serv25.ub.uni-heidelberg.de [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 07165-01 for <java-user@lucene.apache.org>;
 Thu, 27 Jul 2006 13:51:05 +0200 (CEST)
Received: from [147.142.85.36] (pers16.ub.uni-heidelberg.de [147.142.85.36])
	by serv25.ub.uni-heidelberg.de (Postfix) with ESMTP id 6112D8B906
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 13:51:05 +0200 (CEST)
Message-ID: <44C8A8A9.2080300@uni-hd.de>
Date: Thu, 27 Jul 2006 13:51:05 +0200
From: Martin Braun <mbraun@uni-hd.de>
Reply-To: mbraun@uni-hd.de
User-Agent: Thunderbird 1.5.0.4 (X11/20060516)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: email libraries
References: <44C79E79.3000704@wolfram.com> <44C7ABD1.7070609@scalix.com> <44C7B064.4050305@getopt.org>
In-Reply-To: <44C7B064.4050305@getopt.org>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: amavisd-new at ub.uni-heidelberg.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi John,

> Just for the record - I've been using javamail POP and IMAP providers in
> the past, and they were prone to hanging with some servers, and resource
> intensive. I've been also using Outlook (proper, not Outlook Express -
> this is AFAIK impossible to work with) via a Java-COM bridge such as
> Jawin or JNIWrapper plus Redemption . This also tends to be rather
> unstable, and requires a lot of fine-tuning ...

If you want to look at Source-Code of an javamail-imap-lucene
implementation, try this:

 http://www.hackdiary.com/archives/000023.html


> 
> So, be prepared to suffer quite a bit. ;)
> 

regards,
martin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 13:07:45 2006
Return-Path: <java-user-return-22327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80247 invoked from network); 27 Jul 2006 13:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 13:07:45 -0000
Received: (qmail 86697 invoked by uid 500); 27 Jul 2006 13:07:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86436 invoked by uid 500); 27 Jul 2006 13:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86425 invoked by uid 99); 27 Jul 2006 13:07:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 06:07:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 06:07:35 -0700
Received: from [10.65.253.201] (cnlpvpn.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.155C60E4@mailer.syr.edu>; Thu, 27 Jul 2006 9:07:14 -0400
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <70da802d0607270152k315a6494t2f2c4bca7b5feb66@mail.gmail.com>
References: <70da802d0607270152k315a6494t2f2c4bca7b5feb66@mail.gmail.com>
Content-Type: text/plain; charset=ISO-2022-JP; delsp=yes; format=flowed
Message-Id: <BAF4C5F9-AA9A-4745-92F3-9F6DADE83C81@syr.edu>
Content-Transfer-Encoding: 7bit
From: Grant Ingersoll <gsingers@syr.edu>
Subject: Re: How to get TermFreq only in some query results
Date: Thu, 27 Jul 2006 09:07:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could store Term Vectors for your documents, and then look up the  
individual document vectors based on the query results.   If you need  
help w/ Term Vectors, check out Lucene in Action, search this list,  
or http://www.cnlp.org/apachecon2005

-Grant

On Jul 27, 2006, at 4:52 AM, Jia Mi wrote:

> Hi everyone,
>
> I am just developing an application using Lucene, and I know how to  
> get the
> Term Freq via the IndexReader for the whole corpus. But I wonder if  
> I can
> get the term freq statistics just inside the query results, like I  
> want the
> hot words in just recent two weeks added into Lucene indices, and how?
>
> Thank you very much, any opinions would be apprecieated!
>
> -- 
> Best and Regards,
> Jia Mi ($BJF2E(B)

--------------------------
Grant Ingersoll
Sr. Software Engineer
Center for Natural Language Processing
Syracuse University
335 Hinds Hall
Syracuse, NY 13244
http://www.cnlp.org

Voice: 315-443-5484
Skype: grant_ingersoll
Fax: 315-443-6886




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 15:53:36 2006
Return-Path: <java-user-return-22328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46320 invoked from network); 27 Jul 2006 15:53:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 15:53:36 -0000
Received: (qmail 72599 invoked by uid 500); 27 Jul 2006 15:53:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72568 invoked by uid 500); 27 Jul 2006 15:53:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72557 invoked by uid 99); 27 Jul 2006 15:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 08:53:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of paulo.silveira@gmail.com designates 72.14.214.200 as permitted sender)
Received: from [72.14.214.200] (HELO hu-out-0102.google.com) (72.14.214.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 08:53:27 -0700
Received: by hu-out-0102.google.com with SMTP id 28so203849hug
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 08:53:06 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=qL1enTAXGGSxbJ2h4dJdlugA9M3zkf6ajVL7wY7Jsyn8MWos9EF/Wx1mwEwHS84p6/nBBq8nhmuZL/Z1Y9s4T59h5PeOofI0lEZ/euNT8oKfXFusvPYO98FdoMlPLTEL6ha3ESuJQVEW3BBr3LbFIBny2LZOe/qXOcm1BPE7Xis=
Received: by 10.35.123.10 with SMTP id a10mr13356946pyn;
        Thu, 27 Jul 2006 08:53:06 -0700 (PDT)
Received: by 10.35.64.7 with HTTP; Thu, 27 Jul 2006 08:53:04 -0700 (PDT)
Message-ID: <6026e8b0607270853n1ebf6d0ev17f4e3b03ebb6442@mail.gmail.com>
Date: Thu, 27 Jul 2006 12:53:05 -0300
From: "Paulo Silveira" <paulo.silveira@caelum.com.br>
Sender: paulo.silveira@gmail.com
To: java-user@lucene.apache.org
Subject: Re: MultiFieldQueryParser.parse deprecated. What can I use?
In-Reply-To: <OF7B3CEF32.2A45CE75-ON882571B7.007378CA-882571B7.0079922A@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <44C70783.6060305@nuix.com.au>
	 <OF7B3CEF32.2A45CE75-ON882571B7.007378CA-882571B7.0079922A@il.ibm.com>
X-Google-Sender-Auth: 5998dea472cec3e2
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok, I just tested it.

So consider:
=09=09String string =3D "word -foo";
=09=09String[] fields =3D { "title", "body" };

For the MultField I have:

MultiFieldQueryParser qp =3D new MultiFieldQueryParser(fields,
SearchEngine.ANALYZER);
Query fieldsQuery =3D qp.parse(string);
System.out.println(fieldsQuery);

> (title:word body:word) -(title:foo body:foo)

And for the boolean:

BooleanQuery fieldsQuery =3D new BooleanQuery();
for (String field : fields) {
=09QueryParser qp =3D new QueryParser(field, SearchEngine.ANALYZER);
=09fieldsQuery.add(qp.parse(string), BooleanClause.Occur.SHOULD);
}
System.out.println(fieldsQuery);

> (title:word -title:foo) (body:word -body:foo)

quite different!!

On 7/26/06, Doron Cohen <DORONC@il.ibm.com> wrote:
> By the resulted query toString(), boolean query would not work correctly:
>
> qtxt:  a foo
> [1]  Multi Field Query (OR) : (title:a body:a) (title:foo body:foo)
> [2]  Multi Field Query (AND): +(title:a body:a) +(title:foo body:foo)
> [3]  Boolean Query          : (title:a title:foo) (body:a body:foo)
> --> By a chance, all are equivalent, returning doc1.
>
> qtxt:  a -foo
> [1]  Multi Field Query (OR) : (title:a body:a) -(title:foo body:foo)
> [2]  Multi Field Query (AND): +(title:a body:a) -(title:foo body:foo)
> [3]  Boolean Query          : (title:a -title:foo) (body:a -body:foo)
> --> Here [1,2] "correctly" return no docs, but [3] returns doc1.
>
> qtxt:  +a +foo
> [1]  Multi Field Query (OR) : +(title:a body:a) +(title:foo body:foo)
> [2]  Multi Field Query (AND): +(title:a body:a) +(title:foo body:foo)
> [3]  Boolean Query          : (+title:a +title:foo) (+body:a +body:foo)
> --> Now [1,2] "correctly" return doc1, but [3] returns no docs.
>
> qtxt:  a +foo
> [1]  Multi Field Query (OR) : (title:a body:a) +(title:foo body:foo)
> [2]  Multi Field Query (AND): +(title:a body:a) +(title:foo body:foo)
> [3]  Boolean Query          : (title:a +title:foo) (body:a +body:foo)
> --> All "correctly" return doc1.
>
> - Doron
>
> Daniel Noll <daniel@nuix.com.au> wrote on 25/07/2006 23:11:15:
>
> > Marvin Humphrey wrote:
> > > I believe that this will cause difficulties with prohibited terms.  S=
ay
>
> > > you have these two documents...
> > >
> > >     Doc 1:
> > >        title: a
> > >        body:  foo
> > >     Doc 2:
> > >        title: b
> > >        body:  bar
> >
> > It's not just prohibited terms.  Happens for required terms too.  A
> > search for "a AND foo" would return no hits there even though it's a hi=
t.
> >
> > Daniel
> >
> >
> > --
> > Daniel Noll
> >
> > Nuix Pty Ltd
> > Suite 79, 89 Jones St, Ultimo NSW 2007, Australia    Ph: +61 2 9280 069=
9
> > Web: http://www.nuix.com.au/                        Fax: +61 2 9212 690=
2
> >
> > This message is intended only for the named recipient. If you are not
> > the intended recipient you are notified that disclosing, copying,
> > distributing or taking any action in reliance on the contents of this
> > message or attachment is strictly prohibited.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Paulo E. A. Silveira
Caelum Ensino e Solu=E7=F5es em Java
http://www.caelum.com.br/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 16:03:09 2006
Return-Path: <java-user-return-22329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49074 invoked from network); 27 Jul 2006 16:03:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 16:03:08 -0000
Received: (qmail 93951 invoked by uid 500); 27 Jul 2006 16:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93917 invoked by uid 500); 27 Jul 2006 16:03:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93906 invoked by uid 99); 27 Jul 2006 16:03:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 09:03:02 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO mail.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 09:03:01 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Scoring a document (count?)
Date: Thu, 27 Jul 2006 12:02:46 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF01582804@datachange01.dataconversions.biz>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring a document (count?)
Thread-Index: AcaxlhowK3Oq5LVzQD+1Mg77da8N8Q==
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am curious about the potential use of document scoring as a means to
extract additional data from an index.  Specifically, I would like the
score to be a count of how many times a particular field matched a set
of terms.
=20
For example, I am indexing movie-stars (Each document is a movie-star).
A movie-star has a number of fields, such as name, movies they have been
in, etc.  I want to produce an 'index' of stars by name and show how
many movies, which match a filter, that they have appeared in.

In natural language my query might be:=20
	"List all stars who have appeared in a 'horror' movie, where
last name starts with A, and tell me how many horror movies they were
in."

My search will look something like this: =20
	"+lastName:A* +movie:(1 7 21 58 92)"	//where movie is a
previously computed list of 'horror' movie ids

If my index contained the following documents:
    doc1 =3D lastName:Anna   movie:{3 10}
    doc2 =3D lastName:Aba    movie:{1 10 12}
    doc3 =3D lastName:Addd   movie:{3 21 55 92}
    doc4 =3D lastName:Baaa   movie:{7 56}

I would like to get back:
    doc2, score of 1	//score of 1 because only movie 1 matched
    doc3, score of 2	//score of 2 because movies 21 and 92 matched



Currently, we perform an initial query against our Star index to
retrieve a list of stars.  Then we perform N queries against a separate
movie index to count the number of movies that match our sub filter
'horror'.  This is obviously very inefficient, and as I've shown above,
the information (count) is available during the primary query.

Thoughts?




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 16:32:02 2006
Return-Path: <java-user-return-22330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59334 invoked from network); 27 Jul 2006 16:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 16:32:02 -0000
Received: (qmail 53098 invoked by uid 500); 27 Jul 2006 16:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53072 invoked by uid 500); 27 Jul 2006 16:31:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53061 invoked by uid 99); 27 Jul 2006 16:31:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 09:31:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.183] (HELO smtpout.mac.com) (17.250.248.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 09:31:55 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout13/MantshX 4.0) with ESMTP id k6RGVY79025457
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 09:31:34 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k6RGVVBX005497
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 09:31:33 -0700 (PDT)
Message-ID: <44C8E9EB.10304@mac.com>
Date: Thu, 27 Jul 2006 12:29:31 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Indexing large sets of documents?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I built an indexer that runs through email and its attachments, rips out 
content and what not and then creates a Document and adds it to an 
index.  It works w/ no problem.  The issue is that it takes around 3-5 
seconds per email and I have seen up to 10-15 seconds for email w/ 
attachments.  I need to index 750k emails and at those times it will 
take FOREVER!  I am trying to find places to cut a second or two here or 
there but are there any suggestions as to what I can do?  Should I look 
into parallelizing indexing?  Help?!

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 19:05:12 2006
Return-Path: <java-user-return-22331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9924 invoked from network); 27 Jul 2006 19:05:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 19:05:12 -0000
Received: (qmail 74440 invoked by uid 500); 27 Jul 2006 19:05:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74411 invoked by uid 500); 27 Jul 2006 19:05:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74400 invoked by uid 99); 27 Jul 2006 19:05:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 12:05:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.146.188.102] (HELO web86201.mail.ird.yahoo.com) (217.146.188.102)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jul 2006 12:05:04 -0700
Received: (qmail 33816 invoked by uid 60001); 27 Jul 2006 19:04:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=uM4M8yuAMjWubAN/E1LwS2QLocT6wzKK9cLAOMhsQrVwJqhYrd/B86Fmkl7NMQB1HOjpDCWmEYC3FKbdF8lLJLv/PONYLfpwm4j+nnOMgWqBxTI5rs7QS+HPrRfFaeiZibpbTJiC7ahM2eCIDDDIS+1n+ZUZ7zyos3MClZzUeB0=  ;
Message-ID: <20060727190442.33814.qmail@web86201.mail.ird.yahoo.com>
Received: from [193.63.235.72] by web86201.mail.ird.yahoo.com via HTTP; Thu, 27 Jul 2006 19:04:42 GMT
Date: Thu, 27 Jul 2006 19:04:42 +0000 (GMT)
From: MALCOLM CLARK <malcyclark@btinternet.com>
Reply-To: MALCOLM CLARK <malcyclark@btinternet.com>
Subject: Re: Indexing large sets of documents?
To: java-user@lucene.apache.org
In-Reply-To: <44C8E9EB.10304@mac.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1152974928-1154027082=:32052"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1152974928-1154027082=:32052
Content-Type: text/plain; charset=us-ascii




Is this the W3 Ent collection you are indexing?
 
MC
--0-1152974928-1154027082=:32052--

From java-user-return-22332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 19:11:35 2006
Return-Path: <java-user-return-22332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11597 invoked from network); 27 Jul 2006 19:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 19:11:35 -0000
Received: (qmail 87256 invoked by uid 500); 27 Jul 2006 19:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87122 invoked by uid 500); 27 Jul 2006 19:11:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87106 invoked by uid 99); 27 Jul 2006 19:11:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 12:11:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.202.165.224] (HELO smtpout06-04.prod.mesa1.secureserver.net) (64.202.165.224)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jul 2006 12:11:27 -0700
Received: (qmail 11665 invoked from network); 27 Jul 2006 19:11:06 -0000
Received: from unknown (209.204.147.41)
  by smtpout06-04.prod.mesa1.secureserver.net (64.202.165.227) with ESMTP; 27 Jul 2006 19:11:05 -0000
From: "Dejan Nenov" <dejannenov@jollyobject.com>
To: <java-user@lucene.apache.org>
Subject: RE: Indexing large sets of documents?
Date: Thu, 27 Jul 2006 12:11:12 -0700
Organization: Dejan Nenov Privarte Email
Message-ID: <001b01c6b1b0$6d1ee6e0$8380a8c0@safarijv.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
In-Reply-To: <44C8E9EB.10304@mac.com>
Thread-Index: Acaxmi8au21PvHpKQ4qLNyi7bWOOjgAFVbZw
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes - parallelizing works great - we built a share-nothing java-spaces based
system at X1 and on a 11-way cluster were able to index 350 office documents
per second - this included the binary-2-text conversion, using Stellent INSO
libraries. The trick is to create separate indexes and, if you do not have a
federated search setup  - merge the indexes into one big index after they
are completed.

Dejan

-----Original Message-----
From: Michael J. Prichard [mailto:michael_prichard@mac.com] 
Sent: Thursday, July 27, 2006 9:30 AM
To: java-user@lucene.apache.org
Subject: Indexing large sets of documents?

I built an indexer that runs through email and its attachments, rips out 
content and what not and then creates a Document and adds it to an 
index.  It works w/ no problem.  The issue is that it takes around 3-5 
seconds per email and I have seen up to 10-15 seconds for email w/ 
attachments.  I need to index 750k emails and at those times it will 
take FOREVER!  I am trying to find places to cut a second or two here or 
there but are there any suggestions as to what I can do?  Should I look 
into parallelizing indexing?  Help?!

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 19:41:31 2006
Return-Path: <java-user-return-22333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26521 invoked from network); 27 Jul 2006 19:41:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 19:41:31 -0000
Received: (qmail 37153 invoked by uid 500); 27 Jul 2006 19:41:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36212 invoked by uid 500); 27 Jul 2006 19:41:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36201 invoked by uid 99); 27 Jul 2006 19:41:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 12:41:24 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jul 2006 12:41:23 -0700
Received: (qmail 69015 invoked by uid 60001); 27 Jul 2006 19:41:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=2ULWVp7uUwuV4JJd2LWVxQfA8lLpMQB03Vh36kLNWKFtkYZp3+50GLC/Jk2PtUujnoBcGnU+oVqiJk2HRuhZMbgRIb3BX6msqzTqIa0u3bcE0M1QsD3FRTarV4Xqi12xrhpiCROQiw26lBzCDI6ydh9TImDumDIRNBOdMyCOugI=  ;
Message-ID: <20060727194102.69013.qmail@web50315.mail.yahoo.com>
Received: from [72.229.167.99] by web50315.mail.yahoo.com via HTTP; Thu, 27 Jul 2006 12:41:02 PDT
Date: Thu, 27 Jul 2006 12:41:02 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing large sets of documents?
To: java-user@lucene.apache.org
In-Reply-To: <44C8E9EB.10304@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael, 
 
Certainly parallelizing on a set of servers would work (hmm... hadoop?), but if you want to do this on a single machine you should tune some of the IndexWriter params.  You didn't mention them, so I assume you didn't tune anything yet.  If you have Lucene in Action, check out
 2.7.1  : Tuning indexing performance        starts on page 42  under section 2.7 (Controlling the indexing process) in chapter 2 (Indexing)  
 (found via: http://lucenebook.com/search?query=index+tuning )

If not, check maxBufferedDocs and mergeFactor in IndexWriter javadocs.  This is likely in the FAQ, too, but I didn't check.

Otis

----- Original Message ---- 
From: Michael J. Prichard  
To: java-user@lucene.apache.org 
Sent: Thursday, July 27, 2006 12:29:31 PM 
Subject: Indexing large sets of documents? 
 
I built an indexer that runs through email and its attachments, rips out  
content and what not and then creates a Document and adds it to an  
index.  It works w/ no problem.  The issue is that it takes around 3-5  
seconds per email and I have seen up to 10-15 seconds for email w/  
attachments.  I need to index 750k emails and at those times it will  
take FOREVER!  I am trying to find places to cut a second or two here or  
there but are there any suggestions as to what I can do?  Should I look  
into parallelizing indexing?  Help?! 
 
Thanks, 
Michael 
 
--------------------------------------------------------------------- 
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org 
For additional commands, e-mail: java-user-help@lucene.apache.org 
 
 
 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 20:24:27 2006
Return-Path: <java-user-return-22334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60228 invoked from network); 27 Jul 2006 20:24:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 20:24:26 -0000
Received: (qmail 28509 invoked by uid 500); 27 Jul 2006 20:24:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28471 invoked by uid 500); 27 Jul 2006 20:24:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28457 invoked by uid 99); 27 Jul 2006 20:24:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 13:24:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rafael.rossini@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 13:24:18 -0700
Received: by nf-out-0910.google.com with SMTP id o63so273067nfa
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 13:23:56 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WBcUWhd1A0tTXCiZWGcQgxQH6X0IZdlmPDPdGr/P06wbPr2y9D9Sg26Ssr70MuzX4yNThDfwdmQWaq8CpEF4zpIXX1HszlT5aBb/q2mC9RXaPlRvb6gEnHhqe1XIE/vOFKw4rIaKy6ZtcBNE8ZxxXgmVZLSjvAh7pkbxszsHwaQ=
Received: by 10.78.139.5 with SMTP id m5mr214909hud;
        Thu, 27 Jul 2006 13:23:56 -0700 (PDT)
Received: by 10.78.44.9 with HTTP; Thu, 27 Jul 2006 13:23:56 -0700 (PDT)
Message-ID: <a8d89b3b0607271323k31a35b6dy7298cfe4143f2ff0@mail.gmail.com>
Date: Thu, 27 Jul 2006 17:23:56 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing large sets of documents?
In-Reply-To: <20060727194102.69013.qmail@web50315.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_166367_8482288.1154031836188"
References: <44C8E9EB.10304@mac.com>
	 <20060727194102.69013.qmail@web50315.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_166367_8482288.1154031836188
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oits,

   You mentioned the hadoop project. I check it out not a long time ago and
I read someting about it did not support the lucene index. Is it possible to
index and then search in a HDFS?

[]s
     Rossini


On 7/27/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Michael,
>
> Certainly parallelizing on a set of servers would work (hmm... hadoop?),
> but if you want to do this on a single machine you should tune some of the
> IndexWriter params.  You didn't mention them, so I assume you didn't tune
> anything yet.  If you have Lucene in Action, check out
> 2.7.1  : Tuning indexing performance        starts on page 42  under
> section 2.7 (Controlling the indexing process) in chapter 2 (Indexing)
> (found via: http://lucenebook.com/search?query=index+tuning )
>
> If not, check maxBufferedDocs and mergeFactor in IndexWriter
> javadocs.  This is likely in the FAQ, too, but I didn't check.
>
> Otis
>
> ----- Original Message ----
> From: Michael J. Prichard
> To: java-user@lucene.apache.org
> Sent: Thursday, July 27, 2006 12:29:31 PM
> Subject: Indexing large sets of documents?
>
> I built an indexer that runs through email and its attachments, rips out
> content and what not and then creates a Document and adds it to an
> index.  It works w/ no problem.  The issue is that it takes around 3-5
> seconds per email and I have seen up to 10-15 seconds for email w/
> attachments.  I need to index 750k emails and at those times it will
> take FOREVER!  I am trying to find places to cut a second or two here or
> there but are there any suggestions as to what I can do?  Should I look
> into parallelizing indexing?  Help?!
>
> Thanks,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_166367_8482288.1154031836188--

From java-user-return-22335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 21:01:29 2006
Return-Path: <java-user-return-22335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55652 invoked from network); 27 Jul 2006 21:01:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 21:01:29 -0000
Received: (qmail 14624 invoked by uid 500); 27 Jul 2006 21:01:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14589 invoked by uid 500); 27 Jul 2006 21:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14578 invoked by uid 99); 27 Jul 2006 21:01:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 14:01:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.146.188.15] (HELO web86209.mail.ird.yahoo.com) (217.146.188.15)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jul 2006 14:01:21 -0700
Received: (qmail 82028 invoked by uid 60001); 27 Jul 2006 21:01:00 -0000
Message-ID: <20060727210100.82026.qmail@web86209.mail.ird.yahoo.com>
Received: from [193.63.235.72] by web86209.mail.ird.yahoo.com via HTTP; Thu, 27 Jul 2006 21:01:00 GMT
Date: Thu, 27 Jul 2006 21:01:00 +0000 (GMT)
From: MALCOLM CLARK <malcyclark@btinternet.com>
Reply-To: MALCOLM CLARK <malcyclark@btinternet.com>
Subject: Output of index
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-653635601-1154034059=:80628"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-653635601-1154034059=:80628
Content-Type: text/plain; charset=us-ascii

Hi,
I'm going to attempt to output several thousand documents from a 3+ million document collection into a csv file. 
What is the most efficient method of retrieving all the text from the fields of each document one by one? Please help!
 
Thanks,
Malcolm
--0-653635601-1154034059=:80628--

From java-user-return-22336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 27 21:46:20 2006
Return-Path: <java-user-return-22336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83385 invoked from network); 27 Jul 2006 21:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2006 21:46:20 -0000
Received: (qmail 15479 invoked by uid 500); 27 Jul 2006 21:46:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15432 invoked by uid 500); 27 Jul 2006 21:46:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15421 invoked by uid 99); 27 Jul 2006 21:46:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 14:46:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.230 as permitted sender)
Received: from [64.233.184.230] (HELO wr-out-0506.google.com) (64.233.184.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 14:46:11 -0700
Received: by wr-out-0506.google.com with SMTP id i30so1207166wra
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 14:45:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=VVfoK0wTyJfMpZIavx85u1bwWh0kLwqI2vzJb5HS2JfPMdb1vFVtpTnor0RPhdgc6oZAUL+Gwtb6jgQhHkUQGQTxPI/m7K+V1i3akFKWOnVd67B3Hrc7lxZYYvCkzctxP9VPN0b1aclfoltc6qObXIVsn1SHQmLAL3oiNGpZ5hY=
Received: by 10.54.134.14 with SMTP id h14mr1171296wrd;
        Thu, 27 Jul 2006 14:45:50 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id g9sm5183624wra.2006.07.27.14.45.49;
        Thu, 27 Jul 2006 14:45:50 -0700 (PDT)
Message-ID: <44C93410.6090207@gmail.com>
Date: Thu, 27 Jul 2006 17:45:52 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Distributed Search
References: <20060727210100.82026.qmail@web86209.mail.ird.yahoo.com>
In-Reply-To: <20060727210100.82026.qmail@web86209.mail.ird.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I know there has been a lot of discussion on distributed search...I am 
looking for a cross platform solution, which seems to kill solr's 
approach...Everyone seems to have implemented this, but only as 
proprietary code...it would seem that just using the RMI searcher would 
allow a simple solution? Is this the case? Could you easily provide 
clustering and fail over using a variety of indexes and searching them 
all with RMI searcher? Is it all really that complicated? I have read 
that Lucene tops out at about 10m docs for a single server...I want to 
hit 100m. I have a beautiful app that allows realtime updating/searching 
(updates are rare but should be instant)...and I just want it to scale 
up to 100m docs or so . Is that going to be an really advanced project 
no matter how I slice it? I have done a lot of custom work with the 
lucene stuff so it would seem difficult to adapt it to Nutch (but what 
do I know Nutch) ... I have seen a lot of talk but not much on a simple 
RMI searcher solution...any idea?


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 00:44:48 2006
Return-Path: <java-user-return-22337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28200 invoked from network); 28 Jul 2006 00:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 00:44:48 -0000
Received: (qmail 46939 invoked by uid 500); 28 Jul 2006 00:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46909 invoked by uid 500); 28 Jul 2006 00:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46898 invoked by uid 99); 28 Jul 2006 00:44:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 17:44:42 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.215] (HELO web50313.mail.yahoo.com) (206.190.39.215)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jul 2006 17:44:41 -0700
Received: (qmail 25155 invoked by uid 60001); 28 Jul 2006 00:44:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=w13c/wpkI49MPV3TGfYNxYgbnsxzxt+OBoQ5rkw7MP3f5RJMCJ4uT653nn03AZOLUo0LqAGSmvtVJAJcwHVOjafISGy1Q6Y/TjDPJeoWOo/yxIMMoB/lU1jI1R0VgizpZoAnS6GaUxPMU+r9hqojJeYP6RVEpVXF7hAJzNkSXKw=  ;
Message-ID: <20060728004420.25153.qmail@web50313.mail.yahoo.com>
Received: from [72.229.167.99] by web50313.mail.yahoo.com via HTTP; Thu, 27 Jul 2006 17:44:20 PDT
Date: Thu, 27 Jul 2006 17:44:20 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Output of index
To: java-user@lucene.apache.org
In-Reply-To: <20060727210100.82026.qmail@web86209.mail.ird.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think:
- Get the number of documents from IndexReader.
- Go from 0 to that number.
- If reader.deleted(docId) == false
    get doc
    output doc fields' content

Otis

----- Original Message ----
From: MALCOLM CLARK <malcyclark@btinternet.com>
To: java-user@lucene.apache.org
Sent: Thursday, July 27, 2006 5:01:00 PM
Subject: Output of index

Hi,
I'm going to attempt to output several thousand documents from a 3+ million document collection into a csv file. 
What is the most efficient method of retrieving all the text from the fields of each document one by one? Please help!
 
Thanks,
Malcolm



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 00:51:58 2006
Return-Path: <java-user-return-22338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29306 invoked from network); 28 Jul 2006 00:51:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 00:51:58 -0000
Received: (qmail 52591 invoked by uid 500); 28 Jul 2006 00:51:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52560 invoked by uid 500); 28 Jul 2006 00:51:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52549 invoked by uid 99); 28 Jul 2006 00:51:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 17:51:53 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jul 2006 17:51:52 -0700
Received: (qmail 84324 invoked by uid 60001); 28 Jul 2006 00:51:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=V4+2ouOnOIIUmCPMZMF7UFT+/s5GZK0HpNf6rl99nuQLRUGy7OAAUxahZd27VcWUtWy2qgT+jo5L2Elskg8fa4cfy86Zi6qunpvqv8zI6OVFB11N3DL9O9FpqXm1EwDmhpWR0rRFZIhwuBQdzbhRD0uRozApHwfxJAFqOvQOKno=  ;
Message-ID: <20060728005131.84322.qmail@web50304.mail.yahoo.com>
Received: from [72.229.167.99] by web50304.mail.yahoo.com via HTTP; Thu, 27 Jul 2006 17:51:31 PDT
Date: Thu, 27 Jul 2006 17:51:31 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Distributed Search
To: java-user@lucene.apache.org
In-Reply-To: <44C93410.6090207@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think we have an RMI example in Lucene in Action.
You could also look at how Nutch does it.  I think the code is in org.apache.nutch.ipc package.
I'm not sure why cross-platform requirement rules out Solr, I would think it would exactly the opposite.
As for 10m limit, it depends.  It depends on the actual size of the index (indexed fields), complexity of queries, required query latency, the hardware you throw at it, etc.  So you can't really say 10m is the limit.  You might have gotten that number from some of the older Nutch docs/presentations, which means they are a few years old now and are Nutch-specific.

Clustering and failover and "easily" don't really go together, in my experience, and this is not limited to Luceneland. :(
I'd love to be wrong about this, but it seems clustering/failover/HA stuff + Lucene always ends up being a custom and propriatory job.

Otis

----- Original Message ----
From: Mark Miller <markrmiller@gmail.com>
To: java-user@lucene.apache.org
Sent: Thursday, July 27, 2006 5:45:52 PM
Subject: Distributed Search

I know there has been a lot of discussion on distributed search...I am 
looking for a cross platform solution, which seems to kill solr's 
approach...Everyone seems to have implemented this, but only as 
proprietary code...it would seem that just using the RMI searcher would 
allow a simple solution? Is this the case? Could you easily provide 
clustering and fail over using a variety of indexes and searching them 
all with RMI searcher? Is it all really that complicated? I have read 
that Lucene tops out at about 10m docs for a single server...I want to 
hit 100m. I have a beautiful app that allows realtime updating/searching 
(updates are rare but should be instant)...and I just want it to scale 
up to 100m docs or so . Is that going to be an really advanced project 
no matter how I slice it? I have done a lot of custom work with the 
lucene stuff so it would seem difficult to adapt it to Nutch (but what 
do I know Nutch) ... I have seen a lot of talk but not much on a simple 
RMI searcher solution...any idea?


- Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 00:54:24 2006
Return-Path: <java-user-return-22339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29918 invoked from network); 28 Jul 2006 00:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 00:54:24 -0000
Received: (qmail 56220 invoked by uid 500); 28 Jul 2006 00:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56184 invoked by uid 500); 28 Jul 2006 00:54:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56173 invoked by uid 99); 28 Jul 2006 00:54:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 17:54:17 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.243] (HELO web50310.mail.yahoo.com) (206.190.38.243)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Jul 2006 17:54:16 -0700
Received: (qmail 28669 invoked by uid 60001); 28 Jul 2006 00:53:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ufJc4QN6LDj2ygmlodjT/afalN0iGKz27XU1MWarmscIVPQIZCpBXx/YqbDyzkaKFnGoW6q8WId3TQX4u8Pk9ShahGl1/zAhF7w/BroFtmGUxT1eoaImGmhH45addgmnq6zRvnBxES+v6QJZnVlvMetoiLpjI230O2NNeha3vcM=  ;
Message-ID: <20060728005356.28667.qmail@web50310.mail.yahoo.com>
Received: from [72.229.167.99] by web50310.mail.yahoo.com via HTTP; Thu, 27 Jul 2006 17:53:56 PDT
Date: Thu, 27 Jul 2006 17:53:56 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing large sets of documents?
To: java-user@lucene.apache.org
In-Reply-To: <a8d89b3b0607271323k31a35b6dy7298cfe4143f2ff0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rossini{},

I think what you might have read might have been that searching a Lucene index that lives in a HDFS would be slow.  As far as I understand things, the thing to do is to copy the index to a local disk, out of HDFS, and then search it with Lucene from there.

Otis()

----- Original Message ----
From: Rafael Rossini <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org; Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Sent: Thursday, July 27, 2006 4:23:56 PM
Subject: Re: Indexing large sets of documents?

Oits,

   You mentioned the hadoop project. I check it out not a long time ago and
I read someting about it did not support the lucene index. Is it possible to
index and then search in a HDFS?

[]s
     Rossini


On 7/27/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Michael,
>
> Certainly parallelizing on a set of servers would work (hmm... hadoop?),
> but if you want to do this on a single machine you should tune some of the
> IndexWriter params.  You didn't mention them, so I assume you didn't tune
> anything yet.  If you have Lucene in Action, check out
> 2.7.1  : Tuning indexing performance        starts on page 42  under
> section 2.7 (Controlling the indexing process) in chapter 2 (Indexing)
> (found via: http://lucenebook.com/search?query=index+tuning )
>
> If not, check maxBufferedDocs and mergeFactor in IndexWriter
> javadocs.  This is likely in the FAQ, too, but I didn't check.
>
> Otis
>
> ----- Original Message ----
> From: Michael J. Prichard
> To: java-user@lucene.apache.org
> Sent: Thursday, July 27, 2006 12:29:31 PM
> Subject: Indexing large sets of documents?
>
> I built an indexer that runs through email and its attachments, rips out
> content and what not and then creates a Document and adds it to an
> index.  It works w/ no problem.  The issue is that it takes around 3-5
> seconds per email and I have seen up to 10-15 seconds for email w/
> attachments.  I need to index 750k emails and at those times it will
> take FOREVER!  I am trying to find places to cut a second or two here or
> there but are there any suggestions as to what I can do?  Should I look
> into parallelizing indexing?  Help?!
>
> Thanks,
> Michael
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 01:33:39 2006
Return-Path: <java-user-return-22340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42919 invoked from network); 28 Jul 2006 01:33:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 01:33:39 -0000
Received: (qmail 5994 invoked by uid 500); 28 Jul 2006 01:33:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5966 invoked by uid 500); 28 Jul 2006 01:33:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5955 invoked by uid 99); 28 Jul 2006 01:33:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 18:33:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.228 as permitted sender)
Received: from [64.233.184.228] (HELO wr-out-0506.google.com) (64.233.184.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 18:33:31 -0700
Received: by wr-out-0506.google.com with SMTP id i7so31034wra
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 18:33:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ReFt3Qft5KBfkVTpJ4xxxvskRF+LvAcQB+PpHRhxd3cVBPawwqhnbZPfr8I0u7FXWRhlq2yObKnR+kpYbFnt8HRI/XPMWcc4lXNPM2N3lq1kCkiT4WCjxsgLnekYA9acIwIYV+ocsAoXQ2cQ0J8oN7B4N05bpwXRmIZQNpMRDL8=
Received: by 10.54.79.6 with SMTP id c6mr2164341wrb;
        Thu, 27 Jul 2006 18:33:11 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id g7sm993012wra.2006.07.27.18.33.09;
        Thu, 27 Jul 2006 18:33:10 -0700 (PDT)
Message-ID: <44C96957.3070701@gmail.com>
Date: Thu, 27 Jul 2006 21:33:11 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.4 (Windows/20060516)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Distributed Search
References: <20060728005131.84322.qmail@web50304.mail.yahoo.com>
In-Reply-To: <20060728005131.84322.qmail@web50304.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:
> I think we have an RMI example in Lucene in Action.
> You could also look at how Nutch does it.  I think the code is in org.apache.nutch.ipc package.
> I'm not sure why cross-platform requirement rules out Solr, I would think it would exactly the opposite.
> As for 10m limit, it depends.  It depends on the actual size of the index (indexed fields), complexity of queries, required query latency, the hardware you throw at it, etc.  So you can't really say 10m is the limit.  You might have gotten that number from some of the older Nutch docs/presentations, which means they are a few years old now and are Nutch-specific.
>
> Clustering and failover and "easily" don't really go together, in my experience, and this is not limited to Luceneland. :(
> I'd love to be wrong about this, but it seems clustering/failover/HA stuff + Lucene always ends up being a custom and propriatory job.
>
> Otis
>
> ----- Original Message ----
> From: Mark Miller <markrmiller@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Thursday, July 27, 2006 5:45:52 PM
> Subject: Distributed Search
>
> I know there has been a lot of discussion on distributed search...I am 
> looking for a cross platform solution, which seems to kill solr's 
> approach...Everyone seems to have implemented this, but only as 
> proprietary code...it would seem that just using the RMI searcher would 
> allow a simple solution? Is this the case? Could you easily provide 
> clustering and fail over using a variety of indexes and searching them 
> all with RMI searcher? Is it all really that complicated? I have read 
> that Lucene tops out at about 10m docs for a single server...I want to 
> hit 100m. I have a beautiful app that allows realtime updating/searching 
> (updates are rare but should be instant)...and I just want it to scale 
> up to 100m docs or so . Is that going to be an really advanced project 
> no matter how I slice it? I have done a lot of custom work with the 
> lucene stuff so it would seem difficult to adapt it to Nutch (but what 
> do I know Nutch) ... I have seen a lot of talk but not much on a simple 
> RMI searcher solution...any idea?
>
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
Thanks for the info Otis. I thought I read that solr requires an OS that 
supports hard links and thought that Windows only supports soft links. 
Perhaps I am wrong.

Thanks,

- mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 01:49:35 2006
Return-Path: <java-user-return-22341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46730 invoked from network); 28 Jul 2006 01:49:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 01:49:35 -0000
Received: (qmail 29881 invoked by uid 500); 28 Jul 2006 01:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29846 invoked by uid 500); 28 Jul 2006 01:49:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29834 invoked by uid 99); 28 Jul 2006 01:49:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 18:49:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 18:49:26 -0700
Received: by py-out-1112.google.com with SMTP id e30so459676pya
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 18:49:05 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=CLAXroPae5lNz3aXc+X/haN2eKWwmmQ88/Yd/ccZ4Jg7mcIbACer6UDhkJh0WqAWxccaHvPpEIDCJPd2Z+t1/tqBQnaFp1GEmoAGzLhYluU0IWuR0NnbwJz8n+7GVoOemqqrNsw6SEgVK5a20fz/4lahpQgVfAbQrrRCNubZVKg=
Received: by 10.35.61.14 with SMTP id o14mr13870076pyk;
        Thu, 27 Jul 2006 18:49:05 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Thu, 27 Jul 2006 18:49:05 -0700 (PDT)
Message-ID: <c68e39170607271849p4219c728yae19a9c3334f60b0@mail.gmail.com>
Date: Thu, 27 Jul 2006 21:49:05 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Distributed Search
In-Reply-To: <44C96957.3070701@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060728005131.84322.qmail@web50304.mail.yahoo.com>
	 <44C96957.3070701@gmail.com>
X-Google-Sender-Auth: 182ed31b2940bc6d
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/27/06, Mark Miller <markrmiller@gmail.com> wrote:
> I thought I read that solr requires an OS that
> supports hard links and thought that Windows only supports soft links.

For the default index distribution method from master to searcher,
yes, hard-links are currently needed.

The distribution mechanism is *very* loosely coupled with Solr though,
and one could come up with an alternate method.  Also, cygwin might
support hard links to files now (I tried it quickly and it seems to
work) so that might be a path forward on Windows.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 02:04:29 2006
Return-Path: <java-user-return-22342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48153 invoked from network); 28 Jul 2006 02:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 02:04:29 -0000
Received: (qmail 38934 invoked by uid 500); 28 Jul 2006 02:04:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38112 invoked by uid 500); 28 Jul 2006 02:04:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38101 invoked by uid 99); 28 Jul 2006 02:04:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 19:04:24 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 19:04:23 -0700
Received: by ug-out-1314.google.com with SMTP id y2so517522uge
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 19:04:02 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=H0ZSvy/N2WR/bv/s9gDF0ATg7ZxlwNUVL1/wM/8/WP08INQlYZj4eeyH0ewyjNpuvBWelvq50TiMoq2rREi5AnPDfC9Ob0QkBEu1xGg8wtr4a/uBvTHdmYPjHs6X91v5TsjLR5965xUQttz9aB3AOGPhFUAGV7c3ETpeaixzqek=
Received: by 10.66.242.20 with SMTP id p20mr7973537ugh;
        Thu, 27 Jul 2006 19:04:01 -0700 (PDT)
Received: by 10.67.88.5 with HTTP; Thu, 27 Jul 2006 19:04:01 -0700 (PDT)
Message-ID: <4f2c7c9b0607271904q7d64b5bdu258b6055750e5f5b@mail.gmail.com>
Date: Fri, 28 Jul 2006 10:04:01 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Consult some information about adding index while searching
In-Reply-To: <44C89B5F.4020908@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_33682_17052268.1154052241945"
References: <4f2c7c9b0607270248x4130aec3gf6c57ee9a0806474@mail.gmail.com>
	 <44C89B5F.4020908@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_33682_17052268.1154052241945
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yes, I have closed IndexWriter.  But it doesn't work.

2006/7/27, Michael McCandless <lucene@mikemccandless.com>:
>
>
> > I met this problem: when searching,  I add documents to index. Although
> I
> > instantiates a new IndexSearcher,  I can't retrieve the newly added
> > documents. I have to close the program and enter the program, then it
> will
> > be ok.
>
> Did you close your IndexWriter (so it flushes all changes to disk)
> before instantiating a new IndexSearcher?
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_33682_17052268.1154052241945--

From java-user-return-22343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 02:45:26 2006
Return-Path: <java-user-return-22343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55317 invoked from network); 28 Jul 2006 02:45:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 02:45:25 -0000
Received: (qmail 78774 invoked by uid 500); 28 Jul 2006 02:45:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78740 invoked by uid 500); 28 Jul 2006 02:45:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78729 invoked by uid 99); 28 Jul 2006 02:45:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 19:45:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of winters.mi@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 19:45:16 -0700
Received: by nf-out-0910.google.com with SMTP id o63so52678nfa
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 19:44:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GOGli4hbbf5w6DRzvCw54dZE3gkRm62ZOTNkfqnakA0pjKL2Sf/0hzLQDiI/DC59yLcK9BlYxg/Sjb+luZyOJbHjkPyvK9SI/GVkaiJx8vVyZ220BR17x9AbfsJZd9+uP6A//8f6TdHOA5+pYBwosq/roJleEgVAoYgYkyG9IdQ=
Received: by 10.82.109.9 with SMTP id h9mr599012buc;
        Thu, 27 Jul 2006 19:44:55 -0700 (PDT)
Received: by 10.82.133.3 with HTTP; Thu, 27 Jul 2006 19:44:54 -0700 (PDT)
Message-ID: <70da802d0607271944u3e72b6a0rf295109caa4b540e@mail.gmail.com>
Date: Fri, 28 Jul 2006 10:44:55 +0800
From: "Jia Mi" <winters.mi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to get TermFreq only in some query results
In-Reply-To: <BAF4C5F9-AA9A-4745-92F3-9F6DADE83C81@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10202_28657915.1154054695138"
References: <70da802d0607270152k315a6494t2f2c4bca7b5feb66@mail.gmail.com>
	 <BAF4C5F9-AA9A-4745-92F3-9F6DADE83C81@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10202_28657915.1154054695138
Content-Type: text/plain; charset=ISO-2022-JP; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you, Grant, really help me :P

On 7/27/06, Grant Ingersoll <gsingers@syr.edu> wrote:
>
> You could store Term Vectors for your documents, and then look up the
> individual document vectors based on the query results.   If you need
> help w/ Term Vectors, check out Lucene in Action, search this list,
> or http://www.cnlp.org/apachecon2005
>
> -Grant
>
> On Jul 27, 2006, at 4:52 AM, Jia Mi wrote:
>
> > Hi everyone,
> >
> > I am just developing an application using Lucene, and I know how to
> > get the
> > Term Freq via the IndexReader for the whole corpus. But I wonder if
> > I can
> > get the term freq statistics just inside the query results, like I
> > want the
> > hot words in just recent two weeks added into Lucene indices, and how?
> >
> > Thank you very much, any opinions would be apprecieated!
> >
> > --
> > Best and Regards,
> > Jia Mi ($BJF2E(B)
>
> --------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> 335 Hinds Hall
> Syracuse, NY 13244
> http://www.cnlp.org
>
> Voice: 315-443-5484
> Skype: grant_ingersoll
> Fax: 315-443-6886
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Best and Regards,
Jia Mi ($BJF2E(B)

------=_Part_10202_28657915.1154054695138--

From java-user-return-22344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 06:03:09 2006
Return-Path: <java-user-return-22344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6576 invoked from network); 28 Jul 2006 06:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 06:03:09 -0000
Received: (qmail 58670 invoked by uid 500); 28 Jul 2006 06:03:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57776 invoked by uid 500); 28 Jul 2006 06:03:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57765 invoked by uid 99); 28 Jul 2006 06:03:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 23:03:03 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Jul 2006 23:03:02 -0700
Received: by nf-out-0910.google.com with SMTP id o63so79553nfa
        for <java-user@lucene.apache.org>; Thu, 27 Jul 2006 23:02:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AOaHmiuVU+/HbeT3uYoXF0Xt3MWoLMxLc+HZUjuFhwK7UHDUfB9SrFW6HF0c0k2OCU+LTbS9ZS50j3FQh7FMhtJG/HBzHIOFbN7exC5zarkaLIRgflI6DfPP77rJdpdJpKvD84KL9uwtEYS1GX8vELzQQQCgnRRgHnFsxRertXY=
Received: by 10.78.132.12 with SMTP id f12mr804539hud;
        Thu, 27 Jul 2006 23:02:40 -0700 (PDT)
Received: by 10.78.119.3 with HTTP; Thu, 27 Jul 2006 23:02:40 -0700 (PDT)
Message-ID: <50f433360607272302g6a835fbag7a1feb1b8d43227d@mail.gmail.com>
Date: Thu, 27 Jul 2006 23:02:40 -0700
From: "Jeff Rodenburg" <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed Search
In-Reply-To: <44C93410.6090207@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3968_29601276.1154066560840"
References: <20060727210100.82026.qmail@web86209.mail.ird.yahoo.com>
	 <44C93410.6090207@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3968_29601276.1154066560840
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Mark -

Having gone down this path for the past year, I echo comments from others
that scalability/availability/failover is a lot of work.  We migrated away
from a custom system based on Lucene running on Windows to Solr running on
Linux.  It took us 6 months to get our system to a solid five-nines in
availability.  Having done this previously, I can advise one not to
underestimate the effort involved with this.  We would have taken the simple
route had it been available.

We shifted to Solr because of the operational elements that allows us to
achieve clustering and failover capability within the Linux/Apache/Tomcat
(our flavor) mix.  It just works better for us than our home-brew.

-- j

On 7/27/06, Mark Miller <markrmiller@gmail.com> wrote:
>
> I know there has been a lot of discussion on distributed search...I am
> looking for a cross platform solution, which seems to kill solr's
> approach...Everyone seems to have implemented this, but only as
> proprietary code...it would seem that just using the RMI searcher would
> allow a simple solution? Is this the case? Could you easily provide
> clustering and fail over using a variety of indexes and searching them
> all with RMI searcher? Is it all really that complicated? I have read
> that Lucene tops out at about 10m docs for a single server...I want to
> hit 100m. I have a beautiful app that allows realtime updating/searching
> (updates are rare but should be instant)...and I just want it to scale
> up to 100m docs or so . Is that going to be an really advanced project
> no matter how I slice it? I have done a lot of custom work with the
> lucene stuff so it would seem difficult to adapt it to Nutch (but what
> do I know Nutch) ... I have seen a lot of talk but not much on a simple
> RMI searcher solution...any idea?
>
>
> - Mark
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3968_29601276.1154066560840--

From java-user-return-22345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 07:19:29 2006
Return-Path: <java-user-return-22345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25977 invoked from network); 28 Jul 2006 07:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 07:19:28 -0000
Received: (qmail 50709 invoked by uid 500); 28 Jul 2006 07:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50541 invoked by uid 500); 28 Jul 2006 07:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50530 invoked by uid 99); 28 Jul 2006 07:19:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 00:19:21 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 00:19:19 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6S7Iv0n048858
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 07:18:57 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6S7MHth144894
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 09:22:18 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6S7Iv27002924
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 09:18:57 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6S7IvXj002921
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 09:18:57 +0200
In-Reply-To: <E9BF7E0FD95D1143B399B129908A58FF01582804@datachange01.dataconversions.biz>
Subject: Re: Scoring a document (count?)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFE63FF6B5.D94BF037-ON882571B8.00715AE7-882571B9.00282C1E@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 28 Jul 2006 00:18:47 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 28/07/2006 10:22:17
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This task reminds me more of a count(*) sql query than a text search query.

Assuming that using a text search engine is a pre requisite, I can think of
two approaches - basing on Lucene scoring as suggested in the question, or
a more simple approach (below).

For the scoring approach - I don't see an easy way to get the counts from
the score of the results, although the TF (term frequency in candidate
docs) is known+used during document scoring, and although it seems that the
application can be arranged such that TF of search result documents would
be the required count.

But perhaps a more straight forward solution can do - adding a Lucene
document for each star-movie pair. This would also allow easy update when a
new movie arrives: just add a document for each "star" in that movie. A
document can have these fields:
   StarFirstName - stored, untokenized
   StarLastName - stored, untokenized
   MovieName - stored, tokenized
   MovieType - stored, untokenized - this is the pre-computed type
mentioned below
   MovieProps  - unstored, tokenized - the word "horror" can appear in this
field, avoiding a pre-computation step.
Now a single search can do all the work:
   +StarLastName:A* +MovieProps:horror
Sorting results by StarLastName would group all results of same "star" and
also allow to count them for each star.

This would create more documents in the index -  #stars * |#movies per
star| - so there may be performance considerations, depending on the volume
of the data...

Regards,
Doron

"Russell M. Allen" <Russell.Allen@aebn.net> wrote on 27/07/2006 09:02:46:

> I am curious about the potential use of document scoring as a means to
> extract additional data from an index.  Specifically, I would like the
> score to be a count of how many times a particular field matched a set
> of terms.
>
> For example, I am indexing movie-stars (Each document is a movie-star).
> A movie-star has a number of fields, such as name, movies they have been
> in, etc.  I want to produce an 'index' of stars by name and show how
> many movies, which match a filter, that they have appeared in.
>
> In natural language my query might be:
>    "List all stars who have appeared in a 'horror' movie, where
> last name starts with A, and tell me how many horror movies they were
> in."
>
> My search will look something like this:
>    "+lastName:A* +movie:(1 7 21 58 92)"   //where movie is a
> previously computed list of 'horror' movie ids
>
> If my index contained the following documents:
>     doc1 = lastName:Anna   movie:{3 10}
>     doc2 = lastName:Aba    movie:{1 10 12}
>     doc3 = lastName:Addd   movie:{3 21 55 92}
>     doc4 = lastName:Baaa   movie:{7 56}
>
> I would like to get back:
>     doc2, score of 1   //score of 1 because only movie 1 matched
>     doc3, score of 2   //score of 2 because movies 21 and 92 matched
>
>
>
> Currently, we perform an initial query against our Star index to
> retrieve a list of stars.  Then we perform N queries against a separate
> movie index to count the number of movies that match our sub filter
> 'horror'.  This is obviously very inefficient, and as I've shown above,
> the information (count) is available during the primary query.
>
> Thoughts?
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 07:37:55 2006
Return-Path: <java-user-return-22346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36179 invoked from network); 28 Jul 2006 07:37:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 07:37:55 -0000
Received: (qmail 71639 invoked by uid 500); 28 Jul 2006 07:37:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71616 invoked by uid 500); 28 Jul 2006 07:37:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71605 invoked by uid 99); 28 Jul 2006 07:37:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 00:37:49 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 00:37:48 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6S7bQBI040728
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 07:37:26 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6S7ek71151818
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 09:40:47 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6S7bQ7B021625
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 09:37:26 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6S7bQQs021622
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 09:37:26 +0200
In-Reply-To: <4f2c7c9b0607271904q7d64b5bdu258b6055750e5f5b@mail.gmail.com>
Subject: Re: Consult some information about adding index while searching
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF2B2F102C.D10F4551-ON882571B9.00296112-882571B9.0029A633@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 28 Jul 2006 00:34:55 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 28/07/2006 10:40:46
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Yes, I have closed IndexWriter.  But it doesn't work.

This is strange...
Can you post a small version of your code that can be executed to show the
problem?
- Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 08:28:45 2006
Return-Path: <java-user-return-22347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51430 invoked from network); 28 Jul 2006 08:28:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 08:28:45 -0000
Received: (qmail 60494 invoked by uid 500); 28 Jul 2006 08:28:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60392 invoked by uid 500); 28 Jul 2006 08:28:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60381 invoked by uid 99); 28 Jul 2006 08:28:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 01:28:37 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 01:28:36 -0700
Received: by ug-out-1314.google.com with SMTP id y2so603471uge
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 01:28:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k9Y92pWG8lmZgtsN1Qa9rcpf/Ei37qod60Q7wAAQrZXA8/6TMH3nerCwv0UlDTTL5Fr2jVrqePbpAEo7dgf7Np9Zflfq18M6n8Sex2VK+1e2xOdREtmIZLG1QRC+Pj0Qiw6Mjj1qnkHqV1jA2aF11TI/zXJh3TxO0L3CiKKwtCQ=
Received: by 10.66.242.20 with SMTP id p20mr8249700ugh;
        Fri, 28 Jul 2006 01:28:14 -0700 (PDT)
Received: by 10.67.88.5 with HTTP; Fri, 28 Jul 2006 01:28:14 -0700 (PDT)
Message-ID: <4f2c7c9b0607280128x8bbeb0cg870bae95995640f0@mail.gmail.com>
Date: Fri, 28 Jul 2006 16:28:14 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Consult some information about adding index while searching
In-Reply-To: <OF2B2F102C.D10F4551-ON882571B9.00296112-882571B9.0029A633@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2602_31121514.1154075294404"
References: <4f2c7c9b0607271904q7d64b5bdu258b6055750e5f5b@mail.gmail.com>
	 <OF2B2F102C.D10F4551-ON882571B9.00296112-882571B9.0029A633@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_2602_31121514.1154075294404
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

These codes are written in C#,. There is a C# version of Lucene 1.9, which
can be downloaded from http://www.dotlucene.net
This implements the indexing .
      public void CreateIndex()
        {
            try
            {
                AddDirectory(directory);
                writer.Optimize();
                writer.Close();
                directory.Refresh();
            }
            catch (Exception e)
            {
                fmLog.AddLog(fmLog.LogType.Error, Current.User.ID, e.Message
);
                return;
            }
        }

This is a wrapper of IndexSearcher. At first , I want to use a singleton
IndexSearcher. But then I found the updated document can't be retrieved
immediately. So Every time I instantiate a new IndexSeacher, although it is
inefficient.
    public class SingletonSearcher
    {
        SingletonSearcher searcher
        IndexSearcher indexSearcher = null;
        static Object o = typeof(SingletonSearcher);


        /// <summary>
        ///
        /// </summary>
        /// <returns></returns>

        private SingletonSearcher(String indexPath)
        {
            try
            {
                indexSearcher = new IndexSearcher(indexPath);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                searcher = null;
            }
        }
        public static SingletonSearcher GetSearcher()
        {
            //lock (o)
            //{
            //    if (searcher == null)
            //       searcher = new SingletonSearcher(Current.Server.Path);
            //    return searcher;
            //}
            return new SingletonSearcher(Current.Server.Path);
        }

        public static Hits GetHits(Query query)
        {
            if (GetSearcher() == null)
                return null;
            else if (GetSearcher().indexSearcher == null)
                return null;
            return GetSearcher().indexSearcher.Search(query);
        }
}

2006/7/28, Doron Cohen <DORONC@il.ibm.com>:
>
> > Yes, I have closed IndexWriter.  But it doesn't work.
>
> This is strange...
> Can you post a small version of your code that can be executed to show the
> problem?
> - Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2602_31121514.1154075294404--

From java-user-return-22348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 09:47:18 2006
Return-Path: <java-user-return-22348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77038 invoked from network); 28 Jul 2006 09:47:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 09:47:17 -0000
Received: (qmail 97445 invoked by uid 500); 28 Jul 2006 09:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97423 invoked by uid 500); 28 Jul 2006 09:47:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97412 invoked by uid 99); 28 Jul 2006 09:47:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 02:47:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of getpravin@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 02:47:10 -0700
Received: by nf-out-0910.google.com with SMTP id o63so115573nfa
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 02:46:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=m9inuS98+5a1Msbc0CIR2rkXSSn2SohRxutjW1IScX9TwDqSyufnLm5vf4OsQPsu6cX76+7dnUbTDyxHrPN5Ij7jmNAk/GtzDdKA3rASC03uYkN32rXwMUz7fUIDUcj25+pllJbdjdd8Miv1cl7llNikjxKJDOUDhgp8OWUiXBo=
Received: by 10.78.116.19 with SMTP id o19mr832292huc;
        Fri, 28 Jul 2006 02:46:47 -0700 (PDT)
Received: by 10.78.126.2 with HTTP; Fri, 28 Jul 2006 02:46:47 -0700 (PDT)
Message-ID: <ee613b630607280246j4e32540fn42b3c6f6f6092c9d@mail.gmail.com>
Date: Fri, 28 Jul 2006 15:16:47 +0530
From: "Pravin Shinde" <getpravin@gmail.com>
To: java-user@lucene.apache.org
Subject: Leading wildcard query
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
I am trying to use Leading wildcard query, but I am not able to do it.
Any query with leading wildcard is failing with lexical error.

query = parser.parse( "*hi" )
JavaError: org.apache.lucene.queryParser.ParseException:
Lexical error at line 1, column 1.  Encountered: "*" (42), after : ""


I came across some documentation in Lucene FAQ which says

http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-4d62118417eaef0dcb87f4370583f809848ea695

Note: Leading wildcards (e.g. *ook) are not supported by the
QueryParser (although Lucene could handle them -- see the comment in
QueryParser.jj to enable these kind of queries -- search for "OG: to
support prefix queries:").

Is there any way I can do Leading wildchard query ?

-- 
Regards,
Pravin Shinde

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 09:50:15 2006
Return-Path: <java-user-return-22349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77567 invoked from network); 28 Jul 2006 09:50:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 09:50:14 -0000
Received: (qmail 1496 invoked by uid 500); 28 Jul 2006 09:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 484 invoked by uid 500); 28 Jul 2006 09:50:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 472 invoked by uid 99); 28 Jul 2006 09:50:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 02:50:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.146.188.132] (HELO web86507.mail.ird.yahoo.com) (217.146.188.132)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Jul 2006 02:50:04 -0700
Received: (qmail 85357 invoked by uid 60001); 28 Jul 2006 09:49:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=t85bhQpKbIaNREI2aYV0zYbdjZbX/rXZY7vNeK1oeMSKzE6wJoQwwxatsBiw9M68yktWwfdaQJF4E96vuHMo9EbWdfHwcPmvi5o2pY78he3RSBnS4PZvVnPJECE8ccYEJiQ9DreH3JZ4tZfjVf1vTq9nI+ssMAU6Pma70JKojeI=  ;
Message-ID: <20060728094942.85355.qmail@web86507.mail.ird.yahoo.com>
Received: from [81.129.150.15] by web86507.mail.ird.yahoo.com via HTTP; Fri, 28 Jul 2006 10:49:42 BST
Date: Fri, 28 Jul 2006 10:49:42 +0100 (BST)
From: SEAN MCELROY <sean.mcelroy@btinternet.com>
Subject: luceneweb example returning null hrefs
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1616258813-1154080182=:84789"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1616258813-1154080182=:84789
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello,
   
  I am trying to use the luceneweb application that is shipped with the lucene installation. I have followed the installation instructions and the luceneweb application has been successfully deployed using Tomcat 5.5.9. However all the results returned point to http://localhost:8080/luceneweb/null. The version of lucene I am using is 2.0.0, I have had to change the following code in results.jsp to get the example to work
   
  Original code
  //query = QueryParser.parse(queryString, "contents", analyzer); //parse the 
  
  //Replaced code - found this on the net
  QueryParser qp = new QueryParser("contents", analyzer); 
query = qp.parse(queryString); 

  Can anyone shed some light on this problem?
   
  Thanks.

--0-1616258813-1154080182=:84789--

From java-user-return-22350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 10:19:12 2006
Return-Path: <java-user-return-22350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86605 invoked from network); 28 Jul 2006 10:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 10:19:12 -0000
Received: (qmail 48311 invoked by uid 500); 28 Jul 2006 10:19:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48051 invoked by uid 500); 28 Jul 2006 10:19:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48029 invoked by uid 99); 28 Jul 2006 10:19:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 03:19:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [208.97.132.62] (HELO randymail-a8.dreamhost.com) (208.97.132.62)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 03:19:04 -0700
Received: from [192.168.1.132] (unknown [82.153.237.45])
	by randymail-a8.dreamhost.com (Postfix) with ESMTP id 49716AF212
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 03:17:52 -0700 (PDT)
Message-ID: <44C9E375.1080003@magpie.net>
Date: Fri, 28 Jul 2006 11:14:13 +0100
From: Miles Barr <miles@magpie.net>
Organization: Magpie
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Leading wildcard query
References: <ee613b630607280246j4e32540fn42b3c6f6f6092c9d@mail.gmail.com>
In-Reply-To: <ee613b630607280246j4e32540fn42b3c6f6f6092c9d@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Pravin Shinde wrote:

> I am trying to use Leading wildcard query, but I am not able to do it.
> Any query with leading wildcard is failing with lexical error.
>
> query = parser.parse( "*hi" )
> JavaError: org.apache.lucene.queryParser.ParseException:
> Lexical error at line 1, column 1.  Encountered: "*" (42), after : ""
>
>
> I came across some documentation in Lucene FAQ which says
>
> http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-4d62118417eaef0dcb87f4370583f809848ea695 
>
>
> Note: Leading wildcards (e.g. *ook) are not supported by the
> QueryParser (although Lucene could handle them -- see the comment in
> QueryParser.jj to enable these kind of queries -- search for "OG: to
> support prefix queries:").
>
> Is there any way I can do Leading wildchard query ? 


You could implement something, but it would have to be done differently 
to how wildcard queries are currently done. A wildcard query expands to 
match all possible tokens that match that pattern currently in the index 
(restricted to that field). I think the way the index is set up makes it 
possible to build this list when you know at least the first character. 
By starting with a * you need to get the complete list of tokens, then 
filter out those that don't match. I imagine this would be quite slow, 
hence why it's not in Lucene at the moment.




Miles



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 10:27:41 2006
Return-Path: <java-user-return-22351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89388 invoked from network); 28 Jul 2006 10:27:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 10:27:41 -0000
Received: (qmail 62038 invoked by uid 500); 28 Jul 2006 10:27:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62016 invoked by uid 500); 28 Jul 2006 10:27:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62005 invoked by uid 99); 28 Jul 2006 10:27:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 03:27:34 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of getpravin@gmail.com designates 64.233.182.191 as permitted sender)
Received: from [64.233.182.191] (HELO nf-out-0910.google.com) (64.233.182.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 03:27:34 -0700
Received: by nf-out-0910.google.com with SMTP id o63so122798nfa
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 03:27:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=O5VBTg5olFa5F2JA783+EkT3pTkxP4dbhW6ROdorc5HnjkWg8KGxx3zxVSLKUQpO5LBXrBstCFSCgKjXP/2zCJRsjs7sR+yQKvpJ+YRih/6JP7WULREWbRDgSYb1MbwZ0BeJGQeQRWa9czWoWvm+Ux/SUjAm88IwfXV53l+z8tg=
Received: by 10.78.158.11 with SMTP id g11mr846371hue;
        Fri, 28 Jul 2006 03:27:11 -0700 (PDT)
Received: by 10.78.126.2 with HTTP; Fri, 28 Jul 2006 03:27:11 -0700 (PDT)
Message-ID: <ee613b630607280327h4596b26etdbd4e46ce2e59cde@mail.gmail.com>
Date: Fri, 28 Jul 2006 15:57:11 +0530
From: "Pravin Shinde" <getpravin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Leading wildcard query
In-Reply-To: <44C9E375.1080003@magpie.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <ee613b630607280246j4e32540fn42b3c6f6f6092c9d@mail.gmail.com>
	 <44C9E375.1080003@magpie.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanx for reply Miles
So, avoiding leading wildcard query was design decision
for sake of efficiency. Thanx for information.

On 7/28/06, Miles Barr <miles@magpie.net> wrote:
> Pravin Shinde wrote:
>
> > I am trying to use Leading wildcard query, but I am not able to do it.
> > Any query with leading wildcard is failing with lexical error.
> >
> > query = parser.parse( "*hi" )
> > JavaError: org.apache.lucene.queryParser.ParseException:
> > Lexical error at line 1, column 1.  Encountered: "*" (42), after : ""
> >
> >
> > I came across some documentation in Lucene FAQ which says
> >
> > http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-4d62118417eaef0dcb87f4370583f809848ea695
> >
> >
> > Note: Leading wildcards (e.g. *ook) are not supported by the
> > QueryParser (although Lucene could handle them -- see the comment in
> > QueryParser.jj to enable these kind of queries -- search for "OG: to
> > support prefix queries:").
> >
> > Is there any way I can do Leading wildchard query ?
>
>
> You could implement something, but it would have to be done differently
> to how wildcard queries are currently done. A wildcard query expands to
> match all possible tokens that match that pattern currently in the index
> (restricted to that field). I think the way the index is set up makes it
> possible to build this list when you know at least the first character.
> By starting with a * you need to get the complete list of tokens, then
> filter out those that don't match. I imagine this would be quite slow,
> hence why it's not in Lucene at the moment.
>
>
>
>
> Miles
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Pravin Shinde

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 10:57:00 2006
Return-Path: <java-user-return-22352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97223 invoked from network); 28 Jul 2006 10:57:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 10:57:00 -0000
Received: (qmail 9680 invoked by uid 500); 28 Jul 2006 10:56:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9644 invoked by uid 500); 28 Jul 2006 10:56:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9630 invoked by uid 99); 28 Jul 2006 10:56:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 03:56:53 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [134.7.71.26] (HELO cbsmailia1.cbs.curtin.edu.au) (134.7.71.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 03:56:51 -0700
Received: from CBS-MTA by cbsmailia1.cbs.curtin.edu.au
	with Novell_GroupWise; Fri, 28 Jul 2006 18:56:28 +0800
Message-Id: <s4ca5ddc.013@cbsmailia1.cbs.curtin.edu.au>
X-Mailer: Novell GroupWise Internet Agent 6.5.6 
Date: Fri, 28 Jul 2006 18:56:15 +0800
From: "Chen Wu" <Chen.Wu@cbs.curtin.edu.au>
To: <java-user@lucene.apache.org>
Subject: Re: luceneweb example returning null hrefs
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Please change the "url" to "path" in the result JSP file. coz the field
name that is indexed is called "path" rather than "url".

Cheers,
Chen

>>> sean.mcelroy@btinternet.com 7/28/2006 5:49 PM >>>
Hello,
   
  I am trying to use the luceneweb application that is shipped with the
lucene installation. I have followed the installation instructions and
the luceneweb application has been successfully deployed using Tomcat
5.5.9. However all the results returned point to
http://localhost:8080/luceneweb/null. The version of lucene I am
using is 2.0.0, I have had to change the following code in results.jsp
to get the example to work
   
  Original code
  //query = QueryParser.parse(queryString, "contents", analyzer);
//parse the 
  
  //Replaced code - found this on the net
  QueryParser qp = new QueryParser("contents", analyzer); 
query = qp.parse(queryString); 

  Can anyone shed some light on this problem?
   
  Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 13:36:53 2006
Return-Path: <java-user-return-22353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56239 invoked from network); 28 Jul 2006 13:36:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 13:36:53 -0000
Received: (qmail 93657 invoked by uid 500); 28 Jul 2006 13:36:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92699 invoked by uid 500); 28 Jul 2006 13:36:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92688 invoked by uid 99); 28 Jul 2006 13:36:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 06:36:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.85] (HELO web86913.mail.ukl.yahoo.com) (217.146.177.85)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Jul 2006 06:36:42 -0700
Received: (qmail 90982 invoked by uid 60001); 28 Jul 2006 13:36:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.fr;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=NcCIQhZWeDhOBB6EZA48GuisOBjcSk3RrsJWwdcsG5otDtWR25cmIyyKbqffJ2B8E3aAgKCLs3/r/lwArTwrOPr7elu8V07iC/xNA40rMZTCt7ho4UUAxEOYeNhAMbdXYTjlHj2MKIrBEUEJqOFT7nvj003rXy9Ez8z+fjdewZc=  ;
Message-ID: <20060728133619.90978.qmail@web86913.mail.ukl.yahoo.com>
Received: from [217.128.55.210] by web86913.mail.ukl.yahoo.com via HTTP; Fri, 28 Jul 2006 15:36:19 CEST
Date: Fri, 28 Jul 2006 15:36:19 +0200 (CEST)
From: John john <ze_barbary@yahoo.fr>
Subject: Search Numerical Field
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-888412239-1154093779=:90677"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-888412239-1154093779=:90677
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello, 
 
 I tried to add a field like that
  field = new Field("number", "1", Field.Store.YES,Field.Index.UN_TOKENIZED);
 
 so i should be indexed and to analyzed? my writer is 
 writer = new IndexWriter(INDEX_DIR, new StandardAnalyzer(), true);
 
 but according to the javadoc it should be alright and searching with "number:1" should return resultats? Where i'm wrong?
 
 Thanks
 
 		
---------------------------------
 Dcouvrez un nouveau moyen de poser toutes vos questions quelque soit le sujet ! Yahoo! Questions/Rponses pour partager vos connaissances, vos opinions et vos expriences. Cliquez ici. 
--0-888412239-1154093779=:90677--

From java-user-return-22354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 15:57:16 2006
Return-Path: <java-user-return-22354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14037 invoked from network); 28 Jul 2006 15:57:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 15:57:16 -0000
Received: (qmail 15427 invoked by uid 500); 28 Jul 2006 15:57:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15400 invoked by uid 500); 28 Jul 2006 15:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15389 invoked by uid 99); 28 Jul 2006 15:57:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 08:57:08 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.154 as permitted sender)
Received: from [195.212.29.154] (HELO mtagate5.de.ibm.com) (195.212.29.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 08:57:07 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate5.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6SFujZd041556
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 15:56:46 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6SG04oA124566
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 18:00:06 +0200
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6SFuhiD020788
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 17:56:43 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6SFuhqN020785
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 17:56:43 +0200
In-Reply-To: <4f2c7c9b0607280128x8bbeb0cg870bae95995640f0@mail.gmail.com>
Subject: Re: Consult some information about adding index while searching
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OF59402996.012E0716-ON882571B9.00517A6B-882571B9.00578F8C@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 28 Jul 2006 08:56:23 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 28/07/2006 19:00:04
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

"hu andy" <andyhugb@gmail.com> wrote on 28/07/2006 01:28:14:
> These codes are written in C#,. There is a C# version of Lucene 1.9,
which

I am not a C#'er so I might have misunderstood this code, still, here is my
take;

One general comment - the program sent is not self contained so it's hard
to "debug" - the singleton behavior is disabled, so it is better clean the
"wrappers" before sending the code; It is best to send the simplest (self
contained) code that generates the problem.

>                 AddDirectory(directory);
>                 writer.Optimize();
>                 writer.Close();
>                 directory.Refresh();

writer seems to be is a global variable.
when is writer instantiated? in AddDirectory()? For which path?
directory is not Lucene's Directory, right? - no Refresh() method in
Lucene's directory.

>     public class SingletonSearcher
>     {
>         SingletonSearcher searcher

Side comment - for the (disabled) singleton behavior, searcher should be
static.

>         public static SingletonSearcher GetSearcher()
>         {
>             return new SingletonSearcher(Current.Server.Path);
>         }

Verify that same Current.Server.Path is used for search and for indexing.

Hope (but not sure:-) this helps at all,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 18:02:01 2006
Return-Path: <java-user-return-22355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48899 invoked from network); 28 Jul 2006 18:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 18:02:00 -0000
Received: (qmail 69016 invoked by uid 500); 28 Jul 2006 18:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68983 invoked by uid 500); 28 Jul 2006 18:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68972 invoked by uid 99); 28 Jul 2006 18:01:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:01:54 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:01:53 -0700
Received: by wr-out-0506.google.com with SMTP id i22so35299wra
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 11:01:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A/4XmNOfrRFdF/qzDwyRA20gKW+GgoIALhWtPTXQRVWGpEFGjG0VWB+tTtqodZk29s+uSR0PNA68PMYiRzlnOrr9VVDK/8h3LcvID9a8RQkKQLf4LHGmKS2oxMgDCcZqELtWU5JDr7ZIqxMGVpqFy9KFKNXSk+UwyAvgGzMWi4M=
Received: by 10.54.134.19 with SMTP id h19mr3382587wrd;
        Fri, 28 Jul 2006 11:01:32 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Fri, 28 Jul 2006 11:01:32 -0700 (PDT)
Message-ID: <359a92830607281101j4ac42be2i3e92a555a5e0b36d@mail.gmail.com>
Date: Fri, 28 Jul 2006 14:01:32 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Leading wildcard query
In-Reply-To: <ee613b630607280246j4e32540fn42b3c6f6f6092c9d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12219_18715739.1154109692273"
References: <ee613b630607280246j4e32540fn42b3c6f6f6092c9d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12219_18715739.1154109692273
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You could form a filter, using the WildCardTermEnum or RegExTermEnum and
then use the filter with a ConstantScoreQuery. You lose relevancy, but
relevancy is an ambiguous concept with wildcards anyway.

Using the query parser with a leading wildcard, even if enabled, is almost
sure to give you a "TooManyClauses" exception unless your index is very,
very, very small. There's a thread I started on the list titled "I just
don't get wildcards at all" in which the guys generously gave me a tutorial
in what wildcards are all about. I suspect you'd find it interesting.....
You might also want to search the archive for any TooManyClauses since this
has been discussed several times.....

Best
Erick

------=_Part_12219_18715739.1154109692273--

From java-user-return-22356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 18:27:05 2006
Return-Path: <java-user-return-22356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58458 invoked from network); 28 Jul 2006 18:27:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 18:27:05 -0000
Received: (qmail 13662 invoked by uid 500); 28 Jul 2006 18:26:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13639 invoked by uid 500); 28 Jul 2006 18:26:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13628 invoked by uid 99); 28 Jul 2006 18:26:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:26:58 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:26:57 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6SIQaAR127946
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 18:26:36 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6SITufG154702
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 20:29:56 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6SIQZe9027677
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 20:26:35 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6SIQZmp027674
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 20:26:35 +0200
In-Reply-To: <20060728133619.90978.qmail@web86913.mail.ukl.yahoo.com>
Subject: Re: Search Numerical Field
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFB6BA8E4D.F4683620-ON882571B9.005FBA92-882571B9.00654C47@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 28 Jul 2006 11:26:26 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 28/07/2006 21:29:56
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


John john <ze_barbary@yahoo.fr> wrote on 28/07/2006 06:36:19:

> Hello,
>
>  I tried to add a field like that
>   field = new Field("number", "1",
Field.Store.YES,Field.Index.UN_TOKENIZED);
>
>  so i should be indexed and to analyzed? my writer is
>  writer = new IndexWriter(INDEX_DIR, new StandardAnalyzer(), true);
>
>  but according to the javadoc it should be alright and searching
> with "number:1" should return resultats? Where i'm wrong?

Seems that should be working.

Having "number:1" as query text suggests that QueryParser.parse() was used
to get a query object, i.e. the query text is analyzed - which is
inconsistent with an UN_TOKENIZED field. Consider using TermQuery to avoid
tokenizing the query text:
    Query q = new TermQuery(new Term("number","1"));
However this cannot explain why no results are returned, since the string
"1" would generate the token "1" (well, "number:1") also with analysis.

Perhaps its the common problem of not closing indexWriter after adding the
doc or not re-opening searcher after closing the writer...

- Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 18:35:13 2006
Return-Path: <java-user-return-22357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60300 invoked from network); 28 Jul 2006 18:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 18:35:13 -0000
Received: (qmail 24435 invoked by uid 500); 28 Jul 2006 18:34:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24406 invoked by uid 500); 28 Jul 2006 18:34:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24375 invoked by uid 99); 28 Jul 2006 18:34:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:34:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rafael.rossini@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:34:41 -0700
Received: by nf-out-0910.google.com with SMTP id o63so245706nfa
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 11:34:19 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=NSzvfFAvUOzykY9rpMpJw+KZO6hHduyYIRbek9AhPw0FhutgivO3j6kBV5bqz3mSFvhKR1WybziOKVQ4xMCuPCT2byDH4N5pIS96SErDU9nMreTcW51xsZ5P4uoWlNoa6gGLN/yWKnaKV8gIMcYKONnf+hT7m1cRINT60Tw4tWc=
Received: by 10.78.120.3 with SMTP id s3mr262157huc;
        Fri, 28 Jul 2006 11:34:19 -0700 (PDT)
Received: by 10.78.44.9 with HTTP; Fri, 28 Jul 2006 11:34:19 -0700 (PDT)
Message-ID: <a8d89b3b0607281134m7b47a49ep9c20bd39f7c53592@mail.gmail.com>
Date: Fri, 28 Jul 2006 15:34:19 -0300
From: "Rafael Rossini" <rafael.rossini@gmail.com>
To: java-user@lucene.apache.org, "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing large sets of documents?
In-Reply-To: <20060728005356.28667.qmail@web50310.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10527_16816859.1154111659743"
References: <a8d89b3b0607271323k31a35b6dy7298cfe4143f2ff0@mail.gmail.com>
	 <20060728005356.28667.qmail@web50310.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10527_16816859.1154111659743
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Ok, there is a patch (http://issues.apache.org/jira/browse/LUCENE-532). Thi=
s
is what I saw. But I still have a question. I guess it=B4s better to ask th=
is
in the hadoop mailing list, anyway,  the hadoop project implements a DFS an=
d
the whole MapReduce paradigm. Is it possible to do the indexing and
searching using all of that? Because the concept of a DFS and the MapReduce
is to have an app that is scalable and fast, like google. I=B4m sure this i=
s
not easy at all, but it would be nice if one day this kind of stuff became =
a
commodity.

[]s
    Rossini


On 7/27/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>
> Rossini{},
>
> I think what you might have read might have been that searching a Lucene
> index that lives in a HDFS would be slow.  As far as I understand things,
> the thing to do is to copy the index to a local disk, out of HDFS, and th=
en
> search it with Lucene from there.
>
> Otis()
>
> ----- Original Message ----
> From: Rafael Rossini <rafael.rossini@gmail.com>
> To: java-user@lucene.apache.org; Otis Gospodnetic <
> otis_gospodnetic@yahoo.com>
> Sent: Thursday, July 27, 2006 4:23:56 PM
> Subject: Re: Indexing large sets of documents?
>
> Oits,
>
>   You mentioned the hadoop project. I check it out not a long time ago an=
d
> I read someting about it did not support the lucene index. Is it possible
> to
> index and then search in a HDFS?
>
> []s
>     Rossini
>
>
> On 7/27/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> >
> > Michael,
> >
> > Certainly parallelizing on a set of servers would work (hmm... hadoop?)=
,
> > but if you want to do this on a single machine you should tune some of
> the
> > IndexWriter params.  You didn't mention them, so I assume you didn't
> tune
> > anything yet.  If you have Lucene in Action, check out
> > 2.7.1  : Tuning indexing performance        starts on page 42  under
> > section 2.7 (Controlling the indexing process) in chapter 2 (Indexing)
> > (found via: http://lucenebook.com/search?query=3Dindex+tuning )
> >
> > If not, check maxBufferedDocs and mergeFactor in IndexWriter
> > javadocs.  This is likely in the FAQ, too, but I didn't check.
> >
> > Otis
> >
> > ----- Original Message ----
> > From: Michael J. Prichard
> > To: java-user@lucene.apache.org
> > Sent: Thursday, July 27, 2006 12:29:31 PM
> > Subject: Indexing large sets of documents?
> >
> > I built an indexer that runs through email and its attachments, rips ou=
t
> > content and what not and then creates a Document and adds it to an
> > index.  It works w/ no problem.  The issue is that it takes around 3-5
> > seconds per email and I have seen up to 10-15 seconds for email w/
> > attachments.  I need to index 750k emails and at those times it will
> > take FOREVER!  I am trying to find places to cut a second or two here o=
r
> > there but are there any suggestions as to what I can do?  Should I look
> > into parallelizing indexing?  Help?!
> >
> > Thanks,
> > Michael
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10527_16816859.1154111659743--

From java-user-return-22358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 18:45:11 2006
Return-Path: <java-user-return-22358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61819 invoked from network); 28 Jul 2006 18:45:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 18:45:11 -0000
Received: (qmail 47455 invoked by uid 500); 28 Jul 2006 18:45:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46541 invoked by uid 500); 28 Jul 2006 18:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46530 invoked by uid 99); 28 Jul 2006 18:45:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:45:05 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.184.224 as permitted sender)
Received: from [64.233.184.224] (HELO wr-out-0506.google.com) (64.233.184.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 11:45:04 -0700
Received: by wr-out-0506.google.com with SMTP id 58so326334wri
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 11:44:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t8I5/au1DtkKjM3uNkrP8XkGsN7jVZgAqYopGFr75FkO6PdHArgry03jkFMTM3o96hLeMI1L7XupGJv0682aMd6oyKoAOM9BbZEeesK2Ls3KEePAzBVAovimvXtCwV3o7M/NTbTzzu+plByrlHIVZU8UmykAtHyZ/ocaO9TLhts=
Received: by 10.54.93.15 with SMTP id q15mr2551022wrb;
        Fri, 28 Jul 2006 11:44:43 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Fri, 28 Jul 2006 11:44:43 -0700 (PDT)
Message-ID: <359a92830607281144m2335feb3o73a538590d88769@mail.gmail.com>
Date: Fri, 28 Jul 2006 14:44:43 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search Numerical Field
In-Reply-To: <20060728133619.90978.qmail@web86913.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13101_31694161.1154112283317"
References: <20060728133619.90978.qmail@web86913.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_13101_31694161.1154112283317
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'd really advise getting a copy of Luke to inspect your index as a first
step. I've been surprised a number of times by what really got in my index.

You might also try using a WhitespaceAnalyzer instead of StandardAnalyzer,
that's the most basic analyzer available. I'm not sure whether individual
numbers are considered stop words by the standard analyzer, yet another
reason to look at your index with Luke.

Hope this helps
Erick

------=_Part_13101_31694161.1154112283317--

From java-user-return-22359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 20:07:32 2006
Return-Path: <java-user-return-22359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98148 invoked from network); 28 Jul 2006 20:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 20:07:31 -0000
Received: (qmail 86324 invoked by uid 500); 28 Jul 2006 20:07:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86293 invoked by uid 500); 28 Jul 2006 20:07:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86282 invoked by uid 99); 28 Jul 2006 20:07:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:07:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.181] (HELO smtpout.mac.com) (17.250.248.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 13:07:24 -0700
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout11/MantshX 4.0) with ESMTP id k6SK73dO019893
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 13:07:03 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id k6SK6vTn017428
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 13:07:02 -0700 (PDT)
Message-ID: <44CA6DEB.50304@mac.com>
Date: Fri, 28 Jul 2006 16:04:59 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060726205006.57985.qmail@web50303.mail.yahoo.com>
In-Reply-To: <20060726205006.57985.qmail@web50303.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Howdy....not sure if anyone else wants this but here is my first attempt 
at writing an analyzer for an email address...modifications, updates, 
fixes welcome.

-------------- EmailAnalyzer

import java.io.Reader;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.LowerCaseFilter;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.standard.StandardTokenizer;

public class EmailAnalyzer extends Analyzer {
   
    public EmailAnalyzer() {
    }

    public TokenStream tokenStream(String fieldName, Reader reader) {
        // return a tokenstream based on the email address
        TokenStream result = new EmailFilter(new LowerCaseFilter(new 
StandardTokenizer(reader)));
       
        return result;
    }
   
}

-------------- end EmailAnalyzer

-------------- EmailFilter

import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.Token;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Stack;

public class EmailFilter extends TokenFilter {
    public static final String TOKEN_TYPE_EMAIL = "EMAILPART";

    private Stack emailTokenStack;
   
    public EmailFilter(TokenStream in) {
        super(in);
        emailTokenStack = new Stack();
    }

    public Token next() throws IOException {

        if (emailTokenStack.size() > 0) {
            return (Token) emailTokenStack.pop();
        }   

        Token token = input.next();
        if (token == null) {
            return null;
        }

        addEmailPartsToStack(token);

        return token;
    }
   
    private void addEmailPartsToStack(Token token) throws IOException {
        String[] parts = getEmailParts(token.termText());

        if (parts == null) return;

        for (int i = 0; i < parts.length; i++) {
            Token synToken = new Token(parts[i],
                                 token.startOffset(),
                                 token.endOffset(),
                                 TOKEN_TYPE_EMAIL);
            synToken.setPositionIncrement(0);

            emailTokenStack.push(synToken);
        }
    }

    /*
     * Parses emails into its parts for tokenization.
     * For example john@foo.com would be broken into
     *
     *    [john@foo.com]
     *    [john]
     *    [foo.com]
     *    [foo]
     *    [com]
     *      
     */
    private String[] getEmailParts(String email) {
        // array for the parts
        String[] emailParts;
        // so i can add them before calling toArray
        ArrayList partsList = new ArrayList();

        /* let's do it */
        // split on the @
        String[] splitOnAmpersand = email.split("@");
        // add the username
        partsList.add(splitOnAmpersand[0]);
        // add the full host name
        partsList.add(splitOnAmpersand[1]);
       
        // split the host name into pieces
        String[] splitOnDot = splitOnAmpersand[1].split("\\.");
        // add all pieces from splitOnDot
        for (int i=0; i < splitOnDot.length; i++) {
            partsList.add(splitOnDot[i]);
        }
       
        /*
         *  if this is great than 2 then we need to add the domain name 
which
         *  should be the last two
         * 
         */
        if (splitOnDot.length > 2) {
            String domain = splitOnDot[splitOnDot.length-2] + "." + 
splitOnDot[splitOnDot.length-1];
            // add domain
            partsList.add(domain);
        }
       
       
        return (String[]) partsList.toArray(new String[0]);       
    }

}

------------ end EmailFilter

Let me know...
-Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 21:19:30 2006
Return-Path: <java-user-return-22360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12501 invoked from network); 28 Jul 2006 21:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 21:19:29 -0000
Received: (qmail 75806 invoked by uid 500); 28 Jul 2006 21:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75775 invoked by uid 500); 28 Jul 2006 21:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75764 invoked by uid 99); 28 Jul 2006 21:19:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 14:19:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.146.188.127] (HELO web86502.mail.ird.yahoo.com) (217.146.188.127)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Jul 2006 14:19:20 -0700
Received: (qmail 7125 invoked by uid 60001); 28 Jul 2006 21:18:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=45kuIJZz8MyP0cZcVgXbn5WKXdvwB+KKs5aZ0TleIdaUpfo2KcIPgrRrA82yi+VPyImVjH1kSgaGZYZql51wGtScXmix66fWLLKfofdR+d1BbpnRUMLsUeHDIkcy7lle39lg2m2VSDDcZodexFy0Cchu2NpE+eGjW5uh+qlqrp0=  ;
Message-ID: <20060728211849.7123.qmail@web86502.mail.ird.yahoo.com>
Received: from [81.158.170.45] by web86502.mail.ird.yahoo.com via HTTP; Fri, 28 Jul 2006 22:18:49 BST
Date: Fri, 28 Jul 2006 22:18:49 +0100 (BST)
From: SEAN MCELROY <sean.mcelroy@btinternet.com>
Subject: Re: luceneweb example returning null hrefs
To: java-user@lucene.apache.org
In-Reply-To: <s4ca5ddc.013@cbsmailia1.cbs.curtin.edu.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-511744256-1154121529=:76983"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-511744256-1154121529=:76983
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you. The example application is now working as expected.
   
  Sean

Chen Wu <Chen.Wu@cbs.curtin.edu.au> wrote:
  Hi,

Please change the "url" to "path" in the result JSP file. coz the field
name that is indexed is called "path" rather than "url".

Cheers,
Chen

>>> sean.mcelroy@btinternet.com 7/28/2006 5:49 PM >>>
Hello,

I am trying to use the luceneweb application that is shipped with the
lucene installation. I have followed the installation instructions and
the luceneweb application has been successfully deployed using Tomcat
5.5.9. However all the results returned point to
http://localhost:8080/luceneweb/null. The version of lucene I am
using is 2.0.0, I have had to change the following code in results.jsp
to get the example to work

Original code
//query = QueryParser.parse(queryString, "contents", analyzer);
//parse the 

//Replaced code - found this on the net
QueryParser qp = new QueryParser("contents", analyzer); 
query = qp.parse(queryString); 

Can anyone shed some light on this problem?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--0-511744256-1154121529=:76983--

From java-user-return-22361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 28 21:20:07 2006
Return-Path: <java-user-return-22361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12643 invoked from network); 28 Jul 2006 21:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2006 21:20:07 -0000
Received: (qmail 78521 invoked by uid 500); 28 Jul 2006 21:19:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78485 invoked by uid 500); 28 Jul 2006 21:19:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78462 invoked by uid 99); 28 Jul 2006 21:19:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 14:19:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.146.188.126] (HELO web86501.mail.ird.yahoo.com) (217.146.188.126)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 28 Jul 2006 14:19:52 -0700
Received: (qmail 73059 invoked by uid 60001); 28 Jul 2006 21:19:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=btinternet.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TUeVH/26z+obdt30LBfkROp63POCATbe/yioDIvFnw/wgzdC9/a6VmZQ9T82gU/RQ96bo3ZZHII/A131d/jY0cgpGYgdgjgpsyab26PhtztTQMmQ6VUQ0aV2cIpwlIE1Pbu4r65r5/3dyldASkq1kZ//4lpApa2uho6ez6Lmq9o=  ;
Message-ID: <20060728211927.73057.qmail@web86501.mail.ird.yahoo.com>
Received: from [81.158.170.45] by web86501.mail.ird.yahoo.com via HTTP; Fri, 28 Jul 2006 22:19:27 BST
Date: Fri, 28 Jul 2006 22:19:27 +0100 (BST)
From: SEAN MCELROY <sean.mcelroy@btinternet.com>
Subject: Re: luceneweb example returning null hrefs
To: java-user@lucene.apache.org
In-Reply-To: <s4ca5ddc.013@cbsmailia1.cbs.curtin.edu.au>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1084822921-1154121567=:72205"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1084822921-1154121567=:72205
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Thank you. The example application is now working as expected.
   
  Sean

Chen Wu <Chen.Wu@cbs.curtin.edu.au> wrote:
  Hi,

Please change the "url" to "path" in the result JSP file. coz the field
name that is indexed is called "path" rather than "url".

Cheers,
Chen

>>> sean.mcelroy@btinternet.com 7/28/2006 5:49 PM >>>
Hello,

I am trying to use the luceneweb application that is shipped with the
lucene installation. I have followed the installation instructions and
the luceneweb application has been successfully deployed using Tomcat
5.5.9. However all the results returned point to
http://localhost:8080/luceneweb/null. The version of lucene I am
using is 2.0.0, I have had to change the following code in results.jsp
to get the example to work

Original code
//query = QueryParser.parse(queryString, "contents", analyzer);
//parse the 

//Replaced code - found this on the net
QueryParser qp = new QueryParser("contents", analyzer); 
query = qp.parse(queryString); 

Can anyone shed some light on this problem?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



--0-1084822921-1154121567=:72205--

From java-user-return-22362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 00:11:28 2006
Return-Path: <java-user-return-22362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55848 invoked from network); 29 Jul 2006 00:11:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 00:11:28 -0000
Received: (qmail 2963 invoked by uid 500); 29 Jul 2006 00:11:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2931 invoked by uid 500); 29 Jul 2006 00:11:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2920 invoked by uid 99); 29 Jul 2006 00:11:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 17:11:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.48.84.103] (HELO mail.waite.net.nz) (210.48.84.103)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 17:11:21 -0700
Received: from localhost ([127.0.0.1])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1G6cQ0-0006QX-9Q
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:11:00 +1200
Received: from mail.waite.net.nz ([127.0.0.1])
	by localhost (gandalf [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 23447-09 for <java-user@lucene.apache.org>;
	Sat, 29 Jul 2006 12:10:55 +1200 (NZST)
Received: from frodo.lan.waite.net.nz ([192.168.1.29])
	by mail.waite.net.nz with esmtp (Exim 4.50 #1 (Debian))
	id 1G6cPv-0006QR-1d
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:10:55 +1200
From: Paul Waite <paul@waite.net.nz>
To: java-user@lucene.apache.org
Subject: Re: Filter updating
Date: Sat, 29 Jul 2006 12:10:54 +1200
User-Agent: KMail/1.9.1
References: <1154005659.87197.ezmlm@lucene.apache.org>
In-Reply-To: <1154005659.87197.ezmlm@lucene.apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607291210.54660.paul@waite.net.nz>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at waite.net.nz
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erick wrote:

> Well, I *suppose* you could get the bitset from the pre-existing filter,
> copy it to the bitset for your new filter, and play with the bits at the
> end. I'm not sure how you get rid of your original filter if you use
> CachingWrapperFilter though.........

Ok, I'm hearing it's a doubtful option. ;-)

 
> But.... As "the guys" have pointed out in other contexts, be really sure
> your doc IDs don't change out from under you. You can only count on this if
> you never, Never, NEVER delete anything from the index and then add
> something else between the times you build the first filter and the time you
> modify it (at least I think I have this right).

In general, the above scenario is exactly what would happen. Ie. filter gets
built, sometime later a doc might be deleted (or not), then sometime later
a doc will be added (and added to the existing filter).

As it stands in the API, if I build a filter, and a document which happens to
be in it gets deleted from the index, does it automatically get removed from
the filter?

 
> That said, I wouldn't go down this route unless you have an actual,
> real-live performance issue to deal with. Premature optimization being the
> root of many, many, many evils. It'd be evil to debug if you mess up your
> filter copying/modification.....

Right - I'll make sure it's broken before diving in there and fixing it... ;-)

Cheers,
Paul.



>> I was wondering if there was a nice way to add documents to a cached filter
>> 'manually' as it were.

>> The reason would be to avoid a complete refresh of the filter, if you
>> already knew the docids of the extra documents to add.

>> An example would be if I had a filter based on datetime, which contained
>> all documents since a recent fixed timestamp. Then as each new document
>> arrived, and was indexed it could be simply added to the filter quickly,
>> instead of having to rebuild it from scratch each time.

>> Cheers,
>> Paul.

-- 
"The overhead kick could have gone anywhere, but it didn't."
MARK BRIGHT, BBC1

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 01:00:43 2006
Return-Path: <java-user-return-22363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64581 invoked from network); 29 Jul 2006 01:00:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 01:00:43 -0000
Received: (qmail 39638 invoked by uid 500); 29 Jul 2006 01:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39601 invoked by uid 500); 29 Jul 2006 01:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39583 invoked by uid 99); 29 Jul 2006 01:00:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 18:00:37 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 18:00:35 -0700
Received: by py-out-1112.google.com with SMTP id d80so19099pyd
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 18:00:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AEMUltTJx0CIW5mpnk7Wtu1wX4NbsOzbyjAdTUur1b85gECfhC8n14aJeD8a2QfwwxOADrymbck3RYjz8BOvct2DlE4vaVvJNVzbLFyd16Gg6jvOVCShJa3+9ViB4vhd7+bHqU+BouyT7KzHRCuqJSOr48qW+YbTKb0LdttbJ5g=
Received: by 10.35.40.10 with SMTP id s10mr103392pyj;
        Fri, 28 Jul 2006 18:00:14 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Fri, 28 Jul 2006 18:00:14 -0700 (PDT)
Message-ID: <359a92830607281800o589ae31ajab229c4e48e3347b@mail.gmail.com>
Date: Fri, 28 Jul 2006 21:00:14 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter updating
In-Reply-To: <200607291210.54660.paul@waite.net.nz>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17717_18723369.1154134814427"
References: <1154005659.87197.ezmlm@lucene.apache.org>
	 <200607291210.54660.paul@waite.net.nz>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17717_18723369.1154134814427
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oh, yeah, you're hearing a doubtful opinion because if this kind of thing
isn't done exactly correctly, it'd be particularly hard to debug. Keeping
things coordinated is hard <G>...

Given that you add/remove docs, you really don't want to just modify the
filter. Here's why....

All a filter is a bitset with a little plumbing. The bitset has a bit turned
on for each doc that should be considered by the query. So, say you have 16
docs, and docs 0, 3, 8 and 13 matched the criteria. These are the internal
Lucene doc IDs BTW. You would have a two-byte value with bits 0, 3, 8 and 13
on. Now you go ahead and remove a document, etc. You remove document 6 and
add a new document and optimize (?). Docs 7 to 15 get re-numbered as 6-14
and the new doc is doc 15. So your filter is no longer valid and your
searches will be incorrect.

The above may not be exact, but that's the flavor of what happens as I
understand it. There is no magic connection between the filter and the
index, you have to do it yourself. Given that any fancy dancing you did to
maintain the two in synch depends on the internals of Lucene, it just looks
like a solution that's the last thing you should try.

Filters are valid for the duration of the indexreader. As long as you don't
close the reader, you can re-use a filter as you please. But the reader
won't see any updates to the index until after you close/reopen it, so
that's not much comfort.

So, about messing around with the filter... Don't go there <G>....

Best
Erick

------=_Part_17717_18723369.1154134814427--

From java-user-return-22364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 01:47:25 2006
Return-Path: <java-user-return-22364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80725 invoked from network); 29 Jul 2006 01:47:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 01:47:25 -0000
Received: (qmail 78089 invoked by uid 500); 29 Jul 2006 01:47:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78061 invoked by uid 500); 29 Jul 2006 01:47:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78029 invoked by uid 99); 29 Jul 2006 01:47:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 18:47:19 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yzy1980@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 18:47:18 -0700
Received: by ug-out-1314.google.com with SMTP id y2so4638uge
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 18:46:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=huETPY2F4yqko8IZtiNsrIN34ZgiYdi0SK98gd2OJ7h957ORM8jWp/N3DzYuLz/v28nY1ZKEvvec3/VKms67sJZU6GLuxRQ5WR6ltibODi47RuznCvmp6mZu6Ls2DshTuJyDu/RH/Hv3IO5GH2tdPTGo+83lhw3yNQCoxi2bVhI=
Received: by 10.66.216.6 with SMTP id o6mr22755ugg;
        Fri, 28 Jul 2006 18:46:57 -0700 (PDT)
Received: by 10.67.16.19 with HTTP; Fri, 28 Jul 2006 18:46:57 -0700 (PDT)
Message-ID: <c2174c890607281846w3187877cq6ef610cff0c1d7ae@mail.gmail.com>
Date: Sat, 29 Jul 2006 09:46:57 +0800
From: "zhongyi yuan" <yzy1980@gmail.com>
To: java-user@lucene.apache.org
Subject: About search performance
MIME-Version: 1.0
Content-Type: text/plain; charset=GB2312; format=flowed
Content-Transfer-Encoding: base64
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGmjrEhvdyBhYm91dCBpbXBsZW1lbnQgbXVsdGkta2V5IHNlYXJjaCB1c2UgbHVjZW5lLCBmb3Ig
ZXhhbXBsZSB1c2UKYm9vbGVhbiBzZWFyY2ggZXhjZWVkIDEwMDAgY2xhdXNlcyxpdCB3aWxsIGFm
ZmVjdCB0aGUgcGVyZm9ybWFuY2UKZ3JlYXRseS4gSWYgdXNlIGZpbHRlciBvciBjdXN0b20gc29y
dGVyIHRvIHNlbGVjdCB0aGUgcmVzdWx0LCBiZWNhdXNlCnRoZSByZXN1bHQgaXMgZXh0cmVtZWx5
IGxhcmdlIGluIGFtb3VudCxzbyB0aGUgcGVyZm9ybWFuY2UgaXMgbG93ZXIuClBsZWFzZSBnaXZl
IG1lIHNvbWUgYWR2aWNlLFRoYW5rcy4K


From java-user-return-22365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 05:06:09 2006
Return-Path: <java-user-return-22365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22644 invoked from network); 29 Jul 2006 05:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 05:06:09 -0000
Received: (qmail 47879 invoked by uid 500); 29 Jul 2006 05:06:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47844 invoked by uid 500); 29 Jul 2006 05:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47831 invoked by uid 99); 29 Jul 2006 05:06:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 22:06:03 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 22:06:01 -0700
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.7/8.13.7) with ESMTP id k6T55dmG132426
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=FAIL)
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 05:05:39 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.6/NCO/VER7.0) with ESMTP id k6T591e7136602
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 07:09:01 +0200
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id k6T55dq2029842
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 07:05:39 +0200
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id k6T55doe029839
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 07:05:39 +0200
In-Reply-To: <OFE63FF6B5.D94BF037-ON882571B8.00715AE7-882571B9.00282C1E@il.ibm.com>
Subject: Re: Scoring a document (count?)
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF144 February 01, 2006
Message-ID: <OFB6ECF885.3060CAA0-ON882571BA.0018EC5E-882571BA.001BF6AB@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 28 Jul 2006 22:05:26 -0700
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 7.0.1HF269 | June 22, 2006) at
 29/07/2006 08:09:00
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doron Cohen/Haifa/IBM@IBMIL wrote on 28/07/2006 00:18:47:
> For the scoring approach - I don't see an easy way to get the
> counts from the score of the results, although the TF (term
> frequency in candidate docs) is known+used during document
> scoring, and although it seems that the application can be
> arranged such that TF of search result documents would be the
> required count.

Thinking more about this, it is possible, though not very simple and so
clean. - You would need to write your own variation of TermQuery class,
something like TfTermQuery, with its own variations of Weight and Scorer
classes. This scorer can assign the raw term frequencies as the score
(disabling the scoring part that takes into account IDF and
normalization...). You can then query with your own HitCollector to collect
the raw scores. I think this would compute what you were asking for...

- Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 06:19:01 2006
Return-Path: <java-user-return-22366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32992 invoked from network); 29 Jul 2006 06:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 06:19:00 -0000
Received: (qmail 75556 invoked by uid 500); 29 Jul 2006 06:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75518 invoked by uid 500); 29 Jul 2006 06:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75506 invoked by uid 99); 29 Jul 2006 06:18:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 23:18:54 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS,UNIQUE_WORDS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of hasan.diwan@gmail.com designates 64.233.182.187 as permitted sender)
Received: from [64.233.182.187] (HELO nf-out-0910.google.com) (64.233.182.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Jul 2006 23:18:52 -0700
Received: by nf-out-0910.google.com with SMTP id b2so32970nfe
        for <java-user@lucene.apache.org>; Fri, 28 Jul 2006 23:18:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GHYppCvHhJs4+/ltp+0xPTERG4Ay9Ry3oQNpJSV5m7Y2E/VHmt3aGGWqk1lKJbHqQjEzYpyunXuXw7+EutwDhD2+16nvo72kl1zs4/RjSlvVlp9+G5e8SH2PpO+OTsmFbFn9/PzkpwWmbGN6EKWr9SA4cPqAbeHjuh3BQkbwosU=
Received: by 10.49.29.3 with SMTP id g3mr151859nfj;
        Fri, 28 Jul 2006 23:18:31 -0700 (PDT)
Received: by 10.48.238.1 with HTTP; Fri, 28 Jul 2006 23:18:31 -0700 (PDT)
Message-ID: <2cda2fc90607282318k4ade1ca2h1535e93816f4afa6@mail.gmail.com>
Date: Fri, 28 Jul 2006 23:18:31 -0700
From: "Hasan Diwan" <hasan.diwan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
In-Reply-To: <44CA6DEB.50304@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <20060726205006.57985.qmail@web50303.mail.yahoo.com>
	 <44CA6DEB.50304@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael:

On 7/28/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
> Howdy....not sure if anyone else wants this but here is my first attempt
> at writing an analyzer for an email address...modifications, updates,
> fixes welcome.

Why reinvent the wheel? See
http://java.sun.com/products/javamail/javadocs/javax/mail/internet/InternetAddress.html#parse(java.lang.String)
and use as:

InternetAddress valid = InternetAddress.parse(string)[0]; // far
simpler than rewriting it

-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 08:43:32 2006
Return-Path: <java-user-return-22367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58344 invoked from network); 29 Jul 2006 08:43:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 08:43:31 -0000
Received: (qmail 44567 invoked by uid 500); 29 Jul 2006 08:43:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44547 invoked by uid 500); 29 Jul 2006 08:43:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44536 invoked by uid 99); 29 Jul 2006 08:43:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 01:43:26 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 01:43:25 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G6kPY-0008Ou-UG
	for java-user@lucene.apache.org; Sat, 29 Jul 2006 01:43:04 -0700
Message-ID: <5552408.post@talk.nabble.com>
Date: Sat, 29 Jul 2006 01:43:04 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Sorting
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

Lucene sort hits by relevance as default. Cause i would like to sort them by
a special string field and not by relevance i was thinking about dropping
the sorting by relevance as default and implement sorting by alphabetic
order.

Reason that sorting by alpabetic order takes a lot of time. Makes this sense
and how can this be done? Or is there another "fast" way to sort by
alphabetic order ?

Currently I'm using lucene 1.9.1 (dotnet). The indexsize is currently about
2 GB and index is split in two parts and are accessed by a parallelreader.

Hopefully you can give me a tip if there is a way :-))

Thanks a lot :-)
-- 
View this message in context: http://www.nabble.com/Sorting-tf2019404.html#a5552408
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 10:43:43 2006
Return-Path: <java-user-return-22368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81707 invoked from network); 29 Jul 2006 10:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 10:43:43 -0000
Received: (qmail 18633 invoked by uid 500); 29 Jul 2006 10:43:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18426 invoked by uid 500); 29 Jul 2006 10:43:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18408 invoked by uid 99); 29 Jul 2006 10:43:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 03:43:33 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.83 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.83] (HELO pne-smtpout1-sn2.hy.skanova.net) (81.228.8.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 03:43:30 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn2.hy.skanova.net (7.2.075)
        id 44A2E86F005DFBC1 for java-user@lucene.apache.org; Sat, 29 Jul 2006 12:43:09 +0200
Subject: Re: Sorting
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <5552408.post@talk.nabble.com>
References: <5552408.post@talk.nabble.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Sat, 29 Jul 2006 12:42:50 +0200
Message-Id: <1154169771.4881.210.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 2006-07-29 at 01:43 -0700, neils wrote:
> is there another "fast" way to sort by alphabetic order ?
>
> The indexsize is currently about 2 GB and index is split in two parts
> and are accessed by a parallelreader.

I don't know how much faster it is, but you could try to store the sort
order as a float value in a secondary field and sort by that value.

Find or calculate the value by using TermEnum and TermDocs at insert
time. This requires that the string field you are sorting by is one term
only. If there are more than one term you (might) have to figure this
out in your primary data storage.

(I've used this strategy in ORM CRUDs to minimize writing to data
storage when setting the order of an instance in an ordered list.)

This is what insert iterations would look like:

new insert: aaaa

[aaaa : 1.0]

new insert: aaab

[aaaa : 1.0]
[aaab : 2.0]

new insert: aaac

[aaaa : 1.0]
[aaab : 2.0]
[aaac : 3.0]

new insert: aaaba

[aaaa  : 1.0]
[aaab  : 2.0]
[aaaba : 2.5]
[aaac  : 3.0]

new insert: aaabb

[aaaa  : 1.0]
[aaab  : 2.0]
[aaaba : 2.5]
[aaabb : 2.75]
[aaac  : 3.0]

new insert: aaabc

[aaaa  : 1.0]
[aaab  : 2.0]
[aaaba : 2.5]
[aaabb : 2.75]
[aaabc : 2.875]
[aaac  : 3.0]

and so on.


> Currently I'm using lucene 1.9.1 (dotnet).

This is the Lucene java-user list. You might want to try the dotnet.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 11:20:25 2006
Return-Path: <java-user-return-22369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88167 invoked from network); 29 Jul 2006 11:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 11:20:24 -0000
Received: (qmail 36957 invoked by uid 500); 29 Jul 2006 11:20:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36924 invoked by uid 500); 29 Jul 2006 11:20:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36912 invoked by uid 99); 29 Jul 2006 11:20:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 04:20:18 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.164 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 04:20:17 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn2.hy.skanova.net (7.2.075)
        id 44A2F19F005E88F8 for java-user@lucene.apache.org; Sat, 29 Jul 2006 13:19:55 +0200
Subject: Re: About search performance
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <c2174c890607281846w3187877cq6ef610cff0c1d7ae@mail.gmail.com>
References: <c2174c890607281846w3187877cq6ef610cff0c1d7ae@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8
Organization: snigel heavy industries
Date: Sat, 29 Jul 2006 13:19:44 +0200
Message-Id: <1154171985.4881.222.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 2006-07-29 at 09:46 +0800, zhongyi yuan wrote:
> HiHow about implement multi-key search use lucene, for example use
> boolean search exceed 1000 clauses,it will affect the performance
> greatly. If use filter or custom sorter to select the result, because
> the result is extremely large in amount,so the performance is lower.
> Please give me some advice,Thanks.

I don't understand your question?

If you ask "should I use filter or boolean query to get optimal
performance?", then it depends on your corpus and the query. The easiest
way to find out is to benchmark your options.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 18:54:28 2006
Return-Path: <java-user-return-22370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70985 invoked from network); 29 Jul 2006 18:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 18:54:28 -0000
Received: (qmail 10979 invoked by uid 500); 29 Jul 2006 18:54:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10937 invoked by uid 500); 29 Jul 2006 18:54:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10921 invoked by uid 99); 29 Jul 2006 18:54:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 11:54:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.176] (HELO smtpout.mac.com) (17.250.248.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 11:54:21 -0700
Received: from mac.com (smtpin04-en2 [10.13.10.149])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id k6TIs0Hh007142
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 11:54:00 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin04/MantshX 4.0) with ESMTP id k6TIrvOa015738
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 11:53:59 -0700 (PDT)
Message-ID: <44CBAE4F.3060808@mac.com>
Date: Sat, 29 Jul 2006 14:51:59 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060726205006.57985.qmail@web50303.mail.yahoo.com> <44CA6DEB.50304@mac.com> <2cda2fc90607282318k4ade1ca2h1535e93816f4afa6@mail.gmail.com>
In-Reply-To: <2cda2fc90607282318k4ade1ca2h1535e93816f4afa6@mail.gmail.com>
Content-Type: text/plain; charset=windows-1250; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hasan Diwan wrote:

> Michael:
>
> On 7/28/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
>
>> Howdy....not sure if anyone else wants this but here is my first attempt
>> at writing an analyzer for an email address...modifications, updates,
>> fixes welcome.
>
>
> Why reinvent the wheel? See
> http://java.sun.com/products/javamail/javadocs/javax/mail/internet/InternetAddress.html#parse(java.lang.String) 
>
> and use as:
>
> InternetAddress valid = InternetAddress.parse(string)[0]; // far
> simpler than rewriting it
>
i dont see where i can break an email address into simpler pieces for 
tokens.  i use javamail when parsing the message and then pulling the 
email using InternetAddress.  I don't see where I can break an email 
address like john@foo.com into "john@foo.com", "john", "foo.com", "foo" 
and "com" without splitting it.  Am I missing something?

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 19:23:51 2006
Return-Path: <java-user-return-22371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80439 invoked from network); 29 Jul 2006 19:23:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 19:23:51 -0000
Received: (qmail 32167 invoked by uid 500); 29 Jul 2006 19:23:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31989 invoked by uid 500); 29 Jul 2006 19:23:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31978 invoked by uid 99); 29 Jul 2006 19:23:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:23:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:23:44 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G6uPE-0004Db-32
	for java-user@lucene.apache.org; Sat, 29 Jul 2006 12:23:24 -0700
Message-ID: <5557433.post@talk.nabble.com>
Date: Sat, 29 Jul 2006 12:23:24 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: SpellChecker
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

i had seen that a suggestion-tool (like google: Did you mean xyz?) can be
implemented with a addon for lucene which is called SpellingChecker. 

Is this correct or is there another (better) solution and where can this
addon be downloaded (cause i do not find a working download link).

Thanks for you help ;-))
-- 
View this message in context: http://www.nabble.com/SpellChecker-tf2021230.html#a5557433
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 19:36:44 2006
Return-Path: <java-user-return-22372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82144 invoked from network); 29 Jul 2006 19:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 19:36:43 -0000
Received: (qmail 38291 invoked by uid 500); 29 Jul 2006 19:36:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38263 invoked by uid 500); 29 Jul 2006 19:36:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38251 invoked by uid 99); 29 Jul 2006 19:36:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:36:38 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of markrmiller@gmail.com designates 64.233.184.234 as permitted sender)
Received: from [64.233.184.234] (HELO wr-out-0506.google.com) (64.233.184.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:36:37 -0700
Received: by wr-out-0506.google.com with SMTP id 58so75544wri
        for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:36:16 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=cqNtnp5JI8zZBSMXRn/9OyhYWvq82f5IVyv89m5aM5zFuqBd8yTDVvQRZ7TkOZVFZnADuE10JbtRfnVXT4v4r2Zv+Qx8PbvaNo+4YwAo3qsyW9oDrE8nNYdMbvuN/AZukWf24IoKNv5ADgJ9a3DNrpmWLrodH0FKVmA/mROexBM=
Received: by 10.54.62.2 with SMTP id k2mr743913wra;
        Sat, 29 Jul 2006 12:36:16 -0700 (PDT)
Received: from ?192.168.1.102? ( [216.66.115.97])
        by mx.gmail.com with ESMTP id 25sm2692877wra.2006.07.29.12.36.15;
        Sat, 29 Jul 2006 12:36:16 -0700 (PDT)
Message-ID: <44CBB8B5.5030507@gmail.com>
Date: Sat, 29 Jul 2006 15:36:21 -0400
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SpellChecker
References: <5557433.post@talk.nabble.com>
In-Reply-To: <5557433.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

neils wrote:
> Hi,
>
> i had seen that a suggestion-tool (like google: Did you mean xyz?) can be
> implemented with a addon for lucene which is called SpellingChecker. 
>
> Is this correct or is there another (better) solution and where can this
> addon be downloaded (cause i do not find a working download link).
>
> Thanks for you help ;-))
>   
http://today.java.net/pub/a/today/2005/08/09/didyoumean.html


-,Mark

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 19:40:12 2006
Return-Path: <java-user-return-22373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82725 invoked from network); 29 Jul 2006 19:40:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 19:40:12 -0000
Received: (qmail 40969 invoked by uid 500); 29 Jul 2006 19:40:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40937 invoked by uid 500); 29 Jul 2006 19:40:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40925 invoked by uid 99); 29 Jul 2006 19:40:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:40:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.193.231.187] (HELO mail.cbrese.com) (66.193.231.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:40:05 -0700
Received: by mail.cbrese.com (Postfix, from userid 1003)
	id 6BD09B5291E; Sat, 29 Jul 2006 12:39:44 -0700 (PDT)
X-Spam-Checker-Version: SpamAssassin 3.1.0-gr0 (2005-09-13) on newcastle
X-Spam-Level: 
Received: from [192.168.2.100] (cpe-70-95-226-234.san.res.rr.com [70.95.226.234])
	by mail.cbrese.com (Postfix) with ESMTP id D6FF191F373
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:39:39 -0700 (PDT)
From: Jason Calabrese <mail@jasoncalabrese.com>
To: java-user@lucene.apache.org
Subject: Re: Sorting
Date: Sat, 29 Jul 2006 12:39:32 -0700
User-Agent: KMail/1.9.1
References: <5552408.post@talk.nabble.com>
In-Reply-To: <5552408.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607291239.32695.mail@jasoncalabrese.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.9 required=6.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.1.0-gr0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

One fast way to make an alphabetic sort very fast is to presort your docs 
before adding them to the index.  If you do this you can then just sort by 
index order.  We are using this for a large index (1 million+ docs) and it 
works very good, and seems even slightly faster than relevance sorting.

Using this approach may create some maintainance issues since you can't add a 
new doc to the index at a specified position.  Instead you will need to 
re-index everything.


On Saturday 29 July 2006 01:43, neils wrote:
> Hi,
>
> Lucene sort hits by relevance as default. Cause i would like to sort them
> by a special string field and not by relevance i was thinking about
> dropping the sorting by relevance as default and implement sorting by
> alphabetic order.
>
> Reason that sorting by alpabetic order takes a lot of time. Makes this
> sense and how can this be done? Or is there another "fast" way to sort by
> alphabetic order ?
>
> Currently I'm using lucene 1.9.1 (dotnet). The indexsize is currently about
> 2 GB and index is split in two parts and are accessed by a parallelreader.
>
> Hopefully you can give me a tip if there is a way :-))
>
> Thanks a lot :-)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 19:45:40 2006
Return-Path: <java-user-return-22374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83746 invoked from network); 29 Jul 2006 19:45:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 19:45:40 -0000
Received: (qmail 47244 invoked by uid 500); 29 Jul 2006 19:45:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46655 invoked by uid 500); 29 Jul 2006 19:45:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46644 invoked by uid 99); 29 Jul 2006 19:45:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:45:34 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:45:32 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G6ukK-0004bi-F4
	for java-user@lucene.apache.org; Sat, 29 Jul 2006 12:45:12 -0700
Message-ID: <5557630.post@talk.nabble.com>
Date: Sat, 29 Jul 2006 12:45:12 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: SpellChecker
In-Reply-To: <44CBB8B5.5030507@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5557433.post@talk.nabble.com> <44CBB8B5.5030507@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Mark,

thanks a lot for the link. I already found this but i can not use the
libarys

import org.apache.lucene.search.spell.Dictionary;
import org.apache.lucene.search.spell.LuceneDictionary;
import org.apache.lucene.search.spell.SpellChecker;

cause is seems like there are not included in Lucene.Net. Could this be
right ? Are there alternatives ?

Thanks
N;-)eils

-- 
View this message in context: http://www.nabble.com/SpellChecker-tf2021230.html#a5557630
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 19:51:57 2006
Return-Path: <java-user-return-22375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84631 invoked from network); 29 Jul 2006 19:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 19:51:57 -0000
Received: (qmail 52943 invoked by uid 500); 29 Jul 2006 19:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52913 invoked by uid 500); 29 Jul 2006 19:51:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52902 invoked by uid 99); 29 Jul 2006 19:51:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:51:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.186] (HELO smtpout.mac.com) (17.250.248.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:51:51 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout16/MantshX 4.0) with ESMTP id k6TJpV96010914
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:51:31 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id k6TJpSfO012006
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:51:30 -0700 (PDT)
Message-ID: <44CBBBCA.9070509@mac.com>
Date: Sat, 29 Jul 2006 15:49:30 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So I have the following code...

// let's get our SynonymAnalyzer
SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
// let's get our EmailAnalyzer
EmailAnalyzer emailAnalyzer = getEmailAnalyzer();

// set up perfieldanalyzer
PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new 
StandardAnalyzer());           
aWrapper.addAnalyzer("subject", synAnalyzer);
aWrapper.addAnalyzer("content", synAnalyzer);
aWrapper.addAnalyzer("from", emailAnalyzer);
aWrapper.addAnalyzer("to", emailAnalyzer);
aWrapper.addAnalyzer("cc", emailAnalyzer);
aWrapper.addAnalyzer("bcc", emailAnalyzer);

// create the writer
try {
    wr = new IndexWriter(indexDir, aWrapper, false);
    wr.setUseCompoundFile(false);
} catch (IOException iox) {
    // means it ain't there
    wr = new IndexWriter(indexDir, aWrapper, true);
    wr.setUseCompoundFile(false);
}

-----

When I add a Document to the IndexWriter it does not seem to use the 
analyzer's I want it too.  Just uses StandardAnalyzer for everythign!  
Is this the correct way to use PerFieldAnalyzerWrapper?

Thanks,
Michael

P.S.  I am using Lucene 2 libs.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 19:55:20 2006
Return-Path: <java-user-return-22376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84925 invoked from network); 29 Jul 2006 19:55:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 19:55:20 -0000
Received: (qmail 54911 invoked by uid 500); 29 Jul 2006 19:55:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54882 invoked by uid 500); 29 Jul 2006 19:55:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54871 invoked by uid 99); 29 Jul 2006 19:55:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:55:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.173] (HELO smtpout.mac.com) (17.250.248.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:55:13 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id k6TJsrJP018473
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:54:53 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k6TJsoNK012758
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 12:54:52 -0700 (PDT)
Message-ID: <44CBBC95.3030000@mac.com>
Date: Sat, 29 Jul 2006 15:52:53 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
References: <44CBBBCA.9070509@mac.com>
In-Reply-To: <44CBBBCA.9070509@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Oh my...disregard this question.  It works...I was instantiating my 
IndexWriter before setting up my Analyzers!!  Dangit...I feel a little 
dumb.  I just switched the order and put the instantiated indexwriter 
last...it works.

Thanks,
Michael

P.S.  I feel somewhat silly!

Michael J. Prichard wrote:

> So I have the following code...
>
> // let's get our SynonymAnalyzer
> SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
> // let's get our EmailAnalyzer
> EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>
> // set up perfieldanalyzer
> PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new 
> StandardAnalyzer());           aWrapper.addAnalyzer("subject", 
> synAnalyzer);
> aWrapper.addAnalyzer("content", synAnalyzer);
> aWrapper.addAnalyzer("from", emailAnalyzer);
> aWrapper.addAnalyzer("to", emailAnalyzer);
> aWrapper.addAnalyzer("cc", emailAnalyzer);
> aWrapper.addAnalyzer("bcc", emailAnalyzer);
>
> // create the writer
> try {
>    wr = new IndexWriter(indexDir, aWrapper, false);
>    wr.setUseCompoundFile(false);
> } catch (IOException iox) {
>    // means it ain't there
>    wr = new IndexWriter(indexDir, aWrapper, true);
>    wr.setUseCompoundFile(false);
> }
>
> -----
>
> When I add a Document to the IndexWriter it does not seem to use the 
> analyzer's I want it too.  Just uses StandardAnalyzer for everythign!  
> Is this the correct way to use PerFieldAnalyzerWrapper?
>
> Thanks,
> Michael
>
> P.S.  I am using Lucene 2 libs.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 19:56:51 2006
Return-Path: <java-user-return-22377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85220 invoked from network); 29 Jul 2006 19:56:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 19:56:50 -0000
Received: (qmail 57544 invoked by uid 500); 29 Jul 2006 19:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57511 invoked by uid 500); 29 Jul 2006 19:56:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57500 invoked by uid 99); 29 Jul 2006 19:56:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:56:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 12:56:45 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4C55330EFCD8; Sat, 29 Jul 2006 15:56:24 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id C95B030EFCD8
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 15:56:21 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <44CBBBCA.9070509@mac.com>
References: <44CBBBCA.9070509@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <20BE162F-C1EE-49B0-89AB-67C09D71B75B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
Date: Sat, 29 Jul 2006 15:56:15 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think you should use a new instance of each analyzer for each  
field, not reuse instances.  Other than that, your usage is fine.

	Erik


On Jul 29, 2006, at 3:49 PM, Michael J. Prichard wrote:

> So I have the following code...
>
> // let's get our SynonymAnalyzer
> SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
> // let's get our EmailAnalyzer
> EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>
> // set up perfieldanalyzer
> PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new  
> StandardAnalyzer());           aWrapper.addAnalyzer("subject",  
> synAnalyzer);
> aWrapper.addAnalyzer("content", synAnalyzer);
> aWrapper.addAnalyzer("from", emailAnalyzer);
> aWrapper.addAnalyzer("to", emailAnalyzer);
> aWrapper.addAnalyzer("cc", emailAnalyzer);
> aWrapper.addAnalyzer("bcc", emailAnalyzer);
>
> // create the writer
> try {
>    wr = new IndexWriter(indexDir, aWrapper, false);
>    wr.setUseCompoundFile(false);
> } catch (IOException iox) {
>    // means it ain't there
>    wr = new IndexWriter(indexDir, aWrapper, true);
>    wr.setUseCompoundFile(false);
> }
>
> -----
>
> When I add a Document to the IndexWriter it does not seem to use  
> the analyzer's I want it too.  Just uses StandardAnalyzer for  
> everythign!  Is this the correct way to use PerFieldAnalyzerWrapper?
>
> Thanks,
> Michael
>
> P.S.  I am using Lucene 2 libs.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 20:07:02 2006
Return-Path: <java-user-return-22378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85783 invoked from network); 29 Jul 2006 20:07:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 20:07:01 -0000
Received: (qmail 60695 invoked by uid 500); 29 Jul 2006 20:06:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60672 invoked by uid 500); 29 Jul 2006 20:06:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60661 invoked by uid 99); 29 Jul 2006 20:06:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 13:06:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.185] (HELO smtpout.mac.com) (17.250.248.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 13:06:55 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout15/MantshX 4.0) with ESMTP id k6TK6Z0V006713
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 13:06:35 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k6TK6UUZ015708
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 13:06:32 -0700 (PDT)
Message-ID: <44CBBF47.8000200@mac.com>
Date: Sat, 29 Jul 2006 16:04:23 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
References: <44CBBBCA.9070509@mac.com> <20BE162F-C1EE-49B0-89AB-67C09D71B75B@ehatchersolutions.com>
In-Reply-To: <20BE162F-C1EE-49B0-89AB-67C09D71B75B@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Erik,

Will do.  May I ask why?  Out of curiousity.

Thanks,
Michael

Erik Hatcher wrote:

> I think you should use a new instance of each analyzer for each  
> field, not reuse instances.  Other than that, your usage is fine.
>
>     Erik
>
>
> On Jul 29, 2006, at 3:49 PM, Michael J. Prichard wrote:
>
>> So I have the following code...
>>
>> // let's get our SynonymAnalyzer
>> SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
>> // let's get our EmailAnalyzer
>> EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>>
>> // set up perfieldanalyzer
>> PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new  
>> StandardAnalyzer());           aWrapper.addAnalyzer("subject",  
>> synAnalyzer);
>> aWrapper.addAnalyzer("content", synAnalyzer);
>> aWrapper.addAnalyzer("from", emailAnalyzer);
>> aWrapper.addAnalyzer("to", emailAnalyzer);
>> aWrapper.addAnalyzer("cc", emailAnalyzer);
>> aWrapper.addAnalyzer("bcc", emailAnalyzer);
>>
>> // create the writer
>> try {
>>    wr = new IndexWriter(indexDir, aWrapper, false);
>>    wr.setUseCompoundFile(false);
>> } catch (IOException iox) {
>>    // means it ain't there
>>    wr = new IndexWriter(indexDir, aWrapper, true);
>>    wr.setUseCompoundFile(false);
>> }
>>
>> -----
>>
>> When I add a Document to the IndexWriter it does not seem to use  the 
>> analyzer's I want it too.  Just uses StandardAnalyzer for  
>> everythign!  Is this the correct way to use PerFieldAnalyzerWrapper?
>>
>> Thanks,
>> Michael
>>
>> P.S.  I am using Lucene 2 libs.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 20:42:44 2006
Return-Path: <java-user-return-22379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91692 invoked from network); 29 Jul 2006 20:42:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 20:42:44 -0000
Received: (qmail 77923 invoked by uid 500); 29 Jul 2006 20:42:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77895 invoked by uid 500); 29 Jul 2006 20:42:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77884 invoked by uid 99); 29 Jul 2006 20:42:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 13:42:38 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.11.98 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.11.98] (HELO pne-smtpout1-sn1.fre.skanova.net) (81.228.11.98)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 13:42:38 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout1-sn1.fre.skanova.net (7.2.075)
        id 44A1364D0065E2AD for java-user@lucene.apache.org; Sat, 29 Jul 2006 22:42:16 +0200
Subject: Re: Sorting
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <200607291239.32695.mail@jasoncalabrese.com>
References: <5552408.post@talk.nabble.com>
	 <200607291239.32695.mail@jasoncalabrese.com>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Sat, 29 Jul 2006 22:42:04 +0200
Message-Id: <1154205724.4881.265.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 2006-07-29 at 12:39 -0700, Jason Calabrese wrote:
> One fast way to make an alphabetic sort very fast is to presort your
> docs before adding them to the index.  If you do this you can then
> just sort by index order.  We are using this for a large index (1
> million+ docs) and it works very good, and seems even slightly faster
> than relevance sorting.
> 
> Using this approach may create some maintainance issues since you
> can't add a new doc to the index at a specified position.  Instead you
> will need to re-index everything. 

Instead of above I would probably choose an int[index size] where each
position in the array represents the global order of that document. It's
much easier to re-order that than re-indexing the whole corpus every
time you want to insert something.

It limits your corpus to 2 billion items (Integer.MAX_VALUE). And it
will consume 32 bits of RAM per document.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 29 21:01:43 2006
Return-Path: <java-user-return-22380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93828 invoked from network); 29 Jul 2006 21:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2006 21:01:43 -0000
Received: (qmail 86980 invoked by uid 500); 29 Jul 2006 21:01:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86945 invoked by uid 500); 29 Jul 2006 21:01:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86934 invoked by uid 99); 29 Jul 2006 21:01:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 14:01:37 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 14:01:37 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G6vvw-0006Lw-Fz
	for java-user@lucene.apache.org; Sat, 29 Jul 2006 14:01:16 -0700
Message-ID: <5558212.post@talk.nabble.com>
Date: Sat, 29 Jul 2006 14:01:16 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Sorting
In-Reply-To: <1154205724.4881.265.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5552408.post@talk.nabble.com> <200607291239.32695.mail@jasoncalabrese.com> <1154205724.4881.265.camel@localhost>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

thanks a lot for you helpfull answers :-)) I think I will try i like karl
suggest, cause i have to update the index every day :-))

Thanks a lot :-))
-- 
View this message in context: http://www.nabble.com/Sorting-tf2019404.html#a5558212
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 01:22:13 2006
Return-Path: <java-user-return-22381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24239 invoked from network); 30 Jul 2006 01:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 01:22:13 -0000
Received: (qmail 96120 invoked by uid 500); 30 Jul 2006 01:22:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96089 invoked by uid 500); 30 Jul 2006 01:22:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96078 invoked by uid 99); 30 Jul 2006 01:22:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 18:22:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 18:22:06 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3A9D55B774; Sat, 29 Jul 2006 18:21:44 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 34B917F403
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 18:21:44 -0700 (PDT)
Date: Sat, 29 Jul 2006 18:21:44 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting
In-Reply-To: <5558212.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0607291802450.27128@hal.rescomp.berkeley.edu>
References: <5552408.post@talk.nabble.com> <200607291239.32695.mail@jasoncalabrese.com>
 <1154205724.4881.265.camel@localhost> <5558212.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: thanks a lot for you helpfull answers :-)) I think I will try i like karl
: suggest, cause i have to update the index every day :-))

All of the suggestions so far assume that you have some way of mapping
each document to a number that indicates it's relative position in the
total space of ordered documents -- which means that if you are updating
the index on a daily basis, you are going to need some serious juggling to
make sure that when a new document comes along, you figure out the "right"
integer to put it into the correct order -- not to mention you have no
solution for the day when you discover that "banana" is in your index with
a sort value of 12345 and "bandana" is in your index with sort value 12346
-- and now you want to add "banco" and you don't have any room for it.

A bigger problem is the fact that sorting by an int field takes
just as much time as sorting by a String field -- because Lucene's sorting
code is already doing the String->int mapping for you and putting it into
a FieldCache.  The only real difference between sorting on an int field
and a String field is how much RAM that FieldCache uses (typically more
for Strings)
(NOTE: there are some caveats to this when dealing with MultiSearcher, but
you didn't mention using a MultiSearcher, so i'm glossing over that)

What *does* take more time when dealing with String fields is building the
FieldCache (because sorting a bunch of strings tends to take longer then
sorting a bunch of ints) ... but this Cache will only be built up the
first time you sort on that field for a given IndexReader/IndexSearcher
... as long as you keep reusing the same IndexSearcher, things should be
"fast".

Without confirmation to the contrary, i'm guessing you aren't reusing the
same IndexSearcher, and that's why it seems like sorting on Strings is
slow.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 01:30:50 2006
Return-Path: <java-user-return-22382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24828 invoked from network); 30 Jul 2006 01:30:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 01:30:50 -0000
Received: (qmail 99896 invoked by uid 500); 30 Jul 2006 01:30:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99864 invoked by uid 500); 30 Jul 2006 01:30:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99853 invoked by uid 99); 30 Jul 2006 01:30:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 18:30:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 18:30:44 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 76D615B774; Sat, 29 Jul 2006 18:30:21 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7302F7F403
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 18:30:21 -0700 (PDT)
Date: Sat, 29 Jul 2006 18:30:21 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: SpellChecker
In-Reply-To: <5557630.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0607291823100.27128@hal.rescomp.berkeley.edu>
References: <5557433.post@talk.nabble.com> <44CBB8B5.5030507@gmail.com>
 <5557630.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: import org.apache.lucene.search.spell.Dictionary;
: import org.apache.lucene.search.spell.LuceneDictionary;
: import org.apache.lucene.search.spell.SpellChecker;
:
: cause is seems like there are not included in Lucene.Net. Could this be
: right ? Are there alternatives ?

Those classes are pat of the "spell" contrib package.  Your best bet for
finding out about ports of those classes is on one of the Lucene.Net
mailing lists...

http://incubator.apache.org/lucene.net/



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 03:43:09 2006
Return-Path: <java-user-return-22383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37130 invoked from network); 30 Jul 2006 03:43:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 03:43:09 -0000
Received: (qmail 52553 invoked by uid 500); 30 Jul 2006 03:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52522 invoked by uid 500); 30 Jul 2006 03:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52511 invoked by uid 99); 30 Jul 2006 03:43:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 20:43:02 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 29 Jul 2006 20:43:01 -0700
Received: (qmail 73903 invoked by uid 60001); 30 Jul 2006 03:42:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=4T1Qq7TSItGr0piDJdL6cLczoSKCmhzFjxC+IOVk69TnJ6buhYPzUUlWPxD6E7z4o5foV61GYqo7f/Bw8RfWpWBbpPjaIv9NksfeR7z22lZn5f9pz7OtfWVIJ0jPmZ03SL7DCykFEqFkjIK95yUryFnGxUhnRFnm04Wxk7sXJl8=  ;
Message-ID: <20060730034240.73901.qmail@web50315.mail.yahoo.com>
Received: from [72.229.167.99] by web50315.mail.yahoo.com via HTTP; Sat, 29 Jul 2006 20:42:40 PDT
Date: Sat, 29 Jul 2006 20:42:40 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
To: java-user@lucene.apache.org
In-Reply-To: <44CBBF47.8000200@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think you can reuse them.  Fields should he handled/analyzed sequentially.  I reuse them for some stuff on Simpy.com.

But you may want to clean up that try/catch.  Instead of catching the IOException, you may want to use !IndexReader.indexExists(...) in place of that boolean param to IndexWriter ctor.

Otis

----- Original Message ----
From: Michael J. Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Sent: Saturday, July 29, 2006 4:04:23 PM
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....

Hey Erik,

Will do.  May I ask why?  Out of curiousity.

Thanks,
Michael

Erik Hatcher wrote:

> I think you should use a new instance of each analyzer for each  
> field, not reuse instances.  Other than that, your usage is fine.
>
>     Erik
>
>
> On Jul 29, 2006, at 3:49 PM, Michael J. Prichard wrote:
>
>> So I have the following code...
>>
>> // let's get our SynonymAnalyzer
>> SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
>> // let's get our EmailAnalyzer
>> EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>>
>> // set up perfieldanalyzer
>> PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new  
>> StandardAnalyzer());           aWrapper.addAnalyzer("subject",  
>> synAnalyzer);
>> aWrapper.addAnalyzer("content", synAnalyzer);
>> aWrapper.addAnalyzer("from", emailAnalyzer);
>> aWrapper.addAnalyzer("to", emailAnalyzer);
>> aWrapper.addAnalyzer("cc", emailAnalyzer);
>> aWrapper.addAnalyzer("bcc", emailAnalyzer);
>>
>> // create the writer
>> try {
>>    wr = new IndexWriter(indexDir, aWrapper, false);
>>    wr.setUseCompoundFile(false);
>> } catch (IOException iox) {
>>    // means it ain't there
>>    wr = new IndexWriter(indexDir, aWrapper, true);
>>    wr.setUseCompoundFile(false);
>> }
>>
>> -----
>>
>> When I add a Document to the IndexWriter it does not seem to use  the 
>> analyzer's I want it too.  Just uses StandardAnalyzer for  
>> everythign!  Is this the correct way to use PerFieldAnalyzerWrapper?
>>
>> Thanks,
>> Michael
>>
>> P.S.  I am using Lucene 2 libs.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 03:44:21 2006
Return-Path: <java-user-return-22384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37279 invoked from network); 30 Jul 2006 03:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 03:44:21 -0000
Received: (qmail 54060 invoked by uid 500); 30 Jul 2006 03:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54032 invoked by uid 500); 30 Jul 2006 03:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54020 invoked by uid 99); 30 Jul 2006 03:44:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 20:44:15 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 29 Jul 2006 20:44:15 -0700
Received: (qmail 80464 invoked by uid 60001); 30 Jul 2006 03:43:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=d+8w8X199hOrvbh05t2bqnNKozy4IzRde0+iQO1NaDCDbkR1rQhyg0BgwpxzhGg2SAM6+7Gyn5PyVEYbCHVbh48+YW4lNaSyeblA6x1WoaRuJQAeALarvS/mQGooUw+XPtp9cPVC2H4sjDnBF9DEke40elW/jMESnFieFUiYeOs=  ;
Message-ID: <20060730034354.80462.qmail@web50311.mail.yahoo.com>
Received: from [72.229.167.99] by web50311.mail.yahoo.com via HTTP; Sat, 29 Jul 2006 20:43:54 PDT
Date: Sat, 29 Jul 2006 20:43:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
To: java-user@lucene.apache.org
In-Reply-To: <44CBAE4F.3060808@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

No, you're not missing anything. :)
That JavaMail API is good for getting the whole email, but you then need to chop it up with your EmailAnalyzer, so you're doing the right thing.

Otis

----- Original Message ----
From: Michael J. Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Sent: Saturday, July 29, 2006 2:51:59 PM
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)

Hasan Diwan wrote:

> Michael:
>
> On 7/28/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
>
>> Howdy....not sure if anyone else wants this but here is my first attempt
>> at writing an analyzer for an email address...modifications, updates,
>> fixes welcome.
>
>
> Why reinvent the wheel? See
> http://java.sun.com/products/javamail/javadocs/javax/mail/internet/InternetAddress.html#parse(java.lang.String) 
>
> and use as:
>
> InternetAddress valid = InternetAddress.parse(string)[0]; // far
> simpler than rewriting it
>
i dont see where i can break an email address into simpler pieces for 
tokens.  i use javamail when parsing the message and then pulling the 
email using InternetAddress.  I don't see where I can break an email 
address like john@foo.com into "john@foo.com", "john", "foo.com", "foo" 
and "com" without splitting it.  Am I missing something?

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 06:55:52 2006
Return-Path: <java-user-return-22385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56235 invoked from network); 30 Jul 2006 06:55:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 06:55:52 -0000
Received: (qmail 2517 invoked by uid 500); 30 Jul 2006 06:55:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2481 invoked by uid 500); 30 Jul 2006 06:55:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2470 invoked by uid 99); 30 Jul 2006 06:55:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 23:55:46 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lists@nabble.com designates 72.21.53.35 as permitted sender)
Received: from [72.21.53.35] (HELO talk.nabble.com) (72.21.53.35)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 23:55:45 -0700
Received: from [72.21.53.38] (helo=jubjub.nabble.com)
	by talk.nabble.com with esmtp (Exim 4.50)
	id 1G75Cu-0007qM-Dy
	for java-user@lucene.apache.org; Sat, 29 Jul 2006 23:55:24 -0700
Message-ID: <5561163.post@talk.nabble.com>
Date: Sat, 29 Jul 2006 23:55:24 -0700 (PDT)
From: neils <neils@gmx.net>
To: java-user@lucene.apache.org
Subject: Re: Sorting
In-Reply-To: <Pine.LNX.4.58.0607291802450.27128@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-Sender: neils@gmx.net
X-Nabble-From: neils <neils@gmx.net>
References: <5552408.post@talk.nabble.com> <200607291239.32695.mail@jasoncalabrese.com> <1154205724.4881.265.camel@localhost> <5558212.post@talk.nabble.com> <Pine.LNX.4.58.0607291802450.27128@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi Chris,

thanks a lot for your reply. Currently I'm using a parallelreader, cause one
part of index is in the memory and one part is on disk. It seems like
parallelreader has a problem with sorting. So i have three questions:

1. Is there a know bug in the parallelreader?
2. Is it true, that only fields with one single term can be sorted?
3. The fields i would like to sort are indexed but not stored...is this a
problem for sorting `?

Thank you very much ;-))
-- 
View this message in context: http://www.nabble.com/Sorting-tf2019404.html#a5561163
Sent from the Lucene - Java Users forum at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 06:59:56 2006
Return-Path: <java-user-return-22386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56416 invoked from network); 30 Jul 2006 06:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 06:59:56 -0000
Received: (qmail 4690 invoked by uid 500); 30 Jul 2006 06:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4655 invoked by uid 500); 30 Jul 2006 06:59:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4644 invoked by uid 99); 30 Jul 2006 06:59:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 23:59:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Jul 2006 23:59:50 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 4C4695B777; Sat, 29 Jul 2006 23:59:22 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 4840D7F403
	for <java-user@lucene.apache.org>; Sat, 29 Jul 2006 23:59:22 -0700 (PDT)
Date: Sat, 29 Jul 2006 23:59:22 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting
In-Reply-To: <5561163.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.58.0607292357180.27130@hal.rescomp.berkeley.edu>
References: <5552408.post@talk.nabble.com> <200607291239.32695.mail@jasoncalabrese.com>
 <1154205724.4881.265.camel@localhost> <5558212.post@talk.nabble.com>
 <Pine.LNX.4.58.0607291802450.27128@hal.rescomp.berkeley.edu>
 <5561163.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: thanks a lot for your reply. Currently I'm using a parallelreader, cause one
: part of index is in the memory and one part is on disk. It seems like
: parallelreader has a problem with sorting. So i have three questions:
:
: 1. Is there a know bug in the parallelreader?

not that i know of ... can you elaborate on why you think there is a
problem?

: 2. Is it true, that only fields with one single term can be sorted?

there can at most one indexed term per document ... which means you either
needed to index the Field UN_TOKENIZED you need to use KeywordAnalyzer, or
you need to know that you are only ever putting in values that get
analyzed to single Tokens.

: 3. The fields i would like to sort are indexed but not stored...is this a
: problem for sorting `?

they must be indexed, wether they are stored or not is irrelevant.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 10:16:45 2006
Return-Path: <java-user-return-22387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84330 invoked from network); 30 Jul 2006 10:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 10:16:45 -0000
Received: (qmail 70854 invoked by uid 500); 30 Jul 2006 10:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70824 invoked by uid 500); 30 Jul 2006 10:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70808 invoked by uid 99); 30 Jul 2006 10:16:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 03:16:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 03:16:38 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 699CB30EFCD8; Sun, 30 Jul 2006 06:16:17 -0400 (EDT)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [172.16.1.101] (va-71-53-203-135.dhcp.embarqhsd.net [71.53.203.135])
	by ehatchersolutions.com (Postfix) with ESMTP id 97D9E30EFCD8
	for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 06:16:09 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <20060730034240.73901.qmail@web50315.mail.yahoo.com>
References: <20060730034240.73901.qmail@web50315.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <53F092F9-4C6C-41BB-98F6-13425712C24C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
Date: Sun, 30 Jul 2006 06:16:05 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.8 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry, Otis is right.  I just couldn't see anything else in your code  
that could have been wrong.

	Erik


On Jul 29, 2006, at 11:42 PM, Otis Gospodnetic wrote:

> I think you can reuse them.  Fields should he handled/analyzed  
> sequentially.  I reuse them for some stuff on Simpy.com.
>
> But you may want to clean up that try/catch.  Instead of catching  
> the IOException, you may want to use !IndexReader.indexExists(...)  
> in place of that boolean param to IndexWriter ctor.
>
> Otis
>
> ----- Original Message ----
> From: Michael J. Prichard <michael_prichard@mac.com>
> To: java-user@lucene.apache.org
> Sent: Saturday, July 29, 2006 4:04:23 PM
> Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being  
> used as expected....
>
> Hey Erik,
>
> Will do.  May I ask why?  Out of curiousity.
>
> Thanks,
> Michael
>
> Erik Hatcher wrote:
>
>> I think you should use a new instance of each analyzer for each
>> field, not reuse instances.  Other than that, your usage is fine.
>>
>>     Erik
>>
>>
>> On Jul 29, 2006, at 3:49 PM, Michael J. Prichard wrote:
>>
>>> So I have the following code...
>>>
>>> // let's get our SynonymAnalyzer
>>> SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
>>> // let's get our EmailAnalyzer
>>> EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>>>
>>> // set up perfieldanalyzer
>>> PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new
>>> StandardAnalyzer());           aWrapper.addAnalyzer("subject",
>>> synAnalyzer);
>>> aWrapper.addAnalyzer("content", synAnalyzer);
>>> aWrapper.addAnalyzer("from", emailAnalyzer);
>>> aWrapper.addAnalyzer("to", emailAnalyzer);
>>> aWrapper.addAnalyzer("cc", emailAnalyzer);
>>> aWrapper.addAnalyzer("bcc", emailAnalyzer);
>>>
>>> // create the writer
>>> try {
>>>    wr = new IndexWriter(indexDir, aWrapper, false);
>>>    wr.setUseCompoundFile(false);
>>> } catch (IOException iox) {
>>>    // means it ain't there
>>>    wr = new IndexWriter(indexDir, aWrapper, true);
>>>    wr.setUseCompoundFile(false);
>>> }
>>>
>>> -----
>>>
>>> When I add a Document to the IndexWriter it does not seem to use   
>>> the
>>> analyzer's I want it too.  Just uses StandardAnalyzer for
>>> everythign!  Is this the correct way to use PerFieldAnalyzerWrapper?
>>>
>>> Thanks,
>>> Michael
>>>
>>> P.S.  I am using Lucene 2 libs.
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 12:58:08 2006
Return-Path: <java-user-return-22388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4069 invoked from network); 30 Jul 2006 12:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 12:58:08 -0000
Received: (qmail 40421 invoked by uid 500); 30 Jul 2006 12:58:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40390 invoked by uid 500); 30 Jul 2006 12:58:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40379 invoked by uid 99); 30 Jul 2006 12:58:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 05:58:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [85.118.4.17] (HELO snorlax.uk.scalix.com) (85.118.4.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 05:58:02 -0700
Received: from snorlax.uk.scalix.com (root@localhost)
	by snorlax.uk.scalix.com (8.12.11.20060308/8.12.11) with ESMTP id k6UCvYcm008752
	for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 13:57:35 +0100
Received: from [10.71.0.231] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 11.0.0.142-alpha)
    via ESMTP; Sun, 30 Jul 2006 13:57:34 +0100 (BST)
Date: Sun, 30 Jul 2006 13:57:24 +0100
From: John Haxby <jch@scalix.com>
To: java-user@lucene.apache.org
Message-ID: <44CCACB4.8030607@scalix.com>
In-Reply-To: <44C7B064.4050305@getopt.org>
References: <44C79E79.3000704@wolfram.com>
References: <44C7ABD1.7070609@scalix.com>
References: <44C7B064.4050305@getopt.org>
Subject: Re: email libraries
x-scalix-Hops: 1
User-Agent: Thunderbird 1.5.0.4 (X11/20060614)
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII";
	format="flowed"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> Just for the record - I've been using javamail POP and IMAP providers 
> in the past, and they were prone to hanging with some servers, and 
> resource intensive. I've been also using Outlook (proper, not Outlook 
> Express - this is AFAIK impossible to work with) via a Java-COM bridge 
> such as Jawin or JNIWrapper plus Redemption . This also tends to be 
> rather unstable, and requires a lot of fine-tuning ...
We use javamail a *lot* with the Scalix IMAP server (the web access part 
uses IMAP underneath).   We have had performance problems with the way 
that javamail works, although for just scanning a message store to index 
messages it's OK.   We have tuned the web access code somewhat to make 
it behave better but we've also re-engineered the IMAP server somewhat, 
partly with javamail in mind, and performance and resource usage on the 
server are now somewhat under control.
> So, be prepared to suffer quite a bit. ;)
If you're doing complicated things, yes, but if it's simple access for 
the purposes of indexing then you probably don't need to worry too much.

jch


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 14:32:23 2006
Return-Path: <java-user-return-22389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17432 invoked from network); 30 Jul 2006 14:32:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 14:32:22 -0000
Received: (qmail 77324 invoked by uid 500); 30 Jul 2006 14:32:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77291 invoked by uid 500); 30 Jul 2006 14:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77280 invoked by uid 99); 30 Jul 2006 14:32:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 07:32:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan.ezust@gmail.com designates 64.233.182.185 as permitted sender)
Received: from [64.233.182.185] (HELO nf-out-0910.google.com) (64.233.182.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 07:32:16 -0700
Received: by nf-out-0910.google.com with SMTP id o63so222228nfa
        for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 07:31:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=frmWWu8uX7VNx/X9CZIyqTOzlawiLSLmZQ9r3WxUkIpicGJtmEE4d9vpuNrKNHrtGP9F8p1gMy+dCA7xN1uekYhVVXPKuhV2BswDUIvL1l0u0S7lry2d2p32l6jbSqG3C2xQaH+sFzHV2Q/wjWv/7EImcxoH1vN86zWzNN7nnbQ=
Received: by 10.78.165.16 with SMTP id n16mr293657hue;
        Sun, 30 Jul 2006 07:31:55 -0700 (PDT)
Received: by 10.78.169.13 with HTTP; Sun, 30 Jul 2006 07:31:54 -0700 (PDT)
Message-ID: <f377591c0607300731t77cdbcc4y1f176a1d3488fdf@mail.gmail.com>
Date: Sun, 30 Jul 2006 07:31:55 -0700
From: "Alan Ezust" <alan.ezust@gmail.com>
To: java-user@lucene.apache.org
Subject: java.lang.IllegalAccessError: tried to access method org.apache.lucene.search.HitDoc.<init>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm having difficulty getting Lucene to work for me, and it keeps
coming back to this HitDoc class.

At the moment ,whenever I call the IndexBuilder.search method,
this what I get:

[error] WorkThread: java.lang.IllegalAccessError: tried to access
method org.apache.lucene.search.HitDoc.<init>(FI)V from class
org.apache.lucene.search.Hits
[error] WorkThread:  at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:94)
[error] WorkThread:  at org.apache.lucene.search.Hits.<init>(Hits.java:53)
[error] WorkThread:  at
org.apache.lucene.search.Searcher.search(Searcher.java:44)
[error] WorkThread:  at
org.apache.lucene.search.Searcher.search(Searcher.java:36)
[error] WorkThread:  at
infoviewer.lucene.IndexBuilder.search(IndexBuilder.java:118)
[error] WorkThread:  at
infoviewer.lucene.SearchPanel$ActionHandler$1.run(SearchPanel.java:190)
[error] WorkThread:  at
org.gjt.sp.util.WorkThread.doRequest(WorkThread.java:194)
[error] WorkThread:  at
org.gjt.sp.util.WorkThread.doRequests(WorkThread.java:161)


I tried moving class HitDoc out of Hits.java and into its own
HitDoc.java file, and making the class and ctor public, but I still
get this error... So now I'm really confused.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 14:36:33 2006
Return-Path: <java-user-return-22390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17984 invoked from network); 30 Jul 2006 14:36:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 14:36:32 -0000
Received: (qmail 82019 invoked by uid 500); 30 Jul 2006 14:36:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81988 invoked by uid 500); 30 Jul 2006 14:36:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81972 invoked by uid 99); 30 Jul 2006 14:36:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 07:36:26 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,HTML_SHORT_LENGTH,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of andyhugb@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 07:36:25 -0700
Received: by ug-out-1314.google.com with SMTP id y2so332680uge
        for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 07:36:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sluIV4UjC25Vp+0X0pS/7MKIC+hnGPVoFKDtENoS2PnMgh7jtsPQ4NCz3Oj0g61uqSLmaZF7+qnD2Wp91ClBDziNxMG4/QinvVdf9UFPuX6HNFPRMxFv9aoeQqQF79mq3tMC1dOxnoAh29BNwdiQ7fo0g6iSnXYEj5cUH1Jg7Os=
Received: by 10.66.224.3 with SMTP id w3mr1584954ugg;
        Sun, 30 Jul 2006 07:36:04 -0700 (PDT)
Received: by 10.67.88.5 with HTTP; Sun, 30 Jul 2006 07:36:03 -0700 (PDT)
Message-ID: <4f2c7c9b0607300736x4386e9d5x4b27125e1888678@mail.gmail.com>
Date: Sun, 30 Jul 2006 22:36:03 +0800
From: "hu andy" <andyhugb@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Consult some information about adding index while searching
In-Reply-To: <OF59402996.012E0716-ON882571B9.00517A6B-882571B9.00578F8C@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34362_33317406.1154270163934"
References: <4f2c7c9b0607280128x8bbeb0cg870bae95995640f0@mail.gmail.com>
	 <OF59402996.012E0716-ON882571B9.00517A6B-882571B9.00578F8C@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_34362_33317406.1154270163934
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you

------=_Part_34362_33317406.1154270163934--

From java-user-return-22391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 15:11:37 2006
Return-Path: <java-user-return-22391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21684 invoked from network); 30 Jul 2006 15:11:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 15:11:36 -0000
Received: (qmail 97464 invoked by uid 500); 30 Jul 2006 15:11:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97130 invoked by uid 500); 30 Jul 2006 15:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97119 invoked by uid 99); 30 Jul 2006 15:11:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 08:11:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 08:11:30 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.13.6/8.13.6) with ESMTP id k6UFB9p2020994
	for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 17:11:09 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Span Query NLE
Date: Sun, 30 Jul 2006 17:11:07 +0200
User-Agent: KMail/1.8.2
References: <1003434929.20060723213110@gmail.com> <271DE600-EABF-4690-B166-0FE1A789E9C0@ehatchersolutions.com> <115497556.20060724202604@gmail.com>
In-Reply-To: <115497556.20060724202604@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200607301711.07957.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 25 July 2006 03:26, Charlie wrote:
...
> 
> can "surround" be nested
> 
>     3w(4n(a?a AND bb?) AND cc+)

Yes, but iirc the "arguments" need to be separated by comma's:
3w( 4n( ... , ...) , ...)
instead of by AND.

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 17:37:55 2006
Return-Path: <java-user-return-22392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40300 invoked from network); 30 Jul 2006 17:37:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 17:37:55 -0000
Received: (qmail 14823 invoked by uid 500); 30 Jul 2006 17:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14789 invoked by uid 500); 30 Jul 2006 17:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14778 invoked by uid 99); 30 Jul 2006 17:37:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 10:37:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.175] (HELO smtpout.mac.com) (17.250.248.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 10:37:48 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout05/MantshX 4.0) with ESMTP id k6UHbSDE022811
	for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 10:37:28 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k6UHbPtU025101
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 10:37:27 -0700 (PDT)
Message-ID: <44CCEDE1.1010000@mac.com>
Date: Sun, 30 Jul 2006 13:35:29 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
References: <20060730034240.73901.qmail@web50315.mail.yahoo.com>
In-Reply-To: <20060730034240.73901.qmail@web50315.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This look better?

        // Check to see if index exists. 
        // If it doesn't, then set createIndex boolean to true
        boolean createIndex = false;
        if (!IndexReader.indexExists(indexDir)) {
            createIndex = true;
        }

        // let's set up the index writer
        wr = new IndexWriter(indexDir, aWrapper, createIndex);
        wr.setUseCompoundFile(false);



Otis Gospodnetic wrote:

>I think you can reuse them.  Fields should he handled/analyzed sequentially.  I reuse them for some stuff on Simpy.com.
>
>But you may want to clean up that try/catch.  Instead of catching the IOException, you may want to use !IndexReader.indexExists(...) in place of that boolean param to IndexWriter ctor.
>
>Otis
>
>----- Original Message ----
>From: Michael J. Prichard <michael_prichard@mac.com>
>To: java-user@lucene.apache.org
>Sent: Saturday, July 29, 2006 4:04:23 PM
>Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
>
>Hey Erik,
>
>Will do.  May I ask why?  Out of curiousity.
>
>Thanks,
>Michael
>
>Erik Hatcher wrote:
>
>  
>
>>I think you should use a new instance of each analyzer for each  
>>field, not reuse instances.  Other than that, your usage is fine.
>>
>>    Erik
>>
>>
>>On Jul 29, 2006, at 3:49 PM, Michael J. Prichard wrote:
>>
>>    
>>
>>>So I have the following code...
>>>
>>>// let's get our SynonymAnalyzer
>>>SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
>>>// let's get our EmailAnalyzer
>>>EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>>>
>>>// set up perfieldanalyzer
>>>PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new  
>>>StandardAnalyzer());           aWrapper.addAnalyzer("subject",  
>>>synAnalyzer);
>>>aWrapper.addAnalyzer("content", synAnalyzer);
>>>aWrapper.addAnalyzer("from", emailAnalyzer);
>>>aWrapper.addAnalyzer("to", emailAnalyzer);
>>>aWrapper.addAnalyzer("cc", emailAnalyzer);
>>>aWrapper.addAnalyzer("bcc", emailAnalyzer);
>>>
>>>// create the writer
>>>try {
>>>   wr = new IndexWriter(indexDir, aWrapper, false);
>>>   wr.setUseCompoundFile(false);
>>>} catch (IOException iox) {
>>>   // means it ain't there
>>>   wr = new IndexWriter(indexDir, aWrapper, true);
>>>   wr.setUseCompoundFile(false);
>>>}
>>>
>>>-----
>>>
>>>When I add a Document to the IndexWriter it does not seem to use  the 
>>>analyzer's I want it too.  Just uses StandardAnalyzer for  
>>>everythign!  Is this the correct way to use PerFieldAnalyzerWrapper?
>>>
>>>Thanks,
>>>Michael
>>>
>>>P.S.  I am using Lucene 2 libs.
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>      
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 30 17:40:24 2006
Return-Path: <java-user-return-22393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40936 invoked from network); 30 Jul 2006 17:40:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2006 17:40:24 -0000
Received: (qmail 18074 invoked by uid 500); 30 Jul 2006 17:40:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18048 invoked by uid 500); 30 Jul 2006 17:40:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18032 invoked by uid 99); 30 Jul 2006 17:40:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 10:40:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.171] (HELO smtpout.mac.com) (17.250.248.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 10:40:17 -0700
Received: from mac.com (smtpin03-en2 [10.13.10.148])
	by smtpout.mac.com (Xserve/8.12.11/smtpout01/MantshX 4.0) with ESMTP id k6UHdvxX018552
	for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 10:39:57 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin03/MantshX 4.0) with ESMTP id k6UHdrM6017671
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 30 Jul 2006 10:39:56 -0700 (PDT)
Message-ID: <44CCEE75.3070709@mac.com>
Date: Sun, 30 Jul 2006 13:37:57 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060730034354.80462.qmail@web50311.mail.yahoo.com>
In-Reply-To: <20060730034354.80462.qmail@web50311.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kewl :)

I updated the Filter....(for anyone interested).  Actually..if anyone 
wants I can zip it up and send it to them...let me know.

-------- EmailFilter

import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.Token;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Stack;

public class EmailFilter extends TokenFilter {
    public static final String TOKEN_TYPE_EMAIL = "EMAILPART";

    private Stack emailTokenStack;
   
    public EmailFilter(TokenStream in) {
        super(in);
        emailTokenStack = new Stack();
    }

    public Token next() throws IOException {

        if (emailTokenStack.size() > 0) {
            return (Token) emailTokenStack.pop();
        }   

        Token token = input.next();
        if (token == null) {
            return null;
        }

        addEmailPartsToStack(token);

        return token;
    }
   
    private void addEmailPartsToStack(Token token) throws IOException {
        String[] parts = getEmailParts(token.termText());

        if (parts == null) return;

        for (int i = 0; i < parts.length; i++) {
            Token synToken = new Token(parts[i],
                                 token.startOffset(),
                                 token.endOffset(),
                                 TOKEN_TYPE_EMAIL);
            synToken.setPositionIncrement(0);

            emailTokenStack.push(synToken);
        }
    }

    /*
     * Parses emails into its parts for tokenization.
     * For example john@foo.com would be broken into
     *
     *    [john@foo.com]
     *    [john]
     *    [foo.com]
     *    [foo]
     *    [com]
     *      
     */
    private String[] getEmailParts(String email) {

        // array for the parts
        String[] emailParts;
        // so i can add them before calling toArray
        ArrayList partsList = new ArrayList();

        /* let's do it */
        // split on the @
        String[] splitOnAmpersand = email.split("@");
        // add the username
        try {
            partsList.add(splitOnAmpersand[0]);
        } catch (ArrayIndexOutOfBoundsException ae) {
            // ignore
        }

        // add the full host name
        try {
            partsList.add(splitOnAmpersand[1]);
        } catch (ArrayIndexOutOfBoundsException ae) {
            // ignore
        }

        // split the host name into pieces
        if (splitOnAmpersand.length > 1) {
            String[] splitOnDot = splitOnAmpersand[1].split("\\.");
            // add all pieces from splitOnDot
            for (int i=0; i < splitOnDot.length; i++) {
                partsList.add(splitOnDot[i]);
            }

            /*
             *  if this is great than 2 then we need to add the domain 
name which
             *  should be the last two
             * 
             */
            if (splitOnDot.length > 2) {
                String domain = splitOnDot[splitOnDot.length-2] + "." + 
splitOnDot[splitOnDot.length-1];
                // add domain
                partsList.add(domain);
            }
        }
       
        return (String[]) partsList.toArray(new String[0]);       
    }

}

---- end EmailFilter




Otis Gospodnetic wrote:

>No, you're not missing anything. :)
>That JavaMail API is good for getting the whole email, but you then need to chop it up with your EmailAnalyzer, so you're doing the right thing.
>
>Otis
>
>----- Original Message ----
>From: Michael J. Prichard <michael_prichard@mac.com>
>To: java-user@lucene.apache.org
>Sent: Saturday, July 29, 2006 2:51:59 PM
>Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
>
>Hasan Diwan wrote:
>
>  
>
>>Michael:
>>
>>On 7/28/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
>>
>>    
>>
>>>Howdy....not sure if anyone else wants this but here is my first attempt
>>>at writing an analyzer for an email address...modifications, updates,
>>>fixes welcome.
>>>      
>>>
>>Why reinvent the wheel? See
>>http://java.sun.com/products/javamail/javadocs/javax/mail/internet/InternetAddress.html#parse(java.lang.String) 
>>
>>and use as:
>>
>>InternetAddress valid = InternetAddress.parse(string)[0]; // far
>>simpler than rewriting it
>>
>>    
>>
>i dont see where i can break an email address into simpler pieces for 
>tokens.  i use javamail when parsing the message and then pulling the 
>email using InternetAddress.  I don't see where I can break an email 
>address like john@foo.com into "john@foo.com", "john", "foo.com", "foo" 
>and "com" without splitting it.  Am I missing something?
>
>Thanks!
>Michael
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 02:11:55 2006
Return-Path: <java-user-return-22394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50124 invoked from network); 31 Jul 2006 02:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 02:11:55 -0000
Received: (qmail 42094 invoked by uid 500); 31 Jul 2006 02:11:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41083 invoked by uid 500); 31 Jul 2006 02:11:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41070 invoked by uid 99); 31 Jul 2006 02:11:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 19:11:49 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 30 Jul 2006 19:11:45 -0700
Received: (qmail 58518 invoked by uid 60001); 31 Jul 2006 02:11:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=iIfVsfjfY8iU4LFWYEhv9TDmdHwwuy32bP3J1oCt3y5toyA4GYN+79dGu4x/i730MHehyb/W33bT7kjwyBc0c/Vhoow+r3UVoPjMSoS7pkcg+PG9UTmjJ8FRQuo3Bd+bHOqrSRMABSHLp3rC4fjSHbt9aElKKNZV07s9swctSLI=  ;
Message-ID: <20060731021123.58516.qmail@web50307.mail.yahoo.com>
Received: from [72.229.167.99] by web50307.mail.yahoo.com via HTTP; Sun, 30 Jul 2006 19:11:23 PDT
Date: Sun, 30 Jul 2006 19:11:23 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
To: java-user@lucene.apache.org
In-Reply-To: <44CCEDE1.1010000@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Or simpler:
wr = new IndexWriter(indexDir, aWrapper, !IndexReader.indexExists(indexDir));

----- Original Message ----
From: Michael J. Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Sent: Sunday, July 30, 2006 1:35:29 PM
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....

This look better?

        // Check to see if index exists. 
        // If it doesn't, then set createIndex boolean to true
        boolean createIndex = false;
        if (!IndexReader.indexExists(indexDir)) {
            createIndex = true;
        }

        // let's set up the index writer
        wr = new IndexWriter(indexDir, aWrapper, createIndex);
        wr.setUseCompoundFile(false);



Otis Gospodnetic wrote:

>I think you can reuse them.  Fields should he handled/analyzed sequentially.  I reuse them for some stuff on Simpy.com.
>
>But you may want to clean up that try/catch.  Instead of catching the IOException, you may want to use !IndexReader.indexExists(...) in place of that boolean param to IndexWriter ctor.
>
>Otis
>
>----- Original Message ----
>From: Michael J. Prichard <michael_prichard@mac.com>
>To: java-user@lucene.apache.org
>Sent: Saturday, July 29, 2006 4:04:23 PM
>Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
>
>Hey Erik,
>
>Will do.  May I ask why?  Out of curiousity.
>
>Thanks,
>Michael
>
>Erik Hatcher wrote:
>
>  
>
>>I think you should use a new instance of each analyzer for each  
>>field, not reuse instances.  Other than that, your usage is fine.
>>
>>    Erik
>>
>>
>>On Jul 29, 2006, at 3:49 PM, Michael J. Prichard wrote:
>>
>>    
>>
>>>So I have the following code...
>>>
>>>// let's get our SynonymAnalyzer
>>>SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
>>>// let's get our EmailAnalyzer
>>>EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>>>
>>>// set up perfieldanalyzer
>>>PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new  
>>>StandardAnalyzer());           aWrapper.addAnalyzer("subject",  
>>>synAnalyzer);
>>>aWrapper.addAnalyzer("content", synAnalyzer);
>>>aWrapper.addAnalyzer("from", emailAnalyzer);
>>>aWrapper.addAnalyzer("to", emailAnalyzer);
>>>aWrapper.addAnalyzer("cc", emailAnalyzer);
>>>aWrapper.addAnalyzer("bcc", emailAnalyzer);
>>>
>>>// create the writer
>>>try {
>>>   wr = new IndexWriter(indexDir, aWrapper, false);
>>>   wr.setUseCompoundFile(false);
>>>} catch (IOException iox) {
>>>   // means it ain't there
>>>   wr = new IndexWriter(indexDir, aWrapper, true);
>>>   wr.setUseCompoundFile(false);
>>>}
>>>
>>>-----
>>>
>>>When I add a Document to the IndexWriter it does not seem to use  the 
>>>analyzer's I want it too.  Just uses StandardAnalyzer for  
>>>everythign!  Is this the correct way to use PerFieldAnalyzerWrapper?
>>>
>>>Thanks,
>>>Michael
>>>
>>>P.S.  I am using Lucene 2 libs.
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>      
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 02:13:16 2006
Return-Path: <java-user-return-22395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50236 invoked from network); 31 Jul 2006 02:13:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 02:13:16 -0000
Received: (qmail 43365 invoked by uid 500); 31 Jul 2006 02:13:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42729 invoked by uid 500); 31 Jul 2006 02:13:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42718 invoked by uid 99); 31 Jul 2006 02:13:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 19:13:11 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 30 Jul 2006 19:13:09 -0700
Received: (qmail 11213 invoked by uid 60001); 31 Jul 2006 02:12:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=RmcK2668cmkxx98igJxkV5AnEIrZ1DSGCvv5olRLPWRehoLK5FuWF8sgcv8Zm13w3VRoJPh8rwCctuIXa/Q8P/2TiauAL+IICCCGovofl5ORLCCM2e6VBTTmag6E854NnXk7ID3oDWqs82JDJ/Jw+m3m3pBQCa8Vn9gjmsdAl+k=  ;
Message-ID: <20060731021247.11211.qmail@web50315.mail.yahoo.com>
Received: from [72.229.167.99] by web50315.mail.yahoo.com via HTTP; Sun, 30 Jul 2006 19:12:47 PDT
Date: Sun, 30 Jul 2006 19:12:47 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
To: java-user@lucene.apache.org
In-Reply-To: <44CCEE75.3070709@mac.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A good place for that in JIRA.  could you put it there?  We have a bunch of analyzers in Lucene's contrib, so if you are okay with putting Apache license on top of the source code, we can include it there.  Same for EmailAnalyzer.

Otis


----- Original Message ----
From: Michael J. Prichard <michael_prichard@mac.com>
To: java-user@lucene.apache.org
Sent: Sunday, July 30, 2006 1:37:57 PM
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)

Kewl :)

I updated the Filter....(for anyone interested).  Actually..if anyone 
wants I can zip it up and send it to them...let me know.

-------- EmailFilter

import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.Token;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Stack;

public class EmailFilter extends TokenFilter {
    public static final String TOKEN_TYPE_EMAIL = "EMAILPART";

    private Stack emailTokenStack;
   
    public EmailFilter(TokenStream in) {
        super(in);
        emailTokenStack = new Stack();
    }

    public Token next() throws IOException {

        if (emailTokenStack.size() > 0) {
            return (Token) emailTokenStack.pop();
        }   

        Token token = input.next();
        if (token == null) {
            return null;
        }

        addEmailPartsToStack(token);

        return token;
    }
   
    private void addEmailPartsToStack(Token token) throws IOException {
        String[] parts = getEmailParts(token.termText());

        if (parts == null) return;

        for (int i = 0; i < parts.length; i++) {
            Token synToken = new Token(parts[i],
                                 token.startOffset(),
                                 token.endOffset(),
                                 TOKEN_TYPE_EMAIL);
            synToken.setPositionIncrement(0);

            emailTokenStack.push(synToken);
        }
    }

    /*
     * Parses emails into its parts for tokenization.
     * For example john@foo.com would be broken into
     *
     *    [john@foo.com]
     *    [john]
     *    [foo.com]
     *    [foo]
     *    [com]
     *      
     */
    private String[] getEmailParts(String email) {

        // array for the parts
        String[] emailParts;
        // so i can add them before calling toArray
        ArrayList partsList = new ArrayList();

        /* let's do it */
        // split on the @
        String[] splitOnAmpersand = email.split("@");
        // add the username
        try {
            partsList.add(splitOnAmpersand[0]);
        } catch (ArrayIndexOutOfBoundsException ae) {
            // ignore
        }

        // add the full host name
        try {
            partsList.add(splitOnAmpersand[1]);
        } catch (ArrayIndexOutOfBoundsException ae) {
            // ignore
        }

        // split the host name into pieces
        if (splitOnAmpersand.length > 1) {
            String[] splitOnDot = splitOnAmpersand[1].split("\\.");
            // add all pieces from splitOnDot
            for (int i=0; i < splitOnDot.length; i++) {
                partsList.add(splitOnDot[i]);
            }

            /*
             *  if this is great than 2 then we need to add the domain 
name which
             *  should be the last two
             * 
             */
            if (splitOnDot.length > 2) {
                String domain = splitOnDot[splitOnDot.length-2] + "." + 
splitOnDot[splitOnDot.length-1];
                // add domain
                partsList.add(domain);
            }
        }
       
        return (String[]) partsList.toArray(new String[0]);       
    }

}

---- end EmailFilter




Otis Gospodnetic wrote:

>No, you're not missing anything. :)
>That JavaMail API is good for getting the whole email, but you then need to chop it up with your EmailAnalyzer, so you're doing the right thing.
>
>Otis
>
>----- Original Message ----
>From: Michael J. Prichard <michael_prichard@mac.com>
>To: java-user@lucene.apache.org
>Sent: Saturday, July 29, 2006 2:51:59 PM
>Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
>
>Hasan Diwan wrote:
>
>  
>
>>Michael:
>>
>>On 7/28/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
>>
>>    
>>
>>>Howdy....not sure if anyone else wants this but here is my first attempt
>>>at writing an analyzer for an email address...modifications, updates,
>>>fixes welcome.
>>>      
>>>
>>Why reinvent the wheel? See
>>http://java.sun.com/products/javamail/javadocs/javax/mail/internet/InternetAddress.html#parse(java.lang.String) 
>>
>>and use as:
>>
>>InternetAddress valid = InternetAddress.parse(string)[0]; // far
>>simpler than rewriting it
>>
>>    
>>
>i dont see where i can break an email address into simpler pieces for 
>tokens.  i use javamail when parsing the message and then pulling the 
>email using InternetAddress.  I don't see where I can break an email 
>address like john@foo.com into "john@foo.com", "john", "foo.com", "foo" 
>and "com" without splitting it.  Am I missing something?
>
>Thanks!
>Michael
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 06:13:21 2006
Return-Path: <java-user-return-22396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89519 invoked from network); 31 Jul 2006 06:13:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 06:13:21 -0000
Received: (qmail 16535 invoked by uid 500); 31 Jul 2006 06:13:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15915 invoked by uid 500); 31 Jul 2006 06:13:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15904 invoked by uid 99); 31 Jul 2006 06:13:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 23:13:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Jul 2006 23:13:13 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 0976E18878; Mon, 31 Jul 2006 06:12:52 +0000 (GMT)
Received: from [192.168.2.205] (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id C6A2F1886D
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 06:12:50 +0000 (GMT)
Subject: Re: Sorting
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: java-user@lucene.apache.org
In-Reply-To: <1154205724.4881.265.camel@localhost>
References: <5552408.post@talk.nabble.com>
	 <200607291239.32695.mail@jasoncalabrese.com>
	 <1154205724.4881.265.camel@localhost>
Content-Type: text/plain
Organization: Seseit Ltd
Date: Mon, 31 Jul 2006 07:12:37 +0100
Message-Id: <1154326358.5192.18.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=failed 
	version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The limit is much less than Integer.MAX_VALUE (2,147,483,647), unless
you have a VM which can run in more than 1G of heap. 1G limits you to a
theoretical number of 256M (268,435,456) documents with 4 bytes per
array element. In practise it will be something a less, because there
are other things which need heap too.

Were going to need to maintain a set sort indexes for documents in a
large index too, and I'm interested in suggestions for the best/easiest
way to maintain non-RAM-based (or not entirely RAM-based) sort index
which is external to Lucene. Would using MySQL for sort indexing be "a
sledgehammer to crack a nut", I wonder? I've not really thought through
the RAMifications (sorry!) of this approach. I wonder if anyone else
here has attempted to integrate an external sort using a database?

On Sat, 2006-07-29 at 22:42 +0200, karl wettin wrote:
> On Sat, 2006-07-29 at 12:39 -0700, Jason Calabrese wrote:
> > One fast way to make an alphabetic sort very fast is to presort your
> > docs before adding them to the index.  If you do this you can then
> > just sort by index order.  We are using this for a large index (1
> > million+ docs) and it works very good, and seems even slightly faster
> > than relevance sorting.
> > 
> > Using this approach may create some maintainance issues since you
> > can't add a new doc to the index at a specified position.  Instead you
> > will need to re-index everything. 
> 
> Instead of above I would probably choose an int[index size] where each
> position in the array represents the global order of that document. It's
> much easier to re-order that than re-indexing the whole corpus every
> time you want to insert something.
> 
> It limits your corpus to 2 billion items (Integer.MAX_VALUE). And it
> will consume 32 bits of RAM per document.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 08:03:11 2006
Return-Path: <java-user-return-22397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21485 invoked from network); 31 Jul 2006 08:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 08:03:11 -0000
Received: (qmail 36840 invoked by uid 500); 31 Jul 2006 08:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36422 invoked by uid 500); 31 Jul 2006 08:03:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36411 invoked by uid 99); 31 Jul 2006 08:03:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 01:03:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 01:03:03 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A0F0B5B777; Mon, 31 Jul 2006 01:02:29 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9ADDF7F403
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 01:02:29 -0700 (PDT)
Date: Mon, 31 Jul 2006 01:02:29 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Scoring a document (count?)
In-Reply-To: <E9BF7E0FD95D1143B399B129908A58FF01582804@datachange01.dataconversions.biz>
Message-ID: <Pine.LNX.4.58.0607310055560.1277@hal.rescomp.berkeley.edu>
References: <E9BF7E0FD95D1143B399B129908A58FF01582804@datachange01.dataconversions.biz>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


it would certainly be possible to get a score that was a simple count of
the number of matching clauses of a boolean query -- probably just with a
modified Similarity (no coord, 1/0 tf, no idf, no norms) but you *might*
need a slightly modified TermScorer to do that.

In general though, i think you are solving your problem the wrong way ...
don't just put the movie Ids in the movie-star docs ... also have one
indexed/stored field per category of movie (ie: "horror" would be an
indexed
field) that would only be set on actors which have appeared in a movie of
that type -- the value of the field would be the number of movies they
have appeared in of that type.

now you do your main query, with a simple filter on the "horror" field to
ensure it has a value and you've got the stored value of the "horror"
field to tell you how many movies they've been in.




: Date: Thu, 27 Jul 2006 12:02:46 -0400
: From: Russell M. Allen <Russell.Allen@aebn.net>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Scoring a document (count?)
:
: I am curious about the potential use of document scoring as a means to
: extract additional data from an index.  Specifically, I would like the
: score to be a count of how many times a particular field matched a set
: of terms.
:
: For example, I am indexing movie-stars (Each document is a movie-star).
: A movie-star has a number of fields, such as name, movies they have been
: in, etc.  I want to produce an 'index' of stars by name and show how
: many movies, which match a filter, that they have appeared in.
:
: In natural language my query might be:
: 	"List all stars who have appeared in a 'horror' movie, where
: last name starts with A, and tell me how many horror movies they were
: in."
:
: My search will look something like this:
: 	"+lastName:A* +movie:(1 7 21 58 92)"	//where movie is a
: previously computed list of 'horror' movie ids
:
: If my index contained the following documents:
:     doc1 = lastName:Anna   movie:{3 10}
:     doc2 = lastName:Aba    movie:{1 10 12}
:     doc3 = lastName:Addd   movie:{3 21 55 92}
:     doc4 = lastName:Baaa   movie:{7 56}
:
: I would like to get back:
:     doc2, score of 1	//score of 1 because only movie 1 matched
:     doc3, score of 2	//score of 2 because movies 21 and 92 matched
:
:
:
: Currently, we perform an initial query against our Star index to
: retrieve a list of stars.  Then we perform N queries against a separate
: movie index to count the number of movies that match our sub filter
: 'horror'.  This is obviously very inefficient, and as I've shown above,
: the information (count) is available during the primary query.
:
: Thoughts?
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 08:06:33 2006
Return-Path: <java-user-return-22398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22166 invoked from network); 31 Jul 2006 08:06:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 08:06:33 -0000
Received: (qmail 40366 invoked by uid 500); 31 Jul 2006 08:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40338 invoked by uid 500); 31 Jul 2006 08:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40327 invoked by uid 99); 31 Jul 2006 08:06:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 01:06:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 01:06:26 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 27E585B772; Mon, 31 Jul 2006 01:06:06 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0C33E7F403
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 01:06:06 -0700 (PDT)
Date: Mon, 31 Jul 2006 01:06:06 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: java.lang.IllegalAccessError: tried to access method
 org.apache.lucene.search.HitDoc.<init>
In-Reply-To: <f377591c0607300731t77cdbcc4y1f176a1d3488fdf@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0607310104330.1277@hal.rescomp.berkeley.edu>
References: <f377591c0607300731t77cdbcc4y1f176a1d3488fdf@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


What JVM are you using?

Can you post a small sample program (or better yet: jUnit test) that
causes this problem ?

: Date: Sun, 30 Jul 2006 07:31:55 -0700
: From: Alan Ezust <alan.ezust@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: java.lang.IllegalAccessError: tried to access method
:     org.apache.lucene.search.HitDoc.<init>
:
: I'm having difficulty getting Lucene to work for me, and it keeps
: coming back to this HitDoc class.
:
: At the moment ,whenever I call the IndexBuilder.search method,
: this what I get:
:
: [error] WorkThread: java.lang.IllegalAccessError: tried to access
: method org.apache.lucene.search.HitDoc.<init>(FI)V from class
: org.apache.lucene.search.Hits
: [error] WorkThread:  at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:94)
: [error] WorkThread:  at org.apache.lucene.search.Hits.<init>(Hits.java:53)
: [error] WorkThread:  at
: org.apache.lucene.search.Searcher.search(Searcher.java:44)
: [error] WorkThread:  at
: org.apache.lucene.search.Searcher.search(Searcher.java:36)
: [error] WorkThread:  at
: infoviewer.lucene.IndexBuilder.search(IndexBuilder.java:118)
: [error] WorkThread:  at
: infoviewer.lucene.SearchPanel$ActionHandler$1.run(SearchPanel.java:190)
: [error] WorkThread:  at
: org.gjt.sp.util.WorkThread.doRequest(WorkThread.java:194)
: [error] WorkThread:  at
: org.gjt.sp.util.WorkThread.doRequests(WorkThread.java:161)
:
:
: I tried moving class HitDoc out of Hits.java and into its own
: HitDoc.java file, and making the class and ctor public, but I still
: get this error... So now I'm really confused.
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 08:34:09 2006
Return-Path: <java-user-return-22399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35700 invoked from network); 31 Jul 2006 08:34:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 08:34:08 -0000
Received: (qmail 82705 invoked by uid 500); 31 Jul 2006 08:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82633 invoked by uid 500); 31 Jul 2006 08:34:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82622 invoked by uid 99); 31 Jul 2006 08:34:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 01:34:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 01:34:00 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8FBE35B778; Mon, 31 Jul 2006 01:33:40 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 84EF57F403
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 01:33:40 -0700 (PDT)
Date: Mon, 31 Jul 2006 01:33:40 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Sorting
In-Reply-To: <1154326358.5192.18.camel@localhost>
Message-ID: <Pine.LNX.4.58.0607310108510.1277@hal.rescomp.berkeley.edu>
References: <5552408.post@talk.nabble.com>  <200607291239.32695.mail@jasoncalabrese.com>
  <1154205724.4881.265.camel@localhost> <1154326358.5192.18.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


1) I didn't know there were any JVMs that limited the heap size to 1GB ...
a 32bit address space would impose a hard limit of 4GB, and I've heard
that Windows limits process to 2GB, but I don't know of any JVMs that have
1GB limits.

If you really need to deal with indexes big enough for that to make a
differnce, you probably want to look into 64bit hardware.

2) ...

: Were going to need to maintain a set sort indexes for documents in a
: large index too, and I'm interested in suggestions for the best/easiest
: way to maintain non-RAM-based (or not entirely RAM-based) sort index
: which is external to Lucene. Would using MySQL for sort indexing be "a
: sledgehammer to crack a nut", I wonder? I've not really thought through
: the RAMifications (sorry!) of this approach. I wonder if anyone else
: here has attempted to integrate an external sort using a database?

The analogy that comes to mind for me is not "a sledgehammer to crack a
nut" ... more along the lines of "holding a laptop in both hands, and
using the corner of it to type letters on the keyboard of another
computer."  Using a relational DB in conjuntion with Lucene just to do
some sorting on disk seems like a really gratuitious and unneccessary use
of a relational DB.

The only reason Field sorting in Lucene uses a lot of RAM is because of
hte FieldCache, which provides an easy way to lookup the sort value for a
given doc durring hit collection in order to rank them in a priority queue
-- namely an array indexed by docId.  You could just as easily store that
data on disk, you just need an API that lets you lookup things by numeric
id.  A Berkeley DB "map" comes to mind ... or even random acess files
where the value is stored in offsets based on the docId (would have some
trickines if you wanted String sorting but would work great for numerics).
This would eliminate the high RAM usage, but would be a lot slower because
of the disk access (especially on the first search when the "FieldCache"
was being built)


Alternately, if you assume your results sets are ging to be "small",
you could collect all of hte docIds into a set and then iteratre over a
complete pass of a TermEnum/TermDocs for your field looking up the sort
values for each match -- in esence doing the same work as when building
the FieldCache on each search, but only for hte docs that match that
search.  Really low memory usage, no additional disk usage -- just much
slower.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 09:57:03 2006
Return-Path: <java-user-return-22400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56270 invoked from network); 31 Jul 2006 09:57:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 09:57:02 -0000
Received: (qmail 80279 invoked by uid 500); 31 Jul 2006 09:56:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80251 invoked by uid 500); 31 Jul 2006 09:56:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80240 invoked by uid 99); 31 Jul 2006 09:56:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 02:56:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 02:56:53 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id k6V9uan28013
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 04:56:36 -0500
Message-ID: <44CDD358.1040207@getopt.org>
Date: Mon, 31 Jul 2006 11:54:32 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Thunderbird 1.5.0.5 (Windows/20060719)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Sorting
References: <5552408.post@talk.nabble.com>  <200607291239.32695.mail@jasoncalabrese.com>  <1154205724.4881.265.camel@localhost> <1154326358.5192.18.camel@localhost> <Pine.LNX.4.58.0607310108510.1277@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0607310108510.1277@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:
> 1) I didn't know there were any JVMs that limited the heap size to 1GB ...
> a 32bit address space would impose a hard limit of 4GB, and I've heard
> that Windows limits process to 2GB, but I don't know of any JVMs that have
> 1GB limits.
>   

I believe all Win32 JVM-s have a limit of ~1.3GB (~1.9GB if using 
rebase.exe), which quite often can't be reached anyway due to memory 
fragmentation. Read here for a somewhat funny analysis:

*http://www.oreillynet.com/digitalmedia/blog/2005/01/what_is_the_largest_text_file.html*

*nix OS-es on 32-bit platforms indeed have 4GB addressing space, but at 
least 1GB of this space is reserved for kernel use ... If I'm not 
mistaken most 2.6.x Linux distros run now with 1GB/3GB split between 
kernel/user space, and 2.4.x kernels ran with 2GB/2GB split.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 10:12:05 2006
Return-Path: <java-user-return-22401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60166 invoked from network); 31 Jul 2006 10:12:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 10:12:05 -0000
Received: (qmail 96689 invoked by uid 500); 31 Jul 2006 10:11:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96662 invoked by uid 500); 31 Jul 2006 10:11:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96651 invoked by uid 99); 31 Jul 2006 10:11:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 03:11:56 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 81.228.8.164 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [81.228.8.164] (HELO pne-smtpout2-sn2.hy.skanova.net) (81.228.8.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 03:11:55 -0700
Received: from [192.168.0.102] (83.249.40.19) by pne-smtpout2-sn2.hy.skanova.net (7.2.075)
        id 44A2F19F00634209 for java-user@lucene.apache.org; Mon, 31 Jul 2006 12:11:34 +0200
Subject: Re: Sorting
From: karl wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <44CDD358.1040207@getopt.org>
References: <5552408.post@talk.nabble.com>
	 <200607291239.32695.mail@jasoncalabrese.com>
	 <1154205724.4881.265.camel@localhost> <1154326358.5192.18.camel@localhost>
	 <Pine.LNX.4.58.0607310108510.1277@hal.rescomp.berkeley.edu>
	 <44CDD358.1040207@getopt.org>
Content-Type: text/plain
Organization: snigel heavy industries
Date: Mon, 31 Jul 2006 12:11:31 +0200
Message-Id: <1154340691.5704.8.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.6.1 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2006-07-31 at 11:54 +0200, Andrzej Bialecki wrote:
> Chris Hostetter wrote:
> > 1) I didn't know there were any JVMs that limited the heap size to 1GB ...
> > a 32bit address space would impose a hard limit of 4GB, and I've heard
> > that Windows limits process to 2GB, but I don't know of any JVMs that have
> > 1GB limits.
> >   
> 
> I believe all Win32 JVM-s have a limit of ~1.3GB (~1.9GB if using 
> rebase.exe), which quite often can't be reached anyway due to memory 
> fragmentation. Read here for a somewhat funny analysis:
> 
> *http://www.oreillynet.com/digitalmedia/blog/2005/01/what_is_the_largest_text_file.html*
> 
> *nix OS-es on 32-bit platforms indeed have 4GB addressing space, but at 
> least 1GB of this space is reserved for kernel use ... If I'm not 
> mistaken most 2.6.x Linux distros run now with 1GB/3GB split between 
> kernel/user space, and 2.4.x kernels ran with 2GB/2GB split.

I love my 64bit Solaris and -XX:+AggressiveHeap.

:D


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 11:26:06 2006
Return-Path: <java-user-return-22402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94420 invoked from network); 31 Jul 2006 11:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 11:26:06 -0000
Received: (qmail 24448 invoked by uid 500); 31 Jul 2006 11:26:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24417 invoked by uid 500); 31 Jul 2006 11:25:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24406 invoked by uid 99); 31 Jul 2006 11:25:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 04:25:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.97.205.201] (HELO mail.seseit.com) (209.97.205.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 04:25:57 -0700
Received: by mail.seseit.com (Postfix, from userid 65534)
	id 8CF7D18878; Mon, 31 Jul 2006 11:25:35 +0000 (GMT)
Received: from max (spc1-lewi6-0-0-cust524.asfd.broadband.ntl.com [81.103.210.13])
	by mail.seseit.com (Postfix) with ESMTP id B831A1886D
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 11:25:33 +0000 (GMT)
From: "Rob Staveley (Tom)" <rstaveley@seseit.com>
To: <java-user@lucene.apache.org>
Subject: RE: Sorting
Date: Mon, 31 Jul 2006 12:25:49 +0100
MIME-Version: 1.0
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <Pine.LNX.4.58.0607310108510.1277@hal.rescomp.berkeley.edu>
thread-index: Aca0fBSH1jsczF4eRKqszEyfhbmawgAAoE+A
Content-Type: multipart/signed;
	protocol="application/x-pkcs7-signature";
	micalg=SHA1;
	boundary="----=_NextPart_000_0039_01C6B49C.747FACA0"
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2869
Message-Id: <20060731112533.B831A1886D@mail.seseit.com>
X-Spam-Checker-Version: SpamAssassin 3.0.3 (2005-04-27) on mini.seseit.net
X-Spam-Level: X
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=1.7 required=5.0 tests=MSGID_FROM_MTA_ID 
	autolearn=no version=3.0.3
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0039_01C6B49C.747FACA0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Ref 1: I was just about to show you a link at Sun but I realise that it was
my misread! OK, so the maximum heap is 2G on a 32-bit Linux platform, which
doubles the numbers, and yes indeed 64 bits seems like a good idea, if
having sort indexes in RAM is a good use of resources. But there must be a
better alternative to using 4 bytes of RAM per document per sort field.

Ref 2: "holding a laptop in both hands, and using the corner of it to type
letters on the keyboard of another computer."... I like that analogy... I
may even find a use for my laptop now :-) 

I take your point that Berkley DB would be much less clumsy, but an
application that's already using a relational database for other purposes
might as well use that relational database, no?

I'm not really with you on the random access file, Chris. Here's where I am
up to with my [mis-]understanding...

I want to sort on 2 terms. Happily these can be ints (the first is an INT
corresponding to a 10 minute timestamp "YYMMDDHHI" and the second INT is a
hash of a string, used to group similar documents together within those 10
minute timestamps). When I initially warm up the FieldCache (first search
after opening the Searcher), I start by generating two random access files
with int values at offsets corresponding to document IDs for each of these;
the first file would have ints corresponding to the timestamp and the second
would have integers corresponding to the hash. I'd then need to generate a
third file which is equivalent to an array dimensioned by document ID, with
document IDs in compound sort order??

In a big index, it will take a while to walk through all of the documents to
generate the first two random access files and the sort process required to
generate the sorted file is going to be hard work. 

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org] 
Sent: 31 July 2006 09:34
To: java-user@lucene.apache.org
Subject: Re: Sorting


1) I didn't know there were any JVMs that limited the heap size to 1GB ...
a 32bit address space would impose a hard limit of 4GB, and I've heard that
Windows limits process to 2GB, but I don't know of any JVMs that have 1GB
limits.

If you really need to deal with indexes big enough for that to make a
differnce, you probably want to look into 64bit hardware.

2) ...

: Were going to need to maintain a set sort indexes for documents in a
: large index too, and I'm interested in suggestions for the best/easiest
: way to maintain non-RAM-based (or not entirely RAM-based) sort index
: which is external to Lucene. Would using MySQL for sort indexing be "a
: sledgehammer to crack a nut", I wonder? I've not really thought through
: the RAMifications (sorry!) of this approach. I wonder if anyone else
: here has attempted to integrate an external sort using a database?

The analogy that comes to mind for me is not "a sledgehammer to crack a nut"
... more along the lines of "holding a laptop in both hands, and using the
corner of it to type letters on the keyboard of another computer."  Using a
relational DB in conjuntion with Lucene just to do some sorting on disk
seems like a really gratuitious and unneccessary use of a relational DB.

The only reason Field sorting in Lucene uses a lot of RAM is because of hte
FieldCache, which provides an easy way to lookup the sort value for a given
doc durring hit collection in order to rank them in a priority queue
-- namely an array indexed by docId.  You could just as easily store that
data on disk, you just need an API that lets you lookup things by numeric
id.  A Berkeley DB "map" comes to mind ... or even random acess files where
the value is stored in offsets based on the docId (would have some trickines
if you wanted String sorting but would work great for numerics).
This would eliminate the high RAM usage, but would be a lot slower because
of the disk access (especially on the first search when the "FieldCache"
was being built)


Alternately, if you assume your results sets are ging to be "small", you
could collect all of hte docIds into a set and then iteratre over a complete
pass of a TermEnum/TermDocs for your field looking up the sort values for
each match -- in esence doing the same work as when building the FieldCache
on each search, but only for hte docs that match that search.  Really low
memory usage, no additional disk usage -- just much slower.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------=_NextPart_000_0039_01C6B49C.747FACA0
Content-Type: application/x-pkcs7-signature;
	name="smime.p7s"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
	filename="smime.p7s"

MIAGCSqGSIb3DQEHAqCAMIACAQExCzAJBgUrDgMCGgUAMIAGCSqGSIb3DQEHAQAAoIIKaDCCAj0w
ggGmAhEAzbp/VvDf5LxU/iKss3KqVTANBgkqhkiG9w0BAQIFADBfMQswCQYDVQQGEwJVUzEXMBUG
A1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVibGljIFByaW1hcnkgQ2Vy
dGlmaWNhdGlvbiBBdXRob3JpdHkwHhcNOTYwMTI5MDAwMDAwWhcNMjgwODAxMjM1OTU5WjBfMQsw
CQYDVQQGEwJVUzEXMBUGA1UEChMOVmVyaVNpZ24sIEluYy4xNzA1BgNVBAsTLkNsYXNzIDEgUHVi
bGljIFByaW1hcnkgQ2VydGlmaWNhdGlvbiBBdXRob3JpdHkwgZ8wDQYJKoZIhvcNAQEBBQADgY0A
MIGJAoGBAOUZv22jVmEtmUhx9mfeuY3rt56GgAqRDvo4Ja9GiILlc6igmyRdDR/MZW4MsNBWhBiH
mgabEKFz37RYOWtuwfYV1aioP6oSBo0xrH+wNNePNGeICc0UEeJORVZpH3gCgNrcR5EpuzbJY1zF
4Ncth3uhtzKwezC6Ki8xqu6jZ9rbAgMBAAEwDQYJKoZIhvcNAQECBQADgYEATD+4i8Zo3+5DMw5d
6abLB4RNejP/khv0Nq3YlSI2aBFsfELM85wuxAc/FLAPT/+Qknb54rxK6Y/NoIAK98Up8YIiXbix
3YEjo3slFUYweRb46gVLlH8dwhzI47f0EEA8E8NfH1PoSOSGtHuhNbB7Jbq4046rPzidADQAmPPR
cZQwggNiMIICy6ADAgECAhAL2gsXwT+JjqsJdHq0zi4zMA0GCSqGSIb3DQEBAgUAMF8xCzAJBgNV
BAYTAlVTMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjE3MDUGA1UECxMuQ2xhc3MgMSBQdWJsaWMg
UHJpbWFyeSBDZXJ0aWZpY2F0aW9uIEF1dGhvcml0eTAeFw05ODA1MTIwMDAwMDBaFw0wODA1MTIy
MzU5NTlaMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMIGfMA0GCSqGSIb3DQEB
AQUAA4GNADCBiQKBgQC7WkSKBBa7Vf0DeootlE8VeDa4DUqyb5xUv7zodyqdufBou5XZMUFweoFL
uUgTVi3HCOGEQqvAopKrRFyqQvCCDgLpL/vCO7u+yScKXbawNkIztW5UiE+HSr8Z2vkV6A+Hthzj
zMaajn9qJJLj/OBluqexfu/J2zdqyErICQbkmQIDAQABo4GwMIGtMA8GA1UdEwQIMAYBAf8CAQAw
RwYDVR0gBEAwPjA8BgtghkgBhvhFAQcBATAtMCsGCCsGAQUFBwIBFh93d3cudmVyaXNpZ24uY29t
L3JlcG9zaXRvcnkvUlBBMDEGA1UdHwQqMCgwJqAkoCKGIGh0dHA6Ly9jcmwudmVyaXNpZ24uY29t
L3BjYTEuY3JsMAsGA1UdDwQEAwIBBjARBglghkgBhvhCAQEEBAMCAQYwDQYJKoZIhvcNAQECBQAD
gYEAAn2eb0VLOKC43ulTZCG85Ewrjx7+kkCs2Ao5aqEyISwHm6tZ/tJiGn1VOLA3c9z0B2ZjYr3h
U3BSh+eo2FLpWy2q4d7PrDFU1IsZyNgjqO8EKzJ9LBgcyHyJqC538kTRZQpNdLXu0xuSc3QuiTs1
E3LnQDGa07LEq+dWvovj+xUwggS9MIIEJqADAgECAhB1uB0L6Y5EVCCaaM0jkP2tMA0GCSqGSIb3
DQEBBQUAMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1
c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNv
cnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJ
bmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkMB4XDTA1MTAwNDAwMDAw
MFoXDTA2MTAxODIzNTk1OVowggEZMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMW
VmVyaVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0
b3J5L1JQQSBJbmNvcnAuIGJ5IFJlZi4sTElBQi5MVEQoYyk5ODEeMBwGA1UECxMVUGVyc29uYSBO
b3QgVmFsaWRhdGVkMTMwMQYDVQQLEypEaWdpdGFsIElEIENsYXNzIDEgLSBOZXRzY2FwZSBGdWxs
IFNlcnZpY2UxGzAZBgNVBAMUElJvYiBTdGF2ZWxleSAoVG9tKTEjMCEGCSqGSIb3DQEJARYUcnN0
YXZlbGV5QHNlc2VpdC5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCm4C+s/DP/
NIW0DrHFueJPsZAZxTzi8Aw2bXOUQbHRDNlSO7nWoDPlkTs5RQl0tsJUDlB5TubjJGWKGBdRePXq
ueK/8yj23cBTzKRTU2gNG6cmmc/f/HwHcuc4MCpW9+okvFCPeaFNzuBPPvegjewz3BL3ewfjeOKr
ly//fr/8JBVW19EgK070C2COZgegYNQ5NeV4Y4oDjqETADQDDnYuTe7EMBuSMysmOSgkCfVzEG4h
8N+1ImW6hWe+bH6Rify+q9eZAQint7sSFGZv3ZbBgmE654FKrvE7O8BOOP807/yaJUBlpDkF/X8G
UwvYNwhH/zbHN1BSCD3tstcSIUGHAgMBAAGjgcswgcgwCQYDVR0TBAIwADBEBgNVHSAEPTA7MDkG
C2CGSAGG+EUBBxcDMCowKAYIKwYBBQUHAgEWHGh0dHBzOi8vd3d3LnZlcmlzaWduLmNvbS9ycGEw
CwYDVR0PBAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMEBggrBgEFBQcDAjAUBgpghkgBhvhFAQYH
BAYWBE5vbmUwMwYDVR0fBCwwKjAooCagJIYiaHR0cDovL2NybC52ZXJpc2lnbi5jb20vY2xhc3Mx
LmNybDANBgkqhkiG9w0BAQUFAAOBgQCtsGmCX3v78Qn3I5DAo9mJDenolmgmBjmlaSJr1e5nSBLv
CEflpx3FaZuirDQNJ/sTxtUCJhlv/kTLuczeJkSDj1ALhqeYH1GX9T5zFY+3GCQqTJcTIarHSqZC
PQzwv3dwZCRE0fuELb6oobi4kGA5PXbu3+P7upHSBAmN81O00TGCBL8wggS7AgEBMIHhMIHMMRcw
FQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVyaVNpZ24gVHJ1c3QgTmV0d29yazFG
MEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5L1JQQSBJbmNvcnAuIEJ5IFJlZi4s
TElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xhc3MgMSBDQSBJbmRpdmlkdWFsIFN1
YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L6Y5EVCCaaM0jkP2tMAkGBSsOAwIa
BQCgggKyMBgGCSqGSIb3DQEJAzELBgkqhkiG9w0BBwEwHAYJKoZIhvcNAQkFMQ8XDTA2MDczMTEx
MjU0OFowIwYJKoZIhvcNAQkEMRYEFGlrxKJe6Qwx1Zj2AnMJJ3ilVJPCMGcGCSqGSIb3DQEJDzFa
MFgwCgYIKoZIhvcNAwcwDgYIKoZIhvcNAwICAgCAMA0GCCqGSIb3DQMCAgFAMAcGBSsOAwIHMA0G
CCqGSIb3DQMCAgEoMAcGBSsOAwIaMAoGCCqGSIb3DQIFMIHyBgkrBgEEAYI3EAQxgeQwgeEwgcwx
FzAVBgNVBAoTDlZlcmlTaWduLCBJbmMuMR8wHQYDVQQLExZWZXJpU2lnbiBUcnVzdCBOZXR3b3Jr
MUYwRAYDVQQLEz13d3cudmVyaXNpZ24uY29tL3JlcG9zaXRvcnkvUlBBIEluY29ycC4gQnkgUmVm
LixMSUFCLkxURChjKTk4MUgwRgYDVQQDEz9WZXJpU2lnbiBDbGFzcyAxIENBIEluZGl2aWR1YWwg
U3Vic2NyaWJlci1QZXJzb25hIE5vdCBWYWxpZGF0ZWQCEHW4HQvpjkRUIJpozSOQ/a0wgfQGCyqG
SIb3DQEJEAILMYHkoIHhMIHMMRcwFQYDVQQKEw5WZXJpU2lnbiwgSW5jLjEfMB0GA1UECxMWVmVy
aVNpZ24gVHJ1c3QgTmV0d29yazFGMEQGA1UECxM9d3d3LnZlcmlzaWduLmNvbS9yZXBvc2l0b3J5
L1JQQSBJbmNvcnAuIEJ5IFJlZi4sTElBQi5MVEQoYyk5ODFIMEYGA1UEAxM/VmVyaVNpZ24gQ2xh
c3MgMSBDQSBJbmRpdmlkdWFsIFN1YnNjcmliZXItUGVyc29uYSBOb3QgVmFsaWRhdGVkAhB1uB0L
6Y5EVCCaaM0jkP2tMA0GCSqGSIb3DQEBAQUABIIBADRJT97iLFiC/UrFWgtNum/OhKWwkh3dkMr+
iDA8UNrHf/in3wgbcGBcUTZdjhMetKc3dIvt83O9eqcgYPZL6SGKqjZxvHe6bEsZIJptXEBod0gW
IddkkLmagmW1uZYf46TV5EKYz43XOgSsOE5lHhVA+f3zRyYXRHbEHlhpi7C2Wwps0of6JdvlL4SK
UjWDXf8ffMx8FUe5kZZT6CpPrj7EDEwMNshztxcZxpwIFPk86cTH0p/tikFFArTFtjcKxg1rs6Xx
UqPu3OVcfZuNJqUQHCPr21B9lBu0zcKs1Q10b6+JRVW8lyVvBRaJyxN1Usf6huumrJ/MecWHDf8F
5j4AAAAAAAA=

------=_NextPart_000_0039_01C6B49C.747FACA0--


From java-user-return-22403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 12:23:25 2006
Return-Path: <java-user-return-22403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12936 invoked from network); 31 Jul 2006 12:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 12:23:25 -0000
Received: (qmail 4585 invoked by uid 500); 31 Jul 2006 12:23:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4556 invoked by uid 500); 31 Jul 2006 12:23:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4545 invoked by uid 99); 31 Jul 2006 12:23:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 05:23:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 05:23:18 -0700
Received: by ug-out-1314.google.com with SMTP id y2so627840uge
        for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 05:22:57 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=ikOEsozumo4Bg0A0tRMVFiLWot/LkUJ+/LRUu0ODgX/W4SIsddQH8HbbRifaiT5XTg6VZXAsM+AYSaT1BwWuObIcXjN0AhgRIw+X1tXu5zXUyGtWg/+64/WtV3/5QFDJ1+xc2zTdMgyQ/ncXl21LYUbmj7rEpQGjbM16RgOexT8=
Received: by 10.67.100.17 with SMTP id c17mr2415623ugm;
        Mon, 31 Jul 2006 05:22:57 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Mon, 31 Jul 2006 05:22:57 -0700 (PDT)
Message-ID: <f18c9dde0607310522g6aee4da3v974d1275fbadfd71@mail.gmail.com>
Date: Mon, 31 Jul 2006 14:22:57 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Index empty fields
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I do have a question about fields with empty content should be added
to the document / index or not. I do have a index schema, which
defines all field a document can have. if one of the real documents
has no content for a certain field. should that field be added to the
index or not.
Would it make any difference at all?

regards Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 13:24:31 2006
Return-Path: <java-user-return-22404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43116 invoked from network); 31 Jul 2006 13:24:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 13:24:31 -0000
Received: (qmail 7797 invoked by uid 500); 31 Jul 2006 13:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7695 invoked by uid 500); 31 Jul 2006 13:24:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7683 invoked by uid 99); 31 Jul 2006 13:24:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:24:23 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO mail.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:24:21 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
Subject: RE: About search performance
Date: Mon, 31 Jul 2006 09:24:11 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF01582DB8@datachange01.dataconversions.biz>
In-Reply-To: <c2174c890607281846w3187877cq6ef610cff0c1d7ae@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: About search performance
Thread-Index: AcaysPdTtdqPMBQdTz66kKfRp30BrAB8R4+w
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

WW91IHNob3VsZCBidWlsZCB5b3VyIG93biBwZXJmb3JtYW5jZSB0ZXN0IGNhc2VzIHRvIHNlZSB3
aGF0IHdvcmtzIGZvciB5b3VyIGRhdGEuICBUaGF0IGJlaW5nIHNhaWQsIGhlcmUgYXJlIHNvbWUg
bnVtYmVycyBmcm9tIGEgc2ltaWxhciB0ZXN0IEkgcmFuOg0KDQpJIGRpZCB0aGUgZm9sbG93aW5n
Og0KMSkgcnVuIGEgc2luZ2xlIHRlcm0gcXVlcnkgd2hpY2ggcmVzdWx0ZWQgaW4gYWJvdXQgaGFs
ZiBvZiB0aGUgdG90YWwgc2V0IG9mIGRvY3VtZW50cyBiZWluZyByZXR1cm5lZC4gICh+MzYsMDAw
KQ0KMikgYnVpbHQgYSBCb29sZWFuIHF1ZXJ5ICh0cmVlIG9mIHRoZW0gYWN0dWFsbHkpIHdpdGgg
YSBCb29sZWFuIGNsYXVzZSBmb3IgZWFjaCBvZiB0aGUgMzYsMDAwIGRvY3VtZW50cy4NCjMpIHJ1
biB0aGlzIG5ldyBzZWNvbmRhcnkgcXVlcnkgdG8gZ2V0ICdmaW5hbCcgcmVzdWx0cy4NCg0KVGhl
IHRpbWUgaXQgdG9vayB0byBydW4gZWFjaCBzdGVwIHdhczoNCjEpIDMxIG1zDQoyKSAxNjEwIG1z
DQozKSAxMDQ3IG1zDQoNCldpdGhvdXQgdGhlIGdpYW50IEJvb2xlYW4gcXVlcnkgYXR0YWNoZWQg
dG8gdGhlIGZpbmFsIHF1ZXJ5LCBzdGVtIHRocmVlIHRha2VzIGFib3V0IDE1IG1zLiAgU28uLi4g
WWVzLCBhIGxhcmdlIHF1ZXJ5IHN0cnVjdHVyZSB3aWxsIGluY3JlYXNlIHF1ZXJ5IGV4ZWN1dGlv
biB0aW1lLiAgSW4gcmVzZWFyY2hpbmcgaG93IHRvIHJlZHVjZSB0aGlzLCBJIGZvdW5kIGZpbHRl
cnMgdG8gYmUgdGhlIGZhc3Rlc3QuICBVc2luZyBmaWx0ZXJzOg0KDQpTdGVwcyByZXF1aXJlZDoN
CjEpIHJ1biB0aGUgaW5pdGlhbCBzaW5nbGUgdGVybSBxdWVyeS4NCjIpIEJ1aWxkIGEgcXVlcnkg
b2JqZWN0IG1vZGVsIGJhc2VkIG9uIHJlc3VsdHMgZnJvbSBzdGVwIDEuDQozKSBCdWlsZCBiaXRz
ZXQgZmlsdGVyIHVzaW5nIHF1ZXJ5IGZyb20gc3RlcCAyLiAgQ0FDSEUgVEhFIFJFU1VMVFMhDQo0
KSBFeGVjdXRlIG1haW4gcXVlcnksIHdpdGggY2FjaGVkIGJpdHNldCBmaWx0ZXIuDQoNCkV4ZWN1
dGlvbiB0aW1lOg0KMSkgMTYgbXMNCjIpIDE2MDkgbXMNCjMpIDk2OSBtcw0KNCkgMTUgbXMNCg0K
QXMgeW91IGNhbiBzZWUsIHRoZSB0b3RhbCB0aW1lIGlzIGxvbmdlciwgYnV0LCBpbiBvdXIgc3Bl
Y2lmaWMgY2FzZSwgdGhlIGluaXRpYWwgcXVlcnkgcmFyZWx5IGNoYW5nZXMuICBUaHVzLCBieSBj
YWNoaW5nIHRoZSBmaWx0ZXIgcmVzdWx0cywgdGhlIHZhc3QgbWFqb3JpdHkgb2YgcXVlcmllcyBh
cmUgZG9uZSBpbiAxNSBtcy4gIFRoaXMgb25seSB3b3JrcyBiZWNhdXNlIHdlIGFyZSBub3QgdXBk
YXRpbmcgb3VyIGluZGV4ZXMgdGhhdCBvZnRlbiwgYW5kIHRoZSBpbml0aWFsIHF1ZXJ5IGlzIGZh
aXJseSBzdGF0aWMgdG9vLg0KDQpUaGlzIGlzIGEgY2xhc3NpYyB0cmFkZS4gIEkgYW0gdHJhZGlu
ZyBzcGFjZSBmb3IgdGltZS4gIEVhY2ggY2FjaGVkIGZpbHRlciBjb3N0cyBhcm91bmQgMmsgKHJl
ZmxlY3Rpb24gb2YgaW5kZXggc2l6ZSkgb2YgbWVtb3J5IHRvIGtlZXAgYXJvdW5kLiAgSW4gdHVy
biwgdGhhdCBzYXZlcyBtZSBhIGxpdHRsZSBvdmVyIGEgc2Vjb25kIGZyb20gdGhlIGZpbmFsIHF1
ZXJ5Lg0KDQpJIGhvcGUgdGhlc2UgbnVtYmVyIGhlbHAsIGFuZCBwZXJoYXBzIHNwYXJrIGFuIGlk
ZWEuDQoNCi1SdXNzZWxsDQoNCi0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiB6aG9u
Z3lpIHl1YW4gW21haWx0bzp5enkxOTgwQGdtYWlsLmNvbV0gDQpTZW50OiBGcmlkYXksIEp1bHkg
MjgsIDIwMDYgOTo0NyBQTQ0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KU3ViamVj
dDogQWJvdXQgc2VhcmNoIHBlcmZvcm1hbmNlDQoNCkhp77yMSG93IGFib3V0IGltcGxlbWVudCBt
dWx0aS1rZXkgc2VhcmNoIHVzZSBsdWNlbmUsIGZvciBleGFtcGxlIHVzZSBib29sZWFuIHNlYXJj
aCBleGNlZWQgMTAwMCBjbGF1c2VzLGl0IHdpbGwgYWZmZWN0IHRoZSBwZXJmb3JtYW5jZSBncmVh
dGx5LiBJZiB1c2UgZmlsdGVyIG9yIGN1c3RvbSBzb3J0ZXIgdG8gc2VsZWN0IHRoZSByZXN1bHQs
IGJlY2F1c2UgdGhlIHJlc3VsdCBpcyBleHRyZW1lbHkgbGFyZ2UgaW4gYW1vdW50LHNvIHRoZSBw
ZXJmb3JtYW5jZSBpcyBsb3dlci4NClBsZWFzZSBnaXZlIG1lIHNvbWUgYWR2aWNlLFRoYW5rcy4N
Cg==


From java-user-return-22405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 13:27:22 2006
Return-Path: <java-user-return-22405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43923 invoked from network); 31 Jul 2006 13:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 13:27:22 -0000
Received: (qmail 11922 invoked by uid 500); 31 Jul 2006 13:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11749 invoked by uid 500); 31 Jul 2006 13:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11738 invoked by uid 99); 31 Jul 2006 13:27:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:27:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.176] (HELO smtpout.mac.com) (17.250.248.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:27:15 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id k6VDQs3X021760
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 06:26:54 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id k6VDQq4H020401
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 06:26:53 -0700 (PDT)
Message-ID: <44CE04A8.3050604@mac.com>
Date: Mon, 31 Jul 2006 09:24:56 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
References: <20060731021123.58516.qmail@web50307.mail.yahoo.com>
In-Reply-To: <20060731021123.58516.qmail@web50307.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Awesome!  Thanks!

Otis Gospodnetic wrote:

>Or simpler:
>wr = new IndexWriter(indexDir, aWrapper, !IndexReader.indexExists(indexDir));
>
>----- Original Message ----
>From: Michael J. Prichard <michael_prichard@mac.com>
>To: java-user@lucene.apache.org
>Sent: Sunday, July 30, 2006 1:35:29 PM
>Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
>
>This look better?
>
>        // Check to see if index exists. 
>        // If it doesn't, then set createIndex boolean to true
>        boolean createIndex = false;
>        if (!IndexReader.indexExists(indexDir)) {
>            createIndex = true;
>        }
>
>        // let's set up the index writer
>        wr = new IndexWriter(indexDir, aWrapper, createIndex);
>        wr.setUseCompoundFile(false);
>
>
>
>Otis Gospodnetic wrote:
>
>  
>
>>I think you can reuse them.  Fields should he handled/analyzed sequentially.  I reuse them for some stuff on Simpy.com.
>>
>>But you may want to clean up that try/catch.  Instead of catching the IOException, you may want to use !IndexReader.indexExists(...) in place of that boolean param to IndexWriter ctor.
>>
>>Otis
>>
>>----- Original Message ----
>>From: Michael J. Prichard <michael_prichard@mac.com>
>>To: java-user@lucene.apache.org
>>Sent: Saturday, July 29, 2006 4:04:23 PM
>>Subject: Re: PerFieldAnalyzerWrapper use?  Analyzer's not being used as expected....
>>
>>Hey Erik,
>>
>>Will do.  May I ask why?  Out of curiousity.
>>
>>Thanks,
>>Michael
>>
>>Erik Hatcher wrote:
>>
>> 
>>
>>    
>>
>>>I think you should use a new instance of each analyzer for each  
>>>field, not reuse instances.  Other than that, your usage is fine.
>>>
>>>   Erik
>>>
>>>
>>>On Jul 29, 2006, at 3:49 PM, Michael J. Prichard wrote:
>>>
>>>   
>>>
>>>      
>>>
>>>>So I have the following code...
>>>>
>>>>// let's get our SynonymAnalyzer
>>>>SynonymAnalyzer synAnalyzer = getSynonymAnalyzer();
>>>>// let's get our EmailAnalyzer
>>>>EmailAnalyzer emailAnalyzer = getEmailAnalyzer();
>>>>
>>>>// set up perfieldanalyzer
>>>>PerFieldAnalyzerWrapper aWrapper = new PerFieldAnalyzerWrapper(new  
>>>>StandardAnalyzer());           aWrapper.addAnalyzer("subject",  
>>>>synAnalyzer);
>>>>aWrapper.addAnalyzer("content", synAnalyzer);
>>>>aWrapper.addAnalyzer("from", emailAnalyzer);
>>>>aWrapper.addAnalyzer("to", emailAnalyzer);
>>>>aWrapper.addAnalyzer("cc", emailAnalyzer);
>>>>aWrapper.addAnalyzer("bcc", emailAnalyzer);
>>>>
>>>>// create the writer
>>>>try {
>>>>  wr = new IndexWriter(indexDir, aWrapper, false);
>>>>  wr.setUseCompoundFile(false);
>>>>} catch (IOException iox) {
>>>>  // means it ain't there
>>>>  wr = new IndexWriter(indexDir, aWrapper, true);
>>>>  wr.setUseCompoundFile(false);
>>>>}
>>>>
>>>>-----
>>>>
>>>>When I add a Document to the IndexWriter it does not seem to use  the 
>>>>analyzer's I want it too.  Just uses StandardAnalyzer for  
>>>>everythign!  Is this the correct way to use PerFieldAnalyzerWrapper?
>>>>
>>>>Thanks,
>>>>Michael
>>>>
>>>>P.S.  I am using Lucene 2 libs.
>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>     
>>>>
>>>>        
>>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>   
>>>
>>>      
>>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 13:29:58 2006
Return-Path: <java-user-return-22406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44324 invoked from network); 31 Jul 2006 13:29:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 13:29:58 -0000
Received: (qmail 15257 invoked by uid 500); 31 Jul 2006 13:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14251 invoked by uid 500); 31 Jul 2006 13:29:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14240 invoked by uid 99); 31 Jul 2006 13:29:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:29:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.174] (HELO smtpout.mac.com) (17.250.248.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:29:51 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout04/MantshX 4.0) with ESMTP id k6VDTUal018764
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 06:29:31 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id k6VDTRAf022283
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 06:29:29 -0700 (PDT)
Message-ID: <44CE0543.6050302@mac.com>
Date: Mon, 31 Jul 2006 09:27:31 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060731021247.11211.qmail@web50315.mail.yahoo.com>
In-Reply-To: <20060731021247.11211.qmail@web50315.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Otis,

Sure I would love to!  Can you ping me at michael.prichard@mac.com and 
let me know what I need to do?   Do I just post it to JIRA?

Thanks,
Michael

Otis Gospodnetic wrote:

>A good place for that in JIRA.  could you put it there?  We have a bunch of analyzers in Lucene's contrib, so if you are okay with putting Apache license on top of the source code, we can include it there.  Same for EmailAnalyzer.
>
>Otis
>
>
>----- Original Message ----
>From: Michael J. Prichard <michael_prichard@mac.com>
>To: java-user@lucene.apache.org
>Sent: Sunday, July 30, 2006 1:37:57 PM
>Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
>
>Kewl :)
>
>I updated the Filter....(for anyone interested).  Actually..if anyone 
>wants I can zip it up and send it to them...let me know.
>
>-------- EmailFilter
>
>import org.apache.lucene.analysis.TokenStream;
>import org.apache.lucene.analysis.TokenFilter;
>import org.apache.lucene.analysis.Token;
>import java.io.IOException;
>import java.util.ArrayList;
>import java.util.Stack;
>
>public class EmailFilter extends TokenFilter {
>    public static final String TOKEN_TYPE_EMAIL = "EMAILPART";
>
>    private Stack emailTokenStack;
>   
>    public EmailFilter(TokenStream in) {
>        super(in);
>        emailTokenStack = new Stack();
>    }
>
>    public Token next() throws IOException {
>
>        if (emailTokenStack.size() > 0) {
>            return (Token) emailTokenStack.pop();
>        }   
>
>        Token token = input.next();
>        if (token == null) {
>            return null;
>        }
>
>        addEmailPartsToStack(token);
>
>        return token;
>    }
>   
>    private void addEmailPartsToStack(Token token) throws IOException {
>        String[] parts = getEmailParts(token.termText());
>
>        if (parts == null) return;
>
>        for (int i = 0; i < parts.length; i++) {
>            Token synToken = new Token(parts[i],
>                                 token.startOffset(),
>                                 token.endOffset(),
>                                 TOKEN_TYPE_EMAIL);
>            synToken.setPositionIncrement(0);
>
>            emailTokenStack.push(synToken);
>        }
>    }
>
>    /*
>     * Parses emails into its parts for tokenization.
>     * For example john@foo.com would be broken into
>     *
>     *    [john@foo.com]
>     *    [john]
>     *    [foo.com]
>     *    [foo]
>     *    [com]
>     *      
>     */
>    private String[] getEmailParts(String email) {
>
>        // array for the parts
>        String[] emailParts;
>        // so i can add them before calling toArray
>        ArrayList partsList = new ArrayList();
>
>        /* let's do it */
>        // split on the @
>        String[] splitOnAmpersand = email.split("@");
>        // add the username
>        try {
>            partsList.add(splitOnAmpersand[0]);
>        } catch (ArrayIndexOutOfBoundsException ae) {
>            // ignore
>        }
>
>        // add the full host name
>        try {
>            partsList.add(splitOnAmpersand[1]);
>        } catch (ArrayIndexOutOfBoundsException ae) {
>            // ignore
>        }
>
>        // split the host name into pieces
>        if (splitOnAmpersand.length > 1) {
>            String[] splitOnDot = splitOnAmpersand[1].split("\\.");
>            // add all pieces from splitOnDot
>            for (int i=0; i < splitOnDot.length; i++) {
>                partsList.add(splitOnDot[i]);
>            }
>
>            /*
>             *  if this is great than 2 then we need to add the domain 
>name which
>             *  should be the last two
>             * 
>             */
>            if (splitOnDot.length > 2) {
>                String domain = splitOnDot[splitOnDot.length-2] + "." + 
>splitOnDot[splitOnDot.length-1];
>                // add domain
>                partsList.add(domain);
>            }
>        }
>       
>        return (String[]) partsList.toArray(new String[0]);       
>    }
>
>}
>
>---- end EmailFilter
>
>
>
>
>Otis Gospodnetic wrote:
>
>  
>
>>No, you're not missing anything. :)
>>That JavaMail API is good for getting the whole email, but you then need to chop it up with your EmailAnalyzer, so you're doing the right thing.
>>
>>Otis
>>
>>----- Original Message ----
>>From: Michael J. Prichard <michael_prichard@mac.com>
>>To: java-user@lucene.apache.org
>>Sent: Saturday, July 29, 2006 2:51:59 PM
>>Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
>>
>>Hasan Diwan wrote:
>>
>> 
>>
>>    
>>
>>>Michael:
>>>
>>>On 7/28/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
>>>
>>>   
>>>
>>>      
>>>
>>>>Howdy....not sure if anyone else wants this but here is my first attempt
>>>>at writing an analyzer for an email address...modifications, updates,
>>>>fixes welcome.
>>>>     
>>>>
>>>>        
>>>>
>>>Why reinvent the wheel? See
>>>http://java.sun.com/products/javamail/javadocs/javax/mail/internet/InternetAddress.html#parse(java.lang.String) 
>>>
>>>and use as:
>>>
>>>InternetAddress valid = InternetAddress.parse(string)[0]; // far
>>>simpler than rewriting it
>>>
>>>   
>>>
>>>      
>>>
>>i dont see where i can break an email address into simpler pieces for 
>>tokens.  i use javamail when parsing the message and then pulling the 
>>email using InternetAddress.  I don't see where I can break an email 
>>address like john@foo.com into "john@foo.com", "john", "foo.com", "foo" 
>>and "com" without splitting it.  Am I missing something?
>>
>>Thanks!
>>Michael
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>> 
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 13:34:31 2006
Return-Path: <java-user-return-22407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45949 invoked from network); 31 Jul 2006 13:34:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 13:34:30 -0000
Received: (qmail 22613 invoked by uid 500); 31 Jul 2006 13:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22513 invoked by uid 500); 31 Jul 2006 13:34:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22502 invoked by uid 99); 31 Jul 2006 13:34:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:34:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.176] (HELO smtpout.mac.com) (17.250.248.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:34:20 -0700
Received: from mac.com (smtpin04-en2 [10.13.10.149])
	by smtpout.mac.com (Xserve/8.12.11/smtpout06/MantshX 4.0) with ESMTP id k6VDXxRn026563
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 06:34:00 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin04/MantshX 4.0) with ESMTP id k6VDXtGZ010470
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 06:33:58 -0700 (PDT)
Message-ID: <44CE064C.5090107@mac.com>
Date: Mon, 31 Jul 2006 09:31:56 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Filters or BooleanQuery
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is more of a design question.  I have a ton of email that is 
indexed.  I need to search based on a date range so I use a RangeQuery 
added to a BooleanQuery to search.  This works.  Now I need to include 
another clause that will narrow the result even more.  AND on top of 
that I will need some security applied to the search that will not show 
email to those that it does not belong to.

I could easily go through and add query's but I have a feeling I should 
use a filter somewhere.  What are the best practices when deciding what 
to do?

Thanks,
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 13:40:38 2006
Return-Path: <java-user-return-22408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47076 invoked from network); 31 Jul 2006 13:40:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 13:40:37 -0000
Received: (qmail 33335 invoked by uid 500); 31 Jul 2006 13:40:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33029 invoked by uid 500); 31 Jul 2006 13:40:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33015 invoked by uid 99); 31 Jul 2006 13:40:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:40:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:40:27 -0700
Received: from [10.10.150.49] ([10.10.150.49])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k6VDe8jL025708
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 08:40:09 -0500
Message-ID: <44CE0822.6040601@wolfram.com>
Date: Mon, 31 Jul 2006 09:39:46 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060730034354.80462.qmail@web50311.mail.yahoo.com> <44CCEE75.3070709@mac.com>
In-Reply-To: <44CCEE75.3070709@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would like to use the email analyzer code. I am thinking of using it 
along with java mail api. I have two different projects. In one I have 
to parse the emails sent and extract the subject and the  email address. 
The other project I have to parse and index it in lucene for later 
search and retrieval.

thanks,
suba suresh.

Michael J. Prichard wrote:
> Kewl :)
> 
> I updated the Filter....(for anyone interested).  Actually..if anyone 
> wants I can zip it up and send it to them...let me know.
> 
> -------- EmailFilter
> 
> import org.apache.lucene.analysis.TokenStream;
> import org.apache.lucene.analysis.TokenFilter;
> import org.apache.lucene.analysis.Token;
> import java.io.IOException;
> import java.util.ArrayList;
> import java.util.Stack;
> 
> public class EmailFilter extends TokenFilter {
>    public static final String TOKEN_TYPE_EMAIL = "EMAILPART";
> 
>    private Stack emailTokenStack;
>      public EmailFilter(TokenStream in) {
>        super(in);
>        emailTokenStack = new Stack();
>    }
> 
>    public Token next() throws IOException {
> 
>        if (emailTokenStack.size() > 0) {
>            return (Token) emailTokenStack.pop();
>        }  
>        Token token = input.next();
>        if (token == null) {
>            return null;
>        }
> 
>        addEmailPartsToStack(token);
> 
>        return token;
>    }
>      private void addEmailPartsToStack(Token token) throws IOException {
>        String[] parts = getEmailParts(token.termText());
> 
>        if (parts == null) return;
> 
>        for (int i = 0; i < parts.length; i++) {
>            Token synToken = new Token(parts[i],
>                                 token.startOffset(),
>                                 token.endOffset(),
>                                 TOKEN_TYPE_EMAIL);
>            synToken.setPositionIncrement(0);
> 
>            emailTokenStack.push(synToken);
>        }
>    }
> 
>    /*
>     * Parses emails into its parts for tokenization.
>     * For example john@foo.com would be broken into
>     *
>     *    [john@foo.com]
>     *    [john]
>     *    [foo.com]
>     *    [foo]
>     *    [com]
>     *          */
>    private String[] getEmailParts(String email) {
> 
>        // array for the parts
>        String[] emailParts;
>        // so i can add them before calling toArray
>        ArrayList partsList = new ArrayList();
> 
>        /* let's do it */
>        // split on the @
>        String[] splitOnAmpersand = email.split("@");
>        // add the username
>        try {
>            partsList.add(splitOnAmpersand[0]);
>        } catch (ArrayIndexOutOfBoundsException ae) {
>            // ignore
>        }
> 
>        // add the full host name
>        try {
>            partsList.add(splitOnAmpersand[1]);
>        } catch (ArrayIndexOutOfBoundsException ae) {
>            // ignore
>        }
> 
>        // split the host name into pieces
>        if (splitOnAmpersand.length > 1) {
>            String[] splitOnDot = splitOnAmpersand[1].split("\\.");
>            // add all pieces from splitOnDot
>            for (int i=0; i < splitOnDot.length; i++) {
>                partsList.add(splitOnDot[i]);
>            }
> 
>            /*
>             *  if this is great than 2 then we need to add the domain 
> name which
>             *  should be the last two
>             *             */
>            if (splitOnDot.length > 2) {
>                String domain = splitOnDot[splitOnDot.length-2] + "." + 
> splitOnDot[splitOnDot.length-1];
>                // add domain
>                partsList.add(domain);
>            }
>        }
>              return (String[]) partsList.toArray(new String[0]);          }
> 
> }
> 
> ---- end EmailFilter
> 
> 
> 
> 
> Otis Gospodnetic wrote:
> 
>> No, you're not missing anything. :)
>> That JavaMail API is good for getting the whole email, but you then 
>> need to chop it up with your EmailAnalyzer, so you're doing the right 
>> thing.
>>
>> Otis
>>
>> ----- Original Message ----
>> From: Michael J. Prichard <michael_prichard@mac.com>
>> To: java-user@lucene.apache.org
>> Sent: Saturday, July 29, 2006 2:51:59 PM
>> Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
>>
>> Hasan Diwan wrote:
>>
>>  
>>
>>> Michael:
>>>
>>> On 7/28/06, Michael J. Prichard <michael_prichard@mac.com> wrote:
>>>
>>>   
>>>
>>>> Howdy....not sure if anyone else wants this but here is my first 
>>>> attempt
>>>> at writing an analyzer for an email address...modifications, updates,
>>>> fixes welcome.
>>>>     
>>>
>>> Why reinvent the wheel? See
>>> http://java.sun.com/products/javamail/javadocs/javax/mail/internet/InternetAddress.html#parse(java.lang.String) 
>>>
>>> and use as:
>>>
>>> InternetAddress valid = InternetAddress.parse(string)[0]; // far
>>> simpler than rewriting it
>>>
>>>   
>>
>> i dont see where i can break an email address into simpler pieces for 
>> tokens.  i use javamail when parsing the message and then pulling the 
>> email using InternetAddress.  I don't see where I can break an email 
>> address like john@foo.com into "john@foo.com", "john", "foo.com", 
>> "foo" and "com" without splitting it.  Am I missing something?
>>
>> Thanks!
>> Michael
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>  
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 13:43:21 2006
Return-Path: <java-user-return-22409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47448 invoked from network); 31 Jul 2006 13:43:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 13:43:21 -0000
Received: (qmail 38869 invoked by uid 500); 31 Jul 2006 13:43:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38738 invoked by uid 500); 31 Jul 2006 13:43:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38727 invoked by uid 99); 31 Jul 2006 13:43:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:43:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [140.177.205.37] (HELO webmail.wolfram.com) (140.177.205.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:43:14 -0700
Received: from [10.10.150.49] ([10.10.150.49])
	(authenticated bits=0)
	by webmail.wolfram.com (8.13.7/8.13.4) with ESMTP id k6VDgtg2025740
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 08:42:56 -0500
Message-ID: <44CE08C9.7010809@wolfram.com>
Date: Mon, 31 Jul 2006 09:42:33 -0400
From: Suba Suresh <subas@wolfram.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: email libraries
References: <44C79E79.3000704@wolfram.com> <44CCACB4.8030607@scalix.com>
In-Reply-To: <44CCACB4.8030607@scalix.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for all the response. I am going to investigate java mail api 
along with Michael's "Email Analyzer" code that was posted in this group.

thanks,
suba suresh.

John Haxby wrote:
> Andrzej Bialecki wrote:
> 
>> Just for the record - I've been using javamail POP and IMAP providers 
>> in the past, and they were prone to hanging with some servers, and 
>> resource intensive. I've been also using Outlook (proper, not Outlook 
>> Express - this is AFAIK impossible to work with) via a Java-COM bridge 
>> such as Jawin or JNIWrapper plus Redemption . This also tends to be 
>> rather unstable, and requires a lot of fine-tuning ...
> 
> We use javamail a *lot* with the Scalix IMAP server (the web access part 
> uses IMAP underneath).   We have had performance problems with the way 
> that javamail works, although for just scanning a message store to index 
> messages it's OK.   We have tuned the web access code somewhat to make 
> it behave better but we've also re-engineered the IMAP server somewhat, 
> partly with javamail in mind, and performance and resource usage on the 
> server are now somewhat under control.
> 
>> So, be prepared to suffer quite a bit. ;)
> 
> If you're doing complicated things, yes, but if it's simple access for 
> the purposes of indexing then you probably don't need to worry too much.
> 
> jch
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 13:51:03 2006
Return-Path: <java-user-return-22410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50142 invoked from network); 31 Jul 2006 13:51:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 13:51:03 -0000
Received: (qmail 62575 invoked by uid 500); 31 Jul 2006 13:50:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62553 invoked by uid 500); 31 Jul 2006 13:50:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62542 invoked by uid 99); 31 Jul 2006 13:50:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:50:56 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO mail.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 06:50:55 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Scoring a document (count?)
Date: Mon, 31 Jul 2006 09:50:45 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF01582DFE@datachange01.dataconversions.biz>
In-Reply-To: <Pine.LNX.4.58.0607310055560.1277@hal.rescomp.berkeley.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring a document (count?)
Thread-Index: Aca0d8ouASrKwWDMTsGO340AWgnkWQALoAPw
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you for the reply.

I am certainly open to different ways of organizing / indexing our
documents.  However, the example I provided was simplified for the sake
of the discussion.  In truth, what I was calling a category may be an
arbitrary set of movie ids (determined by a previous query).  This
precludes 'burning in' the associations as independently indexed fields.

I'd like to take a whack at the scorer approach.  I've read through most
of the Lucene web site and have reviewed the source code quite a bit
lately.  However, I admit I am still a little lost in how lucene works
under the covers.  Are there any design documents available to give me a
head start?  Is the Lucene in Action book the only source of
information?  Does it discuss how Lucene works under the covers?

Thanks!
-Russell

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Monday, July 31, 2006 4:02 AM
To: Lucene Users
Subject: Re: Scoring a document (count?)


it would certainly be possible to get a score that was a simple count of
the number of matching clauses of a boolean query -- probably just with
a modified Similarity (no coord, 1/0 tf, no idf, no norms) but you
*might* need a slightly modified TermScorer to do that.

In general though, i think you are solving your problem the wrong way
...
don't just put the movie Ids in the movie-star docs ... also have one
indexed/stored field per category of movie (ie: "horror" would be an
indexed
field) that would only be set on actors which have appeared in a movie
of that type -- the value of the field would be the number of movies
they have appeared in of that type.

now you do your main query, with a simple filter on the "horror" field
to ensure it has a value and you've got the stored value of the "horror"
field to tell you how many movies they've been in.




: Date: Thu, 27 Jul 2006 12:02:46 -0400
: From: Russell M. Allen <Russell.Allen@aebn.net>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Scoring a document (count?)
:
: I am curious about the potential use of document scoring as a means to
: extract additional data from an index.  Specifically, I would like the
: score to be a count of how many times a particular field matched a set
: of terms.
:
: For example, I am indexing movie-stars (Each document is a
movie-star).
: A movie-star has a number of fields, such as name, movies they have
been
: in, etc.  I want to produce an 'index' of stars by name and show how
: many movies, which match a filter, that they have appeared in.
:
: In natural language my query might be:
: 	"List all stars who have appeared in a 'horror' movie, where
: last name starts with A, and tell me how many horror movies they were
: in."
:
: My search will look something like this:
: 	"+lastName:A* +movie:(1 7 21 58 92)"	//where movie is a
: previously computed list of 'horror' movie ids
:
: If my index contained the following documents:
:     doc1 =3D lastName:Anna   movie:{3 10}
:     doc2 =3D lastName:Aba    movie:{1 10 12}
:     doc3 =3D lastName:Addd   movie:{3 21 55 92}
:     doc4 =3D lastName:Baaa   movie:{7 56}
:
: I would like to get back:
:     doc2, score of 1	//score of 1 because only movie 1 matched
:     doc3, score of 2	//score of 2 because movies 21 and 92 matched
:
:
:
: Currently, we perform an initial query against our Star index to
: retrieve a list of stars.  Then we perform N queries against a
separate
: movie index to count the number of movies that match our sub filter
: 'horror'.  This is obviously very inefficient, and as I've shown
above,
: the information (count) is available during the primary query.
:
: Thoughts?
:
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 14:36:10 2006
Return-Path: <java-user-return-22411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73707 invoked from network); 31 Jul 2006 14:36:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 14:36:09 -0000
Received: (qmail 18098 invoked by uid 500); 31 Jul 2006 14:36:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18074 invoked by uid 500); 31 Jul 2006 14:36:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18063 invoked by uid 99); 31 Jul 2006 14:36:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 07:36:01 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Russell.Allen@aebn.net designates 216.54.226.11 as permitted sender)
Received: from [216.54.226.11] (HELO mail.dataconversions.biz) (216.54.226.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 07:36:00 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Scoring a document (count?)
Date: Mon, 31 Jul 2006 10:35:50 -0400
Message-ID: <E9BF7E0FD95D1143B399B129908A58FF01582E6B@datachange01.dataconversions.biz>
In-Reply-To: <OFE63FF6B5.D94BF037-ON882571B8.00715AE7-882571B9.00282C1E@il.ibm.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Scoring a document (count?)
Thread-Index: AcayFixfvsV8ZNYIQ7GTFAlG4vgGTwANlb1w
From: "Russell M. Allen" <Russell.Allen@aebn.net>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thank you for the reply Doran!  You are exactly right about the sql
count(*).  I need the equivalent of group by, and count().

We have considered a 'joined' index where we would have a document for
each permutation.  We discarded it (possibly prematurely) based on the
rapid explosion in the number of documents.  In our domain, we have
movies as the main document type, and 5 other satellite document types
with their own indexes: Star, Studio, Director, Series, and Category
(genre).  With the exception of series, a movie has a many to many
relationship with the other indexes.  So, with 60k movies, 20k stars, 2k
studios, ... The document count quickly shoots through the roof.

Also, the majority of our searching is based on a single domain type,
such as movie.  It is only a small handful of corner cases where we want
what amounts to a joined query.  If we merged these indexes, we would
constantly have to 'roll up' the results into distinct instances of a
type.  (The equivalent of an SQL 'group by')


I find the parallels between the expressiveness of Lucene and SQL
interesting.  I'm glad to see you compared what I was looking for to an
sql count(*) as well.  We have a handful of indexing issues that I am
attempting to solve/optimize, of which performing a count(*) is only
one.  I also have the need to perform a JOIN across two indexes.  I have
'ideas' about how I might go about this, but for now we are fortunate
enough to have fairly static data and half of the join is static.  As a
result we can cache a bitset filter for the results of half the join and
apply it to the other (dynamic) half of the join query.

Anyway, I digress...

I saw you second post regarding creating a scorer.  I'd like to continue
down that path.  My main issue now is simply understanding how lucene
works under the covers enough to write the TermQuery variant.

Thanks for the help,
Russell.


-----Original Message-----
From: Doron Cohen [mailto:DORONC@il.ibm.com]=20
Sent: Friday, July 28, 2006 3:19 AM
To: java-user@lucene.apache.org
Subject: Re: Scoring a document (count?)

This task reminds me more of a count(*) sql query than a text search
query.

Assuming that using a text search engine is a pre requisite, I can think
of two approaches - basing on Lucene scoring as suggested in the
question, or a more simple approach (below).

For the scoring approach - I don't see an easy way to get the counts
from the score of the results, although the TF (term frequency in
candidate
docs) is known+used during document scoring, and although it seems that
the application can be arranged such that TF of search result documents
would be the required count.

But perhaps a more straight forward solution can do - adding a Lucene
document for each star-movie pair. This would also allow easy update
when a new movie arrives: just add a document for each "star" in that
movie. A document can have these fields:
   StarFirstName - stored, untokenized
   StarLastName - stored, untokenized
   MovieName - stored, tokenized
   MovieType - stored, untokenized - this is the pre-computed type
mentioned below
   MovieProps  - unstored, tokenized - the word "horror" can appear in
this field, avoiding a pre-computation step.
Now a single search can do all the work:
   +StarLastName:A* +MovieProps:horror
Sorting results by StarLastName would group all results of same "star"
and also allow to count them for each star.

This would create more documents in the index -  #stars * |#movies per
star| - so there may be performance considerations, depending on the=20
star| volume
of the data...

Regards,
Doron

"Russell M. Allen" <Russell.Allen@aebn.net> wrote on 27/07/2006
09:02:46:

> I am curious about the potential use of document scoring as a means to

> extract additional data from an index.  Specifically, I would like the

> score to be a count of how many times a particular field matched a set

> of terms.
>
> For example, I am indexing movie-stars (Each document is a
movie-star).
> A movie-star has a number of fields, such as name, movies they have=20
> been in, etc.  I want to produce an 'index' of stars by name and show=20
> how many movies, which match a filter, that they have appeared in.
>
> In natural language my query might be:
>    "List all stars who have appeared in a 'horror' movie, where last=20
> name starts with A, and tell me how many horror movies they were in."
>
> My search will look something like this:
>    "+lastName:A* +movie:(1 7 21 58 92)"   //where movie is a
> previously computed list of 'horror' movie ids
>
> If my index contained the following documents:
>     doc1 =3D lastName:Anna   movie:{3 10}
>     doc2 =3D lastName:Aba    movie:{1 10 12}
>     doc3 =3D lastName:Addd   movie:{3 21 55 92}
>     doc4 =3D lastName:Baaa   movie:{7 56}
>
> I would like to get back:
>     doc2, score of 1   //score of 1 because only movie 1 matched
>     doc3, score of 2   //score of 2 because movies 21 and 92 matched
>
>
>
> Currently, we perform an initial query against our Star index to=20
> retrieve a list of stars.  Then we perform N queries against a=20
> separate movie index to count the number of movies that match our sub=20
> filter 'horror'.  This is obviously very inefficient, and as I've=20
> shown above, the information (count) is available during the primary
query.
>
> Thoughts?
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 14:54:19 2006
Return-Path: <java-user-return-22412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79165 invoked from network); 31 Jul 2006 14:54:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 14:54:19 -0000
Received: (qmail 60193 invoked by uid 500); 31 Jul 2006 14:54:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60155 invoked by uid 500); 31 Jul 2006 14:54:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60143 invoked by uid 99); 31 Jul 2006 14:54:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 07:54:14 -0700
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of erickerickson@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 07:54:13 -0700
Received: by ug-out-1314.google.com with SMTP id y2so698438uge
        for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 07:53:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pi43qJp766CrFCoI86gGJeCyFF8nhzsAqk3hjMKqmfc0WCa9PG960zFhRnrvoHhVbSXZfLFzK0rfMKLGrIgZfwaBPJVqEApSWyWwHeK5Uu5PLs37FBZE/qtuBsI7TZ0BAqXVK6cS29iCoPkeS7cx4G7xhU7sva64/7iEHGa9AK4=
Received: by 10.66.224.3 with SMTP id w3mr2584139ugg;
        Mon, 31 Jul 2006 07:53:49 -0700 (PDT)
Received: by 10.35.8.5 with HTTP; Mon, 31 Jul 2006 07:53:49 -0700 (PDT)
Message-ID: <359a92830607310753g71e6262an2a552d6f24f43ba5@mail.gmail.com>
Date: Mon, 31 Jul 2006 10:53:49 -0400
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter updating
In-Reply-To: <359a92830607281800o589ae31ajab229c4e48e3347b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_42796_21074563.1154357629631"
References: <1154005659.87197.ezmlm@lucene.apache.org>
	 <200607291210.54660.paul@waite.net.nz>
	 <359a92830607281800o589ae31ajab229c4e48e3347b@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_42796_21074563.1154357629631
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Of course, another approach doesn't occur to me until the weekend..... But,
even if building a filter is a time-consuming process, you could always
build them as a warm-up when your searcher starts, and cache them *then*.
That way, the user doesn't see a long pause when the filter is built the
first time and you also don't have updating issues. I guess you'd do this by
firing a few carefully-selected queries at your engine upon startup and
using a CachingWrapperFilter (?).... I believe Solr uses something similar.
Of course, you want to keep your IndexReader open as long as possible, which
you want to do anyway....



FWIW
Erick

------=_Part_42796_21074563.1154357629631--

From java-user-return-22413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 15:45:20 2006
Return-Path: <java-user-return-22413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1218 invoked from network); 31 Jul 2006 15:45:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 15:45:19 -0000
Received: (qmail 91341 invoked by uid 500); 31 Jul 2006 15:45:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91314 invoked by uid 500); 31 Jul 2006 15:45:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91300 invoked by uid 99); 31 Jul 2006 15:45:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 08:45:13 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sdmonroe@gmail.com designates 72.14.204.226 as permitted sender)
Received: from [72.14.204.226] (HELO qb-out-0506.google.com) (72.14.204.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 08:45:11 -0700
Received: by qb-out-0506.google.com with SMTP id d11so51108qbd
        for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 08:44:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=LFoSPCsSEBPuOAw81Sg0dXX7Dnv7ieWFrSgj9mGH9WLvZvbIsGmv6/dKsBihdmXSlL98RYZRpHFFvoWqVRD4tm+njpxo45GIV9CRYaoWAm61VIF1yKavO6wargOOjm4aCfxeLfJ5x2mN/xE5f8ID+y8Djb7n0BHOoe38I032PUw=
Received: by 10.65.139.9 with SMTP id r9mr4060045qbn;
        Mon, 31 Jul 2006 08:44:48 -0700 (PDT)
Received: by 10.65.216.1 with HTTP; Mon, 31 Jul 2006 08:44:48 -0700 (PDT)
Message-ID: <e23f467e0607310844k42c9b5d2s15e33999167171ef@mail.gmail.com>
Date: Mon, 31 Jul 2006 10:44:48 -0500
From: "Sherman Monroe" <sdmonroe@gmail.com>
To: java-user@lucene.apache.org
Subject: Cypher - Natural Language to RDF/SeRQL for the Semantic Web
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24376_1018522.1154360688047"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_24376_1018522.1154360688047
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi All,

I thought our technology might interest the group.

Cypher is one of the first software program available which generates
metadata represention of natural language input. The program outputs RDF
graph and SeRQL query representations of a sentences, clauses, and phrases.
The Cypher framework provides a set of robust definition languages, which
can be used to extend and create grammars and lexicons. Cypher  programming
is fun and easy to do. The specifications are designed to allow a novice to
quickly and easily build transcoders for processing highly complex sentences
and phrases of any natural language, and to cover any vocabulary.

The free software and related documentation can be found at:

http://www.monrai.com/products/cypher

Enjoy,
sherman

------=_Part_24376_1018522.1154360688047--

From java-user-return-22414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 16:17:25 2006
Return-Path: <java-user-return-22414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12483 invoked from network); 31 Jul 2006 16:17:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 16:17:25 -0000
Received: (qmail 66700 invoked by uid 500); 31 Jul 2006 16:17:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66597 invoked by uid 500); 31 Jul 2006 16:17:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66561 invoked by uid 99); 31 Jul 2006 16:17:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 09:17:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 09:17:12 -0700
Received: from [128.230.84.138] (syru84-138.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.155E41D7@mailer.syr.edu>; Mon, 31 Jul 2006 12:16:51 -0400
Message-ID: <44CE2CF3.7030207@syr.edu>
Date: Mon, 31 Jul 2006 12:16:51 -0400
From: Steven Rowe <sarowe@syr.edu>
User-Agent: Mail/News 1.5.0.4-GroupWise-IMAP-fix (Windows/20060619)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060731021247.11211.qmail@web50315.mail.yahoo.com> <44CE0543.6050302@mac.com>
In-Reply-To: <44CE0543.6050302@mac.com>
X-Enigmail-Version: 0.94.0.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Michael J. Prichard wrote:
> Hey Otis,
> 
> Sure I would love to!  Can you ping me at michael.prichard@mac.com and
> let me know what I need to do?   Do I just post it to JIRA?
> 
> Thanks,
> Michael
> 
> Otis Gospodnetic wrote:
> 
>> A good place for that in JIRA.  could you put it there?  We have a
>> bunch of analyzers in Lucene's contrib, so if you are okay with
>> putting Apache license on top of the source code, we can include it
>> there.  Same for EmailAnalyzer.
>>
>> Otis

Hey Michael,

A naming suggestion: EmailAddressAnalyzer/Filter instead of
EmailAnalyzer/Filter.

Otherwise, it seems to advertize much more than splitting email
addresses into their components.

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 16:22:02 2006
Return-Path: <java-user-return-22415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13369 invoked from network); 31 Jul 2006 16:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 16:22:02 -0000
Received: (qmail 80732 invoked by uid 500); 31 Jul 2006 16:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80705 invoked by uid 500); 31 Jul 2006 16:21:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80694 invoked by uid 99); 31 Jul 2006 16:21:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 09:21:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.175] (HELO smtpout.mac.com) (17.250.248.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 09:21:54 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout05/MantshX 4.0) with ESMTP id k6VGLXPv013156
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 09:21:34 -0700 (PDT)
Received: from [127.0.0.1] (216-12-26-38.va.mvl.ntelos.net [216.12.26.38])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id k6VGLNJh007663
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 09:21:30 -0700 (PDT)
Message-ID: <44CE2D84.20002@mac.com>
Date: Mon, 31 Jul 2006 12:19:16 -0400
From: "Michael J. Prichard" <michael_prichard@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: EMAIL ADDRESS: Tokenize (i.e. an EmailAnalyzer)
References: <20060731021247.11211.qmail@web50315.mail.yahoo.com> <44CE0543.6050302@mac.com> <44CE2CF3.7030207@syr.edu>
In-Reply-To: <44CE2CF3.7030207@syr.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Steven Rowe wrote:

>Michael J. Prichard wrote:
>  
>
>>Hey Otis,
>>
>>Sure I would love to!  Can you ping me at michael.prichard@mac.com and
>>let me know what I need to do?   Do I just post it to JIRA?
>>
>>Thanks,
>>Michael
>>
>>Otis Gospodnetic wrote:
>>
>>    
>>
>>>A good place for that in JIRA.  could you put it there?  We have a
>>>bunch of analyzers in Lucene's contrib, so if you are okay with
>>>putting Apache license on top of the source code, we can include it
>>>there.  Same for EmailAnalyzer.
>>>
>>>Otis
>>>      
>>>
>
>Hey Michael,
>
>A naming suggestion: EmailAddressAnalyzer/Filter instead of
>EmailAnalyzer/Filter.
>
>Otherwise, it seems to advertize much more than splitting email
>addresses into their components.
>
>Steve
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>
Hey Steve,

Good point.  I will change it.

Thanks!
Michael

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 16:40:46 2006
Return-Path: <java-user-return-22416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19904 invoked from network); 31 Jul 2006 16:40:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 16:40:46 -0000
Received: (qmail 29480 invoked by uid 500); 31 Jul 2006 16:40:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29454 invoked by uid 500); 31 Jul 2006 16:40:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29443 invoked by uid 99); 31 Jul 2006 16:40:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 09:40:39 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 31 Jul 2006 09:40:39 -0700
Received: (qmail 98454 invoked by uid 60001); 31 Jul 2006 16:40:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=d+tnikqX85/zrV+EsK46KMYW2v9UL/YsTIu6F9va6hkZZyGAneHDSdUsGEINmA7V03cUaIebfMJXJhbUOeSzTEji6cSXYXHvvPOqQnswH0jf3Plk4k+udLqer5VoXHCIRsnalYmdKD8FMxK/26lICLNNwE1BztMlxv9XMw7U9gM=  ;
Message-ID: <20060731164018.98452.qmail@web50311.mail.yahoo.com>
Received: from [72.229.167.99] by web50311.mail.yahoo.com via HTTP; Mon, 31 Jul 2006 09:40:17 PDT
Date: Mon, 31 Jul 2006 09:40:17 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index empty fields
To: java-user@lucene.apache.org
In-Reply-To: <f18c9dde0607310522g6aee4da3v974d1275fbadfd71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Simon,

If you want to be able to run a "give me all documents that have an empty field F", then you'll actually have to stuff a "dummy" value when no real value for field F is present.  If you have an index schema, perhaps that's a good place to add a 'defaultValue'-type attribute with that dummy value.  Perhaps Solr already has something like this, I'm not sure.

Otis

----- Original Message ----
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Sent: Monday, July 31, 2006 8:22:57 AM
Subject: Index empty fields

Hello,

I do have a question about fields with empty content should be added
to the document / index or not. I do have a index schema, which
defines all field a document can have. if one of the real documents
has no content for a certain field. should that field be added to the
index or not.
Would it make any difference at all?

regards Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 17:11:52 2006
Return-Path: <java-user-return-22417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35246 invoked from network); 31 Jul 2006 17:11:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 17:11:52 -0000
Received: (qmail 99942 invoked by uid 500); 31 Jul 2006 17:11:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99297 invoked by uid 500); 31 Jul 2006 17:11:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99286 invoked by uid 99); 31 Jul 2006 17:11:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 10:11:45 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of simon.willnauer@googlemail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 10:11:44 -0700
Received: by ug-out-1314.google.com with SMTP id y2so778762uge
        for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 10:11:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WzpVYgUnaYeLMkbkyASyPZM9nqPKY6Q1vMjSvymN1kQXwvgyoaDMT4Sy3QiNmJnM8RpTTln+41lMP3AiFNlrsyrFxic0A9vCUVDEOi1PF8mjjIklyA9zefKhTsOXt2/Cz7fJt+9bxMLgUWG4ar7XOAD5iJAKMd5cFcCuIdE+UVE=
Received: by 10.67.93.6 with SMTP id v6mr2780263ugl;
        Mon, 31 Jul 2006 10:11:22 -0700 (PDT)
Received: by 10.67.22.17 with HTTP; Mon, 31 Jul 2006 10:11:22 -0700 (PDT)
Message-ID: <f18c9dde0607311011o5874beb0rfc9deaca6a2ee786@mail.gmail.com>
Date: Mon, 31 Jul 2006 19:11:22 +0200
From: "Simon Willnauer" <simon.willnauer@googlemail.com>
Reply-To: simon.willnauer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Index empty fields
In-Reply-To: <20060731164018.98452.qmail@web50311.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f18c9dde0607310522g6aee4da3v974d1275fbadfd71@mail.gmail.com>
	 <20060731164018.98452.qmail@web50311.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Otis,

well if i have to such a query I need a "dummy" value. To point that
out a bit more in detail...
A xml document has "n" mandatory elements described by a schema or
dtd. Some of the could have empty values. Would it make any difference
to the index / searching  if I just index an empty string?! Well I
guess not, to index an empty string feels good for me to have all
fields in every document. This tiny little disc space does not matter
I guess.

Is that true so far?!

regards Simon

On 7/31/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Simon,
>
> If you want to be able to run a "give me all documents that have an empty field F", then you'll actually have to stuff a "dummy" value when no real value for field F is present.  If you have an index schema, perhaps that's a good place to add a 'defaultValue'-type attribute with that dummy value.  Perhaps Solr already has something like this, I'm not sure.
>
> Otis
>
> ----- Original Message ----
> From: Simon Willnauer <simon.willnauer@googlemail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, July 31, 2006 8:22:57 AM
> Subject: Index empty fields
>
> Hello,
>
> I do have a question about fields with empty content should be added
> to the document / index or not. I do have a index schema, which
> defines all field a document can have. if one of the real documents
> has no content for a certain field. should that field be added to the
> index or not.
> Would it make any difference at all?
>
> regards Simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 17:46:52 2006
Return-Path: <java-user-return-22418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56420 invoked from network); 31 Jul 2006 17:46:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 17:46:52 -0000
Received: (qmail 71133 invoked by uid 500); 31 Jul 2006 17:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71109 invoked by uid 500); 31 Jul 2006 17:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71076 invoked by uid 99); 31 Jul 2006 17:46:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 10:46:32 -0700
X-ASF-Spam-Status: No, hits=2.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 31 Jul 2006 10:46:31 -0700
Received: (qmail 51720 invoked by uid 60001); 31 Jul 2006 17:46:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=n0TNV8ubOoAvc4JGr9J3xL3JqUsLSGNtX564tOczZ7zdr0cWb7psxVawBMsQTJZZPxQenEVko/TEt56r5HeBEpyLBHN+vdwgiBZvBM81RheAHhfeouirUOPJa1/jm/j281/a64yd1NIAhKMl1OAgEjnu1dWePjBtA8Iaq+H2iJc=  ;
Message-ID: <20060731174610.51718.qmail@web50307.mail.yahoo.com>
Received: from [72.229.167.99] by web50307.mail.yahoo.com via HTTP; Mon, 31 Jul 2006 10:46:10 PDT
Date: Mon, 31 Jul 2006 10:46:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index empty fields
To: java-user@lucene.apache.org
In-Reply-To: <f18c9dde0607311011o5874beb0rfc9deaca6a2ee786@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Simon,

You can index an empty field ("" value), but there is no point in doing that, really.
If you index am empty string, you will not be able to find documents that had that field empty.
You will not be able to do a WHERE foo IS NULL type of query, unless you detect an empty field during indexing, and put a dummy value it in instead of am empty string.

Otis

----- Original Message ----
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Sent: Monday, July 31, 2006 1:11:22 PM
Subject: Re: Index empty fields

Hi Otis,

well if i have to such a query I need a "dummy" value. To point that
out a bit more in detail...
A xml document has "n" mandatory elements described by a schema or
dtd. Some of the could have empty values. Would it make any difference
to the index / searching  if I just index an empty string?! Well I
guess not, to index an empty string feels good for me to have all
fields in every document. This tiny little disc space does not matter
I guess.

Is that true so far?!

regards Simon

On 7/31/06, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Simon,
>
> If you want to be able to run a "give me all documents that have an empty field F", then you'll actually have to stuff a "dummy" value when no real value for field F is present.  If you have an index schema, perhaps that's a good place to add a 'defaultValue'-type attribute with that dummy value.  Perhaps Solr already has something like this, I'm not sure.
>
> Otis
>
> ----- Original Message ----
> From: Simon Willnauer <simon.willnauer@googlemail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, July 31, 2006 8:22:57 AM
> Subject: Index empty fields
>
> Hello,
>
> I do have a question about fields with empty content should be added
> to the document / index or not. I do have a index schema, which
> defines all field a document can have. if one of the real documents
> has no content for a certain field. should that field be added to the
> index or not.
> Would it make any difference at all?
>
> regards Simon
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 17:47:44 2006
Return-Path: <java-user-return-22419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56861 invoked from network); 31 Jul 2006 17:47:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 17:47:43 -0000
Received: (qmail 75616 invoked by uid 500); 31 Jul 2006 17:47:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75595 invoked by uid 500); 31 Jul 2006 17:47:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 66203 invoked by uid 99); 31 Jul 2006 17:43:47 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of michael.cafarella@gmail.com designates 64.233.162.195 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tB9tQtpHNDniONJ0xHc2TA4o86ETyYMn4/6OlQzPH1KJs61RgUiTIVuEh7MhBpte/HWTsQCF3F3h/Cx/pcesoPOKKb1JU/gd007uUb52Du59Bhz+SM9EWs9ubt6lrPOzPTyBxg9LWfitDw75zB2TX03CEQl+/LmiJ09GENAl7Do=
Message-ID: <8a8b9f3f0607311043y43ead02k302a744ccedf1b4e@mail.gmail.com>
Date: Mon, 31 Jul 2006 10:43:23 -0700
From: "Michael Cafarella" <michael.cafarella@gmail.com>
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: Seattle, August 9, Lucene/Nutch/Hadoop Meetup
In-Reply-To: <8a8b9f3f0607311040k216dd90fpe854159483261346@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19918_7967118.1154367803851"
References: <8a8b9f3f0607311032n31695cf7ye589f7e18b4974c2@mail.gmail.com>
	 <8a8b9f3f0607311040k216dd90fpe854159483261346@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_19918_7967118.1154367803851
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

 Hi everyone,

If you're in Seattle for SIGIR, come to this meeting of FOHLNs (Friends
Of Hadoop, Lucene and Nutch).  We'll talk about search and get something
to eat and drink.

Please RSVP via the Evite below so I can get a bigger venue if necessary.

http://www.evite.com/app/publicUrl/michael.cafarella@gmail.com/* nutchparty
*
It's Wednesday, August 9, at 7:00pm in Seattle.  The place is the BigTime
Brewery, a large (and reasonably priced) local brewery/restaurant.  Their
URL
is http://www.bigtimebrewery.com/

Hope to see you there!
--Mike

*
*

------=_Part_19918_7967118.1154367803851--

From java-user-return-22420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 18:41:17 2006
Return-Path: <java-user-return-22420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79782 invoked from network); 31 Jul 2006 18:41:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 18:41:17 -0000
Received: (qmail 73457 invoked by uid 500); 31 Jul 2006 18:41:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73427 invoked by uid 500); 31 Jul 2006 18:41:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73409 invoked by uid 99); 31 Jul 2006 18:41:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 11:41:10 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 11:41:08 -0700
Received: by py-out-1112.google.com with SMTP id d80so686866pyd
        for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 11:40:48 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=iX4TO5YlTahXaBcDfw7j4d/drsoHajs427Wuye1vdbRWoqx02oq3OCdEO8jP4ZrIsy0QyX1V4yTS4dKf2gSsQUWL/unpd9MYRq0mBCez4lxjSKwzRp7KA3A+8Tua4L6eRcgY+bNNqwZfPJRfkZwoGZ8rkpZgYfdxE3nNNGP+yEk=
Received: by 10.35.127.7 with SMTP id e7mr1935158pyn;
        Mon, 31 Jul 2006 11:40:48 -0700 (PDT)
Received: by 10.35.129.12 with HTTP; Mon, 31 Jul 2006 11:40:48 -0700 (PDT)
Message-ID: <c68e39170607311140h7edaa09bo965688cd378b2035@mail.gmail.com>
Date: Mon, 31 Jul 2006 14:40:48 -0400
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Subject: Re: Index empty fields
In-Reply-To: <f18c9dde0607310522g6aee4da3v974d1275fbadfd71@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <f18c9dde0607310522g6aee4da3v974d1275fbadfd71@mail.gmail.com>
X-Google-Sender-Auth: 814ce1362b824f23
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 7/31/06, Simon Willnauer <simon.willnauer@googlemail.com> wrote:
> Hello,
>
> I do have a question about fields with empty content should be added
> to the document / index or not. I do have a index schema, which
> defines all field a document can have. if one of the real documents
> has no content for a certain field. should that field be added to the
> index or not.
> Would it make any difference at all?
>
> regards Simon

Unless you need to distinguish "" (field exists, zero length content)
from null (field does not exist), then you shouldn't bother indexing
the field... it would just be a waste of space.

-Yonik
http://incubator.apache.org/solr Solr, the open-source Lucene search server

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-22421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 31 22:39:17 2006
Return-Path: <java-user-return-22421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77394 invoked from network); 31 Jul 2006 22:39:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2006 22:39:17 -0000
Received: (qmail 33701 invoked by uid 500); 31 Jul 2006 22:39:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33629 invoked by uid 500); 31 Jul 2006 22:39:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33590 invoked by uid 99); 31 Jul 2006 22:39:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 15:39:02 -0700
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rajiv.roopan@gmail.com designates 66.249.92.172 as permitted sender)
Received: from [66.249.92.172] (HELO ug-out-1314.google.com) (66.249.92.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 31 Jul 2006 15:39:02 -0700
Received: by ug-out-1314.google.com with SMTP id y2so66003uge
        for <java-user@lucene.apache.org>; Mon, 31 Jul 2006 15:38:40 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=OkMGRtS7lX/jx8FREgNNJ+P9UGBkrMqAyv7+Aipk2REvjEqV/mB5fZ0vjf3v4eoXy9dRXvjpklYKLVQ427tzi78nU7K695Drs5ulHqV5aE8NMubDVeh642qZZCisoAKIvaf4R6HuVe3BxOST83GEV3k26/IRObHGFghbLPp/XvQ=
Received: by 10.67.93.7 with SMTP id v7mr164282ugl;
        Mon, 31 Jul 2006 15:38:40 -0700 (PDT)
Received: by 10.66.220.7 with HTTP; Mon, 31 Jul 2006 15:38:40 -0700 (PDT)
Message-ID: <5a8b64620607311538r71fd5672n76117df2ca246178@mail.gmail.com>
Date: Mon, 31 Jul 2006 18:38:40 -0400
From: "Rajiv Roopan" <rajiv.roopan@gmail.com>
To: java-user@lucene.apache.org
Subject: Search matching
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_65299_27149535.1154385520682"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_65299_27149535.1154385520682
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello, I have an index of locations for example. I'm indexing one field
using SimpleAnalyzer.

doc1: albany ny
doc2: hudson ny
doc3: new york ny
doc4: new york mills ny

when I search for "new york ny" , the first result returned is always "new
york mills ny". Am I doing something incorrect?

thanks in advance,
rajiv

------=_Part_65299_27149535.1154385520682--

