From java-user-return-49551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May  1 01:03:46 2011
Return-Path: <java-user-return-49551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E4EFB3DF6
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  1 May 2011 01:03:45 +0000 (UTC)
Received: (qmail 33901 invoked by uid 500); 1 May 2011 01:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33850 invoked by uid 500); 1 May 2011 01:03:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33842 invoked by uid 99); 1 May 2011 01:03:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 May 2011 01:03:43 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yethura.thet@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 May 2011 01:03:38 +0000
Received: by vws7 with SMTP id 7so5616915vws.35
        for <java-user@lucene.apache.org>; Sat, 30 Apr 2011 18:03:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=zU9DjQcBiKtShvaIIdcy+G22Caw/PY/jaPzMOB06O3s=;
        b=ZyZ+PzbqZI1ACTonhBXx5+rQBaoOqeU8MwAsmmg2zBQmVgIbPw91kmUiOCFdLwnMnZ
         8Dh8Tqo3r1rdFOAvhCZ6AMHoxuaqwTc+rR3rCrHs4bwFcRGj/k+VfPfd6kDQBpg/bRxW
         2wqDnhppILcMKsg9rbzbCAvaDjF2jnw6PgIBk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UNHGf9IIRpWwZZ/va3lwvXCEtr9bDuXZcubbwqw2BuyeboJjxB9o6jbptKkYabk8C4
         Fx/gRZqpt3wy1LF0T0Smy3PBWy+RHjG1yVrivrIC3TNZOm58OGrubbmU0QYr32BPIFRl
         e5ZIIVKkGqqQEc98ZRq60jLJWhRIthmYxfWRg=
MIME-Version: 1.0
Received: by 10.52.0.69 with SMTP id 5mr5553336vdc.96.1304211797470; Sat, 30
 Apr 2011 18:03:17 -0700 (PDT)
Received: by 10.52.169.10 with HTTP; Sat, 30 Apr 2011 18:03:17 -0700 (PDT)
In-Reply-To: <00b901cc0757$9238b1c0$b6aa1540$@thetaphi.de>
References: <BANLkTi=1TPdGp1R+j1ib3KY=NpFFiwepag@mail.gmail.com>
	<00b901cc0757$9238b1c0$b6aa1540$@thetaphi.de>
Date: Sun, 1 May 2011 09:03:17 +0800
Message-ID: <BANLkTi=TOXgR2MHB=xUZD7qUf88emVJcFA@mail.gmail.com>
Subject: Re: clearAttributes() not clearing in Tokenizer class
From: Ye T Thet <yethura.thet@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf304346fee66e5804a22c78d6

--20cf304346fee66e5804a22c78d6
Content-Type: text/plain; charset=ISO-8859-1

Uwe,

Thanks for your pointers. I will just do that.

Regards,

Ye Thura

On Sun, May 1, 2011 at 12:56 AM, Uwe Schindler <uwe@thetaphi.de> wrote:

> Hi,
>
> You can checkout the latest 3.0 branch at
> https://svn.apache.org/repos/asf/lucene/java/branches/lucene_3_0 using SVN
> and compile it with ANT (the patch was committed there, too).
>
> Alternatively use Lucene 3.1, but you still need the latest branch revision
> (https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_1), as
> there was no Lucene Version released until now with that fix included.
>
> Alternatively, the patch supplied in the mentioned issue (see under files)
> can be applied to the released version 3.1 (just download the source
> release, apply patch and compile).
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: Ye T Thet [mailto:yethura.thet@gmail.com]
> > Sent: Saturday, April 30, 2011 5:28 PM
> > To: java-user@lucene.apache.org
> > Subject: clearAttributes() not clearing in Tokenizer class
> >
> > Hi All,
> >
> > I am using Lucene 3.0.3. I noticed when I called clearAttributes() from
> my
> > Tokenizer, the attributes in my TermAttribute object are not being
> cleared.
> >
> > I found the issue tracking here at
> > https://issues.apache.org/jira/browse/LUCENE-3042. The status is fixed.
> It
> > looks like the patch would fix the problem I am facing.
> >
> > I am new to SVN and open source projects. So I am clueless on how to get
> > the fix. Is there anywhere I can get the binary that contain the fix?
> >
> > Or any other pointer relating to the issue?
> >
> > Thanks,
> >
> > Ye Thura
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf304346fee66e5804a22c78d6--

From java-user-return-49552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May  1 10:05:26 2011
Return-Path: <java-user-return-49552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE8252095
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  1 May 2011 10:05:26 +0000 (UTC)
Received: (qmail 1006 invoked by uid 500); 1 May 2011 10:05:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 322 invoked by uid 500); 1 May 2011 10:05:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99877 invoked by uid 99); 1 May 2011 10:05:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 May 2011 10:05:22 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 May 2011 10:05:17 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id E88BF45FF1B;
	Sun,  1 May 2011 12:04:54 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id egUlRHjHFFCN; Sun,  1 May 2011 12:04:50 +0200 (CEST)
Received: from VEGA (port-92-196-119-3.dynamic.qsc.de [92.196.119.3])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id BFCD745FF17;
	Sun,  1 May 2011 12:04:49 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <dev@lucene.apache.org>,
	<simon.willnauer@gmail.com>,
	<java-user@lucene.apache.org>
References: <47316FE3F6BA0D4DADF99663512552680B0F373B01@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu> <BANLkTinbDc_=nyA_HJauBu6VDnDn2Fm-Uw@mail.gmail.com>
In-Reply-To: <BANLkTinbDc_=nyA_HJauBu6VDnDn2Fm-Uw@mail.gmail.com>
Subject: RE: Link to nightly build test reports on main Lucene site needs updating
Date: Sun, 1 May 2011 12:04:59 +0200
Message-ID: <00e601cc07e7$3b328c30$b197a490$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGQ4ZBom4aVbDkaF+AJwolb2f/wgQIyF44jlNx6PAA=
Content-Language: de

I fixed the nightly docs, once the webserver mirrors them from SVN they =
should appear. The developer-resources page was completely broken. It =
now also contains references to the stable 3.x branch as most users =
would prefer that one to fix latest bugs but don=E2=80=99t want to have =
a backwards-incompatible version.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
> Sent: Saturday, April 30, 2011 9:42 PM
> To: java-user@lucene.apache.org
> Cc: dev@lucene.apache.org
> Subject: Re: Link to nightly build test reports on main Lucene site =
needs
> updating
>=20
> thanks tom,
> I cced dev@l.a.o
>=20
> simon
>=20
> On Fri, Apr 29, 2011 at 11:14 PM, Burton-West, Tom =
<tburtonw@umich.edu>
> wrote:
> > Hello,
> >
> > I went to look at the "Hudson nightly builds" and tried to follow =
the
> > link from the main Lucene page
> > http://lucene.apache.org/java/docs/developer-resources.html#Nightly
> >
> >
> > The links  to the Clover Test Coverage Reports  point to
> http://hudson.zones.apache.org/hudson/view/Lucene/job/Lucene-
> trunk/lastSuccessfulBuild/clover/  but apparently =
hudson.zones.apache.org
> is no longer being used.  I think the link should point to somewhere
> on  https://builds.apache.org/hudson/job/Lucene-trunk/.
> > Is this the right list to alert whoever maintains the main Lucene =
pages on
> lucene.apache.org?
> > Tom
> >
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: dev-unsubscribe@lucene.apache.org For =
additional
> commands, e-mail: dev-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May  1 12:10:50 2011
Return-Path: <java-user-return-49553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC5222AC4
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  1 May 2011 12:10:50 +0000 (UTC)
Received: (qmail 66837 invoked by uid 500); 1 May 2011 12:10:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66732 invoked by uid 500); 1 May 2011 12:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66717 invoked by uid 99); 1 May 2011 12:10:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 May 2011 12:10:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 01 May 2011 12:10:41 +0000
Received: by vxa37 with SMTP id 37so5853818vxa.35
        for <multiple recipients>; Sun, 01 May 2011 05:10:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type
         :content-transfer-encoding;
        bh=U6Kj1r1oPfhnXL9rXC1eapHPymR8grO4P/1NrLae33A=;
        b=cx8UUY8HnSeDGVB0tOzTG1/LIeyPr09BTsRh2kEOGu4jyoohsfRWJLaQNEZYKAToQ/
         lDZyu3uSP+fMOVM2YtzS+oCl6OsqnXBRIUOzjZlw5JBP392BiAd1SwLCNR+2SznYT/8w
         I1WvIzXG7EFqJAlzmaholM1a7BY02da1Ga8O0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type:content-transfer-encoding;
        b=MlM/ez8ZpijKdvl0iRH714a54ZM3raJ2/j9+GY2Q5OVwNo0qLpLs9XybJS0pTorWdS
         LjAj/lwDg8hDmPS1ITYZsRBvNCVE6k1WXSiWemyvIFmkAmmAOsvz+MzX/5CTiKUD9LkY
         EbZrBK+ey4bxWZUEZGxtHFIB1Hfi1KUGLPuN8=
MIME-Version: 1.0
Received: by 10.52.89.142 with SMTP id bo14mr2211827vdb.299.1304251820039;
 Sun, 01 May 2011 05:10:20 -0700 (PDT)
Received: by 10.52.101.196 with HTTP; Sun, 1 May 2011 05:10:20 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <00e601cc07e7$3b328c30$b197a490$@thetaphi.de>
References: <47316FE3F6BA0D4DADF99663512552680B0F373B01@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
	<BANLkTinbDc_=nyA_HJauBu6VDnDn2Fm-Uw@mail.gmail.com>
	<00e601cc07e7$3b328c30$b197a490$@thetaphi.de>
Date: Sun, 1 May 2011 14:10:20 +0200
Message-ID: <BANLkTimQsJ74vt3G9oBeEMy28+sp4cu8vQ@mail.gmail.com>
Subject: Re: Link to nightly build test reports on main Lucene site needs updating
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: Uwe Schindler <uwe@thetaphi.de>
Cc: dev@lucene.apache.org, java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for fixing uwe!

On Sun, May 1, 2011 at 12:04 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> I fixed the nightly docs, once the webserver mirrors them from SVN they s=
hould appear. The developer-resources page was completely broken. It now al=
so contains references to the stable 3.x branch as most users would prefer =
that one to fix latest bugs but don=E2=80=99t want to have a backwards-inco=
mpatible version.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
>> -----Original Message-----
>> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
>> Sent: Saturday, April 30, 2011 9:42 PM
>> To: java-user@lucene.apache.org
>> Cc: dev@lucene.apache.org
>> Subject: Re: Link to nightly build test reports on main Lucene site need=
s
>> updating
>>
>> thanks tom,
>> I cced dev@l.a.o
>>
>> simon
>>
>> On Fri, Apr 29, 2011 at 11:14 PM, Burton-West, Tom <tburtonw@umich.edu>
>> wrote:
>> > Hello,
>> >
>> > I went to look at the "Hudson nightly builds" and tried to follow the
>> > link from the main Lucene page
>> > http://lucene.apache.org/java/docs/developer-resources.html#Nightly
>> >
>> >
>> > The links =C2=A0to the Clover Test Coverage Reports =C2=A0point to
>> http://hudson.zones.apache.org/hudson/view/Lucene/job/Lucene-
>> trunk/lastSuccessfulBuild/clover/ =C2=A0but apparently hudson.zones.apac=
he.org
>> is no longer being used. =C2=A0I think the link should point to somewher=
e
>> on =C2=A0https://builds.apache.org/hudson/job/Lucene-trunk/.
>> > Is this the right list to alert whoever maintains the main Lucene page=
s on
>> lucene.apache.org?
>> > Tom
>> >
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: dev-unsubscribe@lucene.apache.org For additional
>> commands, e-mail: dev-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May  1 12:17:23 2011
Return-Path: <java-user-return-49554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E2D23231E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  1 May 2011 12:17:23 +0000 (UTC)
Received: (qmail 72899 invoked by uid 500); 1 May 2011 12:17:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72860 invoked by uid 500); 1 May 2011 12:17:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 45046 invoked by uid 99); 1 May 2011 11:20:49 -0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=DEAR_SOMETHING,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of taolin.bnuep@gmail.com designates 74.125.82.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=YRCU7NqaSqkXq1MW4CK4FUHEfxIOEQJlIdy+lxA3F7g=;
        b=tGZB2+aglwCJOKyI6+cpJqmngkDp6huLhZ8EJXSVepb5HbfCuHqobbfW//RNzUAWcq
         guEo8crxasiIYdXuWDxtpkA3Od+Gg+J+Yazu5bB0awtVaQI5DaVdr7jUImsBoMuXccfI
         AiXWK9MQZ4Va0zBGLBSgb96dfB4BQ+x2eymrU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=X26ahIlXYdcaDv5al9+0q/KT2PCriJK5g0dcbDZSvNqmRIeknDtp+E+T/1n3jSPe+5
         GVZKaNWLwYxC/RDyjdSznraKzEV1GsoyH2MAHVQ4ySHuA7RGgEJC9FN06/FZmJ24Z6b4
         q5xola7AVyTR3Av3mAuRmp/t99xa+TM65hGeY=
MIME-Version: 1.0
Date: Sun, 1 May 2011 19:20:21 +0800
Message-ID: <BANLkTimwqcQ_GF2pxE8Hyc_R75NcWDRWbQ@mail.gmail.com>
Subject: Inquiring part-of-speech (POS) tagging indexing and searching
From: Tao Lin <taolin.bnuep@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Dear Sir/Madam,

I'm working on a project related to part-of-speech(POS) tagging
indexing and searching. I found a good example in Java doc of Lucene.
We can implement our own custom Attribute(PartOfSpeechAttribute) for
part-of-speech tagging and index it accordingly, as is demostrated in
the followings:
http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/analysis/package-summary.html

But this example shows half the solution: the indexing part. How about
the searching part?
Given the PartOfSpeechTaggingFilter, how can we search only "Noun"
terms in the index?

Best regards,
Tao Lin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 04:26:54 2011
Return-Path: <java-user-return-49555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 286FB342C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 04:26:54 +0000 (UTC)
Received: (qmail 2152 invoked by uid 500); 2 May 2011 04:26:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2122 invoked by uid 500); 2 May 2011 04:26:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2114 invoked by uid 99); 2 May 2011 04:26:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 04:26:50 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.239.41] (HELO web130121.mail.mud.yahoo.com) (66.94.239.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 May 2011 04:26:43 +0000
Received: (qmail 7217 invoked by uid 60001); 2 May 2011 04:26:20 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304310380; bh=hVFtpvpE4JyqVrt21OsaU7M/Zw/TxiW9lwxZwIRuL0k=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type; b=c4Xp4St+IBP0S/PeECjqJeOpoqU7v4N5/sIug9zRKxpS9oyU2z0aqYmC3DN5oS+S4Ufz4qtUJB4/p5TZrumO0d2vtFDKB+oeSqvA+AiE7l02lnkp18BZkW+J88SRPlTCwJqe3up+jZw1wOxznOJ2Ja6xZfWzcPvWH5F6kPQ0b3c=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type;
  b=ksWry4P34n0datMrpWhydBWaKJe2DOJ36nOCZ2OcADR4IZ0Txqvtpedf96Wojr27Xq5pqkQ+bMrx4fllStsnjfWMGA67VEIyIijrYqGnpckLUy4k+uT4hTg074CFo+fbjRNdaH8tIiJrYvQuiZcqs4BVxsuyW0Wa6DTyweJXFHs=;
Message-ID: <286819.99825.qm@web130121.mail.mud.yahoo.com>
X-YMail-OSG: wgophoUVM1lbeZc2Sa5NJWrROwI5MVX8rHp_elxgz1TF0oV
 7g7sMR88jiStHIYZl5WIu6lxkg0NbfB9HaqdUxsXS2u0msOLR9cJS1f5huGm
 xafPo2dR3_6fBP17gFlDZ7VjRbNdfGg_MUkCXyK.mUfX7BqQsipNlfQixitS
 HSmy.4lz8O2q8pvmRWDIMelREVK7dHWJGAhk2Ob7bQHDXBSTroVZk3XojxB4
 rvfJm01ty897Tan0W8uddl9yim013jEdRUad5fyalHGaom68ELcChqsCwCSN
 xJroWF_yEDJoT6R_kulSTOgnAsWhnDeHstBjur9zbFZzLcw1PunDWznvOUkj
 A.m1wggz5Ad2jMsyqH6xP6EFZViXLUE7JplbzzoqPuJeSTYEXNZ31Utq1E0a
 o6Yxo5I_c0iAX
Received: from [74.73.25.254] by web130121.mail.mud.yahoo.com via HTTP; Sun, 01 May 2011 21:26:20 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
Date: Sun, 1 May 2011 21:26:20 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Thoughts on Search Analytics?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'd like to solicit your thoughts about Search Analytics if you are doing any 
sort of analysis/reporting of search logs or click stream or anything related.

* Which information or reports do you find the most useful and why?
* Which reports would you like to have, but don't have for whatever reason 
(don't have the needed data, or it's too hard to produce such reports, or ...)
* Which tool(s) or service(s) do you use and find the most useful?

I'm preparing a presentation on the topic of Search Analytics, so I'm trying to 
solicit opinions, practices, desires, etc. on this topic.

Your thoughts would be greatly appreciated.  If you could reply directly, that 
would be great, since this may be a bit OT for the list.

Thanks!
Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 10:43:11 2011
Return-Path: <java-user-return-49556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A09535E7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 10:43:11 +0000 (UTC)
Received: (qmail 90565 invoked by uid 500); 2 May 2011 10:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90485 invoked by uid 500); 2 May 2011 10:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90477 invoked by uid 99); 2 May 2011 10:43:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 10:43:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.90.92] (HELO nm29.bullet.mail.ne1.yahoo.com) (98.138.90.92)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 May 2011 10:42:59 +0000
Received: from [98.138.90.54] by nm29.bullet.mail.ne1.yahoo.com with NNFMP; 02 May 2011 10:42:37 -0000
Received: from [98.138.88.239] by tm7.bullet.mail.ne1.yahoo.com with NNFMP; 02 May 2011 10:42:37 -0000
Received: from [127.0.0.1] by omp1039.mail.ne1.yahoo.com with NNFMP; 02 May 2011 10:42:37 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 588249.43727.bm@omp1039.mail.ne1.yahoo.com
Received: (qmail 46283 invoked by uid 60001); 2 May 2011 10:42:37 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304332957; bh=ui49MS8uo9IDI8aAN56YTcOOYAQMZaUFkz23VC6HM8c=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=vItXlJb8X69WIls1uBhoQPQmxRWbM7/XNtszk1zREXd1Ori3a0X3tEvhsfmKI26sRs5kIe3MS0v1tjsBNXxXbjx+Nc6vxMb8YA7k4iLpmJyqoX6wo55tvtzXZx/2diQe6XIfpMTgLHHB1N2MMrgihg3VJPh3Y5sfFDJnZkbf0+A=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=lYtH7eQJFhgKiyiMTH95EicT+A54V2ebmoiLi89+nsBR+sreV1d8S47VsLMiVINreHh/1laqv78mwpvaa3sP0YPqkAEWFUW5QthXfpYnE6lHY9mcqDQb2Xnhk24XbCZSQYSCbBSTOfL27TzoLP1oZ93tLrywTfSRy2gpZ7kOG6A=;
Message-ID: <454556.25753.qm@web121720.mail.ne1.yahoo.com>
X-YMail-OSG: b4rJv4UVM1mYdQz8JuEjITenup4o72jfFAUhp3bKQznTdcz
 TCDCcmxgtuGpzU028W1jCeuWPvaScllHiLC0loDKmH4s9Z_nqUrYlEHSJYub
 RA_WVCrdT1Gy6___nKLWaeDzqPLgBe_4n52FUxeMpyJ6CH0v6xGciX_WXEtD
 Zy_Ley7Gr.j3lPVc6R29ldEN8oioUv807aS1bbtl_V70nA0km7DbhgPigT_K
 WA1PC.ZDwcAvpklPcD7g15MY2ydD44Do8EyO0C3W4VDlewHo7_AJUzIfx3hf
 HPSbn5n43El.4.8r7YovZ9t4vN75F7t4lq2M47vM6zl8AHLFI3IwBreT6VDH
 AFKCeA9_VqWyM8Z0o72JTctkZcSMehtWzmzPqYGdRzsHA_WymyLtLUg--
Received: from [193.140.184.4] by web121720.mail.ne1.yahoo.com via HTTP; Mon, 02 May 2011 03:42:37 PDT
X-Mailer: YahooMailWebService/0.8.110.299900
References: <740221930626904@mail.mainsequence.net>
Date: Mon, 2 May 2011 03:42:37 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Reply-To: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: ComplexPhraseQueryParser with multiple fields
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
  Chris Salem <chris@mainsequence.net>
In-Reply-To: <740221930626904@mail.mainsequence.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A=0AHi,=0AI've just started using the ComplexPhraseQueryParser and it wor=
ks great with one field but is there a way for it to work with multiple fie=
lds?=A0 For example, right now the query:=0Ajob_title: "sales man*" AND NOT=
 contact_name: "Chris Salem"=0Athrows this exception =0ACaused by: org.apac=
he.lucene.queryParser.ParseException: Cannot have clause for field "job_tit=
le" nested in phrase for field "contact_name"=0AWhat is the best way to wor=
k around this?=0A=0AThere is "Lucene-1486 non default field.patch" for that=
 but it requires :=0A=0A"Fixing this would require changing the package nam=
e of =0AComplexPhraseQueryParser or changing the visibility of "field" in t=
he =0AQueryParser base class to "protected".=0AAnyone have any strong feeli=
ngs about which of these is the most acceptable?" =0A=0Ahttps://issues.apac=
he.org/jira/browse/LUCENE-1486=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 11:47:41 2011
Return-Path: <java-user-return-49557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F1253EEF
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 11:47:41 +0000 (UTC)
Received: (qmail 51608 invoked by uid 500); 2 May 2011 11:47:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51560 invoked by uid 500); 2 May 2011 11:47:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51552 invoked by uid 99); 2 May 2011 11:47:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 11:47:39 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 11:47:32 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 1A529C217F
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 13:47:11 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id K42q5MNBBp7w for <java-user@lucene.apache.org>;
	Mon,  2 May 2011 13:47:11 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 000B0C2117
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 13:47:10 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Mon, 2 May 2011 13:47:10 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 2 May 2011 13:47:09 +0200
Subject: "fuzzy prefix" search
Thread-Topic: "fuzzy prefix" search
Thread-Index: AcwIvqUqT1wu5r7JSXizEL8luHRi1A==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

I'd like to search fuzzily but not on a full term.=20
E.g.
I have a text "Merlot del Ticino"
I'd like
"mer", "merr", "melo", ... to match.

If I use FuzzyQuery only "merlot,  "merlott" hit. What Query-combination sh=
ould I use?

Thx
Clemens


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 11:50:43 2011
Return-Path: <java-user-return-49558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 958313197
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 11:50:43 +0000 (UTC)
Received: (qmail 54878 invoked by uid 500); 2 May 2011 11:50:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54829 invoked by uid 500); 2 May 2011 11:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54821 invoked by uid 99); 2 May 2011 11:50:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 11:50:41 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 11:50:33 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 2FE7045F84D
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 13:50:10 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id X7iJ2El2fHfa for <java-user@lucene.apache.org>;
	Mon,  2 May 2011 13:50:03 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 8BBAC45F745
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 13:50:03 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
Subject: RE: "fuzzy prefix" search
Date: Mon, 2 May 2011 13:50:12 +0200
Message-ID: <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSA
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

You can pass an integer to FuzzyQuery which defines the number of characters
that are seen as prefix. So all terms must match this prefix and the rest of
each term is matched using fuzzy.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Sent: Monday, May 02, 2011 1:47 PM
> To: java-user@lucene.apache.org
> Subject: "fuzzy prefix" search
> 
> I'd like to search fuzzily but not on a full term.
> E.g.
> I have a text "Merlot del Ticino"
> I'd like
> "mer", "merr", "melo", ... to match.
> 
> If I use FuzzyQuery only "merlot,  "merlott" hit. What Query-combination
> should I use?
> 
> Thx
> Clemens
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 12:13:26 2011
Return-Path: <java-user-return-49559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 709723948
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 12:13:26 +0000 (UTC)
Received: (qmail 78431 invoked by uid 500); 2 May 2011 12:13:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78383 invoked by uid 500); 2 May 2011 12:13:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78375 invoked by uid 99); 2 May 2011 12:13:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 12:13:24 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 12:13:19 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 4CDA72E4002
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 14:12:58 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8j6H5FBOwOp7 for <java-user@lucene.apache.org>;
	Mon,  2 May 2011 14:12:58 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 05711C2117
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 14:12:58 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Mon, 2 May 2011 14:12:57 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 2 May 2011 14:12:56 +0200
Subject: AW: "fuzzy prefix" search
Thread-Topic: "fuzzy prefix" search
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSAgAAEQGA=
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
In-Reply-To: <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

I tried this too, but unfortunately I only get hits when the search term is=
 a least as long as the word to be looked up.

E.g.:
...
Directory directory =3D new RAMDirectory();
IndexWriter indexWriter =3D new IndexWriter( directory, IndexManager.getInd=
exingAnalyzer( LOCALE_DE ),
		IndexWriter.MaxFieldLength.UNLIMITED );

Document document =3D new Document();	=09
document.add( new Field( "test", "Merlot",
		Field.Store.YES, Field.Index.ANALYZED ) );
indexWriter.addDocument( document );

IndexReader indexReader =3D indexWriter.getReader();
IndexSearcher searcher =3D new IndexSearcher( indexReader );

Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
TopDocs result =3D searcher.search( q, 10 );
Assert.assertEquals( 1, result.totalHits );
...

> -----Urspr=FCngliche Nachricht-----
> Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> Gesendet: Montag, 2. Mai 2011 13:50
> An: java-user@lucene.apache.org
> Betreff: RE: "fuzzy prefix" search
>=20
> Hi,
>=20
> You can pass an integer to FuzzyQuery which defines the number of
> characters that are seen as prefix. So all terms must match this prefix a=
nd the
> rest of each term is matched using fuzzy.
>=20
> Uwe
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
> > -----Original Message-----
> > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Sent: Monday, May 02, 2011 1:47 PM
> > To: java-user@lucene.apache.org
> > Subject: "fuzzy prefix" search
> >
> > I'd like to search fuzzily but not on a full term.
> > E.g.
> > I have a text "Merlot del Ticino"
> > I'd like
> > "mer", "merr", "melo", ... to match.
> >
> > If I use FuzzyQuery only "merlot,  "merlott" hit. What
> > Query-combination should I use?
> >
> > Thx
> > Clemens
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 13:18:07 2011
Return-Path: <java-user-return-49560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 460A63CDA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 13:18:07 +0000 (UTC)
Received: (qmail 59016 invoked by uid 500); 2 May 2011 13:18:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58968 invoked by uid 500); 2 May 2011 13:18:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58960 invoked by uid 99); 2 May 2011 13:18:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 13:18:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 13:17:57 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-15; format=flowed
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LKK00J00KXB9H00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Mon, 02 May 2011 15:17:35 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LKK00HDDKXAP860@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Mon, 02 May 2011 15:17:35 +0200 (CEST)
Date: Mon, 02 May 2011 15:17:34 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: questions about the index
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id:
 <23410_1304342255_ZZh0p5U5IAVqV.00_4DBEAEEE.1060302@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.5.2.130923, pmx7
X-Connecting-IP: 129.70.11.68
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.14) Gecko/20110221
 SUSE/3.1.8 Thunderbird/3.1.8

Dear list,

some questions about the index.
(questions go to the lucene list because it is more about the index itself)

First my results from CheckIndex:

Segments file=segments_l6 numSegments=1 version=FORMAT_3_1 [Lucene 3.1]
Checking only these segments: _79s:
   1 of 1: name=_79s docCount=28146692
     compound=false
     hasProx=true
     numFiles=8
     size (MB)=141.658,104
     diagnostics = {optimize=true, mergeFactor=2, os.version=2.6.32.13-0.5-xen,
                    os=Linux, lucene.version=3.1.0 1085809 - 2011-03-26 18:06:58,
                    source=merge, os.arch=amd64, java.version=1.6.0_21, java.vendor=Sun Microsystems Inc.}
     no deletions
     test: open reader.........OK
     test: fields..............OK [106 fields]
     test: field norms.........OK [18 fields]
     ....

Questions:
- the mergeFactor in solrconfig.xml (indexDefaults and mainIndex)
   is set to 10. Why is the index reporting mergeFactor=2 ???

- what does "optimize=true" mean?
   - the index is optimized OR
   - the index needs to get optimized

- if I start solr with an optimized index I always get a "write.lock" file.
   if I use a small index with only a few docs I don't seen this behavior.
   any explanation?

Best regards,
Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 15:45:41 2011
Return-Path: <java-user-return-49561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A30C36EF
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 15:45:41 +0000 (UTC)
Received: (qmail 31989 invoked by uid 500); 2 May 2011 15:45:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31948 invoked by uid 500); 2 May 2011 15:45:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31940 invoked by uid 99); 2 May 2011 15:45:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 15:45:39 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 15:45:34 +0000
Received: by wwi18 with SMTP id 18so4273241wwi.5
        for <java-user@lucene.apache.org>; Mon, 02 May 2011 08:45:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.197.201 with SMTP id el9mr4092193wbb.22.1304351112458;
 Mon, 02 May 2011 08:45:12 -0700 (PDT)
Received: by 10.227.11.67 with HTTP; Mon, 2 May 2011 08:45:12 -0700 (PDT)
In-Reply-To: <23410_1304342255_ZZh0p5U5IAVqV.00_4DBEAEEE.1060302@uni-bielefeld.de>
References: <23410_1304342255_ZZh0p5U5IAVqV.00_4DBEAEEE.1060302@uni-bielefeld.de>
Date: Mon, 2 May 2011 11:45:12 -0400
Message-ID: <BANLkTim50Y7eNb4qOCTHydbWDciUe+9VKA@mail.gmail.com>
Subject: Re: questions about the index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Mon, May 2, 2011 at 9:17 AM, Bernd Fehling
<bernd.fehling@uni-bielefeld.de> wrote:
> Dear list,
>
> some questions about the index.
> (questions go to the lucene list because it is more about the index itsel=
f)
>
> First my results from CheckIndex:
>
> Segments file=3Dsegments_l6 numSegments=3D1 version=3DFORMAT_3_1 [Lucene =
3.1]
> Checking only these segments: _79s:
> =A01 of 1: name=3D_79s docCount=3D28146692
> =A0 =A0compound=3Dfalse
> =A0 =A0hasProx=3Dtrue
> =A0 =A0numFiles=3D8
> =A0 =A0size (MB)=3D141.658,104
> =A0 =A0diagnostics =3D {optimize=3Dtrue, mergeFactor=3D2,
> os.version=3D2.6.32.13-0.5-xen,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 os=3DLinux, lucene.version=3D3.1.0 10=
85809 - 2011-03-26
> 18:06:58,
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 source=3Dmerge, os.arch=3Damd64, java=
.version=3D1.6.0_21,
> java.vendor=3DSun Microsystems Inc.}
> =A0 =A0no deletions
> =A0 =A0test: open reader.........OK
> =A0 =A0test: fields..............OK [106 fields]
> =A0 =A0test: field norms.........OK [18 fields]
> =A0 =A0....
>
> Questions:
> - the mergeFactor in solrconfig.xml (indexDefaults and mainIndex)
> =A0is set to 10. Why is the index reporting mergeFactor=3D2 ???
>
> - what does "optimize=3Dtrue" mean?
> =A0- the index is optimized OR
> =A0- the index needs to get optimized

optimize=3Dtrue means this segment was produced by a merge trigged by an
optimize() call.  mergeFactor=3D2 means that 2 segments were merged to
produce this final segment; it's entirely possible that your
configured mergeFactor is 10, you called optimize, and the last merge
was to merge two segments down to this final one.

> - if I start solr with an optimized index I always get a "write.lock" fil=
e.
> =A0if I use a small index with only a few docs I don't seen this behavior=
.
> =A0any explanation?

That seems odd -- write.lock should be created regardless of what the
current index looks like, I think.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 16:01:13 2011
Return-Path: <java-user-return-49562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 40B993FB3
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 16:01:13 +0000 (UTC)
Received: (qmail 54074 invoked by uid 500); 2 May 2011 16:01:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54024 invoked by uid 500); 2 May 2011 16:01:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54016 invoked by uid 99); 2 May 2011 16:01:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 16:01:10 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tpoljak@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 16:01:03 +0000
Received: by qyk2 with SMTP id 2so1679125qyk.14
        for <java-user@lucene.apache.org>; Mon, 02 May 2011 09:00:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=QrIsSLbCiyUTGyCw4UwEBz9xxYJfhCQ7vIt8J9GZ2sI=;
        b=CX8AXg0xDipzsVwewuij8ma86AWBrONY9L5XOczPn0K960CVsIqRRrAMyQKSVc8Dz/
         gl0l13GU5Me37N3wEgKRl1U87f9esCNyRFLMvL7XtI66IciRNbEpD2J529WpTqbHas9r
         lXHliHB3v7CABzy2UcbUYnFrNRMdYNs5c4zAU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=slib7noe06YnwapjZT5FWP+2yEMMebK/pg8p2YyUXVYsNR4i7NDjW7PAgaAo2yId7z
         YcQir7Khy5tM3dvA4glmQAGXIPaUDgS/C2g+j2CkQVTSBLGKrXoyJzAl3qtol7Xiesjb
         x517xMZw93ZybghBHD/Ih5HqGOIoRN4ewm01A=
MIME-Version: 1.0
Received: by 10.229.214.204 with SMTP id hb12mr6023244qcb.261.1304352042908;
 Mon, 02 May 2011 09:00:42 -0700 (PDT)
Received: by 10.229.224.131 with HTTP; Mon, 2 May 2011 09:00:42 -0700 (PDT)
Date: Mon, 2 May 2011 18:00:42 +0200
Message-ID: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
Subject: MultiPhraseQuery slowing down over time in Lucene 3.1
From: Tomislav Poljak <tpoljak@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,
after running tests on both MemoryIndex and RAMDirectory based index
in Lucene 3.1, seems MultiPhraseQueries are slowing down over time
(each iteration of executing the same MultiPhraseQueries on the same
doc, seems to require more and more execution time). Are there any
existing/known issues related to the MultiPhraseQuery in Lucene 3.1
which could lead to this performance drop?

Tomislav

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 16:15:54 2011
Return-Path: <java-user-return-49563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2DAF336DB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 16:15:54 +0000 (UTC)
Received: (qmail 88027 invoked by uid 500); 2 May 2011 16:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87993 invoked by uid 500); 2 May 2011 16:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87985 invoked by uid 99); 2 May 2011 16:15:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 16:15:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 16:15:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 336E245FB1C
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 18:15:24 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Zvt4syNEpBQv for <java-user@lucene.apache.org>;
	Mon,  2 May 2011 18:15:19 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id CB72D45FAB3
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 18:15:18 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
In-Reply-To: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
Subject: RE: MultiPhraseQuery slowing down over time in Lucene 3.1
Date: Mon, 2 May 2011 18:15:27 +0200
Message-ID: <002401cc08e4$27670390$76350ab0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJyqe+dqtJASAD2QpVGn831GQ91j5Msc/lw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Can you checkout latest 3.1 branch @
https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_1

And test if it solves your issue. There was aproblem in PhraseQuery's
internal sorting and quicksort. It does not slowdown over time, but with
type of query (how many terms the phrase contains). Maybe you sort your
queries according number of terms and so you get a slowdown.

See issue: https://issues.apache.org/jira/browse/LUCENE-3054

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Tomislav Poljak [mailto:tpoljak@gmail.com]
> Sent: Monday, May 02, 2011 6:01 PM
> To: java-user@lucene.apache.org
> Subject: MultiPhraseQuery slowing down over time in Lucene 3.1
> 
> Hi,
> after running tests on both MemoryIndex and RAMDirectory based index in
> Lucene 3.1, seems MultiPhraseQueries are slowing down over time (each
> iteration of executing the same MultiPhraseQueries on the same doc, seems
> to require more and more execution time). Are there any existing/known
> issues related to the MultiPhraseQuery in Lucene 3.1 which could lead to
this
> performance drop?
> 
> Tomislav
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 16:16:09 2011
Return-Path: <java-user-return-49564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CD3B37E8
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 16:16:09 +0000 (UTC)
Received: (qmail 90006 invoked by uid 500); 2 May 2011 16:16:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89960 invoked by uid 500); 2 May 2011 16:16:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89952 invoked by uid 99); 2 May 2011 16:16:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 16:16:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 16:16:02 +0000
Received: by wyb40 with SMTP id 40so6813210wyb.35
        for <java-user@lucene.apache.org>; Mon, 02 May 2011 09:15:40 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.208.136 with SMTP id gc8mr4137236wbb.37.1304352940587;
 Mon, 02 May 2011 09:15:40 -0700 (PDT)
Received: by 10.227.11.67 with HTTP; Mon, 2 May 2011 09:15:40 -0700 (PDT)
In-Reply-To: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
Date: Mon, 2 May 2011 12:15:40 -0400
Message-ID: <BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

By "slowing down over time" do you mean you use the same index (no new
docs added) yet running the same MPQ over and over you see it taking
longer to execute over time?

Mike

http://blog.mikemccandless.com

On Mon, May 2, 2011 at 12:00 PM, Tomislav Poljak <tpoljak@gmail.com> wrote:
> Hi,
> after running tests on both MemoryIndex and RAMDirectory based index
> in Lucene 3.1, seems MultiPhraseQueries are slowing down over time
> (each iteration of executing the same MultiPhraseQueries on the same
> doc, seems to require more and more execution time). Are there any
> existing/known issues related to the MultiPhraseQuery in Lucene 3.1
> which could lead to this performance drop?
>
> Tomislav
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 17:19:39 2011
Return-Path: <java-user-return-49565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 20C463767
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 17:19:39 +0000 (UTC)
Received: (qmail 13532 invoked by uid 500); 2 May 2011 17:19:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13418 invoked by uid 500); 2 May 2011 17:19:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13410 invoked by uid 99); 2 May 2011 17:19:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 17:19:36 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.94.238.129] (HELO web130102.mail.mud.yahoo.com) (66.94.238.129)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 02 May 2011 17:19:31 +0000
Received: (qmail 95789 invoked by uid 60001); 2 May 2011 17:19:10 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304356750; bh=skbfljju5v+ZXMn6VvzPAC/mA0cikTJiiO6YehOjS6o=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=WF3hTUtWrkleg1MosX76h/ZyLJK8jAEGT6AFR7Yvy3N7pnrUcMiNsJnQbePoWpI1ZJ3+TdV6+FGF+n1l9I/yemb3wEFoF7Km+KbI2AfssOUxLmXhSf+uAHqaqeUXMLiE9BHx9TkkSFstp7Xc5SUvgFhVm1h1I85xuPfc9frhlXY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=mNdC1bUfoqL41lDeQT2UvmTWBBI3vrzsZ8/WANqTuCcaoNcAjGzZfK0J7FKM7lbKiocRltYcreqNv2hexw6v+uc1nHW8w+gwuH145hfxEj6fXsOogRSu7YbJ9ouYFSyP92aYNWeAv/uTUs+NxUTjJz3V63DOLO5Gs9qtEx4oBPc=;
Message-ID: <347589.95733.qm@web130102.mail.mud.yahoo.com>
X-YMail-OSG: 3gtvLMAVM1mQwH35lRhPVY0cpE.ghFRA7QPKy.j4zD2zblm
 GAjNJc9g.qM7QR4jEj9zS1EVZoXpUsqFuCL1xUyUlxcTtHuP1nZhp4aPj8gk
 e0AfW75r1GY6Pib4gS_ElV5Z65UF5mKdAqHhC86Ptim1mGN7tNVVboLhBbkp
 Fpf9gUM8xsSTwNEqmoNjE.RHjXQiGoSzpxuZPJzsT3FNe0Ipy7fNVxsN2AjN
 9MyqBPwe0fHa1UMVHEpbpg.Tvzao5vRboNaZ070jRyT0a.ACG4yJfAWeKbBP
 ZgBfnTsTTc7vZf_d47oqP_aYBEEK7ulHpK6kfptBRd0iNg7B06DxZpv7LV0Q
 9Rletuj5l6xGbAgzIP1Svgb46jYxnvSuEtH2QPnAt8ZGqVwsVPRPg.GRTZdZ
 81eiL7AnuRP1z
Received: from [184.75.0.187] by web130102.mail.mud.yahoo.com via HTTP; Mon, 02 May 2011 10:19:10 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com> <BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
Date: Mon, 2 May 2011 10:19:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

Hi,

I think this describes what's going on:

10 load N stored queries
20 parse N stored queries, keep them in some List forever
30 for each incoming document create a new MemoryIndex instance "mi"
40 for query 1 to N do mi.search(query)

Over time this step 40 takes longer and longer and longer -- if some of the 
queries are MultiPhraseQueries.  This is even with with mergeSort being used in 
MultiPhraseQuery.

Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Mon, May 2, 2011 12:15:40 PM
> Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
> 
> By "slowing down over time" do you mean you use the same index (no new
> docs  added) yet running the same MPQ over and over you see it taking
> longer to  execute over time?
> 
> Mike
> 
> http://blog.mikemccandless.com
> 
> On Mon, May 2, 2011 at  12:00 PM, Tomislav Poljak <tpoljak@gmail.com> wrote:
> >  Hi,
> > after running tests on both MemoryIndex and RAMDirectory based  index
> > in Lucene 3.1, seems MultiPhraseQueries are slowing down over  time
> > (each iteration of executing the same MultiPhraseQueries on the  same
> > doc, seems to require more and more execution time). Are there  any
> > existing/known issues related to the MultiPhraseQuery in Lucene  3.1
> > which could lead to this performance drop?
> >
> >  Tomislav
> >
> >  ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For  additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 19:45:09 2011
Return-Path: <java-user-return-49566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1312E3FC1
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 19:45:09 +0000 (UTC)
Received: (qmail 76179 invoked by uid 500); 2 May 2011 19:45:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76073 invoked by uid 500); 2 May 2011 19:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76054 invoked by uid 99); 2 May 2011 19:45:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 19:45:05 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.211.3.201] (HELO itcs-ehub-01.adsroot.itcs.umich.edu) (141.211.3.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 19:44:59 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.232]) by
 itcs-ehub-01.adsroot.itcs.umich.edu ([141.211.3.201]) with mapi; Mon, 2 May
 2011 15:44:37 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "dev@lucene.apache.org" <dev@lucene.apache.org>,
	"java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 2 May 2011 15:44:35 -0400
Subject: RE: Link to nightly build test reports on main Lucene site needs
 updating
Thread-Topic: Link to nightly build test reports on main Lucene site needs
 updating
Thread-Index: AQGQ4ZBom4aVbDkaF+AJwolb2f/wgQIyF44jlNx6PACAAjR4QA==
Message-ID: <47316FE3F6BA0D4DADF99663512552680B0F373C9A@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <47316FE3F6BA0D4DADF99663512552680B0F373B01@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <BANLkTinbDc_=nyA_HJauBu6VDnDn2Fm-Uw@mail.gmail.com>
 <00e601cc07e7$3b328c30$b197a490$@thetaphi.de>
In-Reply-To: <00e601cc07e7$3b328c30$b197a490$@thetaphi.de>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

VGhhbmtzIGZvciBmaXhpbmcrKw0KDQpUb20NCg0KLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0N
CkZyb206IFV3ZSBTY2hpbmRsZXIgW21haWx0bzp1d2VAdGhldGFwaGkuZGVdIA0KU2VudDogU3Vu
ZGF5LCBNYXkgMDEsIDIwMTEgNjowNSBBTQ0KVG86IGRldkBsdWNlbmUuYXBhY2hlLm9yZzsgc2lt
b24ud2lsbG5hdWVyQGdtYWlsLmNvbTsgamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJq
ZWN0OiBSRTogTGluayB0byBuaWdodGx5IGJ1aWxkIHRlc3QgcmVwb3J0cyBvbiBtYWluIEx1Y2Vu
ZSBzaXRlIG5lZWRzIHVwZGF0aW5nDQoNCkkgZml4ZWQgdGhlIG5pZ2h0bHkgZG9jcywgb25jZSB0
aGUgd2Vic2VydmVyIG1pcnJvcnMgdGhlbSBmcm9tIFNWTiB0aGV5IHNob3VsZCBhcHBlYXIuIFRo
ZSBkZXZlbG9wZXItcmVzb3VyY2VzIHBhZ2Ugd2FzIGNvbXBsZXRlbHkgYnJva2VuLiBJdCBub3cg
YWxzbyBjb250YWlucyByZWZlcmVuY2VzIHRvIHRoZSBzdGFibGUgMy54IGJyYW5jaCBhcyBtb3N0
IHVzZXJzIHdvdWxkIHByZWZlciB0aGF0IG9uZSB0byBmaXggbGF0ZXN0IGJ1Z3MgYnV0IGRvbuKA
mXQgd2FudCB0byBoYXZlIGEgYmFja3dhcmRzLWluY29tcGF0aWJsZSB2ZXJzaW9uLg0KDQotLS0t
LQ0KVXdlIFNjaGluZGxlcg0KSC4tSC4tTWVpZXItQWxsZWUgNjMsIEQtMjgyMTMgQnJlbWVuDQpo
dHRwOi8vd3d3LnRoZXRhcGhpLmRlDQplTWFpbDogdXdlQHRoZXRhcGhpLmRlDQoNCg0K


From java-user-return-49567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 21:01:44 2011
Return-Path: <java-user-return-49567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 520CA3F5F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 21:01:44 +0000 (UTC)
Received: (qmail 88875 invoked by uid 500); 2 May 2011 21:01:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88842 invoked by uid 500); 2 May 2011 21:01:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88834 invoked by uid 99); 2 May 2011 21:01:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 21:01:41 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 21:01:36 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 6AD852E4003
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 23:01:15 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id aHaPOb8--XcI for <java-user@lucene.apache.org>;
	Mon,  2 May 2011 23:01:15 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 229692E4002
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 23:01:15 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Mon, 2 May 2011 23:01:15 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 2 May 2011 23:01:13 +0200
Subject: AW: "fuzzy prefix" search
Thread-Topic: "fuzzy prefix" search
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSAgAAEQGCAAJVRwA==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Is it the combination of FuzzyQuery and Term which makes the search to go f=
or "word boundaries"?

> -----Urspr=FCngliche Nachricht-----
> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Gesendet: Montag, 2. Mai 2011 14:13
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> I tried this too, but unfortunately I only get hits when the search term =
is a
> least as long as the word to be looked up.
>=20
> E.g.:
> ...
> Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =3D n=
ew
> IndexWriter( directory, IndexManager.getIndexingAnalyzer( LOCALE_DE ),
> 		IndexWriter.MaxFieldLength.UNLIMITED );
>=20
> Document document =3D new Document();
> document.add( new Field( "test", "Merlot",
> 		Field.Store.YES, Field.Index.ANALYZED ) );
> indexWriter.addDocument( document );
>=20
> IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> searcher =3D new IndexSearcher( indexReader );
>=20
> Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 ); TopDocs
> result =3D searcher.search( q, 10 ); Assert.assertEquals( 1, result.total=
Hits ); ...
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > Gesendet: Montag, 2. Mai 2011 13:50
> > An: java-user@lucene.apache.org
> > Betreff: RE: "fuzzy prefix" search
> >
> > Hi,
> >
> > You can pass an integer to FuzzyQuery which defines the number of
> > characters that are seen as prefix. So all terms must match this
> > prefix and the rest of each term is matched using fuzzy.
> >
> > Uwe
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: uwe@thetaphi.de
> >
> > > -----Original Message-----
> > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > Sent: Monday, May 02, 2011 1:47 PM
> > > To: java-user@lucene.apache.org
> > > Subject: "fuzzy prefix" search
> > >
> > > I'd like to search fuzzily but not on a full term.
> > > E.g.
> > > I have a text "Merlot del Ticino"
> > > I'd like
> > > "mer", "merr", "melo", ... to match.
> > >
> > > If I use FuzzyQuery only "merlot,  "merlott" hit. What
> > > Query-combination should I use?
> > >
> > > Thx
> > > Clemens
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  2 22:37:13 2011
Return-Path: <java-user-return-49568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E8FDC3824
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  2 May 2011 22:37:12 +0000 (UTC)
Received: (qmail 20762 invoked by uid 500); 2 May 2011 22:37:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20719 invoked by uid 500); 2 May 2011 22:37:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20711 invoked by uid 99); 2 May 2011 22:37:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 22:37:10 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 02 May 2011 22:37:05 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id EB86820AE5
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 18:36:43 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute1.internal (MEProxy); Mon, 02 May 2011 18:36:43 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=UbSsvFuoWXjwjXrbUsOIMzu1Z04=; b=GOwDOKMNM1SYOFh8UbXsDlD6Q7aDRaEnRlI/6uwEcPvQj6BS63NmPL0B5p+oW4Pdk1+Jivp7pK/5XkRLvbw8qt7SMqL/3EE9/QzHre72su6E3nMSthnm2T3YjIhAhFqDhlk/uSHjjYTfs6b3OZpHMU5u5HmKpVUQduCl1HWiM6Q=
X-Sasl-enc: 5adJKKyWXpxAlO8KO6f5QF1g6yxKLjhAakfvUO9vImxk 1304375803
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 54D0D404BFC
	for <java-user@lucene.apache.org>; Mon,  2 May 2011 18:36:43 -0400 (EDT)
Message-ID: <4DBF31F9.5000608@fastmail.fm>
Date: Mon, 02 May 2011 23:36:41 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene spending alot of time in BooleanScorer2
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi

Nearing completion on a new version of a lucene search component for the 
http://www.musicbrainz.org music database and having a problem with 
performance. There are a number of indexes each built from data in a 
database, there is one index for albums, another for artists, and 
another for tracks (individual songs on albums). Testing search 
performance on every index they all perform well except for the tracks 
index which is considerably slower than before.

The code is similar, though there are changes sin all areas, and I have 
checked with a profiler that it is the lucene search that is taking the 
time. It is spending most of its time in BooleanScorer2, you can see a 
breakdown  at http://imagebin.org/151368, is this normal ? I profiled a 
well performing index and this method didn't even show up.

One thought I had is that some of the test queries are a little silly 
IMO and contain alot of OR queries both on terms within field and over 
multiple fields. We only ever return 25 results, but I guess Lucene has 
to sort all the results and in some cases there are over a million 
matches, could this be the reason ? However these queries still perform 
better with the old code base and Im using TopScoreDocsCollecter so I 
can't see how to improve it, and all queries not just the silly ones 
appear slower.

Code Extract:
     public Results searchLucene(String query, int offset, int limit) 
throws IOException, ParseException {
         IndexSearcher searcher = getIndexSearcher();
         QueryParser parser = getParser();
         TopScoreDocCollector collector = 
TopScoreDocCollector.create(offset + limit, true);
         searcher.search(parser.parse(query), collector);
         searchCount.incrementAndGet();
         return processResults(searcher, collector, offset);
     }
     private Results processResults(IndexSearcher searcher, 
TopScoreDocCollector collector, int offset) throws IOException {
         Results results = new Results();
         TopDocs topDocs = collector.topDocs();
         results.offset = offset;
         results.totalHits = topDocs.totalHits;
         ScoreDoc docs[] = topDocs.scoreDocs;
         float maxScore = topDocs.getMaxScore();
         for (int i = offset; i < docs.length; i++) {
             Result result = new Result();
             result.score = docs[i].score / maxScore;
             result.doc = new MbDocument(searcher.doc(docs[i].doc));
             results.results.add(result);
         }
         return results;
     }

I'm using Lucene 3.0.3, old code base is using 2.9.2, any help 
appreciated on what the problem could be, on on how I should proceed.

thanks Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 07:23:30 2011
Return-Path: <java-user-return-49570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 013FB2681
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 07:23:30 +0000 (UTC)
Received: (qmail 89120 invoked by uid 500); 3 May 2011 07:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89079 invoked by uid 500); 3 May 2011 07:23:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89070 invoked by uid 99); 3 May 2011 07:23:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 07:23:25 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 07:23:17 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LKL00F00Z69IB00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 03 May 2011 09:22:57 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LKL00DKKZ68QB80@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 03 May 2011 09:22:57 +0200 (CEST)
Date: Tue, 03 May 2011 09:22:56 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: questions about the index
In-reply-to: <BANLkTim50Y7eNb4qOCTHydbWDciUe+9VKA@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id:
 <10544_1304407377_ZZh0p4Y7Hki3b.00_4DBFAD50.4070503@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.5.3.71215, pmx10
X-Connecting-IP: 129.70.11.68
References:
 <23410_1304342255_ZZh0p5U5IAVqV.00_4DBEAEEE.1060302@uni-bielefeld.de>
 <BANLkTim50Y7eNb4qOCTHydbWDciUe+9VKA@mail.gmail.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.14) Gecko/20110221
 SUSE/3.1.8 Thunderbird/3.1.8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

thanks for the infos.

As far as I know a write.lock is created from an IndexWriter.
So I have to dig into it why an IndexWriter is created just
on starting solr with an optimized index.
The problem, this is only with a huge index.
And also old parts of the index are not cleaned up.
May be somewhere around the DeletionPolicy...

Regards, Bernd


Am 02.05.2011 17:45, schrieb Michael McCandless:
> On Mon, May 2, 2011 at 9:17 AM, Bernd Fehling
> <bernd.fehling@uni-bielefeld.de>  wrote:
>> Dear list,
>>
>> some questions about the index.
>> (questions go to the lucene list because it is more about the index itself)
>>
>> First my results from CheckIndex:
>>
>> Segments file=segments_l6 numSegments=1 version=FORMAT_3_1 [Lucene 3.1]
>> Checking only these segments: _79s:
>>   1 of 1: name=_79s docCount=28146692
>>     compound=false
>>     hasProx=true
>>     numFiles=8
>>     size (MB)=141.658,104
>>     diagnostics = {optimize=true, mergeFactor=2,
>> os.version=2.6.32.13-0.5-xen,
>>                    os=Linux, lucene.version=3.1.0 1085809 - 2011-03-26
>> 18:06:58,
>>                    source=merge, os.arch=amd64, java.version=1.6.0_21,
>> java.vendor=Sun Microsystems Inc.}
>>     no deletions
>>     test: open reader.........OK
>>     test: fields..............OK [106 fields]
>>     test: field norms.........OK [18 fields]
>>     ....
>>
>> Questions:
>> - the mergeFactor in solrconfig.xml (indexDefaults and mainIndex)
>>   is set to 10. Why is the index reporting mergeFactor=2 ???
>>
>> - what does "optimize=true" mean?
>>   - the index is optimized OR
>>   - the index needs to get optimized
>
> optimize=true means this segment was produced by a merge trigged by an
> optimize() call.  mergeFactor=2 means that 2 segments were merged to
> produce this final segment; it's entirely possible that your
> configured mergeFactor is 10, you called optimize, and the last merge
> was to merge two segments down to this final one.
>
>> - if I start solr with an optimized index I always get a "write.lock" file.
>>   if I use a small index with only a few docs I don't seen this behavior.
>>   any explanation?
>
> That seems odd -- write.lock should be created regardless of what the
> current index looks like, I think.
>
> Mike
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 07:28:37 2011
Return-Path: <java-user-return-49569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0198C2849
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 07:28:37 +0000 (UTC)
Received: (qmail 84460 invoked by uid 500); 3 May 2011 07:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83671 invoked by uid 500); 3 May 2011 07:20:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 14184 invoked by uid 99); 3 May 2011 06:02:58 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of pintu.grijesh@gmail.com)
Date: Mon, 2 May 2011 23:02:31 -0700 (PDT)
From: Grijesh <pintu.grijesh@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1304402551937-2892981.post@n3.nabble.com>
In-Reply-To: <BANLkTimwqcQ_GF2pxE8Hyc_R75NcWDRWbQ@mail.gmail.com>
References: <BANLkTimwqcQ_GF2pxE8Hyc_R75NcWDRWbQ@mail.gmail.com>
Subject: Re: Inquiring part-of-speech (POS) tagging indexing and searching
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

As you have seen the example code for PartOfSpeechTaggingFilter at

http://lucene.apache.org/java/3_0_0/api/core/org/apache/lucene/analysis/package-summary.html

You can use a custom analyzer to inject "metadata" tokens into the index at
the same position as the source tokens.

For example, given the text:
    The     cat     jumped     over     the     dog
your analyzer could emit tokens:
    [the]     [cat,_posNoun] [jumped,_posVerb]     [over]     [the]    
[dog,_posNoun]

where the "_pos...." tokens have a zero position increment to effectively
associate them with the term to which they relate (this is how the example
SynonymTokenizer in the highlighter
package works). The "_pos" prefix is used as a uniquefier for metadata
tokens to avoid any name-clashes with any real content tokens.

Theoretically you could then construct queries where the queries mixed both
data and your part-of-speech metadata eg you could use the position
information based queries to find out
what things normally have a particular verb applied to them:
     "jumped  _posNoun"~3
  or what verbs are commonly associated with a dog (caution advised here):
    "_posVerb the dog"~3
or to use an ambiguous word in a particular context/sense
    "_posVerb track"~1


-----
Thanx: 
Grijesh 
www.gettinhahead.co.in 
--
View this message in context: http://lucene.472066.n3.nabble.com/Inquiring-part-of-speech-POS-tagging-indexing-and-searching-tp2886079p2892981.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 08:06:16 2011
Return-Path: <java-user-return-49571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 04FFB2DF1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 08:06:16 +0000 (UTC)
Received: (qmail 34071 invoked by uid 500); 3 May 2011 08:06:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33849 invoked by uid 500); 3 May 2011 08:06:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33841 invoked by uid 99); 3 May 2011 08:06:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 08:06:11 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 08:06:04 +0000
Received: from compute5.internal (compute5.nyi.mail.srv.osa [10.202.2.45])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 01CFD20BCE
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 04:05:44 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute5.internal (MEProxy); Tue, 03 May 2011 04:05:44 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=KNfAWkkUHKGPrInzbYOqHov6cms=; b=e9zdxvKAGeKxPThLVLNRclZs8w9Ea2WNt6nzdVrZE8ff3PYDcPmGeOysmF5xiPxyAUSsQM5eRQNOxkKbw2k0SJ3Fcm3up8syV90nTGMuqTpHwWeW+NGnRdAsNNnR7dm2zaGFRkJlk8Cy/C/nVO9FtfJXyTcqaV+iPdvxMv19UsY=
X-Sasl-enc: +uxJkLZiZ1xa9hezt2wFeJusJUUdDTR4IYNnEhEqfTIO 1304409943
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 5425F440D10
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 04:05:43 -0400 (EDT)
Message-ID: <4DBFB755.8060706@fastmail.fm>
Date: Tue, 03 May 2011 09:05:41 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene spending alot of time in BooleanScorer2
References: <4DBF31F9.5000608@fastmail.fm>
In-Reply-To: <4DBF31F9.5000608@fastmail.fm>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 02/05/2011 23:36, Paul Taylor wrote:
> Hi
>
> Nearing completion on a new version of a lucene search component for 
> the http://www.musicbrainz.org music database and having a problem 
> with performance. There are a number of indexes each built from data 
> in a database, there is one index for albums, another for artists, and 
> another for tracks (individual songs on albums). Testing search 
> performance on every index they all perform well except for the tracks 
> index which is considerably slower than before.
>
> The code is similar, though there are changes sin all areas, and I 
> have checked with a profiler that it is the lucene search that is 
> taking the time. It is spending most of its time in BooleanScorer2, 
> you can see a breakdown  at http://imagebin.org/151368, is this normal 
> ? I profiled a well performing index and this method didn't even show up.
>
> One thought I had is that some of the test queries are a little silly 
> IMO and contain alot of OR queries both on terms within field and over 
> multiple fields. We only ever return 25 results, but I guess Lucene 
> has to sort all the results and in some cases there are over a million 
> matches, could this be the reason ? However these queries still 
> perform better with the old code base and Im using 
> TopScoreDocsCollecter so I can't see how to improve it, and all 
> queries not just the silly ones appear slower.
>
> Code Extract:
>     public Results searchLucene(String query, int offset, int limit) 
> throws IOException, ParseException {
>         IndexSearcher searcher = getIndexSearcher();
>         QueryParser parser = getParser();
>         TopScoreDocCollector collector = 
> TopScoreDocCollector.create(offset + limit, true);
>         searcher.search(parser.parse(query), collector);
>         searchCount.incrementAndGet();
>         return processResults(searcher, collector, offset);
>     }
>     private Results processResults(IndexSearcher searcher, 
> TopScoreDocCollector collector, int offset) throws IOException {
>         Results results = new Results();
>         TopDocs topDocs = collector.topDocs();
>         results.offset = offset;
>         results.totalHits = topDocs.totalHits;
>         ScoreDoc docs[] = topDocs.scoreDocs;
>         float maxScore = topDocs.getMaxScore();
>         for (int i = offset; i < docs.length; i++) {
>             Result result = new Result();
>             result.score = docs[i].score / maxScore;
>             result.doc = new MbDocument(searcher.doc(docs[i].doc));
>             results.results.add(result);
>         }
>         return results;
>     }
>
> I'm using Lucene 3.0.3, old code base is using 2.9.2, any help 
> appreciated on what the problem could be, on on how I should proceed.
>
> thanks Paul
Rereading the javadocs I realised I was calling thw wrong search method, 
but having made this change it only gived me a 10% improvement.

public Results searchLucene(String query, int offset, int limit) throws 
IOException, ParseException {
         IndexSearcher searcher = getIndexSearcher();
         QueryParser parser = getParser();
         TopDocs topdocs = searcher.search(parser.parse(query), offset + 
limit);
         searchCount.incrementAndGet();
         return processResults(searcher, topdocs, offset);
     }

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 08:53:06 2011
Return-Path: <java-user-return-49572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 59784BCF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 08:53:06 +0000 (UTC)
Received: (qmail 567 invoked by uid 500); 3 May 2011 08:53:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 534 invoked by uid 500); 3 May 2011 08:53:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 525 invoked by uid 99); 3 May 2011 08:53:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 08:53:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 08:52:56 +0000
MIME-version: 1.0
Content-transfer-encoding: 8BIT
Content-type: text/plain; charset=ISO-8859-1; format=flowed
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LKM007003BOOM00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 03 May 2011 10:52:36 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LKM004O13BNGWC0@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Tue, 03 May 2011 10:52:36 +0200 (CEST)
Date: Tue, 03 May 2011 10:52:35 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: questions about the index
In-reply-to:
 <10544_1304407377_ZZh0p4Y7Hki3b.00_4DBFAD50.4070503@uni-bielefeld.de>
To: java-user@lucene.apache.org
Message-id:
 <17294_1304412756_ZZh0p1Zd2oju7.00_4DBFC253.2090503@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.5.3.83627, pmx8
X-Connecting-IP: 129.70.11.68
References:
 <23410_1304342255_ZZh0p5U5IAVqV.00_4DBEAEEE.1060302@uni-bielefeld.de>
 <BANLkTim50Y7eNb4qOCTHydbWDciUe+9VKA@mail.gmail.com>
 <10544_1304407377_ZZh0p4Y7Hki3b.00_4DBFAD50.4070503@uni-bielefeld.de>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.14) Gecko/20110221
 SUSE/3.1.8 Thunderbird/3.1.8
X-Virus-Checked: Checked by ClamAV on apache.org


Well, it is not only with a huge index.
It is only if ReplicationHandler is in use on a master.
If ReplicationHandler is configured to replicateAfter startup it first
sends a commit via IndexWriter to have a "stable" index. The left over
of this operation is the write.lock.
So removing replicateAfter startup removes the write.lock when starting
with an optimized index and replication on a master.

To solve this tiny issue I would recommend to also send an optimize
after sending a commit if the index has state optimize=true.

Bernd


Am 03.05.2011 09:22, schrieb Bernd Fehling:
> Hi Mike,
>
> thanks for the infos.
>
> As far as I know a write.lock is created from an IndexWriter.
> So I have to dig into it why an IndexWriter is created just
> on starting solr with an optimized index.
> The problem, this is only with a huge index.
> And also old parts of the index are not cleaned up.
> May be somewhere around the DeletionPolicy...
>
> Regards, Bernd
>
>
> Am 02.05.2011 17:45, schrieb Michael McCandless:
>> On Mon, May 2, 2011 at 9:17 AM, Bernd Fehling
>> <bernd.fehling@uni-bielefeld.de> wrote:
>>> Dear list,
>>>
>>> some questions about the index.
>>> (questions go to the lucene list because it is more about the index itself)
>>>
>>> First my results from CheckIndex:
>>>
>>> Segments file=segments_l6 numSegments=1 version=FORMAT_3_1 [Lucene 3.1]
>>> Checking only these segments: _79s:
>>> 1 of 1: name=_79s docCount=28146692
>>> compound=false
>>> hasProx=true
>>> numFiles=8
>>> size (MB)=141.658,104
>>> diagnostics = {optimize=true, mergeFactor=2,
>>> os.version=2.6.32.13-0.5-xen,
>>> os=Linux, lucene.version=3.1.0 1085809 - 2011-03-26
>>> 18:06:58,
>>> source=merge, os.arch=amd64, java.version=1.6.0_21,
>>> java.vendor=Sun Microsystems Inc.}
>>> no deletions
>>> test: open reader.........OK
>>> test: fields..............OK [106 fields]
>>> test: field norms.........OK [18 fields]
>>> ....
>>>
>>> Questions:
>>> - the mergeFactor in solrconfig.xml (indexDefaults and mainIndex)
>>> is set to 10. Why is the index reporting mergeFactor=2 ???
>>>
>>> - what does "optimize=true" mean?
>>> - the index is optimized OR
>>> - the index needs to get optimized
>>
>> optimize=true means this segment was produced by a merge trigged by an
>> optimize() call. mergeFactor=2 means that 2 segments were merged to
>> produce this final segment; it's entirely possible that your
>> configured mergeFactor is 10, you called optimize, and the last merge
>> was to merge two segments down to this final one.
>>
>>> - if I start solr with an optimized index I always get a "write.lock" file.
>>> if I use a small index with only a few docs I don't seen this behavior.
>>> any explanation?
>>
>> That seems odd -- write.lock should be created regardless of what the
>> current index looks like, I think.
>>
>> Mike
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

-- 
*************************************************************
Bernd Fehling                Universittsbibliothek Bielefeld
Dipl.-Inform. (FH)                        Universittsstr. 25
Tel. +49 521 106-4060                   Fax. +49 521 106-4052
bernd.fehling@uni-bielefeld.de                33615 Bielefeld

BASE - Bielefeld Academic Search Engine - www.base-search.net
*************************************************************

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 08:57:26 2011
Return-Path: <java-user-return-49573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7F850EF2
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 08:57:26 +0000 (UTC)
Received: (qmail 6961 invoked by uid 500); 3 May 2011 08:57:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6915 invoked by uid 500); 3 May 2011 08:57:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6907 invoked by uid 99); 3 May 2011 08:57:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 08:57:24 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 08:57:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id A8B5DC2180
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 10:56:56 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id CiVfrsJIZ3FA for <java-user@lucene.apache.org>;
	Tue,  3 May 2011 10:56:56 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 494E7C2117
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 10:56:56 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 3 May 2011 10:56:56 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 3 May 2011 10:56:55 +0200
Subject: AW: "fuzzy prefix" search
Thread-Topic: "fuzzy prefix" search
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSAgAAEQGCAAJVRwIAAxg1Q
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry for coming back to my issue. Can anybody explain why my "simple" unit=
 test below fails? Any hint/help appreciated.

Directory directory =3D new RAMDirectory();
IndexWriter indexWriter =3D new IndexWriter( directory, new StandardAnalyze=
r( Version.LUCENE_31 ), IndexWriter.MaxFieldLength.UNLIMITED );
Document document =3D new Document();	=09
document.add( new Field( "test", "Merlot", Field.Store.YES, Field.Index.ANA=
LYZED ) );
indexWriter.addDocument( document );
IndexReader indexReader =3D indexWriter.getReader();
IndexSearcher searcher =3D new IndexSearcher( indexReader );
Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 );
// or Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f);
TopDocs result =3D searcher.search( q, 10 );
Assert.assertEquals( 1, result.totalHits );

- Clemens

> -----Urspr=FCngliche Nachricht-----
> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Gesendet: Montag, 2. Mai 2011 23:01
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> Is it the combination of FuzzyQuery and Term which makes the search to go
> for "word boundaries"?
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Gesendet: Montag, 2. Mai 2011 14:13
> > An: java-user@lucene.apache.org
> > Betreff: AW: "fuzzy prefix" search
> >
> > I tried this too, but unfortunately I only get hits when the search
> > term is a least as long as the word to be looked up.
> >
> > E.g.:
> > ...
> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =3D
> > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
> LOCALE_DE ),
> > 		IndexWriter.MaxFieldLength.UNLIMITED );
> >
> > Document document =3D new Document();
> > document.add( new Field( "test", "Merlot",
> > 		Field.Store.YES, Field.Index.ANALYZED ) );
> indexWriter.addDocument(
> > document );
> >
> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> > searcher =3D new IndexSearcher( indexReader );
> >
> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
> result.totalHits ); ...
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > Gesendet: Montag, 2. Mai 2011 13:50
> > > An: java-user@lucene.apache.org
> > > Betreff: RE: "fuzzy prefix" search
> > >
> > > Hi,
> > >
> > > You can pass an integer to FuzzyQuery which defines the number of
> > > characters that are seen as prefix. So all terms must match this
> > > prefix and the rest of each term is matched using fuzzy.
> > >
> > > Uwe
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > > > -----Original Message-----
> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > Sent: Monday, May 02, 2011 1:47 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: "fuzzy prefix" search
> > > >
> > > > I'd like to search fuzzily but not on a full term.
> > > > E.g.
> > > > I have a text "Merlot del Ticino"
> > > > I'd like
> > > > "mer", "merr", "melo", ... to match.
> > > >
> > > > If I use FuzzyQuery only "merlot,  "merlott" hit. What
> > > > Query-combination should I use?
> > > >
> > > > Thx
> > > > Clemens
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > --
> > > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:06:17 2011
Return-Path: <java-user-return-49574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 897E926A3
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:06:17 +0000 (UTC)
Received: (qmail 19460 invoked by uid 500); 3 May 2011 09:06:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19421 invoked by uid 500); 3 May 2011 09:06:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19413 invoked by uid 99); 3 May 2011 09:06:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:06:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:06:10 +0000
Received: by iym1 with SMTP id 1so8387532iym.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 02:05:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=nimoHVV1/sZq9uq7/QB4f4Ums/T7/tmfoQeiGoOdJPk=;
        b=KNBjGLT3efGy6sTcqPLtOclj08ZcazRRb6wJxomOTAvCLijMdD1Y3SpnSGKp48t1R5
         osjjM8DnVn50O2P1RfyhMzY/h7MzPiiCeVnA9ZfhxzVFmw3lCddhmQvG2TY7T7I90W/s
         U5I5sRmdsg0BrsT6wuaKKqp0urrjqlXLDeITk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=dDqZE9nssZBQcudPKJgr9zWtM0aOLWYXwmFcHfrSxjxa14te7e0oZdRxokm5KDTgLH
         O/226U25u+BthPS/ydAeJhD7u5TRngblP8V2sVGaAsM0UYlRCiWDw/HtwMnhmWgtwkIn
         Ym2Gckzer919pEgjyxgCeK1qR5r9MmTt80p8Q=
Received: by 10.231.117.157 with SMTP id r29mr7044481ibq.128.1304413550121;
 Tue, 03 May 2011 02:05:50 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.206.147 with HTTP; Tue, 3 May 2011 02:05:30 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 3 May 2011 10:05:30 +0100
Message-ID: <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
Subject: Re: "fuzzy prefix" search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Mer !=3D mer.  The latter will be what is indexed because
StandardAnalyzer calls LowerCaseFilter.

--
Ian.


On Tue, May 3, 2011 at 9:56 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> Sorry for coming back to my issue. Can anybody explain why my "simple" un=
it test below fails? Any hint/help appreciated.
>
> Directory directory =3D new RAMDirectory();
> IndexWriter indexWriter =3D new IndexWriter( directory, new StandardAnaly=
zer( Version.LUCENE_31 ), IndexWriter.MaxFieldLength.UNLIMITED );
> Document document =3D new Document();
> document.add( new Field( "test", "Merlot", Field.Store.YES, Field.Index.A=
NALYZED ) );
> indexWriter.addDocument( document );
> IndexReader indexReader =3D indexWriter.getReader();
> IndexSearcher searcher =3D new IndexSearcher( indexReader );
> Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 );
> // or Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f);
> TopDocs result =3D searcher.search( q, 10 );
> Assert.assertEquals( 1, result.totalHits );
>
> - Clemens
>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> Gesendet: Montag, 2. Mai 2011 23:01
>> An: java-user@lucene.apache.org
>> Betreff: AW: "fuzzy prefix" search
>>
>> Is it the combination of FuzzyQuery and Term which makes the search to g=
o
>> for "word boundaries"?
>>
>> > -----Urspr=FCngliche Nachricht-----
>> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> > Gesendet: Montag, 2. Mai 2011 14:13
>> > An: java-user@lucene.apache.org
>> > Betreff: AW: "fuzzy prefix" search
>> >
>> > I tried this too, but unfortunately I only get hits when the search
>> > term is a least as long as the word to be looked up.
>> >
>> > E.g.:
>> > ...
>> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D
>> > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
>> LOCALE_DE ),
>> > =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter.MaxFieldLength.UNLIMITED );
>> >
>> > Document document =3D new Document();
>> > document.add( new Field( "test", "Merlot",
>> > =A0 =A0 =A0 =A0 =A0 =A0 Field.Store.YES, Field.Index.ANALYZED ) );
>> indexWriter.addDocument(
>> > document );
>> >
>> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
>> > searcher =3D new IndexSearcher( indexReader );
>> >
>> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
>> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
>> result.totalHits ); ...
>> >
>> > > -----Urspr=FCngliche Nachricht-----
>> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
>> > > Gesendet: Montag, 2. Mai 2011 13:50
>> > > An: java-user@lucene.apache.org
>> > > Betreff: RE: "fuzzy prefix" search
>> > >
>> > > Hi,
>> > >
>> > > You can pass an integer to FuzzyQuery which defines the number of
>> > > characters that are seen as prefix. So all terms must match this
>> > > prefix and the rest of each term is matched using fuzzy.
>> > >
>> > > Uwe
>> > >
>> > > -----
>> > > Uwe Schindler
>> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
>> > > eMail: uwe@thetaphi.de
>> > >
>> > > > -----Original Message-----
>> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> > > > Sent: Monday, May 02, 2011 1:47 PM
>> > > > To: java-user@lucene.apache.org
>> > > > Subject: "fuzzy prefix" search
>> > > >
>> > > > I'd like to search fuzzily but not on a full term.
>> > > > E.g.
>> > > > I have a text "Merlot del Ticino"
>> > > > I'd like
>> > > > "mer", "merr", "melo", ... to match.
>> > > >
>> > > > If I use FuzzyQuery only "merlot, =A0"merlott" hit. What
>> > > > Query-combination should I use?
>> > > >
>> > > > Thx
>> > > > Clemens
>> > > >
>> > > >
>> > > > ------------------------------------------------------------------
>> > > > --
>> > > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> > >
>> > >
>> > >
>> > > --------------------------------------------------------------------
>> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:10:36 2011
Return-Path: <java-user-return-49575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2C14A27B7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:10:36 +0000 (UTC)
Received: (qmail 23748 invoked by uid 500); 3 May 2011 09:10:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23691 invoked by uid 500); 3 May 2011 09:10:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23683 invoked by uid 99); 3 May 2011 09:10:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:10:34 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:10:27 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 9A909C2180
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 11:10:07 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id KZ511DdPUrE7 for <java-user@lucene.apache.org>;
	Tue,  3 May 2011 11:10:07 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 5A7A4C2117
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 11:10:07 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 3 May 2011 11:10:07 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 3 May 2011 11:10:05 +0200
Subject: AW: "fuzzy prefix" search
Thread-Topic: "fuzzy prefix" search
Thread-Index: AcwJcV2XJMP8TubnTUiHInqXSUI3/wAAF4Wg
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
In-Reply-To: <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Unfortunately lowercasing doesn't help.=20
Also, doesn't the FuzzyQuery ignore casing?

> -----Urspr=FCngliche Nachricht-----
> Von: Ian Lea [mailto:ian.lea@gmail.com]
> Gesendet: Dienstag, 3. Mai 2011 11:06
> An: java-user@lucene.apache.org
> Betreff: Re: "fuzzy prefix" search
>=20
> Mer !=3D mer.  The latter will be what is indexed because StandardAnalyze=
r
> calls LowerCaseFilter.
>=20
> --
> Ian.
>=20
>=20
> On Tue, May 3, 2011 at 9:56 AM, Clemens Wyss <clemensdev@mysign.ch>
> wrote:
> > Sorry for coming back to my issue. Can anybody explain why my "simple"
> unit test below fails? Any hint/help appreciated.
> >
> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =3D
> > new IndexWriter( directory, new StandardAnalyzer( Version.LUCENE_31 ),
> > IndexWriter.MaxFieldLength.UNLIMITED ); Document document =3D new
> > Document(); document.add( new Field( "test", "Merlot",
> > Field.Store.YES, Field.Index.ANALYZED ) ); indexWriter.addDocument(
> > document ); IndexReader indexReader =3D indexWriter.getReader();
> > IndexSearcher searcher =3D new IndexSearcher( indexReader ); Query q =
=3D
> > new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 ); // or Query
> > q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f); TopDocs result =
=3D
> > searcher.search( q, 10 ); Assert.assertEquals( 1, result.totalHits );
> >
> > - Clemens
> >
> >> -----Urspr=FCngliche Nachricht-----
> >> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> >> Gesendet: Montag, 2. Mai 2011 23:01
> >> An: java-user@lucene.apache.org
> >> Betreff: AW: "fuzzy prefix" search
> >>
> >> Is it the combination of FuzzyQuery and Term which makes the search
> >> to go for "word boundaries"?
> >>
> >> > -----Urspr=FCngliche Nachricht-----
> >> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> >> > Gesendet: Montag, 2. Mai 2011 14:13
> >> > An: java-user@lucene.apache.org
> >> > Betreff: AW: "fuzzy prefix" search
> >> >
> >> > I tried this too, but unfortunately I only get hits when the search
> >> > term is a least as long as the word to be looked up.
> >> >
> >> > E.g.:
> >> > ...
> >> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D
> >> > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
> >> LOCALE_DE ),
> >> > =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter.MaxFieldLength.UNLIMITED );
> >> >
> >> > Document document =3D new Document(); document.add( new Field(
> >> > "test", "Merlot",
> >> > =A0 =A0 =A0 =A0 =A0 =A0 Field.Store.YES, Field.Index.ANALYZED ) );
> >> indexWriter.addDocument(
> >> > document );
> >> >
> >> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> >> > searcher =3D new IndexSearcher( indexReader );
> >> >
> >> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
> >> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
> >> result.totalHits ); ...
> >> >
> >> > > -----Urspr=FCngliche Nachricht-----
> >> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> >> > > Gesendet: Montag, 2. Mai 2011 13:50
> >> > > An: java-user@lucene.apache.org
> >> > > Betreff: RE: "fuzzy prefix" search
> >> > >
> >> > > Hi,
> >> > >
> >> > > You can pass an integer to FuzzyQuery which defines the number of
> >> > > characters that are seen as prefix. So all terms must match this
> >> > > prefix and the rest of each term is matched using fuzzy.
> >> > >
> >> > > Uwe
> >> > >
> >> > > -----
> >> > > Uwe Schindler
> >> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> >> > > eMail: uwe@thetaphi.de
> >> > >
> >> > > > -----Original Message-----
> >> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> >> > > > Sent: Monday, May 02, 2011 1:47 PM
> >> > > > To: java-user@lucene.apache.org
> >> > > > Subject: "fuzzy prefix" search
> >> > > >
> >> > > > I'd like to search fuzzily but not on a full term.
> >> > > > E.g.
> >> > > > I have a text "Merlot del Ticino"
> >> > > > I'd like
> >> > > > "mer", "merr", "melo", ... to match.
> >> > > >
> >> > > > If I use FuzzyQuery only "merlot, =A0"merlott" hit. What
> >> > > > Query-combination should I use?
> >> > > >
> >> > > > Thx
> >> > > > Clemens
> >> > > >
> >> > > >
> >> > > > ---------------------------------------------------------------
> >> > > > ---
> >> > > > --
> >> > > > - To unsubscribe, e-mail:
> >> > > > java-user-unsubscribe@lucene.apache.org
> >> > > > For additional commands, e-mail:
> >> > > > java-user-help@lucene.apache.org
> >> > >
> >> > >
> >> > >
> >> > > -----------------------------------------------------------------
> >> > > ---
> >> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> > -------------------------------------------------------------------
> >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:22:20 2011
Return-Path: <java-user-return-49576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6B1BE2E8D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:22:20 +0000 (UTC)
Received: (qmail 35906 invoked by uid 500); 3 May 2011 09:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35869 invoked by uid 500); 3 May 2011 09:22:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35854 invoked by uid 99); 3 May 2011 09:22:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:22:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:22:13 +0000
Received: by iwr19 with SMTP id 19so8412356iwr.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 02:21:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=rZcqe8eJVR9OzDLAeKOWhotYtk2WBIQ5R+KnwXrBdBA=;
        b=bb2pOC1bqia4waOipNMeMpEbNIfd5zrOAjBZnsDD5KyYx9EeRU58plsaomQEG3rcz8
         9KfILk1mBBc/npkb2r8xAcGSDGuHkBoGv1u9MImYiGvn/Wgp+40QfW9gqzxlAaTH0XMW
         wsVhSf2dv02xic74xcuE/rMm0rA13hTd6bFW0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=KFynYonGlQgz93ApwXo5xIZ3fRh7GTWe3QA/HDmmVbLZYo7+bxbW4qWMKpKSkUXpem
         B+6Xu8r9WnWarbtYLvIg7BjNX2+tAs2f6k6353mcq/m+pFzak0YupgdQKo28S4MT7KcA
         BOts5+5HTGa2vCTdOlo4trAIUKHZskYgrANbo=
Received: by 10.231.253.4 with SMTP id my4mr736506ibb.153.1304414513125; Tue,
 03 May 2011 02:21:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.206.147 with HTTP; Tue, 3 May 2011 02:21:33 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 3 May 2011 10:21:33 +0100
Message-ID: <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
Subject: Re: "fuzzy prefix" search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I'd assumed that FuzzyQuery wouldn't ignore case but I could be wrong.
 What would be the edit distance between "mer" and "merlot"? Would it
be less that 1.5 which I reckon would be the value of length(term)*0.5
as detailed in the javadocs?  Seems unlikely, but I don't really know
anything about the Levenshtein (edit distance) algorithm as used by
FuzzyQuery.  Wouldn't a PrefixQuery be more appropriate here?


--
Ian.

On Tue, May 3, 2011 at 10:10 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> Unfortunately lowercasing doesn't help.
> Also, doesn't the FuzzyQuery ignore casing?
>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Ian Lea [mailto:ian.lea@gmail.com]
>> Gesendet: Dienstag, 3. Mai 2011 11:06
>> An: java-user@lucene.apache.org
>> Betreff: Re: "fuzzy prefix" search
>>
>> Mer !=3D mer. =A0The latter will be what is indexed because StandardAnal=
yzer
>> calls LowerCaseFilter.
>>
>> --
>> Ian.
>>
>>
>> On Tue, May 3, 2011 at 9:56 AM, Clemens Wyss <clemensdev@mysign.ch>
>> wrote:
>> > Sorry for coming back to my issue. Can anybody explain why my "simple"
>> unit test below fails? Any hint/help appreciated.
>> >
>> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D
>> > new IndexWriter( directory, new StandardAnalyzer( Version.LUCENE_31 ),
>> > IndexWriter.MaxFieldLength.UNLIMITED ); Document document =3D new
>> > Document(); document.add( new Field( "test", "Merlot",
>> > Field.Store.YES, Field.Index.ANALYZED ) ); indexWriter.addDocument(
>> > document ); IndexReader indexReader =3D indexWriter.getReader();
>> > IndexSearcher searcher =3D new IndexSearcher( indexReader ); Query q =
=3D
>> > new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 ); // or Query
>> > q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f); TopDocs result=
 =3D
>> > searcher.search( q, 10 ); Assert.assertEquals( 1, result.totalHits );
>> >
>> > - Clemens
>> >
>> >> -----Urspr=FCngliche Nachricht-----
>> >> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> >> Gesendet: Montag, 2. Mai 2011 23:01
>> >> An: java-user@lucene.apache.org
>> >> Betreff: AW: "fuzzy prefix" search
>> >>
>> >> Is it the combination of FuzzyQuery and Term which makes the search
>> >> to go for "word boundaries"?
>> >>
>> >> > -----Urspr=FCngliche Nachricht-----
>> >> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> >> > Gesendet: Montag, 2. Mai 2011 14:13
>> >> > An: java-user@lucene.apache.org
>> >> > Betreff: AW: "fuzzy prefix" search
>> >> >
>> >> > I tried this too, but unfortunately I only get hits when the search
>> >> > term is a least as long as the word to be looked up.
>> >> >
>> >> > E.g.:
>> >> > ...
>> >> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter=
 =3D
>> >> > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
>> >> LOCALE_DE ),
>> >> > =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter.MaxFieldLength.UNLIMITED );
>> >> >
>> >> > Document document =3D new Document(); document.add( new Field(
>> >> > "test", "Merlot",
>> >> > =A0 =A0 =A0 =A0 =A0 =A0 Field.Store.YES, Field.Index.ANALYZED ) );
>> >> indexWriter.addDocument(
>> >> > document );
>> >> >
>> >> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
>> >> > searcher =3D new IndexSearcher( indexReader );
>> >> >
>> >> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
>> >> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( 1=
,
>> >> result.totalHits ); ...
>> >> >
>> >> > > -----Urspr=FCngliche Nachricht-----
>> >> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
>> >> > > Gesendet: Montag, 2. Mai 2011 13:50
>> >> > > An: java-user@lucene.apache.org
>> >> > > Betreff: RE: "fuzzy prefix" search
>> >> > >
>> >> > > Hi,
>> >> > >
>> >> > > You can pass an integer to FuzzyQuery which defines the number of
>> >> > > characters that are seen as prefix. So all terms must match this
>> >> > > prefix and the rest of each term is matched using fuzzy.
>> >> > >
>> >> > > Uwe
>> >> > >
>> >> > > -----
>> >> > > Uwe Schindler
>> >> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
>> >> > > eMail: uwe@thetaphi.de
>> >> > >
>> >> > > > -----Original Message-----
>> >> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> >> > > > Sent: Monday, May 02, 2011 1:47 PM
>> >> > > > To: java-user@lucene.apache.org
>> >> > > > Subject: "fuzzy prefix" search
>> >> > > >
>> >> > > > I'd like to search fuzzily but not on a full term.
>> >> > > > E.g.
>> >> > > > I have a text "Merlot del Ticino"
>> >> > > > I'd like
>> >> > > > "mer", "merr", "melo", ... to match.
>> >> > > >
>> >> > > > If I use FuzzyQuery only "merlot, =A0"merlott" hit. What
>> >> > > > Query-combination should I use?
>> >> > > >
>> >> > > > Thx
>> >> > > > Clemens
>> >> > > >
>> >> > > >
>> >> > > > ---------------------------------------------------------------
>> >> > > > ---
>> >> > > > --
>> >> > > > - To unsubscribe, e-mail:
>> >> > > > java-user-unsubscribe@lucene.apache.org
>> >> > > > For additional commands, e-mail:
>> >> > > > java-user-help@lucene.apache.org
>> >> > >
>> >> > >
>> >> > >
>> >> > > -----------------------------------------------------------------
>> >> > > ---
>> >> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> > -------------------------------------------------------------------
>> >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:26:00 2011
Return-Path: <java-user-return-49577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4F2732F95
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:26:00 +0000 (UTC)
Received: (qmail 41012 invoked by uid 500); 3 May 2011 09:25:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40967 invoked by uid 500); 3 May 2011 09:25:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40959 invoked by uid 99); 3 May 2011 09:25:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:25:58 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:25:53 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 39D31C2180
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 11:25:32 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uY-9XL70wKzP for <java-user@lucene.apache.org>;
	Tue,  3 May 2011 11:25:31 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 62A1DC2117
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 11:25:31 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 3 May 2011 11:25:31 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 3 May 2011 11:25:30 +0200
Subject: AW: "fuzzy prefix" search
Thread-Topic: "fuzzy prefix" search
Thread-Index: AcwJc5wlYOMZa13ZSPmj/jDGPrlXEwAABSZQ
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
 <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
In-Reply-To: <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

>PrefixQuery
I'd like the combination of prefix and fuzzy ;-) because people could also =
type "menlo" or "m=E4rl" and in any of these cases I'd like to get a hit on=
 Merlot (for suggesting Merlot)

> -----Urspr=FCngliche Nachricht-----
> Von: Ian Lea [mailto:ian.lea@gmail.com]
> Gesendet: Dienstag, 3. Mai 2011 11:22
> An: java-user@lucene.apache.org
> Betreff: Re: "fuzzy prefix" search
>=20
> I'd assumed that FuzzyQuery wouldn't ignore case but I could be wrong.
>  What would be the edit distance between "mer" and "merlot"? Would it be
> less that 1.5 which I reckon would be the value of length(term)*0.5 as
> detailed in the javadocs?  Seems unlikely, but I don't really know anythi=
ng
> about the Levenshtein (edit distance) algorithm as used by FuzzyQuery.
> Wouldn't a PrefixQuery be more appropriate here?
>=20
>=20
> --
> Ian.
>=20
> On Tue, May 3, 2011 at 10:10 AM, Clemens Wyss <clemensdev@mysign.ch>
> wrote:
> > Unfortunately lowercasing doesn't help.
> > Also, doesn't the FuzzyQuery ignore casing?
> >
> >> -----Urspr=FCngliche Nachricht-----
> >> Von: Ian Lea [mailto:ian.lea@gmail.com]
> >> Gesendet: Dienstag, 3. Mai 2011 11:06
> >> An: java-user@lucene.apache.org
> >> Betreff: Re: "fuzzy prefix" search
> >>
> >> Mer !=3D mer. =A0The latter will be what is indexed because
> >> StandardAnalyzer calls LowerCaseFilter.
> >>
> >> --
> >> Ian.
> >>
> >>
> >> On Tue, May 3, 2011 at 9:56 AM, Clemens Wyss
> <clemensdev@mysign.ch>
> >> wrote:
> >> > Sorry for coming back to my issue. Can anybody explain why my
> "simple"
> >> unit test below fails? Any hint/help appreciated.
> >> >
> >> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D
> >> > new IndexWriter( directory, new StandardAnalyzer(
> Version.LUCENE_31
> >> > ), IndexWriter.MaxFieldLength.UNLIMITED ); Document document =3D
> new
> >> > Document(); document.add( new Field( "test", "Merlot",
> >> > Field.Store.YES, Field.Index.ANALYZED ) ); indexWriter.addDocument(
> >> > document ); IndexReader indexReader =3D indexWriter.getReader();
> >> > IndexSearcher searcher =3D new IndexSearcher( indexReader ); Query q
> >> > =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 ); // or
> >> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f); TopDoc=
s
> >> > result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
> >> > result.totalHits );
> >> >
> >> > - Clemens
> >> >
> >> >> -----Urspr=FCngliche Nachricht-----
> >> >> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> >> >> Gesendet: Montag, 2. Mai 2011 23:01
> >> >> An: java-user@lucene.apache.org
> >> >> Betreff: AW: "fuzzy prefix" search
> >> >>
> >> >> Is it the combination of FuzzyQuery and Term which makes the
> >> >> search to go for "word boundaries"?
> >> >>
> >> >> > -----Urspr=FCngliche Nachricht-----
> >> >> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> >> >> > Gesendet: Montag, 2. Mai 2011 14:13
> >> >> > An: java-user@lucene.apache.org
> >> >> > Betreff: AW: "fuzzy prefix" search
> >> >> >
> >> >> > I tried this too, but unfortunately I only get hits when the
> >> >> > search term is a least as long as the word to be looked up.
> >> >> >
> >> >> > E.g.:
> >> >> > ...
> >> >> > Directory directory =3D new RAMDirectory(); IndexWriter
> >> >> > indexWriter =3D new IndexWriter( directory,
> >> >> > IndexManager.getIndexingAnalyzer(
> >> >> LOCALE_DE ),
> >> >> > =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter.MaxFieldLength.UNLIMITED );
> >> >> >
> >> >> > Document document =3D new Document(); document.add( new Field(
> >> >> > "test", "Merlot",
> >> >> > =A0 =A0 =A0 =A0 =A0 =A0 Field.Store.YES, Field.Index.ANALYZED ) )=
;
> >> >> indexWriter.addDocument(
> >> >> > document );
> >> >> >
> >> >> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearche=
r
> >> >> > searcher =3D new IndexSearcher( indexReader );
> >> >> >
> >> >> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
> >> >> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals(
> >> >> > 1,
> >> >> result.totalHits ); ...
> >> >> >
> >> >> > > -----Urspr=FCngliche Nachricht-----
> >> >> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> >> >> > > Gesendet: Montag, 2. Mai 2011 13:50
> >> >> > > An: java-user@lucene.apache.org
> >> >> > > Betreff: RE: "fuzzy prefix" search
> >> >> > >
> >> >> > > Hi,
> >> >> > >
> >> >> > > You can pass an integer to FuzzyQuery which defines the number
> >> >> > > of characters that are seen as prefix. So all terms must match
> >> >> > > this prefix and the rest of each term is matched using fuzzy.
> >> >> > >
> >> >> > > Uwe
> >> >> > >
> >> >> > > -----
> >> >> > > Uwe Schindler
> >> >> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> >> >> > > eMail: uwe@thetaphi.de
> >> >> > >
> >> >> > > > -----Original Message-----
> >> >> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> >> >> > > > Sent: Monday, May 02, 2011 1:47 PM
> >> >> > > > To: java-user@lucene.apache.org
> >> >> > > > Subject: "fuzzy prefix" search
> >> >> > > >
> >> >> > > > I'd like to search fuzzily but not on a full term.
> >> >> > > > E.g.
> >> >> > > > I have a text "Merlot del Ticino"
> >> >> > > > I'd like
> >> >> > > > "mer", "merr", "melo", ... to match.
> >> >> > > >
> >> >> > > > If I use FuzzyQuery only "merlot, =A0"merlott" hit. What
> >> >> > > > Query-combination should I use?
> >> >> > > >
> >> >> > > > Thx
> >> >> > > > Clemens
> >> >> > > >
> >> >> > > >
> >> >> > > > ------------------------------------------------------------
> >> >> > > > ---
> >> >> > > > ---
> >> >> > > > --
> >> >> > > > - To unsubscribe, e-mail:
> >> >> > > > java-user-unsubscribe@lucene.apache.org
> >> >> > > > For additional commands, e-mail:
> >> >> > > > java-user-help@lucene.apache.org
> >> >> > >
> >> >> > >
> >> >> > >
> >> >> > > --------------------------------------------------------------
> >> >> > > ---
> >> >> > > ---
> >> >> > > - To unsubscribe, e-mail:
> >> >> > > java-user-unsubscribe@lucene.apache.org
> >> >> > > For additional commands, e-mail:
> >> >> > > java-user-help@lucene.apache.org
> >> >> >
> >> >> >
> >> >> > ----------------------------------------------------------------
> >> >> > ---
> >> >> > -- To unsubscribe, e-mail:
> >> >> > java-user-unsubscribe@lucene.apache.org
> >> >> > For additional commands, e-mail:
> >> >> > java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >> ------------------------------------------------------------------
> >> >> --- To unsubscribe, e-mail:
> >> >> java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >> > -------------------------------------------------------------------
> >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:36:11 2011
Return-Path: <java-user-return-49578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 13FA228A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:36:11 +0000 (UTC)
Received: (qmail 54016 invoked by uid 500); 3 May 2011 09:36:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53970 invoked by uid 500); 3 May 2011 09:36:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53962 invoked by uid 99); 3 May 2011 09:36:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:36:09 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.bamford@talktalk.net designates 62.24.128.240 as permitted sender)
Received: from [62.24.128.240] (HELO out1.ip04ir2.opaltelecom.net) (62.24.128.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:35:58 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApwEAKTLv03O3uJ3/2dsb2JhbAClKIFZpmWdbYYCBJ1m
X-IronPort-AV: E=Sophos;i="4.64,308,1301871600"; 
   d="scan'208";a="331368471"
Received: from frr3-l27.sis.aol.com (HELO FRR3-L27) ([206.222.226.119])
  by out1.ip04ir2.opaltelecom.net with ESMTP; 03 May 2011 10:35:37 +0100
To: java-user@lucene.apache.org
Subject: Speed up payload loading?
Date: Tue, 03 May 2011 05:35:37 -0400
X-MB-Message-Source: WebUI
X-MB-Message-Type: User
MIME-Version: 1.0
From: Chris Bamford <chris.bamford@talktalk.net>
Content-Type: multipart/alternative; 
 boundary="--------MB_8CDD78C97DCFF33_11F0_3D74_FRR3-L27.sysops.aol.com"
X-Mailer: Webmail 33646-STANDARD
Received: from 213.235.60.14 by FRR3-L27.sysops.aol.com (206.222.226.119) with HTTP (WebMailUI); Tue, 03 May 2011 05:35:36 -0400
Message-Id: <8CDD78C978C10D9-11F0-10D1@FRR3-L27.sysops.aol.com>
X-Virus-Checked: Checked by ClamAV on apache.org

----------MB_8CDD78C97DCFF33_11F0_3D74_FRR3-L27.sysops.aol.com
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

Hi,=0A=0AI=20have=20been=20experimenting=20with=20using=20a=20int=20payload=20as=
=20a=20unique=20identifier,=20one=20per=20Document.=20=20I=20have=20successfully=
=20loaded=20them=20in=20using=20the=20TermPositions=20API=20with=20something=20l=
ike:=0A=0A=20=20=20=20public=20static=20void=20loadPayloadIntArray(IndexReader=20=
reader,=20Term=20term,=20int[]=20intArray,=20int=20from,=20int=20to)=20throws=20=
Exception=20{=0A=20=20=20=20=20=20=20=20TermPositions=20tp=20=3D=20null;=0A=20=20=
=20=20=20=20=20=20byte[]=20dataBuffer=20=3D=20new=20byte[4];=0A=20=20=20=20=20=20=
=20=20int=20intVal=20=3D=20-1;=0A=0A=20=20=20=20=20=20=20=20//System.out.println=
("loadPayloadIntArray("=20+=20from=20+=20"=20->=20"=20+=20to=20+=20")");=0A=20=20=
=20=20=20=20=20=20try=20{=0A=20=20=20=20=20=20=20=20=20=20=20=20tp=20=3D=20reade=
r.termPositions(term);=0A=20=20=20=20=20=20=20=20=20=20=20=20tp.skipTo(from);=0A=
=20=20=20=20=20=20=20=20=20=20=20=20do=20{=0A=20=20=20=20=20=20=20=20=20=20=20=20=
=20=20=20=20tp.nextPosition();=0A=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=
tp.getPayload(dataBuffer,=200);=0A=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=20=
intVal=20=3D=20PayloadHelper.decodeInt(dataBuffer,=200);=0A=20=20=20=20=20=20=20=
=20=20=20=20=20=20=20=20=20intArray[from]=20=3D=20intVal;=0A=20=20=20=20=20=20=20=
=20=20=20=20=20}=20while=20(++from=20<=3D=20to=20&&=20tp.next());=0A=20=20=20=20=
=20=20=20=20}=0A=20=20=20=20=20=20=20=20finally=20{=0A=20=20=20=20=20=20=20=20=20=
=20=20=20if=20(tp=20!=3D=20null)=20{=0A=20=20=20=20=20=20=20=20=20=20=20=20=20=20=
=20=20tp.close();=0A=20=20=20=20=20=20=20=20=20=20=20=20}=0A=20=20=20=20=20=20=20=
=20}=0A=20=20=20=20}=0A=0A=20=0AThis=20works=20fine,=20it=20even=20allows=20me=20=
to=20use=20several=20threads=20in=20parallel=20to=20each=20load=20a=20part=20of=20=
the=20array,=20thus=20reducing=20the=20time=20taken.=0AHowever,=20performance=20=
is=20not=20as=20great=20as=20I=20would=20like=20-=20with=20indexes=20of=20~4m=20=
docs=20it=20can=20take=20over=203=20seconds.=20=20(These=20are=20cold=20start=20=
times,=20no=20reader=20cacheing=20and=20OS=20read=20caches=20completely=20flushe=
d).=20=20=20Increasing=20the=20number=20of=20loader=20threads=20(calling=20the=20=
method=20shown)=20doesn't=20help=20much,=20which=20makes=20me=20suspect=20there=20=
is=20some=20synchronized=20stuff=20going=20on=20inside=20TermPositions.=0A=0ASo=20=
...=20onto=20my=20question(s):=0A=0A1)=20Because=20this=20approach=20is=20still=20=
faster=20than=20using=20FieldCache,=20my=20belief=20is=20that=20payloads=20are=20=
stored=20sequentially=20in=20the=20index=20-=20is=20this=20true?=0A2)=20If=20so,=
=20is=20there=20some=20raw,=20lower=20level=20I/O=20I=20can=20call=20which=20wil=
l=20allow=20me=20to=20load=20much=20bigger=20chunks=20of=20payload=20rather=20th=
an=20a=20single=20int=20at=20a=20time?=20=20=0A=0AThanks=20for=20any=20help=20in=
=20this=20area.=0A=0AChris=0A=0A=0A=20=0A=0A=0A
----------MB_8CDD78C97DCFF33_11F0_3D74_FRR3-L27.sysops.aol.com--


From java-user-return-49579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:43:55 2011
Return-Path: <java-user-return-49579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 16A3E2A0A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:43:55 +0000 (UTC)
Received: (qmail 62940 invoked by uid 500); 3 May 2011 09:43:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62902 invoked by uid 500); 3 May 2011 09:43:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62894 invoked by uid 99); 3 May 2011 09:43:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:43:52 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [87.193.196.100] (HELO mail1.postdirekt.de) (87.193.196.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:43:45 +0000
Received: from S03BO006.postdirekt.loc (unknown [172.22.233.4])
	by mail1.postdirekt.de (Postfix) with ESMTP id 0A6681702FF
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 11:43:25 +0200 (CEST)
Received: from [172.22.233.4] by [87.193.196.98] with ESMTP; Tue, 03 May 2011 12:08:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: "fuzzy prefix" search
Date: Tue, 3 May 2011 11:43:24 +0200
Message-ID: <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBE9@S03BO006.postdirekt.loc>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: "fuzzy prefix" search
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSAgAAEQGCAAJVRwIAAxg1QgAAOKhA=
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp> <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
From: "Biedermann,S.,Fa. Post Direkt" <S.Biedermann@postdirekt.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried=20

Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.499f);


Sven


-----Urspr=FCngliche Nachricht-----
Von: Clemens Wyss [mailto:clemensdev@mysign.ch]=20
Gesendet: Dienstag, 3. Mai 2011 10:57
An: java-user@lucene.apache.org
Betreff: AW: "fuzzy prefix" search

Sorry for coming back to my issue. Can anybody explain why my "simple" =
unit test below fails? Any hint/help appreciated.

Directory directory =3D new RAMDirectory();
IndexWriter indexWriter =3D new IndexWriter( directory, new =
StandardAnalyzer( Version.LUCENE_31 ), =
IndexWriter.MaxFieldLength.UNLIMITED );
Document document =3D new Document();	=09
document.add( new Field( "test", "Merlot", Field.Store.YES, =
Field.Index.ANALYZED ) );
indexWriter.addDocument( document );
IndexReader indexReader =3D indexWriter.getReader();
IndexSearcher searcher =3D new IndexSearcher( indexReader );
Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 );
// or Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f);
TopDocs result =3D searcher.search( q, 10 );
Assert.assertEquals( 1, result.totalHits );

- Clemens

> -----Urspr=FCngliche Nachricht-----
> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Gesendet: Montag, 2. Mai 2011 23:01
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> Is it the combination of FuzzyQuery and Term which makes the search to =
go
> for "word boundaries"?
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Gesendet: Montag, 2. Mai 2011 14:13
> > An: java-user@lucene.apache.org
> > Betreff: AW: "fuzzy prefix" search
> >
> > I tried this too, but unfortunately I only get hits when the search
> > term is a least as long as the word to be looked up.
> >
> > E.g.:
> > ...
> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D
> > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
> LOCALE_DE ),
> > 		IndexWriter.MaxFieldLength.UNLIMITED );
> >
> > Document document =3D new Document();
> > document.add( new Field( "test", "Merlot",
> > 		Field.Store.YES, Field.Index.ANALYZED ) );
> indexWriter.addDocument(
> > document );
> >
> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> > searcher =3D new IndexSearcher( indexReader );
> >
> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
> result.totalHits ); ...
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > Gesendet: Montag, 2. Mai 2011 13:50
> > > An: java-user@lucene.apache.org
> > > Betreff: RE: "fuzzy prefix" search
> > >
> > > Hi,
> > >
> > > You can pass an integer to FuzzyQuery which defines the number of
> > > characters that are seen as prefix. So all terms must match this
> > > prefix and the rest of each term is matched using fuzzy.
> > >
> > > Uwe
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > > > -----Original Message-----
> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > Sent: Monday, May 02, 2011 1:47 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: "fuzzy prefix" search
> > > >
> > > > I'd like to search fuzzily but not on a full term.
> > > > E.g.
> > > > I have a text "Merlot del Ticino"
> > > > I'd like
> > > > "mer", "merr", "melo", ... to match.
> > > >
> > > > If I use FuzzyQuery only "merlot,  "merlott" hit. What
> > > > Query-combination should I use?
> > > >
> > > > Thx
> > > > Clemens
> > > >
> > > >
> > > > =
------------------------------------------------------------------
> > > > --
> > > > - To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > >
> > >
> > >
> > > =
--------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:45:16 2011
Return-Path: <java-user-return-49580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9FC722BD4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:45:16 +0000 (UTC)
Received: (qmail 65195 invoked by uid 500); 3 May 2011 09:45:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65148 invoked by uid 500); 3 May 2011 09:45:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65139 invoked by uid 99); 3 May 2011 09:45:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:45:14 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:45:09 +0000
Received: by iwr19 with SMTP id 19so8428265iwr.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 02:44:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=XWb9MiLZqA56YmcoYFlF5/YGaCzmbHjMabmXCx4msGM=;
        b=Cg9DqXYlHEwky96vNC5wfsEdOzLeeQ8PldpUFRJDcGhZFerZ1PwVb950vQMWxLoF3G
         hTHA75fE6QvcmnH54xToHqHf18RmWMozC18xzOS5n34igYeickNgMjHx4V4/ID/UCmx2
         FPLXf4SVSgpzQpXYyYjm9q4z0f24ugra0m16s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Oyn0t1uU5NCByOWjPOtRI9qvh13R7kxi++pvdHosJaVZurwttqsazJTS5d7d6QTMbT
         q76Mu49lo6MZlAgJ9bbC16PFaeZ6Z8Ib2WCELTh2tvxdP5s4mZXObr48LxNWnz/3KIRD
         7RJtXQaCsh1AUSEphKq+xXXoFgRAAQ1ZJKcoQ=
Received: by 10.231.142.103 with SMTP id p39mr6864299ibu.178.1304415889234;
 Tue, 03 May 2011 02:44:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.206.147 with HTTP; Tue, 3 May 2011 02:44:29 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
 <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 3 May 2011 10:44:29 +0100
Message-ID: <BANLkTimamx-endZ1drMgM+Gr6GjtgATa7Q@mail.gmail.com>
Subject: Re: "fuzzy prefix" search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Then why not do that?  Add a PrefixQuery and a FuzzyQuery to a
BooleanQuery and use that.


--
Ian.


On Tue, May 3, 2011 at 10:25 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
>>PrefixQuery
> I'd like the combination of prefix and fuzzy ;-) because people could als=
o type "menlo" or "m=E4rl" and in any of these cases I'd like to get a hit =
on Merlot (for suggesting Merlot)
>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Ian Lea [mailto:ian.lea@gmail.com]
>> Gesendet: Dienstag, 3. Mai 2011 11:22
>> An: java-user@lucene.apache.org
>> Betreff: Re: "fuzzy prefix" search
>>
>> I'd assumed that FuzzyQuery wouldn't ignore case but I could be wrong.
>> =A0What would be the edit distance between "mer" and "merlot"? Would it =
be
>> less that 1.5 which I reckon would be the value of length(term)*0.5 as
>> detailed in the javadocs? =A0Seems unlikely, but I don't really know any=
thing
>> about the Levenshtein (edit distance) algorithm as used by FuzzyQuery.
>> Wouldn't a PrefixQuery be more appropriate here?
>>
>>
>> --
>> Ian.
>>
>> On Tue, May 3, 2011 at 10:10 AM, Clemens Wyss <clemensdev@mysign.ch>
>> wrote:
>> > Unfortunately lowercasing doesn't help.
>> > Also, doesn't the FuzzyQuery ignore casing?
>> >
>> >> -----Urspr=FCngliche Nachricht-----
>> >> Von: Ian Lea [mailto:ian.lea@gmail.com]
>> >> Gesendet: Dienstag, 3. Mai 2011 11:06
>> >> An: java-user@lucene.apache.org
>> >> Betreff: Re: "fuzzy prefix" search
>> >>
>> >> Mer !=3D mer. =A0The latter will be what is indexed because
>> >> StandardAnalyzer calls LowerCaseFilter.
>> >>
>> >> --
>> >> Ian.
>> >>
>> >>
>> >> On Tue, May 3, 2011 at 9:56 AM, Clemens Wyss
>> <clemensdev@mysign.ch>
>> >> wrote:
>> >> > Sorry for coming back to my issue. Can anybody explain why my
>> "simple"
>> >> unit test below fails? Any hint/help appreciated.
>> >> >
>> >> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter=
 =3D
>> >> > new IndexWriter( directory, new StandardAnalyzer(
>> Version.LUCENE_31
>> >> > ), IndexWriter.MaxFieldLength.UNLIMITED ); Document document =3D
>> new
>> >> > Document(); document.add( new Field( "test", "Merlot",
>> >> > Field.Store.YES, Field.Index.ANALYZED ) ); indexWriter.addDocument(
>> >> > document ); IndexReader indexReader =3D indexWriter.getReader();
>> >> > IndexSearcher searcher =3D new IndexSearcher( indexReader ); Query =
q
>> >> > =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 ); // or
>> >> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f); TopDo=
cs
>> >> > result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
>> >> > result.totalHits );
>> >> >
>> >> > - Clemens
>> >> >
>> >> >> -----Urspr=FCngliche Nachricht-----
>> >> >> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> >> >> Gesendet: Montag, 2. Mai 2011 23:01
>> >> >> An: java-user@lucene.apache.org
>> >> >> Betreff: AW: "fuzzy prefix" search
>> >> >>
>> >> >> Is it the combination of FuzzyQuery and Term which makes the
>> >> >> search to go for "word boundaries"?
>> >> >>
>> >> >> > -----Urspr=FCngliche Nachricht-----
>> >> >> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> >> >> > Gesendet: Montag, 2. Mai 2011 14:13
>> >> >> > An: java-user@lucene.apache.org
>> >> >> > Betreff: AW: "fuzzy prefix" search
>> >> >> >
>> >> >> > I tried this too, but unfortunately I only get hits when the
>> >> >> > search term is a least as long as the word to be looked up.
>> >> >> >
>> >> >> > E.g.:
>> >> >> > ...
>> >> >> > Directory directory =3D new RAMDirectory(); IndexWriter
>> >> >> > indexWriter =3D new IndexWriter( directory,
>> >> >> > IndexManager.getIndexingAnalyzer(
>> >> >> LOCALE_DE ),
>> >> >> > =A0 =A0 =A0 =A0 =A0 =A0 IndexWriter.MaxFieldLength.UNLIMITED );
>> >> >> >
>> >> >> > Document document =3D new Document(); document.add( new Field(
>> >> >> > "test", "Merlot",
>> >> >> > =A0 =A0 =A0 =A0 =A0 =A0 Field.Store.YES, Field.Index.ANALYZED ) =
);
>> >> >> indexWriter.addDocument(
>> >> >> > document );
>> >> >> >
>> >> >> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearch=
er
>> >> >> > searcher =3D new IndexSearcher( indexReader );
>> >> >> >
>> >> >> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 )=
;
>> >> >> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals=
(
>> >> >> > 1,
>> >> >> result.totalHits ); ...
>> >> >> >
>> >> >> > > -----Urspr=FCngliche Nachricht-----
>> >> >> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
>> >> >> > > Gesendet: Montag, 2. Mai 2011 13:50
>> >> >> > > An: java-user@lucene.apache.org
>> >> >> > > Betreff: RE: "fuzzy prefix" search
>> >> >> > >
>> >> >> > > Hi,
>> >> >> > >
>> >> >> > > You can pass an integer to FuzzyQuery which defines the number
>> >> >> > > of characters that are seen as prefix. So all terms must match
>> >> >> > > this prefix and the rest of each term is matched using fuzzy.
>> >> >> > >
>> >> >> > > Uwe
>> >> >> > >
>> >> >> > > -----
>> >> >> > > Uwe Schindler
>> >> >> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
>> >> >> > > eMail: uwe@thetaphi.de
>> >> >> > >
>> >> >> > > > -----Original Message-----
>> >> >> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
>> >> >> > > > Sent: Monday, May 02, 2011 1:47 PM
>> >> >> > > > To: java-user@lucene.apache.org
>> >> >> > > > Subject: "fuzzy prefix" search
>> >> >> > > >
>> >> >> > > > I'd like to search fuzzily but not on a full term.
>> >> >> > > > E.g.
>> >> >> > > > I have a text "Merlot del Ticino"
>> >> >> > > > I'd like
>> >> >> > > > "mer", "merr", "melo", ... to match.
>> >> >> > > >
>> >> >> > > > If I use FuzzyQuery only "merlot, =A0"merlott" hit. What
>> >> >> > > > Query-combination should I use?
>> >> >> > > >
>> >> >> > > > Thx
>> >> >> > > > Clemens
>> >> >> > > >
>> >> >> > > >
>> >> >> > > > ------------------------------------------------------------
>> >> >> > > > ---
>> >> >> > > > ---
>> >> >> > > > --
>> >> >> > > > - To unsubscribe, e-mail:
>> >> >> > > > java-user-unsubscribe@lucene.apache.org
>> >> >> > > > For additional commands, e-mail:
>> >> >> > > > java-user-help@lucene.apache.org
>> >> >> > >
>> >> >> > >
>> >> >> > >
>> >> >> > > --------------------------------------------------------------
>> >> >> > > ---
>> >> >> > > ---
>> >> >> > > - To unsubscribe, e-mail:
>> >> >> > > java-user-unsubscribe@lucene.apache.org
>> >> >> > > For additional commands, e-mail:
>> >> >> > > java-user-help@lucene.apache.org
>> >> >> >
>> >> >> >
>> >> >> > ----------------------------------------------------------------
>> >> >> > ---
>> >> >> > -- To unsubscribe, e-mail:
>> >> >> > java-user-unsubscribe@lucene.apache.org
>> >> >> > For additional commands, e-mail:
>> >> >> > java-user-help@lucene.apache.org
>> >> >>
>> >> >>
>> >> >> ------------------------------------------------------------------
>> >> >> --- To unsubscribe, e-mail:
>> >> >> java-user-unsubscribe@lucene.apache.org
>> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >> > -------------------------------------------------------------------
>> >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >> >
>> >> >
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 09:49:06 2011
Return-Path: <java-user-return-49581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C02A92F6B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 09:49:06 +0000 (UTC)
Received: (qmail 70155 invoked by uid 500); 3 May 2011 09:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70111 invoked by uid 500); 3 May 2011 09:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70103 invoked by uid 99); 3 May 2011 09:49:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:49:04 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 09:48:59 +0000
Received: by wyb40 with SMTP id 40so7584887wyb.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 02:48:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.63.13 with SMTP id z13mr1752793wbh.52.1304416118542; Tue,
 03 May 2011 02:48:38 -0700 (PDT)
Received: by 10.227.11.67 with HTTP; Tue, 3 May 2011 02:48:38 -0700 (PDT)
In-Reply-To: <347589.95733.qm@web130102.mail.mud.yahoo.com>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
	<BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
	<347589.95733.qm@web130102.mail.mud.yahoo.com>
Date: Tue, 3 May 2011 05:48:38 -0400
Message-ID: <BANLkTikZgUcQuHRAVmFZeP0hEMLMoF2OVA@mail.gmail.com>
Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I feel like we are back to Basic ;)

If you keep running line 40 over and over on the same memory index, do
you see a slowdown?

Mike

http://blog.mikemccandless.com

On Mon, May 2, 2011 at 1:19 PM, Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> Hi,
>
> I think this describes what's going on:
>
> 10 load N stored queries
> 20 parse N stored queries, keep them in some List forever
> 30 for each incoming document create a new MemoryIndex instance "mi"
> 40 for query 1 to N do mi.search(query)
>
> Over time this step 40 takes longer and longer and longer -- if some of t=
he
> queries are MultiPhraseQueries. =A0This is even with with mergeSort being=
 used in
> MultiPhraseQuery.
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
>> From: Michael McCandless <lucene@mikemccandless.com>
>> To: java-user@lucene.apache.org
>> Sent: Mon, May 2, 2011 12:15:40 PM
>> Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
>>
>> By "slowing down over time" do you mean you use the same index (no new
>> docs =A0added) yet running the same MPQ over and over you see it taking
>> longer to =A0execute over time?
>>
>> Mike
>>
>> http://blog.mikemccandless.com
>>
>> On Mon, May 2, 2011 at =A012:00 PM, Tomislav Poljak <tpoljak@gmail.com> =
wrote:
>> > =A0Hi,
>> > after running tests on both MemoryIndex and RAMDirectory based =A0inde=
x
>> > in Lucene 3.1, seems MultiPhraseQueries are slowing down over =A0time
>> > (each iteration of executing the same MultiPhraseQueries on the =A0sam=
e
>> > doc, seems to require more and more execution time). Are there =A0any
>> > existing/known issues related to the MultiPhraseQuery in Lucene =A03.1
>> > which could lead to this performance drop?
>> >
>> > =A0Tomislav
>> >
>> > =A0-------------------------------------------------------------------=
--
>> > To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > =A0For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For =A0additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 10:00:50 2011
Return-Path: <java-user-return-49582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AEB38261C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 10:00:50 +0000 (UTC)
Received: (qmail 90410 invoked by uid 500); 3 May 2011 10:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90369 invoked by uid 500); 3 May 2011 10:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90361 invoked by uid 99); 3 May 2011 10:00:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:00:48 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [87.193.196.100] (HELO mail1.postdirekt.de) (87.193.196.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:00:41 +0000
Received: from S03BO006.postdirekt.loc (unknown [172.22.233.4])
	by mail1.postdirekt.de (Postfix) with ESMTP id 5849717032C
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 12:00:21 +0200 (CEST)
Received: from [172.22.233.4] by [87.193.196.98] with ESMTP; Tue, 03 May 2011 12:25:44 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: "fuzzy prefix" search
Date: Tue, 3 May 2011 12:00:20 +0200
Message-ID: <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBEE@S03BO006.postdirekt.loc>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: "fuzzy prefix" search
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSAgAAEQGCAAJVRwIAAxg1QgAAOKhCAAAVRwA==
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp> <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp> <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBE9@S03BO006.postdirekt.loc>
From: "Biedermann,S.,Fa. Post Direkt" <S.Biedermann@postdirekt.de>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I had a look into the 3.0 implementation

The calculation of the similarity is

	1 - (edit distance / min (string 1 length, string 2 length)

As opposed to the levenstein in spellchecker

	1 - (edit distance / max (string 1 length, string 2 length)


So, the similarity is 1 - ( 3 / min(3,6)) =3D 0.

--
Sven


-----Urspr=FCngliche Nachricht-----
Von: Biedermann,S.,Fa. Post Direkt [mailto:S.Biedermann@postdirekt.de]=20
Gesendet: Dienstag, 3. Mai 2011 11:43
An: java-user@lucene.apache.org
Betreff: AW: "fuzzy prefix" search

Have you tried=20

Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.499f);


Sven


-----Urspr=FCngliche Nachricht-----
Von: Clemens Wyss [mailto:clemensdev@mysign.ch]=20
Gesendet: Dienstag, 3. Mai 2011 10:57
An: java-user@lucene.apache.org
Betreff: AW: "fuzzy prefix" search

Sorry for coming back to my issue. Can anybody explain why my "simple" =
unit test below fails? Any hint/help appreciated.

Directory directory =3D new RAMDirectory();
IndexWriter indexWriter =3D new IndexWriter( directory, new =
StandardAnalyzer( Version.LUCENE_31 ), =
IndexWriter.MaxFieldLength.UNLIMITED );
Document document =3D new Document();	=09
document.add( new Field( "test", "Merlot", Field.Store.YES, =
Field.Index.ANALYZED ) );
indexWriter.addDocument( document );
IndexReader indexReader =3D indexWriter.getReader();
IndexSearcher searcher =3D new IndexSearcher( indexReader );
Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f, 0, 10 );
// or Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.5f);
TopDocs result =3D searcher.search( q, 10 );
Assert.assertEquals( 1, result.totalHits );

- Clemens

> -----Urspr=FCngliche Nachricht-----
> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Gesendet: Montag, 2. Mai 2011 23:01
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> Is it the combination of FuzzyQuery and Term which makes the search to =
go
> for "word boundaries"?
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Gesendet: Montag, 2. Mai 2011 14:13
> > An: java-user@lucene.apache.org
> > Betreff: AW: "fuzzy prefix" search
> >
> > I tried this too, but unfortunately I only get hits when the search
> > term is a least as long as the word to be looked up.
> >
> > E.g.:
> > ...
> > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D
> > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
> LOCALE_DE ),
> > 		IndexWriter.MaxFieldLength.UNLIMITED );
> >
> > Document document =3D new Document();
> > document.add( new Field( "test", "Merlot",
> > 		Field.Store.YES, Field.Index.ANALYZED ) );
> indexWriter.addDocument(
> > document );
> >
> > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> > searcher =3D new IndexSearcher( indexReader );
> >
> > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
> > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
> result.totalHits ); ...
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > Gesendet: Montag, 2. Mai 2011 13:50
> > > An: java-user@lucene.apache.org
> > > Betreff: RE: "fuzzy prefix" search
> > >
> > > Hi,
> > >
> > > You can pass an integer to FuzzyQuery which defines the number of
> > > characters that are seen as prefix. So all terms must match this
> > > prefix and the rest of each term is matched using fuzzy.
> > >
> > > Uwe
> > >
> > > -----
> > > Uwe Schindler
> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> > > eMail: uwe@thetaphi.de
> > >
> > > > -----Original Message-----
> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > Sent: Monday, May 02, 2011 1:47 PM
> > > > To: java-user@lucene.apache.org
> > > > Subject: "fuzzy prefix" search
> > > >
> > > > I'd like to search fuzzily but not on a full term.
> > > > E.g.
> > > > I have a text "Merlot del Ticino"
> > > > I'd like
> > > > "mer", "merr", "melo", ... to match.
> > > >
> > > > If I use FuzzyQuery only "merlot,  "merlott" hit. What
> > > > Query-combination should I use?
> > > >
> > > > Thx
> > > > Clemens
> > > >
> > > >
> > > > =
------------------------------------------------------------------
> > > > --
> > > > - To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > >
> > >
> > >
> > > =
--------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 10:12:48 2011
Return-Path: <java-user-return-49583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EB7873B0
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 10:12:47 +0000 (UTC)
Received: (qmail 12922 invoked by uid 500); 3 May 2011 10:12:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12881 invoked by uid 500); 3 May 2011 10:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12862 invoked by uid 99); 3 May 2011 10:12:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:12:45 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:12:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 4DEC4C2180
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 12:12:18 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id UA2EYEXq8X8H for <java-user@lucene.apache.org>;
	Tue,  3 May 2011 12:12:17 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 8D3ECC2117
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 12:12:17 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 3 May 2011 12:12:17 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 3 May 2011 12:12:16 +0200
Subject: AW: "fuzzy prefix" search
Thread-Topic: "fuzzy prefix" search
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSAgAAEQGCAAJVRwIAAxg1QgAAOKhCAAAVRwIAABBAw
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51C87@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBE9@S03BO006.postdirekt.loc>
 <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBEE@S03BO006.postdirekt.loc>
In-Reply-To: <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBEE@S03BO006.postdirekt.loc>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Is this calculation intended or a bug?

> -----Urspr=FCngliche Nachricht-----
> Von: Biedermann,S.,Fa. Post Direkt [mailto:S.Biedermann@postdirekt.de]
> Gesendet: Dienstag, 3. Mai 2011 12:00
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> I had a look into the 3.0 implementation
>=20
> The calculation of the similarity is
>=20
> 	1 - (edit distance / min (string 1 length, string 2 length)
>=20
> As opposed to the levenstein in spellchecker
>=20
> 	1 - (edit distance / max (string 1 length, string 2 length)
>=20
>=20
> So, the similarity is 1 - ( 3 / min(3,6)) =3D 0.
>=20
> --
> Sven
>=20
>=20
> -----Urspr=FCngliche Nachricht-----
> Von: Biedermann,S.,Fa. Post Direkt [mailto:S.Biedermann@postdirekt.de]
> Gesendet: Dienstag, 3. Mai 2011 11:43
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> Have you tried
>=20
> Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.499f);
>=20
>=20
> Sven
>=20
>=20
> -----Urspr=FCngliche Nachricht-----
> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Gesendet: Dienstag, 3. Mai 2011 10:57
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> Sorry for coming back to my issue. Can anybody explain why my "simple" un=
it
> test below fails? Any hint/help appreciated.
>=20
> Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =3D n=
ew
> IndexWriter( directory, new StandardAnalyzer( Version.LUCENE_31 ),
> IndexWriter.MaxFieldLength.UNLIMITED );
> Document document =3D new Document();
> document.add( new Field( "test", "Merlot", Field.Store.YES,
> Field.Index.ANALYZED ) ); indexWriter.addDocument( document );
> IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> searcher =3D new IndexSearcher( indexReader ); Query q =3D new FuzzyQuery=
(
> new Term( "test", "Mer" ), 0.5f, 0, 10 ); // or Query q =3D new FuzzyQuer=
y( new
> Term( "test", "Mer" ), 0.5f); TopDocs result =3D searcher.search( q, 10 )=
;
> Assert.assertEquals( 1, result.totalHits );
>=20
> - Clemens
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Gesendet: Montag, 2. Mai 2011 23:01
> > An: java-user@lucene.apache.org
> > Betreff: AW: "fuzzy prefix" search
> >
> > Is it the combination of FuzzyQuery and Term which makes the search to
> > go for "word boundaries"?
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > Gesendet: Montag, 2. Mai 2011 14:13
> > > An: java-user@lucene.apache.org
> > > Betreff: AW: "fuzzy prefix" search
> > >
> > > I tried this too, but unfortunately I only get hits when the search
> > > term is a least as long as the word to be looked up.
> > >
> > > E.g.:
> > > ...
> > > Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D
> > > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
> > LOCALE_DE ),
> > > 		IndexWriter.MaxFieldLength.UNLIMITED );
> > >
> > > Document document =3D new Document();
> > > document.add( new Field( "test", "Merlot",
> > > 		Field.Store.YES, Field.Index.ANALYZED ) );
> > indexWriter.addDocument(
> > > document );
> > >
> > > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> > > searcher =3D new IndexSearcher( indexReader );
> > >
> > > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
> > > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,
> > result.totalHits ); ...
> > >
> > > > -----Urspr=FCngliche Nachricht-----
> > > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > > Gesendet: Montag, 2. Mai 2011 13:50
> > > > An: java-user@lucene.apache.org
> > > > Betreff: RE: "fuzzy prefix" search
> > > >
> > > > Hi,
> > > >
> > > > You can pass an integer to FuzzyQuery which defines the number of
> > > > characters that are seen as prefix. So all terms must match this
> > > > prefix and the rest of each term is matched using fuzzy.
> > > >
> > > > Uwe
> > > >
> > > > -----
> > > > Uwe Schindler
> > > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> > > > eMail: uwe@thetaphi.de
> > > >
> > > > > -----Original Message-----
> > > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > > Sent: Monday, May 02, 2011 1:47 PM
> > > > > To: java-user@lucene.apache.org
> > > > > Subject: "fuzzy prefix" search
> > > > >
> > > > > I'd like to search fuzzily but not on a full term.
> > > > > E.g.
> > > > > I have a text "Merlot del Ticino"
> > > > > I'd like
> > > > > "mer", "merr", "melo", ... to match.
> > > > >
> > > > > If I use FuzzyQuery only "merlot,  "merlott" hit. What
> > > > > Query-combination should I use?
> > > > >
> > > > > Thx
> > > > > Clemens
> > > > >
> > > > >
> > > > > ----------------------------------------------------------------
> > > > > --
> > > > > --
> > > > > - To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > --
> > > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 10:30:33 2011
Return-Path: <java-user-return-49584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AA441215B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 10:30:33 +0000 (UTC)
Received: (qmail 35264 invoked by uid 500); 3 May 2011 10:30:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35205 invoked by uid 500); 3 May 2011 10:30:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35197 invoked by uid 99); 3 May 2011 10:30:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:30:31 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:30:23 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id 5D610DFAC4
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 19:30:01 +0900 (JST)
Message-ID: <4DBFD929.6030003@r.email.ne.jp>
Date: Tue, 03 May 2011 19:30:01 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: The MoreLikeThisHandler could include highlighting ?
References: <AANLkTi=O32Ssw6qhw85HJN9Zkt+cWg3oKwTrxGQrrLC4@mail.gmail.com>
In-Reply-To: <AANLkTi=O32Ssw6qhw85HJN9Zkt+cWg3oKwTrxGQrrLC4@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

(11/03/01 21:16), Amel Fraisse wrote:
> Hello,
>
> The MoreLikeThisHandler could include higlighting ?
>
> Is it true to define a MoreLikeThisHandler like this: ?
>
> <requestHandler name="/mlt"
> class="org.apache.solr.handler.MoreLikeThisHandler">
>              <lst name="defaults">
>                  <bool name="hl">true</bool>
>                  <str name="hl.fl">contenu</str>
>              </lst>
>   </requestHandler>
>
> Thank you for your help.
>
> Amel.
>

Amel,

1. I think you should ask solr-user, not java-user.

2. I don't know MLT Handler very much, but you can use MLT component
with highlight component.

Koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 10:31:30 2011
Return-Path: <java-user-return-49585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 75816262E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 10:31:30 +0000 (UTC)
Received: (qmail 39668 invoked by uid 500); 3 May 2011 10:31:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39619 invoked by uid 500); 3 May 2011 10:31:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39611 invoked by uid 99); 3 May 2011 10:31:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:31:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 10:31:23 +0000
Received: by wwi18 with SMTP id 18so4804342wwi.5
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 03:31:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.63.13 with SMTP id z13mr1797276wbh.52.1304418661634; Tue,
 03 May 2011 03:31:01 -0700 (PDT)
Received: by 10.227.11.67 with HTTP; Tue, 3 May 2011 03:31:01 -0700 (PDT)
In-Reply-To: <8CDD78C978C10D9-11F0-10D1@FRR3-L27.sysops.aol.com>
References: <8CDD78C978C10D9-11F0-10D1@FRR3-L27.sysops.aol.com>
Date: Tue, 3 May 2011 06:31:01 -0400
Message-ID: <BANLkTi=QpbRtSpOy+SQX2DRP_5J-a_DU3w@mail.gmail.com>
Subject: Re: Speed up payload loading?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

On Tue, May 3, 2011 at 5:35 AM, Chris Bamford
<chris.bamford@talktalk.net> wrote:
> Hi,
>
> I have been experimenting with using a int payload as a unique identifier=
, one per Document. =A0I have successfully loaded them in using the TermPos=
itions API with something like:
>
> =A0 =A0public static void loadPayloadIntArray(IndexReader reader, Term te=
rm, int[] intArray, int from, int to) throws Exception {
> =A0 =A0 =A0 =A0TermPositions tp =3D null;
> =A0 =A0 =A0 =A0byte[] dataBuffer =3D new byte[4];
> =A0 =A0 =A0 =A0int intVal =3D -1;
>
> =A0 =A0 =A0 =A0//System.out.println("loadPayloadIntArray(" + from + " -> =
" + to + ")");
> =A0 =A0 =A0 =A0try {
> =A0 =A0 =A0 =A0 =A0 =A0tp =3D reader.termPositions(term);
> =A0 =A0 =A0 =A0 =A0 =A0tp.skipTo(from);
> =A0 =A0 =A0 =A0 =A0 =A0do {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0tp.nextPosition();
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0tp.getPayload(dataBuffer, 0);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0intVal =3D PayloadHelper.decodeInt(dataBuf=
fer, 0);
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0intArray[from] =3D intVal;
> =A0 =A0 =A0 =A0 =A0 =A0} while (++from <=3D to && tp.next());
> =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0finally {
> =A0 =A0 =A0 =A0 =A0 =A0if (tp !=3D null) {
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0tp.close();
> =A0 =A0 =A0 =A0 =A0 =A0}
> =A0 =A0 =A0 =A0}
> =A0 =A0}
>
>
> This works fine, it even allows me to use several threads in parallel to =
each load a part of the array, thus reducing the time taken.
> However, performance is not as great as I would like - with indexes of ~4=
m docs it can take over 3 seconds. =A0(These are cold start times, no reade=
r cacheing and OS read caches completely flushed). =A0 Increasing the numbe=
r of loader threads (calling the method shown) doesn't help much, which mak=
es me suspect there is some synchronized stuff going on inside TermPosition=
s.

Since it's cold, likely your bottleneck is the IO system, and that's
why adding threads doesn't help?

> 1) Because this approach is still faster than using FieldCache, my belief=
 is that payloads are stored sequentially in the index - is this true?

They are... they are encoded into the positions (*.prx) file.

> 2) If so, is there some raw, lower level I/O I can call which will allow =
me to load much bigger chunks of payload rather than a single int at a time=
?

Not really... I mean you could try to parse the bytes yourself from
the prx file, but Lucene doesn't have existing APIs to bulk load from
here.

In trunk we are working towards faster bulk-load APIs, but, how to
make payloads work "well" there is an open question...

Furthermore, there is a new feature branch (docvalues), which aims to
handle your use case ("store X per document") well.  Maybe check out
that branch?

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 11:22:52 2011
Return-Path: <java-user-return-49586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A2EA32AA9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 11:22:52 +0000 (UTC)
Received: (qmail 90020 invoked by uid 500); 3 May 2011 11:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89899 invoked by uid 500); 3 May 2011 11:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89891 invoked by uid 99); 3 May 2011 11:22:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:22:50 +0000
X-ASF-Spam-Status: No, hits=1.0 required=5.0
	tests=RCVD_DOUBLE_IP_LOOSE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [87.193.196.100] (HELO mail1.postdirekt.de) (87.193.196.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:22:45 +0000
Received: from S03BO006.postdirekt.loc (unknown [172.22.233.4])
	by mail1.postdirekt.de (Postfix) with ESMTP id D619016FA3C
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 13:22:23 +0200 (CEST)
Received: from [172.22.233.4] by [87.193.196.98] with ESMTP; Tue, 03 May 2011 13:47:47 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: AW: "fuzzy prefix" search
Date: Tue, 3 May 2011 13:22:21 +0200
Message-ID: <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BC12@S03BO006.postdirekt.loc>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: "fuzzy prefix" search
Thread-Index: AQHjWhs2Ke0gSacSKqhiFTj0eT6MmpRKyaSAgAAEQGCAAJVRwIAAxg1QgAAOKhCAAAVRwIAABBAwgAARzsA=
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp> <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp> <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBE9@S03BO006.postdirekt.loc> <C1BF4EE0DD0C3E45A85C037F8A742ED002D8BBEE@S03BO006.postdirekt.loc> <E594BA962D832C49A3CF858DAA3A696C1135A51C87@Exchange2007.mysigndomain.corp>
From: "Biedermann,S.,Fa. Post Direkt" <S.Biedermann@postdirekt.de>
To: <java-user@lucene.apache.org>

I don't know.

But changing it now would cause trouble in many applications...

For our applications we reimplemented fuzzy query so that we can pass =
along a org.apache.lucene.search.spell.StringDistance instance that =
holds the similarity algorithm of choice.


--

Sven


-----Urspr=FCngliche Nachricht-----
Von: Clemens Wyss [mailto:clemensdev@mysign.ch]=20
Gesendet: Dienstag, 3. Mai 2011 12:12
An: java-user@lucene.apache.org
Betreff: AW: "fuzzy prefix" search

Is this calculation intended or a bug?

> -----Urspr=FCngliche Nachricht-----
> Von: Biedermann,S.,Fa. Post Direkt [mailto:S.Biedermann@postdirekt.de]
> Gesendet: Dienstag, 3. Mai 2011 12:00
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> I had a look into the 3.0 implementation
>=20
> The calculation of the similarity is
>=20
> 	1 - (edit distance / min (string 1 length, string 2 length)
>=20
> As opposed to the levenstein in spellchecker
>=20
> 	1 - (edit distance / max (string 1 length, string 2 length)
>=20
>=20
> So, the similarity is 1 - ( 3 / min(3,6)) =3D 0.
>=20
> --
> Sven
>=20
>=20
> -----Urspr=FCngliche Nachricht-----
> Von: Biedermann,S.,Fa. Post Direkt [mailto:S.Biedermann@postdirekt.de]
> Gesendet: Dienstag, 3. Mai 2011 11:43
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> Have you tried
>=20
> Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.499f);
>=20
>=20
> Sven
>=20
>=20
> -----Urspr=FCngliche Nachricht-----
> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Gesendet: Dienstag, 3. Mai 2011 10:57
> An: java-user@lucene.apache.org
> Betreff: AW: "fuzzy prefix" search
>=20
> Sorry for coming back to my issue. Can anybody explain why my "simple" =
unit
> test below fails? Any hint/help appreciated.
>=20
> Directory directory =3D new RAMDirectory(); IndexWriter indexWriter =
=3D new
> IndexWriter( directory, new StandardAnalyzer( Version.LUCENE_31 ),
> IndexWriter.MaxFieldLength.UNLIMITED );
> Document document =3D new Document();
> document.add( new Field( "test", "Merlot", Field.Store.YES,
> Field.Index.ANALYZED ) ); indexWriter.addDocument( document );
> IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> searcher =3D new IndexSearcher( indexReader ); Query q =3D new =
FuzzyQuery(
> new Term( "test", "Mer" ), 0.5f, 0, 10 ); // or Query q =3D new =
FuzzyQuery( new
> Term( "test", "Mer" ), 0.5f); TopDocs result =3D searcher.search( q, =
10 );
> Assert.assertEquals( 1, result.totalHits );
>=20
> - Clemens
>=20
> > -----Urspr=FCngliche Nachricht-----
> > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Gesendet: Montag, 2. Mai 2011 23:01
> > An: java-user@lucene.apache.org
> > Betreff: AW: "fuzzy prefix" search
> >
> > Is it the combination of FuzzyQuery and Term which makes the search =
to
> > go for "word boundaries"?
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > Gesendet: Montag, 2. Mai 2011 14:13
> > > An: java-user@lucene.apache.org
> > > Betreff: AW: "fuzzy prefix" search
> > >
> > > I tried this too, but unfortunately I only get hits when the =
search
> > > term is a least as long as the word to be looked up.
> > >
> > > E.g.:
> > > ...
> > > Directory directory =3D new RAMDirectory(); IndexWriter =
indexWriter =3D
> > > new IndexWriter( directory, IndexManager.getIndexingAnalyzer(
> > LOCALE_DE ),
> > > 		IndexWriter.MaxFieldLength.UNLIMITED );
> > >
> > > Document document =3D new Document();
> > > document.add( new Field( "test", "Merlot",
> > > 		Field.Store.YES, Field.Index.ANALYZED ) );
> > indexWriter.addDocument(
> > > document );
> > >
> > > IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher
> > > searcher =3D new IndexSearcher( indexReader );
> > >
> > > Query q =3D new FuzzyQuery( new Term( "test", "Mer" ), 0.6f, 1 );
> > > TopDocs result =3D searcher.search( q, 10 ); Assert.assertEquals( =
1,
> > result.totalHits ); ...
> > >
> > > > -----Urspr=FCngliche Nachricht-----
> > > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > > Gesendet: Montag, 2. Mai 2011 13:50
> > > > An: java-user@lucene.apache.org
> > > > Betreff: RE: "fuzzy prefix" search
> > > >
> > > > Hi,
> > > >
> > > > You can pass an integer to FuzzyQuery which defines the number =
of
> > > > characters that are seen as prefix. So all terms must match this
> > > > prefix and the rest of each term is matched using fuzzy.
> > > >
> > > > Uwe
> > > >
> > > > -----
> > > > Uwe Schindler
> > > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaphi.de
> > > > eMail: uwe@thetaphi.de
> > > >
> > > > > -----Original Message-----
> > > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > > Sent: Monday, May 02, 2011 1:47 PM
> > > > > To: java-user@lucene.apache.org
> > > > > Subject: "fuzzy prefix" search
> > > > >
> > > > > I'd like to search fuzzily but not on a full term.
> > > > > E.g.
> > > > > I have a text "Merlot del Ticino"
> > > > > I'd like
> > > > > "mer", "merr", "melo", ... to match.
> > > > >
> > > > > If I use FuzzyQuery only "merlot,  "merlott" hit. What
> > > > > Query-combination should I use?
> > > > >
> > > > > Thx
> > > > > Clemens
> > > > >
> > > > >
> > > > > =
----------------------------------------------------------------
> > > > > --
> > > > > --
> > > > > - To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org
> > > >
> > > >
> > > >
> > > > =
------------------------------------------------------------------
> > > > --
> > > > - To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > >
> > >
> > > =
--------------------------------------------------------------------
> > > - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 11:36:45 2011
Return-Path: <java-user-return-49587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D7E6F2214
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 11:36:45 +0000 (UTC)
Received: (qmail 15120 invoked by uid 500); 3 May 2011 11:36:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15083 invoked by uid 500); 3 May 2011 11:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15075 invoked by uid 99); 3 May 2011 11:36:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:36:43 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.94.238.130] (HELO web130103.mail.mud.yahoo.com) (66.94.238.130)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 May 2011 11:36:38 +0000
Received: (qmail 14739 invoked by uid 60001); 3 May 2011 11:36:17 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304422577; bh=IFsI5+d8V6cv5M9d4+6YTNkq2tx9VMuQTwJf8zvyjII=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=aXHy6WG4HApDPKZdxAP0nnBpqxiTqVYhzYLkbWmPxJT/Il9+1a+zzbf93XJbMcG5Iay4E3eBzGNp0IrZAyIBQzge3yUvBE935pyCkV0BE+84TYedER7DMG9W4recGs+/SJUmRsEeQJ0+RGpfIF3EOYcsRbvoNsaG2XSQGj25Alo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=QMdy5jpebNkjWaBry3vc/s14mSM5S8bxs0SfIoq9/gX1Nk6JDvitgw+gV6zd4yfcDMKz4uXjG9riWMykGw+a2hP/8dgXlBDV8ZqAaTxkhZXCxeiKchgvUtv7PYbKkW104+TfIElgtZCUqKX9S0h2SGy9fSJ8p+/k7r05SQkFqng=;
Message-ID: <796945.6397.qm@web130103.mail.mud.yahoo.com>
X-YMail-OSG: HVHc4IkVM1kBvhUpSVTx25S3P9WyKtM5blYHsoZ4c46mqK6
 1wHAzStarF6ef3lOZ6lBuZlTU0NFLm2zQPhPxOTHBqvt6.SMWBUnR31lQm4k
 Cq3Um2.v0JneER5oP1Z7zABp4mTBsgrE8oNAwewkA4J_jPb2SOUc9Lafv9sG
 Oikm.CJEw4Uuxjf5ulT68zP5hGkZucyIJx9gCTmwJoNTSraT3rjxHCtD.z7.
 SST1M.za38XG_qa57j1ZR1vh.6R2c198coQrX9wY.ZR1l0yab0V0dACe7lOM
 V_TR31gbNu2d.jNfLsfsk3nLkZi4NOO.s6_FbKpPmaeQ_lbHiQ6bbj.JbEaX
 B0DTyy9Zju93WFyPG.J9TlHgH6IywY.Y_zIjb4HIXmdlR6YsiMjKWfILxB3c
 FbfzquUwl30k5
Received: from [74.73.25.254] by web130103.mail.mud.yahoo.com via HTTP; Tue, 03 May 2011 04:36:17 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp> <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp> <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp> <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
Date: Tue, 3 May 2011 04:36:17 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: "fuzzy prefix" search
To: java-user@lucene.apache.org
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,=0A=0AI didn't read this thread closely, but just in case:=0A* Is this s=
omething you can handle with synonyms?=0A* If this is for English and you a=
re trying to handle typos, there is a list of =0Acommon English misspelling=
s out there that you could use for this perhaps.=0A* Have you considered n-=
gramming your tokens?  Not sure if this would help, =0Adidn't read messages=
/examples closely enough, but you may want to look at this =0Aif you haven'=
t done so yet.=0A=0AOtis=0A----=0ASematext :: http://sematext.com/ :: Solr =
- Lucene - Nutch=0ALucene ecosystem search :: http://search-lucene.com/=0A=
=0A=0A=0A----- Original Message ----=0A> From: Clemens Wyss <clemensdev@mys=
ign.ch>=0A> To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>=
=0A> Sent: Tue, May 3, 2011 5:25:30 AM=0A> Subject: AW: "fuzzy prefix" sear=
ch=0A> =0A> >PrefixQuery=0A> I'd like the combination of prefix and fuzzy ;=
-) because  people could also =0A>type "menlo" or "m=E4rl" and in any of th=
ese cases I'd like to  get a hit on =0A>Merlot (for suggesting Merlot)=0A> =
=0A> > -----Urspr=FCngliche  Nachricht-----=0A> > Von: Ian Lea [mailto:ian.=
lea@gmail.com]=0A> > Gesendet:  Dienstag, 3. Mai 2011 11:22=0A> > An: java-=
user@lucene.apache.org=0A> >  Betreff: Re: "fuzzy prefix" search=0A> > =0A>=
 > I'd assumed that FuzzyQuery  wouldn't ignore case but I could be wrong.=
=0A> >  What would be the edit  distance between "mer" and "merlot"? Would =
it be=0A> > less that 1.5 which I  reckon would be the value of length(term=
)*0.5 as=0A> > detailed in the  javadocs?  Seems unlikely, but I don't real=
ly know anything=0A> > about  the Levenshtein (edit distance) algorithm as =
used by FuzzyQuery.=0A> >  Wouldn't a PrefixQuery be more appropriate here?=
=0A> > =0A> > =0A> >  --=0A> > Ian.=0A> > =0A> > On Tue, May 3, 2011 at 10:=
10 AM, Clemens Wyss  <clemensdev@mysign.ch>=0A> >  wrote:=0A> > > Unfortuna=
tely lowercasing doesn't help.=0A> > > Also,  doesn't the FuzzyQuery ignore=
 casing?=0A> > >=0A> > >>  -----Urspr=FCngliche Nachricht-----=0A> > >> Von=
: Ian Lea [mailto:ian.lea@gmail.com]=0A> > >>  Gesendet: Dienstag, 3. Mai 2=
011 11:06=0A> > >> An: java-user@lucene.apache.org=0A> >  >> Betreff: Re: "=
fuzzy prefix" search=0A> > >>=0A> > >>  Mer !=3D mer.  The latter will be w=
hat is indexed because=0A> > >>  StandardAnalyzer calls LowerCaseFilter.=0A=
> > >>=0A> > >>  --=0A> > >> Ian.=0A> > >>=0A> > >>=0A> > >> On  Tue, May 3=
, 2011 at 9:56 AM, Clemens Wyss=0A> > <clemensdev@mysign.ch>=0A> > >>  wrot=
e:=0A> > >> > Sorry for coming back to my issue. Can anybody  explain why m=
y=0A> > "simple"=0A> > >> unit test below fails? Any  hint/help appreciated=
.=0A> > >> >=0A> > >> > Directory  directory =3D new RAMDirectory(); IndexW=
riter indexWriter =3D=0A> > >> >  new IndexWriter( directory, new StandardA=
nalyzer(=0A> >  Version.LUCENE_31=0A> > >> > ), IndexWriter.MaxFieldLength.=
UNLIMITED  ); Document document =3D=0A> > new=0A> > >> > Document();  docum=
ent.add( new Field( "test", "Merlot",=0A> > >> >  Field.Store.YES, Field.In=
dex.ANALYZED ) ); indexWriter.addDocument(=0A> >  >> > document ); IndexRea=
der indexReader =3D  indexWriter.getReader();=0A> > >> > IndexSearcher sear=
cher =3D new  IndexSearcher( indexReader ); Query q=0A> > >> > =3D new Fuzz=
yQuery(  new Term( "test", "Mer" ), 0.5f, 0, 10 ); // or=0A> > >> > Query q=
 =3D  new FuzzyQuery( new Term( "test", "Mer" ), 0.5f); TopDocs=0A> > >> > =
 result =3D searcher.search( q, 10 ); Assert.assertEquals( 1,=0A> > >> >  r=
esult.totalHits );=0A> > >> >=0A> > >> > -  Clemens=0A> > >> >=0A> > >> >> =
-----Urspr=FCngliche  Nachricht-----=0A> > >> >> Von: Clemens Wyss [mailto:=
clemensdev@mysign.ch]=0A> > >>  >> Gesendet: Montag, 2. Mai 2011 23:01=0A> =
> >> >> An: java-user@lucene.apache.org=0A> >  >> >> Betreff: AW: "fuzzy pr=
efix" search=0A> > >>  >>=0A> > >> >> Is it the combination of FuzzyQuery a=
nd Term  which makes the=0A> > >> >> search to go for "word  boundaries"?=
=0A> > >> >>=0A> > >> >> >  -----Urspr=FCngliche Nachricht-----=0A> > >> >>=
 > Von: Clemens  Wyss [mailto:clemensdev@mysign.ch]=0A> > >>  >> > Gesendet=
: Montag, 2. Mai 2011 14:13=0A> > >> >> >  An: java-user@lucene.apache.org=
=0A> >  >> >> > Betreff: AW: "fuzzy prefix" search=0A> > >>  >> >=0A> > >> =
>> > I tried this too, but unfortunately  I only get hits when the=0A> > >>=
 >> > search term is a least  as long as the word to be looked up.=0A> > >>=
 >> >=0A> >  >> >> > E.g.:=0A> > >> >> > ...=0A> > >>  >> > Directory direc=
tory =3D new RAMDirectory(); IndexWriter=0A> >  >> >> > indexWriter =3D new=
 IndexWriter( directory,=0A> >  >> >> > IndexManager.getIndexingAnalyzer(=
=0A> > >>  >> LOCALE_DE ),=0A> > >> >> >              IndexWriter.MaxFieldL=
ength.UNLIMITED );=0A> > >> >> >=0A> >  >> >> > Document document =3D new D=
ocument(); document.add( new  Field(=0A> > >> >> > "test", "Merlot",=0A> > =
>>  >> >             Field.Store.YES, Field.Index.ANALYZED ) );=0A> >  >> >=
> indexWriter.addDocument(=0A> > >> >> >  document );=0A> > >> >> >=0A> > >=
> >> >  IndexReader indexReader =3D indexWriter.getReader(); IndexSearcher=
=0A> >  >> >> > searcher =3D new IndexSearcher( indexReader );=0A> >  >> >>=
 >=0A> > >> >> > Query q =3D new FuzzyQuery(  new Term( "test", "Mer" ), 0.=
6f, 1 );=0A> > >> >> > TopDocs  result =3D searcher.search( q, 10 ); Assert=
.assertEquals(=0A> > >>  >> > 1,=0A> > >> >> result.totalHits ); ...=0A> > =
 >> >> >=0A> > >> >> > > -----Urspr=FCngliche  Nachricht-----=0A> > >> >> >=
 > Von: Uwe Schindler [mailto:uwe@thetaphi.de]=0A> > >> >>  > > Gesendet: M=
ontag, 2. Mai 2011 13:50=0A> > >> >> >  > An: java-user@lucene.apache.org=
=0A> >  >> >> > > Betreff: RE: "fuzzy prefix" search=0A> > >>  >> > >=0A> >=
 >> >> > > Hi,=0A> > >>  >> > >=0A> > >> >> > > You can pass an integer  to=
 FuzzyQuery which defines the number=0A> > >> >> > > of  characters that ar=
e seen as prefix. So all terms must match=0A> > >>  >> > > this prefix and =
the rest of each term is matched using  fuzzy.=0A> > >> >> > >=0A> > >> >> =
> >  Uwe=0A> > >> >> > >=0A> > >> >> > >  -----=0A> > >> >> > > Uwe Schindl=
er=0A> > >>  >> > > H.-H.-Meier-Allee 63, D-28213 Bremen http://www.thetaph=
i.de=0A> >  >> >> > > eMail: uwe@thetaphi.de=0A> > >> >> >  >=0A> > >> >> >=
 > > -----Original Message-----=0A> >  >> >> > > > From: Clemens Wyss [mail=
to:clemensdev@mysign.ch]=0A> > >>  >> > > > Sent: Monday, May 02, 2011 1:47=
 PM=0A> > >>  >> > > > To: java-user@lucene.apache.org=0A> >  >> >> > > > S=
ubject: "fuzzy prefix" search=0A> >  >> >> > > >=0A> > >> >> > > > I'd  lik=
e to search fuzzily but not on a full term.=0A> > >> >> >  > > E.g.=0A> > >=
> >> > > > I have a text "Merlot  del Ticino"=0A> > >> >> > > > I'd like=0A=
> > >>  >> > > > "mer", "merr", "melo", ... to match.=0A> > >>  >> > > >=0A=
> > >> >> > > > If I use  FuzzyQuery only "merlot,  "merlott" hit. What=0A>=
 > >> >> >  > > Query-combination should I use?=0A> > >> >> > >  >=0A> > >>=
 >> > > > Thx=0A> > >> >> >  > > Clemens=0A> > >> >> > > >=0A> > >>  >> > >=
 >=0A> > >> >> > > >  -----------------------------------------------------=
-------=0A> > >>  >> > > > ---=0A> > >> >> > > > ---=0A> >  >> >> > > > --=
=0A> > >> >> > > > -  To unsubscribe, e-mail:=0A> > >> >> > > > java-user-u=
nsubscribe@lucene.apache.org=0A> >  >> >> > > > For additional commands, e-=
mail:=0A> >  >> >> > > > java-user-help@lucene.apache.org=0A> >  >> >> > >=
=0A> > >> >> > >=0A> >  >> >> > >=0A> > >> >> > >  ------------------------=
--------------------------------------=0A> > >>  >> > > ---=0A> > >> >> > >=
 ---=0A> > >>  >> > > - To unsubscribe, e-mail:=0A> > >> >> > > java-user-u=
nsubscribe@lucene.apache.org=0A> >  >> >> > > For additional commands, e-ma=
il:=0A> > >>  >> > > java-user-help@lucene.apache.org=0A> >  >> >> >=0A> > =
>> >> >=0A> > >> >>  > ----------------------------------------------------=
------------=0A> >  >> >> > ---=0A> > >> >> > -- To unsubscribe,  e-mail:=
=0A> > >> >> > java-user-unsubscribe@lucene.apache.org=0A> >  >> >> > For a=
dditional commands, e-mail:=0A> > >>  >> > java-user-help@lucene.apache.org=
=0A> >  >> >>=0A> > >> >>=0A> > >> >>  ------------------------------------=
------------------------------=0A> >  >> >> --- To unsubscribe, e-mail:=0A>=
 > >> >> java-user-unsubscribe@lucene.apache.org=0A> >  >> >> For additiona=
l commands, e-mail: java-user-help@lucene.apache.org=0A> >  >> >=0A> > >> >=
=0A> > >> >  --------------------------------------------------------------=
-----=0A> >  >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0A> >  >> > For additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A> >  >> >=0A> > >> >=0A> > >>=0A> > >>  --------------------=
-------------------------------------------------=0A> >  >> To unsubscribe,=
 e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  >> For additional c=
ommands, e-mail: java-user-help@lucene.apache.org=0A> >  >=0A> > >=0A> > > =
 ---------------------------------------------------------------------=0A> =
>  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> > =
 > For additional commands, e-mail: java-user-help@lucene.apache.org=0A> > =
 >=0A> > >=0A> > =0A> >  --------------------------------------------------=
-------------------=0A> > To  unsubscribe, e-mail: java-user-unsubscribe@lu=
cene.apache.org=0A> >  For additional commands, e-mail: java-user-help@luce=
ne.apache.org=0A> =0A> =0A> -----------------------------------------------=
----------------------=0A> To  unsubscribe, e-mail: java-user-unsubscribe@l=
ucene.apache.org=0A> For  additional commands, e-mail: java-user-help@lucen=
e.apache.org=0A> =0A> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 11:44:10 2011
Return-Path: <java-user-return-49588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4469E237B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 11:44:10 +0000 (UTC)
Received: (qmail 24099 invoked by uid 500); 3 May 2011 11:44:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24052 invoked by uid 500); 3 May 2011 11:44:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24039 invoked by uid 99); 3 May 2011 11:44:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:44:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tpoljak@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:44:01 +0000
Received: by qwj9 with SMTP id 9so4373202qwj.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 04:43:40 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=PXLxnNz4p2+YFeh8rJyUu5WrXo0UZnBpcgUs5k4rZkQ=;
        b=dZ2WxMeYvggNPFIhgoPjlsQCICEps5G5y1RQJSbhg833Ee7uOOD1bE9iALr8dl4xV2
         Efv9wdvbpQ4UbP9r3lW0TwFOw6D/93gzD1V1bLiRoRv0mo0g650BfGeGR76m0ff7d7oh
         qCvFnZQKN+YjyGTSjKacNCKlJM2GAXblOtUac=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=kksQNl+9Wp+iYaAW9Q7jcZHc9xWWbEcJMeeM1H61gr3i2hbV5e1D7Zfvdewrq1O6A7
         vnV7+RiXDjlJG8HFXyawu5m3okO4yZfFwmnGWVgg9aRUj9ORfIHDc5sNsc1vW40SV2C/
         Q6VbrAziKnZCk7mc9ptQy9VENY13vfnBSjhr8=
MIME-Version: 1.0
Received: by 10.229.242.9 with SMTP id lg9mr6740123qcb.185.1304423020318; Tue,
 03 May 2011 04:43:40 -0700 (PDT)
Received: by 10.229.224.131 with HTTP; Tue, 3 May 2011 04:43:40 -0700 (PDT)
In-Reply-To: <BANLkTikZgUcQuHRAVmFZeP0hEMLMoF2OVA@mail.gmail.com>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
	<BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
	<347589.95733.qm@web130102.mail.mud.yahoo.com>
	<BANLkTikZgUcQuHRAVmFZeP0hEMLMoF2OVA@mail.gmail.com>
Date: Tue, 3 May 2011 13:43:40 +0200
Message-ID: <BANLkTincBCeZ-RDK71cVbwuH1Xv7_Wmwew@mail.gmail.com>
Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
From: Tomislav Poljak <tpoljak@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

2011/5/3 Michael McCandless <lucene@mikemccandless.com>:
> I feel like we are back to Basic ;)
>
> If you keep running line 40 over and over on the same memory index, do
> you see a slowdown?

Yes. I've tested running same query list (~3,5 k queries) on the same
MemoryIndex instance and after a while iterations get slower and
slower. Same thing happens when running queries on the same instance
of RAMDir based index holding only one doc. But, if I remove
MultiPhraseQuery type of queries from the query list then speed of
execution is the same, meaning execution time for other queries is
constant and it doesn't grow over time (as it would be expected).

I've tried to run tests with the latest 3.1 branch as Uwe suggested
(checkout and built today) and slowdown is still present when
MultiPhraseQuery type of queries are included (not removed from the
query list).

Tomislav

>
> Mike
>
> http://blog.mikemccandless.com
>
> On Mon, May 2, 2011 at 1:19 PM, Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
>> Hi,
>>
>> I think this describes what's going on:
>>
>> 10 load N stored queries
>> 20 parse N stored queries, keep them in some List forever
>> 30 for each incoming document create a new MemoryIndex instance "mi"
>> 40 for query 1 to N do mi.search(query)
>>
>> Over time this step 40 takes longer and longer and longer -- if some of =
the
>> queries are MultiPhraseQueries. =A0This is even with with mergeSort bein=
g used in
>> MultiPhraseQuery.
>>
>> Otis
>> ----
>> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>> Lucene ecosystem search :: http://search-lucene.com/
>>
>>
>>
>> ----- Original Message ----
>>> From: Michael McCandless <lucene@mikemccandless.com>
>>> To: java-user@lucene.apache.org
>>> Sent: Mon, May 2, 2011 12:15:40 PM
>>> Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
>>>
>>> By "slowing down over time" do you mean you use the same index (no new
>>> docs =A0added) yet running the same MPQ over and over you see it taking
>>> longer to =A0execute over time?
>>>
>>> Mike
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Mon, May 2, 2011 at =A012:00 PM, Tomislav Poljak <tpoljak@gmail.com>=
 wrote:
>>> > =A0Hi,
>>> > after running tests on both MemoryIndex and RAMDirectory based =A0ind=
ex
>>> > in Lucene 3.1, seems MultiPhraseQueries are slowing down over =A0time
>>> > (each iteration of executing the same MultiPhraseQueries on the =A0sa=
me
>>> > doc, seems to require more and more execution time). Are there =A0any
>>> > existing/known issues related to the MultiPhraseQuery in Lucene =A03.=
1
>>> > which could lead to this performance drop?
>>> >
>>> > =A0Tomislav
>>> >
>>> > =A0------------------------------------------------------------------=
---
>>> > To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > =A0For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For =A0additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 11:47:47 2011
Return-Path: <java-user-return-49589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E6F96890
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 11:47:46 +0000 (UTC)
Received: (qmail 31859 invoked by uid 500); 3 May 2011 11:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31751 invoked by uid 500); 3 May 2011 11:47:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31743 invoked by uid 99); 3 May 2011 11:47:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:47:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:47:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id F296AD36002
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 13:47:16 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id WTzFwTN-iI-c for <java-user@lucene.apache.org>;
	Tue,  3 May 2011 13:47:14 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 52777D36001
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 13:47:14 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>	<BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>	<347589.95733.qm@web130102.mail.mud.yahoo.com>	<BANLkTikZgUcQuHRAVmFZeP0hEMLMoF2OVA@mail.gmail.com> <BANLkTincBCeZ-RDK71cVbwuH1Xv7_Wmwew@mail.gmail.com>
In-Reply-To: <BANLkTincBCeZ-RDK71cVbwuH1Xv7_Wmwew@mail.gmail.com>
Subject: RE: MultiPhraseQuery slowing down over time in Lucene 3.1
Date: Tue, 3 May 2011 13:47:25 +0200
Message-ID: <003601cc0987$df7fa060$9e7ee120$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJyqe+dqtJASAD2QpVGn831GQ91jwGFdcjXAsoqrpICxK7hRQKz0Xhykt96niA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

> Hi,
> 
> 2011/5/3 Michael McCandless <lucene@mikemccandless.com>:
> > I feel like we are back to Basic ;)
> >
> > If you keep running line 40 over and over on the same memory index, do
> > you see a slowdown?
> 
> Yes. I've tested running same query list (~3,5 k queries) on the same
> MemoryIndex instance and after a while iterations get slower and slower.
> Same thing happens when running queries on the same instance of RAMDir
> based index holding only one doc. But, if I remove MultiPhraseQuery type
of
> queries from the query list then speed of execution is the same, meaning
> execution time for other queries is constant and it doesn't grow over time
(as
> it would be expected).
> 
> I've tried to run tests with the latest 3.1 branch as Uwe suggested
(checkout
> and built today) and slowdown is still present when MultiPhraseQuery type
> of queries are included (not removed from the query list).

Thanks! Then this is another issue. Seems to be some memory leak in this
query? That's completely strange. Can you open an issue?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 11:50:07 2011
Return-Path: <java-user-return-49590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F1C80C99
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 11:50:06 +0000 (UTC)
Received: (qmail 42058 invoked by uid 500); 3 May 2011 11:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42011 invoked by uid 500); 3 May 2011 11:50:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42003 invoked by uid 99); 3 May 2011 11:50:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:50:04 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:49:56 +0000
Received: from compute5.internal (compute5.nyi.mail.srv.osa [10.202.2.45])
	by gateway1.messagingengine.com (Postfix) with ESMTP id F02C620A56
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 07:49:35 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute5.internal (MEProxy); Tue, 03 May 2011 07:49:35 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=n79cW9rWjJqE56JDC6Rwm99Pjbs=; b=aXEraWNqM6lDn01fmR2k4N5nxtjClmIgm7jtL9sicGC8emu1/MAjdozA/mqS4ggo7Jd482RG7yg1FN5qkBKpQrG7s1jbnmYeY+OXhu9W/MOiVRehnUgUq5+iCiAbX9GS3FjF0yPPnfoPKfD4B50drTc8VkFonMGUeJXtnXGAaPY=
X-Sasl-enc: UPTPo6YpUzgY62fJfVyKvcB/t84emZ253ioITqu0FaMk 1304423375
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 898A344700F
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 07:49:35 -0400 (EDT)
Message-ID: <4DBFEBCD.9090504@fastmail.fm>
Date: Tue, 03 May 2011 12:49:33 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Anyway to not bother scoring less good matches ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Im receiving a number of searches with many ORs so that the total number 
of matches is huge ( > 1 million) although only the first 20 results are 
required. Analysis shows most time is spent scoring the results. Now it 
seems to me if you sending a query with 10 OR components, documents that 
match most of the terms are bound to get a better score than a match 
that only matches one or two of the terms.  So does lucene do any 
optimization to not bother working out the scores of the poor matches.

EDIT:Actually not sure the statement because if only term matches it 
could still get the highest score if the match was on the shortest term.

But can you see my point is there way to get lucene discount the less 
good matches without scoring them, or is there another approach. At the 
moment we allow the full lucene syntax and use QueryParser to parse a 
query and pass the resultant query to search unchanged (execpt for 
handling of numeric fields), should I be modifying the query somehow ?

thanks Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 11:56:19 2011
Return-Path: <java-user-return-49591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 46C25E7A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 11:56:19 +0000 (UTC)
Received: (qmail 51495 invoked by uid 500); 3 May 2011 11:56:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51377 invoked by uid 500); 3 May 2011 11:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51369 invoked by uid 99); 3 May 2011 11:56:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:56:17 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of harshcode@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 11:56:10 +0000
Received: by iwr19 with SMTP id 19so8530854iwr.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 04:55:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=52TRk+gUDFOyfzomTy2Vdln0c2tG2MUrUr7ZDrG1Hrg=;
        b=BCcvgIwzuhPPqjUhNHKii/Xa5zL6vEfojtlBk1pJZN+xFCBoks6VopzlcXu67/Sr4r
         CZA9KUGF7+OiWDahWTxz3CvBPqHniWWpf+f94Y/P3DnYk7skTP3wDxSY1R6qdGdv8hZR
         /7YxIgjLWUE2VEmoZ3Svcltn2zH/6gtngXzD8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=tOjT+ZfRV5EE1hbenopVP5HKo6Y07Af6FnU5vBLuHXv7TGPU4YF7wtMGGYH4Xbqzcj
         l25xBzIQYqfbw6i1yHs+DMqLmar6Vseht9iWzM+P2U9deo3lH5OulukPR+ssvgMMMTuf
         f3JcExu3NuZX0ytDzzmpMm+q4RCHvCWQnP7M0=
MIME-Version: 1.0
Received: by 10.42.73.200 with SMTP id t8mr3970575icj.4.1304423750422; Tue, 03
 May 2011 04:55:50 -0700 (PDT)
Received: by 10.42.228.66 with HTTP; Tue, 3 May 2011 04:55:50 -0700 (PDT)
Date: Tue, 3 May 2011 17:25:50 +0530
Message-ID: <BANLkTinGApnyDRoSaB_4yzc16FD1ZPmoJg@mail.gmail.com>
Subject: How to fix the number of searched terms for a field
From: harsh srivastava <harshcode@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e855a47cfae04a25dd25a

--90e6ba6e855a47cfae04a25dd25a
Content-Type: text/plain; charset=ISO-8859-1

Hi All,


I want to know any inbuilt method in lucene that can help me to fix the
number of searched terms for a given field e.g.
Suppose I have given content:(text1 text2 text3 text4 text5) to search and
want to limit it to 3 words only i.e. content:(text1 text2 text3)

Please help.

Thanks,
Harsh

--90e6ba6e855a47cfae04a25dd25a--

From java-user-return-49592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 12:13:50 2011
Return-Path: <java-user-return-49592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9E562764
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 12:13:49 +0000 (UTC)
Received: (qmail 80321 invoked by uid 500); 3 May 2011 12:13:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80274 invoked by uid 500); 3 May 2011 12:13:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80266 invoked by uid 99); 3 May 2011 12:13:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 12:13:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 12:13:40 +0000
Received: by qyk30 with SMTP id 30so505qyk.14
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 05:13:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=WFR1med7sJfLihXAIMoBp72YvGXD7zh1qYgG2w5PZFM=;
        b=dgze4WY7XIO724XouDKxoOed7+bSAC1Y3SREp64+kLpicjJDs4SgiYCEUA6j2ZEb7X
         s2sltc5ibt455g5UibhedCZJKY07ZKF8xlN/wqPAM8g3vznoRHUiE/U05KTELRQimDgZ
         s5ODlSmiogJeewAS3D0XhSm3VWZtzEIwJERkM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=qwt9/osI/SgsOzK1auGQ5cRdV5qCI5kVDov2TriDEvFYopdFJD0rH61ezaB7n5PfHu
         c5Rzcnr5BBGi8W8MiKQSAL8nQH1iGpVCCwB3XrzUSeLirXKV40gecFk+syNPoGgWH0lA
         ddirblA1S2O5ehZcbLYt4NnnJDCLJmrtWVrfg=
MIME-Version: 1.0
Received: by 10.229.77.139 with SMTP id g11mr6924325qck.9.1304424799458; Tue,
 03 May 2011 05:13:19 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Tue, 3 May 2011 05:13:19 -0700 (PDT)
In-Reply-To: <BANLkTinGApnyDRoSaB_4yzc16FD1ZPmoJg@mail.gmail.com>
References: <BANLkTinGApnyDRoSaB_4yzc16FD1ZPmoJg@mail.gmail.com>
Date: Tue, 3 May 2011 08:13:19 -0400
Message-ID: <BANLkTikTdW44zsrSBUg3pZcxq4wXw4RJEQ@mail.gmail.com>
Subject: Re: How to fix the number of searched terms for a field
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Why do you want to do this? I'm wondering if this is an XY problem...

See: http://people.apache.org/~hossman/#xyproblem

Best
Erick

On Tue, May 3, 2011 at 7:55 AM, harsh srivastava <harshcode@gmail.com> wrote:
> Hi All,
>
>
> I want to know any inbuilt method in lucene that can help me to fix the
> number of searched terms for a given field e.g.
> Suppose I have given content:(text1 text2 text3 text4 text5) to search and
> want to limit it to 3 words only i.e. content:(text1 text2 text3)
>
> Please help.
>
> Thanks,
> Harsh
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 13:20:40 2011
Return-Path: <java-user-return-49593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 31233960
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 13:20:40 +0000 (UTC)
Received: (qmail 72223 invoked by uid 500); 3 May 2011 13:20:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72126 invoked by uid 500); 3 May 2011 13:20:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72118 invoked by uid 99); 3 May 2011 13:20:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 13:20:37 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of prvs=110446a290=chris@mainsequence.net designates 207.54.164.6 as permitted sender)
Received: from [207.54.164.6] (HELO mainsequence.net) (207.54.164.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 13:20:29 +0000
Received: from 127.0.0.1 ([64.152.144.98])
	by mainsequence.net (mainsequence.net)
	(MDaemon PRO v10.1.1)
	with ESMTP id md50015388298.msg
	for <java-user@lucene.apache.org>; Tue, 03 May 2011 09:20:08 -0400
X-Spam-Processed: mainsequence.net, Tue, 03 May 2011 09:20:08 -0400
	(not processed: message from trusted or authenticated source)
X-MDRemoteIP: 64.152.144.98
X-Return-Path: prvs=110446a290=chris@mainsequence.net
X-Envelope-From: chris@mainsequence.net
X-MDaemon-Deliver-To: java-user@lucene.apache.org
Reply-To: "Chris Salem" <chris@mainsequence.net>
From: "Chris Salem" <chris@mainsequence.net>
To: java-user@lucene.apache.org
CC: iorixxx@yahoo.com
Subject: Re: ComplexPhraseQueryParser with multiple fields
Date: Tue, 03 May 2011 13:19:25 -0000
Message-Id: <168005801339660@mail.mainsequence.net>
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: PCR Emu of Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: PCR Emu of Microsoft MimeOLE V6.00.2800.1441
MIME-Version: 1.0
Content-Type: multipart/alternative;
      boundary="----=_pcr696D0B133F7840968FAA98B55A6E623Fsection1-b1"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_pcr696D0B133F7840968FAA98B55A6E623Fsection1-b1
Content-Type: text/plain; charset="ISO-2022-JP"
Content-Transfer-Encoding: 7bit

That seems to work.  Thank you!
Sincerely,
Chris Salem 
Development Team 
Main Sequence Technologies, Inc.
PCRecruiter.net - PCRecruiter Support
chris@mainsequence.net
P: 440.946.5214 ext 5458 
F: 440.856.0312

This email and any files transmitted with it may contain confidential information intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. Please note that any views or opinions presented in this email are solely those of the author and do not necessarily represent those of the company. Finally, the recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. Main Sequence Technologies, Inc. 4420 Sherwin Rd. Willoughby OH 44094 www.pcrecruiter.net




----- Original Message ----- 
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>, Chris Salem <chris@mainsequence.net>
From: Ahmet Arslan <iorixxx@yahoo.com>
Sent: 5/2/2011 6:42:37 AM
Subject: Re: ComplexPhraseQueryParser with multiple fields




Hi,
I've just started using the ComplexPhraseQueryParser and it works great with one field but is there a way for it to work with multiple fields?  For example, right now the query:
job_title: "sales man*" AND NOT contact_name: "Chris Salem"
throws this exception 
Caused by: org.apache.lucene.queryParser.ParseException: Cannot have clause for field "job_title" nested in phrase for field "contact_name"
What is the best way to work around this?

There is "Lucene-1486 non default field.patch" for that but it requires :

"Fixing this would require changing the package name of 
ComplexPhraseQueryParser or changing the visibility of "field" in the 
QueryParser base class to "protected".
Anyone have any strong feelings about which of these is the most acceptable?" 

https://issues.apache.org/jira/browse/LUCENE-1486


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



(The following links were included with this email:)
http://www.pcrecruiter.net/

http://www.pcrecruiter.net/support.htm

mailto:chris@mainsequence.net



------=_pcr696D0B133F7840968FAA98B55A6E623Fsection1-b1--




From java-user-return-49594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 13:57:41 2011
Return-Path: <java-user-return-49594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EBCB227C6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 13:57:40 +0000 (UTC)
Received: (qmail 34661 invoked by uid 500); 3 May 2011 13:57:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34610 invoked by uid 500); 3 May 2011 13:57:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34602 invoked by uid 99); 3 May 2011 13:57:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 13:57:38 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 13:57:31 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id EB0DE206D7
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 09:57:10 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Tue, 03 May 2011 09:57:10 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=mvO5AK5ajUWJz1ofM6qFPqM23lE=; b=qzBEDO8yL4kKkcIVzhgjsufh/hxwCYPES+/RgKh0jn5QWtszUs8zOnvW/uV+sJ9je3XFqYa670gtiDADnNd/IgcrOZiYBg6I/sggWnpCB7AagUVYmZQd6vQBFitsMlVhFHLYavRm1beuLGKsPHw/omg1hWZzwV9FpBVdthHIeD0=
X-Sasl-enc: yuzauDEYoGPPpNDIwzUJ8PPu/O7mueWJeG/BzwuAxXAk 1304431025
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 5A49D445325
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 09:57:05 -0400 (EDT)
Message-ID: <4DC009AF.6070508@fastmail.fm>
Date: Tue, 03 May 2011 14:57:03 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Problem modifying Similarity class to work with lucene 3.1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

How can I convert this Similariity method to use 3.1 (currently using 
3.0.3), I understand I have to replace lengthNorm() wuth computerNorm() 
, but fieldlName is not a provided parameter in computerNorm() and 
FieldInvertState does not contain the fieldname either. I need the field 
because I only want to make this adjustment for a particular field in 
the index not all fields, and I don't believe there is anything in the 
api at the moment to let you set similarity at a field level.

public class MusicbrainzSimilarity extends DefaultSimilarity {

     /**
      * Calculates a value which is inversely proportional to the number 
of terms in the field. When multiple
      * aliases are added to an artist (or label) it is seen as one 
field, so artists with many aliases can be
      * disadvantaged against when the matching alias is radically 
different to other aliases.
      *
      * @return score component
      */
     @Override
     public float lengthNorm(String fieldName, int numTerms) {

         if (fieldName.equals("alias")) {
             return 0.578f; //Same result as normal calc if field had 
three terms the most common scenario
         } else {
             return super.lengthNorm(fieldName, numTerms);
         }
     }

     /**
      * This method calculates a value based on how many times the 
search term was found in the field. Because
      * we have only short fields the only real case (apart from rare 
exceptions like Duran Duran Duran) whereby
      * the term term is found more than twice would be when
      * a search term matches multiples aliases, to remove the bias this 
gives towards artists/labels with
      * many aliases we limit the value to what would be returned for a 
two term match.
      *
      * Note: would prefer to do this just for alias field, but the 
field is not passed as a parameter.
      * @param freq
      * @return score component
      */
     @Override
     public float tf(float freq) {
         if (freq > 2.0f) {
             return 1.41f; //Same result as if matched term twice

         } else {
             return super.tf(freq);
         }
     }
}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 14:07:33 2011
Return-Path: <java-user-return-49595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 297E42E45
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 14:07:33 +0000 (UTC)
Received: (qmail 49666 invoked by uid 500); 3 May 2011 14:07:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49490 invoked by uid 500); 3 May 2011 14:07:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49481 invoked by uid 99); 3 May 2011 14:07:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 14:07:31 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 14:07:24 +0000
Received: by bwz8 with SMTP id 8so215002bwz.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 07:07:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=C0aMyhGO+ZmoIFm+GPlk8W2lxjr9b6Q9kScubN8V9ks=;
        b=xdxwnDsD2/NNSGXa/Cx/vqoNuN0Eq39gq1QnvPKZsi/WR+aNR9SgUpQhdPq17J5yrI
         mNq7vQmCQeDHLNIUU52nh0keDD189QyPp9fwCVA2yHhfTcos8XGReiLVNYrq+jThdNvL
         xahes5SUFycyoXCLmzE2QzF934XsK+bECTpGc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=ahiKwqu5ynMu/MkvK10wa8a9yPChSMd7obWCCOoYn7VqPF1ooox5OY/9P4NfIv3Cnk
         jQCwExGNq8/EN8rAwAXHXRBQE8WJh2fknIdf+b8KmAUzIwLJY+XHL+wD2wIbnlUzVegZ
         8/8xgTe23i4nL67zyYWP7AWBy4++0gMKz7jYg=
Received: by 10.204.84.166 with SMTP id j38mr4771948bkl.84.1304431624166; Tue,
 03 May 2011 07:07:04 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Tue, 3 May 2011 07:06:44 -0700 (PDT)
In-Reply-To: <4DC009AF.6070508@fastmail.fm>
References: <4DC009AF.6070508@fastmail.fm>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 3 May 2011 10:06:44 -0400
Message-ID: <BANLkTikvJsHTO68qQz+KJ_PhwMsWm3r1Qw@mail.gmail.com>
Subject: Re: Problem modifying Similarity class to work with lucene 3.1.0
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, May 3, 2011 at 9:57 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> How can I convert this Similariity method to use 3.1 (currently using
> 3.0.3), I understand I have to replace lengthNorm() wuth computerNorm() ,
> but fieldlName is not a provided parameter in computerNorm() and
> FieldInvertState does not contain the fieldname either.

Hi, I think you made a mistake, it does take fieldname:

http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/search/Similarity.html#computeNorm(java.lang.String,
org.apache.lucene.index.FieldInvertState)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 14:30:02 2011
Return-Path: <java-user-return-49596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 09D8E29A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 14:30:02 +0000 (UTC)
Received: (qmail 91996 invoked by uid 500); 3 May 2011 14:29:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91937 invoked by uid 500); 3 May 2011 14:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91900 invoked by uid 99); 3 May 2011 14:29:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 14:29:58 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 14:29:51 +0000
Received: from compute1.internal (compute1.nyi.mail.srv.osa [10.202.2.41])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 56437208E6;
	Tue,  3 May 2011 10:29:30 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute1.internal (MEProxy); Tue, 03 May 2011 10:29:30 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=yAEGjiVK46otCY0/6GiBuqU8eN8=; b=iOfCcJJvMEQqw7tczYQ0+EHfODFWIF6ywvITEfqn3WKwiFdkpVnaksbbULQxm4rYjDP5GRMebFPUKqtyaWzgRph4jXD+u7odglpu8hg8MzDJfG/1F6gqSr/rDHw2EFX6pEaPFGz0j96Wu+xOtxJMXtLVWI5I90TGlxvxQI6KstI=
X-Sasl-enc: mN2T0Squlro30X0bUKzIqfVUC9hgmeY8haJu7d5TV3FT 1304432969
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 59B23446C45;
	Tue,  3 May 2011 10:29:29 -0400 (EDT)
Message-ID: <4DC01148.7030704@fastmail.fm>
Date: Tue, 03 May 2011 15:29:28 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Robert Muir <rcmuir@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re: Problem modifying Similarity class to work with lucene 3.1.0
References: <4DC009AF.6070508@fastmail.fm> <BANLkTikvJsHTO68qQz+KJ_PhwMsWm3r1Qw@mail.gmail.com>
In-Reply-To: <BANLkTikvJsHTO68qQz+KJ_PhwMsWm3r1Qw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 03/05/2011 15:06, Robert Muir wrote:
> On Tue, May 3, 2011 at 9:57 AM, Paul Taylor<paul_t100@fastmail.fm>  wrote:
>> How can I convert this Similariity method to use 3.1 (currently using
>> 3.0.3), I understand I have to replace lengthNorm() wuth computerNorm() ,
>> but fieldlName is not a provided parameter in computerNorm() and
>> FieldInvertState does not contain the fieldname either.
> Hi, I think you made a mistake, it does take fieldname:
>
> http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/search/Similarity.html#computeNorm(java.lang.String,
> org.apache.lucene.index.FieldInvertState)
>
Doh thanks, not having a good few days, trying to do to much at once.

I assume this would be the correct way to fix the code for 3.1.0

public float computeNorm(String field, FieldInvertState state) {


         //This will match both artist and label aliases and is 
applicable to both, didn't use the constant
         //ArtistIndexField.ALIAS because that would be confusing
         if (field.equals("alias")) {
             return state.getBoost() * 0.578f; //Same result as normal 
calc if field had three terms the most common scenario
         }
         else
         {
             return super.computeNorm(field,state);
         }
     }


Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 14:50:26 2011
Return-Path: <java-user-return-49597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C2BA57A3
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 14:50:26 +0000 (UTC)
Received: (qmail 28521 invoked by uid 500); 3 May 2011 14:50:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28475 invoked by uid 500); 3 May 2011 14:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28467 invoked by uid 99); 3 May 2011 14:50:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 14:50:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 14:50:18 +0000
Received: by bwz8 with SMTP id 8so280295bwz.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 07:49:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:cc:content-type:content-transfer-encoding;
        bh=YwWqVfhdCKKucEtL63ohmD3vLqrivgRjeHksgV7wVZI=;
        b=fYYJrrNgXCO+HedRwLXSn1XkvTarK3anyWwAyEb6vnfGmtVztGOlf+mFmXyBVr/6wl
         pcZT/zyRPMZqQ5ZoXQkyX2MlXXuRQFlppTL6/MqBTDr1AaerSjOWDKu/Pw35wBVwiVgN
         QZ96YT5FSbAwHoiaY0f9gZ85sCdfOdOBi2mNs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type:content-transfer-encoding;
        b=FVMiD9eXA3CiwmFeNc5noe27VGbKPUkmavgvmCyui3dQvvdrbZmOUKAxmAt3hXYmyJ
         0tUro8ySIVN3vyyT5xnopjnAnpyn1wO0AhkBxxFd0gfUCER3qPKFq3qwpAr66sDU4+Th
         MhywaNR3Czu1Q0wfuAjuPS1pPj0YyGnwr26gs=
Received: by 10.204.74.7 with SMTP id s7mr128317bkj.57.1304434197845; Tue, 03
 May 2011 07:49:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Tue, 3 May 2011 07:49:37 -0700 (PDT)
In-Reply-To: <4DC01148.7030704@fastmail.fm>
References: <4DC009AF.6070508@fastmail.fm> <BANLkTikvJsHTO68qQz+KJ_PhwMsWm3r1Qw@mail.gmail.com>
 <4DC01148.7030704@fastmail.fm>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 3 May 2011 10:49:37 -0400
Message-ID: <BANLkTinYOP_iaLobZWUMLn=nuwR194mLSg@mail.gmail.com>
Subject: Re: Problem modifying Similarity class to work with lucene 3.1.0
To: paul_t100@fastmail.fm
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, May 3, 2011 at 10:29 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> I assume this would be the correct way to fix the code for 3.1.0
>

Yes, thats correct.

> public float computeNorm(String field, FieldInvertState state) {
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//This will match both artist and label aliase=
s and is applicable to
> both, didn't use the constant
> =C2=A0 =C2=A0 =C2=A0 =C2=A0//ArtistIndexField.ALIAS because that would be=
 confusing
> =C2=A0 =C2=A0 =C2=A0 =C2=A0if (field.equals("alias")) {
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return state.getBoost() * 0.578f=
; //Same result as normal calc if
> field had three terms the most common scenario
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0 =C2=A0 =C2=A0else
> =C2=A0 =C2=A0 =C2=A0 =C2=A0{
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0return super.computeNorm(field,s=
tate);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0}
> =C2=A0 =C2=A0}
>
>
> Paul
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 15:26:24 2011
Return-Path: <java-user-return-49598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 022252ACB
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 15:26:24 +0000 (UTC)
Received: (qmail 94028 invoked by uid 500); 3 May 2011 15:26:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93995 invoked by uid 500); 3 May 2011 15:26:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93987 invoked by uid 99); 3 May 2011 15:26:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 15:26:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 15:26:15 +0000
Received: by wyb40 with SMTP id 40so231369wyb.35
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 08:25:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.197.201 with SMTP id el9mr5325241wbb.22.1304436354715;
 Tue, 03 May 2011 08:25:54 -0700 (PDT)
Received: by 10.227.11.67 with HTTP; Tue, 3 May 2011 08:25:54 -0700 (PDT)
In-Reply-To: <BANLkTincBCeZ-RDK71cVbwuH1Xv7_Wmwew@mail.gmail.com>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
	<BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
	<347589.95733.qm@web130102.mail.mud.yahoo.com>
	<BANLkTikZgUcQuHRAVmFZeP0hEMLMoF2OVA@mail.gmail.com>
	<BANLkTincBCeZ-RDK71cVbwuH1Xv7_Wmwew@mail.gmail.com>
Date: Tue, 3 May 2011 11:25:54 -0400
Message-ID: <BANLkTins1T5V6+aKAtqX5BGhQrv9pT_9zA@mail.gmail.com>
Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, May 3, 2011 at 7:43 AM, Tomislav Poljak <tpoljak@gmail.com> wrote:
> Hi,
>
> 2011/5/3 Michael McCandless <lucene@mikemccandless.com>:
>> I feel like we are back to Basic ;)
>>
>> If you keep running line 40 over and over on the same memory index, do
>> you see a slowdown?
>
> Yes. I've tested running same query list (~3,5 k queries) on the same
> MemoryIndex instance and after a while iterations get slower and
> slower. Same thing happens when running queries on the same instance
> of RAMDir based index holding only one doc. But, if I remove
> MultiPhraseQuery type of queries from the query list then speed of
> execution is the same, meaning execution time for other queries is
> constant and it doesn't grow over time (as it would be expected).
>
> I've tried to run tests with the latest 3.1 branch as Uwe suggested
> (checkout and built today) and slowdown is still present when
> MultiPhraseQuery type of queries are included (not removed from the
> query list).

Spooky!

Can you boil this into a contained test case?

Mike

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 16:03:41 2011
Return-Path: <java-user-return-49599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CF9F62013
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 16:03:41 +0000 (UTC)
Received: (qmail 65801 invoked by uid 500); 3 May 2011 16:03:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65761 invoked by uid 500); 3 May 2011 16:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65753 invoked by uid 99); 3 May 2011 16:03:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 16:03:39 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 16:03:32 +0000
Received: from compute2.internal (compute2.nyi.mail.srv.osa [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id C242A20730
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 12:03:11 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Tue, 03 May 2011 12:03:11 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type:content-transfer-encoding; s=smtpout; bh=8YP5qHaV9z0bPlwP6nj7suZZQcg=; b=FslieL4K8J8wrtm0LoTHn8yHlBz7RgJYy9j/XyWcNY6UBrCj4vfIJHwcIa5uQyn2PUq60M5Uw3F87h/lEArvVM+d310DpQKaSPwbCMyIcHYlJN8g3ifC9cUFY6cDxkTFjldyx4vnhRRVROZNPtR1LFYb+yhCXACgA0Tqf3hKnFU=
X-Sasl-enc: t71SjiA6UM8yrm8FeSqcCGTQc1HVhol0Y34ruATFBjZG 1304438591
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 5F4B6446C88
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 12:03:11 -0400 (EDT)
Message-ID: <4DC0273D.1080904@fastmail.fm>
Date: Tue, 03 May 2011 17:03:09 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Why has PerFieldAnalyzerWrapper  been made final in Lucene 3.1 ?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

We subclassed  PerFieldAnalyzerWrapper as follows:

public class PerFieldEntityAnalyzer extends PerFieldAnalyzerWrapper {

     public PerFieldEntityAnalyzer(Class indexFieldClass) {
         super(new StandardUnaccentAnalyzer());

         for(Object o : EnumSet.allOf(indexFieldClass)) {
             IndexField indexField = (IndexField) o;
             Analyzer analyzer = indexField.getAnalyzer();
             if (analyzer != null) {
                 this.addAnalyzer(indexField.getName(), analyzer);
             }
         }
     }
}

but now we cant do this.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 16:58:09 2011
Return-Path: <java-user-return-49600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25E89214B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 16:58:09 +0000 (UTC)
Received: (qmail 55335 invoked by uid 500); 3 May 2011 16:58:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55290 invoked by uid 500); 3 May 2011 16:58:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55282 invoked by uid 99); 3 May 2011 16:58:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 16:58:06 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 16:58:02 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id AB217C2169
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 18:57:40 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id fDxfNGME3bXb for <java-user@lucene.apache.org>;
	Tue,  3 May 2011 18:57:40 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 33143C2117
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 18:57:40 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 3 May 2011 18:57:40 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 3 May 2011 18:57:39 +0200
Subject: AW: AW: "fuzzy prefix" search
Thread-Topic: AW: "fuzzy prefix" search
Thread-Index: AcwJhmLxcbxEaicOTge7whX+plK/lgALFsZw
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
 <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
 <796945.6397.qm@web130103.mail.mud.yahoo.com>
In-Reply-To: <796945.6397.qm@web130103.mail.mud.yahoo.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

How does an simple Analyzer look that just "n-grams" the docs/fields.

class SimpleNGramAnalyzer extends Analyzer
{
@Override
public TokenStream tokenStream ( String fieldName, Reader reader )
{
   EdgeNGramTokenFilter... ???
}
}

> -----Urspr=FCngliche Nachricht-----
> Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Gesendet: Dienstag, 3. Mai 2011 13:36
> An: java-user@lucene.apache.org
> Betreff: Re: AW: "fuzzy prefix" search
>=20
> Hi,
>=20
> I didn't read this thread closely, but just in case:
> * Is this something you can handle with synonyms?
> * If this is for English and you are trying to handle typos, there is a l=
ist of
> common English misspellings out there that you could use for this perhaps=
.
> * Have you considered n-gramming your tokens?  Not sure if this would hel=
p,
> didn't read messages/examples closely enough, but you may want to look at
> this if you haven't done so yet.
>=20
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosyste=
m
> search :: http://search-lucene.com/
>=20
>=20
>=20
> ----- Original Message ----
> > From: Clemens Wyss <clemensdev@mysign.ch>
> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> > Sent: Tue, May 3, 2011 5:25:30 AM
> > Subject: AW: "fuzzy prefix" search
> >
> > >PrefixQuery
> > I'd like the combination of prefix and fuzzy ;-) because  people could
> >also type "menlo" or "m=E4rl" and in any of these cases I'd like to  get
> >a hit on Merlot (for suggesting Merlot)
> >
> > > -----Urspr=FCngliche  Nachricht-----
> > > Von: Ian Lea [mailto:ian.lea@gmail.com]
> > > Gesendet:  Dienstag, 3. Mai 2011 11:22
> > > An: java-user@lucene.apache.org
> > >  Betreff: Re: "fuzzy prefix" search
> > >
> > > I'd assumed that FuzzyQuery  wouldn't ignore case but I could be wron=
g.
> > >  What would be the edit  distance between "mer" and "merlot"? Would
> > > it be less that 1.5 which I  reckon would be the value of
> > > length(term)*0.5 as detailed in the  javadocs?  Seems unlikely, but
> > > I don't really know anything about  the Levenshtein (edit distance)
> algorithm as used by FuzzyQuery.
> > >  Wouldn't a PrefixQuery be more appropriate here?
> > >
> > >
> > >  --
> > > Ian.
> > >
> > > On Tue, May 3, 2011 at 10:10 AM, Clemens Wyss
> > > <clemensdev@mysign.ch>
> > >  wrote:
> > > > Unfortunately lowercasing doesn't help.
> > > > Also,  doesn't the FuzzyQuery ignore casing?
> > > >
> > > >>  -----Urspr=FCngliche Nachricht-----
> > > >> Von: Ian Lea [mailto:ian.lea@gmail.com]
> > > >>  Gesendet: Dienstag, 3. Mai 2011 11:06
> > > >> An: java-user@lucene.apache.org
> > >  >> Betreff: Re: "fuzzy prefix" search
> > > >>
> > > >>  Mer !=3D mer.  The latter will be what is indexed because
> > > >> StandardAnalyzer calls LowerCaseFilter.
> > > >>
> > > >>  --
> > > >> Ian.
> > > >>
> > > >>
> > > >> On  Tue, May 3, 2011 at 9:56 AM, Clemens Wyss
> > > <clemensdev@mysign.ch>
> > > >>  wrote:
> > > >> > Sorry for coming back to my issue. Can anybody  explain why my
> > > "simple"
> > > >> unit test below fails? Any  hint/help appreciated.
> > > >> >
> > > >> > Directory  directory =3D new RAMDirectory(); IndexWriter
> > > >> > indexWriter =3D  new IndexWriter( directory, new
> > > >> > StandardAnalyzer(
> > >  Version.LUCENE_31
> > > >> > ), IndexWriter.MaxFieldLength.UNLIMITED  ); Document document
> =3D
> > > new
> > > >> > Document();  document.add( new Field( "test", "Merlot",
> > > >> > Field.Store.YES, Field.Index.ANALYZED ) );
> > > >> > indexWriter.addDocument(
> > >  >> > document ); IndexReader indexReader =3D
> > > indexWriter.getReader();
> > > >> > IndexSearcher searcher =3D new  IndexSearcher( indexReader );
> > > >> > Query q =3D new FuzzyQuery(  new Term( "test", "Mer" ), 0.5f, 0,
> > > >> > 10 ); // or Query q =3D  new FuzzyQuery( new Term( "test", "Mer"
> > > >> > ), 0.5f); TopDocs  result =3D searcher.search( q, 10 );
> > > >> > Assert.assertEquals( 1,  result.totalHits );
> > > >> >
> > > >> > -  Clemens
> > > >> >
> > > >> >> -----Urspr=FCngliche  Nachricht-----
> > > >> >> Von: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > >>  >> Gesendet: Montag, 2. Mai 2011 23:01
> > > >> >> An: java-user@lucene.apache.org
> > >  >> >> Betreff: AW: "fuzzy prefix" search
> > > >>  >>
> > > >> >> Is it the combination of FuzzyQuery and Term  which makes the
> > > >> >> search to go for "word  boundaries"?
> > > >> >>
> > > >> >> >  -----Urspr=FCngliche Nachricht-----
> > > >> >> > Von: Clemens  Wyss [mailto:clemensdev@mysign.ch]
> > > >>  >> > Gesendet: Montag, 2. Mai 2011 14:13
> > > >> >> >  An: java-user@lucene.apache.org
> > >  >> >> > Betreff: AW: "fuzzy prefix" search
> > > >>  >> >
> > > >> >> > I tried this too, but unfortunately  I only get hits when
> > > >> >> > the search term is a least  as long as the word to be looked =
up.
> > > >> >> >
> > >  >> >> > E.g.:
> > > >> >> > ...
> > > >>  >> > Directory directory =3D new RAMDirectory(); IndexWriter
> > >  >> >> > indexWriter =3D new IndexWriter( directory,  >> >> >
> > > IndexManager.getIndexingAnalyzer(
> > > >>  >> LOCALE_DE ),
> > > >> >> >              IndexWriter.MaxFieldLength.UNLIMITED );
> > > >> >> >
> > >  >> >> > Document document =3D new Document(); document.add( new
> > > Field(
> > > >> >> > "test", "Merlot",
> > > >>  >> >             Field.Store.YES, Field.Index.ANALYZED ) );
> > >  >> >> indexWriter.addDocument(
> > > >> >> >  document );
> > > >> >> >
> > > >> >> >  IndexReader indexReader =3D indexWriter.getReader();
> > > >> >> > IndexSearcher
> > >  >> >> > searcher =3D new IndexSearcher( indexReader );  >> >> >
> > > >> >> > Query q =3D new FuzzyQuery(  new Term( "test", "Mer" ), 0.6f,
> > > >> >> > 1 ); TopDocs  result =3D searcher.search( q, 10 );
> > > >> >> > Assert.assertEquals(
> > > >>  >> > 1,
> > > >> >> result.totalHits ); ...
> > >  >> >> >
> > > >> >> > > -----Urspr=FCngliche  Nachricht-----
> > > >> >> > > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > >> >>  > > Gesendet: Montag, 2. Mai 2011 13:50
> > > >> >> >  > An: java-user@lucene.apache.org
> > >  >> >> > > Betreff: RE: "fuzzy prefix" search
> > > >>  >> > >
> > > >> >> > > Hi,
> > > >>  >> > >
> > > >> >> > > You can pass an integer  to FuzzyQuery which defines the
> > > >> >> > > number of  characters that are seen as prefix. So all
> > > >> >> > > terms must match
> > > >>  >> > > this prefix and the rest of each term is matched using  fu=
zzy.
> > > >> >> > >
> > > >> >> > >  Uwe
> > > >> >> > >
> > > >> >> > >  -----
> > > >> >> > > Uwe Schindler
> > > >>  >> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > >> http://www.thetaphi.de
> > >  >> >> > > eMail: uwe@thetaphi.de
> > > >> >> >  >
> > > >> >> > > > -----Original Message-----
> > >  >> >> > > > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > >>  >> > > > Sent: Monday, May 02, 2011 1:47 PM  >> > > > To:
> > > >> java-user@lucene.apache.org
> > >  >> >> > > > Subject: "fuzzy prefix" search  >> >> > > >
> > > >> >> > > > I'd  like to search fuzzily but not on a full term.
> > > >> >> >  > > E.g.
> > > >> >> > > > I have a text "Merlot  del Ticino"
> > > >> >> > > > I'd like
> > > >>  >> > > > "mer", "merr", "melo", ... to match.
> > > >>  >> > > >
> > > >> >> > > > If I use  FuzzyQuery only "merlot,  "merlott" hit. What
> > > >> >> >  > > Query-combination should I use?
> > > >> >> > >  >
> > > >> >> > > > Thx
> > > >> >> >  > > Clemens
> > > >> >> > > >
> > > >>  >> > > >
> > > >> >> > > >
> > > >> >> > > > --------------------------------------------------------
> > > >> >> > > > ----
> > > >>  >> > > > ---
> > > >> >> > > > ---
> > >  >> >> > > > --
> > > >> >> > > > -  To unsubscribe, e-mail:
> > > >> >> > > > java-user-unsubscribe@lucene.apache.org
> > >  >> >> > > > For additional commands, e-mail:
> > >  >> >> > > > java-user-help@lucene.apache.org  >> >> > >
> > > >> >> > >
> > >  >> >> > >
> > > >> >> > >
> > > >> >> > > ----------------------------------------------------------
> > > >> >> > > ----
> > > >>  >> > > ---
> > > >> >> > > ---
> > > >>  >> > > - To unsubscribe, e-mail:
> > > >> >> > > java-user-unsubscribe@lucene.apache.org
> > >  >> >> > > For additional commands, e-mail:
> > > >>  >> > > java-user-help@lucene.apache.org
> > >  >> >> >
> > > >> >> >
> > > >> >>  >
> > > >> >> --------------------------------------------------------------
> > > >> >> --
> > >  >> >> > ---
> > > >> >> > -- To unsubscribe,  e-mail:
> > > >> >> > java-user-unsubscribe@lucene.apache.org
> > >  >> >> > For additional commands, e-mail:
> > > >>  >> > java-user-help@lucene.apache.org
> > >  >> >>
> > > >> >>
> > > >> >>
> > > >> >> --------------------------------------------------------------
> > > >> >> ----
> > >  >> >> --- To unsubscribe, e-mail:
> > > >> >> java-user-unsubscribe@lucene.apache.org
> > >  >> >> For additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >> >
> > > >> >
> > > >> >
> > > >> > ---------------------------------------------------------------
> > > >> > ----
> > >  >> > -- To unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  >> > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >> >
> > > >> >
> > > >>
> > > >>
> > > >> -----------------------------------------------------------------
> > > >> ----
> > >  >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  >> For additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > ---
> > >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 19:31:40 2011
Return-Path: <java-user-return-49601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3BB2BE9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 19:31:40 +0000 (UTC)
Received: (qmail 29705 invoked by uid 500); 3 May 2011 19:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29662 invoked by uid 500); 3 May 2011 19:31:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29654 invoked by uid 99); 3 May 2011 19:31:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 19:31:38 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.94.239.42] (HELO web130122.mail.mud.yahoo.com) (66.94.239.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 May 2011 19:31:33 +0000
Received: (qmail 3140 invoked by uid 60001); 3 May 2011 19:31:12 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304451072; bh=xSBP68im5GYfVSrVQENZE/Lnk0B3XaidcEyi/TQNdlk=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=DV55A3ygRZjE2oigTKUa+BWEE1YAmzD89UXHJdImsl4YIsq1dxi1TPlnGIxQ/TN+dbv2NSNPg5U1Y6qe8M7HvcC0psm9Mud3OxV8rpzijGErMjQmRA52zG1/q0QvFohU9Zu2eFn/caCiLOXKloLRCmRg0h8LfUSdXagDtljgTRQ=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=JYsAqwi4XBqtl10PxxMR+n/B2JaRhVWfWxuu/+f4GNuGMo+Oh9VZsM+3g4z/R6LiS0F0rzDB29pk8Xfn6tTMTwVLEfEJk+2lXwMOZoNDzw3u1h2vzLvLAaoDksr4E7peS9NTjvjr1P8Q7E9i+QdGNuRNMRmrXKL0tef+sgtsIwo=;
Message-ID: <733611.86868.qm@web130122.mail.mud.yahoo.com>
X-YMail-OSG: elAeeD8VM1mYuUvDEMOipBjapLRS2DjvVDfE5AYcWv36SDK
 jADhbrEVjO7KZZdroqZi9raljxQVYUPkSyvZ3Qlh5MzPmb834oSzowEpR1KY
 Qz0Zbt6gPFbvnGwI3kcm0xXYIqiIzhc9aZZVVCVNlgCWm7iHg.onJR_RKkwy
 0BOgk1QOuQqeDwCn5AbSvE6rhQBr26sx_INvSRhFM17OsXfVOCTd8qlYX6ib
 8hN3a2M7wqyhWbleLNFt_N6jURSi4OroyFbYBTdgt9RfkiTCgX9aNXikEbHW
 _Xwy2bQGPpguoUaUvLXIMT8StyLhXdGRY9.OZcKypcvkPpbKlQ85CK6HcMNz
 OYgrzrodTMxr.pV7kBTAjETNT.g4ihwqxulhWanWe5GLL19sXG4M86FuqOWD
 vax5s8b2zzjr.OA--
Received: from [184.75.0.187] by web130122.mail.mud.yahoo.com via HTTP; Tue, 03 May 2011 12:31:12 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp> <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp> <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp> <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp> <796945.6397.qm@web130103.mail.mud.yahoo.com> <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
Date: Tue, 3 May 2011 12:31:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: AW: "fuzzy prefix" search
To: java-user@lucene.apache.org
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

Clemens,=0A=0ASomething a la:=0A=0Apublic TokenStream tokenStream (String f=
ieldName, Reader r) {=0A  return nw EdgeNGramTokenFilter(new KeywordTokeniz=
er(r), =0AEdgeNGramTokenFilter.Side.FRONT, 1, 4);=0A}=0A=0A=0ACheck out pag=
e 265 of Lucene in Action 2.=0A=0AOtis=0A----=0ASematext :: http://sematext=
.com/ :: Solr - Lucene - Nutch=0ALucene ecosystem search :: http://search-l=
ucene.com/=0A=0A=0A=0A----- Original Message ----=0A> From: Clemens Wyss <c=
lemensdev@mysign.ch>=0A> To: "java-user@lucene.apache.org" <java-user@lucen=
e.apache.org>=0A> Sent: Tue, May 3, 2011 12:57:39 PM=0A> Subject: AW: AW: "=
fuzzy prefix" search=0A> =0A> How does an simple Analyzer look that just "n=
-grams" the  docs/fields.=0A> =0A> class SimpleNGramAnalyzer extends  Analy=
zer=0A> {=0A> @Override=0A> public TokenStream tokenStream ( String fieldNa=
me,  Reader reader )=0A> {=0A>    EdgeNGramTokenFilter...  ???=0A> }=0A> }=
=0A> =0A> > -----Urspr=FCngliche Nachricht-----=0A> > Von: Otis  Gospodneti=
c [mailto:otis_gospodnetic@yahoo.com]=0A> >  Gesendet: Dienstag, 3. Mai 201=
1 13:36=0A> > An: java-user@lucene.apache.org=0A> >  Betreff: Re: AW: "fuzz=
y prefix" search=0A> > =0A> > Hi,=0A> > =0A> > I  didn't read this thread c=
losely, but just in case:=0A> > * Is this something  you can handle with sy=
nonyms?=0A> > * If this is for English and you are  trying to handle typos,=
 there is a list =0A>of=0A> > common English misspellings  out there that y=
ou could use for this perhaps.=0A> > * Have you considered  n-gramming your=
 tokens?  Not sure if this would help,=0A> > didn't read  messages/examples=
 closely enough, but you may want to look at=0A> > this if  you haven't don=
e so yet.=0A> > =0A> > Otis=0A> > ----=0A> > Sematext :: http://sematext.co=
m/ :: Solr -  Lucene - Nutch Lucene ecosystem=0A> > search :: http://search=
-lucene.com/=0A> > =0A> > =0A> > =0A> > ----- Original  Message ----=0A> > =
> From: Clemens Wyss <clemensdev@mysign.ch>=0A> > > To:  "java-user@lucene.=
apache.org"  <java-user@lucene.apache.org>=0A> >  > Sent: Tue, May 3, 2011 =
5:25:30 AM=0A> > > Subject: AW: "fuzzy prefix"  search=0A> > >=0A> > > >Pre=
fixQuery=0A> > > I'd like the  combination of prefix and fuzzy ;-) because =
 people could=0A> > >also  type "menlo" or "m=E4rl" and in any of these cas=
es I'd like to  get=0A> >  >a hit on Merlot (for suggesting Merlot)=0A> > >=
=0A> > > >  -----Urspr=FCngliche  Nachricht-----=0A> > > > Von: Ian Lea  [m=
ailto:ian.lea@gmail.com]=0A> > > >  Gesendet:  Dienstag, 3. Mai 2011 11:22=
=0A> > > > An: java-user@lucene.apache.org=0A> >  > >  Betreff: Re: "fuzzy =
prefix" search=0A> > > >=0A> >  > > I'd assumed that FuzzyQuery  wouldn't i=
gnore case but I could be  =0Awrong.=0A> > > >  What would be the edit  dis=
tance between  "mer" and "merlot"? Would=0A> > > > it be less that 1.5 whic=
h I   reckon would be the value of=0A> > > > length(term)*0.5 as detailed i=
n  the  javadocs?  Seems unlikely, but=0A> > > > I don't really  know anyth=
ing about  the Levenshtein (edit distance)=0A> > algorithm as  used by Fuzz=
yQuery.=0A> > > >  Wouldn't a PrefixQuery be more  appropriate here?=0A> > =
> >=0A> > > >=0A> > > >   --=0A> > > > Ian.=0A> > > >=0A> > > > On Tue, May=
 3,  2011 at 10:10 AM, Clemens Wyss=0A> > > > <clemensdev@mysign.ch>=0A> > =
>  >  wrote:=0A> > > > > Unfortunately lowercasing doesn't  help.=0A> > > >=
 > Also,  doesn't the FuzzyQuery ignore  casing?=0A> > > > >=0A> > > > >>  =
 -----Urspr=FCngliche Nachricht-----=0A> > > > >> Von: Ian Lea  [mailto:ian=
.lea@gmail.com]=0A> > > >  >>  Gesendet: Dienstag, 3. Mai 2011 11:06=0A> > =
> > >>  An: java-user@lucene.apache.org=0A> >  > >  >> Betreff: Re: "fuzzy =
prefix" search=0A> > > >  >>=0A> > > > >>  Mer !=3D mer.  The latter will b=
e  what is indexed because=0A> > > > >> StandardAnalyzer calls  LowerCaseFi=
lter.=0A> > > > >>=0A> > > > >>   --=0A> > > > >> Ian.=0A> > > > >>=0A> > >=
 >  >>=0A> > > > >> On  Tue, May 3, 2011 at 9:56 AM,  Clemens Wyss=0A> > > =
> <clemensdev@mysign.ch>=0A> > >  > >>  wrote:=0A> > > > >> > Sorry for com=
ing back  to my issue. Can anybody  explain why my=0A> > > > "simple"=0A> >=
  > > >> unit test below fails? Any  hint/help  appreciated.=0A> > > > >> >=
=0A> > > > >> >  Directory  directory =3D new RAMDirectory(); IndexWriter=
=0A> > > >  >> > indexWriter =3D  new IndexWriter( directory, new=0A> > >  =
> >> > StandardAnalyzer(=0A> > > >   Version.LUCENE_31=0A> > > > >> > ),  I=
ndexWriter.MaxFieldLength.UNLIMITED  ); Document document=0A> >  =3D=0A> > =
> > new=0A> > > > >> > Document();   document.add( new Field( "test", "Merl=
ot",=0A> > > > >> >  Field.Store.YES, Field.Index.ANALYZED ) );=0A> > > > >=
> >  indexWriter.addDocument(=0A> > > >  >> > document );  IndexReader inde=
xReader =3D=0A> > > > indexWriter.getReader();=0A> >  > > >> > IndexSearche=
r searcher =3D new  IndexSearcher(  indexReader );=0A> > > > >> > Query q =
=3D new FuzzyQuery(   new Term( "test", "Mer" ), 0.5f, 0,=0A> > > > >> > 10=
 ); // or  Query q =3D  new FuzzyQuery( new Term( "test", "Mer"=0A> > > >  =
>> > ), 0.5f); TopDocs  result =3D searcher.search( q, 10 );=0A> >  > > >> =
> Assert.assertEquals( 1,  result.totalHits  );=0A> > > > >> >=0A> > > > >>=
 > -   Clemens=0A> > > > >> >=0A> > > > >> >>  -----Urspr=FCngliche  Nachri=
cht-----=0A> > > > >> >> Von:  Clemens Wyss [mailto:clemensdev@mysign.ch]=
=0A> > > >  >>  >> Gesendet: Montag, 2. Mai 2011 23:01=0A> > > >  >> >> An:=
 java-user@lucene.apache.org=0A> >  > >  >> >> Betreff: AW: "fuzzy prefix" =
search=0A> >  > > >>  >>=0A> > > > >> >> Is it the  combination of FuzzyQue=
ry and Term  which makes the=0A> > > >  >> >> search to go for "word  bound=
aries"?=0A> > > >  >> >>=0A> > > > >> >> >   -----Urspr=FCngliche Nachricht=
-----=0A> > > > >> >> > Von:  Clemens  Wyss [mailto:clemensdev@mysign.ch]=
=0A> > > >  >>  >> > Gesendet: Montag, 2. Mai 2011 14:13=0A> > >  > >> >> >=
  An: java-user@lucene.apache.org=0A> >  > >  >> >> > Betreff: AW: "fuzzy p=
refix"  search=0A> > > > >>  >> >=0A> > > > >>  >> > I tried this too, but =
unfortunately  I only get hits  when=0A> > > > >> >> > the search term is a=
 least   as long as the word to be looked =0Aup.=0A> > > > >> >>  >=0A> > >=
 >  >> >> > E.g.:=0A> > > >  >> >> > ...=0A> > > > >>  >> >  Directory dire=
ctory =3D new RAMDirectory(); IndexWriter=0A> > > >   >> >> > indexWriter =
=3D new IndexWriter( directory,  >>  >> >=0A> > > > IndexManager.getIndexin=
gAnalyzer(=0A> > >  > >>  >> LOCALE_DE ),=0A> > > > >> >>  >               =
IndexWriter.MaxFieldLength.UNLIMITED );=0A> > > > >> >>  >=0A> > > >  >> >>=
 > Document document =3D new  Document(); document.add( new=0A> > > > Field=
(=0A> > > >  >> >> > "test", "Merlot",=0A> > > > >>   >> >             Fiel=
d.Store.YES,  Field.Index.ANALYZED ) );=0A> > > >  >> >>  indexWriter.addDo=
cument(=0A> > > > >> >> >  document  );=0A> > > > >> >> >=0A> > > > >> >>  =
>  IndexReader indexReader =3D indexWriter.getReader();=0A> > > >  >> >> > =
IndexSearcher=0A> > > >  >> >>  > searcher =3D new IndexSearcher( indexRead=
er );  >> >>  >=0A> > > > >> >> > Query q =3D new FuzzyQuery(   new Term( "=
test", "Mer" ), 0.6f,=0A> > > > >> >> > 1 );  TopDocs  result =3D searcher.=
search( q, 10 );=0A> > > > >>  >> > Assert.assertEquals(=0A> > > > >>  >>  =
> 1,=0A> > > > >> >> result.totalHits ); ...=0A> > >  >  >> >> >=0A> > > > =
>> >> > >  -----Urspr=FCngliche  Nachricht-----=0A> > > > >> >> >  > Von: U=
we Schindler [mailto:uwe@thetaphi.de]=0A> > > > >>  >>  > > Gesendet: Monta=
g, 2. Mai 2011 13:50=0A> > > >  >> >> >  > An: java-user@lucene.apache.org=
=0A> >  > >  >> >> > > Betreff: RE: "fuzzy prefix"  search=0A> > > > >>  >>=
 > >=0A> > > >  >> >> > > Hi,=0A> > > > >>  >> >  >=0A> > > > >> >> > > You=
 can pass an integer   to FuzzyQuery which defines the=0A> > > > >> >> > > =
 number of  characters that are seen as prefix. So all=0A> > > >  >> >> > >=
 terms must match=0A> > > > >>   >> > > this prefix and the rest of each te=
rm is matched using   =0A>fuzzy.=0A> > > > >> >> > >=0A> > > > >>  >> > >  =
Uwe=0A> > > > >> >> >  >=0A> > > > >> >> > >  -----=0A> > > >  >> >> > > Uw=
e Schindler=0A> > > > >>   >> > > H.-H.-Meier-Allee 63, D-28213 Bremen=0A> =
> > >  >> http://www.thetaphi.de=0A> > > >  >> >> > >  eMail: uwe@thetaphi.=
de=0A> > > > >>  >> >  >=0A> > > > >> >> > > >  -----Original Message-----=
=0A> > > >  >> >> > >  > From: Clemens Wyss [mailto:clemensdev@mysign.ch]=
=0A> > > >  >>  >> > > > Sent: Monday, May 02, 2011 1:47 PM   >> > > > To:=
=0A> > > > >> java-user@lucene.apache.org=0A> >  > >  >> >> > > > Subject: =
"fuzzy prefix"  search  >> >> > > >=0A> > > > >>  >> > > > I'd  like to sea=
rch fuzzily but not on a full  term.=0A> > > > >> >> >  > > E.g.=0A> > >  >=
 >> >> > > > I have a text "Merlot  del  Ticino"=0A> > > > >> >> > > > I'd =
like=0A> > >  > >>  >> > > > "mer", "merr", "melo", ... to  match.=0A> > > =
> >>  >> > > >=0A> > >  > >> >> > > > If I use  FuzzyQuery only  "merlot,  =
"merlott" hit. What=0A> > > > >> >>  >  > > Query-combination should I use?=
=0A> > > > >>  >> > >  >=0A> > > > >> >> > > >  Thx=0A> > > > >> >> >  > > =
Clemens=0A> >  > > >> >> > > >=0A> > > > >>   >> > > >=0A> > > > >> >> > > =
 >=0A> > > > >> >> > > >  -------------------------------------------------=
-------=0A> > > >  >> >> > > > ----=0A> > > > >>  >>  > > > ---=0A> > > > >=
> >> > > >  ---=0A> > > >  >> >> > > > --=0A> > >  > >> >> > > > -  To unsu=
bscribe, e-mail:=0A> >  > > >> >> > > > java-user-unsubscribe@lucene.apache=
.org=0A> >  > >  >> >> > > > For additional commands,  e-mail:=0A> > > >  >=
> >> > > > java-user-help@lucene.apache.org   >> >> > >=0A> > > > >> >> >  =
>=0A> > > >  >> >> > >=0A> > > >  >> >> > >=0A> > > > >> >> > >  ----------=
------------------------------------------------=0A> > > >  >> >> > > ----=
=0A> > > > >>  >> >  > ---=0A> > > > >> >> > > ---=0A> > > >  >>  >> > > - =
To unsubscribe, e-mail:=0A> > > >  >> >> > > java-user-unsubscribe@lucene.a=
pache.org=0A> >  > >  >> >> > > For additional commands,  e-mail:=0A> > > >=
 >>  >> > > java-user-help@lucene.apache.org=0A> >  > >  >> >> >=0A> > > > =
>> >>  >=0A> > > > >> >>  >=0A> > > > >>  >> ------------------------------=
--------------------------------=0A> >  > > >> >> --=0A> > > >  >> >> >  --=
-=0A> > > > >> >> > -- To unsubscribe,   e-mail:=0A> > > > >> >> > java-use=
r-unsubscribe@lucene.apache.org=0A> >  > >  >> >> > For additional commands=
, e-mail:=0A> >  > > >>  >> > java-user-help@lucene.apache.org=0A> >  > >  =
>> >>=0A> > > > >> >>=0A> >  > > >> >>=0A> > > > >> >>  -------------------=
-------------------------------------------=0A> > > >  >> >> ----=0A> > > >=
  >> >> --- To  unsubscribe, e-mail:=0A> > > > >> >> java-user-unsubscribe@=
lucene.apache.org=0A> >  > >  >> >> For additional commands, e-mail:=0A> > =
>  > java-user-help@lucene.apache.org   >> >=0A> > > > >> >=0A> > > > >>  >=
=0A> > > > >> >  ----------------------------------------------------------=
-----=0A> > >  > >> > ----=0A> > > >  >> > -- To unsubscribe,  e-mail:=0A> =
> > > java-user-unsubscribe@lucene.apache.org=0A> >  > >  >> > For addition=
al commands, e-mail:=0A> > >  > java-user-help@lucene.apache.org   >> >=0A>=
 > > > >> >=0A> > > >  >>=0A> > > > >>=0A> > > > >>  ----------------------=
-------------------------------------------=0A> > >  > >> ----=0A> > > >  >=
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  > =
>  >> For additional commands, e-mail:=0A> > > > java-user-help@lucene.apac=
he.org   >=0A> > > > >=0A> > > > >=0A> > > > >  ---------------------------=
---------------------------------------=0A> > >  > > ---=0A> > > >  > To un=
subscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  > >  > Fo=
r additional commands, e-mail: java-user-help@lucene.apache.org=0A> >  > > =
>=0A> > > > >=0A> > > >=0A> > >  >=0A> > > >  -----------------------------=
---------------------------------------=0A> >  > > - To  unsubscribe, e-mai=
l: java-user-unsubscribe@lucene.apache.org=0A> >  > >  For additional comma=
nds, e-mail: java-user-help@lucene.apache.org=0A> >  >=0A> > >=0A> > >  ---=
------------------------------------------------------------------=0A> >  >=
 To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  > =
For  additional commands, e-mail: java-user-help@lucene.apache.org=0A> >  >=
=0A> > >=0A> > =0A> >  ----------------------------------------------------=
-----------------=0A> > To  unsubscribe, e-mail: java-user-unsubscribe@luce=
ne.apache.org=0A> >  For additional commands, e-mail: java-user-help@lucene=
.apache.org=0A> =0A> =0A> -------------------------------------------------=
--------------------=0A> To  unsubscribe, e-mail: java-user-unsubscribe@luc=
ene.apache.org=0A> For  additional commands, e-mail: java-user-help@lucene.=
apache.org=0A> =0A> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 20:31:46 2011
Return-Path: <java-user-return-49602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 24B6B2B25
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 20:31:46 +0000 (UTC)
Received: (qmail 43936 invoked by uid 500); 3 May 2011 20:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43899 invoked by uid 500); 3 May 2011 20:31:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43891 invoked by uid 99); 3 May 2011 20:31:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 20:31:43 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 20:31:37 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 258E7C2184
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 22:31:17 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Gyo9j0mUbwMy for <java-user@lucene.apache.org>;
	Tue,  3 May 2011 22:31:16 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id C1F97C2117
	for <java-user@lucene.apache.org>; Tue,  3 May 2011 22:31:16 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Tue, 3 May 2011 22:31:16 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 3 May 2011 22:31:14 +0200
Subject: AW: AW: AW: "fuzzy prefix" search
Thread-Topic: AW: AW: "fuzzy prefix" search
Thread-Index: AcwJyLv6ooCJ8OzOTU6PlSj1fma5/AACBMxg
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
 <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
 <796945.6397.qm@web130103.mail.mud.yahoo.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
 <733611.86868.qm@web130122.mail.mud.yahoo.com>
In-Reply-To: <733611.86868.qm@web130122.mail.mud.yahoo.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

But doesn't the KeyWordTokenizer extract single words out oft he stream? I =
would like to create n-grams on the stream (field content) as it is...

> -----Urspr=FCngliche Nachricht-----
> Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Gesendet: Dienstag, 3. Mai 2011 21:31
> An: java-user@lucene.apache.org
> Betreff: Re: AW: AW: "fuzzy prefix" search
>=20
> Clemens,
>=20
> Something a la:
>=20
> public TokenStream tokenStream (String fieldName, Reader r) {
>   return nw EdgeNGramTokenFilter(new KeywordTokenizer(r),
> EdgeNGramTokenFilter.Side.FRONT, 1, 4); }
>=20
>=20
> Check out page 265 of Lucene in Action 2.
>=20
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> Lucene ecosystem search :: http://search-lucene.com/
>=20
>=20
>=20
> ----- Original Message ----
> > From: Clemens Wyss <clemensdev@mysign.ch>
> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> > Sent: Tue, May 3, 2011 12:57:39 PM
> > Subject: AW: AW: "fuzzy prefix" search
> >
> > How does an simple Analyzer look that just "n-grams" the  docs/fields.
> >
> > class SimpleNGramAnalyzer extends  Analyzer
> > {
> > @Override
> > public TokenStream tokenStream ( String fieldName,  Reader reader )
> > {
> >    EdgeNGramTokenFilter...  ???
> > }
> > }
> >
> > > -----Urspr=FCngliche Nachricht-----
> > > Von: Otis  Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  Gesendet: Dienstag, 3. Mai 2011 13:36
> > > An: java-user@lucene.apache.org
> > >  Betreff: Re: AW: "fuzzy prefix" search
> > >
> > > Hi,
> > >
> > > I  didn't read this thread closely, but just in case:
> > > * Is this something  you can handle with synonyms?
> > > * If this is for English and you are  trying to handle typos, there i=
s a list
> >of
> > > common English misspellings  out there that you could use for this
> perhaps.
> > > * Have you considered  n-gramming your tokens?  Not sure if this woul=
d
> help,
> > > didn't read  messages/examples closely enough, but you may want to
> look at
> > > this if  you haven't done so yet.
> > >
> > > Otis
> > > ----
> > > Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch Lucene
> ecosystem
> > > search :: http://search-lucene.com/
> > >
> > >
> > >
> > > ----- Original  Message ----
> > > > From: Clemens Wyss <clemensdev@mysign.ch>
> > > > To:  "java-user@lucene.apache.org"  <java-user@lucene.apache.org>
> > >  > Sent: Tue, May 3, 2011 5:25:30 AM
> > > > Subject: AW: "fuzzy prefix"  search
> > > >
> > > > >PrefixQuery
> > > > I'd like the  combination of prefix and fuzzy ;-) because  people c=
ould
> > > >also  type "menlo" or "m=E4rl" and in any of these cases I'd like to=
  get
> > >  >a hit on Merlot (for suggesting Merlot)
> > > >
> > > > >  -----Urspr=FCngliche  Nachricht-----
> > > > > Von: Ian Lea  [mailto:ian.lea@gmail.com]
> > > > >  Gesendet:  Dienstag, 3. Mai 2011 11:22
> > > > > An: java-user@lucene.apache.org
> > >  > >  Betreff: Re: "fuzzy prefix" search
> > > > >
> > >  > > I'd assumed that FuzzyQuery  wouldn't ignore case but I could be
> wrong.
> > > > >  What would be the edit  distance between  "mer" and "merlot"?
> Would
> > > > > it be less that 1.5 which I   reckon would be the value of
> > > > > length(term)*0.5 as detailed in  the  javadocs?  Seems unlikely, =
but
> > > > > I don't really  know anything about  the Levenshtein (edit distan=
ce)
> > > algorithm as  used by FuzzyQuery.
> > > > >  Wouldn't a PrefixQuery be more  appropriate here?
> > > > >
> > > > >
> > > > >   --
> > > > > Ian.
> > > > >
> > > > > On Tue, May 3,  2011 at 10:10 AM, Clemens Wyss
> > > > > <clemensdev@mysign.ch>
> > > >  >  wrote:
> > > > > > Unfortunately lowercasing doesn't  help.
> > > > > > Also,  doesn't the FuzzyQuery ignore  casing?
> > > > > >
> > > > > >>   -----Urspr=FCngliche Nachricht-----
> > > > > >> Von: Ian Lea  [mailto:ian.lea@gmail.com]
> > > > >  >>  Gesendet: Dienstag, 3. Mai 2011 11:06
> > > > > >>  An: java-user@lucene.apache.org
> > >  > >  >> Betreff: Re: "fuzzy prefix" search
> > > > >  >>
> > > > > >>  Mer !=3D mer.  The latter will be  what is indexed because
> > > > > >> StandardAnalyzer calls  LowerCaseFilter.
> > > > > >>
> > > > > >>   --
> > > > > >> Ian.
> > > > > >>
> > > > >  >>
> > > > > >> On  Tue, May 3, 2011 at 9:56 AM,  Clemens Wyss
> > > > > <clemensdev@mysign.ch>
> > > >  > >>  wrote:
> > > > > >> > Sorry for coming back  to my issue. Can anybody  explain why=
 my
> > > > > "simple"
> > >  > > >> unit test below fails? Any  hint/help  appreciated.
> > > > > >> >
> > > > > >> >  Directory  directory =3D new RAMDirectory(); IndexWriter
> > > > >  >> > indexWriter =3D  new IndexWriter( directory, new
> > > >  > >> > StandardAnalyzer(
> > > > >   Version.LUCENE_31
> > > > > >> > ),  IndexWriter.MaxFieldLength.UNLIMITED  ); Document
> document
> > >  =3D
> > > > > new
> > > > > >> > Document();   document.add( new Field( "test", "Merlot",
> > > > > >> >  Field.Store.YES, Field.Index.ANALYZED ) );
> > > > > >> >  indexWriter.addDocument(
> > > > >  >> > document );  IndexReader indexReader =3D
> > > > > indexWriter.getReader();
> > >  > > >> > IndexSearcher searcher =3D new  IndexSearcher(  indexReader=
 );
> > > > > >> > Query q =3D new FuzzyQuery(   new Term( "test", "Mer" ), 0.5=
f, 0,
> > > > > >> > 10 ); // or  Query q =3D  new FuzzyQuery( new Term( "test", =
"Mer"
> > > > >  >> > ), 0.5f); TopDocs  result =3D searcher.search( q, 10 );
> > >  > > >> > Assert.assertEquals( 1,  result.totalHits  );
> > > > > >> >
> > > > > >> > -   Clemens
> > > > > >> >
> > > > > >> >>  -----Urspr=FCngliche  Nachricht-----
> > > > > >> >> Von:  Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > >  >>  >> Gesendet: Montag, 2. Mai 2011 23:01
> > > > >  >> >> An: java-user@lucene.apache.org
> > >  > >  >> >> Betreff: AW: "fuzzy prefix" search
> > >  > > >>  >>
> > > > > >> >> Is it the  combination of FuzzyQuery and Term  which makes =
the
> > > > >  >> >> search to go for "word  boundaries"?
> > > > >  >> >>
> > > > > >> >> >   -----Urspr=FCngliche Nachricht-----
> > > > > >> >> > Von:  Clemens  Wyss [mailto:clemensdev@mysign.ch]
> > > > >  >>  >> > Gesendet: Montag, 2. Mai 2011 14:13
> > > >  > >> >> >  An: java-user@lucene.apache.org
> > >  > >  >> >> > Betreff: AW: "fuzzy prefix"  search
> > > > > >>  >> >
> > > > > >>  >> > I tried this too, but unfortunately  I only get hits  wh=
en
> > > > > >> >> > the search term is a least   as long as the word to be lo=
oked
> up.
> > > > > >> >>  >
> > > > >  >> >> > E.g.:
> > > > >  >> >> > ...
> > > > > >>  >> >  Directory directory =3D new RAMDirectory(); IndexWriter
> > > > >   >> >> > indexWriter =3D new IndexWriter( directory,  >>  >> >
> > > > > IndexManager.getIndexingAnalyzer(
> > > >  > >>  >> LOCALE_DE ),
> > > > > >> >>  >               IndexWriter.MaxFieldLength.UNLIMITED );
> > > > > >> >>  >
> > > > >  >> >> > Document document =3D new  Document(); document.add(
> new
> > > > > Field(
> > > > >  >> >> > "test", "Merlot",
> > > > > >>   >> >             Field.Store.YES,  Field.Index.ANALYZED ) );
> > > > >  >> >>  indexWriter.addDocument(
> > > > > >> >> >  document  );
> > > > > >> >> >
> > > > > >> >>  >  IndexReader indexReader =3D indexWriter.getReader();
> > > > >  >> >> > IndexSearcher
> > > > >  >> >>  > searcher =3D new IndexSearcher( indexReader );  >> >>  =
>
> > > > > >> >> > Query q =3D new FuzzyQuery(   new Term( "test", "Mer" ), =
0.6f,
> > > > > >> >> > 1 );  TopDocs  result =3D searcher.search( q, 10 );
> > > > > >>  >> > Assert.assertEquals(
> > > > > >>  >>  > 1,
> > > > > >> >> result.totalHits ); ...
> > > >  >  >> >> >
> > > > > >> >> > >  -----Urspr=FCngliche  Nachricht-----
> > > > > >> >> >  > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > > > >>  >>  > > Gesendet: Montag, 2. Mai 2011 13:50
> > > > >  >> >> >  > An: java-user@lucene.apache.org
> > >  > >  >> >> > > Betreff: RE: "fuzzy prefix"  search
> > > > > >>  >> > >
> > > > >  >> >> > > Hi,
> > > > > >>  >> >  >
> > > > > >> >> > > You can pass an integer   to FuzzyQuery which defines t=
he
> > > > > >> >> > >  number of  characters that are seen as prefix. So all
> > > > >  >> >> > > terms must match
> > > > > >>   >> > > this prefix and the rest of each term is matched usin=
g
> >fuzzy.
> > > > > >> >> > >
> > > > > >>  >> > >  Uwe
> > > > > >> >> >  >
> > > > > >> >> > >  -----
> > > > >  >> >> > > Uwe Schindler
> > > > > >>   >> > > H.-H.-Meier-Allee 63, D-28213 Bremen
> > > > >  >> http://www.thetaphi.de
> > > > >  >> >> > >  eMail: uwe@thetaphi.de
> > > > > >>  >> >  >
> > > > > >> >> > > >  -----Original Message-----
> > > > >  >> >> > >  > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > >  >>  >> > > > Sent: Monday, May 02, 2011 1:47 PM   >> > > > To:
> > > > > >> java-user@lucene.apache.org
> > >  > >  >> >> > > > Subject: "fuzzy prefix"  search  >> >> > > >
> > > > > >>  >> > > > I'd  like to search fuzzily but not on a full  term.
> > > > > >> >> >  > > E.g.
> > > >  > >> >> > > > I have a text "Merlot  del  Ticino"
> > > > > >> >> > > > I'd like
> > > >  > >>  >> > > > "mer", "merr", "melo", ... to  match.
> > > > > >>  >> > > >
> > > >  > >> >> > > > If I use  FuzzyQuery only  "merlot,  "merlott" hit. =
What
> > > > > >> >>  >  > > Query-combination should I use?
> > > > > >>  >> > >  >
> > > > > >> >> > > >  Thx
> > > > > >> >> >  > > Clemens
> > >  > > >> >> > > >
> > > > > >>   >> > > >
> > > > > >> >> > >  >
> > > > > >> >> > > >  ----------------------------------------------------=
----
> > > > >  >> >> > > > ----
> > > > > >>  >>  > > > ---
> > > > > >> >> > > >  ---
> > > > >  >> >> > > > --
> > > >  > >> >> > > > -  To unsubscribe, e-mail:
> > >  > > >> >> > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  >> >> > > > For additional commands,  e-mail:
> > > > >  >> >> > > > java-user-help@lucene.apache.org   >> >> > >
> > > > > >> >> >  >
> > > > >  >> >> > >
> > > > >  >> >> > >
> > > > > >> >> > >  ------------------------------------------------------=
----
> > > > >  >> >> > > ----
> > > > > >>  >> >  > ---
> > > > > >> >> > > ---
> > > > >  >>  >> > > - To unsubscribe, e-mail:
> > > > >  >> >> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  >> >> > > For additional commands,  e-mail:
> > > > > >>  >> > > java-user-help@lucene.apache.org
> > >  > >  >> >> >
> > > > > >> >>  >
> > > > > >> >>  >
> > > > > >>  >> ----------------------------------------------------------=
----
> > >  > > >> >> --
> > > > >  >> >> >  ---
> > > > > >> >> > -- To unsubscribe,   e-mail:
> > > > > >> >> > java-user-unsubscribe@lucene.apache.org
> > >  > >  >> >> > For additional commands, e-mail:
> > >  > > >>  >> > java-user-help@lucene.apache.org
> > >  > >  >> >>
> > > > > >> >>
> > >  > > >> >>
> > > > > >> >>  ----------------------------------------------------------=
----
> > > > >  >> >> ----
> > > > >  >> >> --- To  unsubscribe, e-mail:
> > > > > >> >> java-user-unsubscribe@lucene.apache.org
> > >  > >  >> >> For additional commands, e-mail:
> > > >  > java-user-help@lucene.apache.org   >> >
> > > > > >> >
> > > > > >>  >
> > > > > >> >  -----------------------------------------------------------=
----
> > > >  > >> > ----
> > > > >  >> > -- To unsubscribe,  e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  >> > For additional commands, e-mail:
> > > >  > java-user-help@lucene.apache.org   >> >
> > > > > >> >
> > > > >  >>
> > > > > >>
> > > > > >>  -------------------------------------------------------------=
----
> > > >  > >> ----
> > > > >  >> To unsubscribe, e-mail: java-user-
> unsubscribe@lucene.apache.org
> > >  > >  >> For additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org   >
> > > > > >
> > > > > >
> > > > > >  --------------------------------------------------------------=
----
> > > >  > > ---
> > > > >  > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.or=
g
> > >  > >  > For additional commands, e-mail: java-user-
> help@lucene.apache.org
> > >  > > >
> > > > > >
> > > > >
> > > >  >
> > > > >  ----------------------------------------------------------------=
----
> > >  > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.o=
rg
> > >  > >  For additional commands, e-mail: java-user-help@lucene.apache.o=
rg
> > >  >
> > > >
> > > >  ------------------------------------------------------------------=
---
> > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For  additional commands, e-mail: java-user-help@lucene.apache.org
> > >  >
> > > >
> > >
> > >  --------------------------------------------------------------------=
-
> > > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May  3 21:12:16 2011
Return-Path: <java-user-return-49603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA9F521A3
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  3 May 2011 21:12:16 +0000 (UTC)
Received: (qmail 14035 invoked by uid 500); 3 May 2011 21:12:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13995 invoked by uid 500); 3 May 2011 21:12:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13987 invoked by uid 99); 3 May 2011 21:12:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 03 May 2011 21:12:14 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.94.238.136] (HELO web130109.mail.mud.yahoo.com) (66.94.238.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 03 May 2011 21:12:07 +0000
Received: (qmail 50820 invoked by uid 60001); 3 May 2011 21:11:45 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304457105; bh=cPQyydM9jtSkCgpsYxgW0JaUDns5nptVhn6tkHPoe4Q=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=pns7XVFx5XhI4FwLGNRDiYnXNqS3aePr3ZcRpnOBNOQN7TMKYU7sxe0GY154f3XZ6QtjjbABeOktNpaP7loaxxCv1FEQoDIZeCre7OqfT8ecpsPy2aX/DesH1I+P6CZj1vm9MENVfhiE0zGYESvtSJX9OvEwhPbygnBmtmrKtGo=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=a38S49JDTpKlExTod3ELNKfKzm555/wP9BoJNFQzkQylvGBHz9Dz3DjNhYERywAOUcxOymCPqLACYoaQsZY7HSs0LqVCN/PVivFNp6J6jyzQZ9bJ4c79KBdCbeFGOglGN0YH6wr5P3TMua6NXRdgCbonOwuzCbeCwLOmYeoDnhY=;
Message-ID: <855496.50707.qm@web130109.mail.mud.yahoo.com>
X-YMail-OSG: 2e0xRyMVM1nRe3Bc6rHDoewqCSo7eAHNAUP2.wNWSJ9YjrJ
 8f3sch_61GmhRR565D3Uu6riA9cbeLo3p_rog1HPptn2aQqIWQE828YJ58pj
 Y8xgT_sLejjUl71FfZ_l_nVOXY_RAL7LL2FlZeJlpRcJZbqkvVsUbKl30VXa
 tcvhRKx2TH2RIp4axBLOMHkxQF1hgF9VoYG6HN9hiafKbZ5zWKctRk65jbOG
 KF38yFfJJ_6mAc_DMWw5qN1dfRrujyuLyylQCx8zKk50mlYIH4MisorbfK7x
 TpQ1AE4Mua1IbdlXIm8FN5GqdIhyBYdN3wzxuHk2gDXSV20cfsQoC659MP1P
 gr0Jz1AiczNOTk00GE10Amm7WVqE1Z3F5BAwLwnjU0.AGjee1V.13qxe7Cxu
 16Sa876o00a0K
Received: from [184.75.0.187] by web130109.mail.mud.yahoo.com via HTTP; Tue, 03 May 2011 14:11:45 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp> <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp> <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp> <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp> <796945.6397.qm@web130103.mail.mud.yahoo.com> <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp> <733611.86868.qm@web130122.mail.mud.yahoo.com> <E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
Date: Tue, 3 May 2011 14:11:45 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: AW: AW: "fuzzy prefix" search
To: java-user@lucene.apache.org
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Clemens - that's just an example.  Stick another tokenizer in there, like =
=0AWhitespaceTokenizer in there, for example.=0A=0AOtis=0A----=0ASematext :=
: http://sematext.com/ :: Solr - Lucene - Nutch=0ALucene ecosystem search :=
: http://search-lucene.com/=0A=0A=0A=0A----- Original Message ----=0A> From=
: Clemens Wyss <clemensdev@mysign.ch>=0A> To: "java-user@lucene.apache.org"=
 <java-user@lucene.apache.org>=0A> Sent: Tue, May 3, 2011 4:31:14 PM=0A> Su=
bject: AW: AW: AW: "fuzzy prefix" search=0A> =0A> But doesn't the KeyWordTo=
kenizer extract single words out oft he stream? I =0A>would  like to create=
 n-grams on the stream (field content) as it is...=0A> =0A> >  -----Urspr=
=FCngliche Nachricht-----=0A> > Von: Otis Gospodnetic [mailto:otis_gospodne=
tic@yahoo.com]=0A> >  Gesendet: Dienstag, 3. Mai 2011 21:31=0A> > An: java-=
user@lucene.apache.org=0A> >  Betreff: Re: AW: AW: "fuzzy prefix" search=0A=
> > =0A> > Clemens,=0A> > =0A> > Something a la:=0A> > =0A> > public TokenS=
tream tokenStream (String  fieldName, Reader r) {=0A> >   return nw EdgeNGr=
amTokenFilter(new  KeywordTokenizer(r),=0A> > EdgeNGramTokenFilter.Side.FRO=
NT, 1, 4); }=0A> > =0A> > =0A> > Check out page 265 of Lucene in Action 2.=
=0A> > =0A> >  Otis=0A> > ----=0A> > Sematext :: http://sematext.com/ :: So=
lr - Lucene - Nutch=0A> > Lucene  ecosystem search :: http://search-lucene.=
com/=0A> > =0A> > =0A> > =0A> > ----- Original  Message ----=0A> > > From: =
Clemens Wyss <clemensdev@mysign.ch>=0A> > > To:  "java-user@lucene.apache.o=
rg"  <java-user@lucene.apache.org>=0A> >  > Sent: Tue, May 3, 2011 12:57:39=
 PM=0A> > > Subject: AW: AW: "fuzzy  prefix" search=0A> > >=0A> > > How doe=
s an simple Analyzer look that  just "n-grams" the  docs/fields.=0A> > >=0A=
> > > class  SimpleNGramAnalyzer extends  Analyzer=0A> > > {=0A> > >  @Over=
ride=0A> > > public TokenStream tokenStream ( String fieldName,   Reader re=
ader )=0A> > > {=0A> > >     EdgeNGramTokenFilter...  ???=0A> > > }=0A> > >=
 }=0A> >  >=0A> > > > -----Urspr=FCngliche Nachricht-----=0A> > > > Von:  O=
tis  Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=0A> >  > >  Gesendet: =
Dienstag, 3. Mai 2011 13:36=0A> > > > An: java-user@lucene.apache.org=0A> >=
  > >  Betreff: Re: AW: "fuzzy prefix" search=0A> > >  >=0A> > > > Hi,=0A> =
> > >=0A> > > > I  didn't  read this thread closely, but just in case:=0A> =
> > > * Is this  something  you can handle with synonyms?=0A> > > > * If th=
is is for  English and you are  trying to handle typos, there is a =0A>list=
=0A> >  >of=0A> > > > common English misspellings  out there that you  coul=
d use for this=0A> > perhaps.=0A> > > > * Have you  considered  n-gramming =
your tokens?  Not sure if this would=0A> >  help,=0A> > > > didn't read  me=
ssages/examples closely enough, but  you may want to=0A> > look at=0A> > > =
> this if  you haven't done  so yet.=0A> > > >=0A> > > > Otis=0A> > > > ---=
-=0A> >  > > Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch Luc=
ene=0A> >  ecosystem=0A> > > > search :: http://search-lucene.com/=0A> > > =
>=0A> > >  >=0A> > > >=0A> > > > ----- Original  Message  ----=0A> > > > > =
From: Clemens Wyss <clemensdev@mysign.ch>=0A> > >  > > To:  "java-user@luce=
ne.apache.org"   <java-user@lucene.apache.org>=0A> >  > >  > Sent: Tue, May=
 3, 2011 5:25:30 AM=0A> > > > >  Subject: AW: "fuzzy prefix"  search=0A> > =
> > >=0A> > >  > > >PrefixQuery=0A> > > > > I'd like the  combination  of p=
refix and fuzzy ;-) because  people =0A>could=0A> > > >  >also  type "menlo=
" or "m=E4rl" and in any of these cases I'd like  to  =0A>get=0A> > > >  >a=
 hit on Merlot (for suggesting  Merlot)=0A> > > > >=0A> > > > > >   -----Ur=
spr=FCngliche  Nachricht-----=0A> > > > > > Von: Ian  Lea  [mailto:ian.lea@=
gmail.com]=0A> > > > >  >  Gesendet:  Dienstag, 3. Mai 2011 11:22=0A> > > >=
 >  > An: java-user@lucene.apache.org=0A> >  > >  > >  Betreff: Re: "fuzzy =
prefix" search=0A> > >  > > >=0A> > > >  > > I'd assumed that  FuzzyQuery  =
wouldn't ignore case but I could be=0A> > wrong.=0A> > >  > > >  What would=
 be the edit  distance between  "mer"  and "merlot"?=0A> > Would=0A> > > > =
> > it be less that 1.5  which I   reckon would be the value of=0A> > > > >=
 >  length(term)*0.5 as detailed in  the  javadocs?  Seems unlikely,  =0A>b=
ut=0A> > > > > > I don't really  know anything about   the Levenshtein (edi=
t =0Adistance)=0A> > > > algorithm as  used by  FuzzyQuery.=0A> > > > > >  =
Wouldn't a PrefixQuery be  more  appropriate here?=0A> > > > > >=0A> > > > =
>  >=0A> > > > > >   --=0A> > > > > >  Ian.=0A> > > > > >=0A> > > > > > On =
Tue, May  3,  2011 at 10:10 AM, Clemens Wyss=0A> > > > > > <clemensdev@mysi=
gn.ch>=0A> > >  > >  >  wrote:=0A> > > > > > > Unfortunately  lowercasing d=
oesn't  help.=0A> > > > > > > Also,   doesn't the FuzzyQuery ignore  casing=
?=0A> > > > > >  >=0A> > > > > > >>   -----Urspr=FCngliche  Nachricht-----=
=0A> > > > > > >> Von: Ian Lea   [mailto:ian.lea@gmail.com]=0A> > > > >  > =
 >>  Gesendet: Dienstag, 3. Mai 2011 11:06=0A> > >  > > > >>  An: java-user=
@lucene.apache.org=0A> >  > >  > >  >> Betreff: Re: "fuzzy prefix"  search=
=0A> > > > > >  >>=0A> > > > > >  >>  Mer !=3D mer.  The latter will be  wh=
at is indexed  because=0A> > > > > > >> StandardAnalyzer calls   LowerCaseF=
ilter.=0A> > > > > > >>=0A> > > > >  > >>   --=0A> > > > > > >> Ian.=0A> > =
>  > > > >>=0A> > > > > >  >>=0A> > >  > > > >> On  Tue, May 3, 2011 at 9:5=
6 AM,  Clemens  Wyss=0A> > > > > > <clemensdev@mysign.ch>=0A> > >  > >  > >=
>  wrote:=0A> > > > > > >>  > Sorry for coming back  to my issue. Can anybo=
dy  explain why  =0A>my=0A> > > > > > "simple"=0A> > > >  > >  >> unit test=
 below fails? Any  hint/help  appreciated.=0A> >  > > > > >> >=0A> > > > > =
> >>  >  Directory  directory =3D new RAMDirectory(); IndexWriter=0A> >  > =
> > >  >> > indexWriter =3D  new IndexWriter(  directory, new=0A> > > > >  =
> >> >  StandardAnalyzer(=0A> > > > > >   Version.LUCENE_31=0A> >  > > > > =
>> > ),   IndexWriter.MaxFieldLength.UNLIMITED  ); Document=0A> > document=
=0A> >  > >  =3D=0A> > > > > > new=0A> > > > > >  >> > Document();   docume=
nt.add( new Field( "test",  "Merlot",=0A> > > > > > >> >  Field.Store.YES, =
 Field.Index.ANALYZED ) );=0A> > > > > > >> >   indexWriter.addDocument(=0A=
> > > > > >  >> >  document );  IndexReader indexReader =3D=0A> > > > > >  =
indexWriter.getReader();=0A> > > >  > > >> >  IndexSearcher searcher =3D ne=
w  IndexSearcher(  indexReader );=0A> >  > > > > >> > Query q =3D new Fuzzy=
Query(   new Term(  "test", "Mer" ), 0.5f, =0A>0,=0A> > > > > > >> > 10 ); =
//  or  Query q =3D  new FuzzyQuery( new Term( "test", =0A"Mer"=0A> > >  > =
> >  >> > ), 0.5f); TopDocs  result =3D  searcher.search( q, 10 );=0A> > > =
>  > > >> >  Assert.assertEquals( 1,  result.totalHits  );=0A> > > > >  > >=
> >=0A> > > > > > >> > -    Clemens=0A> > > > > > >> >=0A> > > > > >  >> >>=
  -----Urspr=FCngliche  Nachricht-----=0A> > >  > > > >> >> Von:  Clemens W=
yss [mailto:clemensdev@mysign.ch]=0A> > > >  > >  >>  >> Gesendet: Montag, =
2. Mai 2011  23:01=0A> > > > > >  >> >> An: java-user@lucene.apache.org=0A>=
 >  > >  > >  >> >> Betreff: AW: "fuzzy prefix"  search=0A> > > >  > > >>  =
>>=0A> > >  > > > >> >> Is it the  combination of FuzzyQuery and  Term  whi=
ch makes =0A>the=0A> > > > > >  >> >>  search to go for "word  boundaries"?=
=0A> > > > > >   >> >>=0A> > > > > > >> >> >    -----Urspr=FCngliche Nachri=
cht-----=0A> > > > > > >> >>  > Von:  Clemens  Wyss [mailto:clemensdev@mysi=
gn.ch]=0A> > > >  > >  >>  >> > Gesendet: Montag, 2. Mai 2011  14:13=0A> > =
> > >  > >> >> >  An: java-user@lucene.apache.org=0A> >  > >  > >  >> >> > =
Betreff: AW: "fuzzy  prefix"  search=0A> > > > > > >>  >>  >=0A> > > > > > =
>>  >> > I tried this too,  but unfortunately  I only get hits  when=0A> > =
> > > >  >> >> > the search term is a least   as long as the word to  be =
=0A>looked=0A> > up.=0A> > > > > > >> >>   >=0A> > > > > >  >> >> > E.g.:=
=0A> > >  > > >  >> >> > ...=0A> > > > > >  >>  >> >  Directory directory =
=3D new RAMDirectory();  IndexWriter=0A> > > > > >   >> >> >  indexWriter =
=3D new IndexWriter( directory,  >>  >>  >=0A> > > > > > IndexManager.getIn=
dexingAnalyzer(=0A> > >  > >  > >>  >> LOCALE_DE ),=0A> > > > >  > >> >>  >=
                IndexWriter.MaxFieldLength.UNLIMITED );=0A> > > > > >  >> >=
>  >=0A> > > > > >  >> >>  > Document document =3D new  Document(); documen=
t.add(=0A> > new=0A> >  > > > > Field(=0A> > > > > >  >> >>  > "test", "Mer=
lot",=0A> > > > > > >>   >>  >             Field.Store.YES,   Field.Index.A=
NALYZED ) );=0A> > > > > >  >>  >>  indexWriter.addDocument(=0A> > > > > > =
>>  >> >  document  );=0A> > > > > > >>  >> >=0A> > > > > > >> >>  >   Inde=
xReader indexReader =3D indexWriter.getReader();=0A> > > > >  >  >> >> > In=
dexSearcher=0A> > > > >  >  >> >>  > searcher =3D new IndexSearcher(  index=
Reader );  >> >>  >=0A> > > > > >  >> >> > Query q =3D new FuzzyQuery(   ne=
w Term( "test", "Mer"  ), =0A>0.6f,=0A> > > > > > >> >> > 1 );   TopDocs  r=
esult =3D searcher.search( q, 10 );=0A> > > > > >  >>  >> > Assert.assertEq=
uals(=0A> > > > > >  >>  >>  > 1,=0A> > > > > > >>  >> result.totalHits ); =
...=0A> > > > >  >   >> >> >=0A> > > > > > >> >> >  >  -----Urspr=FCngliche=
  Nachricht-----=0A> > > > > >  >> >> >  > Von: Uwe Schindler [mailto:uwe@t=
hetaphi.de]=0A> > > > > >  >>  >>  > > Gesendet: Montag, 2. Mai 2011  13:50=
=0A> > > > > >  >> >> >  > An: java-user@lucene.apache.org=0A> >  > >  > > =
 >> >> > > Betreff: RE: "fuzzy  prefix"  search=0A> > > > > > >>  >> >  >=
=0A> > > > > >  >> >> > > Hi,=0A> >  > > > > >>  >> >  >=0A> > > >  > > >> =
>> > > You can pass an integer   to  FuzzyQuery which defines =0Athe=0A> > =
> > > > >> >> >  >  number of  characters that are seen as prefix. So all=
=0A> >  > > > >  >> >> > > terms must match=0A> >  > > > > >>   >> > > this=
 prefix and the rest  of each term is matched using=0A> > >fuzzy.=0A> > > >=
 > >  >> >> > >=0A> > > > > > >>  >>  > >  Uwe=0A> > > > > > >> >> >   >=0A=
> > > > > > >> >> > >  -----=0A> >  > > > >  >> >> > > Uwe Schindler=0A> > =
>  > > > >>   >> > > H.-H.-Meier-Allee 63, D-28213  Bremen=0A> > > > > >  >=
> http://www.thetaphi.de=0A> >  > > > >  >> >> > >  eMail: uwe@thetaphi.de=
=0A> > > > > >  >>  >> >  >=0A> > > > > > >>  >> > > >  -----Original Messa=
ge-----=0A> > > > >  >  >> >> > >  > From: Clemens Wyss [mailto:clemensdev@=
mysign.ch]=0A> > > >  > >  >>  >> > > > Sent: Monday, May 02,  2011 1:47 PM=
   >> > > > To:=0A> > > > > >  >> java-user@lucene.apache.org=0A> >  > >  >=
 >  >> >> > > > Subject:  "fuzzy prefix"  search  >> >> > > >=0A> > >  > > =
> >>  >> > > > I'd  like to search  fuzzily but not on a full  term.=0A> > =
> > > > >>  >> >  > > E.g.=0A> > > > >  > >>  >> > > > I have a text "Merlo=
t  del  Ticino"=0A> >  > > > > >> >> > > > I'd like=0A> > > >  >  > >>  >> =
> > > "mer", "merr", "melo",  ... to  match.=0A> > > > > > >>  >> >  > >=0A=
> > > > >  > >> >> > > > If  I use  FuzzyQuery only  "merlot,  "merlott" hi=
t. =0A>What=0A> >  > > > > >> >>  >  > >  Query-combination should I use?=
=0A> > > > > > >>   >> > >  >=0A> > > > > > >> >> >  > >  Thx=0A> > > > > >=
 >> >> >   > > Clemens=0A> > > >  > > >> >> > >  >=0A> > > > > > >>   >> > =
> >=0A> >  > > > > >> >> > >  >=0A> > > >  > > >> >> > > >   =0A>----------=
----------------------------------------------=0A> > > > >  >  >> >> > > > =
----=0A> > > > > >  >>  >>  > > > ---=0A> > > > > >  >> >> > > >  ---=0A> >=
 > > > >   >> >> > > > --=0A> > > > >  > >>  >> > > > -  To unsubscribe, e-=
mail:=0A> > > >   > > >> >> > > > java-user-unsubscribe@lucene.apache.org=
=0A> >  > >  > >  >> >> > > > For additional  commands,  e-mail:=0A> > > > =
> >  >> >> >  > > java-user-help@lucene.apache.org    >> >> > >=0A> > > > >=
 > >> >>  >  >=0A> > > > > >  >> >> >  >=0A> > > > > >  >> >> > >=0A> > >  =
> > > >> >> > >   =0A>-----------------------------------------------------=
-----=0A> > > >  > >  >> >> > > ----=0A> > > > > >  >>  >> >  > ---=0A> > >=
 > > > >>  >> > > ---=0A> > > > > >  >>  >>  > > - To unsubscribe, e-mail:=
=0A> > > > > >  >>  >> > > java-user-unsubscribe@lucene.apache.org=0A> >  >=
 >  > >  >> >> > > For additional  commands,  e-mail:=0A> > > > > > >>  >> =
>  > java-user-help@lucene.apache.org=0A> >  > >  > >  >> >> >=0A> > > > > =
 > >> >>  >=0A> > > > > > >>  >>  >=0A> > > > > > >>  >>  =0A>-------------=
-------------------------------------------------=0A> > >  >  > > >> >> --=
=0A> > > > > >   >> >> >  ---=0A> > > > > > >> >>  > -- To unsubscribe,   e=
-mail:=0A> > > > > > >>  >> > java-user-unsubscribe@lucene.apache.org=0A> >=
  > >  > >  >> >> > For additional commands,  e-mail:=0A> > > >  > > >>  >>=
 > java-user-help@lucene.apache.org=0A> >  > >  > >  >> >>=0A> > > > > >  >=
> >>=0A> > > >  > > >> >>=0A> >  > > > > >> >>   =0A>----------------------=
----------------------------------------=0A> > > >  > >  >> >> ----=0A> > >=
 > > >   >> >> --- To  unsubscribe, e-mail:=0A> > > > > >  >> >> java-user-=
unsubscribe@lucene.apache.org=0A> >  > >  > >  >> >> For additional command=
s,  e-mail:=0A> > > > >  > java-user-help@lucene.apache.org    >> >=0A> > >=
 > > > >> >=0A> > > > >  > >>  >=0A> > > > > > >> >   =0A>-----------------=
----------------------------------------------=0A> > >  > >  > >> > ----=0A=
> > > > > >   >> > -- To unsubscribe,  e-mail:=0A> > > > > > java-user-unsu=
bscribe@lucene.apache.org=0A> >  > >  > >  >> > For additional commands,  e=
-mail:=0A> > > > >  > java-user-help@lucene.apache.org    >> >=0A> > > > > =
> >> >=0A> > > > >  >  >>=0A> > > > > > >>=0A> > > > >  > >>   =0A>--------=
---------------------------------------------------------=0A> > >  > >  > >=
> ----=0A> > > > > >  >> To  unsubscribe, e-mail: java-user-=0A> > unsubscr=
ibe@lucene.apache.org=0A> >  > >  > >  >> For additional commands,  e-mail:=
=0A> > > > > > java-user-help@lucene.apache.org    >=0A> > > > > > >=0A> > =
> > > > >=0A> >  > > > > >   =0A>------------------------------------------=
------------------------=0A> > >  > >  > > ---=0A> > > > > >  > To  unsubsc=
ribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  > >  > >  > Fo=
r additional commands, e-mail:  java-user-=0A> > help@lucene.apache.org=0A>=
 > >  >  > > >=0A> > > > > > >=0A> > > >  > >=0A> > > > >  >=0A> > > > > > =
  =0A>--------------------------------------------------------------------=
=0A> >  > >  > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.ap=
ache.org=0A> >  > >  > >  For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A> >  > >  >=0A> > > > >=0A> > > > >   =0A---------------=
------------------------------------------------------=0A> >  > >  > To  un=
subscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  > >  > Fo=
r  additional commands, e-mail: java-user-help@lucene.apache.org=0A> >  > >=
  >=0A> > > > >=0A> > > >=0A> > >  >   ------------------------------------=
---------------------------------=0A> >  > > To  unsubscribe, e-mail: java-=
user-unsubscribe@lucene.apache.org=0A> >  > >  For additional commands, e-m=
ail: java-user-help@lucene.apache.org=0A> >  >=0A> > >=0A> > >  -----------=
----------------------------------------------------------=0A> >  > To  uns=
ubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  > For  add=
itional commands, e-mail: java-user-help@lucene.apache.org=0A> >  >=0A> > >=
=0A> > =0A> >  ------------------------------------------------------------=
---------=0A> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apach=
e.org=0A> >  For additional commands, e-mail: java-user-help@lucene.apache.=
org=0A> =0A> =0A> ---------------------------------------------------------=
------------=0A> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apac=
he.org=0A> For  additional commands, e-mail: java-user-help@lucene.apache.o=
rg=0A> =0A> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 06:08:16 2011
Return-Path: <java-user-return-49604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 753CE3922
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 06:08:16 +0000 (UTC)
Received: (qmail 27383 invoked by uid 500); 4 May 2011 06:08:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27353 invoked by uid 500); 4 May 2011 06:08:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27345 invoked by uid 99); 4 May 2011 06:08:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 06:08:10 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 06:08:03 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id AB6CDC2184
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 08:07:43 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id RCZCMTBGu6XO for <java-user@lucene.apache.org>;
	Wed,  4 May 2011 08:07:43 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id F36ADC2117
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 08:07:42 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 4 May 2011 08:07:42 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 4 May 2011 08:07:40 +0200
Subject: AW: AW: AW: AW: "fuzzy prefix" search
Thread-Topic: AW: AW: AW: "fuzzy prefix" search
Thread-Index: AcwJ1ska2bXV49HNQCOXvLf5H9qBVgASfF7A
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
 <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
 <796945.6397.qm@web130103.mail.mud.yahoo.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
 <733611.86868.qm@web130122.mail.mud.yahoo.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
 <855496.50707.qm@web130109.mail.mud.yahoo.com>
In-Reply-To: <855496.50707.qm@web130109.mail.mud.yahoo.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I know this is just an example.
But even the WhitespaceAnalyzer takes the words apart, which I don't want. =
I would like the phrases as they are (maximum 3 words, e.g. "Merlot del Tic=
ino", ...) to be n-gram-ed. I hence want to have the n-grams.
Mer
Merl
Merlo
Merlot
Merlot
Merlot d
...

Regards
Clemens
> -----Urspr=FCngliche Nachricht-----
> Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Gesendet: Dienstag, 3. Mai 2011 23:12
> An: java-user@lucene.apache.org
> Betreff: Re: AW: AW: AW: "fuzzy prefix" search
>
> Clemens - that's just an example.  Stick another tokenizer in there, like
> WhitespaceTokenizer in there, for example.
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosyste=
m
> search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
> > From: Clemens Wyss <clemensdev@mysign.ch>
> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> > Sent: Tue, May 3, 2011 4:31:14 PM
> > Subject: AW: AW: AW: "fuzzy prefix" search
> >
> > But doesn't the KeyWordTokenizer extract single words out oft he
> >stream? I would  like to create n-grams on the stream (field content) as=
 it
> is...
> >
> > >  -----Urspr=FCngliche Nachricht-----
> > > Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  Gesendet: Dienstag, 3. Mai 2011 21:31
> > > An: java-user@lucene.apache.org
> > >  Betreff: Re: AW: AW: "fuzzy prefix" search
> > >
> > > Clemens,
> > >
> > > Something a la:
> > >
> > > public TokenStream tokenStream (String  fieldName, Reader r) {
> > >   return nw EdgeNGramTokenFilter(new  KeywordTokenizer(r),
> > > EdgeNGramTokenFilter.Side.FRONT, 1, 4); }
> > >
> > >
> > > Check out page 265 of Lucene in Action 2.
> > >
> > >  Otis
> > > ----
> > > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene
> > > ecosystem search :: http://search-lucene.com/
> > >
> > >
> > >
> > > ----- Original  Message ----
> > > > From: Clemens Wyss <clemensdev@mysign.ch>
> > > > To:  "java-user@lucene.apache.org"  <java-user@lucene.apache.org>
> > >  > Sent: Tue, May 3, 2011 12:57:39 PM
> > > > Subject: AW: AW: "fuzzy  prefix" search
> > > >
> > > > How does an simple Analyzer look that  just "n-grams" the  docs/fie=
lds.
> > > >
> > > > class  SimpleNGramAnalyzer extends  Analyzer {  @Override
> > > > public TokenStream tokenStream ( String fieldName,   Reader reader =
)
> > > > {
> > > >     EdgeNGramTokenFilter...  ???
> > > > }
> > > > }
> > >  >
> > > > > -----Urspr=FCngliche Nachricht-----
> > > > > Von:  Otis  Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  > >  Gesendet: Dienstag, 3. Mai 2011 13:36
> > > > > An: java-user@lucene.apache.org
> > >  > >  Betreff: Re: AW: "fuzzy prefix" search
> > > >  >
> > > > > Hi,
> > > > >
> > > > > I  didn't  read this thread closely, but just in case:
> > > > > * Is this  something  you can handle with synonyms?
> > > > > * If this is for  English and you are  trying to handle typos,
> > > > > there is a
> >list
> > >  >of
> > > > > common English misspellings  out there that you  could use for
> > > > > this
> > > perhaps.
> > > > > * Have you  considered  n-gramming your tokens?  Not sure if
> > > > > this would
> > >  help,
> > > > > didn't read  messages/examples closely enough, but  you may want
> > > > > to
> > > look at
> > > > > this if  you haven't done  so yet.
> > > > >
> > > > > Otis
> > > > > ----
> > >  > > Sematext :: http://sematext.com/ :: Solr -  Lucene - Nutch
> > > Lucene  ecosystem
> > > > > search :: http://search-lucene.com/
> > > > >
> > > >  >
> > > > >
> > > > > ----- Original  Message  ----
> > > > > > From: Clemens Wyss <clemensdev@mysign.ch>
> > > >  > > To:  "java-user@lucene.apache.org"   <java-
> user@lucene.apache.org>
> > >  > >  > Sent: Tue, May 3, 2011 5:25:30 AM
> > > > > >  Subject: AW: "fuzzy prefix"  search
> > > > > >
> > > >  > > >PrefixQuery
> > > > > > I'd like the  combination  of prefix and fuzzy ;-) because
> > > > > > people
> >could
> > > > >  >also  type "menlo" or "m=E4rl" and in any of these cases I'd
> > > > > like  to
> >get
> > > > >  >a hit on Merlot (for suggesting  Merlot)
> > > > > >
> > > > > > >   -----Urspr=FCngliche  Nachricht-----
> > > > > > > Von: Ian  Lea  [mailto:ian.lea@gmail.com]
> > > > > >  >  Gesendet:  Dienstag, 3. Mai 2011 11:22  > An:
> > > > > > java-user@lucene.apache.org
> > >  > >  > >  Betreff: Re: "fuzzy prefix" search
> > > >  > > >
> > > > >  > > I'd assumed that  FuzzyQuery  wouldn't ignore case but I
> > > > > could be
> > > wrong.
> > > >  > > >  What would be the edit  distance between  "mer"  and "merlo=
t"?
> > > Would
> > > > > > > it be less that 1.5  which I   reckon would be the value of
> > > > > > >  length(term)*0.5 as detailed in  the  javadocs?  Seems
> > > > > > > unlikely,
> >but
> > > > > > > I don't really  know anything about   the Levenshtein (edit
> distance)
> > > > > algorithm as  used by  FuzzyQuery.
> > > > > > >  Wouldn't a PrefixQuery be  more  appropriate here?
> > > > > > >
> > > > > >  >
> > > > > > >   --
> > > > > > >  Ian.
> > > > > > >
> > > > > > > On Tue, May  3,  2011 at 10:10 AM, Clemens Wyss
> > > > > > > <clemensdev@mysign.ch>
> > > >  > >  >  wrote:
> > > > > > > > Unfortunately  lowercasing doesn't  help.
> > > > > > > > Also,   doesn't the FuzzyQuery ignore  casing?
> > > > > > >  >
> > > > > > > >>   -----Urspr=FCngliche  Nachricht-----
> > > > > > > >> Von: Ian Lea   [mailto:ian.lea@gmail.com]
> > > > > >  >  >>  Gesendet: Dienstag, 3. Mai 2011 11:06
> > > >  > > > >>  An: java-user@lucene.apache.org
> > >  > >  > >  >> Betreff: Re: "fuzzy prefix"  search
> > > > > > >  >>
> > > > > > >  >>  Mer !=3D mer.  The latter will be  what is indexed
> > > > > > > because
> > > > > > > >> StandardAnalyzer calls   LowerCaseFilter.
> > > > > > > >>
> > > > > >  > >>   --
> > > > > > > >> Ian.
> > > >  > > > >>
> > > > > > >  >>
> > > >  > > > >> On  Tue, May 3, 2011 at 9:56 AM,  Clemens  Wyss
> > > > > > > <clemensdev@mysign.ch>
> > > >  > >  > >>  wrote:
> > > > > > > >>  > Sorry for coming back  to my issue. Can anybody
> > > > > > > >> explain why
> >my
> > > > > > > "simple"
> > > > >  > >  >> unit test below fails? Any  hint/help  appreciated.
> > >  > > > > >> >
> > > > > > > >>  >  Directory  directory =3D new RAMDirectory();
> > > > > > > >> IndexWriter
> > >  > > > >  >> > indexWriter =3D  new IndexWriter(  directory, new
> > > > > >  > >> >  StandardAnalyzer(
> > > > > > >   Version.LUCENE_31
> > >  > > > > >> > ),   IndexWriter.MaxFieldLength.UNLIMITED  ); Document
> > > document
> > >  > >  =3D
> > > > > > > new
> > > > > > >  >> > Document();   document.add( new Field( "test",  "Merlot=
",
> > > > > > > >> >  Field.Store.YES,  Field.Index.ANALYZED ) );
> > > > > > > >> >   indexWriter.addDocument(
> > > > > > >  >> >  document );  IndexReader indexReader =3D
> > > > > > > indexWriter.getReader();
> > > > >  > > >> >  IndexSearcher searcher =3D new  IndexSearcher(
> > > > > indexReader );
> > >  > > > > >> > Query q =3D new FuzzyQuery(   new Term(  "test", "Mer" =
),
> 0.5f,
> >0,
> > > > > > > >> > 10 ); //  or  Query q =3D  new FuzzyQuery( new Term(
> > > > > > > >> > "test",
> "Mer"
> > > >  > > >  >> > ), 0.5f); TopDocs  result =3D  searcher.search( q, 10
> > > > );
> > > > >  > > >> >  Assert.assertEquals( 1,  result.totalHits  );
> > > > > >  > >> >
> > > > > > > >> > -    Clemens
> > > > > > > >> >
> > > > > > >  >> >>  -----Urspr=FCngliche  Nachricht-----
> > > >  > > > >> >> Von:  Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > >  > >  >>  >> Gesendet: Montag, 2. Mai 2011  23:01
> > > > > > >  >> >> An: java-user@lucene.apache.org
> > >  > >  > >  >> >> Betreff: AW: "fuzzy prefix"  search
> > > > >  > > >>  >>
> > > >  > > > >> >> Is it the  combination of FuzzyQuery and  Term  which
> > > > makes
> >the
> > > > > > >  >> >>  search to go for "word  boundaries"?
> > > > > > >   >> >>
> > > > > > > >> >> >    -----Urspr=FCngliche Nachricht-----
> > > > > > > >> >>  > Von:  Clemens  Wyss [mailto:clemensdev@mysign.ch]
> > > > >  > >  >>  >> > Gesendet: Montag, 2. Mai 2011  14:13
> > > > > >  > >> >> >  An: java-user@lucene.apache.org
> > >  > >  > >  >> >> > Betreff: AW: "fuzzy  prefix"  search
> > > > > > > >>  >>  >
> > > > > > > >>  >> > I tried this too,  but unfortunately  I only get
> > > > > > > >> hits  when
> > > > > > >  >> >> > the search term is a least   as long as the word to =
 be
> >looked
> > > up.
> > > > > > > >> >>   >
> > > > > > >  >> >> > E.g.:
> > > >  > > >  >> >> > ...
> > > > > > >  >>  >> >  Directory directory =3D new RAMDirectory();  Index=
Writer
> > > > > > >   >> >> >  indexWriter =3D new IndexWriter( directory,  >>  >=
>
> > > > > > > > IndexManager.getIndexingAnalyzer(
> > > >  > >  > >>  >> LOCALE_DE ),
> > > > > >  > >> >>  >                IndexWriter.MaxFieldLength.UNLIMITED=
 );
> > > > > > >  >> >>  >
> > > > > > >  >> >>  > Document document =3D new  Document();
> document.add(
> > > new
> > >  > > > > Field(
> > > > > > >  >> >>  > "test", "Merlot",
> > > > > > > >>   >>  >             Field.Store.YES,   Field.Index.ANALYZE=
D ) );
> > > > > > >  >>  >>  indexWriter.addDocument(
> > > > > > > >>  >> >  document  );
> > > > > > > >>  >> >
> > > > > > > >> >>  >   IndexReader indexReader =3D indexWriter.getReader(=
);
> > > > > >  >  >> >> > IndexSearcher
> > > > > >  >  >> >>  > searcher =3D new IndexSearcher(  indexReader );  >=
>
> > > > > > >>  >
> > > > > > >  >> >> > Query q =3D new FuzzyQuery(   new Term( "test", "Mer=
"  ),
> >0.6f,
> > > > > > > >> >> > 1 );   TopDocs  result =3D searcher.search( q, 10 );
> > > > > > >  >>  >> > Assert.assertEquals(  >>  >>  > 1,
> > > > > > > >>  >> result.totalHits ); ...
> > > > > >  >   >> >> >
> > > > > > > >> >> >  >  -----Urspr=FCngliche  Nachricht-----
> > > > > > >  >> >> >  > Von: Uwe Schindler [mailto:uwe@thetaphi.de]  >>
> > > > > > > >>  > > Gesendet: Montag, 2. Mai 2011  13:50  >> >> >  > An:
> > > > > > > java-user@lucene.apache.org
> > >  > >  > >  >> >> > > Betreff: RE: "fuzzy  prefix"  search
> > > > > > > >>  >> >  >
> > > > > > >  >> >> > > Hi,
> > >  > > > > >>  >> >  >
> > > > >  > > >> >> > > You can pass an integer   to  FuzzyQuery which def=
ines
> the
> > > > > > > >> >> >  >  number of  characters that are seen as prefix.
> > > > > > > >> >> > So all
> > >  > > > >  >> >> > > terms must match
> > >  > > > > >>   >> > > this prefix and the rest  of each term is matche=
d using
> > > >fuzzy.
> > > > > > >  >> >> > >
> > > > > > > >>  >>  > >  Uwe
> > > > > > > >> >> >   >
> > > > > > > >> >> > >  -----
> > >  > > > >  >> >> > > Uwe Schindler
> > > >  > > > >>   >> > > H.-H.-Meier-Allee 63, D-28213  Bremen
> > > > > > >  >> http://www.thetaphi.de
> > >  > > > >  >> >> > >  eMail: uwe@thetaphi.de
> > > > > > >  >>  >> >  >
> > > > > > > >>  >> > > >  -----Original Message-----
> > > > > >  >  >> >> > >  > From: Clemens Wyss
> > > > > > [mailto:clemensdev@mysign.ch]
> > > > >  > >  >>  >> > > > Sent: Monday, May 02,  2011 1:47 PM   >> > > >=
 To:
> > > > > > >  >> java-user@lucene.apache.org
> > >  > >  > >  >> >> > > > Subject:  "fuzzy prefix"  search  >> >> > > >
> > > >  > > > >>  >> > > > I'd  like to search  fuzzily but not on a full =
 term.
> > > > > > > >>  >> >  > > E.g.
> > > > > >  > >>  >> > > > I have a text "Merlot  del  Ticino"
> > >  > > > > >> >> > > > I'd like
> > > > >  >  > >>  >> > > > "mer", "merr", "melo",  ... to  match.
> > > > > > > >>  >> >  > >
> > > > > >  > >> >> > > > If  I use  FuzzyQuery only  "merlot,  "merlott" =
hit.
> >What
> > >  > > > > >> >>  >  > >  Query-combination should I use?
> > > > > > > >>   >> > >  >
> > > > > > > >> >> >  > >  Thx
> > > > > > > >> >> >   > > Clemens
> > > > >  > > >> >> > >  >
> > > > > > > >>   >> > > >
> > >  > > > > >> >> > >  >
> > > > >  > > >> >> > > >
> >--------------------------------------------------------
> > > > > >  >  >> >> > > > ----
> > > > > > >  >>  >>  > > > ---
> > > > > > >  >> >> > > >  ---
> > > > > > >   >> >> > > > --
> > > > > >  > >>  >> > > > -  To unsubscribe, e-mail:
> > > > >   > > >> >> > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  >> >> > > > For additional  commands,  e-mail:
> > > > > > >  >> >> >  > > java-user-help@lucene.apache.org    >> >> > >
> > > > > > > >> >>  >  >
> > > > > > >  >> >> >  >
> > > > > > >  >> >> > >
> > > >  > > > >> >> > >
> >----------------------------------------------------------
> > > > >  > >  >> >> > > ----
> > > > > > >  >>  >> >  > ---
> > > > > > > >>  >> > > ---
> > > > > > >  >>  >>  > > - To unsubscribe, e-mail:
> > > > > > >  >>  >> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  >> >> > > For additional  commands,  e-mail:
> > > > > > > >>  >> >  > java-user-help@lucene.apache.org
> > >  > >  > >  >> >> >
> > > > > >  > >> >>  >
> > > > > > > >>  >>  >
> > > > > > > >>  >>
> >--------------------------------------------------------------
> > > >  >  > > >> >> --
> > > > > > >   >> >> >  ---
> > > > > > > >> >>  > -- To unsubscribe,   e-mail:
> > > > > > > >>  >> > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  >> >> > For additional commands,  e-mail:
> > > > >  > > >>  >> > java-user-help@lucene.apache.org
> > >  > >  > >  >> >>
> > > > > > >  >> >>
> > > > >  > > >> >>
> > >  > > > > >> >>
> >--------------------------------------------------------------
> > > > >  > >  >> >> ----
> > > > > > >   >> >> --- To  unsubscribe, e-mail:
> > > > > > >  >> >> java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  >> >> For additional commands,  e-mail:
> > > > > >  > java-user-help@lucene.apache.org    >> >
> > > > > > > >> >
> > > > > >  > >>  >
> > > > > > > >> >
> >---------------------------------------------------------------
> > > >  > >  > >> > ----
> > > > > > >   >> > -- To unsubscribe,  e-mail:
> > > > > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  >> > For additional commands,  e-mail:
> > > > > >  > java-user-help@lucene.apache.org    >> >
> > > > > > > >> >
> > > > > >  >  >>
> > > > > > > >>
> > > > > >  > >>
> >-----------------------------------------------------------------
> > > >  > >  > >> ----
> > > > > > >  >> To  unsubscribe, e-mail: java-user-
> > > unsubscribe@lucene.apache.org
> > >  > >  > >  >> For additional commands,  e-mail:
> > > > > > > java-user-help@lucene.apache.org    >
> > > > > > > >
> > > > > > > >
> > >  > > > > >
> >------------------------------------------------------------------
> > > >  > >  > > ---
> > > > > > >  > To  unsubscribe, e-mail:
> > > > > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > For additional commands, e-mail:  java-user-
> > > help@lucene.apache.org
> > > >  >  > > >
> > > > > > > >
> > > > >  > >
> > > > > >  >
> > > > > > >
> >--------------------------------------------------------------------
> > >  > >  > > - To  unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  For additional commands, e-mail:
> > > java-user-help@lucene.apache.org  > >  >
> > > > > >
> > > > > >
> ---------------------------------------------------------------------
> > >  > >  > To  unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > For  additional commands, e-mail:
> > > java-user-help@lucene.apache.org  > >  >
> > > > > >
> > > > >
> > > >  >   --------------------------------------------------------------=
-------
> > >  > > To  unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  For additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > ---
> > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For  additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >
> > > >
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 06:57:14 2011
Return-Path: <java-user-return-49605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4E00C3C91
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 06:57:14 +0000 (UTC)
Received: (qmail 82242 invoked by uid 500); 4 May 2011 06:57:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82192 invoked by uid 500); 4 May 2011 06:57:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82181 invoked by uid 99); 4 May 2011 06:57:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 06:57:10 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of itsadok@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 06:57:03 +0000
Received: by wwi18 with SMTP id 18so585865wwi.5
        for <java-user@lucene.apache.org>; Tue, 03 May 2011 23:56:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=1mswqC0BHCEPsL/OaPincBf9sAkIqGh6BPXMpFK2yU0=;
        b=X7hB/aqE4Kao7UTdidsQYtOhUPWkyaKx8uUfo7xx5Sb0oslODMg4Z6tvrNTj/xiKLU
         zjgQTyeaqnXV7gD1uZeg5O2KN18Br3063Eo5xH7CqQFkh0C8/RlKhA4zOJyLGVKqCvw6
         1fhhJpR1KIPWmZbmqVmZFHVU50jM5vPISjBds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=LgLOlGQdqVBVrzPiTBwI25Cen4Yic9WxaB5/CLTDAI8pE8DKOUDVTL6oFmM6Gym2bv
         Kts1enUbDvImOq1YeTmZtpLYMnuFWU3pZzChPjJvNjdp/WI4Rw4hkXBfflzMPzIHbUx5
         E2fnlOLyCL+WoatWvpFrv0MVSAZHXG8zmUHQA=
Received: by 10.227.131.195 with SMTP id y3mr761869wbs.38.1304492203130; Tue,
 03 May 2011 23:56:43 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.151.71 with HTTP; Tue, 3 May 2011 23:56:23 -0700 (PDT)
In-Reply-To: <4DC0273D.1080904@fastmail.fm>
References: <4DC0273D.1080904@fastmail.fm>
From: Israel Tsadok <itsadok@gmail.com>
Date: Wed, 4 May 2011 09:56:23 +0300
Message-ID: <BANLkTi=FsbUdKythPCOwPTY3A1jZswqG4w@mail.gmail.com>
Subject: Re: Why has PerFieldAnalyzerWrapper been made final in Lucene 3.1 ?
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: multipart/alternative; boundary=00163662e69f613f8204a26dc298
X-Virus-Checked: Checked by ClamAV on apache.org

--00163662e69f613f8204a26dc298
Content-Type: text/plain; charset=ISO-8859-1

On Tue, May 3, 2011 at 7:03 PM, Paul Taylor <paul_t100@fastmail.fm> wrote:

> We subclassed  PerFieldAnalyzerWrapper as follows:
>
> public class PerFieldEntityAnalyzer extends PerFieldAnalyzerWrapper {
>
>    public PerFieldEntityAnalyzer(Class indexFieldClass) {
>        super(new StandardUnaccentAnalyzer());
>
>        for(Object o : EnumSet.allOf(indexFieldClass)) {
>            IndexField indexField = (IndexField) o;
>            Analyzer analyzer = indexField.getAnalyzer();
>            if (analyzer != null) {
>                this.addAnalyzer(indexField.getName(), analyzer);
>            }
>        }
>    }
> }
>
> but now we cant do this.
>
> How about:

public static Analyzer createPerFieldEntityAnalyzer(Class indexFieldClass) {
    PerFieldAnalyzerWrapper wrapper = new PerFieldAnalyzerWrapper(new
StandardUnaccentAnalyzer());

    for(Object o : EnumSet.allOf(indexFieldClass)) {
        IndexField indexField = (IndexField) o;
        Analyzer analyzer = indexField.getAnalyzer();
        if (analyzer != null) {
            wrapper.addAnalyzer(indexField.getName(), analyzer);
        }
    }

    return wrapper;
}

I'm pretty sure that's how you're supposed to use it anyway.

--00163662e69f613f8204a26dc298--

From java-user-return-49606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 07:28:09 2011
Return-Path: <java-user-return-49606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05B763B69
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 07:28:09 +0000 (UTC)
Received: (qmail 21342 invoked by uid 500); 4 May 2011 07:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20984 invoked by uid 500); 4 May 2011 07:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20976 invoked by uid 99); 4 May 2011 07:28:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 07:28:01 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 07:27:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 810DAC2205
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 09:27:34 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OI3zPciWFvUk for <java-user@lucene.apache.org>;
	Wed,  4 May 2011 09:27:34 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 440B9C2283
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 09:16:31 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 4 May 2011 09:16:31 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 4 May 2011 09:16:29 +0200
Subject: Higher scoring if term is at the beginning of a field/document
Thread-Topic: Higher scoring if term is at the beginning of a field/document
Thread-Index: AcwKKy+8RYWWnxSZTfCKAEIGV04xOA==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51D69@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Given the I have 3 documents with exactly one field and the fields have the=
 following contents:
This is a moon
The moon is bright
moon

If I analyze these documents they all hit on "moon". But how do I need to a=
nalyze/search my index in order to have the following "sort order":
moon
The moon is bright
This is a moon

i.e. the earlier the term appears the higher the score.

Thx
Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 07:39:14 2011
Return-Path: <java-user-return-49607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38EA230AB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 07:39:14 +0000 (UTC)
Received: (qmail 29178 invoked by uid 500); 4 May 2011 07:39:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29132 invoked by uid 500); 4 May 2011 07:39:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29085 invoked by uid 99); 4 May 2011 07:39:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 07:39:10 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 07:39:06 +0000
Received: by wyb40 with SMTP id 40so986884wyb.35
        for <multiple recipients>; Wed, 04 May 2011 00:38:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:date:message-id:subject
         :from:to:content-type;
        bh=5H/3mfCMByHDlvOjxxhiz69P5WonpfwEkFIKuTrWwc0=;
        b=q0eAzJSrvexriX3bZSM+B+etPD4EDt4QbQdXhKAIOVvEHQImHcPsxdHV32mPs0Km2Y
         cYwChOOj962M651V7svL3eBGLCB/HoadccP9rIP59z9mkdzVMiN2l8IwCnN6OwMsg0Lt
         6RmIypSbifG+8gzeSy/yBJAgX0vDiRxmi5weU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:date:message-id:subject:from:to:content-type;
        b=PqruqD+NLPngoW5vOSxev+GTxzUnhfwOC2VmT9F3j66i8QR3qdFWKsXZmEwJhZ/9L2
         Nj6uhIx6hddp9nmM4ryEO0vD2ccuiq9xJO8OPuK8jBQOc+S+sX5jEfMZQFbOycd+sd1X
         YBMfo/9foaCE5AmBjnUDK7cLG9jq4nTDCdYRU=
MIME-Version: 1.0
Received: by 10.216.61.206 with SMTP id w56mr719057wec.97.1304494722645; Wed,
 04 May 2011 00:38:42 -0700 (PDT)
Received: by 10.216.180.139 with HTTP; Wed, 4 May 2011 00:38:42 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
Date: Wed, 4 May 2011 09:38:42 +0200
Message-ID: <BANLkTikLuxo=w_8KwOa8uLOn2dwvE-_nWQ@mail.gmail.com>
Subject: 33 Days left to Berlin Buzzwords 2011
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user <java-user@lucene.apache.org>, java-dev <java-dev@lucene.apache.org>, 
	lucy-user@incubator.apache.org, general@lucene.apache.org, 
	users@elasticsearch.com, connectors-user@incubator.apache.org, 
	common-user@hadoop.apache.org, hdfs-user@hadoop.apache.org, 
	mapreduce-users@hadoop.apache.org
Content-Type: text/plain; charset=UTF-8

hey folks,

BerlinBuzzwords 2011 is close only 33 days left until the big Search,
Store and Scale opensource crowd is gathering
in Berlin on June 6th/7th.

The conference again focuses on the topics search,
data analysis and NoSQL. It is to take place on June 6/7th 2011 in Berlin.

We are looking forward to two awesome keynote speakers who shaped the world of
open source data analysis: Doug Cutting, founder of Apache Lucene and
Hadoop) as
well as Ted Dunning (Chief Application Architect at MapR Technologies
and active
developer at Apache Hadoop and Mahout).

We are amazed by the amount and quality of the talk submissions we
got. As a result
this year we have added one more track to the main conference. If you haven't
done so already, make sure to book your ticket now - early bird tickets are
already sold out since April 7th and there might not be many tickets left.

As we would like to give visitors of our main conference a reason to stay in
town for the whole week, we have been talking to local co-working spaces and
companies asking them for free space and WiFi to host Hackathons right after the
main conference - that is on June 8th through 10th.

If you would like to gather with fellow developers and users of your project,
fix bugs together, hack on new features or give users a hands-on introduction to
your tools, please submit your workshop proposal to our wiki:

http://berlinbuzzwords.de/node/428

Please note that slots are assigned on a first come first serve basis. We are
doing our best to get you connected, however space is limited.

The deal is simple: We get you in touch with a conference room provider. Your
event gets promoted in our schedule. Co-Ordination however is completely up to
you: Make sure to provide an interesting abstract, provide a Hackathon
registration area - see the Barcamp page for a good example:

http://berlinbuzzwords.de/wiki/barcamp

Attending Hackathons requires a Berlin Buzzwords ticket and (then free)
registration at the Hackathon in question.

Hope I see you all around in Berlin,

Simon

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 09:10:27 2011
Return-Path: <java-user-return-49608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C27D1362D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 09:10:27 +0000 (UTC)
Received: (qmail 31552 invoked by uid 500); 4 May 2011 09:10:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31512 invoked by uid 500); 4 May 2011 09:10:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31504 invoked by uid 99); 4 May 2011 09:10:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 09:10:24 +0000
X-ASF-Spam-Status: No, hits=3.9 required=5.0
	tests=DNS_FROM_RFC_BOGUSMX,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of abenbrahim@object-ive.com does not designate 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 09:10:18 +0000
Received: by wwi18 with SMTP id 18so658979wwi.5
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 02:09:55 -0700 (PDT)
Received: by 10.227.206.135 with SMTP id fu7mr879629wbb.64.1304500195215;
        Wed, 04 May 2011 02:09:55 -0700 (PDT)
Received: from AllelPC (49.67.64-86.rev.gaoland.net [86.64.67.49])
        by mx.google.com with ESMTPS id w12sm558370wby.24.2011.05.04.02.09.51
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 04 May 2011 02:09:54 -0700 (PDT)
From: "Allel BenBrahim" <abenbrahim@object-ive.com>
To: <java-user@lucene.apache.org>
Subject: Information for index filed created by Lucene whene using Nutch
Date: Wed, 4 May 2011 11:09:51 +0200
Message-ID: <000901cc0a3b$082432c0$186c9840$@object-ive.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000A_01CC0A4B.CBAF4CB0"
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AcwKOvEBhU72GupCTh6B56nBY4QrNw==
Content-Language: fr

------=_NextPart_000_000A_01CC0A4B.CBAF4CB0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hello

I'm using lucene & nutch, but I don't now witch type of field of documents
are created by nutch, I developed this program in java :

Directory dir =  FSDirectory.open(new File("C:/Users/MyWebPage/index"));

            

            IndexSearcher search = new IndexSearcher(dir);

            int numberDoc = search.maxDoc();

            System.out.println("number of doc "+ numberDoc);

            for (int i=0;i<numberDoc;i++)

            {

                  System.out.println("Document numero "+i);

                  Document doc = search.doc(i);

                  for (Fieldable f :doc.getFields())

                  {

                        for (Fieldable ff: doc.getFieldables(f.name()))

                        {

                             System.out.println("\t"+ff.name()+"
"+ff.stringValue());

                             

                        }

                  System.out.println("*******************");

            }

 

I'have this result

....

number of doc 1907

 

Document numero 0

      title Convention and Visitors Office 

      segment 20110502142927

      boost 0.13529637

      digest d07c6f19b2efaa8739754e9e9ff75fcc

      tstamp 20110502122931566

      url http://ar.info.com/

.....

...

Document numero 90

      title Who are we? - Presentation of the Paris Convention Bureau

      segment 20110502144050

      boost 0.0016601664

      digest 62ee8c0ff6c2ab7c91599f3c3ff18735

      tstamp 20110502125316832

      url http://convention.info.com/en/about-us/

 

 

my question is :

what's segment, boost, digest, tstamp and how can I read it

 

thanks for your help

 

 

 


------=_NextPart_000_000A_01CC0A4B.CBAF4CB0--


From java-user-return-49609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 09:22:20 2011
Return-Path: <java-user-return-49609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DC2923E40
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 09:22:19 +0000 (UTC)
Received: (qmail 48619 invoked by uid 500); 4 May 2011 09:22:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48571 invoked by uid 500); 4 May 2011 09:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48563 invoked by uid 99); 4 May 2011 09:22:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 09:22:17 +0000
X-ASF-Spam-Status: No, hits=4.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 09:22:11 +0000
Received: from compute6.internal (compute6.nyi.mail.srv.osa [10.202.2.46])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 48BB620516
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 05:21:50 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute6.internal (MEProxy); Wed, 04 May 2011 05:21:50 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:subject:content-type; s=smtpout; bh=guHbWH+MRZzClhFa7RPnlp9XTco=; b=fa44R+RQY9lkOl6fuvVIn1cb65zui80eL00hOl2AyQ3VVSf3gmWRpUyYFc5Ywevt5MWRUA+A2PaTC5dwgEgz5AYyH0xqKbXBlcqbrRApCzQUtmixsvGbYdQfo0sF/Yy1Y9SM+5xWUJTcHapG6XFbZUevOpzKyNZAtWLWTvE1fvI=
X-Sasl-enc: EippN767PCCLEcr1U6IxOzlZAknRyiwrwgsna9exgKjT 1304500909
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 7E066401C86
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 05:21:49 -0400 (EDT)
Message-ID: <4DC11AAC.7010607@fastmail.fm>
Date: Wed, 04 May 2011 10:21:48 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Re: Why has PerFieldAnalyzerWrapper been made final in Lucene 3.1
 ?
Content-Type: multipart/alternative;
 boundary="------------080907050709010603020900"

--------------080907050709010603020900
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit


On 04/05/2011 07:56, Israel Tsadok wrote:
>
> On Tue, May 3, 2011 at 7:03 PM, Paul Taylor <paul_t100@fastmail.fm 
> <mailto:paul_t100@fastmail.fm>> wrote:
>
>     We subclassed  PerFieldAnalyzerWrapper as follows:
>
>     public class PerFieldEntityAnalyzer extends PerFieldAnalyzerWrapper {
>
>        public PerFieldEntityAnalyzer(Class indexFieldClass) {
>            super(new StandardUnaccentAnalyzer());
>
>            for(Object o : EnumSet.allOf(indexFieldClass)) {
>                IndexField indexField = (IndexField) o;
>                Analyzer analyzer = indexField.getAnalyzer();
>                if (analyzer != null) {
>                    this.addAnalyzer(indexField.getName(), analyzer);
>                }
>            }
>        }
>     }
>
>     but now we cant do this.
>
> How about:
>
> public static Analyzer createPerFieldEntityAnalyzer(Class 
> indexFieldClass) {
>     PerFieldAnalyzerWrapper wrapper = new PerFieldAnalyzerWrapper(new 
> StandardUnaccentAnalyzer());
>
>     for(Object o : EnumSet.allOf(indexFieldClass)) {
>         IndexField indexField = (IndexField) o;
>         Analyzer analyzer = indexField.getAnalyzer();
>         if (analyzer != null) {
>             wrapper.addAnalyzer(indexField.getName(), analyzer);
>         }
>     }
>
>     return wrapper;
> }
>
> I'm pretty sure that's how you're supposed to use it anyway.
Yeah, actually I independentently ended up doing that, so not a big 
deal, thanks.

Paul


--------------080907050709010603020900--

From java-user-return-49610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 10:52:34 2011
Return-Path: <java-user-return-49610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 54A193F40
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 10:52:34 +0000 (UTC)
Received: (qmail 71690 invoked by uid 500); 4 May 2011 10:52:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71644 invoked by uid 500); 4 May 2011 10:52:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71635 invoked by uid 99); 4 May 2011 10:52:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 10:52:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tpoljak@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 10:52:27 +0000
Received: by qyk2 with SMTP id 2so3077743qyk.14
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 03:52:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=58PJEijpViB28t0OrBPpnFaLJfRnDQ/GP65sMlrUMR8=;
        b=M7Wo2iPJQ4S12H3ml4ZN6Mv2pS5W19LhjpKjjhgvvOBiPSiHjgWNkrZduPgXqpxous
         LCpoQhw5FAe0/7+7spxgW88gF5zYxvpyPiH9+Yv4FNEq4RpWg3g0dpl/pswE5UV6ckYm
         7To+uObWL0kSfNn3tJd50fukN6yDpeO2heZM0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DOrVUIP3baQW+y69ReFUHPZolOZgvc/JJzYGkZkeKPma5OJOEdKoYO9+YvH5l/Kmxx
         yHIjR+zNeQLQRmVKXiUf4mJLE8xhynJu8xprgdRx9CT6PjH8xxgWUiBvc0Xbth2Jmih8
         nF7vQqzwVFCxX9HtuLRr8rZReZmxeqSYGF0WY=
MIME-Version: 1.0
Received: by 10.229.77.12 with SMTP id e12mr646617qck.147.1304506325167; Wed,
 04 May 2011 03:52:05 -0700 (PDT)
Received: by 10.229.224.131 with HTTP; Wed, 4 May 2011 03:52:04 -0700 (PDT)
In-Reply-To: <BANLkTins1T5V6+aKAtqX5BGhQrv9pT_9zA@mail.gmail.com>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
	<BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
	<347589.95733.qm@web130102.mail.mud.yahoo.com>
	<BANLkTikZgUcQuHRAVmFZeP0hEMLMoF2OVA@mail.gmail.com>
	<BANLkTincBCeZ-RDK71cVbwuH1Xv7_Wmwew@mail.gmail.com>
	<BANLkTins1T5V6+aKAtqX5BGhQrv9pT_9zA@mail.gmail.com>
Date: Wed, 4 May 2011 12:52:04 +0200
Message-ID: <BANLkTimh8E-eCfu00nqhDfJD06ZnEgQBdw@mail.gmail.com>
Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
From: Tomislav Poljak <tpoljak@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hi,
seems there is a custom impl of MultiPhraseQuery used in the system,
which uses (and maybe misuses) Lucene's MultiPhraseQuery that could be
the reason of slowdown. I've tried running sample Lucene's
MultiPhraseQuery in an infinite while loop printing out times for
every 1000 executions and couldn't reproduce slowdown.

Thanks for provided assistance,

Tomislav


2011/5/3 Michael McCandless <lucene@mikemccandless.com>:
> On Tue, May 3, 2011 at 7:43 AM, Tomislav Poljak <tpoljak@gmail.com> wrote:
>> Hi,
>>
>> 2011/5/3 Michael McCandless <lucene@mikemccandless.com>:
>>> I feel like we are back to Basic ;)
>>>
>>> If you keep running line 40 over and over on the same memory index, do
>>> you see a slowdown?
>>
>> Yes. I've tested running same query list (~3,5 k queries) on the same
>> MemoryIndex instance and after a while iterations get slower and
>> slower. Same thing happens when running queries on the same instance
>> of RAMDir based index holding only one doc. But, if I remove
>> MultiPhraseQuery type of queries from the query list then speed of
>> execution is the same, meaning execution time for other queries is
>> constant and it doesn't grow over time (as it would be expected).
>>
>> I've tried to run tests with the latest 3.1 branch as Uwe suggested
>> (checkout and built today) and slowdown is still present when
>> MultiPhraseQuery type of queries are included (not removed from the
>> query list).
>
> Spooky!
>
> Can you boil this into a contained test case?
>
> Mike
>
> http://blog.mikemccandless.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 11:39:36 2011
Return-Path: <java-user-return-49611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 173E6676
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 11:39:36 +0000 (UTC)
Received: (qmail 35495 invoked by uid 500); 4 May 2011 11:39:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35457 invoked by uid 500); 4 May 2011 11:39:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35448 invoked by uid 99); 4 May 2011 11:39:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 11:39:33 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.51] (HELO nm12-vm0.bullet.mail.ne1.yahoo.com) (98.138.91.51)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 May 2011 11:39:25 +0000
Received: from [98.138.90.52] by nm12.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 11:39:04 -0000
Received: from [98.138.87.12] by tm5.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 11:39:04 -0000
Received: from [127.0.0.1] by omp1012.mail.ne1.yahoo.com with NNFMP; 04 May 2011 11:39:04 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 240195.98180.bm@omp1012.mail.ne1.yahoo.com
Received: (qmail 21168 invoked by uid 60001); 4 May 2011 11:39:04 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304509144; bh=Om8FsINUcZoGuupR2ZIn6RVRkdnGJIH5EOx0Iur4Kcs=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=kiCde86CUrF/ehc23sFdSfqgw1sv7lV02D0rY/MwEKenKu+enf8+wO3SbV4f+qfgSgSBKEgXUUYDP5TATwo8MvbIaFUMwhlzsswlfF28vLmyQvvK53XCkbcVIW2L8LObDc0yR8sewT+DLPAEAfgGM6I8Fg05Kqpo5NLmTpsymts=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=sVIaLCA/L7THk7SBXKEJWUSNzDa2T1r5JAFDV9PGBYkvDIqG8MDNIjBe974gky/lin86d1JJfxVJSQtVEyAdkLYY4g4DPqlxUueNcLnS+yliPjWa/kuxTUT1kC/iuJgwg3uENlfCvGZZjWC4SG+EJAeNalFoxWnTK9QAKAm85Dk=;
Message-ID: <89331.21012.qm@web121716.mail.ne1.yahoo.com>
X-YMail-OSG: Vy2o6WMVM1luJd5j4hg.mLrUeeyXjk7Kjzun08N3EQDT45z
 NMdRkhdwvKXp4OiabW6rFcSD3NRaxE86KORvJyJSalPDYPV6KcnTaG8FrTVF
 WiZy1d2BKXa_6Z1ej6quHwkVx4S1OL3b7eNolBcEfSiIphrZIphjFiunuj.W
 RxTdvWDRZxsCFuMRW8rnW1bt1reWhpsUf5qheHmFiRrvjK89pEYtRBDwne9i
 J_qo48usaW_ghHpnjmSLxGZ.OQx6uJ5u1ZboB_IKnYkoDUk_1FuRx3QvMpjr
 Kmbl8DrkhWKe3IGyF20eOAJPejQ_T3rkqHa3OhHIRtMvcQj6gpc7W6JdAW1k
 UOOCtlTOh_w4UIj1snZ_CC9UfMmiJwUDf91Fs1Wy_gLoGnxu9Y8oEbw--
Received: from [193.140.184.4] by web121716.mail.ne1.yahoo.com via HTTP; Wed, 04 May 2011 04:39:03 PDT
X-Mailer: YahooMailWebService/0.8.110.299900
References: <4DBFEBCD.9090504@fastmail.fm>
Date: Wed, 4 May 2011 04:39:03 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Reply-To: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Anyway to not bother scoring less good matches ?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
  "paul_t100@fastmail.fm" <paul_t100@fastmail.fm>
In-Reply-To: <4DBFEBCD.9090504@fastmail.fm>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

=0A=0AIm receiving a number of searches with many ORs so that the total num=
ber of matches is huge ( > 1 million) although only the first 20 results ar=
e required. Analysis shows most time is spent scoring the results. Now it s=
eems to me if you sending a query with 10 OR components, documents that mat=
ch most of the terms are bound to get a better score than a match that only=
 matches one or two of the terms.=A0 So does lucene do any optimization to =
not bother working out the scores of the poor matches.=0A=0AEDIT:Actually n=
ot sure the statement because if only term matches it could still get the h=
ighest score if the match was on the shortest term.=0A=0ABut can you see my=
 point is there way to get lucene discount the less good matches without sc=
oring them, or is there another approach. At the moment we allow the full l=
ucene syntax and use QueryParser to parse a query and pass the resultant qu=
ery to search unchanged (execpt for handling of numeric fields), should I b=
e modifying the query somehow ?=0A=0A=0AYou can restrict number of returned=
 results by using a adaptively computed BooleanQuery.html#setMinimumNumberS=
houldMatch(int) parameter.=0AFor example, If you have 10 optional clauses y=
ou can set minimum should match to 60% of 10 =3D 6.=0A=0ASimilar mechanism =
exists in solr :=0Ahttp://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Mi=
nimum_.27Should.27_Match.29=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 11:48:34 2011
Return-Path: <java-user-return-49612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C03D03D93
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 11:48:34 +0000 (UTC)
Received: (qmail 45599 invoked by uid 500); 4 May 2011 11:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45547 invoked by uid 500); 4 May 2011 11:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45539 invoked by uid 99); 4 May 2011 11:48:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 11:48:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 11:48:28 +0000
Received: by qwj9 with SMTP id 9so876246qwj.35
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 04:48:07 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=iVBZWBN+EZXBC2g6eUR1cwzU80Obxt3lDnJbJjkr53U=;
        b=pvL5DOFnqdGlf418vTuj662FD5dL9mWoKEHndUDu1rnR/qaVEfZg9Vihzx8Z3XKDI6
         qlZy17327VSbaTFauL8ic5UAfWIvE4OBTJ+foNHa6UsxVrsuDZjwuWlTsvUoo/XHjrPM
         IZu0CUaMVFMmf2RCUUCnzz+n1biae8anCdg90=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=OyahDOVaAgPKHhHGt+jWEKLnMTvrBHOuW6rQHM42OoH50bSNkxSM4wKTQO1jLMwEpO
         cfW8GXI9LcKgMzYC2ndLWoaak57ybZp+zL8amYmZcWsp/kxZIASUAccrccORxgCZ4s9o
         DQVe7EkpKfF2lgtDAxT9t7MCTos7NGjFl01eA=
MIME-Version: 1.0
Received: by 10.229.5.209 with SMTP id 17mr680274qcw.85.1304509686865; Wed, 04
 May 2011 04:48:06 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Wed, 4 May 2011 04:48:06 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
	<000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
	<E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
	<BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
	<BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
	<796945.6397.qm@web130103.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
	<733611.86868.qm@web130122.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
	<855496.50707.qm@web130109.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
Date: Wed, 4 May 2011 07:48:06 -0400
Message-ID: <BANLkTi=x+P75snzTbOXGU0b6khYFb598sA@mail.gmail.com>
Subject: Re: AW: AW: AW: "fuzzy prefix" search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Shingles won't to that either, so I suspect you'll have to write a custom
tokenizer.

Best
Erick

On Wed, May 4, 2011 at 2:07 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> I know this is just an example.
> But even the WhitespaceAnalyzer takes the words apart, which I don't want=
. I would like the phrases as they are (maximum 3 words, e.g. "Merlot del T=
icino", ...) to be n-gram-ed. I hence want to have the n-grams.
> Mer
> Merl
> Merlo
> Merlot
> Merlot
> Merlot d
> ...
>
> Regards
> Clemens
>> -----Urspr=FCngliche Nachricht-----
>> Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>> Gesendet: Dienstag, 3. Mai 2011 23:12
>> An: java-user@lucene.apache.org
>> Betreff: Re: AW: AW: AW: "fuzzy prefix" search
>>
>> Clemens - that's just an example. =A0Stick another tokenizer in there, l=
ike
>> WhitespaceTokenizer in there, for example.
>>
>> Otis
>> ----
>> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosyst=
em
>> search :: http://search-lucene.com/
>>
>>
>>
>> ----- Original Message ----
>> > From: Clemens Wyss <clemensdev@mysign.ch>
>> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
>> > Sent: Tue, May 3, 2011 4:31:14 PM
>> > Subject: AW: AW: AW: "fuzzy prefix" search
>> >
>> > But doesn't the KeyWordTokenizer extract single words out oft he
>> >stream? I would =A0like to create n-grams on the stream (field content)=
 as it
>> is...
>> >
>> > > =A0-----Urspr=FCngliche Nachricht-----
>> > > Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>> > > =A0Gesendet: Dienstag, 3. Mai 2011 21:31
>> > > An: java-user@lucene.apache.org
>> > > =A0Betreff: Re: AW: AW: "fuzzy prefix" search
>> > >
>> > > Clemens,
>> > >
>> > > Something a la:
>> > >
>> > > public TokenStream tokenStream (String =A0fieldName, Reader r) {
>> > > =A0 return nw EdgeNGramTokenFilter(new =A0KeywordTokenizer(r),
>> > > EdgeNGramTokenFilter.Side.FRONT, 1, 4); }
>> > >
>> > >
>> > > Check out page 265 of Lucene in Action 2.
>> > >
>> > > =A0Otis
>> > > ----
>> > > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene
>> > > ecosystem search :: http://search-lucene.com/
>> > >
>> > >
>> > >
>> > > ----- Original =A0Message ----
>> > > > From: Clemens Wyss <clemensdev@mysign.ch>
>> > > > To: =A0"java-user@lucene.apache.org" =A0<java-user@lucene.apache.o=
rg>
>> > > =A0> Sent: Tue, May 3, 2011 12:57:39 PM
>> > > > Subject: AW: AW: "fuzzy =A0prefix" search
>> > > >
>> > > > How does an simple Analyzer look that =A0just "n-grams" the =A0doc=
s/fields.
>> > > >
>> > > > class =A0SimpleNGramAnalyzer extends =A0Analyzer { =A0@Override
>> > > > public TokenStream tokenStream ( String fieldName, =A0 Reader read=
er )
>> > > > {
>> > > > =A0 =A0 EdgeNGramTokenFilter... =A0???
>> > > > }
>> > > > }
>> > > =A0>
>> > > > > -----Urspr=FCngliche Nachricht-----
>> > > > > Von: =A0Otis =A0Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>> > > =A0> > =A0Gesendet: Dienstag, 3. Mai 2011 13:36
>> > > > > An: java-user@lucene.apache.org
>> > > =A0> > =A0Betreff: Re: AW: "fuzzy prefix" search
>> > > > =A0>
>> > > > > Hi,
>> > > > >
>> > > > > I =A0didn't =A0read this thread closely, but just in case:
>> > > > > * Is this =A0something =A0you can handle with synonyms?
>> > > > > * If this is for =A0English and you are =A0trying to handle typo=
s,
>> > > > > there is a
>> >list
>> > > =A0>of
>> > > > > common English misspellings =A0out there that you =A0could use f=
or
>> > > > > this
>> > > perhaps.
>> > > > > * Have you =A0considered =A0n-gramming your tokens? =A0Not sure =
if
>> > > > > this would
>> > > =A0help,
>> > > > > didn't read =A0messages/examples closely enough, but =A0you may =
want
>> > > > > to
>> > > look at
>> > > > > this if =A0you haven't done =A0so yet.
>> > > > >
>> > > > > Otis
>> > > > > ----
>> > > =A0> > Sematext :: http://sematext.com/ :: Solr - =A0Lucene - Nutch
>> > > Lucene =A0ecosystem
>> > > > > search :: http://search-lucene.com/
>> > > > >
>> > > > =A0>
>> > > > >
>> > > > > ----- Original =A0Message =A0----
>> > > > > > From: Clemens Wyss <clemensdev@mysign.ch>
>> > > > =A0> > To: =A0"java-user@lucene.apache.org" =A0 <java-
>> user@lucene.apache.org>
>> > > =A0> > =A0> Sent: Tue, May 3, 2011 5:25:30 AM
>> > > > > > =A0Subject: AW: "fuzzy prefix" =A0search
>> > > > > >
>> > > > =A0> > >PrefixQuery
>> > > > > > I'd like the =A0combination =A0of prefix and fuzzy ;-) because
>> > > > > > people
>> >could
>> > > > > =A0>also =A0type "menlo" or "m=E4rl" and in any of these cases I=
'd
>> > > > > like =A0to
>> >get
>> > > > > =A0>a hit on Merlot (for suggesting =A0Merlot)
>> > > > > >
>> > > > > > > =A0 -----Urspr=FCngliche =A0Nachricht-----
>> > > > > > > Von: Ian =A0Lea =A0[mailto:ian.lea@gmail.com]
>> > > > > > =A0> =A0Gesendet: =A0Dienstag, 3. Mai 2011 11:22 =A0> An:
>> > > > > > java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0Betreff: Re: "fuzzy prefix" search
>> > > > =A0> > >
>> > > > > =A0> > I'd assumed that =A0FuzzyQuery =A0wouldn't ignore case bu=
t I
>> > > > > could be
>> > > wrong.
>> > > > =A0> > > =A0What would be the edit =A0distance between =A0"mer" =
=A0and "merlot"?
>> > > Would
>> > > > > > > it be less that 1.5 =A0which I =A0 reckon would be the value=
 of
>> > > > > > > =A0length(term)*0.5 as detailed in =A0the =A0javadocs? =A0Se=
ems
>> > > > > > > unlikely,
>> >but
>> > > > > > > I don't really =A0know anything about =A0 the Levenshtein (e=
dit
>> distance)
>> > > > > algorithm as =A0used by =A0FuzzyQuery.
>> > > > > > > =A0Wouldn't a PrefixQuery be =A0more =A0appropriate here?
>> > > > > > >
>> > > > > > =A0>
>> > > > > > > =A0 --
>> > > > > > > =A0Ian.
>> > > > > > >
>> > > > > > > On Tue, May =A03, =A02011 at 10:10 AM, Clemens Wyss
>> > > > > > > <clemensdev@mysign.ch>
>> > > > =A0> > =A0> =A0wrote:
>> > > > > > > > Unfortunately =A0lowercasing doesn't =A0help.
>> > > > > > > > Also, =A0 doesn't the FuzzyQuery ignore =A0casing?
>> > > > > > > =A0>
>> > > > > > > >> =A0 -----Urspr=FCngliche =A0Nachricht-----
>> > > > > > > >> Von: Ian Lea =A0 [mailto:ian.lea@gmail.com]
>> > > > > > =A0> =A0>> =A0Gesendet: Dienstag, 3. Mai 2011 11:06
>> > > > =A0> > > >> =A0An: java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0>> Betreff: Re: "fuzzy prefix" =A0search
>> > > > > > > =A0>>
>> > > > > > > =A0>> =A0Mer !=3D mer. =A0The latter will be =A0what is inde=
xed
>> > > > > > > because
>> > > > > > > >> StandardAnalyzer calls =A0 LowerCaseFilter.
>> > > > > > > >>
>> > > > > > =A0> >> =A0 --
>> > > > > > > >> Ian.
>> > > > =A0> > > >>
>> > > > > > > =A0>>
>> > > > =A0> > > >> On =A0Tue, May 3, 2011 at 9:56 AM, =A0Clemens =A0Wyss
>> > > > > > > <clemensdev@mysign.ch>
>> > > > =A0> > =A0> >> =A0wrote:
>> > > > > > > >> =A0> Sorry for coming back =A0to my issue. Can anybody
>> > > > > > > >> explain why
>> >my
>> > > > > > > "simple"
>> > > > > =A0> > =A0>> unit test below fails? Any =A0hint/help =A0apprecia=
ted.
>> > > =A0> > > > >> >
>> > > > > > > >> =A0> =A0Directory =A0directory =3D new RAMDirectory();
>> > > > > > > >> IndexWriter
>> > > =A0> > > > =A0>> > indexWriter =3D =A0new IndexWriter( =A0directory,=
 new
>> > > > > > =A0> >> > =A0StandardAnalyzer(
>> > > > > > > =A0 Version.LUCENE_31
>> > > =A0> > > > >> > ), =A0 IndexWriter.MaxFieldLength.UNLIMITED =A0); Do=
cument
>> > > document
>> > > =A0> > =A0=3D
>> > > > > > > new
>> > > > > > > =A0>> > Document(); =A0 document.add( new Field( "test", =A0=
"Merlot",
>> > > > > > > >> > =A0Field.Store.YES, =A0Field.Index.ANALYZED ) );
>> > > > > > > >> > =A0 indexWriter.addDocument(
>> > > > > > > =A0>> > =A0document ); =A0IndexReader indexReader =3D
>> > > > > > > indexWriter.getReader();
>> > > > > =A0> > >> > =A0IndexSearcher searcher =3D new =A0IndexSearcher(
>> > > > > indexReader );
>> > > =A0> > > > >> > Query q =3D new FuzzyQuery( =A0 new Term( =A0"test",=
 "Mer" ),
>> 0.5f,
>> >0,
>> > > > > > > >> > 10 ); // =A0or =A0Query q =3D =A0new FuzzyQuery( new Te=
rm(
>> > > > > > > >> > "test",
>> "Mer"
>> > > > =A0> > > =A0>> > ), 0.5f); TopDocs =A0result =3D =A0searcher.searc=
h( q, 10
>> > > > );
>> > > > > =A0> > >> > =A0Assert.assertEquals( 1, =A0result.totalHits =A0);
>> > > > > > =A0> >> >
>> > > > > > > >> > - =A0 =A0Clemens
>> > > > > > > >> >
>> > > > > > > =A0>> >> =A0-----Urspr=FCngliche =A0Nachricht-----
>> > > > =A0> > > >> >> Von: =A0Clemens Wyss [mailto:clemensdev@mysign.ch]
>> > > > > =A0> > =A0>> =A0>> Gesendet: Montag, 2. Mai 2011 =A023:01
>> > > > > > > =A0>> >> An: java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> Betreff: AW: "fuzzy prefix" =A0search
>> > > > > =A0> > >> =A0>>
>> > > > =A0> > > >> >> Is it the =A0combination of FuzzyQuery and =A0Term =
=A0which
>> > > > makes
>> >the
>> > > > > > > =A0>> >> =A0search to go for "word =A0boundaries"?
>> > > > > > > =A0 >> >>
>> > > > > > > >> >> > =A0 =A0-----Urspr=FCngliche Nachricht-----
>> > > > > > > >> >> =A0> Von: =A0Clemens =A0Wyss [mailto:clemensdev@mysign=
.ch]
>> > > > > =A0> > =A0>> =A0>> > Gesendet: Montag, 2. Mai 2011 =A014:13
>> > > > > > =A0> >> >> > =A0An: java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> > Betreff: AW: "fuzzy =A0prefix" =A0search
>> > > > > > > >> =A0>> =A0>
>> > > > > > > >> =A0>> > I tried this too, =A0but unfortunately =A0I only =
get
>> > > > > > > >> hits =A0when
>> > > > > > > =A0>> >> > the search term is a least =A0 as long as the wor=
d to =A0be
>> >looked
>> > > up.
>> > > > > > > >> >> =A0 >
>> > > > > > > =A0>> >> > E.g.:
>> > > > =A0> > > =A0>> >> > ...
>> > > > > > > =A0>> =A0>> > =A0Directory directory =3D new RAMDirectory();=
 =A0IndexWriter
>> > > > > > > =A0 >> >> > =A0indexWriter =3D new IndexWriter( directory, =
=A0>> =A0>>
>> > > > > > > > IndexManager.getIndexingAnalyzer(
>> > > > =A0> > =A0> >> =A0>> LOCALE_DE ),
>> > > > > > =A0> >> >> =A0> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0IndexWriter.Max=
FieldLength.UNLIMITED );
>> > > > > > > =A0>> >> =A0>
>> > > > > > > =A0>> >> =A0> Document document =3D new =A0Document();
>> document.add(
>> > > new
>> > > =A0> > > > Field(
>> > > > > > > =A0>> >> =A0> "test", "Merlot",
>> > > > > > > >> =A0 >> =A0> =A0 =A0 =A0 =A0 =A0 =A0 Field.Store.YES, =A0 =
Field.Index.ANALYZED ) );
>> > > > > > > =A0>> =A0>> =A0indexWriter.addDocument(
>> > > > > > > >> =A0>> > =A0document =A0);
>> > > > > > > >> =A0>> >
>> > > > > > > >> >> =A0> =A0 IndexReader indexReader =3D indexWriter.getRe=
ader();
>> > > > > > =A0> =A0>> >> > IndexSearcher
>> > > > > > =A0> =A0>> >> =A0> searcher =3D new IndexSearcher( =A0indexRea=
der ); =A0>>
>> > > > > > >> =A0>
>> > > > > > > =A0>> >> > Query q =3D new FuzzyQuery( =A0 new Term( "test",=
 "Mer" =A0),
>> >0.6f,
>> > > > > > > >> >> > 1 ); =A0 TopDocs =A0result =3D searcher.search( q, 1=
0 );
>> > > > > > > =A0>> =A0>> > Assert.assertEquals( =A0>> =A0>> =A0> 1,
>> > > > > > > >> =A0>> result.totalHits ); ...
>> > > > > > =A0> =A0 >> >> >
>> > > > > > > >> >> > =A0> =A0-----Urspr=FCngliche =A0Nachricht-----
>> > > > > > > =A0>> >> > =A0> Von: Uwe Schindler [mailto:uwe@thetaphi.de] =
=A0>>
>> > > > > > > >> =A0> > Gesendet: Montag, 2. Mai 2011 =A013:50 =A0>> >> > =
=A0> An:
>> > > > > > > java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> > > Betreff: RE: "fuzzy =A0prefix" =A0search
>> > > > > > > >> =A0>> > =A0>
>> > > > > > > =A0>> >> > > Hi,
>> > > =A0> > > > >> =A0>> > =A0>
>> > > > > =A0> > >> >> > > You can pass an integer =A0 to =A0FuzzyQuery wh=
ich defines
>> the
>> > > > > > > >> >> > =A0> =A0number of =A0characters that are seen as pre=
fix.
>> > > > > > > >> >> > So all
>> > > =A0> > > > =A0>> >> > > terms must match
>> > > =A0> > > > >> =A0 >> > > this prefix and the rest =A0of each term is=
 matched using
>> > > >fuzzy.
>> > > > > > > =A0>> >> > >
>> > > > > > > >> =A0>> =A0> > =A0Uwe
>> > > > > > > >> >> > =A0 >
>> > > > > > > >> >> > > =A0-----
>> > > =A0> > > > =A0>> >> > > Uwe Schindler
>> > > > =A0> > > >> =A0 >> > > H.-H.-Meier-Allee 63, D-28213 =A0Bremen
>> > > > > > > =A0>> http://www.thetaphi.de
>> > > =A0> > > > =A0>> >> > > =A0eMail: uwe@thetaphi.de
>> > > > > > > =A0>> =A0>> > =A0>
>> > > > > > > >> =A0>> > > > =A0-----Original Message-----
>> > > > > > =A0> =A0>> >> > > =A0> From: Clemens Wyss
>> > > > > > [mailto:clemensdev@mysign.ch]
>> > > > > =A0> > =A0>> =A0>> > > > Sent: Monday, May 02, =A02011 1:47 PM =
=A0 >> > > > To:
>> > > > > > > =A0>> java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> > > > Subject: =A0"fuzzy prefix" =A0search =
=A0>> >> > > >
>> > > > =A0> > > >> =A0>> > > > I'd =A0like to search =A0fuzzily but not o=
n a full =A0term.
>> > > > > > > >> =A0>> > =A0> > E.g.
>> > > > > > =A0> >> =A0>> > > > I have a text "Merlot =A0del =A0Ticino"
>> > > =A0> > > > >> >> > > > I'd like
>> > > > > =A0> =A0> >> =A0>> > > > "mer", "merr", "melo", =A0... to =A0mat=
ch.
>> > > > > > > >> =A0>> > =A0> >
>> > > > > > =A0> >> >> > > > If =A0I use =A0FuzzyQuery only =A0"merlot, =
=A0"merlott" hit.
>> >What
>> > > =A0> > > > >> >> =A0> =A0> > =A0Query-combination should I use?
>> > > > > > > >> =A0 >> > > =A0>
>> > > > > > > >> >> > =A0> > =A0Thx
>> > > > > > > >> >> > =A0 > > Clemens
>> > > > > =A0> > >> >> > > =A0>
>> > > > > > > >> =A0 >> > > >
>> > > =A0> > > > >> >> > > =A0>
>> > > > > =A0> > >> >> > > >
>> >--------------------------------------------------------
>> > > > > > =A0> =A0>> >> > > > ----
>> > > > > > > =A0>> =A0>> =A0> > > ---
>> > > > > > > =A0>> >> > > > =A0---
>> > > > > > > =A0 >> >> > > > --
>> > > > > > =A0> >> =A0>> > > > - =A0To unsubscribe, e-mail:
>> > > > > =A0 > > >> >> > > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> > > > For additional =A0commands, =A0e-mail:
>> > > > > > > =A0>> >> > =A0> > java-user-help@lucene.apache.org =A0 =A0>>=
 >> > >
>> > > > > > > >> >> =A0> =A0>
>> > > > > > > =A0>> >> > =A0>
>> > > > > > > =A0>> >> > >
>> > > > =A0> > > >> >> > >
>> >----------------------------------------------------------
>> > > > > =A0> > =A0>> >> > > ----
>> > > > > > > =A0>> =A0>> > =A0> ---
>> > > > > > > >> =A0>> > > ---
>> > > > > > > =A0>> =A0>> =A0> > - To unsubscribe, e-mail:
>> > > > > > > =A0>> =A0>> > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> > > For additional =A0commands, =A0e-mail:
>> > > > > > > >> =A0>> > =A0> java-user-help@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> >
>> > > > > > =A0> >> >> =A0>
>> > > > > > > >> =A0>> =A0>
>> > > > > > > >> =A0>>
>> >--------------------------------------------------------------
>> > > > =A0> =A0> > >> >> --
>> > > > > > > =A0 >> >> > =A0---
>> > > > > > > >> >> =A0> -- To unsubscribe, =A0 e-mail:
>> > > > > > > >> =A0>> > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> > For additional commands, =A0e-mail:
>> > > > > =A0> > >> =A0>> > java-user-help@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >>
>> > > > > > > =A0>> >>
>> > > > > =A0> > >> >>
>> > > =A0> > > > >> >>
>> >--------------------------------------------------------------
>> > > > > =A0> > =A0>> >> ----
>> > > > > > > =A0 >> >> --- To =A0unsubscribe, e-mail:
>> > > > > > > =A0>> >> java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0>> >> For additional commands, =A0e-mail:
>> > > > > > =A0> java-user-help@lucene.apache.org =A0 =A0>> >
>> > > > > > > >> >
>> > > > > > =A0> >> =A0>
>> > > > > > > >> >
>> >---------------------------------------------------------------
>> > > > =A0> > =A0> >> > ----
>> > > > > > > =A0 >> > -- To unsubscribe, =A0e-mail:
>> > > > > > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0>> > For additional commands, =A0e-mail:
>> > > > > > =A0> java-user-help@lucene.apache.org =A0 =A0>> >
>> > > > > > > >> >
>> > > > > > =A0> =A0>>
>> > > > > > > >>
>> > > > > > =A0> >>
>> >-----------------------------------------------------------------
>> > > > =A0> > =A0> >> ----
>> > > > > > > =A0>> To =A0unsubscribe, e-mail: java-user-
>> > > unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0>> For additional commands, =A0e-mail:
>> > > > > > > java-user-help@lucene.apache.org =A0 =A0>
>> > > > > > > >
>> > > > > > > >
>> > > =A0> > > > >
>> >------------------------------------------------------------------
>> > > > =A0> > =A0> > ---
>> > > > > > > =A0> To =A0unsubscribe, e-mail:
>> > > > > > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> For additional commands, e-mail: =A0java-user-
>> > > help@lucene.apache.org
>> > > > =A0> =A0> > >
>> > > > > > > >
>> > > > > =A0> >
>> > > > > > =A0>
>> > > > > > >
>> >--------------------------------------------------------------------
>> > > =A0> > =A0> > - To =A0unsubscribe, e-mail:
>> > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0For additional commands, e-mail:
>> > > java-user-help@lucene.apache.org =A0> > =A0>
>> > > > > >
>> > > > > >
>> ---------------------------------------------------------------------
>> > > =A0> > =A0> To =A0unsubscribe, e-mail:
>> > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> For =A0additional commands, e-mail:
>> > > java-user-help@lucene.apache.org =A0> > =A0>
>> > > > > >
>> > > > >
>> > > > =A0> =A0 ---------------------------------------------------------=
------------
>> > > =A0> > To =A0unsubscribe, e-mail:
>> > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0For additional commands, e-mail:
>> > > java-user-help@lucene.apache.org =A0>
>> > > >
>> > > >
>> > > > ------------------------------------------------------------------
>> > > > ---
>> > > =A0> To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org
>> > > =A0> For =A0additional commands, e-mail:
>> > > java-user-help@lucene.apache.org =A0>
>> > > >
>> > >
>> > >
>> > > --------------------------------------------------------------------
>> > > - To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > =A0For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For =A0additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 11:50:10 2011
Return-Path: <java-user-return-49613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CF2ED3E14
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 11:50:10 +0000 (UTC)
Received: (qmail 50305 invoked by uid 500); 4 May 2011 11:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50254 invoked by uid 500); 4 May 2011 11:50:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50246 invoked by uid 99); 4 May 2011 11:50:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 11:50:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 11:50:02 +0000
Received: by qwj9 with SMTP id 9so877264qwj.35
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 04:49:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=PPSd4hFobGB1y5yXLIjL4s0Gqh4MZ+90wNhRMtEYzWY=;
        b=YhRvn97ayiq/dk8kXmkMW8p6vEn9dc48N/tLdo7RiKKMB5Kyz/34TLT41sNamg9IZ/
         oH+xtVDCmzssGAZ3Y0Sk0j2UuqpoyVGxWtTtLnAC3E43fuO/nglP0TN548mozjDku+cb
         4u02mQWhHjh5Kg75gM0Y1yiK6ony8vfioSUO4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=leEbtOwerNXkS/38NP+I1+5BTqIFRyRaTjiPXpxujLa67C7zED89GqZgBoL7F+teDU
         tS6TsIO7TNDFusg4SDRAxJU2AQBJKVmHfRQxMZWA0wsu4KQ2UDU3ASSbPXB8Yo0V9GLR
         QPh6YkbMxqoTODs78RJ/Ne01qh5dMyPce1aRM=
MIME-Version: 1.0
Received: by 10.229.105.153 with SMTP id t25mr696578qco.123.1304509780473;
 Wed, 04 May 2011 04:49:40 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Wed, 4 May 2011 04:49:40 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51D69@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51D69@Exchange2007.mysigndomain.corp>
Date: Wed, 4 May 2011 07:49:40 -0400
Message-ID: <BANLkTimUvOsvov1aME5i-kaad1TGXTzvYQ@mail.gmail.com>
Subject: Re: Higher scoring if term is at the beginning of a field/document
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

What is the problem you're trying to solve? I'm wondering if
this is an XY problem. See:
http://people.apache.org/~hossman/#xyproblem

Best
Erick

On Wed, May 4, 2011 at 3:16 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> Given the I have 3 documents with exactly one field and the fields have the following contents:
> This is a moon
> The moon is bright
> moon
>
> If I analyze these documents they all hit on "moon". But how do I need to analyze/search my index in order to have the following "sort order":
> moon
> The moon is bright
> This is a moon
>
> i.e. the earlier the term appears the higher the score.
>
> Thx
> Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 11:52:27 2011
Return-Path: <java-user-return-49614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D1AA93EFE
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 11:52:27 +0000 (UTC)
Received: (qmail 57971 invoked by uid 500); 4 May 2011 11:52:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57921 invoked by uid 500); 4 May 2011 11:52:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57911 invoked by uid 99); 4 May 2011 11:52:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 11:52:25 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 11:52:19 +0000
Received: from compute6.internal (compute6.nyi.mail.srv.osa [10.202.2.46])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 3D28B2036E;
	Wed,  4 May 2011 07:51:58 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute6.internal (MEProxy); Wed, 04 May 2011 07:51:58 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=Y2r1VZa/LceORWyOe+85ZU5Vb3I=; b=WMhj2/lffbNIq/TQ+hki+kMAIhYHDM9sy7M8S5uHCnnNm7cDb9yK3xKCru7uWeC3uURsyNhJ8XKXIJgsRGLhhOTl4T8OVaOL0RjmhJC3aWkDYbNfJzheRqWvAOym0O0LNcPP4IwFP25J3a/8RqWtxcjSOPWoHGLs1mqZka1yCME=
X-Sasl-enc: osIZqP8wTjlsgcd9OaCpvrsuMIUC5vqZBZIUY4Vpk765 1304509917
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id A42D1400962;
	Wed,  4 May 2011 07:51:57 -0400 (EDT)
Message-ID: <4DC13DDD.6010905@fastmail.fm>
Date: Wed, 04 May 2011 12:51:57 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Ahmet Arslan <iorixxx@yahoo.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Anyway to not bother scoring less good matches ?
References: <4DBFEBCD.9090504@fastmail.fm> <89331.21012.qm@web121716.mail.ne1.yahoo.com>
In-Reply-To: <89331.21012.qm@web121716.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 04/05/2011 12:39, Ahmet Arslan wrote:
>
> Im receiving a number of searches with many ORs so that the total number of matches is huge (>  1 million) although only the first 20 results are required. Analysis shows most time is spent scoring the results. Now it seems to me if you sending a query with 10 OR components, documents that match most of the terms are bound to get a better score than a match that only matches one or two of the terms.  So does lucene do any optimization to not bother working out the scores of the poor matches.
>
> EDIT:Actually not sure the statement because if only term matches it could still get the highest score if the match was on the shortest term.
>
> But can you see my point is there way to get lucene discount the less good matches without scoring them, or is there another approach. At the moment we allow the full lucene syntax and use QueryParser to parse a query and pass the resultant query to search unchanged (execpt for handling of numeric fields), should I be modifying the query somehow ?
>
>
> You can restrict number of returned results by using a adaptively computed BooleanQuery.html#setMinimumNumberShouldMatch(int) parameter.
> For example, If you have 10 optional clauses you can set minimum should match to 60% of 10 = 6.
>
> Similar mechanism exists in solr :
> http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29
>
>
Thanks for the hint, so this could be done by overriding 
getBooleanQuery() in QueryParser ?

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 12:06:37 2011
Return-Path: <java-user-return-49615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 53DA33680
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 12:06:37 +0000 (UTC)
Received: (qmail 82794 invoked by uid 500); 4 May 2011 12:06:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82750 invoked by uid 500); 4 May 2011 12:06:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82742 invoked by uid 99); 4 May 2011 12:06:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:06:35 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:06:28 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 46F54C2184
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 14:06:08 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 0ADP-12d6BtE for <java-user@lucene.apache.org>;
	Wed,  4 May 2011 14:06:08 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id F3313C2117
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 14:06:07 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 4 May 2011 14:06:07 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 4 May 2011 14:06:06 +0200
Subject: AW: Higher scoring if term is at the beginning of a field/document
Thread-Topic: Higher scoring if term is at the beginning of a field/document
Thread-Index: AcwKUW2XLP5pQp9+S3aeSX8y2lqMMwAAWMXA
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51DDF@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51D69@Exchange2007.mysigndomain.corp>
 <BANLkTimUvOsvov1aME5i-kaad1TGXTzvYQ@mail.gmail.com>
In-Reply-To: <BANLkTimUvOsvov1aME5i-kaad1TGXTzvYQ@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

I try to be more specific:

Given the three documents below.
When I search for "moon", I'd like to get the follwoing order of my search =
result:

moon
The moon is bright
This is a moon

i.e. the "leftmost hit" of my search term should be rated highest/best...

How should I analyze/search my documents to get this search/rating behavior=
?

> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Mittwoch, 4. Mai 2011 13:50
> An: java-user@lucene.apache.org
> Betreff: Re: Higher scoring if term is at the beginning of a field/docume=
nt
>=20
> What is the problem you're trying to solve? I'm wondering if this is an X=
Y
> problem. See:
> http://people.apache.org/~hossman/#xyproblem
>=20
> Best
> Erick
>=20
> On Wed, May 4, 2011 at 3:16 AM, Clemens Wyss <clemensdev@mysign.ch>
> wrote:
> > Given the I have 3 documents with exactly one field and the fields have=
 the
> following contents:
> > This is a moon
> > The moon is bright
> > moon
> >
> > If I analyze these documents they all hit on "moon". But how do I need =
to
> analyze/search my index in order to have the following "sort order":
> > moon
> > The moon is bright
> > This is a moon
> >
> > i.e. the earlier the term appears the higher the score.
> >
> > Thx
> > Clemens
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 12:22:24 2011
Return-Path: <java-user-return-49616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F0E4B3007
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 12:22:23 +0000 (UTC)
Received: (qmail 16321 invoked by uid 500); 4 May 2011 12:22:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16257 invoked by uid 500); 4 May 2011 12:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16249 invoked by uid 99); 4 May 2011 12:22:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:22:21 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:22:15 +0000
Received: by wwi18 with SMTP id 18so775596wwi.5
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 05:21:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.197.201 with SMTP id el9mr1110022wbb.22.1304511714862;
 Wed, 04 May 2011 05:21:54 -0700 (PDT)
Received: by 10.227.11.67 with HTTP; Wed, 4 May 2011 05:21:54 -0700 (PDT)
In-Reply-To: <BANLkTimh8E-eCfu00nqhDfJD06ZnEgQBdw@mail.gmail.com>
References: <BANLkTinX=wFsYDHtnQ5aiDVCpEXp3UfWJA@mail.gmail.com>
	<BANLkTi=cEthzMYQ8Vn4_oSNWd3fohs1RZg@mail.gmail.com>
	<347589.95733.qm@web130102.mail.mud.yahoo.com>
	<BANLkTikZgUcQuHRAVmFZeP0hEMLMoF2OVA@mail.gmail.com>
	<BANLkTincBCeZ-RDK71cVbwuH1Xv7_Wmwew@mail.gmail.com>
	<BANLkTins1T5V6+aKAtqX5BGhQrv9pT_9zA@mail.gmail.com>
	<BANLkTimh8E-eCfu00nqhDfJD06ZnEgQBdw@mail.gmail.com>
Date: Wed, 4 May 2011 08:21:54 -0400
Message-ID: <BANLkTimg03kB37btGAng3LUpNsG69pM5jw@mail.gmail.com>
Subject: Re: MultiPhraseQuery slowing down over time in Lucene 3.1
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

OK, phew :)  Thanks for bringing closure...

Mike

http://blog.mikemccandless.com

On Wed, May 4, 2011 at 6:52 AM, Tomislav Poljak <tpoljak@gmail.com> wrote:
> Hi,
> seems there is a custom impl of MultiPhraseQuery used in the system,
> which uses (and maybe misuses) Lucene's MultiPhraseQuery that could be
> the reason of slowdown. I've tried running sample Lucene's
> MultiPhraseQuery in an infinite while loop printing out times for
> every 1000 executions and couldn't reproduce slowdown.
>
> Thanks for provided assistance,
>
> Tomislav
>
>
> 2011/5/3 Michael McCandless <lucene@mikemccandless.com>:
>> On Tue, May 3, 2011 at 7:43 AM, Tomislav Poljak <tpoljak@gmail.com> wrote:
>>> Hi,
>>>
>>> 2011/5/3 Michael McCandless <lucene@mikemccandless.com>:
>>>> I feel like we are back to Basic ;)
>>>>
>>>> If you keep running line 40 over and over on the same memory index, do
>>>> you see a slowdown?
>>>
>>> Yes. I've tested running same query list (~3,5 k queries) on the same
>>> MemoryIndex instance and after a while iterations get slower and
>>> slower. Same thing happens when running queries on the same instance
>>> of RAMDir based index holding only one doc. But, if I remove
>>> MultiPhraseQuery type of queries from the query list then speed of
>>> execution is the same, meaning execution time for other queries is
>>> constant and it doesn't grow over time (as it would be expected).
>>>
>>> I've tried to run tests with the latest 3.1 branch as Uwe suggested
>>> (checkout and built today) and slowdown is still present when
>>> MultiPhraseQuery type of queries are included (not removed from the
>>> query list).
>>
>> Spooky!
>>
>> Can you boil this into a contained test case?
>>
>> Mike
>>
>> http://blog.mikemccandless.com
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 12:34:39 2011
Return-Path: <java-user-return-49617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1AD5D372A
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 12:34:39 +0000 (UTC)
Received: (qmail 41842 invoked by uid 500); 4 May 2011 12:34:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41752 invoked by uid 500); 4 May 2011 12:34:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41744 invoked by uid 99); 4 May 2011 12:34:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:34:36 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:34:30 +0000
Received: from compute6.internal (compute6.nyi.mail.srv.osa [10.202.2.46])
	by gateway1.messagingengine.com (Postfix) with ESMTP id B5618209B7;
	Wed,  4 May 2011 08:34:09 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute6.internal (MEProxy); Wed, 04 May 2011 08:34:09 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=lfnS5m48fQU2aBjNdoJzI+OyqfQ=; b=KDj45AZgan8j+n+v6r5FZ0w+PaNQS1r42y+z94eDIEY1vW6lTOUZBqnzsbTYlmkhKl4LMGppSe0jOo5+oT1jD42dfcgnAsxSrmmmGO/g+biO4FyPuT8Wtyurd1MFJ3rIwdxs83PivkjEASqwwl+Oa8ZJ+BO5WMQ04BrkO0Dw6UQ=
X-Sasl-enc: /HFsqHZjYzHnQz/xVimxHcnoSYRbCsUTp2t1YZF2bV38 1304512449
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 02786404C17;
	Wed,  4 May 2011 08:34:08 -0400 (EDT)
Message-ID: <4DC147C1.7020206@fastmail.fm>
Date: Wed, 04 May 2011 13:34:09 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Anyway to not bother scoring less good matches ?
References: <4DBFEBCD.9090504@fastmail.fm> <89331.21012.qm@web121716.mail.ne1.yahoo.com> <4DC13DDD.6010905@fastmail.fm>
In-Reply-To: <4DC13DDD.6010905@fastmail.fm>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 04/05/2011 12:51, Paul Taylor wrote:
> On 04/05/2011 12:39, Ahmet Arslan wrote:
>>
>> Im receiving a number of searches with many ORs so that the total 
>> number of matches is huge (>  1 million) although only the first 20 
>> results are required. Analysis shows most time is spent scoring the 
>> results. Now it seems to me if you sending a query with 10 OR 
>> components, documents that match most of the terms are bound to get a 
>> better score than a match that only matches one or two of the terms.  
>> So does lucene do any optimization to not bother working out the 
>> scores of the poor matches.
>>
>> EDIT:Actually not sure the statement because if only term matches it 
>> could still get the highest score if the match was on the shortest term.
>>
>> But can you see my point is there way to get lucene discount the less 
>> good matches without scoring them, or is there another approach. At 
>> the moment we allow the full lucene syntax and use QueryParser to 
>> parse a query and pass the resultant query to search unchanged 
>> (execpt for handling of numeric fields), should I be modifying the 
>> query somehow ?
>>
>>
>> You can restrict number of returned results by using a adaptively 
>> computed BooleanQuery.html#setMinimumNumberShouldMatch(int) parameter.
>> For example, If you have 10 optional clauses you can set minimum 
>> should match to 60% of 10 = 6.
>>
>> Similar mechanism exists in solr :
>> http://wiki.apache.org/solr/DisMaxQParserPlugin#mm_.28Minimum_.27Should.27_Match.29 
>>
>>
>>
> Thanks for the hint, so this could be done by overriding 
> getBooleanQuery() in QueryParser ?
>
> Paul
>
Well I did extend QuerParser, and the method is being called but rather 
disappointingly it had no noticeablke effect on how long queries took. I 
really thought by reducing the number of matches the corresponding 
scoring phase would be quicker.

@Override
     protected Query getBooleanQuery(List<BooleanClause> clauses, 
boolean disableCoord)
         throws ParseException
     {
         BooleanQuery query = (BooleanQuery) 
super.getBooleanQuery(clauses,disableCoord);
         if(query!=null)
         {
             if(clauses.size() > 5)
             {
                 query.setMinimumNumberShouldMatch(3);
             }
         }
         return query;
     }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 12:35:43 2011
Return-Path: <java-user-return-49618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F6823760
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 12:35:43 +0000 (UTC)
Received: (qmail 45090 invoked by uid 500); 4 May 2011 12:35:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45043 invoked by uid 500); 4 May 2011 12:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45035 invoked by uid 99); 4 May 2011 12:35:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:35:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:35:36 +0000
Received: by qyk2 with SMTP id 2so3152740qyk.14
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 05:35:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=EEVvm9SQyDzt2pRHTMeqewIaKTPTZ9o3PuZzYsia8A0=;
        b=KTHFzwHYhhhIfOQIGqTxgLsr57Q4Fe59C0oyw0Z/Q6upsMrOxBx1KQrJs7/G/sZrth
         gjxCq4j5+suTpHgsNz35yOqW6NK7JT8Z6YR7Dpgd32ObkRRAyQrPU6voFB+Xy/pDKuaQ
         /JrIpbVT7Pfn1RRlVzMhUc4nriZGffKMqGoEA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=bx1qeDYoYEpSuHy5QuzsX83+So0o254kJBkZqMvwb+k6YSBgI5O+Sv30OlzejgX5tq
         4kgSdfyWwHudR+j5xkZX5IT3yUNZOAFt1JCqY3S81l2a1ceM/QDLVCavHaG8AJ0POFuJ
         kpwteezIeGC+0pP1rKrEbvJmATqo7NJBn/59M=
MIME-Version: 1.0
Received: by 10.229.78.155 with SMTP id l27mr722958qck.47.1304512515341; Wed,
 04 May 2011 05:35:15 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Wed, 4 May 2011 05:35:14 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51DDF@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51D69@Exchange2007.mysigndomain.corp>
	<BANLkTimUvOsvov1aME5i-kaad1TGXTzvYQ@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51DDF@Exchange2007.mysigndomain.corp>
Date: Wed, 4 May 2011 08:35:14 -0400
Message-ID: <BANLkTik7mdNinZB016g25p2g74mmfKipUg@mail.gmail.com>
Subject: Re: Higher scoring if term is at the beginning of a field/document
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I didn't ask a clear question. *Why* do you want to do this?
What is the use-case you're trying to solve? Is relevance
not what you want? Are you just experimenting?

The statement of *what* you want to do is clear, but I don't know
an easy to do that. Perhaps there's a better approach to solving
the underlying need.

Best
Erick

On Wed, May 4, 2011 at 8:06 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> I try to be more specific:
>
> Given the three documents below.
> When I search for "moon", I'd like to get the follwoing order of my searc=
h result:
>
> moon
> The moon is bright
> This is a moon
>
> i.e. the "leftmost hit" of my search term should be rated highest/best...
>
> How should I analyze/search my documents to get this search/rating behavi=
or?
>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Erick Erickson [mailto:erickerickson@gmail.com]
>> Gesendet: Mittwoch, 4. Mai 2011 13:50
>> An: java-user@lucene.apache.org
>> Betreff: Re: Higher scoring if term is at the beginning of a field/docum=
ent
>>
>> What is the problem you're trying to solve? I'm wondering if this is an =
XY
>> problem. See:
>> http://people.apache.org/~hossman/#xyproblem
>>
>> Best
>> Erick
>>
>> On Wed, May 4, 2011 at 3:16 AM, Clemens Wyss <clemensdev@mysign.ch>
>> wrote:
>> > Given the I have 3 documents with exactly one field and the fields hav=
e the
>> following contents:
>> > This is a moon
>> > The moon is bright
>> > moon
>> >
>> > If I analyze these documents they all hit on "moon". But how do I need=
 to
>> analyze/search my index in order to have the following "sort order":
>> > moon
>> > The moon is bright
>> > This is a moon
>> >
>> > i.e. the earlier the term appears the higher the score.
>> >
>> > Thx
>> > Clemens
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 12:53:40 2011
Return-Path: <java-user-return-49619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C092F3F82
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 12:53:40 +0000 (UTC)
Received: (qmail 71052 invoked by uid 500); 4 May 2011 12:53:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71010 invoked by uid 500); 4 May 2011 12:53:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71002 invoked by uid 99); 4 May 2011 12:53:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:53:38 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 12:53:31 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 49F06C2184
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 14:53:11 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id T6ToYb-a9O38 for <java-user@lucene.apache.org>;
	Wed,  4 May 2011 14:53:11 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 1CEFEC2117
	for <java-user@lucene.apache.org>; Wed,  4 May 2011 14:53:11 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Wed, 4 May 2011 14:53:11 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 4 May 2011 14:53:09 +0200
Subject: AW: Higher scoring if term is at the beginning of a field/document
Thread-Topic: Higher scoring if term is at the beginning of a field/document
Thread-Index: AcwKV8nb+KivSmquSHm1VKGwAkahQQAAMk8Q
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51DF7@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51D69@Exchange2007.mysigndomain.corp>
	<BANLkTimUvOsvov1aME5i-kaad1TGXTzvYQ@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51DDF@Exchange2007.mysigndomain.corp>
 <BANLkTik7mdNinZB016g25p2g74mmfKipUg@mail.gmail.com>
In-Reply-To: <BANLkTik7mdNinZB016g25p2g74mmfKipUg@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Ok, I got you ;)

Besides my "real index" (which is being analyzed through a ShingleAnalyzerW=
rapper) I implicitly/transparently build up a "search term index" which I p=
opulate with the terms (being shingles) of my "real index". The "search ter=
m index" is being used to provide search term suggestions when the user typ=
es in a search term. E.g.
if a user types:
"moo"
then I'd expect the following order of search term suggestions:
"moon"
"The moon..."
"This is a moon"
...

Thx
Clemens

> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Mittwoch, 4. Mai 2011 14:35
> An: java-user@lucene.apache.org
> Betreff: Re: Higher scoring if term is at the beginning of a field/docume=
nt
>=20
> I didn't ask a clear question. *Why* do you want to do this?
> What is the use-case you're trying to solve? Is relevance not what you wa=
nt?
> Are you just experimenting?
>=20
> The statement of *what* you want to do is clear, but I don't know an easy=
 to
> do that. Perhaps there's a better approach to solving the underlying need=
.
>=20
> Best
> Erick
>=20
> On Wed, May 4, 2011 at 8:06 AM, Clemens Wyss <clemensdev@mysign.ch>
> wrote:
> > I try to be more specific:
> >
> > Given the three documents below.
> > When I search for "moon", I'd like to get the follwoing order of my sea=
rch
> result:
> >
> > moon
> > The moon is bright
> > This is a moon
> >
> > i.e. the "leftmost hit" of my search term should be rated highest/best.=
..
> >
> > How should I analyze/search my documents to get this search/rating
> behavior?
> >
> >> -----Urspr=FCngliche Nachricht-----
> >> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> >> Gesendet: Mittwoch, 4. Mai 2011 13:50
> >> An: java-user@lucene.apache.org
> >> Betreff: Re: Higher scoring if term is at the beginning of a
> >> field/document
> >>
> >> What is the problem you're trying to solve? I'm wondering if this is
> >> an XY problem. See:
> >> http://people.apache.org/~hossman/#xyproblem
> >>
> >> Best
> >> Erick
> >>
> >> On Wed, May 4, 2011 at 3:16 AM, Clemens Wyss
> <clemensdev@mysign.ch>
> >> wrote:
> >> > Given the I have 3 documents with exactly one field and the fields
> >> > have the
> >> following contents:
> >> > This is a moon
> >> > The moon is bright
> >> > moon
> >> >
> >> > If I analyze these documents they all hit on "moon". But how do I
> >> > need to
> >> analyze/search my index in order to have the following "sort order":
> >> > moon
> >> > The moon is bright
> >> > This is a moon
> >> >
> >> > i.e. the earlier the term appears the higher the score.
> >> >
> >> > Thx
> >> > Clemens
> >> >
> >> > -------------------------------------------------------------------
> >> > -- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 14:02:48 2011
Return-Path: <java-user-return-49620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 168743118
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 14:02:48 +0000 (UTC)
Received: (qmail 89071 invoked by uid 500); 4 May 2011 14:02:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89011 invoked by uid 500); 4 May 2011 14:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88972 invoked by uid 99); 4 May 2011 14:02:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 14:02:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.43] (HELO nm29-vm0.bullet.mail.ne1.yahoo.com) (98.138.91.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 May 2011 14:02:36 +0000
Received: from [98.138.90.56] by nm29.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 14:02:15 -0000
Received: from [98.138.89.175] by tm9.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 14:02:15 -0000
Received: from [127.0.0.1] by omp1031.mail.ne1.yahoo.com with NNFMP; 04 May 2011 14:02:15 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 222827.12383.bm@omp1031.mail.ne1.yahoo.com
Received: (qmail 75311 invoked by uid 60001); 4 May 2011 14:02:15 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304517735; bh=rdJmRV4BaAW5g0K+O6rvlUcWoDBH9Ny4XVHDSISDufs=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=ofiZeRF6xF2XLLd36qzrWOZRuXkBXqr9UgGN6VYBU0itwRKlJzyVWDl20xS8CdNNL8jFDbBCAo3Gw99wQrz+2fTr4Z8tjREz4r/Ci+9P+oONclwIinzXfGn6RkfXk9vvXqQMBwNcETZPOROkXay0B+8nVJZUNoCwdHxFP7UedkM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=Px7XZFOXMy/ViPji4a0pI+GuoHmltlNAqme1dpT4xovKGIyRb9xGbWf/zNqgCdgDiFZt+xRVq9hqOkg1uP1HcmbswtErPyF++AeTxQJOu9XG9jiFikPKrlE7WknUTV6qBdJvXr3i+HCNhtxMETLm6FM4WJHbb9MCxTVHTp43as4=;
Message-ID: <128705.69618.qm@web121707.mail.ne1.yahoo.com>
X-YMail-OSG: QkoWq2IVM1n9hGT9DfJ9UUJnrfCEv39ESB.uB.Q1qSw0WcG
 Pi9bLaY5GXtKSzozTYpJYF_30zA2zp8nqoFvg9hEQ8tr5_gefsdyNkC.TX3l
 LtEObwzd3IE76Fjzjtb.pUJOQQDAdy459hjro6tx.DjS5wZmX7P0nQVDcNuW
 BLUiOQikOzs011cKWkcKjiIxQV9v5RPTeAhnKf_elIYgx9Y8INZPbKugZCEi
 Yl2KImwAtWg2zyyRz9If4vVDyqSLRS9fWgGnT.F_Y2nfPpq3FDFCe.wrrV2g
 mjwkfM5594eGtDpEKlQPQPjRVl.QKL3LXGs.h7kP.1KEUHf8za.TAk0q_FpP
 fd5jkAEhzsp1yo_lFrSAzLqAcc23ggy0FlRQ1dh_KjxtDrOfYeQ44LQ--
Received: from [193.140.184.4] by web121707.mail.ne1.yahoo.com via HTTP; Wed, 04 May 2011 07:02:14 PDT
X-Mailer: YahooMailWebService/0.8.110.299900
References: <4DBFEBCD.9090504@fastmail.fm> <89331.21012.qm@web121716.mail.ne1.yahoo.com> <4DC13DDD.6010905@fastmail.fm> <4DC147C1.7020206@fastmail.fm>
Date: Wed, 4 May 2011 07:02:14 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Reply-To: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Anyway to not bother scoring less good matches ?
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>,
  "paul_t100@fastmail.fm" <paul_t100@fastmail.fm>
In-Reply-To: <4DC147C1.7020206@fastmail.fm>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii



> Thanks for the hint, so this could be done by overriding getBooleanQuery() in QueryParser ?
> 


I think something like this should do the trick. Without overriding anything.


Query query= QueryParser.parse("User Entered String");

if (query instanceof BooleanQuery)
((BooleanQuery)query).setMinimumNumberShouldMatch(3);

You can steal code from solr too, ( e.g. how to calculate mm and optional clause count etc.)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 14:38:40 2011
Return-Path: <java-user-return-49621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DBF7B3BA1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 14:38:39 +0000 (UTC)
Received: (qmail 46257 invoked by uid 500); 4 May 2011 14:38:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46220 invoked by uid 500); 4 May 2011 14:38:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46212 invoked by uid 99); 4 May 2011 14:38:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 14:38:37 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.186] (HELO nm26-vm4.bullet.mail.ne1.yahoo.com) (98.138.91.186)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 May 2011 14:38:28 +0000
Received: from [98.138.90.49] by nm26.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 14:38:07 -0000
Received: from [98.138.87.2] by tm2.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 14:38:07 -0000
Received: from [127.0.0.1] by omp1002.mail.ne1.yahoo.com with NNFMP; 04 May 2011 14:38:07 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 924937.45120.bm@omp1002.mail.ne1.yahoo.com
Received: (qmail 56811 invoked by uid 60001); 4 May 2011 14:38:07 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304519887; bh=2FE0N90zhZcZXtDwuB4+y7yVWTKQwO5GW381EOoIIvg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=1WxO2fD6pUDLFo0qPLlI60roexk5SXQhersUBCoOL+1eUWp0cZ3sXHRVZS860zaMxAZ+k8X66B88qAX7QttSBwgXq47ESyETN3sRvVgVN/FjnW0EXUnGBYfgfQ1JIaX39qsqiVhg0yCoYL8caFev//oH8jo2QSX1RfYjRuavxwc=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=1kGAnk/SJG6XlIeWX2d0brTLnGppOMdLqZCuqIHuu97KW+UzmgwMH4EH8Fd+abLOF41D07kiPpMsTGpXQbFWzoeNhOxZb4EZTOWkE+RGZmcKX0sP1hfElFjsiCqFOuxI5Lb8T252j2cbVr7e1TgSY2N7YfJFFOSGBOSyC4qqB7Y=;
Message-ID: <840801.55006.qm@web121705.mail.ne1.yahoo.com>
X-YMail-OSG: 2Eh.RZsVM1k0zhQC0w.JtMra1hYBWXIVxeq6K6uTII51eoe
 vAIVaHoJRte1ZY8jRg7XL9o4RW6XL6kpLUFpbrOI.ttNnfZ_M4xXLNPSPkHU
 Bqhe2n4DYf.9q9.0TwzSr3rKlQanlhSCACLU_vGr2zknur3QZ27mCGz6Xnqw
 dPOFfrs5aT_CpH54FjoiEsGCGFYFHefRyPSLO7BcCXM1UhFc4ENNfVNq9lj4
 ncDRh2.yk9Ut0OvOGImTpM2B_MLew0mydBD5zR.tEOHBFnFJh20TAjy1byoV
 6dNYLB4AqmueycaOp4E9837ZKr7VssxLqk3gK000Kgcq1FEOu7zakPfyL4R2
 6oyD7iYQEXiaWtkzBlYtCOv991kmqohFYsXWXCnqSpjabwaCIrCL6HQ--
Received: from [193.140.184.4] by web121705.mail.ne1.yahoo.com via HTTP; Wed, 04 May 2011 07:38:07 PDT
X-Mailer: YahooMailWebService/0.8.110.299900
References: <E594BA962D832C49A3CF858DAA3A696C1135A51D69@Exchange2007.mysigndomain.corp> <BANLkTimUvOsvov1aME5i-kaad1TGXTzvYQ@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51DDF@Exchange2007.mysigndomain.corp> <BANLkTik7mdNinZB016g25p2g74mmfKipUg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51DF7@Exchange2007.mysigndomain.corp>
Date: Wed, 4 May 2011 07:38:07 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Reply-To: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: AW: Higher scoring if term is at the beginning of a field/document
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51DF7@Exchange2007.mysigndomain.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii



Besides my "real index" (which is being analyzed through a ShingleAnalyzerWrapper) I implicitly/transparently build up a "search term index" which I populate with the terms (being shingles) of my "real index". The "search term index" is being used to provide search term suggestions when the user types in a search term. E.g.
if a user types:
"moo"
then I'd expect the following order of search term suggestions:
"moon"
"The moon..."
"This is a moon"


So are these lucene documents? Are you contructing shingles outside of the lucene and index them? And issuing a PrefixQuery moo*?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 14:43:20 2011
Return-Path: <java-user-return-49622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F4783C97
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 14:43:20 +0000 (UTC)
Received: (qmail 52482 invoked by uid 500); 4 May 2011 14:43:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52432 invoked by uid 500); 4 May 2011 14:43:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52424 invoked by uid 99); 4 May 2011 14:43:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 14:43:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johannes.goll@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 14:43:10 +0000
Received: by gya6 with SMTP id 6so578654gya.35
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 07:42:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=rVDkgc60hMQyxJCn6PlcWh3VYV1HtcPKDqrrb6VplGs=;
        b=afN8uul5Rl+BvF6BrFO8XjN5flhOyTs08YsP3PXi7kBQvLK1GE/luOl68F7vhFZnxv
         9fcAP6YJh1fqEFHPVtSBvCwmdco6gc2L54HoQ2EckFLKh6mjpNsi8PksoIuQdto6vvSr
         BvXGcYbgXlj0odVjSL5p7n8e6tpQVSafmaTKE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=OVqHeqZtZqkHV07zORIs7I1ACdmm+xmReLRYj+Yp4eq5sKUk8f1bPqtUq6E88hkJNw
         mrQHFqxiSZzgoWCaU8w6NEBq3uQZMnslLQPxo4OjpXz4hSM6iZtaeGB4wDHkijfZ0FVn
         9H6G6GoZEW9/PESXuhLtrYorQf2sn1SNLAJj0=
MIME-Version: 1.0
Received: by 10.236.79.194 with SMTP id i42mr1565537yhe.156.1304520168974;
 Wed, 04 May 2011 07:42:48 -0700 (PDT)
Received: by 10.147.99.3 with HTTP; Wed, 4 May 2011 07:42:48 -0700 (PDT)
Date: Wed, 4 May 2011 10:42:48 -0400
Message-ID: <BANLkTinacyEB3RkAZCPjdoBMcE4mg_6GZw@mail.gmail.com>
Subject: Solr/Lucene 3.1 | apache ab benchmark | org.mortbay.jetty.EofException
 | java.net.SocketException: Broken pipe
From: Johannes Goll <johannes.goll@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3005157e462ae104a274452d
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3005157e462ae104a274452d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am running ab, Apache's HTTP server benchmarking tool
to evaluate the query performance of a Solr/Lucene 3.1  instance.

The test index has 12 million documents. The search returns the first
10 rows of 8 stored fields that match a standard query (q=field:value).

The box has 256G RAM and 32 cores, the VM is run with -Xms512M -Xmx100G

Up to a ab concurrency level of 4 (-c4), everything works fine, above that
I am getting timeout exceptions from ab and org.mortbay.jetty.EofException
(Caused by: java.net.SocketException: Broken pipe) exceptions in the Solr
log file. I ran the same test on a smaller box using Solr/Lucene 1.4.1 with
a similar index (8 million docs) in the past and I got results up to a
concurrency level of 512.

Here are the details for the Solr/Lucene 3.1 run:

AB setting:

concurrency: 2
complete requests: 2000 [ab -n2000 -c2]
works fine

concurrency: 4
complete requests: 4000 [ab -n4000 -c4]
works fine

concurrency: 8
complete requests: 8000 [ab -n8000 -c8]
apr_poll: The timeout specified has expired (70007)

solr-log:

May 4, 2011 10:24:27 AM org.apache.solr.common.SolrException log
SEVERE: org.mortbay.jetty.EofException
        at org.mortbay.jetty.HttpGenerator.flush(HttpGenerator.java:791)
        at
org.mortbay.jetty.AbstractGenerator$Output.flush(AbstractGenerator.java:569)
        at
org.mortbay.jetty.HttpConnection$Output.flush(HttpConnection.java:1012)
        at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:278)
        at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:122)
        at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:212)
        at org.apache.solr.common.util.FastWriter.flush(FastWriter.java:115)
        at
org.apache.solr.servlet.SolrDispatchFilter.writeResponse(SolrDispatchFilter.java:344)
        at
org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:265)
        at
org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1212)
        at
org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:399)
        at
org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at
org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at
org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
        at
org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
        at
org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)
        at
org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at
org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at
org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at
org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:928)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:549)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at
org.mortbay.jetty.bio.SocketConnector$Connection.run(SocketConnector.java:228)
        at
org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:451)

Any explanations for this ? Do you recommend to switch to Tomcat instead of
JETTY ?

Thanks a lot,
Johannes

--20cf3005157e462ae104a274452d--

From java-user-return-49623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 16:33:53 2011
Return-Path: <java-user-return-49623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9D36C353C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 16:33:53 +0000 (UTC)
Received: (qmail 92652 invoked by uid 500); 4 May 2011 16:33:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92612 invoked by uid 500); 4 May 2011 16:33:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92604 invoked by uid 99); 4 May 2011 16:33:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 16:33:51 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 16:33:44 +0000
Received: from compute5.internal (compute5.nyi.mail.srv.osa [10.202.2.45])
	by gateway1.messagingengine.com (Postfix) with ESMTP id EAF5F209B1;
	Wed,  4 May 2011 12:33:23 -0400 (EDT)
Received: from frontend1.messagingengine.com ([10.202.2.160])
  by compute5.internal (MEProxy); Wed, 04 May 2011 12:33:23 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=KPCtwBGekRN1ZDM8LTpql4ortco=; b=VLxoQWKB4IQsQ3iQFIVuccgwr/il57FdXcIBECLEGovzJT/6UgPGdDE9D38JZ7HlR+agd9a6Tpo9HQRjqFyM/Z8+OTG0fsGxfI8MQXdiulTa/n+/VkekB0NE8TK2lTEsfynPr463YYik3fFqSpmyqvRmdvl1Ps4in75pZGk4az0=
X-Sasl-enc: wOp9KFG1xy6OeyBP9SoXXEx7gjXBevHhOB7lqja+mY8B 1304526803
Received: from [192.168.1.66] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 67973407802;
	Wed,  4 May 2011 12:33:23 -0400 (EDT)
Message-ID: <4DC17FD4.5010507@fastmail.fm>
Date: Wed, 04 May 2011 17:33:24 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Ahmet Arslan <iorixxx@yahoo.com>
CC: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Re: Anyway to not bother scoring less good matches ?
References: <4DBFEBCD.9090504@fastmail.fm> <89331.21012.qm@web121716.mail.ne1.yahoo.com> <4DC13DDD.6010905@fastmail.fm> <4DC147C1.7020206@fastmail.fm> <128705.69618.qm@web121707.mail.ne1.yahoo.com>
In-Reply-To: <128705.69618.qm@web121707.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 04/05/2011 15:02, Ahmet Arslan wrote:
>
>> Thanks for the hint, so this could be done by overriding getBooleanQuery() in QueryParser ?
>>
>
> I think something like this should do the trick. Without overriding anything.
>
>
> Query query= QueryParser.parse("User Entered String");
>
> if (query instanceof BooleanQuery)
> ((BooleanQuery)query).setMinimumNumberShouldMatch(3);
>
> You can steal code from solr too, ( e.g. how to calculate mm and optional clause count etc.)
>
>
Thanks again, now done that but still not having much effect on total 
ime, but I havent analysed the results much yet maybe I dont quite have 
the algoithm quite right.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 20:00:19 2011
Return-Path: <java-user-return-49624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 133503BB2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 20:00:19 +0000 (UTC)
Received: (qmail 19031 invoked by uid 500); 4 May 2011 20:00:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18992 invoked by uid 500); 4 May 2011 20:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18984 invoked by uid 99); 4 May 2011 20:00:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 20:00:16 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.51] (HELO nm12-vm0.bullet.mail.ne1.yahoo.com) (98.138.91.51)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 May 2011 20:00:10 +0000
Received: from [98.138.90.57] by nm12.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 19:59:49 -0000
Received: from [98.138.89.192] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 19:59:49 -0000
Received: from [127.0.0.1] by omp1050.mail.ne1.yahoo.com with NNFMP; 04 May 2011 19:59:49 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 791973.55509.bm@omp1050.mail.ne1.yahoo.com
Received: (qmail 68245 invoked by uid 60001); 4 May 2011 19:59:49 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304539189; bh=qY37+pqtyWS5wGsgYp1eRiWYj4X5HgHraTpfOechmFM=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=ESnPWCy+8+4/AoNG6h++PlshajLWoTK/YegS25Qv/xi2Ko6/tD2uKJPfJnN56lZUiwnM3eAKIxhSzpJLrWzAaxnB7x/Xy2VUou2qxw2NZQ1+J7FitlDYC8FO2J/QoEV0w2KZgmVJcrmlBZ5ygcpRe7G2CqeWRV2lLSN9I87jh10=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=sOe/jQkRdFoxwxX8rGrm98EAtdeiUweI6Vf7o1zVRaaRQNAatlsS5yLczGSZt9tRKXFHq4XtTvrpgBQXrxXmKchq2LXAeq3h7/C58rWK7D8SUGmTyl31qP+1blcUHYKvQE4+qYPVLXPzTYba85tuJaBuvlGRwS4GQ8UpjdDN2Tc=;
Message-ID: <365633.65667.qm@web130104.mail.mud.yahoo.com>
X-YMail-OSG: ENJ8b0sVM1k86dEN.TXQt77OXdsNN2kCW45zIffsg0fOtFT
 swB8b46GCx17R5U8f4rbKrXQcPLc_O3nnz603udN0G.zb1niX9eZ6a2TjKYB
 rLLVlN4KmAQqesRFdX6KSfaGuLHmFcnMFwNA7pAR36_rE8nCaV6.BeTWYwPG
 txMYpfm0a5NqLDkV0xXL7YOhWLvRIZCqKLAjQmtri2QcAkK7yLatd_nwteD7
 RQA61_kg0EIdU4LJYdrOmEdv8j1TCz9Sq5xn.ETpdxiYcn_7lKeevittD.Jo
 orB_wRx12HKWUvEtl_LfgWFSuRZqxxrJxICmYZ98Poy0rf52LTshbR2RhCpw
 81jOBK4GrM3kg0XF9UBWo7R0fFSF9pN_7QePIkrGGhNz3NjDUvFIMS.c-
Received: from [184.75.0.187] by web130104.mail.mud.yahoo.com via HTTP; Wed, 04 May 2011 12:59:49 PDT
X-Mailer: YahooMailRC/559 YahooMailWebService/0.8.110.299900
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp> <000001cc08bf$19583a50$4c08aef0$@thetaphi.de> <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp> <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp> <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp> <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp> <796945.6397.qm@web130103.mail.mud.yahoo.com> <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp> <733611.86868.qm@web130122.mail.mud.yahoo.com> <E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp> <855496.50707.qm@web130109.mail.mud.yahoo.com> <E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
Date: Wed, 4 May 2011 12:59:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: AW: AW: AW: AW: "fuzzy prefix" search
To: java-user@lucene.apache.org
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable

We do have EdgeNGramTokenizer if that is what you are after.=0ASee how Solr=
 uses it here:=0Ahttp://search-lucene.com/c/Solr:/src/java/org/apache/solr/=
analysis/EdgeNGramTokenizerFactory.java||EdgeNGramTokenizer=0A=0A=0AOtis=0A=
----=0ASematext :: http://sematext.com/ :: Solr - Lucene - Nutch=0ALucene e=
cosystem search :: http://search-lucene.com/=0A=0A=0A=0A----- Original Mess=
age ----=0A> From: Clemens Wyss <clemensdev@mysign.ch>=0A> To: "java-user@l=
ucene.apache.org" <java-user@lucene.apache.org>=0A> Sent: Wed, May 4, 2011 =
2:07:40 AM=0A> Subject: AW: AW: AW: AW: "fuzzy prefix" search=0A> =0A> I kn=
ow this is just an example.=0A> But even the WhitespaceAnalyzer takes the  =
words apart, which I don't want. I =0A>would like the phrases as they are (=
maximum 3  words, e.g. "Merlot del Ticino", =0A>...) to be n-gram-ed. I hen=
ce want to have the  n-grams.=0A> Mer=0A> Merl=0A> Merlo=0A> Merlot=0A> Mer=
lot=0A> Merlot  d=0A> ...=0A> =0A> Regards=0A> Clemens=0A> > -----Urspr=FCn=
gliche  Nachricht-----=0A> > Von: Otis Gospodnetic [mailto:otis_gospodnetic=
@yahoo.com]=0A> >  Gesendet: Dienstag, 3. Mai 2011 23:12=0A> > An: java-use=
r@lucene.apache.org=0A> >  Betreff: Re: AW: AW: AW: "fuzzy prefix" search=
=0A> >=0A> > Clemens - that's  just an example.  Stick another tokenizer in=
 there, like=0A> >  WhitespaceTokenizer in there, for example.=0A> >=0A> > =
Otis=0A> >  ----=0A> > Sematext :: http://sematext.com/ :: Solr - Lucene - =
Nutch Lucene ecosystem=0A> >  search :: http://search-lucene.com/=0A> >=0A>=
 >=0A> >=0A> > ----- Original  Message ----=0A> > > From: Clemens Wyss <cle=
mensdev@mysign.ch>=0A> > > To:  "java-user@lucene.apache.org"  <java-user@l=
ucene.apache.org>=0A> >  > Sent: Tue, May 3, 2011 4:31:14 PM=0A> > > Subjec=
t: AW: AW: AW: "fuzzy  prefix" search=0A> > >=0A> > > But doesn't the KeyWo=
rdTokenizer  extract single words out oft he=0A> > >stream? I would  like t=
o create  n-grams on the stream (field content) as =0Ait=0A> > is...=0A> > =
>=0A> >  > >  -----Urspr=FCngliche Nachricht-----=0A> > > > Von: Otis  Gosp=
odnetic [mailto:otis_gospodnetic@yahoo.com]=0A> >  > >  Gesendet: Dienstag,=
 3. Mai 2011 21:31=0A> > > > An: java-user@lucene.apache.org=0A> >  > >  Be=
treff: Re: AW: AW: "fuzzy prefix" search=0A> > >  >=0A> > > > Clemens,=0A> =
> > >=0A> > > > Something a  la:=0A> > > >=0A> > > > public TokenStream tok=
enStream  (String  fieldName, Reader r) {=0A> > > >   return nw  EdgeNGramT=
okenFilter(new  KeywordTokenizer(r),=0A> > > >  EdgeNGramTokenFilter.Side.F=
RONT, 1, 4); }=0A> > > >=0A> > >  >=0A> > > > Check out page 265 of Lucene =
in Action 2.=0A> > >  >=0A> > > >  Otis=0A> > > > ----=0A> > > >  Sematext =
:: http://sematext.com/ :: Solr - Lucene - Nutch Lucene=0A> > > >  ecosyste=
m search :: http://search-lucene.com/=0A> > > >=0A> > > >=0A> > >  >=0A> > =
> > ----- Original  Message ----=0A> > > > >  From: Clemens Wyss <clemensde=
v@mysign.ch>=0A> > >  > > To:  "java-user@lucene.apache.org"   <java-user@l=
ucene.apache.org>=0A> >  > >  > Sent: Tue, May 3, 2011 12:57:39 PM=0A> > > =
> >  Subject: AW: AW: "fuzzy  prefix" search=0A> > > > >=0A> > >  > > How d=
oes an simple Analyzer look that  just "n-grams" the   =0A>docs/fields.=0A>=
 > > > >=0A> > > > > class   SimpleNGramAnalyzer extends  Analyzer {  @Over=
ride=0A> > > >  > public TokenStream tokenStream ( String fieldName,   Read=
er reader  )=0A> > > > > {=0A> > > > >      EdgeNGramTokenFilter...  ???=0A=
> > > > > }=0A> > > >  > }=0A> > > >  >=0A> > > > > >  -----Urspr=FCngliche=
 Nachricht-----=0A> > > > > > Von:   Otis  Gospodnetic [mailto:otis_gospodn=
etic@yahoo.com]=0A> >  > >  > >  Gesendet: Dienstag, 3. Mai 2011 13:36=0A> =
>  > > > > An: java-user@lucene.apache.org=0A> >  > >  > >  Betreff: Re: AW=
: "fuzzy prefix" search=0A> >  > > >  >=0A> > > > > > Hi,=0A> > > > >  >=0A=
> > > > > > I  didn't  read this thread closely,  but just in case:=0A> > >=
 > > > * Is this  something   you can handle with synonyms?=0A> > > > > > *=
 If this is for   English and you are  trying to handle typos,=0A> > > > > =
>  there is a=0A> > >list=0A> > > >  >of=0A> > > >  > > common English miss=
pellings  out there that you  could use  for=0A> > > > > > this=0A> > > > p=
erhaps.=0A> > >  > > > * Have you  considered  n-gramming your tokens?   No=
t sure if=0A> > > > > > this would=0A> > > >   help,=0A> > > > > > didn't r=
ead  messages/examples closely  enough, but  you may want=0A> > > > > > to=
=0A> > > >  look at=0A> > > > > > this if  you haven't done  so  yet.=0A> >=
 > > > >=0A> > > > > > Otis=0A> > >  > > > ----=0A> > > >  > > Sematext :: =
http://sematext.com/ :: Solr  -  Lucene - Nutch=0A> > > > Lucene  ecosystem=
=0A> > >  > > > search :: http://search-lucene.com/=0A> > > > > >=0A> > > >=
  >  >=0A> > > > > >=0A> > > > > > -----  Original  Message  ----=0A> > > >=
 > > > From: Clemens  Wyss <clemensdev@mysign.ch>=0A> > >  > >  > > To:  "j=
ava-user@lucene.apache.org"    <java-=0A> > user@lucene.apache.org>=0A> > >=
  >  > >  > Sent: Tue, May 3, 2011 5:25:30 AM=0A> > >  > > > >  Subject: AW=
: "fuzzy prefix"  search=0A> > >  > > > >=0A> > > > >  > >  >PrefixQuery=0A=
> > > > > > > I'd like the   combination  of prefix and fuzzy ;-) because=
=0A> > > > > >  > people=0A> > >could=0A> > > > > >  >also   type "menlo" o=
r "m=E4rl" and in any of these cases I'd=0A> > > > > >  like  to=0A> > >get=
=0A> > > > > >  >a hit on  Merlot (for suggesting  Merlot)=0A> > > > > > >=
=0A> >  > > > > > >   -----Urspr=FCngliche   Nachricht-----=0A> > > > > > >=
 > Von: Ian  Lea   [mailto:ian.lea@gmail.com]=0A> > > > >  > >  >  Gesendet=
:  Dienstag, 3. Mai 2011 11:22   > An:=0A> > > > > > > java-user@lucene.apa=
che.org=0A> >  > >  > >  > >  Betreff: Re: "fuzzy prefix"  search=0A> > > >=
 >  > > >=0A> > > > >  >  > > I'd assumed that  FuzzyQuery  wouldn't ignore=
  case but I=0A> > > > > > could be=0A> > > > wrong.=0A> >  > > >  > > >  W=
hat would be the edit  distance  between  "mer"  and =0A>"merlot"?=0A> > > =
> Would=0A> > >  > > > > > it be less that 1.5  which I   reckon would  be =
the value of=0A> > > > > > > >  length(term)*0.5 as  detailed in  the  java=
docs?  Seems=0A> > > > > >  > > unlikely,=0A> > >but=0A> > > > > > > > I  d=
on't really  know anything about   the Levenshtein (edit=0A> >  distance)=
=0A> > > > > > algorithm as  used by   FuzzyQuery.=0A> > > > > > > >  Would=
n't a PrefixQuery  be  more  appropriate here?=0A> > > > > > >  >=0A> > > >=
 > > >  >=0A> > > > > >  > >   --=0A> > > > > > > >  Ian.=0A> >  > > > > > =
>=0A> > > > > > > > On Tue,  May  3,  2011 at 10:10 AM, Clemens Wyss=0A> > =
> > > >  > > <clemensdev@mysign.ch>=0A> > >  > >  > >  >  wrote:=0A> > > > =
> >  > > > Unfortunately  lowercasing doesn't  help.=0A> > >  > > > > > > A=
lso,   doesn't the FuzzyQuery ignore   casing?=0A> > > > > > > >  >=0A> > >=
 > >  > > > >>   -----Urspr=FCngliche  Nachricht-----=0A> >  > > > > > > >>=
 Von: Ian Lea   [mailto:ian.lea@gmail.com]=0A> > > > >  > >  >  >>  Gesende=
t: Dienstag, 3. Mai 2011  11:06=0A> > > > >  > > > >>  An: java-user@lucene=
.apache.org=0A> >  > >  > >  > >  >> Betreff: Re: "fuzzy  prefix"  search=
=0A> > > > > > > >   >>=0A> > > > > > > >  >>  Mer !=3D  mer.  The latter w=
ill be  what is indexed=0A> > > > > >  > > because=0A> > > > > > > > >>  St=
andardAnalyzer calls   LowerCaseFilter.=0A> > > > > > >  > >>=0A> > > > > >=
 >  > >>    --=0A> > > > > > > > >> Ian.=0A> > > >  >  > > > >>=0A> > > > >=
 > > >   >>=0A> > > > >  > > > >> On  Tue, May  3, 2011 at 9:56 AM,  Clemen=
s  Wyss=0A> > > > > > >  > <clemensdev@mysign.ch>=0A> > >  > >  > >  > >>  =
wrote:=0A> > > >  > > > > >>  > Sorry for coming back  to my issue.  Can an=
ybody=0A> > > > > > > > >> explain why=0A> >  >my=0A> > > > > > > > "simple=
"=0A> > > > >  >  > >  >> unit test below fails? Any   hint/help  appreciat=
ed.=0A> > > >  > > > >  >> >=0A> > > > > > > > >>  >   Directory  directory=
 =3D new RAMDirectory();=0A> > > > > > >  > >> IndexWriter=0A> > > >  > > >=
 >   >> > indexWriter =3D  new IndexWriter(  directory, new=0A> >  > > > > =
>  > >> >   StandardAnalyzer(=0A> > > > > > > >    Version.LUCENE_31=0A> > =
> >  > > > > >> >  ),   IndexWriter.MaxFieldLength.UNLIMITED  ); Document=
=0A> > >  > document=0A> > > >  > >  =3D=0A> > > > >  > > > new=0A> > > > >=
 > > >  >> >  Document();   document.add( new Field( "test",  "Merlot",=0A>=
 > >  > > > > > >> >  Field.Store.YES,   Field.Index.ANALYZED ) );=0A> > > =
> > > > > >>  >   indexWriter.addDocument(=0A> > > > > > > >   >> >  docume=
nt );  IndexReader indexReader =3D=0A> > >  > > > > > indexWriter.getReader=
();=0A> > > > >  >  > > >> >  IndexSearcher searcher =3D new   IndexSearche=
r(=0A> > > > > > indexReader );=0A> > >  >  > > > > >> > Query q =3D new Fu=
zzyQuery(    new Term(  "test", "Mer" ),=0A> > 0.5f,=0A> > >0,=0A> > > >  >=
 > > > >> > 10 ); //  or  Query q =3D  new  FuzzyQuery( new Term(=0A> > > >=
 > > > > >> >  "test",=0A> > "Mer"=0A> > > > >  > > >  >>  > ), 0.5f); TopD=
ocs  result =3D  searcher.search( q, 10=0A> > >  > > );=0A> > > > > >  > > =
>> >   Assert.assertEquals( 1,  result.totalHits  );=0A> > > > >  > >  > >>=
 >=0A> > > > > > > >  >> > -    Clemens=0A> > > > > > > >  >> >=0A> > > > >=
 > > >  >>  >>  -----Urspr=FCngliche  Nachricht-----=0A> > > >  >  > > > >>=
 >> Von:  Clemens Wyss [mailto:clemensdev@mysign.ch]=0A> > > >  > >  > >  >=
>  >> Gesendet: Montag, 2. Mai  2011  23:01=0A> > > > > > > >  >> >>  An: j=
ava-user@lucene.apache.org=0A> >  > >  > >  > >  >> >> Betreff: AW:  "fuzzy=
 prefix"  search=0A> > > > > >  > >  >>  >>=0A> > > > >  > > > >>  >> Is it=
 the  combination of FuzzyQuery and  Term   which=0A> > > > > makes=0A> > >=
the=0A> > > > > >  > >  >> >>  search to go for "word   boundaries"?=0A> > =
> > > > > >   >>  >>=0A> > > > > > > > >> >> >     -----Urspr=FCngliche Nac=
hricht-----=0A> > > > > > > >  >> >>  > Von:  Clemens  Wyss [mailto:clemens=
dev@mysign.ch]=0A> > > >  > >  > >  >>  >> > Gesendet: Montag,  2. Mai 2011=
  14:13=0A> > > > > > >  > >>  >> >  An: java-user@lucene.apache.org=0A> > =
 > >  > >  > >  >> >> > Betreff:  AW: "fuzzy  prefix"  search=0A> > > > > >=
 > >  >>  >>  >=0A> > > > > > > >  >>  >> > I tried this too,  but unfortun=
ately  I  only get=0A> > > > > > > > >> hits  when=0A> >  > > > > > >  >> >=
> > the search term is a  least   as long as the word to  =0A>be=0A> > >loo=
ked=0A> > >  > up.=0A> > > > > > > > >> >>    >=0A> > > > > > > >  >> >> > =
 E.g.:=0A> > > > >  > > >  >> >> >  ...=0A> > > > > > > >  >>  >>  >  Direc=
tory directory =3D new RAMDirectory();  =0A>IndexWriter=0A> >  > > > > > > =
  >> >> >  indexWriter =3D  new IndexWriter( directory,  >>  >>=0A> > > > >=
  > > > > IndexManager.getIndexingAnalyzer(=0A> > > >  >  > >  > >>  >> LOC=
ALE_DE ),=0A> >  > > > > >  > >> >>  >                 IndexWriter.MaxField=
Length.UNLIMITED  =0A>);=0A> > > > > > > >  >> >>   >=0A> > > > > > > >  >>=
 >>  >  Document document =3D new  Document();=0A> > document.add(=0A> > > =
 > new=0A> > > >  > > > > Field(=0A> > > >  > > > >  >> >>  > "test", "Merl=
ot",=0A> >  > > > > > > >>   >>  >              Field.Store.YES,   Field.In=
dex.ANALYZED =0A>)  );=0A> > > > > > > >  >>  >>   indexWriter.addDocument(=
=0A> > > > > > > > >>   >> >  document  );=0A> > > > > > > >  >>  >> >=0A> =
> > > > > > > >>  >>  >   IndexReader indexReader =3D  indexWriter.getReade=
r();=0A> > > > > > >  >   >> >> > IndexSearcher=0A> > > > > > >   >  >> >> =
 > searcher =3D new IndexSearcher(   indexReader );  >>=0A> > > > > > > >> =
  >=0A> > > > > > > >  >> >> > Query q  =3D new FuzzyQuery(   new Term( "te=
st", "Mer"  =0A),=0A> >  >0.6f,=0A> > > > > > > > >> >> > 1  );   TopDocs  =
result =3D searcher.search( q, 10 );=0A> > > >  > > > >  >>  >> >  Assert.a=
ssertEquals(  >>  >>  > 1,=0A> > >  > > > > > >>  >> result.totalHits ); ..=
.=0A> >  > > > > >  >   >> >> >=0A> > >  > > > > > >> >> >  >   -----Urspr=
=FCngliche  Nachricht-----=0A> > > > > > >  >  >> >> >  > Von: Uwe Schindle=
r [mailto:uwe@thetaphi.de]  >>=0A> > >  > > > > > >>  > > Gesendet: Montag,=
 2. Mai  2011  13:50  >> >> >  > An:=0A> > > >  > > > > java-user@lucene.ap=
ache.org=0A> >  > >  > >  > >  >> >> > >  Betreff: RE: "fuzzy  prefix"  sea=
rch=0A> > > > > > >  > >>  >> >  >=0A> > > > > > >  >  >> >> > > Hi,=0A> > =
> >  > >  > > >>  >> >  >=0A> > > > >  >  > > >> >> > > You can pass an int=
eger    to  FuzzyQuery which =0A>defines=0A> > the=0A> > > > > > >  > >> >>=
 >  >  number of  characters that are  seen as prefix.=0A> > > > > > > > >>=
 >> > So  all=0A> > > >  > > > >  >> >> >  > terms must match=0A> > > >  > =
> > > >>    >> > > this prefix and the rest  of each term is matched  =0A>u=
sing=0A> > > > >fuzzy.=0A> > > > > > > >   >> >> > >=0A> > > > > > > > >>  =
 >>  > >  Uwe=0A> > > > > > > >  >> >> >   >=0A> > > > > > > >  >> >> > >  =
-----=0A> > > >  > > >  >  >> >> > > Uwe Schindler=0A> > > >  >  > > > >>  =
 >> > > H.-H.-Meier-Allee  63, D-28213  Bremen=0A> > > > > > > >  >> http:/=
/www.thetaphi.de=0A> >  > >  > > > >  >> >> > >   eMail: uwe@thetaphi.de=0A=
> > > > > >  > >  >>  >> >  >=0A> > > > >  > > > >>  >> > > >  -----Origina=
l  Message-----=0A> > > > > > >  >  >> >>  > >  > From: Clemens Wyss=0A> > =
> > > > >  [mailto:clemensdev@mysign.ch]=0A> > > >  > >  > >  >>  >> > > > =
Sent:  Monday, May 02,  2011 1:47 PM   >> > > > =0A>To:=0A> >  > > > > > > =
 >> java-user@lucene.apache.org=0A> >  > >  > >  > >  >> >> > >  > Subject:=
  "fuzzy prefix"  search  >> >> >  > >=0A> > > > >  > > > >>  >>  > > > I'd=
  like to search  fuzzily but not on a full   =0A>term.=0A> > > > > > > > >=
>  >> >   > > E.g.=0A> > > > > > >  > >>   >> > > > I have a text "Merlot  =
del  Ticino"=0A> >  > >  > > > > >> >> > > > I'd  like=0A> > > > > >  >  > =
>>  >>  > > > "mer", "merr", "melo",  ... to  match.=0A> > >  > > > > > >> =
 >> >  > >=0A> >  > > > > >  > >> >> > > > If  I  use  FuzzyQuery only  "me=
rlot,  "merlott" =0A>hit.=0A> >  >What=0A> > > >  > > > > >> >>   >  > >  Q=
uery-combination should I use?=0A> > > >  > > > > >>   >> > >  >=0A> > >  >=
 > > > > >> >> >  > >   Thx=0A> > > > > > > > >> >> >   >  > Clemens=0A> > =
> > > >  > > >> >> >  >  >=0A> > > > > > > > >>   >>  > > >=0A> > > >  > > =
> > >> >>  > >  >=0A> > > > > >  > > >>  >> > > >=0A> >  >-----------------=
---------------------------------------=0A> > > >  > > >  >  >> >> > > > --=
--=0A> >  > > > > > >  >>  >>  > > >  ---=0A> > > > > > > >  >> >> > >  >  =
---=0A> > > > > > > >   >> >>  > > > --=0A> > > > > > >  > >>   >> > > > - =
 To unsubscribe, e-mail:=0A> > > > >  >   > > >> >> > > > java-user-unsubsc=
ribe@lucene.apache.org=0A> >  > >  > >  > >  >> >> > >  > For additional  c=
ommands,  e-mail:=0A> > > > > >  > >  >> >> >  > > java-user-help@lucene.ap=
ache.org     >> >> > >=0A> > > > > > > >  >> >>  >  >=0A> > > > > > >  >  >=
> >> >  >=0A> > > > > > >  >  >> >> > >=0A> > > > >  > >  > >> >> > >=0A> >=
  >----------------------------------------------------------=0A> > > >  > =
>  > >  >> >> > > ----=0A> > >  > > > > >  >>  >> >  >  ---=0A> > > > > > >=
 > >>  >> > >  ---=0A> > > > > > > >  >>  >>   > > - To unsubscribe, e-mail=
:=0A> > > > > > > >   >>  >> > > java-user-unsubscribe@lucene.apache.org=0A=
> >  > >  > >  > >  >> >> > > For  additional  commands,  e-mail:=0A> > > >=
 > > > >  >>  >> >  > java-user-help@lucene.apache.org=0A> >  > >  > >  > >=
  >> >> >=0A> >  > > > > >  > >> >>  >=0A> > >  > > > > > >>  >>  >=0A> > >=
 >  > > > > >>  >>=0A> >  >------------------------------------------------=
--------------=0A> > >  > >  >  > > >> >> --=0A> > > > >  > > >   >> >> >  =
---=0A> > > > >  > > > >> >>  > -- To unsubscribe,    e-mail:=0A> > > > > >=
 > > >>  >> > java-user-unsubscribe@lucene.apache.org=0A> >  > >  > >  > > =
 >> >> > For  additional commands,  e-mail:=0A> > > > > >  > >  >>  >> > ja=
va-user-help@lucene.apache.org=0A> >  > >  > >  > >  >> >>=0A> > >  > > > >=
 >  >> >>=0A> > > > >  >  > > >> >>=0A> > > >  > > >  > >> >>=0A> >  >-----=
---------------------------------------------------------=0A> > >  > > >  >=
 >  >> >> ----=0A> > > >  > > > >   >> >> --- To  unsubscribe,  e-mail:=0A>=
 > > > > > > >  >> >> java-user-unsubscribe@lucene.apache.org=0A> >  > >  >=
 >  > >  >> >> For  additional commands,  e-mail:=0A> > > > > > >  > java-u=
ser-help@lucene.apache.org     >> >=0A> > > > > > > > >>  >=0A> > > > > > >=
  > >>  >=0A> >  > > > > > > >> >=0A> >  >---------------------------------=
------------------------------=0A> > >  > >  > >  > >> > ----=0A> > > > >  =
> > >   >> > -- To unsubscribe,  e-mail:=0A> >  > > > > > > java-user-unsub=
scribe@lucene.apache.org=0A> >  > >  > >  > >  >> > For additional  command=
s,  e-mail:=0A> > > > > > >  > java-user-help@lucene.apache.org     >> >=0A=
> > > > > > > > >>  >=0A> > > > > > >  >  >>=0A> > >  > > > > > >>=0A> > > =
> > > >  >  >>=0A> >  >----------------------------------------------------=
-------------=0A> >  > > >  > >  > >> ----=0A> > > > >  > > >  >> To  unsub=
scribe, e-mail: java-user-=0A> >  > > unsubscribe@lucene.apache.org=0A> >  =
> >  > >  > >  >> For additional  commands,  e-mail:=0A> > > > > > > > java=
-user-help@lucene.apache.org     >=0A> > > > > > > > >=0A> > > > >  > > > >=
=0A> > > >  > > > > >=0A> >  >---------------------------------------------=
---------------------=0A> >  > > >  > >  > > ---=0A> > > > > >  > >  > To  =
unsubscribe, e-mail:=0A> > > > > >  > > java-user-unsubscribe@lucene.apache=
.org=0A> >  > >  > >  > >  > For additional commands,  e-mail:  java-user-=
=0A> > > > help@lucene.apache.org=0A> > >  > >  >  > > >=0A> > > > > > > > =
 >=0A> > > > > >  > >=0A> > > > > >  >  >=0A> > > > > > > >=0A> >  >-------=
-------------------------------------------------------------=0A> >  > >  >=
 >  > > - To  unsubscribe,  e-mail:=0A> > > > java-user-unsubscribe@lucene.=
apache.org=0A> >  > >  > >  > >  For additional commands,  e-mail:=0A> > > =
> java-user-help@lucene.apache.org   > >  >=0A> > > > > > >=0A> > > > >  > =
>=0A> >  ------------------------------------------------------------------=
---=0A> >  > >  > >  > To  unsubscribe, e-mail:=0A> > >  > java-user-unsubs=
cribe@lucene.apache.org=0A> >  > >  > >  > For  additional commands,  e-mai=
l:=0A> > > > java-user-help@lucene.apache.org   > >  >=0A> > > > > > >=0A> =
> > > >  >=0A> > > > >  >    =0A>------------------------------------------=
---------------------------=0A> >  > >  > > To  unsubscribe, e-mail:=0A> > =
> > java-user-unsubscribe@lucene.apache.org=0A> >  > >  > >  For additional=
 commands, e-mail:=0A> > >  > java-user-help@lucene.apache.org   >=0A> > > =
> >=0A> > > > >=0A> > > > >  ----------------------------------------------=
--------------------=0A> > >  > > ---=0A> > > >  > To  unsubscribe, e-mail:=
 java-user-unsubscribe@lucene.apache.org=0A> >  > >  > For  additional comm=
ands, e-mail:=0A> > > > java-user-help@lucene.apache.org   >=0A> > > > >=0A=
> > > >=0A> > > >=0A> > >  >  ---------------------------------------------=
-----------------------=0A> >  > > - To  unsubscribe, e-mail: java-user-uns=
ubscribe@lucene.apache.org=0A> >  > >  For additional commands, e-mail: jav=
a-user-help@lucene.apache.org=0A> >  >=0A> > >=0A> > >  -------------------=
--------------------------------------------------=0A> >  > To  unsubscribe=
, e-mail: java-user-unsubscribe@lucene.apache.org=0A> >  > For  additional =
commands, e-mail: java-user-help@lucene.apache.org=0A> >  >=0A> > >=0A> >=
=0A> >  -------------------------------------------------------------------=
--=0A> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
=0A> >  For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> =0A> =0A> ------------------------------------------------------------=
---------=0A> To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org=0A> For  additional commands, e-mail: java-user-help@lucene.apache.org=
=0A> =0A> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 23:24:53 2011
Return-Path: <java-user-return-49625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D3ED831E1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 23:24:53 +0000 (UTC)
Received: (qmail 98491 invoked by uid 500); 4 May 2011 23:24:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98441 invoked by uid 500); 4 May 2011 23:24:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98431 invoked by uid 99); 4 May 2011 23:24:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 23:24:51 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.157] (HELO nm27-vm3.bullet.mail.ne1.yahoo.com) (98.138.91.157)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 04 May 2011 23:24:42 +0000
Received: from [98.138.90.57] by nm27.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 23:24:21 -0000
Received: from [98.138.89.162] by tm10.bullet.mail.ne1.yahoo.com with NNFMP; 04 May 2011 23:24:21 -0000
Received: from [127.0.0.1] by omp1018.mail.ne1.yahoo.com with NNFMP; 04 May 2011 23:24:21 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 941148.53843.bm@omp1018.mail.ne1.yahoo.com
Received: (qmail 67202 invoked by uid 60001); 4 May 2011 23:24:21 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304551461; bh=gzBgUheOsMm3FYlWljArOUIqn5ONSfgsJLSn3nMzq5g=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=MEB7hh1ScAmnWPaaqChgR9TFvL7HtxqW2pHUfm0ZGKIYYEKijGjzFLRB7KcCaWkIJSFlNY/02iczC/TEKFY148nxJwq5Ir0OXuljAgbCDShXOWLh/iH3HSWHHt0bn4Swgm3y26vF6OdV0Ydz6S9SZzRNzFtBz4Gv9mZRgS0Kpzw=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=3q0T9+oT1noBDD8iou5rgMSsk8TcSgJjRNfNHeBg2aiFAoeeprOeNM1DJxtExkknv1fP4On1xO+ATrFk+UP9ymULRIl2dKeTVLhJpyVJvA0Cv4xRwtTiB2kqJ8jrE4AuEPknzRxrhtggKF27e/62r362roRqsMd/85idU14nsnc=;
Message-ID: <747252.20092.qm@web121720.mail.ne1.yahoo.com>
X-YMail-OSG: ZNPJsGEVM1nwo2GsUL09DstcuA2ePykHD57V2B.Q9cAbXyz
 yI.b3XLEO1dbs7jeDomQVRUs.QM3vmo89eDwam6KLertTTAde8YDJt61h5Bi
 .fM2.aQowM6aUvfqYeEqkSlgye.v99T8agtG7V9IHFFYy450y3CjBnLYl2WF
 QUpgGdLJqK5MF8OC_5Kzy5lKiTdAd33cAJJXUOoi5JMQbdRjSbBZ8jDiT6kO
 RbhFw0bJUx3U4gUW9X4QI_f5MsYsTyIbdLFVU5nsHV45_f4Ye_h4WSa3HIFM
 2pPtW7vAhLv44BFCtOJB5hFba0Ds9uDinxuLx5YWIf_SPNJmJFOBrIDxl7ij
 cL8Vo249dL1LuuGqQkFTIEzMB6u4LYkHnFRtBqnD8eoC8qfn.8K7ktBuV67.
 UYlrhDNYVwbOiesbfwuUeIy1yTxIdPWMgZZN2Ha7vNEHgMwuQZxCHzjDdoEw
 AGjFuF8omyvE9OqRPaQeuOPU4JIhPQjAo5VN91KiAfEcCnqle96MstSHSVDM
 -
Received: from [85.98.169.239] by web121720.mail.ne1.yahoo.com via HTTP; Wed, 04 May 2011 16:24:21 PDT
X-Mailer: YahooMailClassic/12.0.2 YahooMailWebService/0.8.110.299900
Date: Wed, 4 May 2011 16:24:21 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Anyway to not bother scoring less good matches ?
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
In-Reply-To: <4DC17FD4.5010507@fastmail.fm>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> Thanks again, now done that but still not having much
> effect on total 
> ime, 

So your main concern is enhancing the running time? , not to  decrease the number of returned results.
Additionally http://wiki.apache.org/lucene-java/ImproveSearchingSpeed 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May  4 23:24:56 2011
Return-Path: <java-user-return-49626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8BF6931F3
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  4 May 2011 23:24:56 +0000 (UTC)
Received: (qmail 346 invoked by uid 500); 4 May 2011 23:24:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 297 invoked by uid 500); 4 May 2011 23:24:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 267 invoked by uid 99); 4 May 2011 23:24:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 23:24:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 04 May 2011 23:24:44 +0000
Received: by pwi16 with SMTP id 16so1079529pwi.35
        for <java-user@lucene.apache.org>; Wed, 04 May 2011 16:24:23 -0700 (PDT)
Received: by 10.68.34.201 with SMTP id b9mr2207045pbj.422.1304551462997;
        Wed, 04 May 2011 16:24:22 -0700 (PDT)
Received: from bester.local ([65.78.136.75])
        by mx.google.com with ESMTPS id j2sm1020849pbo.79.2011.05.04.16.24.21
        (version=SSLv3 cipher=OTHER);
        Wed, 04 May 2011 16:24:21 -0700 (PDT)
Date: Wed, 4 May 2011 16:24:19 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: Lucene Users <java-user@lucene.apache.org>
Subject: Re: Anyway to not bother scoring less good matches ?
In-Reply-To: <4DC147C1.7020206@fastmail.fm>
Message-ID: <alpine.DEB.2.00.1105041617010.16732@bester>
References: <4DBFEBCD.9090504@fastmail.fm> <89331.21012.qm@web121716.mail.ne1.yahoo.com> <4DC13DDD.6010905@fastmail.fm> <4DC147C1.7020206@fastmail.fm>
User-Agent: Alpine 2.00 (DEB 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Well I did extend QuerParser, and the method is being called but rather
: disappointingly it had no noticeablke effect on how long queries took. I
: really thought by reducing the number of matches the corresponding scoring
: phase would be quicker.

"matching" and "scoring" go hand in hand ... the Searcher iterates over 
all docs to determine if they match the Query (i'm being grossly simple, 
in truth many docs can be skipped wholesale during this iteration because 
of conjunctions) and when a matching document is found, it's score is 
computed to determine if it's high enough to be included in the results 
(ie: is it's score higher then the lowest scoring document already 
collected) 

The botomline: lucene doesn't know that something is a "less good match" 
until it scores it ... the score is what determines how good it is.


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 06:27:31 2011
Return-Path: <java-user-return-49627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 626A1223D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 06:27:31 +0000 (UTC)
Received: (qmail 34735 invoked by uid 500); 5 May 2011 06:27:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34564 invoked by uid 500); 5 May 2011 06:27:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34556 invoked by uid 99); 5 May 2011 06:27:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 06:27:23 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 06:27:17 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id F1138C2184
	for <java-user@lucene.apache.org>; Thu,  5 May 2011 08:26:56 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id u-NDYS-X930S for <java-user@lucene.apache.org>;
	Thu,  5 May 2011 08:26:56 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 55D61C2117
	for <java-user@lucene.apache.org>; Thu,  5 May 2011 08:26:56 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 5 May 2011 08:26:56 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 5 May 2011 08:26:54 +0200
Subject: AW: AW: AW: AW: AW: "fuzzy prefix" search
Thread-Topic: AW: AW: AW: AW: "fuzzy prefix" search
Thread-Index: AcwKlebM7J3ifl+3SrigRCcDPTX1dwAVlwMw
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51E6E@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
 <000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
 <E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
 <BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
 <BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
 <796945.6397.qm@web130103.mail.mud.yahoo.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
 <733611.86868.qm@web130122.mail.mud.yahoo.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
 <855496.50707.qm@web130109.mail.mud.yahoo.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
 <365633.65667.qm@web130104.mail.mud.yahoo.com>
In-Reply-To: <365633.65667.qm@web130104.mail.mud.yahoo.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

What I am looking for is the autosuggestion implemented here (@solr)

http://search-lucene.com/m/0QBv41ssGlh/suggestion&subj=3DAuto+Suggest

How "easily" can I switch from plain Lucene to Solr?
Or (even better), can I just make use of "solr-suggestion"?

Clemens

> -----Urspr=FCngliche Nachricht-----
> Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Gesendet: Mittwoch, 4. Mai 2011 22:00
> An: java-user@lucene.apache.org
> Betreff: Re: AW: AW: AW: AW: "fuzzy prefix" search
>
> We do have EdgeNGramTokenizer if that is what you are after.
> See how Solr uses it here:
> http://search-
> lucene.com/c/Solr:/src/java/org/apache/solr/analysis/EdgeNGramTokenizer
> Factory.java||EdgeNGramTokenizer
>
>
> Otis
> ----
> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosyste=
m
> search :: http://search-lucene.com/
>
>
>
> ----- Original Message ----
> > From: Clemens Wyss <clemensdev@mysign.ch>
> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> > Sent: Wed, May 4, 2011 2:07:40 AM
> > Subject: AW: AW: AW: AW: "fuzzy prefix" search
> >
> > I know this is just an example.
> > But even the WhitespaceAnalyzer takes the  words apart, which I don't
> >want. I would like the phrases as they are (maximum 3  words, e.g.
> >"Merlot del Ticino",
> >...) to be n-gram-ed. I hence want to have the  n-grams.
> > Mer
> > Merl
> > Merlo
> > Merlot
> > Merlot
> > Merlot  d
> > ...
> >
> > Regards
> > Clemens
> > > -----Urspr=FCngliche  Nachricht-----
> > > Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  Gesendet: Dienstag, 3. Mai 2011 23:12
> > > An: java-user@lucene.apache.org
> > >  Betreff: Re: AW: AW: AW: "fuzzy prefix" search
> > >
> > > Clemens - that's  just an example.  Stick another tokenizer in
> > > there, like  WhitespaceTokenizer in there, for example.
> > >
> > > Otis
> > >  ----
> > > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene
> > > ecosystem  search :: http://search-lucene.com/
> > >
> > >
> > >
> > > ----- Original  Message ----
> > > > From: Clemens Wyss <clemensdev@mysign.ch>
> > > > To:  "java-user@lucene.apache.org"  <java-user@lucene.apache.org>
> > >  > Sent: Tue, May 3, 2011 4:31:14 PM
> > > > Subject: AW: AW: AW: "fuzzy  prefix" search
> > > >
> > > > But doesn't the KeyWordTokenizer  extract single words out oft he
> > > >stream? I would  like to create  n-grams on the stream (field
> > > >content) as
> it
> > > is...
> > > >
> > >  > >  -----Urspr=FCngliche Nachricht-----
> > > > > Von: Otis  Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  > >  Gesendet: Dienstag, 3. Mai 2011 21:31
> > > > > An: java-user@lucene.apache.org
> > >  > >  Betreff: Re: AW: AW: "fuzzy prefix" search
> > > >  >
> > > > > Clemens,
> > > > >
> > > > > Something a  la:
> > > > >
> > > > > public TokenStream tokenStream  (String  fieldName, Reader r) {
> > > > >   return nw  EdgeNGramTokenFilter(new  KeywordTokenizer(r),
> > > > > EdgeNGramTokenFilter.Side.FRONT, 1, 4); }
> > > > >
> > > >  >
> > > > > Check out page 265 of Lucene in Action 2.
> > > >  >
> > > > >  Otis
> > > > > ----
> > > > >  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> > > > > Lucene  ecosystem search :: http://search-lucene.com/
> > > > >
> > > > >
> > > >  >
> > > > > ----- Original  Message ----
> > > > > >  From: Clemens Wyss <clemensdev@mysign.ch>
> > > >  > > To:  "java-user@lucene.apache.org"   <java-
> user@lucene.apache.org>
> > >  > >  > Sent: Tue, May 3, 2011 12:57:39 PM
> > > > > >  Subject: AW: AW: "fuzzy  prefix" search
> > > > > >
> > > >  > > How does an simple Analyzer look that  just "n-grams" the
> >docs/fields.
> > > > > >
> > > > > > class   SimpleNGramAnalyzer extends  Analyzer {  @Override
> > > > >  > public TokenStream tokenStream ( String fieldName,   Reader
> reader  )
> > > > > > {
> > > > > >      EdgeNGramTokenFilter...  ???
> > > > > > }
> > > > >  > }
> > > > >  >
> > > > > > >  -----Urspr=FCngliche Nachricht-----
> > > > > > > Von:   Otis  Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> > >  > >  > >  Gesendet: Dienstag, 3. Mai 2011 13:36  > > > > An:
> > > java-user@lucene.apache.org  > >  > >  Betreff: Re: AW: "fuzzy
> > > prefix" search  > > >  >
> > > > > > > Hi,
> > > > > >  >
> > > > > > > I  didn't  read this thread closely,  but just in case:
> > > > > > > * Is this  something   you can handle with synonyms?
> > > > > > > * If this is for   English and you are  trying to handle typo=
s,
> > > > > > >  there is a
> > > >list
> > > > >  >of
> > > > >  > > common English misspellings  out there that you  could use
> > > > > for
> > > > > > > this
> > > > > perhaps.
> > > >  > > > * Have you  considered  n-gramming your tokens?   Not sure i=
f
> > > > > > > this would
> > > > >   help,
> > > > > > > didn't read  messages/examples closely  enough, but  you may
> > > > > > > want to
> > > > >  look at
> > > > > > > this if  you haven't done  so  yet.
> > > > > > >
> > > > > > > Otis
> > > >  > > > ----
> > > > >  > > Sematext :: http://sematext.com/ :: Solr  -  Lucene - Nutch
> > > > > Lucene  ecosystem
> > > >  > > > search :: http://search-lucene.com/
> > > > > > >
> > > > >  >  >
> > > > > > >
> > > > > > > -----  Original  Message  ----
> > > > > > > > From: Clemens  Wyss <clemensdev@mysign.ch>
> > > >  > >  > > To:  "java-user@lucene.apache.org"    <java-
> > > user@lucene.apache.org>
> > > >  >  > >  > Sent: Tue, May 3, 2011 5:25:30 AM  > > > >  Subject:
> > > > AW: "fuzzy prefix"  search  > > > >
> > > > > >  > >  >PrefixQuery
> > > > > > > > I'd like the   combination  of prefix and fuzzy ;-) because
> > > > > > >  > people
> > > >could
> > > > > > >  >also   type "menlo" or "m=E4rl" and in any of these cases I=
'd
> > > > > > >  like  to
> > > >get
> > > > > > >  >a hit on  Merlot (for suggesting  Merlot)
> > > > > > > >
> > >  > > > > > >   -----Urspr=FCngliche   Nachricht-----
> > > > > > > > > Von: Ian  Lea   [mailto:ian.lea@gmail.com]
> > > > > >  > >  >  Gesendet:  Dienstag, 3. Mai 2011 11:22   > An:
> > > > > > > > java-user@lucene.apache.org
> > >  > >  > >  > >  Betreff: Re: "fuzzy prefix"  search
> > > > > >  > > >
> > > > > >  >  > > I'd assumed that  FuzzyQuery  wouldn't ignore  case
> > > > > > but I
> > > > > > > could be
> > > > > wrong.
> > >  > > >  > > >  What would be the edit  distance  between  "mer"  and
> >"merlot"?
> > > > > Would
> > > >  > > > > > it be less that 1.5  which I   reckon would  be the valu=
e of
> > > > > > > > >  length(term)*0.5 as  detailed in  the  javadocs?  Seems
> > > > > > >  > > unlikely,
> > > >but
> > > > > > > > > I  don't really  know anything about   the Levenshtein (e=
dit
> > >  distance)
> > > > > > > algorithm as  used by   FuzzyQuery.
> > > > > > > > >  Wouldn't a PrefixQuery  be  more  appropriate here?
> > > > > > > >  >
> > > > > > > >  >
> > > > > > >  > >   --
> > > > > > > > >  Ian.
> > >  > > > > > >
> > > > > > > > > On Tue,  May  3,  2011 at 10:10 AM, Clemens Wyss
> > > > > > >  > > <clemensdev@mysign.ch>
> > > >  > >  > >  >  wrote:
> > > > > > >  > > > Unfortunately  lowercasing doesn't  help.
> > > >  > > > > > > Also,   doesn't the FuzzyQuery ignore   casing?
> > > > > > > > >  >
> > > > > >  > > > >>   -----Urspr=FCngliche  Nachricht-----
> > >  > > > > > > >> Von: Ian Lea   [mailto:ian.lea@gmail.com]
> > > > > >  > >  >  >>  Gesendet: Dienstag, 3. Mai 2011  11:06  > > > >>
> > > > > > An: java-user@lucene.apache.org
> > >  > >  > >  > >  >> Betreff: Re: "fuzzy  prefix"  search
> > > > > > > > >   >>
> > > > > > > > >  >>  Mer !=3D  mer.  The latter will be  what is indexed
> > > > > > >  > > because
> > > > > > > > > >>  StandardAnalyzer calls   LowerCaseFilter.
> > > > > > > >  > >>
> > > > > > > >  > >>    --
> > > > > > > > > >> Ian.
> > > > >  >  > > > >>
> > > > > > > > >   >>
> > > > > >  > > > >> On  Tue, May  3, 2011 at 9:56 AM,  Clemens  Wyss
> > > > > > > >  > <clemensdev@mysign.ch>
> > > >  > >  > >  > >>  wrote:
> > > > >  > > > > >>  > Sorry for coming back  to my issue.  Can anybody
> > > > > > > > > >> explain why
> > >  >my
> > > > > > > > > "simple"
> > > > > >  >  > >  >> unit test below fails? Any   hint/help  appreciated=
.
> > > > >  > > > >  >> >
> > > > > > > > > >>  >   Directory  directory =3D new RAMDirectory();
> > > > > > > >  > >> IndexWriter
> > > > >  > > > >   >> > indexWriter =3D  new IndexWriter(  directory, new
> > >  > > > > >  > >> >   StandardAnalyzer(
> > > > > > > > >    Version.LUCENE_31
> > > > >  > > > > >> >  ),   IndexWriter.MaxFieldLength.UNLIMITED  );
> Document
> > > >  > document
> > > > >  > >  =3D
> > > > > >  > > > new
> > > > > > > > >  >> >  Document();   document.add( new Field( "test",
> "Merlot",
> > > >  > > > > > >> >  Field.Store.YES,   Field.Index.ANALYZED ) );
> > > > > > > > > >>  >   indexWriter.addDocument(
> > > > > > > > >   >> >  document );  IndexReader indexReader =3D
> > > >  > > > > > indexWriter.getReader();
> > > > > >  >  > > >> >  IndexSearcher searcher =3D new   IndexSearcher(
> > > > > > > indexReader );
> > > >  >  > > > > >> > Query q =3D new FuzzyQuery(    new Term(  "test", =
"Mer"
> ),
> > > 0.5f,
> > > >0,
> > > > >  > > > > >> > 10 ); //  or  Query q =3D  new  FuzzyQuery( new
> > > > > Term(
> > > > > > > > > >> >  "test",
> > > "Mer"
> > > > > >  > > >  >>  > ), 0.5f); TopDocs  result =3D  searcher.search( q=
,
> > > > > > 10
> > > >  > > );
> > > > > > >  > > >> >   Assert.assertEquals( 1,  result.totalHits  );
> > > > > >  > >  > >> >
> > > > > > > > >  >> > -    Clemens
> > > > > > > > >  >> >
> > > > > > > > >  >>  >>  -----Urspr=FCngliche  Nachricht-----
> > > > >  >  > > > >> >> Von:  Clemens Wyss [mailto:clemensdev@mysign.ch]
> > > > > > >  > >  >>  >> Gesendet: Montag, 2. Mai  2011  23:01
> > > > > > > > >  >> >>  An: java-user@lucene.apache.org
> > >  > >  > >  > >  >> >> Betreff: AW:  "fuzzy prefix"  search
> > > > > > >  > >  >>  >>
> > > > > >  > > > >>  >> Is it the  combination of FuzzyQuery and  Term   =
which
> > > > > > makes
> > > >the
> > > > > > >  > >  >> >>  search to go for "word   boundaries"?
> > > > > > > > >   >>  >>
> > > > > > > > > >> >> >     -----Urspr=FCngliche Nachricht-----
> > > > > > > > >  >> >>  > Von:  Clemens  Wyss
> > > > > > > > > [mailto:clemensdev@mysign.ch]
> > > > >  > >  > >  >>  >> > Gesendet: Montag,  2. Mai 2011  14:13
> > > > > > > >  > >>  >> >  An: java-user@lucene.apache.org
> > >  > >  > >  > >  >> >> > Betreff:  AW: "fuzzy  prefix"  search
> > > > > > > > >  >>  >>  >
> > > > > > > > >  >>  >> > I tried this too,  but unfortunately  I  only
> > > > > > > > > get
> > > > > > > > > >> hits  when
> > >  > > > > > >  >> >> > the search term is a  least   as long as the wo=
rd to
> >be
> > > >looked
> > > >  > up.
> > > > > > > > > >> >>    >
> > > > > > > > >  >> >> >  E.g.:
> > > > > >  > > >  >> >> >  ...
> > > > > > > > >  >>  >>  >  Directory directory =3D new RAMDirectory();
> >IndexWriter
> > >  > > > > > >   >> >> >  indexWriter =3D  new IndexWriter( directory, =
 >>  >>
> > > > > >  > > > > IndexManager.getIndexingAnalyzer(
> > > > >  >  > >  > >>  >> LOCALE_DE ),
> > >  > > > > >  > >> >>  >                 IndexWriter.MaxFieldLength.UNL=
IMITED
> >);
> > > > > > > > >  >> >>   >
> > > > > > > > >  >> >>  >  Document document =3D new  Document();
> > > document.add(
> > > >  > new
> > > > >  > > > > Field(
> > > > >  > > > >  >> >>  > "test", "Merlot",
> > >  > > > > > > >>   >>  >              Field.Store.YES,   Field.Index.A=
NALYZED
> >)  );
> > > > > > > > >  >>  >>   indexWriter.addDocument(
> > > > > > > > > >>   >> >  document  );
> > > > > > > > >  >>  >> >
> > > > > > > > > >>  >>  >   IndexReader indexReader =3D
> indexWriter.getReader();
> > > > > > > >  >   >> >> > IndexSearcher
> > > > > > > >   >  >> >>  > searcher =3D new IndexSearcher(   indexReader=
 );  >>
> > > > > > > > >>   >
> > > > > > > > >  >> >> > Query q  =3D new FuzzyQuery(   new Term( "test",
> "Mer"
> ),
> > >  >0.6f,
> > > > > > > > > >> >> > 1  );   TopDocs  result =3D searcher.search( q, 1=
0 );
> > > > >  > > > >  >>  >> >  Assert.assertEquals(  >>  >>  > 1,
> > > >  > > > > > >>  >> result.totalHits ); ...
> > >  > > > > >  >   >> >> >
> > > >  > > > > > >> >> >  >   -----Urspr=FCngliche  Nachricht-----
> > > > > > > >  >  >> >> >  > Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> > > > > > > > >>
> > > >  > > > > > >>  > > Gesendet: Montag, 2. Mai  2011  13:50  >> >> >  =
> An:
> > > > >  > > > > java-user@lucene.apache.org
> > >  > >  > >  > >  >> >> > >  Betreff: RE: "fuzzy  prefix"  search
> > > > > > > >  > >>  >> >  >
> > > > > > > >  >  >> >> > > Hi,
> > > > >  > >  > > >>  >> >  >
> > > > > >  >  > > >> >> > > You can pass an integer    to  FuzzyQuery whi=
ch
> >defines
> > > the
> > > > > > > >  > >> >> >  >  number of  characters that are  seen as pref=
ix.
> > > > > > > > > >> >> > So  all
> > > > >  > > > >  >> >> >  > terms must match
> > > > >  > > > > >>    >> > > this prefix and the rest  of each term is m=
atched
> >using
> > > > > >fuzzy.
> > > > > > > > >   >> >> > >
> > > > > > > > > >>   >>  > >  Uwe
> > > > > > > > >  >> >> >   >
> > > > > > > > >  >> >> > >  -----
> > > > >  > > >  >  >> >> > > Uwe Schindler
> > > > >  >  > > > >>   >> > > H.-H.-Meier-Allee  63, D-28213  Bremen
> > > > > > > > >  >> http://www.thetaphi.de
> > >  > >  > > > >  >> >> > >   eMail: uwe@thetaphi.de
> > > > > > >  > >  >>  >> >  >
> > > > > >  > > > >>  >> > > >  -----Original  Message-----
> > > > > > > >  >  >> >>  > >  > From: Clemens Wyss
> > > > > > > > [mailto:clemensdev@mysign.ch]
> > > > >  > >  > >  >>  >> > > > Sent:  Monday, May 02,  2011 1:47 PM   >>=
 > > >
> >To:
> > >  > > > > > >  >> java-user@lucene.apache.org  > >  > >  > >  >> >> >
> > > >  > Subject:  "fuzzy prefix"  search  >> >> >  > >
> > > > > >  > > > >>  >>  > > > I'd  like to search  fuzzily but not on a =
full
> >term.
> > > > > > > > > >>  >> >   > > E.g.
> > > > > > > >  > >>   >> > > > I have a text "Merlot  del  Ticino"
> > >  > >  > > > > >> >> > > > I'd  like
> > > > > > >  >  > >>  >>  > > > "mer", "merr", "melo",  ... to  match.
> > > >  > > > > > >>  >> >  > >
> > >  > > > > >  > >> >> > > > If  I  use  FuzzyQuery only  "merlot,  "mer=
lott"
> >hit.
> > >  >What
> > > > >  > > > > >> >>   >  > >  Query-combination should I use?
> > > > >  > > > > >>   >> > >  >
> > > >  > > > > > >> >> >  > >   Thx
> > > > > > > > > >> >> >   >  > Clemens
> > > > > > >  > > >> >> >  >  >
> > > > > > > > > >>   >>  > > >
> > > > >  > > > > >> >>  > >  >
> > > > > > >  > > >>  >> > > >
> > >  >--------------------------------------------------------
> > > > >  > > >  >  >> >> > > > ----
> > >  > > > > > >  >>  >>  > > >  ---
> > > > > > > > >  >> >> > >  >  ---
> > > > > > > > >   >> >>  > > > --
> > > > > > > >  > >>   >> > > > -  To unsubscribe, e-mail:
> > > > > >  >   > > >> >> > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > >  >> >> > >  > For additional  commands,  e-mail:
> > > > > > >  > >  >> >> >  > > java-user-help@lucene.apache.org     >> >>=
 > >
> > > > > > > > >  >> >>  >  >
> > > > > > > >  >  >> >> >  >
> > > > > > > >  >  >> >> > >
> > > > > >  > >  > >> >> > >
> > >  >----------------------------------------------------------
> > > > >  > >  > >  >> >> > > ----
> > > >  > > > > >  >>  >> >  >  ---
> > > > > > > > > >>  >> > >  ---
> > > > > > > > >  >>  >>   > > - To unsubscribe, e-mail:
> > > > > > > > >   >>  >> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > >  >> >> > > For  additional  commands,  e-mail:
> > > > > > > > >  >>  >> >  > java-user-help@lucene.apache.org
> > >  > >  > >  > >  >> >> >
> > >  > > > > >  > >> >>  >
> > > >  > > > > > >>  >>  >
> > > > >  > > > > >>  >>
> > >  >--------------------------------------------------------------
> > > >  > >  >  > > >> >> --
> > > > > >  > > >   >> >> >  ---
> > > > > >  > > > >> >>  > -- To unsubscribe,    e-mail:
> > > > > > > > > >>  >> > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > >  >> >> > For  additional commands,  e-mail:
> > > > > > >  > >  >>  >> > java-user-help@lucene.apache.org
> > >  > >  > >  > >  >> >>
> > > >  > > > > >  >> >>
> > > > > >  >  > > >> >>
> > > > >  > > >  > >> >>
> > >  >--------------------------------------------------------------
> > > >  > > >  > >  >> >> ----
> > > > >  > > > >   >> >> --- To  unsubscribe,  e-mail:
> > > > > > > > >  >> >> java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > >  >> >> For  additional commands,  e-mail:
> > > > > > > >  > java-user-help@lucene.apache.org     >> >
> > > > > > > > > >>  >
> > > > > > > >  > >>  >
> > >  > > > > > > >> >
> > >  >---------------------------------------------------------------
> > > >  > >  > >  > >> > ----
> > > > > >  > > >   >> > -- To unsubscribe,  e-mail:
> > >  > > > > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > >  >> > For additional  commands,  e-mail:
> > > > > > > >  > java-user-help@lucene.apache.org     >> >
> > > > > > > > > >>  >
> > > > > > > >  >  >>
> > > >  > > > > > >>
> > > > > > > >  >  >>
> > >  >-----------------------------------------------------------------
> > >  > > >  > >  > >> ----
> > > > > >  > > >  >> To  unsubscribe, e-mail: java-user-
> > >  > > unsubscribe@lucene.apache.org
> > >  > >  > >  > >  >> For additional  commands,  e-mail:
> > > > > > > > > java-user-help@lucene.apache.org     >
> > > > > > > > > >
> > > > > >  > > > >
> > > > >  > > > > >
> > >  >------------------------------------------------------------------
> > >  > > >  > >  > > ---
> > > > > > >  > >  > To  unsubscribe, e-mail:
> > > > > > >  > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > >  > For additional commands,  e-mail:  java-user-
> > > > > help@lucene.apache.org
> > > >  > >  >  > > >
> > > > > > > > >  >
> > > > > > >  > >
> > > > > > >  >  >
> > > > > > > > >
> > >
> > > >-------------------------------------------------------------------
> > > -  > >  > >  > > - To  unsubscribe,  e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > >  For additional commands,  e-mail:
> > > > > java-user-help@lucene.apache.org   > >  >
> > > > > > > >
> > > > > >  > >
> > >
> > > --------------------------------------------------------------------
> > > -  > >  > >  > To  unsubscribe, e-mail:
> > > >  > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  > For  additional commands,  e-mail:
> > > > > java-user-help@lucene.apache.org   > >  >
> > > > > > > >
> > > > > >  >
> > > > > >  >
> >---------------------------------------------------------------------
> > >  > >  > > To  unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > >  For additional commands, e-mail:
> > > >  > java-user-help@lucene.apache.org   >
> > > > > >
> > > > > >
> > > > > >
> > > > > > --------------------------------------------------------------
> > > > > > ----
> > > >  > > ---
> > > > >  > To  unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > >  > >  > For  additional commands, e-mail:
> > > > > java-user-help@lucene.apache.org   >
> > > > > >
> > > > >
> > > > >
> > > >  >
> > > > ------------------------------------------------------------------
> > > > --
> > >  > > - To  unsubscribe, e-mail:
> > > java-user-unsubscribe@lucene.apache.org
> > >  > >  For additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >
> > > >
> > > >
> > > > ------------------------------------------------------------------
> > > > ---
> > >  > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  > For  additional commands, e-mail:
> > > java-user-help@lucene.apache.org  >
> > > >
> > >
> > >
> > > --------------------------------------------------------------------
> > > - To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > >  For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 07:18:21 2011
Return-Path: <java-user-return-49628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9E3302916
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 07:18:21 +0000 (UTC)
Received: (qmail 93232 invoked by uid 500); 5 May 2011 07:18:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93089 invoked by uid 500); 5 May 2011 07:18:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92703 invoked by uid 99); 5 May 2011 07:18:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 07:18:07 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 07:18:00 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 8A474209A9;
	Thu,  5 May 2011 03:17:39 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Thu, 05 May 2011 03:17:39 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=9PBPPuzCNxrjUjvPU2UrkDGYRJs=; b=Q7sHifOY+IOZntHGarPgyEpVUt4P2ur6mQkBtB7uS7srHoRGsf8sI9IKtexI68swV1Gp5KVTY2KPVqyRmcgoifZ5YZAoQfCNFEnc17EyYe0VmhMfjUySjzquKwJR2kGBUfJZ9sSP6o61HL2RzxBObJzZORlBaB/d8qOzPYfytxI=
X-Sasl-enc: nuVJYk692nYthoIhNTD/qYHod7L0jeJ1iLq8VUPulhul 1304579859
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id F40EF4429D2;
	Thu,  5 May 2011 03:17:38 -0400 (EDT)
Message-ID: <4DC24F12.30903@fastmail.fm>
Date: Thu, 05 May 2011 08:17:38 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Chris Hostetter <hossman_lucene@fucit.org>
Subject: Re: Anyway to not bother scoring less good matches ?
References: <4DBFEBCD.9090504@fastmail.fm> <89331.21012.qm@web121716.mail.ne1.yahoo.com> <4DC13DDD.6010905@fastmail.fm> <4DC147C1.7020206@fastmail.fm> <alpine.DEB.2.00.1105041617010.16732@bester>
In-Reply-To: <alpine.DEB.2.00.1105041617010.16732@bester>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On 05/05/2011 00:24, Chris Hostetter wrote:
> : Well I did extend QuerParser, and the method is being called but rather
> : disappointingly it had no noticeablke effect on how long queries took. I
> : really thought by reducing the number of matches the corresponding scoring
> : phase would be quicker.
>
> "matching" and "scoring" go hand in hand ... the Searcher iterates over
> all docs to determine if they match the Query (i'm being grossly simple,
> in truth many docs can be skipped wholesale during this iteration because
> of conjunctions) and when a matching document is found, it's score is
> computed to determine if it's high enough to be included in the results
> (ie: is it's score higher then the lowest scoring document already
> collected)
>
> The botomline: lucene doesn't know that something is a "less good match"
> until it scores it ... the score is what determines how good it is.
>
>
> -Hoss
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

But doesnt setting setMinimumNumberShouldMatch(3) cause the search to decide that a document that only matches two terms does not match the query in the first place, therefore not need scoring ?

Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 07:21:13 2011
Return-Path: <java-user-return-49629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3CBF2210B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 07:21:13 +0000 (UTC)
Received: (qmail 98715 invoked by uid 500); 5 May 2011 07:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98680 invoked by uid 500); 5 May 2011 07:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98672 invoked by uid 99); 5 May 2011 07:21:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 07:21:08 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 07:21:02 +0000
Received: from compute2.internal (compute2.nyi.mail.srv.osa [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 06F5C20B5B;
	Thu,  5 May 2011 03:20:42 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Thu, 05 May 2011 03:20:42 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=1JVUxkg6oD6mO7ebArslUhsuI0g=; b=TXGObQ8ujQk6pjBf6hJOVRvb844CaOUYXHC6jsjAkq351PFPWRnmpL6YcRc8Zcw16/RJb67Mho2lzpJETOIvjFLcMAL0q4imQhtYBu3ojwhWvlCoiilpldL7S9K25xS3p9k3tq0YsxeDSv492iGXNHLN8BkDzcEodqD9tDXVrrY=
X-Sasl-enc: l+M24g00BEeoQuuQiwlRIzLO9RyBEZWoZDgu7CFrX9Gh 1304580041
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 76DD44468B8;
	Thu,  5 May 2011 03:20:41 -0400 (EDT)
Message-ID: <4DC24FC9.1080109@fastmail.fm>
Date: Thu, 05 May 2011 08:20:41 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Ahmet Arslan <iorixxx@yahoo.com>
CC: java-user@lucene.apache.org
Subject: Re: Anyway to not bother scoring less good matches ?
References: <747252.20092.qm@web121720.mail.ne1.yahoo.com>
In-Reply-To: <747252.20092.qm@web121720.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 05/05/2011 00:24, Ahmet Arslan wrote:
>> Thanks again, now done that but still not having much
>> effect on total
>> ime,
> So your main concern is enhancing the running time? , not to  decrease the number of returned results.
> Additionally http://wiki.apache.org/lucene-java/ImproveSearchingSpeed
>
Yes correct, but I have looked and the list of optimizations before. 
What was clear from profiling was that it wasnt the searching part that 
was slow (a query run on the same index with only a few matching docs 
ran super fast) the slowness only occurs when there are loads of 
matching docs, and spends most of its time in scorer that is why I was 
trying to remove the poor matches.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 07:27:33 2011
Return-Path: <java-user-return-49630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 66AE12219
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 07:27:33 +0000 (UTC)
Received: (qmail 3989 invoked by uid 500); 5 May 2011 07:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3788 invoked by uid 500); 5 May 2011 07:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3780 invoked by uid 99); 5 May 2011 07:27:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 07:27:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 07:27:21 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-15; format=flowed
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LKP00F00OOZMI00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Thu, 05 May 2011 09:26:59 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LKP00481OOZT6C0@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Thu, 05 May 2011 09:26:59 +0200 (CEST)
Date: Thu, 05 May 2011 09:26:58 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: QueryValidator
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id:
 <17626_1304580419_ZZh0q19yfveoH.00_4DC25142.6090603@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.5.5.71817, pmx10
X-Connecting-IP: 129.70.11.68
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.14) Gecko/20110221
 SUSE/3.1.8 Thunderbird/3.1.8

Dear list,

I need a QueryValidator and don't mind writing one but don't want
to reinvent the wheel in case there is already something.

Is this the right list for talking about a QueryValidator or
should it belong to SOLR?

What do I mean with a QueryValidator?
I think about something like validating the query before or after parsing it.
Currently invalid queries [e.g. text:(:foo AND bar) ] throw exceptions
which pop up to the top. Not only that they show up in the logs
(which is good) they also give unuseful result page to jetty (which is bad).
And they also waste time for searching what can't be searched.

What should the QueryValidator do?
- check the query against the searchable fields of the schema (validate it)
- give options of fallback strategies
   -- let it through as raw
   -- remove specific chars (e.g. all ":" which have not a valid search field before)
   -- ...
- in case of an invalid query don't try to start a search but give a clean no-hit-page
   with a status and the cause

Actually it must be located somewhere around the parser.

What do think of this?

Regards,
Bernd

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 10:14:24 2011
Return-Path: <java-user-return-49631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7653C23D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 10:14:24 +0000 (UTC)
Received: (qmail 86352 invoked by uid 500); 5 May 2011 10:14:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86314 invoked by uid 500); 5 May 2011 10:14:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86306 invoked by uid 99); 5 May 2011 10:14:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 10:14:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.138.91.88] (HELO nm12-vm2.bullet.mail.ne1.yahoo.com) (98.138.91.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 05 May 2011 10:14:14 +0000
Received: from [98.138.90.55] by nm12.bullet.mail.ne1.yahoo.com with NNFMP; 05 May 2011 10:13:53 -0000
Received: from [98.138.87.6] by tm8.bullet.mail.ne1.yahoo.com with NNFMP; 05 May 2011 10:13:53 -0000
Received: from [127.0.0.1] by omp1006.mail.ne1.yahoo.com with NNFMP; 05 May 2011 10:13:53 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 507498.71350.bm@omp1006.mail.ne1.yahoo.com
Received: (qmail 55267 invoked by uid 60001); 5 May 2011 10:13:53 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1304590433; bh=5vDtc/vnyG73fO+MrmdFYCH/lQpfW1V7GXPfckcWmnU=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=ZyinK5/8onFp0bpNpVtcddUOa3XmdPcL5KOmifTQ26ol3/wQyc0a+oElV6Q+M+fYqo2YJQMOmkJYg1MTGufYFuDoh0dcDLuAVy00j/T4k3r7VZYB131womDbRkqg0tMgVcQb2ocQP0BEfDleeFAV+ue0ToWJ+64pNvhM1iXPQ10=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=cycScbe8qeBVJPtxYbhFweiGaX3Gr0XjaCK8/aTOeZBCV+SbjXuk15/v5U4sLFIil1WojmNAQhgt5omazJCaGaqp6wZnYkxgGp2TR+Shmn5RTPSC+FKljlGGC4TWqfZwzHm9tMNwCMGep3CSdWvMDRI5VL+HI+QCyOSjLSRluuc=;
Message-ID: <402946.35256.qm@web121706.mail.ne1.yahoo.com>
X-YMail-OSG: b8lEQKMVM1k1WtDZAGorpFb8yy5wU1Ww4j7pj.3N4CrDgMK
 ll_iGFXcdsQiHn8JGPP4.YzRX4kUsrF4v1IT8a7Vc6i3v_xM65rXXwinPmRj
 VR0cUb1Hn7K3NaDkYrUNzu_RtIQEvUWUZoHLKo_EYvORfaxmwe1ZKixgyXvL
 vWZpbozO0zUJvp2Sv7CuuZqE3Emmo0uZr3ngYRB5hBgaexDBkoSxc88Jo34I
 V3j0EZNctVof9wl8vnE4k3_u.woid0X5w9NWh27XnPoFc_Mm.MJrayVXD7JT
 BzDZaWqzhkw3lJVdNPxIio1C9n1oR9_mvCwzd5brCKpnQPoyCAfPx4qkBaGw
 5h16GLQnqahvqJRLjYl4R3APVY8pFZXdEurUviA7TcU6pB_Jn_erdWRcL.LY
 mrxGPnjma4nJ9XO4fVq4HAPpHy20CsUK0B2Uk9S8TzOyLt9BBQu74QF9NY2A
 lEpjCWkLwpu0BkvbNuEOya0aF7wh7bR70D.YylxSi1U7Ko15Qej3Np.tlNXo
 Aw.bjj0tm_LIoxspWqBaI0hk0hSIseiPqBLNIOOF4vlYxOHR_HLWgHUC9WMp
 nLX0TCyU-
Received: from [193.140.184.4] by web121706.mail.ne1.yahoo.com via HTTP; Thu, 05 May 2011 03:13:53 PDT
X-Mailer: YahooMailClassic/12.0.2 YahooMailWebService/0.8.110.299900
Date: Thu, 5 May 2011 03:13:53 -0700 (PDT)
From: Ahmet Arslan <iorixxx@yahoo.com>
Subject: Re: Anyway to not bother scoring less good matches ?
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
In-Reply-To: <4DC24FC9.1080109@fastmail.fm>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

> Yes correct, but I have looked and the list of
> optimizations before. What was clear from profiling was that
> it wasnt the searching part that was slow (a query run on
> the same index with only a few matching docs ran super fast)
> the slowness only occurs when there are loads of matching
> docs, and spends most of its time in scorer that is why I
> was trying to remove the poor matches.

Okey all clear. Can you give us some example query strings where there are loads of matching?

Do you use stop word filter? Could it be case described as 

"As you approach the upper limits of a single machine,
extremely frequent terms (called stop words) can become very
expensive in the wrong query. If part of a top level BooleanQuery, a
SHOULD clause that appears in every document will cause a match and
score for every document in your index." 

http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Scaling-Lucene-and-Solr

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 10:32:11 2011
Return-Path: <java-user-return-49632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B2972A60
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 10:32:11 +0000 (UTC)
Received: (qmail 21313 invoked by uid 500); 5 May 2011 10:32:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21271 invoked by uid 500); 5 May 2011 10:32:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21263 invoked by uid 99); 5 May 2011 10:32:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 10:32:09 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 10:32:03 +0000
Received: from compute3.internal (compute3.nyi.mail.srv.osa [10.202.2.43])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 2ED8020686;
	Thu,  5 May 2011 06:31:42 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute3.internal (MEProxy); Thu, 05 May 2011 06:31:42 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=QkigQeim9zD0/dATEJBR+DYCsGc=; b=EpSyi7Hu5hYz/oMk7rG/DXRGaWhCx83V14LhlIqdV/aLjVMoGML6FnwF18akrhk30cFtTiDba4AeZ7VHKGSuC5s+YW5UqjKUVkZ0Y8cx3RDNsNFmfcvksKu0QLQ+RU5G2UN0I9ydUq6zbIR/7YP+ejTg9qr+3ARBU8CO1jtGOwo=
X-Sasl-enc: 8lvQcIWvX8WTAT7o55eFlCdeA01h8k9tMP6Wl6Z2JzUm 1304591501
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 0C65A4472C9;
	Thu,  5 May 2011 06:31:40 -0400 (EDT)
Message-ID: <4DC27C8C.4010709@fastmail.fm>
Date: Thu, 05 May 2011 11:31:40 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Ahmet Arslan <iorixxx@yahoo.com>
CC: java-user@lucene.apache.org
Subject: Re: Anyway to not bother scoring less good matches ?
References: <402946.35256.qm@web121706.mail.ne1.yahoo.com>
In-Reply-To: <402946.35256.qm@web121706.mail.ne1.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 05/05/2011 11:13, Ahmet Arslan wrote:
>> Yes correct, but I have looked and the list of
>> optimizations before. What was clear from profiling was that
>> it wasnt the searching part that was slow (a query run on
>> the same index with only a few matching docs ran super fast)
>> the slowness only occurs when there are loads of matching
>> docs, and spends most of its time in scorer that is why I
>> was trying to remove the poor matches.
> Okey all clear. Can you give us some example query strings where there are loads of matching?
>
> Do you use stop word filter? Could it be case described as
>
> "As you approach the upper limits of a single machine,
> extremely frequent terms (called stop words) can become very
> expensive in the wrong query. If part of a top level BooleanQuery, a
> SHOULD clause that appears in every document will cause a match and
> score for every document in your index."
>
> http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Scaling-Lucene-and-Solr
>
We used to use the default stop word list but have no stop words because 
Lucene is used to match very short fields  relating to Musicdata such as 
artist or album name, therefore the default stop words really need to be 
included to get good matches, for example how would you match the artist 
'The The' otherwise, so use of a stop word word list is not an option.

If people construct good queries thee is no problem, but the trouble is 
that many users just OR everything they are looking for because they 
don't want a good match rejected because just one term fails, but the 
problem is there are a number of very popular terms, for example the 
following query:

tnum:(6) qdur:(189) artist:(tama) track:(ibata) tracks:(10) release:(the 
global rhythm september 2002)

will match any song that is on an album with 10 tracks, any song which 
is trackno 6 on an album, and any release containg the word 'the' , when 
really what they are looking for is the song 'ibata' by artist 'tama',

This matches over a million documents (songs) , but doesn't match any 
well, because the song 'ibata' by 'tama' isnt actually in the index !

So I dont think the query is very good but I cannot force users to 
submit better queries, but I want to protect the server by reducing the 
time these kind of query take (upto 1 second as opposed to the more 
usual 100 milliseconds) and I hope that forcing x number of terms to 
match would do that.

Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 11:00:40 2011
Return-Path: <java-user-return-49633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F0F472498
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 11:00:40 +0000 (UTC)
Received: (qmail 64009 invoked by uid 500); 5 May 2011 11:00:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63973 invoked by uid 500); 5 May 2011 11:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63965 invoked by uid 99); 5 May 2011 11:00:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 11:00:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 11:00:31 +0000
Received: by iwr19 with SMTP id 19so2645636iwr.35
        for <java-user@lucene.apache.org>; Thu, 05 May 2011 04:00:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=7rfwCHdVEdsTqW5yCMb9+2i0+vBbVap8C5U4agFqWww=;
        b=R0jNDJifyEH7CQM39iI7a9++gqKIcmQYf2fB1RbGsL5TQ5nfU2zICY103XRuqs3Z7d
         9QnilkLZ/ze1ZaUJVYyD3eUxpsVTXNau6XBzazQG8LVFB+uA9rXBm1YchXqjmLFHZAt4
         Dr2e40WNPTYGQSCD932Z6SimGvC6g7JTgAlsM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=RjjOjVFWj2zVrxZejt1TlVVfoR+X2sXwrdww3s7cpTJi/9aUse/Tlv4+YZRsVtqzi+
         Lj1CarnKBQ648tdfS63inVPEc8hHKNL0rNl/OXCYvY/erCt4U/9mxiPjp/DAOjGpqrLd
         Vo+1MWHVqNI8L7Yq0pGIV/Mvcj80F4xEfZl3A=
Received: by 10.231.142.103 with SMTP id p39mr1107490ibu.178.1304593210072;
 Thu, 05 May 2011 04:00:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.206.147 with HTTP; Thu, 5 May 2011 03:59:49 -0700 (PDT)
In-Reply-To: <4DC27C8C.4010709@fastmail.fm>
References: <402946.35256.qm@web121706.mail.ne1.yahoo.com> <4DC27C8C.4010709@fastmail.fm>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 5 May 2011 11:59:49 +0100
Message-ID: <BANLkTi=mmLgx=6vE1LCmG3d_varm0R4Ucw@mail.gmail.com>
Subject: Re: Anyway to not bother scoring less good matches ?
To: java-user@lucene.apache.org, paul_t100@fastmail.fm
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

See http://www.hathitrust.org/blogs/large-scale-search/slow-queries-and-com=
mon-words-part-1
for an excellent article and solution to the problem with common
words.

You could also consider using, and caching and reusing, filters for
the tnum and tracks fields.


--
Ian.


On Thu, May 5, 2011 at 11:31 AM, Paul Taylor <paul_t100@fastmail.fm> wrote:
> On 05/05/2011 11:13, Ahmet Arslan wrote:
>>>
>>> Yes correct, but I have looked and the list of
>>> optimizations before. What was clear from profiling was that
>>> it wasnt the searching part that was slow (a query run on
>>> the same index with only a few matching docs ran super fast)
>>> the slowness only occurs when there are loads of matching
>>> docs, and spends most of its time in scorer that is why I
>>> was trying to remove the poor matches.
>>
>> Okey all clear. Can you give us some example query strings where there a=
re
>> loads of matching?
>>
>> Do you use stop word filter? Could it be case described as
>>
>> "As you approach the upper limits of a single machine,
>> extremely frequent terms (called stop words) can become very
>> expensive in the wrong query. If part of a top level BooleanQuery, a
>> SHOULD clause that appears in every document will cause a match and
>> score for every document in your index."
>>
>>
>> http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles=
/Scaling-Lucene-and-Solr
>>
> We used to use the default stop word list but have no stop words because
> Lucene is used to match very short fields =A0relating to Musicdata such a=
s
> artist or album name, therefore the default stop words really need to be
> included to get good matches, for example how would you match the artist
> 'The The' otherwise, so use of a stop word word list is not an option.
>
> If people construct good queries thee is no problem, but the trouble is t=
hat
> many users just OR everything they are looking for because they don't wan=
t a
> good match rejected because just one term fails, but the problem is there
> are a number of very popular terms, for example the following query:
>
> tnum:(6) qdur:(189) artist:(tama) track:(ibata) tracks:(10) release:(the
> global rhythm september 2002)
>
> will match any song that is on an album with 10 tracks, any song which is
> trackno 6 on an album, and any release containg the word 'the' , when rea=
lly
> what they are looking for is the song 'ibata' by artist 'tama',
>
> This matches over a million documents (songs) , but doesn't match any wel=
l,
> because the song 'ibata' by 'tama' isnt actually in the index !
>
> So I dont think the query is very good but I cannot force users to submit
> better queries, but I want to protect the server by reducing the time the=
se
> kind of query take (upto 1 second as opposed to the more usual 100
> milliseconds) and I hope that forcing x number of terms to match would do
> that.
>
> Paul
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 12:05:55 2011
Return-Path: <java-user-return-49634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8CF022437
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 12:05:55 +0000 (UTC)
Received: (qmail 56203 invoked by uid 500); 5 May 2011 12:05:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56134 invoked by uid 500); 5 May 2011 12:05:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56126 invoked by uid 99); 5 May 2011 12:05:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 12:05:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 12:05:43 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id F142C36727A2;
	Thu,  5 May 2011 08:05:22 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id d9EqqlP3Wk-r; Thu,  5 May 2011 08:05:22 -0400 (EDT)
Received: from [192.168.0.10] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id C4654367272D;
	Thu,  5 May 2011 08:05:21 -0400 (EDT)
Message-ID: <4DC29281.5070200@ifactory.com>
Date: Thu, 05 May 2011 08:05:21 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: QueryValidator
References: <17626_1304580419_ZZh0q19yfveoH.00_4DC25142.6090603@uni-bielefeld.de>
In-Reply-To: <17626_1304580419_ZZh0q19yfveoH.00_4DC25142.6090603@uni-bielefeld.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

In our applications, we catch ParseException and then take one of the 
following actions:

1) report an error to the user
2) rewrite the query, stripping all punctuation, and try again
3) rewrite the query, quoting all punctuation, and try again

would that work for you?

On 5/5/2011 3:26 AM, Bernd Fehling wrote:
> Dear list,
>
> I need a QueryValidator and don't mind writing one but don't want
> to reinvent the wheel in case there is already something.
>
> Is this the right list for talking about a QueryValidator or
> should it belong to SOLR?
>
> What do I mean with a QueryValidator?
> I think about something like validating the query before or after 
> parsing it.
> Currently invalid queries [e.g. text:(:foo AND bar) ] throw exceptions
> which pop up to the top. Not only that they show up in the logs
> (which is good) they also give unuseful result page to jetty (which is 
> bad).
> And they also waste time for searching what can't be searched.
>
> What should the QueryValidator do?
> - check the query against the searchable fields of the schema 
> (validate it)
> - give options of fallback strategies
>   -- let it through as raw
>   -- remove specific chars (e.g. all ":" which have not a valid search 
> field before)
>   -- ...
> - in case of an invalid query don't try to start a search but give a 
> clean no-hit-page
>   with a status and the cause
>
> Actually it must be located somewhere around the parser.
>
> What do think of this?
>
> Regards,
> Bernd
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 12:11:42 2011
Return-Path: <java-user-return-49635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 64AE527D1
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 12:11:42 +0000 (UTC)
Received: (qmail 64864 invoked by uid 500); 5 May 2011 12:11:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64812 invoked by uid 500); 5 May 2011 12:11:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64804 invoked by uid 99); 5 May 2011 12:11:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 12:11:39 +0000
X-ASF-Spam-Status: No, hits=2.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLYTO_END_DIGIT,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paul_t100@fastmail.fm designates 66.111.4.26 as permitted sender)
Received: from [66.111.4.26] (HELO out2.smtp.messagingengine.com) (66.111.4.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 12:11:34 +0000
Received: from compute2.internal (compute2.nyi.mail.srv.osa [10.202.2.42])
	by gateway1.messagingengine.com (Postfix) with ESMTP id 872DA20C47;
	Thu,  5 May 2011 08:11:13 -0400 (EDT)
Received: from frontend2.messagingengine.com ([10.202.2.161])
  by compute2.internal (MEProxy); Thu, 05 May 2011 08:11:13 -0400
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed/relaxed; d=messagingengine.com; h=message-id:date:from:reply-to:mime-version:to:cc:subject:references:in-reply-to:content-type:content-transfer-encoding; s=smtpout; bh=dSKTsEhqPneCIVOLe4zypOGzoZA=; b=hffp5wAsqUiUkTXy7qay3/8WrhX84GFJGl+en9nRV07oG90k12sNYmXHlrgJ6MXmolBscJANcwfQBir16/4thbjeKr5z5Tisb+ENmrnaM391ASjT7BY/cRWBuwWFMZqhbjTg/hXWtWqdJ3NJDqyBVvMe6dWp8KtqQVGP47i9PeY=
X-Sasl-enc: GHnLHqIYycx053ZY/eN7wgCQ4KleSHdvMfSYY3kyKGha 1304597473
Received: from [192.168.1.65] (unknown [217.155.98.246])
	by mail.messagingengine.com (Postfix) with ESMTPSA id 00B53441694;
	Thu,  5 May 2011 08:11:12 -0400 (EDT)
Message-ID: <4DC293E2.1070500@fastmail.fm>
Date: Thu, 05 May 2011 13:11:14 +0100
From: Paul Taylor <paul_t100@fastmail.fm>
Reply-To: paul_t100@fastmail.fm
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Ian Lea <ian.lea@gmail.com>
CC: java-user@lucene.apache.org
Subject: Re: Anyway to not bother scoring less good matches ?
References: <402946.35256.qm@web121706.mail.ne1.yahoo.com> <4DC27C8C.4010709@fastmail.fm> <BANLkTi=mmLgx=6vE1LCmG3d_varm0R4Ucw@mail.gmail.com>
In-Reply-To: <BANLkTi=mmLgx=6vE1LCmG3d_varm0R4Ucw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

On 05/05/2011 11:59, Ian Lea wrote:
> See http://www.hathitrust.org/blogs/large-scale-search/slow-queries-and-common-words-part-1
> for an excellent article and solution to the problem with common
> words.
>
Would this work when the user doesnt actualy use a phrase query
> You could also consider using, and caching and reusing, filters for
> the tnum and tracks fields.
> `
This does sound promising because tracks has limited number of values, 
so I guess you create the filter after indexing and cache it somehow 
then modify the query to use the filter rather than the query somehow, 
Ill read-up on it.

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 12:54:52 2011
Return-Path: <java-user-return-49636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BDB325EB
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 12:54:52 +0000 (UTC)
Received: (qmail 6357 invoked by uid 500); 5 May 2011 12:54:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6308 invoked by uid 500); 5 May 2011 12:54:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6300 invoked by uid 99); 5 May 2011 12:54:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 12:54:49 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 12:54:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 9B0E8C218D
	for <java-user@lucene.apache.org>; Thu,  5 May 2011 14:54:23 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id d8eCKwmnnIR3 for <java-user@lucene.apache.org>;
	Thu,  5 May 2011 14:54:23 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 1E99AC218A
	for <java-user@lucene.apache.org>; Thu,  5 May 2011 14:54:23 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Thu, 5 May 2011 14:54:23 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 5 May 2011 14:54:21 +0200
Subject: Using Solr's (Auto)suggest with plain lucene
Thread-Topic: Using Solr's (Auto)suggest with plain lucene
Thread-Index: AcwLI409kHtiPE66S7CzQbVuqqGFEQ==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

I have implemented my index (in fact it's a plugable indexing API) in "plai=
n Lucene". It tried to implement a term suggestion mechanism on my own, bei=
ng not to happy so far.
At
http://search-lucene.com/m/0QBv41ssGlh/suggestion&subj=3DAuto+Suggest
I have seen Solr's auto suggestion for search terms. Appart from not being =
"fuzzy" it looks quite promising.

How easily can I Integrate Solr's suggestion with my Lucene index?

Thx
Clemens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 13:01:19 2011
Return-Path: <java-user-return-49637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05B10EC7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 13:01:19 +0000 (UTC)
Received: (qmail 26001 invoked by uid 500); 5 May 2011 13:01:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25942 invoked by uid 500); 5 May 2011 13:01:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25934 invoked by uid 99); 5 May 2011 13:01:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 13:01:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 13:01:10 +0000
Received: by bwz8 with SMTP id 8so3035038bwz.35
        for <java-user@lucene.apache.org>; Thu, 05 May 2011 06:00:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=sGeoICo3XJTN2bh3qJZ7nHrYHXL0wkynadnIzBTeNPI=;
        b=O5D7Q/gW4Yy2BON+nwVqAdjZy8d3pjnac8iCjSOOB/U3x3EQm31sLlbXW7BLM246K1
         y8KcA8uK5Zp22tWMp+UtZBLwOuBZoGvtzMLs1KJz29hzch6G22GEVYeb4rGE3P29qm6y
         NkClmxS7x5BhPKYijGwophh7/XIHsjM7UI3VE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=qU3UfR67Jn+WkuYk6/bJp94QHb5sX+xSSlvIn6rUAa4d9jui1uUX/Qsxmwlq+QY+f9
         h4rYymFko+0TMihg97oXLwofaKMiBdL96fCF0eD0pPd5LUECkuJ8Qz3DDaOBNI84BphQ
         /QFOZkaQtUPux6xTdLJ+jUOVsTmQgFsYkNA3U=
Received: by 10.204.47.103 with SMTP id m39mr2279745bkf.4.1304600449118; Thu,
 05 May 2011 06:00:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Thu, 5 May 2011 06:00:29 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Thu, 5 May 2011 15:00:29 +0200
Message-ID: <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com>
Subject: Re: Using Solr's (Auto)suggest with plain lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504502e37f57f34e04a286f696

--00504502e37f57f34e04a286f696
Content-Type: text/plain; charset=UTF-8

If you check out the source code of solr/lucene, look at FSTLookup class and
FSTLookupTest -- you can populate FSTLookup manually with terms/ phrases
from your index and then use the resulting automaton for suggestions.

Dawid

On Thu, May 5, 2011 at 2:54 PM, Clemens Wyss <clemensdev@mysign.ch> wrote:

> I have implemented my index (in fact it's a plugable indexing API) in
> "plain Lucene". It tried to implement a term suggestion mechanism on my own,
> being not to happy so far.
> At
> http://search-lucene.com/m/0QBv41ssGlh/suggestion&subj=Auto+Suggest
> I have seen Solr's auto suggestion for search terms. Appart from not being
> "fuzzy" it looks quite promising.
>
> How easily can I Integrate Solr's suggestion with my Lucene index?
>
> Thx
> Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00504502e37f57f34e04a286f696--

From java-user-return-49638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 14:01:29 2011
Return-Path: <java-user-return-49638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 591992AD8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 14:01:29 +0000 (UTC)
Received: (qmail 60424 invoked by uid 500); 5 May 2011 14:01:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60364 invoked by uid 500); 5 May 2011 14:01:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60354 invoked by uid 99); 5 May 2011 14:01:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 14:01:26 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bernd.fehling@uni-bielefeld.de designates 129.70.204.73 as permitted sender)
Received: from [129.70.204.73] (HELO mux2-unibi-smtp.hrz.uni-bielefeld.de) (129.70.204.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 14:01:17 +0000
MIME-version: 1.0
Content-transfer-encoding: 7BIT
Content-type: text/plain; charset=ISO-8859-15; format=flowed
Received: from pmxchannel-daemon.mux2-unibi-smtp.hrz.uni-bielefeld.de by
 mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 id <0LKQ00E006XLIU00@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Thu, 05 May 2011 16:00:57 +0200 (CEST)
Received: from [129.70.11.68] ([129.70.11.68])
 by mux2-unibi-smtp.hrz.uni-bielefeld.de
 (Sun Java(tm) System Messaging Server 6.3-6.03 (built Mar 14 2008; 32bit))
 with ESMTPPSA id <0LKQ008Y06XL2L80@mux2-unibi-smtp.hrz.uni-bielefeld.de> for
 java-user@lucene.apache.org; Thu, 05 May 2011 16:00:57 +0200 (CEST)
Date: Thu, 05 May 2011 16:00:56 +0200
From: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: QueryValidator
In-reply-to: <4DC29281.5070200@ifactory.com>
To: java-user@lucene.apache.org
Message-id: <4381_1304604057_ZZh0q2_pHxArN.00_4DC2AD98.8040009@uni-bielefeld.de>
X-EnvFrom: bernd.fehling@uni-bielefeld.de
X-PMX-Version: 5.5.9.395186, Antispam-Engine: 2.7.2.376379,
 Antispam-Data: 2011.5.5.134826, pmx8
X-Connecting-IP: 129.70.11.68
References:
 <17626_1304580419_ZZh0q19yfveoH.00_4DC25142.6090603@uni-bielefeld.de>
 <4DC29281.5070200@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; de; rv:1.9.2.14) Gecko/20110221
 SUSE/3.1.8 Thunderbird/3.1.8
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Michael

sounds excellent to me.

Is it a QParserPlugin or what is it?

Regards
Bernd



Am 05.05.2011 14:05, schrieb Michael Sokolov:
> In our applications, we catch ParseException and then take one of the following actions:
>
> 1) report an error to the user
> 2) rewrite the query, stripping all punctuation, and try again
> 3) rewrite the query, quoting all punctuation, and try again
>
> would that work for you?
>
> On 5/5/2011 3:26 AM, Bernd Fehling wrote:
>> Dear list,
>>
>> I need a QueryValidator and don't mind writing one but don't want
>> to reinvent the wheel in case there is already something.
>>
>> Is this the right list for talking about a QueryValidator or
>> should it belong to SOLR?
>>
>> What do I mean with a QueryValidator?
>> I think about something like validating the query before or after parsing it.
>> Currently invalid queries [e.g. text:(:foo AND bar) ] throw exceptions
>> which pop up to the top. Not only that they show up in the logs
>> (which is good) they also give unuseful result page to jetty (which is bad).
>> And they also waste time for searching what can't be searched.
>>
>> What should the QueryValidator do?
>> - check the query against the searchable fields of the schema (validate it)
>> - give options of fallback strategies
>> -- let it through as raw
>> -- remove specific chars (e.g. all ":" which have not a valid search field before)
>> -- ...
>> - in case of an invalid query don't try to start a search but give a clean no-hit-page
>> with a status and the cause
>>
>> Actually it must be located somewhere around the parser.
>>
>> What do think of this?
>>
>> Regards,
>> Bernd
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 14:44:39 2011
Return-Path: <java-user-return-49639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6882F2FF2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 14:44:39 +0000 (UTC)
Received: (qmail 42735 invoked by uid 500); 5 May 2011 14:44:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42688 invoked by uid 500); 5 May 2011 14:44:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42680 invoked by uid 99); 5 May 2011 14:44:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 14:44:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 14:44:31 +0000
Received: by wyb40 with SMTP id 40so2568402wyb.35
        for <java-user@lucene.apache.org>; Thu, 05 May 2011 07:44:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.181.10 with SMTP id bw10mr2663340wbb.7.1304606648897; Thu,
 05 May 2011 07:44:08 -0700 (PDT)
Received: by 10.227.11.67 with HTTP; Thu, 5 May 2011 07:44:08 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
Date: Thu, 5 May 2011 10:44:08 -0400
Message-ID: <BANLkTimhYWTQOVowoNWAE834tmQrbS5LQw@mail.gmail.com>
Subject: Re: Using Solr's (Auto)suggest with plain lucene
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Also, have a look at the patch on this issue:

    https://issues.apache.org/jira/browse/LUCENE-2995

That issue factors out spell checking / auto suggest from Lucene &
Solr into a shared module.

Mike

http://blog.mikemccandless.com

On Thu, May 5, 2011 at 8:54 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> I have implemented my index (in fact it's a plugable indexing API) in "plain Lucene". It tried to implement a term suggestion mechanism on my own, being not to happy so far.
> At
> http://search-lucene.com/m/0QBv41ssGlh/suggestion&subj=Auto+Suggest
> I have seen Solr's auto suggestion for search terms. Appart from not being "fuzzy" it looks quite promising.
>
> How easily can I Integrate Solr's suggestion with my Lucene index?
>
> Thx
> Clemens
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 14:57:05 2011
Return-Path: <java-user-return-49640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 71F15281E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 14:57:05 +0000 (UTC)
Received: (qmail 70714 invoked by uid 500); 5 May 2011 14:57:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70666 invoked by uid 500); 5 May 2011 14:57:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70658 invoked by uid 99); 5 May 2011 14:57:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 14:57:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 14:56:56 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 4844B3672851;
	Thu,  5 May 2011 10:56:35 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id DW+1b0dN3SkJ; Thu,  5 May 2011 10:56:34 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id D490F3672850;
	Thu,  5 May 2011 10:56:33 -0400 (EDT)
Message-ID: <4DC2BAA1.6050601@ifactory.com>
Date: Thu, 05 May 2011 10:56:33 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Bernd Fehling <bernd.fehling@uni-bielefeld.de>
Subject: Re: QueryValidator
References: <17626_1304580419_ZZh0q19yfveoH.00_4DC25142.6090603@uni-bielefeld.de> <4DC29281.5070200@ifactory.com> <4381_1304604057_ZZh0q2_pHxArN.00_4DC2AD98.8040009@uni-bielefeld.de>
In-Reply-To: <4381_1304604057_ZZh0q2_pHxArN.00_4DC2AD98.8040009@uni-bielefeld.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

It's an idea - sorry I don't have an implementation I can share easily; 
it's embedded in our application code and not easy to refactor.  I'm not 
sure where this would fit in the solr architecture; maybe some subclass 
of SearchHandler?  I guess the query rewriter would need to be aware of 
which parser it's trying to avoid errors in.  In our case, we have a 
limited case where we always use a single parser, but I think solr 
exposes a pluggable extensible architecture with a lot of different 
parsers, so a more general solution will be more complex, and I don't 
have it :)

-Mike


On 05/05/2011 10:00 AM, Bernd Fehling wrote:
> Hi Michael
>
> sounds excellent to me.
>
> Is it a QParserPlugin or what is it?
>
> Regards
> Bernd
>
>
>
> Am 05.05.2011 14:05, schrieb Michael Sokolov:
>> In our applications, we catch ParseException and then take one of the 
>> following actions:
>>
>> 1) report an error to the user
>> 2) rewrite the query, stripping all punctuation, and try again
>> 3) rewrite the query, quoting all punctuation, and try again
>>
>> would that work for you?
>>
>> On 5/5/2011 3:26 AM, Bernd Fehling wrote:
>>> Dear list,
>>>
>>> I need a QueryValidator and don't mind writing one but don't want
>>> to reinvent the wheel in case there is already something.
>>>
>>> Is this the right list for talking about a QueryValidator or
>>> should it belong to SOLR?
>>>
>>> What do I mean with a QueryValidator?
>>> I think about something like validating the query before or after 
>>> parsing it.
>>> Currently invalid queries [e.g. text:(:foo AND bar) ] throw exceptions
>>> which pop up to the top. Not only that they show up in the logs
>>> (which is good) they also give unuseful result page to jetty (which 
>>> is bad).
>>> And they also waste time for searching what can't be searched.
>>>
>>> What should the QueryValidator do?
>>> - check the query against the searchable fields of the schema 
>>> (validate it)
>>> - give options of fallback strategies
>>> -- let it through as raw
>>> -- remove specific chars (e.g. all ":" which have not a valid search 
>>> field before)
>>> -- ...
>>> - in case of an invalid query don't try to start a search but give a 
>>> clean no-hit-page
>>> with a status and the cause
>>>
>>> Actually it must be located somewhere around the parser.
>>>
>>> What do think of this?
>>>
>>> Regards,
>>> Bernd
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 18:03:51 2011
Return-Path: <java-user-return-49641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 925C22047
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 18:03:51 +0000 (UTC)
Received: (qmail 79992 invoked by uid 500); 5 May 2011 18:03:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79948 invoked by uid 500); 5 May 2011 18:03:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79940 invoked by uid 99); 5 May 2011 18:03:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 18:03:49 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 18:03:42 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <ces3w@ccri.com>)
	id 1QI2tV-0006hl-41
	for java-user@lucene.apache.org; Thu, 05 May 2011 11:03:21 -0700
Date: Thu, 5 May 2011 11:03:21 -0700 (PDT)
From: ces3w <ces3w@ccri.com>
To: java-user@lucene.apache.org
Message-ID: <1304618601115-2904431.post@n3.nabble.com>
Subject: Querying Lucene property for exact value
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, 

I am new to Lucene, so I apologize if this has been answered, but I've had
no success finding the answer after googling around.  I am using Compass as
a Lucene front end and have run into an issue in querying Lucene docs.  I am
looking for a way to search a property based on it's complete and exact
value, not based on a keyword within the property.  

An example is that I have an Activity field that can be one of many values
including 'patrol', 'unit patrol', 'police patrol', etc.  With my query, I
would like to only return 'patrol' items and nothing else.  Is there a way
to do this??  My current querying code is below. This returns all items with
'patrol' in it.

Note: values and field are variables passed to the method indicating
possible values the lucene field can be.

CompassQueryBuilder.CompassBooleanQueryBuilder boolQuery =
queryBuilder.bool();
for (String value : values) {
        CompassQuery t = queryBuilder.term(field, value);
        boolQuery.addShould(t);
}
return boolQuery.toQuery();

Any help would be greatly appreciated.

Thanks,

Chelsea

--
View this message in context: http://lucene.472066.n3.nabble.com/Querying-Lucene-property-for-exact-value-tp2904431p2904431.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 20:11:55 2011
Return-Path: <java-user-return-49642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 574712CE2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 20:11:55 +0000 (UTC)
Received: (qmail 72315 invoked by uid 500); 5 May 2011 20:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72271 invoked by uid 500); 5 May 2011 20:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72263 invoked by uid 99); 5 May 2011 20:11:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 20:11:52 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 20:11:42 +0000
Received: by pve37 with SMTP id 37so1634434pve.35
        for <java-user@lucene.apache.org>; Thu, 05 May 2011 13:11:21 -0700 (PDT)
Received: by 10.68.69.50 with SMTP id b18mr3704087pbu.298.1304626280939;
        Thu, 05 May 2011 13:11:20 -0700 (PDT)
Received: from [10.0.1.14] ([12.153.254.134])
        by mx.google.com with ESMTPS id x8sm1636230pbp.27.2011.05.05.13.11.19
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 05 May 2011 13:11:20 -0700 (PDT)
From: Chris Schilling <chris@cellixis.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-4--98393192
Subject: new to lucene, non standard index
Date: Thu, 5 May 2011 13:12:01 -0700
Message-Id: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-4--98393192
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=us-ascii

Hi,

I am trying to figure out how to solve this problem:

I have about 500,000 files that I would like to index, but the files are =
structured.  So, each file has the following layout:

doc1
token1, weight11, frequency1, weight21
token2, weight12, frequency2, weight22
.
.
.

etc for 500,000 docs.=20

Basically, I would like to index the tokens for each doc.  When I search =
for a token, I would like to be able to return the top docs sorted by =
weight1, frequency, or weight2.

So, in my naive setup, I loop through the files in the directory, then I =
loop through the lines of the file.   In side of the loop through each =
file, I call this function:

	public Document processKeywords(Document doc, String keyword, =
Float weight1, Float weight2, Integer frequency) throws Exception {
			Document doc =3D new Document();
			doc.add(new Field("keywords", keyword, =
Field.Store.NO, Field.Index.ANALYZED));		=09
			doc.add(new NumericField(keyword+"weight1", =
Field.Store.YES, true).setFloatValue(weight1));		=09
			doc.add(new NumericField(keyword+"weight2", =
Field.Store.YES, true).setFloatValue(weight2));		=09
			doc.add(new NumericField(keyword+"frequency", =
Field.Store.YES, true).setFloatValue(frequency));		=09
			return doc;
	}

So, for each token, I create 3 new fields each time. Notice how I am =
trying to index the keyword in the "keywords" field.  For the weights =
and frequency, I create a new field with a name based on the keyword.  =
On average, I have 100 tokens per document, so each document will have =
about 300 distinct fields. =20

When running my program, the lucene portion eats up tons of memory and =
when it gets to the max alloted by the JVM (I have tried allowing up to =
4 Gb), the program slows to a crawl.  I assume it is spending all of its =
time in garbage collection due to all these fields.=20

My code above seems like a very hacky way of accomplishing what I want =
(sorting documents based on keyword search using different numeric =
fields associated with that keyword). =20

FYI, here is the main search code, where q is the token I am searching =
for and sortby is the field I want to use to sort.  I setup a QP to =
search for the keyword in the "keywords" field.  Then, I can extract the =
stats that I indexed for the given query keyword.

	private static final QueryParser parser =3D new =
QueryParser(Version.LUCENE_30, "keywords", new =
StandardAnalyzer(Version.LUCENE_30));

	public void search(String q, String sortby) throws IOException, =
ParseException {
		Query query =3D parser.parse(q);
		long start =3D System.currentTimeMillis();
		TopDocs hits =3D this.is.search(query, null, 10, new =
Sort(new SortField(q+"sortby", SortField.FLOAT, true)));
		long end =3D System.currentTimeMillis();
		System.out.println("Found " + hits.totalHits +
				" document(s) (in " + (end - start) +
				" milliseconds) that matched query '" +
				q + "':");
		for(ScoreDoc scoreDoc : hits.scoreDocs) {
			Document doc =3D this.is.doc(scoreDoc.doc);
			String hash =3D doc.get("hash");
			System.out.println(hash + " " + =
doc.get(q+"sortby") + " " + hash);
		}
	}

I am pretty new to Lucene, so I hope this makes sense.  I tried to pare =
my problem down as much as possible.  Like I said, the main problem I am =
running into is that after processing about 30000 documents, the =
indexing slows to a crawl and seems to spend all of its time in the =
garbage collector.  I am looking for a more efficient/effective way of =
solving this problem.  Code tidbits would help, but are not necessary :)

Thanks for your help,
Chris S.=

--Apple-Mail-4--98393192--

From java-user-return-49643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 22:01:56 2011
Return-Path: <java-user-return-49643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8464E2F44
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 22:01:56 +0000 (UTC)
Received: (qmail 10546 invoked by uid 500); 5 May 2011 22:01:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10514 invoked by uid 500); 5 May 2011 22:01:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10504 invoked by uid 99); 5 May 2011 22:01:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:01:52 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:01:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id A66613672E26;
	Thu,  5 May 2011 18:01:23 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id XhPxA0RoIcXN; Thu,  5 May 2011 18:01:18 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id 56A863672623;
	Thu,  5 May 2011 18:01:18 -0400 (EDT)
Message-ID: <4DC31E2E.10001@ifactory.com>
Date: Thu, 05 May 2011 18:01:18 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Chris Schilling <chris@cellixis.com>
Subject: Re: new to lucene, non standard index
References: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com>
In-Reply-To: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Are the tokens unique within a document? If so, why not store a document 
for every doc/token pair with fields:

id (doc#/token#)
doc-id (doc#)
token
weight1
weight2
frequency

Then search for token, sort by weight1, weight2 or frequency.

If the token matches are unique within a document you will only get each 
document listed once.  If they aren't unique, it's not clear what you 
want to sort by anyway....

-Mike

On 05/05/2011 04:12 PM, Chris Schilling wrote:
> Hi,
>
> I am trying to figure out how to solve this problem:
>
> I have about 500,000 files that I would like to index, but the files are structured.  So, each file has the following layout:
>
> doc1
> token1, weight11, frequency1, weight21
> token2, weight12, frequency2, weight22
> .
> .
> .
>
> etc for 500,000 docs.
>
> Basically, I would like to index the tokens for each doc.  When I search for a token, I would like to be able to return the top docs sorted by weight1, frequency, or weight2.
>
> So, in my naive setup, I loop through the files in the directory, then I loop through the lines of the file.   In side of the loop through each file, I call this function:
>
> 	public Document processKeywords(Document doc, String keyword, Float weight1, Float weight2, Integer frequency) throws Exception {
> 			Document doc = new Document();
> 			doc.add(new Field("keywords", keyword, Field.Store.NO, Field.Index.ANALYZED));			
> 			doc.add(new NumericField(keyword+"weight1", Field.Store.YES, true).setFloatValue(weight1));			
> 			doc.add(new NumericField(keyword+"weight2", Field.Store.YES, true).setFloatValue(weight2));			
> 			doc.add(new NumericField(keyword+"frequency", Field.Store.YES, true).setFloatValue(frequency));			
> 			return doc;
> 	}
>
> So, for each token, I create 3 new fields each time. Notice how I am trying to index the keyword in the "keywords" field.  For the weights and frequency, I create a new field with a name based on the keyword.  On average, I have 100 tokens per document, so each document will have about 300 distinct fields.
>
> When running my program, the lucene portion eats up tons of memory and when it gets to the max alloted by the JVM (I have tried allowing up to 4 Gb), the program slows to a crawl.  I assume it is spending all of its time in garbage collection due to all these fields.
>
> My code above seems like a very hacky way of accomplishing what I want (sorting documents based on keyword search using different numeric fields associated with that keyword).
>
> FYI, here is the main search code, where q is the token I am searching for and sortby is the field I want to use to sort.  I setup a QP to search for the keyword in the "keywords" field.  Then, I can extract the stats that I indexed for the given query keyword.
>
> 	private static final QueryParser parser = new QueryParser(Version.LUCENE_30, "keywords", new StandardAnalyzer(Version.LUCENE_30));
>
> 	public void search(String q, String sortby) throws IOException, ParseException {
> 		Query query = parser.parse(q);
> 		long start = System.currentTimeMillis();
> 		TopDocs hits = this.is.search(query, null, 10, new Sort(new SortField(q+"sortby", SortField.FLOAT, true)));
> 		long end = System.currentTimeMillis();
> 		System.out.println("Found " + hits.totalHits +
> 				" document(s) (in " + (end - start) +
> 				" milliseconds) that matched query '" +
> 				q + "':");
> 		for(ScoreDoc scoreDoc : hits.scoreDocs) {
> 			Document doc = this.is.doc(scoreDoc.doc);
> 			String hash = doc.get("hash");
> 			System.out.println(hash + " " + doc.get(q+"sortby") + " " + hash);
> 		}
> 	}
>
> I am pretty new to Lucene, so I hope this makes sense.  I tried to pare my problem down as much as possible.  Like I said, the main problem I am running into is that after processing about 30000 documents, the indexing slows to a crawl and seems to spend all of its time in the garbage collector.  I am looking for a more efficient/effective way of solving this problem.  Code tidbits would help, but are not necessary :)
>
> Thanks for your help,
> Chris S.
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 22:09:45 2011
Return-Path: <java-user-return-49644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 45B4F2D8B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 22:09:45 +0000 (UTC)
Received: (qmail 21378 invoked by uid 500); 5 May 2011 22:09:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21308 invoked by uid 500); 5 May 2011 22:09:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21300 invoked by uid 99); 5 May 2011 22:09:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:09:43 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:09:35 +0000
Received: by pve37 with SMTP id 37so1702410pve.35
        for <java-user@lucene.apache.org>; Thu, 05 May 2011 15:09:15 -0700 (PDT)
Received: by 10.68.52.202 with SMTP id v10mr4025073pbo.7.1304633354989;
        Thu, 05 May 2011 15:09:14 -0700 (PDT)
Received: from [10.0.1.14] ([12.153.254.134])
        by mx.google.com with ESMTPS id e4sm1694118pbj.4.2011.05.05.15.09.13
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 05 May 2011 15:09:14 -0700 (PDT)
Subject: Re: new to lucene, non standard index
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: text/plain; charset=us-ascii
From: Chris Schilling <chris@cellixis.com>
In-Reply-To: <4DC31E2E.10001@ifactory.com>
Date: Thu, 5 May 2011 15:09:55 -0700
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <E143F68A-888D-4362-AA14-1188A1848E93@cellixis.com>
References: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com> <4DC31E2E.10001@ifactory.com>
To: Mike Sokolov <sokolov@ifactory.com>
X-Mailer: Apple Mail (2.1084)

Hey Mike,

Let me clarify:

The tokens are not unique.  Let's say doc1 contains the token
foo and has the properties weight1 =3D 0.75, weight2 =3D 0.90, frequency =
=3D 10

Now, let's say doc2 also contains the token=20
foo with properties: weight1 =3D 0.8, weight2 =3D 0.75, frequency =3D 5

Now, I want to search for all the documents that contain foo, but I want =
them sorted by frequency.=20

Then, I would have doc1, doc2.

Now, I want to search for all the documents that contain foon, but I =
want them sorted by weight1.
Then, I would have doc2, doc1

Does that clarify?


On May 5, 2011, at 3:01 PM, Mike Sokolov wrote:

> Are the tokens unique within a document? If so, why not store a =
document for every doc/token pair with fields:
>=20
> id (doc#/token#)
> doc-id (doc#)
> token
> weight1
> weight2
> frequency
>=20
> Then search for token, sort by weight1, weight2 or frequency.
>=20
> If the token matches are unique within a document you will only get =
each document listed once.  If they aren't unique, it's not clear what =
you want to sort by anyway....
>=20
> -Mike
>=20
> On 05/05/2011 04:12 PM, Chris Schilling wrote:
>> Hi,
>>=20
>> I am trying to figure out how to solve this problem:
>>=20
>> I have about 500,000 files that I would like to index, but the files =
are structured.  So, each file has the following layout:
>>=20
>> doc1
>> token1, weight11, frequency1, weight21
>> token2, weight12, frequency2, weight22
>> .
>> .
>> .
>>=20
>> etc for 500,000 docs.
>>=20
>> Basically, I would like to index the tokens for each doc.  When I =
search for a token, I would like to be able to return the top docs =
sorted by weight1, frequency, or weight2.
>>=20
>> So, in my naive setup, I loop through the files in the directory, =
then I loop through the lines of the file.   In side of the loop through =
each file, I call this function:
>>=20
>> 	public Document processKeywords(Document doc, String keyword, =
Float weight1, Float weight2, Integer frequency) throws Exception {
>> 			Document doc =3D new Document();
>> 			doc.add(new Field("keywords", keyword, =
Field.Store.NO, Field.Index.ANALYZED));		=09
>> 			doc.add(new NumericField(keyword+"weight1", =
Field.Store.YES, true).setFloatValue(weight1));		=09
>> 			doc.add(new NumericField(keyword+"weight2", =
Field.Store.YES, true).setFloatValue(weight2));		=09
>> 			doc.add(new NumericField(keyword+"frequency", =
Field.Store.YES, true).setFloatValue(frequency));		=09
>> 			return doc;
>> 	}
>>=20
>> So, for each token, I create 3 new fields each time. Notice how I am =
trying to index the keyword in the "keywords" field.  For the weights =
and frequency, I create a new field with a name based on the keyword.  =
On average, I have 100 tokens per document, so each document will have =
about 300 distinct fields.
>>=20
>> When running my program, the lucene portion eats up tons of memory =
and when it gets to the max alloted by the JVM (I have tried allowing up =
to 4 Gb), the program slows to a crawl.  I assume it is spending all of =
its time in garbage collection due to all these fields.
>>=20
>> My code above seems like a very hacky way of accomplishing what I =
want (sorting documents based on keyword search using different numeric =
fields associated with that keyword).
>>=20
>> FYI, here is the main search code, where q is the token I am =
searching for and sortby is the field I want to use to sort.  I setup a =
QP to search for the keyword in the "keywords" field.  Then, I can =
extract the stats that I indexed for the given query keyword.
>>=20
>> 	private static final QueryParser parser =3D new =
QueryParser(Version.LUCENE_30, "keywords", new =
StandardAnalyzer(Version.LUCENE_30));
>>=20
>> 	public void search(String q, String sortby) throws IOException, =
ParseException {
>> 		Query query =3D parser.parse(q);
>> 		long start =3D System.currentTimeMillis();
>> 		TopDocs hits =3D this.is.search(query, null, 10, new =
Sort(new SortField(q+"sortby", SortField.FLOAT, true)));
>> 		long end =3D System.currentTimeMillis();
>> 		System.out.println("Found " + hits.totalHits +
>> 				" document(s) (in " + (end - start) +
>> 				" milliseconds) that matched query '" +
>> 				q + "':");
>> 		for(ScoreDoc scoreDoc : hits.scoreDocs) {
>> 			Document doc =3D this.is.doc(scoreDoc.doc);
>> 			String hash =3D doc.get("hash");
>> 			System.out.println(hash + " " + =
doc.get(q+"sortby") + " " + hash);
>> 		}
>> 	}
>>=20
>> I am pretty new to Lucene, so I hope this makes sense.  I tried to =
pare my problem down as much as possible.  Like I said, the main problem =
I am running into is that after processing about 30000 documents, the =
indexing slows to a crawl and seems to spend all of its time in the =
garbage collector.  I am looking for a more efficient/effective way of =
solving this problem.  Code tidbits would help, but are not necessary :)
>>=20
>> Thanks for your help,
>> Chris S.
>>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 22:11:20 2011
Return-Path: <java-user-return-49645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 93DAE2E6F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 22:11:20 +0000 (UTC)
Received: (qmail 26412 invoked by uid 500); 5 May 2011 22:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26365 invoked by uid 500); 5 May 2011 22:11:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26357 invoked by uid 99); 5 May 2011 22:11:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:11:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.179] (HELO mail-px0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:11:10 +0000
Received: by pxi2 with SMTP id 2so1971778pxi.24
        for <java-user@lucene.apache.org>; Thu, 05 May 2011 15:10:50 -0700 (PDT)
Received: by 10.142.1.12 with SMTP id 12mr1461272wfa.393.1304633450583;
        Thu, 05 May 2011 15:10:50 -0700 (PDT)
Received: from [10.0.1.14] ([12.153.254.134])
        by mx.google.com with ESMTPS id 25sm3294345wfb.22.2011.05.05.15.10.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 05 May 2011 15:10:50 -0700 (PDT)
Subject: Re: new to lucene, non standard index
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: text/plain; charset=us-ascii
From: Chris Schilling <chris@cellixis.com>
In-Reply-To: <4DC31E2E.10001@ifactory.com>
Date: Thu, 5 May 2011 15:11:31 -0700
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <792AE995-4F66-40DF-B675-19632E629F86@cellixis.com>
References: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com> <4DC31E2E.10001@ifactory.com>
To: Mike Sokolov <sokolov@ifactory.com>
X-Mailer: Apple Mail (2.1084)

Oh, yes, they are unique within a document.  I was also thinking about =
something like this.  But I would be replacing a large number of fields =
within a document by a large number of documents.  Let me see if I can =
work that out.=20


On May 5, 2011, at 3:01 PM, Mike Sokolov wrote:

> Are the tokens unique within a document? If so, why not store a =
document for every doc/token pair with fields:
>=20
> id (doc#/token#)
> doc-id (doc#)
> token
> weight1
> weight2
> frequency
>=20
> Then search for token, sort by weight1, weight2 or frequency.
>=20
> If the token matches are unique within a document you will only get =
each document listed once.  If they aren't unique, it's not clear what =
you want to sort by anyway....
>=20
> -Mike
>=20
> On 05/05/2011 04:12 PM, Chris Schilling wrote:
>> Hi,
>>=20
>> I am trying to figure out how to solve this problem:
>>=20
>> I have about 500,000 files that I would like to index, but the files =
are structured.  So, each file has the following layout:
>>=20
>> doc1
>> token1, weight11, frequency1, weight21
>> token2, weight12, frequency2, weight22
>> .
>> .
>> .
>>=20
>> etc for 500,000 docs.
>>=20
>> Basically, I would like to index the tokens for each doc.  When I =
search for a token, I would like to be able to return the top docs =
sorted by weight1, frequency, or weight2.
>>=20
>> So, in my naive setup, I loop through the files in the directory, =
then I loop through the lines of the file.   In side of the loop through =
each file, I call this function:
>>=20
>> 	public Document processKeywords(Document doc, String keyword, =
Float weight1, Float weight2, Integer frequency) throws Exception {
>> 			Document doc =3D new Document();
>> 			doc.add(new Field("keywords", keyword, =
Field.Store.NO, Field.Index.ANALYZED));		=09
>> 			doc.add(new NumericField(keyword+"weight1", =
Field.Store.YES, true).setFloatValue(weight1));		=09
>> 			doc.add(new NumericField(keyword+"weight2", =
Field.Store.YES, true).setFloatValue(weight2));		=09
>> 			doc.add(new NumericField(keyword+"frequency", =
Field.Store.YES, true).setFloatValue(frequency));		=09
>> 			return doc;
>> 	}
>>=20
>> So, for each token, I create 3 new fields each time. Notice how I am =
trying to index the keyword in the "keywords" field.  For the weights =
and frequency, I create a new field with a name based on the keyword.  =
On average, I have 100 tokens per document, so each document will have =
about 300 distinct fields.
>>=20
>> When running my program, the lucene portion eats up tons of memory =
and when it gets to the max alloted by the JVM (I have tried allowing up =
to 4 Gb), the program slows to a crawl.  I assume it is spending all of =
its time in garbage collection due to all these fields.
>>=20
>> My code above seems like a very hacky way of accomplishing what I =
want (sorting documents based on keyword search using different numeric =
fields associated with that keyword).
>>=20
>> FYI, here is the main search code, where q is the token I am =
searching for and sortby is the field I want to use to sort.  I setup a =
QP to search for the keyword in the "keywords" field.  Then, I can =
extract the stats that I indexed for the given query keyword.
>>=20
>> 	private static final QueryParser parser =3D new =
QueryParser(Version.LUCENE_30, "keywords", new =
StandardAnalyzer(Version.LUCENE_30));
>>=20
>> 	public void search(String q, String sortby) throws IOException, =
ParseException {
>> 		Query query =3D parser.parse(q);
>> 		long start =3D System.currentTimeMillis();
>> 		TopDocs hits =3D this.is.search(query, null, 10, new =
Sort(new SortField(q+"sortby", SortField.FLOAT, true)));
>> 		long end =3D System.currentTimeMillis();
>> 		System.out.println("Found " + hits.totalHits +
>> 				" document(s) (in " + (end - start) +
>> 				" milliseconds) that matched query '" +
>> 				q + "':");
>> 		for(ScoreDoc scoreDoc : hits.scoreDocs) {
>> 			Document doc =3D this.is.doc(scoreDoc.doc);
>> 			String hash =3D doc.get("hash");
>> 			System.out.println(hash + " " + =
doc.get(q+"sortby") + " " + hash);
>> 		}
>> 	}
>>=20
>> I am pretty new to Lucene, so I hope this makes sense.  I tried to =
pare my problem down as much as possible.  Like I said, the main problem =
I am running into is that after processing about 30000 documents, the =
indexing slows to a crawl and seems to spend all of its time in the =
garbage collector.  I am looking for a more efficient/effective way of =
solving this problem.  Code tidbits would help, but are not necessary :)
>>=20
>> Thanks for your help,
>> Chris S.
>>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 22:12:04 2011
Return-Path: <java-user-return-49646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C4CAB2E8F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 22:12:04 +0000 (UTC)
Received: (qmail 28888 invoked by uid 500); 5 May 2011 22:12:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28754 invoked by uid 500); 5 May 2011 22:12:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28746 invoked by uid 99); 5 May 2011 22:12:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:12:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:11:54 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id B26243672E26;
	Thu,  5 May 2011 18:11:33 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id IVqAgLQJfkx7; Thu,  5 May 2011 18:11:32 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id 3929E3672E12;
	Thu,  5 May 2011 18:11:32 -0400 (EDT)
Message-ID: <4DC32094.7080908@ifactory.com>
Date: Thu, 05 May 2011 18:11:32 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: Chris Schilling <chris@cellixis.com>
CC: java-user@lucene.apache.org
Subject: Re: new to lucene, non standard index
References: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com> <4DC31E2E.10001@ifactory.com> <E143F68A-888D-4362-AA14-1188A1848E93@cellixis.com>
In-Reply-To: <E143F68A-888D-4362-AA14-1188A1848E93@cellixis.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I think the solution I gave you will work.  The only problem is if a 
token appears twice in the same doc:

doc1 has foo with two different sets of weights and frequencies...

but I think you're saying that doesn't happen

On 05/05/2011 06:09 PM, Chris Schilling wrote:
> Hey Mike,
>
> Let me clarify:
>
> The tokens are not unique.  Let's say doc1 contains the token
> foo and has the properties weight1 = 0.75, weight2 = 0.90, frequency = 10
>
> Now, let's say doc2 also contains the token
> foo with properties: weight1 = 0.8, weight2 = 0.75, frequency = 5
>
> Now, I want to search for all the documents that contain foo, but I want them sorted by frequency.
>
> Then, I would have doc1, doc2.
>
> Now, I want to search for all the documents that contain foon, but I want them sorted by weight1.
> Then, I would have doc2, doc1
>
> Does that clarify?
>
>
> On May 5, 2011, at 3:01 PM, Mike Sokolov wrote:
>
>    
>> Are the tokens unique within a document? If so, why not store a document for every doc/token pair with fields:
>>
>> id (doc#/token#)
>> doc-id (doc#)
>> token
>> weight1
>> weight2
>> frequency
>>
>> Then search for token, sort by weight1, weight2 or frequency.
>>
>> If the token matches are unique within a document you will only get each document listed once.  If they aren't unique, it's not clear what you want to sort by anyway....
>>
>> -Mike
>>
>> On 05/05/2011 04:12 PM, Chris Schilling wrote:
>>      
>>> Hi,
>>>
>>> I am trying to figure out how to solve this problem:
>>>
>>> I have about 500,000 files that I would like to index, but the files are structured.  So, each file has the following layout:
>>>
>>> doc1
>>> token1, weight11, frequency1, weight21
>>> token2, weight12, frequency2, weight22
>>> .
>>> .
>>> .
>>>
>>> etc for 500,000 docs.
>>>
>>> Basically, I would like to index the tokens for each doc.  When I search for a token, I would like to be able to return the top docs sorted by weight1, frequency, or weight2.
>>>
>>> So, in my naive setup, I loop through the files in the directory, then I loop through the lines of the file.   In side of the loop through each file, I call this function:
>>>
>>> 	public Document processKeywords(Document doc, String keyword, Float weight1, Float weight2, Integer frequency) throws Exception {
>>> 			Document doc = new Document();
>>> 			doc.add(new Field("keywords", keyword, Field.Store.NO, Field.Index.ANALYZED));			
>>> 			doc.add(new NumericField(keyword+"weight1", Field.Store.YES, true).setFloatValue(weight1));			
>>> 			doc.add(new NumericField(keyword+"weight2", Field.Store.YES, true).setFloatValue(weight2));			
>>> 			doc.add(new NumericField(keyword+"frequency", Field.Store.YES, true).setFloatValue(frequency));			
>>> 			return doc;
>>> 	}
>>>
>>> So, for each token, I create 3 new fields each time. Notice how I am trying to index the keyword in the "keywords" field.  For the weights and frequency, I create a new field with a name based on the keyword.  On average, I have 100 tokens per document, so each document will have about 300 distinct fields.
>>>
>>> When running my program, the lucene portion eats up tons of memory and when it gets to the max alloted by the JVM (I have tried allowing up to 4 Gb), the program slows to a crawl.  I assume it is spending all of its time in garbage collection due to all these fields.
>>>
>>> My code above seems like a very hacky way of accomplishing what I want (sorting documents based on keyword search using different numeric fields associated with that keyword).
>>>
>>> FYI, here is the main search code, where q is the token I am searching for and sortby is the field I want to use to sort.  I setup a QP to search for the keyword in the "keywords" field.  Then, I can extract the stats that I indexed for the given query keyword.
>>>
>>> 	private static final QueryParser parser = new QueryParser(Version.LUCENE_30, "keywords", new StandardAnalyzer(Version.LUCENE_30));
>>>
>>> 	public void search(String q, String sortby) throws IOException, ParseException {
>>> 		Query query = parser.parse(q);
>>> 		long start = System.currentTimeMillis();
>>> 		TopDocs hits = this.is.search(query, null, 10, new Sort(new SortField(q+"sortby", SortField.FLOAT, true)));
>>> 		long end = System.currentTimeMillis();
>>> 		System.out.println("Found " + hits.totalHits +
>>> 				" document(s) (in " + (end - start) +
>>> 				" milliseconds) that matched query '" +
>>> 				q + "':");
>>> 		for(ScoreDoc scoreDoc : hits.scoreDocs) {
>>> 			Document doc = this.is.doc(scoreDoc.doc);
>>> 			String hash = doc.get("hash");
>>> 			System.out.println(hash + " " + doc.get(q+"sortby") + " " + hash);
>>> 		}
>>> 	}
>>>
>>> I am pretty new to Lucene, so I hope this makes sense.  I tried to pare my problem down as much as possible.  Like I said, the main problem I am running into is that after processing about 30000 documents, the indexing slows to a crawl and seems to spend all of its time in the garbage collector.  I am looking for a more efficient/effective way of solving this problem.  Code tidbits would help, but are not necessary :)
>>>
>>> Thanks for your help,
>>> Chris S.
>>>
>>>        
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May  5 23:00:03 2011
Return-Path: <java-user-return-49647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C79E27E8
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  5 May 2011 23:00:03 +0000 (UTC)
Received: (qmail 80656 invoked by uid 500); 5 May 2011 23:00:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80618 invoked by uid 500); 5 May 2011 23:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80610 invoked by uid 99); 5 May 2011 23:00:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 23:00:01 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 05 May 2011 22:59:53 +0000
Received: by pve37 with SMTP id 37so1725938pve.35
        for <java-user@lucene.apache.org>; Thu, 05 May 2011 15:59:33 -0700 (PDT)
Received: by 10.68.39.72 with SMTP id n8mr3938519pbk.93.1304636371687;
        Thu, 05 May 2011 15:59:31 -0700 (PDT)
Received: from [10.0.1.14] ([12.153.254.134])
        by mx.google.com with ESMTPS id f1sm1713243pbm.93.2011.05.05.15.59.30
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 05 May 2011 15:59:31 -0700 (PDT)
Subject: Re: new to lucene, non standard index
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: text/plain; charset=us-ascii
From: Chris Schilling <chris@cellixis.com>
In-Reply-To: <4DC32094.7080908@ifactory.com>
Date: Thu, 5 May 2011 16:00:12 -0700
Cc: java-user@lucene.apache.org
Content-Transfer-Encoding: quoted-printable
Message-Id: <18E83A7A-C3E2-471C-AE0E-0A9CEBEF1067@cellixis.com>
References: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com> <4DC31E2E.10001@ifactory.com> <E143F68A-888D-4362-AA14-1188A1848E93@cellixis.com> <4DC32094.7080908@ifactory.com>
To: Mike Sokolov <sokolov@ifactory.com>
X-Mailer: Apple Mail (2.1084)

Hey Mike,

My only concern is that I am replacing a large number of fields inside =
of a Document with a (very large ~50e6) number of Documents.  Will I not =
run into the same memory issues?  Or do I create only one doc object and =
reuse it?  With so many Doc/Token pairs, won't searching the index take =
a lot more time?

Thanks for your help,
Chris

On May 5, 2011, at 3:11 PM, Mike Sokolov wrote:

> I think the solution I gave you will work.  The only problem is if a =
token appears twice in the same doc:
>=20
> doc1 has foo with two different sets of weights and frequencies...
>=20
> but I think you're saying that doesn't happen
>=20
> On 05/05/2011 06:09 PM, Chris Schilling wrote:
>> Hey Mike,
>>=20
>> Let me clarify:
>>=20
>> The tokens are not unique.  Let's say doc1 contains the token
>> foo and has the properties weight1 =3D 0.75, weight2 =3D 0.90, =
frequency =3D 10
>>=20
>> Now, let's say doc2 also contains the token
>> foo with properties: weight1 =3D 0.8, weight2 =3D 0.75, frequency =3D =
5
>>=20
>> Now, I want to search for all the documents that contain foo, but I =
want them sorted by frequency.
>>=20
>> Then, I would have doc1, doc2.
>>=20
>> Now, I want to search for all the documents that contain foon, but I =
want them sorted by weight1.
>> Then, I would have doc2, doc1
>>=20
>> Does that clarify?
>>=20
>>=20
>> On May 5, 2011, at 3:01 PM, Mike Sokolov wrote:
>>=20
>>  =20
>>> Are the tokens unique within a document? If so, why not store a =
document for every doc/token pair with fields:
>>>=20
>>> id (doc#/token#)
>>> doc-id (doc#)
>>> token
>>> weight1
>>> weight2
>>> frequency
>>>=20
>>> Then search for token, sort by weight1, weight2 or frequency.
>>>=20
>>> If the token matches are unique within a document you will only get =
each document listed once.  If they aren't unique, it's not clear what =
you want to sort by anyway....
>>>=20
>>> -Mike
>>>=20
>>> On 05/05/2011 04:12 PM, Chris Schilling wrote:
>>>    =20
>>>> Hi,
>>>>=20
>>>> I am trying to figure out how to solve this problem:
>>>>=20
>>>> I have about 500,000 files that I would like to index, but the =
files are structured.  So, each file has the following layout:
>>>>=20
>>>> doc1
>>>> token1, weight11, frequency1, weight21
>>>> token2, weight12, frequency2, weight22
>>>> .
>>>> .
>>>> .
>>>>=20
>>>> etc for 500,000 docs.
>>>>=20
>>>> Basically, I would like to index the tokens for each doc.  When I =
search for a token, I would like to be able to return the top docs =
sorted by weight1, frequency, or weight2.
>>>>=20
>>>> So, in my naive setup, I loop through the files in the directory, =
then I loop through the lines of the file.   In side of the loop through =
each file, I call this function:
>>>>=20
>>>> 	public Document processKeywords(Document doc, String keyword, =
Float weight1, Float weight2, Integer frequency) throws Exception {
>>>> 			Document doc =3D new Document();
>>>> 			doc.add(new Field("keywords", keyword, =
Field.Store.NO, Field.Index.ANALYZED));		=09
>>>> 			doc.add(new NumericField(keyword+"weight1", =
Field.Store.YES, true).setFloatValue(weight1));		=09
>>>> 			doc.add(new NumericField(keyword+"weight2", =
Field.Store.YES, true).setFloatValue(weight2));		=09
>>>> 			doc.add(new NumericField(keyword+"frequency", =
Field.Store.YES, true).setFloatValue(frequency));		=09
>>>> 			return doc;
>>>> 	}
>>>>=20
>>>> So, for each token, I create 3 new fields each time. Notice how I =
am trying to index the keyword in the "keywords" field.  For the weights =
and frequency, I create a new field with a name based on the keyword.  =
On average, I have 100 tokens per document, so each document will have =
about 300 distinct fields.
>>>>=20
>>>> When running my program, the lucene portion eats up tons of memory =
and when it gets to the max alloted by the JVM (I have tried allowing up =
to 4 Gb), the program slows to a crawl.  I assume it is spending all of =
its time in garbage collection due to all these fields.
>>>>=20
>>>> My code above seems like a very hacky way of accomplishing what I =
want (sorting documents based on keyword search using different numeric =
fields associated with that keyword).
>>>>=20
>>>> FYI, here is the main search code, where q is the token I am =
searching for and sortby is the field I want to use to sort.  I setup a =
QP to search for the keyword in the "keywords" field.  Then, I can =
extract the stats that I indexed for the given query keyword.
>>>>=20
>>>> 	private static final QueryParser parser =3D new =
QueryParser(Version.LUCENE_30, "keywords", new =
StandardAnalyzer(Version.LUCENE_30));
>>>>=20
>>>> 	public void search(String q, String sortby) throws IOException, =
ParseException {
>>>> 		Query query =3D parser.parse(q);
>>>> 		long start =3D System.currentTimeMillis();
>>>> 		TopDocs hits =3D this.is.search(query, null, 10, new =
Sort(new SortField(q+"sortby", SortField.FLOAT, true)));
>>>> 		long end =3D System.currentTimeMillis();
>>>> 		System.out.println("Found " + hits.totalHits +
>>>> 				" document(s) (in " + (end - start) +
>>>> 				" milliseconds) that matched query '" +
>>>> 				q + "':");
>>>> 		for(ScoreDoc scoreDoc : hits.scoreDocs) {
>>>> 			Document doc =3D this.is.doc(scoreDoc.doc);
>>>> 			String hash =3D doc.get("hash");
>>>> 			System.out.println(hash + " " + =
doc.get(q+"sortby") + " " + hash);
>>>> 		}
>>>> 	}
>>>>=20
>>>> I am pretty new to Lucene, so I hope this makes sense.  I tried to =
pare my problem down as much as possible.  Like I said, the main problem =
I am running into is that after processing about 30000 documents, the =
indexing slows to a crawl and seems to spend all of its time in the =
garbage collector.  I am looking for a more efficient/effective way of =
solving this problem.  Code tidbits would help, but are not necessary :)
>>>>=20
>>>> Thanks for your help,
>>>> Chris S.
>>>>=20
>>>>      =20
>>  =20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 07:05:29 2011
Return-Path: <java-user-return-49648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0FEC73225
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 07:05:29 +0000 (UTC)
Received: (qmail 85102 invoked by uid 500); 6 May 2011 07:05:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85061 invoked by uid 500); 6 May 2011 07:05:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85053 invoked by uid 99); 6 May 2011 07:05:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 07:05:25 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.17.9] (HELO moutng.kundenserver.de) (212.227.17.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 07:05:17 +0000
Received: from brouwer.fritz.box (srbk-5d80437d.pool.mediaWays.net [93.128.67.125])
	by mrelayeu.kundenserver.de (node=mreu1) with ESMTP (Nemesis)
	id 0LiGhD-1PvIc22bwZ-00nTON; Fri, 06 May 2011 09:04:54 +0200
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Thoughts on Search Analytics?
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <72890.34027.qm@web130122.mail.mud.yahoo.com>
Date: Fri, 6 May 2011 09:04:52 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <2AAD3AB1-479C-4C06-AFC4-7D6D99AF9132@hoplahup.net>
References: <286819.99825.qm@web130121.mail.mud.yahoo.com> <569EB578-623D-43FD-B2D9-3BCD72CFB0AC@hoplahup.net> <72890.34027.qm@web130122.mail.mud.yahoo.com>
To: java-user@lucene.apache.org,
 Otis Gospodnetic <otis_gospodnetic@yahoo.com>
X-Mailer: Apple Mail (2.1078)
X-Provags-ID: V02:K0:AKkmTRjJVcv42kAMpxpp0tq5RIV7P7SSk9zRtY7o8qm
 XwnyOOOlcefStdVX6m22BtD/5fbX2yHnYzXYf5x0XAVTPA2HGY
 LmduQRMw9atm5xdDIRZjzMYUYDPir1niKhuVPuKOZRtfdf7vxS
 vwvwL3x/XERItCoGuaMBua8qDjSUsHuVglhtIhzHFWcWWdpUjB
 /19VejEmC/4cca1kaHDm01dyxCltjrXKrfgeOXfzM8=


Le 6 mai 2011 =E0 00:20, Otis Gospodnetic a =E9crit :
>> thus far, only search-testing has provided some analytics measures =
for us =20
>> (precision and recall ones). We, of course, construct the test-suites =
from the =20
>> logs.
>=20
> Interesting.  It sounds like you don't currently utilize any sort of =
reporting=20
> tool that would tell you more about users' search experience other =
than what you=20
> can glean from the logs (number of hits, query string, any other =
params like hl,=20
> fq, etc., request handler used, and latency).? =20

Correct, there was no plan for such operation yet. It can sure be a =
useful thing.
I wonder if there's a lot of literature about such best practice btw.=20
This I would be very interested to hear.

> So you can't really tell, for=20
> example, what percentage of queries are getting DYM suggestions or =
what=20
> percentage of queries originate from DYM suggestion, right?  You also =
can't tell=20
> which queries result in very low click-through rate? etc.

I think that one of the keys here is that we would need external =
linkable queries, and in the ActiveMath engine I've been working on =
there was none such unfortunately.=20

> Those are some examples of search analytics reports that I was =
thinking people=20
> might be running in order to better understand how their search is =
behaving and=20
> what users are experiencing.

It sure is desirable but the toolset was not right-away available for =
this.

The simple log counts as Fran=E7ois Schiettecatte just responded in the =
solr list would even be useful but again, it needs a little extra =
programming.

All people I met would recommend Google Analytics for this. I tend to =
dislike their approach and do not know open-source, "my server side", =
solutions. Hence I made this thread public to hear about "satelites" =
(which are somewhat lucene related).

paul=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 09:07:20 2011
Return-Path: <java-user-return-49649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2618C3C8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 09:07:20 +0000 (UTC)
Received: (qmail 48025 invoked by uid 500); 6 May 2011 09:07:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47867 invoked by uid 500); 6 May 2011 09:07:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47857 invoked by uid 99); 6 May 2011 09:07:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:07:16 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:07:12 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 34897C218A
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 11:06:50 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id y4b8rEB2dwts for <java-user@lucene.apache.org>;
	Fri,  6 May 2011 11:06:49 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id DBC3BC211B
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 11:06:49 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Fri, 6 May 2011 11:06:49 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 6 May 2011 11:06:48 +0200
Subject: AW: Using Solr's (Auto)suggest with plain lucene
Thread-Topic: Using Solr's (Auto)suggest with plain lucene
Thread-Index: AcwLJIbrIj/d+L2wRfuUsadhU+yulQAp9xgQ
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51FC8@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
 <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com>
In-Reply-To: <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SSBoYXZlIGNvbWUgYWNyb3NzIFRTVExvb2t1cC4gDQpJbiB3aGljaCBqYXIgRG8gSSBmaW5kIEZT
VExvb2t1cD8gRG9lcyBhbnkgb2YgdGhlc2UgbG9va3VwLWNsYXNzZXMgYWxsb3cgY2FzZSBpbnNl
bnNpdGl2ZSBsb29rdXBzPyBNeSB0ZXJtcyBhcmUgKHVuZm9ydHVuYXRlbHkpIGNhc2VkLg0KDQpX
aGF0IExvb2t1cCAic2l0cyIgYmVoaW5kIHRoaXMgc3VnZ2VzdGVyIA0KaHR0cDovL3NlYXJjaC1s
dWNlbmUuY29tL20vNTg2Z0E0Y2NMMTENCmhlcmU/DQoNCg0KPiAtLS0tLVVyc3Byw7xuZ2xpY2hl
IE5hY2hyaWNodC0tLS0tDQo+IFZvbjogRGF3aWQgV2Vpc3MgW21haWx0bzpkYXdpZC53ZWlzc0Bn
bWFpbC5jb21dDQo+IEdlc2VuZGV0OiBEb25uZXJzdGFnLCA1LiBNYWkgMjAxMSAxNTowMA0KPiBB
bjogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEJldHJlZmY6IFJlOiBVc2luZyBTb2xy
J3MgKEF1dG8pc3VnZ2VzdCB3aXRoIHBsYWluIGx1Y2VuZQ0KPiANCj4gSWYgeW91IGNoZWNrIG91
dCB0aGUgc291cmNlIGNvZGUgb2Ygc29sci9sdWNlbmUsIGxvb2sgYXQgRlNUTG9va3VwIGNsYXNz
IGFuZA0KPiBGU1RMb29rdXBUZXN0IC0tIHlvdSBjYW4gcG9wdWxhdGUgRlNUTG9va3VwIG1hbnVh
bGx5IHdpdGggdGVybXMvIHBocmFzZXMNCj4gZnJvbSB5b3VyIGluZGV4IGFuZCB0aGVuIHVzZSB0
aGUgcmVzdWx0aW5nIGF1dG9tYXRvbiBmb3Igc3VnZ2VzdGlvbnMuDQo+IA0KPiBEYXdpZA0KPiAN
Cj4gT24gVGh1LCBNYXkgNSwgMjAxMSBhdCAyOjU0IFBNLCBDbGVtZW5zIFd5c3MgPGNsZW1lbnNk
ZXZAbXlzaWduLmNoPg0KPiB3cm90ZToNCj4gDQo+ID4gSSBoYXZlIGltcGxlbWVudGVkIG15IGlu
ZGV4IChpbiBmYWN0IGl0J3MgYSBwbHVnYWJsZSBpbmRleGluZyBBUEkpIGluDQo+ID4gInBsYWlu
IEx1Y2VuZSIuIEl0IHRyaWVkIHRvIGltcGxlbWVudCBhIHRlcm0gc3VnZ2VzdGlvbiBtZWNoYW5p
c20gb24NCj4gPiBteSBvd24sIGJlaW5nIG5vdCB0byBoYXBweSBzbyBmYXIuDQo+ID4gQXQNCj4g
PiBodHRwOi8vc2VhcmNoLQ0KPiBsdWNlbmUuY29tL20vMFFCdjQxc3NHbGgvc3VnZ2VzdGlvbiZz
dWJqPUF1dG8rU3VnZ2VzdA0KPiA+IEkgaGF2ZSBzZWVuIFNvbHIncyBhdXRvIHN1Z2dlc3Rpb24g
Zm9yIHNlYXJjaCB0ZXJtcy4gQXBwYXJ0IGZyb20gbm90DQo+ID4gYmVpbmcgImZ1enp5IiBpdCBs
b29rcyBxdWl0ZSBwcm9taXNpbmcuDQo+ID4NCj4gPiBIb3cgZWFzaWx5IGNhbiBJIEludGVncmF0
ZSBTb2xyJ3Mgc3VnZ2VzdGlvbiB3aXRoIG15IEx1Y2VuZSBpbmRleD8NCj4gPg0KPiA+IFRoeA0K
PiA+IENsZW1lbnMNCj4gPg0KPiA+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+IFRvIHVuc3Vic2NyaWJlLCBl
LW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiA+IEZvciBh
ZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUu
b3JnDQo+ID4NCj4gPg0K


From java-user-return-49650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 09:12:42 2011
Return-Path: <java-user-return-49650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D9E4E5C4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 09:12:42 +0000 (UTC)
Received: (qmail 56207 invoked by uid 500); 6 May 2011 09:12:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56171 invoked by uid 500); 6 May 2011 09:12:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56163 invoked by uid 99); 6 May 2011 09:12:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:12:40 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:12:34 +0000
Received: by fxm7 with SMTP id 7so3803316fxm.35
        for <java-user@lucene.apache.org>; Fri, 06 May 2011 02:12:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=rMN94j9yzN5WN7lwbCU8Cp+jNAPRFzwnyzUoc3FTeRE=;
        b=OfWUk5cBkueArulEfrzImJAi4j6DFpCHR7PWsSeFku2zQyLWYG5aKsCQLrXt4vozoY
         bDoB261s2a+QwuKKugwhmQG+m2iLaoNQoJoyNWLHczZyZBWTAk0rJcLCpts1U1T05N1C
         daKHvuy8zzMi3Umu5M+qyuiUIjkRVoiOAEydQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=i1yCsOo+0g6zVPQM1v0rf829pVHNB9j5UbCznBgoK3D1iTzG9foxz6QgqVtPFuwuAM
         afjB9zvrxkvC6Mavlt2PHD1g+wFN8kzqXJmhaoYbOZX9yv/Y+70bq07in/NzcgWCofnG
         IUa9/obg8MibTLaRPbiFvivhV/9Lakiw+WEns=
Received: by 10.223.24.153 with SMTP id v25mr159300fab.29.1304673133901; Fri,
 06 May 2011 02:12:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Fri, 6 May 2011 02:11:34 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51FC8@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
 <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51FC8@Exchange2007.mysigndomain.corp>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 6 May 2011 11:11:34 +0200
Message-ID: <BANLkTimsYWVPeFfFnvJe7_pTJaPt7YGkpg@mail.gmail.com>
Subject: Re: Using Solr's (Auto)suggest with plain lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151747342cb2a16a04a297e265
X-Virus-Checked: Checked by ClamAV on apache.org

--00151747342cb2a16a04a297e265
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

1. FSTLookup is in the trunk only, it has not been released.
2. Case-insensitive lookups are possible, you'd just need to pass normalize=
d
tokens from which the dictionary is built and then use the same
normalization at the time you query for suggestions.
3. "http://search-lucene.com/m/586gA4ccL11". I have no idea.

Dawid

On Fri, May 6, 2011 at 11:06 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:

> I have come across TSTLookup.
> In which jar Do I find FSTLookup? Does any of these lookup-classes allow
> case insensitive lookups? My terms are (unfortunately) cased.
>
> What Lookup "sits" behind this suggester
> http://search-lucene.com/m/586gA4ccL11
> here?
>
>
> > -----Urspr=C3=BCngliche Nachricht-----
> > Von: Dawid Weiss [mailto:dawid.weiss@gmail.com]
> > Gesendet: Donnerstag, 5. Mai 2011 15:00
> > An: java-user@lucene.apache.org
> > Betreff: Re: Using Solr's (Auto)suggest with plain lucene
> >
> > If you check out the source code of solr/lucene, look at FSTLookup clas=
s
> and
> > FSTLookupTest -- you can populate FSTLookup manually with terms/ phrase=
s
> > from your index and then use the resulting automaton for suggestions.
> >
> > Dawid
> >
> > On Thu, May 5, 2011 at 2:54 PM, Clemens Wyss <clemensdev@mysign.ch>
> > wrote:
> >
> > > I have implemented my index (in fact it's a plugable indexing API) in
> > > "plain Lucene". It tried to implement a term suggestion mechanism on
> > > my own, being not to happy so far.
> > > At
> > > http://search-
> > lucene.com/m/0QBv41ssGlh/suggestion&subj=3DAuto+Suggest
> > > I have seen Solr's auto suggestion for search terms. Appart from not
> > > being "fuzzy" it looks quite promising.
> > >
> > > How easily can I Integrate Solr's suggestion with my Lucene index?
> > >
> > > Thx
> > > Clemens
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>

--00151747342cb2a16a04a297e265--

From java-user-return-49651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 09:18:46 2011
Return-Path: <java-user-return-49651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B566B36B1
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 09:18:46 +0000 (UTC)
Received: (qmail 61562 invoked by uid 500); 6 May 2011 09:18:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61522 invoked by uid 500); 6 May 2011 09:18:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61514 invoked by uid 99); 6 May 2011 09:18:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:18:44 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:18:38 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 6EDFFC2121
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 11:18:18 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5+FJ1bP2qU8z for <java-user@lucene.apache.org>;
	Fri,  6 May 2011 11:18:17 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id E6910C211B
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 11:18:17 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Fri, 6 May 2011 11:18:17 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 6 May 2011 11:18:16 +0200
Subject: AW: Using Solr's (Auto)suggest with plain lucene
Thread-Topic: Using Solr's (Auto)suggest with plain lucene
Thread-Index: AcwLzcKU3tzLWvoNQO2MNc9XxPy7LQAAIlsQ
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A51FCF@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
 <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51FC8@Exchange2007.mysigndomain.corp>
 <BANLkTimsYWVPeFfFnvJe7_pTJaPt7YGkpg@mail.gmail.com>
In-Reply-To: <BANLkTimsYWVPeFfFnvJe7_pTJaPt7YGkpg@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

VGh4IERhd2lkLA0KQ291bGQgeW91IGJlIG1vcmUgcHJlY2lzZSBvbiAyLiA/IEknZCBsaWtlIHRv
IGxlYXZlIHRoZSBzdWdnZXN0ZWQgdGVybXMgdW50b3VjaGVkLCBpLmUuIGNhc2VkLg0KDQpDbGVt
ZW5zDQoNCj4gLS0tLS1VcnNwcsO8bmdsaWNoZSBOYWNocmljaHQtLS0tLQ0KPiBWb246IERhd2lk
IFdlaXNzIFttYWlsdG86ZGF3aWQud2Vpc3NAZ21haWwuY29tXQ0KPiBHZXNlbmRldDogRnJlaXRh
ZywgNi4gTWFpIDIwMTEgMTE6MTINCj4gQW46IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0K
PiBCZXRyZWZmOiBSZTogVXNpbmcgU29scidzIChBdXRvKXN1Z2dlc3Qgd2l0aCBwbGFpbiBsdWNl
bmUNCj4gDQo+IDEuIEZTVExvb2t1cCBpcyBpbiB0aGUgdHJ1bmsgb25seSwgaXQgaGFzIG5vdCBi
ZWVuIHJlbGVhc2VkLg0KPiAyLiBDYXNlLWluc2Vuc2l0aXZlIGxvb2t1cHMgYXJlIHBvc3NpYmxl
LCB5b3UnZCBqdXN0IG5lZWQgdG8gcGFzcyBub3JtYWxpemVkDQo+IHRva2VucyBmcm9tIHdoaWNo
IHRoZSBkaWN0aW9uYXJ5IGlzIGJ1aWx0IGFuZCB0aGVuIHVzZSB0aGUgc2FtZQ0KPiBub3JtYWxp
emF0aW9uIGF0IHRoZSB0aW1lIHlvdSBxdWVyeSBmb3Igc3VnZ2VzdGlvbnMuDQo+IDMuICJodHRw
Oi8vc2VhcmNoLWx1Y2VuZS5jb20vbS81ODZnQTRjY0wxMSIuIEkgaGF2ZSBubyBpZGVhLg0KPiAN
Cj4gRGF3aWQNCj4gDQo+IE9uIEZyaSwgTWF5IDYsIDIwMTEgYXQgMTE6MDYgQU0sIENsZW1lbnMg
V3lzcyA8Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+IHdyb3RlOg0KPiANCj4gPiBJIGhhdmUgY29t
ZSBhY3Jvc3MgVFNUTG9va3VwLg0KPiA+IEluIHdoaWNoIGphciBEbyBJIGZpbmQgRlNUTG9va3Vw
PyBEb2VzIGFueSBvZiB0aGVzZSBsb29rdXAtY2xhc3Nlcw0KPiA+IGFsbG93IGNhc2UgaW5zZW5z
aXRpdmUgbG9va3Vwcz8gTXkgdGVybXMgYXJlICh1bmZvcnR1bmF0ZWx5KSBjYXNlZC4NCj4gPg0K
PiA+IFdoYXQgTG9va3VwICJzaXRzIiBiZWhpbmQgdGhpcyBzdWdnZXN0ZXINCj4gPiBodHRwOi8v
c2VhcmNoLWx1Y2VuZS5jb20vbS81ODZnQTRjY0wxMQ0KPiA+IGhlcmU/DQo+ID4NCj4gPg0KPiA+
ID4gLS0tLS1VcnNwcsO8bmdsaWNoZSBOYWNocmljaHQtLS0tLQ0KPiA+ID4gVm9uOiBEYXdpZCBX
ZWlzcyBbbWFpbHRvOmRhd2lkLndlaXNzQGdtYWlsLmNvbV0NCj4gPiA+IEdlc2VuZGV0OiBEb25u
ZXJzdGFnLCA1LiBNYWkgMjAxMSAxNTowMA0KPiA+ID4gQW46IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiA+ID4gQmV0cmVmZjogUmU6IFVzaW5nIFNvbHIncyAoQXV0bylzdWdnZXN0IHdp
dGggcGxhaW4gbHVjZW5lDQo+ID4gPg0KPiA+ID4gSWYgeW91IGNoZWNrIG91dCB0aGUgc291cmNl
IGNvZGUgb2Ygc29sci9sdWNlbmUsIGxvb2sgYXQgRlNUTG9va3VwDQo+ID4gPiBjbGFzcw0KPiA+
IGFuZA0KPiA+ID4gRlNUTG9va3VwVGVzdCAtLSB5b3UgY2FuIHBvcHVsYXRlIEZTVExvb2t1cCBt
YW51YWxseSB3aXRoIHRlcm1zLw0KPiA+ID4gcGhyYXNlcyBmcm9tIHlvdXIgaW5kZXggYW5kIHRo
ZW4gdXNlIHRoZSByZXN1bHRpbmcgYXV0b21hdG9uIGZvcg0KPiBzdWdnZXN0aW9ucy4NCj4gPiA+
DQo+ID4gPiBEYXdpZA0KPiA+ID4NCj4gPiA+IE9uIFRodSwgTWF5IDUsIDIwMTEgYXQgMjo1NCBQ
TSwgQ2xlbWVucyBXeXNzDQo+IDxjbGVtZW5zZGV2QG15c2lnbi5jaD4NCj4gPiA+IHdyb3RlOg0K
PiA+ID4NCj4gPiA+ID4gSSBoYXZlIGltcGxlbWVudGVkIG15IGluZGV4IChpbiBmYWN0IGl0J3Mg
YSBwbHVnYWJsZSBpbmRleGluZyBBUEkpDQo+ID4gPiA+IGluICJwbGFpbiBMdWNlbmUiLiBJdCB0
cmllZCB0byBpbXBsZW1lbnQgYSB0ZXJtIHN1Z2dlc3Rpb24NCj4gPiA+ID4gbWVjaGFuaXNtIG9u
IG15IG93biwgYmVpbmcgbm90IHRvIGhhcHB5IHNvIGZhci4NCj4gPiA+ID4gQXQNCj4gPiA+ID4g
aHR0cDovL3NlYXJjaC0NCj4gPiA+IGx1Y2VuZS5jb20vbS8wUUJ2NDFzc0dsaC9zdWdnZXN0aW9u
JnN1Ymo9QXV0bytTdWdnZXN0DQo+ID4gPiA+IEkgaGF2ZSBzZWVuIFNvbHIncyBhdXRvIHN1Z2dl
c3Rpb24gZm9yIHNlYXJjaCB0ZXJtcy4gQXBwYXJ0IGZyb20NCj4gPiA+ID4gbm90IGJlaW5nICJm
dXp6eSIgaXQgbG9va3MgcXVpdGUgcHJvbWlzaW5nLg0KPiA+ID4gPg0KPiA+ID4gPiBIb3cgZWFz
aWx5IGNhbiBJIEludGVncmF0ZSBTb2xyJ3Mgc3VnZ2VzdGlvbiB3aXRoIG15IEx1Y2VuZSBpbmRl
eD8NCj4gPiA+ID4NCj4gPiA+ID4gVGh4DQo+ID4gPiA+IENsZW1lbnMNCj4gPiA+ID4NCj4gPiA+
ID4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tDQo+ID4gPiA+IC0tLSBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOg0KPiA+ID4g
PiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiA+ID4gRm9yIGFk
ZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5v
cmcNCj4gPiA+ID4NCj4gPiA+ID4NCj4gPg0K


From java-user-return-49652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 09:31:02 2011
Return-Path: <java-user-return-49652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CB8AD3375
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 09:31:02 +0000 (UTC)
Received: (qmail 78990 invoked by uid 500); 6 May 2011 09:31:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78937 invoked by uid 500); 6 May 2011 09:31:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78929 invoked by uid 99); 6 May 2011 09:31:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:31:00 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 09:30:54 +0000
Received: by fxm7 with SMTP id 7so3827874fxm.35
        for <java-user@lucene.apache.org>; Fri, 06 May 2011 02:30:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=CiltaGAIasJZeYRyTDwmM+ELBGc3QZIFdkv046YFT/8=;
        b=jaU2Jeci5W9V7Y+xyXak3tXb4p0J4GzDR5C5J2M6AR4Rxhk3/QWd9GC5/3PZ6zW2s5
         aaKu3ZF1s+PXWyxyYte8CHHpBtkB1bShSw19x9md5TxqTeRsY00c6yhX7AVw9dqEHcPR
         nUfgtkok0EYmzIMcf5GbOXNhUR5JswbOUJN9w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=BhDs5ta7YTCp/ytANSPkdukn6mCdWw6vvYmaLb3Zebczb1ijKAvfvflfJhaDtn7S3L
         rL35W2FbRonT2cMfs2gSVOxn/Zlx8CDRhLONY2QF6A3BhtF5Nxgl+x0IgkH/1BFbMusy
         449YPntJ/5SK+Jp10Mbi4BwatTy/pcSDZlZK4=
Received: by 10.223.97.196 with SMTP id m4mr1081087fan.105.1304674234143; Fri,
 06 May 2011 02:30:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Fri, 6 May 2011 02:30:14 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51FCF@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
 <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51FC8@Exchange2007.mysigndomain.corp>
 <BANLkTimsYWVPeFfFnvJe7_pTJaPt7YGkpg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51FCF@Exchange2007.mysigndomain.corp>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 6 May 2011 11:30:14 +0200
Message-ID: <BANLkTimBytcqbMiy7OJoFyAMpvzbfg3qCA@mail.gmail.com>
Subject: Re: Using Solr's (Auto)suggest with plain lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517491d5446169204a29824e2
X-Virus-Checked: Checked by ClamAV on apache.org

--001517491d5446169204a29824e2
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

So you'd like case-sensitive lookup, not case-insensitive lookup. FSTLookup
just takes characters from the input and does not perform any normalization=
.
So, if you feed it terms with casing, you'll get (cased) suggestions back.
If you need cased suggestions, but provide normalized (lowercased) prefixes
you'll get nothing, although such a feature would be relatively easy to
implement based on the automaton code currently in the SVN.

Dawid

On Fri, May 6, 2011 at 11:18 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:

> Thx Dawid,
> Could you be more precise on 2. ? I'd like to leave the suggested terms
> untouched, i.e. cased.
>
> Clemens
>
> > -----Urspr=C3=BCngliche Nachricht-----
> > Von: Dawid Weiss [mailto:dawid.weiss@gmail.com]
> > Gesendet: Freitag, 6. Mai 2011 11:12
> > An: java-user@lucene.apache.org
> > Betreff: Re: Using Solr's (Auto)suggest with plain lucene
> >
> > 1. FSTLookup is in the trunk only, it has not been released.
> > 2. Case-insensitive lookups are possible, you'd just need to pass
> normalized
> > tokens from which the dictionary is built and then use the same
> > normalization at the time you query for suggestions.
> > 3. "http://search-lucene.com/m/586gA4ccL11". I have no idea.
> >
> > Dawid
> >
> > On Fri, May 6, 2011 at 11:06 AM, Clemens Wyss <clemensdev@mysign.ch>
> > wrote:
> >
> > > I have come across TSTLookup.
> > > In which jar Do I find FSTLookup? Does any of these lookup-classes
> > > allow case insensitive lookups? My terms are (unfortunately) cased.
> > >
> > > What Lookup "sits" behind this suggester
> > > http://search-lucene.com/m/586gA4ccL11
> > > here?
> > >
> > >
> > > > -----Urspr=C3=BCngliche Nachricht-----
> > > > Von: Dawid Weiss [mailto:dawid.weiss@gmail.com]
> > > > Gesendet: Donnerstag, 5. Mai 2011 15:00
> > > > An: java-user@lucene.apache.org
> > > > Betreff: Re: Using Solr's (Auto)suggest with plain lucene
> > > >
> > > > If you check out the source code of solr/lucene, look at FSTLookup
> > > > class
> > > and
> > > > FSTLookupTest -- you can populate FSTLookup manually with terms/
> > > > phrases from your index and then use the resulting automaton for
> > suggestions.
> > > >
> > > > Dawid
> > > >
> > > > On Thu, May 5, 2011 at 2:54 PM, Clemens Wyss
> > <clemensdev@mysign.ch>
> > > > wrote:
> > > >
> > > > > I have implemented my index (in fact it's a plugable indexing API=
)
> > > > > in "plain Lucene". It tried to implement a term suggestion
> > > > > mechanism on my own, being not to happy so far.
> > > > > At
> > > > > http://search-
> > > > lucene.com/m/0QBv41ssGlh/suggestion&subj=3DAuto+Suggest
> > > > > I have seen Solr's auto suggestion for search terms. Appart from
> > > > > not being "fuzzy" it looks quite promising.
> > > > >
> > > > > How easily can I Integrate Solr's suggestion with my Lucene index=
?
> > > > >
> > > > > Thx
> > > > > Clemens
> > > > >
> > > > > -----------------------------------------------------------------=
-
> > > > > --- To unsubscribe, e-mail:
> > > > > java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > >
>

--001517491d5446169204a29824e2--

From java-user-return-49653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 10:34:11 2011
Return-Path: <java-user-return-49653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 619E6923
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 10:34:11 +0000 (UTC)
Received: (qmail 64219 invoked by uid 500); 6 May 2011 10:34:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64168 invoked by uid 500); 6 May 2011 10:34:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64160 invoked by uid 99); 6 May 2011 10:34:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 10:34:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 10:34:02 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 9DC1B3670916;
	Fri,  6 May 2011 06:33:41 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id S3K18ku31v6C; Fri,  6 May 2011 06:33:35 -0400 (EDT)
Received: from [192.168.0.10] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 059923670915;
	Fri,  6 May 2011 06:33:34 -0400 (EDT)
Message-ID: <4DC3CE7F.10400@ifactory.com>
Date: Fri, 06 May 2011 06:33:35 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: Chris Schilling <chris@cellixis.com>
CC: java-user@lucene.apache.org
Subject: Re: new to lucene, non standard index
References: <659EF0A1-D63B-4550-848E-49AEC1A700CD@cellixis.com> <4DC31E2E.10001@ifactory.com> <E143F68A-888D-4362-AA14-1188A1848E93@cellixis.com> <4DC32094.7080908@ifactory.com> <18E83A7A-C3E2-471C-AE0E-0A9CEBEF1067@cellixis.com>
In-Reply-To: <18E83A7A-C3E2-471C-AE0E-0A9CEBEF1067@cellixis.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

I believe creating a large number of fields is not a good match w/the 
underlying architecture, and you'd be better off w/a large number of 
documents/small number of fields, where the same field occurs in every 
document.  There is some discussion here: 
http://markmail.org/message/hcmt5syca7zdeac6.

-Mike

On 5/5/2011 7:00 PM, Chris Schilling wrote:
> Hey Mike,
>
> My only concern is that I am replacing a large number of fields inside of a Document with a (very large ~50e6) number of Documents.  Will I not run into the same memory issues?  Or do I create only one doc object and reuse it?  With so many Doc/Token pairs, won't searching the index take a lot more time?
>
> Thanks for your help,
> Chris
>
> On May 5, 2011, at 3:11 PM, Mike Sokolov wrote:
>
>> I think the solution I gave you will work.  The only problem is if a token appears twice in the same doc:
>>
>> doc1 has foo with two different sets of weights and frequencies...
>>
>> but I think you're saying that doesn't happen
>>
>> On 05/05/2011 06:09 PM, Chris Schilling wrote:
>>> Hey Mike,


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 12:37:55 2011
Return-Path: <java-user-return-49654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95FA332CD
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 12:37:55 +0000 (UTC)
Received: (qmail 13991 invoked by uid 500); 6 May 2011 12:37:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13947 invoked by uid 500); 6 May 2011 12:37:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13939 invoked by uid 99); 6 May 2011 12:37:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 12:37:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 12:37:49 +0000
Received: by qyk30 with SMTP id 30so3062665qyk.14
        for <java-user@lucene.apache.org>; Fri, 06 May 2011 05:37:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=kQxWssbI1z9N3ctb77HnD9FTtSzy9BDb4itWmjiPXvw=;
        b=hd3FcPzpZ9K+ziUHgExWEwZbotD+WqXkCJ6lVS+j4vrsNuWsqTJJsU8WWGkNNA9TVZ
         R7BWbo352u+Y9cR5HMbx5WMCUjfD6Xo87ww9Vr96wHmQJzhby9bEt2zktQUA7Rk/XaKk
         hc4VvnIuxklPTq1yvWcQqsZ8U/p6ICAmyIDsw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=dW417VDPn+p7KzqAIIeHcmjc05zcwXT6ALMEwSHeqNTzK6ykd5zB3t+I80N7//Pj+p
         C6Bk/mOEQb+Qo9uj3xKsHi1xehBD/y/7JKhRvfSO0MX35pXmydqCCKhMMgbaGXpTwBKG
         JZCU3ydRSV67I3DqFbaI6PQUz1QuEwAJ2J3wM=
MIME-Version: 1.0
Received: by 10.229.77.139 with SMTP id g11mr2487155qck.9.1304685446975; Fri,
 06 May 2011 05:37:26 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Fri, 6 May 2011 05:37:26 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A51E6E@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
	<000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
	<E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
	<BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
	<BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
	<796945.6397.qm@web130103.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
	<733611.86868.qm@web130122.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
	<855496.50707.qm@web130109.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
	<365633.65667.qm@web130104.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51E6E@Exchange2007.mysigndomain.corp>
Date: Fri, 6 May 2011 08:37:26 -0400
Message-ID: <BANLkTinRitUkFTkCUL72doKXpgZvm+hLxw@mail.gmail.com>
Subject: Re: AW: AW: AW: AW: "fuzzy prefix" search
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Well, Solr officially uses Lucene, but you'll do disappointingly
little Java coding. Which some people think is a plus :).

The biggest issue will be making really, really sure that your
schema.xml file in Solr reflects your use in the Lucene code
Actually, I'd swallow the blue pill and just make the leap to
Solr. I'd hazard the guess that it really depends upon the amount
of customized Lucene code you've written in the analyzers/tokenizers
area. But even those are pretty transferable to Solr as plugins.

Your Lucene background will help a lot when using Solr, BTW...

As to your second question, you could just grab the Solr code and
see if you can use/adapt the suggester code.... I confess I have no
idea what that involves, haven't been in that code..

I made the Lucene->Solr transition, and found after a while that
I didn't really want to go back FWIW.

Best
Erick

On Thu, May 5, 2011 at 2:26 AM, Clemens Wyss <clemensdev@mysign.ch> wrote:
> What I am looking for is the autosuggestion implemented here (@solr)
>
> http://search-lucene.com/m/0QBv41ssGlh/suggestion&subj=3DAuto+Suggest
>
> How "easily" can I switch from plain Lucene to Solr?
> Or (even better), can I just make use of "solr-suggestion"?
>
> Clemens
>
>> -----Urspr=FCngliche Nachricht-----
>> Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>> Gesendet: Mittwoch, 4. Mai 2011 22:00
>> An: java-user@lucene.apache.org
>> Betreff: Re: AW: AW: AW: AW: "fuzzy prefix" search
>>
>> We do have EdgeNGramTokenizer if that is what you are after.
>> See how Solr uses it here:
>> http://search-
>> lucene.com/c/Solr:/src/java/org/apache/solr/analysis/EdgeNGramTokenizer
>> Factory.java||EdgeNGramTokenizer
>>
>>
>> Otis
>> ----
>> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene ecosyst=
em
>> search :: http://search-lucene.com/
>>
>>
>>
>> ----- Original Message ----
>> > From: Clemens Wyss <clemensdev@mysign.ch>
>> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
>> > Sent: Wed, May 4, 2011 2:07:40 AM
>> > Subject: AW: AW: AW: AW: "fuzzy prefix" search
>> >
>> > I know this is just an example.
>> > But even the WhitespaceAnalyzer takes the =A0words apart, which I don'=
t
>> >want. I would like the phrases as they are (maximum 3 =A0words, e.g.
>> >"Merlot del Ticino",
>> >...) to be n-gram-ed. I hence want to have the =A0n-grams.
>> > Mer
>> > Merl
>> > Merlo
>> > Merlot
>> > Merlot
>> > Merlot =A0d
>> > ...
>> >
>> > Regards
>> > Clemens
>> > > -----Urspr=FCngliche =A0Nachricht-----
>> > > Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>> > > =A0Gesendet: Dienstag, 3. Mai 2011 23:12
>> > > An: java-user@lucene.apache.org
>> > > =A0Betreff: Re: AW: AW: AW: "fuzzy prefix" search
>> > >
>> > > Clemens - that's =A0just an example. =A0Stick another tokenizer in
>> > > there, like =A0WhitespaceTokenizer in there, for example.
>> > >
>> > > Otis
>> > > =A0----
>> > > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene
>> > > ecosystem =A0search :: http://search-lucene.com/
>> > >
>> > >
>> > >
>> > > ----- Original =A0Message ----
>> > > > From: Clemens Wyss <clemensdev@mysign.ch>
>> > > > To: =A0"java-user@lucene.apache.org" =A0<java-user@lucene.apache.o=
rg>
>> > > =A0> Sent: Tue, May 3, 2011 4:31:14 PM
>> > > > Subject: AW: AW: AW: "fuzzy =A0prefix" search
>> > > >
>> > > > But doesn't the KeyWordTokenizer =A0extract single words out oft h=
e
>> > > >stream? I would =A0like to create =A0n-grams on the stream (field
>> > > >content) as
>> it
>> > > is...
>> > > >
>> > > =A0> > =A0-----Urspr=FCngliche Nachricht-----
>> > > > > Von: Otis =A0Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>> > > =A0> > =A0Gesendet: Dienstag, 3. Mai 2011 21:31
>> > > > > An: java-user@lucene.apache.org
>> > > =A0> > =A0Betreff: Re: AW: AW: "fuzzy prefix" search
>> > > > =A0>
>> > > > > Clemens,
>> > > > >
>> > > > > Something a =A0la:
>> > > > >
>> > > > > public TokenStream tokenStream =A0(String =A0fieldName, Reader r=
) {
>> > > > > =A0 return nw =A0EdgeNGramTokenFilter(new =A0KeywordTokenizer(r)=
,
>> > > > > EdgeNGramTokenFilter.Side.FRONT, 1, 4); }
>> > > > >
>> > > > =A0>
>> > > > > Check out page 265 of Lucene in Action 2.
>> > > > =A0>
>> > > > > =A0Otis
>> > > > > ----
>> > > > > =A0Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
>> > > > > Lucene =A0ecosystem search :: http://search-lucene.com/
>> > > > >
>> > > > >
>> > > > =A0>
>> > > > > ----- Original =A0Message ----
>> > > > > > =A0From: Clemens Wyss <clemensdev@mysign.ch>
>> > > > =A0> > To: =A0"java-user@lucene.apache.org" =A0 <java-
>> user@lucene.apache.org>
>> > > =A0> > =A0> Sent: Tue, May 3, 2011 12:57:39 PM
>> > > > > > =A0Subject: AW: AW: "fuzzy =A0prefix" search
>> > > > > >
>> > > > =A0> > How does an simple Analyzer look that =A0just "n-grams" the
>> >docs/fields.
>> > > > > >
>> > > > > > class =A0 SimpleNGramAnalyzer extends =A0Analyzer { =A0@Overri=
de
>> > > > > =A0> public TokenStream tokenStream ( String fieldName, =A0 Read=
er
>> reader =A0)
>> > > > > > {
>> > > > > > =A0 =A0 =A0EdgeNGramTokenFilter... =A0???
>> > > > > > }
>> > > > > =A0> }
>> > > > > =A0>
>> > > > > > > =A0-----Urspr=FCngliche Nachricht-----
>> > > > > > > Von: =A0 Otis =A0Gospodnetic [mailto:otis_gospodnetic@yahoo.=
com]
>> > > =A0> > =A0> > =A0Gesendet: Dienstag, 3. Mai 2011 13:36 =A0> > > > An=
:
>> > > java-user@lucene.apache.org =A0> > =A0> > =A0Betreff: Re: AW: "fuzzy
>> > > prefix" search =A0> > > =A0>
>> > > > > > > Hi,
>> > > > > > =A0>
>> > > > > > > I =A0didn't =A0read this thread closely, =A0but just in case=
:
>> > > > > > > * Is this =A0something =A0 you can handle with synonyms?
>> > > > > > > * If this is for =A0 English and you are =A0trying to handle=
 typos,
>> > > > > > > =A0there is a
>> > > >list
>> > > > > =A0>of
>> > > > > =A0> > common English misspellings =A0out there that you =A0coul=
d use
>> > > > > for
>> > > > > > > this
>> > > > > perhaps.
>> > > > =A0> > > * Have you =A0considered =A0n-gramming your tokens? =A0 N=
ot sure if
>> > > > > > > this would
>> > > > > =A0 help,
>> > > > > > > didn't read =A0messages/examples closely =A0enough, but =A0y=
ou may
>> > > > > > > want to
>> > > > > =A0look at
>> > > > > > > this if =A0you haven't done =A0so =A0yet.
>> > > > > > >
>> > > > > > > Otis
>> > > > =A0> > > ----
>> > > > > =A0> > Sematext :: http://sematext.com/ :: Solr =A0- =A0Lucene -=
 Nutch
>> > > > > Lucene =A0ecosystem
>> > > > =A0> > > search :: http://search-lucene.com/
>> > > > > > >
>> > > > > =A0> =A0>
>> > > > > > >
>> > > > > > > ----- =A0Original =A0Message =A0----
>> > > > > > > > From: Clemens =A0Wyss <clemensdev@mysign.ch>
>> > > > =A0> > =A0> > To: =A0"java-user@lucene.apache.org" =A0 =A0<java-
>> > > user@lucene.apache.org>
>> > > > =A0> =A0> > =A0> Sent: Tue, May 3, 2011 5:25:30 AM =A0> > > > =A0S=
ubject:
>> > > > AW: "fuzzy prefix" =A0search =A0> > > >
>> > > > > > =A0> > =A0>PrefixQuery
>> > > > > > > > I'd like the =A0 combination =A0of prefix and fuzzy ;-) be=
cause
>> > > > > > > =A0> people
>> > > >could
>> > > > > > > =A0>also =A0 type "menlo" or "m=E4rl" and in any of these ca=
ses I'd
>> > > > > > > =A0like =A0to
>> > > >get
>> > > > > > > =A0>a hit on =A0Merlot (for suggesting =A0Merlot)
>> > > > > > > >
>> > > =A0> > > > > > =A0 -----Urspr=FCngliche =A0 Nachricht-----
>> > > > > > > > > Von: Ian =A0Lea =A0 [mailto:ian.lea@gmail.com]
>> > > > > > =A0> > =A0> =A0Gesendet: =A0Dienstag, 3. Mai 2011 11:22 =A0 > =
An:
>> > > > > > > > java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0Betreff: Re: "fuzzy prefix" =A0search
>> > > > > > =A0> > >
>> > > > > > =A0> =A0> > I'd assumed that =A0FuzzyQuery =A0wouldn't ignore =
=A0case
>> > > > > > but I
>> > > > > > > could be
>> > > > > wrong.
>> > > =A0> > > =A0> > > =A0What would be the edit =A0distance =A0between =
=A0"mer" =A0and
>> >"merlot"?
>> > > > > Would
>> > > > =A0> > > > > it be less that 1.5 =A0which I =A0 reckon would =A0be=
 the value of
>> > > > > > > > > =A0length(term)*0.5 as =A0detailed in =A0the =A0javadocs=
? =A0Seems
>> > > > > > > =A0> > unlikely,
>> > > >but
>> > > > > > > > > I =A0don't really =A0know anything about =A0 the Levensh=
tein (edit
>> > > =A0distance)
>> > > > > > > algorithm as =A0used by =A0 FuzzyQuery.
>> > > > > > > > > =A0Wouldn't a PrefixQuery =A0be =A0more =A0appropriate h=
ere?
>> > > > > > > > =A0>
>> > > > > > > > =A0>
>> > > > > > > =A0> > =A0 --
>> > > > > > > > > =A0Ian.
>> > > =A0> > > > > >
>> > > > > > > > > On Tue, =A0May =A03, =A02011 at 10:10 AM, Clemens Wyss
>> > > > > > > =A0> > <clemensdev@mysign.ch>
>> > > > =A0> > =A0> > =A0> =A0wrote:
>> > > > > > > =A0> > > Unfortunately =A0lowercasing doesn't =A0help.
>> > > > =A0> > > > > > Also, =A0 doesn't the FuzzyQuery ignore =A0 casing?
>> > > > > > > > > =A0>
>> > > > > > =A0> > > >> =A0 -----Urspr=FCngliche =A0Nachricht-----
>> > > =A0> > > > > > >> Von: Ian Lea =A0 [mailto:ian.lea@gmail.com]
>> > > > > > =A0> > =A0> =A0>> =A0Gesendet: Dienstag, 3. Mai 2011 =A011:06 =
=A0> > > >>
>> > > > > > An: java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> Betreff: Re: "fuzzy =A0prefix" =A0search
>> > > > > > > > > =A0 >>
>> > > > > > > > > =A0>> =A0Mer !=3D =A0mer. =A0The latter will be =A0what =
is indexed
>> > > > > > > =A0> > because
>> > > > > > > > > >> =A0StandardAnalyzer calls =A0 LowerCaseFilter.
>> > > > > > > > =A0> >>
>> > > > > > > > =A0> >> =A0 =A0--
>> > > > > > > > > >> Ian.
>> > > > > =A0> =A0> > > >>
>> > > > > > > > > =A0 >>
>> > > > > > =A0> > > >> On =A0Tue, May =A03, 2011 at 9:56 AM, =A0Clemens =
=A0Wyss
>> > > > > > > > =A0> <clemensdev@mysign.ch>
>> > > > =A0> > =A0> > =A0> >> =A0wrote:
>> > > > > =A0> > > > >> =A0> Sorry for coming back =A0to my issue. =A0Can =
anybody
>> > > > > > > > > >> explain why
>> > > =A0>my
>> > > > > > > > > "simple"
>> > > > > > =A0> =A0> > =A0>> unit test below fails? Any =A0 hint/help =A0=
appreciated.
>> > > > > =A0> > > > =A0>> >
>> > > > > > > > > >> =A0> =A0 Directory =A0directory =3D new RAMDirectory(=
);
>> > > > > > > > =A0> >> IndexWriter
>> > > > > =A0> > > > =A0 >> > indexWriter =3D =A0new IndexWriter( =A0direc=
tory, new
>> > > =A0> > > > > =A0> >> > =A0 StandardAnalyzer(
>> > > > > > > > > =A0 =A0Version.LUCENE_31
>> > > > > =A0> > > > >> > =A0), =A0 IndexWriter.MaxFieldLength.UNLIMITED =
=A0);
>> Document
>> > > > =A0> document
>> > > > > =A0> > =A0=3D
>> > > > > > =A0> > > new
>> > > > > > > > > =A0>> > =A0Document(); =A0 document.add( new Field( "tes=
t",
>> "Merlot",
>> > > > =A0> > > > > >> > =A0Field.Store.YES, =A0 Field.Index.ANALYZED ) )=
;
>> > > > > > > > > >> =A0> =A0 indexWriter.addDocument(
>> > > > > > > > > =A0 >> > =A0document ); =A0IndexReader indexReader =3D
>> > > > =A0> > > > > indexWriter.getReader();
>> > > > > > =A0> =A0> > >> > =A0IndexSearcher searcher =3D new =A0 IndexSe=
archer(
>> > > > > > > indexReader );
>> > > > =A0> =A0> > > > >> > Query q =3D new FuzzyQuery( =A0 =A0new Term( =
=A0"test", "Mer"
>> ),
>> > > 0.5f,
>> > > >0,
>> > > > > =A0> > > > >> > 10 ); // =A0or =A0Query q =3D =A0new =A0FuzzyQue=
ry( new
>> > > > > Term(
>> > > > > > > > > >> > =A0"test",
>> > > "Mer"
>> > > > > > =A0> > > =A0>> =A0> ), 0.5f); TopDocs =A0result =3D =A0searche=
r.search( q,
>> > > > > > 10
>> > > > =A0> > );
>> > > > > > > =A0> > >> > =A0 Assert.assertEquals( 1, =A0result.totalHits =
=A0);
>> > > > > > =A0> > =A0> >> >
>> > > > > > > > > =A0>> > - =A0 =A0Clemens
>> > > > > > > > > =A0>> >
>> > > > > > > > > =A0>> =A0>> =A0-----Urspr=FCngliche =A0Nachricht-----
>> > > > > =A0> =A0> > > >> >> Von: =A0Clemens Wyss [mailto:clemensdev@mysi=
gn.ch]
>> > > > > > > =A0> > =A0>> =A0>> Gesendet: Montag, 2. Mai =A02011 =A023:01
>> > > > > > > > > =A0>> >> =A0An: java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >> Betreff: AW: =A0"fuzzy prefix" =A0sear=
ch
>> > > > > > > =A0> > =A0>> =A0>>
>> > > > > > =A0> > > >> =A0>> Is it the =A0combination of FuzzyQuery and =
=A0Term =A0 which
>> > > > > > makes
>> > > >the
>> > > > > > > =A0> > =A0>> >> =A0search to go for "word =A0 boundaries"?
>> > > > > > > > > =A0 >> =A0>>
>> > > > > > > > > >> >> > =A0 =A0 -----Urspr=FCngliche Nachricht-----
>> > > > > > > > > =A0>> >> =A0> Von: =A0Clemens =A0Wyss
>> > > > > > > > > [mailto:clemensdev@mysign.ch]
>> > > > > =A0> > =A0> > =A0>> =A0>> > Gesendet: Montag, =A02. Mai 2011 =A0=
14:13
>> > > > > > > > =A0> >> =A0>> > =A0An: java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >> > Betreff: =A0AW: "fuzzy =A0prefix" =
=A0search
>> > > > > > > > > =A0>> =A0>> =A0>
>> > > > > > > > > =A0>> =A0>> > I tried this too, =A0but unfortunately =A0=
I =A0only
>> > > > > > > > > get
>> > > > > > > > > >> hits =A0when
>> > > =A0> > > > > > =A0>> >> > the search term is a =A0least =A0 as long =
as the word to
>> >be
>> > > >looked
>> > > > =A0> up.
>> > > > > > > > > >> >> =A0 =A0>
>> > > > > > > > > =A0>> >> > =A0E.g.:
>> > > > > > =A0> > > =A0>> >> > =A0...
>> > > > > > > > > =A0>> =A0>> =A0> =A0Directory directory =3D new RAMDirec=
tory();
>> >IndexWriter
>> > > =A0> > > > > > =A0 >> >> > =A0indexWriter =3D =A0new IndexWriter( di=
rectory, =A0>> =A0>>
>> > > > > > =A0> > > > IndexManager.getIndexingAnalyzer(
>> > > > > =A0> =A0> > =A0> >> =A0>> LOCALE_DE ),
>> > > =A0> > > > > =A0> >> >> =A0> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 IndexWr=
iter.MaxFieldLength.UNLIMITED
>> >);
>> > > > > > > > > =A0>> >> =A0 >
>> > > > > > > > > =A0>> >> =A0> =A0Document document =3D new =A0Document()=
;
>> > > document.add(
>> > > > =A0> new
>> > > > > =A0> > > > Field(
>> > > > > =A0> > > > =A0>> >> =A0> "test", "Merlot",
>> > > =A0> > > > > > >> =A0 >> =A0> =A0 =A0 =A0 =A0 =A0 =A0 =A0Field.Store=
.YES, =A0 Field.Index.ANALYZED
>> >) =A0);
>> > > > > > > > > =A0>> =A0>> =A0 indexWriter.addDocument(
>> > > > > > > > > >> =A0 >> > =A0document =A0);
>> > > > > > > > > =A0>> =A0>> >
>> > > > > > > > > >> =A0>> =A0> =A0 IndexReader indexReader =3D
>> indexWriter.getReader();
>> > > > > > > > =A0> =A0 >> >> > IndexSearcher
>> > > > > > > > =A0 > =A0>> >> =A0> searcher =3D new IndexSearcher( =A0 in=
dexReader ); =A0>>
>> > > > > > > > >> =A0 >
>> > > > > > > > > =A0>> >> > Query q =A0=3D new FuzzyQuery( =A0 new Term( =
"test",
>> "Mer"
>> ),
>> > > =A0>0.6f,
>> > > > > > > > > >> >> > 1 =A0); =A0 TopDocs =A0result =3D searcher.searc=
h( q, 10 );
>> > > > > =A0> > > > =A0>> =A0>> > =A0Assert.assertEquals( =A0>> =A0>> =A0=
> 1,
>> > > > =A0> > > > > >> =A0>> result.totalHits ); ...
>> > > =A0> > > > > =A0> =A0 >> >> >
>> > > > =A0> > > > > >> >> > =A0> =A0 -----Urspr=FCngliche =A0Nachricht---=
--
>> > > > > > > > =A0> =A0>> >> > =A0> Von: Uwe Schindler [mailto:uwe@thetap=
hi.de]
>> > > > > > > > >>
>> > > > =A0> > > > > >> =A0> > Gesendet: Montag, 2. Mai =A02011 =A013:50 =
=A0>> >> > =A0> An:
>> > > > > =A0> > > > java-user@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >> > > =A0Betreff: RE: "fuzzy =A0prefix" =
=A0search
>> > > > > > > > =A0> >> =A0>> > =A0>
>> > > > > > > > =A0> =A0>> >> > > Hi,
>> > > > > =A0> > =A0> > >> =A0>> > =A0>
>> > > > > > =A0> =A0> > >> >> > > You can pass an integer =A0 =A0to =A0Fuz=
zyQuery which
>> >defines
>> > > the
>> > > > > > > > =A0> >> >> > =A0> =A0number of =A0characters that are =A0s=
een as prefix.
>> > > > > > > > > >> >> > So =A0all
>> > > > > =A0> > > > =A0>> >> > =A0> terms must match
>> > > > > =A0> > > > >> =A0 =A0>> > > this prefix and the rest =A0of each =
term is matched
>> >using
>> > > > > >fuzzy.
>> > > > > > > > > =A0 >> >> > >
>> > > > > > > > > >> =A0 >> =A0> > =A0Uwe
>> > > > > > > > > =A0>> >> > =A0 >
>> > > > > > > > > =A0>> >> > > =A0-----
>> > > > > =A0> > > =A0> =A0>> >> > > Uwe Schindler
>> > > > > =A0> =A0> > > >> =A0 >> > > H.-H.-Meier-Allee =A063, D-28213 =A0=
Bremen
>> > > > > > > > > =A0>> http://www.thetaphi.de
>> > > =A0> > =A0> > > > =A0>> >> > > =A0 eMail: uwe@thetaphi.de
>> > > > > > > =A0> > =A0>> =A0>> > =A0>
>> > > > > > =A0> > > >> =A0>> > > > =A0-----Original =A0Message-----
>> > > > > > > > =A0> =A0>> >> =A0> > =A0> From: Clemens Wyss
>> > > > > > > > [mailto:clemensdev@mysign.ch]
>> > > > > =A0> > =A0> > =A0>> =A0>> > > > Sent: =A0Monday, May 02, =A02011=
 1:47 PM =A0 >> > > >
>> >To:
>> > > =A0> > > > > > =A0>> java-user@lucene.apache.org =A0> > =A0> > =A0> =
> =A0>> >> >
>> > > > =A0> Subject: =A0"fuzzy prefix" =A0search =A0>> >> > =A0> >
>> > > > > > =A0> > > >> =A0>> =A0> > > I'd =A0like to search =A0fuzzily bu=
t not on a full
>> >term.
>> > > > > > > > > >> =A0>> > =A0 > > E.g.
>> > > > > > > > =A0> >> =A0 >> > > > I have a text "Merlot =A0del =A0Ticin=
o"
>> > > =A0> > =A0> > > > >> >> > > > I'd =A0like
>> > > > > > > =A0> =A0> >> =A0>> =A0> > > "mer", "merr", "melo", =A0... to=
 =A0match.
>> > > > =A0> > > > > >> =A0>> > =A0> >
>> > > =A0> > > > > =A0> >> >> > > > If =A0I =A0use =A0FuzzyQuery only =A0"=
merlot, =A0"merlott"
>> >hit.
>> > > =A0>What
>> > > > > =A0> > > > >> >> =A0 > =A0> > =A0Query-combination should I use?
>> > > > > =A0> > > > >> =A0 >> > > =A0>
>> > > > =A0> > > > > >> >> > =A0> > =A0 Thx
>> > > > > > > > > >> >> > =A0 > =A0> Clemens
>> > > > > > > =A0> > >> >> > =A0> =A0>
>> > > > > > > > > >> =A0 >> =A0> > >
>> > > > > =A0> > > > >> >> =A0> > =A0>
>> > > > > > > =A0> > >> =A0>> > > >
>> > > =A0>--------------------------------------------------------
>> > > > > =A0> > > =A0> =A0>> >> > > > ----
>> > > =A0> > > > > > =A0>> =A0>> =A0> > > =A0---
>> > > > > > > > > =A0>> >> > > =A0> =A0---
>> > > > > > > > > =A0 >> >> =A0> > > --
>> > > > > > > > =A0> >> =A0 >> > > > - =A0To unsubscribe, e-mail:
>> > > > > > =A0> =A0 > > >> >> > > > java-user-unsubscribe@lucene.apache.o=
rg
>> > > =A0> > =A0> > =A0> > =A0>> >> > > =A0> For additional =A0commands, =
=A0e-mail:
>> > > > > > > =A0> > =A0>> >> > =A0> > java-user-help@lucene.apache.org =
=A0 =A0 >> >> > >
>> > > > > > > > > =A0>> >> =A0> =A0>
>> > > > > > > > =A0> =A0>> >> > =A0>
>> > > > > > > > =A0> =A0>> >> > >
>> > > > > > =A0> > =A0> >> >> > >
>> > > =A0>----------------------------------------------------------
>> > > > > =A0> > =A0> > =A0>> >> > > ----
>> > > > =A0> > > > > =A0>> =A0>> > =A0> =A0---
>> > > > > > > > > >> =A0>> > > =A0---
>> > > > > > > > > =A0>> =A0>> =A0 > > - To unsubscribe, e-mail:
>> > > > > > > > > =A0 >> =A0>> > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >> > > For =A0additional =A0commands, =A0=
e-mail:
>> > > > > > > > > =A0>> =A0>> > =A0> java-user-help@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >> >
>> > > =A0> > > > > =A0> >> >> =A0>
>> > > > =A0> > > > > >> =A0>> =A0>
>> > > > > =A0> > > > >> =A0>>
>> > > =A0>--------------------------------------------------------------
>> > > > =A0> > =A0> =A0> > >> >> --
>> > > > > > =A0> > > =A0 >> >> > =A0---
>> > > > > > =A0> > > >> >> =A0> -- To unsubscribe, =A0 =A0e-mail:
>> > > > > > > > > >> =A0>> > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >> > For =A0additional commands, =A0e-mai=
l:
>> > > > > > > =A0> > =A0>> =A0>> > java-user-help@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >>
>> > > > =A0> > > > > =A0>> >>
>> > > > > > =A0> =A0> > >> >>
>> > > > > =A0> > > =A0> >> >>
>> > > =A0>--------------------------------------------------------------
>> > > > =A0> > > =A0> > =A0>> >> ----
>> > > > > =A0> > > > =A0 >> >> --- To =A0unsubscribe, =A0e-mail:
>> > > > > > > > > =A0>> >> java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> >> For =A0additional commands, =A0e-mail:
>> > > > > > > > =A0> java-user-help@lucene.apache.org =A0 =A0 >> >
>> > > > > > > > > >> =A0>
>> > > > > > > > =A0> >> =A0>
>> > > =A0> > > > > > >> >
>> > > =A0>---------------------------------------------------------------
>> > > > =A0> > =A0> > =A0> >> > ----
>> > > > > > =A0> > > =A0 >> > -- To unsubscribe, =A0e-mail:
>> > > =A0> > > > > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> > For additional =A0commands, =A0e-mail:
>> > > > > > > > =A0> java-user-help@lucene.apache.org =A0 =A0 >> >
>> > > > > > > > > >> =A0>
>> > > > > > > > =A0> =A0>>
>> > > > =A0> > > > > >>
>> > > > > > > > =A0> =A0>>
>> > > =A0>----------------------------------------------------------------=
-
>> > > =A0> > > =A0> > =A0> >> ----
>> > > > > > =A0> > > =A0>> To =A0unsubscribe, e-mail: java-user-
>> > > =A0> > unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0>> For additional =A0commands, =A0e-mail:
>> > > > > > > > > java-user-help@lucene.apache.org =A0 =A0 >
>> > > > > > > > > >
>> > > > > > =A0> > > >
>> > > > > =A0> > > > >
>> > > =A0>----------------------------------------------------------------=
--
>> > > =A0> > > =A0> > =A0> > ---
>> > > > > > > =A0> > =A0> To =A0unsubscribe, e-mail:
>> > > > > > > =A0> > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0> For additional commands, =A0e-mail: =A0jav=
a-user-
>> > > > > help@lucene.apache.org
>> > > > =A0> > =A0> =A0> > >
>> > > > > > > > > =A0>
>> > > > > > > =A0> >
>> > > > > > > =A0> =A0>
>> > > > > > > > >
>> > >
>> > > >-------------------------------------------------------------------
>> > > - =A0> > =A0> > =A0> > - To =A0unsubscribe, =A0e-mail:
>> > > > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> > =A0For additional commands, =A0e-mail:
>> > > > > java-user-help@lucene.apache.org =A0 > > =A0>
>> > > > > > > >
>> > > > > > =A0> >
>> > >
>> > > --------------------------------------------------------------------
>> > > - =A0> > =A0> > =A0> To =A0unsubscribe, e-mail:
>> > > > =A0> java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0> For =A0additional commands, =A0e-mail:
>> > > > > java-user-help@lucene.apache.org =A0 > > =A0>
>> > > > > > > >
>> > > > > > =A0>
>> > > > > > =A0>
>> >---------------------------------------------------------------------
>> > > =A0> > =A0> > To =A0unsubscribe, e-mail:
>> > > > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> > =A0For additional commands, e-mail:
>> > > > =A0> java-user-help@lucene.apache.org =A0 >
>> > > > > >
>> > > > > >
>> > > > > >
>> > > > > > --------------------------------------------------------------
>> > > > > > ----
>> > > > =A0> > ---
>> > > > > =A0> To =A0unsubscribe, e-mail:
>> > > > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0> For =A0additional commands, e-mail:
>> > > > > java-user-help@lucene.apache.org =A0 >
>> > > > > >
>> > > > >
>> > > > >
>> > > > =A0>
>> > > > ------------------------------------------------------------------
>> > > > --
>> > > =A0> > - To =A0unsubscribe, e-mail:
>> > > java-user-unsubscribe@lucene.apache.org
>> > > =A0> > =A0For additional commands, e-mail:
>> > > java-user-help@lucene.apache.org =A0>
>> > > >
>> > > >
>> > > > ------------------------------------------------------------------
>> > > > ---
>> > > =A0> To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org
>> > > =A0> For =A0additional commands, e-mail:
>> > > java-user-help@lucene.apache.org =A0>
>> > > >
>> > >
>> > >
>> > > --------------------------------------------------------------------
>> > > - To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > > =A0For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To =A0unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For =A0additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 12:50:00 2011
Return-Path: <java-user-return-49655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3A903C44
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 12:50:00 +0000 (UTC)
Received: (qmail 35904 invoked by uid 500); 6 May 2011 12:49:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35861 invoked by uid 500); 6 May 2011 12:49:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35853 invoked by uid 99); 6 May 2011 12:49:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 12:49:58 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 12:49:53 +0000
Received: by qwj9 with SMTP id 9so3120172qwj.35
        for <java-user@lucene.apache.org>; Fri, 06 May 2011 05:49:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=6KMkqLUo6IFk7aRFujn4/QeadqgiQ+k7C3fKDOl3YNA=;
        b=szSwl2/Xxc/B6ttDVLzxO29QkLtie61pDrQHOjVOVAKtfq9qF4pibeYWnXG3WBgkbu
         3s6seVBx55Q3Y6P31hI+Q2u5//7aIcVs/AmbEHbd/TjYURARByT6mzuxZqkWEw0veoOM
         XdOh4h/EMAbb8cJE5MMFS7dp1vCqiFVxXWtlo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=PqjCwyRi7/YKLkuKnDcly83SOW8g3GfNHDJXBl9ojqAWHaNnqPzl3X2bHvxmJWP6MG
         TmJhDfKnbmxZYr8tChyBm70ZpkF9Nt8OqIa9ANkenUgmOosWl7Kb82QzR/cUhb6GSmv8
         mlv8oJhi8jmvKMyi5tfjblZL6l/qWJPc+upog=
MIME-Version: 1.0
Received: by 10.229.78.155 with SMTP id l27mr2448444qck.47.1304686172977; Fri,
 06 May 2011 05:49:32 -0700 (PDT)
Received: by 10.229.245.81 with HTTP; Fri, 6 May 2011 05:49:32 -0700 (PDT)
In-Reply-To: <1304618601115-2904431.post@n3.nabble.com>
References: <1304618601115-2904431.post@n3.nabble.com>
Date: Fri, 6 May 2011 08:49:32 -0400
Message-ID: <BANLkTimNPywOi_D=5rqBsBYzTsRs9=TKqQ@mail.gmail.com>
Subject: Re: Querying Lucene property for exact value
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I'm a bit confused by this:
***********
 With my query, I
would like to only return 'patrol' items and nothing else.  Is there a way
to do this??  My current querying code is below. This returns all items wit=
h
'patrol' in it.

**************************
Are you saying that if you're searching on "patrol", you'd like to get
back only doc 1  below?
1> 'patrol',
2> 'unit patrol',
3> 'police patrol'

If so, you'll need to index the field as single terms, what analyzer are
you using?

Warning: I'm Compass-naive, so....

Best
Erick

On Thu, May 5, 2011 at 2:03 PM, ces3w <ces3w@ccri.com> wrote:
> Hi,
>
> I am new to Lucene, so I apologize if this has been answered, but I've ha=
d
> no success finding the answer after googling around. =A0I am using Compas=
s as
> a Lucene front end and have run into an issue in querying Lucene docs. =
=A0I am
> looking for a way to search a property based on it's complete and exact
> value, not based on a keyword within the property.
>
> An example is that I have an Activity field that can be one of many value=
s
> including 'patrol', 'unit patrol', 'police patrol', etc. =A0With my query=
, I
> would like to only return 'patrol' items and nothing else. =A0Is there a =
way
> to do this?? =A0My current querying code is below. This returns all items=
 with
> 'patrol' in it.
>
> Note: values and field are variables passed to the method indicating
> possible values the lucene field can be.
>
> CompassQueryBuilder.CompassBooleanQueryBuilder boolQuery =3D
> queryBuilder.bool();
> for (String value : values) {
> =A0 =A0 =A0 =A0CompassQuery t =3D queryBuilder.term(field, value);
> =A0 =A0 =A0 =A0boolQuery.addShould(t);
> }
> return boolQuery.toQuery();
>
> Any help would be greatly appreciated.
>
> Thanks,
>
> Chelsea
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Querying=
-Lucene-property-for-exact-value-tp2904431p2904431.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 13:22:15 2011
Return-Path: <java-user-return-49656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 29F0F3FA6
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 13:22:15 +0000 (UTC)
Received: (qmail 88442 invoked by uid 500); 6 May 2011 13:22:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88401 invoked by uid 500); 6 May 2011 13:22:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88393 invoked by uid 99); 6 May 2011 13:22:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 13:22:13 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 13:22:08 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 0581FC2121
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 15:21:47 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 3kXTsSzHSWth for <java-user@lucene.apache.org>;
	Fri,  6 May 2011 15:21:46 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 87820C211B
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 15:21:46 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Fri, 6 May 2011 15:21:46 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 6 May 2011 15:21:44 +0200
Subject: AW: Using Solr's (Auto)suggest with plain lucene
Thread-Topic: Using Solr's (Auto)suggest with plain lucene
Thread-Index: AcwL0FIMWAK1hGIqRYuUbHPWaYsIHQAHOEWg
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A5200D@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
 <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51FC8@Exchange2007.mysigndomain.corp>
 <BANLkTimsYWVPeFfFnvJe7_pTJaPt7YGkpg@mail.gmail.com>
 <E594BA962D832C49A3CF858DAA3A696C1135A51FCF@Exchange2007.mysigndomain.corp>
 <BANLkTimBytcqbMiy7OJoFyAMpvzbfg3qCA@mail.gmail.com>
In-Reply-To: <BANLkTimBytcqbMiy7OJoFyAMpvzbfg3qCA@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

V2hhdCBpZiBJJ2QgbGlrZSB0byBhZGQgImZ1enp5IiBsb29rdXAgZm9yIHRlcm1zPw0KDQpFLmcu
OiANCiJtZWxvIiBzaG91bGQgYWxzbyBicmluZyB1cCAibWVybG90Ig0KDQo+IC0tLS0tVXJzcHLD
vG5nbGljaGUgTmFjaHJpY2h0LS0tLS0NCj4gVm9uOiBEYXdpZCBXZWlzcyBbbWFpbHRvOmRhd2lk
LndlaXNzQGdtYWlsLmNvbV0NCj4gR2VzZW5kZXQ6IEZyZWl0YWcsIDYuIE1haSAyMDExIDExOjMw
DQo+IEFuOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gQmV0cmVmZjogUmU6IFVzaW5n
IFNvbHIncyAoQXV0bylzdWdnZXN0IHdpdGggcGxhaW4gbHVjZW5lDQo+IA0KPiBTbyB5b3UnZCBs
aWtlIGNhc2Utc2Vuc2l0aXZlIGxvb2t1cCwgbm90IGNhc2UtaW5zZW5zaXRpdmUgbG9va3VwLiBG
U1RMb29rdXANCj4ganVzdCB0YWtlcyBjaGFyYWN0ZXJzIGZyb20gdGhlIGlucHV0IGFuZCBkb2Vz
IG5vdCBwZXJmb3JtIGFueSBub3JtYWxpemF0aW9uLg0KPiBTbywgaWYgeW91IGZlZWQgaXQgdGVy
bXMgd2l0aCBjYXNpbmcsIHlvdSdsbCBnZXQgKGNhc2VkKSBzdWdnZXN0aW9ucyBiYWNrLg0KPiBJ
ZiB5b3UgbmVlZCBjYXNlZCBzdWdnZXN0aW9ucywgYnV0IHByb3ZpZGUgbm9ybWFsaXplZCAobG93
ZXJjYXNlZCkgcHJlZml4ZXMNCj4geW91J2xsIGdldCBub3RoaW5nLCBhbHRob3VnaCBzdWNoIGEg
ZmVhdHVyZSB3b3VsZCBiZSByZWxhdGl2ZWx5IGVhc3kgdG8NCj4gaW1wbGVtZW50IGJhc2VkIG9u
IHRoZSBhdXRvbWF0b24gY29kZSBjdXJyZW50bHkgaW4gdGhlIFNWTi4NCj4gDQo+IERhd2lkDQo+
IA0KPiBPbiBGcmksIE1heSA2LCAyMDExIGF0IDExOjE4IEFNLCBDbGVtZW5zIFd5c3MgPGNsZW1l
bnNkZXZAbXlzaWduLmNoPg0KPiB3cm90ZToNCj4gDQo+ID4gVGh4IERhd2lkLA0KPiA+IENvdWxk
IHlvdSBiZSBtb3JlIHByZWNpc2Ugb24gMi4gPyBJJ2QgbGlrZSB0byBsZWF2ZSB0aGUgc3VnZ2Vz
dGVkDQo+ID4gdGVybXMgdW50b3VjaGVkLCBpLmUuIGNhc2VkLg0KPiA+DQo+ID4gQ2xlbWVucw0K
PiA+DQo+ID4gPiAtLS0tLVVyc3Byw7xuZ2xpY2hlIE5hY2hyaWNodC0tLS0tDQo+ID4gPiBWb246
IERhd2lkIFdlaXNzIFttYWlsdG86ZGF3aWQud2Vpc3NAZ21haWwuY29tXQ0KPiA+ID4gR2VzZW5k
ZXQ6IEZyZWl0YWcsIDYuIE1haSAyMDExIDExOjEyDQo+ID4gPiBBbjogamF2YS11c2VyQGx1Y2Vu
ZS5hcGFjaGUub3JnDQo+ID4gPiBCZXRyZWZmOiBSZTogVXNpbmcgU29scidzIChBdXRvKXN1Z2dl
c3Qgd2l0aCBwbGFpbiBsdWNlbmUNCj4gPiA+DQo+ID4gPiAxLiBGU1RMb29rdXAgaXMgaW4gdGhl
IHRydW5rIG9ubHksIGl0IGhhcyBub3QgYmVlbiByZWxlYXNlZC4NCj4gPiA+IDIuIENhc2UtaW5z
ZW5zaXRpdmUgbG9va3VwcyBhcmUgcG9zc2libGUsIHlvdSdkIGp1c3QgbmVlZCB0byBwYXNzDQo+
ID4gbm9ybWFsaXplZA0KPiA+ID4gdG9rZW5zIGZyb20gd2hpY2ggdGhlIGRpY3Rpb25hcnkgaXMg
YnVpbHQgYW5kIHRoZW4gdXNlIHRoZSBzYW1lDQo+ID4gPiBub3JtYWxpemF0aW9uIGF0IHRoZSB0
aW1lIHlvdSBxdWVyeSBmb3Igc3VnZ2VzdGlvbnMuDQo+ID4gPiAzLiAiaHR0cDovL3NlYXJjaC1s
dWNlbmUuY29tL20vNTg2Z0E0Y2NMMTEiLiBJIGhhdmUgbm8gaWRlYS4NCj4gPiA+DQo+ID4gPiBE
YXdpZA0KPiA+ID4NCj4gPiA+IE9uIEZyaSwgTWF5IDYsIDIwMTEgYXQgMTE6MDYgQU0sIENsZW1l
bnMgV3lzcw0KPiA8Y2xlbWVuc2RldkBteXNpZ24uY2g+DQo+ID4gPiB3cm90ZToNCj4gPiA+DQo+
ID4gPiA+IEkgaGF2ZSBjb21lIGFjcm9zcyBUU1RMb29rdXAuDQo+ID4gPiA+IEluIHdoaWNoIGph
ciBEbyBJIGZpbmQgRlNUTG9va3VwPyBEb2VzIGFueSBvZiB0aGVzZSBsb29rdXAtY2xhc3Nlcw0K
PiA+ID4gPiBhbGxvdyBjYXNlIGluc2Vuc2l0aXZlIGxvb2t1cHM/IE15IHRlcm1zIGFyZSAodW5m
b3J0dW5hdGVseSkgY2FzZWQuDQo+ID4gPiA+DQo+ID4gPiA+IFdoYXQgTG9va3VwICJzaXRzIiBi
ZWhpbmQgdGhpcyBzdWdnZXN0ZXINCj4gPiA+ID4gaHR0cDovL3NlYXJjaC1sdWNlbmUuY29tL20v
NTg2Z0E0Y2NMMTENCj4gPiA+ID4gaGVyZT8NCj4gPiA+ID4NCj4gPiA+ID4NCj4gPiA+ID4gPiAt
LS0tLVVyc3Byw7xuZ2xpY2hlIE5hY2hyaWNodC0tLS0tDQo+ID4gPiA+ID4gVm9uOiBEYXdpZCBX
ZWlzcyBbbWFpbHRvOmRhd2lkLndlaXNzQGdtYWlsLmNvbV0NCj4gPiA+ID4gPiBHZXNlbmRldDog
RG9ubmVyc3RhZywgNS4gTWFpIDIwMTEgMTU6MDANCj4gPiA+ID4gPiBBbjogamF2YS11c2VyQGx1
Y2VuZS5hcGFjaGUub3JnDQo+ID4gPiA+ID4gQmV0cmVmZjogUmU6IFVzaW5nIFNvbHIncyAoQXV0
bylzdWdnZXN0IHdpdGggcGxhaW4gbHVjZW5lDQo+ID4gPiA+ID4NCj4gPiA+ID4gPiBJZiB5b3Ug
Y2hlY2sgb3V0IHRoZSBzb3VyY2UgY29kZSBvZiBzb2xyL2x1Y2VuZSwgbG9vayBhdA0KPiA+ID4g
PiA+IEZTVExvb2t1cCBjbGFzcw0KPiA+ID4gPiBhbmQNCj4gPiA+ID4gPiBGU1RMb29rdXBUZXN0
IC0tIHlvdSBjYW4gcG9wdWxhdGUgRlNUTG9va3VwIG1hbnVhbGx5IHdpdGggdGVybXMvDQo+ID4g
PiA+ID4gcGhyYXNlcyBmcm9tIHlvdXIgaW5kZXggYW5kIHRoZW4gdXNlIHRoZSByZXN1bHRpbmcg
YXV0b21hdG9uIGZvcg0KPiA+ID4gc3VnZ2VzdGlvbnMuDQo+ID4gPiA+ID4NCj4gPiA+ID4gPiBE
YXdpZA0KPiA+ID4gPiA+DQo+ID4gPiA+ID4gT24gVGh1LCBNYXkgNSwgMjAxMSBhdCAyOjU0IFBN
LCBDbGVtZW5zIFd5c3MNCj4gPiA+IDxjbGVtZW5zZGV2QG15c2lnbi5jaD4NCj4gPiA+ID4gPiB3
cm90ZToNCj4gPiA+ID4gPg0KPiA+ID4gPiA+ID4gSSBoYXZlIGltcGxlbWVudGVkIG15IGluZGV4
IChpbiBmYWN0IGl0J3MgYSBwbHVnYWJsZSBpbmRleGluZw0KPiA+ID4gPiA+ID4gQVBJKSBpbiAi
cGxhaW4gTHVjZW5lIi4gSXQgdHJpZWQgdG8gaW1wbGVtZW50IGEgdGVybQ0KPiA+ID4gPiA+ID4g
c3VnZ2VzdGlvbiBtZWNoYW5pc20gb24gbXkgb3duLCBiZWluZyBub3QgdG8gaGFwcHkgc28gZmFy
Lg0KPiA+ID4gPiA+ID4gQXQNCj4gPiA+ID4gPiA+IGh0dHA6Ly9zZWFyY2gtDQo+ID4gPiA+ID4g
bHVjZW5lLmNvbS9tLzBRQnY0MXNzR2xoL3N1Z2dlc3Rpb24mc3Viaj1BdXRvK1N1Z2dlc3QNCj4g
PiA+ID4gPiA+IEkgaGF2ZSBzZWVuIFNvbHIncyBhdXRvIHN1Z2dlc3Rpb24gZm9yIHNlYXJjaCB0
ZXJtcy4gQXBwYXJ0DQo+ID4gPiA+ID4gPiBmcm9tIG5vdCBiZWluZyAiZnV6enkiIGl0IGxvb2tz
IHF1aXRlIHByb21pc2luZy4NCj4gPiA+ID4gPiA+DQo+ID4gPiA+ID4gPiBIb3cgZWFzaWx5IGNh
biBJIEludGVncmF0ZSBTb2xyJ3Mgc3VnZ2VzdGlvbiB3aXRoIG15IEx1Y2VuZSBpbmRleD8NCj4g
PiA+ID4gPiA+DQo+ID4gPiA+ID4gPiBUaHgNCj4gPiA+ID4gPiA+IENsZW1lbnMNCj4gPiA+ID4g
PiA+DQo+ID4gPiA+ID4gPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiA+ID4gPiA+ID4gLS0tLQ0KPiA+ID4gPiA+ID4gLS0t
IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6DQo+ID4gPiA+ID4gPiBqYXZhLXVzZXItdW5zdWJzY3Jp
YmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4gPiA+ID4gPiA+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6DQo+ID4gPiA+ID4gPiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0K
PiA+ID4gPiA+ID4NCj4gPiA+ID4gPiA+DQo+ID4gPiA+DQo+ID4NCg==


From java-user-return-49657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 13:28:43 2011
Return-Path: <java-user-return-49657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 015C5312F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 13:28:43 +0000 (UTC)
Received: (qmail 99683 invoked by uid 500); 6 May 2011 13:28:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99640 invoked by uid 500); 6 May 2011 13:28:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99632 invoked by uid 99); 6 May 2011 13:28:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 13:28:40 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 13:28:34 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 531E6C2121
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 15:28:14 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id bBuDs6amp4Ql for <java-user@lucene.apache.org>;
	Fri,  6 May 2011 15:28:13 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 7C7EAC211B
	for <java-user@lucene.apache.org>; Fri,  6 May 2011 15:28:13 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Fri, 6 May 2011 15:28:13 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 6 May 2011 15:28:11 +0200
Subject: AW: AW: AW: AW: AW: "fuzzy prefix" search
Thread-Topic: AW: AW: AW: AW: "fuzzy prefix" search
Thread-Index: AcwL6m32jzDasE8/Tm2u5iySFp3CKwABh6xw
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A5200F@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51B79@Exchange2007.mysigndomain.corp>
	<000001cc08bf$19583a50$4c08aef0$@thetaphi.de>
	<E594BA962D832C49A3CF858DAA3A696C1135A51B7E@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C1135A51BE9@Exchange2007.mysigndomain.corp>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C53@Exchange2007.mysigndomain.corp>
	<BANLkTimKfPiM0TnGM_ehJK_BtHcwH5TukA@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C5E@Exchange2007.mysigndomain.corp>
	<BANLkTinanf_EJprt6rqvuvrCbr8exnPObg@mail.gmail.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51C6E@Exchange2007.mysigndomain.corp>
	<796945.6397.qm@web130103.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D17@Exchange2007.mysigndomain.corp>
	<733611.86868.qm@web130122.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D26@Exchange2007.mysigndomain.corp>
	<855496.50707.qm@web130109.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51D42@Exchange2007.mysigndomain.corp>
	<365633.65667.qm@web130104.mail.mud.yahoo.com>
	<E594BA962D832C49A3CF858DAA3A696C1135A51E6E@Exchange2007.mysigndomain.corp>
 <BANLkTinRitUkFTkCUL72doKXpgZvm+hLxw@mail.gmail.com>
In-Reply-To: <BANLkTinRitUkFTkCUL72doKXpgZvm+hLxw@mail.gmail.com>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Our Lucene/indexing architecture allows any number of index data providers =
to register and put their data into a central index. As every provider can/=
does add his own specific fields to its documents there is no single schema=
,... And yes, this all works, except the problem I have with the "term inde=
x" for term-autosuggestions

> -----Urspr=FCngliche Nachricht-----
> Von: Erick Erickson [mailto:erickerickson@gmail.com]
> Gesendet: Freitag, 6. Mai 2011 14:37
> An: java-user@lucene.apache.org
> Betreff: Re: AW: AW: AW: AW: "fuzzy prefix" search
>
> Well, Solr officially uses Lucene, but you'll do disappointingly little J=
ava
> coding. Which some people think is a plus :).
>
> The biggest issue will be making really, really sure that your schema.xml=
 file in
> Solr reflects your use in the Lucene code Actually, I'd swallow the blue =
pill
> and just make the leap to Solr. I'd hazard the guess that it really depen=
ds
> upon the amount of customized Lucene code you've written in the
> analyzers/tokenizers area. But even those are pretty transferable to Solr=
 as
> plugins.
>
> Your Lucene background will help a lot when using Solr, BTW...
>
> As to your second question, you could just grab the Solr code and see if =
you
> can use/adapt the suggester code.... I confess I have no idea what that
> involves, haven't been in that code..
>
> I made the Lucene->Solr transition, and found after a while that I didn't=
 really
> want to go back FWIW.
>
> Best
> Erick
>
> On Thu, May 5, 2011 at 2:26 AM, Clemens Wyss <clemensdev@mysign.ch>
> wrote:
> > What I am looking for is the autosuggestion implemented here (@solr)
> >
> > http://search-
> lucene.com/m/0QBv41ssGlh/suggestion&subj=3DAuto+Suggest
> >
> > How "easily" can I switch from plain Lucene to Solr?
> > Or (even better), can I just make use of "solr-suggestion"?
> >
> > Clemens
> >
> >> -----Urspr=FCngliche Nachricht-----
> >> Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> >> Gesendet: Mittwoch, 4. Mai 2011 22:00
> >> An: java-user@lucene.apache.org
> >> Betreff: Re: AW: AW: AW: AW: "fuzzy prefix" search
> >>
> >> We do have EdgeNGramTokenizer if that is what you are after.
> >> See how Solr uses it here:
> >> http://search-
> >>
> lucene.com/c/Solr:/src/java/org/apache/solr/analysis/EdgeNGramTokeniz
> >> er
> >> Factory.java||EdgeNGramTokenizer
> >>
> >>
> >> Otis
> >> ----
> >> Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene
> >> ecosystem search :: http://search-lucene.com/
> >>
> >>
> >>
> >> ----- Original Message ----
> >> > From: Clemens Wyss <clemensdev@mysign.ch>
> >> > To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
> >> > Sent: Wed, May 4, 2011 2:07:40 AM
> >> > Subject: AW: AW: AW: AW: "fuzzy prefix" search
> >> >
> >> > I know this is just an example.
> >> > But even the WhitespaceAnalyzer takes the  words apart, which I
> >> >don't want. I would like the phrases as they are (maximum 3  words, e=
.g.
> >> >"Merlot del Ticino",
> >> >...) to be n-gram-ed. I hence want to have the  n-grams.
> >> > Mer
> >> > Merl
> >> > Merlo
> >> > Merlot
> >> > Merlot
> >> > Merlot  d
> >> > ...
> >> >
> >> > Regards
> >> > Clemens
> >> > > -----Urspr=FCngliche  Nachricht-----
> >> > > Von: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> >> > >  Gesendet: Dienstag, 3. Mai 2011 23:12
> >> > > An: java-user@lucene.apache.org
> >> > >  Betreff: Re: AW: AW: AW: "fuzzy prefix" search
> >> > >
> >> > > Clemens - that's  just an example.  Stick another tokenizer in
> >> > > there, like  WhitespaceTokenizer in there, for example.
> >> > >
> >> > > Otis
> >> > >  ----
> >> > > Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch Lucene
> >> > > ecosystem  search :: http://search-lucene.com/
> >> > >
> >> > >
> >> > >
> >> > > ----- Original  Message ----
> >> > > > From: Clemens Wyss <clemensdev@mysign.ch>
> >> > > > To:  "java-user@lucene.apache.org"
> >> > > > <java-user@lucene.apache.org>
> >> > >  > Sent: Tue, May 3, 2011 4:31:14 PM
> >> > > > Subject: AW: AW: AW: "fuzzy  prefix" search
> >> > > >
> >> > > > But doesn't the KeyWordTokenizer  extract single words out oft
> >> > > >he stream? I would  like to create  n-grams on the stream (field
> >> > > >content) as
> >> it
> >> > > is...
> >> > > >
> >> > >  > >  -----Urspr=FCngliche Nachricht-----
> >> > > > > Von: Otis  Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> >> > >  > >  Gesendet: Dienstag, 3. Mai 2011 21:31
> >> > > > > An: java-user@lucene.apache.org
> >> > >  > >  Betreff: Re: AW: AW: "fuzzy prefix" search
> >> > > >  >
> >> > > > > Clemens,
> >> > > > >
> >> > > > > Something a  la:
> >> > > > >
> >> > > > > public TokenStream tokenStream  (String  fieldName, Reader r)
> >> > > > > {
> >> > > > >   return nw  EdgeNGramTokenFilter(new  KeywordTokenizer(r),
> >> > > > > EdgeNGramTokenFilter.Side.FRONT, 1, 4); }
> >> > > > >
> >> > > >  >
> >> > > > > Check out page 265 of Lucene in Action 2.
> >> > > >  >
> >> > > > >  Otis
> >> > > > > ----
> >> > > > >  Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
> >> > > > > Lucene  ecosystem search :: http://search-lucene.com/
> >> > > > >
> >> > > > >
> >> > > >  >
> >> > > > > ----- Original  Message ----
> >> > > > > >  From: Clemens Wyss <clemensdev@mysign.ch>
> >> > > >  > > To:  "java-user@lucene.apache.org"   <java-
> >> user@lucene.apache.org>
> >> > >  > >  > Sent: Tue, May 3, 2011 12:57:39 PM
> >> > > > > >  Subject: AW: AW: "fuzzy  prefix" search
> >> > > > > >
> >> > > >  > > How does an simple Analyzer look that  just "n-grams" the
> >> >docs/fields.
> >> > > > > >
> >> > > > > > class   SimpleNGramAnalyzer extends  Analyzer {  @Override
> >> > > > >  > public TokenStream tokenStream ( String fieldName,
> >> > > > > Reader
> >> reader  )
> >> > > > > > {
> >> > > > > >      EdgeNGramTokenFilter...  ???
> >> > > > > > }
> >> > > > >  > }
> >> > > > >  >
> >> > > > > > >  -----Urspr=FCngliche Nachricht-----
> >> > > > > > > Von:   Otis  Gospodnetic
> >> > > > > > > [mailto:otis_gospodnetic@yahoo.com]
> >> > >  > >  > >  Gesendet: Dienstag, 3. Mai 2011 13:36  > > > > An:
> >> > > java-user@lucene.apache.org  > >  > >  Betreff: Re: AW: "fuzzy
> >> > > prefix" search  > > >  >
> >> > > > > > > Hi,
> >> > > > > >  >
> >> > > > > > > I  didn't  read this thread closely,  but just in case:
> >> > > > > > > * Is this  something   you can handle with synonyms?
> >> > > > > > > * If this is for   English and you are  trying to handle
> >> > > > > > > typos,
> >> > > > > > >  there is a
> >> > > >list
> >> > > > >  >of
> >> > > > >  > > common English misspellings  out there that you  could
> >> > > > > use for
> >> > > > > > > this
> >> > > > > perhaps.
> >> > > >  > > > * Have you  considered  n-gramming your tokens?   Not
> >> > > > sure if
> >> > > > > > > this would
> >> > > > >   help,
> >> > > > > > > didn't read  messages/examples closely  enough, but  you
> >> > > > > > > may want to
> >> > > > >  look at
> >> > > > > > > this if  you haven't done  so  yet.
> >> > > > > > >
> >> > > > > > > Otis
> >> > > >  > > > ----
> >> > > > >  > > Sematext :: http://sematext.com/ :: Solr  -  Lucene -
> >> > > > > Nutch Lucene  ecosystem
> >> > > >  > > > search :: http://search-lucene.com/
> >> > > > > > >
> >> > > > >  >  >
> >> > > > > > >
> >> > > > > > > -----  Original  Message  ----
> >> > > > > > > > From: Clemens  Wyss <clemensdev@mysign.ch>
> >> > > >  > >  > > To:  "java-user@lucene.apache.org"    <java-
> >> > > user@lucene.apache.org>
> >> > > >  >  > >  > Sent: Tue, May 3, 2011 5:25:30 AM  > > > >  Subject:
> >> > > > AW: "fuzzy prefix"  search  > > > >
> >> > > > > >  > >  >PrefixQuery
> >> > > > > > > > I'd like the   combination  of prefix and fuzzy ;-)
> >> > > > > > > > because
> >> > > > > > >  > people
> >> > > >could
> >> > > > > > >  >also   type "menlo" or "m=E4rl" and in any of these case=
s
> >> > > > > > > I'd
> >> > > > > > >  like  to
> >> > > >get
> >> > > > > > >  >a hit on  Merlot (for suggesting  Merlot)
> >> > > > > > > >
> >> > >  > > > > > >   -----Urspr=FCngliche   Nachricht-----
> >> > > > > > > > > Von: Ian  Lea   [mailto:ian.lea@gmail.com]
> >> > > > > >  > >  >  Gesendet:  Dienstag, 3. Mai 2011 11:22   > An:
> >> > > > > > > > java-user@lucene.apache.org
> >> > >  > >  > >  > >  Betreff: Re: "fuzzy prefix"  search
> >> > > > > >  > > >
> >> > > > > >  >  > > I'd assumed that  FuzzyQuery  wouldn't ignore  case
> >> > > > > > but I
> >> > > > > > > could be
> >> > > > > wrong.
> >> > >  > > >  > > >  What would be the edit  distance  between  "mer"
> >> > > and
> >> >"merlot"?
> >> > > > > Would
> >> > > >  > > > > > it be less that 1.5  which I   reckon would  be the
> >> > > > value of
> >> > > > > > > > >  length(term)*0.5 as  detailed in  the  javadocs?
> >> > > > > > > > > Seems
> >> > > > > > >  > > unlikely,
> >> > > >but
> >> > > > > > > > > I  don't really  know anything about   the
> >> > > > > > > > > Levenshtein (edit
> >> > >  distance)
> >> > > > > > > algorithm as  used by   FuzzyQuery.
> >> > > > > > > > >  Wouldn't a PrefixQuery  be  more  appropriate here?
> >> > > > > > > >  >
> >> > > > > > > >  >
> >> > > > > > >  > >   --
> >> > > > > > > > >  Ian.
> >> > >  > > > > > >
> >> > > > > > > > > On Tue,  May  3,  2011 at 10:10 AM, Clemens Wyss
> >> > > > > > >  > > <clemensdev@mysign.ch>
> >> > > >  > >  > >  >  wrote:
> >> > > > > > >  > > > Unfortunately  lowercasing doesn't  help.
> >> > > >  > > > > > > Also,   doesn't the FuzzyQuery ignore   casing?
> >> > > > > > > > >  >
> >> > > > > >  > > > >>   -----Urspr=FCngliche  Nachricht-----
> >> > >  > > > > > > >> Von: Ian Lea   [mailto:ian.lea@gmail.com]
> >> > > > > >  > >  >  >>  Gesendet: Dienstag, 3. Mai 2011  11:06  > > >
> >> > > > > > >>
> >> > > > > > An: java-user@lucene.apache.org
> >> > >  > >  > >  > >  >> Betreff: Re: "fuzzy  prefix"  search
> >> > > > > > > > >   >>
> >> > > > > > > > >  >>  Mer !=3D  mer.  The latter will be  what is
> >> > > > > > > > > indexed
> >> > > > > > >  > > because
> >> > > > > > > > > >>  StandardAnalyzer calls   LowerCaseFilter.
> >> > > > > > > >  > >>
> >> > > > > > > >  > >>    --
> >> > > > > > > > > >> Ian.
> >> > > > >  >  > > > >>
> >> > > > > > > > >   >>
> >> > > > > >  > > > >> On  Tue, May  3, 2011 at 9:56 AM,  Clemens  Wyss
> >> > > > > > > >  > <clemensdev@mysign.ch>
> >> > > >  > >  > >  > >>  wrote:
> >> > > > >  > > > > >>  > Sorry for coming back  to my issue.  Can
> >> > > > > anybody
> >> > > > > > > > > >> explain why
> >> > >  >my
> >> > > > > > > > > "simple"
> >> > > > > >  >  > >  >> unit test below fails? Any   hint/help  apprecia=
ted.
> >> > > > >  > > > >  >> >
> >> > > > > > > > > >>  >   Directory  directory =3D new RAMDirectory();
> >> > > > > > > >  > >> IndexWriter
> >> > > > >  > > > >   >> > indexWriter =3D  new IndexWriter(  directory,
> >> > > > > new
> >> > >  > > > > >  > >> >   StandardAnalyzer(
> >> > > > > > > > >    Version.LUCENE_31
> >> > > > >  > > > > >> >  ),   IndexWriter.MaxFieldLength.UNLIMITED  );
> >> Document
> >> > > >  > document
> >> > > > >  > >  =3D
> >> > > > > >  > > > new
> >> > > > > > > > >  >> >  Document();   document.add( new Field( "test",
> >> "Merlot",
> >> > > >  > > > > > >> >  Field.Store.YES,   Field.Index.ANALYZED ) );
> >> > > > > > > > > >>  >   indexWriter.addDocument(
> >> > > > > > > > >   >> >  document );  IndexReader indexReader =3D
> >> > > >  > > > > > indexWriter.getReader();
> >> > > > > >  >  > > >> >  IndexSearcher searcher =3D new   IndexSearcher=
(
> >> > > > > > > indexReader );
> >> > > >  >  > > > > >> > Query q =3D new FuzzyQuery(    new Term(  "test=
",
> "Mer"
> >> ),
> >> > > 0.5f,
> >> > > >0,
> >> > > > >  > > > > >> > 10 ); //  or  Query q =3D  new  FuzzyQuery( new
> >> > > > > Term(
> >> > > > > > > > > >> >  "test",
> >> > > "Mer"
> >> > > > > >  > > >  >>  > ), 0.5f); TopDocs  result =3D  searcher.search=
(
> >> > > > > > q,
> >> > > > > > 10
> >> > > >  > > );
> >> > > > > > >  > > >> >   Assert.assertEquals( 1,  result.totalHits  );
> >> > > > > >  > >  > >> >
> >> > > > > > > > >  >> > -    Clemens
> >> > > > > > > > >  >> >
> >> > > > > > > > >  >>  >>  -----Urspr=FCngliche  Nachricht-----
> >> > > > >  >  > > > >> >> Von:  Clemens Wyss
> >> > > > > [mailto:clemensdev@mysign.ch]
> >> > > > > > >  > >  >>  >> Gesendet: Montag, 2. Mai  2011  23:01
> >> > > > > > > > >  >> >>  An: java-user@lucene.apache.org
> >> > >  > >  > >  > >  >> >> Betreff: AW:  "fuzzy prefix"  search
> >> > > > > > >  > >  >>  >>
> >> > > > > >  > > > >>  >> Is it the  combination of FuzzyQuery and
> >> > > > > > Term   which makes
> >> > > >the
> >> > > > > > >  > >  >> >>  search to go for "word   boundaries"?
> >> > > > > > > > >   >>  >>
> >> > > > > > > > > >> >> >     -----Urspr=FCngliche Nachricht-----
> >> > > > > > > > >  >> >>  > Von:  Clemens  Wyss
> >> > > > > > > > > [mailto:clemensdev@mysign.ch]
> >> > > > >  > >  > >  >>  >> > Gesendet: Montag,  2. Mai 2011  14:13
> >> > > > > > > >  > >>  >> >  An: java-user@lucene.apache.org
> >> > >  > >  > >  > >  >> >> > Betreff:  AW: "fuzzy  prefix"  search
> >> > > > > > > > >  >>  >>  >
> >> > > > > > > > >  >>  >> > I tried this too,  but unfortunately  I
> >> > > > > > > > > only get
> >> > > > > > > > > >> hits  when
> >> > >  > > > > > >  >> >> > the search term is a  least   as long as
> >> > > the word to
> >> >be
> >> > > >looked
> >> > > >  > up.
> >> > > > > > > > > >> >>    >
> >> > > > > > > > >  >> >> >  E.g.:
> >> > > > > >  > > >  >> >> >  ...
> >> > > > > > > > >  >>  >>  >  Directory directory =3D new RAMDirectory()=
;
> >> >IndexWriter
> >> > >  > > > > > >   >> >> >  indexWriter =3D  new IndexWriter(
> >> > > directory,  >>  >>
> >> > > > > >  > > > > IndexManager.getIndexingAnalyzer(
> >> > > > >  >  > >  > >>  >> LOCALE_DE ),
> >> > >  > > > > >  > >> >>  >
> >> > > IndexWriter.MaxFieldLength.UNLIMITED
> >> >);
> >> > > > > > > > >  >> >>   >
> >> > > > > > > > >  >> >>  >  Document document =3D new  Document();
> >> > > document.add(
> >> > > >  > new
> >> > > > >  > > > > Field(
> >> > > > >  > > > >  >> >>  > "test", "Merlot",
> >> > >  > > > > > > >>   >>  >              Field.Store.YES,
> >> > > Field.Index.ANALYZED
> >> >)  );
> >> > > > > > > > >  >>  >>   indexWriter.addDocument(
> >> > > > > > > > > >>   >> >  document  );
> >> > > > > > > > >  >>  >> >
> >> > > > > > > > > >>  >>  >   IndexReader indexReader =3D
> >> indexWriter.getReader();
> >> > > > > > > >  >   >> >> > IndexSearcher
> >> > > > > > > >   >  >> >>  > searcher =3D new IndexSearcher(
> >> > > > > > > > indexReader );  >>
> >> > > > > > > > >>   >
> >> > > > > > > > >  >> >> > Query q  =3D new FuzzyQuery(   new Term(
> >> > > > > > > > > "test",
> >> "Mer"
> >> ),
> >> > >  >0.6f,
> >> > > > > > > > > >> >> > 1  );   TopDocs  result =3D searcher.search( q=
,
> >> > > > > > > > > >> >> > 10 );
> >> > > > >  > > > >  >>  >> >  Assert.assertEquals(  >>  >>  > 1,
> >> > > >  > > > > > >>  >> result.totalHits ); ...
> >> > >  > > > > >  >   >> >> >
> >> > > >  > > > > > >> >> >  >   -----Urspr=FCngliche  Nachricht-----
> >> > > > > > > >  >  >> >> >  > Von: Uwe Schindler
> >> > > > > > > > [mailto:uwe@thetaphi.de]
> >> > > > > > > > >>
> >> > > >  > > > > > >>  > > Gesendet: Montag, 2. Mai  2011  13:50  >> >> =
>  >
> An:
> >> > > > >  > > > > java-user@lucene.apache.org
> >> > >  > >  > >  > >  >> >> > >  Betreff: RE: "fuzzy  prefix"  search
> >> > > > > > > >  > >>  >> >  >
> >> > > > > > > >  >  >> >> > > Hi,
> >> > > > >  > >  > > >>  >> >  >
> >> > > > > >  >  > > >> >> > > You can pass an integer    to  FuzzyQuery
> >> > > > > > which
> >> >defines
> >> > > the
> >> > > > > > > >  > >> >> >  >  number of  characters that are  seen as p=
refix.
> >> > > > > > > > > >> >> > So  all
> >> > > > >  > > > >  >> >> >  > terms must match
> >> > > > >  > > > > >>    >> > > this prefix and the rest  of each term
> >> > > > > is matched
> >> >using
> >> > > > > >fuzzy.
> >> > > > > > > > >   >> >> > >
> >> > > > > > > > > >>   >>  > >  Uwe
> >> > > > > > > > >  >> >> >   >
> >> > > > > > > > >  >> >> > >  -----
> >> > > > >  > > >  >  >> >> > > Uwe Schindler
> >> > > > >  >  > > > >>   >> > > H.-H.-Meier-Allee  63, D-28213  Bremen
> >> > > > > > > > >  >> http://www.thetaphi.de
> >> > >  > >  > > > >  >> >> > >   eMail: uwe@thetaphi.de
> >> > > > > > >  > >  >>  >> >  >
> >> > > > > >  > > > >>  >> > > >  -----Original  Message-----
> >> > > > > > > >  >  >> >>  > >  > From: Clemens Wyss
> >> > > > > > > > [mailto:clemensdev@mysign.ch]
> >> > > > >  > >  > >  >>  >> > > > Sent:  Monday, May 02,  2011 1:47 PM
> >> > > > > >> > > >
> >> >To:
> >> > >  > > > > > >  >> java-user@lucene.apache.org  > >  > >  > >  >>
> >> > > >> >
> >> > > >  > Subject:  "fuzzy prefix"  search  >> >> >  > >
> >> > > > > >  > > > >>  >>  > > > I'd  like to search  fuzzily but not
> >> > > > > > on a full
> >> >term.
> >> > > > > > > > > >>  >> >   > > E.g.
> >> > > > > > > >  > >>   >> > > > I have a text "Merlot  del  Ticino"
> >> > >  > >  > > > > >> >> > > > I'd  like
> >> > > > > > >  >  > >>  >>  > > > "mer", "merr", "melo",  ... to  match.
> >> > > >  > > > > > >>  >> >  > >
> >> > >  > > > > >  > >> >> > > > If  I  use  FuzzyQuery only  "merlot,  "=
merlott"
> >> >hit.
> >> > >  >What
> >> > > > >  > > > > >> >>   >  > >  Query-combination should I use?
> >> > > > >  > > > > >>   >> > >  >
> >> > > >  > > > > > >> >> >  > >   Thx
> >> > > > > > > > > >> >> >   >  > Clemens
> >> > > > > > >  > > >> >> >  >  >
> >> > > > > > > > > >>   >>  > > >
> >> > > > >  > > > > >> >>  > >  >
> >> > > > > > >  > > >>  >> > > >
> >> > >  >--------------------------------------------------------
> >> > > > >  > > >  >  >> >> > > > ----
> >> > >  > > > > > >  >>  >>  > > >  ---
> >> > > > > > > > >  >> >> > >  >  ---
> >> > > > > > > > >   >> >>  > > > --
> >> > > > > > > >  > >>   >> > > > -  To unsubscribe, e-mail:
> >> > > > > >  >   > > >> >> > > >
> >> > > > > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  >> >> > >  > For additional  commands,  e-mail:
> >> > > > > > >  > >  >> >> >  > > java-user-help@lucene.apache.org
> >> > > > > > > >> >> > >
> >> > > > > > > > >  >> >>  >  >
> >> > > > > > > >  >  >> >> >  >
> >> > > > > > > >  >  >> >> > >
> >> > > > > >  > >  > >> >> > >
> >> > >  >----------------------------------------------------------
> >> > > > >  > >  > >  >> >> > > ----
> >> > > >  > > > > >  >>  >> >  >  ---
> >> > > > > > > > > >>  >> > >  ---
> >> > > > > > > > >  >>  >>   > > - To unsubscribe, e-mail:
> >> > > > > > > > >   >>  >> > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  >> >> > > For  additional  commands,  e-mail:
> >> > > > > > > > >  >>  >> >  > java-user-help@lucene.apache.org
> >> > >  > >  > >  > >  >> >> >
> >> > >  > > > > >  > >> >>  >
> >> > > >  > > > > > >>  >>  >
> >> > > > >  > > > > >>  >>
> >> > >  >--------------------------------------------------------------
> >> > > >  > >  >  > > >> >> --
> >> > > > > >  > > >   >> >> >  ---
> >> > > > > >  > > > >> >>  > -- To unsubscribe,    e-mail:
> >> > > > > > > > > >>  >> > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  >> >> > For  additional commands,  e-mail:
> >> > > > > > >  > >  >>  >> > java-user-help@lucene.apache.org
> >> > >  > >  > >  > >  >> >>
> >> > > >  > > > > >  >> >>
> >> > > > > >  >  > > >> >>
> >> > > > >  > > >  > >> >>
> >> > >  >--------------------------------------------------------------
> >> > > >  > > >  > >  >> >> ----
> >> > > > >  > > > >   >> >> --- To  unsubscribe,  e-mail:
> >> > > > > > > > >  >> >> java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  >> >> For  additional commands,  e-mail:
> >> > > > > > > >  > java-user-help@lucene.apache.org     >> >
> >> > > > > > > > > >>  >
> >> > > > > > > >  > >>  >
> >> > >  > > > > > > >> >
> >> > >  >---------------------------------------------------------------
> >> > > >  > >  > >  > >> > ----
> >> > > > > >  > > >   >> > -- To unsubscribe,  e-mail:
> >> > >  > > > > > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  >> > For additional  commands,  e-mail:
> >> > > > > > > >  > java-user-help@lucene.apache.org     >> >
> >> > > > > > > > > >>  >
> >> > > > > > > >  >  >>
> >> > > >  > > > > > >>
> >> > > > > > > >  >  >>
> >> > >
> >> > > >----------------------------------------------------------------
> >> > > -
> >> > >  > > >  > >  > >> ----
> >> > > > > >  > > >  >> To  unsubscribe, e-mail: java-user-
> >> > >  > > unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  >> For additional  commands,  e-mail:
> >> > > > > > > > > java-user-help@lucene.apache.org     >
> >> > > > > > > > > >
> >> > > > > >  > > > >
> >> > > > >  > > > > >
> >> > >
> >> > > >----------------------------------------------------------------
> >> > > --
> >> > >  > > >  > >  > > ---
> >> > > > > > >  > >  > To  unsubscribe, e-mail:
> >> > > > > > >  > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  > For additional commands,  e-mail:  java-user-
> >> > > > > help@lucene.apache.org
> >> > > >  > >  >  > > >
> >> > > > > > > > >  >
> >> > > > > > >  > >
> >> > > > > > >  >  >
> >> > > > > > > > >
> >> > >
> >> > > >----------------------------------------------------------------
> >> > > >---
> >> > > -  > >  > >  > > - To  unsubscribe,  e-mail:
> >> > > > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > >  For additional commands,  e-mail:
> >> > > > > java-user-help@lucene.apache.org   > >  >
> >> > > > > > > >
> >> > > > > >  > >
> >> > >
> >> > > -----------------------------------------------------------------
> >> > > ---
> >> > > -  > >  > >  > To  unsubscribe, e-mail:
> >> > > >  > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  > For  additional commands,  e-mail:
> >> > > > > java-user-help@lucene.apache.org   > >  >
> >> > > > > > > >
> >> > > > > >  >
> >> > > > > >  >
> >> >--------------------------------------------------------------------
> >> >-
> >> > >  > >  > > To  unsubscribe, e-mail:
> >> > > > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > >  For additional commands, e-mail:
> >> > > >  > java-user-help@lucene.apache.org   >
> >> > > > > >
> >> > > > > >
> >> > > > > >
> >> > > > > > -----------------------------------------------------------
> >> > > > > > ---
> >> > > > > > ----
> >> > > >  > > ---
> >> > > > >  > To  unsubscribe, e-mail:
> >> > > > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  > For  additional commands, e-mail:
> >> > > > > java-user-help@lucene.apache.org   >
> >> > > > > >
> >> > > > >
> >> > > > >
> >> > > >  >
> >> > > > ---------------------------------------------------------------
> >> > > > ---
> >> > > > --
> >> > >  > > - To  unsubscribe, e-mail:
> >> > > java-user-unsubscribe@lucene.apache.org
> >> > >  > >  For additional commands, e-mail:
> >> > > java-user-help@lucene.apache.org  >
> >> > > >
> >> > > >
> >> > > > ---------------------------------------------------------------
> >> > > > ---
> >> > > > ---
> >> > >  > To  unsubscribe, e-mail:
> >> > > java-user-unsubscribe@lucene.apache.org
> >> > >  > For  additional commands, e-mail:
> >> > > java-user-help@lucene.apache.org  >
> >> > > >
> >> > >
> >> > >
> >> > > -----------------------------------------------------------------
> >> > > ---
> >> > > - To  unsubscribe, e-mail:
> >> > > java-user-unsubscribe@lucene.apache.org
> >> > >  For additional commands, e-mail:
> >> > > java-user-help@lucene.apache.org
> >> >
> >> >
> >> > -------------------------------------------------------------------
> >> > -- To  unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> > For  additional commands, e-mail: java-user-help@lucene.apache.org
> >> >
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 14:02:05 2011
Return-Path: <java-user-return-49658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4A258357A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 14:02:05 +0000 (UTC)
Received: (qmail 73524 invoked by uid 500); 6 May 2011 14:02:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73322 invoked by uid 500); 6 May 2011 14:02:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73308 invoked by uid 99); 6 May 2011 14:02:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 14:02:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 14:01:55 +0000
Received: by bwz8 with SMTP id 8so4289814bwz.35
        for <java-user@lucene.apache.org>; Fri, 06 May 2011 07:01:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=hxbnvkOLH2+2gkT0VsmRNgU2x7T/dwgBCbZrwkHORXI=;
        b=KarBtW/KctbYqa9mkleDDMz4iFwdl85f/dgxL6bf1/6lnke0nBNC4I/4asDLZh+0E7
         PmRL4AxDCm1UbrCknLqDWiPGxiYs+vBeKJzsrYJukChvSRDtNQYPsbWX9LaAQipTXg+z
         Gy3dyIi10LfF6cmF/M3Vb8eEkNdF+kr0bkVe0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=XrsZ+KZX9xQ+AprCjqqKHlvc+6vJVVj09gvJEGkyC498O2A/ZAxTDTAxAk8GxPpe6s
         twt4i0h6t+C65zqqexdtyVXZOrKNOwLMpWr1zUmu/jNi6uqQhTQyQxpJscdmq7lCmQ3H
         /Y8P5a2k38Jc35DH87vqUvE7L447BiIBdR9nU=
Received: by 10.223.10.150 with SMTP id p22mr455817fap.86.1304690495176; Fri,
 06 May 2011 07:01:35 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.5.91 with HTTP; Fri, 6 May 2011 07:01:15 -0700 (PDT)
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A5200D@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A51F25@Exchange2007.mysigndomain.corp>
 <BANLkTik2yWOBfy9Jr59cU+mz3gW1X8E+Kw@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51FC8@Exchange2007.mysigndomain.corp>
 <BANLkTimsYWVPeFfFnvJe7_pTJaPt7YGkpg@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A51FCF@Exchange2007.mysigndomain.corp>
 <BANLkTimBytcqbMiy7OJoFyAMpvzbfg3qCA@mail.gmail.com> <E594BA962D832C49A3CF858DAA3A696C1135A5200D@Exchange2007.mysigndomain.corp>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Fri, 6 May 2011 16:01:15 +0200
Message-ID: <BANLkTimHPNUNWN_Hm7JNj+2zVUDuKrr-hg@mail.gmail.com>
Subject: Re: Using Solr's (Auto)suggest with plain lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015173fe48281bee604a29bedc9
X-Virus-Checked: Checked by ClamAV on apache.org

--0015173fe48281bee604a29bedc9
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

FSTLookup is strictly prefix-based. JaspellLookup should handle the fuzzy
matching, but I know very little about it. The source code is your friend,
though -- just try what works and what doesn't.

Dawid

On Fri, May 6, 2011 at 3:21 PM, Clemens Wyss <clemensdev@mysign.ch> wrote:

> What if I'd like to add "fuzzy" lookup for terms?
>
> E.g.:
> "melo" should also bring up "merlot"
>
> > -----Urspr=C3=BCngliche Nachricht-----
> > Von: Dawid Weiss [mailto:dawid.weiss@gmail.com]
> > Gesendet: Freitag, 6. Mai 2011 11:30
> > An: java-user@lucene.apache.org
> > Betreff: Re: Using Solr's (Auto)suggest with plain lucene
> >
> > So you'd like case-sensitive lookup, not case-insensitive lookup.
> FSTLookup
> > just takes characters from the input and does not perform any
> normalization.
> > So, if you feed it terms with casing, you'll get (cased) suggestions
> back.
> > If you need cased suggestions, but provide normalized (lowercased)
> prefixes
> > you'll get nothing, although such a feature would be relatively easy to
> > implement based on the automaton code currently in the SVN.
> >
> > Dawid
> >
> > On Fri, May 6, 2011 at 11:18 AM, Clemens Wyss <clemensdev@mysign.ch>
> > wrote:
> >
> > > Thx Dawid,
> > > Could you be more precise on 2. ? I'd like to leave the suggested
> > > terms untouched, i.e. cased.
> > >
> > > Clemens
> > >
> > > > -----Urspr=C3=BCngliche Nachricht-----
> > > > Von: Dawid Weiss [mailto:dawid.weiss@gmail.com]
> > > > Gesendet: Freitag, 6. Mai 2011 11:12
> > > > An: java-user@lucene.apache.org
> > > > Betreff: Re: Using Solr's (Auto)suggest with plain lucene
> > > >
> > > > 1. FSTLookup is in the trunk only, it has not been released.
> > > > 2. Case-insensitive lookups are possible, you'd just need to pass
> > > normalized
> > > > tokens from which the dictionary is built and then use the same
> > > > normalization at the time you query for suggestions.
> > > > 3. "http://search-lucene.com/m/586gA4ccL11". I have no idea.
> > > >
> > > > Dawid
> > > >
> > > > On Fri, May 6, 2011 at 11:06 AM, Clemens Wyss
> > <clemensdev@mysign.ch>
> > > > wrote:
> > > >
> > > > > I have come across TSTLookup.
> > > > > In which jar Do I find FSTLookup? Does any of these lookup-classe=
s
> > > > > allow case insensitive lookups? My terms are (unfortunately) case=
d.
> > > > >
> > > > > What Lookup "sits" behind this suggester
> > > > > http://search-lucene.com/m/586gA4ccL11
> > > > > here?
> > > > >
> > > > >
> > > > > > -----Urspr=C3=BCngliche Nachricht-----
> > > > > > Von: Dawid Weiss [mailto:dawid.weiss@gmail.com]
> > > > > > Gesendet: Donnerstag, 5. Mai 2011 15:00
> > > > > > An: java-user@lucene.apache.org
> > > > > > Betreff: Re: Using Solr's (Auto)suggest with plain lucene
> > > > > >
> > > > > > If you check out the source code of solr/lucene, look at
> > > > > > FSTLookup class
> > > > > and
> > > > > > FSTLookupTest -- you can populate FSTLookup manually with terms=
/
> > > > > > phrases from your index and then use the resulting automaton fo=
r
> > > > suggestions.
> > > > > >
> > > > > > Dawid
> > > > > >
> > > > > > On Thu, May 5, 2011 at 2:54 PM, Clemens Wyss
> > > > <clemensdev@mysign.ch>
> > > > > > wrote:
> > > > > >
> > > > > > > I have implemented my index (in fact it's a plugable indexing
> > > > > > > API) in "plain Lucene". It tried to implement a term
> > > > > > > suggestion mechanism on my own, being not to happy so far.
> > > > > > > At
> > > > > > > http://search-
> > > > > > lucene.com/m/0QBv41ssGlh/suggestion&subj=3DAuto+Suggest
> > > > > > > I have seen Solr's auto suggestion for search terms. Appart
> > > > > > > from not being "fuzzy" it looks quite promising.
> > > > > > >
> > > > > > > How easily can I Integrate Solr's suggestion with my Lucene
> index?
> > > > > > >
> > > > > > > Thx
> > > > > > > Clemens
> > > > > > >
> > > > > > > -------------------------------------------------------------=
-
> > > > > > > ----
> > > > > > > --- To unsubscribe, e-mail:
> > > > > > > java-user-unsubscribe@lucene.apache.org
> > > > > > > For additional commands, e-mail:
> > > > > > > java-user-help@lucene.apache.org
> > > > > > >
> > > > > > >
> > > > >
> > >
>

--0015173fe48281bee604a29bedc9--

From java-user-return-49659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May  6 15:34:13 2011
Return-Path: <java-user-return-49659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B988F3563
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  6 May 2011 15:34:13 +0000 (UTC)
Received: (qmail 49986 invoked by uid 500); 6 May 2011 15:34:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49929 invoked by uid 500); 6 May 2011 15:34:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49896 invoked by uid 99); 6 May 2011 15:34:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 15:34:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 06 May 2011 15:34:04 +0000
Received: from ([10.160.3.176])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.63941364;
	Fri, 06 May 2011 11:33:40 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht04.corp.local
 ([10.160.3.176]) with mapi; Fri, 6 May 2011 11:33:40 -0400
From: "Provalov, Ivan" <Ivan.Provalov@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 6 May 2011 11:33:38 -0400
Subject: Michigan Information Retrieval Enthusiasts Group Quarterly Meetup -
 May 19th 2011
Thread-Topic: Michigan Information Retrieval Enthusiasts Group Quarterly
 Meetup - May 19th 2011
Thread-Index: AcwMAvi/L3b1GhzkRTCKwJDuH6S/IA==
Message-ID: <70EA5691BD59734784FF872CD1B9747A28501AD9B5@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_70EA5691BD59734784FF872CD1B9747A28501AD9B5OHCINMBX01cor_"
MIME-Version: 1.0

--_000_70EA5691BD59734784FF872CD1B9747A28501AD9B5OHCINMBX01cor_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Our next IR Meetup is at Cengage Learning on May 19, 2011.  Please RSVP her=
e:

http://www.meetup.com/Michigan-Information-Retrieval-Enthusiasts-Group/even=
ts/17567795/



Presentations:

1. Bayesian Language Model

This talk presents a Bayesian language model, originally described by (Teh =
2006), which uses a hierarchical Pitman-Yor process to describe the distrib=
ution of n-grams in an n-gram language model and which allows for a Bayesia=
n back-off and smoothing strategy. The language model, which assumes a powe=
r-law prior over the n-gram space, compares favorably with language models =
based upon state of the art empirical n-gram smoothing techniques. In addit=
ion to the language model, and primarily because the background information=
 required to understand it is somewhat difficult, that  material, most of w=
hich does not appear in (Teh 2006), is also presented in some detail. In pa=
rticular, background information related to the Dirichlet distribution and =
the Dirichlet process is given. The Dirichlet process is then related to th=
e Pitman-Yor process, and the hierarchical Pitman-Yor process is also prese=
nted.



2. Using GATE for Word Polarity in Context Classification

GATE (General Architecture for Text Engineering) is an open source software=
 for creating text processing workflows.  Core GATE includes the tools for =
solving many text engineering issues: modeling and persistence of specializ=
ed data structures; measurement, evaluation, benchmarking; visualization an=
d editing of annotations, ontologies, parse trees, etc.; extraction of trai=
ning instances for machine learning; pluggable machine learning implementat=
ions.  This tutorial will show how to use GATE for advanced machine learnin=
g applications.  Detecting word polarity in context will be used as an exam=
ple to show some of the GATE features.  The tutorial project is based on th=
e latest sentiment analysis research, specifically the work by Theresa Wils=
on, Janyce Wiebe, Paul Hoffmann "Recognizing Contextual Polarity: An Explor=
ation of Features for Phrase-Level Sentiment Analysis", 2009.  Using differ=
ent features (words, part of speech, negations, etc...) SVM classifier is t=
rained and evaluated.



Thank you,



Ivan Provalov


--_000_70EA5691BD59734784FF872CD1B9747A28501AD9B5OHCINMBX01cor_--

From java-user-return-49660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat May  7 00:08:51 2011
Return-Path: <java-user-return-49660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B8B5C3A9B
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  7 May 2011 00:08:51 +0000 (UTC)
Received: (qmail 51220 invoked by uid 500); 7 May 2011 00:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51174 invoked by uid 500); 7 May 2011 00:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51166 invoked by uid 99); 7 May 2011 00:08:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 07 May 2011 00:08:49 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [98.139.52.66] (HELO nm2-vm0.bullet.mail.ac4.yahoo.com) (98.139.52.66)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 07 May 2011 00:08:39 +0000
Received: from [98.139.52.189] by nm2.bullet.mail.ac4.yahoo.com with NNFMP; 07 May 2011 00:08:17 -0000
Received: from [98.139.52.178] by tm2.bullet.mail.ac4.yahoo.com with NNFMP; 07 May 2011 00:08:17 -0000
Received: from [127.0.0.1] by omp1061.mail.ac4.yahoo.com with NNFMP; 07 May 2011 00:08:17 -0000
X-Yahoo-Newman-Id: 384351.22934.bm@omp1061.mail.ac4.yahoo.com
Received: (qmail 36307 invoked from network); 7 May 2011 00:08:16 -0000
Received: from [192.168.2.202] (nhira@97.116.12.113 with plain)
        by smtp112.biz.mail.mud.yahoo.com with SMTP; 06 May 2011 17:08:16 -0700 PDT
X-Yahoo-SMTP: HoVJrkCswBCb_P7EOXqfUDnuuw--
X-YMail-OSG: tS_DZf0VM1l5mR0QAHuI2mrQ6YeyKgJ_8axKyl5SxbMxWSK
 v7NJEAupYi49W3OobFm0jl1CmBF3epWjLbEQITSBGicSmUtJlEcbXID22P_c
 GASdLXg5SOudrMFiJ.ahBhXB7rK.SXMAXiz.HiajhX7tilYH3PiCQzRRugWx
 PlDme.2yruqcusJBo6yFjv3ZGSgBnH2QfdaUugFmXxsMDzDmSbhCfE8NEez9
 XPlRmBV.VDhosD5ifjvy.HO0WaGvqM02Cvt4uv5IccvmYQuUwG38tDy9vvVk
 9hVW5VX.7R2Q6.ocIB7_rQ6MkrX3sT5BbykvRggtDhBTOwHMcvWGB_2qCOUf
 YCIzVCNlFbO0kBj_rniV52RnFf7.kGZ6WUjuzuLialpd0830IrA--
X-Yahoo-Newman-Property: ymail-3
Subject: Re: Thoughts on Search Analytics?
Mime-Version: 1.0 (Apple Message framework v1084)
Content-Type: text/plain; charset=iso-8859-1
From: "N. Hira" <nhira@cognocys.com>
In-Reply-To: <2AAD3AB1-479C-4C06-AFC4-7D6D99AF9132@hoplahup.net>
Date: Fri, 6 May 2011 19:08:13 -0500
Cc: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Content-Transfer-Encoding: quoted-printable
Message-Id: <2CCD0E9A-19D1-4D79-B44E-22B8EF1849C9@cognocys.com>
References: <286819.99825.qm@web130121.mail.mud.yahoo.com> <569EB578-623D-43FD-B2D9-3BCD72CFB0AC@hoplahup.net> <72890.34027.qm@web130122.mail.mud.yahoo.com> <2AAD3AB1-479C-4C06-AFC4-7D6D99AF9132@hoplahup.net>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org


On 06-May-2011, at 2:04 AM, Paul Libbrecht wrote:

>=20
> Le 6 mai 2011 =E0 00:20, Otis Gospodnetic a =E9crit :
>>> thus far, only search-testing has provided some analytics measures =
for us =20
>>> (precision and recall ones). We, of course, construct the =
test-suites from the =20
>>> logs.
>>=20
>> Interesting.  It sounds like you don't currently utilize any sort of =
reporting=20
>> tool that would tell you more about users' search experience other =
than what you=20
>> can glean from the logs (number of hits, query string, any other =
params like hl,=20
>> fq, etc., request handler used, and latency).? =20
>=20
> Correct, there was no plan for such operation yet. It can sure be a =
useful thing.
> I wonder if there's a lot of literature about such best practice btw.=20=

> This I would be very interested to hear.
>=20
>> So you can't really tell, for=20
>> example, what percentage of queries are getting DYM suggestions or =
what=20
>> percentage of queries originate from DYM suggestion, right?  You also =
can't tell=20
>> which queries result in very low click-through rate? etc.
>=20
> I think that one of the keys here is that we would need external =
linkable queries, and in the ActiveMath engine I've been working on =
there was none such unfortunately.=20
>=20
>> Those are some examples of search analytics reports that I was =
thinking people=20
>> might be running in order to better understand how their search is =
behaving and=20
>> what users are experiencing.
>=20
> It sure is desirable but the toolset was not right-away available for =
this.
>=20
> The simple log counts as Fran=E7ois Schiettecatte just responded in =
the solr list would even be useful but again, it needs a little extra =
programming.
>=20
> All people I met would recommend Google Analytics for this. I tend to =
dislike their approach and do not know open-source, "my server side", =
solutions. Hence I made this thread public to hear about "satelites" =
(which are somewhat lucene related).
>=20
> paul
>=20

At Jostens, we have been using Solr on our corporate site for just under =
a year now.  We pick up log data every night and summarize using a =
combination of grep/sed/awk and gnuplot.

The key metrics we use (for now):
1.  Query Response time average during the day (ten minute intervals)
2.  Queries run during the day (ten minute intervals)
3.  Top N queries during the day that resulted in too many/too few hits
4.  Top N queries during the day that resulted in a reasonable number of =
hits
5.  Top N queries for a given period (say 30 days)

What we would like to do next is to look at correlations between search =
terms and results viewed to improve our content, but that requires =
result tracking.  The other thing that would be extremely useful would =
be something that helps us get to synonyms.

Hope this helps.

-h
----------------------------------------------------------------------
Hira, N.R.
Cognocys, Inc.=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 03:59:54 2011
Return-Path: <java-user-return-49661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB5AC4B46
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 03:59:54 +0000 (UTC)
Received: (qmail 21219 invoked by uid 500); 9 May 2011 03:59:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20951 invoked by uid 500); 9 May 2011 03:59:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20942 invoked by uid 99); 9 May 2011 03:59:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 03:59:40 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johnbin.wang@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 03:59:32 +0000
Received: by pzk10 with SMTP id 10so3189361pzk.35
        for <java-user@lucene.apache.org>; Sun, 08 May 2011 20:59:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=zATCgEf9kge1qTmADi7GuzsKKYsvIAKH1OVCQRW+V7I=;
        b=ckfBtLYby3At7cxU86LXchCQ1XKaJNl6iTy/SyjCSoQTOk2ZPxYMvI7RN80Sn24nzs
         H5fpIYpmQ8qQUzhy1nfzMQ+A3aQTEce3rMI6WmLR2pbm+GlefbXduUt7WGYVR3iojNhg
         nHLCt2JMtWUpJsA6r8ohA9VxxPqswAlQMRyTE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=sWGSXvyOSmr5v9JEIEEcesNJDtdv+qfYQMg4AXt35AGbLH5tkOJkuVQK0yrWLrtJuj
         me4xDZ4xf3JmxeQAZ2hJOeIDWJXxyWEFbJeUPXNEJVbgsRt+RnXTGD/o0RNvvh0IfDzy
         xZRyDJvmZ3AYc7dZrNvhqL0Rbhssz0z3cSlRs=
MIME-Version: 1.0
Received: by 10.68.43.66 with SMTP id u2mr9571292pbl.340.1304913551410; Sun,
 08 May 2011 20:59:11 -0700 (PDT)
Received: by 10.68.63.4 with HTTP; Sun, 8 May 2011 20:59:11 -0700 (PDT)
Date: Mon, 9 May 2011 11:59:11 +0800
Message-ID: <BANLkTi=wkecx4asLEaL05M+_LX369tFUDg@mail.gmail.com>
Subject: How do I sort lucene search results by relevance and time?
From: Johnbin Wang <johnbin.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec53aeac0b1c4ee04a2cfdc15
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec53aeac0b1c4ee04a2cfdc15
Content-Type: text/plain; charset=ISO-8859-1

What do I want to do is just like Google search results.  The results in the
first page is the most relevant and also recent documents, but not
absolutely sorted by  time desc.

-- 
cheers,
Johnbin Wang

--bcaec53aeac0b1c4ee04a2cfdc15--

From java-user-return-49662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 04:15:29 2011
Return-Path: <java-user-return-49662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C53442FF
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 04:15:29 +0000 (UTC)
Received: (qmail 29670 invoked by uid 500); 9 May 2011 04:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29452 invoked by uid 500); 9 May 2011 04:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29432 invoked by uid 99); 9 May 2011 04:15:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 04:15:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 04:15:17 +0000
Received: by qwj9 with SMTP id 9so3954903qwj.35
        for <java-user@lucene.apache.org>; Sun, 08 May 2011 21:14:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=T6YmZvvK/JpbtRaXktmKqidjGAV20ALfV6KdbbSv4Ao=;
        b=H4nY7crgA+JVLX6842RJwwnuHmq/4jFlt3g0zRoQIX9z4k+K0XqmPaN+/U5Dj6ugau
         jSWztRm6kfHwQhgDxaNBuGo1VYB15pHR1t/5fZEYYRwKfWo+qyrModpVUlizhjpuxZFZ
         1LDHz0C0BqwWD1+aYsiPEO8cDoE+l6oNKK5SA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=P0yChlq+Ub4egM9pHnuUDRao5VkG7UFV1UdEkb4vtDbMYdfqXjH+27gTpRsUZMCseU
         HWJEbkoYjtwDfg4mqaYTnxrmEO9Abab1Vwb0rKGqyJNWL9BUPhB2XoyVVAirlP4N4UHl
         RptcOLHGo0U4JjS1IU/TpafQsVxptEX79jDsQ=
MIME-Version: 1.0
Received: by 10.229.130.3 with SMTP id q3mr4613931qcs.44.1304914496145; Sun,
 08 May 2011 21:14:56 -0700 (PDT)
Received: by 10.229.231.71 with HTTP; Sun, 8 May 2011 21:14:56 -0700 (PDT)
Date: Sun, 8 May 2011 23:14:56 -0500
Message-ID: <BANLkTikYfJ9fug_uG7dXuqkiZdB_5j9Ptw@mail.gmail.com>
Subject: Question on the Synonym Filter use while searching with MoreLikeThis
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd68ee00147bd04a2d01599
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd68ee00147bd04a2d01599
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

This is my first question for this forum. I am fairly familiar with Lucene
and using 2.9.4 in my project (not using Solr). I have a following question
for the use of Synonym filter.


While indexing contents, I am using following analyzer setup

[Analyzer1] == StandardTokenizer -->  StandardFilter --> LowerCaseFilter
--> StopFilter --> PorterStemFilter

And while searching using MoreLikeThis I am using analyzer similar to the
previous one but with addition of synonym filter

[Analyzer2] == StandardTokenizer -->  StandardFilter --> LowerCaseFilter
--> StopFilter --> SynonymFilter --> PorterStemFilter


*Scenario 1: Analyzer 1 for indexing and searching*
Now I index document A, B and C using Analyzer1 and then use MoreLikeThis on
document D to find similar documents from the index using Analyzer1 (Not
Analyzer2), I get following output
A matched 40%
B matched 20%
C matched 5%

*Scenario 2: Analyzer 2 for indexing and searching*
My problem is, the moment I use Analyzer2 (with Synonym Filter) to index and
search similar documents to document D, all my results gets boost, my
results become:
A matched 60%
B matched 40%
C matched 25%

*Scenario 3: Analyzer 1 for indexing and Analyzer 2 for searching*
But if I use Analyzer1 for indexing and Analyzer2 for searching, then my
results go way down
A matched 15%
B matched 11%
C matched 2%

When I dig into the reason why the % matching went down, I understood that
this is happening because when searching using Synonym analyzer, I tend to
get much more interesting terms
[moreLikeThis.retrieveInterestingTerms(reader)] and then most of these
synonym words match with all the documents bringing down its tf and idf
resulting into less matching percentages for the documents.



*So my question is:*
1. Is it correct to use Analyzer without synonym filter for indexing and
with synonym filter for searching?
2. Is there any other setting that I am missing causing all the matching
percentages to go down?

My search setting while using MoreLikeThis are

MoreLikeThis mlt = new MoreLikeThis(index);
SynonymEngine engine = new WordNetSynonymEngine(new File("PATH"));

mlt.setMinWordLen(3);
mlt.setBoost(true);
mlt.setMinTermFreq(2);
mlt.setMinDocFreq(0);
mlt.setMaxQueryTerms(100);
mlt.setAnalyzer(new PorterSynonymStandardAnalyzer(engine));



Thanks in advance

Saurabh

--000e0cd68ee00147bd04a2d01599--

From java-user-return-49663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 07:43:14 2011
Return-Path: <java-user-return-49663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8AAE24F6B
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 07:43:14 +0000 (UTC)
Received: (qmail 54782 invoked by uid 500); 9 May 2011 07:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54660 invoked by uid 500); 9 May 2011 07:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54652 invoked by uid 99); 9 May 2011 07:43:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 07:43:07 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 07:43:00 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 025F6C217E
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 09:42:39 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id k3f0TJ5PIhWT for <java-user@lucene.apache.org>;
	Mon,  9 May 2011 09:42:38 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id DCDE9C2169
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 09:42:38 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Mon, 9 May 2011 09:42:37 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 9 May 2011 09:42:37 +0200
Subject: Is there kind of a "NullAnalyzer" ?
Thread-Topic: Is there kind of a "NullAnalyzer" ?
Thread-Index: AcwOHKh7Nb6oH7YWSFe3ldvn54xXxw==
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A52081@Exchange2007.mysigndomain.corp>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

i.e. an analyzer which takes the field to be analyzed as is into the index.=
..?=20
The fields I am trying to index have a max length of 3 words and I don't wa=
nt to match sub terms of these fields.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 07:52:10 2011
Return-Path: <java-user-return-49664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6278B49A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 07:52:10 +0000 (UTC)
Received: (qmail 70536 invoked by uid 500); 9 May 2011 07:52:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70344 invoked by uid 500); 9 May 2011 07:52:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70336 invoked by uid 99); 9 May 2011 07:52:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 07:52:07 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.18.95.80] (HELO aa001msb.fastweb.it) (85.18.95.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 07:51:58 +0000
Received: from [192.168.1.150] (83.103.113.106) by aa001msb.fastweb.it (8.5.016.6)
        id 4DC29C3C003CB662 for java-user@lucene.apache.org; Mon, 9 May 2011 09:51:37 +0200
Message-ID: <4DC79D09.2060800@fissore.org>
Date: Mon, 09 May 2011 09:51:37 +0200
From: Federico Fissore <federico@fissore.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.17) Gecko/20110424 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Is there kind of a "NullAnalyzer" ?
References: <E594BA962D832C49A3CF858DAA3A696C1135A52081@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A52081@Exchange2007.mysigndomain.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Clemens Wyss, il 09/05/2011 09:42, ha scritto:
> i.e. an analyzer which takes the field to be analyzed as is into the index...?
> The fields I am trying to index have a max length of 3 words and I don't want to match sub terms of these fields.
>

keyword analyzer?

https://lucene.apache.org/java/3_0_3/api/core/org/apache/lucene/analysis/KeywordAnalyzer.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 08:00:55 2011
Return-Path: <java-user-return-49665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 141C64F6A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 08:00:55 +0000 (UTC)
Received: (qmail 80827 invoked by uid 500); 9 May 2011 08:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80784 invoked by uid 500); 9 May 2011 08:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80776 invoked by uid 99); 9 May 2011 08:00:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 08:00:52 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 08:00:46 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 4CC62C217E
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 10:00:25 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id koSHu4KOXBjI for <java-user@lucene.apache.org>;
	Mon,  9 May 2011 10:00:25 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 2B88DC2169
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 10:00:25 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Mon, 9 May 2011 10:00:25 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 9 May 2011 10:00:23 +0200
Subject: AW: Is there kind of a "NullAnalyzer" ?
Thread-Topic: Is there kind of a "NullAnalyzer" ?
Thread-Index: AcwOHgE6tByoG+2FRDifYntvTcfXkgAASBtA
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A52084@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A52081@Exchange2007.mysigndomain.corp>
 <4DC79D09.2060800@fissore.org>
In-Reply-To: <4DC79D09.2060800@fissore.org>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Thx!

> -----Urspr=FCngliche Nachricht-----
> Von: Federico Fissore [mailto:federico@fissore.org]
> Gesendet: Montag, 9. Mai 2011 09:52
> An: java-user@lucene.apache.org
> Betreff: Re: Is there kind of a "NullAnalyzer" ?
>=20
> Clemens Wyss, il 09/05/2011 09:42, ha scritto:
> > i.e. an analyzer which takes the field to be analyzed as is into the in=
dex...?
> > The fields I am trying to index have a max length of 3 words and I don'=
t
> want to match sub terms of these fields.
> >
>=20
> keyword analyzer?
>=20
> https://lucene.apache.org/java/3_0_3/api/core/org/apache/lucene/analysis
> /KeywordAnalyzer.html
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 08:08:20 2011
Return-Path: <java-user-return-49666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3AC9F41C0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 08:08:20 +0000 (UTC)
Received: (qmail 89009 invoked by uid 500); 9 May 2011 08:08:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88955 invoked by uid 500); 9 May 2011 08:08:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88947 invoked by uid 99); 9 May 2011 08:08:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 08:08:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 08:08:09 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id AC419D36007
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 10:07:49 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id G3piVhPbmLiA for <java-user@lucene.apache.org>;
	Mon,  9 May 2011 10:07:44 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B6817D36002
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 10:07:24 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <E594BA962D832C49A3CF858DAA3A696C1135A52081@Exchange2007.mysigndomain.corp>
In-Reply-To: <E594BA962D832C49A3CF858DAA3A696C1135A52081@Exchange2007.mysigndomain.corp>
Subject: RE: Is there kind of a "NullAnalyzer" ?
Date: Mon, 9 May 2011 10:07:29 +0200
Message-ID: <003801cc0e20$30699570$913cc050$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQFbDLrlGZFeK1kUkEIN8pYJmRGip5VmJnfg
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

KeywordTokenizer and KeywordAnalyzer.

The same functionality can be achieved per field using
Field.INDEX_NOT_ANALYZED.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> Sent: Monday, May 09, 2011 9:43 AM
> To: java-user@lucene.apache.org
> Subject: Is there kind of a "NullAnalyzer" ?
> 
> i.e. an analyzer which takes the field to be analyzed as is into the
index...?
> The fields I am trying to index have a max length of 3 words and I don't
want
> to match sub terms of these fields.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 08:30:53 2011
Return-Path: <java-user-return-49667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4854A4FBA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 08:30:53 +0000 (UTC)
Received: (qmail 14016 invoked by uid 500); 9 May 2011 08:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13947 invoked by uid 500); 9 May 2011 08:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13939 invoked by uid 99); 9 May 2011 08:30:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 08:30:51 +0000
X-ASF-Spam-Status: No, hits=-5.0 required=5.0
	tests=RCVD_IN_DNSWL_HI,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [212.243.6.182] (HELO mail.mysigninternational.com) (212.243.6.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 08:30:44 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.mysigninternational.com (Postfix) with ESMTP id 97B34C217E
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 10:30:24 +0200 (CEST)
Received: from mail.mysigninternational.com ([127.0.0.1])
	by localhost (mysign-postfix1.INTERNET [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id zwsYStRDgWfS for <java-user@lucene.apache.org>;
	Mon,  9 May 2011 10:30:24 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp (unknown [192.168.13.8])
	by mail.mysigninternational.com (Postfix) with ESMTP id 27942C2169
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 10:30:24 +0200 (CEST)
Received: from Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31]) by
 Exchange2007.mysigndomain.corp ([fe80::b93b:88fd:f694:bc31%10]) with mapi;
 Mon, 9 May 2011 10:30:24 +0200
From: Clemens Wyss <clemensdev@mysign.ch>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 9 May 2011 10:30:22 +0200
Subject: AW: Is there kind of a "NullAnalyzer" ?
Thread-Topic: Is there kind of a "NullAnalyzer" ?
Thread-Index: AQFbDLrlGZFeK1kUkEIN8pYJmRGip5VmJnfggAAGq9A=
Message-ID: <E594BA962D832C49A3CF858DAA3A696C1135A52098@Exchange2007.mysigndomain.corp>
References: <E594BA962D832C49A3CF858DAA3A696C1135A52081@Exchange2007.mysigndomain.corp>
 <003801cc0e20$30699570$913cc050$@thetaphi.de>
In-Reply-To: <003801cc0e20$30699570$913cc050$@thetaphi.de>
Accept-Language: de-DE, de-CH
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE, de-CH
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

> The same functionality can be achieved per field using
> Field.INDEX_NOT_ANALYZED.
;)

> -----Urspr=FCngliche Nachricht-----
> Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> Gesendet: Montag, 9. Mai 2011 10:07
> An: java-user@lucene.apache.org
> Betreff: RE: Is there kind of a "NullAnalyzer" ?
>=20
> Hi,
>=20
> KeywordTokenizer and KeywordAnalyzer.
>=20
> The same functionality can be achieved per field using
> Field.INDEX_NOT_ANALYZED.
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
> > -----Original Message-----
> > From: Clemens Wyss [mailto:clemensdev@mysign.ch]
> > Sent: Monday, May 09, 2011 9:43 AM
> > To: java-user@lucene.apache.org
> > Subject: Is there kind of a "NullAnalyzer" ?
> >
> > i.e. an analyzer which takes the field to be analyzed as is into the
> index...?
> > The fields I am trying to index have a max length of 3 words and I
> > don't
> want
> > to match sub terms of these fields.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 09:10:17 2011
Return-Path: <java-user-return-49668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D7FE146DB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 09:10:17 +0000 (UTC)
Received: (qmail 68353 invoked by uid 500); 9 May 2011 09:10:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68318 invoked by uid 500); 9 May 2011 09:10:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68310 invoked by uid 99); 9 May 2011 09:10:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 09:10:15 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [80.146.250.76] (HELO mail.lenze.com) (80.146.250.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 09:10:07 +0000
From: "Kolhoff, Jacqueline - ENCOWAY" <Kolhoff@encoway.de>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 9 May 2011 11:09:44 +0200
Subject: Problems with RangeQueries
Thread-Topic: Problems with RangeQueries
Thread-Index: AcwOKNZu/kqgav0fSsubI9twt+msDg==
Message-ID: <137B4E3B8F30074EADD080AA8A6E2A931523D34BF2@ZDE070.lenze.com>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: multipart/alternative;
	boundary="_000_137B4E3B8F30074EADD080AA8A6E2A931523D34BF2ZDE070lenzeco_"
MIME-Version: 1.0
X-OriginalArrivalTime: 09 May 2011 09:09:45.0524 (UTC) FILETIME=[D6FC4740:01CC0E28]
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_137B4E3B8F30074EADD080AA8A6E2A931523D34BF2ZDE070lenzeco_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I have indexed some numeric properties (double) by adding numeric fields li=
ke this in a custom FieldBridge:
NumericField field =3D new NumericField(propertyName, Store.YES, true);
      field.setDoubleValue(propertyValue);
      document.add(field);

This works fine and with my RangeQueries I get results, except in the follo=
wing case:

I indexed data with the values 4.5, 7.0 and 10.5 for this double property (=
name: price).

When I search maybe for all data with price > 4.5 AND price < 10.5 I got th=
e correct results, namely data where price=3D7.0 (The query is "+price:{4.5=
 TO *} +price:{* TO 10.5}")

But when I try to search for the opposite, i.e. price <=3D 4.5 OR price >=
=3D 10.5 I get all data with price=3D4.5 and price=3D10.5 but also data wit=
h price=3D7.0 which I do not expect. The query is: "price:[* TO 4.5] price:=
[10.5 TO *]"

Did I make something wrong?

Can you help me?

Regards, Jacqueline.


P.S.: The query is built with the NumericFieldUtils like this NumericFieldU=
tils.createNumericRangeQuery("price", 4.5, null, false, false);

--_000_137B4E3B8F30074EADD080AA8A6E2A931523D34BF2ZDE070lenzeco_--

From java-user-return-49669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 10:21:54 2011
Return-Path: <java-user-return-49669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 502754FFD
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 10:21:54 +0000 (UTC)
Received: (qmail 51156 invoked by uid 500); 9 May 2011 10:21:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50961 invoked by uid 500); 9 May 2011 10:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50953 invoked by uid 99); 9 May 2011 10:21:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:21:51 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:21:44 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 5CE73D36007
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 12:21:24 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8aBbSIsrtCg3 for <java-user@lucene.apache.org>;
	Mon,  9 May 2011 12:21:19 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 31C71D36002
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 12:21:19 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <137B4E3B8F30074EADD080AA8A6E2A931523D34BF2@ZDE070.lenze.com>
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A931523D34BF2@ZDE070.lenze.com>
Subject: RE: Problems with RangeQueries
Date: Mon, 9 May 2011 12:21:24 +0200
Message-ID: <005a01cc0e32$d977c300$8c674900$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQH2tLHCIv+Oc1hAkpqR1pW4fvSEiJQu+2lQ
Content-language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hallo Jacqueline,

I have no idea what classes inside Lucene you use, the term "FieldBridge"
relates more to Hibernate Search, right? So maybe you ask this question on
their mailing list. NumericFieldUtils is also not a Lucene class, to create
a numeric query use NumericRangeQuery.newDoubleRange(field, lower, upper,
lowerIncluded, upperIncluded) and combine the results using BooleanQuery
with Occur.SHOULD to get the OR query.

This works as expected. Maybe your problem lies in the fact that
NumericFieldUtils class is somehow creating a NRQ with wrong data type and
precision step (must be identical to the one used for indexing with
NumericField).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Kolhoff, Jacqueline - ENCOWAY [mailto:Kolhoff@encoway.de]
> Sent: Monday, May 09, 2011 11:10 AM
> To: java-user@lucene.apache.org
> Subject: Problems with RangeQueries
> 
> Hi,
> 
> I have indexed some numeric properties (double) by adding numeric fields
> like this in a custom FieldBridge:
> NumericField field = new NumericField(propertyName, Store.YES, true);
>       field.setDoubleValue(propertyValue);
>       document.add(field);
> 
> This works fine and with my RangeQueries I get results, except in the
> following case:
> 
> I indexed data with the values 4.5, 7.0 and 10.5 for this double property
> (name: price).
> 
> When I search maybe for all data with price > 4.5 AND price < 10.5 I got
the
> correct results, namely data where price=7.0 (The query is "+price:{4.5 TO
*}
> +price:{* TO 10.5}")
> 
> But when I try to search for the opposite, i.e. price <= 4.5 OR price >=
10.5 I
> get all data with price=4.5 and price=10.5 but also data with price=7.0
which I
> do not expect. The query is: "price:[* TO 4.5] price:[10.5 TO *]"
> 
> Did I make something wrong?
> 
> Can you help me?
> 
> Regards, Jacqueline.
> 
> 
> P.S.: The query is built with the NumericFieldUtils like this
> NumericFieldUtils.createNumericRangeQuery("price", 4.5, null, false,
false);


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 10:30:37 2011
Return-Path: <java-user-return-49670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7117843D0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 10:30:37 +0000 (UTC)
Received: (qmail 57002 invoked by uid 500); 9 May 2011 10:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56936 invoked by uid 500); 9 May 2011 10:30:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56928 invoked by uid 99); 9 May 2011 10:30:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:30:35 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [80.146.250.76] (HELO mail.lenze.com) (80.146.250.76)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:30:30 +0000
From: "Kolhoff, Jacqueline - ENCOWAY" <Kolhoff@encoway.de>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 9 May 2011 12:30:04 +0200
Subject: AW: Problems with RangeQueries
Thread-Topic: Problems with RangeQueries
Thread-Index: AQH2tLHCIv+Oc1hAkpqR1pW4fvSEiJQu+2lQgAABxbA=
Message-ID: <137B4E3B8F30074EADD080AA8A6E2A931523D34CDA@ZDE070.lenze.com>
References: <137B4E3B8F30074EADD080AA8A6E2A931523D34BF2@ZDE070.lenze.com>
 <005a01cc0e32$d977c300$8c674900$@thetaphi.de>
In-Reply-To: <005a01cc0e32$d977c300$8c674900$@thetaphi.de>
Accept-Language: de-DE
Content-Language: de-DE
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: de-DE
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 09 May 2011 10:30:08.0242 (UTC) FILETIME=[118CA520:01CC0E34]

Oh sorry, you're right, these are hibernate search classes. But I tried to =
search inside the Luke Tool, and didn't find the right data with the given =
query (the query is in fact an org.apache.lucene.search.Query, which will b=
e wrapped to hibernate search queries), so I thought this might be a Lucene=
 issue.

Meanwhile, I found out that Luke does not behave like my application. My ap=
plication actually gets the right results, so maybe this is more a settings=
 issue with Luke. Sorry for that and thanks for your answer.

Regards, Jacqueline.

-----Urspr=FCngliche Nachricht-----
Von: Uwe Schindler [mailto:uwe@thetaphi.de]=20
Gesendet: Montag, 9. Mai 2011 12:21
An: java-user@lucene.apache.org
Betreff: RE: Problems with RangeQueries

Hallo Jacqueline,

I have no idea what classes inside Lucene you use, the term "FieldBridge"
relates more to Hibernate Search, right? So maybe you ask this question on
their mailing list. NumericFieldUtils is also not a Lucene class, to create
a numeric query use NumericRangeQuery.newDoubleRange(field, lower, upper,
lowerIncluded, upperIncluded) and combine the results using BooleanQuery
with Occur.SHOULD to get the OR query.

This works as expected. Maybe your problem lies in the fact that
NumericFieldUtils class is somehow creating a NRQ with wrong data type and
precision step (must be identical to the one used for indexing with
NumericField).

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Kolhoff, Jacqueline - ENCOWAY [mailto:Kolhoff@encoway.de]
> Sent: Monday, May 09, 2011 11:10 AM
> To: java-user@lucene.apache.org
> Subject: Problems with RangeQueries
>=20
> Hi,
>=20
> I have indexed some numeric properties (double) by adding numeric fields
> like this in a custom FieldBridge:
> NumericField field =3D new NumericField(propertyName, Store.YES, true);
>       field.setDoubleValue(propertyValue);
>       document.add(field);
>=20
> This works fine and with my RangeQueries I get results, except in the
> following case:
>=20
> I indexed data with the values 4.5, 7.0 and 10.5 for this double property
> (name: price).
>=20
> When I search maybe for all data with price > 4.5 AND price < 10.5 I got
the
> correct results, namely data where price=3D7.0 (The query is "+price:{4.5=
 TO
*}
> +price:{* TO 10.5}")
>=20
> But when I try to search for the opposite, i.e. price <=3D 4.5 OR price >=
=3D
10.5 I
> get all data with price=3D4.5 and price=3D10.5 but also data with price=
=3D7.0
which I
> do not expect. The query is: "price:[* TO 4.5] price:[10.5 TO *]"
>=20
> Did I make something wrong?
>=20
> Can you help me?
>=20
> Regards, Jacqueline.
>=20
>=20
> P.S.: The query is built with the NumericFieldUtils like this
> NumericFieldUtils.createNumericRangeQuery("price", 4.5, null, false,
false);


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 10:32:42 2011
Return-Path: <java-user-return-49671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 243B04DC4
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 10:32:42 +0000 (UTC)
Received: (qmail 61845 invoked by uid 500); 9 May 2011 10:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61809 invoked by uid 500); 9 May 2011 10:32:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61801 invoked by uid 99); 9 May 2011 10:32:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:32:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:32:32 +0000
Received: by iym1 with SMTP id 1so6561015iym.35
        for <java-user@lucene.apache.org>; Mon, 09 May 2011 03:32:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=vaX9YZNGvE3mKkPA3HB+Xb8bX1xBmbp50wAGsBzksSc=;
        b=eGaYdFgbUnbINKPSnUlUDlYvE+kkllZG5fcXJQwmd8CdwZsgp2ZXZFSaPlEzU5LiQl
         q05AXikfbj6yEe+UPWvVJnogqqmn/F+utgOs1HPFuDdM3MrsKkjICBBG0hxxvYyrubne
         HL/ozQQox5Od+I+9/ZxxIXjve6QbfQnd9AKKc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=miazPDApKMupAXqGZnTu8cUTOcsW32kPsbQs2rozBKy4cMUXf+mUr7d8MaPY43x4Ac
         hRSUZDTIkFUf1xyNiL29MTdowu3LVyl5ClNEnID3pdZ98IkK3nvVUHknujeIa2ur+p/t
         kzOA/uFhDgVwln0lVLkQP5jVZ0NBxSPZth7vQ=
Received: by 10.231.253.4 with SMTP id my4mr4434287ibb.153.1304937131145; Mon,
 09 May 2011 03:32:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.207.80 with HTTP; Mon, 9 May 2011 03:31:51 -0700 (PDT)
In-Reply-To: <BANLkTi=wkecx4asLEaL05M+_LX369tFUDg@mail.gmail.com>
References: <BANLkTi=wkecx4asLEaL05M+_LX369tFUDg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 9 May 2011 11:31:51 +0100
Message-ID: <BANLkTim9xVL83jGbA=3byakFbh5W=PW1Sw@mail.gmail.com>
Subject: Re: How do I sort lucene search results by relevance and time?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Well, you can use one of the sorting search methods and pass multiple
sort keys including relevance and a timestamp.  But I suspect the
Google algorithm may be a bit more complex than that.

One technique is boosting: set an index time document boost on recent
documents.  Of course what is recent today may not be next week.
There are other, more complex ways of customizing lucene scoring.  A
Google search for something like "customized lucene scoring" will find
lots of info, some recent, some older, but probably all relevant one
way or another.


--
Ian.


On Mon, May 9, 2011 at 4:59 AM, Johnbin Wang <johnbin.wang@gmail.com> wrote=
:
> What do I want to do is just like Google search results. =A0The results i=
n the
> first page is the most relevant and also recent documents, but not
> absolutely sorted by =A0time desc.
>
> --
> cheers,
> Johnbin Wang
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 10:34:19 2011
Return-Path: <java-user-return-49672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 32B51460D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 10:34:19 +0000 (UTC)
Received: (qmail 64285 invoked by uid 500); 9 May 2011 10:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64233 invoked by uid 500); 9 May 2011 10:34:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64225 invoked by uid 99); 9 May 2011 10:34:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:34:17 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 10:34:10 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D5EB1D36007
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 12:33:48 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id c490RwUXYMwx for <java-user@lucene.apache.org>;
	Mon,  9 May 2011 12:33:43 +0200 (CEST)
Received: from VEGA (WDC-MARE.marum.de [134.102.249.74])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 9820AD36002
	for <java-user@lucene.apache.org>; Mon,  9 May 2011 12:33:43 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <137B4E3B8F30074EADD080AA8A6E2A931523D34BF2@ZDE070.lenze.com> <005a01cc0e32$d977c300$8c674900$@thetaphi.de> <137B4E3B8F30074EADD080AA8A6E2A931523D34CDA@ZDE070.lenze.com>
In-Reply-To: <137B4E3B8F30074EADD080AA8A6E2A931523D34CDA@ZDE070.lenze.com>
Subject: RE: Problems with RangeQueries
Date: Mon, 9 May 2011 12:33:47 +0200
Message-ID: <005b01cc0e34$9522dd00$bf689700$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-index: AQH2tLHCIv+Oc1hAkpqR1pW4fvSEiAHjgU76AT3W2FCUFfSz0A==
Content-language: de

Hi,

Luke cannot search NumericFields correctly, as the official Lucene
QueryParser does not produce numeric ranbge queries, as it does not know
that the field is numeric. It uses a TermRangeQuery and that may hit =
random
documents.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Kolhoff, Jacqueline - ENCOWAY [mailto:Kolhoff@encoway.de]
> Sent: Monday, May 09, 2011 12:30 PM
> To: java-user@lucene.apache.org
> Subject: AW: Problems with RangeQueries
>=20
> Oh sorry, you're right, these are hibernate search classes. But I =
tried to
> search inside the Luke Tool, and didn't find the right data with the =
given
> query (the query is in fact an org.apache.lucene.search.Query, which =
will
be
> wrapped to hibernate search queries), so I thought this might be a =
Lucene
> issue.
>=20
> Meanwhile, I found out that Luke does not behave like my application. =
My
> application actually gets the right results, so maybe this is more a
settings
> issue with Luke. Sorry for that and thanks for your answer.
>=20
> Regards, Jacqueline.
>=20
> -----Urspr=FCngliche Nachricht-----
> Von: Uwe Schindler [mailto:uwe@thetaphi.de]
> Gesendet: Montag, 9. Mai 2011 12:21
> An: java-user@lucene.apache.org
> Betreff: RE: Problems with RangeQueries
>=20
> Hallo Jacqueline,
>=20
> I have no idea what classes inside Lucene you use, the term =
"FieldBridge"
> relates more to Hibernate Search, right? So maybe you ask this =
question on
> their mailing list. NumericFieldUtils is also not a Lucene class, to
create a
> numeric query use NumericRangeQuery.newDoubleRange(field, lower,
> upper, lowerIncluded, upperIncluded) and combine the results using
> BooleanQuery with Occur.SHOULD to get the OR query.
>=20
> This works as expected. Maybe your problem lies in the fact that
> NumericFieldUtils class is somehow creating a NRQ with wrong data type =
and
> precision step (must be identical to the one used for indexing with
> NumericField).
>=20
> Uwe
>=20
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>=20
>=20
> > -----Original Message-----
> > From: Kolhoff, Jacqueline - ENCOWAY [mailto:Kolhoff@encoway.de]
> > Sent: Monday, May 09, 2011 11:10 AM
> > To: java-user@lucene.apache.org
> > Subject: Problems with RangeQueries
> >
> > Hi,
> >
> > I have indexed some numeric properties (double) by adding numeric
> > fields like this in a custom FieldBridge:
> > NumericField field =3D new NumericField(propertyName, Store.YES, =
true);
> >       field.setDoubleValue(propertyValue);
> >       document.add(field);
> >
> > This works fine and with my RangeQueries I get results, except in =
the
> > following case:
> >
> > I indexed data with the values 4.5, 7.0 and 10.5 for this double
> > property
> > (name: price).
> >
> > When I search maybe for all data with price > 4.5 AND price < 10.5 I
> > got
> the
> > correct results, namely data where price=3D7.0 (The query is
> > "+price:{4.5 TO
> *}
> > +price:{* TO 10.5}")
> >
> > But when I try to search for the opposite, i.e. price <=3D 4.5 OR =
price
> > >=3D
> 10.5 I
> > get all data with price=3D4.5 and price=3D10.5 but also data with
> > price=3D7.0
> which I
> > do not expect. The query is: "price:[* TO 4.5] price:[10.5 TO *]"
> >
> > Did I make something wrong?
> >
> > Can you help me?
> >
> > Regards, Jacqueline.
> >
> >
> > P.S.: The query is built with the NumericFieldUtils like this
> > NumericFieldUtils.createNumericRangeQuery("price", 4.5, null, false,
> false);
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 11:29:35 2011
Return-Path: <java-user-return-49673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 95140463D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 11:29:35 +0000 (UTC)
Received: (qmail 54218 invoked by uid 500); 9 May 2011 11:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54068 invoked by uid 500); 9 May 2011 11:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53973 invoked by uid 99); 9 May 2011 11:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 11:29:32 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.124] (HELO eu1sys200aob108.obsmtp.com) (207.126.144.124)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 11:29:24 +0000
Received: from proxy03.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob108.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTcfP+6EE89bTwK8qw5O2QTTKXV9bb+6F@postini.com; Mon, 09 May 2011 11:29:02 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 9 May 2011 12:28:52 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 9 May 2011 12:28:56 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01CC0E3C.482F3C8B"
Subject: SpanNearQuery - inOrder parameter
Date: Mon, 9 May 2011 12:28:53 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com>
X-MS-Has-Attach: yes
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery - inOrder parameter
Thread-Index: AcwOPEbkaZW7+4fxTMa8XpOLIMqV8w==
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 May 2011 11:28:56.0109 (UTC) FILETIME=[48526DD0:01CC0E3C]

------_=_NextPart_001_01CC0E3C.482F3C8B
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_002_01CC0E3C.482F3C8B"


------_=_NextPart_002_01CC0E3C.482F3C8B
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I attach a junit test which shows strange behaviour of the inOrder
parameter on the SpanNearQuery constructor, using Lucene 2.9.4.

My understanding of this parameter is that true forces the order and
false doesn't care about the order.

Using true always works. However using false works fine when the terms
in the query are distinct, but if they are equivalent, e.g. searching
for "john john", I do not get the expected results. The workaround seems
to be to always use true for queries with repeated terms.

Any help?

Thanks

Greg

 <<TestSpanNearQueryInOrder.java>>=20



Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_002_01CC0E3C.482F3C8B
Content-Type: text/html;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV=3D"Content-Type" CONTENT=3D"text/html; =
charset=3Dus-ascii">
<META NAME=3D"Generator" CONTENT=3D"MS Exchange Server version =
6.5.7654.12">
<TITLE>SpanNearQuery - inOrder parameter</TITLE>
</HEAD>
<BODY>
<!-- Converted from text/rtf format -->

<P><FONT SIZE=3D2 FACE=3D"Arial">I attach a junit test which shows =
strange behaviour of the inOrder parameter on the SpanNearQuery =
constructor, using Lucene 2.9.4.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">My understanding of this parameter is =
that true forces the order and false doesn't care about the =
order.</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Using true always works. However using =
false works fine when the terms in the query are distinct, but if they =
are equivalent, e.g. searching for &quot;john john&quot;, I do not get =
the expected results. The workaround seems to be to always use true for =
queries with repeated terms.</FONT></P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Any help?</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Thanks</FONT>
</P>

<P><FONT SIZE=3D2 FACE=3D"Arial">Greg</FONT>
</P>

<P><FONT FACE=3D"Arial" SIZE=3D2 COLOR=3D"#000000"> =
&lt;&lt;TestSpanNearQueryInOrder.java&gt;&gt; </FONT>
</P>
<BR>

</BODY>
</HTML>
<pre>Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_002_01CC0E3C.482F3C8B--


------_=_NextPart_001_01CC0E3C.482F3C8B
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01CC0E3C.482F3C8B--

From java-user-return-49674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 11:33:15 2011
Return-Path: <java-user-return-49674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 32AAD4640
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 11:33:15 +0000 (UTC)
Received: (qmail 64768 invoked by uid 500); 9 May 2011 11:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64714 invoked by uid 500); 9 May 2011 11:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64706 invoked by uid 99); 9 May 2011 11:33:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 11:33:12 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.120] (HELO eu1sys200aob106.obsmtp.com) (207.126.144.120)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 11:33:03 +0000
Received: from proxy02.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob106.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTcfQ2rUEYTKJvgKP7xH3mLd3wSzPu5JT@postini.com; Mon, 09 May 2011 11:32:42 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 9 May 2011 12:32:42 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Mon, 9 May 2011 12:32:41 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CC0E3C.CEAD7BDE"
Subject: RE: SpanNearQuery - inOrder parameter
Date: Mon, 9 May 2011 12:32:40 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
In-Reply-To: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery - inOrder parameter
Thread-Index: AcwOPEbkaZW7+4fxTMa8XpOLIMqV8wAAHD7g
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com>
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 09 May 2011 11:32:41.0761 (UTC) FILETIME=[CED23110:01CC0E3C]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CC0E3C.CEAD7BDE
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Attachment didn't work - test below:
=20
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.TopDocsCollector;
import org.apache.lucene.search.TopScoreDocCollector;
import org.apache.lucene.search.spans.SpanNearQuery;
import org.apache.lucene.search.spans.SpanQuery;
import org.apache.lucene.search.spans.SpanTermQuery;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;
import org.junit.Assert;
import org.junit.Test;
=20
public class TestSpanNearQueryInOrder {
=20
@Test
public void testSpanNearQueryInOrder() {
 RAMDirectory directory =3D new RAMDirectory();
 IndexWriter writer =3D new IndexWriter(directory, new
StandardAnalyzer(Version.LUCENE_29), true,
IndexWriter.MaxFieldLength.UNLIMITED);
 TopDocsCollector collector =3D TopScoreDocCollector.create(3, false);
=20
 Document doc =3D new Document();
=20
 // DOC1
 doc.add(new Field("text","dddd aaaa bbbb cccc", Field.Store.YES,
Field.Index.ANALYZED));
=20
 writer.addDocument(doc);
 doc =3D new Document();=20
=20
 // DOC2
 doc.add(new Field("text","dddd aaaa aaaa cccc"));
=20
 writer.addDocument(doc);=20
 doc =3D new Document();
=20
 // DOC3
 doc.add(new Field("text","dddd aaaa yyyy aaaa xxxx cccc"));
=20
 writer.addDocument(doc);
 writer.optimize();
 writer.close();
=20
 searcher =3D new IndexSearcher(directory, false);
=20
 SpanQuery[] clauses =3D new SpanQuery[2];
 clauses[0] =3D new SpanTermQuery(new Term("text", "aaaa"));
 clauses[1] =3D new SpanTermQuery(new Term("text", "aaaa"));
=20
 // Don't care about order, so setting inOrder =3D false
 SpanNearQuery q =3D new SpanNearQuery(clauses, 1, false);
 searcher.search(q, collector);
=20
 // This assert fails - 3 docs are returned. Expecting only DOC2 and
DOC3
 Assert.assertEquals("Check 2 results", 2, collector.getTotalHits());=20
=20
 collector =3D new TopScoreDocCollector.create(3, false);
 clauses =3D new SpanQuery[2];
 clauses[0] =3D new SpanTermQuery(new Term("text", "aaaa"));
 clauses[1] =3D new SpanTermQuery(new Term("text", "aaaa"));
=20
 // Don't care about order, so setting inOrder =3D false
 q =3D new SpanNearQuery(clauses, 0, false);
 searcher.search(q, collector);
=20
 // This assert fails - 3 docs are returned. Expecting only DOC2
 Assert.assertEquals("Check 1 result", 1, collector.getTotalHits());=20
}
=20
}

________________________________

From: Gregory Tarr [mailto:Gregory.tarr@detica.com]=20
Sent: 09 May 2011 12:29
To: java-user@lucene.apache.org
Subject: SpanNearQuery - inOrder parameter



I attach a junit test which shows strange behaviour of the inOrder
parameter on the SpanNearQuery constructor, using Lucene 2.9.4.

My understanding of this parameter is that true forces the order and
false doesn't care about the order.=20

Using true always works. However using false works fine when the terms
in the query are distinct, but if they are equivalent, e.g. searching
for "john john", I do not get the expected results. The workaround seems
to be to always use true for queries with repeated terms.

Any help?=20

Thanks=20

Greg=20

<<TestSpanNearQueryInOrder.java>>=20


Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received
this email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard
copy by an authorised signatory.  The contents of this email may relate
to dealings with other companies within the Detica Limited group of
companies.

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
England.


Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D
------_=_NextPart_001_01CC0E3C.CEAD7BDE--

From java-user-return-49675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 11:57:17 2011
Return-Path: <java-user-return-49675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7DF814507
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 11:57:17 +0000 (UTC)
Received: (qmail 95089 invoked by uid 500); 9 May 2011 11:57:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95048 invoked by uid 500); 9 May 2011 11:57:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95040 invoked by uid 99); 9 May 2011 11:57:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 11:57:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 11:57:07 +0000
Received: by fxm7 with SMTP id 7so6498897fxm.35
        for <java-user@lucene.apache.org>; Mon, 09 May 2011 04:56:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:from:date:message-id:subject:to
         :content-type;
        bh=YTu6qrZVUTF+O0Uh6NQCQmY0GU73G5Ui6vR1hfM30sI=;
        b=AIxt7PRsUQvi2xW5IgE6QmLZta/hzkSSIhFVyy08aHzbjOXqXGvkvS38UPWoZAphlx
         s+FkDCEIEMFui5QQg2MNhVVScieNHTybwGR4pu2KA+ArSZZSU7+C7PUcadr0iVEwaIQ2
         rSUaPMCI+JTZvoZotHllJbmccMcSThBD1HJZo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        b=Z5SXa8tnITL9wGhCdzSVLCupdRoTH+242Zv7ngj243rdZdC4YCG6yu9BvX4aiSFXqB
         +bVcAbZo9PkQWG3+qCbVs+HRcp0AVKqaIuHFVs8mjPK0yf01Y1tTbbocimMn6PbKw+oX
         6ZIen4zbE1eoj0e4ryNgsaari2/0DEpwsKRtI=
Received: by 10.223.59.81 with SMTP id k17mr2361494fah.94.1304942207207; Mon,
 09 May 2011 04:56:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.81.66 with HTTP; Mon, 9 May 2011 04:56:32 -0700 (PDT)
From: Samarendra Pratap <samarzone@gmail.com>
Date: Mon, 9 May 2011 17:26:32 +0530
Message-ID: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
Subject: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151747b3b0b68fa504a2d68847
X-Virus-Checked: Checked by ClamAV on apache.org

--00151747b3b0b68fa504a2d68847
Content-Type: text/plain; charset=ISO-8859-1

Hi list,
 We have an index directory of 30 GB which is divided into 3 subdirectories
(idx1, idx2, idx3) which are again divided into 21 sub-subdirectories
(idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).

We are running with java 1.6, lucene 2.9 (going to upgrade to 3.1 very
soon), linux (fedora core - kernel 2.6.17-13.1), reiserfs.

We have almost 40 fields in each index (is it a bad to have so many
fields?). most of them are id based fields.
We are using 8 servers for search, and each of which receives approximately
3000/hour queries in peak hour and search time of more than 1 second is
considered bad (is it really bad?) as per the business requirement.

Since past few months we are experiencing issues (load and search time) on
our search servers, due to which I am looking for sharding techniques. Can
someone guide or give me pointers where i can read more and test?

Keeping parts of indexes on different servers search on all of them and then
merging the results - what could be the best approach?

Let me tell you that most queries use only 6-7 indexes and 4 - 5 fields (to
search for) but some queries (searching all the data) require all the
indexes and are primary cause of the performance degradation.

Any suggestions/ideas are greatly appreciated. And further more will
sharding (or similar thing) really reduce search time? (load is a less
severe issue when compared to search time)


-- 
Regards,
Samar

--00151747b3b0b68fa504a2d68847--

From java-user-return-49676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 13:07:21 2011
Return-Path: <java-user-return-49676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8818946FA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 13:07:21 +0000 (UTC)
Received: (qmail 4111 invoked by uid 500); 9 May 2011 13:07:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4072 invoked by uid 500); 9 May 2011 13:07:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4064 invoked by uid 99); 9 May 2011 13:07:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 13:07:18 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 13:07:13 +0000
Received: by iym1 with SMTP id 1so6705614iym.35
        for <java-user@lucene.apache.org>; Mon, 09 May 2011 06:06:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=epxc53e3aPrhP/bS6kodrFjXEo9HZue6Ye/GeAC3TIQ=;
        b=yCRGr28lJqki0xS34ejOyM1npZMiyPOC9PynQFQUTlnZCLszkUGvuamyvibHCUl2pj
         osnLmO21lWed8x3sZUGAKZrc/uVlq2Kp4YlVD/nEbS88TyFLWUwvfJCe21ALvwdaD8G8
         vVqMh8E1MVFQ2EcWpu1BPHi0GENE3YgFoay0A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=Gg+hEwh7O9a2VbXvNI8hPR6O+eX0BpZitPhi0uNlN4v8xSE3+fTwJyjmgus0aA2K2H
         omJ5+g8vGwDZd7wC60mudYp0yPhtNUEQ4xkMzMx04k0ijz+Drw3HlxdrdZomt6u0uzKT
         NEWKP/Y3pkq03sAK1frO724YGnLnlsrSsTsVQ=
Received: by 10.42.11.207 with SMTP id v15mr6662837icv.22.1304946413065; Mon,
 09 May 2011 06:06:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.207.80 with HTTP; Mon, 9 May 2011 06:06:33 -0700 (PDT)
In-Reply-To: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 9 May 2011 14:06:33 +0100
Message-ID: <BANLkTiniK+3CJJpmK-ir3rtQmhf_W9MfhQ@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

30Gb isn't that big by lucene standards.  Have you considered or tried
just having one large index?  If necessary you could restrict searches
to particular "indexes", or groups thereof, by a field in the combined
index, preferably used as a filter.  If the slow searches have to
search across 63 separate indexes it is perhaps not surprising that
they are slow.  What do you do about sharing or caching
searcher/reader instances?  There are lots of useful tips on
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.

40 fields isn't that many - should be fine.

On sharding/scaling/etc,
http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Sc=
aling-Lucene-and-Solr
looks well worth a read.


--
Ian.

On Mon, May 9, 2011 at 12:56 PM, Samarendra Pratap <samarzone@gmail.com> wr=
ote:
> Hi list,
> =A0We have an index directory of 30 GB which is divided into 3 subdirecto=
ries
> (idx1, idx2, idx3) which are again divided into 21 sub-subdirectories
> (idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).
>
> We are running with java 1.6, lucene 2.9 (going to upgrade to 3.1 very
> soon), linux (fedora core - kernel 2.6.17-13.1), reiserfs.
>
> We have almost 40 fields in each index (is it a bad to have so many
> fields?). most of them are id based fields.
> We are using 8 servers for search, and each of which receives approximate=
ly
> 3000/hour queries in peak hour and search time of more than 1 second is
> considered bad (is it really bad?) as per the business requirement.
>
> Since past few months we are experiencing issues (load and search time) o=
n
> our search servers, due to which I am looking for sharding techniques. Ca=
n
> someone guide or give me pointers where i can read more and test?
>
> Keeping parts of indexes on different servers search on all of them and t=
hen
> merging the results - what could be the best approach?
>
> Let me tell you that most queries use only 6-7 indexes and 4 - 5 fields (=
to
> search for) but some queries (searching all the data) require all the
> indexes and are primary cause of the performance degradation.
>
> Any suggestions/ideas are greatly appreciated. And further more will
> sharding (or similar thing) really reduce search time? (load is a less
> severe issue when compared to search time)
>
>
> --
> Regards,
> Samar
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 15:10:51 2011
Return-Path: <java-user-return-49677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5267A45E8
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 15:10:51 +0000 (UTC)
Received: (qmail 24483 invoked by uid 500); 9 May 2011 15:10:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24439 invoked by uid 500); 9 May 2011 15:10:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24431 invoked by uid 99); 9 May 2011 15:10:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 15:10:49 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 15:10:43 +0000
Received: by fxm7 with SMTP id 7so6722917fxm.35
        for <java-user@lucene.apache.org>; Mon, 09 May 2011 08:10:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=dd/nZyE/Pp4lrKCqoKwD+ya0GZNgUVwVjndazvQHCR4=;
        b=qoPiYLRkJpwlD/kd2PbR81iN334AL8TdsFLvaAgu1JiRsKxjDcSdWJ4igYL5uvGO7Z
         Q/rCgm4o98XjTVvDtaTy0mBmdrP2Us+1H/UdLL3M4sHdmC8y0+muv2OHNSKQoXwZGujE
         XeZFLS6WfWLLbTNmHS48RgCQpkYjTusDGHWh4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Pro/Bcki42jG5S8vVgSL+IQuxKvx+cxMvbzPHLtKt8FWzpRT1KG97kq/GOyxaR3+iD
         2cktK/U9wkCvad/mrwYwjrWOcxiaPoUGuAZdJGR0P+8hqtZW+2DwY2+RLjhZDRlnZNyG
         GeIhF++fD8cEF6qhjP9rq1tFQwwQ9Ui95QW9U=
Received: by 10.223.59.81 with SMTP id k17mr2590305fah.94.1304953821175; Mon,
 09 May 2011 08:10:21 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.81.66 with HTTP; Mon, 9 May 2011 08:10:06 -0700 (PDT)
In-Reply-To: <BANLkTiniK+3CJJpmK-ir3rtQmhf_W9MfhQ@mail.gmail.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com> <BANLkTiniK+3CJJpmK-ir3rtQmhf_W9MfhQ@mail.gmail.com>
From: Samarendra Pratap <samarzone@gmail.com>
Date: Mon, 9 May 2011 20:40:06 +0530
Message-ID: <BANLkTim_4tWtUXpahOjaRGg6L73CcWjjhw@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00151747b3b0f59ec404a2d93c13

--00151747b3b0f59ec404a2d93c13
Content-Type: text/plain; charset=ISO-8859-1

Hi Ian,
 Thanks for sharing your knowledge and to-the-point answers.

1. I've not tested my application with single index as initially (a few
years back) we thought smaller the index size (7 indexes for default 80%
searches) the faster the search time would be. Anyway i'll give it a try and
share the experience.

2. For sharing/caching we create index readers once the server starts and
use these throughout the server's life (1 day). At the time of searches,
number of indexes to be read are decided by analyzing the search parameters.
IndexSearchers are created on persistent IndexReaders and finally a
ParallelMultiSearcher is created from these IndexSearchers (I hope this is
not a problem, or is it???)

3. I had gone through the link you provided and some of the things are
already implemented (e.g. readOnly=true, NIOFSDirectory, optmizing, etc.).
We are using filters for some of the fields and caching those filters in the
memory, through hashtable.

Will reducing number of tokens in a particular field in index reduce the
search time (or CPU, memory etc)?

E.g. I have 11 documents and tokens in field (fld1) are
1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9 and 2.0.

The query is - fld1:[ 1.0 TO 2.0 ]

Would it make any difference if the tokens in documents (in the same field)
would be
1,1,1,1,1,1,1,1,1,2
??



On Mon, May 9, 2011 at 6:36 PM, Ian Lea <ian.lea@gmail.com> wrote:

> 30Gb isn't that big by lucene standards.  Have you considered or tried
> just having one large index?  If necessary you could restrict searches
> to particular "indexes", or groups thereof, by a field in the combined
> index, preferably used as a filter.  If the slow searches have to
> search across 63 separate indexes it is perhaps not surprising that
> they are slow.  What do you do about sharing or caching
> searcher/reader instances?  There are lots of useful tips on
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.
>
> 40 fields isn't that many - should be fine.
>
> On sharding/scaling/etc,
>
> http://www.lucidimagination.com/Community/Hear-from-the-Experts/Articles/Scaling-Lucene-and-Solr
> looks well worth a read.
>
>
> --
> Ian.
>
> On Mon, May 9, 2011 at 12:56 PM, Samarendra Pratap <samarzone@gmail.com>
> wrote:
> > Hi list,
> >  We have an index directory of 30 GB which is divided into 3
> subdirectories
> > (idx1, idx2, idx3) which are again divided into 21 sub-subdirectories
> > (idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).
> >
> > We are running with java 1.6, lucene 2.9 (going to upgrade to 3.1 very
> > soon), linux (fedora core - kernel 2.6.17-13.1), reiserfs.
> >
> > We have almost 40 fields in each index (is it a bad to have so many
> > fields?). most of them are id based fields.
> > We are using 8 servers for search, and each of which receives
> approximately
> > 3000/hour queries in peak hour and search time of more than 1 second is
> > considered bad (is it really bad?) as per the business requirement.
> >
> > Since past few months we are experiencing issues (load and search time)
> on
> > our search servers, due to which I am looking for sharding techniques.
> Can
> > someone guide or give me pointers where i can read more and test?
> >
> > Keeping parts of indexes on different servers search on all of them and
> then
> > merging the results - what could be the best approach?
> >
> > Let me tell you that most queries use only 6-7 indexes and 4 - 5 fields
> (to
> > search for) but some queries (searching all the data) require all the
> > indexes and are primary cause of the performance degradation.
> >
> > Any suggestions/ideas are greatly appreciated. And further more will
> > sharding (or similar thing) really reduce search time? (load is a less
> > severe issue when compared to search time)
> >
> >
> > --
> > Regards,
> > Samar
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Samar

--00151747b3b0f59ec404a2d93c13--

From java-user-return-49678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 15:11:26 2011
Return-Path: <java-user-return-49678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 112DF4645
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 15:11:26 +0000 (UTC)
Received: (qmail 29321 invoked by uid 500); 9 May 2011 15:11:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29272 invoked by uid 500); 9 May 2011 15:11:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29264 invoked by uid 99); 9 May 2011 15:11:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 15:11:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 15:11:17 +0000
Received: by qyk30 with SMTP id 30so4990052qyk.14
        for <java-user@lucene.apache.org>; Mon, 09 May 2011 08:10:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=klQnKmqijLCn2Th6Uh8OH9lSLkiPuNC/1J0E/G83SN4=;
        b=lFiUEjeGshexek8pWR/I4k5kwbRwH+tFpd3ZKVoNuxFEJiCNmQLv6KsoxSeQCHkM7d
         aYQokIpRCjAj+MPuYkK4Z213SBQEgd5uP3U9+zckf6UxI/aIq6o+XAcImeakgGAe7fT8
         NH1xdIulSHrkw+ClHJ4vbT47WpMVFI2EpAfaA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=EXK6pamPFQr4oZSUMuwnPo4zgOQSvexCz/UydCukeUMVSWk4/7iYOpDsv/KSQY0k2i
         i1D/AZLl5+OOBRoHtLQkgje0p/H8AAXqBcQlfTzt4uxCr9Dp+f1el8k4u9I6o44wy30p
         fV2xGx43gDPSKrWGF3Fbn+Jdj7p5mXo5cess8=
MIME-Version: 1.0
Received: by 10.229.46.67 with SMTP id i3mr4782162qcf.234.1304953856488; Mon,
 09 May 2011 08:10:56 -0700 (PDT)
Received: by 10.229.231.71 with HTTP; Mon, 9 May 2011 08:10:56 -0700 (PDT)
Date: Mon, 9 May 2011 10:10:56 -0500
Message-ID: <BANLkTi=aaYK3i+8XyybwVZCGLsMwEwBKDg@mail.gmail.com>
Subject: Question on the use of Synonym Filter while searching using MoreLikeThis
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636426bd910774604a2d93f6b

--001636426bd910774604a2d93f6b
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

This is my first question for this forum. I am fairly familiar with Lucene
and using 2.9.4 in my project (not using Solr). I have a following question
for the use of Synonym filter.



While indexing contents, I am using following analyzer setup

[Analyzer1] == StandardTokenizer -->  StandardFilter --> LowerCaseFilter
--> StopFilter --> PorterStemFilter

And while searching using MoreLikeThis I am using analyzer similar to the
previous one but with addition of synonym filter

[Analyzer2] == StandardTokenizer -->  StandardFilter --> LowerCaseFilter
--> StopFilter --> SynonymFilter --> PorterStemFilter


*Scenario 1: Analyzer 1 for indexing and searching*
Now I index document A, B and C using Analyzer1 and then use MoreLikeThis on
document D to find similar documents from the index using Analyzer1 (Not
Analyzer2), I get following output
A matched 40%
B matched 20%
C matched 5%

*Scenario 2: Analyzer 2 for indexing and searching*
My problem is, the moment I use Analyzer2 (with Synonym Filter) to index and
search similar documents to document D, all my results gets boost, my
results become:
A matched 60%
B matched 40%
C matched 25%

*Scenario 3: Analyzer 1 for indexing and Analyzer 2 for searching*
But if I use Analyzer1 for indexing and Analyzer2 for searching, then my
results go way down
A matched 15%
B matched 11%
C matched 2%

When I dig into the reason why the % matching went down, I understood that
this is happening because when searching using Synonym analyzer, I tend to
get much more interesting terms
[moreLikeThis.retrieveInterestingTerms(reader)] and then most of these
synonym words match with all the documents bringing down its tf and idf
resulting into less matching percentages for the documents.



*So my question is:*
1. Is it correct to use Analyzer without synonym filter for indexing and
with synonym filter for searching?
2. Is there any other setting that I am missing causing all the matching
percentages to go down?

My search setting while using MoreLikeThis are

MoreLikeThis mlt = new MoreLikeThis(index);
SynonymEngine engine = new WordNetSynonymEngine(new File("PATH"));

mlt.setMinWordLen(3);
mlt.setBoost(true);
mlt.setMinTermFreq(2);
mlt.setMinDocFreq(0);
mlt.setMaxQueryTerms(100);
mlt.setAnalyzer(new PorterSynonymStandardAnalyzer(engine));



Thanks in advance

Saurabh

--001636426bd910774604a2d93f6b--

From java-user-return-49679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 15:52:20 2011
Return-Path: <java-user-return-49679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 219FD419D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 15:52:20 +0000 (UTC)
Received: (qmail 9695 invoked by uid 500); 9 May 2011 15:52:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9653 invoked by uid 500); 9 May 2011 15:52:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9645 invoked by uid 99); 9 May 2011 15:52:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 15:52:17 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 15:52:10 +0000
Received: by iwr19 with SMTP id 19so6919131iwr.35
        for <java-user@lucene.apache.org>; Mon, 09 May 2011 08:51:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=BCh79+GmFd13Etg2XVpTxe/SIqnxhGdH7izetQTDJ7Y=;
        b=jVXBMMNCz9zum9pvifY+Y6TWoJXp5wn3mRA3kVIrtcYLWfcHUux6ILL7F6gwbkSJpw
         4+ORIP1V56U8krIVB2p7tYpG8VLzMT2UgVLjnujKAUKcMqcmJJEgcChhoz887V0xZRPt
         jcCZ+jofqtvfdNA0pARcJr90RsDMzsEu49A9Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RXRN7B1jvFAEpT7ktACJVdCamsaFYGMCcxIIcmDMxOwX+brJ3UcGMW4/EZpUjsd3Vo
         lnoutXAWNxkOw287Zi+VbsqwPSa9/drL5gtWG4VlN+3kLEfRKp0A9LV5yi10ITWTNlmj
         2ncgJ+0TEq9avGOlOVp3k24xSEQ7yJhT8Ce7I=
Received: by 10.231.142.103 with SMTP id p39mr4417537ibu.178.1304956309112;
 Mon, 09 May 2011 08:51:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.207.80 with HTTP; Mon, 9 May 2011 08:51:28 -0700 (PDT)
In-Reply-To: <BANLkTim_4tWtUXpahOjaRGg6L73CcWjjhw@mail.gmail.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <BANLkTiniK+3CJJpmK-ir3rtQmhf_W9MfhQ@mail.gmail.com> <BANLkTim_4tWtUXpahOjaRGg6L73CcWjjhw@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 9 May 2011 16:51:28 +0100
Message-ID: <BANLkTi=X+PiFhZnWc-yLu5EXD=DbvSH2Cw@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> ...
> 1. I've not tested my application with single index as initially (a few
> years back) we thought smaller the index size (7 indexes for default 80%
> searches) the faster the search time would be ...

Possibly.  Maybe it will be acceptable to make some searches a bit
slower in order to make the slow ones faster.  But my guess would
still be that a single index with filtered searches would be quicker
for most searches.

> 2. For sharing/caching we create index readers once the server starts and
> use these throughout the server's life (1 day). At the time of searches,
> number of indexes to be read are decided by analyzing the search parameters.
> IndexSearchers are created on persistent IndexReaders and finally a
> ParallelMultiSearcher is created from these IndexSearchers (I hope this is
> not a problem, or is it???)

Sounds fine, except that in latest versions of lucene,
ParallelMultiSearcher is deprecated.

> 3. I had gone through the link you provided and some of the things are
> already implemented (e.g. readOnly=true, NIOFSDirectory, optmizing, etc.).
> We are using filters for some of the fields and caching those filters in the
> memory, through hashtable.

Sounds good.

> Will reducing number of tokens in a particular field in index reduce the
> search time (or CPU, memory etc)?

Yes, in theory, but unless the numbers are really high I doubt you'll notice it.

> E.g. I have 11 documents and tokens in field (fld1) are
> 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9 and 2.0.
>
> The query is - fld1:[ 1.0 TO 2.0 ]
>
> Would it make any difference if the tokens in documents (in the same field)
> would be
> 1,1,1,1,1,1,1,1,1,2
> ??

Unlikely.  But if those are all always numbers it would be worth
looking at NumericField and NumericRangeQuery.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 18:06:52 2011
Return-Path: <java-user-return-49680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0154E4837
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 18:06:52 +0000 (UTC)
Received: (qmail 26604 invoked by uid 500); 9 May 2011 18:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26557 invoked by uid 500); 9 May 2011 18:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 55663 invoked by uid 99); 9 May 2011 16:25:16 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW
X-Spam-Check-By: apache.org
Received-SPF: unknown ipv4:69.164.92.213 (athena.apache.org: encountered unrecognized mechanism during SPF processing of domain of chris.currens@discover-e-legal.com)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=discover-e-legal.com; s=discovere;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=uX9GXsEQHnQEdw3U0j+Llfn8reWQhW8stp9mvLDB5rQ=;
        b=Hhi4SCnB7Dr5UMU0YLdGHEE6SWBmiOM+M9L4+qe9IE+4rCVHtn6BoPMyHU+S8oQcGC
         l7i4o1e/LAkkIiCUpZ+Pi7rKjRqdMaU6zQh+iUMRkAFvaw1HbSh/uYRzz0nG+YegWiIQ
         uiSG2dypzEMowYM/FM2DLwgq3Fd2/STzgcykU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=discover-e-legal.com; s=discovere;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=F8ccbhM9fpkri5pjgit/plmI9tnuPPhORlv9DPUI+MwQRGjcrOa+KQc+2fpDetP1cd
         cAtLfjigeWei9XXu/1JhkfZqj4KqI6eHXdmG5BN8vSo4mliM1AwcweddY/LPT0RimV9U
         o7+C93hu9JPF0hL5RFPWnjyGcx9QOy6KX4OIA=
MIME-Version: 1.0
Date: Mon, 9 May 2011 09:24:50 -0700
Message-ID: <BANLkTikpDCX8RAY+Vdw2BkEKnRTwDkZPUw@mail.gmail.com>
Subject: Expected Behavior from QueryParser and Standard Analyzer with Version.LUCENE_*
From: Chris Currens <chris.currens@discover-e-legal.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba1efbb65c733204a2da4779

--90e6ba1efbb65c733204a2da4779
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I have some questions about what kind of behavior is expected when passing
Version.LUCENE_24/29/30 to QueryParser and the StandardAnalyzer when parsing
a query.  I know that passing the Version to the constructors make Lucene
act that like version, with all features and bugs intact.  The behavior I
expect (and am getting from these versions, in both Java and .NET Lucene) is
when passing a query to parse that is in quotes and includes stopwords,
would be a lowercase string in quotes, with the stopwords removed.  ex.
"Calendar item as Msg" -> "calendar item msg".

I'm getting different results from pylucene, which just invokes a lucene
jar.  It parses "Calendar item as Msg" -> "calendar item ? msg", which
causes the query to fail.   People from the pylucene project want to know
the expected behavior, as they recall it behaving differently in past
versions.  I see no reason that the behavior would change from using the
same version of lucene in pylucene vs straight java.

Your answer is greatly appreciated.

Thanks,
Christopher

--90e6ba1efbb65c733204a2da4779--

From java-user-return-49681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 19:30:35 2011
Return-Path: <java-user-return-49681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1DF934CF0
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 19:30:35 +0000 (UTC)
Received: (qmail 48305 invoked by uid 500); 9 May 2011 19:30:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48257 invoked by uid 500); 9 May 2011 19:30:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48248 invoked by uid 99); 9 May 2011 19:30:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 19:30:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 19:30:25 +0000
Received: by qyk2 with SMTP id 2so1553943qyk.14
        for <java-user@lucene.apache.org>; Mon, 09 May 2011 12:30:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=T+bBQs5FYXf0SAAprhKl8AYixWnTG67N1S/pJcBqklg=;
        b=Z4qqoBQgO2JMwJkSPr8EGEA0A0DZmBCBxC9evnwMFIfYLYm8eMl64ZWIUruVbYRZst
         eE6h4XyToSLrFp+aBtnHtQTGoYLj1agO+08x5RVasDIz6Tu9EXqCQNwhqJ3MiK+8sbll
         xmtN47V0CW9kehwCL+ZuIGcU0YL4lJ2gd8fNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=QhBHSuPFxEB3EpilbQe+hXYGPEvHCRAQup1emh6/PK5ENgCzu30ebAV0AM0HwRH4I8
         5hjuVgZwlojwY3WWDOQvijJGyQ/QLWATmuXP0QkiF2xXFGSCDcfpqeqvJBHKkk52Fycv
         v6Rt3T6emWnPDszoi2Qcj8G07sifTBR+oqxUQ=
MIME-Version: 1.0
Received: by 10.229.107.38 with SMTP id z38mr5088857qco.158.1304969404235;
 Mon, 09 May 2011 12:30:04 -0700 (PDT)
Received: by 10.229.231.71 with HTTP; Mon, 9 May 2011 12:30:04 -0700 (PDT)
Date: Mon, 9 May 2011 14:30:04 -0500
Message-ID: <BANLkTikQ7kBJUk0Cujw3zDeaoGGfzXktGA@mail.gmail.com>
Subject: Question on boosting result while searching
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002354470f88c83f5004a2dcdd19
X-Virus-Checked: Checked by ClamAV on apache.org

--002354470f88c83f5004a2dcdd19
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

Can some one pls direct me on how to boost the result when specific keywords
are found while searching the document?

example:
1. While indexing the documents A, B and C, I do not boost any of these
documents. (Field.Store.YES, Field.Index.ANALYZED) and setBoost(1.0)

2. Now I read document D using MoreLikeThis and compare the keywords of this
document against by index comprise of A, B and C documents.

3. Once I read document D, I would like to boost the result if document D
has any special words (keywords) that I define.

Is there a way in MoreLikeThis or using any other query to boost the results
if any specific keywords are found while searching?

Thanks

Saurabh

--002354470f88c83f5004a2dcdd19--

From java-user-return-49682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May  9 21:33:31 2011
Return-Path: <java-user-return-49682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0160948E5
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  9 May 2011 21:33:31 +0000 (UTC)
Received: (qmail 38308 invoked by uid 500); 9 May 2011 21:33:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38259 invoked by uid 500); 9 May 2011 21:33:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38251 invoked by uid 99); 9 May 2011 21:33:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 21:33:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.32.146.52] (HELO thomsonlearning.com) (69.32.146.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 09 May 2011 21:33:21 +0000
Received: from ([10.160.3.175])
	by ohciniron01.thomsonlearning.com with ESMTP with TLS id 5502565.64118924;
	Mon, 09 May 2011 17:32:56 -0400
Received: from OHCINMBX01.corp.local ([10.160.3.160]) by ohcinht03.corp.local
 ([10.160.3.175]) with mapi; Mon, 9 May 2011 17:32:56 -0400
From: "Provalov, Ivan" <Ivan.Provalov@cengage.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 9 May 2011 17:32:56 -0400
Subject: Non-English Languages Search
Thread-Topic: Non-English Languages Search
Thread-Index: AQHMDpCoS92SIMrbLU2R6Fwy7pe3tQ==
Message-ID: <70EA5691BD59734784FF872CD1B9747A284F5D0B54@OHCINMBX01.corp.local>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

We are planning to ingest some non-English content into our application.  A=
ll content is OCR'ed and there are a lot of misspellings and garbage terms =
because of this.  Each document has one primary language with a some except=
ions (e.g. a few English terms mixed in with primarily non-English document=
 terms).

1. Does it make sense to mix two or more different Latin-based languages in=
 the same index directory in Lucene (e.g. Spanish/French/English)? =20
2. What about mixing Latin and non-Latin languages?  We ran tests on Englis=
h and Chinese collections mixed together and didn't see any negative impact=
 (precision/recall).  Any other potential issues?
3. Any recommendations for an Urdu analyzer?

Thank you,

Ivan Provalov=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 04:29:40 2011
Return-Path: <java-user-return-49683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 629865AB0
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 04:29:40 +0000 (UTC)
Received: (qmail 27870 invoked by uid 500); 10 May 2011 04:29:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27731 invoked by uid 500); 10 May 2011 04:29:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27567 invoked by uid 99); 10 May 2011 04:29:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 04:29:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [121.101.151.213] (HELO nm4-vm0.bullet.mail.in.yahoo.com) (121.101.151.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 10 May 2011 04:29:30 +0000
Received: from [121.101.151.237] by nm4.bullet.mail.in.yahoo.com with NNFMP; 10 May 2011 04:31:55 -0000
Received: from [121.101.151.232] by tm2.bullet.mail.in.yahoo.com with NNFMP; 10 May 2011 04:29:12 -0000
Received: from [127.0.0.1] by omp1001.mail.in.yahoo.com with NNFMP; 10 May 2011 04:29:07 -0000
X-Yahoo-Newman-Id: 552250.41585.bm@omp1001.mail.in.yahoo.com
Received: (qmail 28288 invoked from network); 10 May 2011 04:29:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=m0fQZaGj7DQwMhukQUTN3NIhSLl1f/KRjLIiRfcQ1KsPliDsLEHOsqrrHc3mCExFjErj/irNCB+8hR+9ELBx1TAHl+wVHGhNEacKWKeS8GAAqn9duOQJ4CmDy4JeNCvXLNMT1FwJwR+M0b0XEdmzKrwJvJ42eUCYdN+TjZcQ/Dg=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1305001747; bh=ftrGTrAjTNTbSQ3FwdcuyYl3wLCTb8Ud+ItWwzueREY=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=eBtzHJXOqUGg5HYxtcHS6gaJtaYBJUTP1UxBu9vM+5ZS5kTCt8WG/qvyHl8RwPs9EKN4sW+VkW8C63KJwNzfTiFOGS7hzQxkfAEXtWFUbENNcSlmGFxPBuPb36zdfum88BRq/h5ByuZyX0q7lXkAxXkUvG3SH+70rP68iz9lCYY=
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp105.mail.in.yahoo.com with SMTP; 10 May 2011 09:59:07 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: 7rkDRugVM1k8xqqpfXMcZSYxvJCt45htfdEDABlMtu.TWf4
 4SHPNxWlfo2uCF94PPvNW3ANOucVC8cU.wQXk3JicZPRZKAMLhufxZe4w_Li
 oplHmh9S4FiJ6AvtNpuEf8sIGAps0pruhZ1quw7N8YWvg4S5k5kws.5UHv0X
 hvZawwsZ7WaBGW9Kgy3Ik34MyYt5pyVTiVaZprBkPRWAsQovEOtu3YTEMfip
 htTY3d3RmF4c9ullLx_oIWweq_7Jf5YtIf_xeRKXo58f.hN571KzXuIldS8_
 pwZJpibQM9Wp1JKs5P7liPRE6eotsjgsBDSd3WUqo0.nXhLrnHGw6U60-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <3972B0B283DD481EA213C10A4B51519C@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
Subject: Re: Sharding Techniques
Date: Tue, 10 May 2011 09:59:06 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931

We are using similar technique as yours. We keep smaller indexes and use =
ParallelMultiSearcher to search across the index. Keeping smaller =
indexes is good as index and index optimzation would be faster.  There =
will be small delay while searching across the indexes.

1. What is your search time?
2. Is your index optimized?

I have a doubt, If we keep the indexes size to 30 GB then each file size =
(fdt, fdx etc) would in GB's. Small addition or deletion to the file =
will not cause more IO as it has to skip those bytes and write it at the =
end of file.=20

Regards
Ganesh

=20

----- Original Message -----=20
From: "Samarendra Pratap" <samarzone@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Monday, May 09, 2011 5:26 PM
Subject: Sharding Techniques


> Hi list,
> We have an index directory of 30 GB which is divided into 3 =
subdirectories
> (idx1, idx2, idx3) which are again divided into 21 sub-subdirectories
> (idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).
>=20
> We are running with java 1.6, lucene 2.9 (going to upgrade to 3.1 very
> soon), linux (fedora core - kernel 2.6.17-13.1), reiserfs.
>=20
> We have almost 40 fields in each index (is it a bad to have so many
> fields?). most of them are id based fields.
> We are using 8 servers for search, and each of which receives =
approximately
> 3000/hour queries in peak hour and search time of more than 1 second =
is
> considered bad (is it really bad?) as per the business requirement.
>=20
> Since past few months we are experiencing issues (load and search =
time) on
> our search servers, due to which I am looking for sharding techniques. =
Can
> someone guide or give me pointers where i can read more and test?
>=20
> Keeping parts of indexes on different servers search on all of them =
and then
> merging the results - what could be the best approach?
>=20
> Let me tell you that most queries use only 6-7 indexes and 4 - 5 =
fields (to
> search for) but some queries (searching all the data) require all the
> indexes and are primary cause of the performance degradation.
>=20
> Any suggestions/ideas are greatly appreciated. And further more will
> sharding (or similar thing) really reduce search time? (load is a less
> severe issue when compared to search time)
>=20
>=20
> --=20
> Regards,
> Samar
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 07:43:43 2011
Return-Path: <java-user-return-49684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6ACF559D5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 07:43:43 +0000 (UTC)
Received: (qmail 91124 invoked by uid 500); 10 May 2011 07:43:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90786 invoked by uid 500); 10 May 2011 07:43:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90776 invoked by uid 99); 10 May 2011 07:43:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 07:43:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 07:43:31 +0000
Received: by fxm7 with SMTP id 7so7539806fxm.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 00:43:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=rp/S8qxXYHC9thF97AP4UK3ngfxdgAlkrhZle+5cRxM=;
        b=AaTOMMZjZiCwJL4DiJu+7JwZhvBG0udSt1S1tiqNfZExclaRDh1E3sE56ETMQp6Bn6
         +9ttsvUIm7HYQFWcyWLfDcX48t3OH38d0lSzWLYXHkT9zO9veA6Obxv0BRfQ1WNAvGBC
         GYPrdRkPZfOeqloWJ3+3ULoXyuGBVuhMM46/A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=YAK24A1AQEmn28RJVDY1BaTsGzSLko/Ily3RE4nrsQkKmPO1l/WKCX6UykaBB81NBb
         y/Zqvu7U8nA4Q+M0Z1L8rMw8L4JkLCgWYyvY0fD6VuWFP5yFEcWvucSieKYAMAHdN0j1
         aF9Srf9wqqiexr/TXlhGks+6zetocJxbWOHpg=
Received: by 10.223.55.201 with SMTP id v9mr1039107fag.76.1305013391081; Tue,
 10 May 2011 00:43:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.81.66 with HTTP; Tue, 10 May 2011 00:42:56 -0700 (PDT)
In-Reply-To: <3972B0B283DD481EA213C10A4B51519C@sv.us.sonicwall.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com> <3972B0B283DD481EA213C10A4B51519C@sv.us.sonicwall.com>
From: Samarendra Pratap <samarzone@gmail.com>
Date: Tue, 10 May 2011 13:12:56 +0530
Message-ID: <BANLkTikoxCjPpLn7WrJ1+5Rq-VXNMD9Pyw@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517478f929a41e004a2e71b86
X-Virus-Checked: Checked by ClamAV on apache.org

--001517478f929a41e004a2e71b86
Content-Type: text/plain; charset=ISO-8859-1

Hi,
 Though we have 30 GB total index, size of the indexes that are used
in 75%-80% searches is 5 GB. and we have average search time around 700 ms.
(yes, we have optimized index).

Could someone please throw some light on my original doubt!!!
If I want to keep smaller indexes on different servers so that CPU and
memory may be optimized, how can I aggregate the results of a query from
each of the server. One thing I know is RMI which I studied a few years
back, but that was too slow (or i thought so that time). What are other
techniques?

Is 1 second a bad search time for following?
total index size: 30 GB
index size which is being used in 80% searches - 5 GB
number of fields - 40
most of the fields being numeric fields.
one big "contents" field with 500 - 1000 words.
3500 queries / second mostly on
on an average a query uses 7 fields (1 big 6 small) with 25-30 tokens

Are there any benchmarks from which I can compare the performance of my
application? Or any approximate formula which can guide me
calculating (using system parameters and index/search stats) the "best"
expected search time?

Thanks in advance

On Tue, May 10, 2011 at 9:59 AM, Ganesh <emailgane@yahoo.co.in> wrote:

> We are using similar technique as yours. We keep smaller indexes and use
> ParallelMultiSearcher to search across the index. Keeping smaller indexes is
> good as index and index optimzation would be faster.  There will be small
> delay while searching across the indexes.
>
> 1. What is your search time?
> 2. Is your index optimized?
>
> I have a doubt, If we keep the indexes size to 30 GB then each file size
> (fdt, fdx etc) would in GB's. Small addition or deletion to the file will
> not cause more IO as it has to skip those bytes and write it at the end of
> file.
>
> Regards
> Ganesh
>
>
>
> ----- Original Message -----
> From: "Samarendra Pratap" <samarzone@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Monday, May 09, 2011 5:26 PM
> Subject: Sharding Techniques
>
>
> > Hi list,
> > We have an index directory of 30 GB which is divided into 3
> subdirectories
> > (idx1, idx2, idx3) which are again divided into 21 sub-subdirectories
> > (idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).
> >
> > We are running with java 1.6, lucene 2.9 (going to upgrade to 3.1 very
> > soon), linux (fedora core - kernel 2.6.17-13.1), reiserfs.
> >
> > We have almost 40 fields in each index (is it a bad to have so many
> > fields?). most of them are id based fields.
> > We are using 8 servers for search, and each of which receives
> approximately
> > 3000/hour queries in peak hour and search time of more than 1 second is
> > considered bad (is it really bad?) as per the business requirement.
> >
> > Since past few months we are experiencing issues (load and search time)
> on
> > our search servers, due to which I am looking for sharding techniques.
> Can
> > someone guide or give me pointers where i can read more and test?
> >
> > Keeping parts of indexes on different servers search on all of them and
> then
> > merging the results - what could be the best approach?
> >
> > Let me tell you that most queries use only 6-7 indexes and 4 - 5 fields
> (to
> > search for) but some queries (searching all the data) require all the
> > indexes and are primary cause of the performance degradation.
> >
> > Any suggestions/ideas are greatly appreciated. And further more will
> > sharding (or similar thing) really reduce search time? (load is a less
> > severe issue when compared to search time)
> >
> >
> > --
> > Regards,
> > Samar
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Samar

--001517478f929a41e004a2e71b86--

From java-user-return-49685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 07:52:50 2011
Return-Path: <java-user-return-49685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 782945F5A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 07:52:50 +0000 (UTC)
Received: (qmail 98416 invoked by uid 500); 10 May 2011 07:52:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97954 invoked by uid 500); 10 May 2011 07:52:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97945 invoked by uid 99); 10 May 2011 07:52:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 07:52:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jzillmann@googlemail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 07:52:41 +0000
Received: by fxm7 with SMTP id 7so7547565fxm.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 00:52:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=hIh0ftrNhW94auoJhNQTPFA8JZOUFmpxE7ICKwIte+I=;
        b=w/wu0JhNQ3fB8pPw72p4uciweC9cva5zQXPtf8NUXAypJ2jV7+Bs7N3mjAF188ApUz
         ZKAzYpI3sNY5nOpwaUVNvIgcwfs34hPnIrJTb6LexbXdXnKol3j3KeRGDwHqwDsPObZ5
         /m/MGeOW8/DQrcrSQg/v5wH8THjlTJgE5RpUI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=JpfDeWrVzH+ocsi12K7bG6V3Nv05/j/uFur2EYRIwAygxo+vdfOAg3O1bOSyRTPIpt
         MR6dMspI1tD5gaDkV9pyAlNajrNBknb/gSM8dsXQAV5UdkososwvRstOAlZBUJX4Wumy
         E/hZBCC0kc8i+NR9QXyu7mm1XDiaTC9ga9O18=
Received: by 10.223.145.78 with SMTP id c14mr626247fav.75.1305013940797;
        Tue, 10 May 2011 00:52:20 -0700 (PDT)
Received: from [192.168.0.101] (178-24-202-214-dynip.superkabel.de [178.24.202.214])
        by mx.google.com with ESMTPS id c3sm1705755fav.3.2011.05.10.00.52.18
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 10 May 2011 00:52:19 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Sharding Techniques
From: Johannes Zillmann <jzillmann@googlemail.com>
In-Reply-To: <BANLkTikoxCjPpLn7WrJ1+5Rq-VXNMD9Pyw@mail.gmail.com>
Date: Tue, 10 May 2011 09:52:13 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <916217D3-977E-4B13-B93B-C98BA3AC110C@googlemail.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com> <3972B0B283DD481EA213C10A4B51519C@sv.us.sonicwall.com> <BANLkTikoxCjPpLn7WrJ1+5Rq-VXNMD9Pyw@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org


On May 10, 2011, at 9:42 AM, Samarendra Pratap wrote:

> Hi,
> Though we have 30 GB total index, size of the indexes that are used
> in 75%-80% searches is 5 GB. and we have average search time around =
700 ms.
> (yes, we have optimized index).
>=20
> Could someone please throw some light on my original doubt!!!
> If I want to keep smaller indexes on different servers so that CPU and
> memory may be optimized, how can I aggregate the results of a query =
from
> each of the server. One thing I know is RMI which I studied a few =
years
> back, but that was too slow (or i thought so that time). What are =
other
> techniques?

There is also http://katta.sourceforge.net/ out there...

Johannes

>=20
> Is 1 second a bad search time for following?
> total index size: 30 GB
> index size which is being used in 80% searches - 5 GB
> number of fields - 40
> most of the fields being numeric fields.
> one big "contents" field with 500 - 1000 words.
> 3500 queries / second mostly on
> on an average a query uses 7 fields (1 big 6 small) with 25-30 tokens
>=20
> Are there any benchmarks from which I can compare the performance of =
my
> application? Or any approximate formula which can guide me
> calculating (using system parameters and index/search stats) the =
"best"
> expected search time?
>=20
> Thanks in advance
>=20
> On Tue, May 10, 2011 at 9:59 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>=20
>> We are using similar technique as yours. We keep smaller indexes and =
use
>> ParallelMultiSearcher to search across the index. Keeping smaller =
indexes is
>> good as index and index optimzation would be faster.  There will be =
small
>> delay while searching across the indexes.
>>=20
>> 1. What is your search time?
>> 2. Is your index optimized?
>>=20
>> I have a doubt, If we keep the indexes size to 30 GB then each file =
size
>> (fdt, fdx etc) would in GB's. Small addition or deletion to the file =
will
>> not cause more IO as it has to skip those bytes and write it at the =
end of
>> file.
>>=20
>> Regards
>> Ganesh
>>=20
>>=20
>>=20
>> ----- Original Message -----
>> From: "Samarendra Pratap" <samarzone@gmail.com>
>> To: <java-user@lucene.apache.org>
>> Sent: Monday, May 09, 2011 5:26 PM
>> Subject: Sharding Techniques
>>=20
>>=20
>>> Hi list,
>>> We have an index directory of 30 GB which is divided into 3
>> subdirectories
>>> (idx1, idx2, idx3) which are again divided into 21 =
sub-subdirectories
>>> (idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).
>>>=20
>>> We are running with java 1.6, lucene 2.9 (going to upgrade to 3.1 =
very
>>> soon), linux (fedora core - kernel 2.6.17-13.1), reiserfs.
>>>=20
>>> We have almost 40 fields in each index (is it a bad to have so many
>>> fields?). most of them are id based fields.
>>> We are using 8 servers for search, and each of which receives
>> approximately
>>> 3000/hour queries in peak hour and search time of more than 1 second =
is
>>> considered bad (is it really bad?) as per the business requirement.
>>>=20
>>> Since past few months we are experiencing issues (load and search =
time)
>> on
>>> our search servers, due to which I am looking for sharding =
techniques.
>> Can
>>> someone guide or give me pointers where i can read more and test?
>>>=20
>>> Keeping parts of indexes on different servers search on all of them =
and
>> then
>>> merging the results - what could be the best approach?
>>>=20
>>> Let me tell you that most queries use only 6-7 indexes and 4 - 5 =
fields
>> (to
>>> search for) but some queries (searching all the data) require all =
the
>>> indexes and are primary cause of the performance degradation.
>>>=20
>>> Any suggestions/ideas are greatly appreciated. And further more will
>>> sharding (or similar thing) really reduce search time? (load is a =
less
>>> severe issue when compared to search time)
>>>=20
>>>=20
>>> --
>>> Regards,
>>> Samar
>>>=20
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20
>=20
>=20
> --=20
> Regards,
> Samar


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 08:02:22 2011
Return-Path: <java-user-return-49686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D644B5B83
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 08:02:22 +0000 (UTC)
Received: (qmail 6778 invoked by uid 500); 10 May 2011 08:02:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6745 invoked by uid 500); 10 May 2011 08:02:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6730 invoked by uid 99); 10 May 2011 08:02:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 08:02:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 08:02:09 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.137.0; Tue, 10 May 2011 10:01:48 +0200
Subject: Re: Sharding Techniques
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Tue, 10 May 2011 10:01:48 +0200
Message-ID: <1305014508.8672.59.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Mon, 2011-05-09 at 13:56 +0200, Samarendra Pratap wrote:
>  We have an index directory of 30 GB which is divided into 3 subdirectories
> (idx1, idx2, idx3) which are again divided into 21 sub-subdirectories
> (idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).

So each part is about  GB in size? That gives you a serious logistic
overhead. You state later that you only update the index once a day, so
it would seem that you have no need for the fast update times that such
small indexes give you. My guess is that you will get faster search
times by using a single index.


Down to basics, Lucene searches work by locating terms and resolving
documents from them. For standard term queries, a term is located by a
process akin to binary search. That means that it uses log(n) seeks to
get the term. Let's say you have 10M terms in your corpus. If you stored
that in a single field in a single index with a single segment, it would
take log(10M) ~= 24 seeks to locate a term. This is of course very
simplified.

When you have 63 indexes, log(n) works against you. Even with the
unrealistic assumption that the 10M terms are evenly distributed and
without duplicates, the number of seeks for a search that hits all parts
will still be 63 * log(10M/63) ~= 63 * 18 = 1134. And we haven't even
begun to estimate the merging part.

Due to caching, a seek is not equal to the storage being hit, but the
probability for a storage hit rises with the number of seeks and the
inevitable term duplicates when splitting the index.

> We have almost 40 fields in each index (is it a bad to have so many
> fields?). most of them are id based fields.

Nah, our index is about 40GB with 100+ fields and 8M documents. We use a
single index, optimized to 5 segments. Response times for raw searches
are a few ms, while response times for the full package (heavy faceting)
is generally below 300ms. Our queries are mostly simple boolean queries
across 13 fields.

> Keeping parts of indexes on different servers search on all of them and then
> merging the results - what could be the best approach?

Locate your bottleneck. Some well-placed log statements or a quick peek
with visualvm (comes with the Oracle JVM) should help a lot.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 09:22:53 2011
Return-Path: <java-user-return-49687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F351457F4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 09:22:52 +0000 (UTC)
Received: (qmail 6201 invoked by uid 500); 10 May 2011 09:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6166 invoked by uid 500); 10 May 2011 09:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6158 invoked by uid 99); 10 May 2011 09:22:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 09:22:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 09:22:45 +0000
Received: by fxm7 with SMTP id 7so7613459fxm.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 02:22:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=jNsqBQAM/rUBJnD8o5P/Rx9MHY52Oa3kgN6sYItWtSQ=;
        b=M8EC3r0v5gh5m8FK0GYjaQeYEoCVTOcK9iDRroTk1wHUr2BMmJ9Uy0XMDNmbjOQzNz
         ncaiebjYLXQr4PTAfm6jaOHV3JtQ0QUMIHeg+vS4g8Un8uAu1QBaWeOz9or+/Cj8fHeg
         Q8UUnJsfpr+dXaqeYguyVqgrHqSvmZqJX5U1U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=D/omf0lFGnloQPXvrpTbcXZf5db7Ni7Wyv5vdL6+f+3qfKZcCGujdvxH++gPOjr6cA
         amn9t7YLHESV0hcU9lgit+/7X/qS1TbbiMZCZI6k0aa++Sy5lAEVUC+0JkMrbLYyP9Ue
         NHgwFaD3SLCPpIP/+MbIgT3whytJXziqeXj0E=
Received: by 10.223.73.139 with SMTP id q11mr186937faj.56.1305019344161; Tue,
 10 May 2011 02:22:24 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.81.66 with HTTP; Tue, 10 May 2011 02:22:09 -0700 (PDT)
In-Reply-To: <1305014508.8672.59.camel@te-prime>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com> <1305014508.8672.59.camel@te-prime>
From: Samarendra Pratap <samarzone@gmail.com>
Date: Tue, 10 May 2011 14:52:09 +0530
Message-ID: <BANLkTi=YWTmEEQoNRjZ7YKyqXmvMV9H59A@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Content-Type: multipart/alternative; boundary=0015174c3bd26f0db304a2e87ef8

--0015174c3bd26f0db304a2e87ef8
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks
 to Johannes - I am looking into katta. Seems promising.
 to Toke - Great explanation. That's what I was looking for.

 I'll come back and share my experience.
Thank you very much.


On Tue, May 10, 2011 at 1:31 PM, Toke Eskildsen <te@statsbiblioteket.dk>wro=
te:

> On Mon, 2011-05-09 at 13:56 +0200, Samarendra Pratap wrote:
> >  We have an index directory of 30 GB which is divided into 3
> subdirectories
> > (idx1, idx2, idx3) which are again divided into 21 sub-subdirectories
> > (idx1-1, idx1-2, ...., idx2-1, ...., idx3-1, ...., idx3-21).
>
> So each part is about =BD GB in size? That gives you a serious logistic
> overhead. You state later that you only update the index once a day, so
> it would seem that you have no need for the fast update times that such
> small indexes give you. My guess is that you will get faster search
> times by using a single index.
>
>
> Down to basics, Lucene searches work by locating terms and resolving
> documents from them. For standard term queries, a term is located by a
> process akin to binary search. That means that it uses log(n) seeks to
> get the term. Let's say you have 10M terms in your corpus. If you stored
> that in a single field in a single index with a single segment, it would
> take log(10M) ~=3D 24 seeks to locate a term. This is of course very
> simplified.
>
> When you have 63 indexes, log(n) works against you. Even with the
> unrealistic assumption that the 10M terms are evenly distributed and
> without duplicates, the number of seeks for a search that hits all parts
> will still be 63 * log(10M/63) ~=3D 63 * 18 =3D 1134. And we haven't even
> begun to estimate the merging part.
>
> Due to caching, a seek is not equal to the storage being hit, but the
> probability for a storage hit rises with the number of seeks and the
> inevitable term duplicates when splitting the index.
>
> > We have almost 40 fields in each index (is it a bad to have so many
> > fields?). most of them are id based fields.
>
> Nah, our index is about 40GB with 100+ fields and 8M documents. We use a
> single index, optimized to 5 segments. Response times for raw searches
> are a few ms, while response times for the full package (heavy faceting)
> is generally below 300ms. Our queries are mostly simple boolean queries
> across 13 fields.
>
> > Keeping parts of indexes on different servers search on all of them and
> then
> > merging the results - what could be the best approach?
>
> Locate your bottleneck. Some well-placed log statements or a quick peek
> with visualvm (comes with the Oracle JVM) should help a lot.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Regards,
Samar

--0015174c3bd26f0db304a2e87ef8--

From java-user-return-49688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 10:33:26 2011
Return-Path: <java-user-return-49688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1F8C5553E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 10:33:26 +0000 (UTC)
Received: (qmail 87892 invoked by uid 500); 10 May 2011 10:33:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87838 invoked by uid 500); 10 May 2011 10:33:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87830 invoked by uid 99); 10 May 2011 10:33:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 10:33:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 10:33:15 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id 82C3520CD8
	for <java-user@lucene.apache.org>; Tue, 10 May 2011 10:29:00 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id n+JvXyeZyCnG for <java-user@lucene.apache.org>;
	Tue, 10 May 2011 12:28:59 +0200 (CEST)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 7A29B20CDD; Tue, 10 May 2011 12:28:59 +0200 (CEST)
Received: from [195.110.10.155] (unknown [195.110.10.155])
	by mail.dosco.de (Postfix) with ESMTP id 3BBA520CD8
	for <java-user@lucene.apache.org>; Tue, 10 May 2011 10:28:59 +0000 (UTC)
Message-ID: <4DC9145B.3020704@dosco.de>
Date: Tue, 10 May 2011 12:32:59 +0200
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: PDF Highlighting using PDF Highlight File
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

in our Lucene 3.0.3-based web application when a user clicks on a hit 
link the targeted PDF should be opened in the browser with highlighted hits.

For this purpose using the Acrobat Highlight File (Parameter xml, see 
http://www.pdfbox.org/userguide/highlighting.html and 
http://partners.adobe.com/public/developer/en/pdf/HighlightFileFormat.pdf) 
seems most reasonable to me.

Since the position to highlight are given by (page and) character 
offsets and Lucene uses offsets as well I think it could be easy (for 
more Lucene-skilled people than me) to create an Highlighter which 
produces this highlight file.

Does such a Highlighter already exists in the Lucene World?

If not could someone please point me the direction (e.g. where to hook 
into the existing (fast vector?) highlighter just to extract the offsets).

BTW: Luke gyve me the impression that Term Vectors are only stored when 
the field content is sored as well. Is that true?

Wulf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 12:04:40 2011
Return-Path: <java-user-return-49689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F24B952A9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 12:04:40 +0000 (UTC)
Received: (qmail 6212 invoked by uid 500); 10 May 2011 12:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6171 invoked by uid 500); 10 May 2011 12:04:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6162 invoked by uid 99); 10 May 2011 12:04:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 12:04:38 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ydabhi@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 12:04:30 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CC0F0A.882334C0"
Subject: An unexpected network error occurred 
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Tue, 10 May 2011 17:35:19 +0530
Message-ID: <BE4EDD1665A8004A853E8BDC62C2F1580D2EB4@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: An unexpected network error occurred 
Thread-Index: AcwPCh78TANNMlEtSX237iAtm2RHgA==
From: "Yogesh Dabhi" <ydabhi@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CC0F0A.882334C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Three Instance of My application & lucene index directory shared for all
instance =20

Lucene version 3.1

Lock factory:-  NativeFSLockFactory

Instance1 jdk64 ,64 os=20

Instance2 jdk64 ,64 os=20

Instance3 jdk32 ,32 os=20

 =20

When I try to search the data from  the index directory  from Instance1
I got bellow error=20

An unexpected network error occurred=20

In lucene directory there write.lock file=20

=20

I cannot read data & update data in index from Instance1

But for other two Instances its working fine=20

is there a way to handle such error=20

Thanks & Regards=20

Yogesh


------_=_NextPart_001_01CC0F0A.882334C0--

From java-user-return-49690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 12:55:18 2011
Return-Path: <java-user-return-49690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 487B159B1
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 12:55:18 +0000 (UTC)
Received: (qmail 75627 invoked by uid 500); 10 May 2011 12:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75536 invoked by uid 500); 10 May 2011 12:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75462 invoked by uid 99); 10 May 2011 12:55:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 12:55:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 12:55:10 +0000
Received: by iym1 with SMTP id 1so8092183iym.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 05:54:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=u7kK6YOURdlhJJFhEao9O+tX0uPOATM7aSCfqxRnvzc=;
        b=Nh2MT3NeBLsH0k3iErr1yWGdzlwTzAaDTVZNektd8JVEsrEb/aG+YhQjM2uFnHEsc+
         rNdu3C/uATM/zu1ryjo6k5wf3skCaWfzUAmG/yeUJYf/cRVfWKWbl5YQuJ0zzZpmE3Wd
         CJsF717ibuw8ERtDNNSHxu4eyQ61nrUaaEp54=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=R0fQ+CR/6uYhGNdhzKsACMU+S4/jCpzIkLkwBMbEpmgkwdfiGDG2jSiQjZm4J+lsbb
         xB4TnLEIXYmXa8pd2vrSU+NYlqKtCMhLB7xcSdRNgIi2HSc8EcL2OqO77DzhGy2z/8Dj
         6Hi2LqdEBAWKZu+p1wrW1ZNCqVceEcWWyJF/c=
Received: by 10.231.179.38 with SMTP id bo38mr1228591ibb.103.1305032090097;
 Tue, 10 May 2011 05:54:50 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.207.80 with HTTP; Tue, 10 May 2011 05:54:30 -0700 (PDT)
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2EB4@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2EB4@indiaserv01.asite.asitehq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 10 May 2011 13:54:30 +0100
Message-ID: <BANLkTikiuGTPkuzYk=8Ga-jaBV6tYWWmXg@mail.gmail.com>
Subject: Re: An unexpected network error occurred
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

A full stack trace dump is always helpful.  Are the three instances on
one server with a local index  directory, or on different servers
accessing a network drive (how?) or what?  If the index is locked it
would be surprising that you could update it from 2 of the instances.


--
Ian.


On Tue, May 10, 2011 at 1:05 PM, Yogesh Dabhi <ydabhi@asite.com> wrote:
> Three Instance of My application & lucene index directory shared for all
> instance
>
> Lucene version 3.1
>
> Lock factory:- =A0NativeFSLockFactory
>
> Instance1 jdk64 ,64 os
>
> Instance2 jdk64 ,64 os
>
> Instance3 jdk32 ,32 os
>
>
>
> When I try to search the data from =A0the index directory =A0from Instanc=
e1
> I got bellow error
>
> An unexpected network error occurred
>
> In lucene directory there write.lock file
>
>
>
> I cannot read data & update data in index from Instance1
>
> But for other two Instances its working fine
>
> is there a way to handle such error
>
> Thanks & Regards
>
> Yogesh
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 12:59:16 2011
Return-Path: <java-user-return-49691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8FA145A8C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 12:59:16 +0000 (UTC)
Received: (qmail 83850 invoked by uid 500); 10 May 2011 12:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83800 invoked by uid 500); 10 May 2011 12:59:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83791 invoked by uid 99); 10 May 2011 12:59:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 12:59:14 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [207.126.144.132] (HELO eu1sys200aob112.obsmtp.com) (207.126.144.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 12:59:06 +0000
Received: from proxy03.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob112.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTck2gTxOV7DWy0C/Cv89pDuYm44SbBnB@postini.com; Tue, 10 May 2011 12:58:44 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 10 May 2011 13:58:35 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 10 May 2011 13:58:41 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SpanNearQuery - inOrder parameter
Date: Tue, 10 May 2011 13:58:40 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F240121F971@uksrpblkexb01.detica.com>
In-Reply-To: <614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery - inOrder parameter
Thread-Index: AcwOPEbkaZW7+4fxTMa8XpOLIMqV8wAAHD7gADVO2HA=
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com> <614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 May 2011 12:58:41.0514 (UTC) FILETIME=[FCAFC4A0:01CC0F11]

Anyone able to help me with the problem below?

Thanks

Greg=20

-----Original Message-----
From: Gregory Tarr [mailto:Gregory.tarr@detica.com]=20
Sent: 09 May 2011 12:33
To: java-user@lucene.apache.org
Subject: RE: SpanNearQuery - inOrder parameter

Attachment didn't work - test below:
=20
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field; import
org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.TopDocsCollector;
import org.apache.lucene.search.TopScoreDocCollector;
import org.apache.lucene.search.spans.SpanNearQuery;
import org.apache.lucene.search.spans.SpanQuery;
import org.apache.lucene.search.spans.SpanTermQuery;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;
import org.junit.Assert;
import org.junit.Test;
=20
public class TestSpanNearQueryInOrder {
=20
@Test
public void testSpanNearQueryInOrder() {  RAMDirectory directory =3D new
RAMDirectory();  IndexWriter writer =3D new IndexWriter(directory, new
StandardAnalyzer(Version.LUCENE_29), true,
IndexWriter.MaxFieldLength.UNLIMITED);
 TopDocsCollector collector =3D TopScoreDocCollector.create(3, false);
=20
 Document doc =3D new Document();
=20
 // DOC1
 doc.add(new Field("text","dddd aaaa bbbb cccc", Field.Store.YES,
Field.Index.ANALYZED));
=20
 writer.addDocument(doc);
 doc =3D new Document();=20
=20
 // DOC2
 doc.add(new Field("text","dddd aaaa aaaa cccc"));
=20
 writer.addDocument(doc);
 doc =3D new Document();
=20
 // DOC3
 doc.add(new Field("text","dddd aaaa yyyy aaaa xxxx cccc"));
=20
 writer.addDocument(doc);
 writer.optimize();
 writer.close();
=20
 searcher =3D new IndexSearcher(directory, false);
=20
 SpanQuery[] clauses =3D new SpanQuery[2];  clauses[0] =3D new
SpanTermQuery(new Term("text", "aaaa"));  clauses[1] =3D new
SpanTermQuery(new Term("text", "aaaa"));
=20
 // Don't care about order, so setting inOrder =3D false  SpanNearQuery =
q
=3D new SpanNearQuery(clauses, 1, false);  searcher.search(q, =
collector);
=20
 // This assert fails - 3 docs are returned. Expecting only DOC2 and
DOC3
 Assert.assertEquals("Check 2 results", 2, collector.getTotalHits());=20
=20
 collector =3D new TopScoreDocCollector.create(3, false);  clauses =3D =
new
SpanQuery[2];  clauses[0] =3D new SpanTermQuery(new Term("text", =
"aaaa"));
clauses[1] =3D new SpanTermQuery(new Term("text", "aaaa"));
=20
 // Don't care about order, so setting inOrder =3D false  q =3D new
SpanNearQuery(clauses, 0, false);  searcher.search(q, collector);
=20
 // This assert fails - 3 docs are returned. Expecting only DOC2
Assert.assertEquals("Check 1 result", 1, collector.getTotalHits()); }
=20
}

________________________________

From: Gregory Tarr [mailto:Gregory.tarr@detica.com]
Sent: 09 May 2011 12:29
To: java-user@lucene.apache.org
Subject: SpanNearQuery - inOrder parameter



I attach a junit test which shows strange behaviour of the inOrder
parameter on the SpanNearQuery constructor, using Lucene 2.9.4.

My understanding of this parameter is that true forces the order and
false doesn't care about the order.=20

Using true always works. However using false works fine when the terms
in the query are distinct, but if they are equivalent, e.g. searching
for "john john", I do not get the expected results. The workaround seems
to be to always use true for queries with repeated terms.

Any help?=20

Thanks=20

Greg=20

<<TestSpanNearQueryInOrder.java>>=20


Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received
this email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard
copy by an authorised signatory.  The contents of this email may relate
to dealings with other companies within the Detica Limited group of
companies.

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
England.


Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received
this email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard
copy by an authorised signatory.  The contents of this email may relate
to dealings with other companies within the Detica Limited group of
companies.

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
England.

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 13:03:13 2011
Return-Path: <java-user-return-49692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D08425845
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 13:03:13 +0000 (UTC)
Received: (qmail 98777 invoked by uid 500); 10 May 2011 13:03:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98709 invoked by uid 500); 10 May 2011 13:03:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98701 invoked by uid 99); 10 May 2011 13:03:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 13:03:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 13:03:03 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 6E49D3672B59;
	Tue, 10 May 2011 09:02:42 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id gZA1E1tln4Md; Tue, 10 May 2011 09:02:41 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id E75323672B2F;
	Tue, 10 May 2011 09:02:40 -0400 (EDT)
Message-ID: <4DC93770.8070905@ifactory.com>
Date: Tue, 10 May 2011 09:02:40 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Sharding Techniques
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com> <1305014508.8672.59.camel@te-prime>
In-Reply-To: <1305014508.8672.59.camel@te-prime>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit


> Down to basics, Lucene searches work by locating terms and resolving
> documents from them. For standard term queries, a term is located by a
> process akin to binary search. That means that it uses log(n) seeks to
> get the term. Let's say you have 10M terms in your corpus. If you stored
> that in a single field in a single index with a single segment, it would
> take log(10M) ~= 24 seeks to locate a term. This is of course very
> simplified.
>
> When you have 63 indexes, log(n) works against you. Even with the
> unrealistic assumption that the 10M terms are evenly distributed and
> without duplicates, the number of seeks for a search that hits all parts
> will still be 63 * log(10M/63) ~= 63 * 18 = 1134. And we haven't even
> begun to estimate the merging part.
This is true, but if the indexes are kept on 63 separate servers, those 
seeks will be carried out in parallel.  The OP did indicate his indexes 
would be on different servers, I think?  I still agree with your overall 
point - at this scale a single server is probably best.  And if there 
are performance issues, I think the usual approach is to create multiple 
mirrored copies (slaves) rather than sharding.  Sharding is useful for 
very large indexes: indexes to big to store on disk and cache in memory 
on one commodity box

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 14:43:29 2011
Return-Path: <java-user-return-49693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A800550FB
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 14:43:29 +0000 (UTC)
Received: (qmail 93833 invoked by uid 500); 10 May 2011 14:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93739 invoked by uid 500); 10 May 2011 14:43:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93731 invoked by uid 99); 10 May 2011 14:43:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 14:43:27 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 14:43:22 +0000
Received: by fxm7 with SMTP id 7so7920744fxm.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 07:43:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=YpyYg6aYjw8XSIUSj2NtlD6lKrhGgnlG07wc257owTY=;
        b=Bsd2KsZ/iJnjFHsAHUoubUjW7d+QAOSaSqd2Tqs8tPbbWXoj50eHCYlrdH5cb0Wjwe
         JZGCblviR5N8dPFAFL/ekqKg5SW1WLCmVba32lcHWdPH6+YlVDruhNCose6AU1VXZl/l
         V7pWnoG2uZIJHOEv5BAxmVFRxGFSnpaj28o24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=lWxuI1bcXDA7nFyHxxJPx6ROaPK0cADD0WEqQTe8oOVmE0rYD5UGGcSMhLjpikTsNr
         2ePbFrSYHbleYJgOx73H9DViaxj00kEk+/omg142hdz9UvL8cw747IbKCamHs5PYQYXY
         Ol1vgz6irCV5GdYzKrzNj9LiK4lje5TP3No28=
Received: by 10.223.145.78 with SMTP id c14mr1103923fav.75.1305038581117; Tue,
 10 May 2011 07:43:01 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.81.66 with HTTP; Tue, 10 May 2011 07:42:46 -0700 (PDT)
In-Reply-To: <4DC93770.8070905@ifactory.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
From: Samarendra Pratap <samarzone@gmail.com>
Date: Tue, 10 May 2011 20:12:46 +0530
Message-ID: <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0023540103b60bb59b04a2ecf94b

--0023540103b60bb59b04a2ecf94b
Content-Type: text/plain; charset=ISO-8859-1

Hi Mike,
*"I think the usual approach is to create multiple mirrored copies (slaves)
rather than sharding"*
This is where my eyes stuck.

 We do have mirrors and in-fact a good number of those. 6 servers are being
used for serving regular queries (2 are for specific queries that do take
time) and each of them receives around 3-3.5 K queries per hour in peak
hours.

 The problem is that the interface being used by end users has a lot of
options plus a few text boxes where they can type up to 64 words each. (and
unfortunately i am not able to reduce these things as these are business
requirements)

 Normal queries go fine under 500 ms but when people start searching
"anything" some queries take up to > 100 seconds. Don't you think
distributing smaller indexes on different machines would reduce the average
search time. (Although I have a feeling that search time for smaller queries
may be slightly increased)


On Tue, May 10, 2011 at 6:32 PM, Mike Sokolov <sokolov@ifactory.com> wrote:

>
>  Down to basics, Lucene searches work by locating terms and resolving
>> documents from them. For standard term queries, a term is located by a
>> process akin to binary search. That means that it uses log(n) seeks to
>> get the term. Let's say you have 10M terms in your corpus. If you stored
>> that in a single field in a single index with a single segment, it would
>> take log(10M) ~= 24 seeks to locate a term. This is of course very
>> simplified.
>>
>> When you have 63 indexes, log(n) works against you. Even with the
>> unrealistic assumption that the 10M terms are evenly distributed and
>> without duplicates, the number of seeks for a search that hits all parts
>> will still be 63 * log(10M/63) ~= 63 * 18 = 1134. And we haven't even
>> begun to estimate the merging part.
>>
> This is true, but if the indexes are kept on 63 separate servers, those
> seeks will be carried out in parallel.  The OP did indicate his indexes
> would be on different servers, I think?  I still agree with your overall
> point - at this scale a single server is probably best.  And if there are
> performance issues, I think the usual approach is to create multiple
> mirrored copies (slaves) rather than sharding.  Sharding is useful for very
> large indexes: indexes to big to store on disk and cache in memory on one
> commodity box
>
> -Mike
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Samar

--0023540103b60bb59b04a2ecf94b--

From java-user-return-49694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 16:17:25 2011
Return-Path: <java-user-return-49694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 28C0F5BD9
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 16:17:25 +0000 (UTC)
Received: (qmail 70267 invoked by uid 500); 10 May 2011 16:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70226 invoked by uid 500); 10 May 2011 16:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70218 invoked by uid 99); 10 May 2011 16:17:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 16:17:22 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [141.211.3.202] (HELO itcs-ehub-02.adsroot.itcs.umich.edu) (141.211.3.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 16:17:14 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.232]) by
 itcs-ehub-02.adsroot.itcs.umich.edu ([141.211.3.202]) with mapi; Tue, 10 May
 2011 12:16:52 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 10 May 2011 12:16:51 -0400
Subject: RE: Sharding Techniques
Thread-Topic: Sharding Techniques
Thread-Index: AcwPIKVVeNCgv8/4TEajWOZINT9bIgAC8FLA
Message-ID: <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
 <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com>
In-Reply-To: <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Samar,

>>Normal queries go fine under 500 ms but when people start searching
>>"anything" some queries take up to > 100 seconds. Don't you think
>>distributing smaller indexes on different machines would reduce the avera=
ge
>>.search time. (Although I have a feeling that search time for smaller que=
ries
>>may be slightly increased)

What are the characteristics of your slow queries?  Can you give examples? =
  Are the slow queries always slow or only under heavy load?   What the bot=
tleneck is and whether splitting into smaller indexes would help depends on=
 just what your bottleneck is. It's not clear that your index is large enou=
gh that the size of the index is causing your bottleneck.

We run indexes of about 350GB with average response times under 200ms and 9=
9th percentile reponse times of under 2 seconds. (We have a very low qps ra=
te however).


Tom




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 18:36:33 2011
Return-Path: <java-user-return-49695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C4F105A2E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 18:36:33 +0000 (UTC)
Received: (qmail 17263 invoked by uid 500); 10 May 2011 18:36:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17210 invoked by uid 500); 10 May 2011 18:36:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17202 invoked by uid 99); 10 May 2011 18:36:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 18:36:31 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 18:36:23 +0000
Received: by qwj9 with SMTP id 9so5409295qwj.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 11:36:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=Eg6bJpqz/E9IwqFrcQukvEXTto/e/xII+3/CEqlpcUk=;
        b=ccuIt7XGzofwxNNcFAShf3H6Kw4plAREujak7OrbdFjmqZFyL0f6d2sHLk9zE3l90F
         GIQzFxz4deENbapcS0WwiWyTis6vqqSqAIhHJV+tqow7pABx5PIFm8yLXJsPBGiXODqA
         vnoFbnE5yVywsuAnlZW7t8ezLkOZoYsZs9EqU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=hTe5PO3jeW0dLH1ysbPd1TgFYgwn+qn/rd4FK8+t2hUEui1syK4+bo3X1pBRZzGTZq
         zRY2SP92p5F2qGElN0rtqoWZ980I/MYF0AqfJrl3sSGWFZKXciNU62EIDZQ1X6c0H7TM
         YSOzag99S/Oq5zFGr0nWfvfFU9qfw+hZbVI98=
MIME-Version: 1.0
Received: by 10.224.214.72 with SMTP id gz8mr7270372qab.81.1305052562684; Tue,
 10 May 2011 11:36:02 -0700 (PDT)
Received: by 10.229.231.71 with HTTP; Tue, 10 May 2011 11:36:02 -0700 (PDT)
Date: Tue, 10 May 2011 13:36:02 -0500
Message-ID: <BANLkTinELTKmsK2fcHqSHX++=N8cECYQMA@mail.gmail.com>
Subject: Query on using Payload with MoreLikeThis class
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3005dc7269792c04a2f03a0d
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3005dc7269792c04a2f03a0d
Content-Type: text/plain; charset=ISO-8859-1

Hi,

In the Lucene 2.9.4 project, there is a requirement to boost some of the
keywords in the document using payload.

Now while searching, is there a way I can boost the MoreLikeThis result
using the index time payload values?

Or can I merge MoreLikeThis output and PayloadTermQuery output somehow to
get the final percentage output?

--20cf3005dc7269792c04a2f03a0d--

From java-user-return-49696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 20:01:05 2011
Return-Path: <java-user-return-49696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C41C5E0E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 20:01:05 +0000 (UTC)
Received: (qmail 59776 invoked by uid 500); 10 May 2011 20:01:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59730 invoked by uid 500); 10 May 2011 20:01:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59722 invoked by uid 99); 10 May 2011 20:01:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 20:01:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 20:00:55 +0000
Received: by gxk7 with SMTP id 7so3213979gxk.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 13:00:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.101.2.1 with SMTP id e1mr5389648ani.18.1305057634212; Tue, 10
 May 2011 13:00:34 -0700 (PDT)
Received: by 10.100.131.8 with HTTP; Tue, 10 May 2011 13:00:34 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F240121F971@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com>
	<614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
	<614C529D389A5944B351F7DFB7594F240121F971@uksrpblkexb01.detica.com>
Date: Tue, 10 May 2011 13:00:34 -0700
Message-ID: <BANLkTink7TTxXUvbwcWv1bEKRMP=5g5e9A@mail.gmail.com>
Subject: Re: SpanNearQuery - inOrder parameter
From: Tom Hill <solr-list@worldware.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Since no one else is jumping in, I'll say that I suspect that the span
query code does not bother to check to see if two of the terms are the
same.

I think that would account for the behavior you are seeing. Since the
second SpanTermQuery would match the same term the first one did.

Note that I'm not familiar with the span query code, so this is just a
quick deduction.

Not sure how easy it would be to add this duplicate term detection, if
that's the problem.

Tom


On Tue, May 10, 2011 at 5:58 AM, Gregory Tarr <Gregory.tarr@detica.com> wro=
te:
> Anyone able to help me with the problem below?
>
> Thanks
>
> Greg
>
> -----Original Message-----
> From: Gregory Tarr [mailto:Gregory.tarr@detica.com]
> Sent: 09 May 2011 12:33
> To: java-user@lucene.apache.org
> Subject: RE: SpanNearQuery - inOrder parameter
>
> Attachment didn't work - test below:
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field; import
> org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.TopDocsCollector;
> import org.apache.lucene.search.TopScoreDocCollector;
> import org.apache.lucene.search.spans.SpanNearQuery;
> import org.apache.lucene.search.spans.SpanQuery;
> import org.apache.lucene.search.spans.SpanTermQuery;
> import org.apache.lucene.store.RAMDirectory;
> import org.apache.lucene.util.Version;
> import org.junit.Assert;
> import org.junit.Test;
>
> public class TestSpanNearQueryInOrder {
>
> @Test
> public void testSpanNearQueryInOrder() { =A0RAMDirectory directory =3D ne=
w
> RAMDirectory(); =A0IndexWriter writer =3D new IndexWriter(directory, new
> StandardAnalyzer(Version.LUCENE_29), true,
> IndexWriter.MaxFieldLength.UNLIMITED);
> =A0TopDocsCollector collector =3D TopScoreDocCollector.create(3, false);
>
> =A0Document doc =3D new Document();
>
> =A0// DOC1
> =A0doc.add(new Field("text","dddd aaaa bbbb cccc", Field.Store.YES,
> Field.Index.ANALYZED));
>
> =A0writer.addDocument(doc);
> =A0doc =3D new Document();
>
> =A0// DOC2
> =A0doc.add(new Field("text","dddd aaaa aaaa cccc"));
>
> =A0writer.addDocument(doc);
> =A0doc =3D new Document();
>
> =A0// DOC3
> =A0doc.add(new Field("text","dddd aaaa yyyy aaaa xxxx cccc"));
>
> =A0writer.addDocument(doc);
> =A0writer.optimize();
> =A0writer.close();
>
> =A0searcher =3D new IndexSearcher(directory, false);
>
> =A0SpanQuery[] clauses =3D new SpanQuery[2]; =A0clauses[0] =3D new
> SpanTermQuery(new Term("text", "aaaa")); =A0clauses[1] =3D new
> SpanTermQuery(new Term("text", "aaaa"));
>
> =A0// Don't care about order, so setting inOrder =3D false =A0SpanNearQue=
ry q
> =3D new SpanNearQuery(clauses, 1, false); =A0searcher.search(q, collector=
);
>
> =A0// This assert fails - 3 docs are returned. Expecting only DOC2 and
> DOC3
> =A0Assert.assertEquals("Check 2 results", 2, collector.getTotalHits());
>
> =A0collector =3D new TopScoreDocCollector.create(3, false); =A0clauses =
=3D new
> SpanQuery[2]; =A0clauses[0] =3D new SpanTermQuery(new Term("text", "aaaa"=
));
> clauses[1] =3D new SpanTermQuery(new Term("text", "aaaa"));
>
> =A0// Don't care about order, so setting inOrder =3D false =A0q =3D new
> SpanNearQuery(clauses, 0, false); =A0searcher.search(q, collector);
>
> =A0// This assert fails - 3 docs are returned. Expecting only DOC2
> Assert.assertEquals("Check 1 result", 1, collector.getTotalHits()); }
>
> }
>
> ________________________________
>
> From: Gregory Tarr [mailto:Gregory.tarr@detica.com]
> Sent: 09 May 2011 12:29
> To: java-user@lucene.apache.org
> Subject: SpanNearQuery - inOrder parameter
>
>
>
> I attach a junit test which shows strange behaviour of the inOrder
> parameter on the SpanNearQuery constructor, using Lucene 2.9.4.
>
> My understanding of this parameter is that true forces the order and
> false doesn't care about the order.
>
> Using true always works. However using false works fine when the terms
> in the query are distinct, but if they are equivalent, e.g. searching
> for "john john", I do not get the expected results. The workaround seems
> to be to always use true for queries with repeated terms.
>
> Any help?
>
> Thanks
>
> Greg
>
> <<TestSpanNearQueryInOrder.java>>
>
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received
> this email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard
> copy by an authorised signatory. =A0The contents of this email may relate
> to dealings with other companies within the Detica Limited group of
> companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.
>
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received
> this email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard
> copy by an authorised signatory. =A0The contents of this email may relate
> to dealings with other companies within the Detica Limited group of
> companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory. =A0The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 10 23:33:02 2011
Return-Path: <java-user-return-49697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 939F15D92
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 10 May 2011 23:33:02 +0000 (UTC)
Received: (qmail 27838 invoked by uid 500); 10 May 2011 23:33:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27791 invoked by uid 500); 10 May 2011 23:33:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27783 invoked by uid 99); 10 May 2011 23:33:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 23:33:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 10 May 2011 23:32:52 +0000
Received: by iym1 with SMTP id 1so8860499iym.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 16:32:31 -0700 (PDT)
Received: by 10.231.188.143 with SMTP id da15mr6150566ibb.69.1305070350855;
        Tue, 10 May 2011 16:32:30 -0700 (PDT)
Received: from bester.local ([65.78.136.75])
        by mx.google.com with ESMTPS id gy41sm3273430ibb.56.2011.05.10.16.32.28
        (version=SSLv3 cipher=OTHER);
        Tue, 10 May 2011 16:32:29 -0700 (PDT)
Date: Tue, 10 May 2011 16:32:27 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: RE: SpanNearQuery - inOrder parameter
In-Reply-To: <614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
Message-ID: <alpine.DEB.2.00.1105101622420.26571@bester>
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com> <614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
User-Agent: Alpine 2.00 (DEB 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org



: I attach a junit test which shows strange behaviour of the inOrder
: parameter on the SpanNearQuery constructor, using Lucene 2.9.4.
: 
: My understanding of this parameter is that true forces the order and
: false doesn't care about the order. 
: 
: Using true always works. However using false works fine when the terms
: in the query are distinct, but if they are equivalent, e.g. searching
: for "john john", I do not get the expected results. The workaround seems
: to be to always use true for queries with repeated terms.

I don't think the situation of "overlapping spans" has changed much since 
this thread...

http://search.lucidimagination.com/search/document/ee23395e5a93c525/non_overlapping_span_queries#868b3a3ec6431afc

the crux of hte issue (as i recall) is that there is really no conecptual 
reason to why a query for "'john' near 'john', in any order, with slop of 
Z" shouldn't match a doc that contains only one instance of "john" ... the 
first SpanTermQuery says "i found a match at position X" the second 
SpanTermQuery says "i found a match at position Y" and the SpanNearQuery 
says "the differnece between X and Y is less then Z" therefore i have a 
match.  (The SpanNearQuery can't fail just because X and Y are the same -- 
they might be two distinct term instances, with differnet payloads 
perhaps, that just happen to have the same position).

However: if true==inOrder case works because the SpanNearQuery enforces 
that  "X must be less then Y" so the same term can't ever match twice.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 01:13:54 2011
Return-Path: <java-user-return-49698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6835A5F8B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 01:13:54 +0000 (UTC)
Received: (qmail 3540 invoked by uid 500); 11 May 2011 01:13:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3491 invoked by uid 500); 11 May 2011 01:13:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3483 invoked by uid 99); 11 May 2011 01:13:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 01:13:51 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of johnbin.wang@gmail.com designates 209.85.212.179 as permitted sender)
Received: from [209.85.212.179] (HELO mail-px0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 01:13:45 +0000
Received: by pxi2 with SMTP id 2so26742pxi.24
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 18:13:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=dvbXkdwvs+lVrVe6ww5PUwOMBWjXTypfzhpJfnA+cOE=;
        b=DevM/f4npopfMMzwOcnjk9uSPK3YswUhGPx+5usX8NI/EDEcfJjszPjtntvxoH2FeH
         CIJ3cIPrK+s6fTC6lM6sY7LSsKAKLj0Mhjs7BlJ6BNQVEuE2B3KuSsJI7JqGXLFGYBo3
         H/ttQ8rk3GlKFmS0qoBiSsn96RwFqR7i5XDq0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=ne0wZ3zpPl9bdJkAjOMD1aKuYX1uV5wqkFJGEFaqxYz1BEGA7/8wwhzKWKWIM0oxei
         tDbMc6OZdpfhcFs6+TxScOCBXW7Sc4IS6UdJtp+yis1gOIEZgbjIEnzptGvcw9+8c/PS
         QYg5IodEavb19vdwtxGTuFLW8CZQDyxz+RMyE=
MIME-Version: 1.0
Received: by 10.68.4.129 with SMTP id k1mr12277354pbk.72.1305076404884; Tue,
 10 May 2011 18:13:24 -0700 (PDT)
Received: by 10.68.63.4 with HTTP; Tue, 10 May 2011 18:13:24 -0700 (PDT)
In-Reply-To: <BANLkTim9xVL83jGbA=3byakFbh5W=PW1Sw@mail.gmail.com>
References: <BANLkTi=wkecx4asLEaL05M+_LX369tFUDg@mail.gmail.com>
	<BANLkTim9xVL83jGbA=3byakFbh5W=PW1Sw@mail.gmail.com>
Date: Wed, 11 May 2011 09:13:24 +0800
Message-ID: <BANLkTinTe=qu6qc=TgpS-Pc0ApeEH7oNiA@mail.gmail.com>
Subject: Re: How do I sort lucene search results by relevance and time?
From: Johnbin Wang <johnbin.wang@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec520e7c184949304a2f5c755

--bcaec520e7c184949304a2f5c755
Content-Type: text/plain; charset=ISO-8859-1

Thanks for your suggestion!

 I try to set document boost factor when indexing document. In order to
bubble up recent documents' scores, I set last three month's documents'
boost to 2 , and set other documents' boost factor to 0.5. The I search
index sorting by two fields, lucene default score and time desc. The sorting
results seem good. It meet my requirement.

On Mon, May 9, 2011 at 6:31 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Well, you can use one of the sorting search methods and pass multiple
> sort keys including relevance and a timestamp.  But I suspect the
> Google algorithm may be a bit more complex than that.
>
> One technique is boosting: set an index time document boost on recent
> documents.  Of course what is recent today may not be next week.
> There are other, more complex ways of customizing lucene scoring.  A
> Google search for something like "customized lucene scoring" will find
> lots of info, some recent, some older, but probably all relevant one
> way or another.
>
>
> --
> Ian.
>
>
> On Mon, May 9, 2011 at 4:59 AM, Johnbin Wang <johnbin.wang@gmail.com>
> wrote:
> > What do I want to do is just like Google search results.  The results in
> the
> > first page is the most relevant and also recent documents, but not
> > absolutely sorted by  time desc.
> >
> > --
> > cheers,
> > Johnbin Wang
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
cheers,
Johnbin Wang

--bcaec520e7c184949304a2f5c755--

From java-user-return-49699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 04:05:27 2011
Return-Path: <java-user-return-49699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 90BC94B04
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 04:05:27 +0000 (UTC)
Received: (qmail 8873 invoked by uid 500); 11 May 2011 04:05:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8490 invoked by uid 500); 11 May 2011 04:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8482 invoked by uid 99); 11 May 2011 04:05:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 04:05:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of wkoscho@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 04:05:17 +0000
Received: by bwz8 with SMTP id 8so176282bwz.35
        for <java-user@lucene.apache.org>; Tue, 10 May 2011 21:04:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=YVHNjwHX6+kIEAZ3Bx1l4UM7tcEQk1Gl1PObHHq7Ty0=;
        b=rlPaKODa7FQjo/rZFAN4LLL19OkLn4mkxze81tEMt79/+xy4IjMN5RF/V60uNv8ia7
         ZQatwztEfPsnMkwd4YCzdHGFfHMiMOJnooavJTzQ1tSPXcfRK/1pow5Zz8nWKPaZ0Aib
         xcMseD88Wo67gtQB5iJc31BGB14sNylYL8FqI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=IVYsEQTayAEh88N+VPTLehaF88E2ZApP3yg5GfyaP2wMySrIMrHYe36SXL71+E2viX
         VZr1bl04WtYnptEnx1A8iTeaE6igY6RWC6M9d+M+WQAkkSUnxhgLWTl1vPADoIIiqsNn
         Y1W5j2eg9txieC0du/GwjvI78nHNjFZrl67ro=
MIME-Version: 1.0
Received: by 10.204.25.20 with SMTP id x20mr302294bkb.112.1305086696738; Tue,
 10 May 2011 21:04:56 -0700 (PDT)
Received: by 10.204.35.196 with HTTP; Tue, 10 May 2011 21:04:56 -0700 (PDT)
Date: Wed, 11 May 2011 00:04:56 -0400
Message-ID: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
Subject: Can I omit ShingleFilter's filler tokens
From: William Koscho <wkoscho@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555b222f5d19d04a2f82ca3
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555b222f5d19d04a2f82ca3
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Can I remove the filler token _ from the n-gram-tokens that are generated by
a ShingleFilter?

I'm using a chain of filters: ClassicFilter, StopFilter, LowerCaseFilter,
and ShingleFilter to create phrase n-grams.  The ShingleFilter inserts
FILLER_TOKENs in place of the stopwords, but I don't want them.

How can I omit the filler tokens?

thanks
Bill

--00032555b222f5d19d04a2f82ca3--

From java-user-return-49700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 05:10:15 2011
Return-Path: <java-user-return-49700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 966154757
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 05:10:15 +0000 (UTC)
Received: (qmail 49120 invoked by uid 500); 11 May 2011 05:10:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48483 invoked by uid 500); 11 May 2011 05:10:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48475 invoked by uid 99); 11 May 2011 05:10:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 05:10:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [121.101.151.213] (HELO nm4-vm0.bullet.mail.in.yahoo.com) (121.101.151.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 11 May 2011 05:10:02 +0000
Received: from [121.101.151.238] by nm4.bullet.mail.in.yahoo.com with NNFMP; 11 May 2011 05:12:27 -0000
Received: from [121.101.151.232] by tm3.bullet.mail.in.yahoo.com with NNFMP; 11 May 2011 05:10:27 -0000
Received: from [127.0.0.1] by omp1001.mail.in.yahoo.com with NNFMP; 11 May 2011 05:09:39 -0000
X-Yahoo-Newman-Id: 831531.57007.bm@omp1001.mail.in.yahoo.com
Received: (qmail 24782 invoked from network); 11 May 2011 05:09:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.in;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE;
  b=E/qsiBaEmPGATu07WTyQZO4Eu8jIElEEJp7z9w9JNsLCwvwitKDXcGpBIobRTUDBlwi0VR1CSUqSeXa9zx6c1FxS0UNYyc7/bwAUZnDArLigCzKQoHpiA2FPFo7KbenbJWaj85mGTtLJ7yOPP6YWttbzh5tMri5qBuFbSgeZn3o=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.in; s=s1024; t=1305090579; bh=qwR94IAY6mn+QyFTkIzaCv1VUlAHMuzWvF2LNOWwi20=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:Message-ID:From:To:References:Subject:Date:MIME-Version:Content-Type:Content-Transfer-Encoding:X-Priority:X-MSMail-Priority:X-Mailer:X-MimeOLE; b=W2aR3UkBMl0SP/TrduYgPTYIiMH36ZRdjITY7bMlq/SF1gaIf10R1Tl/wbtoCKwo7ZQdoHqlYV5MsN4O/fXHNB9Y/9EDoTATXWZHQxsYUbJt5QHDyWvlOy1QP296NhPfnqK21JmukkAekmJjad2l9ntzDYMimi/Wh7tVf0d3KgA=
Received: from GaneshM (emailgane@121.244.159.130 with login)
        by smtp108.mail.in.yahoo.com with SMTP; 11 May 2011 10:39:39 +0530 IST
X-Yahoo-SMTP: JObyHkuswBBrNSLZp.Ycd7Boqpr_GQ--
X-YMail-OSG: kHoU25sVM1kG3Ai9lDM__YZ98UetYRNgoufSdz_K9qWCpxy
 cD7NO99V_m3uwGsqTWbtCtbjMGkebABq.SK57g6AImKX0mdMr86IrLE5PKBr
 6PSb9tREIPydersBE8IU7EGa_M8fS0mGdZKw1vlwGlAKeVHN4N9ZH74W0JKT
 5ptF.odt5ybY6m7WqGrPWmpp9fuHZ_ZjT0Jsfweu6o1eS7gVOlP5Fv4eCEu.
 JhvMFC22czLVBC5obKMnmIHniOCbNHH2nHELm0DZhG65rVqlP5_YGgXE.cLt
 AEz2OKgQItEbzn4bnwaivxYcCCw1yx9cMZlxwF2fwmPzUvLZxiYZps1o-
X-Yahoo-Newman-Property: ymail-3
Message-ID: <35D7C9FB5B22421F911EEF8CE8A9E587@sv.us.sonicwall.com>
From: "Ganesh" <emailgane@yahoo.co.in>
To: <java-user@lucene.apache.org>, <tburtonw@umich.edu>,
  <te@statsbiblioteket.dk>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com> <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com> <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com> <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
Subject: Re: Sharding Techniques
Date: Wed, 11 May 2011 10:39:38 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.5931
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.5931
X-Virus-Checked: Checked by ClamAV on apache.org


We also use similar kind of technique, breaking indexes in to smaller =
and search using ParallelMultiSearcher. We have to do incremental =
indexing and the records older than 6 months or 1 year (based on ageout =
setting) should be deleted. Having multiple small indexes is really fast =
in terms of indexing. =20

Since you guys mentioned about keeping single large index. Search time =
woule be faster but the indexing and index optimization will take more =
time. How you are handling it in case of incremental indexing. If we =
keep the indexes size to 100+ GB then each file size (fdt, fdx etc) =
would in GB's. Small addition or deletion to the file will not cause =
more IO as it has to skip those bytes and write it at the end of file.   =


Regards
Ganesh

----- Original Message -----=20
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: <java-user@lucene.apache.org>
Sent: Tuesday, May 10, 2011 9:46 PM
Subject: RE: Sharding Techniques


Hi Samar,

>>Normal queries go fine under 500 ms but when people start searching
>>"anything" some queries take up to > 100 seconds. Don't you think
>>distributing smaller indexes on different machines would reduce the =
average
>>.search time. (Although I have a feeling that search time for smaller =
queries
>>may be slightly increased)

What are the characteristics of your slow queries?  Can you give =
examples?   Are the slow queries always slow or only under heavy load?   =
What the bottleneck is and whether splitting into smaller indexes would =
help depends on just what your bottleneck is. It's not clear that your =
index is large enough that the size of the index is causing your =
bottleneck.

We run indexes of about 350GB with average response times under 200ms =
and 99th percentile reponse times of under 2 seconds. (We have a very =
low qps rate however).


Tom




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 08:11:01 2011
Return-Path: <java-user-return-49701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 684B94AC1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 08:11:01 +0000 (UTC)
Received: (qmail 35675 invoked by uid 500); 11 May 2011 08:10:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35359 invoked by uid 500); 11 May 2011 08:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35350 invoked by uid 99); 11 May 2011 08:10:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 08:10:55 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 08:10:50 +0000
Received: by fxm7 with SMTP id 7so268346fxm.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 01:10:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=HeJeySDwozyFv2/OqMS2+z4mq1KlghLF32EEY5611Vs=;
        b=ZPNYFMWC6tVq0yik+i8ZHVHQMaA97meR3bqdWJ7VxgIPv3fHVmRrgesHfpK+gUS+ok
         AerJWzIk0jtIkJQGp/QUUbIZhCXYozqq6n5sIdzC8misDe8Su6JnaPnIqAWI9R2fmVWE
         W7dpAmCzI58hyZgiczlZ+xOkNDwcfQKNHGzpY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Gz8bk1JCOdTC5+hSNcP+S+h+dM9L234TZWMkRqJBJXgwcJfNzXqU9h1RHRwQOLA+1u
         YFvGebVdnG37ZHnxSA89mhsvzTFlnPPf78PaDP9HdH3XNS2Gsxq13smW14ql9xh6arUl
         o76mMQ0Nu23f5+e/9SrXy+E5Y+SQGJO6cTLJg=
Received: by 10.223.3.132 with SMTP id 4mr1204028fan.132.1305101429354; Wed,
 11 May 2011 01:10:29 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.81.66 with HTTP; Wed, 11 May 2011 01:10:14 -0700 (PDT)
In-Reply-To: <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
 <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com> <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
From: Samarendra Pratap <samarzone@gmail.com>
Date: Wed, 11 May 2011 13:40:14 +0530
Message-ID: <BANLkTimRy02u6YG=nWzdg3oNSDJR8qQ0WA@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a80b17b0cd04a2fb9b54

--20cf3054a80b17b0cd04a2fb9b54
Content-Type: text/plain; charset=ISO-8859-1

Hi Tom,
 the more i am getting responses in this thread the more i feel that our
application needs optimization.

350 GB and less than 2 seconds!!! That's much more than my expectation :-)
(in current scenario).

*characteristics of slow queries:*
 there are a few reasons for greater search time

 1.Two of our fields contain decimal values but are not NumericField :( .
These fields are searched as a range. Whenever the ranges are larger and/or
both the fields are used in search the search time and server load goes
high. I have already started work to convert it to NumericField - but
suggestions and experiences are most welcome.

2. When queries (without two fields mentioned above) have a lot of
words/phrases search time is high. E.g I took a query with around 80 unique
terms (not words) in 5 fields. These terms occur repeatedly and become total
225 terms (non-unique). This particular query took 4.2 seconds. the 15
indexes used for this query were of total size 5 G.
Are 225 terms (80 unique) is a very big number?

and yes, slow queries are always slow. yes but obviously high load will add
up to their slowness.




Here I have another curiosity about something I noticed.
If I have a query like following:


title:xyz title:xyz title:xyz title:xyz title:xyz title:xyz title:xyz
title:xyz title:xyz title:xyz title:xyz

*Will lucene search for the term 11 times or it will reuse the results of
first term?*

If later is true (which I think is), is there any particular reason or it
may be optimized inside lucene?


On Tue, May 10, 2011 at 9:46 PM, Burton-West, Tom <tburtonw@umich.edu>wrote:

> Hi Samar,
>
> >>Normal queries go fine under 500 ms but when people start searching
> >>"anything" some queries take up to > 100 seconds. Don't you think
> >>distributing smaller indexes on different machines would reduce the
> average
> >>.search time. (Although I have a feeling that search time for smaller
> queries
> >>may be slightly increased)
>
> What are the characteristics of your slow queries?  Can you give examples?
>   Are the slow queries always slow or only under heavy load?   What the
> bottleneck is and whether splitting into smaller indexes would help depends
> on just what your bottleneck is. It's not clear that your index is large
> enough that the size of the index is causing your bottleneck.
>
> We run indexes of about 350GB with average response times under 200ms and
> 99th percentile reponse times of under 2 seconds. (We have a very low qps
> rate however).
>
>
> Tom
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Samar

--20cf3054a80b17b0cd04a2fb9b54--

From java-user-return-49702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 08:59:57 2011
Return-Path: <java-user-return-49702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4D97C4498
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 08:59:57 +0000 (UTC)
Received: (qmail 4049 invoked by uid 500); 11 May 2011 08:59:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4010 invoked by uid 500); 11 May 2011 08:59:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4002 invoked by uid 99); 11 May 2011 08:59:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 08:59:55 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 08:59:50 +0000
Received: by iym1 with SMTP id 1so212050iym.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 01:59:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=HbKkMf/cHqaIS0a4QaRuq7/9GsRDPBrnmZWjzSYzt0g=;
        b=tfEwkP4vKQWJWlgq8Qc+hSlyfafshOoFyNa5HZ1pREwWGkcd8+GrtGEfLBXi+DQbqq
         IFjLqBgEQmYx1LHciJU42Bc4WSbdz65GcEFby+lalq/dGWX4OxDoMCHLLFhae8hyS0N1
         o8bPMi/OwF8R1Ud8OzYhGbyM+6kQhkX/l5g00=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=pkrI9dxYv23QcrIC44mwvIC55+J/UIFBlEqpCGjNROWoE13ZGgusru5J2d+jqYRBak
         5otsnI9aer661W2B723em7sdav/V/FJ/giXmZtxytb+ePQesd8fbMZSFSk/zuQrxpVQl
         uene9mB0QDwi6HRwTmXySl1t51itsxGyrtPSA=
Received: by 10.231.116.229 with SMTP id n37mr409494ibq.153.1305104370083;
 Wed, 11 May 2011 01:59:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.207.80 with HTTP; Wed, 11 May 2011 01:59:10 -0700 (PDT)
In-Reply-To: <35D7C9FB5B22421F911EEF8CE8A9E587@sv.us.sonicwall.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
 <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com> <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <35D7C9FB5B22421F911EEF8CE8A9E587@sv.us.sonicwall.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 11 May 2011 09:59:10 +0100
Message-ID: <BANLkTinLCvZW9PZApzfYUvGAyz7UtNb0_Q@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Ganesh


Nobody is saying that sharding is never a good idea - it just doesn't
seem to be applicable in the case being discussed.  On my indexes I
care much more about speed of searching rather than speed of indexing.
 The latter typically happens in the background in the dead of night
and within reason I don't really care how long it takes.  Your
application and requirements will be different and you may come to
different conclusions.


--
Ian.


On Wed, May 11, 2011 at 6:09 AM, Ganesh <emailgane@yahoo.co.in> wrote:
>
> We also use similar kind of technique, breaking indexes in to smaller and=
 search using ParallelMultiSearcher. We have to do incremental indexing and=
 the records older than 6 months or 1 year (based on ageout setting) should=
 be deleted. Having multiple small indexes is really fast in terms of index=
ing.
>
> Since you guys mentioned about keeping single large index. Search time wo=
ule be faster but the indexing and index optimization will take more time. =
How you are handling it in case of incremental indexing. If we keep the ind=
exes size to 100+ GB then each file size (fdt, fdx etc) would in GB's. Smal=
l addition or deletion to the file will not cause more IO as it has to skip=
 those bytes and write it at the end of file.
>
> Regards
> Ganesh
>
> ----- Original Message -----
> From: "Burton-West, Tom" <tburtonw@umich.edu>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, May 10, 2011 9:46 PM
> Subject: RE: Sharding Techniques
>
>
> Hi Samar,
>
>>>Normal queries go fine under 500 ms but when people start searching
>>>"anything" some queries take up to > 100 seconds. Don't you think
>>>distributing smaller indexes on different machines would reduce the aver=
age
>>>.search time. (Although I have a feeling that search time for smaller qu=
eries
>>>may be slightly increased)
>
> What are the characteristics of your slow queries? =A0Can you give exampl=
es? =A0 Are the slow queries always slow or only under heavy load? =A0 What=
 the bottleneck is and whether splitting into smaller indexes would help de=
pends on just what your bottleneck is. It's not clear that your index is la=
rge enough that the size of the index is causing your bottleneck.
>
> We run indexes of about 350GB with average response times under 200ms and=
 99th percentile reponse times of under 2 seconds. (We have a very low qps =
rate however).
>
>
> Tom
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 09:16:02 2011
Return-Path: <java-user-return-49703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 19D8A4071
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 09:16:02 +0000 (UTC)
Received: (qmail 32336 invoked by uid 500); 11 May 2011 09:16:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32287 invoked by uid 500); 11 May 2011 09:16:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32278 invoked by uid 99); 11 May 2011 09:16:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 09:15:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 09:15:54 +0000
Received: by iym1 with SMTP id 1so225260iym.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 02:15:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=exesB6U0FALSB4lkLq57bOcGDWncCzIfnapLH73Fpy8=;
        b=wp4AKFKRp0g+FHFpbmlFhjxoXv26b1a6oAguIuNzvkqq+1VwAN0OD1cQ8iS2Dwj0dM
         js0RzP3KECe/V6jKo11Sr5G5V3PM2tuC0ghVdDZMx2hJ7yBXsVG1PZ9XIxsJ+ajahyGK
         vi1LRu3l5t9ZQHQcWmTLLh7jrnmkkKt0kWRv4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=nAlnEqSiADPC8Ig87KoF/dNzRwyG1Cil9oSg/3e0A+jKzjdZtjPMFnCHVkqRmyl7Ma
         ZUF+2A0sBFxR4cTtMdHuhyxCYAzeaKw87NqlZj0RGUQZDtAzV/e7puezNopwdma8ccSn
         Ag1DFp4zfXJKuy6Kx3iT/XGhjopjeTthtPdmw=
Received: by 10.231.117.157 with SMTP id r29mr6277988ibq.128.1305105334185;
 Wed, 11 May 2011 02:15:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.207.80 with HTTP; Wed, 11 May 2011 02:15:14 -0700 (PDT)
In-Reply-To: <BANLkTimRy02u6YG=nWzdg3oNSDJR8qQ0WA@mail.gmail.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
 <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com> <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <BANLkTimRy02u6YG=nWzdg3oNSDJR8qQ0WA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 11 May 2011 10:15:14 +0100
Message-ID: <BANLkTimO_GOjNvZT-OhNKk7qx4VKXeX5Bg@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I'm sure that you should try building one large index and convert to
NumericField wherever you can.  I'm convinced that will be faster -
but as ever, the proof will be in the numbers.

On repeated terms, I believe that lucene will search multiple times.
If so, I'd guess it is just something that has never been optimized.
225 terms is not a very big number, but not very small either.
Complex queries with lots of terms can be expected to be slower than
simple queries with few terms.  If you have a particular problem with
repeated terms perhaps you could dedup them yourself.


--
Ian.

On Wed, May 11, 2011 at 9:10 AM, Samarendra Pratap <samarzone@gmail.com> wr=
ote:
> Hi Tom,
> =A0the more i am getting responses in this thread the more i feel that ou=
r
> application needs optimization.
>
> 350 GB and less than 2 seconds!!! That's much more than my expectation :-=
)
> (in current scenario).
>
> *characteristics of slow queries:*
> =A0there are a few reasons for greater search time
>
> =A01.Two of our fields contain decimal values but are not NumericField :(=
 .
> These fields are searched as a range. Whenever the ranges are larger and/=
or
> both the fields are used in search the search time and server load goes
> high. I have already started work to convert it to NumericField - but
> suggestions and experiences are most welcome.
>
> 2. When queries (without two fields mentioned above) have a lot of
> words/phrases search time is high. E.g I took a query with around 80 uniq=
ue
> terms (not words) in 5 fields. These terms occur repeatedly and become to=
tal
> 225 terms (non-unique). This particular query took 4.2 seconds. the 15
> indexes used for this query were of total size 5 G.
> Are 225 terms (80 unique) is a very big number?
>
> and yes, slow queries are always slow. yes but obviously high load will a=
dd
> up to their slowness.
>
>
>
>
> Here I have another curiosity about something I noticed.
> If I have a query like following:
>
>
> title:xyz title:xyz title:xyz title:xyz title:xyz title:xyz title:xyz
> title:xyz title:xyz title:xyz title:xyz
>
> *Will lucene search for the term 11 times or it will reuse the results of
> first term?*
>
> If later is true (which I think is), is there any particular reason or it
> may be optimized inside lucene?
>
>
> On Tue, May 10, 2011 at 9:46 PM, Burton-West, Tom <tburtonw@umich.edu>wro=
te:
>
>> Hi Samar,
>>
>> >>Normal queries go fine under 500 ms but when people start searching
>> >>"anything" some queries take up to > 100 seconds. Don't you think
>> >>distributing smaller indexes on different machines would reduce the
>> average
>> >>.search time. (Although I have a feeling that search time for smaller
>> queries
>> >>may be slightly increased)
>>
>> What are the characteristics of your slow queries? =A0Can you give examp=
les?
>> =A0 Are the slow queries always slow or only under heavy load? =A0 What =
the
>> bottleneck is and whether splitting into smaller indexes would help depe=
nds
>> on just what your bottleneck is. It's not clear that your index is large
>> enough that the size of the index is causing your bottleneck.
>>
>> We run indexes of about 350GB with average response times under 200ms an=
d
>> 99th percentile reponse times of under 2 seconds. (We have a very low qp=
s
>> rate however).
>>
>>
>> Tom
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --
> Regards,
> Samar
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 12:28:16 2011
Return-Path: <java-user-return-49704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EA91B4590
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 12:28:15 +0000 (UTC)
Received: (qmail 97974 invoked by uid 500); 11 May 2011 12:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97924 invoked by uid 500); 11 May 2011 12:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97916 invoked by uid 99); 11 May 2011 12:28:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 12:28:13 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 12:28:05 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p4BCRhkA019706
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 11 May 2011 08:27:43 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Wed, 11 May 2011
 08:27:43 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 11 May 2011 08:27:40 -0400
Subject: RE: Can I omit ShingleFilter's filler tokens
Thread-Topic: Can I omit ShingleFilter's filler tokens
Thread-Index: AcwPkKxfc74GASpXSX2EjCEk2y6LVAARG3lA
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
In-Reply-To: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-05-11_05:2011-05-11,2011-05-11,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgQmlsbCwNCg0KSSBjYW4gdGhpbmsgb2YgdHdvIHBvc3NpYmxlIGludGVycHJldGF0aW9ucyBv
ZiAicmVtb3ZpbmcgZmlsbGVyIHRva2VucyI6DQoNCjEuIERvbid0IGNyZWF0ZSBzaGluZ2xlcyBh
Y3Jvc3Mgc3RvcHdvcmRzLCBlLmcuIGZvciB0ZXh0ICJvbmUgdHdvIHRocmVlIGZvdXIgZml2ZSIg
YW5kIHN0b3B3b3JkICJ0aHJlZSIsIGJpZ3JhbXMgb25seSwgeW91J2QgZ2V0ICgib25lIHR3byIs
ICJmb3VyIGZpdmUiKSwgaW5zdGVhZCBvZiB0aGUgY3VycmVudCAoIm9uZSB0d28iLCAidHdvIF8i
LCAiXyBmb3VyIiwgImZvdXIgZml2ZSIpLg0KDQoyLiBDcmVhdGUgc2hpbmdsZXMgYXMgaWYgdGhl
IHN0b3B3b3JkcyB3ZXJlIG5ldmVyIHRoZXJlLCBlLmcuIGZvciB0aGUgc2FtZSB0ZXh0IGFuZCBz
dG9wd29yZCwgYmlncmFtcyBvbmx5LCB5b3UnZCBnZXQgKCJvbmUgdHdvIiwgInR3byBmb3VyIiwg
ImZvdXIgZml2ZSIpLg0KDQpXaGljaCBvbmUgZGlkIHlvdSBoYXZlIGluIG1pbmQ/ICAjMiBjYW4g
YmUgYWNoaWV2ZWQgYnkgYWRkaW5nIFBvc2l0aW9uRmlsdGVyIGFmdGVyIFN0b3BGaWx0ZXIgYW5k
IGJlZm9yZSBTaGluZ2xlRmlsdGVyLiAgSSB0aGluayAjMSByZXF1aXJlcyBTaGluZ2xlRmlsdGVy
IG1vZGlmaWNhdGlvbnMuDQoNClN0ZXZlDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0N
Cj4gRnJvbTogV2lsbGlhbSBLb3NjaG8gW21haWx0bzp3a29zY2hvQGdtYWlsLmNvbV0NCj4gU2Vu
dDogV2VkbmVzZGF5LCBNYXkgMTEsIDIwMTEgMTI6MDUgQU0NCj4gVG86IGphdmEtdXNlckBsdWNl
bmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBDYW4gSSBvbWl0IFNoaW5nbGVGaWx0ZXIncyBmaWxs
ZXIgdG9rZW5zDQo+IA0KPiBIaSwNCj4gDQo+IENhbiBJIHJlbW92ZSB0aGUgZmlsbGVyIHRva2Vu
IF8gZnJvbSB0aGUgbi1ncmFtLXRva2VucyB0aGF0IGFyZSBnZW5lcmF0ZWQNCj4gYnkNCj4gYSBT
aGluZ2xlRmlsdGVyPw0KPiANCj4gSSdtIHVzaW5nIGEgY2hhaW4gb2YgZmlsdGVyczogQ2xhc3Np
Y0ZpbHRlciwgU3RvcEZpbHRlciwgTG93ZXJDYXNlRmlsdGVyLA0KPiBhbmQgU2hpbmdsZUZpbHRl
ciB0byBjcmVhdGUgcGhyYXNlIG4tZ3JhbXMuICBUaGUgU2hpbmdsZUZpbHRlciBpbnNlcnRzDQo+
IEZJTExFUl9UT0tFTnMgaW4gcGxhY2Ugb2YgdGhlIHN0b3B3b3JkcywgYnV0IEkgZG9uJ3Qgd2Fu
dCB0aGVtLg0KPiANCj4gSG93IGNhbiBJIG9taXQgdGhlIGZpbGxlciB0b2tlbnM/DQo+IA0KPiB0
aGFua3MNCj4gQmlsbA0K


From java-user-return-49705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 13:02:22 2011
Return-Path: <java-user-return-49705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D3ED44154
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 13:02:22 +0000 (UTC)
Received: (qmail 42265 invoked by uid 500); 11 May 2011 13:02:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42222 invoked by uid 500); 11 May 2011 13:02:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42214 invoked by uid 99); 11 May 2011 13:02:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 13:02:19 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 13:02:14 +0000
Received: by bwz8 with SMTP id 8so584856bwz.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 06:01:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=4CEVxfNgDDhyJ+5ucLrttLL3u48osr3XWEpm6W8euM4=;
        b=S/TbkEqVVsu6Mx+toN9xcdWkq1ZTOM5vTcEqAC84UWCzITEc+NonOsXfBSufB6oNhm
         vt+G3zpSkTCbPGQlmVYiwaf8oyK40LzUMPfWx7P92hPE4pUkTTH2x7H1rmWob1K4XW8a
         CI0S++S+vigYRJVJPFKi3hVDkDwVvhm4eLUHc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=u/Q+D0qPbLk8zGeQsWR7XhLHGiHGppsUZsT1bi3sBrwDOCy6sdqdGjRbCJD8YQRIFo
         a4qPRyxjmRxQaRaAbkP8/sQhnKWpUX5nvftRePynhdwa1qGLLBkWbH+EhLR+vEZCtE9k
         H2DMDJ7qVFDVM9bTvnWmyvIswL8xpwrHIob9E=
Received: by 10.204.152.5 with SMTP id e5mr285931bkw.138.1305118913099; Wed,
 11 May 2011 06:01:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Wed, 11 May 2011 06:01:32 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 11 May 2011 09:01:32 -0400
Message-ID: <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com>
Subject: Re: Can I omit ShingleFilter's filler tokens
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

another idea is to .setEnablePositionIncrements(false) on your stopfilter.

On Wed, May 11, 2011 at 8:27 AM, Steven A Rowe <sarowe@syr.edu> wrote:
> Hi Bill,
>
> I can think of two possible interpretations of "removing filler tokens":
>
> 1. Don't create shingles across stopwords, e.g. for text "one two three f=
our five" and stopword "three", bigrams only, you'd get ("one two", "four f=
ive"), instead of the current ("one two", "two _", "_ four", "four five").
>
> 2. Create shingles as if the stopwords were never there, e.g. for the sam=
e text and stopword, bigrams only, you'd get ("one two", "two four", "four =
five").
>
> Which one did you have in mind? =C2=A0#2 can be achieved by adding Positi=
onFilter after StopFilter and before ShingleFilter. =C2=A0I think #1 requir=
es ShingleFilter modifications.
>
> Steve
>
>> -----Original Message-----
>> From: William Koscho [mailto:wkoscho@gmail.com]
>> Sent: Wednesday, May 11, 2011 12:05 AM
>> To: java-user@lucene.apache.org
>> Subject: Can I omit ShingleFilter's filler tokens
>>
>> Hi,
>>
>> Can I remove the filler token _ from the n-gram-tokens that are generate=
d
>> by
>> a ShingleFilter?
>>
>> I'm using a chain of filters: ClassicFilter, StopFilter, LowerCaseFilter=
,
>> and ShingleFilter to create phrase n-grams. =C2=A0The ShingleFilter inse=
rts
>> FILLER_TOKENs in place of the stopwords, but I don't want them.
>>
>> How can I omit the filler tokens?
>>
>> thanks
>> Bill
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 13:16:54 2011
Return-Path: <java-user-return-49706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3D8DD45A2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 13:16:54 +0000 (UTC)
Received: (qmail 66389 invoked by uid 500); 11 May 2011 13:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66352 invoked by uid 500); 11 May 2011 13:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66344 invoked by uid 99); 11 May 2011 13:16:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 13:16:51 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 13:16:43 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p4BDGL9i005708
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 11 May 2011 09:16:22 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Wed, 11 May 2011
 09:16:22 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 11 May 2011 09:16:20 -0400
Subject: RE: Can I omit ShingleFilter's filler tokens
Thread-Topic: Can I omit ShingleFilter's filler tokens
Thread-Index: AcwP266BMb0te5zNT8i7FTGsJVJ7kwAAT2+Q
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
 <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com>
In-Reply-To: <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-05-11_06:2011-05-11,2011-05-11,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

WWVzLCBTdG9wRmlsdGVyLnNldEVuYWJsZVBvc2l0aW9uSW5jcmVtZW50cyhmYWxzZSkgd2lsbCBh
bG1vc3QgY2VydGFpbmx5IGdldCBoaWdoZXIgdGhyb3VnaHB1dCB0aGFuIGluc2VydGluZyBQb3Np
dGlvbkZpbHRlci4gIExpa2UgUG9zaXRpb25GaWx0ZXIsIHRoaXMgd2lsbCBidXkgeW91ICMyIChj
cmVhdGUgc2hpbmdsZXMgYXMgaWYgc3RvcHdvcmRzIHdlcmUgbmV2ZXIgdGhlcmUpLCBidXQgbm90
ICMxIChkb24ndCBjcmVhdGUgc2hpbmdsZXMgYWNyb3NzIHN0b3B3b3JkcykuDQoNCj4gLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogUm9iZXJ0IE11aXIgW21haWx0bzpyY211aXJA
Z21haWwuY29tXQ0KPiBTZW50OiBXZWRuZXNkYXksIE1heSAxMSwgMjAxMSA5OjAyIEFNDQo+IFRv
OiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUmU6IENhbiBJIG9taXQg
U2hpbmdsZUZpbHRlcidzIGZpbGxlciB0b2tlbnMNCj4gDQo+IGFub3RoZXIgaWRlYSBpcyB0byAu
c2V0RW5hYmxlUG9zaXRpb25JbmNyZW1lbnRzKGZhbHNlKSBvbiB5b3VyDQo+IHN0b3BmaWx0ZXIu
DQo+IA0KPiBPbiBXZWQsIE1heSAxMSwgMjAxMSBhdCA4OjI3IEFNLCBTdGV2ZW4gQSBSb3dlIDxz
YXJvd2VAc3lyLmVkdT4gd3JvdGU6DQo+ID4gSGkgQmlsbCwNCj4gPg0KPiA+IEkgY2FuIHRoaW5r
IG9mIHR3byBwb3NzaWJsZSBpbnRlcnByZXRhdGlvbnMgb2YgInJlbW92aW5nIGZpbGxlcg0KPiB0
b2tlbnMiOg0KPiA+DQo+ID4gMS4gRG9uJ3QgY3JlYXRlIHNoaW5nbGVzIGFjcm9zcyBzdG9wd29y
ZHMsIGUuZy4gZm9yIHRleHQgIm9uZSB0d28gdGhyZWUNCj4gZm91ciBmaXZlIiBhbmQgc3RvcHdv
cmQgInRocmVlIiwgYmlncmFtcyBvbmx5LCB5b3UnZCBnZXQgKCJvbmUgdHdvIiwNCj4gImZvdXIg
Zml2ZSIpLCBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50ICgib25lIHR3byIsICJ0d28gXyIsICJfIGZv
dXIiLCAiZm91cg0KPiBmaXZlIikuDQo+ID4NCj4gPiAyLiBDcmVhdGUgc2hpbmdsZXMgYXMgaWYg
dGhlIHN0b3B3b3JkcyB3ZXJlIG5ldmVyIHRoZXJlLCBlLmcuIGZvciB0aGUNCj4gc2FtZSB0ZXh0
IGFuZCBzdG9wd29yZCwgYmlncmFtcyBvbmx5LCB5b3UnZCBnZXQgKCJvbmUgdHdvIiwgInR3byBm
b3VyIiwNCj4gImZvdXIgZml2ZSIpLg0KPiA+DQo+ID4gV2hpY2ggb25lIGRpZCB5b3UgaGF2ZSBp
biBtaW5kPyDCoCMyIGNhbiBiZSBhY2hpZXZlZCBieSBhZGRpbmcNCj4gUG9zaXRpb25GaWx0ZXIg
YWZ0ZXIgU3RvcEZpbHRlciBhbmQgYmVmb3JlIFNoaW5nbGVGaWx0ZXIuIMKgSSB0aGluayAjMQ0K
PiByZXF1aXJlcyBTaGluZ2xlRmlsdGVyIG1vZGlmaWNhdGlvbnMuDQo+ID4NCj4gPiBTdGV2ZQ0K
PiA+DQo+ID4+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4+IEZyb206IFdpbGxpYW0g
S29zY2hvIFttYWlsdG86d2tvc2Nob0BnbWFpbC5jb21dDQo+ID4+IFNlbnQ6IFdlZG5lc2RheSwg
TWF5IDExLCAyMDExIDEyOjA1IEFNDQo+ID4+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5v
cmcNCj4gPj4gU3ViamVjdDogQ2FuIEkgb21pdCBTaGluZ2xlRmlsdGVyJ3MgZmlsbGVyIHRva2Vu
cw0KPiA+Pg0KPiA+PiBIaSwNCj4gPj4NCj4gPj4gQ2FuIEkgcmVtb3ZlIHRoZSBmaWxsZXIgdG9r
ZW4gXyBmcm9tIHRoZSBuLWdyYW0tdG9rZW5zIHRoYXQgYXJlDQo+IGdlbmVyYXRlZA0KPiA+PiBi
eQ0KPiA+PiBhIFNoaW5nbGVGaWx0ZXI/DQo+ID4+DQo+ID4+IEknbSB1c2luZyBhIGNoYWluIG9m
IGZpbHRlcnM6IENsYXNzaWNGaWx0ZXIsIFN0b3BGaWx0ZXIsDQo+IExvd2VyQ2FzZUZpbHRlciwN
Cj4gPj4gYW5kIFNoaW5nbGVGaWx0ZXIgdG8gY3JlYXRlIHBocmFzZSBuLWdyYW1zLiDCoFRoZSBT
aGluZ2xlRmlsdGVyIGluc2VydHMNCj4gPj4gRklMTEVSX1RPS0VOcyBpbiBwbGFjZSBvZiB0aGUg
c3RvcHdvcmRzLCBidXQgSSBkb24ndCB3YW50IHRoZW0uDQo+ID4+DQo+ID4+IEhvdyBjYW4gSSBv
bWl0IHRoZSBmaWxsZXIgdG9rZW5zPw0KPiA+Pg0KPiA+PiB0aGFua3MNCj4gPj4gQmlsbA0KPiA+
DQo+IA0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRz
LCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg==


From java-user-return-49707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 13:25:02 2011
Return-Path: <java-user-return-49707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8250746B2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 13:25:02 +0000 (UTC)
Received: (qmail 81032 invoked by uid 500); 11 May 2011 13:25:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80995 invoked by uid 500); 11 May 2011 13:25:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80987 invoked by uid 99); 11 May 2011 13:25:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 13:25:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 13:24:56 +0000
Received: by bwz8 with SMTP id 8so615488bwz.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 06:24:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=ZfhnFquUeQtJer5KUQTJ2njkH4rO7x5bRCA68SX0m8o=;
        b=XmwjP//M3dOsY9jMiFnMzssGjpPocmNqFk5gQVzb5yJenadiV/VnhjLYHlq7Ujiw61
         KkB/2JcmBw3Cb1ephhCRjZF178BJo+eTS8udOO6JWBlGRll004rysQvu1d/uVPbYB/3R
         C0nEWM0SsMChmF5KATvAq11/kLNHOeexcR17A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=fffEr6Ro6UjXVY7nO6cTSxBjCKTjz8vTb+ekcXh/VSbJoxE+FWR6MIVvyoggDsGCAC
         lNDWTI+S/nq3u6P2C2emHihGNFpgiSBIUGJPFyERkngYS9efLNyfBe7Nm4OmdYxP49+c
         nuciLI+1gg/5pt1Le7QZzhU3gJ6HwgATS62yk=
Received: by 10.204.20.134 with SMTP id f6mr1231975bkb.165.1305120274513; Wed,
 11 May 2011 06:24:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Wed, 11 May 2011 06:24:14 -0700 (PDT)
In-Reply-To: <70EA5691BD59734784FF872CD1B9747A284F5D0B54@OHCINMBX01.corp.local>
References: <70EA5691BD59734784FF872CD1B9747A284F5D0B54@OHCINMBX01.corp.local>
From: Robert Muir <rcmuir@gmail.com>
Date: Wed, 11 May 2011 09:24:14 -0400
Message-ID: <BANLkTi=vi0+y1jeY7mhgnHg8360qecGShA@mail.gmail.com>
Subject: Re: Non-English Languages Search
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Mon, May 9, 2011 at 5:32 PM, Provalov, Ivan
<Ivan.Provalov@cengage.com> wrote:
> We are planning to ingest some non-English content into our application. =
=C2=A0All content is OCR'ed and there are a lot of misspellings and garbage=
 terms because of this. =C2=A0Each document has one primary language with a=
 some exceptions (e.g. a few English terms mixed in with primarily non-Engl=
ish document terms).
>

sounds like you should talk to Tom Burton-West!

> 1. Does it make sense to mix two or more different Latin-based languages =
in the same index directory in Lucene (e.g. Spanish/French/English)?

I think it depends upon the application. If the user is specifying the
language via the UI somehow then its probably simplest to just use
different indexes for each collection.

> 2. What about mixing Latin and non-Latin languages? =C2=A0We ran tests on=
 English and Chinese collections mixed together and didn't see any negative=
 impact (precision/recall). =C2=A0Any other potential issues?

Right, none of the terms would overlap here... the only "issue" would
be a skewed maxDoc but this is probably not a big deal at all. But
whats the benefit to mixing them?

> 3. Any recommendations for an Urdu analyzer?
>

you can always start with standardanalyzer as it will tokenize it...
you might be able to make use of resources such as
http://www.crulp.org/software/ling_resources/UrduClosedClassWordsList.htm
and http://www.crulp.org/software/ling_resources/UrduHighFreqWords.htm
as a stoplist.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 14:04:57 2011
Return-Path: <java-user-return-49708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E7DA243B2
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 14:04:57 +0000 (UTC)
Received: (qmail 91740 invoked by uid 500); 11 May 2011 14:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91649 invoked by uid 500); 11 May 2011 14:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91641 invoked by uid 99); 11 May 2011 14:04:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 14:04:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_FILL_THIS_FORM_SHORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paulocsc@terra.com.br designates 208.84.243.50 as permitted sender)
Received: from [208.84.243.50] (HELO if04-mail-sr03-mia.mta.terra.com) (208.84.243.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 14:04:48 +0000
Received: from 1ca.tpn.terra.com (1ca.tpn.terra.com [10.235.200.58])
	by mail-sr03-mia.tpn.terra.com (Postfix) with ESMTP id 42A593000047
	for <java-user@lucene.apache.org>; Wed, 11 May 2011 14:04:27 +0000 (UTC)
X-Terra-Karma:         -2%
X-Terra-Hash: b33eb53ffb3cb01d03d926e486b99bba
Received-SPF: pass (1ca.tpn.terra.com: domain of terra.com.br designates 208.84.242.62 as permitted sender) client-ip=208.84.242.62; envelope-from=paulocsc@terra.com.br; helo=terra.com.br;
Received: from terra.com.br (calume.terra.com [208.84.242.163])
	(authenticated user paulocsc)
	by 1ca.tpn.terra.com (Postfix) with ESMTPA id 1F59043668A6C
	for <java-user@lucene.apache.org>; Wed, 11 May 2011 14:04:27 +0000 (UTC)
MIME-Version: 1.0
X-Mailer: TerraMail PHP 5.2
Message-ID: <55846.1305122667@terra.com.br>
To: <java-user@lucene.apache.org>
Reply-To: paulocsc@terra.com.br
Content-Type: multipart/alternative;
	boundary="=_c8b754cbcc35951e1b3f9cf4080fb605"
X-Origin: 189.10.116.109
Date: Wed, 11 May 2011 14:04:27 +0000
Subject: Bug in BrazilianAnalyzer?
From: paulocsc@terra.com.br
X-CLX-Rate-Response: 

--=_c8b754cbcc35951e1b3f9cf4080fb605
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"

 Hi,
 I did a test to understand the use of '*'and '?'.
 If I use StandardAnalyzer I have expected results by if a use
BrazilianAnalyzer I have a mistake result.
 Please, where is my mistake? Junit is at the end.
 Paulo Cesar
 cities =3D {"Bras=C3=ADlia","Brasil=C3=A2ndia","Brasl=C3=A2ndia", "S=C3=A3=
o Paulo",
"S=C3=A3o Roque", "Salvador"};
 >>> Using StandardAnalyzer > Using BrazilianAnalyzer >  JUnit =20
--=_c8b754cbcc35951e1b3f9cf4080fb605--


From java-user-return-49709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 14:19:40 2011
Return-Path: <java-user-return-49709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A810E4ED6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 14:19:40 +0000 (UTC)
Received: (qmail 33756 invoked by uid 500); 11 May 2011 14:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33569 invoked by uid 500); 11 May 2011 14:19:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33561 invoked by uid 99); 11 May 2011 14:19:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 14:19:38 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adrianocrestani@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 14:19:32 +0000
Received: by pzk10 with SMTP id 10so348582pzk.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 07:19:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=q07tt7MZ1WVccwe5sw3cOqNSffAHSuSqUFuLe991kT4=;
        b=QQ+VSYbqi7l19/YLu5cMCMsl2ja7rrqkIPhpVjA3WKIcjbDSvjQ7Yq9OSI6wZzSYeJ
         VFlnBSMm4Id05vm4OQEbGJEHhNNyNGfWVG0toOlZDDRkq2VL6qS4vlu+nBd5rF33bjkk
         BYBYyUfcnXL2f1a3RQBXmR747x6DeYyN2zP6c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=unWSB02PNVGiWArB9wlAXEwfUZsZnXUlDtWiQZrHPIhSamVZKZpcKn3bIYdksSJ9pL
         lYBGH96OzfIrNI5C+XkdMbM1usxlnN3eoLAZEZVG0BxKfVHYopkVluuOhAO9sLu1kX20
         ZOypH5AjVaUdprfZtfdPeNk4W2Yvwbw5xewwc=
Received: by 10.68.36.232 with SMTP id t8mr9923608pbj.82.1305123551605; Wed,
 11 May 2011 07:19:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.52.4 with HTTP; Wed, 11 May 2011 07:18:51 -0700 (PDT)
In-Reply-To: <55846.1305122667@terra.com.br>
References: <55846.1305122667@terra.com.br>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Wed, 11 May 2011 10:18:51 -0400
Message-ID: <BANLkTiknnua8=xY_cE4e9Xdc-im1yw-XJw@mail.gmail.com>
Subject: Re: Bug in BrazilianAnalyzer?
To: java-user@lucene.apache.org, paulocsc@terra.com.br
Content-Type: multipart/alternative; boundary=bcaec520e817ae75a004a300c158

--bcaec520e817ae75a004a300c158
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

I think you forgot to attach the JUnit.

On Wed, May 11, 2011 at 10:04 AM, <paulocsc@terra.com.br> wrote:

>  Hi,
>  I did a test to understand the use of '*'and '?'.
>  If I use StandardAnalyzer I have expected results by if a use
> BrazilianAnalyzer I have a mistake result.
>  Please, where is my mistake? Junit is at the end.
>  Paulo Cesar
>  cities =3D {"Bras=EDlia","Brasil=E2ndia","Brasl=E2ndia", "S=E3o Paulo",
> "S=E3o Roque", "Salvador"};
>  >>> Using StandardAnalyzer > Using BrazilianAnalyzer >  JUnit

--bcaec520e817ae75a004a300c158--

From java-user-return-49710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 16:08:23 2011
Return-Path: <java-user-return-49710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6CF1E4D11
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 16:08:23 +0000 (UTC)
Received: (qmail 59465 invoked by uid 500); 11 May 2011 16:08:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59426 invoked by uid 500); 11 May 2011 16:08:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59417 invoked by uid 99); 11 May 2011 16:08:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 16:08:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of wkoscho@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 16:08:14 +0000
Received: by bwz8 with SMTP id 8so859911bwz.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 09:07:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=zfOX6RbwWPy7eXOoYsRyiA6qLWL3XvYwaBGMFfbPpZw=;
        b=ZPDmXRuendmFUfMOuXq45B+64ORxlnuV+ndKwwondJFJHavHG5nX/a+YljNvBCA7Q2
         IOKPdqheJ3vkkf303g054R38LpQMIsztx5YG5CEgHW8u19NjsgKFnY5thYmCcomlj86j
         2dj6tAaMLKj7Ug95ybtGzeZEJk0u3oDgETjlI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=j7gXplmKWvnlCUOdbfj8IAc/tlfzDrC4P/uKoZnBFDV+4G59DKxaHk3UrvErGYc6iC
         h2S1O8gBjyO4jk9hO31oetHuz+TpWBM3mCf3k0+tC8FDc/CPJQkwWDU5nsYfPdZBgArg
         6FofW/do6sr1xkDwLp+CRkzW2+7ppQCKksNWE=
MIME-Version: 1.0
Received: by 10.204.126.73 with SMTP id b9mr3501619bks.193.1305130074213; Wed,
 11 May 2011 09:07:54 -0700 (PDT)
Received: by 10.204.35.196 with HTTP; Wed, 11 May 2011 09:07:54 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
	<BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu>
Date: Wed, 11 May 2011 12:07:54 -0400
Message-ID: <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com>
Subject: Re: Can I omit ShingleFilter's filler tokens
From: William Koscho <wkoscho@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

#1 is what I'm trying for, so Ill give setPositionIncrements(false) a
try. Thanks for everyone's help.

Bill

On 5/11/11, Steven A Rowe <sarowe@syr.edu> wrote:
> Yes, StopFilter.setEnablePositionIncrements(false) will almost certainly =
get
> higher throughput than inserting PositionFilter.  Like PositionFilter, th=
is
> will buy you #2 (create shingles as if stopwords were never there), but n=
ot
> #1 (don't create shingles across stopwords).
>
>> -----Original Message-----
>> From: Robert Muir [mailto:rcmuir@gmail.com]
>> Sent: Wednesday, May 11, 2011 9:02 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Can I omit ShingleFilter's filler tokens
>>
>> another idea is to .setEnablePositionIncrements(false) on your
>> stopfilter.
>>
>> On Wed, May 11, 2011 at 8:27 AM, Steven A Rowe <sarowe@syr.edu> wrote:
>> > Hi Bill,
>> >
>> > I can think of two possible interpretations of "removing filler
>> tokens":
>> >
>> > 1. Don't create shingles across stopwords, e.g. for text "one two thre=
e
>> four five" and stopword "three", bigrams only, you'd get ("one two",
>> "four five"), instead of the current ("one two", "two _", "_ four", "fou=
r
>> five").
>> >
>> > 2. Create shingles as if the stopwords were never there, e.g. for the
>> same text and stopword, bigrams only, you'd get ("one two", "two four",
>> "four five").
>> >
>> > Which one did you have in mind? =A0#2 can be achieved by adding
>> PositionFilter after StopFilter and before ShingleFilter. =A0I think #1
>> requires ShingleFilter modifications.
>> >
>> > Steve
>> >
>> >> -----Original Message-----
>> >> From: William Koscho [mailto:wkoscho@gmail.com]
>> >> Sent: Wednesday, May 11, 2011 12:05 AM
>> >> To: java-user@lucene.apache.org
>> >> Subject: Can I omit ShingleFilter's filler tokens
>> >>
>> >> Hi,
>> >>
>> >> Can I remove the filler token _ from the n-gram-tokens that are
>> generated
>> >> by
>> >> a ShingleFilter?
>> >>
>> >> I'm using a chain of filters: ClassicFilter, StopFilter,
>> LowerCaseFilter,
>> >> and ShingleFilter to create phrase n-grams. =A0The ShingleFilter inse=
rts
>> >> FILLER_TOKENs in place of the stopwords, but I don't want them.
>> >>
>> >> How can I omit the filler tokens?
>> >>
>> >> thanks
>> >> Bill
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--=20
Sent from my mobile device

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 11 16:10:49 2011
Return-Path: <java-user-return-49711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2ADB14E59
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 11 May 2011 16:10:49 +0000 (UTC)
Received: (qmail 66084 invoked by uid 500); 11 May 2011 16:10:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66047 invoked by uid 500); 11 May 2011 16:10:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66039 invoked by uid 99); 11 May 2011 16:10:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 16:10:47 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of wkoscho@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 11 May 2011 16:10:40 +0000
Received: by bwz8 with SMTP id 8so863360bwz.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 09:10:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=2sGqq7Xb+8KzUhKUX7BdL4b131OP1VP5APu2jBQp6pM=;
        b=hTCulgQI28HLPS1gUB51GSMFe7tmtxFTWTnw87y+SKZocGVQVtmtnplx8X95oQNXsY
         pKXfTS+QszXFToSfMVvEygRozbQMqgw5sEG72pFPu/zJ7BJ8utRfOAbBJMFi7yTBiGWQ
         Gdt6AKV48AqfVmkCbGO7I0wg3DUwZ3I352xf4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=ejUK0Sa6KzIo3M5uwK+e7/c0hdk6/4iPLqTGiP86zCFiM5vkBJ6xBTYGz9OMzYVNZq
         CmJh0cWP7CR5fcEqkgOn/rT7mG9eYdVQhMneOxbg9BzVAVVlXMTVeVnD8FZVQkKn0psT
         LOH2VqGr0q83KA438/QS5G12vQdBxDymo1UCY=
MIME-Version: 1.0
Received: by 10.204.25.20 with SMTP id x20mr943925bkb.112.1305130219809; Wed,
 11 May 2011 09:10:19 -0700 (PDT)
Received: by 10.204.35.196 with HTTP; Wed, 11 May 2011 09:10:19 -0700 (PDT)
In-Reply-To: <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
	<BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com>
	<2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu>
	<BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com>
Date: Wed, 11 May 2011 12:10:19 -0400
Message-ID: <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com>
Subject: Re: Can I omit ShingleFilter's filler tokens
From: William Koscho <wkoscho@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

I meant I'm trying for #2 so this should work (got my numbers mixed
up). Thanks again

Bill

On 5/11/11, William Koscho <wkoscho@gmail.com> wrote:
> #1 is what I'm trying for, so Ill give setPositionIncrements(false) a
> try. Thanks for everyone's help.
>
> Bill
>
> On 5/11/11, Steven A Rowe <sarowe@syr.edu> wrote:
>> Yes, StopFilter.setEnablePositionIncrements(false) will almost certainly
>> get
>> higher throughput than inserting PositionFilter.  Like PositionFilter,
>> this
>> will buy you #2 (create shingles as if stopwords were never there), but
>> not
>> #1 (don't create shingles across stopwords).
>>
>>> -----Original Message-----
>>> From: Robert Muir [mailto:rcmuir@gmail.com]
>>> Sent: Wednesday, May 11, 2011 9:02 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Can I omit ShingleFilter's filler tokens
>>>
>>> another idea is to .setEnablePositionIncrements(false) on your
>>> stopfilter.
>>>
>>> On Wed, May 11, 2011 at 8:27 AM, Steven A Rowe <sarowe@syr.edu> wrote:
>>> > Hi Bill,
>>> >
>>> > I can think of two possible interpretations of "removing filler
>>> tokens":
>>> >
>>> > 1. Don't create shingles across stopwords, e.g. for text "one two
>>> > three
>>> four five" and stopword "three", bigrams only, you'd get ("one two",
>>> "four five"), instead of the current ("one two", "two _", "_ four",
>>> "four
>>> five").
>>> >
>>> > 2. Create shingles as if the stopwords were never there, e.g. for the
>>> same text and stopword, bigrams only, you'd get ("one two", "two four",
>>> "four five").
>>> >
>>> > Which one did you have in mind? =A0#2 can be achieved by adding
>>> PositionFilter after StopFilter and before ShingleFilter. =A0I think #1
>>> requires ShingleFilter modifications.
>>> >
>>> > Steve
>>> >
>>> >> -----Original Message-----
>>> >> From: William Koscho [mailto:wkoscho@gmail.com]
>>> >> Sent: Wednesday, May 11, 2011 12:05 AM
>>> >> To: java-user@lucene.apache.org
>>> >> Subject: Can I omit ShingleFilter's filler tokens
>>> >>
>>> >> Hi,
>>> >>
>>> >> Can I remove the filler token _ from the n-gram-tokens that are
>>> generated
>>> >> by
>>> >> a ShingleFilter?
>>> >>
>>> >> I'm using a chain of filters: ClassicFilter, StopFilter,
>>> LowerCaseFilter,
>>> >> and ShingleFilter to create phrase n-grams. =A0The ShingleFilter
>>> >> inserts
>>> >> FILLER_TOKENs in place of the stopwords, but I don't want them.
>>> >>
>>> >> How can I omit the filler tokens?
>>> >>
>>> >> thanks
>>> >> Bill
>>> >
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> --
> Sent from my mobile device
>

--=20
Sent from my mobile device

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 05:00:54 2011
Return-Path: <java-user-return-49712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CF9025B7D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 05:00:54 +0000 (UTC)
Received: (qmail 56056 invoked by uid 500); 12 May 2011 05:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55764 invoked by uid 500); 12 May 2011 05:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55751 invoked by uid 99); 12 May 2011 05:00:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 05:00:41 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 05:00:35 +0000
Received: by qyk30 with SMTP id 30so860705qyk.14
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 22:00:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=h0N85Qa6tAoayNBvl+X3v80kB6lHfnxc1QjILeVPaFg=;
        b=WubUeyjpOumT2jhhhIJNsQ4WfpXc1fAGlA5oAz+10/mViHuL/06spVYFvspYO8sNGd
         odSfjGCGRAlCbbIIgku6tWyzQBy0gqcCdV4e5bzb/fztoBoUMiIY/OZrtb/ExIcpjuBr
         ZY4McMmPyldc/9h/hUlVN+KXQphnEy+SRtgCc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=G8SrN7dVcbCqGFgpb7wV2iqrXj4Vl35mpoYJLqIj/ynXMpoQPuqnqud/qBtke/U5E9
         LIsBjwmmP8GcghSLs/hCP3OXyZoG4JWd/xfZVgBSdrrGIEHERUVAlVTGDEOfVf2gNDz9
         i1a1L2/kTptj1VJUU+NEsN5Tl92blkek8WW4k=
MIME-Version: 1.0
Received: by 10.229.107.38 with SMTP id z38mr7399499qco.158.1305176414295;
 Wed, 11 May 2011 22:00:14 -0700 (PDT)
Received: by 10.229.231.71 with HTTP; Wed, 11 May 2011 22:00:14 -0700 (PDT)
Date: Thu, 12 May 2011 00:00:14 -0500
Message-ID: <BANLkTi=Jj7yeDXDd6cOQG4oVNsTZM7Lxhg@mail.gmail.com>
Subject: found workaround: Query on using Payload with MoreLikeThis class
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=002354470f888b151b04a30d1059

--002354470f888b151b04a30d1059
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

I am not sure if any one got chance to go over my question (below).

The question was to check if I can modify MoreLikeThis.like() result
using index time  boosting.

I have found a work around as there is no easy way to influence MoreLikeThis
result using index time payload value.

The work around is to write class similar to MoreLikeThis (can not extend
this call as it is final) and in the createQuery method of MoreLikeThis
class change the Query class from TermQuery to PayloadTermQuery.

Change:
TermQuery tq = new TermQuery(new Term((String) ar[1], (String) ar[0]));

To:
Term payloadTerm = new Term((String) ar[1], (String) ar[0]);
Query tq = new PayloadTermQuery(payloadTerm, new AveragePayloadFunction());

Thats it, rest of the MoreLikeThis code stays the same :)

With this change, I could boost my MoreLikeThis result with the payload
value setup at the index time

If any one has any better thoughts, I would be glad to hear about them

Thanks

Saurabh


On Tue, May 10, 2011 at 1:36 PM, Saurabh Gokhale
<saurabhgokhale@gmail.com>wrote:

> Hi,
>
> In the Lucene 2.9.4 project, there is a requirement to boost some of the
> keywords in the document using payload.
>
> Now while searching, is there a way I can boost the MoreLikeThis result
> using the index time payload values?
>
> Or can I merge MoreLikeThis output and PayloadTermQuery output somehow to
> get the final percentage output?
>

--002354470f888b151b04a30d1059--

From java-user-return-49713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 05:05:22 2011
Return-Path: <java-user-return-49713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 295865A63
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 05:05:22 +0000 (UTC)
Received: (qmail 58783 invoked by uid 500); 12 May 2011 05:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58757 invoked by uid 500); 12 May 2011 05:05:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58749 invoked by uid 99); 12 May 2011 05:05:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 05:05:18 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 05:05:12 +0000
Received: by qwj9 with SMTP id 9so824329qwj.35
        for <java-user@lucene.apache.org>; Wed, 11 May 2011 22:04:51 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=D4/UH6GKsZf3xdfSMk1+yKUERk15thWjZR30R/Pefvk=;
        b=K5o1mE87vgnebHz0WekQ85pvsrQ5aTigcrOfWiVPk5wGS5B/dVz4czt8Qm0BRfUl+T
         kx10JY/qOZK05q1G3msFCxDOYUDrtlCSNBBdrLe2+v98vV6qLTl5qE+CfQGQfu2d4p43
         mvp1d/9N36Jlywp/alNUWgElwiKEALafiFEKo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=cw9Af8nKTuMhl+CzrRNKH0n8JLUQpiiOxHNug5/zOvqa45FHSBZXWjLNHCX2RkItYW
         CTFW7PP/WeHADuL2pvKfmL3RVICdSXbYzmB0AgysekZbX6YDxTHi0dgc54M7azF0L+fK
         ACUbmPHVXFu71Njz7UhUT3tIrqZYA7wnO2e00=
MIME-Version: 1.0
Received: by 10.229.202.42 with SMTP id fc42mr7625749qcb.272.1305176691815;
 Wed, 11 May 2011 22:04:51 -0700 (PDT)
Received: by 10.229.231.71 with HTTP; Wed, 11 May 2011 22:04:51 -0700 (PDT)
Date: Thu, 12 May 2011 00:04:51 -0500
Message-ID: <BANLkTinsSkwMwESnKLehAEq1SDyvX=E5_w@mail.gmail.com>
Subject: Help needed on Ant build script for creating Lucene index
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636ef03f715b4dc04a30d2114

--001636ef03f715b4dc04a30d2114
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Can someone pls direct me to an example where I can get help on creating ant
build script for creating lucene index?. It is part of Lucene contrib but I
did not get much idea from the documentation on Lucene site.

Thanks

Saurabh

--001636ef03f715b4dc04a30d2114--

From java-user-return-49714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 05:25:37 2011
Return-Path: <java-user-return-49714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B5AE9514A
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 05:25:37 +0000 (UTC)
Received: (qmail 83362 invoked by uid 500); 12 May 2011 05:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82908 invoked by uid 500); 12 May 2011 05:25:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82895 invoked by uid 99); 12 May 2011 05:25:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 05:25:33 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [98.139.213.156] (HELO nm25-vm0.bullet.mail.bf1.yahoo.com) (98.139.213.156)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 12 May 2011 05:25:26 +0000
Received: from [98.139.212.151] by nm25.bullet.mail.bf1.yahoo.com with NNFMP; 12 May 2011 05:25:04 -0000
Received: from [98.139.212.213] by tm8.bullet.mail.bf1.yahoo.com with NNFMP; 12 May 2011 05:25:04 -0000
Received: from [127.0.0.1] by omp1022.mail.bf1.yahoo.com with NNFMP; 12 May 2011 05:25:04 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 523320.2098.bm@omp1022.mail.bf1.yahoo.com
Received: (qmail 36772 invoked by uid 60001); 12 May 2011 05:25:04 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1305177904; bh=HP36ZxS7kxYqwAY51Ba7zKyKxfqMkKr/kOfaoxvLdfg=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=OYtbhBTFYUGk20zOdVDSXqR2wC+3A32+wqzu4lVRSbmCenEj0ej0xuSdDl2hs3rGRf6TqzttP7qAOsZfB3Sy9uojFJh9prpd9CuhLg8mnJRWGCrb0Kyp5qyIdtU4mgnYpGaRRNOLI/Is9b64z3I0jCmoLLLuSOYfzBEvCkpu8pY=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=XGvXSPKQEW95IDazeaNX7OnEBzJfSccRYzqfq7s7nhtm4Z6Ow+Z7CbtwO+9XsVsYneNuYAocI+gPXRJuguz+atiZivOY2z+7YXj0UJygQLwzs3TJCq6CyQfm2i4rz03f7gsBJgRIQyFC3DKVmzzU75sNaozR4Briaa7OTodXzeg=;
Message-ID: <97201.36039.qm@web130102.mail.mud.yahoo.com>
X-YMail-OSG: hTkFnSoVM1nVeZX0wOk4EYktVhdmfdvdV0LLV4EXAbAonW1
 AJKPbmx72IHqN_nv.jh5r0Y0n1BW2pan_tUwa51nWZe1dLnOagf3PPRk3ZFd
 t40RPFt2mIgr2N4fqRpAW161g_rddrD4Gyj.lHTee1.HaRVMy6GJehE3TBdi
 jz_tJOiopAkl.Ih0Bnfvws_VwuvkQQuvJObaUoqDRLHbryV90QtcTYvNw6N8
 7mJEg9G_mcytAYRvPTh.cFdChmOUzxr_zHSytpl1XSke2i9d3eYqRmKUBzmb
 1KnhE5rbh6t9sMLwfGO1Zj.hRLruR8xaid_9cKt_HCiaqSfmSd2peRvu50IJ
 8RF2aUpCfltO8mrTeWsfQeDkK3GKe3QWsujcF72SojTNArTRfQkXlwV7K16l
 ng.47qwC7jdlCQZ1V257_0QoFFdIl7nrdjU7PMdJrnsZOOcuB.jo3166KRV8
 JOE.lFha_.OOfySOu3FzFq6VpkTr0BLuBQ.YVBfp7qGE1YYc0pt.dYZ.hKre
 CR5JbRIHCXQ--
Received: from [74.73.25.254] by web130102.mail.mud.yahoo.com via HTTP; Wed, 11 May 2011 22:25:03 PDT
X-Mailer: YahooMailRC/567 YahooMailWebService/0.8.111.303096
References: <BANLkTi=wkecx4asLEaL05M+_LX369tFUDg@mail.gmail.com>
Date: Wed, 11 May 2011 22:25:03 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How do I sort lucene search results by relevance and time?
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTi=wkecx4asLEaL05M+_LX369tFUDg@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii

If only you were using Solr.... 
http://wiki.apache.org/solr/DisMaxQParserPlugin#bf_.28Boost_Functions.29


Otis
----
Sematext :: http://sematext.com/ :: Solr - Lucene - Nutch
Lucene ecosystem search :: http://search-lucene.com/



----- Original Message ----
> From: Johnbin Wang <johnbin.wang@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Sun, May 8, 2011 11:59:11 PM
> Subject: How do I sort lucene search results by relevance and time?
> 
> What do I want to do is just like Google search results.  The results in  the
> first page is the most relevant and also recent documents, but  not
> absolutely sorted by  time desc.
> 
> -- 
> cheers,
> Johnbin  Wang
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 13:00:34 2011
Return-Path: <java-user-return-49715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B50C6589F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 13:00:34 +0000 (UTC)
Received: (qmail 58700 invoked by uid 500); 12 May 2011 13:00:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57964 invoked by uid 500); 12 May 2011 13:00:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57954 invoked by uid 99); 12 May 2011 13:00:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 13:00:30 +0000
X-ASF-Spam-Status: No, hits=2.7 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,URI_NOVOWEL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of paulocsc@terra.com.br designates 208.84.243.46 as permitted sender)
Received: from [208.84.243.46] (HELO if03-mail-sr09-mia.mta.terra.com) (208.84.243.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 13:00:23 +0000
Received: from 1kz.tpn.terra.com (1kz.tpn.terra.com [10.235.200.53])
	by mail-sr09-mia.tpn.terra.com (Postfix) with ESMTP id 3E7B54012DDF
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 13:00:02 +0000 (UTC)
X-Terra-Karma:         -2%
X-Terra-Hash: 05fe1439cd0d1e15b812842ba3e3bab7
Received-SPF: pass (1kz.tpn.terra.com: domain of terra.com.br designates 208.84.242.62 as permitted sender) client-ip=208.84.242.62; envelope-from=paulocsc@terra.com.br; helo=terra.com.br;
Received: from terra.com.br (belisla.terra.com [208.84.242.172])
	(authenticated user paulocsc)
	by 1kz.tpn.terra.com (Postfix) with ESMTPA id B365760F2595B
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 12:59:51 +0000 (UTC)
MIME-Version: 1.0
X-Mailer: TerraMail PHP 5.2
Message-ID: <47566.1305205191@terra.com.br>
To: <java-user@lucene.apache.org>
Reply-To: paulocsc@terra.com.br
Content-Type: multipart/mixed;
	boundary="=_c7b7d71a09fccaed633669d7fab64194"
X-Origin: 189.31.30.245
Date: Thu, 12 May 2011 12:59:51 +0000
Subject: Re: Bug in BrazilianAnalyzer?
From: paulocsc@terra.com.br
X-CLX-Rate-Response: 

--=_c7b7d71a09fccaed633669d7fab64194
Content-Type: multipart/alternative;
	boundary="=_8f68fcf9970ee719f5686f9577eb5b68"

--=_8f68fcf9970ee719f5686f9577eb5b68
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="utf-8"

 Thanks.
 Paulo
 On Qua 11/05/11 11:18 , Adriano Crestani adrianocrestani@gmail.com
sent:
 Hi,
 I think you forgot to attach the JUnit.
 On Wed, May 11, 2011 at 10:04 AM,  wrote:
 >  Hi,
 >  I did a test to understand the use of '*'and '?'.
 >  If I use StandardAnalyzer I have expected results by if a use
 > BrazilianAnalyzer I have a mistake result.
 >  Please, where is my mistake? Junit is at the end.
 >  Paulo Cesar
 >  cities =3D {"Bras=C3=ADlia","Brasil=C3=A2ndia","Brasl=C3=A2ndia", "S=C3=
=A3o Paulo",
 > "S=C3=A3o Roque", "Salvador"};
 >  >>> Using StandardAnalyzer > Using BrazilianAnalyzer >  JUnit
 E-mail verificado pelo Terra Anti-Spam.
 Para classificar esta mensagem como spam ou n=C3=83=C2=A3o spam, visite

http://ecp.terra.com.br/cgi-bin/reportspam.cgi?+_d=3DSCYzNTYyNDg1I3Blcm0hdG=
VycmEmMSwxMzA1MTIzNTgxLjk0NTM1NC44MDkxLmxhY2h1dGUudHBuLnRlcnJhLmNvbSw0MzA5T=
erraMail
[2]
 Verifique periodicamente a pasta Spam para garantir que apenas
mensagens
 indesejadas sejam classificadas como Spam.
 Esta mensagem foi verificada pelo E-mail Protegido Terra.
 Atualizado em 11/05/2011

--=_8f68fcf9970ee719f5686f9577eb5b68
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html; charset="utf-8"

<HTML>
<style> BODY { font-family:Arial, Helvetica, sans-serif;font-size:12px; }</=
style>Thanks.<br>
Paulo<br>
<br>
 <br>
<br>
<span style=3D"font-weight: bold;">On Qua 11/05/11 11:18 , Adriano Crestani=
 adrianocrestani@gmail.com sent:<br>
</span><blockquote style=3D"BORDER-LEFT: #F5F5F5 2px solid; MARGIN-LEFT: 5p=
x; MARGIN-RIGHT:0px; PADDING-LEFT: 5px; PADDING-RIGHT: 0px">Hi,<br>

<br>

I think you forgot to attach the JUnit.<br>

<br>

On Wed, May 11, 2011 at 10:04 AM, &lt;<a href=3D"mailto:paulocsc@terra.com.=
br">paulocsc@terra.com.br</a>&gt; wrote:<br>

<br>

<span style=3D"color: red;"><br>

&gt;  Hi,<br>

</span><span style=3D"color: red;"><br>

&gt;  I did a test to understand the use of '*'and '?'.<br>

</span><span style=3D"color: red;"><br>

&gt;  If I use StandardAnalyzer I have expected results by if a use<br>

</span><span style=3D"color: red;"><br>

&gt; BrazilianAnalyzer I have a mistake result.<br>

</span><span style=3D"color: red;"><br>

&gt;  Please, where is my mistake? Junit is at the end.<br>

</span><span style=3D"color: red;"><br>

&gt;  Paulo Cesar<br>

</span><span style=3D"color: red;"><br>

&gt;  cities =3D {"Bras=C3=ADlia","Brasil=C3=A2ndia","Brasl=C3=A2ndia", "S=
=C3=A3o Paulo",<br>

</span><span style=3D"color: red;"><br>

&gt; "S=C3=A3o Roque", "Salvador"};<br>

</span><span style=3D"color: red;"><br>

&gt;  &gt;&gt;&gt; Using StandardAnalyzer &gt; Using BrazilianAnalyzer &gt;=
  JUnit<br>

</span><br>


<br>

E-mail verificado pelo Terra Anti-Spam.<br>

Para classificar esta mensagem como spam ou n=C3=83=C2=A3o spam, visite<br>

<a href=3D"aHR0cDovL2VjcC50ZXJyYS5jb20uYnIvY2dpLWJpbi9yZXBvcnRzcGFtLmNnaT8r=
X2Q9U0NZek5UWXlORGcxSTNCbGNtMGhkR1Z5Y21FbU1Td3hNekExTVRJek5UZ3hMamswTlRNMU5=
DNDRNRGt4TG14aFkyaDFkR1V1ZEhCdUxuUmxjbkpoTG1OdmJTdzBNekE1VGVycmFNYWls" targ=
et=3D"_blank">http://ecp.terra.com.br/cgi-bin/reportspam.cgi?+_d=3DSCYzNTYy=
NDg1I3Blcm0hdGVycmEmMSwxMzA1MTIzNTgxLjk0NTM1NC44MDkxLmxhY2h1dGUudHBuLnRlcnJ=
hLmNvbSw0MzA5TerraMail</a><br>

Verifique periodicamente a pasta Spam para garantir que apenas mensagens<br=
>

indesejadas sejam classificadas como Spam.<br>

<br>

Esta mensagem foi verificada pelo E-mail Protegido Terra.<br>

Atualizado em 11/05/2011<br>

<br>

</blockquote><BR></HTML>
--=_8f68fcf9970ee719f5686f9577eb5b68--


--=_c7b7d71a09fccaed633669d7fab64194
Content-Type: text/plain; charset=us-ascii


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=_c7b7d71a09fccaed633669d7fab64194--


From java-user-return-49716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 14:04:23 2011
Return-Path: <java-user-return-49716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 859325E0B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 14:04:23 +0000 (UTC)
Received: (qmail 64023 invoked by uid 500); 12 May 2011 14:04:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63981 invoked by uid 500); 12 May 2011 14:04:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63972 invoked by uid 99); 12 May 2011 14:04:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 14:04:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erik.hatcher@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 14:04:13 +0000
Received: by vws7 with SMTP id 7so1771559vws.35
        for <java-user@lucene.apache.org>; Thu, 12 May 2011 07:03:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:content-type:mime-version:subject:from
         :in-reply-to:date:content-transfer-encoding:message-id:references:to
         :x-mailer;
        bh=1aGuRShND+HiDK7Os3KZ5eazfS6O0JbA/j9OcGzJ3Vw=;
        b=nO2P4O7dTGmeRd38ogSgwdChuxudjsB6um2HH7W7jb+iJDnAUBilLv8Z0sakNlNhRQ
         4gNOcEPiEuLh8exrLsf8YegopQgt0MLccBdRFTep1XV7aLo4ZxP4pcbKd7+eioCLqGtX
         7zAI80RrM5svuF7h/sV/ckmz7zROtxnQDiGOk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        b=vJVq8I5phlPOHijdimH6tzwsfOGgw1y1yD6tBAxx+5y+lc2HkFpJcB5t3W9Ko1/pPH
         nRbORQ0OA9XprsREEag6YNF3Ry7URlRKACh6Uvz7MubVHalBqGQmHw5wjKO2EzsBF+xp
         BwAPloxA5cREIsWefNiwMPP071zZU+rX1mvkI=
Received: by 10.52.76.4 with SMTP id g4mr386628vdw.40.1305209031347;
        Thu, 12 May 2011 07:03:51 -0700 (PDT)
Received: from [10.0.1.13] (c-71-63-2-238.hsd1.va.comcast.net [71.63.2.238])
        by mx.google.com with ESMTPS id j40sm144626vcr.45.2011.05.12.07.03.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 12 May 2011 07:03:50 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Help needed on Ant build script for creating Lucene index
From: Erik Hatcher <erik.hatcher@gmail.com>
In-Reply-To: <BANLkTinsSkwMwESnKLehAEq1SDyvX=E5_w@mail.gmail.com>
Date: Thu, 12 May 2011 10:03:48 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <41B0D384-422E-40AC-8212-E56A71504243@gmail.com>
References: <BANLkTinsSkwMwESnKLehAEq1SDyvX=E5_w@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)

There's an example build file, see =
<https://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/contrib/ant/exam=
ple.xml>

It's pretty outdated stuff there though.  It has some flexibility for a =
custom document handler in order to allow full control over how a File =
gets turned into a Lucene Document.   By default it'll handle text =
documents (.txt) and .html files using jtidy.

You're better off these days, IMO, to use Solr and its Tika integration =
for creating an index from rich files.

	Erik


On May 12, 2011, at 01:04 , Saurabh Gokhale wrote:

> Hi,
>=20
> Can someone pls direct me to an example where I can get help on =
creating ant
> build script for creating lucene index?. It is part of Lucene contrib =
but I
> did not get much idea from the documentation on Lucene site.
>=20
> Thanks
>=20
> Saurabh


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 14:47:47 2011
Return-Path: <java-user-return-49717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 76699501D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 14:47:47 +0000 (UTC)
Received: (qmail 25585 invoked by uid 500); 12 May 2011 14:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25536 invoked by uid 500); 12 May 2011 14:47:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25528 invoked by uid 99); 12 May 2011 14:47:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 14:47:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [217.6.150.34] (HELO mail.dosco.de) (217.6.150.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 14:47:37 +0000
Received: from localhost (unknown [127.0.0.1])
	by mail.dosco.de (Postfix) with ESMTP id 69A8D1FB73
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 14:43:13 +0000 (UTC)
X-Virus-Scanned: amavisd-new at dosco.de
Received: from mail.dosco.de ([127.0.0.1])
	by localhost (dosco2.dosco.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id sVH3Cy13WKx4 for <java-user@lucene.apache.org>;
	Thu, 12 May 2011 16:43:09 +0200 (CEST)
Received: by mail.dosco.de (Postfix, from userid 65534)
	id 5EA8D20D1B; Thu, 12 May 2011 16:43:09 +0200 (CEST)
Received: from [195.110.10.155] (unknown [195.110.10.155])
	by mail.dosco.de (Postfix) with ESMTP id E8DA41FB73
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 14:43:08 +0000 (UTC)
Message-ID: <4DCBF2F5.8010700@dosco.de>
Date: Thu, 12 May 2011 16:47:17 +0200
From: Wulf Berschin <berschin@dosco.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PDF Highlighting using PDF Highlight File
References: <4DC9145B.3020704@dosco.de>
In-Reply-To: <4DC9145B.3020704@dosco.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 8bit

Well, AFAIS the Lucene Highlighters do not offer this functionality via 
their API, but could easily do.

I think support for highlighting documents would be a very welcome 
feature. Highlighting HTML documents is already possible with the 
org.apache.solr.analysis.HTMLStripCharFilter and a NullFragmenter, but 
ther seems to be nothing for highlighting PDF files...

As starting point I quarried out from 
org.apache.lucene.search.highlight.Highlighter the class below which 
just returns the Tokens contributing to the hit.

Using the returned tokens a PDF highlight file could be easily generated 
and voil..

-- Wulf

package org.apache.lucene.search.highlight;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.tokenattributes.OffsetAttribute;
import 
org.apache.lucene.analysis.tokenattributes.PositionIncrementAttribute;
import org.apache.lucene.analysis.tokenattributes.TermAttribute;


public class HighlightTokensExtractor
{
   private Scorer fragmentScorer = null;

   public HighlightTokensExtractor(Scorer fragmentScorer)
   {
     this.fragmentScorer = fragmentScorer;
   }

   public final List<Token> getTokens(TokenStream tokenStream, String text,
       boolean mergeContiguousFragments, int maxNumFragments)
       throws IOException, InvalidTokenOffsetsException
   {
     List<Token> result = new ArrayList<Token>();
     TermAttribute termAtt = tokenStream.addAttribute(TermAttribute.class);
     OffsetAttribute offsetAtt = 
tokenStream.addAttribute(OffsetAttribute.class);
     tokenStream.addAttribute(PositionIncrementAttribute.class);
     tokenStream.reset();

     // dummy text fragment
     TextFragment currentFrag = new TextFragment("", 0, 0);
     TokenStream newStream = fragmentScorer.init(tokenStream);
     if (newStream != null) {
       tokenStream = newStream;
     }
     fragmentScorer.startFragment(currentFrag);

     try {

       TokenGroup tokenGroup = new TokenGroup(tokenStream);

       for (boolean next = tokenStream.incrementToken(); next; next = 
tokenStream
           .incrementToken()) {
         if ((offsetAtt.endOffset() > text.length())
             || (offsetAtt.startOffset() > text.length())) {
           throw new InvalidTokenOffsetsException("Token " + termAtt.term()
               + " exceeds length of provided text sized " + text.length());
         }
         if ((tokenGroup.numTokens > 0) && (tokenGroup.isDistinct())) {

           if (tokenGroup.getTotalScore() > 0) {
             System.out.println(tokenGroup.matchStartOffset + " "
                 + tokenGroup.matchEndOffset);
 
result.add((Token)tokenGroup.getToken(tokenGroup.getNumTokens()-1));
           }
           tokenGroup.clear();

         }
         tokenGroup.addToken(fragmentScorer.getTokenScore());

       }

       if (tokenGroup.numTokens > 0) {

         if (tokenGroup.getTotalScore() > 0) {
           System.out.println(tokenGroup.matchStartOffset + " "
               + tokenGroup.matchEndOffset);
 
result.add((Token)tokenGroup.getToken(tokenGroup.getNumTokens()-1));
         }
       }

       return result;

     }
     finally {
       if (tokenStream != null) {
         try {
           tokenStream.close();
         }
         catch (Exception e) {
         }
       }
     }
   }

}



Am 10.05.2011 12:32, schrieb Wulf Berschin:
> Hi all,
>
> in our Lucene 3.0.3-based web application when a user clicks on a hit
> link the targeted PDF should be opened in the browser with highlighted
> hits.
>
> For this purpose using the Acrobat Highlight File (Parameter xml, see
> http://www.pdfbox.org/userguide/highlighting.html and
> http://partners.adobe.com/public/developer/en/pdf/HighlightFileFormat.pdf)
> seems most reasonable to me.
>
> Since the position to highlight are given by (page and) character
> offsets and Lucene uses offsets as well I think it could be easy (for
> more Lucene-skilled people than me) to create an Highlighter which
> produces this highlight file.
>
> Does such a Highlighter already exists in the Lucene World?
>
> If not could someone please point me the direction (e.g. where to hook
> into the existing (fast vector?) highlighter just to extract the offsets).
>
> BTW: Luke gyve me the impression that Term Vectors are only stored when
> the field content is sored as well. Is that true?
>
> Wulf


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 15:05:58 2011
Return-Path: <java-user-return-49718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4E8CD5BC2
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 15:05:58 +0000 (UTC)
Received: (qmail 50369 invoked by uid 500); 12 May 2011 15:05:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50319 invoked by uid 500); 12 May 2011 15:05:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50311 invoked by uid 99); 12 May 2011 15:05:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 15:05:55 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.241.168.151] (HELO mua02.mx.cix.co.uk) (212.241.168.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 15:05:47 +0000
X-Envelope-From: dawn@digitorial.co.uk
Received: from mail.lemur.co.uk (host81-131-181-239.range81-131.btcentralplus.com [81.131.181.239])
	by mua02.mx.cix.co.uk (8.13.8/8.13.4) with SMTP id p4CF5MDs001563
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 16:05:23 +0100
Received: from [192.168.1.250] ([192.168.1.250])
	by mail.lemur.co.uk
	with hMailServer ; Thu, 12 May 2011 16:05:22 +0100
Message-ID: <4DCBF6F1.3060005@digitorial.co.uk>
Date: Thu, 12 May 2011 16:04:17 +0100
From: =?ISO-8859-15?Q?Dawn_Zo=EB_Raison?= <dawn@digitorial.co.uk>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.17) Gecko/20110414 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PDF Highlighting using PDF Highlight File
References: <4DC9145B.3020704@dosco.de> <4DCBF2F5.8010700@dosco.de>
In-Reply-To: <4DCBF2F5.8010700@dosco.de>
Content-Type: multipart/alternative;
 boundary="------------080808060000000408010205"

--------------080808060000000408010205
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit


On 12/05/2011 15:47, Wulf Berschin wrote:
> I think support for highlighting documents would be a very welcome 
> feature. Highlighting HTML documents is already possible with the 
> org.apache.solr.analysis.HTMLStripCharFilter and a NullFragmenter, but 
> ther seems to be nothing for highlighting PDF files...

It would be very useful. That said being able to highlight words in any 
pictorial representation of a document would be a huge bonus.

> As starting point I quarried out from 
> org.apache.lucene.search.highlight.Highlighter the class below which 
> just returns the Tokens contributing to the hit.
>
I use a similar (home brew) solution to extract the hit terms, and then 
pass them to the Adobe PDF viewer plugin as a search term via the PDF URL.


-- 

Rgds.
*Dawn Raison*
Technical Director, Digitorial Ltd.

E:dawn@digitorial.co.uk	W:http://www.digitorial.co.uk
M: 07956 609 618	        T: 01428 729 431
Reg: 04644583, England&  Wales
Church Villas Ecchinswell, Newbury, RG20  4TT

This email and any attached files are for the exclusive use of the 
addressee and may contain privileged and/or confidential information. If 
you receive this email in error you should not disclose the contents to 
any other person nor take copies but should delete it immediately. 
Digitorial Ltd makes no warranty as to the accuracy or completeness of 
this email and accepts no liability for its contents or use. Any 
opinions expressed in this email are those of the author and do not 
necessarily reflect the opinions of Digitorial Ltd.


--------------080808060000000408010205--


From java-user-return-49719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 16:51:54 2011
Return-Path: <java-user-return-49719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 07ECA5236
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 16:51:54 +0000 (UTC)
Received: (qmail 25041 invoked by uid 500); 12 May 2011 16:51:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24996 invoked by uid 500); 12 May 2011 16:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24988 invoked by uid 99); 12 May 2011 16:51:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 16:51:51 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of barbct5@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 16:51:45 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <barbct5@gmail.com>)
	id 1QKZ6i-0008IV-JP
	for java-user@lucene.apache.org; Thu, 12 May 2011 09:51:24 -0700
Date: Thu, 12 May 2011 09:51:24 -0700 (PDT)
From: Elmo Bleek <barbct5@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1305219084593-2932604.post@n3.nabble.com>
In-Reply-To: <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu> <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu> <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com> <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com>
Subject: Re: Can I omit ShingleFilter's filler tokens
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have found that simply having StopFilter before ShingleFilter does the
trick for #2. However, I have also been working on trying to accomplish #1,
don't create shingles across stop words. I am currently under the impression
that this will take modifying ShingleFilter. Does anyone have any
suggestions?

--
View this message in context: http://lucene.472066.n3.nabble.com/Can-I-omit-ShingleFilter-s-filler-tokens-tp2926009p2932604.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 17:04:30 2011
Return-Path: <java-user-return-49720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6AA7A58F1
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 17:04:30 +0000 (UTC)
Received: (qmail 55901 invoked by uid 500); 12 May 2011 17:04:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55844 invoked by uid 500); 12 May 2011 17:04:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55835 invoked by uid 99); 12 May 2011 17:04:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 17:04:27 +0000
X-ASF-Spam-Status: No, hits=-1.0 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 17:04:19 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p4CH3vZu011603
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 13:03:57 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Thu, 12 May 2011
 13:03:57 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 12 May 2011 13:03:56 -0400
Subject: RE: Can I omit ShingleFilter's filler tokens
Thread-Topic: Can I omit ShingleFilter's filler tokens
Thread-Index: AcwQxOlS3CQsgL1sSBKPbIb0UK5BOwAAJ7tw
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE743D@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
 <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu>
 <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com>
 <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com>
 <1305219084593-2932604.post@n3.nabble.com>
In-Reply-To: <1305219084593-2932604.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-05-12_08:2011-05-12,2011-05-12,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

QSB0aG91Z2h0OiBvbmUgd2F5IHRvIGRvICMxIHdpdGhvdXQgbW9kaWZ5aW5nIFNoaW5nbGVGaWx0
ZXI6IGlmIHRoZXJlIHdlcmUgYSBTdG9wRmlsdGVyIHZhcmlhbnQgdGhhdCBhY2NlcHRlZCByZWd1
bGFyIGV4cHJlc3Npb25zIGluc3RlYWQgb2YgYSBzdG9wd29yZCBsaXN0LCB5b3UgY291bGQgY29u
ZmlndXJlIGl0IHdpdGggYSByZWdleCBsaWtlIC9fIC4qfC4qIF98IF8gLyAoYXNzdW1pbmcgYSBm
dWxsIG1hdGNoIGlzIHJlcXVpcmVkLCBpLmUuIGltcGxpY2l0IGJlZ2lubmluZyBhbmQgZW5kIGFu
Y2hvcnMpLCBhbmQgcGxhY2UgaXQgaW4gdGhlIGFuYWx5c2lzIHBpcGVsaW5lIGFmdGVyIFNoaW5n
bGVGaWx0ZXIgdG8gdGhyb3cgb3V0IHNoaW5nbGVzIHdpdGggZmlsbGVyIHRva2VucyBpbiB0aGVt
Lg0KDQooSXQgdGhpbmsgaXQgd291bGQgYmUgdXNlZnVsIHRvIGdlbmVyYWxpemUgU3RvcEZpbHRl
ciB0byBhbGxvdyBmb3IgbW9yZSBzb3VyY2VzIG9mIHN0b3BwYWdlLCByYXRoZXIgdGhhbiBqdXN0
IGNyZWF0aW5nIGEgU3RvcFJlZ2V4RmlsdGVyIHdpdGggbm8gcmVsYXRpb24gdG8gU3RvcEZpbHRl
ci4pDQoNClN0ZXZlDQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogRWxt
byBCbGVlayBbbWFpbHRvOmJhcmJjdDVAZ21haWwuY29tXQ0KPiBTZW50OiBUaHVyc2RheSwgTWF5
IDEyLCAyMDExIDEyOjUxIFBNDQo+IFRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCj4g
U3ViamVjdDogUmU6IENhbiBJIG9taXQgU2hpbmdsZUZpbHRlcidzIGZpbGxlciB0b2tlbnMNCj4g
DQo+IEkgaGF2ZSBmb3VuZCB0aGF0IHNpbXBseSBoYXZpbmcgU3RvcEZpbHRlciBiZWZvcmUgU2hp
bmdsZUZpbHRlciBkb2VzIHRoZQ0KPiB0cmljayBmb3IgIzIuIEhvd2V2ZXIsIEkgaGF2ZSBhbHNv
IGJlZW4gd29ya2luZyBvbiB0cnlpbmcgdG8gYWNjb21wbGlzaA0KPiAjMSwNCj4gZG9uJ3QgY3Jl
YXRlIHNoaW5nbGVzIGFjcm9zcyBzdG9wIHdvcmRzLiBJIGFtIGN1cnJlbnRseSB1bmRlciB0aGUN
Cj4gaW1wcmVzc2lvbg0KPiB0aGF0IHRoaXMgd2lsbCB0YWtlIG1vZGlmeWluZyBTaGluZ2xlRmls
dGVyLiBEb2VzIGFueW9uZSBoYXZlIGFueQ0KPiBzdWdnZXN0aW9ucz8NCj4gDQo+IC0tDQo+IFZp
ZXcgdGhpcyBtZXNzYWdlIGluIGNvbnRleHQ6IGh0dHA6Ly9sdWNlbmUuNDcyMDY2Lm4zLm5hYmJs
ZS5jb20vQ2FuLUktDQo+IG9taXQtU2hpbmdsZUZpbHRlci1zLWZpbGxlci10b2tlbnMtdHAyOTI2
MDA5cDI5MzI2MDQuaHRtbA0KPiBTZW50IGZyb20gdGhlIEx1Y2VuZSAtIEphdmEgVXNlcnMgbWFp
bGluZyBsaXN0IGFyY2hpdmUgYXQgTmFiYmxlLmNvbS4NCj4gDQo+IC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBU
byB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNo
ZS5vcmcNCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBA
bHVjZW5lLmFwYWNoZS5vcmcNCg0K


From java-user-return-49721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 17:16:07 2011
Return-Path: <java-user-return-49721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7F6A50B3
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 17:16:07 +0000 (UTC)
Received: (qmail 90685 invoked by uid 500); 12 May 2011 17:16:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90636 invoked by uid 500); 12 May 2011 17:16:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90628 invoked by uid 99); 12 May 2011 17:16:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 17:16:05 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 17:15:59 +0000
Received: by bwz8 with SMTP id 8so2377024bwz.35
        for <java-user@lucene.apache.org>; Thu, 12 May 2011 10:15:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=e7+k8kj6JysjFW8JtSDsi4Js+9Tm/qrCtMMooiRqh8o=;
        b=gOITtkqikNx86Setrt0gKZkVwNvYOR8YOGWoJeripxmjabumSuo6/4LoDGJmFaiq6C
         0G3JaAMO0TjYFstJrIM9YAjUyFg3a8SaDwsHpokDq9qMtcyuZNBo9ssbHk1CLdwstnFS
         MnQTM2VuRtvBeZhkZ9l3vfUEV9nIOmviAtFLM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=QQvySS/wf33RwgE6MOWNyvXbi9NrD9GZXHB9s3CReDqNjaSNbTe/0rycp1dFlhRrcj
         epTiGIuTTberMdfiOkgA199UEfJXI6F7LNo3EBDzKmxCErcM+qkHjpbi9o0Nc4JRqDfN
         T5ise6/sD8IdsNyhJjzpPWyE81a9ga4yw0q9o=
Received: by 10.204.20.134 with SMTP id f6mr444402bkb.165.1305220539099; Thu,
 12 May 2011 10:15:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.29.13 with HTTP; Thu, 12 May 2011 10:15:19 -0700 (PDT)
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE743D@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
 <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu>
 <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com> <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com>
 <1305219084593-2932604.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147FB3CE743D@suex07-mbx-03.ad.syr.edu>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 12 May 2011 13:15:19 -0400
Message-ID: <BANLkTimKnUp87DOiK=sXMV-4uOcX1wRqUw@mail.gmail.com>
Subject: Re: Can I omit ShingleFilter's filler tokens
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Thu, May 12, 2011 at 1:03 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> A thought: one way to do #1 without modifying ShingleFilter: if there wer=
e a StopFilter variant that accepted regular expressions instead of a stopw=
ord list, you could configure it with a regex like /_ .*|.* _| _ / (assumin=
g a full match is required, i.e. implicit beginning and end anchors), and p=
lace it in the analysis pipeline after ShingleFilter to throw out shingles =
with filler tokens in them.
>
> (It think it would be useful to generalize StopFilter to allow for more s=
ources of stoppage, rather than just creating a StopRegexFilter with no rel=
ation to StopFilter.)
>

we already did this in 3.1 by making a base FilteringTokenFilter class?
a regex filter is trivial if you subclass this (we could add something
like this untested code to the .pattern package or whatever)

public class PatternRemoveFilter extends FilteringTokenFilter {
  private final Matcher matcher;
  private final CharTermAttribute termAtt =3D
addAttribute(CharTermAttribute.class);

  public PatternRemoveFilter(boolean enablePositionIncrements,
TokenStream input, Pattern pattern) {
    super(enablePositionIncrements, input);
    matcher =3D pattern.matcher(termAtt);
  }

  @Override
  protected boolean accept() throws IOException {
    matcher.reset();
    return !matcher.matches();
  }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 17:23:53 2011
Return-Path: <java-user-return-49722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 168AB53D7
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 17:23:53 +0000 (UTC)
Received: (qmail 11663 invoked by uid 500); 12 May 2011 17:23:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11624 invoked by uid 500); 12 May 2011 17:23:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11616 invoked by uid 99); 12 May 2011 17:23:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 17:23:51 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 17:23:42 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p4CHNLcN030216
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 13:23:21 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Thu, 12 May 2011
 13:23:21 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 12 May 2011 13:23:20 -0400
Subject: RE: Can I omit ShingleFilter's filler tokens
Thread-Topic: Can I omit ShingleFilter's filler tokens
Thread-Index: AcwQyEuX1rzHtpvDTjSI99LAZ3IvBgAAI5sQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE743E@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu>
 <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu>
 <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com>
 <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com>
 <1305219084593-2932604.post@n3.nabble.com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE743D@suex07-mbx-03.ad.syr.edu>
 <BANLkTimKnUp87DOiK=sXMV-4uOcX1wRqUw@mail.gmail.com>
In-Reply-To: <BANLkTimKnUp87DOiK=sXMV-4uOcX1wRqUw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-05-12_08:2011-05-12,2011-05-12,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Q29vbCEgIEkgaGFkIGZvcmdvdHRlbiBhYm91dCBGaWx0ZXJpbmdUb2tlbkZpbHRlci4NCg0KRWxt
bywgd291bGQgeW91IGNhcmUgdG8gbWFrZSBhIEpJUkEgaXNzdWUgYW5kIGEgcGF0Y2ggKGJhc2Vk
IG9uIFJvYmVydCdzIGNvZGUsIGFuZCBhZGRpbmcgc29tZSB0ZXN0cykgdG8gY3JlYXRlIHRoaXM/
ICBJZiBzbywgdGhpcyBtYXkgYmUgdXNlZnVsOg0KDQoJaHR0cDovL3dpa2kuYXBhY2hlLm9yZy9s
dWNlbmUtamF2YS9Ib3dUb0NvbnRyaWJ1dGUNCg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFsIE1l
c3NhZ2UtLS0tLQ0KPiBGcm9tOiBSb2JlcnQgTXVpciBbbWFpbHRvOnJjbXVpckBnbWFpbC5jb21d
DQo+IFNlbnQ6IFRodXJzZGF5LCBNYXkgMTIsIDIwMTEgMToxNSBQTQ0KPiBUbzogamF2YS11c2Vy
QGx1Y2VuZS5hcGFjaGUub3JnDQo+IFN1YmplY3Q6IFJlOiBDYW4gSSBvbWl0IFNoaW5nbGVGaWx0
ZXIncyBmaWxsZXIgdG9rZW5zDQo+IA0KPiBPbiBUaHUsIE1heSAxMiwgMjAxMSBhdCAxOjAzIFBN
LCBTdGV2ZW4gQSBSb3dlIDxzYXJvd2VAc3lyLmVkdT4gd3JvdGU6DQo+ID4gQSB0aG91Z2h0OiBv
bmUgd2F5IHRvIGRvICMxIHdpdGhvdXQgbW9kaWZ5aW5nIFNoaW5nbGVGaWx0ZXI6IGlmIHRoZXJl
DQo+IHdlcmUgYSBTdG9wRmlsdGVyIHZhcmlhbnQgdGhhdCBhY2NlcHRlZCByZWd1bGFyIGV4cHJl
c3Npb25zIGluc3RlYWQgb2YgYQ0KPiBzdG9wd29yZCBsaXN0LCB5b3UgY291bGQgY29uZmlndXJl
IGl0IHdpdGggYSByZWdleCBsaWtlIC9fIC4qfC4qIF98IF8gLw0KPiAoYXNzdW1pbmcgYSBmdWxs
IG1hdGNoIGlzIHJlcXVpcmVkLCBpLmUuIGltcGxpY2l0IGJlZ2lubmluZyBhbmQgZW5kDQo+IGFu
Y2hvcnMpLCBhbmQgcGxhY2UgaXQgaW4gdGhlIGFuYWx5c2lzIHBpcGVsaW5lIGFmdGVyIFNoaW5n
bGVGaWx0ZXIgdG8NCj4gdGhyb3cgb3V0IHNoaW5nbGVzIHdpdGggZmlsbGVyIHRva2VucyBpbiB0
aGVtLg0KPiA+DQo+ID4gKEl0IHRoaW5rIGl0IHdvdWxkIGJlIHVzZWZ1bCB0byBnZW5lcmFsaXpl
IFN0b3BGaWx0ZXIgdG8gYWxsb3cgZm9yIG1vcmUNCj4gc291cmNlcyBvZiBzdG9wcGFnZSwgcmF0
aGVyIHRoYW4ganVzdCBjcmVhdGluZyBhIFN0b3BSZWdleEZpbHRlciB3aXRoIG5vDQo+IHJlbGF0
aW9uIHRvIFN0b3BGaWx0ZXIuKQ0KPiA+DQo+IA0KPiB3ZSBhbHJlYWR5IGRpZCB0aGlzIGluIDMu
MSBieSBtYWtpbmcgYSBiYXNlIEZpbHRlcmluZ1Rva2VuRmlsdGVyIGNsYXNzPw0KPiBhIHJlZ2V4
IGZpbHRlciBpcyB0cml2aWFsIGlmIHlvdSBzdWJjbGFzcyB0aGlzICh3ZSBjb3VsZCBhZGQgc29t
ZXRoaW5nDQo+IGxpa2UgdGhpcyB1bnRlc3RlZCBjb2RlIHRvIHRoZSAucGF0dGVybiBwYWNrYWdl
IG9yIHdoYXRldmVyKQ0KPiANCj4gcHVibGljIGNsYXNzIFBhdHRlcm5SZW1vdmVGaWx0ZXIgZXh0
ZW5kcyBGaWx0ZXJpbmdUb2tlbkZpbHRlciB7DQo+ICAgcHJpdmF0ZSBmaW5hbCBNYXRjaGVyIG1h
dGNoZXI7DQo+ICAgcHJpdmF0ZSBmaW5hbCBDaGFyVGVybUF0dHJpYnV0ZSB0ZXJtQXR0ID0NCj4g
YWRkQXR0cmlidXRlKENoYXJUZXJtQXR0cmlidXRlLmNsYXNzKTsNCj4gDQo+ICAgcHVibGljIFBh
dHRlcm5SZW1vdmVGaWx0ZXIoYm9vbGVhbiBlbmFibGVQb3NpdGlvbkluY3JlbWVudHMsDQo+IFRv
a2VuU3RyZWFtIGlucHV0LCBQYXR0ZXJuIHBhdHRlcm4pIHsNCj4gICAgIHN1cGVyKGVuYWJsZVBv
c2l0aW9uSW5jcmVtZW50cywgaW5wdXQpOw0KPiAgICAgbWF0Y2hlciA9IHBhdHRlcm4ubWF0Y2hl
cih0ZXJtQXR0KTsNCj4gICB9DQo+IA0KPiAgIEBPdmVycmlkZQ0KPiAgIHByb3RlY3RlZCBib29s
ZWFuIGFjY2VwdCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQo+ICAgICBtYXRjaGVyLnJlc2V0KCk7
DQo+ICAgICByZXR1cm4gIW1hdGNoZXIubWF0Y2hlcygpOw0KPiAgIH0NCj4gfQ0KPiANCj4gLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmli
ZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBq
YXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-49723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 18:49:06 2011
Return-Path: <java-user-return-49723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C2F1A5774
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 18:49:06 +0000 (UTC)
Received: (qmail 38714 invoked by uid 500); 12 May 2011 18:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38670 invoked by uid 500); 12 May 2011 18:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38656 invoked by uid 99); 12 May 2011 18:49:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 18:49:04 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.211.3.201] (HELO itcs-ehub-01.adsroot.itcs.umich.edu) (141.211.3.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 18:48:57 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.232]) by
 itcs-ehub-01.adsroot.itcs.umich.edu ([141.211.3.201]) with mapi; Thu, 12 May
 2011 14:48:35 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 12 May 2011 14:48:33 -0400
Subject: RE: Sharding Techniques
Thread-Topic: Sharding Techniques
Thread-Index: AcwPsvuGuwazCQ89SCu5zRh103QCLwBCoR8A
Message-ID: <47316FE3F6BA0D4DADF99663512552680B0F3747E3@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
 <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com>
 <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <BANLkTimRy02u6YG=nWzdg3oNSDJR8qQ0WA@mail.gmail.com>
In-Reply-To: <BANLkTimRy02u6YG=nWzdg3oNSDJR8qQ0WA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

Hi Samar,

Have you looked at top or iostat or other monitoring utilities to see if yo=
u are cpu bound vs I/O bound?

With 225 term queries, it's possible that you are I/O bound.

I suspect you need to think about seek time and caching. For each unique fi=
eld:term combination lucene has to look up the postings for that term in th=
e index.  Additionally for any phrase, lucene has to additionally look up t=
he positions data for each term in the phrase. (In our case phrase searches=
 are very expensive as our positions (*prx) index is about 8 times as large=
 as our frq index) So for 225 terms including some number of phrases, that =
is a lot of disk seeks.  To the extent that the terms are close together in=
 the index and various buffer caches contain adjacent terms, you might not =
actually have 225 seeks, but I suspect there will still be a lot.   =20

Although Lucene implements a number of caches (and you should take a look a=
t your cache hit ratios), Lucene depends on the OS disk cache to cache post=
ings data for individual terms. Most unix/linux OS's use free memory for di=
sk caching.  How much memory is available on the machine after the JVM gets=
 it allocation?

Have you considered running cache warming queries of your most frequent ter=
ms/phrases so that the data is in the OS disk cache? =20

Tom


>> When queries (without two fields mentioned above) have a lot of
>>words/phrases search time is high. E.g I took a query with around 80 uniq=
ue
>>terms (not words) in 5 fields. These terms occur repeatedly and become to=
tal
>>225 terms (non-unique). This particular query took 4.2 seconds. the 15
>>indexes used for this query were of total size 5 G.
>>Are 225 terms (80 unique) is a very big number?

-----Original Message-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 19:43:59 2011
Return-Path: <java-user-return-49724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F17555068
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 19:43:59 +0000 (UTC)
Received: (qmail 17522 invoked by uid 500); 12 May 2011 19:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17466 invoked by uid 500); 12 May 2011 19:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17458 invoked by uid 99); 12 May 2011 19:43:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 19:43:57 +0000
X-ASF-Spam-Status: No, hits=4.2 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of barbct5@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 19:43:52 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <barbct5@gmail.com>)
	id 1QKbnH-0001Po-Sm
	for java-user@lucene.apache.org; Thu, 12 May 2011 12:43:31 -0700
Date: Thu, 12 May 2011 12:43:31 -0700 (PDT)
From: Elmo Bleek <barbct5@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1305229411883-2933250.post@n3.nabble.com>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE743E@suex07-mbx-03.ad.syr.edu>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu> <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu> <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com> <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com> <1305219084593-2932604.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147FB3CE743D@suex07-mbx-03.ad.syr.edu> <BANLkTimKnUp87DOiK=sXMV-4uOcX1wRqUw@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE743E@suex07-mbx-03.ad.syr.edu>
Subject: RE: Can I omit ShingleFilter's filler tokens
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Sure, I'd be will to do that. I'll get create an issue and then get working
on code and tests. 

--
View this message in context: http://lucene.472066.n3.nabble.com/Can-I-omit-ShingleFilter-s-filler-tokens-tp2926009p2933250.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 12 21:34:47 2011
Return-Path: <java-user-return-49725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 094635B09
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 12 May 2011 21:34:47 +0000 (UTC)
Received: (qmail 68088 invoked by uid 500); 12 May 2011 21:34:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68040 invoked by uid 500); 12 May 2011 21:34:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68032 invoked by uid 99); 12 May 2011 21:34:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 21:34:44 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 12 May 2011 21:34:37 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 51E06D36005
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 23:34:16 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 1f1EB9fhwFB9 for <java-user@lucene.apache.org>;
	Thu, 12 May 2011 23:34:14 +0200 (CEST)
Received: from VEGA (port-92-196-39-101.dynamic.qsc.de [92.196.39.101])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id EF381D36001
	for <java-user@lucene.apache.org>; Thu, 12 May 2011 23:34:13 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTimkv8gFczoXDYSq-7QyqjU2+mbL0w@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE7396@suex07-mbx-03.ad.syr.edu> <BANLkTi=EWFJeEiR5xcJ6PGDiN=K-Z2JaTQ@mail.gmail.com> <2D127F11DC79714E9B6A43AC9458147FB3CE739E@suex07-mbx-03.ad.syr.edu> <BANLkTinE6mGcknFdgJXon6N2nAx7p3owxA@mail.gmail.com> <BANLkTimr-HBTqkoBc-1juDu+cAQ=F+Eqdg@mail.gmail.com> <1305219084593-2932604.post@n3.nabble.com> <2D127F11DC79714E9B6A43AC9458147FB3CE743D@suex07-mbx-03.ad.syr.edu> <BANLkTimKnUp87DOiK=sXMV-4uOcX1wRqUw@mail.gmail.com>
In-Reply-To: <BANLkTimKnUp87DOiK=sXMV-4uOcX1wRqUw@mail.gmail.com>
Subject: RE: Can I omit ShingleFilter's filler tokens
Date: Thu, 12 May 2011 23:34:15 +0200
Message-ID: <00bc01cc10ec$5816d780$08448680$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQGNywTBMhy9/JrnMpgGoHhg2AudyAFMKV4wAjFTnqoCTx2HhgGwp+v7AkplnMACIpVA8AFmtr4JAwA05TuUg7jw8A==
Content-Language: de

> we already did this in 3.1 by making a base FilteringTokenFilter =
class?
> a regex filter is trivial if you subclass this (we could add something =
like this
> untested code to the .pattern package or whatever)
>=20
> public class PatternRemoveFilter extends FilteringTokenFilter {
>   private final Matcher matcher;
>   private final CharTermAttribute termAtt =3D
> addAttribute(CharTermAttribute.class);
>=20
>   public PatternRemoveFilter(boolean enablePositionIncrements,
> TokenStream input, Pattern pattern) {
>     super(enablePositionIncrements, input);
>     matcher =3D pattern.matcher(termAtt);
>   }
>=20
>   @Override
>   protected boolean accept() throws IOException {
>     matcher.reset();
>     return !matcher.matches();
>   }
> }

I *love* CharTermAttribute and this elegant code, you can use it 1:1 for =
this, we did a good work with adding that as replacement to ancient =
TermAttribute in 3.1! Robert that=E2=80=99s fabulous :-)

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 10:11:45 2011
Return-Path: <java-user-return-49726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB9C24E4C
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 10:11:45 +0000 (UTC)
Received: (qmail 52957 invoked by uid 500); 13 May 2011 10:11:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52888 invoked by uid 500); 13 May 2011 10:11:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52880 invoked by uid 99); 13 May 2011 10:11:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 10:11:42 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 10:11:37 +0000
Received: by fxm7 with SMTP id 7so2755221fxm.35
        for <java-user@lucene.apache.org>; Fri, 13 May 2011 03:11:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=9GlSTQdIYcb/BSbdRJ/JX2yGV8doYCyC5EjrZOGP4Ns=;
        b=OuX6vwsuPZvuV9krRfi+t3mPzPSZ5vVl/8xOE5z8MxWCCL8WqeULfAErhJMvBmHPiD
         fNfnAIEtoq6A6E2e255WWkGqB7KWyrWa+whyHo/1SK3B38X68jSPO2uRGf42s1x5xY8B
         UYQl6JZt7TRQs3xFeZzzJCcT1oCENPPT9d7oI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=SnkJHitIdO3umbHUMfhEUeqyKyW8X6BzEGOneJhilX5fEF47Q8PpNlLg6UUPZ+IRXW
         6BtmkQeGHxnWjWfx1XmL9S6JV7RJ6HuPTNN9LcmlQqXDQSHWRxzsx562pxioZ63wa93x
         3Z61/8ZR+F8Brb8AYN6Ck1UlWuRG0/pAOvy9E=
Received: by 10.223.37.153 with SMTP id x25mr1470938fad.117.1305281476246;
 Fri, 13 May 2011 03:11:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.86.202 with HTTP; Fri, 13 May 2011 03:11:01 -0700 (PDT)
In-Reply-To: <47316FE3F6BA0D4DADF99663512552680B0F3747E3@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
 <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com> <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <BANLkTimRy02u6YG=nWzdg3oNSDJR8qQ0WA@mail.gmail.com> <47316FE3F6BA0D4DADF99663512552680B0F3747E3@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
From: Samarendra Pratap <samarzone@gmail.com>
Date: Fri, 13 May 2011 15:41:01 +0530
Message-ID: <BANLkTineuRGxUPEj6WvQcgYa9whveNefcw@mail.gmail.com>
Subject: Re: Sharding Techniques
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517478484b93e7d04a3258695

--001517478484b93e7d04a3258695
Content-Type: text/plain; charset=ISO-8859-1

Hi Tom,
 Thanks for pointing me to something important (phrase queries) which I
wasn't thinking of.

 We are using synonyms which gets expanded at run time. I'll have to give it
a thought.

 We are not using synonyms at indexing time due to lack of flexibility of
changing the list. We are not using synonym analyzer either, because of the
issues related to synonyms of varying word length (any comments?). These
synonyms are expanded at the time of query formation and they do contain
phrases, in fact a good number (if not big) of those.

I would also like to share that following results of initial testing

Comparison between - single index Vs 21 indexes
Total Size - 18 GB
Queries run - 500
% improvement - roughly 18%

Guys here, however, were expecting more :-), but's that's good enough reason
to go for single index.

(details of index and queries are there in the thread)


On Fri, May 13, 2011 at 12:18 AM, Burton-West, Tom <tburtonw@umich.edu>wrote:

> Hi Samar,
>
> Have you looked at top or iostat or other monitoring utilities to see if
> you are cpu bound vs I/O bound?
>
> With 225 term queries, it's possible that you are I/O bound.
>
> I suspect you need to think about seek time and caching. For each unique
> field:term combination lucene has to look up the postings for that term in
> the index.  Additionally for any phrase, lucene has to additionally look up
> the positions data for each term in the phrase. (In our case phrase searches
> are very expensive as our positions (*prx) index is about 8 times as large
> as our frq index) So for 225 terms including some number of phrases, that is
> a lot of disk seeks.  To the extent that the terms are close together in the
> index and various buffer caches contain adjacent terms, you might not
> actually have 225 seeks, but I suspect there will still be a lot.
>
> Although Lucene implements a number of caches (and you should take a look
> at your cache hit ratios), Lucene depends on the OS disk cache to cache
> postings data for individual terms. Most unix/linux OS's use free memory for
> disk caching.  How much memory is available on the machine after the JVM
> gets it allocation?
>
> Have you considered running cache warming queries of your most frequent
> terms/phrases so that the data is in the OS disk cache?
>
> Tom
>
>
> >> When queries (without two fields mentioned above) have a lot of
> >>words/phrases search time is high. E.g I took a query with around 80
> unique
> >>terms (not words) in 5 fields. These terms occur repeatedly and become
> total
> >>225 terms (non-unique). This particular query took 4.2 seconds. the 15
> >>indexes used for this query were of total size 5 G.
> >>Are 225 terms (80 unique) is a very big number?
>
> -----Original Message-----
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Samar

--001517478484b93e7d04a3258695--

From java-user-return-49727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 12:57:21 2011
Return-Path: <java-user-return-49727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 20A914EA4
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 12:57:21 +0000 (UTC)
Received: (qmail 91734 invoked by uid 500); 13 May 2011 12:57:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91690 invoked by uid 500); 13 May 2011 12:57:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91682 invoked by uid 99); 13 May 2011 12:57:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 12:57:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 12:57:09 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Fri, 13 May 2011 14:56:49 +0200
Subject: Re: Sharding Techniques
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <BANLkTineuRGxUPEj6WvQcgYa9whveNefcw@mail.gmail.com>
References: <BANLkTimuytxpYnSRXR0qx6-H1VHxSExzKg@mail.gmail.com>
	 <1305014508.8672.59.camel@te-prime> <4DC93770.8070905@ifactory.com>
	 <BANLkTinRhn8DPo_iyhJrkvx-iF7my_-4sg@mail.gmail.com>
	 <47316FE3F6BA0D4DADF99663512552680B0F3744B5@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
	 <BANLkTimRy02u6YG=nWzdg3oNSDJR8qQ0WA@mail.gmail.com>
	 <47316FE3F6BA0D4DADF99663512552680B0F3747E3@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
	 <BANLkTineuRGxUPEj6WvQcgYa9whveNefcw@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Fri, 13 May 2011 14:56:48 +0200
Message-ID: <1305291408.31279.6656.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, 2011-05-13 at 12:11 +0200, Samarendra Pratap wrote:
> Comparison between - single index Vs 21 indexes
> Total Size - 18 GB
> Queries run - 500
> % improvement - roughly 18%

I was expecting a lot more. Could you test whether this is an IO-issue
by selecting a slow query and performing the exact same search with that
query several times? The OS cache should kick in quickly so that the
storage isn't touched at all on the later searches.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 13:09:17 2011
Return-Path: <java-user-return-49728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D7FBE4720
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 13:09:17 +0000 (UTC)
Received: (qmail 8564 invoked by uid 500); 13 May 2011 13:09:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8516 invoked by uid 500); 13 May 2011 13:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8507 invoked by uid 99); 13 May 2011 13:09:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 13:09:15 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.149.75] (HELO na3sys009aog105.obsmtp.com) (74.125.149.75)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 13:09:08 +0000
Received: from mailgw2.sciquest.com ([71.16.107.53]) (using TLSv1) by na3sys009aob105.postini.com ([74.125.148.12]) with SMTP
	ID DSNKTc0tXZEhUqPs6lhVcHoqX/hmYDeOPlAZ@postini.com; Fri, 13 May 2011 06:08:47 PDT
Received: from SRV-WIN-MAIL01.cary.sciquest.com (srv-win-mail01.cary.sciquest.com [10.0.0.28])
	by mailgw2.sciquest.com (8.13.8/8.13.8/mailgw-20090919) with ESMTP id p4DD8ggf017246
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 13 May 2011 09:08:43 -0400
Received: from SRV-WIN-MAIL01.cary.sciquest.com ([10.0.0.28]) by
 srv-win-mail01 ([10.0.0.28]) with mapi; Fri, 13 May 2011 09:08:42 -0400
From: Alexey Lef <alexey@sciquest.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 13 May 2011 09:08:37 -0400
Subject: RE: IndexReader.close() behavior
Thread-Topic: IndexReader.close() behavior
Thread-Index: AcwEOmyUMASJWg34RkqTdZcE0vZ8GAEbiNiA
Message-ID: <27BFBC3607BD86489D06533C7F4401B110308F7857@srv-win-mail01>
References: <27BFBC3607BD86489D06533C7F4401B1102FDB7956@srv-win-mail01>
 <BANLkTikg5z03TXWiVKsROp5XMXFCPiEweQ@mail.gmail.com>
In-Reply-To: <BANLkTikg5z03TXWiVKsROp5XMXFCPiEweQ@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
acceptlanguage: en-US
Content-Type: text/plain; charset="Windows-1252"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

Apologies for a long silence - have been fighting a nasty bug of a non-comp=
uter variety.

We are using 3.0.3. I was trying to upgrade to 3.1 and clear all deprecatio=
n warnings. What I described was an attempt to switch from MultiSearcher to=
 MultiReader. We had a simple delegating IndexSearcher wrapper for cached/r=
eused IndexSearchers that was doing reference counting. Its close() method =
was overridden to perform a real close() only if ref count was 0. I could h=
ave any combination of single-use IndexSearchers and shared/cached IndexSea=
rchers in a MultiSearcher and everything worked beautifully on close().

So, my first choice was to use the incRef()/close() in IndexReader, but Ind=
exReader.close() behavior prevents that.

The second thought was creating a delegating wrapper for IndexReader simila=
rly to what I had for IndexSearcher but there are so many methods, and half=
 of them are final including close(). So, that doesn't work either.

I don't think I can let MultiReader call both incRef() and decRef() on sub =
readers for two reasons: single-use (non-shared) readers need to just be cl=
osed; and for shared readers - there is a race condition between getting a =
shared reader from cache and calling incRef(). There is a potential that du=
ring that time the reader may get decRef()'ed and closed due to, e.g. a new=
 version of an index or cache expiration. So, a shared reader has to be inc=
Ref()'ed at the time I get it from cache.

Finally, I ended up creating a simple container interface to house the Inde=
xReader and pass it around:

public interface IndexReaderContainer {
	IndexReader getIndexReader();
	void close() throws IOException;
}

I have 3 implementations of this interface:=20
  single-use - close() simply closes IndexReader,=20
  shared - does reference counting and closes IndexReader only when ref cou=
nt =3D 0, and=20
  multi-reader - keeps track of sub-IndexReaderContainer's and closes each =
one on close(). MultiReader is created with closeSubReaders=3Dfalse.

The application code always calls IndexReaderContainer.close(), never Index=
Reader.close() directly.

Not very pretty but this way I have my combination of single-use and shared=
 indexes, and I don't have to change Lucene code.

Personally, I have no sympathy for people who double-close their IndexReade=
rs - let them get an exception, but I understand that it is not easy to cha=
nge something that's been working in a particular way for years.

Thanks,

Alexey

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Tuesday, April 26, 2011 11:20 PM
To: java-user@lucene.apache.org
Subject: Re: IndexReader.close() behavior

The code is tricky, but it's intentional.

We always set closed to true to guard against double close, ie, it's
fine to double-close an IndexReader, ie doing so will not "steal"
references from other places that have incRef'd the reader.

Can you pass closeSubReaders=3Dfalse when you create your MultiReader?
This way, the MultiReader incRefs on init and decRefs on close.

But: what Lucene version are you using...?

Mike

http://blog.mikemccandless.com

On Tue, Apr 26, 2011 at 8:46 AM, Alexey Lef <alexey@sciquest.com> wrote:
> This is the code in IndexReader.close():
>
> =A0public final synchronized void close() throws IOException {
> =A0 =A0if (!closed) {
> =A0 =A0 =A0decRef();
> =A0 =A0 =A0closed =3D true;
> =A0 =A0}
> =A0}
>
> What strikes me as odd is that =93closed=94 variable is set to true regar=
dless of whether the index was actually closed using doClose(). It is causi=
ng a bit of a problem in the following setup.
>
> We have many indexes. Some of these indexes are kept open and IndexReader=
 is reused for performance reasons, some are open just for a single search.=
 Some of them are combined together at the search time depending on the use=
r performing the search. For every search, if there are multiple relevant I=
ndexReader, we create a new MultiReader instance and close it once the sear=
ch is done. Since reference counting is already built into the IndexReader,=
 I figured I can just call incRef() when using a cached IndexReader and the=
n call close() or let MultiReader call close() on it once it is done. The p=
roblem is only the first close() calls decRef(),subsequent calls do nothing=
, and if there were multiple incRef() calls, the IndexReader ends up being =
left open.
>
> I thought of using decRef() instead of close() but MultiReader doesn=92t =
have an option of calling decRef() on subreaders, only close().
>
> The following change to IndexReader.close() fixes the problem:
>
> =A0public final synchronized void close() throws IOException {
> =A0 =A0if (refCount.get() > 0) {
> =A0 =A0 =A0decRef();
> =A0 =A0}
> =A0}
>
> It seems more logical. Also it is now consistent with ensureOpen() method=
.
>
> Am I missing something here? Is there a good reason to prevent close() fr=
om doing anything after the first call even if the IndexReader was not actu=
ally closed? Does it even need to be synchronized if decRef() does all the =
work?
>
> Thanks,
>
> Alexey
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 13:27:43 2011
Return-Path: <java-user-return-49729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E4DC4260
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 13:27:43 +0000 (UTC)
Received: (qmail 55435 invoked by uid 500); 13 May 2011 13:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55396 invoked by uid 500); 13 May 2011 13:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55388 invoked by uid 99); 13 May 2011 13:27:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 13:27:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mindas@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 13:27:36 +0000
Received: by qyk30 with SMTP id 30so1835082qyk.14
        for <java-user@lucene.apache.org>; Fri, 13 May 2011 06:27:15 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=nNjKe5q6eF1nKk7MoLcu+WwCUKQnBKjTEfR2dX/sO2s=;
        b=lSEn2aroRRDkt0l6ZczrZaBxePLRw/eEAAVGOJxsTAY6T8xJOyNQYmTgpnwMaAvLDH
         al1FZyGg+NQhCuCFMV/ptDUcTmwWczaHoNjP3XYfujvoXsp2PnzXDkZWeXxYF7pR9+Wq
         bq702oq8mOyw9n8b8D/o+0SDtYMZW13RBUVwg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=OVQPuz2h1rfuVHEma4IQOBA9reNYhYNMs4Gs4AzFM0wVT2gsDXTwYoQJ14YwPnk/2+
         TOP8TW9l20GSmv1VEMC5Thv3GKoC98BEKLHkO7jlnY1xubtP7/d32yVnMqkP9oJkxcm2
         9XwwEBI7pduc4cBsNoa1iXEtfZ8/g6LQIU2Xw=
MIME-Version: 1.0
Received: by 10.229.68.132 with SMTP id v4mr1134474qci.248.1305293235332; Fri,
 13 May 2011 06:27:15 -0700 (PDT)
Received: by 10.229.49.17 with HTTP; Fri, 13 May 2011 06:27:15 -0700 (PDT)
In-Reply-To: <27BFBC3607BD86489D06533C7F4401B110308F7857@srv-win-mail01>
References: <27BFBC3607BD86489D06533C7F4401B1102FDB7956@srv-win-mail01>
	<BANLkTikg5z03TXWiVKsROp5XMXFCPiEweQ@mail.gmail.com>
	<27BFBC3607BD86489D06533C7F4401B110308F7857@srv-win-mail01>
Date: Fri, 13 May 2011 14:27:15 +0100
Message-ID: <BANLkTincucNBrCUL6M17Ka1OJ88Fmhv5iw@mail.gmail.com>
Subject: Re: IndexReader.close() behavior
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,

In my quest to fight a similar problem, I ended up writing a wrapper
finalizer (sic!) that simply closes the underlying reader/searcher. It
might be against all advices (e.g. "Effective Java 2ed" Item 7) but I
simply couldn't find any better solution to this problem.

I wish I wouldn't need doing close() myself. Hopefully this will be
improved with Java 7's AutoCloseable one day.

Regards,
Mindaugas

On Fri, May 13, 2011 at 2:08 PM, Alexey Lef <alexey@sciquest.com> wrote:
> Apologies for a long silence - have been fighting a nasty bug of a non-co=
mputer variety.
>
> We are using 3.0.3. I was trying to upgrade to 3.1 and clear all deprecat=
ion warnings. What I described was an attempt to switch from MultiSearcher =
to MultiReader. We had a simple delegating IndexSearcher wrapper for cached=
/reused IndexSearchers that was doing reference counting. <..>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 14:46:54 2011
Return-Path: <java-user-return-49730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5A9CD4EFB
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 14:46:54 +0000 (UTC)
Received: (qmail 17950 invoked by uid 500); 13 May 2011 14:46:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17903 invoked by uid 500); 13 May 2011 14:46:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17895 invoked by uid 99); 13 May 2011 14:46:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 14:46:51 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.136] (HELO eu1sys200aob114.obsmtp.com) (207.126.144.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 14:46:43 +0000
Received: from proxy02.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob114.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTc1EPpc0dW2Waqja9MUj978OlBO4t6sD@postini.com; Fri, 13 May 2011 14:46:23 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 13 May 2011 15:46:20 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Fri, 13 May 2011 15:46:19 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SpanNearQuery - inOrder parameter
Date: Fri, 13 May 2011 15:46:18 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F240121FEF6@uksrpblkexb01.detica.com>
In-Reply-To: <alpine.DEB.2.00.1105101622420.26571@bester>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery - inOrder parameter
Thread-Index: AcwPapuYBEqMhhHWS+a2pzUrgMzybgCEb7DA
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com> <614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com> <alpine.DEB.2.00.1105101622420.26571@bester>
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 13 May 2011 14:46:19.0024 (UTC) FILETIME=[84E6D900:01CC117C]
X-Virus-Checked: Checked by ClamAV on apache.org

Chris, and others

Thanks for your reply. In effect what you are saying is that
SpanNearQuery works as expected, and I should set inOrder=3Dtrue to =
obtain
the behaviour I require, even though I don't care about the order?

Thanks

Greg=20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: 11 May 2011 00:32
To: java-user@lucene.apache.org
Subject: RE: SpanNearQuery - inOrder parameter



: I attach a junit test which shows strange behaviour of the inOrder
: parameter on the SpanNearQuery constructor, using Lucene 2.9.4.
:=20
: My understanding of this parameter is that true forces the order and
: false doesn't care about the order.=20
:=20
: Using true always works. However using false works fine when the terms
: in the query are distinct, but if they are equivalent, e.g. searching
: for "john john", I do not get the expected results. The workaround
seems
: to be to always use true for queries with repeated terms.

I don't think the situation of "overlapping spans" has changed much
since this thread...

http://search.lucidimagination.com/search/document/ee23395e5a93c525/non_
overlapping_span_queries#868b3a3ec6431afc

the crux of hte issue (as i recall) is that there is really no
conecptual reason to why a query for "'john' near 'john', in any order,
with slop of Z" shouldn't match a doc that contains only one instance of
"john" ... the first SpanTermQuery says "i found a match at position X"
the second SpanTermQuery says "i found a match at position Y" and the
SpanNearQuery says "the differnece between X and Y is less then Z"
therefore i have a match.  (The SpanNearQuery can't fail just because X
and Y are the same -- they might be two distinct term instances, with
differnet payloads perhaps, that just happen to have the same position).

However: if true=3D=3DinOrder case works because the SpanNearQuery =
enforces
that  "X must be less then Y" so the same term can't ever match twice.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 15:38:38 2011
Return-Path: <java-user-return-49731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1D103478E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 15:38:38 +0000 (UTC)
Received: (qmail 44109 invoked by uid 500); 13 May 2011 15:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44055 invoked by uid 500); 13 May 2011 15:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44047 invoked by uid 99); 13 May 2011 15:38:35 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 15:38:35 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [141.211.3.201] (HELO itcs-ehub-01.adsroot.itcs.umich.edu) (141.211.3.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 15:38:29 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.232]) by
 itcs-ehub-01.adsroot.itcs.umich.edu ([141.211.3.201]) with mapi; Fri, 13 May
 2011 11:38:06 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 13 May 2011 11:38:05 -0400
Subject: RE: Non-English Languages Search
Thread-Topic: Non-English Languages Search
Thread-Index: AcwP3txxaLCbbAxSROalp3lEUtSOigBopH8g
Message-ID: <47316FE3F6BA0D4DADF99663512552680B0F854AB7@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <70EA5691BD59734784FF872CD1B9747A284F5D0B54@OHCINMBX01.corp.local>
 <BANLkTi=vi0+y1jeY7mhgnHg8360qecGShA@mail.gmail.com>
In-Reply-To: <BANLkTi=vi0+y1jeY7mhgnHg8360qecGShA@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgSXZhbiBhbmQgUm9iZXJ0LA0KDQo+PiBzb3VuZHMgbGlrZSB5b3Ugc2hvdWxkIHRhbGsgdG8g
VG9tIEJ1cnRvbi1XZXN0IQ0KT2ssIEknbGwgYml0ZS4NCg0KQSBmZXcgcXVlc3Rpb25zOg0KDQpB
cmUgeW91IHBsYW5uaW5nIHRvIGhhdmUgc2VwYXJhdGUgZmllbGRzIGZvciBlYWNoIGxhbmd1YWdl
IG9yIHRoZSBzYW1lIGZpZWxkcyB3aXRoIGNvbnRlbnRzIGluIGRpZmZlcmVudCBsYW5ndWFnZXM/
DQpJZiAjMiBhcmUgeW91IHBsYW5uaW5nIHRvIGhhdmUgYSBmaWVsZCB0byBpbmRpY2F0ZSB0aGUg
bGFuZ3VhZ2Ugc28geW91IGNhbiBkbyBmaWx0ZXIgcXVlcmllcz8NCkRvIHlvdSBuZWVkIHRvIGFj
Y29tbW9kYXRlIHNlYXJjaGVzIHdoZXJlIHlvdSBkb24ndCBrbm93IHdoYXQgbGFuZ3VhZ2UgdGhl
IHVzZXIgaXMgc2VhcmNoaW5nIGluPw0KDQo+PiAyLiBXaGF0IGFib3V0IG1peGluZyBMYXRpbiBh
bmQgbm9uLUxhdGluIGxhbmd1YWdlcz8gIFdlIHJhbiB0ZXN0cyBvbiBFbmdsaXNoIGFuZCBDaGlu
ZXNlIGNvbGxlY3Rpb25zIG1peGVkIHRvZ2V0aGVyID4+YW5kIGRpZG4ndCBzZWUgYW55IG5lZ2F0
aXZlIGltcGFjdCAocHJlY2lzaW9uL3JlY2FsbCkuDQoNCiBJbnRlcmVzdGluZy4gIEkndmUgd29u
ZGVyZWQgd2hldGhlciBtaXhpbmcgbGFuZ3VhZ2VzIHdvdWxkIGNhdXNlIGFueSBpc3N1ZXMgd2l0
aCBpZGYgc3RhdHMgaW4gdGhlIHJhbmtpbmcgZm9ybXVsYSwgZXNwZWNpYWxseSBpZiB0aGUgbnVt
YmVyIG9mIGRvY3VtZW50cyBpbiBlYWNoIGxhbmd1YWdlIGlzIHNpZ25pZmljYW50bHkgZGlmZmVy
ZW50Lg0KDQpUaGlzIG1heSBub3QgYmUgcmVsZXZhbnQgdG8geW91ciB1c2UgY2FzZS4gV2UgZm91
bmQgdGhhdCBkaXJ0eSBPQ1IgY29tYmluZWQgd2l0aCBtdWx0aXBsZSBsYW5ndWFnZXMgY2FuIGNh
dXNlIGEgbGFyZ2UgbnVtYmVyIG9mIHVuaXF1ZSB0ZXJtcy4gIElmIHlvdSBoYXZlIGEgbGFyZ2Ug
ZW5vdWdoIGluZGV4LCB0aGlzIGNhbiBtYWtlIG11bHRpdGVybSBxdWVyaWVzIChpLmUuIHByZWZp
eC93aWxkY2FyZCBldGMpIGNvbXB1dGF0aW9uYWxseSBleHBlbnNpdmUuICAgSXQgY2FuIGFsc28g
c2VyaW91c2x5IGluY3JlYXNlIG1lbW9yeSB1c2UuICBXZSBzdGFydGVkIGJ5IGNoYW5naW5nIHRo
ZSB0ZXJtSW5mb3NJbmRleERpdmlzb3IgdG8gZGVhbCB3aXRoIHRoaXMgYXQgc2VhcmNoIHRpbWUg
KGh0dHA6Ly93d3cuaGF0aGl0cnVzdC5vcmcvYmxvZ3MvbGFyZ2Utc2NhbGUtc2VhcmNoL3Rvby1t
YW55LXdvcmRzLWFnYWluKSwgYnV0IHRoZW4gd2hlbiB3ZSB3ZXJlIHJlLWluZGV4aW5nLCB3ZSBk
aXNjb3ZlcmVkIHRoYXQgdGhlIHRlcm1JbmZvc0luZGV4RGl2aXNvciBkb2Vzbid0IGN1cnJlbnRs
eSBhZmZlY3QgdGhlIGluZGV4UmVhZGVyIG9wZW5lZCB3aGVuIGluZGV4aW5nIHNvIHdlIGNoYW5n
ZWQgdGhlIHRlcm1JbmRleEludGVydmFsIGZyb20gMTI4IHRvIDEwMjQuICBUaGlzIHRvb2sgb3Vy
IG1lbW9yeSB1c2UgZnJvbSBvdmVyIDE4R0IgZG93biB0byB1bmRlciA0R0IgYW5kIGFsc28gZWxp
bWluYXRlZCBsYXJnZSBzdG9wLXRoZS13b3JsZCBnYXJiYWdlIGNvbGxlY3Rpb24gcGF1c2VzLiAo
SW5kZXggc2l6ZSBpcyBhYm91dCAzNTBHQikuDQoNClRvbQ0KDQotLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KT24gTW9uLCBNYXkgOSwgMjAxMSBhdCA1OjMyIFBNLCBQcm92YWxvdiwgSXZhbg0K
PEl2YW4uUHJvdmFsb3ZAY2VuZ2FnZS5jb20+IHdyb3RlOg0KPiBXZSBhcmUgcGxhbm5pbmcgdG8g
aW5nZXN0IHNvbWUgbm9uLUVuZ2xpc2ggY29udGVudCBpbnRvIG91ciBhcHBsaWNhdGlvbi4gwqBB
bGwgY29udGVudCBpcyBPQ1InZWQgYW5kIHRoZXJlIGFyZSBhIGxvdCBvZiBtaXNzcGVsbGluZ3Mg
YW5kIGdhcmJhZ2UgdGVybXMgYmVjYXVzZSBvZiB0aGlzLiDCoEVhY2ggZG9jdW1lbnQgaGFzIG9u
ZSBwcmltYXJ5IGxhbmd1YWdlIHdpdGggYSBzb21lIGV4Y2VwdGlvbnMgKGUuZy4gYSBmZXcgRW5n
bGlzaCB0ZXJtcyBtaXhlZCBpbiB3aXRoIHByaW1hcmlseSBub24tRW5nbGlzaCBkb2N1bWVudCB0
ZXJtcykuDQo+DQoNCnNvdW5kcyBsaWtlIHlvdSBzaG91bGQgdGFsayB0byBUb20gQnVydG9uLVdl
c3QhDQoNCj4gMS4gRG9lcyBpdCBtYWtlIHNlbnNlIHRvIG1peCB0d28gb3IgbW9yZSBkaWZmZXJl
bnQgTGF0aW4tYmFzZWQgbGFuZ3VhZ2VzIGluIHRoZSBzYW1lIGluZGV4IGRpcmVjdG9yeSBpbiBM
dWNlbmUgKGUuZy4gU3BhbmlzaC9GcmVuY2gvRW5nbGlzaCk/DQoNCkkgdGhpbmsgaXQgZGVwZW5k
cyB1cG9uIHRoZSBhcHBsaWNhdGlvbi4gSWYgdGhlIHVzZXIgaXMgc3BlY2lmeWluZyB0aGUNCmxh
bmd1YWdlIHZpYSB0aGUgVUkgc29tZWhvdyB0aGVuIGl0cyBwcm9iYWJseSBzaW1wbGVzdCB0byBq
dXN0IHVzZQ0KZGlmZmVyZW50IGluZGV4ZXMgZm9yIGVhY2ggY29sbGVjdGlvbi4NCg0KPiAyLiBX
aGF0IGFib3V0IG1peGluZyBMYXRpbiBhbmQgbm9uLUxhdGluIGxhbmd1YWdlcz8gwqBXZSByYW4g
dGVzdHMgb24gRW5nbGlzaCBhbmQgQ2hpbmVzZSBjb2xsZWN0aW9ucyBtaXhlZCB0b2dldGhlciBh
bmQgZGlkbid0IHNlZSBhbnkgbmVnYXRpdmUgaW1wYWN0IChwcmVjaXNpb24vcmVjYWxsKS4gwqBB
bnkgb3RoZXIgcG90ZW50aWFsIGlzc3Vlcz8NCg0KUmlnaHQsIG5vbmUgb2YgdGhlIHRlcm1zIHdv
dWxkIG92ZXJsYXAgaGVyZS4uLiB0aGUgb25seSAiaXNzdWUiIHdvdWxkDQpiZSBhIHNrZXdlZCBt
YXhEb2MgYnV0IHRoaXMgaXMgcHJvYmFibHkgbm90IGEgYmlnIGRlYWwgYXQgYWxsLiBCdXQNCndo
YXRzIHRoZSBiZW5lZml0IHRvIG1peGluZyB0aGVtPw0KDQo+IDMuIEFueSByZWNvbW1lbmRhdGlv
bnMgZm9yIGFuIFVyZHUgYW5hbHl6ZXI/DQo+DQoNCnlvdSBjYW4gYWx3YXlzIHN0YXJ0IHdpdGgg
c3RhbmRhcmRhbmFseXplciBhcyBpdCB3aWxsIHRva2VuaXplIGl0Li4uDQp5b3UgbWlnaHQgYmUg
YWJsZSB0byBtYWtlIHVzZSBvZiByZXNvdXJjZXMgc3VjaCBhcw0KaHR0cDovL3d3dy5jcnVscC5v
cmcvc29mdHdhcmUvbGluZ19yZXNvdXJjZXMvVXJkdUNsb3NlZENsYXNzV29yZHNMaXN0Lmh0bQ0K
YW5kIGh0dHA6Ly93d3cuY3J1bHAub3JnL3NvZnR3YXJlL2xpbmdfcmVzb3VyY2VzL1VyZHVIaWdo
RnJlcVdvcmRzLmh0bQ0KYXMgYSBzdG9wbGlzdC4NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNj
cmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZv
ciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFj
aGUub3JnDQoNCg==


From java-user-return-49732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 20:56:58 2011
Return-Path: <java-user-return-49732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6A1B0442B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 20:56:58 +0000 (UTC)
Received: (qmail 49569 invoked by uid 500); 13 May 2011 20:56:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49529 invoked by uid 500); 13 May 2011 20:56:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49521 invoked by uid 99); 13 May 2011 20:56:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 20:56:56 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of hyan2008@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 20:56:49 +0000
Received: by wwi18 with SMTP id 18so2244367wwi.5
        for <java-user@lucene.apache.org>; Fri, 13 May 2011 13:56:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to:cc
         :content-type;
        bh=SQK/gvRIV0Zl4H2UFJAQgdtTQ0j30lgp7Fx98B7acDk=;
        b=WRq6HiYgItpwe7Lt/5tinsYpj2vOLINEjxO6czqLpabD6/bcQMbzZCiArw3sUAs97M
         KDy0MpHmMTGhMJkpfVp39qWvc6kB0/FsrJVz1UP4QCSGtbC08vOk2RPFXAmzz6Ff+jEn
         A06RVqUmRWjZbCOe0OMeqcErSsPRpZJm4W0LQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:cc:content-type;
        b=ZtXTAw8UzG06SxmBQozhndGsN/4U9/k0+oZ3a6OfYAHTTUZgsI9nBNLWpDL98i8SWu
         omABG6HKD5F/OjqPHN84Aom9oN/su9lVRjb736bKQI5Xepyc7TBusnwxiPxf9otOESLe
         FapMAPofnUfsTIBqlbde0ddTWCGouZ+IjGH9o=
MIME-Version: 1.0
Received: by 10.227.209.9 with SMTP id ge9mr1858999wbb.110.1305320187848; Fri,
 13 May 2011 13:56:27 -0700 (PDT)
Received: by 10.227.38.155 with HTTP; Fri, 13 May 2011 13:56:27 -0700 (PDT)
Date: Fri, 13 May 2011 13:56:27 -0700
Message-ID: <BANLkTingOgmC+1aGyRqb4JBMzTD1Qu9-7g@mail.gmail.com>
Subject: A bug in multisearcher?
From: hao yan <hyan2008@gmail.com>
To: java-user@lucene.apache.org
Cc: Xiaoyang Gu <xiaoyanggu@gmail.com>, hao yan <hyan2008@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

hi, guys

Xiaoyang and I today just found a bug of lucene.
This is actually a Multi-searcher bug. In particular,

If we search with Not on NumericRange and we use MultiSearcher, we
will wrong search results (However, if we use IndexSearcher, the
result is correct).  Basically the NotOfNumericRange does not have
impact on multisearcher. We suspect it is because the createWeight()
function in MultiSearcher and hope some of you guys can help us
confirm or fix this bug of
lucene. I attached the code to reproduce this case. Please check it
out.

In the attached code, I have two separate functions :

(1) testNumericRangeSingleSearcher(Query query)
    where I create 6 documents, with a field called "id"= 1,2,3,4,5,6
respectively . Then I search by the query which is
    +MatchAllDocs -NumericRange(3,3). The expected result then should
be 5 hits since the document 3 is MUST_NOT.

(2) testNumericRangeMultiSearcher(Query query)
    where i create 2 RamDirectory(), each of which has 3 documents,
1,2,3; and 4,5,6. Then I search by the same query as above using
multiSearcher. The expected result should also be 5 hits.

However, from (1), we get 5 hits = expected results, while in (2) we
get 6 hits != expected results.


Thank you very much!


Code:  (based on lucene 3.0.x)



import java.io.IOException;
import java.io.PrintStream;
import java.text.DecimalFormat;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.NumericField;
import org.apache.lucene.index.CorruptIndexException;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.FieldCache;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.MatchAllDocsQuery;
import org.apache.lucene.search.MultiSearcher;
import org.apache.lucene.search.NumericRangeQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.Searchable;
import org.apache.lucene.search.Sort;
import org.apache.lucene.search.SortField;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.search.BooleanClause.Occur;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.LockObtainFailedException;
import org.apache.lucene.store.RAMDirectory;

import com.convertlucene.ConvertFrom2To3;

public class TestNumericRange
{
 public final static void main(String[] args)
 {
   try
   {
     BooleanQuery query = new  BooleanQuery();
     query.add(NumericRangeQuery.newIntRange("numId", 3, 3, true,
true), Occur.MUST_NOT);
     query.add(new MatchAllDocsQuery(), Occur.MUST);

     testNumericRangeSingleSearcher(query);
     testNumericRangeMultiSearcher(query);

   }
   catch(Exception e)
   {
     e.printStackTrace();
   }
 }



 public static void testNumericRangeSingleSearcher(Query query)
throws CorruptIndexException, LockObtainFailedException, IOException
 {
    String[] ids = {"1", "2", "3", "4", "5", "6"};

   Directory directory = new RAMDirectory();

   IndexWriter writer = new IndexWriter(directory, new
WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);

   for (int i = 0; i < ids.length; i++)
   {
     Document doc = new Document();
     doc.add(new Field("id", ids[i],
                       Field.Store.YES,
                       Field.Index.NOT_ANALYZED));
     doc.add(new NumericField("numId").setIntValue(Integer.valueOf(ids[i])));
     writer.addDocument(doc);
   }
   writer.close();


   IndexSearcher searcher = new IndexSearcher(directory);

   TopDocs docs = searcher.search(query, 10);
   System.out.println("SingleSearcher: testNumericRange: hitNum: " +
docs.totalHits);
   for(ScoreDoc doc : docs.scoreDocs)
   {
     System.out.println(searcher.explain(query, doc.doc));
   }
   searcher.close();

   directory.close();
 }

 public static void testNumericRangeMultiSearcher(Query query) throws
CorruptIndexException, LockObtainFailedException, IOException
 {
    String[] ids1 = {"1", "2", "3"};
   Directory directory1 = new RAMDirectory();
   IndexWriter writer1 = new IndexWriter(directory1, new
WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
   for (int i = 0; i < ids1.length; i++)
   {
     Document doc = new Document();
     doc.add(new Field("id", ids1[i],
                       Field.Store.YES,
                       Field.Index.NOT_ANALYZED));
     doc.add(new NumericField("numId").setIntValue(Integer.valueOf(ids1[i])));
     writer1.addDocument(doc);
   }
   writer1.close();

   String[] ids2 = {"4", "5", "6"};
   Directory directory2 = new RAMDirectory();
   IndexWriter writer2 = new IndexWriter(directory2, new
WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
   for (int i = 0; i < ids2.length; i++)
   {
     Document doc = new Document();
     doc.add(new Field("id", ids2[i],
                       Field.Store.YES,
                       Field.Index.NOT_ANALYZED));
     doc.add(new NumericField("numId").setIntValue(Integer.valueOf(ids2[i])));
     writer2.addDocument(doc);
   }
   writer2.close();

   IndexSearcher[] searchers = new IndexSearcher[2];
   searchers[0] = new IndexSearcher(directory1);
   searchers[1] = new IndexSearcher(directory2);
   MultiSearcher multiSearcher = new MultiSearcher(searchers);
   TopDocs docs = multiSearcher.search(query, 10);
   System.out.println("MultiSearcher: testNumericRange: hitNum: " +
docs.totalHits);
   for(ScoreDoc doc : docs.scoreDocs)
   {
     System.out.println(multiSearcher.explain(query, doc.doc));
   }
   multiSearcher.close();

   directory1.close();
   directory2.close();
 }


}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 13 21:34:53 2011
Return-Path: <java-user-return-49733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 550614F7B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 13 May 2011 21:34:53 +0000 (UTC)
Received: (qmail 30874 invoked by uid 500); 13 May 2011 21:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30808 invoked by uid 500); 13 May 2011 21:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30800 invoked by uid 99); 13 May 2011 21:34:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 21:34:50 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 13 May 2011 21:34:43 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id D57DED36004
	for <java-user@lucene.apache.org>; Fri, 13 May 2011 23:34:22 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cYQ0dPopqiZC for <java-user@lucene.apache.org>;
	Fri, 13 May 2011 23:34:17 +0200 (CEST)
Received: from VEGA (port-92-196-39-101.dynamic.qsc.de [92.196.39.101])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 82D91D36001
	for <java-user@lucene.apache.org>; Fri, 13 May 2011 23:34:17 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <BANLkTingOgmC+1aGyRqb4JBMzTD1Qu9-7g@mail.gmail.com>
In-Reply-To: <BANLkTingOgmC+1aGyRqb4JBMzTD1Qu9-7g@mail.gmail.com>
Subject: RE: A bug in multisearcher?
Date: Fri, 13 May 2011 23:34:19 +0200
Message-ID: <000101cc11b5$84d90670$8e8b1350$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMybCPqqM3tN1RostuWS6zttZYW6ZG+kXwg
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

This is a well-known bug, which is unfixable (query rewrite across different
searchers is wrong). In general you should use a MultiReader on your
IndexReaders and use a simple IndexSearcher on top of that MultiReader.
MultiSearcher and ParallelMultiSearcher were deprecated in 3.1 because of
this and disappear in coming Lucene 4.0. ParallelMultiSearcher is included
in IndexSearcher in 3.1 (it parallelizes across index segments).

For more information, see: https://issues.apache.org/jira/browse/LUCENE-2756

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: hao yan [mailto:hyan2008@gmail.com]
> Sent: Friday, May 13, 2011 10:56 PM
> To: java-user@lucene.apache.org
> Cc: Xiaoyang Gu; hao yan
> Subject: A bug in multisearcher?
> 
> hi, guys
> 
> Xiaoyang and I today just found a bug of lucene.
> This is actually a Multi-searcher bug. In particular,
> 
> If we search with Not on NumericRange and we use MultiSearcher, we will
> wrong search results (However, if we use IndexSearcher, the result is
> correct).  Basically the NotOfNumericRange does not have impact on
> multisearcher. We suspect it is because the createWeight() function in
> MultiSearcher and hope some of you guys can help us confirm or fix this
bug
> of lucene. I attached the code to reproduce this case. Please check it
out.
> 
> In the attached code, I have two separate functions :
> 
> (1) testNumericRangeSingleSearcher(Query query)
>     where I create 6 documents, with a field called "id"= 1,2,3,4,5,6
> respectively . Then I search by the query which is
>     +MatchAllDocs -NumericRange(3,3). The expected result then should be 5
> hits since the document 3 is MUST_NOT.
> 
> (2) testNumericRangeMultiSearcher(Query query)
>     where i create 2 RamDirectory(), each of which has 3 documents, 1,2,3;
and
> 4,5,6. Then I search by the same query as above using multiSearcher. The
> expected result should also be 5 hits.
> 
> However, from (1), we get 5 hits = expected results, while in (2) we get 6
hits
> != expected results.
> 
> 
> Thank you very much!
> 
> 
> Code:  (based on lucene 3.0.x)
> 
> 
> 
> import java.io.IOException;
> import java.io.PrintStream;
> import java.text.DecimalFormat;
> 
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field; import
> org.apache.lucene.document.NumericField;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.BooleanQuery;
> import org.apache.lucene.search.FieldCache;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.MatchAllDocsQuery;
> import org.apache.lucene.search.MultiSearcher;
> import org.apache.lucene.search.NumericRangeQuery;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.ScoreDoc;
> import org.apache.lucene.search.Searchable;
> import org.apache.lucene.search.Sort;
> import org.apache.lucene.search.SortField;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.search.TopDocs; import
> org.apache.lucene.search.BooleanClause.Occur;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.LockObtainFailedException;
> import org.apache.lucene.store.RAMDirectory;
> 
> import com.convertlucene.ConvertFrom2To3;
> 
> public class TestNumericRange
> {
>  public final static void main(String[] args)  {
>    try
>    {
>      BooleanQuery query = new  BooleanQuery();
>      query.add(NumericRangeQuery.newIntRange("numId", 3, 3, true, true),
> Occur.MUST_NOT);
>      query.add(new MatchAllDocsQuery(), Occur.MUST);
> 
>      testNumericRangeSingleSearcher(query);
>      testNumericRangeMultiSearcher(query);
> 
>    }
>    catch(Exception e)
>    {
>      e.printStackTrace();
>    }
>  }
> 
> 
> 
>  public static void testNumericRangeSingleSearcher(Query query) throws
> CorruptIndexException, LockObtainFailedException, IOException  {
>     String[] ids = {"1", "2", "3", "4", "5", "6"};
> 
>    Directory directory = new RAMDirectory();
> 
>    IndexWriter writer = new IndexWriter(directory, new
> WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
> 
>    for (int i = 0; i < ids.length; i++)
>    {
>      Document doc = new Document();
>      doc.add(new Field("id", ids[i],
>                        Field.Store.YES,
>                        Field.Index.NOT_ANALYZED));
>      doc.add(new
> NumericField("numId").setIntValue(Integer.valueOf(ids[i])));
>      writer.addDocument(doc);
>    }
>    writer.close();
> 
> 
>    IndexSearcher searcher = new IndexSearcher(directory);
> 
>    TopDocs docs = searcher.search(query, 10);
>    System.out.println("SingleSearcher: testNumericRange: hitNum: " +
> docs.totalHits);
>    for(ScoreDoc doc : docs.scoreDocs)
>    {
>      System.out.println(searcher.explain(query, doc.doc));
>    }
>    searcher.close();
> 
>    directory.close();
>  }
> 
>  public static void testNumericRangeMultiSearcher(Query query) throws
> CorruptIndexException, LockObtainFailedException, IOException  {
>     String[] ids1 = {"1", "2", "3"};
>    Directory directory1 = new RAMDirectory();
>    IndexWriter writer1 = new IndexWriter(directory1, new
> WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
>    for (int i = 0; i < ids1.length; i++)
>    {
>      Document doc = new Document();
>      doc.add(new Field("id", ids1[i],
>                        Field.Store.YES,
>                        Field.Index.NOT_ANALYZED));
>      doc.add(new
> NumericField("numId").setIntValue(Integer.valueOf(ids1[i])));
>      writer1.addDocument(doc);
>    }
>    writer1.close();
> 
>    String[] ids2 = {"4", "5", "6"};
>    Directory directory2 = new RAMDirectory();
>    IndexWriter writer2 = new IndexWriter(directory2, new
> WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
>    for (int i = 0; i < ids2.length; i++)
>    {
>      Document doc = new Document();
>      doc.add(new Field("id", ids2[i],
>                        Field.Store.YES,
>                        Field.Index.NOT_ANALYZED));
>      doc.add(new
> NumericField("numId").setIntValue(Integer.valueOf(ids2[i])));
>      writer2.addDocument(doc);
>    }
>    writer2.close();
> 
>    IndexSearcher[] searchers = new IndexSearcher[2];
>    searchers[0] = new IndexSearcher(directory1);
>    searchers[1] = new IndexSearcher(directory2);
>    MultiSearcher multiSearcher = new MultiSearcher(searchers);
>    TopDocs docs = multiSearcher.search(query, 10);
>    System.out.println("MultiSearcher: testNumericRange: hitNum: " +
> docs.totalHits);
>    for(ScoreDoc doc : docs.scoreDocs)
>    {
>      System.out.println(multiSearcher.explain(query, doc.doc));
>    }
>    multiSearcher.close();
> 
>    directory1.close();
>    directory2.close();
>  }
> 
> 
> }
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat May 14 03:27:01 2011
Return-Path: <java-user-return-49734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B18CC6585
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 14 May 2011 03:27:01 +0000 (UTC)
Received: (qmail 61626 invoked by uid 500); 14 May 2011 03:26:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61376 invoked by uid 500); 14 May 2011 03:26:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61368 invoked by uid 99); 14 May 2011 03:26:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 May 2011 03:26:56 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=FROM_EXCESS_BASE64,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haichengyl@sina.com designates 202.108.7.216 as permitted sender)
Received: from [202.108.7.216] (HELO smtp3-74.sina.com.cn) (202.108.7.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 May 2011 03:26:48 +0000
Received: from irxd5-183.sinamail.sina.com.cn (unknown [10.55.5.183])
	by smtp3-74.sina.com.cn (SINAMAIL) with ESMTP id C444F1C696B
	for <java-user@lucene.apache.org>; Sat, 14 May 2011 11:26:22 +0800 (CST)
X-Originating-IP: [124.93.248.16]
Received: from unknown (HELO PC-201010190046) ([124.93.248.16])
  by irxd5-183.sinamail.sina.com.cn with ESMTP; 14 May 2011 11:26:22 +0800
Date: Sat, 14 May 2011 11:26:24 +0800
From: "=?utf-8?B?aGFpY2hlbmd5bA==?=" <haichengyl@sina.com>
To: "=?utf-8?B?amF2YS11c2Vy?=" <java-user@lucene.apache.org>
References: <BANLkTingOgmC+1aGyRqb4JBMzTD1Qu9-7g@mail.gmail.com>
Subject: =?utf-8?B?UmU6IEEgYnVnIGluIG11bHRpc2VhcmNoZXI/?=
Message-ID: <201105141126200461181@sina.com>
X-mailer: Foxmail 6, 15, 201, 23 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon616651183326_====="

--=====003_Dragon616651183326_=====
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

DQoNCg0KMjAxMS0wNS0xNCANCg0KDQoNCmhhaWNoZW5neWwgDQoNCg0KDQrlj5Hku7bkurrvvJog
aGFvIHlhbiANCuWPkemAgeaXtumXtO+8miAyMDExLTA1LTE0ICAwNDo1NjoyNyANCuaUtuS7tuS6
uu+8miBqYXZhLXVzZXIgDQrmioTpgIHvvJogWGlhb3lhbmcgR3U7IGhhbyB5YW4gDQrkuLvpopjv
vJogQSBidWcgaW4gbXVsdGlzZWFyY2hlcj8gDQogDQpoaSwgZ3V5cw0KWGlhb3lhbmcgYW5kIEkg
dG9kYXkganVzdCBmb3VuZCBhIGJ1ZyBvZiBsdWNlbmUuDQpUaGlzIGlzIGFjdHVhbGx5IGEgTXVs
dGktc2VhcmNoZXIgYnVnLiBJbiBwYXJ0aWN1bGFyLA0KSWYgd2Ugc2VhcmNoIHdpdGggTm90IG9u
IE51bWVyaWNSYW5nZSBhbmQgd2UgdXNlIE11bHRpU2VhcmNoZXIsIHdlDQp3aWxsIHdyb25nIHNl
YXJjaCByZXN1bHRzIChIb3dldmVyLCBpZiB3ZSB1c2UgSW5kZXhTZWFyY2hlciwgdGhlDQpyZXN1
bHQgaXMgY29ycmVjdCkuICBCYXNpY2FsbHkgdGhlIE5vdE9mTnVtZXJpY1JhbmdlIGRvZXMgbm90
IGhhdmUNCmltcGFjdCBvbiBtdWx0aXNlYXJjaGVyLiBXZSBzdXNwZWN0IGl0IGlzIGJlY2F1c2Ug
dGhlIGNyZWF0ZVdlaWdodCgpDQpmdW5jdGlvbiBpbiBNdWx0aVNlYXJjaGVyIGFuZCBob3BlIHNv
bWUgb2YgeW91IGd1eXMgY2FuIGhlbHAgdXMNCmNvbmZpcm0gb3IgZml4IHRoaXMgYnVnIG9mDQps
dWNlbmUuIEkgYXR0YWNoZWQgdGhlIGNvZGUgdG8gcmVwcm9kdWNlIHRoaXMgY2FzZS4gUGxlYXNl
IGNoZWNrIGl0DQpvdXQuDQpJbiB0aGUgYXR0YWNoZWQgY29kZSwgSSBoYXZlIHR3byBzZXBhcmF0
ZSBmdW5jdGlvbnMgOg0KKDEpIHRlc3ROdW1lcmljUmFuZ2VTaW5nbGVTZWFyY2hlcihRdWVyeSBx
dWVyeSkNCiAgICB3aGVyZSBJIGNyZWF0ZSA2IGRvY3VtZW50cywgd2l0aCBhIGZpZWxkIGNhbGxl
ZCAiaWQiPSAxLDIsMyw0LDUsNg0KcmVzcGVjdGl2ZWx5IC4gVGhlbiBJIHNlYXJjaCBieSB0aGUg
cXVlcnkgd2hpY2ggaXMNCiAgICArTWF0Y2hBbGxEb2NzIC1OdW1lcmljUmFuZ2UoMywzKS4gVGhl
IGV4cGVjdGVkIHJlc3VsdCB0aGVuIHNob3VsZA0KYmUgNSBoaXRzIHNpbmNlIHRoZSBkb2N1bWVu
dCAzIGlzIE1VU1RfTk9ULg0KKDIpIHRlc3ROdW1lcmljUmFuZ2VNdWx0aVNlYXJjaGVyKFF1ZXJ5
IHF1ZXJ5KQ0KICAgIHdoZXJlIGkgY3JlYXRlIDIgUmFtRGlyZWN0b3J5KCksIGVhY2ggb2Ygd2hp
Y2ggaGFzIDMgZG9jdW1lbnRzLA0KMSwyLDM7IGFuZCA0LDUsNi4gVGhlbiBJIHNlYXJjaCBieSB0
aGUgc2FtZSBxdWVyeSBhcyBhYm92ZSB1c2luZw0KbXVsdGlTZWFyY2hlci4gVGhlIGV4cGVjdGVk
IHJlc3VsdCBzaG91bGQgYWxzbyBiZSA1IGhpdHMuDQpIb3dldmVyLCBmcm9tICgxKSwgd2UgZ2V0
IDUgaGl0cyA9IGV4cGVjdGVkIHJlc3VsdHMsIHdoaWxlIGluICgyKSB3ZQ0KZ2V0IDYgaGl0cyAh
PSBleHBlY3RlZCByZXN1bHRzLg0KVGhhbmsgeW91IHZlcnkgbXVjaCENCkNvZGU6ICAoYmFzZWQg
b24gbHVjZW5lIDMuMC54KQ0KaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247DQppbXBvcnQgamF2
YS5pby5QcmludFN0cmVhbTsNCmltcG9ydCBqYXZhLnRleHQuRGVjaW1hbEZvcm1hdDsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5hbmFseXNpcy5XaGl0ZXNwYWNlQW5hbHl6ZXI7DQppbXBvcnQg
b3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQuRG9jdW1lbnQ7DQppbXBvcnQgb3JnLmFwYWNoZS5s
dWNlbmUuZG9jdW1lbnQuRmllbGQ7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuZG9jdW1lbnQu
TnVtZXJpY0ZpZWxkOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4LkNvcnJ1cHRJbmRl
eEV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsN
CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5UZXJtOw0KaW1wb3J0IG9yZy5hcGFjaGUu
bHVjZW5lLnNlYXJjaC5Cb29sZWFuUXVlcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2Vh
cmNoLkZpZWxkQ2FjaGU7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLkluZGV4U2Vh
cmNoZXI7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2VhcmNoLk1hdGNoQWxsRG9jc1F1ZXJ5
Ow0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5NdWx0aVNlYXJjaGVyOw0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5OdW1lcmljUmFuZ2VRdWVyeTsNCmltcG9ydCBvcmcu
YXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2Vh
cmNoLlNjb3JlRG9jOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5TZWFyY2hhYmxl
Ow0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLnNlYXJjaC5Tb3J0Ow0KaW1wb3J0IG9yZy5hcGFj
aGUubHVjZW5lLnNlYXJjaC5Tb3J0RmllbGQ7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuc2Vh
cmNoLlRlcm1RdWVyeTsNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guVG9wRG9jczsN
CmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guQm9vbGVhbkNsYXVzZS5PY2N1cjsNCmlt
cG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5zdG9yZS5EaXJlY3Rvcnk7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc3RvcmUuTG9ja09idGFpbkZhaWxlZEV4Y2VwdGlvbjsNCmltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5zdG9yZS5SQU1EaXJlY3Rvcnk7DQppbXBvcnQgY29tLmNvbnZlcnRsdWNlbmUu
Q29udmVydEZyb20yVG8zOw0KcHVibGljIGNsYXNzIFRlc3ROdW1lcmljUmFuZ2UNCnsNCiBwdWJs
aWMgZmluYWwgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKQ0KIHsNCiAgIHRyeQ0KICAg
ew0KICAgICBCb29sZWFuUXVlcnkgcXVlcnkgPSBuZXcgIEJvb2xlYW5RdWVyeSgpOw0KICAgICBx
dWVyeS5hZGQoTnVtZXJpY1JhbmdlUXVlcnkubmV3SW50UmFuZ2UoIm51bUlkIiwgMywgMywgdHJ1
ZSwNCnRydWUpLCBPY2N1ci5NVVNUX05PVCk7DQogICAgIHF1ZXJ5LmFkZChuZXcgTWF0Y2hBbGxE
b2NzUXVlcnkoKSwgT2NjdXIuTVVTVCk7DQogICAgIHRlc3ROdW1lcmljUmFuZ2VTaW5nbGVTZWFy
Y2hlcihxdWVyeSk7DQogICAgIHRlc3ROdW1lcmljUmFuZ2VNdWx0aVNlYXJjaGVyKHF1ZXJ5KTsN
CiAgIH0NCiAgIGNhdGNoKEV4Y2VwdGlvbiBlKQ0KICAgew0KICAgICBlLnByaW50U3RhY2tUcmFj
ZSgpOw0KICAgfQ0KIH0NCiBwdWJsaWMgc3RhdGljIHZvaWQgdGVzdE51bWVyaWNSYW5nZVNpbmds
ZVNlYXJjaGVyKFF1ZXJ5IHF1ZXJ5KQ0KdGhyb3dzIENvcnJ1cHRJbmRleEV4Y2VwdGlvbiwgTG9j
a09idGFpbkZhaWxlZEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24NCiB7DQogICAgU3RyaW5nW10gaWRz
ID0geyIxIiwgIjIiLCAiMyIsICI0IiwgIjUiLCAiNiJ9Ow0KICAgRGlyZWN0b3J5IGRpcmVjdG9y
eSA9IG5ldyBSQU1EaXJlY3RvcnkoKTsNCiAgIEluZGV4V3JpdGVyIHdyaXRlciA9IG5ldyBJbmRl
eFdyaXRlcihkaXJlY3RvcnksIG5ldw0KV2hpdGVzcGFjZUFuYWx5emVyKCksICBJbmRleFdyaXRl
ci5NYXhGaWVsZExlbmd0aC5VTkxJTUlURUQpOw0KICAgZm9yIChpbnQgaSA9IDA7IGkgPCBpZHMu
bGVuZ3RoOyBpKyspDQogICB7DQogICAgIERvY3VtZW50IGRvYyA9IG5ldyBEb2N1bWVudCgpOw0K
ICAgICBkb2MuYWRkKG5ldyBGaWVsZCgiaWQiLCBpZHNbaV0sDQogICAgICAgICAgICAgICAgICAg
ICAgIEZpZWxkLlN0b3JlLllFUywNCiAgICAgICAgICAgICAgICAgICAgICAgRmllbGQuSW5kZXgu
Tk9UX0FOQUxZWkVEKSk7DQogICAgIGRvYy5hZGQobmV3IE51bWVyaWNGaWVsZCgibnVtSWQiKS5z
ZXRJbnRWYWx1ZShJbnRlZ2VyLnZhbHVlT2YoaWRzW2ldKSkpOw0KICAgICB3cml0ZXIuYWRkRG9j
dW1lbnQoZG9jKTsNCiAgIH0NCiAgIHdyaXRlci5jbG9zZSgpOw0KICAgSW5kZXhTZWFyY2hlciBz
ZWFyY2hlciA9IG5ldyBJbmRleFNlYXJjaGVyKGRpcmVjdG9yeSk7DQogICBUb3BEb2NzIGRvY3Mg
PSBzZWFyY2hlci5zZWFyY2gocXVlcnksIDEwKTsNCiAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2lu
Z2xlU2VhcmNoZXI6IHRlc3ROdW1lcmljUmFuZ2U6IGhpdE51bTogIiArDQpkb2NzLnRvdGFsSGl0
cyk7DQogICBmb3IoU2NvcmVEb2MgZG9jIDogZG9jcy5zY29yZURvY3MpDQogICB7DQogICAgIFN5
c3RlbS5vdXQucHJpbnRsbihzZWFyY2hlci5leHBsYWluKHF1ZXJ5LCBkb2MuZG9jKSk7DQogICB9
DQogICBzZWFyY2hlci5jbG9zZSgpOw0KICAgZGlyZWN0b3J5LmNsb3NlKCk7DQogfQ0KIHB1Ymxp
YyBzdGF0aWMgdm9pZCB0ZXN0TnVtZXJpY1JhbmdlTXVsdGlTZWFyY2hlcihRdWVyeSBxdWVyeSkg
dGhyb3dzDQpDb3JydXB0SW5kZXhFeGNlcHRpb24sIExvY2tPYnRhaW5GYWlsZWRFeGNlcHRpb24s
IElPRXhjZXB0aW9uDQogew0KICAgIFN0cmluZ1tdIGlkczEgPSB7IjEiLCAiMiIsICIzIn07DQog
ICBEaXJlY3RvcnkgZGlyZWN0b3J5MSA9IG5ldyBSQU1EaXJlY3RvcnkoKTsNCiAgIEluZGV4V3Jp
dGVyIHdyaXRlcjEgPSBuZXcgSW5kZXhXcml0ZXIoZGlyZWN0b3J5MSwgbmV3DQpXaGl0ZXNwYWNl
QW5hbHl6ZXIoKSwgIEluZGV4V3JpdGVyLk1heEZpZWxkTGVuZ3RoLlVOTElNSVRFRCk7DQogICBm
b3IgKGludCBpID0gMDsgaSA8IGlkczEubGVuZ3RoOyBpKyspDQogICB7DQogICAgIERvY3VtZW50
IGRvYyA9IG5ldyBEb2N1bWVudCgpOw0KICAgICBkb2MuYWRkKG5ldyBGaWVsZCgiaWQiLCBpZHMx
W2ldLA0KICAgICAgICAgICAgICAgICAgICAgICBGaWVsZC5TdG9yZS5ZRVMsDQogICAgICAgICAg
ICAgICAgICAgICAgIEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCkpOw0KICAgICBkb2MuYWRkKG5l
dyBOdW1lcmljRmllbGQoIm51bUlkIikuc2V0SW50VmFsdWUoSW50ZWdlci52YWx1ZU9mKGlkczFb
aV0pKSk7DQogICAgIHdyaXRlcjEuYWRkRG9jdW1lbnQoZG9jKTsNCiAgIH0NCiAgIHdyaXRlcjEu
Y2xvc2UoKTsNCiAgIFN0cmluZ1tdIGlkczIgPSB7IjQiLCAiNSIsICI2In07DQogICBEaXJlY3Rv
cnkgZGlyZWN0b3J5MiA9IG5ldyBSQU1EaXJlY3RvcnkoKTsNCiAgIEluZGV4V3JpdGVyIHdyaXRl
cjIgPSBuZXcgSW5kZXhXcml0ZXIoZGlyZWN0b3J5MiwgbmV3DQpXaGl0ZXNwYWNlQW5hbHl6ZXIo
KSwgIEluZGV4V3JpdGVyLk1heEZpZWxkTGVuZ3RoLlVOTElNSVRFRCk7DQogICBmb3IgKGludCBp
ID0gMDsgaSA8IGlkczIubGVuZ3RoOyBpKyspDQogICB7DQogICAgIERvY3VtZW50IGRvYyA9IG5l
dyBEb2N1bWVudCgpOw0KICAgICBkb2MuYWRkKG5ldyBGaWVsZCgiaWQiLCBpZHMyW2ldLA0KICAg
ICAgICAgICAgICAgICAgICAgICBGaWVsZC5TdG9yZS5ZRVMsDQogICAgICAgICAgICAgICAgICAg
ICAgIEZpZWxkLkluZGV4Lk5PVF9BTkFMWVpFRCkpOw0KICAgICBkb2MuYWRkKG5ldyBOdW1lcmlj
RmllbGQoIm51bUlkIikuc2V0SW50VmFsdWUoSW50ZWdlci52YWx1ZU9mKGlkczJbaV0pKSk7DQog
ICAgIHdyaXRlcjIuYWRkRG9jdW1lbnQoZG9jKTsNCiAgIH0NCiAgIHdyaXRlcjIuY2xvc2UoKTsN
CiAgIEluZGV4U2VhcmNoZXJbXSBzZWFyY2hlcnMgPSBuZXcgSW5kZXhTZWFyY2hlclsyXTsNCiAg
IHNlYXJjaGVyc1swXSA9IG5ldyBJbmRleFNlYXJjaGVyKGRpcmVjdG9yeTEpOw0KICAgc2VhcmNo
ZXJzWzFdID0gbmV3IEluZGV4U2VhcmNoZXIoZGlyZWN0b3J5Mik7DQogICBNdWx0aVNlYXJjaGVy
IG11bHRpU2VhcmNoZXIgPSBuZXcgTXVsdGlTZWFyY2hlcihzZWFyY2hlcnMpOw0KICAgVG9wRG9j
cyBkb2NzID0gbXVsdGlTZWFyY2hlci5zZWFyY2gocXVlcnksIDEwKTsNCiAgIFN5c3RlbS5vdXQu
cHJpbnRsbigiTXVsdGlTZWFyY2hlcjogdGVzdE51bWVyaWNSYW5nZTogaGl0TnVtOiAiICsNCmRv
Y3MudG90YWxIaXRzKTsNCiAgIGZvcihTY29yZURvYyBkb2MgOiBkb2NzLnNjb3JlRG9jcykNCiAg
IHsNCiAgICAgU3lzdGVtLm91dC5wcmludGxuKG11bHRpU2VhcmNoZXIuZXhwbGFpbihxdWVyeSwg
ZG9jLmRvYykpOw0KICAgfQ0KICAgbXVsdGlTZWFyY2hlci5jbG9zZSgpOw0KICAgZGlyZWN0b3J5
MS5jbG9zZSgpOw0KICAgZGlyZWN0b3J5Mi5jbG9zZSgpOw0KIH0NCn0NCi0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0K
VG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFj
aGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBs
dWNlbmUuYXBhY2hlLm9yZw0K

--=====003_Dragon616651183326_=====--


From java-user-return-49735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat May 14 11:44:27 2011
Return-Path: <java-user-return-49735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 68B976928
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 14 May 2011 11:44:27 +0000 (UTC)
Received: (qmail 83985 invoked by uid 500); 14 May 2011 11:44:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83940 invoked by uid 500); 14 May 2011 11:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83797 invoked by uid 99); 14 May 2011 11:44:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 May 2011 11:44:23 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 14 May 2011 11:44:15 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 7E53F45FF23;
	Sat, 14 May 2011 13:43:55 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Pm2bgij1oQR5; Sat, 14 May 2011 13:43:50 +0200 (CEST)
Received: from VEGA (port-92-196-39-101.dynamic.qsc.de [92.196.39.101])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 12A2A45FE85;
	Sat, 14 May 2011 13:43:50 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
Cc: "'Xiaoyang Gu'" <xiaoyanggu@gmail.com>,
	"'hao yan'" <hyan2008@gmail.com>
References: <BANLkTingOgmC+1aGyRqb4JBMzTD1Qu9-7g@mail.gmail.com>
In-Reply-To: <BANLkTingOgmC+1aGyRqb4JBMzTD1Qu9-7g@mail.gmail.com>
Subject: RE: A bug in multisearcher?
Date: Sat, 14 May 2011 13:43:53 +0200
Message-ID: <000001cc122c$33984560$9ac8d020$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQMybCPqqM3tN1RostuWS6zttZYW6ZG/f7qw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Your boss seem to have opened also an issue in the bug tracker:
https://issues.apache.org/jira/browse/LUCENE-3096

The solution and explanation why this is won't fix is also given there.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: hao yan [mailto:hyan2008@gmail.com]
> Sent: Friday, May 13, 2011 10:56 PM
> To: java-user@lucene.apache.org
> Cc: Xiaoyang Gu; hao yan
> Subject: A bug in multisearcher?
> 
> hi, guys
> 
> Xiaoyang and I today just found a bug of lucene.
> This is actually a Multi-searcher bug. In particular,
> 
> If we search with Not on NumericRange and we use MultiSearcher, we will
> wrong search results (However, if we use IndexSearcher, the result is
> correct).  Basically the NotOfNumericRange does not have impact on
> multisearcher. We suspect it is because the createWeight() function in
> MultiSearcher and hope some of you guys can help us confirm or fix this
bug
> of lucene. I attached the code to reproduce this case. Please check it
out.
> 
> In the attached code, I have two separate functions :
> 
> (1) testNumericRangeSingleSearcher(Query query)
>     where I create 6 documents, with a field called "id"= 1,2,3,4,5,6
> respectively . Then I search by the query which is
>     +MatchAllDocs -NumericRange(3,3). The expected result then should be 5
> hits since the document 3 is MUST_NOT.
> 
> (2) testNumericRangeMultiSearcher(Query query)
>     where i create 2 RamDirectory(), each of which has 3 documents, 1,2,3;
and
> 4,5,6. Then I search by the same query as above using multiSearcher. The
> expected result should also be 5 hits.
> 
> However, from (1), we get 5 hits = expected results, while in (2) we get 6
hits
> != expected results.
> 
> 
> Thank you very much!
> 
> 
> Code:  (based on lucene 3.0.x)
> 
> 
> 
> import java.io.IOException;
> import java.io.PrintStream;
> import java.text.DecimalFormat;
> 
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field; import
> org.apache.lucene.document.NumericField;
> import org.apache.lucene.index.CorruptIndexException;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.BooleanQuery;
> import org.apache.lucene.search.FieldCache;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.search.MatchAllDocsQuery;
> import org.apache.lucene.search.MultiSearcher;
> import org.apache.lucene.search.NumericRangeQuery;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.ScoreDoc;
> import org.apache.lucene.search.Searchable;
> import org.apache.lucene.search.Sort;
> import org.apache.lucene.search.SortField;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.search.TopDocs; import
> org.apache.lucene.search.BooleanClause.Occur;
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.LockObtainFailedException;
> import org.apache.lucene.store.RAMDirectory;
> 
> import com.convertlucene.ConvertFrom2To3;
> 
> public class TestNumericRange
> {
>  public final static void main(String[] args)  {
>    try
>    {
>      BooleanQuery query = new  BooleanQuery();
>      query.add(NumericRangeQuery.newIntRange("numId", 3, 3, true, true),
> Occur.MUST_NOT);
>      query.add(new MatchAllDocsQuery(), Occur.MUST);
> 
>      testNumericRangeSingleSearcher(query);
>      testNumericRangeMultiSearcher(query);
> 
>    }
>    catch(Exception e)
>    {
>      e.printStackTrace();
>    }
>  }
> 
> 
> 
>  public static void testNumericRangeSingleSearcher(Query query) throws
> CorruptIndexException, LockObtainFailedException, IOException  {
>     String[] ids = {"1", "2", "3", "4", "5", "6"};
> 
>    Directory directory = new RAMDirectory();
> 
>    IndexWriter writer = new IndexWriter(directory, new
> WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
> 
>    for (int i = 0; i < ids.length; i++)
>    {
>      Document doc = new Document();
>      doc.add(new Field("id", ids[i],
>                        Field.Store.YES,
>                        Field.Index.NOT_ANALYZED));
>      doc.add(new
> NumericField("numId").setIntValue(Integer.valueOf(ids[i])));
>      writer.addDocument(doc);
>    }
>    writer.close();
> 
> 
>    IndexSearcher searcher = new IndexSearcher(directory);
> 
>    TopDocs docs = searcher.search(query, 10);
>    System.out.println("SingleSearcher: testNumericRange: hitNum: " +
> docs.totalHits);
>    for(ScoreDoc doc : docs.scoreDocs)
>    {
>      System.out.println(searcher.explain(query, doc.doc));
>    }
>    searcher.close();
> 
>    directory.close();
>  }
> 
>  public static void testNumericRangeMultiSearcher(Query query) throws
> CorruptIndexException, LockObtainFailedException, IOException  {
>     String[] ids1 = {"1", "2", "3"};
>    Directory directory1 = new RAMDirectory();
>    IndexWriter writer1 = new IndexWriter(directory1, new
> WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
>    for (int i = 0; i < ids1.length; i++)
>    {
>      Document doc = new Document();
>      doc.add(new Field("id", ids1[i],
>                        Field.Store.YES,
>                        Field.Index.NOT_ANALYZED));
>      doc.add(new
> NumericField("numId").setIntValue(Integer.valueOf(ids1[i])));
>      writer1.addDocument(doc);
>    }
>    writer1.close();
> 
>    String[] ids2 = {"4", "5", "6"};
>    Directory directory2 = new RAMDirectory();
>    IndexWriter writer2 = new IndexWriter(directory2, new
> WhitespaceAnalyzer(),  IndexWriter.MaxFieldLength.UNLIMITED);
>    for (int i = 0; i < ids2.length; i++)
>    {
>      Document doc = new Document();
>      doc.add(new Field("id", ids2[i],
>                        Field.Store.YES,
>                        Field.Index.NOT_ANALYZED));
>      doc.add(new
> NumericField("numId").setIntValue(Integer.valueOf(ids2[i])));
>      writer2.addDocument(doc);
>    }
>    writer2.close();
> 
>    IndexSearcher[] searchers = new IndexSearcher[2];
>    searchers[0] = new IndexSearcher(directory1);
>    searchers[1] = new IndexSearcher(directory2);
>    MultiSearcher multiSearcher = new MultiSearcher(searchers);
>    TopDocs docs = multiSearcher.search(query, 10);
>    System.out.println("MultiSearcher: testNumericRange: hitNum: " +
> docs.totalHits);
>    for(ScoreDoc doc : docs.scoreDocs)
>    {
>      System.out.println(multiSearcher.explain(query, doc.doc));
>    }
>    multiSearcher.close();
> 
>    directory1.close();
>    directory2.close();
>  }
> 
> 
> }
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 15 08:29:28 2011
Return-Path: <java-user-return-49736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1613845AC
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 15 May 2011 08:29:28 +0000 (UTC)
Received: (qmail 65534 invoked by uid 500); 15 May 2011 08:29:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65397 invoked by uid 500); 15 May 2011 08:29:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65389 invoked by uid 99); 15 May 2011 08:29:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 08:29:19 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.179 as permitted sender)
Received: from [209.85.212.179] (HELO mail-px0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 08:29:10 +0000
Received: by pxi2 with SMTP id 2so3116984pxi.24
        for <java-user@lucene.apache.org>; Sun, 15 May 2011 01:28:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:subject:date:message-id:mime-version
         :content-type:x-mailer:thread-index:content-language;
        bh=oSH2WfCy6TLcm3HQk30hXw9rIVUcmQoMpq4SNvuXb1U=;
        b=pIeTOMbvitUFhixOGeRPhKZPVEdrNYI0DMyEdJdRTRDSrrYskm7x1cISbeJ7Tp4YTy
         L7yW/pOc3NVab66RnjIQFw3BMED5GYz0oYaKsoGApul7v/FwuId8FHmQgfFehqdhSz3T
         y7Shdm2mvX6MqZaFqhSKvkvlcJ+WPFH+j53ws=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type:x-mailer
         :thread-index:content-language;
        b=gaxGQ3RjSoFLkbeCK5YHSpi04JjnE30XTNqFQ49bMnisqgEKhkZjuetx/VjtN+2VCa
         z7fabnKOoOflcCrD6K/Geni5+reDwgJIdCqTR/5wAY6PuAEehXwtiBoDB0xroZ26DunG
         Uhi9hAnIMOWnuSBol88Rfu68Fybv2d2OvNf3s=
Received: by 10.68.65.161 with SMTP id y1mr4983474pbs.334.1305448128957;
        Sun, 15 May 2011 01:28:48 -0700 (PDT)
Received: from zcdyPC ([125.123.86.220])
        by mx.google.com with ESMTPS id f1sm2520143pbm.93.2011.05.15.01.28.46
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 15 May 2011 01:28:48 -0700 (PDT)
From: "cheng" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
Subject: Lucene 3.3 in Eclipse
Date: Sun, 15 May 2011 16:28:42 +0800
Message-ID: <004901cc12da$1cad1f20$56075d60$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_004A_01CC131D.2AD05F20"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwS2hkXDwR/DS0LR5GIGNNSUx7hMg==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_004A_01CC131D.2AD05F20
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi, I created a java project for Lucene 3.3 in Eclipse, and found that in
the DbHandleExtractor.java file, the package of com.sleepycat.db.internal.Db
is not resolved. How can I overcome this?

 

I have tried to download .jar for this, but don't know which and where to
download.

 

Thanks


------=_NextPart_000_004A_01CC131D.2AD05F20--


From java-user-return-49737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 15 14:08:09 2011
Return-Path: <java-user-return-49737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5795142D3
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 15 May 2011 14:08:09 +0000 (UTC)
Received: (qmail 17951 invoked by uid 500); 15 May 2011 14:08:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17892 invoked by uid 500); 15 May 2011 14:08:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17884 invoked by uid 99); 15 May 2011 14:08:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 14:08:06 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 14:07:57 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p4FE7ZcK022692
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Sun, 15 May 2011 10:07:36 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Sun, 15 May 2011
 10:07:35 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 15 May 2011 10:07:33 -0400
Subject: RE: Lucene 3.3 in Eclipse
Thread-Topic: Lucene 3.3 in Eclipse
Thread-Index: AcwS2hkXDwR/DS0LR5GIGNNSUx7hMgALrqFQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu>
References: <004901cc12da$1cad1f20$56075d60$@com>
In-Reply-To: <004901cc12da$1cad1f20$56075d60$@com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-05-15_04:2011-05-13,2011-05-15,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgQ2hlbmcsDQoNCkx1Y2VuZSAzLjMgZG9lcyBub3QgZXhpc3QgLSBkbyB5b3UgbWVhbiBicmFu
Y2hlcy9icmFuY2hfM3ggPw0KDQpGWUksIGFzIG9mIEx1Y2VuZSAzLjEsIHRoZXJlIGlzIGFuIEFu
dCB0YXJnZXQgeW91IGNhbiB1c2UgdG8gc2V0dXAgYW4gRWNsaXBzZSBwcm9qZWN0IGZvciAgTHVj
ZW5lL1NvbHIgLSBydW4gdGhpcyBmcm9tIHRoZSB0b3AgbGV2ZWwgZGlyZWN0b3J5IG9mIGEgZnVs
bCBzb3VyY2UgdHJlZSAoaW5jbHVkaW5nIGRldi10b29scy8gZGlyZWN0b3J5KSBjaGVja2VkIG91
dCBmcm9tIFN1YnZlcnNpb246IA0KDQogICBhbnQgZWNsaXBzZQ0KDQpNb3JlIGluZm8gaGVyZToN
Cg0KICAgPGh0dHA6Ly93aWtpLmFwYWNoZS5vcmcvc29sci9Ib3dUb0NvbnRyaWJ1dGUjRGV2ZWxv
cG1lbnRfRW52aXJvbm1lbnRfVGlwcz4NCg0KU3RldmUNCg0KPiAtLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KPiBGcm9tOiBjaGVuZyBbbWFpbHRvOnpob3VjaGVuZzIwMDhAZ21haWwuY29tXQ0K
PiBTZW50OiBTdW5kYXksIE1heSAxNSwgMjAxMSA0OjI5IEFNDQo+IFRvOiBqYXZhLXVzZXJAbHVj
ZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogTHVjZW5lIDMuMyBpbiBFY2xpcHNlDQo+IA0KPiBI
aSwgSSBjcmVhdGVkIGEgamF2YSBwcm9qZWN0IGZvciBMdWNlbmUgMy4zIGluIEVjbGlwc2UsIGFu
ZCBmb3VuZCB0aGF0IGluDQo+IHRoZSBEYkhhbmRsZUV4dHJhY3Rvci5qYXZhIGZpbGUsIHRoZSBw
YWNrYWdlIG9mDQo+IGNvbS5zbGVlcHljYXQuZGIuaW50ZXJuYWwuRGINCj4gaXMgbm90IHJlc29s
dmVkLiBIb3cgY2FuIEkgb3ZlcmNvbWUgdGhpcz8NCj4gDQo+IA0KPiANCj4gSSBoYXZlIHRyaWVk
IHRvIGRvd25sb2FkIC5qYXIgZm9yIHRoaXMsIGJ1dCBkb24ndCBrbm93IHdoaWNoIGFuZCB3aGVy
ZSB0bw0KPiBkb3dubG9hZC4NCj4gDQo+IA0KPiANCj4gVGhhbmtzDQoNCg==


From java-user-return-49738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 15 14:48:25 2011
Return-Path: <java-user-return-49738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8B7D3495A
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 15 May 2011 14:48:25 +0000 (UTC)
Received: (qmail 46403 invoked by uid 500); 15 May 2011 14:48:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46308 invoked by uid 500); 15 May 2011 14:48:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46300 invoked by uid 99); 15 May 2011 14:48:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 14:48:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 14:48:15 +0000
Received: by pve37 with SMTP id 37so2600703pve.35
        for <java-user@lucene.apache.org>; Sun, 15 May 2011 07:47:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:cc:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=Sxn2mj59d9Ev9vFK22I1Hlrt+wpu4C+ofLVBUCi32xM=;
        b=Q5Wpsn4Z8Fod8KicOBaQjwAC7O17JJprwtN637A72FEt+tlmzUMXUpHn2pxshHpw8+
         E3kFiQUUS1mDuVScW0H2gKwOsEhzzmSIqwMhXGSK59pEwGJ3O41dYwohExV5BiZHnUf6
         C1QlQ6m0EPkG31s8CzQ0biShFE48mQ83ZTAPU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:cc:references:in-reply-to:subject:date:message-id
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :thread-index:content-language;
        b=iI9YqFHpX8FF/A2k0Kj+QpEpkIQUjXCiW2daHKwhUBcICpt04MHlt+Dn03k/LwsaNN
         P657WptIt5VLiVFoos2RDWF+G2H+UlEXKP0Cfwbw7SmtDL6c0tAPFZkLHHq0fUJyMf5a
         jlkjwtfPyXIpRUuxRSr4VnKwpXEVUts6cb6Kc=
Received: by 10.142.147.13 with SMTP id u13mr2237502wfd.435.1305470875056;
        Sun, 15 May 2011 07:47:55 -0700 (PDT)
Received: from zcdyPC ([125.123.86.220])
        by mx.google.com with ESMTPS id 25sm3863318wfb.10.2011.05.15.07.47.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 15 May 2011 07:47:53 -0700 (PDT)
From: "cheng" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
Cc: <sarowe@syr.edu>
References: <004901cc12da$1cad1f20$56075d60$@com> <2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu>
Subject: RE: Lucene 3.3 in Eclipse
Date: Sun, 15 May 2011 22:47:40 +0800
Message-ID: <007401cc130f$11a428f0$34ec7ad0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwS2hkXDwR/DS0LR5GIGNNSUx7hMgALrqFQAADyKhA=
Content-Language: en-us

Steve, thanks for correction. You are right. The version is 3.0.3 =
released last Oct.

I did place an ant jar in Eclipse, and it does the job to remove some =
compiling errors. However, it seems that I do need some jar file to =
handle the DbHandleExtractor.java and the org.apache.lucene.store.db =
package, which are under contrib/db/bdb/src/java folder.

Do you know when I can find the proper jar file?

Cheng

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: Sunday, May 15, 2011 10:08 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene 3.3 in Eclipse

Hi Cheng,

Lucene 3.3 does not exist - do you mean branches/branch_3x ?

FYI, as of Lucene 3.1, there is an Ant target you can use to setup an =
Eclipse project for  Lucene/Solr - run this from the top level directory =
of a full source tree (including dev-tools/ directory) checked out from =
Subversion:=20

   ant eclipse

More info here:

   =
<http://wiki.apache.org/solr/HowToContribute#Development_Environment_Tips=
>

Steve

> -----Original Message-----
> From: cheng [mailto:zhoucheng2008@gmail.com]
> Sent: Sunday, May 15, 2011 4:29 AM
> To: java-user@lucene.apache.org
> Subject: Lucene 3.3 in Eclipse
>=20
> Hi, I created a java project for Lucene 3.3 in Eclipse, and found that =
in
> the DbHandleExtractor.java file, the package of
> com.sleepycat.db.internal.Db
> is not resolved. How can I overcome this?
>=20
>=20
>=20
> I have tried to download .jar for this, but don't know which and where =
to
> download.
>=20
>=20
>=20
> Thanks



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 15 15:11:13 2011
Return-Path: <java-user-return-49739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0BDC1466E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 15 May 2011 15:11:13 +0000 (UTC)
Received: (qmail 78997 invoked by uid 500); 15 May 2011 15:11:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78956 invoked by uid 500); 15 May 2011 15:11:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78947 invoked by uid 99); 15 May 2011 15:11:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 15:11:10 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 15:11:04 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 89CB745FD00
	for <java-user@lucene.apache.org>; Sun, 15 May 2011 17:10:43 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id EKL8xQhT5+IV for <java-user@lucene.apache.org>;
	Sun, 15 May 2011 17:10:38 +0200 (CEST)
Received: from VEGA (port-92-196-239-33.dynamic.qsc.de [92.196.239.33])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 578E445FCF6
	for <java-user@lucene.apache.org>; Sun, 15 May 2011 17:10:38 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <004901cc12da$1cad1f20$56075d60$@com> <2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu> <007401cc130f$11a428f0$34ec7ad0$@com>
In-Reply-To: <007401cc130f$11a428f0$34ec7ad0$@com>
Subject: RE: Lucene 3.3 in Eclipse
Date: Sun, 15 May 2011 17:10:42 +0200
Message-ID: <000801cc1312$42a4afd0$c7ee0f70$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQIapgwP0TWXXq6rVl7BUtGARXNAcgEufRfbAaPjI9GT2kUeEA==
Content-Language: de

Hi,

Those JARs are not shipped with Lucene (different license).

They are downloaded by the ANT build, so easiest to run the standard ANT =
build at least one time.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de

> -----Original Message-----
> From: cheng [mailto:zhoucheng2008@gmail.com]
> Sent: Sunday, May 15, 2011 4:48 PM
> To: java-user@lucene.apache.org
> Cc: sarowe@syr.edu
> Subject: RE: Lucene 3.3 in Eclipse
>=20
> Steve, thanks for correction. You are right. The version is 3.0.3 =
released last
> Oct.
>=20
> I did place an ant jar in Eclipse, and it does the job to remove some =
compiling
> errors. However, it seems that I do need some jar file to handle the
> DbHandleExtractor.java and the org.apache.lucene.store.db package, =
which
> are under contrib/db/bdb/src/java folder.
>=20
> Do you know when I can find the proper jar file?
>=20
> Cheng
>=20
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: Sunday, May 15, 2011 10:08 PM
> To: java-user@lucene.apache.org
> Subject: RE: Lucene 3.3 in Eclipse
>=20
> Hi Cheng,
>=20
> Lucene 3.3 does not exist - do you mean branches/branch_3x ?
>=20
> FYI, as of Lucene 3.1, there is an Ant target you can use to setup an =
Eclipse
> project for  Lucene/Solr - run this from the top level directory of a =
full source
> tree (including dev-tools/ directory) checked out from Subversion:
>=20
>    ant eclipse
>=20
> More info here:
>=20
>=20
> <http://wiki.apache.org/solr/HowToContribute#Development_Environment
> _Tips>
>=20
> Steve
>=20
> > -----Original Message-----
> > From: cheng [mailto:zhoucheng2008@gmail.com]
> > Sent: Sunday, May 15, 2011 4:29 AM
> > To: java-user@lucene.apache.org
> > Subject: Lucene 3.3 in Eclipse
> >
> > Hi, I created a java project for Lucene 3.3 in Eclipse, and found =
that
> > in the DbHandleExtractor.java file, the package of
> > com.sleepycat.db.internal.Db is not resolved. How can I overcome =
this?
> >
> >
> >
> > I have tried to download .jar for this, but don't know which and =
where
> > to download.
> >
> >
> >
> > Thanks
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 15 15:15:51 2011
Return-Path: <java-user-return-49740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B220E49B2
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 15 May 2011 15:15:51 +0000 (UTC)
Received: (qmail 87614 invoked by uid 500); 15 May 2011 15:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87577 invoked by uid 500); 15 May 2011 15:15:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87569 invoked by uid 99); 15 May 2011 15:15:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 15:15:49 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 15:15:41 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p4FFFJHY003253
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Sun, 15 May 2011 11:15:20 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Sun, 15 May 2011
 11:15:19 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 15 May 2011 11:15:18 -0400
Subject: RE: Lucene 3.3 in Eclipse
Thread-Topic: Lucene 3.3 in Eclipse
Thread-Index: AcwS2hkXDwR/DS0LR5GIGNNSUx7hMgALrqFQAADyKhAAAM1FUA==
Message-ID: <2D127F11DC79714E9B6A43AC9458147FB3CE74B7@suex07-mbx-03.ad.syr.edu>
References: <004901cc12da$1cad1f20$56075d60$@com>
 <2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu>
 <007401cc130f$11a428f0$34ec7ad0$@com>
In-Reply-To: <007401cc130f$11a428f0$34ec7ad0$@com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.2.15,1.0.148,0.0.0000
 definitions=2011-05-15_04:2011-05-13,2011-05-15,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

KFJlc2VuZGluZyB0byB0aGUgbGlzdCAtIGRpZG4ndCBub3RpY2UgdGhhdCBteSByZXBseSB3ZW50
IHRvIENoZW5nIGRpcmVjdGx5KQ0KDQpUaGVyZSBpcyBhbiBBbnQgdGFyZ2V0ICJnZXQtZGItamFy
IiB0aGF0IGNhbiBkbyB0aGUgZG93bmxvYWRpbmcgZm9yIHlvdSAtIHlvdSBjYW4gc2VlIHRoZSBV
UkwgaXQgdXNlcyBoZXJlOg0KDQo8aHR0cDovL3N2bi5hcGFjaGUub3JnL3ZpZXd2Yy9sdWNlbmUv
amF2YS90YWdzL2x1Y2VuZV8zXzBfMy9jb250cmliL2RiL2JkYi9idWlsZC54bWw/dmlldz1tYXJr
dXAjbDQ5Pg0KDQpUaGVyZSBpcyBhbm90aGVyIEFudCB0YXJnZXQgImdldC1qZS1qYXIiIHRoYXQg
ZG9lcyB0aGUgc2FtZSB0aGluZyBmb3IgdGhlIGNvbnRyaWIvZGIvYmRiLWplLyBtb2R1bGU6DQoN
CjxodHRwOi8vc3ZuLmFwYWNoZS5vcmcvdmlld3ZjL2x1Y2VuZS9qYXZhL3RhZ3MvbHVjZW5lXzNf
MF8zL2NvbnRyaWIvZGIvYmRiLWplL2J1aWxkLnhtbD92aWV3PW1hcmt1cCNsNDk+DQoNClN0ZXZl
DQoNCj4gLS0tLS1PcmlnaW5hbCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogY2hlbmcgW21haWx0bzp6
aG91Y2hlbmcyMDA4QGdtYWlsLmNvbV0NCj4gU2VudDogU3VuZGF5LCBNYXkgMTUsIDIwMTEgMTA6
NDggQU0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBDYzogU3RldmVuIEEg
Um93ZQ0KPiBTdWJqZWN0OiBSRTogTHVjZW5lIDMuMyBpbiBFY2xpcHNlDQo+IA0KPiBTdGV2ZSwg
dGhhbmtzIGZvciBjb3JyZWN0aW9uLiBZb3UgYXJlIHJpZ2h0LiBUaGUgdmVyc2lvbiBpcyAzLjAu
Mw0KPiByZWxlYXNlZCBsYXN0IE9jdC4NCj4gDQo+IEkgZGlkIHBsYWNlIGFuIGFudCBqYXIgaW4g
RWNsaXBzZSwgYW5kIGl0IGRvZXMgdGhlIGpvYiB0byByZW1vdmUgc29tZQ0KPiBjb21waWxpbmcg
ZXJyb3JzLiBIb3dldmVyLCBpdCBzZWVtcyB0aGF0IEkgZG8gbmVlZCBzb21lIGphciBmaWxlIHRv
DQo+IGhhbmRsZSB0aGUgRGJIYW5kbGVFeHRyYWN0b3IuamF2YSBhbmQgdGhlIG9yZy5hcGFjaGUu
bHVjZW5lLnN0b3JlLmRiDQo+IHBhY2thZ2UsIHdoaWNoIGFyZSB1bmRlciBjb250cmliL2RiL2Jk
Yi9zcmMvamF2YSBmb2xkZXIuDQo+IA0KPiBEbyB5b3Uga25vdyB3aGVuIEkgY2FuIGZpbmQgdGhl
IHByb3BlciBqYXIgZmlsZT8NCj4gDQo+IENoZW5nDQo+IA0KPiAtLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KPiBGcm9tOiBTdGV2ZW4gQSBSb3dlIFttYWlsdG86c2Fyb3dlQHN5ci5lZHVdDQo+
IFNlbnQ6IFN1bmRheSwgTWF5IDE1LCAyMDExIDEwOjA4IFBNDQo+IFRvOiBqYXZhLXVzZXJAbHVj
ZW5lLmFwYWNoZS5vcmcNCj4gU3ViamVjdDogUkU6IEx1Y2VuZSAzLjMgaW4gRWNsaXBzZQ0KPiAN
Cj4gSGkgQ2hlbmcsDQo+IA0KPiBMdWNlbmUgMy4zIGRvZXMgbm90IGV4aXN0IC0gZG8geW91IG1l
YW4gYnJhbmNoZXMvYnJhbmNoXzN4ID8NCj4gDQo+IEZZSSwgYXMgb2YgTHVjZW5lIDMuMSwgdGhl
cmUgaXMgYW4gQW50IHRhcmdldCB5b3UgY2FuIHVzZSB0byBzZXR1cCBhbg0KPiBFY2xpcHNlIHBy
b2plY3QgZm9yICBMdWNlbmUvU29sciAtIHJ1biB0aGlzIGZyb20gdGhlIHRvcCBsZXZlbCBkaXJl
Y3RvcnkNCj4gb2YgYSBmdWxsIHNvdXJjZSB0cmVlIChpbmNsdWRpbmcgZGV2LXRvb2xzLyBkaXJl
Y3RvcnkpIGNoZWNrZWQgb3V0IGZyb20NCj4gU3VidmVyc2lvbjoNCj4gDQo+ICAgIGFudCBlY2xp
cHNlDQo+IA0KPiBNb3JlIGluZm8gaGVyZToNCj4gDQo+IA0KPiA8aHR0cDovL3dpa2kuYXBhY2hl
Lm9yZy9zb2xyL0hvd1RvQ29udHJpYnV0ZSNEZXZlbG9wbWVudF9FbnZpcm9ubWVudF9UaXBzDQo+
ID4NCj4gDQo+IFN0ZXZlDQo+IA0KPiA+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+ID4g
RnJvbTogY2hlbmcgW21haWx0bzp6aG91Y2hlbmcyMDA4QGdtYWlsLmNvbV0NCj4gPiBTZW50OiBT
dW5kYXksIE1heSAxNSwgMjAxMSA0OjI5IEFNDQo+ID4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBh
Y2hlLm9yZw0KPiA+IFN1YmplY3Q6IEx1Y2VuZSAzLjMgaW4gRWNsaXBzZQ0KPiA+DQo+ID4gSGks
IEkgY3JlYXRlZCBhIGphdmEgcHJvamVjdCBmb3IgTHVjZW5lIDMuMyBpbiBFY2xpcHNlLCBhbmQg
Zm91bmQgdGhhdA0KPiBpbg0KPiA+IHRoZSBEYkhhbmRsZUV4dHJhY3Rvci5qYXZhIGZpbGUsIHRo
ZSBwYWNrYWdlIG9mDQo+ID4gY29tLnNsZWVweWNhdC5kYi5pbnRlcm5hbC5EYg0KPiA+IGlzIG5v
dCByZXNvbHZlZC4gSG93IGNhbiBJIG92ZXJjb21lIHRoaXM/DQo+ID4NCj4gPg0KPiA+DQo+ID4g
SSBoYXZlIHRyaWVkIHRvIGRvd25sb2FkIC5qYXIgZm9yIHRoaXMsIGJ1dCBkb24ndCBrbm93IHdo
aWNoIGFuZCB3aGVyZQ0KPiB0bw0KPiA+IGRvd25sb2FkLg0KPiA+DQo+ID4NCj4gPg0KPiA+IFRo
YW5rcw0KPiANCg0K


From java-user-return-49741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 15 20:27:12 2011
Return-Path: <java-user-return-49741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD3BB4486
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 15 May 2011 20:27:12 +0000 (UTC)
Received: (qmail 48929 invoked by uid 500); 15 May 2011 20:27:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48888 invoked by uid 500); 15 May 2011 20:27:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 78162 invoked by uid 99); 14 May 2011 13:29:31 -0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_SOFTFAIL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of ajdabholkar@hotmail.com does not designate 216.139.236.26 as permitted sender)
Date: Sat, 14 May 2011 06:29:05 -0700 (PDT)
From: abhayd <ajdabholkar@hotmail.com>
To: java-user@lucene.apache.org
Message-ID: <1305379745166-2937762.post@n3.nabble.com>
In-Reply-To: <4D6D8E6A.10004@eolya.fr>
References: <4D6D8E6A.10004@eolya.fr>
Subject: Re: [ANNOUNCE] Web Crawler
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

hi Dominique,

I am looking for a crawler to feed solr index. After looking at various
posts i have settled down on two
Nutch and crawl anywhere.

I dont see any activities on Nutch wiki so wondering if its not being
developed anymore. But most forums say Nutch is standard for solr.

Crawl Anywhere looks solid. Any way for users like me to decide which one we
should go for Nutch or Crawl Anywehre?


Concern with crawl anywhere is it supports solr 1.3 index not the latest
version

Any help on the is really appreciated 

--
View this message in context: http://lucene.472066.n3.nabble.com/ANNOUNCE-Web-Crawler-tp2607833p2937762.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 15 20:55:57 2011
Return-Path: <java-user-return-49742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9BFD6415C
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 15 May 2011 20:55:57 +0000 (UTC)
Received: (qmail 74037 invoked by uid 500); 15 May 2011 20:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73991 invoked by uid 500); 15 May 2011 20:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73983 invoked by uid 99); 15 May 2011 20:55:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 20:55:55 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of karl.wright@nokia.com designates 147.243.1.48 as permitted sender)
Received: from [147.243.1.48] (HELO mgw-sa02.nokia.com) (147.243.1.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 15 May 2011 20:55:47 +0000
Received: from vaebh101.NOE.Nokia.com (vaebh101.europe.nokia.com [10.160.244.22])
	by mgw-sa02.nokia.com (Switch-3.4.4/Switch-3.4.3) with ESMTP id p4FKtPSY024642
	for <java-user@lucene.apache.org>; Sun, 15 May 2011 23:55:25 +0300
Received: from smtp.mgd.nokia.com ([65.54.30.5]) by vaebh101.NOE.Nokia.com over TLS secured channel with Microsoft SMTPSVC(6.0.3790.4675);
	 Sun, 15 May 2011 23:55:20 +0300
Received: from 008-AM1MMR1-006.mgdnok.nokia.com (65.54.30.61) by
 NOK-am1MHUB-01.mgdnok.nokia.com (65.54.30.5) with Microsoft SMTP Server (TLS)
 id 8.2.255.0; Sun, 15 May 2011 22:55:20 +0200
Received: from 008-AM1MPN1-037.mgdnok.nokia.com ([169.254.7.78]) by
 008-AM1MMR1-006.mgdnok.nokia.com ([65.54.30.61]) with mapi id 14.01.0289.008;
 Sun, 15 May 2011 22:55:20 +0200
From: <karl.wright@nokia.com>
To: <java-user@lucene.apache.org>
Subject: RE: [ANNOUNCE] Web Crawler
Thread-Topic: [ANNOUNCE] Web Crawler
Thread-Index: AQHMEz56cE/6yB0szky2z7ckVQvGApSOXkFg
Date: Sun, 15 May 2011 20:55:19 +0000
Message-ID: <0C2ADA45C80B224FAFA38F5DEE16A16E0B5BA1@008-AM1MPN1-037.mgdnok.nokia.com>
References: <4D6D8E6A.10004@eolya.fr>
 <1305379745166-2937762.post@n3.nabble.com>
In-Reply-To: <1305379745166-2937762.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [173.76.203.71]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginalArrivalTime: 15 May 2011 20:55:20.0722 (UTC) FILETIME=[67355720:01CC1342]
X-Nokia-AV: Clean

You might want to look at ManifoldCF also.

Karl

-----Original Message-----
From: ext abhayd [mailto:ajdabholkar@hotmail.com]=20
Sent: Saturday, May 14, 2011 9:29 AM
To: java-user@lucene.apache.org
Subject: Re: [ANNOUNCE] Web Crawler

hi Dominique,

I am looking for a crawler to feed solr index. After looking at various
posts i have settled down on two
Nutch and crawl anywhere.

I dont see any activities on Nutch wiki so wondering if its not being
developed anymore. But most forums say Nutch is standard for solr.

Crawl Anywhere looks solid. Any way for users like me to decide which one w=
e
should go for Nutch or Crawl Anywehre?


Concern with crawl anywhere is it supports solr 1.3 index not the latest
version

Any help on the is really appreciated=20

--
View this message in context: http://lucene.472066.n3.nabble.com/ANNOUNCE-W=
eb-Crawler-tp2607833p2937762.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 08:25:10 2011
Return-Path: <java-user-return-49743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4ADC469B4
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 08:25:10 +0000 (UTC)
Received: (qmail 94530 invoked by uid 500); 16 May 2011 08:25:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94464 invoked by uid 500); 16 May 2011 08:25:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94456 invoked by uid 99); 16 May 2011 08:25:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 08:25:07 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.179 as permitted sender)
Received: from [209.85.212.179] (HELO mail-px0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 08:24:57 +0000
Received: by pxi2 with SMTP id 2so3639672pxi.24
        for <java-user@lucene.apache.org>; Mon, 16 May 2011 01:24:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:cc:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=Yp+7AikpDmBTqipcyq9cVdPmVQBRAZBC6HL0hhWmGaQ=;
        b=DeEhBgU84iyt5rJGq+gamU9sJRgNBCGbwz9ouXUD8OP8HEBvrnEHCGKtkybc8b4AqJ
         i2pX+aqJCTHOqFayz9NhCFIV91F7uHkWj3tnHDiVuuH63KjCn+owBBM1SQv35qhNb+GI
         wAlWFS0hCgycFubf1Io2qaexSlczdMIdrCAOM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:cc:references:in-reply-to:subject:date:message-id
         :mime-version:content-type:content-transfer-encoding:x-mailer
         :thread-index:content-language;
        b=VV7Up/Z6/TLLFitEk48OZ2YWxq0h5/wBJE9HP2VtmEUmDnWFBOKizvKF4hDqtO9UJb
         IK/ioS7FgTLBexGVZlz2IvW13QFv47z4WQ8PkrOIJMAA5nxqstf8p2oOTkJMrYE6a0Ou
         rMVozJe/Qfo3i9DN/Y8ECUIZ5HutUMgeHds8A=
Received: by 10.142.107.12 with SMTP id f12mr2633947wfc.226.1305534276014;
        Mon, 16 May 2011 01:24:36 -0700 (PDT)
Received: from zcdyPC ([125.123.86.220])
        by mx.google.com with ESMTPS id p40sm4500827wfc.7.2011.05.16.01.24.32
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 16 May 2011 01:24:34 -0700 (PDT)
From: "cheng" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
Cc: <sarowe@syr.edu>
References: <004901cc12da$1cad1f20$56075d60$@com> <2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu> <007401cc130f$11a428f0$34ec7ad0$@com> <2D127F11DC79714E9B6A43AC9458147FB3CE74B7@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE74B7@suex07-mbx-03.ad.syr.edu>
Subject: RE: Lucene 3.3 in Eclipse
Date: Mon, 16 May 2011 16:24:27 +0800
Message-ID: <001601cc13a2$af522e10$0df68a30$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwS2hkXDwR/DS0LR5GIGNNSUx7hMgALrqFQAADyKhAAAM1FUAAj/JMA
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Steve, the two links are really helpful. I still have a few questions:

1) The import statement, import =
org.apache.lucene.queryParser.standard.parser.StandardSyntaxParser, =
doesn't work because the StandardSyntaxParser.java is not available.

Do you know where to download it?

2) The CharStream class is not available. Please see this, "public final =
class FastCharStream implements CharStream"

What is it? Do you know where to download it?

3) The QueryParser class can't be resolve. Please see this, SrndQuery lq =
=3D QueryParser.parse(queryText);

Thanks,
Cheng




-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: Sunday, May 15, 2011 11:15 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene 3.3 in Eclipse

(Resending to the list - didn't notice that my reply went to Cheng =
directly)

There is an Ant target "get-db-jar" that can do the downloading for you =
- you can see the URL it uses here:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_3_0_3/contrib/db/bd=
b/build.xml?view=3Dmarkup#l49>

There is another Ant target "get-je-jar" that does the same thing for =
the contrib/db/bdb-je/ module:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_3_0_3/contrib/db/bd=
b-je/build.xml?view=3Dmarkup#l49>

Steve

> -----Original Message-----
> From: cheng [mailto:zhoucheng2008@gmail.com]
> Sent: Sunday, May 15, 2011 10:48 AM
> To: java-user@lucene.apache.org
> Cc: Steven A Rowe
> Subject: RE: Lucene 3.3 in Eclipse
>=20
> Steve, thanks for correction. You are right. The version is 3.0.3
> released last Oct.
>=20
> I did place an ant jar in Eclipse, and it does the job to remove some
> compiling errors. However, it seems that I do need some jar file to
> handle the DbHandleExtractor.java and the org.apache.lucene.store.db
> package, which are under contrib/db/bdb/src/java folder.
>=20
> Do you know when I can find the proper jar file?
>=20
> Cheng
>=20
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: Sunday, May 15, 2011 10:08 PM
> To: java-user@lucene.apache.org
> Subject: RE: Lucene 3.3 in Eclipse
>=20
> Hi Cheng,
>=20
> Lucene 3.3 does not exist - do you mean branches/branch_3x ?
>=20
> FYI, as of Lucene 3.1, there is an Ant target you can use to setup an
> Eclipse project for  Lucene/Solr - run this from the top level =
directory
> of a full source tree (including dev-tools/ directory) checked out =
from
> Subversion:
>=20
>    ant eclipse
>=20
> More info here:
>=20
>=20
> =
<http://wiki.apache.org/solr/HowToContribute#Development_Environment_Tips=

> >
>=20
> Steve
>=20
> > -----Original Message-----
> > From: cheng [mailto:zhoucheng2008@gmail.com]
> > Sent: Sunday, May 15, 2011 4:29 AM
> > To: java-user@lucene.apache.org
> > Subject: Lucene 3.3 in Eclipse
> >
> > Hi, I created a java project for Lucene 3.3 in Eclipse, and found =
that
> in
> > the DbHandleExtractor.java file, the package of
> > com.sleepycat.db.internal.Db
> > is not resolved. How can I overcome this?
> >
> >
> >
> > I have tried to download .jar for this, but don't know which and =
where
> to
> > download.
> >
> >
> >
> > Thanks
>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 08:26:13 2011
Return-Path: <java-user-return-49744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4FF2269DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 08:26:13 +0000 (UTC)
Received: (qmail 96799 invoked by uid 500); 16 May 2011 08:26:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96753 invoked by uid 500); 16 May 2011 08:26:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96745 invoked by uid 99); 16 May 2011 08:26:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 08:26:11 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.179 as permitted sender)
Received: from [209.85.212.179] (HELO mail-px0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 08:26:02 +0000
Received: by pxi2 with SMTP id 2so3640201pxi.24
        for <java-user@lucene.apache.org>; Mon, 16 May 2011 01:25:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=pPlZrcw29jTGNsp7of8k2O+yV1zAqsKto8aP7gjtULQ=;
        b=DvKqlU5Cp/yWPWbPoBxjLN8/5k26E75MiJ92MufGalbR/saqZYnKev15WcBIlicGUM
         GMiIFae86wFCVwWpJW52GNzXjvx+XfyG/h0eBo3nuNr9p8zdGsEKPMgrhDEwZoKbBQyb
         8doU3b0cEmiAwlBjifr/oIZkhfCqbxyebW2rM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=hhAKq5OWhHyYpEPYFBh7P9RCpGV9dTpnR0wCR9O7pK94blLHItf0ETfRChCeaMGmfY
         wQoxN0Uw4hOHQ1hgjcPdZ6BPj6WAEcILOeF1DIBQy24qI83Ck42NuGlr6TwYKRSYklUQ
         wc1Cgb2tUsOFYMw7sPafK5RcXppILGXv0oGdw=
Received: by 10.142.2.33 with SMTP id 33mr2639042wfb.232.1305534340256;
        Mon, 16 May 2011 01:25:40 -0700 (PDT)
Received: from zcdyPC ([125.123.86.220])
        by mx.google.com with ESMTPS id 25sm4500068wfb.10.2011.05.16.01.25.37
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 16 May 2011 01:25:39 -0700 (PDT)
From: "cheng" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
References: <004901cc12da$1cad1f20$56075d60$@com> <2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu> <007401cc130f$11a428f0$34ec7ad0$@com> <2D127F11DC79714E9B6A43AC9458147FB3CE74B7@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FB3CE74B7@suex07-mbx-03.ad.syr.edu>
Subject: RE: Lucene 3.3 in Eclipse
Date: Mon, 16 May 2011 16:25:32 +0800
Message-ID: <001701cc13a2$d5fbf230$81f3d690$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwS2hkXDwR/DS0LR5GIGNNSUx7hMgALrqFQAADyKhAAAM1FUAAkuYEQ
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Just curious. How would this version be published if there are missing =
jar and there are compiling errors?

-----Original Message-----
From: Steven A Rowe [mailto:sarowe@syr.edu]=20
Sent: Sunday, May 15, 2011 11:15 PM
To: java-user@lucene.apache.org
Subject: RE: Lucene 3.3 in Eclipse

(Resending to the list - didn't notice that my reply went to Cheng =
directly)

There is an Ant target "get-db-jar" that can do the downloading for you =
- you can see the URL it uses here:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_3_0_3/contrib/db/bd=
b/build.xml?view=3Dmarkup#l49>

There is another Ant target "get-je-jar" that does the same thing for =
the contrib/db/bdb-je/ module:

<http://svn.apache.org/viewvc/lucene/java/tags/lucene_3_0_3/contrib/db/bd=
b-je/build.xml?view=3Dmarkup#l49>

Steve

> -----Original Message-----
> From: cheng [mailto:zhoucheng2008@gmail.com]
> Sent: Sunday, May 15, 2011 10:48 AM
> To: java-user@lucene.apache.org
> Cc: Steven A Rowe
> Subject: RE: Lucene 3.3 in Eclipse
>=20
> Steve, thanks for correction. You are right. The version is 3.0.3
> released last Oct.
>=20
> I did place an ant jar in Eclipse, and it does the job to remove some
> compiling errors. However, it seems that I do need some jar file to
> handle the DbHandleExtractor.java and the org.apache.lucene.store.db
> package, which are under contrib/db/bdb/src/java folder.
>=20
> Do you know when I can find the proper jar file?
>=20
> Cheng
>=20
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: Sunday, May 15, 2011 10:08 PM
> To: java-user@lucene.apache.org
> Subject: RE: Lucene 3.3 in Eclipse
>=20
> Hi Cheng,
>=20
> Lucene 3.3 does not exist - do you mean branches/branch_3x ?
>=20
> FYI, as of Lucene 3.1, there is an Ant target you can use to setup an
> Eclipse project for  Lucene/Solr - run this from the top level =
directory
> of a full source tree (including dev-tools/ directory) checked out =
from
> Subversion:
>=20
>    ant eclipse
>=20
> More info here:
>=20
>=20
> =
<http://wiki.apache.org/solr/HowToContribute#Development_Environment_Tips=

> >
>=20
> Steve
>=20
> > -----Original Message-----
> > From: cheng [mailto:zhoucheng2008@gmail.com]
> > Sent: Sunday, May 15, 2011 4:29 AM
> > To: java-user@lucene.apache.org
> > Subject: Lucene 3.3 in Eclipse
> >
> > Hi, I created a java project for Lucene 3.3 in Eclipse, and found =
that
> in
> > the DbHandleExtractor.java file, the package of
> > com.sleepycat.db.internal.Db
> > is not resolved. How can I overcome this?
> >
> >
> >
> > I have tried to download .jar for this, but don't know which and =
where
> to
> > download.
> >
> >
> >
> > Thanks
>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 10:42:32 2011
Return-Path: <java-user-return-49745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 49F976405
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 10:42:32 +0000 (UTC)
Received: (qmail 44723 invoked by uid 500); 16 May 2011 10:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44680 invoked by uid 500); 16 May 2011 10:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44672 invoked by uid 99); 16 May 2011 10:42:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 10:42:30 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=FREEMAIL_FROM,HTML_IMAGE_ONLY_24,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_REMOTE_IMAGE,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists.digitalpebble@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 10:42:25 +0000
Received: by qyk2 with SMTP id 2so1642939qyk.14
        for <java-user@lucene.apache.org>; Mon, 16 May 2011 03:42:04 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=fRv8mD1zc9VrdhMhMDExVaWdou63Uc1QkDO+AZr5yqU=;
        b=h8JK/l2bXfpXa+nTSea0fhfwGKzONcIv//9+z+qlw3RJi6smkABmLxzP1cvp8v9V11
         emN1r8it82Os8OZHomS0TAikytVc+ARrPFOzoa4VlwDCpjVmy40/sthtuWaTEhy3Px9/
         OgeXX1qCsmN9CW8u1Yyo28/DuMTUU1c+6WB8U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=JLA37RwXdEQ5zKj0xS+g7J0X5n4T4LZ1M2q9B+CbOVyB9wETrZFgSdUh4BPDt8RW5h
         dUpdHR/zGAckTWjCxUxjKtydudDwJyirOCFCQJ/pwFshgZiqfHtOKKSv7jlQof8+sn7l
         2HxNT9ZnhIEgbRtDpE8fTVstot5UvXxKG8PB0=
MIME-Version: 1.0
Received: by 10.229.128.74 with SMTP id j10mr3114162qcs.246.1305542524778;
 Mon, 16 May 2011 03:42:04 -0700 (PDT)
Received: by 10.229.186.5 with HTTP; Mon, 16 May 2011 03:42:04 -0700 (PDT)
In-Reply-To: <1305379745166-2937762.post@n3.nabble.com>
References: <4D6D8E6A.10004@eolya.fr>
	<1305379745166-2937762.post@n3.nabble.com>
Date: Mon, 16 May 2011 11:42:04 +0100
Message-ID: <BANLkTik7927Fcox4BXCwjZFki1s4o_iNtw@mail.gmail.com>
Subject: Re: [ANNOUNCE] Web Crawler
From: Julien Nioche <lists.digitalpebble@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517570ada6db7ff04a3624e2c

--001517570ada6db7ff04a3624e2c
Content-Type: text/plain; charset=ISO-8859-1

> I dont see any activities on Nutch wiki so wondering if its not being
> developed anymore. But most forums say Nutch is standard for solr.
>

Looking at the mail archives is a good clue of whether a project is still
alive or not. In the case of Nutch, the project is active as you can see on
the list archives below :

http://www.mail-archive.com/user%40nutch.apache.org/
http://www.mail-archive.com/dev%40nutch.apache.org/

We're about to release a new version (1.3) and have a 2.0 in beta. SOLR is
now used by default for indexing in Nutch.

HTH

Julien Nioche

-- 
*
*Open Source Solutions for Text Engineering

http://digitalpebble.blogspot.com/
http://www.digitalpebble.com

--001517570ada6db7ff04a3624e2c--

From java-user-return-49746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 11:49:30 2011
Return-Path: <java-user-return-49746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B712E646C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 11:49:30 +0000 (UTC)
Received: (qmail 23782 invoked by uid 500); 16 May 2011 11:49:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23734 invoked by uid 500); 16 May 2011 11:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23726 invoked by uid 99); 16 May 2011 11:49:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 11:49:28 +0000
X-ASF-Spam-Status: No, hits=3.5 required=5.0
	tests=HTML_MESSAGE,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 11:49:21 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1QLwIG-0007dx-49
	for java-user@lucene.apache.org; Mon, 16 May 2011 04:49:00 -0700
Date: Mon, 16 May 2011 04:49:00 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <1305546540118-2947495.post@n3.nabble.com>
Subject: How do we reverse sort on the docid ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35113_8834785.1305546540120"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35113_8834785.1305546540120
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

What I want: 

docids that matched the search string are : 
5
4
3
2
1


 What I am getting : 

docids that matched the search string are : 
999
998
997
996
995


I am lucene sort object, and it is constructed like this : 
Sort srt = new Sort(new SortField(null,SortField.DOC,true));

How do I get what I want ? Do I really need to use sort ? 

--
View this message in context: http://lucene.472066.n3.nabble.com/How-do-we-reverse-sort-on-the-docid-tp2947495p2947495.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_35113_8834785.1305546540120--

From java-user-return-49747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 11:59:18 2011
Return-Path: <java-user-return-49747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C71956689
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 11:59:18 +0000 (UTC)
Received: (qmail 42436 invoked by uid 500); 16 May 2011 11:59:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42363 invoked by uid 500); 16 May 2011 11:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42355 invoked by uid 99); 16 May 2011 11:59:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 11:59:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 11:59:10 +0000
Received: by qwj9 with SMTP id 9so3016525qwj.35
        for <java-user@lucene.apache.org>; Mon, 16 May 2011 04:58:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=rYRPm+gjcfkIWsQQ/zo5BXdbLUsz9BmH/IfvIET3ox8=;
        b=mz5mh2kjd2MW1Ta0C/z4J70UOMXguW4y2X2QLbYTXoe6Db/wbj9DTHioFca89oAe/X
         nwxLBjzCLtTlBzie0TbIlw+EG/hc062QYk1BSwFWCZ9XsoxoxZiJ2+6MBOJFR1TsiP7B
         KZlz33fdbsWKb/gmjoEJxvSQ79sQEU8v+1kfY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=G4bwS1IUa1CA9pGVo2S9KSe30iJBgMrMPdpW2kCPoz8lncifnUX/IGyT10ZLfeIChN
         sIq6SPZB+0be0d/rJGlz80bS446G+iJYxm94Hzcpj1dEy88adbogVC17e5qiwbEqQaDa
         d/9S62tmDwgghAnQKVk9FNbUmsawcUgdG+JB8=
MIME-Version: 1.0
Received: by 10.229.4.203 with SMTP id 11mr3275128qcs.72.1305547129421; Mon,
 16 May 2011 04:58:49 -0700 (PDT)
Received: by 10.229.248.197 with HTTP; Mon, 16 May 2011 04:58:49 -0700 (PDT)
In-Reply-To: <001701cc13a2$d5fbf230$81f3d690$@com>
References: <004901cc12da$1cad1f20$56075d60$@com>
	<2D127F11DC79714E9B6A43AC9458147FB3CE74B5@suex07-mbx-03.ad.syr.edu>
	<007401cc130f$11a428f0$34ec7ad0$@com>
	<2D127F11DC79714E9B6A43AC9458147FB3CE74B7@suex07-mbx-03.ad.syr.edu>
	<001701cc13a2$d5fbf230$81f3d690$@com>
Date: Mon, 16 May 2011 07:58:49 -0400
Message-ID: <BANLkTimkyN-bfY8biZ_C8-KA3SFWebG7Tg@mail.gmail.com>
Subject: Re: Lucene 3.3 in Eclipse
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

bq: Just curious. How would this version be published if there are
missing jar and there are compiling errors?

Well, the fact that it has been published probably means that you've
missed a step somewhere. There'd have been howls of outrage if
something as egregious as this were the case....

That said, Eclipse (and any other IDE) is not the standard for
publishing. That is the app is not built in Eclipse for release. Have
you had any trouble, for instance, running the product of "ant
example"? Or any of the other ant targets?

I haven't used the Eclipse build target, but the Idea target is
stunningly simple, and I'd guess the same careful work has been done
for Eclipse. So here's what I'd suggest:

Can you check out the code again in a fresh directory and run the
eclipse target, then try bringing up Eclipse according to the
instructions? I suspect that in your attempts to get it to all work
piecemeal something got a little strange and now untangling that would
be more work than starting over. Just a suggestion, but I've spent far
too much of my life messing myself up by throwing levers in an IDE to
relish untangling anything....

lucene\contrib\queryparser\src\java\org\apache\lucene\queryParser\standard\=
parser
contains StandardSyntaxParser.java, which I found by just doing a "dir
/s" in my 3.1 checkout, so you might look there for 3.0.3

Best
Erick


On Mon, May 16, 2011 at 4:25 AM, cheng <zhoucheng2008@gmail.com> wrote:
> Just curious. How would this version be published if there are missing ja=
r and there are compiling errors?
>
> -----Original Message-----
> From: Steven A Rowe [mailto:sarowe@syr.edu]
> Sent: Sunday, May 15, 2011 11:15 PM
> To: java-user@lucene.apache.org
> Subject: RE: Lucene 3.3 in Eclipse
>
> (Resending to the list - didn't notice that my reply went to Cheng direct=
ly)
>
> There is an Ant target "get-db-jar" that can do the downloading for you -=
 you can see the URL it uses here:
>
> <http://svn.apache.org/viewvc/lucene/java/tags/lucene_3_0_3/contrib/db/bd=
b/build.xml?view=3Dmarkup#l49>
>
> There is another Ant target "get-je-jar" that does the same thing for the=
 contrib/db/bdb-je/ module:
>
> <http://svn.apache.org/viewvc/lucene/java/tags/lucene_3_0_3/contrib/db/bd=
b-je/build.xml?view=3Dmarkup#l49>
>
> Steve
>
>> -----Original Message-----
>> From: cheng [mailto:zhoucheng2008@gmail.com]
>> Sent: Sunday, May 15, 2011 10:48 AM
>> To: java-user@lucene.apache.org
>> Cc: Steven A Rowe
>> Subject: RE: Lucene 3.3 in Eclipse
>>
>> Steve, thanks for correction. You are right. The version is 3.0.3
>> released last Oct.
>>
>> I did place an ant jar in Eclipse, and it does the job to remove some
>> compiling errors. However, it seems that I do need some jar file to
>> handle the DbHandleExtractor.java and the org.apache.lucene.store.db
>> package, which are under contrib/db/bdb/src/java folder.
>>
>> Do you know when I can find the proper jar file?
>>
>> Cheng
>>
>> -----Original Message-----
>> From: Steven A Rowe [mailto:sarowe@syr.edu]
>> Sent: Sunday, May 15, 2011 10:08 PM
>> To: java-user@lucene.apache.org
>> Subject: RE: Lucene 3.3 in Eclipse
>>
>> Hi Cheng,
>>
>> Lucene 3.3 does not exist - do you mean branches/branch_3x ?
>>
>> FYI, as of Lucene 3.1, there is an Ant target you can use to setup an
>> Eclipse project for =A0Lucene/Solr - run this from the top level directo=
ry
>> of a full source tree (including dev-tools/ directory) checked out from
>> Subversion:
>>
>> =A0 =A0ant eclipse
>>
>> More info here:
>>
>>
>> <http://wiki.apache.org/solr/HowToContribute#Development_Environment_Tip=
s
>> >
>>
>> Steve
>>
>> > -----Original Message-----
>> > From: cheng [mailto:zhoucheng2008@gmail.com]
>> > Sent: Sunday, May 15, 2011 4:29 AM
>> > To: java-user@lucene.apache.org
>> > Subject: Lucene 3.3 in Eclipse
>> >
>> > Hi, I created a java project for Lucene 3.3 in Eclipse, and found that
>> in
>> > the DbHandleExtractor.java file, the package of
>> > com.sleepycat.db.internal.Db
>> > is not resolved. How can I overcome this?
>> >
>> >
>> >
>> > I have tried to download .jar for this, but don't know which and where
>> to
>> > download.
>> >
>> >
>> >
>> > Thanks
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 12:01:48 2011
Return-Path: <java-user-return-49748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 624F060AA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 12:01:48 +0000 (UTC)
Received: (qmail 58312 invoked by uid 500); 16 May 2011 12:01:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58273 invoked by uid 500); 16 May 2011 12:01:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58265 invoked by uid 99); 16 May 2011 12:01:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:01:45 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:01:41 +0000
Received: by qwj9 with SMTP id 9so3018029qwj.35
        for <java-user@lucene.apache.org>; Mon, 16 May 2011 05:01:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=gCHdZEpDwdYyMKPujnoXMYNjfCTIv9hv/YkCE4zUZoo=;
        b=bniqUyAmzrlDWI1VTcefeyzpKHc735yRTvv+fNHnrVXu/OD6O/TFHNK2MbYcqnkudC
         rDfY55cJDEGXL7hRQrwOufbqikZMNSe1s3dctPjwewMcX7e8B6WGWwzLpII3Z7LytXKC
         BAPnivtBueaSEx3AA/RR+vWR5Ok8AJgYrUAmQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=cz2SLmT/zRvQdKAWNKqaXvwE/5l7H7dW/6WyHypfeF0Ml2UKkuRfKgWZaPckCHHBoT
         3WWq27ddrCxD/p78G4uWkXOt+wO8djAwO1vyH+CWRz0MtnYfjefS1u0waqx20AIcW2Wm
         CFaAq1ccODXyj8q4JOomXlZJgJ60WSqV6SKKA=
MIME-Version: 1.0
Received: by 10.229.4.203 with SMTP id 11mr3276895qcs.72.1305547279993; Mon,
 16 May 2011 05:01:19 -0700 (PDT)
Received: by 10.229.248.197 with HTTP; Mon, 16 May 2011 05:01:19 -0700 (PDT)
In-Reply-To: <1305546540118-2947495.post@n3.nabble.com>
References: <1305546540118-2947495.post@n3.nabble.com>
Date: Mon, 16 May 2011 08:01:19 -0400
Message-ID: <BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com>
Subject: Re: How do we reverse sort on the docid ?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Why do you want to do this? the internal doc ids are
transient. If you update a document by delete/add, the
internal id will now be different. What I'm getting at is
that I'd like to be sure the use case here does what
you think it will because this smells like an XY problem,
see:
http://people.apache.org/~hossman/#xyproblem

Best
Erick

On Mon, May 16, 2011 at 7:49 AM, shrinath.m <shrinath.m@webyog.com> wrote:
> What I want:
>
> docids that matched the search string are :
> 5
> 4
> 3
> 2
> 1
>
>
> =A0What I am getting :
>
> docids that matched the search string are :
> 999
> 998
> 997
> 996
> 995
>
>
> I am lucene sort object, and it is constructed like this :
> Sort srt =3D new Sort(new SortField(null,SortField.DOC,true));
>
> How do I get what I want ? Do I really need to use sort ?
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/How-do-w=
e-reverse-sort-on-the-docid-tp2947495p2947495.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 12:12:49 2011
Return-Path: <java-user-return-49749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C5E4D6F23
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 12:12:49 +0000 (UTC)
Received: (qmail 75287 invoked by uid 500); 16 May 2011 12:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75237 invoked by uid 500); 16 May 2011 12:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75229 invoked by uid 99); 16 May 2011 12:12:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:12:47 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:12:40 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1QLwep-00022U-Qi
	for java-user@lucene.apache.org; Mon, 16 May 2011 05:12:19 -0700
Date: Mon, 16 May 2011 05:12:19 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <1305547939817-2947572.post@n3.nabble.com>
In-Reply-To: <BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com>
References: <1305546540118-2947495.post@n3.nabble.com> <BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com>
Subject: Re: How do we reverse sort on the docid ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Erick Erickson wrote:
> 
> Why do you want to do this? the internal doc ids are
> transient. If you update a document by delete/add, the
> internal id will now be different. What I'm getting at is
> that I'd like to be sure the use case here does what
> you think it will because this smells like an XY problem,
> see:
> http://people.apache.org/~hossman/#xyproblem
> 
> Best
> Erick
> 
> 

LoL :) the explanation of XY problem is good one, but thats not my case... 
I must agree, my first idea was on docid itself, but I don't stress on
docid, it can be on any field for that instance, the way it works is the
same. 

so stress in the question is on how to do it, not which field I do it on... 

Apologies for not being clear in the question, I tried to keep it very
simple, but failed to give essential info...

--
View this message in context: http://lucene.472066.n3.nabble.com/How-do-we-reverse-sort-on-the-docid-tp2947495p2947572.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 12:23:29 2011
Return-Path: <java-user-return-49750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0271D655D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 12:23:29 +0000 (UTC)
Received: (qmail 93728 invoked by uid 500); 16 May 2011 12:23:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93663 invoked by uid 500); 16 May 2011 12:23:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93655 invoked by uid 99); 16 May 2011 12:23:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:23:26 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:23:20 +0000
Received: by qyk2 with SMTP id 2so1700685qyk.14
        for <java-user@lucene.apache.org>; Mon, 16 May 2011 05:23:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=WDfbrmWdn8AkLfd94MgdBWk/jbkgG+vU+lJLg60pR4A=;
        b=i6Ttq63aLyuROmEdfIlfVJvaKyn5GeSIaa3JDD9MI8FdSfgcYdm0KXDbq2yUqaG47W
         TCHNvg2PyfHbbnhx+ylJTr0CRYA2vjVijSQzx0EH3awcNjvjdyf/bSShqvoEmg6cV3Ky
         C1iHvTWH4w8w6IkGOn+IoCoCoWFZAQiUhoVkw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gXsckJ6mNZO88QMwQqewW1LCbGYX7ZnLwj+UO7hM2787CmfYK5M5czl53l5FjxzVIa
         W9EPdxFNuV7FIq1h/0lpcVO+srcXfYBQtIzWtkr8KAeIL54kN/djS22iiwEtTqdjF6Cs
         KOnwDODiHHe5rlQsYxj+TyEUKX595u+wv29yc=
MIME-Version: 1.0
Received: by 10.229.37.65 with SMTP id w1mr3272651qcd.110.1305548579941; Mon,
 16 May 2011 05:22:59 -0700 (PDT)
Received: by 10.229.248.197 with HTTP; Mon, 16 May 2011 05:22:59 -0700 (PDT)
In-Reply-To: <1305547939817-2947572.post@n3.nabble.com>
References: <1305546540118-2947495.post@n3.nabble.com>
	<BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com>
	<1305547939817-2947572.post@n3.nabble.com>
Date: Mon, 16 May 2011 08:22:59 -0400
Message-ID: <BANLkTin67gCK95_=pMn2T66HcPuH6Sm3ig@mail.gmail.com>
Subject: Re: How do we reverse sort on the docid ?
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Ahhh, I probably should have read more carefully!

At any rate, I think all you need to do is specify
the reverse boolean in the SortField c'tor???

Best
Erick

On Mon, May 16, 2011 at 8:12 AM, shrinath.m <shrinath.m@webyog.com> wrote:
>
> Erick Erickson wrote:
>>
>> Why do you want to do this? the internal doc ids are
>> transient. If you update a document by delete/add, the
>> internal id will now be different. What I'm getting at is
>> that I'd like to be sure the use case here does what
>> you think it will because this smells like an XY problem,
>> see:
>> http://people.apache.org/~hossman/#xyproblem
>>
>> Best
>> Erick
>>
>>
>
> LoL :) the explanation of XY problem is good one, but thats not my case...
> I must agree, my first idea was on docid itself, but I don't stress on
> docid, it can be on any field for that instance, the way it works is the
> same.
>
> so stress in the question is on how to do it, not which field I do it on...
>
> Apologies for not being clear in the question, I tried to keep it very
> simple, but failed to give essential info...
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/How-do-we-reverse-sort-on-the-docid-tp2947495p2947572.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 12:29:34 2011
Return-Path: <java-user-return-49751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A4606655
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 12:29:34 +0000 (UTC)
Received: (qmail 4222 invoked by uid 500); 16 May 2011 12:29:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4167 invoked by uid 500); 16 May 2011 12:29:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4159 invoked by uid 99); 16 May 2011 12:29:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:29:32 +0000
X-ASF-Spam-Status: No, hits=2.3 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_SOFTFAIL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of ajdabholkar@hotmail.com does not designate 216.139.236.26 as permitted sender)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:29:26 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <ajdabholkar@hotmail.com>)
	id 1QLwv4-0003mF-5P
	for java-user@lucene.apache.org; Mon, 16 May 2011 05:29:06 -0700
Date: Mon, 16 May 2011 05:29:06 -0700 (PDT)
From: abhayd <ajdabholkar@hotmail.com>
To: java-user@lucene.apache.org
Message-ID: <1305548946153-2947623.post@n3.nabble.com>
In-Reply-To: <BANLkTik7927Fcox4BXCwjZFki1s4o_iNtw@mail.gmail.com>
References: <4D6D8E6A.10004@eolya.fr> <1305379745166-2937762.post@n3.nabble.com> <BANLkTik7927Fcox4BXCwjZFki1s4o_iNtw@mail.gmail.com>
Subject: Re: [ANNOUNCE] Web Crawler
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

hi Julien ,

I m not sure what do u mean by 
"SOLR is now used by default for indexing in Nutch." Does that mean SOLR has
integrated Nutch for crawling web resources? 

I checked SOLR wiki but i didnt see something like that, Could u please
provide some details ? 


--
View this message in context: http://lucene.472066.n3.nabble.com/ANNOUNCE-Web-Crawler-tp2607833p2947623.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 12:30:26 2011
Return-Path: <java-user-return-49752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81AD36896
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 12:30:26 +0000 (UTC)
Received: (qmail 6387 invoked by uid 500); 16 May 2011 12:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6342 invoked by uid 500); 16 May 2011 12:30:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6334 invoked by uid 99); 16 May 2011 12:30:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:30:24 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (nike.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:30:18 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1QLwvt-0003ra-15
	for java-user@lucene.apache.org; Mon, 16 May 2011 05:29:57 -0700
Date: Mon, 16 May 2011 05:29:56 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <1305548996858-2947629.post@n3.nabble.com>
In-Reply-To: <BANLkTin67gCK95_=pMn2T66HcPuH6Sm3ig@mail.gmail.com>
References: <1305546540118-2947495.post@n3.nabble.com> <BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com> <1305547939817-2947572.post@n3.nabble.com> <BANLkTin67gCK95_=pMn2T66HcPuH6Sm3ig@mail.gmail.com>
Subject: Re: How do we reverse sort on the docid ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org


Erick Erickson wrote:
> 
> At any rate, I think all you need to do is specify
> the reverse boolean in the SortField c'tor???
> 
> Best
> Erick
> 
>  

The "true" in 
`Sort srt = new Sort(new SortField(null,SortField.DOC,true)); `
actually is the reverse boolean sort field. So it is turned on, but look at
my original question, what I am getting is not what I desire. :(

--
View this message in context: http://lucene.472066.n3.nabble.com/How-do-we-reverse-sort-on-the-docid-tp2947495p2947629.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 12:38:41 2011
Return-Path: <java-user-return-49753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 429E56C3C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 12:38:41 +0000 (UTC)
Received: (qmail 21953 invoked by uid 500); 16 May 2011 12:38:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21915 invoked by uid 500); 16 May 2011 12:38:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21906 invoked by uid 99); 16 May 2011 12:38:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:38:38 +0000
X-ASF-Spam-Status: No, hits=1.3 required=5.0
	tests=URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:38:33 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1QLx3s-0004kn-Is
	for java-user@lucene.apache.org; Mon, 16 May 2011 05:38:12 -0700
Date: Mon, 16 May 2011 05:38:12 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <1305549492262-2947668.post@n3.nabble.com>
Subject: What is the relation between n-grams/edge n-grams with prefix query
 ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

I was under an assumption that edge n-grams speed up the prefix queries, but
now it seems that it is not so... Am I right in thinking so ? 

Are there any relation between n-grams and prefix queries ? 

--
View this message in context: http://lucene.472066.n3.nabble.com/What-is-the-relation-between-n-grams-edge-n-grams-with-prefix-query-tp2947668p2947668.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 12:44:29 2011
Return-Path: <java-user-return-49754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 709146DCE
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 12:44:29 +0000 (UTC)
Received: (qmail 32582 invoked by uid 500); 16 May 2011 12:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32483 invoked by uid 500); 16 May 2011 12:44:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32475 invoked by uid 99); 16 May 2011 12:44:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:44:26 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 12:44:21 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id A110AD36002
	for <java-user@lucene.apache.org>; Mon, 16 May 2011 14:43:59 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id n6N1s9lhboWk for <java-user@lucene.apache.org>;
	Mon, 16 May 2011 14:43:54 +0200 (CEST)
Received: from VEGA (port-92-196-110-230.dynamic.qsc.de [92.196.110.230])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id 06E57D36001
	for <java-user@lucene.apache.org>; Mon, 16 May 2011 14:43:53 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <1305546540118-2947495.post@n3.nabble.com> <BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com> <1305547939817-2947572.post@n3.nabble.com> <BANLkTin67gCK95_=pMn2T66HcPuH6Sm3ig@mail.gmail.com> <1305548996858-2947629.post@n3.nabble.com>
In-Reply-To: <1305548996858-2947629.post@n3.nabble.com>
Subject: RE: How do we reverse sort on the docid ?
Date: Mon, 16 May 2011 14:43:58 +0200
Message-ID: <005701cc13c6$ed929240$c8b7b6c0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQFuj8xCkigIc/ZKEdlH+NKaPtW6LwHZ2/4OATXBqhQBnkrNfgKe5qkolRAHboA=
Content-Language: de

The problem we have is that you dont really say what your problem is! Whats
wrong with the search results you get? Give an example of the query you
execute and the documents you have.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: shrinath.m [mailto:shrinath.m@webyog.com]
> Sent: Monday, May 16, 2011 2:30 PM
> To: java-user@lucene.apache.org
> Subject: Re: How do we reverse sort on the docid ?
> 
> 
> Erick Erickson wrote:
> >
> > At any rate, I think all you need to do is specify the reverse boolean
> > in the SortField c'tor???
> >
> > Best
> > Erick
> >
> >
> 
> The "true" in
> `Sort srt = new Sort(new SortField(null,SortField.DOC,true)); ` actually
is the
> reverse boolean sort field. So it is turned on, but look at my original
question,
> what I am getting is not what I desire. :(
> 
> --
> View this message in context: http://lucene.472066.n3.nabble.com/How-do-
> we-reverse-sort-on-the-docid-tp2947495p2947629.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 16 17:50:39 2011
Return-Path: <java-user-return-49755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E1C96358
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 16 May 2011 17:50:39 +0000 (UTC)
Received: (qmail 1775 invoked by uid 500); 16 May 2011 17:50:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1656 invoked by uid 500); 16 May 2011 17:50:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1648 invoked by uid 99); 16 May 2011 17:50:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 17:50:36 +0000
X-ASF-Spam-Status: No, hits=2.8 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of alexander.aristov@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 16 May 2011 17:50:30 +0000
Received: by wwk4 with SMTP id 4so2990040wwk.5
        for <java-user@lucene.apache.org>; Mon, 16 May 2011 10:50:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=DTvXkvhtFdgyXGR/Bu9/UyZX1FGtiHgfV7AWaZlsEnM=;
        b=GpcHKXvDw3Or1lk6c6HmtdzjEfMCxOFg1mF2O0wod8Xwdp3bIZciSR4eA7ztnEz3fP
         oFXoH71naDoXrWgEh8NrB5+KlhoZ7GuILqmVySfAX60h1oXppVyT1ZBQpBWcVbe6VxQb
         Q/oYTi7ACEgukVZ20diDDeCJ1GGySPILaL63U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=jPW7Yb77bc7j+IhraNnfWLAZQ802xaJIuosG8c6r4BJaZgHN1JmVWyJq9PunxR2fui
         SLj3awwkaCR++m78mSzVBsDMUI1eTdsUUiEsGq1YxK6kADddL42yG4LnRDsiqUbIzXOc
         LpRn0LsaNYhxWOi5dSV45SoflXbur3W25j31U=
Received: by 10.216.55.193 with SMTP id k43mr4480106wec.51.1305568210153; Mon,
 16 May 2011 10:50:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.216.86.132 with HTTP; Mon, 16 May 2011 10:49:50 -0700 (PDT)
In-Reply-To: <005701cc13c6$ed929240$c8b7b6c0$@thetaphi.de>
References: <1305546540118-2947495.post@n3.nabble.com> <BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com>
 <1305547939817-2947572.post@n3.nabble.com> <BANLkTin67gCK95_=pMn2T66HcPuH6Sm3ig@mail.gmail.com>
 <1305548996858-2947629.post@n3.nabble.com> <005701cc13c6$ed929240$c8b7b6c0$@thetaphi.de>
From: Alexander Aristov <alexander.aristov@gmail.com>
Date: Mon, 16 May 2011 21:49:50 +0400
Message-ID: <BANLkTinNA0yWTB_e_j-qPC5zLzAjoJyG_Q@mail.gmail.com>
Subject: Re: How do we reverse sort on the docid ?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dbe8966571cf04a36849ea
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6dbe8966571cf04a36849ea
Content-Type: text/plain; charset=ISO-8859-1

indeed. What's the problem?

Best Regards
Alexander Aristov


On 16 May 2011 16:43, Uwe Schindler <uwe@thetaphi.de> wrote:

> The problem we have is that you dont really say what your problem is! Whats
> wrong with the search results you get? Give an example of the query you
> execute and the documents you have.
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de
>
>
> > -----Original Message-----
> > From: shrinath.m [mailto:shrinath.m@webyog.com]
> > Sent: Monday, May 16, 2011 2:30 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: How do we reverse sort on the docid ?
> >
> >
> > Erick Erickson wrote:
> > >
> > > At any rate, I think all you need to do is specify the reverse boolean
> > > in the SortField c'tor???
> > >
> > > Best
> > > Erick
> > >
> > >
> >
> > The "true" in
> > `Sort srt = new Sort(new SortField(null,SortField.DOC,true)); ` actually
> is the
> > reverse boolean sort field. So it is turned on, but look at my original
> question,
> > what I am getting is not what I desire. :(
> >
> > --
> > View this message in context: http://lucene.472066.n3.nabble.com/How-do-
> > we-reverse-sort-on-the-docid-tp2947495p2947629.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6dbe8966571cf04a36849ea--

From java-user-return-49756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 02:58:36 2011
Return-Path: <java-user-return-49756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9678C4F83
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 02:58:36 +0000 (UTC)
Received: (qmail 79427 invoked by uid 500); 17 May 2011 02:58:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79395 invoked by uid 500); 17 May 2011 02:58:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79387 invoked by uid 99); 17 May 2011 02:58:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 02:58:32 +0000
X-ASF-Spam-Status: No, hits=3.8 required=5.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: unknown (athena.apache.org: error in processing during lookup of shrinath.m@webyog.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 02:58:28 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.69)
	(envelope-from <shrinath.m@webyog.com>)
	id 1QMAU2-0007Wk-DV
	for java-user@lucene.apache.org; Mon, 16 May 2011 19:58:06 -0700
Date: Mon, 16 May 2011 19:58:06 -0700 (PDT)
From: "shrinath.m" <shrinath.m@webyog.com>
To: java-user@lucene.apache.org
Message-ID: <BANLkTi=BadK_ZpsLkirGh4W_3rByJHBieA@mail.gmail.com>
In-Reply-To: <BANLkTinNA0yWTB_e_j-qPC5zLzAjoJyG_Q@mail.gmail.com>
References: <1305546540118-2947495.post@n3.nabble.com> <BANLkTim3XKy3wGH2ZDCon2OC87Hjr0WgLw@mail.gmail.com> <1305547939817-2947572.post@n3.nabble.com> <BANLkTin67gCK95_=pMn2T66HcPuH6Sm3ig@mail.gmail.com> <1305548996858-2947629.post@n3.nabble.com> <005701cc13c6$ed929240$c8b7b6c0$@thetaphi.de> <BANLkTinNA0yWTB_e_j-qPC5zLzAjoJyG_Q@mail.gmail.com>
Subject: Re: How do we reverse sort on the docid ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6555_25367906.1305601086412"

------=_Part_6555_25367906.1305601086412
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

No problems... I was trying to get the results to be reverse ordered, but I
had a small problem in my searcher to work... Now all works...
Thanks :)

On Mon, May 16, 2011 at 11:20 PM, Alexander Aristov [via Lucene] <
ml-node+2949011-1603567638-376162@n3.nabble.com> wrote:

> indeed. What's the problem?
>
> Best Regards
> Alexander Aristov
>
>
> On 16 May 2011 16:43, Uwe Schindler <[hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=0>>
> wrote:
>
> > The problem we have is that you dont really say what your problem is!
> Whats
> > wrong with the search results you get? Give an example of the query you
> > execute and the documents you have.
> >
> > -----
> > Uwe Schindler
> > H.-H.-Meier-Allee 63, D-28213 Bremen
> > http://www.thetaphi.de
> > eMail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=1>
> >
> >
> > > -----Original Message-----
> > > From: shrinath.m [mailto:[hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=2>]
>
> > > Sent: Monday, May 16, 2011 2:30 PM
> > > To: [hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=3>
> > > Subject: Re: How do we reverse sort on the docid ?
> > >
> > >
> > > Erick Erickson wrote:
> > > >
> > > > At any rate, I think all you need to do is specify the reverse
> boolean
> > > > in the SortField c'tor???
> > > >
> > > > Best
> > > > Erick
> > > >
> > > >
> > >
> > > The "true" in
> > > `Sort srt = new Sort(new SortField(null,SortField.DOC,true)); `
> actually
> > is the
> > > reverse boolean sort field. So it is turned on, but look at my original
>
> > question,
> > > what I am getting is not what I desire. :(
> > >
> > > --
> > > View this message in context:
> http://lucene.472066.n3.nabble.com/How-do-
> > > we-reverse-sort-on-the-docid-tp2947495p2947629.html
> > > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=4>
> > > For additional commands, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=5>
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=6>
> > For additional commands, e-mail: [hidden email]<http://user/SendEmail.jtp?type=node&node=2949011&i=7>
> >
> >
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://lucene.472066.n3.nabble.com/How-do-we-reverse-sort-on-the-docid-tp2947495p2949011.html
>  To unsubscribe from How do we reverse sort on the docid ?, click here<http://lucene.472066.n3.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=2947495&code=c2hyaW5hdGgubUB3ZWJ5b2cuY29tfDI5NDc0OTV8LTIxMzY3ODQ0ODI=>.
>
>



-- 
Regards
*Shrinath.M*


--
View this message in context: http://lucene.472066.n3.nabble.com/How-do-we-reverse-sort-on-the-docid-tp2947495p2950963.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.
------=_Part_6555_25367906.1305601086412--

From java-user-return-49757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 09:56:48 2011
Return-Path: <java-user-return-49757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 30BF84C13
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 09:56:48 +0000 (UTC)
Received: (qmail 69870 invoked by uid 500); 17 May 2011 09:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69815 invoked by uid 500); 17 May 2011 09:56:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69807 invoked by uid 99); 17 May 2011 09:56:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 09:56:44 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.132] (HELO eu1sys200aob112.obsmtp.com) (207.126.144.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 09:56:36 +0000
Received: from proxy02.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob112.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTdJGQO0wCPpd/UEYwId1K7UiDGmmito7@postini.com; Tue, 17 May 2011 09:56:16 UTC
Received: from blackex04.detica.com ([10.1.1.9]) by proxy02.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 17 May 2011 10:56:16 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex04.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Tue, 17 May 2011 10:56:16 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SpanNearQuery - inOrder parameter
Date: Tue, 17 May 2011 10:56:15 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F240126D947@uksrpblkexb01.detica.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery - inOrder parameter
Thread-Index: AcwPapuYBEqMhhHWS+a2pzUrgMzybgCEb7DAAL8RS0A=
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com> <614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com> <alpine.DEB.2.00.1105101622420.26571@bester> 
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 May 2011 09:56:16.0040 (UTC) FILETIME=[A9913A80:01CC1478]
X-Virus-Checked: Checked by ClamAV on apache.org

Anyone else able to reply to this?

Thanks

Greg

-----Original Message-----
From: Gregory Tarr=20
Sent: 13 May 2011 15:46
To: 'java-user@lucene.apache.org'
Subject: RE: SpanNearQuery - inOrder parameter

Chris, and others

Thanks for your reply. In effect what you are saying is that
SpanNearQuery works as expected, and I should set inOrder=3Dtrue to =
obtain
the behaviour I require, even though I don't care about the order?

Thanks

Greg=20

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
Sent: 11 May 2011 00:32
To: java-user@lucene.apache.org
Subject: RE: SpanNearQuery - inOrder parameter



: I attach a junit test which shows strange behaviour of the inOrder
: parameter on the SpanNearQuery constructor, using Lucene 2.9.4.
:=20
: My understanding of this parameter is that true forces the order and
: false doesn't care about the order.=20
:=20
: Using true always works. However using false works fine when the terms
: in the query are distinct, but if they are equivalent, e.g. searching
: for "john john", I do not get the expected results. The workaround
seems
: to be to always use true for queries with repeated terms.

I don't think the situation of "overlapping spans" has changed much
since this thread...

http://search.lucidimagination.com/search/document/ee23395e5a93c525/non_
overlapping_span_queries#868b3a3ec6431afc

the crux of hte issue (as i recall) is that there is really no
conecptual reason to why a query for "'john' near 'john', in any order,
with slop of Z" shouldn't match a doc that contains only one instance of
"john" ... the first SpanTermQuery says "i found a match at position X"
the second SpanTermQuery says "i found a match at position Y" and the
SpanNearQuery says "the differnece between X and Y is less then Z"
therefore i have a match.  (The SpanNearQuery can't fail just because X
and Y are the same -- they might be two distinct term instances, with
differnet payloads perhaps, that just happen to have the same position).

However: if true=3D=3DinOrder case works because the SpanNearQuery =
enforces
that  "X must be less then Y" so the same term can't ever match twice.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 11:53:09 2011
Return-Path: <java-user-return-49758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B3140429C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 11:53:09 +0000 (UTC)
Received: (qmail 72686 invoked by uid 500); 17 May 2011 11:53:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72624 invoked by uid 500); 17 May 2011 11:53:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72616 invoked by uid 99); 17 May 2011 11:53:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 11:53:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdevgl@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 11:52:58 +0000
Received: by wwi18 with SMTP id 18so316254wwi.5
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 04:52:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:content-type:content-transfer-encoding;
        bh=xKOyg1lJJHMmL5Zl5xzohfkDE+sBSlakFPtFxLnsAyI=;
        b=n4bYOTSbbrPRe8YPHdrkmdjb0VdUjy5kvImEgo5NM/khPKz4c3QLdIBi9dHpE0PFto
         EtrBMSWatpbLVGb47ycVXvPyfrokj36vQoGXP8em/nEVDPWNWFlpIinz8sxODf0Mbub5
         uWdEWWbGNd5JK1Poi+OwNTuAn8goRAsDwTi20=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=pChrMOjaazfzdoinBucrAHxeu0e58EGyUuAkcyipLEgvTlrhBQD1N6Y7XTZG66Mo0d
         qw4guBv2dL0ZPy2QiCw4Sf4vUP0Da8duIoVKqXTBAuZZ9o1LnyqZBucT4gtHu9RKY5Yb
         GztuoDU5+aJ5ItPei1ni9yw7B45Gj+NsdIdOs=
Received: by 10.227.160.140 with SMTP id n12mr527983wbx.69.1305633158379;
        Tue, 17 May 2011 04:52:38 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id o23sm283433wbc.27.2011.05.17.04.52.37
        (version=SSLv3 cipher=OTHER);
        Tue, 17 May 2011 04:52:37 -0700 (PDT)
Message-ID: <4DD26186.4040408@gmail.com>
Date: Tue, 17 May 2011 13:52:38 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: how to create a range query with string parameters
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi there :)

I would like to perform a range query on a lucene index. I'm using 
lucene 3.1 api.
I looked at the javadoc and found a rangeQueryNode but i'm not sure how 
to use it.

I've got a field "article" in my index which is indexed this way :

entry.add(new Field("article", article, Field.Store.YES, 
Field.Index.ANALYZED));

Now I would like to create a query such as :

+article:[L. 140-1 TO L.145-2]

I didn't manage to find code sample on the web. Could someone give me a 
hand please?

Regards :)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 12:03:29 2011
Return-Path: <java-user-return-49759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 663794608
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 12:03:29 +0000 (UTC)
Received: (qmail 94676 invoked by uid 500); 17 May 2011 12:03:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94629 invoked by uid 500); 17 May 2011 12:03:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94616 invoked by uid 99); 17 May 2011 12:03:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 12:03:26 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [85.25.71.29] (HELO mail.troja.net) (85.25.71.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 12:03:19 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mail.troja.net (Postfix) with ESMTP id 4ED35D36003
	for <java-user@lucene.apache.org>; Tue, 17 May 2011 14:02:58 +0200 (CEST)
X-Virus-Scanned: Debian amavisd-new at mail.troja.net
Received: from mail.troja.net ([127.0.0.1])
	by localhost (megaira.troja.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id dL3g+oqO6dDf for <java-user@lucene.apache.org>;
	Tue, 17 May 2011 14:02:53 +0200 (CEST)
Received: from VEGA (port-92-196-110-230.dynamic.qsc.de [92.196.110.230])
	(using TLSv1 with cipher AES128-SHA (128/128 bits))
	(No client certificate requested)
	by mail.troja.net (Postfix) with ESMTPSA id B5EAAD36001
	for <java-user@lucene.apache.org>; Tue, 17 May 2011 14:02:52 +0200 (CEST)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4DD26186.4040408@gmail.com>
In-Reply-To: <4DD26186.4040408@gmail.com>
Subject: RE: how to create a range query with string parameters
Date: Tue, 17 May 2011 14:02:58 +0200
Message-ID: <001901cc148a$5ddfc450$199f4cf0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Content-language: de
Thread-Index: AQKVGeWhRvk+dCKZ9/EWDkaqfnbpq5L+4NHw
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Query q = new TermRangeQuery(...)

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: G.Long [mailto:jdevgl@gmail.com]
> Sent: Tuesday, May 17, 2011 1:53 PM
> To: java-user@lucene.apache.org
> Subject: how to create a range query with string parameters
> 
> Hi there :)
> 
> I would like to perform a range query on a lucene index. I'm using lucene
3.1
> api.
> I looked at the javadoc and found a rangeQueryNode but i'm not sure how to
> use it.
> 
> I've got a field "article" in my index which is indexed this way :
> 
> entry.add(new Field("article", article, Field.Store.YES,
> Field.Index.ANALYZED));
> 
> Now I would like to create a query such as :
> 
> +article:[L. 140-1 TO L.145-2]
> 
> I didn't manage to find code sample on the web. Could someone give me a
> hand please?
> 
> Regards :)
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 12:52:52 2011
Return-Path: <java-user-return-49760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8042E48C8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 12:52:52 +0000 (UTC)
Received: (qmail 75888 invoked by uid 500); 17 May 2011 12:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75829 invoked by uid 500); 17 May 2011 12:52:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75809 invoked by uid 99); 17 May 2011 12:52:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 12:52:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of samarzone@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 12:52:35 +0000
Received: by fxm7 with SMTP id 7so463855fxm.35
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 05:52:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=y0UDREBuAUMsEwGtOXtfHYNWZwa/LPfQU52Z03I2dMM=;
        b=QGO4epO8qouIficzwIZBMU16iFw1a8PXfa87hXbm13yQptXtLBwxvkNW45baXn6l+T
         mM7SYsSHqbTq1Aep9uzi9UlgS+mWArMlNZBfwxJr8Bbc0c1jg5h/WRTX3YjFmPF7kfFy
         e1Zlz5+ixF/qf0kWtLZITKnogCFWi4EacxwnM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=L8Jhcr+nTgRVxOd+ZfjaoUGyH9JVleo9xF9KG9XXj7U5WaAddOse4nqvE/Ui8z3/W2
         nhVnDnsd0PKBHT9c7VpUrEY4xCu4c0TbzDUgtOw06K39eyoFsCmppE9EkGYtfMkjSKHT
         oDyJUFG7u4Mz1SdK1RBDUMpF/EfJYID8772yU=
Received: by 10.223.44.86 with SMTP id z22mr797310fae.3.1305636734116; Tue, 17
 May 2011 05:52:14 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.86.202 with HTTP; Tue, 17 May 2011 05:51:59 -0700 (PDT)
In-Reply-To: <BANLkTik+kGrE35Fhs7xWiFi6qeEK=AP1dQ@mail.gmail.com>
References: <8CDC4128DA32269-AF8-8189@FRR3-L27.sysops.aol.com>
 <BANLkTi=nUatSA3Y78NX88KrO39BZSvyNFg@mail.gmail.com> <BANLkTik+kGrE35Fhs7xWiFi6qeEK=AP1dQ@mail.gmail.com>
From: Samarendra Pratap <samarzone@gmail.com>
Date: Tue, 17 May 2011 18:21:59 +0530
Message-ID: <BANLkTimOfzFTAc_ZDiiEOLKNo_X9VLNjyA@mail.gmail.com>
Subject: Re: Rewriting an index without losing 'hidden' data
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174410d6be25a504a3783dd2
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174410d6be25a504a3783dd2
Content-Type: text/plain; charset=ISO-8859-1

Hi, I know it is too late to answer a question (sorry Chris) but I thought
it could be useful to share things (even late).
I was just going through the mails and I found that we've done it a few
months back.

*Objective: To add a new field to existing index without re-writing the
whole index.*

We have an index ("primary index") to which we want to add a new field,  say
"tags".
Source of the data is database.

I am adding pseudo code here

Create an index "index 2" with just two fields "id" (which is also a unique
identifier in main index) and "tags" (keep it stored) from database (source
of data).

Open a new IndexWriter ("index 3")

Now run a loop over all the documents of "Primary Index" with increasing
order of doc-id
Get document of current doc-id (starting from zero)
 Find the value of "id" field
Search this value in in secondary index in the same ("id") field.  (or
directly get the document through IndexReader and termVector). You should
get only one document.
 If document is found
Add this document to "index 3"
If document is not found
 Add a blank document to "index 3" (to maintain the doc-id order)

(After the loop is finished, the doc-ids and fields of "primary index" and
"index 3" will be in order, i.e. document at doc id 5 in "index 3" and in
"primary index" would be representing the same document of the database with
different fields)

Open a *ParallelReader* ( this is the key :-) ) and add both the indexes
("primary index" and "index 3") one by one.
Open an IndexWriter and use addIndexes(IndexReader) to create a single
index.
The final index will contain primary index with "tags" field. :-)


I request the list to comment if there could be any issue with that.


My question follows then -
I tried this on NumericField (as "tags") but this didn't work.
My guess (excuse me for guessing without deeper investigations) is that this
is because NumericField is not a Field. It is an AbstractField

Irrespective of the correctness of my guess can someone give me a hint or
point me to something which can help me doing the same process successfully
for NumericField as well?

I hope to listen from learned people.


On Fri, Apr 8, 2011 at 9:38 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> Unfortunately, updateDocument replaces the *entire* previous document
> with the new one.
>
> The ability to update a single indexed field (either replace that
> field entirely, or, change only certain token occurrences within it),
> while leaving all other indexed fields in the document unaffected, has
> been a long requested big missing feature in Lucene.  We call it
> "incremental field updates".
>
> There have been some healthy discussions on the dev list, that have
> worked out a good rough design (eg see
> http://markmail.org/thread/lsfjhpiblzymkfcn).  Also, recent
> improvements in how buffered deletes are handled should make it alot
> easier for updates to "piggyback" using that same packet stream
> approach.  So... I think there is hope some day that we'll get this
> into Lucene.
>
> Mike
>
> http://blog.mikemccandless.com
>
> On Fri, Apr 8, 2011 at 11:00 AM, Ian Lea <ian.lea@gmail.com> wrote:
> > Unfortunately you just can't do this.  Might be possible if all fields
> > were stored but evidently they are not in your index.  For unstored
> > fields, the Document object will not contain the data that was passed
> > in when the doc was originally added.
> >
> > I believe there might be a way of recreating some of the missing data
> > via TermFreqVector but that has always sounded dodgy and lossy to me.
> >
> > The safest way is to reindex, however painful it might be.  Maybe you
> > could take the opportunity to upgrade lucene at the same time!
> >
> >
> > --
> > Ian.
> >
> >
> > On Fri, Apr 8, 2011 at 3:44 PM, Chris Bamford
> > <chris.bamford@talktalk.net> wrote:
> >> Hi,
> >>
> >> I recently discovered that I need to add a single field to every
> document in an existing (very large) index.  Reindexing from scratch is not
> an option I want to consider right now, so I wrote a utility to add the
> field by rewriting the index - but this seemed to lose some of the fields
> (indexed, but not stored?).  In fact, it shrunk a 12Gb index down to 4.2Gb -
> clearly not what I wanted.  :-)
> >> What am I doing wrong?
> >>
> >> My technique was:
> >>
> >>  Analyzer analyser = new StandardAnalyzer();
> >>  IndexSearcher searcher = new IndexSearcher(indexPath);
> >>  IndexWriter indexWriter = new IndexWriter(indexPath, analyser);
> >>  Hits hits = matchAllDocumentsFromIndex(searcher);
> >>
> >>  for (int i=0; i < hits.length(); i++) {
> >>          Document doc = hits.doc(i);
> >>          String id = doc.get("unique-id");
> >>          doc.add(new Field("newField", newValue, Field.Store.YES,
> Field.Index.UN_TOKENIZED));
> >>          indexWriter.updateDocument(new Term("unique-id", id), doc);
> >>  }
> >>
> >>  searcher.close();
> >>  indexWriter.optimize();
> >>  indexWriter.close();
> >>
> >> Note that my matchAllDocumentsFromIndex() does get the right number of
> hits from the index - i.e. the same number as held in the index.
> >>
> >>
> >>  Thanks for any ideas!
> >> BTW I am using Lucene 2.3.2.
> >>
> >> - Chris
> >>
> >>
> >>
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,
Samar

--0015174410d6be25a504a3783dd2--

From java-user-return-49761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 14:06:25 2011
Return-Path: <java-user-return-49761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D016F4EC5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 14:06:25 +0000 (UTC)
Received: (qmail 23501 invoked by uid 500); 17 May 2011 14:06:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23469 invoked by uid 500); 17 May 2011 14:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23460 invoked by uid 99); 17 May 2011 14:06:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 14:06:23 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 14:06:15 +0000
Received: by qyk30 with SMTP id 30so366983qyk.14
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 07:05:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=6lt9MH5t7FFybegWEnpqHCRrLCjRL12DNvXUOH+Jt6w=;
        b=wtsD+luOLyxkuI34ugPONhmR28Tk9+OIKrHNAlQkqOBO+x6bSwQlvZ6EWSK3R7tXOk
         qdzco69pfuNljK1aWIZ+uLK12ttUJW+anEW8JAdyOzFfD9OOxXxmlspDJJJmoNEdZiAM
         Kx9x9K/zVSWpPZ1FtknXf0y3TSGHnUz187r8Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=ayLrHEfA4F6+X+Z/yFo8oc+xuE4KfZT7EHkrltlqSXvmuMRVqki+BBf4zkcr/9dIRH
         5EyukT0uP3238T47GElJ+5oNZR0OpQJgf3BnU0MEYE8oIWCGNt7OaXjx1YPrD1sFQLz3
         5q4LXnwcRTnWDqDpmXrRALOJCQkiQaVcEqbR0=
MIME-Version: 1.0
Received: by 10.229.190.133 with SMTP id di5mr448128qcb.286.1305641154755;
 Tue, 17 May 2011 07:05:54 -0700 (PDT)
Received: by 10.229.49.17 with HTTP; Tue, 17 May 2011 07:05:54 -0700 (PDT)
Date: Tue, 17 May 2011 15:05:54 +0100
Message-ID: <BANLkTi=xjCgcy6xcaM3-yQZRmRP+TcexiA@mail.gmail.com>
Subject: QueryParser/StopAnalyzer question
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Let's say we have an index having few documents indexed using
StopAnalyzer.ENGLISH_STOP_WORDS_SET. The user issues two queries:
1) foo:bar
2) baz:"there is"

Let's assume that the first query yields some results because there
are documents matching that query.

The second query contains two stopwords ("there" and "is") and yields
0 results. The reason for this is because when baz:"there is" is
parsed, it ends up as a void query as both "there" and "is" are
stopwords (technically speaking, this is converted to an empty
BooleanQuery having no clauses). So far so good.

However, any of the following combined queries

+foo:bar +baz:"there is"
foo:bar AND baz:"there is"

behave exactly the same way as query +foo:bar, that is, brings back
some results. The second AND part which is supposed to yield no
results is completely ignored.

One might argue that when ANDing both conditions have to be met, that
is, documents having foo=bar and baz being empty have to be retrieved,
as when issued seperately, baz:"there is" yields 0 results.

It seem contradictory as an atomic query component has different
impact on the overall query depending on the context. Is there any
logical explanation for this? Can this be addressed in any way,
preferably without writing own QueryAnalyzer?

If this makes any difference, observed behaviour happens under Lucene v3.0.2.

Regards,
Mindaugas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 14:41:39 2011
Return-Path: <java-user-return-49762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D439747F6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 14:41:39 +0000 (UTC)
Received: (qmail 14167 invoked by uid 500); 17 May 2011 14:41:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14118 invoked by uid 500); 17 May 2011 14:41:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14110 invoked by uid 99); 17 May 2011 14:41:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 14:41:37 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdevgl@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 14:41:29 +0000
Received: by wwi18 with SMTP id 18so444885wwi.5
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 07:41:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=KKEw0ElFZGXL+8lSGa932eHFpr5h3mojeRTaraSbFl4=;
        b=H269ENwRsKY5aChIQQwhDJ2zrA290hp5IaWAlz50ZDB/edThoQ0LceLoXEx8YBxT8l
         JNLGvpw6QUKaCHYUgcSxu9oyReK0mtZepsmHk5mkX2omDPIS4QB2T7H2RgHuqLJ+n9AA
         ZGBeR/rItBaG9NMVCW7jIeqM2Zn37zcQgLvhA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=X0109DC+AzoD8MJQKZj15lMzL/DSMAfteGjRPDZlxbMWYec4ynbGN2/iGu71+9sgCh
         F7qzsoi2AkAbj7zEYpQpQOk1UO4sOzxlRfMulGBJWfNAjqcNMzMt3nMzPwDDLbqmmpLT
         mZJ3L9T9D0bM4iKz40ChFZrH8gd5rkcuud9nQ=
Received: by 10.216.230.213 with SMTP id j63mr3508810weq.20.1305643269398;
        Tue, 17 May 2011 07:41:09 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id bd8sm372805wbb.65.2011.05.17.07.41.08
        (version=SSLv3 cipher=OTHER);
        Tue, 17 May 2011 07:41:08 -0700 (PDT)
Message-ID: <4DD28905.9070207@gmail.com>
Date: Tue, 17 May 2011 16:41:09 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how to create a range query with string parameters
References: <4DD26186.4040408@gmail.com> <001901cc148a$5ddfc450$199f4cf0$@thetaphi.de>
In-Reply-To: <001901cc148a$5ddfc450$199f4cf0$@thetaphi.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Uwe :)

Thank you for your answer ! Now I have another problem. Here is the code 
I use to query the index :

ScoreDoc[] hits = null;
         TopFieldCollector collector = TopFieldCollector.create(new 
Sort(SortField.FIELD_DOC), 200000, true, false, false, false);
         Directory directory = FSDirectory.open(new 
File("/home/user/index"));

         IndexSearcher isearcher = new IndexSearcher(directory);
         Query tQueryCode = new TermQuery(new Term(FIELD_CODE, "CCOM"));
         Query tQueryCodeRef = new TermQuery(new Term(FIELD_CODE_REF, 
"CCOM"));
         Query rQuery = new TermRangeQuery(FIELD_ARTICLE, "l110-1", 
"l146-4", true, true);

         BooleanQuery bQuery = new BooleanQuery();
         bQuery.add(tQueryCode, Occur.MUST);
         bQuery.add(tQueryCodeRef, Occur.MUST);
         bQuery.add(rQuery, Occur.MUST);

         System.out.println(bQuery.toString());

         isearcher.search(bQuery, collector);
         hits = collector.topDocs().scoreDocs;

         System.out.println(hits.length);

The query is : +code:CCOM +codeRef:CCOM +article:[l110-1 TO l146-4]

The hits[] is equal to Zero although there should be hits. I'm using a 
program called lukeall 3.1 which provide
a GUI to query a lucene index. When I copy the query into this program 
and run it, it return a lot of results =o

So I guess I'm missing something. I thought about a missing analyzer but 
I'm not sure...

Regards,
Gary

Le 17/05/2011 14:02, Uwe Schindler a crit :
> Hi,
>
> Query q = new TermRangeQuery(...)
>
> Uwe
>
> -----
> Uwe Schindler
> H.-H.-Meier-Allee 63, D-28213 Bremen
> http://www.thetaphi.de
> eMail: uwe@thetaphi.de


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 15:43:12 2011
Return-Path: <java-user-return-49763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 094874D95
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 15:43:12 +0000 (UTC)
Received: (qmail 77436 invoked by uid 500); 17 May 2011 15:43:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77383 invoked by uid 500); 17 May 2011 15:43:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77375 invoked by uid 99); 17 May 2011 15:43:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 15:43:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 15:43:04 +0000
Received: by iwr19 with SMTP id 19so776932iwr.35
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 08:42:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=HOEm9gwk5r2VxtyBK5zdLUqJViKDEIFcHEgeLeRdIzI=;
        b=CcJpNo2kb2Ym06I8EkfwXWZe5HIjdL6LAITEqMBUptwR6wztjqGywkPXTkVpMkdMBh
         50b/J2QvcVSGTwvcZcyKfTJv0UMlY5aa1nzUFS4uJg7Uc9XVAkgw6Wj1oPHjB/AJgXEl
         clZjDOM9OQUyXQtJmbMAJc+MeE0g5PgR8Hs3I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=tTEX1X4xwaiZiGjAkVHpJv6Br+KsQdQ7ykRnYdueYYkl56+eDHREa/LE78xhwBM2Ir
         WfFAGgpLRUAXR9GREtrnTBmcKKlZqPABpkk6rPAsspVA0ukcZh7/GQLBAwMkNkYmM3fO
         YoWheCJHdXsMY1Czr6Mh/O2E0Q0wtDyjAk7fc=
Received: by 10.42.197.69 with SMTP id ej5mr921879icb.104.1305646964105; Tue,
 17 May 2011 08:42:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.14.7 with HTTP; Tue, 17 May 2011 08:42:24 -0700 (PDT)
In-Reply-To: <4DD28905.9070207@gmail.com>
References: <4DD26186.4040408@gmail.com> <001901cc148a$5ddfc450$199f4cf0$@thetaphi.de>
 <4DD28905.9070207@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 17 May 2011 16:42:24 +0100
Message-ID: <BANLkTikRXs0KseNdLAYG-Mh=OGhW=pcXaw@mail.gmail.com>
Subject: Re: how to create a range query with string parameters
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

It's likely to have something to do with analyzers.  That is the
usually the first thing to come to mind if queries hold upper or mixed
case terms.  Maybe Luke is using an analyzer that matches the one you
used when you indexed your documents.

You can use Luke to see what is being stored in the index.   See also
http://wiki.apache.org/lucene-java/LuceneFAQ#Why_am_I_getting_no_hits_.2BAC=
8_incorrect_hits.3F


Something that looks OK here but might bite you in the future is if
your article fields aren't always in the same format and of the same
length.  The comparison is a simple string based one and if you had,
say, l123-1, l1-123, l19999-999 the range matching might not give you
what you expected.

--
Ian.


On Tue, May 17, 2011 at 3:41 PM, G.Long <jdevgl@gmail.com> wrote:
> Hi Uwe :)
>
> Thank you for your answer ! Now I have another problem. Here is the code =
I
> use to query the index :
>
> ScoreDoc[] hits =3D null;
> =A0 =A0 =A0 =A0TopFieldCollector collector =3D TopFieldCollector.create(n=
ew
> Sort(SortField.FIELD_DOC), 200000, true, false, false, false);
> =A0 =A0 =A0 =A0Directory directory =3D FSDirectory.open(new File("/home/u=
ser/index"));
>
> =A0 =A0 =A0 =A0IndexSearcher isearcher =3D new IndexSearcher(directory);
> =A0 =A0 =A0 =A0Query tQueryCode =3D new TermQuery(new Term(FIELD_CODE, "C=
COM"));
> =A0 =A0 =A0 =A0Query tQueryCodeRef =3D new TermQuery(new Term(FIELD_CODE_=
REF,
> "CCOM"));
> =A0 =A0 =A0 =A0Query rQuery =3D new TermRangeQuery(FIELD_ARTICLE, "l110-1=
", "l146-4",
> true, true);
>
> =A0 =A0 =A0 =A0BooleanQuery bQuery =3D new BooleanQuery();
> =A0 =A0 =A0 =A0bQuery.add(tQueryCode, Occur.MUST);
> =A0 =A0 =A0 =A0bQuery.add(tQueryCodeRef, Occur.MUST);
> =A0 =A0 =A0 =A0bQuery.add(rQuery, Occur.MUST);
>
> =A0 =A0 =A0 =A0System.out.println(bQuery.toString());
>
> =A0 =A0 =A0 =A0isearcher.search(bQuery, collector);
> =A0 =A0 =A0 =A0hits =3D collector.topDocs().scoreDocs;
>
> =A0 =A0 =A0 =A0System.out.println(hits.length);
>
> The query is : +code:CCOM +codeRef:CCOM +article:[l110-1 TO l146-4]
>
> The hits[] is equal to Zero although there should be hits. I'm using a
> program called lukeall 3.1 which provide
> a GUI to query a lucene index. When I copy the query into this program an=
d
> run it, it return a lot of results =3Do
>
> So I guess I'm missing something. I thought about a missing analyzer but =
I'm
> not sure...
>
> Regards,
> Gary
>
> Le 17/05/2011 14:02, Uwe Schindler a =E9crit :
>>
>> Hi,
>>
>> Query q =3D new TermRangeQuery(...)
>>
>> Uwe
>>
>> -----
>> Uwe Schindler
>> H.-H.-Meier-Allee 63, D-28213 Bremen
>> http://www.thetaphi.de
>> eMail: uwe@thetaphi.de
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 16:02:11 2011
Return-Path: <java-user-return-49764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E7FDD4B68
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 16:02:10 +0000 (UTC)
Received: (qmail 23922 invoked by uid 500); 17 May 2011 16:02:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23837 invoked by uid 500); 17 May 2011 16:02:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23692 invoked by uid 99); 17 May 2011 16:02:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 16:02:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdevgl@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 16:01:59 +0000
Received: by wwi18 with SMTP id 18so507937wwi.5
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 09:01:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=+/PvB+b9i5IvvwyuZzC6ZYHyo0LwKKOMMVEmymWlEvQ=;
        b=dqMgcJvmQqeRuxScNIAqRgKeQB3bVbPb3XtdCHsQDpsqH5vi+/VkcsyfEqjVKBkZAN
         /g5HUNj/46dY+JnEhEqq5dEqSqfCE7ftck711P7DKQj91RWuBxOGZexb18xK26SHAszH
         YcKc74vc3iroCcy+cVmXrtjmt8WCcMaDNNO+c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=K40Zc0fOlTDMWMtzkPObfUvpx0OfLM2gCXKR/1+wMrPNuxY3XGBsRhjvGYHnbHvQsk
         okyUZv26W4D7ADyZRudhhDpNALM3SninvsYPRr1hsJsuKbMja7+OQC2d4n8L6xVStRJ3
         +rqF6YdsTNtkvYwTGmifipVqSzbaTOlwYjqH0=
Received: by 10.227.91.81 with SMTP id l17mr836629wbm.29.1305648098864;
        Tue, 17 May 2011 09:01:38 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id bo14sm420715wbb.11.2011.05.17.09.01.38
        (version=SSLv3 cipher=OTHER);
        Tue, 17 May 2011 09:01:38 -0700 (PDT)
Message-ID: <4DD29BE3.3000300@gmail.com>
Date: Tue, 17 May 2011 18:01:39 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how to create a range query with string parameters
References: <4DD26186.4040408@gmail.com> <001901cc148a$5ddfc450$199f4cf0$@thetaphi.de> <4DD28905.9070207@gmail.com> <BANLkTikRXs0KseNdLAYG-Mh=OGhW=pcXaw@mail.gmail.com>
In-Reply-To: <BANLkTikRXs0KseNdLAYG-Mh=OGhW=pcXaw@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I added a standard analyzer and a Query Parser to parse each boolean 
clause of my query and i got some results :)
But now there are some strange behaviors.

the following queries :

+code:CCOM +article:"l123-12"
+code:CCOM +article:"l123-13"
+code:CCOM +article:"l123-14"

return one result.

However, the following query :

+code:CCOM +article[l123-12 TO l123-14]

return nothing =(

With other parameters, the range query works almost fine but some 
results are missing.
What could be the problem? Could it have something to do with the way 
the documents are indexed?
(the use of Field.Index.ANALYZED for example)

Thank you for your help :)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 17:02:11 2011
Return-Path: <java-user-return-49765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A402A4451
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 17:02:11 +0000 (UTC)
Received: (qmail 38464 invoked by uid 500); 17 May 2011 17:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38314 invoked by uid 500); 17 May 2011 17:02:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38301 invoked by uid 99); 17 May 2011 17:02:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 17:02:08 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 17:02:00 +0000
Received: by iwr19 with SMTP id 19so881023iwr.35
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 10:01:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=VJqbNzExDNP3tQQ1/aNeFX+Hjn2KYjZ1Mn7y6FegPT4=;
        b=SXnF1KDdS+R7kRfd+bvHB58PAPAYMtRiumzfnFy6oZKU/Z/mduMuQHBLH9A2j6mBG7
         g7QwfEPbSdVTssGxXu4GtLu+udZ7lheJWRksGSXXvSKm/Peg5z1v3xMl3j+2xRB5rv3q
         ANAie8Ps+wzKOC54b36PugPxwjjJWVqimPhH8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=FVwY2EDn1JcLeoo5DKLzZfLhgJ2X5FBCryVNCVByeBYvJkJNACM/wLnRpxmOb1Y/c1
         DRotJYuU41ReRyDvhALzgh+zRuvDsGn/dqHzcrLw6jtXTDlu9dhcLzFsMINKKg4RCVoZ
         E9dNq/w3EYKvJ3EM7khJDMvcSrxPrYGMFwLms=
Received: by 10.231.186.26 with SMTP id cq26mr591981ibb.133.1305651647474;
 Tue, 17 May 2011 10:00:47 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.14.7 with HTTP; Tue, 17 May 2011 10:00:27 -0700 (PDT)
In-Reply-To: <4DD29BE3.3000300@gmail.com>
References: <4DD26186.4040408@gmail.com> <001901cc148a$5ddfc450$199f4cf0$@thetaphi.de>
 <4DD28905.9070207@gmail.com> <BANLkTikRXs0KseNdLAYG-Mh=OGhW=pcXaw@mail.gmail.com>
 <4DD29BE3.3000300@gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 17 May 2011 18:00:27 +0100
Message-ID: <BANLkTimpdtLFZOggCnpS9gQXvfyZ4eVHoA@mail.gmail.com>
Subject: Re: how to create a range query with string parameters
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Could it be as simple as a missing colon after article in +code:CCOM
+article[l123-12 TO l123-14]?

If not, double check analyzers, see what Luke shows as indexed terms
for that field, work through the FAQ info posted earlier.  And play
with quotes - sometimes you show your article values quoted, sometimes
not.


--
Ian.


On Tue, May 17, 2011 at 5:01 PM, G.Long <jdevgl@gmail.com> wrote:
> I added a standard analyzer and a Query Parser to parse each boolean clause
> of my query and i got some results :)
> But now there are some strange behaviors.
>
> the following queries :
>
> +code:CCOM +article:"l123-12"
> +code:CCOM +article:"l123-13"
> +code:CCOM +article:"l123-14"
>
> return one result.
>
> However, the following query :
>
> +code:CCOM +article[l123-12 TO l123-14]
>
> return nothing =(
>
> With other parameters, the range query works almost fine but some results
> are missing.
> What could be the problem? Could it have something to do with the way the
> documents are indexed?
> (the use of Field.Index.ANALYZED for example)
>
> Thank you for your help :)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 17:52:23 2011
Return-Path: <java-user-return-49766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DF95341B8
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 17:52:23 +0000 (UTC)
Received: (qmail 36002 invoked by uid 500); 17 May 2011 17:52:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35956 invoked by uid 500); 17 May 2011 17:52:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35948 invoked by uid 99); 17 May 2011 17:52:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 17:52:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdevgl@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 17:52:14 +0000
Received: by wwi18 with SMTP id 18so596859wwi.5
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 10:51:53 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=8vei1bMC2s9O6nJGO0WLs0j0INC8aRPfDPCh6bbbVwI=;
        b=OUENo0t/MhcZgvJu6hjCUDATW+PpMxSLgP9+Kju3XrwTZxIIlkApBX+nJL04QZMDjY
         jxfojR1squ61sU2DnxUxUmZxJA2S80GPZqA6HyIEQ93XU8ZGAWTFjpofFtMJWSNisY22
         Fm0mXWk/bH5FyVHTSlF7g5QpO3c6RgEGsJ/as=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=RyPHTPGJtCSnHm4u8zeWJfnbcaRvlY5R5bwSVPVlYqYPXXQmLv+w11IQyPGhNZEMd4
         hNXrQqgmXBrVeW2nJLGgeVrzDbfgpasa9st9rMOLmL2+HO1KbcOYinf8b8YgMi2wNjWw
         DUPIaNTyEyxaZDuG6xA93PvupqNck1ZCFH99o=
Received: by 10.227.28.129 with SMTP id m1mr941707wbc.20.1305654712830;
        Tue, 17 May 2011 10:51:52 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id l24sm478757wbc.47.2011.05.17.10.51.52
        (version=SSLv3 cipher=OTHER);
        Tue, 17 May 2011 10:51:52 -0700 (PDT)
Message-ID: <4DD2B5B9.20407@gmail.com>
Date: Tue, 17 May 2011 19:51:53 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: how to create a range query with string parameters
References: <4DD26186.4040408@gmail.com> <001901cc148a$5ddfc450$199f4cf0$@thetaphi.de> <4DD28905.9070207@gmail.com> <BANLkTikRXs0KseNdLAYG-Mh=OGhW=pcXaw@mail.gmail.com> <4DD29BE3.3000300@gmail.com> <BANLkTimpdtLFZOggCnpS9gQXvfyZ4eVHoA@mail.gmail.com>
In-Reply-To: <BANLkTimpdtLFZOggCnpS9gQXvfyZ4eVHoA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

I set the field article to NOT_ANALYZED and I didn't quoted the article 
values in the range part of the query and it looks like it works better now.

However, some results are still missing. For exemple, sometimes a range 
like [l220-2 TO l220-10] will not return any results (although i'm sure 
there are results for this range).

At the beginning I thought that was because the range was between 220 
and 220 but I double checked a range like [a710-4 TO a710-10] and it 
returned results... :/

So it looks like there is another problem. I have to investigate more =)

Thank you for your help :)

Regards,

Gary

Le 17/05/2011 19:00, Ian Lea a crit :
> Could it be as simple as a missing colon after article in +code:CCOM
> +article[l123-12 TO l123-14]?
>
> If not, double check analyzers, see what Luke shows as indexed terms
> for that field, work through the FAQ info posted earlier.  And play
> with quotes - sometimes you show your article values quoted, sometimes
> not.
>
>
> --
> Ian.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 18:08:45 2011
Return-Path: <java-user-return-49767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 33AF94C46
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 18:08:45 +0000 (UTC)
Received: (qmail 69440 invoked by uid 500); 17 May 2011 18:08:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69391 invoked by uid 500); 17 May 2011 18:08:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69382 invoked by uid 99); 17 May 2011 18:08:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 18:08:43 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 18:08:35 +0000
Received: by qwj9 with SMTP id 9so540811qwj.35
        for <java-user@lucene.apache.org>; Tue, 17 May 2011 11:08:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=ByznjaaHYZFP372rMEo1RlgnerV48u73oUYHsjR/wPg=;
        b=OQVJ5jGY+pGxArl3hBKJQtiMF/yCblNUEB6ac7qyjkJkfZveiqyHmhcfMsJpF6ICl/
         v+HceYZaYRRGkXK7TR61Np3A0uT4RVM9QjAvvZO2ne20iKWOBjvhsscJMdQNqlPDGT4C
         u9qYlH8VLMubSMKKEPYF2HOIXDfSn74/0YNxQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=TXCdfB51BT55EisbGXin3KoAZJiCVEKXCMapr/wZO+eWcvGdwIzXiSlsk1hhHX6i4L
         Qdd7zMRva+Ha0lbG8/H6MdazkhbxW8bNuKX7M3kFTCcp+q1cINPuE05ubZzp55qonKlP
         0tcuHEeIgG4aIK7UtXzy8otrtquHOtPqB0Kbk=
MIME-Version: 1.0
Received: by 10.229.4.203 with SMTP id 11mr722029qcs.72.1305655694503; Tue, 17
 May 2011 11:08:14 -0700 (PDT)
Received: by 10.229.248.197 with HTTP; Tue, 17 May 2011 11:08:14 -0700 (PDT)
In-Reply-To: <4DD2B5B9.20407@gmail.com>
References: <4DD26186.4040408@gmail.com>
	<001901cc148a$5ddfc450$199f4cf0$@thetaphi.de>
	<4DD28905.9070207@gmail.com>
	<BANLkTikRXs0KseNdLAYG-Mh=OGhW=pcXaw@mail.gmail.com>
	<4DD29BE3.3000300@gmail.com>
	<BANLkTimpdtLFZOggCnpS9gQXvfyZ4eVHoA@mail.gmail.com>
	<4DD2B5B9.20407@gmail.com>
Date: Tue, 17 May 2011 14:08:14 -0400
Message-ID: <BANLkTimAMmFq4m2Xjy_K7K0nsiRL9edrVA@mail.gmail.com>
Subject: Re: how to create a range query with string parameters
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Actually, there are no results in the range [l220-2 TO l220-10]

This is basically a string comparison, and l220-2 > l220-10 so
this range would never match.

Best
Erick

On Tue, May 17, 2011 at 1:51 PM, G.Long <jdevgl@gmail.com> wrote:
> I set the field article to NOT_ANALYZED and I didn't quoted the article
> values in the range part of the query and it looks like it works better n=
ow.
>
> However, some results are still missing. For exemple, sometimes a range l=
ike
> [l220-2 TO l220-10] will not return any results (although i'm sure there =
are
> results for this range).
>
> At the beginning I thought that was because the range was between 220 and
> 220 but I double checked a range like [a710-4 TO a710-10] and it returned
> results... :/
>
> So it looks like there is another problem. I have to investigate more =3D=
)
>
> Thank you for your help :)
>
> Regards,
>
> Gary
>
> Le 17/05/2011 19:00, Ian Lea a =E9crit :
>>
>> Could it be as simple as a missing colon after article in +code:CCOM
>> +article[l123-12 TO l123-14]?
>>
>> If not, double check analyzers, see what Luke shows as indexed terms
>> for that field, work through the FAQ info posted earlier. =A0And play
>> with quotes - sometimes you show your article values quoted, sometimes
>> not.
>>
>>
>> --
>> Ian.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 17 20:03:11 2011
Return-Path: <java-user-return-49768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AD6814C4D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 17 May 2011 20:03:11 +0000 (UTC)
Received: (qmail 27085 invoked by uid 500); 17 May 2011 20:03:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26986 invoked by uid 500); 17 May 2011 20:03:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26978 invoked by uid 99); 17 May 2011 20:03:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 17 May 2011 20:03:07 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [66.94.237.91] (HELO nm26.access.bullet.mail.mud.yahoo.com) (66.94.237.91)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 17 May 2011 20:02:57 +0000
Received: from [66.94.237.127] by nm26.access.bullet.mail.mud.yahoo.com with NNFMP; 17 May 2011 20:02:35 -0000
Received: from [66.94.237.117] by tm2.access.bullet.mail.mud.yahoo.com with NNFMP; 17 May 2011 20:02:35 -0000
Received: from [127.0.0.1] by omp1022.access.mail.mud.yahoo.com with NNFMP; 17 May 2011 20:02:35 -0000
X-Yahoo-Newman-Id: 321696.81507.bm@omp1022.access.mail.mud.yahoo.com
Received: (qmail 12754 invoked from network); 17 May 2011 20:02:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=rogers.com;
  h=DKIM-Signature:Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:From:Content-Type:Subject:Date:Message-Id:To:Mime-Version:X-Mailer;
  b=gjqoJF03DU+fvPnb0KvwduJgp4hPXYHsE3R0lSgJHtPI1baCKST6XPtG4UuaTn0Kh0qz8eslBPMvXO2MfhcgIYkkLu/2xfE6Nk4F2BDFeIJUPRv4rW26wPtUufZgydOVfS/Q8CBHQPPQChR1T+Tqng5IvGaHMcFCK7XnKZ3MvWs=  ;
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=rogers.com; s=s1024; t=1305662554; bh=bGyvlT1FdsiP1eVEmJBef6EYR0RRWYpH2HLK5f8r/Yk=; h=Received:X-Yahoo-SMTP:X-YMail-OSG:X-Yahoo-Newman-Property:From:Content-Type:Subject:Date:Message-Id:To:Mime-Version:X-Mailer; b=xORpAnM6rloF0A9ynAQ+hWR+DM2owighwG6qkgesW/OpDwfM8lEhQeBSlcjNKkJPb3OjOjiO7Y19lIZTtBbjJQhJa7fOFOvu5D9P4xEtcwhs21URhxpMCTb3KEHEyFxEmZnPsSPA7UAl4miXjehUWLtQ5/y4nCURF3j/DQn8O7s=
Received: from [192.168.1.2] (lancejackson@174.118.240.94 with plain)
        by smtp108.rog.mail.bf1.yahoo.com with SMTP; 17 May 2011 13:02:34 -0700 PDT
X-Yahoo-SMTP: NKZqM0iswBB5jtpDkvqFjHbLHTazmNvl40pb7Cpplp7jiHNh
X-YMail-OSG: .7WYGzAVM1lIk5UNe1_jXyYBZiOLKFtDGl5hsvHZ_WjXvjD
 3JHkkU6CuPiXIEqz3z.tB_nmizLK7SI6nr5NGtJyhqoDkmTX4bCAIwaW1TAa
 ePJqrNVJwaL6NQI6Fdqtvo__KyeGwzCSlEv9hYSFky6Rbiu.xgAkNz9iSjtF
 9jnoAOGLl6CyZv2hMEOLZH7HdtKdPUEnSshH7_yNY4BszHbvfyRD226Km5TE
 UTeMVxbKAHTwX21KI0.chTolASzn_t_oGVBnmqyZvvSmmt8XYfEE2b_oZ_Xz
 P.PL5BFarWfk1tvzNqnhsC_WPrY1bFCKLIbHvqTAKPWcydsB7UWKmLMjUtzo
 .LRohMYVzBed3p294_HiIh9SAc1pHlxCk1L90hH8-
X-Yahoo-Newman-Property: ymail-3
From: Lance <lancejackson@rogers.com>
Content-Type: multipart/alternative; boundary=Apple-Mail-14-937839823
Subject: I need an available solr lucene consultant
Date: Tue, 17 May 2011 16:02:34 -0400
Message-Id: <0B1C8C3B-CA5D-4E69-889C-47C5E62CCB23@rogers.com>
To: java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

--Apple-Mail-14-937839823
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=windows-1252

Hi,

I am looking for an experienced and skilled Solr & Lucene =
developer/consultant to work on a software project incorporating natural =
language processing and machine learning algorithms. As part of a larger =
NLP/AI project that is under way, we need someone to install, refine and =
optimize Solr and Lucene for our website. The data being analyzed will =
be from user-generated textual discussions around a multitude of topics =
that will continuously be updated.
You must be able to work in a LAMP environment with other developers, be =
smart, reliable, and a self-starter with excellent problem solving and =
analytical abilities. You must have a solid grasp of English =96 written =
and verbal.=20

Please note that I am a start-up and I am not going to be able to pay =
what a large established company can pay.

Thank you,

Lance=20

---------------------------------
Lance




--Apple-Mail-14-937839823--

From java-user-return-49769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 18 19:31:28 2011
Return-Path: <java-user-return-49769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 031F16852
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 18 May 2011 19:31:28 +0000 (UTC)
Received: (qmail 66226 invoked by uid 500); 18 May 2011 19:31:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66184 invoked by uid 500); 18 May 2011 19:31:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66176 invoked by uid 99); 18 May 2011 19:31:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 May 2011 19:31:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of heimann.richard@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 May 2011 19:31:17 +0000
Received: by wwk4 with SMTP id 4so5300828wwk.5
        for <java-user@lucene.apache.org>; Wed, 18 May 2011 12:30:57 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=iyDpXiurEAepWzCo8BjsUZNG7jgatErRWmX9kf8tk3U=;
        b=ltOrJh3WSCRcLQXxVc1VkGLtFbLW6f/mPxfk82/sKundw9CxmVWSMAwSsmcfgIWYP4
         2g4ddnHFtk5QMybvh0bWe8nVYSGsEEsgCvQjDDHO6pt0KE2KpZeZUT36BcqZ/4d31zCv
         nH+EzYsE8nLRgBlRDX71ZEtMkFn3JkXGvofpw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Sj2NgL6Pd3MiEgpfmjM9f6gonEICVfuqZRDqtahnWLVr7Jz3sZF7At40DFRM4WTolx
         lK1wkPw4MiDzX7NeBFZm0mZp1L3jKuAAxCv6QPSPrN7WY5Lv7HdF0t6RXLsGEVN3HzSl
         Xk74YtHOgVe5FW9Ij2OC9iT8Mbc+AgMJLcK2I=
Received: by 10.227.128.20 with SMTP id i20mr2293746wbs.3.1305747057092; Wed,
 18 May 2011 12:30:57 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.147.199 with HTTP; Wed, 18 May 2011 12:30:37 -0700 (PDT)
In-Reply-To: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com>
From: Rich Heimann <heimann.richard@gmail.com>
Date: Wed, 18 May 2011 15:30:37 -0400
Message-ID: <BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com>
Subject: Please help me with a basic question...
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368339ba8127f804a391ed21
X-Virus-Checked: Checked by ClamAV on apache.org

--0016368339ba8127f804a391ed21
Content-Type: text/plain; charset=ISO-8859-1

Hello all,

This is my first time on the list and my first question...forgive me it this
has been hacked out in the past.

We have set up Lucene/Solr and are getting somewhat spurious results. It
appears to be a result of heterogeneous document sizes. In other words, the
top results are sometimes (at least when the user is using typical search
terms) monopolized by a distinct type of document, which is otherwise small
(in number of terms). It appears that TF/IDF even with the cosine similarity
is sensitive to document size. I have run some tests and it in fact does
appear to be the case.

(Number of times the term appears in a document)/(Total Number of terms in
that document) * Log10(Number of total documents/Number of times search term
appears in all documents)

Are there any suggestions or best practices to deal with the intrinsic
heterogeneity in a corpus.

Thank you,
Rich

--0016368339ba8127f804a391ed21--

From java-user-return-49770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 18 19:35:39 2011
Return-Path: <java-user-return-49770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82AA7681D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 18 May 2011 19:35:39 +0000 (UTC)
Received: (qmail 75114 invoked by uid 500); 18 May 2011 19:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75074 invoked by uid 500); 18 May 2011 19:35:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75066 invoked by uid 99); 18 May 2011 19:35:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 May 2011 19:35:37 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [212.227.126.171] (HELO moutng.kundenserver.de) (212.227.126.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 18 May 2011 19:35:29 +0000
Received: from ip-2-205-116-188.web.vodafone.de (ip-2-205-116-188.web.vodafone.de [2.205.116.188])
	by mrelayeu.kundenserver.de (node=mrbap4) with ESMTP (Nemesis)
	id 0M5850-1PTPS02g5G-00zBa7; Wed, 18 May 2011 21:35:07 +0200
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Please help me with a basic question...
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com>
Date: Wed, 18 May 2011 21:34:57 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com> <BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)
X-Provags-ID: V02:K0:fvdkCZ+3LhMIEQE2mSqukEOvlTypKWJbi3OW7IJTSTS
 CYvuHO7vu9aXNUDoaMPy9ouef+nF3G0YNw5iLSjFXm4VRtRzm1
 IM+tZFYOOkFFkrDQdga6KDuBvuNcOq1glyZQlY0SbHwzhTCRO6
 V+VSWITdRKuufiZro1T8LLzmm+863gIb9K3ql0jg2DED3zgx2N
 3OhVi8YyWWCCXwGxhpg5OCbedFZn7+Zrjk6Dz4mhC4=

Richard,

in SOLR at least there's an analyzer that avoids duplicates.
I think that would solve it.
There's also somewhere the option to ignore IDF (in similarity? in =
solrconfig?).

paul


Le 18 mai 2011 =E0 21:30, Rich Heimann a =E9crit :

> Hello all,
>=20
> This is my first time on the list and my first question...forgive me =
it this
> has been hacked out in the past.
>=20
> We have set up Lucene/Solr and are getting somewhat spurious results. =
It
> appears to be a result of heterogeneous document sizes. In other =
words, the
> top results are sometimes (at least when the user is using typical =
search
> terms) monopolized by a distinct type of document, which is otherwise =
small
> (in number of terms). It appears that TF/IDF even with the cosine =
similarity
> is sensitive to document size. I have run some tests and it in fact =
does
> appear to be the case.
>=20
> (Number of times the term appears in a document)/(Total Number of =
terms in
> that document) * Log10(Number of total documents/Number of times =
search term
> appears in all documents)
>=20
> Are there any suggestions or best practices to deal with the intrinsic
> heterogeneity in a corpus.
>=20
> Thank you,
> Rich


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 02:15:08 2011
Return-Path: <java-user-return-49771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0E8BE45D6
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 02:15:06 +0000 (UTC)
Received: (qmail 86539 invoked by uid 500); 19 May 2011 02:15:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86504 invoked by uid 500); 19 May 2011 02:15:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86496 invoked by uid 99); 19 May 2011 02:15:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 02:15:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [132.249.20.60] (HELO billthecat.sdsc.edu) (132.249.20.60)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 02:14:54 +0000
Received: from [192.168.11.51] (c-67-180-28-210.hsd1.ca.comcast.net [67.180.28.210])
	(authenticated bits=0)
	by billthecat.sdsc.edu (8.14.2/8.14.1/SDSCrelay/16) with ESMTP id p4J2EVb4018162
	(version=TLSv1/SSLv3 cipher=RC4-MD5 bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 18 May 2011 19:14:32 -0700 (PDT)
Message-ID: <4DD47D00.2050605@sdsc.edu>
Date: Wed, 18 May 2011 19:14:24 -0700
From: Christopher Condit <condit@sdsc.edu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Ranking docs with all terms higher
References: <BANLkTikQ7kBJUk0Cujw3zDeaoGGfzXktGA@mail.gmail.com>
In-Reply-To: <BANLkTikQ7kBJUk0Cujw3zDeaoGGfzXktGA@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Let's say I have the query
(nacho OR foo OR bar)

and some documents (single field with norms off)
doc a: nacho nacho nacho nacho
doc b: foo bar bar
doc c: nacho foo bar

I'm interested in all of these documents but I would like c to score the
highest since it contains all of the search terms, b to score second
because it has two, and a to score the third because it has one. What's
the best way to get Lucene to do this?

Thanks,
-Chris



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 09:22:44 2011
Return-Path: <java-user-return-49772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2EC464379
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 09:22:44 +0000 (UTC)
Received: (qmail 67702 invoked by uid 500); 19 May 2011 09:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67651 invoked by uid 500); 19 May 2011 09:22:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67643 invoked by uid 99); 19 May 2011 09:22:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 09:22:41 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cdoronc@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 09:22:34 +0000
Received: by yia28 with SMTP id 28so1206646yia.35
        for <java-user@lucene.apache.org>; Thu, 19 May 2011 02:22:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=3dtF3Lx8PJH8bDBzsBJBxZPx6SXNHwIP0Qfsa4E8Ry0=;
        b=viRlPM1kbJ1vCgU5Zr4/4E1H8mBP6H9KL1SKnxwPkRQn6YOckGonK2AtdcHKa5nwvY
         QTYUvCOlnJVbRjkT/aoN2QXtlymdihEFPFiQdjfxvOeM06PayI3BYzRdKPes8v2WIZrh
         uz4kiPCambvbCEVs27pNrac6gw7LfhMW3NJRA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=UVOjFKRokX9Ok00Hzon/0yM3C9QG97Jjh/01Nj1ld0PYlWQvSoJ+HIDV3WcfTUcO51
         lZEzith/LYb2UpWccqsbSOFWVecNKPGTw/X+jd/Ut+R8Rai8XY9x1WER+X1JsOGkvw0B
         So7wjepBk8Rui2jUwS3CU6siswMLvOTknmALw=
MIME-Version: 1.0
Received: by 10.91.76.4 with SMTP id d4mr2306276agl.42.1305796933548; Thu, 19
 May 2011 02:22:13 -0700 (PDT)
Received: by 10.90.120.1 with HTTP; Thu, 19 May 2011 02:22:13 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F240126D947@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com>
	<614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
	<alpine.DEB.2.00.1105101622420.26571@bester>
	<614C529D389A5944B351F7DFB7594F240126D947@uksrpblkexb01.detica.com>
Date: Thu, 19 May 2011 12:22:13 +0300
Message-ID: <BANLkTimVB3nrNP92tuwSiO0Go-0G2MVNbg@mail.gmail.com>
Subject: Re: SpanNearQuery - inOrder parameter
From: Doron Cohen <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6470ef45f795704a39d8a07
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e6470ef45f795704a39d8a07
Content-Type: text/plain; charset=ISO-8859-1

Hi Greg,

I created http://issues.apache.org/jira/browse/LUCENE-3120 for this problem,
and attached there a more general test that exposes this problem, based on
your test case.

I am not sure yet that this is indeed  a problem to be fixed with regard to
span queries (see more there in JIRA) but at least I would like the test
case to be in JIRA.

Could you provide some context on why is this a problem for you?
That is, what is preventing you from specifying in-order?

Doron

On Tue, May 17, 2011 at 12:56 PM, Gregory Tarr <Gregory.tarr@detica.com>wrote:

> Anyone else able to reply to this?
>
> Thanks
>
> Greg
>
> -----Original Message-----
> From: Gregory Tarr
> Sent: 13 May 2011 15:46
> To: 'java-user@lucene.apache.org'
> Subject: RE: SpanNearQuery - inOrder parameter
>
> Chris, and others
>
> Thanks for your reply. In effect what you are saying is that
> SpanNearQuery works as expected, and I should set inOrder=true to obtain
> the behaviour I require, even though I don't care about the order?
>
> Thanks
>
> Greg
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: 11 May 2011 00:32
> To: java-user@lucene.apache.org
> Subject: RE: SpanNearQuery - inOrder parameter
>
>
>
> : I attach a junit test which shows strange behaviour of the inOrder
> : parameter on the SpanNearQuery constructor, using Lucene 2.9.4.
> :
> : My understanding of this parameter is that true forces the order and
> : false doesn't care about the order.
> :
> : Using true always works. However using false works fine when the terms
> : in the query are distinct, but if they are equivalent, e.g. searching
> : for "john john", I do not get the expected results. The workaround
> seems
> : to be to always use true for queries with repeated terms.
>
> I don't think the situation of "overlapping spans" has changed much
> since this thread...
>
> http://search.lucidimagination.com/search/document/ee23395e5a93c525/non_
> overlapping_span_queries#868b3a3ec6431afc
>
> the crux of hte issue (as i recall) is that there is really no
> conecptual reason to why a query for "'john' near 'john', in any order,
> with slop of Z" shouldn't match a doc that contains only one instance of
> "john" ... the first SpanTermQuery says "i found a match at position X"
> the second SpanTermQuery says "i found a match at position Y" and the
> SpanNearQuery says "the differnece between X and Y is less then Z"
> therefore i have a match.  (The SpanNearQuery can't fail just because X
> and Y are the same -- they might be two distinct term instances, with
> differnet payloads perhaps, that just happen to have the same position).
>
> However: if true==inOrder case works because the SpanNearQuery enforces
> that  "X must be less then Y" so the same term can't ever match twice.
>
>
>
> -Hoss
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received this
> email in error please notify the sender and destroy it immediately.
> Statements of intent shall only become binding when confirmed in hard copy
> by an authorised signatory.  The contents of this email may relate to
> dealings with other companies within the Detica Limited group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,
> England.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e6470ef45f795704a39d8a07--

From java-user-return-49773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 09:26:50 2011
Return-Path: <java-user-return-49773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4B499441B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 09:26:50 +0000 (UTC)
Received: (qmail 76556 invoked by uid 500); 19 May 2011 09:26:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76481 invoked by uid 500); 19 May 2011 09:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76473 invoked by uid 99); 19 May 2011 09:26:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 09:26:47 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [207.126.144.118] (HELO eu1sys200aob105.obsmtp.com) (207.126.144.118)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 09:26:40 +0000
Received: from proxy03.detica.com ([193.36.230.103]) (using TLSv1) by eu1sys200aob105.postini.com ([207.126.147.11]) with SMTP
	ID DSNKTdTiOh5YrlYDplrMCbhKlhWY51Cr/ADF@postini.com; Thu, 19 May 2011 09:26:19 UTC
Received: from blackex05.detica.com ([10.1.1.10]) by proxy03.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 19 May 2011 10:26:15 +0100
Received: from uksrpblkexb01.detica.com ([10.1.1.38]) by blackex05.detica.com with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 19 May 2011 10:26:15 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: SpanNearQuery - inOrder parameter
Date: Thu, 19 May 2011 10:26:11 +0100
Message-ID: <614C529D389A5944B351F7DFB7594F240126DD4F@uksrpblkexb01.detica.com>
In-Reply-To: <BANLkTimVB3nrNP92tuwSiO0Go-0G2MVNbg@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SpanNearQuery - inOrder parameter
Thread-Index: AcwWBlAFSl4pVugNR4GK33XJnC+jeQAAEIvA
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com><614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com><alpine.DEB.2.00.1105101622420.26571@bester><614C529D389A5944B351F7DFB7594F240126D947@uksrpblkexb01.detica.com> <BANLkTimVB3nrNP92tuwSiO0Go-0G2MVNbg@mail.gmail.com>
From: "Gregory Tarr" <Gregory.tarr@detica.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 May 2011 09:26:15.0807 (UTC) FILETIME=[CD5EF8F0:01CC1606]
X-Virus-Checked: Checked by ClamAV on apache.org

Doron

We let our users decide whether they want to force the order or not, so
in effect they pass in "inOrder".

I would have to detect a repeated term and change the parameter as a
result of that in order to workround this - I'd rather not do that
though.

Thanks

Greg

-----Original Message-----
From: Doron Cohen [mailto:cdoronc@gmail.com]=20
Sent: 19 May 2011 10:22
To: java-user@lucene.apache.org
Subject: Re: SpanNearQuery - inOrder parameter

Hi Greg,

I created http://issues.apache.org/jira/browse/LUCENE-3120 for this
problem, and attached there a more general test that exposes this
problem, based on your test case.

I am not sure yet that this is indeed  a problem to be fixed with regard
to span queries (see more there in JIRA) but at least I would like the
test case to be in JIRA.

Could you provide some context on why is this a problem for you?
That is, what is preventing you from specifying in-order?

Doron

On Tue, May 17, 2011 at 12:56 PM, Gregory Tarr
<Gregory.tarr@detica.com>wrote:

> Anyone else able to reply to this?
>
> Thanks
>
> Greg
>
> -----Original Message-----
> From: Gregory Tarr
> Sent: 13 May 2011 15:46
> To: 'java-user@lucene.apache.org'
> Subject: RE: SpanNearQuery - inOrder parameter
>
> Chris, and others
>
> Thanks for your reply. In effect what you are saying is that=20
> SpanNearQuery works as expected, and I should set inOrder=3Dtrue to=20
> obtain the behaviour I require, even though I don't care about the
order?
>
> Thanks
>
> Greg
>
> -----Original Message-----
> From: Chris Hostetter [mailto:hossman_lucene@fucit.org]
> Sent: 11 May 2011 00:32
> To: java-user@lucene.apache.org
> Subject: RE: SpanNearQuery - inOrder parameter
>
>
>
> : I attach a junit test which shows strange behaviour of the inOrder
> : parameter on the SpanNearQuery constructor, using Lucene 2.9.4.
> :
> : My understanding of this parameter is that true forces the order and
> : false doesn't care about the order.
> :
> : Using true always works. However using false works fine when the=20
> terms
> : in the query are distinct, but if they are equivalent, e.g.=20
> searching
> : for "john john", I do not get the expected results. The workaround=20
> seems
> : to be to always use true for queries with repeated terms.
>
> I don't think the situation of "overlapping spans" has changed much=20
> since this thread...
>
> http://search.lucidimagination.com/search/document/ee23395e5a93c525/no
> n_ overlapping_span_queries#868b3a3ec6431afc
>
> the crux of hte issue (as i recall) is that there is really no=20
> conecptual reason to why a query for "'john' near 'john', in any=20
> order, with slop of Z" shouldn't match a doc that contains only one=20
> instance of "john" ... the first SpanTermQuery says "i found a match
at position X"
> the second SpanTermQuery says "i found a match at position Y" and the=20
> SpanNearQuery says "the differnece between X and Y is less then Z"
> therefore i have a match.  (The SpanNearQuery can't fail just because=20
> X and Y are the same -- they might be two distinct term instances,=20
> with differnet payloads perhaps, that just happen to have the same
position).
>
> However: if true=3D=3DinOrder case works because the SpanNearQuery=20
> enforces that  "X must be less then Y" so the same term can't ever
match twice.
>
>
>
> -Hoss
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> Please consider the environment before printing this email.
>
> This message should be regarded as confidential. If you have received=20
> this email in error please notify the sender and destroy it
immediately.
> Statements of intent shall only become binding when confirmed in hard=20
> copy by an authorised signatory.  The contents of this email may=20
> relate to dealings with other companies within the Detica Limited
group of companies.
>
> Detica Limited is registered in England under No: 1337451.
>
> Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP,=20
> England.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Please consider the environment before printing this email.

This message should be regarded as confidential. If you have received thi=
s email in error please notify the sender and destroy it immediately.
Statements of intent shall only become binding when confirmed in hard cop=
y by an authorised signatory.  The contents of this email may relate to d=
ealings with other companies within the Detica Limited group of companies=
=2E

Detica Limited is registered in England under No: 1337451.

Registered offices: Surrey Research Park, Guildford, Surrey, GU2 7YP, Eng=
land.
=0D

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 10:10:19 2011
Return-Path: <java-user-return-49774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1169841EC
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 10:10:19 +0000 (UTC)
Received: (qmail 44428 invoked by uid 500); 19 May 2011 10:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44390 invoked by uid 500); 19 May 2011 10:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44380 invoked by uid 99); 19 May 2011 10:10:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 10:10:16 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cdoronc@gmail.com designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 10:10:10 +0000
Received: by gwj22 with SMTP id 22so1214187gwj.35
        for <java-user@lucene.apache.org>; Thu, 19 May 2011 03:09:49 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=U7JCCw2VNx5uReBphHcnhZE/tybvh7pcRqIQrEeSEqQ=;
        b=dBT5xwdy+0ysb832EcnIos6+ieoHXjsPh1/M3uM8zZujBqOB557ZgCQLBDqWOt01u/
         UD4RuaYmsLyksYFaUxE4EhaZ0LiSU/eavUQ2QWVOajIJgaTMfunvOu2Zr3jmyjA/y7RA
         R8JUsc6KrCgZIVH0gr5SEYO5EJRQjCLaYXUR0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=pj7AngZDuvWOAVFFXdsI6dpEpMU9JekJVe4uNLCJUqSQoBZaIFlbB705wV0+kCSGuB
         66QRpgF5SPBwPmRt4kbmOE27YSgSn7DnYKAnwopOzlib7ddhzsbJ6MgJelSdDhesqv8U
         04AqW/wB1HFLHW9YbPhx/NHspw91q1DPt/Lf0=
MIME-Version: 1.0
Received: by 10.91.163.4 with SMTP id q4mr2302881ago.96.1305799789284; Thu, 19
 May 2011 03:09:49 -0700 (PDT)
Received: by 10.90.120.1 with HTTP; Thu, 19 May 2011 03:09:49 -0700 (PDT)
In-Reply-To: <614C529D389A5944B351F7DFB7594F240126DD4F@uksrpblkexb01.detica.com>
References: <614C529D389A5944B351F7DFB7594F240121F737@uksrpblkexb01.detica.com>
	<614C529D389A5944B351F7DFB7594F240121F73B@uksrpblkexb01.detica.com>
	<alpine.DEB.2.00.1105101622420.26571@bester>
	<614C529D389A5944B351F7DFB7594F240126D947@uksrpblkexb01.detica.com>
	<BANLkTimVB3nrNP92tuwSiO0Go-0G2MVNbg@mail.gmail.com>
	<614C529D389A5944B351F7DFB7594F240126DD4F@uksrpblkexb01.detica.com>
Date: Thu, 19 May 2011 13:09:49 +0300
Message-ID: <BANLkTin3g_YP_6RbAhvvJU1k8jdv4pJYxQ@mail.gmail.com>
Subject: Re: SpanNearQuery - inOrder parameter
From: Doron Cohen <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e640d4c8968b8904a39e3497
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e640d4c8968b8904a39e3497
Content-Type: text/plain; charset=ISO-8859-1

Hi Greg,

On Thu, May 19, 2011 at 12:26 PM, Gregory Tarr <Gregory.tarr@detica.com>wrote:

> We let our users decide whether they want to force the order or not, so
> in effect they pass in "inOrder".
>
> I would have to detect a repeated term and change the parameter as a
> result of that in order to workround this - I'd rather not do that though.
>

I see, ok, thanks for reporting this and for describing the use case, let's
see what others think/comment about this in JIRA... Please feel more than
welcome to investigate further and submit a patch to solve this! :)

Doron

--0016e640d4c8968b8904a39e3497--

From java-user-return-49775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 12:34:32 2011
Return-Path: <java-user-return-49775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4563A4F21
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 12:34:32 +0000 (UTC)
Received: (qmail 70156 invoked by uid 500); 19 May 2011 12:34:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70109 invoked by uid 500); 19 May 2011 12:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70101 invoked by uid 99); 19 May 2011 12:34:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 12:34:29 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 12:34:24 +0000
Received: by wyb40 with SMTP id 40so2912531wyb.35
        for <java-user@lucene.apache.org>; Thu, 19 May 2011 05:34:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.201.9 with SMTP id ey9mr3137837wbb.41.1305808443397; Thu,
 19 May 2011 05:34:03 -0700 (PDT)
Received: by 10.227.24.11 with HTTP; Thu, 19 May 2011 05:34:03 -0700 (PDT)
In-Reply-To: <4DD47D00.2050605@sdsc.edu>
References: <BANLkTikQ7kBJUk0Cujw3zDeaoGGfzXktGA@mail.gmail.com>
	<4DD47D00.2050605@sdsc.edu>
Date: Thu, 19 May 2011 08:34:03 -0400
Message-ID: <BANLkTim-vRU=XBL=hr5G++QnuF7gtqDU4w@mail.gmail.com>
Subject: Re: Ranking docs with all terms higher
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

I believe Lucene already does this, with the 'coord' factor in
BooleanQuery, which is on by default (ie, if you just "new
BooleanQuery()").

Ie your doc c will get a coord factor of 1.0, doc b gets 0.666..., doc
a gets 0.3333.

That said, if the term freq is high enough (ie doc a has nacho 4
times), that may give it a high enough score to overcome its coord
disadvantage (I'm not sure).

Mike

http://blog.mikemccandless.com

On Wed, May 18, 2011 at 10:14 PM, Christopher Condit <condit@sdsc.edu> wrote:
> Let's say I have the query
> (nacho OR foo OR bar)
>
> and some documents (single field with norms off)
> doc a: nacho nacho nacho nacho
> doc b: foo bar bar
> doc c: nacho foo bar
>
> I'm interested in all of these documents but I would like c to score the
> highest since it contains all of the search terms, b to score second
> because it has two, and a to score the third because it has one. What's
> the best way to get Lucene to do this?
>
> Thanks,
> -Chris
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 13:37:44 2011
Return-Path: <java-user-return-49776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25A8B4B51
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 13:37:44 +0000 (UTC)
Received: (qmail 12831 invoked by uid 500); 19 May 2011 13:37:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12793 invoked by uid 500); 19 May 2011 13:37:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12777 invoked by uid 99); 19 May 2011 13:37:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 13:37:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 13:37:37 +0000
Received: by iwr19 with SMTP id 19so3453804iwr.35
        for <java-user@lucene.apache.org>; Thu, 19 May 2011 06:37:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=noqF0B7nXmqX8FVe2HNZnGn3Ei4AFOhbs1jWIr77dZ8=;
        b=XXpJECOKI+WK20IpfvRU/7OxoY1p7hkXHKbPD+/mnuNs8OMEE82wFLJzCMUhfWVOV4
         5woMG3PHzQp4NzztQuwDZm3UxfOFlZZXgVyCqXWnLupEUc2J3c1WViATbT/wohHSbxL5
         91/uG8eENiF73bmAyrLPYmFchnWwXNCylKwGs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=NgO5D3XTyUXek6d8C8SGYJp9m+o8AOkJgXHVNWQ3wxWc7PY/hQbizm4GgmfBowu4yA
         IvmjhDCtMouq2eHy4xgSzjJkNs0E3kQsg4KRJUXS80KyMmi3bF3YUGvvwZiSlhWbcqrY
         hxkAzueivAT+N9W6SfqZCGPKiDgkVIpQ0iyoA=
Received: by 10.231.24.70 with SMTP id u6mr2377308ibb.108.1305812236204; Thu,
 19 May 2011 06:37:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.202 with HTTP; Thu, 19 May 2011 06:36:56 -0700 (PDT)
In-Reply-To: <BANLkTim-vRU=XBL=hr5G++QnuF7gtqDU4w@mail.gmail.com>
References: <BANLkTikQ7kBJUk0Cujw3zDeaoGGfzXktGA@mail.gmail.com>
 <4DD47D00.2050605@sdsc.edu> <BANLkTim-vRU=XBL=hr5G++QnuF7gtqDU4w@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 19 May 2011 14:36:56 +0100
Message-ID: <BANLkTi=YxbGbJht17GsG967TU=5ghhnTGQ@mail.gmail.com>
Subject: Re: Ranking docs with all terms higher
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

A little test shows that Mike is correct and lucene does already do this.

With norms (default)
 nacho foo bar, score=0.8660254
 foo bar bar, score=0.46461558
 nacho nacho nacho nacho, score=0.19245009

Without norms
 nacho foo bar, score=1.7320508
 foo bar bar, score=0.92923117
 nacho nacho nacho nacho, score=0.38490018

Lucene 3.1.0, nothing else in the index.


If you need to, you can tweak the scoring by providing a custom
implementation of oal.search.Similarity.


--
Ian.


On Thu, May 19, 2011 at 1:34 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> I believe Lucene already does this, with the 'coord' factor in
> BooleanQuery, which is on by default (ie, if you just "new
> BooleanQuery()").
>
> Ie your doc c will get a coord factor of 1.0, doc b gets 0.666..., doc
> a gets 0.3333.
>
> That said, if the term freq is high enough (ie doc a has nacho 4
> times), that may give it a high enough score to overcome its coord
> disadvantage (I'm not sure).
>
> Mike
>
> http://blog.mikemccandless.com
>
> On Wed, May 18, 2011 at 10:14 PM, Christopher Condit <condit@sdsc.edu> wrote:
>> Let's say I have the query
>> (nacho OR foo OR bar)
>>
>> and some documents (single field with norms off)
>> doc a: nacho nacho nacho nacho
>> doc b: foo bar bar
>> doc c: nacho foo bar
>>
>> I'm interested in all of these documents but I would like c to score the
>> highest since it contains all of the search terms, b to score second
>> because it has two, and a to score the third because it has one. What's
>> the best way to get Lucene to do this?
>>
>> Thanks,
>> -Chris
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 13:47:31 2011
Return-Path: <java-user-return-49777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AB9DE41AD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 13:47:31 +0000 (UTC)
Received: (qmail 50846 invoked by uid 500); 19 May 2011 13:47:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50797 invoked by uid 500); 19 May 2011 13:47:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50789 invoked by uid 99); 19 May 2011 13:47:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 13:47:29 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [77.238.189.217] (HELO nm18-vm1.bullet.mail.ird.yahoo.com) (77.238.189.217)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 19 May 2011 13:47:21 +0000
Received: from [77.238.189.55] by nm18.bullet.mail.ird.yahoo.com with NNFMP; 19 May 2011 13:47:00 -0000
Received: from [212.82.108.240] by tm8.bullet.mail.ird.yahoo.com with NNFMP; 19 May 2011 13:47:00 -0000
Received: from [127.0.0.1] by omp1005.mail.ird.yahoo.com with NNFMP; 19 May 2011 13:47:00 -0000
X-Yahoo-Newman-Property: ymail-5
X-Yahoo-Newman-Id: 275462.15449.bm@omp1005.mail.ird.yahoo.com
Received: (qmail 16395 invoked by uid 60001); 19 May 2011 13:46:59 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.co.uk; s=s1024; t=1305812819; bh=DOUMWDafK0YJcfdbYo1TV7lw4fJeD7FkkwbLnsPpuPo=; h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=rsEdF2m6676cMaZY+XRLPg6+xcqpNHuHN/R6dOTzzFOL+TKq86YJ8/ViR/a4vE7iiq4xYxnQ3Aq6xLWsHwp2+/x96wk6dpfv57/4ko5wzqfUNpVZlCE+44mL/zSo0t6iQELPdLNCN9sBGRN1qhXygh6iR/HK52lfIX9w/Pi4csk=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:X-YMail-OSG:Received:X-Mailer:References:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AZEXZ9RoR1yO7r/kyigAUUf/oO+ywMivH7RSuBz/NDpVemZAAFD+QQKQH65Meq8RhPgtK4abF235M1h4LRB/NZ2u6Taxp/LaG74u/hZEaflmW/uVuB0PU2vhRu4swNvlxKK12QOcyJrWKlqwvw8zneoeLflglBQ7FhCGw1FFkp4=;
Message-ID: <717789.16341.qm@web29017.mail.ird.yahoo.com>
X-YMail-OSG: 1.OMcj8VM1nz7mXATkzM7zaY5brecs692ypR5fWdOCw8BAP
 _JdooSOJxZTN7Hnp1R20KAqXjgPk6WOGT0XHd.ckOTBQUvkQCDgqm5wRzYIc
 3vC926bQwLpH7dGRWvFGR8wnpYeQM7O3mjYL2RBfu011BPOiE8EXYQ2SY7HC
 e35Ii8.3RLcetq5xiKtRSxGZXdhJuEby3O8UoYzpxk72GDUP1COc8MPeZXe0
 RntehyONdxp4ommYT0IgBZZK_ab08iEHyUaOhGa32r.eXZU9ZdrlpKm1qiDS
 2EbA5RdhCs91KaxhqorQt7Y1Mgl3WnCORTxjnYxVy4fMm2Ufk3XqngwWhW78
 mEH1yAQgEerpNFeU2XyQOMEqCbxMgb6hUCwcwj6BYMUnwVTA91uXCPsLRF0g
 rOD23.PM_bpb45KHhhcVnIZLhu8.H4EBR2X0Xk.bcxh8UuPI-
Received: from [194.116.198.179] by web29017.mail.ird.yahoo.com via HTTP; Thu, 19 May 2011 14:46:59 BST
X-Mailer: YahooMailRC/567 YahooMailWebService/0.8.111.303096
References: <BANLkTikQ7kBJUk0Cujw3zDeaoGGfzXktGA@mail.gmail.com> <4DD47D00.2050605@sdsc.edu> <BANLkTim-vRU=XBL=hr5G++QnuF7gtqDU4w@mail.gmail.com> <BANLkTi=YxbGbJht17GsG967TU=5ghhnTGQ@mail.gmail.com>
Date: Thu, 19 May 2011 14:46:59 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Ranking docs with all terms higher
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTi=YxbGbJht17GsG967TU=5ghhnTGQ@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Of course IDF is a factor too meaning a match on a single rare (to the over=
all =0Aindex) term may be worth more than a match on 2 different common (to=
 the index) =0Aterms.=0AAs Ian suggests a custom Similarity implementation =
can be used to tune this out.=0A=0A=0A----- Original Message ----=0AFrom: I=
an Lea <ian.lea@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Thu, 1=
9 May, 2011 14:36:56=0ASubject: Re: Ranking docs with all terms higher=0A=
=0AA little test shows that Mike is correct and lucene does already do this=
.=0A=0AWith norms (default)=0Anacho foo bar, score=3D0.8660254=0Afoo bar ba=
r, score=3D0.46461558=0Anacho nacho nacho nacho, score=3D0.19245009=0A=0AWi=
thout norms=0Anacho foo bar, score=3D1.7320508=0Afoo bar bar, score=3D0.929=
23117=0Anacho nacho nacho nacho, score=3D0.38490018=0A=0ALucene 3.1.0, noth=
ing else in the index.=0A=0A=0AIf you need to, you can tweak the scoring by=
 providing a custom=0Aimplementation of oal.search.Similarity.=0A=0A=0A--=
=0AIan.=0A=0A=0AOn Thu, May 19, 2011 at 1:34 PM, Michael McCandless=0A<luce=
ne@mikemccandless.com> wrote:=0A> I believe Lucene already does this, with =
the 'coord' factor in=0A> BooleanQuery, which is on by default (ie, if you =
just "new=0A> BooleanQuery()").=0A>=0A> Ie your doc c will get a coord fact=
or of 1.0, doc b gets 0.666..., doc=0A> a gets 0.3333.=0A>=0A> That said, i=
f the term freq is high enough (ie doc a has nacho 4=0A> times), that may g=
ive it a high enough score to overcome its coord=0A> disadvantage (I'm not =
sure).=0A>=0A> Mike=0A>=0A> http://blog.mikemccandless.com=0A>=0A> On Wed, =
May 18, 2011 at 10:14 PM, Christopher Condit <condit@sdsc.edu> wrote:=0A>> =
Let's say I have the query=0A>> (nacho OR foo OR bar)=0A>>=0A>> and some do=
cuments (single field with norms off)=0A>> doc a: nacho nacho nacho nacho=
=0A>> doc b: foo bar bar=0A>> doc c: nacho foo bar=0A>>=0A>> I'm interested=
 in all of these documents but I would like c to score the=0A>> highest sin=
ce it contains all of the search terms, b to score second=0A>> because it h=
as two, and a to score the third because it has one. What's=0A>> the best w=
ay to get Lucene to do this?=0A>>=0A>> Thanks,=0A>> -Chris=0A>>=0A>>=0A>>=
=0A>> ---------------------------------------------------------------------=
=0A>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>> =
For additional commands, e-mail: java-user-help@lucene.apache.org=0A>>=0A>>=
=0A>=0A> ------------------------------------------------------------------=
---=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>=
 For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 14:21:29 2011
Return-Path: <java-user-return-49778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 331264062
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 14:21:29 +0000 (UTC)
Received: (qmail 42867 invoked by uid 500); 19 May 2011 14:21:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42767 invoked by uid 500); 19 May 2011 14:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42759 invoked by uid 99); 19 May 2011 14:21:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 14:21:27 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of heimann.richard@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 14:21:20 +0000
Received: by wwi18 with SMTP id 18so2005125wwi.5
        for <java-user@lucene.apache.org>; Thu, 19 May 2011 07:21:00 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=Mi7o96nzYzezEneh2jzeENpPyJ67Hz0UFSi7BDBFvEM=;
        b=oCg5VxZqGq2Xp8jm1Up3uuZ7GmJRKAhJ/qeycpAkyrKuUi+LiTQC3injO35CRDf8FR
         W9Me2H5O/WD8TKS4AToh22X0H9q4om5Kz3hr8h+1Vnj8HYULSVEXAvJ3SFHw6wiHdBa4
         GI74gi3Vpoxfaeh9g8S+u/UVR1wb1SAN7FaWI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=p15YF5AWTW42syZAg3uxTI7c94KAj5id7V0Mr1xPikznAiMYkiJV1jGhO0Z/nfwqNU
         LPRcHRoYiwrekRhUrEy50YGqdVNXpg41IzeJQ+YX5i7EycUhEs/X4pWmpJizmtynnxTT
         OYz1YxerqDeg2iMriRl/6u8ywzs8A1raSJ3w0=
Received: by 10.227.205.84 with SMTP id fp20mr3248985wbb.3.1305814860138; Thu,
 19 May 2011 07:21:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.147.199 with HTTP; Thu, 19 May 2011 07:20:40 -0700 (PDT)
In-Reply-To: <E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com>
 <BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com> <E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net>
From: Rich Heimann <heimann.richard@gmail.com>
Date: Thu, 19 May 2011 10:20:40 -0400
Message-ID: <BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com>
Subject: Re: Please help me with a basic question...
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517592688e18ac304a3a1b6e5
X-Virus-Checked: Checked by ClamAV on apache.org

--001517592688e18ac304a3a1b6e5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks Paul,

I do not know what duplicates are in this case and it is the denominator of
the TF that bothers me more than the numerator of the TF (if that is in fac=
t
what you are suggesting).

What have been the effects of ignoring the IDF? When is it appropriate. It
would seem that by doing so rare terms have less (no) weight. Thoughts?

Thanks again,
Rich


On Wed, May 18, 2011 at 3:34 PM, Paul Libbrecht <paul@hoplahup.net> wrote:

> Richard,
>
> in SOLR at least there's an analyzer that avoids duplicates.
> I think that would solve it.
> There's also somewhere the option to ignore IDF (in similarity? in
> solrconfig?).
>
> paul
>
>
> Le 18 mai 2011 =E0 21:30, Rich Heimann a =E9crit :
>
> > Hello all,
> >
> > This is my first time on the list and my first question...forgive me it
> this
> > has been hacked out in the past.
> >
> > We have set up Lucene/Solr and are getting somewhat spurious results. I=
t
> > appears to be a result of heterogeneous document sizes. In other words,
> the
> > top results are sometimes (at least when the user is using typical sear=
ch
> > terms) monopolized by a distinct type of document, which is otherwise
> small
> > (in number of terms). It appears that TF/IDF even with the cosine
> similarity
> > seems to be sensitive to document size. I have run some tests and it in
> fact does
> > appear to be the case.
> >
> > (Number of times the term appears in a document)/(Total Number of terms
> in
> > that document) * Log10(Number of total documents/Number of times search
> term
> > appears in all documents)
> >
> > Are there any suggestions or best practices to deal with the intrinsic
> > heterogeneity in a corpus.
> >
> > Thank you,
> > Rich
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--001517592688e18ac304a3a1b6e5--

From java-user-return-49779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 19 20:39:27 2011
Return-Path: <java-user-return-49779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7428E468D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 19 May 2011 20:39:27 +0000 (UTC)
Received: (qmail 93429 invoked by uid 500); 19 May 2011 20:39:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93388 invoked by uid 500); 19 May 2011 20:39:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93379 invoked by uid 99); 19 May 2011 20:39:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 20:39:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 19 May 2011 20:39:20 +0000
Received: by ywk9 with SMTP id 9so1565308ywk.35
        for <java-user@lucene.apache.org>; Thu, 19 May 2011 13:38:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=rT1poprNTVNfEF99N5f9gi04NUyjN6HG3D2Vk+LOz4g=;
        b=rulRMLV4CXBISfLFCKDUIGr9MNuVZqFtu8B5NTm9R234VSCeG2jNY+doiWpfL62o2Q
         wScTMCaz2k5vmOn0K+G1BCNSxP3tdu6dSSO9uE26TFlVyTO6yYr9hxufUZ+mVkTjJbzo
         SqYN0fJNKDZpL9eec/4A95M8BalkD1SF/rxno=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=gsGCJkVqslgrbfaQ72QwOD5HzWUy/t1yfN3P5yVq0/1l+sU3T0Sr3a+r18vzKrHZO9
         n1rssxeWATO/8hbHMMaZfZJvnqEvbHBAnkHJ7cI6r40db/z7LTKncTQZl61IL2DNxvPK
         X7L/2TSN+nLDzrfDowxvESMPMLNFspKRyytUo=
MIME-Version: 1.0
Received: by 10.91.159.13 with SMTP id l13mr94053ago.123.1305837539247; Thu,
 19 May 2011 13:38:59 -0700 (PDT)
Received: by 10.90.120.1 with HTTP; Thu, 19 May 2011 13:38:59 -0700 (PDT)
In-Reply-To: <BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com>
	<BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com>
	<E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net>
	<BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com>
Date: Thu, 19 May 2011 23:38:59 +0300
Message-ID: <BANLkTikAD4=0ErWhdOQ9-G1ZvuoqH8b+LQ@mail.gmail.com>
Subject: Re: Please help me with a basic question...
From: Doron Cohen <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f860f2a946fb04a3a6fe9e

--001485f860f2a946fb04a3a6fe9e
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Rich,
If I understand correctly you are concerned that short documents are
preferred too much over long ones, is this really the case?
It would help to understand what goes on to look at the Explanation of the
score for say two result documents - one that you think is ranked too low,
and one that is ranked too high...
If you are convinced that length normalization is the culprit you could giv=
e
a try to:
- omitting norms all together at indexing
- using e.g. SeetSpotSimilarity which do not favor shorter documents.
Regards,
Doron

On Thu, May 19, 2011 at 5:20 PM, Rich Heimann <heimann.richard@gmail.com>wr=
ote:

> Thanks Paul,
>
> I do not know what duplicates are in this case and it is the denominator =
of
> the TF that bothers me more than the numerator of the TF (if that is in
> fact
> what you are suggesting).
>
> What have been the effects of ignoring the IDF? When is it appropriate. I=
t
> would seem that by doing so rare terms have less (no) weight. Thoughts?
>
> Thanks again,
> Rich
>
>
> On Wed, May 18, 2011 at 3:34 PM, Paul Libbrecht <paul@hoplahup.net> wrote=
:
>
> > Richard,
> >
> > in SOLR at least there's an analyzer that avoids duplicates.
> > I think that would solve it.
> > There's also somewhere the option to ignore IDF (in similarity? in
> > solrconfig?).
> >
> > paul
> >
> >
> > Le 18 mai 2011 =E0 21:30, Rich Heimann a =E9crit :
> >
> > > Hello all,
> > >
> > > This is my first time on the list and my first question...forgive me =
it
> > this
> > > has been hacked out in the past.
> > >
> > > We have set up Lucene/Solr and are getting somewhat spurious results.
> It
> > > appears to be a result of heterogeneous document sizes. In other word=
s,
> > the
> > > top results are sometimes (at least when the user is using typical
> search
> > > terms) monopolized by a distinct type of document, which is otherwise
> > small
> > > (in number of terms). It appears that TF/IDF even with the cosine
> > similarity
> > > seems to be sensitive to document size. I have run some tests and it =
in
> > fact does
> > > appear to be the case.
> > >
> > > (Number of times the term appears in a document)/(Total Number of ter=
ms
> > in
> > > that document) * Log10(Number of total documents/Number of times sear=
ch
> > term
> > > appears in all documents)
> > >
> > > Are there any suggestions or best practices to deal with the intrinsi=
c
> > > heterogeneity in a corpus.
> > >
> > > Thank you,
> > > Rich
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

--001485f860f2a946fb04a3a6fe9e--

From java-user-return-49780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 09:10:10 2011
Return-Path: <java-user-return-49780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8453361D7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 09:10:10 +0000 (UTC)
Received: (qmail 93922 invoked by uid 500); 20 May 2011 09:10:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93851 invoked by uid 500); 20 May 2011 09:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93843 invoked by uid 99); 20 May 2011 09:10:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 09:10:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 09:09:58 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AmkGAEgv1k2My8qD/2dsb2JhbACYHY50pgGfKoYZBJARhC8diio
X-IronPort-AV: E=Sophos;i="4.65,241,1304290800"; 
   d="scan'208";a="17489337"
Received: from vmserver66.nuigalway.ie (HELO vmit04.deri.ie) ([140.203.202.131])
  by mx2.nuigalway.ie with ESMTP; 20 May 2011 10:09:36 +0100
Received: from [192.168.1.8] (unknown [188.141.67.88])
	by vmit04.deri.ie (Postfix) with ESMTPSA id 5BFA9213E21
	for <java-user@lucene.apache.org>; Fri, 20 May 2011 10:01:59 +0100 (IST)
Message-ID: <4DD62FCA.4070400@deri.org>
Date: Fri, 20 May 2011 10:09:30 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.17) Gecko/20110424 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Query Parser,  Unary Operators and Multi-Field Query
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

The behaviour of the query parser (either the standard lucene query 
parser, or the query parser contrib) is not what I expect when I am using
- unary operators
- a multi-field query
- AND as default operator.

For example, let say I have two field fieldA and fieldB, and the 
following query:
+termA +termB termC

Lucene query parsers will expand the query as:
+(fieldA:termA fieldB:termA) +(fieldA:termB fieldB:termB) +(fieldA:termC 
fieldB:termC)

while I would have expected this

+(fieldA:termA fieldB:termA) +(fieldA:termB fieldB:termB) (fieldA:termC 
fieldB:termC)

Is it the normal behaviour ? A Bug ? Am I doing something wrong ?

Thanks in advance for your help,
-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 12:21:46 2011
Return-Path: <java-user-return-49781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 23F816EAF
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 12:21:46 +0000 (UTC)
Received: (qmail 1155 invoked by uid 500); 20 May 2011 12:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1118 invoked by uid 500); 20 May 2011 12:21:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1110 invoked by uid 99); 20 May 2011 12:21:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 12:21:43 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 12:21:35 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p4KCKeBZ027177
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 20 May 2011 08:21:14 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Fri, 20 May 2011
 08:21:12 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 20 May 2011 08:21:11 -0400
Subject: RE: Query Parser,  Unary Operators and Multi-Field Query
Thread-Topic: Query Parser,  Unary Operators and Multi-Field Query
Thread-Index: AcwWzbvD9o2gQ5AWTG67Ag53sGU3FwAGmxMA
Message-ID: <2D127F11DC79714E9B6A43AC9458147FBAD42FC1@suex07-mbx-03.ad.syr.edu>
References: <4DD62FCA.4070400@deri.org>
In-Reply-To: <4DD62FCA.4070400@deri.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.4.6813,1.0.148,0.0.0000
 definitions=2011-05-20_05:2011-05-20,2011-05-20,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgUmVuYXVkLA0KDQpUaGF0J3Mgbm9ybWFsIGJlaGF2aW9yLCBzaW5jZSB5b3UgaGF2ZSBBTkQg
YXMgZGVmYXVsdCBvcGVyYXRvci4gIFRoaXMgaXMgZXF1aXZhbGVudCB0byBwbGFjaW5nIGEgIisi
IGluIGZyb250IG9mIGV2ZXJ5IGVsZW1lbnQgb2YgeW91ciBxdWVyeS4gIEluIGZhY3QsIGlmIHlv
dSByZW1vdmVkIHRoZSBvdGhlciB0d28gIisicywgeW91IHdvdWxkIGdldCB0aGUgc2FtZSBiZWhh
dmlvci4gIEkgdGhpbmsgeW91J2xsIGdldCB3aGF0IHlvdSB3YW50IGJ5IGp1c3Qgc3dpdGNoaW5n
IHRoZSBkZWZhdWx0IG9wZXJhdG9yIHRvICJPUiI/DQoNClN0ZXZlDQoNCj4gLS0tLS1PcmlnaW5h
bCBNZXNzYWdlLS0tLS0NCj4gRnJvbTogUmVuYXVkIERlbGJydSBbbWFpbHRvOnJlbmF1ZC5kZWxi
cnVAZGVyaS5vcmddDQo+IFNlbnQ6IEZyaWRheSwgTWF5IDIwLCAyMDExIDU6MTAgQU0NCj4gVG86
IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBTdWJqZWN0OiBRdWVyeSBQYXJzZXIsIFVu
YXJ5IE9wZXJhdG9ycyBhbmQgTXVsdGktRmllbGQgUXVlcnkNCj4gDQo+IEhpLA0KPiANCj4gVGhl
IGJlaGF2aW91ciBvZiB0aGUgcXVlcnkgcGFyc2VyIChlaXRoZXIgdGhlIHN0YW5kYXJkIGx1Y2Vu
ZSBxdWVyeQ0KPiBwYXJzZXIsIG9yIHRoZSBxdWVyeSBwYXJzZXIgY29udHJpYikgaXMgbm90IHdo
YXQgSSBleHBlY3Qgd2hlbiBJIGFtIHVzaW5nDQo+IC0gdW5hcnkgb3BlcmF0b3JzDQo+IC0gYSBt
dWx0aS1maWVsZCBxdWVyeQ0KPiAtIEFORCBhcyBkZWZhdWx0IG9wZXJhdG9yLg0KPiANCj4gRm9y
IGV4YW1wbGUsIGxldCBzYXkgSSBoYXZlIHR3byBmaWVsZCBmaWVsZEEgYW5kIGZpZWxkQiwgYW5k
IHRoZQ0KPiBmb2xsb3dpbmcgcXVlcnk6DQo+ICt0ZXJtQSArdGVybUIgdGVybUMNCj4gDQo+IEx1
Y2VuZSBxdWVyeSBwYXJzZXJzIHdpbGwgZXhwYW5kIHRoZSBxdWVyeSBhczoNCj4gKyhmaWVsZEE6
dGVybUEgZmllbGRCOnRlcm1BKSArKGZpZWxkQTp0ZXJtQiBmaWVsZEI6dGVybUIpICsoZmllbGRB
OnRlcm1DDQo+IGZpZWxkQjp0ZXJtQykNCj4gDQo+IHdoaWxlIEkgd291bGQgaGF2ZSBleHBlY3Rl
ZCB0aGlzDQo+IA0KPiArKGZpZWxkQTp0ZXJtQSBmaWVsZEI6dGVybUEpICsoZmllbGRBOnRlcm1C
IGZpZWxkQjp0ZXJtQikgKGZpZWxkQTp0ZXJtQw0KPiBmaWVsZEI6dGVybUMpDQo+IA0KPiBJcyBp
dCB0aGUgbm9ybWFsIGJlaGF2aW91ciA/IEEgQnVnID8gQW0gSSBkb2luZyBzb21ldGhpbmcgd3Jv
bmcgPw0KPiANCj4gVGhhbmtzIGluIGFkdmFuY2UgZm9yIHlvdXIgaGVscCwNCj4gLS0NCj4gUmVu
YXVkIERlbGJydQ0KPiANCj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZw0KPiBGb3IgYWRkaXRpb25h
bCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


From java-user-return-49782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 14:33:47 2011
Return-Path: <java-user-return-49782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CEA5D6FA2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 14:33:47 +0000 (UTC)
Received: (qmail 95529 invoked by uid 500); 20 May 2011 14:33:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95485 invoked by uid 500); 20 May 2011 14:33:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95477 invoked by uid 99); 20 May 2011 14:33:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 14:33:45 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of heimann.richard@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 14:33:38 +0000
Received: by wwi18 with SMTP id 18so2779816wwi.5
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 07:33:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=Cbxgzbchb50hNWkpOKZBLUdP7AoCM5WI8AgMm4AwDXw=;
        b=dt0eVrEodaikSY+M2XHUoKxjXdAHGN8bzfPjZkQ7/lzck2p3uHBoAK3imJpw1b/h+w
         08CsXL/zmPdZxvj/SVVEW2ctFu7t83G3vDwior0DcaK0NNTkuQE2SGEWTrKvR/+D7Rte
         tYNNxorZ+ZcP3JnAe/jY26GybaKx46MT/uL7w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=RNm3Rc28QGTWsE4Y914NUJkO/peZhmLvulCg1W296t6d7atu3DUI92wGZhcwlYc4U5
         3Px/tamjhvvSUg7I+i/hkvdNDZNbFUNw41OQYHbIP9eJA/uIs1RI1CaI5NvvSO0M0Ao6
         MrUP7VyhPqHW45SDhYxzK8Im4ihNgC2JS9HzQ=
Received: by 10.227.62.210 with SMTP id y18mr4387170wbh.18.1305901998138; Fri,
 20 May 2011 07:33:18 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.147.199 with HTTP; Fri, 20 May 2011 07:32:58 -0700 (PDT)
In-Reply-To: <BANLkTikAD4=0ErWhdOQ9-G1ZvuoqH8b+LQ@mail.gmail.com>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com>
 <BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com> <E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net>
 <BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com> <BANLkTikAD4=0ErWhdOQ9-G1ZvuoqH8b+LQ@mail.gmail.com>
From: Rich Heimann <heimann.richard@gmail.com>
Date: Fri, 20 May 2011 10:32:58 -0400
Message-ID: <BANLkTi=zYES+OfxuDSOfJ5kQNX0ZMeBgNQ@mail.gmail.com>
Subject: Re: Please help me with a basic question...
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300255ccb5eaf904a3b600d1
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf300255ccb5eaf904a3b600d1
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Bingo. That appears to be the essence of the problem, which makes sense
given TF/IDF.

I stumbled upon the 'Explain' function yesterday though it returns a crowde=
d
message using debug in SOLR admin. Is there another method or interface
which returns more or cleaner info?

I feel uncomfortable with omitting the normalization factor at this point. =
I
like the idea that it accounts for the size of the document. In other words=
,
I would expect to find the search term where there are many terms.
Normalization (as you know) controls for document size. It does however
(appears) lead to inflated values.

SeetSpotSimilarity looks promising. Does it not favor shorter docs by not
normalizing or does it make some attempt to standardized.

Thank you Doron...

Regards,
Rich


On Thu, May 19, 2011 at 4:38 PM, Doron Cohen <cdoronc@gmail.com> wrote:

> Hi Rich,
> If I understand correctly you are concerned that short documents are
> preferred too much over long ones, is this really the case?
> It would help to understand what goes on to look at the Explanation of th=
e
> score for say two result documents - one that you think is ranked too low=
,
> and one that is ranked too high...
> If you are convinced that length normalization is the culprit you could
> give
> a try to:
> - omitting norms all together at indexing
> - using e.g. SeetSpotSimilarity which do not favor shorter documents.
> Regards,
> Doron
>
> On Thu, May 19, 2011 at 5:20 PM, Rich Heimann <heimann.richard@gmail.com
> >wrote:
>
> > Thanks Paul,
> >
> > I do not know what duplicates are in this case and it is the denominato=
r
> of
> > the TF that bothers me more than the numerator of the TF (if that is in
> > fact
> > what you are suggesting).
> >
> > What have been the effects of ignoring the IDF? When is it appropriate.
> It
> > would seem that by doing so rare terms have less (no) weight. Thoughts?
> >
> > Thanks again,
> > Rich
> >
> >
> > On Wed, May 18, 2011 at 3:34 PM, Paul Libbrecht <paul@hoplahup.net>
> wrote:
> >
> > > Richard,
> > >
> > > in SOLR at least there's an analyzer that avoids duplicates.
> > > I think that would solve it.
> > > There's also somewhere the option to ignore IDF (in similarity? in
> > > solrconfig?).
> > >
> > > paul
> > >
> > >
> > > Le 18 mai 2011 =E0 21:30, Rich Heimann a =E9crit :
> > >
> > > > Hello all,
> > > >
> > > > This is my first time on the list and my first question...forgive m=
e
> it
> > > this
> > > > has been hacked out in the past.
> > > >
> > > > We have set up Lucene/Solr and are getting somewhat spurious result=
s.
> > It
> > > > appears to be a result of heterogeneous document sizes. In other
> words,
> > > the
> > > > top results are sometimes (at least when the user is using typical
> > search
> > > > terms) monopolized by a distinct type of document, which is otherwi=
se
> > > small
> > > > (in number of terms). It appears that TF/IDF even with the cosine
> > > similarity
> > > > seems to be sensitive to document size. I have run some tests and i=
t
> in
> > > fact does
> > > > appear to be the case.
> > > >
> > > > (Number of times the term appears in a document)/(Total Number of
> terms
> > > in
> > > > that document) * Log10(Number of total documents/Number of times
> search
> > > term
> > > > appears in all documents)
> > > >
> > > > Are there any suggestions or best practices to deal with the
> intrinsic
> > > > heterogeneity in a corpus.
> > > >
> > > > Thank you,
> > > > Rich
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>

--20cf300255ccb5eaf904a3b600d1--

From java-user-return-49783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 15:30:54 2011
Return-Path: <java-user-return-49783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0306568D6
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 15:30:53 +0000 (UTC)
Received: (qmail 80238 invoked by uid 500); 20 May 2011 15:30:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80197 invoked by uid 500); 20 May 2011 15:30:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80189 invoked by uid 99); 20 May 2011 15:30:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 15:30:51 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.bamford@talktalk.net designates 62.24.128.245 as permitted sender)
Received: from [62.24.128.245] (HELO out1.ip09ir2.opaltelecom.net) (62.24.128.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 15:30:43 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AtoFAOeH1k3O3uJS/2dsb2JhbACYII0hgVKjdJ8UhhkEnyI
X-IronPort-AV: E=Sophos;i="4.65,242,1304290800"; 
   d="scan'208";a="478320324"
Received: from frr2-l18.sis.aol.com (HELO FRR2-L18) ([206.222.226.82])
  by out1.ip09ir2.opaltelecom.net with ESMTP; 20 May 2011 16:30:22 +0100
To: java-user@lucene.apache.org
Subject: How to delete docs when using NRT?
Date: Fri, 20 May 2011 11:30:22 -0400
X-MB-Message-Source: WebUI
X-MB-Message-Type: User
MIME-Version: 1.0
From: Chris Bamford <chris.bamford@talktalk.net>
Content-Type: multipart/alternative; 
 boundary="--------MB_8CDE519F79DF69D_1250_2A355_FRR2-L18./f"
X-Mailer: Webmail 33668-STANDARD
Received: from 212.2.3.171 by FRR2-L18./f (206.222.226.82) with HTTP (WebMailUI); Fri, 20 May 2011 11:30:21 -0400
Message-Id: <8CDE519F7542C3B-1250-B54F@FRR2-L18./f>
X-Virus-Checked: Checked by ClamAV on apache.org

----------MB_8CDE519F79DF69D_1250_2A355_FRR2-L18./f
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

Hi=20there,=0A=0AIs=20there=20something=20special=20I=20should=20be=20doing=20he=
re?=20This=20is=20my=20sequence:=0A=0Aopen=20writer=0Aadd=20=20doc=20#1=0Aadd=20=
=20doc=20#2=0Aget=20reader=20from=20writer=0Ado=20a=20search=20on=20reader=20-=20=
matches=20doc=20#1=0Adelete=20doc=20#1=20from=20writer=0Acommit=20writer=0Aadd=20=
doc=20#3=0Aoptimise=20writer=0Aclose=20writer=0A=0ASo=20by=20my=20reckoning,=20m=
y=20index=20should=20contain=20docs=202=20&=203.=0ALuke=20says=20different=20-=20=
all=203=20are=20there!=20=20Why=20hasn't=20doc=20#1=20gone?=0A=0AHave=20I=20miss=
ed=20something?=0A=0AThanks,=0A=0A-=20Chris=0A=0A=0A=20=0A=0A=20=0A=0A=0A
----------MB_8CDE519F79DF69D_1250_2A355_FRR2-L18./f--


From java-user-return-49784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 15:51:10 2011
Return-Path: <java-user-return-49784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2F45628C
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 15:51:10 +0000 (UTC)
Received: (qmail 19933 invoked by uid 500); 20 May 2011 15:51:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19889 invoked by uid 500); 20 May 2011 15:51:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19881 invoked by uid 99); 20 May 2011 15:51:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 15:51:08 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 15:51:03 +0000
Received: by wwk4 with SMTP id 4so648353wwk.5
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 08:50:41 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.11.17 with SMTP id r17mr4297516wbr.26.1305906641611; Fri,
 20 May 2011 08:50:41 -0700 (PDT)
Received: by 10.227.24.11 with HTTP; Fri, 20 May 2011 08:50:41 -0700 (PDT)
In-Reply-To: <8CDE519F7542C3B-1250-B54F@FRR2-L18./f>
References: <8CDE519F7542C3B-1250-B54F@FRR2-L18./f>
Date: Fri, 20 May 2011 11:50:41 -0400
Message-ID: <BANLkTim4pfXT2YsZvCe7UXv6EXjWPMf+XQ@mail.gmail.com>
Subject: Re: How to delete docs when using NRT?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

That should have worked.

There's nothing special about deleting docs when using NRT reader.

Can you boil it down to a test case?

Mike

http://blog.mikemccandless.com

On Fri, May 20, 2011 at 11:30 AM, Chris Bamford
<chris.bamford@talktalk.net> wrote:
> Hi there,
>
> Is there something special I should be doing here? This is my sequence:
>
> open writer
> add =A0doc #1
> add =A0doc #2
> get reader from writer
> do a search on reader - matches doc #1
> delete doc #1 from writer
> commit writer
> add doc #3
> optimise writer
> close writer
>
> So by my reckoning, my index should contain docs 2 & 3.
> Luke says different - all 3 are there! =A0Why hasn't doc #1 gone?
>
> Have I missed something?
>
> Thanks,
>
> - Chris
>
>
>
>
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 16:30:06 2011
Return-Path: <java-user-return-49785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CC60D6082
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 16:30:06 +0000 (UTC)
Received: (qmail 29659 invoked by uid 500); 20 May 2011 16:30:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29606 invoked by uid 500); 20 May 2011 16:30:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29598 invoked by uid 99); 20 May 2011 16:30:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 16:30:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.bamford@talktalk.net designates 62.24.128.245 as permitted sender)
Received: from [62.24.128.245] (HELO out1.ip09ir2.opaltelecom.net) (62.24.128.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 16:29:58 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AtsFAP+V1k3O3uJS/2dsb2JhbACCZpU7jSGBUqNqnx+GGQSfIg
X-IronPort-AV: E=Sophos;i="4.65,243,1304290800"; 
   d="scan'208";a="478328246"
Received: from frr2-l18.sis.aol.com (HELO FRR2-L18) ([206.222.226.82])
  by out1.ip09ir2.opaltelecom.net with ESMTP; 20 May 2011 17:29:36 +0100
To: java-user@lucene.apache.org
Subject: Re: How to delete docs when using NRT?
Date: Fri, 20 May 2011 12:29:36 -0400
In-Reply-To: <BANLkTim4pfXT2YsZvCe7UXv6EXjWPMf+XQ@mail.gmail.com>
X-MB-Message-Source: WebUI
MIME-Version: 1.0
From: Chris Bamford <chris.bamford@talktalk.net>
X-MB-Message-Type: User
Content-Type: multipart/alternative; 
 boundary="--------MB_8CDE5223E6168E5_1250_2A842_FRR2-L18./f"
X-Mailer: Webmail 33668-STANDARD
Received: from 212.2.3.171 by FRR2-L18./f (206.222.226.82) with HTTP (WebMailUI); Fri, 20 May 2011 12:29:36 -0400
Message-Id: <8CDE5223E12DBC7-1250-B698@FRR2-L18./f>

----------MB_8CDE5223E6168E5_1250_2A842_FRR2-L18./f
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

=0A=20Mike=20-=20my=20bad.=20=20I=20store=20my=20ids=20as=20numeric,=20and=20I=20=
was=20trying=20to=20delete=20using=20a=20string=20termquery.=20=20Got=20it=20wor=
king=20now.=0A=0AThanks=20anyway=0A=0A-=20Chris=0A=0A=0A=20=0A=0A=0A=20=0A=0A=20=
=0A=0A-----Original=20Message-----=0AFrom:=20Michael=20McCandless=20<lucene@mike=
mccandless.com>=0ATo:=20java-user@lucene.apache.org=0ASent:=20Fri,=2020=20May=20=
2011=2016:50=0ASubject:=20Re:=20How=20to=20delete=20docs=20when=20using=20NRT?=0A=
=0A=0AThat=20should=20have=20worked.=0A=0AThere's=20nothing=20special=20about=20=
deleting=20docs=20when=20using=20NRT=20reader.=0A=0ACan=20you=20boil=20it=20down=
=20to=20a=20test=20case?=0A=0AMike=0A=0Ahttp://blog.mikemccandless.com=0A=0AOn=20=
Fri,=20May=2020,=202011=20at=2011:30=20AM,=20Chris=20Bamford=0A<chris.bamford@ta=
lktalk.net>=20wrote:=0A>=20Hi=20there,=0A>=0A>=20Is=20there=20something=20specia=
l=20I=20should=20be=20doing=20here?=20This=20is=20my=20sequence:=0A>=0A>=20open=20=
writer=0A>=20add=20=20doc=20#1=0A>=20add=20=20doc=20#2=0A>=20get=20reader=20from=
=20writer=0A>=20do=20a=20search=20on=20reader=20-=20matches=20doc=20#1=0A>=20del=
ete=20doc=20#1=20from=20writer=0A>=20commit=20writer=0A>=20add=20doc=20#3=0A>=20=
optimise=20writer=0A>=20close=20writer=0A>=0A>=20So=20by=20my=20reckoning,=20my=20=
index=20should=20contain=20docs=202=20&=203.=0A>=20Luke=20says=20different=20-=20=
all=203=20are=20there!=20=20Why=20hasn't=20doc=20#1=20gone?=0A>=0A>=20Have=20I=20=
missed=20something?=0A>=0A>=20Thanks,=0A>=0A>=20-=20Chris=0A>=0A>=0A>=0A>=0A>=0A=
>=0A>=0A>=0A=0A-----------------------------------------------------------------=
----=0ATo=20unsubscribe,=20e-mail:=20java-user-unsubscribe@lucene.apache.org=0AF=
or=20additional=20commands,=20e-mail:=20java-user-help@lucene.apache.org=0A=0A=0A=
=20=0A
----------MB_8CDE5223E6168E5_1250_2A842_FRR2-L18./f--


From java-user-return-49786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 17:58:46 2011
Return-Path: <java-user-return-49786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EF0C06821
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 17:58:46 +0000 (UTC)
Received: (qmail 15119 invoked by uid 500); 20 May 2011 17:58:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15075 invoked by uid 500); 20 May 2011 17:58:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15067 invoked by uid 99); 20 May 2011 17:58:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 17:58:44 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [140.203.201.101] (HELO mx2.nuigalway.ie) (140.203.201.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 17:58:35 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AkEBAISr1k2My8qD/2dsb2JhbACEXZMHQI5zsTWQfYErg2eBBwSQEYQvHYoq
X-IronPort-AV: E=Sophos;i="4.65,243,1304290800"; 
   d="scan'208";a="17495768"
Received: from vmserver66.nuigalway.ie (HELO vmit04.deri.ie) ([140.203.202.131])
  by mx2.nuigalway.ie with ESMTP; 20 May 2011 18:58:13 +0100
Received: from [192.168.1.8] (unknown [188.141.67.88])
	by vmit04.deri.ie (Postfix) with ESMTPSA id 43F15213E22
	for <java-user@lucene.apache.org>; Fri, 20 May 2011 18:50:35 +0100 (IST)
Message-ID: <4DD6ABB4.4000300@deri.org>
Date: Fri, 20 May 2011 18:58:12 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.17) Gecko/20110424 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query Parser,  Unary Operators and Multi-Field Query
References: <4DD62FCA.4070400@deri.org> <2D127F11DC79714E9B6A43AC9458147FBAD42FC1@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FBAD42FC1@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hi,

not necessarily,

I would have expected that the default AND operator applies whenever no 
other operators are precised in the query.
As said in [1], "if one or more of the terms in a term list has an 
explicit term operator (+ or - or relational operator) the rest of the 
terms will be treated as "nice to have. For exmaple

     cat +dog -fox

Selects documents which must contain "dog" and must not contain "fox". 
Documents will rank higher if "cat" is present, but it is not required."

I would have expected such behaviour, whatever "Default Operator" as 
been defined.

But it seems that I need to use the Default Operator OR to have this 
behaviour, which breaks our current requirement (we want default 
operator AND if no operators are precised in the query).

IS there anyway to achieve this ? Or do I need to extend myself the 
queryparser contrib ?

[1] http://lucidworks.lucidimagination.com/display/LWEUG/Boolean+Operators

Thanks
-- 
Renaud Delbru

On 20/05/11 13:21, Steven A Rowe wrote:
> Hi Renaud,
>
> That's normal behavior, since you have AND as default operator.  This is equivalent to placing a "+" in front of every element of your query.  In fact, if you removed the other two "+"s, you would get the same behavior.  I think you'll get what you want by just switching the default operator to "OR"?
>
> Steve
>
>> -----Original Message-----
>> From: Renaud Delbru [mailto:renaud.delbru@deri.org]
>> Sent: Friday, May 20, 2011 5:10 AM
>> To: java-user@lucene.apache.org
>> Subject: Query Parser, Unary Operators and Multi-Field Query
>>
>> Hi,
>>
>> The behaviour of the query parser (either the standard lucene query
>> parser, or the query parser contrib) is not what I expect when I am using
>> - unary operators
>> - a multi-field query
>> - AND as default operator.
>>
>> For example, let say I have two field fieldA and fieldB, and the
>> following query:
>> +termA +termB termC
>>
>> Lucene query parsers will expand the query as:
>> +(fieldA:termA fieldB:termA) +(fieldA:termB fieldB:termB) +(fieldA:termC
>> fieldB:termC)
>>
>> while I would have expected this
>>
>> +(fieldA:termA fieldB:termA) +(fieldA:termB fieldB:termB) (fieldA:termC
>> fieldB:termC)
>>
>> Is it the normal behaviour ? A Bug ? Am I doing something wrong ?
>>
>> Thanks in advance for your help,
>> --
>> Renaud Delbru
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 18:23:40 2011
Return-Path: <java-user-return-49787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE46F6B29
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 18:23:39 +0000 (UTC)
Received: (qmail 57839 invoked by uid 500); 20 May 2011 18:23:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57776 invoked by uid 500); 20 May 2011 18:23:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57768 invoked by uid 99); 20 May 2011 18:23:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:23:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:23:33 +0000
Received: by wyb40 with SMTP id 40so4481780wyb.35
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 11:23:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.93.36 with SMTP id t36mr4422183wbm.11.1305915791122; Fri,
 20 May 2011 11:23:11 -0700 (PDT)
Received: by 10.227.24.11 with HTTP; Fri, 20 May 2011 11:23:11 -0700 (PDT)
In-Reply-To: <8CDE5223E12DBC7-1250-B698@FRR2-L18./f>
References: <BANLkTim4pfXT2YsZvCe7UXv6EXjWPMf+XQ@mail.gmail.com>
	<8CDE5223E12DBC7-1250-B698@FRR2-L18./f>
Date: Fri, 20 May 2011 14:23:11 -0400
Message-ID: <BANLkTimoLRW5XHM7YLYjsMpbxsOUy0B3ig@mail.gmail.com>
Subject: Re: How to delete docs when using NRT?
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Phew :)  Thanks for bringing closure Chris,

Mike

http://blog.mikemccandless.com

On Fri, May 20, 2011 at 12:29 PM, Chris Bamford
<chris.bamford@talktalk.net> wrote:
>
> =A0Mike - my bad. =A0I store my ids as numeric, and I was trying to delet=
e using a string termquery. =A0Got it working now.
>
> Thanks anyway
>
> - Chris
>
>
>
>
>
>
>
>
>
> -----Original Message-----
> From: Michael McCandless <lucene@mikemccandless.com>
> To: java-user@lucene.apache.org
> Sent: Fri, 20 May 2011 16:50
> Subject: Re: How to delete docs when using NRT?
>
>
> That should have worked.
>
> There's nothing special about deleting docs when using NRT reader.
>
> Can you boil it down to a test case?
>
> Mike
>
> http://blog.mikemccandless.com
>
> On Fri, May 20, 2011 at 11:30 AM, Chris Bamford
> <chris.bamford@talktalk.net> wrote:
>> Hi there,
>>
>> Is there something special I should be doing here? This is my sequence:
>>
>> open writer
>> add =A0doc #1
>> add =A0doc #2
>> get reader from writer
>> do a search on reader - matches doc #1
>> delete doc #1 from writer
>> commit writer
>> add doc #3
>> optimise writer
>> close writer
>>
>> So by my reckoning, my index should contain docs 2 & 3.
>> Luke says different - all 3 are there! =A0Why hasn't doc #1 gone?
>>
>> Have I missed something?
>>
>> Thanks,
>>
>> - Chris
>>
>>
>>
>>
>>
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 18:26:56 2011
Return-Path: <java-user-return-49788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 526696BFA
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 18:26:56 +0000 (UTC)
Received: (qmail 66667 invoked by uid 500); 20 May 2011 18:26:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66617 invoked by uid 500); 20 May 2011 18:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66609 invoked by uid 99); 20 May 2011 18:26:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:26:54 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:26:46 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p4KIQP75009305
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Fri, 20 May 2011 14:26:25 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Fri, 20 May 2011
 14:26:24 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 20 May 2011 14:26:24 -0400
Subject: RE: Query Parser,  Unary Operators and Multi-Field Query
Thread-Topic: Query Parser,  Unary Operators and Multi-Field Query
Thread-Index: AcwXF5Rpz1bOXwPUTPq+kEz9G9bgUQAAY+uQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FBAD4301A@suex07-mbx-03.ad.syr.edu>
References: <4DD62FCA.4070400@deri.org>
 <2D127F11DC79714E9B6A43AC9458147FBAD42FC1@suex07-mbx-03.ad.syr.edu>
 <4DD6ABB4.4000300@deri.org>
In-Reply-To: <4DD6ABB4.4000300@deri.org>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.4.6813,1.0.148,0.0.0000
 definitions=2011-05-20_05:2011-05-20,2011-05-20,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

SGkgUmVuYXVkLA0KDQpPbiA1LzIwLzIwMTEgYXQgMTo1OCBQTSwgUmVuYXVkIERlbGJydSB3cm90
ZToNCj4gQXMgc2FpZCBpbiANCj4gPGh0dHA6Ly9sdWNpZHdvcmtzLmx1Y2lkaW1hZ2luYXRpb24u
Y29tL2Rpc3BsYXkvTFdFVUcvQm9vbGVhbitPcGVyYXRvcnM+LCANCj4gImlmIG9uZSBvciBtb3Jl
IG9mIHRoZSB0ZXJtcyBpbiBhIHRlcm0gbGlzdCBoYXMgYW4gZXhwbGljaXQgdGVybSBvcGVyYXRv
cg0KPiAoKyBvciAtIG9yIHJlbGF0aW9uYWwgb3BlcmF0b3IpIHRoZSByZXN0IG9mIHRoZSB0ZXJt
cyB3aWxsIGJlIHRyZWF0ZWQgYXMgDQo+ICJuaWNlIHRvIGhhdmUuDQoNCkkgYW0gbm90IGZhbWls
aWFyIHdpdGggTHVjaWQncyBvZmZlcmluZ3MsIHNvIEkgY2FuJ3QgY29tbWVudCBvbiB0aGUgZG9j
dW1lbnRhdGlvbiB5b3UgcXVvdGVkLiAgTm90ZSwgaG93ZXZlciwgdGhhdCBMdWNpZFdvcmtzIGFu
ZCBMdWNlbmUgYXJlIGRpZmZlcmVudCBwcm9kdWN0cy4NCg0KPiBJIHdvdWxkIGhhdmUgZXhwZWN0
ZWQgdGhhdCB0aGUgZGVmYXVsdCBBTkQgb3BlcmF0b3IgYXBwbGllcyB3aGVuZXZlciBubw0KPiBv
dGhlciBvcGVyYXRvcnMgYXJlIHByZWNpc2VkIGluIHRoZSBxdWVyeS4NCj4NCj4gRm9yIGV4bWFw
bGUNCj4gDQo+ICAgICAgY2F0ICtkb2cgLWZveA0KPiANCj4gU2VsZWN0cyBkb2N1bWVudHMgd2hp
Y2ggbXVzdCBjb250YWluICJkb2ciIGFuZCBtdXN0IG5vdCBjb250YWluICJmb3giLg0KPiBEb2N1
bWVudHMgd2lsbCByYW5rIGhpZ2hlciBpZiAiY2F0IiBpcyBwcmVzZW50LCBidXQgaXQgaXMgbm90
IHJlcXVpcmVkLiINCj4gDQo+IEkgd291bGQgaGF2ZSBleHBlY3RlZCBzdWNoIGJlaGF2aW91ciwg
d2hhdGV2ZXIgIkRlZmF1bHQgT3BlcmF0b3IiIGFzDQo+IGJlZW4gZGVmaW5lZC4NCj4NCj4gQnV0
IGl0IHNlZW1zIHRoYXQgSSBuZWVkIHRvIHVzZSB0aGUgRGVmYXVsdCBPcGVyYXRvciBPUiB0byBo
YXZlIHRoaXMNCj4gYmVoYXZpb3VyLCB3aGljaCBicmVha3Mgb3VyIGN1cnJlbnQgcmVxdWlyZW1l
bnQgKHdlIHdhbnQgZGVmYXVsdA0KPiBvcGVyYXRvciBBTkQgaWYgbm8gb3BlcmF0b3JzIGFyZSBw
cmVjaXNlZCBpbiB0aGUgcXVlcnkpLg0KDQpSZXN0YXRpbmc6IHlvdSB3YW50IGRlZmF1bHQgQU5E
IGJlaGF2aW9yIHdoZW4gdGhlIHF1ZXJ5IGNvbnRhaW5zIG5vIG9wZXJhdG9ycywgYW5kIGRlZmF1
bHQgT1IgYmVoYXZpb3Igd2hlbiB0aGUgcXVlcnkgKmRvZXMqIGNvbnRhaW4gb3BlcmF0b3JzLg0K
DQpUaGlzIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIEx1Y2VuZSBRdWVyeVBhcnNlci4NCg0KPiBJ
UyB0aGVyZSBhbnl3YXkgdG8gYWNoaWV2ZSB0aGlzID8gT3IgZG8gSSBuZWVkIHRvIGV4dGVuZCBt
eXNlbGYgdGhlDQo+IHF1ZXJ5cGFyc2VyIGNvbnRyaWIgPw0KDQpBIHdvcmthcm91bmQgbWF5IGJl
IHRvIHNpbXBseSBsb29rIGZvciAiKyIgYW5kICItIiBpbiB0aGUgcXVlcnkgdW5kZXIgb25lIG9m
IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczogcHJlY2VkZWQgZWl0aGVyIGJ5ICIoIiBvciAiICIs
IG9yIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZywgZS5nLiB1c2luZyBhIHJlZ2V4IGxp
a2UgLyg/Ol58W1xzKF0pWystXS8sIGFuZCBpZiB5b3UgZmluZCBhIG1hdGNoLCB1c2UgZGVmYXVs
dCBPUiBvcGVyYXRvciwgYW5kIGlmIG5vdCwgdXNlIGRlZmF1bHQgQU5EIG9wZXJhdG9yPw0KDQpT
dGV2ZQ0KDQo=


From java-user-return-49789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 18:46:35 2011
Return-Path: <java-user-return-49789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 45B9A6267
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 18:46:35 +0000 (UTC)
Received: (qmail 581 invoked by uid 500); 20 May 2011 18:46:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 383 invoked by uid 500); 20 May 2011 18:46:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 375 invoked by uid 99); 20 May 2011 18:46:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:46:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:46:26 +0000
Received: by ywk9 with SMTP id 9so2080105ywk.35
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 11:46:05 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=ca6nNDQ4VPUj6Mbb6DoU+aVOAIddwidjBlWQFM4hmK4=;
        b=FXxqU2r/UWbWwG3LHbYXnaaHcXt6a/wcXq+XcsW6ekwSd78oUdi5jb4ZCo/EL6IL9P
         ak1S9vNM8KzalMTT5Ik8ZJcY4fFfYq09QA8Ag7iU9GZJMAs97FsOWeS27uTUYCPRC4IL
         M7sF854aNrKbcTAMwxp9mH8v7MGoZsvg6I2O4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=e/zLnltXlV2JCn/l4B/ne4z/7skYJa43qZTwNyUC5/GPfThe6irGmix1xJhvTJLnXZ
         IUrWCH6nQIIgSQCE6c2N/DWKYLZrhxQ5rpxXuNmEg1pzb8y39gdYKm1dBuDleLafV+qF
         KXOKxa1ijiP0CXfdI+Na6GzXN4kNhLGsnFLlg=
MIME-Version: 1.0
Received: by 10.90.84.1 with SMTP id h1mr911757agb.150.1305917165558; Fri, 20
 May 2011 11:46:05 -0700 (PDT)
Received: by 10.90.120.1 with HTTP; Fri, 20 May 2011 11:46:05 -0700 (PDT)
In-Reply-To: <BANLkTi=zYES+OfxuDSOfJ5kQNX0ZMeBgNQ@mail.gmail.com>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com>
	<BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com>
	<E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net>
	<BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com>
	<BANLkTikAD4=0ErWhdOQ9-G1ZvuoqH8b+LQ@mail.gmail.com>
	<BANLkTi=zYES+OfxuDSOfJ5kQNX0ZMeBgNQ@mail.gmail.com>
Date: Fri, 20 May 2011 21:46:05 +0300
Message-ID: <BANLkTinfmP_ep1ZO=t4R1_U8cLS6STHqbQ@mail.gmail.com>
Subject: Re: Please help me with a basic question...
From: Doron Cohen <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64f47d6c25b4d04a3b98812

--0016e64f47d6c25b4d04a3b98812
Content-Type: text/plain; charset=ISO-8859-1

Hi Rich,

SeetSpotSimilarity looks promising. Does it not favor shorter docs by not
> normalizing or does it make some attempt to standardized.
>
> > - using e.g. SeetSpotSimilarity which do not favor shorter documents.
>

SweetSpotSimilarity (I misspelled it previously) defines a range of lengths
which is not normalized (this is the sweet spot) and a slop by which longer
or shorter documents are "punished" relative to the gap from the defined
range. It takes parameters for defining the range and the slop. See here:
http://lucene.apache.org/java/3_1_0/api/contrib-misc/org/apache/lucene/misc/SweetSpotSimilarity.html

I stumbled upon the 'Explain' function yesterday though it returns a crowded
> message using debug in SOLR admin. Is there another method or interface
> which returns more or cleaner info?
>

I am not familiar with the use of Solr for this, I hope someone else will
answer this...


> >>>> (Number of times the term appears in a document)
> >>>>    /   (Total Number of terms in that document)
> >>>>    * Log10(Number of total documents
> >>>>                  / Number of times search term appears in all
> documents)
>

If I read this correctly it seems the part about dividing by
    (Total Number of terms in that document)
does not describe the default scoring in Lucene, where this value, aka the
doc length, only takes part in the length normalization. This is also
explained here:
http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/search/Similarity.html

Once you are able to actually compare the score computation details
(Explain) for such two documents I think you'll be in better state for
identifying what really hurts the search quality.

Regards,
Doron

--0016e64f47d6c25b4d04a3b98812--

From java-user-return-49790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 18:59:50 2011
Return-Path: <java-user-return-49790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9C8C56F3E
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 18:59:50 +0000 (UTC)
Received: (qmail 17508 invoked by uid 500); 20 May 2011 18:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17472 invoked by uid 500); 20 May 2011 18:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17464 invoked by uid 99); 20 May 2011 18:59:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:59:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 18:59:41 +0000
Received: by fxm7 with SMTP id 7so4687889fxm.35
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 11:59:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:sender:in-reply-to
         :references:date:x-google-sender-auth:message-id:subject:from:to
         :content-type;
        bh=J7PvduC0KBz/S81auZ2Ds84DDlCIDTdZ7M8SsbrXqBk=;
        b=ozkDuL/Gp0o1VjqXdUN0WbBWMYtGoVqAb7JV9l1V4+LcTqPKx/OmxEbcmffoN2Wc0Y
         7tbBvozQv1lrgIcD0Cf1sQACpQg14hjOb4uwfkANOtkx/Q5fPLw5gFsy53IJyKP71wAQ
         j9m9N8o7b4FE548q31A7/YqXmdqOl3CaBYQLc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:reply-to:sender:in-reply-to:references:date
         :x-google-sender-auth:message-id:subject:from:to:content-type;
        b=iLsxxpWadp6bCTejcsnuirEwpfVDtyIKWR7MijwWFlca/g033NkM53RCDBWlY4ea7u
         kgUKdaJYPEgm04zDow8ukwRgUPpuoqY9a5dovHcCEXtl7cSUbNd3BmruSEz+Pzy4SWbe
         IqgWiRDwxvAjZcCWxr58wwkBH3sOnMqaNQcpc=
MIME-Version: 1.0
Received: by 10.223.53.84 with SMTP id l20mr5381152fag.48.1305917961383; Fri,
 20 May 2011 11:59:21 -0700 (PDT)
Reply-To: yonik@lucidimagination.com
Sender: yseeley@gmail.com
Received: by 10.223.112.12 with HTTP; Fri, 20 May 2011 11:59:21 -0700 (PDT)
In-Reply-To: <BANLkTinfmP_ep1ZO=t4R1_U8cLS6STHqbQ@mail.gmail.com>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com>
	<BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com>
	<E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net>
	<BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com>
	<BANLkTikAD4=0ErWhdOQ9-G1ZvuoqH8b+LQ@mail.gmail.com>
	<BANLkTi=zYES+OfxuDSOfJ5kQNX0ZMeBgNQ@mail.gmail.com>
	<BANLkTinfmP_ep1ZO=t4R1_U8cLS6STHqbQ@mail.gmail.com>
Date: Fri, 20 May 2011 14:59:21 -0400
X-Google-Sender-Auth: 89-Tk8Ag8xVHmsSp8ImaJjYO2nI
Message-ID: <BANLkTinqC3=UjYxO+h1GkfLSDFFkeeJLoQ@mail.gmail.com>
Subject: Re: Please help me with a basic question...
From: Yonik Seeley <yonik@lucidimagination.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, May 20, 2011 at 2:46 PM, Doron Cohen <cdoronc@gmail.com> wrote:
> I stumbled upon the 'Explain' function yesterday though it returns a crowded
>> message using debug in SOLR admin. Is there another method or interface
>> which returns more or cleaner info?
>>
>
> I am not familiar with the use of Solr for this, I hope someone else will
> answer this...

Most browser's default XML display don't preserve the text
formatting... hence the explain can look messed up.
try viewing the "source" or original page (CTRL-U in firefox,
CTRL-ALT-U or CMD-ALT-U in chrome I think)... and make sure
indent=true


http://localhost:8983/solr/select?q=solr&debugQuery=true&indent=true

  <lst name="explain">
    <str name="SOLR1000">
0.58961654 = (MATCH) fieldWeight(text:solr in 1), product of:
   1.4142135 = tf(termFreq(text:solr)=2)
   3.3353748 = idf(docFreq=2, maxDocs=31)
   0.125 = fieldNorm(field=text, doc=1)
</str>
  </lst>

If email doesn't mess this up somewhere, you should see a properly
indented block of "explain" text.

-Yonik
http://www.lucenerevolution.org -- Lucene/Solr User Conference, May
25-26, San Francisco

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 19:40:02 2011
Return-Path: <java-user-return-49791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F9FF6A0D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 19:40:02 +0000 (UTC)
Received: (qmail 80500 invoked by uid 500); 20 May 2011 19:40:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80425 invoked by uid 500); 20 May 2011 19:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80416 invoked by uid 99); 20 May 2011 19:40:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 19:40:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 19:39:51 +0000
Received: by pzk10 with SMTP id 10so2650509pzk.35
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 12:39:29 -0700 (PDT)
Received: by 10.142.126.18 with SMTP id y18mr2817614wfc.361.1305920369576;
        Fri, 20 May 2011 12:39:29 -0700 (PDT)
Received: from bester.local ([65.78.136.75])
        by mx.google.com with ESMTPS id k7sm3484983wfa.14.2011.05.20.12.39.26
        (version=SSLv3 cipher=OTHER);
        Fri, 20 May 2011 12:39:27 -0700 (PDT)
Date: Fri, 20 May 2011 12:39:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Please help me with a basic question...
In-Reply-To: <BANLkTi=zYES+OfxuDSOfJ5kQNX0ZMeBgNQ@mail.gmail.com>
Message-ID: <alpine.DEB.2.00.1105201232020.3563@bester>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com> <BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com> <E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net> <BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com> <BANLkTikAD4=0ErWhdOQ9-G1ZvuoqH8b+LQ@mail.gmail.com>
 <BANLkTi=zYES+OfxuDSOfJ5kQNX0ZMeBgNQ@mail.gmail.com>
User-Agent: Alpine 2.00 (DEB 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

: I stumbled upon the 'Explain' function yesterday though it returns a crowded
: message using debug in SOLR admin. Is there another method or interface
: which returns more or cleaner info?

On trunk, you can add the "debug.explain.structured=true" param which will 
cause the explanation messages to be returned as structured data.

Aparently this never got added to the wiki, so i updated it now...

http://wiki.apache.org/solr/CommonQueryParameters#debug.explain.structured


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 20 20:04:39 2011
Return-Path: <java-user-return-49792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BEA0E6BA8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 20 May 2011 20:04:39 +0000 (UTC)
Received: (qmail 31874 invoked by uid 500); 20 May 2011 20:04:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31832 invoked by uid 500); 20 May 2011 20:04:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31824 invoked by uid 99); 20 May 2011 20:04:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 20:04:37 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 20 May 2011 20:04:28 +0000
Received: by pwi16 with SMTP id 16so2728547pwi.35
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 13:04:07 -0700 (PDT)
Received: by 10.68.59.169 with SMTP id a9mr25038pbr.60.1305921847479;
        Fri, 20 May 2011 13:04:07 -0700 (PDT)
Received: from bester.local ([65.78.136.75])
        by mx.google.com with ESMTPS id h4sm2640284pbj.2.2011.05.20.13.04.05
        (version=SSLv3 cipher=OTHER);
        Fri, 20 May 2011 13:04:06 -0700 (PDT)
Date: Fri, 20 May 2011 13:04:03 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Please help me with a basic question...
In-Reply-To: <alpine.DEB.2.00.1105201232020.3563@bester>
Message-ID: <alpine.DEB.2.00.1105201302580.3563@bester>
References: <BANLkTi=2hG=2yZ3sbjedWicCAqJ9WAVj1A@mail.gmail.com> <BANLkTik9OEg99E89S1cir9TWSEOnkG1MHQ@mail.gmail.com> <E9DBDB2D-7FFE-47D3-84E0-53E38F2E759A@hoplahup.net> <BANLkTinLqi+dM2Pk1Yd03GrYNgeg=wAMDg@mail.gmail.com> <BANLkTikAD4=0ErWhdOQ9-G1ZvuoqH8b+LQ@mail.gmail.com>
 <BANLkTi=zYES+OfxuDSOfJ5kQNX0ZMeBgNQ@mail.gmail.com> <alpine.DEB.2.00.1105201232020.3563@bester>
User-Agent: Alpine 2.00 (DEB 1167 2008-08-23)
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: On trunk, you can add the "debug.explain.structured=true" param which will 
: cause the explanation messages to be returned as structured data.

backported to 3x for inclusion in 3.2...

https://issues.apache.org/jira/browse/SOLR-1915


-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat May 21 00:27:43 2011
Return-Path: <java-user-return-49793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EFEDB601C
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 21 May 2011 00:27:42 +0000 (UTC)
Received: (qmail 79431 invoked by uid 500); 21 May 2011 00:27:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79392 invoked by uid 500); 21 May 2011 00:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79384 invoked by uid 99); 21 May 2011 00:27:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 May 2011 00:27:40 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 May 2011 00:27:32 +0000
Received: by vws7 with SMTP id 7so4827941vws.35
        for <java-user@lucene.apache.org>; Fri, 20 May 2011 17:27:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=d7qSeJRYCjp6scCvBOIdnCAPupnpuyg55ZiDZD58IJ0=;
        b=Ksk0fGeCVpODtxuEtc2p9Z9lSaGK/KQPlCfky0O5a2s1IXv1BJdMke06hA6OpW6LrE
         n90Skqx5Oqx6lAq1lmJH3dSf7pVhXgchbjEj7yFTvuYJEQHQFsBv/zoGsPV56KUapeYy
         kzDky8QXJZ/ppgjS8jvbSWk5kq+bKLjxKzGEM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=M9sVH4SuUU3UPN9mAmvHq4+Dlbi59deaS0nC2CyDfGzdZAb1/dIyUvCHysnoJC1ode
         UiMgt8XgcO4zNqZRYqseRnSu2Cc+Zzcemmd4OyA8nsWSdf89GTR0Dwp8Ji1TeGFamDbm
         xU+xqFRiY1JLCcQs1tQivL2dbgJBxa3mZlU/k=
MIME-Version: 1.0
Received: by 10.52.185.98 with SMTP id fb2mr291589vdc.198.1305937631452; Fri,
 20 May 2011 17:27:11 -0700 (PDT)
Received: by 10.52.166.165 with HTTP; Fri, 20 May 2011 17:27:11 -0700 (PDT)
Date: Sat, 21 May 2011 08:27:11 +0800
Message-ID: <BANLkTi=z1UyE=fnUv_zk+NamMLB_CitS_A@mail.gmail.com>
Subject: How to create document objects in our case
From: Cheng Zhou <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec548a6db9f934304a3be4ccf
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec548a6db9f934304a3be4ccf
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have a large number of XML files to be indexed by Lucene. All the files
share similar structure as below:

<Group id="abc" member="cde" blah blah ....>
   <Subgroup id="abc1" member ="fgh" blah blah ...>
   <Subgroup id="abc2" member ="fgh" blah blah ...>
   <Subgroup id="abc3" member ="fgh" blah blah ...>
   ......
</Group>

Things to be noted are:

The root element of Group has 30 or so attributes, and it usually has over
2000 Subgroup elements, which in turn also have more than 20 attributes.

I want to create one Document object which holds the contents of the Group
element, and one Document object which holds all the Subgroup elements.

Here are my challenges however:

1. How many fields are advised for a Document to be indexed by Lucene? Will
over 30 fields (for the Group element) be too many?

2. How to create a Document object and fields for holding all the Subgroup
elements? Is this a good way to think of?

3. How can I link the Document object of the Group element to the Document
object of all the Subgroup elements?

Please note that I intend to use such two Document objects to achieve the
group while I don't know whether it is a good solution or not. I am open to
using more than two Documents to do the job, but I don't know how to connect
all the objects in Lucene.

Many thanks!

--bcaec548a6db9f934304a3be4ccf--

From java-user-return-49794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat May 21 10:07:04 2011
Return-Path: <java-user-return-49794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 019C24CA6
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 21 May 2011 10:07:04 +0000 (UTC)
Received: (qmail 49909 invoked by uid 500); 21 May 2011 10:07:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49846 invoked by uid 500); 21 May 2011 10:07:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49838 invoked by uid 99); 21 May 2011 10:07:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 May 2011 10:07:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [140.203.201.100] (HELO mx1.nuigalway.ie) (140.203.201.100)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 21 May 2011 10:06:52 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AuMGAOaN102My8qD/2dsb2JhbACEW5NIjnOIcKlZkFuBK4NngQcEkBGELx2KKg
X-IronPort-AV: E=Sophos;i="4.65,246,1304290800"; 
   d="scan'208";a="172184894"
Received: from vmserver66.nuigalway.ie (HELO vmit04.deri.ie) ([140.203.202.131])
  by mx1.nuigalway.ie with ESMTP; 21 May 2011 11:06:30 +0100
Received: from [192.168.1.8] (unknown [188.141.67.88])
	by vmit04.deri.ie (Postfix) with ESMTPSA id 7993296DE1
	for <java-user@lucene.apache.org>; Sat, 21 May 2011 10:58:50 +0100 (IST)
Message-ID: <4DD78EA4.9060108@deri.org>
Date: Sat, 21 May 2011 11:06:28 +0100
From: Renaud Delbru <renaud.delbru@deri.org>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.17) Gecko/20110424 Lightning/1.0b2 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Query Parser,  Unary Operators and Multi-Field Query
References: <4DD62FCA.4070400@deri.org> <2D127F11DC79714E9B6A43AC9458147FBAD42FC1@suex07-mbx-03.ad.syr.edu> <4DD6ABB4.4000300@deri.org> <2D127F11DC79714E9B6A43AC9458147FBAD4301A@suex07-mbx-03.ad.syr.edu>
In-Reply-To: <2D127F11DC79714E9B6A43AC9458147FBAD4301A@suex07-mbx-03.ad.syr.edu>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

On 20/05/11 19:26, Steven A Rowe wrote:
>>       cat +dog -fox
>>
>> Selects documents which must contain "dog" and must not contain "fox".
>> Documents will rank higher if "cat" is present, but it is not required."
>>
>> I would have expected such behaviour, whatever "Default Operator" as
>> been defined.
>>
>> But it seems that I need to use the Default Operator OR to have this
>> behaviour, which breaks our current requirement (we want default
>> operator AND if no operators are precised in the query).
>
> Restating: you want default AND behavior when the query contains no operators, and default OR behavior when the query *does* contain operators.
>
> This is not supported by the Lucene QueryParser.

Ok,

>
>> IS there anyway to achieve this ? Or do I need to extend myself the
>> queryparser contrib ?
>
> A workaround may be to simply look for "+" and "-" in the query under one of the following conditions: preceded either by "(" or " ", or at the beginning of the string, e.g. using a regex like /(?:^|[\s(])[+-]/, and if you find a match, use default OR operator, and if not, use default AND operator?

Ok, thanks for the workaround.

-- 
Renaud Delbru

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat May 21 15:28:14 2011
Return-Path: <java-user-return-49795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7ADE94CE1
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 21 May 2011 15:28:14 +0000 (UTC)
Received: (qmail 24762 invoked by uid 500); 21 May 2011 15:28:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24667 invoked by uid 500); 21 May 2011 15:28:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 2903 invoked by uid 99); 21 May 2011 11:51:01 -0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of whtiandike@gmail.com designates 209.85.212.179 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:references:in-reply-to:mime-version
         :content-transfer-encoding:content-type:message-id:cc:x-mailer:from
         :subject:date:to;
        bh=wA2IBMi49wuH+3CI6+HISDsrb5IAH8y6bhpAE4DiEIs=;
        b=kuFPd3KEXIklYNKz7Y1efGeb4TC8WgqWHWd/YLejWznzCsIRo3RT2Sz1QpXtJ2ksEn
         TLf1HnthMLOew6RH45whzvgJ0YeIr5GTOL3qHrI106PxS5hO+d6mlni5qt6SUmiFnuRO
         ITzugZ9mys6a3LBChwMv/Okb2QaLszKs8o7SY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=references:in-reply-to:mime-version:content-transfer-encoding
         :content-type:message-id:cc:x-mailer:from:subject:date:to;
        b=eJtctmCCkAbCB+n/Xqg0h0HjK7BRV1EmtNinmd6Jp9qfiMBQIKxjAQH+4ybQ5Lkkh1
         KTYy0ukUIu3gFJAuwM2d51bm//dDjvtOOgcdaOaVurck3YOVULj5hJU+y8XXN+K/tV7/
         LppVRPZGrMZIlxFqWUPlKsq+eeqQpM8bVy0FE=
References: <0FD59CD8A2DF49D5AAB65412A8F43297@sv.us.sonicwall.com> <AANLkTimN2xt6stZ049TC95HZp7=tdoNeg_cqCxxZx6iG@mail.gmail.com>
In-Reply-To: <AANLkTimN2xt6stZ049TC95HZp7=tdoNeg_cqCxxZx6iG@mail.gmail.com>
Mime-Version: 1.0 (iPad Mail 8G4)
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain;
	charset=utf-8
Message-Id: <7F5710F9-4526-4DDA-973A-9CF26BA7756B@gmail.com>
Cc: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Mailer: iPad Mail (8G4)
From: whtiandike <whtiandike@gmail.com>
Subject: Re: Scale up design
Date: Sat, 21 May 2011 19:53:03 +0800
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

jhnyt

=E5=8F=91=E8=87=AA=E6=88=91=E7=9A=84 iPad

=E5=9C=A8 2010-12-13=EF=BC=8C14:46=EF=BC=8CPradeep Singh <pksinghus@gmail.co=
m> =E5=86=99=E9=81=93=EF=BC=9A

> 8GB is used on laptops. For servers you need more.
>=20
> On Sun, Dec 12, 2010 at 10:25 PM, Ganesh <emailgane@yahoo.co.in> wrote:
>=20
>> Hello all,
>>=20
>> I know little bit about scale out design, Sharding the database across
>> systems. Is any one in this group tried Scale up architecture? I think to=

>> scale up, we need to use 64 bit. How about the Lucene performance in 64 b=
it?
>> Whether we could use 8 GB RAM completely?
>>=20
>> Could any share their thoughts on this.
>>=20
>> Regards
>> Ganesh
>> Send free SMS to your Friends on Mobile from your Yahoo! Messenger.
>> Download Now! http://messenger.yahoo.com/download.php
>>=20
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>=20
>>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 10:07:27 2011
Return-Path: <java-user-return-49796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 153DC686B
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 10:07:27 +0000 (UTC)
Received: (qmail 7432 invoked by uid 500); 22 May 2011 10:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7373 invoked by uid 500); 22 May 2011 10:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7365 invoked by uid 99); 22 May 2011 10:07:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 10:07:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of oren.liat@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 10:07:17 +0000
Received: by wyb40 with SMTP id 40so5485697wyb.35
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 03:06:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=XBK5DIgRYJDB5sAvUlq2thfoRoOnbZeYySChK2l7aX0=;
        b=eR/OXnfs3fD6MkfZvSQ9oTenEX3j63ZZcKP3va4g02O6ot4pGiPPH1NoVis5FoULpA
         s3wGty6KDwMTUimIYdRz1Kl6tAeq0/ik9fVGZxamkLHFm246Esp+9S0Omg3ISQiV4yN/
         1oa5MRUQ3UZKahguVuzD0Qh3Fx5xpTa2F150I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=wdOyuY6uWBriZsfj69gGYktQGHI8bq3p6igs+ycZZFVXQhEok31DX/3krYz62I1r3+
         ltncPDNc/3EzjncM52Qt7MbMAWpPWG2auwZp3aeCOmnqmx550HrWHJjK7l85p/yKFqKn
         krZbKKa3UC4RtTP/2r/Tn82tRc9xGeV/OvrME=
MIME-Version: 1.0
Received: by 10.216.27.67 with SMTP id d45mr1218465wea.21.1306058815794; Sun,
 22 May 2011 03:06:55 -0700 (PDT)
Received: by 10.216.153.146 with HTTP; Sun, 22 May 2011 03:06:55 -0700 (PDT)
Date: Sun, 22 May 2011 06:06:55 -0400
Message-ID: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
Subject: stop the search
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e6dab4cec56cae04a3da8367

--0016e6dab4cec56cae04a3da8367
Content-Type: text/plain; charset=ISO-8859-1

Hi Everyone,

Is there a way to stop a multi search in the middle?

Thanks a lot,
Liat

--0016e6dab4cec56cae04a3da8367--

From java-user-return-49797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 10:58:38 2011
Return-Path: <java-user-return-49797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id F00676D87
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 10:58:38 +0000 (UTC)
Received: (qmail 47509 invoked by uid 500); 22 May 2011 10:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47464 invoked by uid 500); 22 May 2011 10:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47456 invoked by uid 99); 22 May 2011 10:58:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 10:58:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 10:58:31 +0000
Received: by wwi18 with SMTP id 18so3591553wwi.5
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 03:58:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.201.9 with SMTP id ey9mr1257414wbb.41.1306061889171; Sun,
 22 May 2011 03:58:09 -0700 (PDT)
Received: by 10.227.24.11 with HTTP; Sun, 22 May 2011 03:58:09 -0700 (PDT)
In-Reply-To: <BANLkTi=z1UyE=fnUv_zk+NamMLB_CitS_A@mail.gmail.com>
References: <BANLkTi=z1UyE=fnUv_zk+NamMLB_CitS_A@mail.gmail.com>
Date: Sun, 22 May 2011 06:58:09 -0400
Message-ID: <BANLkTing7Yuksj3vYDtsvLDs3TaGsf09uw@mail.gmail.com>
Subject: Re: How to create document objects in our case
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

30 fields is fine, but if they are all indexed you should watch out
for memory usage.  Ie, norms require 1 byte per doc per indexed field.
 If you don't need norms (don't boost, lengths don't vary much or you
don't care to have field length impact scoring) you can omit norms.

The relationship b/w Group and Subgroup is not something Lucene can do
today -- all docs are "independent" in a Lucene index.

So.. you can either "denormalize", meaning duplicate all Group fields
onto each subgroup, or you can check out
https://issues.apache.org/jira/browse/LUCENE-2454 which I think adds
exactly what you need.  It's not yet committed, but we are finally
starting to make progress towards that, eg
https://issues.apache.org/jira/browse/LUCENE-3112

Mike

http://blog.mikemccandless.com

On Fri, May 20, 2011 at 8:27 PM, Cheng Zhou <zhoucheng2008@gmail.com> wrote=
:
> Hi,
>
> I have a large number of XML files to be indexed by Lucene. All the files
> share similar structure as below:
>
> <Group id=3D"abc" member=3D"cde" blah blah ....>
> =A0 <Subgroup id=3D"abc1" member =3D"fgh" blah blah ...>
> =A0 <Subgroup id=3D"abc2" member =3D"fgh" blah blah ...>
> =A0 <Subgroup id=3D"abc3" member =3D"fgh" blah blah ...>
> =A0 ......
> </Group>
>
> Things to be noted are:
>
> The root element of Group has 30 or so attributes, and it usually has ove=
r
> 2000 Subgroup elements, which in turn also have more than 20 attributes.
>
> I want to create one Document object which holds the contents of the Grou=
p
> element, and one Document object which holds all the Subgroup elements.
>
> Here are my challenges however:
>
> 1. How many fields are advised for a Document to be indexed by Lucene? Wi=
ll
> over 30 fields (for the Group element) be too many?
>
> 2. How to create a Document object and fields for holding all the Subgrou=
p
> elements? Is this a good way to think of?
>
> 3. How can I link the Document object of the Group element to the Documen=
t
> object of all the Subgroup elements?
>
> Please note that I intend to use such two Document objects to achieve the
> group while I don't know whether it is a good solution or not. I am open =
to
> using more than two Documents to do the job, but I don't know how to conn=
ect
> all the objects in Lucene.
>
> Many thanks!
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 11:27:43 2011
Return-Path: <java-user-return-49798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ADF9D6904
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 11:27:43 +0000 (UTC)
Received: (qmail 58365 invoked by uid 500); 22 May 2011 11:27:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58313 invoked by uid 500); 22 May 2011 11:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58302 invoked by uid 99); 22 May 2011 11:27:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 11:27:41 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 11:27:35 +0000
Received: by yxd5 with SMTP id 5so2642163yxd.35
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 04:27:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:content-type;
        bh=0mYZpT7LnJAYqejJjc8J/Xc7P/O0qObJ2D7F4VJZbeo=;
        b=VnmiLGWw1mRqKEnA44SDVFjSMhjBfsZMLZm06faeX2spDYtEwIroinHKhzwllu1YDq
         gXrboTRGATMwcHwfplAC+O/WubYeHaY+osCanbbWdM+2m+WQ5ocwzKvpRGbBNRNEaGpu
         U+DX8gzKPQDwNGe9VeKbNB42b+XUaIuzn23+M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        b=x+PxADYcTajdRus4FhRBDEbsSuPePuWPSRHEZ3WUI/toL8vvtzIkr2GsN49eAc8mb0
         OJhWmtNJA/1lQW+6kGhehEIUIj/H8VYEvvObhNSpYBAVvUl+XBgeInxDxSgK0KazZeP9
         d1ogYeGgRmS3tkZ9gQzdyg/jKCT13RlW840GM=
MIME-Version: 1.0
Received: by 10.236.19.199 with SMTP id n47mr1469611yhn.376.1306063634014;
 Sun, 22 May 2011 04:27:14 -0700 (PDT)
Received: by 10.236.202.229 with HTTP; Sun, 22 May 2011 04:27:13 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
References: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
Date: Sun, 22 May 2011 13:27:13 +0200
Message-ID: <BANLkTim2b5qU9EO_P2iAxbUz=Z4F24XnpA@mail.gmail.com>
Subject: Re: stop the search
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

you can impl. you own collector and notify the collector to stop if you need to.
simon

On Sun, May 22, 2011 at 12:06 PM, liat oren <oren.liat@gmail.com> wrote:
> Hi Everyone,
>
> Is there a way to stop a multi search in the middle?
>
> Thanks a lot,
> Liat
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 11:50:54 2011
Return-Path: <java-user-return-49799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 85CAC6560
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 11:50:54 +0000 (UTC)
Received: (qmail 71154 invoked by uid 500); 22 May 2011 11:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71095 invoked by uid 500); 22 May 2011 11:50:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71087 invoked by uid 99); 22 May 2011 11:50:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 11:50:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.212.179 as permitted sender)
Received: from [209.85.212.179] (HELO mail-px0-f179.google.com) (209.85.212.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 11:50:44 +0000
Received: by pxi2 with SMTP id 2so3928025pxi.24
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 04:50:22 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=09wbQ8fzx75bo0JHQhDBpy87od/S2aJHEVtPmSH8t9s=;
        b=ACKxOgzFXT3hWIQpEn9vabkPoz4deP4MSb777vavQzwFVFl1V+dCiDhPq+BQLzwVDe
         +7cLNg07BKjVD61Sw2EuS94oavfGMVmgIyNchePyaiNSWe91iW4QPkxxkzCXYS8TeVgs
         O/x+9VSYAdf1AMH1GhiY3Iyp2gS5RzGl9FPLI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=NTDHTnjFojKtEW6AzJ/h1GLkuQsHM5AWRKLOhoKZGf7wdqFYMIv4nSXG6OxtRq6Yu1
         5oyYpfrLp4GMven2XNb7SeBT/7Fud4bEK2CSOn1CK8ecOv0nbwJ7cqCt+eRRvQZA/FwS
         Mo0qL0hlgk+MxreFMIDKjZmgFB7kZZc+jk8yM=
Received: by 10.68.23.106 with SMTP id l10mr1740574pbf.65.1306065022648;
        Sun, 22 May 2011 04:50:22 -0700 (PDT)
Received: from zcdyPC ([125.123.64.153])
        by mx.google.com with ESMTPS id q20sm3679697pbt.72.2011.05.22.04.50.17
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 22 May 2011 04:50:21 -0700 (PDT)
From: "zhoucheng2008" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
References: <BANLkTi=z1UyE=fnUv_zk+NamMLB_CitS_A@mail.gmail.com> <BANLkTing7Yuksj3vYDtsvLDs3TaGsf09uw@mail.gmail.com>
In-Reply-To: <BANLkTing7Yuksj3vYDtsvLDs3TaGsf09uw@mail.gmail.com>
Subject: RE: How to create document objects in our case
Date: Sun, 22 May 2011 19:49:31 +0800
Message-ID: <003101cc1876$6dd9f570$498de050$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwYbzQD2BPKWScoRHKIKCD3VqoP8gABqCnQ
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Mike, thanks for reply.

Can you please elaborate a little bit more on " If you don't need norms
(don't boost, lengths don't vary much or you
don't care to have field length impact scoring) you can omit norms"?

When do you expect the handling of nested document will be applicable?

Cheng


-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Sunday, May 22, 2011 6:58 PM
To: java-user@lucene.apache.org
Subject: Re: How to create document objects in our case

30 fields is fine, but if they are all indexed you should watch out
for memory usage.  Ie, norms require 1 byte per doc per indexed field.
 If you don't need norms (don't boost, lengths don't vary much or you
don't care to have field length impact scoring) you can omit norms.

The relationship b/w Group and Subgroup is not something Lucene can do
today -- all docs are "independent" in a Lucene index.

So.. you can either "denormalize", meaning duplicate all Group fields
onto each subgroup, or you can check out
https://issues.apache.org/jira/browse/LUCENE-2454 which I think adds
exactly what you need.  It's not yet committed, but we are finally
starting to make progress towards that, eg
https://issues.apache.org/jira/browse/LUCENE-3112

Mike

http://blog.mikemccandless.com

On Fri, May 20, 2011 at 8:27 PM, Cheng Zhou <zhoucheng2008@gmail.com> =
wrote:
> Hi,
>
> I have a large number of XML files to be indexed by Lucene. All the =
files
> share similar structure as below:
>
> <Group id=3D"abc" member=3D"cde" blah blah ....>
> =A0 <Subgroup id=3D"abc1" member =3D"fgh" blah blah ...>
> =A0 <Subgroup id=3D"abc2" member =3D"fgh" blah blah ...>
> =A0 <Subgroup id=3D"abc3" member =3D"fgh" blah blah ...>
> =A0 ......
> </Group>
>
> Things to be noted are:
>
> The root element of Group has 30 or so attributes, and it usually has =
over
> 2000 Subgroup elements, which in turn also have more than 20 =
attributes.
>
> I want to create one Document object which holds the contents of the =
Group
> element, and one Document object which holds all the Subgroup =
elements.
>
> Here are my challenges however:
>
> 1. How many fields are advised for a Document to be indexed by Lucene?
Will
> over 30 fields (for the Group element) be too many?
>
> 2. How to create a Document object and fields for holding all the =
Subgroup
> elements? Is this a good way to think of?
>
> 3. How can I link the Document object of the Group element to the =
Document
> object of all the Subgroup elements?
>
> Please note that I intend to use such two Document objects to achieve =
the
> group while I don't know whether it is a good solution or not. I am =
open
to
> using more than two Documents to do the job, but I don't know how to
connect
> all the objects in Lucene.
>
> Many thanks!
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 12:09:23 2011
Return-Path: <java-user-return-49800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 263D16D18
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 12:09:23 +0000 (UTC)
Received: (qmail 85290 invoked by uid 500); 22 May 2011 12:09:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85235 invoked by uid 500); 22 May 2011 12:09:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85227 invoked by uid 99); 22 May 2011 12:09:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 12:09:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 12:09:15 +0000
Received: by wwi18 with SMTP id 18so3612014wwi.5
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 05:08:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.93.36 with SMTP id t36mr1253082wbm.11.1306066133700; Sun,
 22 May 2011 05:08:53 -0700 (PDT)
Received: by 10.227.24.11 with HTTP; Sun, 22 May 2011 05:08:53 -0700 (PDT)
In-Reply-To: <003101cc1876$6dd9f570$498de050$@com>
References: <BANLkTi=z1UyE=fnUv_zk+NamMLB_CitS_A@mail.gmail.com>
	<BANLkTing7Yuksj3vYDtsvLDs3TaGsf09uw@mail.gmail.com>
	<003101cc1876$6dd9f570$498de050$@com>
Date: Sun, 22 May 2011 08:08:53 -0400
Message-ID: <BANLkTi=rn84NO5qA-A5zaXOJeQ4Mtw+oyw@mail.gmail.com>
Subject: Re: How to create document objects in our case
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Norms is how Lucene records what the apriori boost is for each
docXfield.  This boost is the product of per-field boost, per-doc
boost (both of which your app would set when it creates the doc), as
well as the "length normalization" Lucene's default similarity applies
(shorter docs have higher boost).

It's a quantized float, encoded as 8 bits.

If your fields tend not to vary in length much, and you don't use
boosting yourself, and you are worried about RAM, you should omit the
norms.  (Field has a method to omit norms).

Not sure when nested docs will be available but I hope soon... even
so, once it's committed, it won't be released until the next release
(though you can use it on the trunk/3.x tip as well, once it's
committed).

Mike

http://blog.mikemccandless.com

On Sun, May 22, 2011 at 7:49 AM, zhoucheng2008 <zhoucheng2008@gmail.com> wr=
ote:
> Mike, thanks for reply.
>
> Can you please elaborate a little bit more on " If you don't need norms
> (don't boost, lengths don't vary much or you
> don't care to have field length impact scoring) you can omit norms"?
>
> When do you expect the handling of nested document will be applicable?
>
> Cheng
>
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Sunday, May 22, 2011 6:58 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to create document objects in our case
>
> 30 fields is fine, but if they are all indexed you should watch out
> for memory usage. =A0Ie, norms require 1 byte per doc per indexed field.
> =A0If you don't need norms (don't boost, lengths don't vary much or you
> don't care to have field length impact scoring) you can omit norms.
>
> The relationship b/w Group and Subgroup is not something Lucene can do
> today -- all docs are "independent" in a Lucene index.
>
> So.. you can either "denormalize", meaning duplicate all Group fields
> onto each subgroup, or you can check out
> https://issues.apache.org/jira/browse/LUCENE-2454 which I think adds
> exactly what you need. =A0It's not yet committed, but we are finally
> starting to make progress towards that, eg
> https://issues.apache.org/jira/browse/LUCENE-3112
>
> Mike
>
> http://blog.mikemccandless.com
>
> On Fri, May 20, 2011 at 8:27 PM, Cheng Zhou <zhoucheng2008@gmail.com> wro=
te:
>> Hi,
>>
>> I have a large number of XML files to be indexed by Lucene. All the file=
s
>> share similar structure as below:
>>
>> <Group id=3D"abc" member=3D"cde" blah blah ....>
>> =A0 <Subgroup id=3D"abc1" member =3D"fgh" blah blah ...>
>> =A0 <Subgroup id=3D"abc2" member =3D"fgh" blah blah ...>
>> =A0 <Subgroup id=3D"abc3" member =3D"fgh" blah blah ...>
>> =A0 ......
>> </Group>
>>
>> Things to be noted are:
>>
>> The root element of Group has 30 or so attributes, and it usually has ov=
er
>> 2000 Subgroup elements, which in turn also have more than 20 attributes.
>>
>> I want to create one Document object which holds the contents of the Gro=
up
>> element, and one Document object which holds all the Subgroup elements.
>>
>> Here are my challenges however:
>>
>> 1. How many fields are advised for a Document to be indexed by Lucene?
> Will
>> over 30 fields (for the Group element) be too many?
>>
>> 2. How to create a Document object and fields for holding all the Subgro=
up
>> elements? Is this a good way to think of?
>>
>> 3. How can I link the Document object of the Group element to the Docume=
nt
>> object of all the Subgroup elements?
>>
>> Please note that I intend to use such two Document objects to achieve th=
e
>> group while I don't know whether it is a good solution or not. I am open
> to
>> using more than two Documents to do the job, but I don't know how to
> connect
>> all the objects in Lucene.
>>
>> Many thanks!
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 13:21:24 2011
Return-Path: <java-user-return-49801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5986A6D49
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 13:21:24 +0000 (UTC)
Received: (qmail 29102 invoked by uid 500); 22 May 2011 13:21:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29066 invoked by uid 500); 22 May 2011 13:21:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29058 invoked by uid 99); 22 May 2011 13:21:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 13:21:22 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 13:21:14 +0000
Received: by pwi16 with SMTP id 16so3368355pwi.35
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 06:20:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:references:in-reply-to:subject:date
         :message-id:mime-version:content-type:content-transfer-encoding
         :x-mailer:thread-index:content-language;
        bh=8LBzXPadbkLyW9wAcF6D28CHggLRuaBn9+Nae6ShepI=;
        b=nLAM38uv4AjGS7gHkaCSzEcnMGHhwAk+8BL6Q307uAoKoH1UZ6lIDFMap43mCWJAF3
         zS8fHsjrEbrDQDd2HyTWjkXV6zUOzLzXEZPsh4HFwVwrwen4PCQwENxRL1U7LMiI5z8S
         uIEYuB0SxoUQ9StHkpywcrYd0UwWCU0khycmk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:references:in-reply-to:subject:date:message-id:mime-version
         :content-type:content-transfer-encoding:x-mailer:thread-index
         :content-language;
        b=NNwzZpoHNwNhlpwSzM0JvmbcqITzw0u6MffMNs7qB2aty+MHhlcB5XOXZYWP9NFMwj
         623JUZsoCUg//TEfmqNGewHfa/EZHTmweE6oE1+2y7WFrPkRaohcV3WyW5S0NS5xFAbS
         M6JxJPa0572DH9Gx5NoJ+M2QN/ZW+hG8/XmH8=
Received: by 10.143.21.27 with SMTP id y27mr655317wfi.115.1306070452656;
        Sun, 22 May 2011 06:20:52 -0700 (PDT)
Received: from zcdyPC ([125.123.75.253])
        by mx.google.com with ESMTPS id w14sm4979723wfh.8.2011.05.22.06.20.47
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sun, 22 May 2011 06:20:50 -0700 (PDT)
From: "zhoucheng2008" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
References: <BANLkTi=z1UyE=fnUv_zk+NamMLB_CitS_A@mail.gmail.com>	<BANLkTing7Yuksj3vYDtsvLDs3TaGsf09uw@mail.gmail.com>	<003101cc1876$6dd9f570$498de050$@com> <BANLkTi=rn84NO5qA-A5zaXOJeQ4Mtw+oyw@mail.gmail.com>
In-Reply-To: <BANLkTi=rn84NO5qA-A5zaXOJeQ4Mtw+oyw@mail.gmail.com>
Subject: RE: How to create document objects in our case
Date: Sun, 22 May 2011 21:20:41 +0800
Message-ID: <003201cc1883$11e7d450$35b77cf0$@com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AcwYeRWiLEqoFDbaQC2JWxRyIiIoPwACfFyA
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

Great, thanks Mike.

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Sunday, May 22, 2011 8:09 PM
To: java-user@lucene.apache.org
Subject: Re: How to create document objects in our case

Norms is how Lucene records what the apriori boost is for each
docXfield.  This boost is the product of per-field boost, per-doc
boost (both of which your app would set when it creates the doc), as
well as the "length normalization" Lucene's default similarity applies
(shorter docs have higher boost).

It's a quantized float, encoded as 8 bits.

If your fields tend not to vary in length much, and you don't use
boosting yourself, and you are worried about RAM, you should omit the
norms.  (Field has a method to omit norms).

Not sure when nested docs will be available but I hope soon... even
so, once it's committed, it won't be released until the next release
(though you can use it on the trunk/3.x tip as well, once it's
committed).

Mike

http://blog.mikemccandless.com

On Sun, May 22, 2011 at 7:49 AM, zhoucheng2008 <zhoucheng2008@gmail.com>
wrote:
> Mike, thanks for reply.
>
> Can you please elaborate a little bit more on " If you don't need =
norms
> (don't boost, lengths don't vary much or you
> don't care to have field length impact scoring) you can omit norms"?
>
> When do you expect the handling of nested document will be applicable?
>
> Cheng
>
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Sunday, May 22, 2011 6:58 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to create document objects in our case
>
> 30 fields is fine, but if they are all indexed you should watch out
> for memory usage. =A0Ie, norms require 1 byte per doc per indexed =
field.
> =A0If you don't need norms (don't boost, lengths don't vary much or =
you
> don't care to have field length impact scoring) you can omit norms.
>
> The relationship b/w Group and Subgroup is not something Lucene can do
> today -- all docs are "independent" in a Lucene index.
>
> So.. you can either "denormalize", meaning duplicate all Group fields
> onto each subgroup, or you can check out
> https://issues.apache.org/jira/browse/LUCENE-2454 which I think adds
> exactly what you need. =A0It's not yet committed, but we are finally
> starting to make progress towards that, eg
> https://issues.apache.org/jira/browse/LUCENE-3112
>
> Mike
>
> http://blog.mikemccandless.com
>
> On Fri, May 20, 2011 at 8:27 PM, Cheng Zhou <zhoucheng2008@gmail.com>
wrote:
>> Hi,
>>
>> I have a large number of XML files to be indexed by Lucene. All the =
files
>> share similar structure as below:
>>
>> <Group id=3D"abc" member=3D"cde" blah blah ....>
>> =A0 <Subgroup id=3D"abc1" member =3D"fgh" blah blah ...>
>> =A0 <Subgroup id=3D"abc2" member =3D"fgh" blah blah ...>
>> =A0 <Subgroup id=3D"abc3" member =3D"fgh" blah blah ...>
>> =A0 ......
>> </Group>
>>
>> Things to be noted are:
>>
>> The root element of Group has 30 or so attributes, and it usually has
over
>> 2000 Subgroup elements, which in turn also have more than 20 =
attributes.
>>
>> I want to create one Document object which holds the contents of the
Group
>> element, and one Document object which holds all the Subgroup =
elements.
>>
>> Here are my challenges however:
>>
>> 1. How many fields are advised for a Document to be indexed by =
Lucene?
> Will
>> over 30 fields (for the Group element) be too many?
>>
>> 2. How to create a Document object and fields for holding all the
Subgroup
>> elements? Is this a good way to think of?
>>
>> 3. How can I link the Document object of the Group element to the
Document
>> object of all the Subgroup elements?
>>
>> Please note that I intend to use such two Document objects to achieve =
the
>> group while I don't know whether it is a good solution or not. I am =
open
> to
>> using more than two Documents to do the job, but I don't know how to
> connect
>> all the objects in Lucene.
>>
>> Many thanks!
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 13:36:23 2011
Return-Path: <java-user-return-49802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 352E1647E
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 13:36:23 +0000 (UTC)
Received: (qmail 40170 invoked by uid 500); 22 May 2011 13:36:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40122 invoked by uid 500); 22 May 2011 13:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40114 invoked by uid 99); 22 May 2011 13:36:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 13:36:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 13:36:15 +0000
Received: by wwi18 with SMTP id 18so3636914wwi.5
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 06:35:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.227.201.9 with SMTP id ey9mr1348307wbb.41.1306071354025; Sun,
 22 May 2011 06:35:54 -0700 (PDT)
Received: by 10.227.24.11 with HTTP; Sun, 22 May 2011 06:35:54 -0700 (PDT)
In-Reply-To: <003201cc1883$11e7d450$35b77cf0$@com>
References: <BANLkTi=z1UyE=fnUv_zk+NamMLB_CitS_A@mail.gmail.com>
	<BANLkTing7Yuksj3vYDtsvLDs3TaGsf09uw@mail.gmail.com>
	<003101cc1876$6dd9f570$498de050$@com>
	<BANLkTi=rn84NO5qA-A5zaXOJeQ4Mtw+oyw@mail.gmail.com>
	<003201cc1883$11e7d450$35b77cf0$@com>
Date: Sun, 22 May 2011 09:35:54 -0400
Message-ID: <BANLkTik7LcDJf0c10u4jd9Fi+FYqWEd08g@mail.gmail.com>
Subject: Re: How to create document objects in our case
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

You're welcome!

Mike

http://blog.mikemccandless.com

On Sun, May 22, 2011 at 9:20 AM, zhoucheng2008 <zhoucheng2008@gmail.com> wr=
ote:
> Great, thanks Mike.
>
> -----Original Message-----
> From: Michael McCandless [mailto:lucene@mikemccandless.com]
> Sent: Sunday, May 22, 2011 8:09 PM
> To: java-user@lucene.apache.org
> Subject: Re: How to create document objects in our case
>
> Norms is how Lucene records what the apriori boost is for each
> docXfield. =A0This boost is the product of per-field boost, per-doc
> boost (both of which your app would set when it creates the doc), as
> well as the "length normalization" Lucene's default similarity applies
> (shorter docs have higher boost).
>
> It's a quantized float, encoded as 8 bits.
>
> If your fields tend not to vary in length much, and you don't use
> boosting yourself, and you are worried about RAM, you should omit the
> norms. =A0(Field has a method to omit norms).
>
> Not sure when nested docs will be available but I hope soon... even
> so, once it's committed, it won't be released until the next release
> (though you can use it on the trunk/3.x tip as well, once it's
> committed).
>
> Mike
>
> http://blog.mikemccandless.com
>
> On Sun, May 22, 2011 at 7:49 AM, zhoucheng2008 <zhoucheng2008@gmail.com>
> wrote:
>> Mike, thanks for reply.
>>
>> Can you please elaborate a little bit more on " If you don't need norms
>> (don't boost, lengths don't vary much or you
>> don't care to have field length impact scoring) you can omit norms"?
>>
>> When do you expect the handling of nested document will be applicable?
>>
>> Cheng
>>
>>
>> -----Original Message-----
>> From: Michael McCandless [mailto:lucene@mikemccandless.com]
>> Sent: Sunday, May 22, 2011 6:58 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: How to create document objects in our case
>>
>> 30 fields is fine, but if they are all indexed you should watch out
>> for memory usage. =A0Ie, norms require 1 byte per doc per indexed field.
>> =A0If you don't need norms (don't boost, lengths don't vary much or you
>> don't care to have field length impact scoring) you can omit norms.
>>
>> The relationship b/w Group and Subgroup is not something Lucene can do
>> today -- all docs are "independent" in a Lucene index.
>>
>> So.. you can either "denormalize", meaning duplicate all Group fields
>> onto each subgroup, or you can check out
>> https://issues.apache.org/jira/browse/LUCENE-2454 which I think adds
>> exactly what you need. =A0It's not yet committed, but we are finally
>> starting to make progress towards that, eg
>> https://issues.apache.org/jira/browse/LUCENE-3112
>>
>> Mike
>>
>> http://blog.mikemccandless.com
>>
>> On Fri, May 20, 2011 at 8:27 PM, Cheng Zhou <zhoucheng2008@gmail.com>
> wrote:
>>> Hi,
>>>
>>> I have a large number of XML files to be indexed by Lucene. All the fil=
es
>>> share similar structure as below:
>>>
>>> <Group id=3D"abc" member=3D"cde" blah blah ....>
>>> =A0 <Subgroup id=3D"abc1" member =3D"fgh" blah blah ...>
>>> =A0 <Subgroup id=3D"abc2" member =3D"fgh" blah blah ...>
>>> =A0 <Subgroup id=3D"abc3" member =3D"fgh" blah blah ...>
>>> =A0 ......
>>> </Group>
>>>
>>> Things to be noted are:
>>>
>>> The root element of Group has 30 or so attributes, and it usually has
> over
>>> 2000 Subgroup elements, which in turn also have more than 20 attributes=
.
>>>
>>> I want to create one Document object which holds the contents of the
> Group
>>> element, and one Document object which holds all the Subgroup elements.
>>>
>>> Here are my challenges however:
>>>
>>> 1. How many fields are advised for a Document to be indexed by Lucene?
>> Will
>>> over 30 fields (for the Group element) be too many?
>>>
>>> 2. How to create a Document object and fields for holding all the
> Subgroup
>>> elements? Is this a good way to think of?
>>>
>>> 3. How can I link the Document object of the Group element to the
> Document
>>> object of all the Subgroup elements?
>>>
>>> Please note that I intend to use such two Document objects to achieve t=
he
>>> group while I don't know whether it is a good solution or not. I am ope=
n
>> to
>>> using more than two Documents to do the job, but I don't know how to
>> connect
>>> all the objects in Lucene.
>>>
>>> Many thanks!
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 14:49:11 2011
Return-Path: <java-user-return-49803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5DB0E60EC
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 14:49:11 +0000 (UTC)
Received: (qmail 70996 invoked by uid 500); 22 May 2011 14:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70933 invoked by uid 500); 22 May 2011 14:49:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70925 invoked by uid 99); 22 May 2011 14:49:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 14:49:09 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devon.odell@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 14:49:04 +0000
Received: by iym1 with SMTP id 1so6349853iym.35
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 07:48:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=BZ/iT+xkTbMZ6vmM72we6eySIVyLI+KE+Ubp/fdVtuQ=;
        b=oFatSeyrAcR3Ka8+Cjy1pI5z8wUZeKF5+w1wyo8VvKrJRI72TDN3xS2bqbUMyeXsxz
         VA8IQHQxg5R/3+r5JaRTnxU4yfxTXfBpHvUeRovtdtAUz95v92aT8J3JjoxSZFCBqQhL
         RSsTriQ1raSweSHUoP8Tm4IYysZ89ZQD4d3Uc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=DBIKT7uHRKGNNve8QAdIfmBVHZzqRxRl+ijrZQz6VD8B48ShtXBiDMFcH2TJVphVSp
         iiDzXdXr7gLDhcglqiCPZpYEjmBRk59p8JiV7dz5R2SBO/ihxAHCz95xp42KtBr3h03L
         hCvy8XhDAv2y1lFsMUw1YKsIUvyoshpJjA0hk=
MIME-Version: 1.0
Received: by 10.42.219.10 with SMTP id hs10mr7582507icb.220.1306075723594;
 Sun, 22 May 2011 07:48:43 -0700 (PDT)
Received: by 10.231.14.72 with HTTP; Sun, 22 May 2011 07:48:43 -0700 (PDT)
In-Reply-To: <BANLkTim2b5qU9EO_P2iAxbUz=Z4F24XnpA@mail.gmail.com>
References: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
	<BANLkTim2b5qU9EO_P2iAxbUz=Z4F24XnpA@mail.gmail.com>
Date: Sun, 22 May 2011 10:48:43 -0400
Message-ID: <BANLkTinQXnnEL_pkbzfjgD4LqYQAgoFDiw@mail.gmail.com>
Subject: Re: stop the search
From: "Devon H. O'Dell" <devon.odell@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Content-Type: text/plain; charset=ISO-8859-1

I have my own collector, but implemented this functionality by running
the search in a thread pool and terminating the FutureTask running the
job if it took longer than some configurable amount of time. That
seemed to do the trick for me. (In my case, the IndexReader is
explicitly opened readonly, so I'm not too worried about it).

--dho

2011/5/22 Simon Willnauer <simon.willnauer@googlemail.com>:
> you can impl. you own collector and notify the collector to stop if you need to.
> simon
>
> On Sun, May 22, 2011 at 12:06 PM, liat oren <oren.liat@gmail.com> wrote:
>> Hi Everyone,
>>
>> Is there a way to stop a multi search in the middle?
>>
>> Thanks a lot,
>> Liat
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 22 17:19:36 2011
Return-Path: <java-user-return-49804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 22C476C5F
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 22 May 2011 17:19:36 +0000 (UTC)
Received: (qmail 23763 invoked by uid 500); 22 May 2011 17:19:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23719 invoked by uid 500); 22 May 2011 17:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23711 invoked by uid 99); 22 May 2011 17:19:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 17:19:33 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.176 as permitted sender)
Received: from [209.85.213.176] (HELO mail-yx0-f176.google.com) (209.85.213.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 22 May 2011 17:19:28 +0000
Received: by yxd5 with SMTP id 5so2724166yxd.35
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 10:19:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type;
        bh=mzUBtfAmYVym5RYlxms2jUlJA7GYTUG5+xBaUz1xEIA=;
        b=kbH+bUHmeqFr/jQz+b9NY/wKgKLFJ2V/gPTjGt9DHvftBailPkOa+lJSybgxtj3tQx
         ccXCoMtwN+jQUYXMX09M3MeXSCIU9lqcGzVpKOaqh1LIUEsPq7tGs60mrgj5yYgPV/hX
         /kCWscE68f2AXfDwi79LIwk0ROeTm5hmJ/5Ro=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type;
        b=CjXroy8XaoZvg4UKWylPSfUDA2cpPE7lwEBRJvruJ1FNyjIbNv5KZgFp4iBKSV/MNb
         aP0C8VuhFrnnXSb4uMnMNQGfYBk/EGGjB2WBVcEpUQ0Kx3KEb6VKmw86qOjLGran+WmF
         6AjMvZlNRXwcOsuagiP42OnHF67AlWpH6eJTs=
MIME-Version: 1.0
Received: by 10.236.170.138 with SMTP id p10mr1877393yhl.175.1306084747952;
 Sun, 22 May 2011 10:19:07 -0700 (PDT)
Received: by 10.236.202.229 with HTTP; Sun, 22 May 2011 10:19:07 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTinQXnnEL_pkbzfjgD4LqYQAgoFDiw@mail.gmail.com>
References: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
	<BANLkTim2b5qU9EO_P2iAxbUz=Z4F24XnpA@mail.gmail.com>
	<BANLkTinQXnnEL_pkbzfjgD4LqYQAgoFDiw@mail.gmail.com>
Date: Sun, 22 May 2011 19:19:07 +0200
Message-ID: <BANLkTimqwSP0o4OsWkJMDhX=WFk2xLMWcg@mail.gmail.com>
Subject: Re: stop the search
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: "Devon H. O'Dell" <devon.odell@gmail.com>
Cc: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

On Sun, May 22, 2011 at 4:48 PM, Devon H. O'Dell <devon.odell@gmail.com> wrote:
> I have my own collector, but implemented this functionality by running
> the search in a thread pool and terminating the FutureTask running the
> job if it took longer than some configurable amount of time. That
> seemed to do the trick for me. (In my case, the IndexReader is
> explicitly opened readonly, so I'm not too worried about it).

This can be super dangerous if you use Future. cancel() ie.
Thread.interrupt(). If the interrupt is called while you are reading
from a NIO FileDescriptor the channel will be closed and Lucene can
not recover from that state if the file has already been merged away.
Your Reader will get ChannelAlreadyClosed exceptions for any
subsequent access. You should prevent this.
see FSDirectory Javadoc
http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/store/FSDirectory.html

simon
>
> --dho
>
> 2011/5/22 Simon Willnauer <simon.willnauer@googlemail.com>:
>> you can impl. you own collector and notify the collector to stop if you need to.
>> simon
>>
>> On Sun, May 22, 2011 at 12:06 PM, liat oren <oren.liat@gmail.com> wrote:
>>> Hi Everyone,
>>>
>>> Is there a way to stop a multi search in the middle?
>>>
>>> Thanks a lot,
>>> Liat
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 05:28:58 2011
Return-Path: <java-user-return-49805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 25DDE40CB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 05:28:58 +0000 (UTC)
Received: (qmail 56963 invoked by uid 500); 23 May 2011 05:28:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56909 invoked by uid 500); 23 May 2011 05:28:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 54825 invoked by uid 99); 23 May 2011 05:25:11 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.213.48 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=jdMiqCkv8Fap0E+81KiVh5M+QoPD6+Vl/SbGY4mn6Fc=;
        b=wWo08M4gBX5KKqMWbvYcu2xewja5Gpo8ESiYkmISHU9CJM0cwfsy0frJoYRB22/dMQ
         uZ5g51IIdrcd31JgOtH52J7sjb54wrLSm6A1fGuSN3HhfVnbvidvfFfz+d27LR781uRn
         Fng0ijvfIFE+XXDIVCPpSjuAO9ypYQ4NTPIGg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=m0Gs6oM9MVPggsSTPH93jvVeyKABWiM58QmhveYv8HhCeBz/ZnVT13YqlosHOYignh
         pYEo9gPq9UN7nuL9fjlAcYuOamEcxcjBrdvRhrlTsWCawI6dVnETS0t6hNn5eZLiNBqA
         yvBhak9RzHtuIx4NpYaPmHQmVq5h4EBqtGle0=
MIME-Version: 1.0
Date: Mon, 23 May 2011 13:24:44 +0800
Message-ID: <BANLkTi=LMsy-WF=aA6bzAOsU1-1N7ckbQg@mail.gmail.com>
Subject: FastVectorHighlighter StringIndexOutofBounds bug
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cdf1a3e6bca6404a3eab005

--000e0cdf1a3e6bca6404a3eab005
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

the following code has a bug of StringIndexOutofBounds when multiple matche=
d
terms need highlight

private String makeFragment( WeightedFragInfo fragInfo, String src, int s,
      String[] preTags, String[] postTags, Encoder encoder ){
    StringBuilder fragment =3D new StringBuilder();
    int srcIndex =3D 0;
    for( SubInfo subInfo : fragInfo.subInfos ){
      for( Toffs to : subInfo.termsOffsets ){
        fragment
          .append( encoder.encodeText( src.substring( srcIndex,
to.startOffset - s ) ) )
          .append( getPreTag( preTags, subInfo.seqnum ) )
          .append( encoder.encodeText( src.substring( to.startOffset - s,
to.endOffset - s ) ) )
          .append( getPostTag( postTags, subInfo.seqnum ) );
        srcIndex =3D to.endOffset - s;
      }
    }
    fragment.append( encoder.encodeText( src.substring( srcIndex ) ) );
    return fragment.toString();
  }--
=CD=F5=CE=A1=CE=A1
Cell: 18911288489
MSN: ww.wang.cs@gmail.com
Blog: http://whisper.eyesay.org
=CE=A7=B2=B1:http://t.sina.com/lolorosa

--000e0cdf1a3e6bca6404a3eab005--

From java-user-return-49806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 05:35:19 2011
Return-Path: <java-user-return-49806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4EB0F46C1
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 05:35:19 +0000 (UTC)
Received: (qmail 61649 invoked by uid 500); 23 May 2011 05:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61491 invoked by uid 500); 23 May 2011 05:35:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61483 invoked by uid 99); 23 May 2011 05:35:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 05:35:15 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 05:35:08 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p4N5YlDf012632
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Mon, 23 May 2011 01:34:47 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Mon, 23 May 2011
 01:34:46 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 23 May 2011 01:34:45 -0400
Subject: RE: FastVectorHighlighter StringIndexOutofBounds bug
Thread-Topic: FastVectorHighlighter StringIndexOutofBounds bug
Thread-Index: AcwZClQLYWtfzj82Sh6sIREPTOUrVQAAIcOA
Message-ID: <2D127F11DC79714E9B6A43AC9458147FBAD4304E@suex07-mbx-03.ad.syr.edu>
References: <BANLkTi=LMsy-WF=aA6bzAOsU1-1N7ckbQg@mail.gmail.com>
In-Reply-To: <BANLkTi=LMsy-WF=aA6bzAOsU1-1N7ckbQg@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.4.6813,1.0.148,0.0.0000
 definitions=2011-05-23_02:2011-05-20,2011-05-23,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgV2VpV2VpLA0KDQpUaGFua3MgZm9yIHRoZSByZXBvcnQuIA0KDQpDYW4geW91IHByb3ZpZGUg
YSBzZWxmLWNvbnRhaW5lZCB1bml0IHRlc3QgdGhhdCB0cmlnZ2VycyB0aGUgYnVnPw0KDQpUaGFu
a3MsDQpTdGV2ZQ0KDQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IFdlaXdl
aSBXYW5nIFttYWlsdG86d3cud2FuZy5jc0BnbWFpbC5jb21dDQo+IFNlbnQ6IE1vbmRheSwgTWF5
IDIzLCAyMDExIDE6MjUgQU0NCj4gVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZw0KPiBT
dWJqZWN0OiBGYXN0VmVjdG9ySGlnaGxpZ2h0ZXIgU3RyaW5nSW5kZXhPdXRvZkJvdW5kcyBidWcN
Cj4gDQo+IHRoZSBmb2xsb3dpbmcgY29kZSBoYXMgYSBidWcgb2YgU3RyaW5nSW5kZXhPdXRvZkJv
dW5kcyB3aGVuIG11bHRpcGxlDQo+IG1hdGNoZWQNCj4gdGVybXMgbmVlZCBoaWdobGlnaHQNCj4g
DQo+IHByaXZhdGUgU3RyaW5nIG1ha2VGcmFnbWVudCggV2VpZ2h0ZWRGcmFnSW5mbyBmcmFnSW5m
bywgU3RyaW5nIHNyYywgaW50DQo+IHMsDQo+ICAgICAgIFN0cmluZ1tdIHByZVRhZ3MsIFN0cmlu
Z1tdIHBvc3RUYWdzLCBFbmNvZGVyIGVuY29kZXIgKXsNCj4gICAgIFN0cmluZ0J1aWxkZXIgZnJh
Z21lbnQgPSBuZXcgU3RyaW5nQnVpbGRlcigpOw0KPiAgICAgaW50IHNyY0luZGV4ID0gMDsNCj4g
ICAgIGZvciggU3ViSW5mbyBzdWJJbmZvIDogZnJhZ0luZm8uc3ViSW5mb3MgKXsNCj4gICAgICAg
Zm9yKCBUb2ZmcyB0byA6IHN1YkluZm8udGVybXNPZmZzZXRzICl7DQo+ICAgICAgICAgZnJhZ21l
bnQNCj4gICAgICAgICAgIC5hcHBlbmQoIGVuY29kZXIuZW5jb2RlVGV4dCggc3JjLnN1YnN0cmlu
Zyggc3JjSW5kZXgsDQo+IHRvLnN0YXJ0T2Zmc2V0IC0gcyApICkgKQ0KPiAgICAgICAgICAgLmFw
cGVuZCggZ2V0UHJlVGFnKCBwcmVUYWdzLCBzdWJJbmZvLnNlcW51bSApICkNCj4gICAgICAgICAg
IC5hcHBlbmQoIGVuY29kZXIuZW5jb2RlVGV4dCggc3JjLnN1YnN0cmluZyggdG8uc3RhcnRPZmZz
ZXQgLSBzLA0KPiB0by5lbmRPZmZzZXQgLSBzICkgKSApDQo+ICAgICAgICAgICAuYXBwZW5kKCBn
ZXRQb3N0VGFnKCBwb3N0VGFncywgc3ViSW5mby5zZXFudW0gKSApOw0KPiAgICAgICAgIHNyY0lu
ZGV4ID0gdG8uZW5kT2Zmc2V0IC0gczsNCj4gICAgICAgfQ0KPiAgICAgfQ0KPiAgICAgZnJhZ21l
bnQuYXBwZW5kKCBlbmNvZGVyLmVuY29kZVRleHQoIHNyYy5zdWJzdHJpbmcoIHNyY0luZGV4ICkg
KSApOw0KPiAgICAgcmV0dXJuIGZyYWdtZW50LnRvU3RyaW5nKCk7DQo+ICAgfS0tDQo+IOeOi+W3
jeW3jQ0KPiBDZWxsOiAxODkxMTI4ODQ4OQ0KPiBNU046IHd3LndhbmcuY3NAZ21haWwuY29tDQo+
IEJsb2c6IGh0dHA6Ly93aGlzcGVyLmV5ZXNheS5vcmcNCj4g5Zu06ISWOmh0dHA6Ly90LnNpbmEu
Y29tL2xvbG9yb3NhDQo=


From java-user-return-49807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 05:37:12 2011
Return-Path: <java-user-return-49807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 669BA46D5
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 05:37:12 +0000 (UTC)
Received: (qmail 63648 invoked by uid 500); 23 May 2011 05:37:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63604 invoked by uid 500); 23 May 2011 05:37:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63590 invoked by uid 99); 23 May 2011 05:37:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 05:37:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ww.wang.cs@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 05:37:03 +0000
Received: by yia28 with SMTP id 28so2902333yia.35
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 22:36:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=n7S7yJ23K7A/+hqlDeoz5XuQDKa0aP9Gg9D+6yzYGXo=;
        b=RY4cJlnxnRpy3YD4LUq9/QpQlaoyv/K0kWYynu2KyjH9w8rB5Dykm5GLgHPfuQmXyj
         crvwpUkjl1tQLpUoD/oZ5GB751YDqwODR2K4PtYSZvxcMNbvPygm54nKTh5tPjaoOzfC
         vFHEAy+dGtHBoN7aJoEwVZeBz/swewktkjLFI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=vjPvWqucGR6k8jzmnZgSj/Hm9ekXwSJJCtBapO01lsS2H4b11FULPeGRZg0akNgwdv
         Mrsf4z2hx8oPKwrjvoysHmn1GZsCReA1o+7Ymo9SLWkBs6J14JrzeVrJfMqj418qVZZu
         M8ma3p6rlHjvguFAtdA+/FCsSnOfpRY/6/GSc=
MIME-Version: 1.0
Received: by 10.150.2.11 with SMTP id 11mr2312543ybb.186.1306129002662; Sun,
 22 May 2011 22:36:42 -0700 (PDT)
Received: by 10.151.101.5 with HTTP; Sun, 22 May 2011 22:36:42 -0700 (PDT)
In-Reply-To: <BANLkTi=LMsy-WF=aA6bzAOsU1-1N7ckbQg@mail.gmail.com>
References: <BANLkTi=LMsy-WF=aA6bzAOsU1-1N7ckbQg@mail.gmail.com>
Date: Mon, 23 May 2011 13:36:42 +0800
Message-ID: <BANLkTinF+ya-DTMhqRoxUM3-5tSzTun+WA@mail.gmail.com>
Subject: Re: FastVectorHighlighter StringIndexOutofBounds bug
From: Weiwei Wang <ww.wang.cs@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd405823c0d3d04a3eadbc4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd405823c0d3d04a3eadbc4
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: quoted-printable

1. source string: 777777777
2. WhitespaceTokenizer + EGramTokenFilter
3. FastVectorHighlighter,
4. debug info:  subInfos=3D(777((8,11))777((5,8))777((2,5)))/3.0(2,102),
srcIndex is not correctly computed for the second loop of the outer for-loo=
p

2011/5/23 Weiwei Wang <ww.wang.cs@gmail.com>

> the following code has a bug of StringIndexOutofBounds when multiple
> matched terms need highlight
>
> private String makeFragment( WeightedFragInfo fragInfo, String src, int s=
,
>       String[] preTags, String[] postTags, Encoder encoder ){
>     StringBuilder fragment =3D new StringBuilder();
>     int srcIndex =3D 0;
>     for( SubInfo subInfo : fragInfo.subInfos ){
>       for( Toffs to : subInfo.termsOffsets ){
>         fragment
>           .append( encoder.encodeText( src.substring( srcIndex,
> to.startOffset - s ) ) )
>           .append( getPreTag( preTags, subInfo.seqnum ) )
>           .append( encoder.encodeText( src.substring( to.startOffset - s,
> to.endOffset - s ) ) )
>           .append( getPostTag( postTags, subInfo.seqnum ) );
>         srcIndex =3D to.endOffset - s;
>       }
>     }
>     fragment.append( encoder.encodeText( src.substring( srcIndex ) ) );
>     return fragment.toString();
>   }--
> =CD=F5=CE=A1=CE=A1
> Cell: 18911288489
> MSN: ww.wang.cs@gmail.com
> Blog: http://whisper.eyesay.org
> =CE=A7=B2=B1:http://t.sina.com/lolorosa
>
>


--=20
=CD=F5=CE=A1=CE=A1
Cell: 18911288489
MSN: ww.wang.cs@gmail.com
Blog: http://whisper.eyesay.org
=CE=A7=B2=B1:http://t.sina.com/lolorosa

--000e0cd405823c0d3d04a3eadbc4--

From java-user-return-49808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 06:10:18 2011
Return-Path: <java-user-return-49808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DB12F4453
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 06:10:18 +0000 (UTC)
Received: (qmail 85346 invoked by uid 500); 23 May 2011 06:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85312 invoked by uid 500); 23 May 2011 06:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85303 invoked by uid 99); 23 May 2011 06:10:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 06:10:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 74.125.82.42 as permitted sender)
Received: from [74.125.82.42] (HELO mail-ww0-f42.google.com) (74.125.82.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 06:10:08 +0000
Received: by wwk4 with SMTP id 4so1182684wwk.5
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 23:09:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=QCUC3X6qxvBPeUzwYCA0AgeYY0x3vokC+i6dTHwsvPs=;
        b=Df+//lowNAXAlWfleZnB7GpjlXDXRY3JKtx8XiVKpLYn4RYr2gqOwf7PThFY2fdEFT
         AgKnJAcyd/5pbfOk5q2/FJhcr9U1mYeg0OxynTmDjlXE5Vt9rp3SpvV+6fv7Ax7XctIt
         A8IW2HfoGZBY0lzsT6jARj3deojPUyYD60s6o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=oIjHMS1bUPCON4wkUxTkU7IrvW8g4IcRNYIFfyMYgEngCdUnFOWekNzODEI9l3yujW
         HpyqPSiV8xDiFgybJoqkASRT6x+4Ua2uPpEBcbKm/6ci/S5FFdqQ32ufDU5/FIygfLnN
         seJpUnmL0EiEN3N8VQHJ0C7k5yZ/wqXG/NsnI=
MIME-Version: 1.0
Received: by 10.216.235.33 with SMTP id t33mr1831094weq.6.1306130988640; Sun,
 22 May 2011 23:09:48 -0700 (PDT)
Received: by 10.216.153.146 with HTTP; Sun, 22 May 2011 23:09:48 -0700 (PDT)
In-Reply-To: <BANLkTimqwSP0o4OsWkJMDhX=WFk2xLMWcg@mail.gmail.com>
References: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
	<BANLkTim2b5qU9EO_P2iAxbUz=Z4F24XnpA@mail.gmail.com>
	<BANLkTinQXnnEL_pkbzfjgD4LqYQAgoFDiw@mail.gmail.com>
	<BANLkTimqwSP0o4OsWkJMDhX=WFk2xLMWcg@mail.gmail.com>
Date: Mon, 23 May 2011 02:09:48 -0400
Message-ID: <BANLkTikuA8ogEtYSM9vGiSigoT6NdUWECA@mail.gmail.com>
Subject: Re: stop the search
From: liat oren <oren.liat@gmail.com>
To: java-user@lucene.apache.org, simon.willnauer@gmail.com
Cc: "Devon H. O'Dell" <devon.odell@gmail.com>
Content-Type: multipart/alternative; boundary=000e0cd4cfac9baa4a04a3eb5154
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd4cfac9baa4a04a3eb5154
Content-Type: text/plain; charset=ISO-8859-1

Thank you very much.

So the best solution would be to implement the collector with a stop
function.
Do you happen to have an example for that?

Many thanks,
Liat

On 22 May 2011 13:19, Simon Willnauer <simon.willnauer@googlemail.com>wrote:

> On Sun, May 22, 2011 at 4:48 PM, Devon H. O'Dell <devon.odell@gmail.com>
> wrote:
> > I have my own collector, but implemented this functionality by running
> > the search in a thread pool and terminating the FutureTask running the
> > job if it took longer than some configurable amount of time. That
> > seemed to do the trick for me. (In my case, the IndexReader is
> > explicitly opened readonly, so I'm not too worried about it).
>
> This can be super dangerous if you use Future. cancel() ie.
> Thread.interrupt(). If the interrupt is called while you are reading
> from a NIO FileDescriptor the channel will be closed and Lucene can
> not recover from that state if the file has already been merged away.
> Your Reader will get ChannelAlreadyClosed exceptions for any
> subsequent access. You should prevent this.
> see FSDirectory Javadoc
>
> http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/store/FSDirectory.html
>
> simon
> >
> > --dho
> >
> > 2011/5/22 Simon Willnauer <simon.willnauer@googlemail.com>:
> >> you can impl. you own collector and notify the collector to stop if you
> need to.
> >> simon
> >>
> >> On Sun, May 22, 2011 at 12:06 PM, liat oren <oren.liat@gmail.com>
> wrote:
> >>> Hi Everyone,
> >>>
> >>> Is there a way to stop a multi search in the middle?
> >>>
> >>> Thanks a lot,
> >>> Liat
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--000e0cd4cfac9baa4a04a3eb5154--

From java-user-return-49809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 06:49:23 2011
Return-Path: <java-user-return-49809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 91C344995
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 06:49:23 +0000 (UTC)
Received: (qmail 13750 invoked by uid 500); 23 May 2011 06:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13591 invoked by uid 500); 23 May 2011 06:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13580 invoked by uid 99); 23 May 2011 06:49:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 06:49:10 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 06:49:03 +0000
Received: by gya6 with SMTP id 6so2911451gya.35
        for <java-user@lucene.apache.org>; Sun, 22 May 2011 23:48:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=domainkey-signature:mime-version:reply-to:in-reply-to:references
         :date:message-id:subject:from:to:cc:content-type;
        bh=RXpU6rz7JOtcjNYADCyeTuJVBveJBYbLa4Kcs0U07Bg=;
        b=u+Zys0KUJSeXmxyY44Z1c9Erml3ipVSutKWpT8Rw20CcMtUGtfu+aj0/SMNkxa3ord
         zlDXyzan4VVnbHTAzRS+d05WchKP1HXfyV2gffETwgkW2RaxVHqUUxoCaeNc05kdMPbb
         f1kKvCXPaYrUyvePfytUC12+91k4V4HL/BnNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:cc:content-type;
        b=Lww7gA1XAnbWnerRUza5f2BI4yUy/Ykb7MCkel5737xdDZ6/83G6+z0ga7FSoa+9Vb
         gs8Z7QzkutBr+xVYS+iKJKvLeCRubvXAIAG5gtZ+JmbO7E+WZuMXk6ZL3fqXU5zr/nRq
         VCC4ITjmgSDzS5A8DRIIolnR3QWiVlvrNnewE=
MIME-Version: 1.0
Received: by 10.236.184.131 with SMTP id s3mr2067650yhm.510.1306133321589;
 Sun, 22 May 2011 23:48:41 -0700 (PDT)
Received: by 10.236.202.229 with HTTP; Sun, 22 May 2011 23:48:41 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <BANLkTikuA8ogEtYSM9vGiSigoT6NdUWECA@mail.gmail.com>
References: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
	<BANLkTim2b5qU9EO_P2iAxbUz=Z4F24XnpA@mail.gmail.com>
	<BANLkTinQXnnEL_pkbzfjgD4LqYQAgoFDiw@mail.gmail.com>
	<BANLkTimqwSP0o4OsWkJMDhX=WFk2xLMWcg@mail.gmail.com>
	<BANLkTikuA8ogEtYSM9vGiSigoT6NdUWECA@mail.gmail.com>
Date: Mon, 23 May 2011 08:48:41 +0200
Message-ID: <BANLkTin0OzmGhDvURXhWw8zYVPMtTCODUA@mail.gmail.com>
Subject: Re: stop the search
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: liat oren <oren.liat@gmail.com>
Cc: java-user@lucene.apache.org, "Devon H. O'Dell" <devon.odell@gmail.com>
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

The simplest way would be a CollectorDelegate that wraps an existing
collector and checks a boolean before calling the delegates collect
method.

simon

On Mon, May 23, 2011 at 8:09 AM, liat oren <oren.liat@gmail.com> wrote:
> Thank you very much.
>
> So the best solution would be to implement the collector with a stop
> function.
> Do you happen to have an example for that?
>
> Many thanks,
> Liat
>
> On 22 May 2011 13:19, Simon Willnauer <simon.willnauer@googlemail.com>
> wrote:
>>
>> On Sun, May 22, 2011 at 4:48 PM, Devon H. O'Dell <devon.odell@gmail.com>
>> wrote:
>> > I have my own collector, but implemented this functionality by running
>> > the search in a thread pool and terminating the FutureTask running the
>> > job if it took longer than some configurable amount of time. That
>> > seemed to do the trick for me. (In my case, the IndexReader is
>> > explicitly opened readonly, so I'm not too worried about it).
>>
>> This can be super dangerous if you use Future. cancel() ie.
>> Thread.interrupt(). If the interrupt is called while you are reading
>> from a NIO FileDescriptor the channel will be closed and Lucene can
>> not recover from that state if the file has already been merged away.
>> Your Reader will get ChannelAlreadyClosed exceptions for any
>> subsequent access. You should prevent this.
>> see FSDirectory Javadoc
>>
>> http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/store/FSDirectory.html
>>
>> simon
>> >
>> > --dho
>> >
>> > 2011/5/22 Simon Willnauer <simon.willnauer@googlemail.com>:
>> >> you can impl. you own collector and notify the collector to stop if you
>> >> need to.
>> >> simon
>> >>
>> >> On Sun, May 22, 2011 at 12:06 PM, liat oren <oren.liat@gmail.com>
>> >> wrote:
>> >>> Hi Everyone,
>> >>>
>> >>> Is there a way to stop a multi search in the middle?
>> >>>
>> >>> Thanks a lot,
>> >>> Liat
>> >>>
>> >>
>> >> ---------------------------------------------------------------------
>> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> >>
>> >>
>> >
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 08:56:41 2011
Return-Path: <java-user-return-49810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7A0B146DA
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 08:56:41 +0000 (UTC)
Received: (qmail 74812 invoked by uid 500); 23 May 2011 08:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74771 invoked by uid 500); 23 May 2011 08:56:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74763 invoked by uid 99); 23 May 2011 08:56:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 08:56:38 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of oren.liat@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 08:56:31 +0000
Received: by wwi18 with SMTP id 18so4005321wwi.5
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 01:56:11 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:cc:content-type;
        bh=eF/96xyuenscoBoUPTI2aQs8jhxzf6B5DHsjureDd9w=;
        b=CHKJjL3YEWf2TQiRO50m4WfD4n9c/iRv8qhSKBDrrvtSr6dfOm41WQrrCpBoXwyDPH
         WTQL0e4KapuyDn9j+RwktyT7YwUNkqGu+QHLhY5FtCVkjGwkKMk6TK6bPJ4qdFddWV3h
         9psW0J+jDkhSj/5IvLf9roih5GmfdJQ1L4jbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type;
        b=Wr7DgV4BXJPno+tNJPTTG5Pa4Pg9oLojB+9WHF84vfTMhoNEKJzZF1J4p0Ew1q32Ge
         9LMyPXA21/pGVaRnu/OtiAs1vnmnF1UmG7VjJ6MUGRVnsXWLgOVhXx3b3L+t0iB8oW3o
         Zn60aekHZ+NOZ9B1U31FATVnQKuFBfNcf7uDA=
MIME-Version: 1.0
Received: by 10.216.254.37 with SMTP id g37mr1958937wes.36.1306140971138; Mon,
 23 May 2011 01:56:11 -0700 (PDT)
Received: by 10.216.153.146 with HTTP; Mon, 23 May 2011 01:56:11 -0700 (PDT)
In-Reply-To: <BANLkTin0OzmGhDvURXhWw8zYVPMtTCODUA@mail.gmail.com>
References: <BANLkTi=MGbRe50Tg0YZpbh7eEQcD4pn53A@mail.gmail.com>
	<BANLkTim2b5qU9EO_P2iAxbUz=Z4F24XnpA@mail.gmail.com>
	<BANLkTinQXnnEL_pkbzfjgD4LqYQAgoFDiw@mail.gmail.com>
	<BANLkTimqwSP0o4OsWkJMDhX=WFk2xLMWcg@mail.gmail.com>
	<BANLkTikuA8ogEtYSM9vGiSigoT6NdUWECA@mail.gmail.com>
	<BANLkTin0OzmGhDvURXhWw8zYVPMtTCODUA@mail.gmail.com>
Date: Mon, 23 May 2011 04:56:11 -0400
Message-ID: <BANLkTi=TdA7zF9pA55WpiXTopcWB8o74ew@mail.gmail.com>
Subject: Re: stop the search
From: liat oren <oren.liat@gmail.com>
To: simon.willnauer@gmail.com
Cc: java-user@lucene.apache.org, "Devon H. O'Dell" <devon.odell@gmail.com>
Content-Type: multipart/alternative; boundary=0015174ff1f49c7fc904a3eda445
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174ff1f49c7fc904a3eda445
Content-Type: text/plain; charset=ISO-8859-1

Thanks a lot.

I tried to debug a long query and see when it gets to the collector.

I thought it will be better to catch the "stop" action in the search itself
and not the top doc collector as I would assume the search action will take
long time to finish and once we get to the top doc collector, it will return
immediately (I take only the top 100 results)

I saw that it gets there after a long time - it first "gets stuck" on a wait
function.

I use MultiSearcher - any idea why that happens?

Many Thanks,
Liat

On 23 May 2011 02:48, Simon Willnauer <simon.willnauer@googlemail.com>wrote:

> The simplest way would be a CollectorDelegate that wraps an existing
> collector and checks a boolean before calling the delegates collect
> method.
>
> simon
>
> On Mon, May 23, 2011 at 8:09 AM, liat oren <oren.liat@gmail.com> wrote:
> > Thank you very much.
> >
> > So the best solution would be to implement the collector with a stop
> > function.
> > Do you happen to have an example for that?
> >
> > Many thanks,
> > Liat
> >
> > On 22 May 2011 13:19, Simon Willnauer <simon.willnauer@googlemail.com>
> > wrote:
> >>
> >> On Sun, May 22, 2011 at 4:48 PM, Devon H. O'Dell <devon.odell@gmail.com
> >
> >> wrote:
> >> > I have my own collector, but implemented this functionality by running
> >> > the search in a thread pool and terminating the FutureTask running the
> >> > job if it took longer than some configurable amount of time. That
> >> > seemed to do the trick for me. (In my case, the IndexReader is
> >> > explicitly opened readonly, so I'm not too worried about it).
> >>
> >> This can be super dangerous if you use Future. cancel() ie.
> >> Thread.interrupt(). If the interrupt is called while you are reading
> >> from a NIO FileDescriptor the channel will be closed and Lucene can
> >> not recover from that state if the file has already been merged away.
> >> Your Reader will get ChannelAlreadyClosed exceptions for any
> >> subsequent access. You should prevent this.
> >> see FSDirectory Javadoc
> >>
> >>
> http://lucene.apache.org/java/3_1_0/api/core/org/apache/lucene/store/FSDirectory.html
> >>
> >> simon
> >> >
> >> > --dho
> >> >
> >> > 2011/5/22 Simon Willnauer <simon.willnauer@googlemail.com>:
> >> >> you can impl. you own collector and notify the collector to stop if
> you
> >> >> need to.
> >> >> simon
> >> >>
> >> >> On Sun, May 22, 2011 at 12:06 PM, liat oren <oren.liat@gmail.com>
> >> >> wrote:
> >> >>> Hi Everyone,
> >> >>>
> >> >>> Is there a way to stop a multi search in the middle?
> >> >>>
> >> >>> Thanks a lot,
> >> >>> Liat
> >> >>>
> >> >>
> >> >> ---------------------------------------------------------------------
> >> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >> >>
> >> >>
> >> >
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >
> >
>

--0015174ff1f49c7fc904a3eda445--

From java-user-return-49811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 11:08:43 2011
Return-Path: <java-user-return-49811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E9AFD4987
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 11:08:43 +0000 (UTC)
Received: (qmail 51273 invoked by uid 500); 23 May 2011 11:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51220 invoked by uid 500); 23 May 2011 11:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51212 invoked by uid 99); 23 May 2011 11:08:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 11:08:41 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 11:08:35 +0000
Received: by qyk30 with SMTP id 30so3972869qyk.14
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 04:08:14 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=r+D25lVj7zdHb41JhJjhh/0rEEolxI6myrI0rj8zw6w=;
        b=c8/abhCW2VHsUEPtAsexUYNXorVnN7Qb/ryX1XGtlKm2MVvzZWrUYb0fjjEqC3xSyR
         E7uykBziD+upi/zkZ+JqprXIZbQ5dhJjfBhFFTlz0zrvDfu5vV20YPoasyslWYTedUII
         7F0jTE16Tv7FM316YmN8T3un2hwD+cBSb36YE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=jZszRUoXT0voxjUV240zjzfm97NTVLSbD5UkBGIDcmsuj+ID0YsG016qydKxfKfd3K
         xT6xF3tOXs5rCLgJJJ9EpD/tvG3OidS8Q1WnKL2o8GblpLtlzgdTzA3+Y1i7G2kBUBuW
         ULmHJif8ILExVPkzpo1pW9kRoGsk6ffiaruT4=
MIME-Version: 1.0
Received: by 10.229.190.133 with SMTP id di5mr1548929qcb.286.1306148894317;
 Mon, 23 May 2011 04:08:14 -0700 (PDT)
Received: by 10.229.49.17 with HTTP; Mon, 23 May 2011 04:08:14 -0700 (PDT)
In-Reply-To: <BANLkTi=xjCgcy6xcaM3-yQZRmRP+TcexiA@mail.gmail.com>
References: <BANLkTi=xjCgcy6xcaM3-yQZRmRP+TcexiA@mail.gmail.com>
Date: Mon, 23 May 2011 12:08:14 +0100
Message-ID: <BANLkTi=fvWa0_+1Puws5q2zVxoG7ax1tnw@mail.gmail.com>
Subject: Re: QueryParser/StopAnalyzer question
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Not much luck so far :(

Just in case if anyone wants to earn some virtual dosh, I have added
some 50 bonus points to this question on StackOverflow:

http://stackoverflow.com/questions/6044061/lucene-query-parsing-behaviour-j=
oining-query-parts-with-and

I also promise to post a solution here if anything satisfactory turns up.

m.

2011/5/17 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
> Hi,
>
> Let's say we have an index having few documents indexed using
> StopAnalyzer.ENGLISH_STOP_WORDS_SET. The user issues two queries:
> 1) foo:bar
> 2) baz:"there is"
>
> Let's assume that the first query yields some results because there
> are documents matching that query.
>
> The second query contains two stopwords ("there" and "is") and yields
> 0 results. The reason for this is because when baz:"there is" is
> parsed, it ends up as a void query as both "there" and "is" are
> stopwords (technically speaking, this is converted to an empty
> BooleanQuery having no clauses). So far so good.
>
> However, any of the following combined queries
>
> +foo:bar +baz:"there is"
> foo:bar AND baz:"there is"
>
> behave exactly the same way as query +foo:bar, that is, brings back
> some results. The second AND part which is supposed to yield no
> results is completely ignored.
>
> One might argue that when ANDing both conditions have to be met, that
> is, documents having foo=3Dbar and baz being empty have to be retrieved,
> as when issued seperately, baz:"there is" yields 0 results.
>
> It seem contradictory as an atomic query component has different
> impact on the overall query depending on the context. Is there any
> logical explanation for this? Can this be addressed in any way,
> preferably without writing own QueryAnalyzer?
>
> If this makes any difference, observed behaviour happens under Lucene v3.=
0.2.
>
> Regards,
> Mindaugas
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 11:45:21 2011
Return-Path: <java-user-return-49812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 39C8B4D3F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 11:45:21 +0000 (UTC)
Received: (qmail 89581 invoked by uid 500); 23 May 2011 11:45:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89546 invoked by uid 500); 23 May 2011 11:45:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89538 invoked by uid 99); 23 May 2011 11:45:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 11:45:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS,T_FRT_BELOW2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ydabhi@asite.com designates 202.131.102.148 as permitted sender)
Received: from [202.131.102.148] (HELO indiaserv01.asite.asitehq.com) (202.131.102.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 11:45:10 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01CC193E.D25614EE"
Subject: # search in Query
X-MimeOLE: Produced By Microsoft Exchange V6.5
Date: Mon, 23 May 2011 17:14:49 +0530
Message-ID: <BE4EDD1665A8004A853E8BDC62C2F1580D2EC6@indiaserv01.asite.asitehq.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: # search in Query
Thread-Index: AcwZPjIj9pwp5rViRC6DDUTTri6XKg==
From: "Yogesh Dabhi" <ydabhi@asite.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01CC193E.D25614EE
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

I have some bellow value in lucene index field

=20

1#abcd

2#test wer

3# testing rty

=20

I wright the query like bellow=20

=20

+fieldname:1#

=20

After  query parser I see query string become=20

+fieldname:1

=20

is there a way to search given string=20

=20


Thanks & Regards=20

Yogesh


------_=_NextPart_001_01CC193E.D25614EE--

From java-user-return-49813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 12:53:00 2011
Return-Path: <java-user-return-49813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 062904B75
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 12:53:00 +0000 (UTC)
Received: (qmail 76396 invoked by uid 500); 23 May 2011 12:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76271 invoked by uid 500); 23 May 2011 12:52:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76263 invoked by uid 99); 23 May 2011 12:52:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 12:52:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 12:52:51 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 6B966DF9B0
	for <java-user@lucene.apache.org>; Mon, 23 May 2011 21:52:30 +0900 (JST)
Message-ID: <4DDA588E.60108@r.email.ne.jp>
Date: Mon, 23 May 2011 21:52:30 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter StringIndexOutofBounds bug
References: <BANLkTi=LMsy-WF=aA6bzAOsU1-1N7ckbQg@mail.gmail.com> <BANLkTinF+ya-DTMhqRoxUM3-5tSzTun+WA@mail.gmail.com>
In-Reply-To: <BANLkTinF+ya-DTMhqRoxUM3-5tSzTun+WA@mail.gmail.com>
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: 7bit

(11/05/23 14:36), Weiwei Wang wrote:
> 1. source string: 777777777
> 2. WhitespaceTokenizer + EGramTokenFilter
> 3. FastVectorHighlighter,
> 4. debug info:  subInfos=(777((8,11))777((5,8))777((2,5)))/3.0(2,102),
> srcIndex is not correctly computed for the second loop of the outer for-loop
> 

How does your query look like?
And what is EGramTokenFilter? Is it NGramTokenFilter?
If so, what are min and max gram sizes?
Note that FVH has a restriction - min and max should equal.
(i.e. min=1 and max=3 cannot be supported by FVH)

koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 14:01:38 2011
Return-Path: <java-user-return-49814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B8BE4864
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 14:01:38 +0000 (UTC)
Received: (qmail 39856 invoked by uid 500); 23 May 2011 14:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39789 invoked by uid 500); 23 May 2011 14:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39730 invoked by uid 99); 23 May 2011 14:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 14:01:34 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_FRT_BELOW2,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 14:01:29 +0000
Received: by iwr19 with SMTP id 19so7449272iwr.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 07:01:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=bAqY4QONai2ziFhzIymOXBfUMeQUxxGug6SHTOi1ESo=;
        b=DCvALx/vDVFmTp6AQjmh1XYWQYySmxe1ki0VohcH5lkO9AC/7fJQMR/9HFlsT2A4Hq
         OBkgJn+3Ye/KpP49isq7SQTh4ZtxCrPry9XSbC26g5YiNk0N3X6eD8qgiJC3zwtjTdmh
         8CVjhsZhvcTd7nITs3atuRuPbbgT+7iLT6KRs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=CNxmTQyzr+xoQvh/rr7LtBoP3ZAM9EgpCPI2zmE6m623FIkcBynzS8ODnPMhUj01dv
         IGUhe2b2IiHXjyVMzb0JWOPY5kaPOcqmhV62yymBLIYSHzVGOyLwHujMERL5ueIyy5go
         JJjg+aH6ZZenJF4wjHmiq6FwQHqq+QHQEF/Ow=
Received: by 10.42.197.69 with SMTP id ej5mr9350922icb.104.1306159269066; Mon,
 23 May 2011 07:01:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.202 with HTTP; Mon, 23 May 2011 07:00:49 -0700 (PDT)
In-Reply-To: <BE4EDD1665A8004A853E8BDC62C2F1580D2EC6@indiaserv01.asite.asitehq.com>
References: <BE4EDD1665A8004A853E8BDC62C2F1580D2EC6@indiaserv01.asite.asitehq.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 23 May 2011 15:00:49 +0100
Message-ID: <BANLkTimq3JGvzvvJ9p6iT4UL7Xgpk9REcg@mail.gmail.com>
Subject: Re: # search in Query
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Are you sure that it isn't working?  If you use the same analyzer at
both indexing and query time you should end up with consistent
results.

Read up on exactly what your analyzer is doing by looking at the javadocs.

Google will find you lots of info on analysis, or get hold of a copy
of Lucene In Action 2nd edition to learn all about lucene.  And use
Luke to see what is being indexed.


--
Ian.


On Mon, May 23, 2011 at 12:44 PM, Yogesh Dabhi <ydabhi@asite.com> wrote:
>
>
> I have some bellow value in lucene index field
>
>
>
> 1#abcd
>
> 2#test wer
>
> 3# testing rty
>
>
>
> I wright the query like bellow
>
>
>
> +fieldname:1#
>
>
>
> After =A0query parser I see query string become
>
> +fieldname:1
>
>
>
> is there a way to search given string
>
>
>
>
> Thanks & Regards
>
> Yogesh
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 14:13:41 2011
Return-Path: <java-user-return-49815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BD3EE49B1
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 14:13:41 +0000 (UTC)
Received: (qmail 65856 invoked by uid 500); 23 May 2011 14:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65721 invoked by uid 500); 23 May 2011 14:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65713 invoked by uid 99); 23 May 2011 14:13:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 14:13:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 14:13:34 +0000
Received: by qwj9 with SMTP id 9so4046383qwj.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 07:13:13 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=CeJIvR+LDbzkUcL0goqFKKJQGkxTFXnszOWhHN2hXGs=;
        b=d1WpPsdlDuvKMJecuUjZXwqHabWJFWIIol0AcEjiL5GQaW3M1QHdin1b6SmyIRHznL
         FvVkBMqc986GBRHpWbTAzQCd8hUywN6VF7wJXiK9V8iW2RMLKvMSN16e+UaFKEte2wL4
         0wttqcgvzOeW+KKzSmNIdlcOX8WgpedhvXjuA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=U30OHvOdz/rRvhyqXHh7Gtjnbo7MjyjbeF6J0y58SAzryIklYxtSfaP0wYoF+6CYDr
         ugixHKCde/Ekgqj5oaAGeFSowhAorq4uqgAJWlyva0yjAMBJ7E6sLfEKeA+0omy4/yeL
         nmEPdPCdTWIO6S7kqDswQGWnanUuHGrQnrlEo=
MIME-Version: 1.0
Received: by 10.229.213.132 with SMTP id gw4mr1827494qcb.34.1306159993159;
 Mon, 23 May 2011 07:13:13 -0700 (PDT)
Received: by 10.229.248.197 with HTTP; Mon, 23 May 2011 07:13:13 -0700 (PDT)
In-Reply-To: <BANLkTi=fvWa0_+1Puws5q2zVxoG7ax1tnw@mail.gmail.com>
References: <BANLkTi=xjCgcy6xcaM3-yQZRmRP+TcexiA@mail.gmail.com>
	<BANLkTi=fvWa0_+1Puws5q2zVxoG7ax1tnw@mail.gmail.com>
Date: Mon, 23 May 2011 07:13:13 -0700
Message-ID: <BANLkTikD39vCoiqZN2Z2y=r7tezgd+Cptw@mail.gmail.com>
Subject: Re: QueryParser/StopAnalyzer question
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hmmm, somehow I missed this days ago....

Anyway, the Lucene query parsing process isn't quite Boolean logic.
I encourage you to think in terms of "required", "optional", and
"prohibited".

Both queries are equivalent, to see this try attaching &debugQuery=3Don
to your URL and look at the "parsed query" in the debug info....

Anyway, to your qestion.
+foo:bar +baz:"there is"

reads that "bar" must appear in the field "foo". So far so good.
But it's also required that baz contain the empty clause, which
is different than saying baz must be empty. One can argue that
any field contains, by definition, nothing.

But imagine the impact of what you're requesting. If all stop words
get removed, then no query would ever match yours. Which
would be very counter-intuitive IMO. Your users have no clue
that you've removed stopwords, so they'll sit there saying "Look, I
KNOW that "bar" was in foo and I KNOW that "there is" was in
baz, why the heck didn't this cursed system find my doc?

Anyway, I don't think you really want this behavior in the
stopword removal case. If you can post some use-cases where this
would be desirable, maybe we can noodle about a solution....

Best
Erick


2011/5/23 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
> Not much luck so far :(
>
> Just in case if anyone wants to earn some virtual dosh, I have added
> some 50 bonus points to this question on StackOverflow:
>
> http://stackoverflow.com/questions/6H044061/lucene-query-parsing-behaviou=
r-joining-query-parts-with-and
>
> I also promise to post a solution here if anything satisfactory turns up.
>
> m.
>
> 2011/5/17 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
>> Hi,
>>
>> Let's say we have an index having few documents indexed using
>> StopAnalyzer.ENGLISH_STOP_WORDS_SET. The user issues two queries:
>> 1) foo:bar
>> 2) baz:"there is"
>>
>> Let's assume that the first query yields some results because there
>> are documents matching that query.
>>
>> The second query contains two stopwords ("there" and "is") and yields
>> 0 results. The reason for this is because when baz:"there is" is
>> parsed, it ends up as a void query as both "there" and "is" are
>> stopwords (technically speaking, this is converted to an empty
>> BooleanQuery having no clauses). So far so good.
>>
>> However, any of the following combined queries
>>
>> +foo:bar +baz:"there is"
>> foo:bar AND baz:"there is"
>>
>> behave exactly the same way as query +foo:bar, that is, brings back
>> some results. The second AND part which is supposed to yield no
>> results is completely ignored.
>>
>> One might argue that when ANDing both conditions have to be met, that
>> is, documents having foo=3Dbar and baz being empty have to be retrieved,
>> as when issued seperately, baz:"there is" yields 0 results.
>>
>> It seem contradictory as an atomic query component has different
>> impact on the overall query depending on the context. Is there any
>> logical explanation for this? Can this be addressed in any way,
>> preferably without writing own QueryAnalyzer?
>>
>> If this makes any difference, observed behaviour happens under Lucene v3=
.0.2.
>>
>> Regards,
>> Mindaugas
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 14:37:18 2011
Return-Path: <java-user-return-49816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8D9BF4A4C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 14:37:18 +0000 (UTC)
Received: (qmail 3867 invoked by uid 500); 23 May 2011 14:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3821 invoked by uid 500); 23 May 2011 14:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3806 invoked by uid 99); 23 May 2011 14:37:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 14:37:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mindas@gmail.com designates 209.85.216.169 as permitted sender)
Received: from [209.85.216.169] (HELO mail-qy0-f169.google.com) (209.85.216.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 14:37:09 +0000
Received: by qyk2 with SMTP id 2so1077743qyk.14
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 07:36:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=3MLQbxWCyX8ftjzF8SRiw0DAAgoUIMEeZUHzH7tUXYw=;
        b=B8Mc2OUz6V6Z3jiCdp53ep7YQyisRWi/2DQqHSQntDyh+I56osaQi0V0HE2MjjFqEf
         Wd2LwkxYr6WB7ZRLdVl/dBtL0tt4FJuY5jETY/3lTeBVPcZfzuw3ULDebv026uIH9bvT
         LL6xnTOZ8ojskPpCKdLYUJoay65QRhOHl6qgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=sb+6UPCG8BJbKTMWDdBhRjodg0RDOpgqOyJflyjL4KCk5wLcHC9EeYp267uOmA7QKp
         DLR0/J83mfuVaMT+yjtJeTDg6wpKxHSlsGR0Qk+eo50CXR7g9CFjFQ+3q8E6mok2t1eu
         m+Dy8OdCUWvPQRGjN16UvvKVzGGv2VqU0S+GM=
MIME-Version: 1.0
Received: by 10.229.67.221 with SMTP id s29mr1769238qci.210.1306161408450;
 Mon, 23 May 2011 07:36:48 -0700 (PDT)
Received: by 10.229.49.17 with HTTP; Mon, 23 May 2011 07:36:48 -0700 (PDT)
In-Reply-To: <BANLkTikD39vCoiqZN2Z2y=r7tezgd+Cptw@mail.gmail.com>
References: <BANLkTi=xjCgcy6xcaM3-yQZRmRP+TcexiA@mail.gmail.com>
	<BANLkTi=fvWa0_+1Puws5q2zVxoG7ax1tnw@mail.gmail.com>
	<BANLkTikD39vCoiqZN2Z2y=r7tezgd+Cptw@mail.gmail.com>
Date: Mon, 23 May 2011 15:36:48 +0100
Message-ID: <BANLkTi=CRujv6EEN9XLzZxu_HjEJ9z=14A@mail.gmail.com>
Subject: Re: QueryParser/StopAnalyzer question
From: =?ISO-8859-13?Q?Mindaugas_=DEak=F0auskas?= <mindas@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick,

I think answer to this question depends which hat you put on.

If you put search engine hat (or do similar things in, i.e. Google),
the results will be the same as what Lucene does at the moment. And
that's fair enough - getting more results in search engine world is
almost always better than getting less. Even if a bunch of slightly
irrelevant results is returned, nobody cares.

But if you put a database hat, the world view suddenly changes. I am
sure there are plenty of people who use Lucene in situations where
they need exact matches and any excess results are not desirable.

The root of the evil here is coming from the fact that stopwords are
not indexed and reasonable defaults have to be assumed in different
situations. Thinking of this, to return all data for stopword-only
query would probably be least expected and I don't disagree on your
argument about the mixed case, too.

This probably leaves me with a single option which is not to use
stopwords at all, allowing me to get the best of the both worlds. Does
anyone have any experience on how much of increased index size
(roughly) can I expect?

Regards,
Mindaugas

On Mon, May 23, 2011 at 3:13 PM, Erick Erickson <erickerickson@gmail.com> w=
rote:
> Hmmm, somehow I missed this days ago....
>
> Anyway, the Lucene query parsing process isn't quite Boolean logic.
> I encourage you to think in terms of "required", "optional", and
> "prohibited".
>
> Both queries are equivalent, to see this try attaching &debugQuery=3Don
> to your URL and look at the "parsed query" in the debug info....
>
> Anyway, to your qestion.
> +foo:bar +baz:"there is"
>
> reads that "bar" must appear in the field "foo". So far so good.
> But it's also required that baz contain the empty clause, which
> is different than saying baz must be empty. One can argue that
> any field contains, by definition, nothing.
>
> But imagine the impact of what you're requesting. If all stop words
> get removed, then no query would ever match yours. Which
> would be very counter-intuitive IMO. Your users have no clue
> that you've removed stopwords, so they'll sit there saying "Look, I
> KNOW that "bar" was in foo and I KNOW that "there is" was in
> baz, why the heck didn't this cursed system find my doc?
>
> Anyway, I don't think you really want this behavior in the
> stopword removal case. If you can post some use-cases where this
> would be desirable, maybe we can noodle about a solution....
>
> Best
> Erick
>
>
> 2011/5/23 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
>> Not much luck so far :(
>>
>> Just in case if anyone wants to earn some virtual dosh, I have added
>> some 50 bonus points to this question on StackOverflow:
>>
>> http://stackoverflow.com/questions/6H044061/lucene-query-parsing-behavio=
ur-joining-query-parts-with-and
>>
>> I also promise to post a solution here if anything satisfactory turns up=
.
>>
>> m.
>>
>> 2011/5/17 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
>>> Hi,
>>>
>>> Let's say we have an index having few documents indexed using
>>> StopAnalyzer.ENGLISH_STOP_WORDS_SET. The user issues two queries:
>>> 1) foo:bar
>>> 2) baz:"there is"
>>>
>>> Let's assume that the first query yields some results because there
>>> are documents matching that query.
>>>
>>> The second query contains two stopwords ("there" and "is") and yields
>>> 0 results. The reason for this is because when baz:"there is" is
>>> parsed, it ends up as a void query as both "there" and "is" are
>>> stopwords (technically speaking, this is converted to an empty
>>> BooleanQuery having no clauses). So far so good.
>>>
>>> However, any of the following combined queries
>>>
>>> +foo:bar +baz:"there is"
>>> foo:bar AND baz:"there is"
>>>
>>> behave exactly the same way as query +foo:bar, that is, brings back
>>> some results. The second AND part which is supposed to yield no
>>> results is completely ignored.
>>>
>>> One might argue that when ANDing both conditions have to be met, that
>>> is, documents having foo=3Dbar and baz being empty have to be retrieved=
,
>>> as when issued seperately, baz:"there is" yields 0 results.
>>>
>>> It seem contradictory as an atomic query component has different
>>> impact on the overall query depending on the context. Is there any
>>> logical explanation for this? Can this be addressed in any way,
>>> preferably without writing own QueryAnalyzer?
>>>
>>> If this makes any difference, observed behaviour happens under Lucene v=
3.0.2.
>>>
>>> Regards,
>>> Mindaugas
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 23 18:29:07 2011
Return-Path: <java-user-return-49817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38ACB4461
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 23 May 2011 18:29:07 +0000 (UTC)
Received: (qmail 36556 invoked by uid 500); 23 May 2011 18:29:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36509 invoked by uid 500); 23 May 2011 18:29:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36501 invoked by uid 99); 23 May 2011 18:29:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 18:29:04 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sujit.pal@comcast.net designates 76.96.59.212 as permitted sender)
Received: from [76.96.59.212] (HELO qmta14.westchester.pa.mail.comcast.net) (76.96.59.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 23 May 2011 18:28:55 +0000
Received: from omta23.westchester.pa.mail.comcast.net ([76.96.62.74])
	by qmta14.westchester.pa.mail.comcast.net with comcast
	id n5pU1g0051c6gX85E6UbtN; Mon, 23 May 2011 18:28:35 +0000
Received: from [10.1.1.36] ([208.106.108.2])
	by omta23.westchester.pa.mail.comcast.net with comcast
	id n6UR1g00s038EM43j6UUFR; Mon, 23 May 2011 18:28:32 +0000
Subject: FastVectorHighlighter - can FieldFragList expose fragInfo?
From: Sujit Pal <sujit.pal@comcast.net>
Reply-To: sujit.pal@comcast.net
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: Personal
Date: Mon, 23 May 2011 11:28:24 -0700
Message-Id: <1306175304.11040.33.camel@lysdexic.healthline.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.3) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

My version: Lucene 3.1.0

I've had to customize the snippet for highlighting based on our
application requirements. Specifically, instead of the snippet being a
set of relevant fragments in the text, I need it to be the first
sentence where a match occurs, with a fixed size from the beginning of
the sentence.

For this, I built (in my application code, using Lucene jars) a custom
FragmentsBuilder (subclassing SimpleFragmentBuilder and overriding the
createFragment(IndexReader reader, int docId, String fieldName,
FieldFragList fieldFragList). 

However, the FieldFragList does not allow access to the
List<WeightedFragInfo> member variable. I changed this locally to be
public so my subclass can access it, ie:

public List<WeightedFragInfo> fragInfos = new
ArrayList<WeightedFragInfo>();

Once this is done, my createFragment method can get at the fragInfos
from the passed in fieldFragList, iterate through its
WeightedFragInfo.SubInfo.Toffs to get the term offsets, which I then use
to calculate and highlight my snippet (I can provide the code if it
makes things clearer, but thats the gist).

So my question is - would it be feasible to make the
FieldFragList.fragInfos variable public in a future release?

If not, is there some other way that I should do what I need to do?

Thanks very much,
Sujit



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 00:10:28 2011
Return-Path: <java-user-return-49818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 50A514F93
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 00:10:28 +0000 (UTC)
Received: (qmail 8092 invoked by uid 500); 24 May 2011 00:10:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8045 invoked by uid 500); 24 May 2011 00:10:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8037 invoked by uid 99); 24 May 2011 00:10:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:10:25 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of diego@diegocavalcanti.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:10:18 +0000
Received: by fxm7 with SMTP id 7so7110740fxm.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:09:55 -0700 (PDT)
Received: by 10.223.159.134 with SMTP id j6mr3019710fax.74.1306195795227;
        Mon, 23 May 2011 17:09:55 -0700 (PDT)
Received: from mail-bw0-f48.google.com (mail-bw0-f48.google.com [209.85.214.48])
        by mx.google.com with ESMTPS id 19sm2511341faf.29.2011.05.23.17.09.53
        (version=SSLv3 cipher=OTHER);
        Mon, 23 May 2011 17:09:54 -0700 (PDT)
Received: by bwz8 with SMTP id 8so1651631bwz.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:09:53 -0700 (PDT)
Received: by 10.205.82.80 with SMTP id ab16mr2701629bkc.66.1306195793143; Mon,
 23 May 2011 17:09:53 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.78.207 with HTTP; Mon, 23 May 2011 17:09:33 -0700 (PDT)
From: Diego Cavalcanti <diego@diegocavalcanti.com>
Date: Mon, 23 May 2011 21:09:33 -0300
Message-ID: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
Subject: Semantic indexing in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec554005441e66604a3fa680b

--bcaec554005441e66604a3fa680b
Content-Type: text/plain; charset=ISO-8859-1

Hello,

I have a project which indexes and scores documents using Lucene. However,
I'd like to do that using semantic indexing (LSI, LSA or Semantic Vectors).

I've read old posts and some people said that Semantic Vectors plays well
with Lucene. However, I noticed that its classes are used only by command
line (throw method main) instead of by API.

So, I'd like to know if anyone can suggest any other approach so that I
could use semantic indexing in Lucene.

Thanks,
Diego

--bcaec554005441e66604a3fa680b--

From java-user-return-49819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 00:18:04 2011
Return-Path: <java-user-return-49819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 421604CAF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 00:18:04 +0000 (UTC)
Received: (qmail 14249 invoked by uid 500); 24 May 2011 00:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14196 invoked by uid 500); 24 May 2011 00:18:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14188 invoked by uid 99); 24 May 2011 00:18:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:18:02 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of johngouf85@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:17:56 +0000
Received: by fxm7 with SMTP id 7so7115783fxm.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:17:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=A82xxAOQZzZx3XUCrBdyRgHr+h3xvnbwlggEM+rS0ww=;
        b=DgvCNmiN7oRMi3VkWt7tcrA4/SgFaed/SeiH5cURMthFM39Fj6ueUe9TjjJnRwh2kC
         OdJ//JbQ0kIGuSpYn2cTm+Hdq/Zdy8x6GlwJtbM19mUtMROZf/RUNUGSI+ncFJ0zv0pM
         biJtNyMXl3dIkvjyI6LiZWZSSH/v4KGZw0YgQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=Sx3PKqxKqLZrPgiHAdByPZtznZq1/VOhFh6AY+2v1wUTasTm/ExMhe5vPXcEyxr7el
         h5SCS04r/XQjw1s4m5MOOLOjT8F7EPHxm4siMnAp8y5cEHc+La9vczgorx7mFZNAyBdH
         ZDbjNN91DeExvDSciHb9LouJI628sDtAT0CkA=
Received: by 10.223.77.92 with SMTP id f28mr3054453fak.37.1306196256086; Mon,
 23 May 2011 17:17:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.95.206 with HTTP; Mon, 23 May 2011 17:17:16 -0700 (PDT)
In-Reply-To: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
From: Yiannis Gkoufas <johngouf85@gmail.com>
Date: Tue, 24 May 2011 03:17:16 +0300
Message-ID: <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com>
Subject: Re: Semantic indexing in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c418ed9dbc604a3fa83f0
X-Virus-Checked: Checked by ClamAV on apache.org

--0015174c418ed9dbc604a3fa83f0
Content-Type: text/plain; charset=ISO-8859-1

Hi Diego,

Are you referring to that project-->
http://code.google.com/p/semanticvectors/ ?
If yes , then documentation exists here
http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.html .
Also I think this blog might interest you --> http://sujitpal.blogspot.com/ and
the project related to it ---> http://jtmt.sf.net/

BR,
Yiannis

On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <diego@diegocavalcanti.com
> wrote:

> Hello,
>
> I have a project which indexes and scores documents using Lucene. However,
> I'd like to do that using semantic indexing (LSI, LSA or Semantic Vectors).
>
> I've read old posts and some people said that Semantic Vectors plays well
> with Lucene. However, I noticed that its classes are used only by command
> line (throw method main) instead of by API.
>
> So, I'd like to know if anyone can suggest any other approach so that I
> could use semantic indexing in Lucene.
>
> Thanks,
> Diego
>

--0015174c418ed9dbc604a3fa83f0--

From java-user-return-49820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 00:25:31 2011
Return-Path: <java-user-return-49820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6CD854C4D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 00:25:31 +0000 (UTC)
Received: (qmail 22105 invoked by uid 500); 24 May 2011 00:25:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22065 invoked by uid 500); 24 May 2011 00:25:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22057 invoked by uid 99); 24 May 2011 00:25:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:25:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of diego@diegocavalcanti.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:25:22 +0000
Received: by fxm7 with SMTP id 7so7119835fxm.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:25:02 -0700 (PDT)
Received: by 10.223.48.139 with SMTP id r11mr3052632faf.63.1306196701894;
        Mon, 23 May 2011 17:25:01 -0700 (PDT)
Received: from mail-bw0-f48.google.com (mail-bw0-f48.google.com [209.85.214.48])
        by mx.google.com with ESMTPS id o10sm2513667faa.43.2011.05.23.17.25.00
        (version=SSLv3 cipher=OTHER);
        Mon, 23 May 2011 17:25:00 -0700 (PDT)
Received: by bwz8 with SMTP id 8so1663127bwz.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:24:59 -0700 (PDT)
Received: by 10.204.14.204 with SMTP id h12mr2656946bka.78.1306196578128; Mon,
 23 May 2011 17:22:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.78.207 with HTTP; Mon, 23 May 2011 17:22:38 -0700 (PDT)
In-Reply-To: <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com> <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com>
From: Diego Cavalcanti <diego@diegocavalcanti.com>
Date: Mon, 23 May 2011 21:22:38 -0300
Message-ID: <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
Subject: Re: Semantic indexing in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555b34e0bd45504a3fa9797
X-Virus-Checked: Checked by ClamAV on apache.org

--00032555b34e0bd45504a3fa9797
Content-Type: text/plain; charset=ISO-8859-1

Hi Yiannis,

Thank your for your reply.

Yes, I'm referring to project Semantic Vectors. Before sending the previous
email, I read the project API and noticed that its most classes don't
contain public methods, so that we cannot use the project programmatically
(only by command line).

I've seen your blog, but I haven't found any post about semantic indexing in
Lucene. Can you point that for me, please?

Thanks,
--
Diego


On Mon, May 23, 2011 at 21:17, Yiannis Gkoufas <johngouf85@gmail.com> wrote:

> Hi Diego,
>
> Are you referring to that project-->
> http://code.google.com/p/semanticvectors/ ?
> If yes , then documentation exists here
> http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.html.
> Also I think this blog might interest you -->
> http://sujitpal.blogspot.com/ and
> the project related to it ---> http://jtmt.sf.net/
>
> BR,
> Yiannis
>
> On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <
> diego@diegocavalcanti.com
> > wrote:
>
> > Hello,
> >
> > I have a project which indexes and scores documents using Lucene.
> However,
> > I'd like to do that using semantic indexing (LSI, LSA or Semantic
> Vectors).
> >
> > I've read old posts and some people said that Semantic Vectors plays well
> > with Lucene. However, I noticed that its classes are used only by command
> > line (throw method main) instead of by API.
> >
> > So, I'd like to know if anyone can suggest any other approach so that I
> > could use semantic indexing in Lucene.
> >
> > Thanks,
> > Diego
> >
>

--00032555b34e0bd45504a3fa9797--

From java-user-return-49821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 00:30:55 2011
Return-Path: <java-user-return-49821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2AE9142B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 00:30:55 +0000 (UTC)
Received: (qmail 26309 invoked by uid 500); 24 May 2011 00:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26268 invoked by uid 500); 24 May 2011 00:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26260 invoked by uid 99); 24 May 2011 00:30:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:30:53 +0000
X-ASF-Spam-Status: No, hits=4.0 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_FONT_FACE_BAD,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of johngouf85@gmail.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:30:48 +0000
Received: by fxm7 with SMTP id 7so7123006fxm.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:30:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=xTQWTJivT+cVm07vZgrm8k3vsBFMDtwBywRTjWrCD4k=;
        b=iWa9Kc4VIuLo5ISXZc79SQs2RdyOt9dpsKoe/8z+Fa+A+8Jov9Fh8PW8xkh2BynqA0
         1JEEN5WHPux17nFWg/6wSXpAMB4I3lDvWDHduD3V9qvorCQPdAgVuykIcbLxxijNmQQl
         eU5gwgdl63ujAnYdtR8rkIt17p1sBiJTuEIRE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=wUL+/fpz4YaRk6yAVITLYZ7x0HEIH+L+gWiUHievBF6J//jly2KKnaXQkeyc2LYy5A
         cVLg+dXK3OZ51XNnHUFUsE0pjgtqQ+U9SzMlxnS7Ay+MOqi6Nt0fIVb99EXxe++eo46f
         xgcy+0LxyijO/266yqPZNY9NZuTB+305hRcjI=
Received: by 10.223.3.132 with SMTP id 4mr3040306fan.132.1306197027093; Mon,
 23 May 2011 17:30:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.95.206 with HTTP; Mon, 23 May 2011 17:30:07 -0700 (PDT)
In-Reply-To: <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
 <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com> <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
From: Yiannis Gkoufas <johngouf85@gmail.com>
Date: Tue, 24 May 2011 03:30:07 +0300
Message-ID: <BANLkTikYJefCZ2iZ9jWWutwJir==jLPFLg@mail.gmail.com>
Subject: Re: Semantic indexing in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3054a80bce7e3404a3fab1fa

--20cf3054a80bce7e3404a3fab1fa
Content-Type: text/plain; charset=ISO-8859-1

It's not my blog! :D
I used some of the ideas in that article
http://sujitpal.blogspot.com/2009/03/vector-space-classifier-using-lucene.html
in
order to perform classification with lucene for my tasks.
You can get full access to the source code of the project by typing in the
command line:

svn checkout *http*://semanticvectors.googlecode.com/svn/trunk/semanticvectors-read-only

Or you can access the trunk directly by the url
http://semanticvectors.googlecode.com/svn/trunk/

On Tue, May 24, 2011 at 3:22 AM, Diego Cavalcanti <diego@diegocavalcanti.com
> wrote:

> Hi Yiannis,
>
> Thank your for your reply.
>
> Yes, I'm referring to project Semantic Vectors. Before sending the previous
> email, I read the project API and noticed that its most classes don't
> contain public methods, so that we cannot use the project programmatically
> (only by command line).
>
> I've seen your blog, but I haven't found any post about semantic indexing
> in
> Lucene. Can you point that for me, please?
>
> Thanks,
> --
> Diego
>
>
> On Mon, May 23, 2011 at 21:17, Yiannis Gkoufas <johngouf85@gmail.com>
> wrote:
>
> > Hi Diego,
> >
> > Are you referring to that project-->
> > http://code.google.com/p/semanticvectors/ ?
> > If yes , then documentation exists here
> >
> http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.html
> .
> > Also I think this blog might interest you -->
> > http://sujitpal.blogspot.com/ and
> > the project related to it ---> http://jtmt.sf.net/
> >
> > BR,
> > Yiannis
> >
> > On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <
> > diego@diegocavalcanti.com
> > > wrote:
> >
> > > Hello,
> > >
> > > I have a project which indexes and scores documents using Lucene.
> > However,
> > > I'd like to do that using semantic indexing (LSI, LSA or Semantic
> > Vectors).
> > >
> > > I've read old posts and some people said that Semantic Vectors plays
> well
> > > with Lucene. However, I noticed that its classes are used only by
> command
> > > line (throw method main) instead of by API.
> > >
> > > So, I'd like to know if anyone can suggest any other approach so that I
> > > could use semantic indexing in Lucene.
> > >
> > > Thanks,
> > > Diego
> > >
> >
>

--20cf3054a80bce7e3404a3fab1fa--

From java-user-return-49822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 00:35:44 2011
Return-Path: <java-user-return-49822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CEF7044DD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 00:35:44 +0000 (UTC)
Received: (qmail 32030 invoked by uid 500); 24 May 2011 00:35:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31991 invoked by uid 500); 24 May 2011 00:35:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31983 invoked by uid 99); 24 May 2011 00:35:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:35:42 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of diego@diegocavalcanti.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:35:35 +0000
Received: by fxm7 with SMTP id 7so7125815fxm.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:35:15 -0700 (PDT)
Received: by 10.223.92.132 with SMTP id r4mr3052280fam.142.1306197315317;
        Mon, 23 May 2011 17:35:15 -0700 (PDT)
Received: from mail-bw0-f48.google.com (mail-bw0-f48.google.com [209.85.214.48])
        by mx.google.com with ESMTPS id 9sm2515064fat.39.2011.05.23.17.35.13
        (version=SSLv3 cipher=OTHER);
        Mon, 23 May 2011 17:35:14 -0700 (PDT)
Received: by bwz8 with SMTP id 8so1670958bwz.35
        for <java-user@lucene.apache.org>; Mon, 23 May 2011 17:35:13 -0700 (PDT)
Received: by 10.204.163.130 with SMTP id a2mr2716124bky.108.1306197313129;
 Mon, 23 May 2011 17:35:13 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.78.207 with HTTP; Mon, 23 May 2011 17:34:53 -0700 (PDT)
In-Reply-To: <BANLkTikYJefCZ2iZ9jWWutwJir==jLPFLg@mail.gmail.com>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
 <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com> <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
 <BANLkTikYJefCZ2iZ9jWWutwJir==jLPFLg@mail.gmail.com>
From: Diego Cavalcanti <diego@diegocavalcanti.com>
Date: Mon, 23 May 2011 21:34:53 -0300
Message-ID: <BANLkTi=NEp9kdP=B7BTWdKSjs2aKE1rcbw@mail.gmail.com>
Subject: Re: Semantic indexing in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec52d5531db0d4204a3fac2e3
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec52d5531db0d4204a3fac2e3
Content-Type: text/plain; charset=ISO-8859-1

Sorry, I thought the blog was yours! I will read the post and see if it
helps me. Thank you!

About the Semantic Vectors project, surely I know how to get its source
code. What I said is that I cannot use it only by API, because the Javadoc
does not show all methods. I really do not want to change the project's
source code. Well... this is not important for this list!

If anyone has another idea about how to implement semantic indexing in
Lucene, I would be grateful!

[]s,
--
Diego


On Mon, May 23, 2011 at 21:30, Yiannis Gkoufas <johngouf85@gmail.com> wrote:

> It's not my blog! :D
> I used some of the ideas in that article
>
> http://sujitpal.blogspot.com/2009/03/vector-space-classifier-using-lucene.html
> in
> order to perform classification with lucene for my tasks.
> You can get full access to the source code of the project by typing in the
> command line:
>
> svn checkout *http*://
> semanticvectors.googlecode.com/svn/trunk/semanticvectors-read-only
>
> Or you can access the trunk directly by the url
> http://semanticvectors.googlecode.com/svn/trunk/
>
> On Tue, May 24, 2011 at 3:22 AM, Diego Cavalcanti <
> diego@diegocavalcanti.com
> > wrote:
>
> > Hi Yiannis,
> >
> > Thank your for your reply.
> >
> > Yes, I'm referring to project Semantic Vectors. Before sending the
> previous
> > email, I read the project API and noticed that its most classes don't
> > contain public methods, so that we cannot use the project
> programmatically
> > (only by command line).
> >
> > I've seen your blog, but I haven't found any post about semantic indexing
> > in
> > Lucene. Can you point that for me, please?
> >
> > Thanks,
> > --
> > Diego
> >
> >
> > On Mon, May 23, 2011 at 21:17, Yiannis Gkoufas <johngouf85@gmail.com>
> > wrote:
> >
> > > Hi Diego,
> > >
> > > Are you referring to that project-->
> > > http://code.google.com/p/semanticvectors/ ?
> > > If yes , then documentation exists here
> > >
> >
> http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.html
> > .
> > > Also I think this blog might interest you -->
> > > http://sujitpal.blogspot.com/ and
> > > the project related to it ---> http://jtmt.sf.net/
> > >
> > > BR,
> > > Yiannis
> > >
> > > On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <
> > > diego@diegocavalcanti.com
> > > > wrote:
> > >
> > > > Hello,
> > > >
> > > > I have a project which indexes and scores documents using Lucene.
> > > However,
> > > > I'd like to do that using semantic indexing (LSI, LSA or Semantic
> > > Vectors).
> > > >
> > > > I've read old posts and some people said that Semantic Vectors plays
> > well
> > > > with Lucene. However, I noticed that its classes are used only by
> > command
> > > > line (throw method main) instead of by API.
> > > >
> > > > So, I'd like to know if anyone can suggest any other approach so that
> I
> > > > could use semantic indexing in Lucene.
> > > >
> > > > Thanks,
> > > > Diego
> > > >
> > >
> >
>

--bcaec52d5531db0d4204a3fac2e3--

From java-user-return-49823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 00:41:59 2011
Return-Path: <java-user-return-49823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B23094547
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 00:41:59 +0000 (UTC)
Received: (qmail 35856 invoked by uid 500); 24 May 2011 00:41:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35816 invoked by uid 500); 24 May 2011 00:41:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35807 invoked by uid 99); 24 May 2011 00:41:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:41:57 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sujit.pal@comcast.net designates 76.96.59.228 as permitted sender)
Received: from [76.96.59.228] (HELO qmta15.westchester.pa.mail.comcast.net) (76.96.59.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 00:41:50 +0000
Received: from omta19.westchester.pa.mail.comcast.net ([76.96.62.98])
	by qmta15.westchester.pa.mail.comcast.net with comcast
	id nCfZ1g00927AodY5FChWT9; Tue, 24 May 2011 00:41:30 +0000
Received: from [10.1.1.36] ([208.106.108.2])
	by omta19.westchester.pa.mail.comcast.net with comcast
	id nCcM1g00M038EM43fCcQRl; Tue, 24 May 2011 00:36:28 +0000
Subject: Re: Semantic indexing in Lucene
From: Sujit Pal <sujit.pal@comcast.net>
Reply-To: sujit.pal@comcast.net
To: java-user@lucene.apache.org
In-Reply-To: <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
	 <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com>
	 <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
Content-Type: text/plain
Organization: Personal
Date: Mon, 23 May 2011 17:36:20 -0700
Message-Id: <1306197380.11040.126.camel@lysdexic.healthline.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.3) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I meant to check out the Semantic vectors project, but never got around
to it, so there is nothing in the blog (sujitpal.blogspot.com) that
talks about semantic vectors at the moment. Its on my (rather long) todo
list though... Sorry about that...

-sujit

On Mon, 2011-05-23 at 21:22 -0300, Diego Cavalcanti wrote:
> Hi Yiannis,
> 
> Thank your for your reply.
> 
> Yes, I'm referring to project Semantic Vectors. Before sending the previous
> email, I read the project API and noticed that its most classes don't
> contain public methods, so that we cannot use the project programmatically
> (only by command line).
> 
> I've seen your blog, but I haven't found any post about semantic indexing in
> Lucene. Can you point that for me, please?
> 
> Thanks,
> --
> Diego
> 
> 
> On Mon, May 23, 2011 at 21:17, Yiannis Gkoufas <johngouf85@gmail.com> wrote:
> 
> > Hi Diego,
> >
> > Are you referring to that project-->
> > http://code.google.com/p/semanticvectors/ ?
> > If yes , then documentation exists here
> > http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.html.
> > Also I think this blog might interest you -->
> > http://sujitpal.blogspot.com/ and
> > the project related to it ---> http://jtmt.sf.net/
> >
> > BR,
> > Yiannis
> >
> > On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <
> > diego@diegocavalcanti.com
> > > wrote:
> >
> > > Hello,
> > >
> > > I have a project which indexes and scores documents using Lucene.
> > However,
> > > I'd like to do that using semantic indexing (LSI, LSA or Semantic
> > Vectors).
> > >
> > > I've read old posts and some people said that Semantic Vectors plays well
> > > with Lucene. However, I noticed that its classes are used only by command
> > > line (throw method main) instead of by API.
> > >
> > > So, I'd like to know if anyone can suggest any other approach so that I
> > > could use semantic indexing in Lucene.
> > >
> > > Thanks,
> > > Diego
> > >
> >


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 06:19:07 2011
Return-Path: <java-user-return-49824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 61CF362FA
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 06:19:07 +0000 (UTC)
Received: (qmail 73171 invoked by uid 500); 24 May 2011 06:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73016 invoked by uid 500); 24 May 2011 06:19:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73007 invoked by uid 99); 24 May 2011 06:19:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 06:19:00 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_HELO_PASS,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [212.227.17.8] (HELO moutng.kundenserver.de) (212.227.17.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 06:18:54 +0000
Received: from brouwer.fritz.box (srbk-5d801a79.pool.mediaWays.net [93.128.26.121])
	by mrelayeu.kundenserver.de (node=mrbap0) with ESMTP (Nemesis)
	id 0M1AGu-1PVosT0aoS-00tYff; Tue, 24 May 2011 08:18:33 +0200
Content-Type: text/plain; charset=iso-8859-1
Mime-Version: 1.0 (Apple Message framework v1078)
Subject: Re: Semantic indexing in Lucene
From: Paul Libbrecht <paul@hoplahup.net>
In-Reply-To: <BANLkTi=NEp9kdP=B7BTWdKSjs2aKE1rcbw@mail.gmail.com>
Date: Tue, 24 May 2011 08:18:32 +0200
Content-Transfer-Encoding: quoted-printable
Message-Id: <0B7EDCF4-D7EC-4722-8659-A817907076C4@hoplahup.net>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com> <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com> <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com> <BANLkTikYJefCZ2iZ9jWWutwJir==jLPFLg@mail.gmail.com> <BANLkTi=NEp9kdP=B7BTWdKSjs2aKE1rcbw@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1078)
X-Provags-ID: V02:K0:EaGTUQipXLFRNRIUWGWAtNl8uBHR6uuciRaRurkBpZx
 n1FDczcgA/XzQ8gBNvLF7BfkzU8WrOgHTn9pfEM99bZTQo+xUY
 3TpR4jnPRsPXwHWNCrXsNXT8JoqvCj7d46OeXrX4d5VdcgCORp
 nlpTugE6XK1SGrOFL/1vqgSLamclglw+VqxVyrXhVK5k2V410g
 QAy03AjSO7rNc2VhEaevt+vJOVdxbn0QgBK+d3iTV8=
X-Virus-Checked: Checked by ClamAV on apache.org

Diego,

The semanticvectors project has a mailing list and his author, Dominic =
Widdows, is responding actively there.

paul


Le 24 mai 2011 =E0 02:34, Diego Cavalcanti a =E9crit :

> Sorry, I thought the blog was yours! I will read the post and see if =
it
> helps me. Thank you!
>=20
> About the Semantic Vectors project, surely I know how to get its =
source
> code. What I said is that I cannot use it only by API, because the =
Javadoc
> does not show all methods. I really do not want to change the =
project's
> source code. Well... this is not important for this list!
>=20
> If anyone has another idea about how to implement semantic indexing in
> Lucene, I would be grateful!
>=20
> []s,
> --
> Diego
>=20
>=20
> On Mon, May 23, 2011 at 21:30, Yiannis Gkoufas <johngouf85@gmail.com> =
wrote:
>=20
>> It's not my blog! :D
>> I used some of the ideas in that article
>>=20
>> =
http://sujitpal.blogspot.com/2009/03/vector-space-classifier-using-lucene.=
html
>> in
>> order to perform classification with lucene for my tasks.
>> You can get full access to the source code of the project by typing =
in the
>> command line:
>>=20
>> svn checkout *http*://
>> semanticvectors.googlecode.com/svn/trunk/semanticvectors-read-only
>>=20
>> Or you can access the trunk directly by the url
>> http://semanticvectors.googlecode.com/svn/trunk/
>>=20
>> On Tue, May 24, 2011 at 3:22 AM, Diego Cavalcanti <
>> diego@diegocavalcanti.com
>>> wrote:
>>=20
>>> Hi Yiannis,
>>>=20
>>> Thank your for your reply.
>>>=20
>>> Yes, I'm referring to project Semantic Vectors. Before sending the
>> previous
>>> email, I read the project API and noticed that its most classes =
don't
>>> contain public methods, so that we cannot use the project
>> programmatically
>>> (only by command line).
>>>=20
>>> I've seen your blog, but I haven't found any post about semantic =
indexing
>>> in
>>> Lucene. Can you point that for me, please?
>>>=20
>>> Thanks,
>>> --
>>> Diego
>>>=20
>>>=20
>>> On Mon, May 23, 2011 at 21:17, Yiannis Gkoufas =
<johngouf85@gmail.com>
>>> wrote:
>>>=20
>>>> Hi Diego,
>>>>=20
>>>> Are you referring to that project-->
>>>> http://code.google.com/p/semanticvectors/ ?
>>>> If yes , then documentation exists here
>>>>=20
>>>=20
>> =
http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.html=

>>> .
>>>> Also I think this blog might interest you -->
>>>> http://sujitpal.blogspot.com/ and
>>>> the project related to it ---> http://jtmt.sf.net/
>>>>=20
>>>> BR,
>>>> Yiannis
>>>>=20
>>>> On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <
>>>> diego@diegocavalcanti.com
>>>>> wrote:
>>>>=20
>>>>> Hello,
>>>>>=20
>>>>> I have a project which indexes and scores documents using Lucene.
>>>> However,
>>>>> I'd like to do that using semantic indexing (LSI, LSA or Semantic
>>>> Vectors).
>>>>>=20
>>>>> I've read old posts and some people said that Semantic Vectors =
plays
>>> well
>>>>> with Lucene. However, I noticed that its classes are used only by
>>> command
>>>>> line (throw method main) instead of by API.
>>>>>=20
>>>>> So, I'd like to know if anyone can suggest any other approach so =
that
>> I
>>>>> could use semantic indexing in Lucene.
>>>>>=20
>>>>> Thanks,
>>>>> Diego
>>>>>=20
>>>>=20
>>>=20
>>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 09:35:10 2011
Return-Path: <java-user-return-49825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9942D62FF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 09:35:10 +0000 (UTC)
Received: (qmail 81264 invoked by uid 500); 24 May 2011 09:35:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81214 invoked by uid 500); 24 May 2011 09:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81206 invoked by uid 99); 24 May 2011 09:35:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 09:35:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of danica.damljanovic@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 09:35:03 +0000
Received: by qwj9 with SMTP id 9so4650553qwj.35
        for <java-user@lucene.apache.org>; Tue, 24 May 2011 02:34:42 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=gC61ru+kuk5mZZkTu+/meqsMP9z861qA12AvNJJWM/8=;
        b=jEbjeF0RuGkQPjQaWvxU+Q18yzWD/mmzewulPuVClohg3Eyi+2opRctVoK3x+ilpFC
         3IWiUmHMGDwDuHrqhfccTBNc82qUgM2NTjF0YVg/eBA4wFwB7mkTOthv9/20VTKpCBK3
         hFR7zQGahGg/j3MvVqS3V3fUQvkexsg1FnFkg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=o51qQtqEOcbPF99tIIl533zVwSbpqpgfA78OI5+T9EqbSIGaUQZ8eA46OcjcloHhsz
         0jDRwJg6cJBIzBSvq/4CmxSL4uPT6gQ9ZSc5C4cR6ogcscSj9fJI0gh59LmubzVhSd0X
         nOsvbAcu6AzA3lUUeNSOGt4JQn88QACeNXfRo=
MIME-Version: 1.0
Received: by 10.229.5.209 with SMTP id 17mr2514737qcw.85.1306229682373; Tue,
 24 May 2011 02:34:42 -0700 (PDT)
Received: by 10.229.34.136 with HTTP; Tue, 24 May 2011 02:34:42 -0700 (PDT)
In-Reply-To: <0B7EDCF4-D7EC-4722-8659-A817907076C4@hoplahup.net>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
	<BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com>
	<BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
	<BANLkTikYJefCZ2iZ9jWWutwJir==jLPFLg@mail.gmail.com>
	<BANLkTi=NEp9kdP=B7BTWdKSjs2aKE1rcbw@mail.gmail.com>
	<0B7EDCF4-D7EC-4722-8659-A817907076C4@hoplahup.net>
Date: Tue, 24 May 2011 10:34:42 +0100
Message-ID: <BANLkTi=TN2gK+LLZJhvTog8kjv3x1C_oNQ@mail.gmail.com>
Subject: Re: Semantic indexing in Lucene
From: Danica Damljanovic <danica.damljanovic@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Diego

there is an alternative to semantic vectors library but with different
coverage of the methods  and it also does not use Lucene (hence you
might need much more RAM for larger corpora):
http://code.google.com/p/airhead-research/

But what they have is I think what you asked for and that is the API
that you can use instead of main classes.

Hope that helps,
Danica

On 24 May 2011 07:18, Paul Libbrecht <paul@hoplahup.net> wrote:
> Diego,
>
> The semanticvectors project has a mailing list and his author, Dominic Wi=
ddows, is responding actively there.
>
> paul
>
>
> Le 24 mai 2011 =E0 02:34, Diego Cavalcanti a =E9crit :
>
>> Sorry, I thought the blog was yours! I will read the post and see if it
>> helps me. Thank you!
>>
>> About the Semantic Vectors project, surely I know how to get its source
>> code. What I said is that I cannot use it only by API, because the Javad=
oc
>> does not show all methods. I really do not want to change the project's
>> source code. Well... this is not important for this list!
>>
>> If anyone has another idea about how to implement semantic indexing in
>> Lucene, I would be grateful!
>>
>> []s,
>> --
>> Diego
>>
>>
>> On Mon, May 23, 2011 at 21:30, Yiannis Gkoufas <johngouf85@gmail.com> wr=
ote:
>>
>>> It's not my blog! :D
>>> I used some of the ideas in that article
>>>
>>> http://sujitpal.blogspot.com/2009/03/vector-space-classifier-using-luce=
ne.html
>>> in
>>> order to perform classification with lucene for my tasks.
>>> You can get full access to the source code of the project by typing in =
the
>>> command line:
>>>
>>> svn checkout *http*://
>>> semanticvectors.googlecode.com/svn/trunk/semanticvectors-read-only
>>>
>>> Or you can access the trunk directly by the url
>>> http://semanticvectors.googlecode.com/svn/trunk/
>>>
>>> On Tue, May 24, 2011 at 3:22 AM, Diego Cavalcanti <
>>> diego@diegocavalcanti.com
>>>> wrote:
>>>
>>>> Hi Yiannis,
>>>>
>>>> Thank your for your reply.
>>>>
>>>> Yes, I'm referring to project Semantic Vectors. Before sending the
>>> previous
>>>> email, I read the project API and noticed that its most classes don't
>>>> contain public methods, so that we cannot use the project
>>> programmatically
>>>> (only by command line).
>>>>
>>>> I've seen your blog, but I haven't found any post about semantic index=
ing
>>>> in
>>>> Lucene. Can you point that for me, please?
>>>>
>>>> Thanks,
>>>> --
>>>> Diego
>>>>
>>>>
>>>> On Mon, May 23, 2011 at 21:17, Yiannis Gkoufas <johngouf85@gmail.com>
>>>> wrote:
>>>>
>>>>> Hi Diego,
>>>>>
>>>>> Are you referring to that project-->
>>>>> http://code.google.com/p/semanticvectors/ ?
>>>>> If yes , then documentation exists here
>>>>>
>>>>
>>> http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.h=
tml
>>>> .
>>>>> Also I think this blog might interest you -->
>>>>> http://sujitpal.blogspot.com/ and
>>>>> the project related to it ---> http://jtmt.sf.net/
>>>>>
>>>>> BR,
>>>>> Yiannis
>>>>>
>>>>> On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <
>>>>> diego@diegocavalcanti.com
>>>>>> wrote:
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> I have a project which indexes and scores documents using Lucene.
>>>>> However,
>>>>>> I'd like to do that using semantic indexing (LSI, LSA or Semantic
>>>>> Vectors).
>>>>>>
>>>>>> I've read old posts and some people said that Semantic Vectors plays
>>>> well
>>>>>> with Lucene. However, I noticed that its classes are used only by
>>>> command
>>>>>> line (throw method main) instead of by API.
>>>>>>
>>>>>> So, I'd like to know if anyone can suggest any other approach so tha=
t
>>> I
>>>>>> could use semantic indexing in Lucene.
>>>>>>
>>>>>> Thanks,
>>>>>> Diego
>>>>>>
>>>>>
>>>>
>>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



--=20
Best,
Danica Damljanovic
--
Research Associate
GATE team http://gate.ac.uk
Natural Language Processing Group
University of Sheffield
http://www.dcs.shef.ac.uk/~danica

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 12:23:53 2011
Return-Path: <java-user-return-49826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 044B26C0C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 12:23:53 +0000 (UTC)
Received: (qmail 41425 invoked by uid 500); 24 May 2011 12:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41371 invoked by uid 500); 24 May 2011 12:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41363 invoked by uid 99); 24 May 2011 12:23:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 12:23:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of diego@diegocavalcanti.com designates 209.85.161.48 as permitted sender)
Received: from [209.85.161.48] (HELO mail-fx0-f48.google.com) (209.85.161.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 12:23:45 +0000
Received: by fxm7 with SMTP id 7so7582459fxm.35
        for <java-user@lucene.apache.org>; Tue, 24 May 2011 05:23:22 -0700 (PDT)
Received: by 10.223.110.21 with SMTP id l21mr3687518fap.70.1306239802684;
        Tue, 24 May 2011 05:23:22 -0700 (PDT)
Received: from mail-bw0-f48.google.com (mail-bw0-f48.google.com [209.85.214.48])
        by mx.google.com with ESMTPS id g5sm2714888faa.26.2011.05.24.05.23.20
        (version=SSLv3 cipher=OTHER);
        Tue, 24 May 2011 05:23:21 -0700 (PDT)
Received: by bwz8 with SMTP id 8so2229194bwz.35
        for <java-user@lucene.apache.org>; Tue, 24 May 2011 05:23:20 -0700 (PDT)
Received: by 10.204.163.130 with SMTP id a2mr3243249bky.108.1306239800145;
 Tue, 24 May 2011 05:23:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.78.207 with HTTP; Tue, 24 May 2011 05:23:00 -0700 (PDT)
In-Reply-To: <BANLkTi=TN2gK+LLZJhvTog8kjv3x1C_oNQ@mail.gmail.com>
References: <BANLkTimNMrvshauEY9j5v0R3411y+4sVoA@mail.gmail.com>
 <BANLkTinN1tqVe+UL4=+Emwp5SqO9ejK8yw@mail.gmail.com> <BANLkTikSFAFZA8BSt5J_ZNpokXwHNKg=Vg@mail.gmail.com>
 <BANLkTikYJefCZ2iZ9jWWutwJir==jLPFLg@mail.gmail.com> <BANLkTi=NEp9kdP=B7BTWdKSjs2aKE1rcbw@mail.gmail.com>
 <0B7EDCF4-D7EC-4722-8659-A817907076C4@hoplahup.net> <BANLkTi=TN2gK+LLZJhvTog8kjv3x1C_oNQ@mail.gmail.com>
From: Diego Cavalcanti <diego@diegocavalcanti.com>
Date: Tue, 24 May 2011 09:23:00 -0300
Message-ID: <BANLkTi=0rtpryZWBjZ-EEYceavBLFgm+EA@mail.gmail.com>
Subject: Re: Semantic indexing in Lucene
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec52d553147773004a404a7ac

--bcaec52d553147773004a404a7ac
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi Paul, I've already sent an email to semanticvectors mailing list. In thi=
s
Lucene list, I asked for an alternative solution, not for help about
semanticvectors. Thank you for your help.

Hi Danica, thank you for your reply. I'll take a look about the S-Space
package.

[]s,
--
Diego


On Tue, May 24, 2011 at 06:34, Danica Damljanovic <
danica.damljanovic@gmail.com> wrote:

> Hi Diego
>
> there is an alternative to semantic vectors library but with different
> coverage of the methods  and it also does not use Lucene (hence you
> might need much more RAM for larger corpora):
> http://code.google.com/p/airhead-research/
>
> But what they have is I think what you asked for and that is the API
> that you can use instead of main classes.
>
> Hope that helps,
> Danica
>
> On 24 May 2011 07:18, Paul Libbrecht <paul@hoplahup.net> wrote:
> > Diego,
> >
> > The semanticvectors project has a mailing list and his author, Dominic
> Widdows, is responding actively there.
> >
> > paul
> >
> >
> > Le 24 mai 2011 =E0 02:34, Diego Cavalcanti a =E9crit :
> >
> >> Sorry, I thought the blog was yours! I will read the post and see if i=
t
> >> helps me. Thank you!
> >>
> >> About the Semantic Vectors project, surely I know how to get its sourc=
e
> >> code. What I said is that I cannot use it only by API, because the
> Javadoc
> >> does not show all methods. I really do not want to change the project'=
s
> >> source code. Well... this is not important for this list!
> >>
> >> If anyone has another idea about how to implement semantic indexing in
> >> Lucene, I would be grateful!
> >>
> >> []s,
> >> --
> >> Diego
> >>
> >>
> >> On Mon, May 23, 2011 at 21:30, Yiannis Gkoufas <johngouf85@gmail.com>
> wrote:
> >>
> >>> It's not my blog! :D
> >>> I used some of the ideas in that article
> >>>
> >>>
> http://sujitpal.blogspot.com/2009/03/vector-space-classifier-using-lucene=
.html
> >>> in
> >>> order to perform classification with lucene for my tasks.
> >>> You can get full access to the source code of the project by typing i=
n
> the
> >>> command line:
> >>>
> >>> svn checkout *http*://
> >>> semanticvectors.googlecode.com/svn/trunk/semanticvectors-read-only
> >>>
> >>> Or you can access the trunk directly by the url
> >>> http://semanticvectors.googlecode.com/svn/trunk/
> >>>
> >>> On Tue, May 24, 2011 at 3:22 AM, Diego Cavalcanti <
> >>> diego@diegocavalcanti.com
> >>>> wrote:
> >>>
> >>>> Hi Yiannis,
> >>>>
> >>>> Thank your for your reply.
> >>>>
> >>>> Yes, I'm referring to project Semantic Vectors. Before sending the
> >>> previous
> >>>> email, I read the project API and noticed that its most classes don'=
t
> >>>> contain public methods, so that we cannot use the project
> >>> programmatically
> >>>> (only by command line).
> >>>>
> >>>> I've seen your blog, but I haven't found any post about semantic
> indexing
> >>>> in
> >>>> Lucene. Can you point that for me, please?
> >>>>
> >>>> Thanks,
> >>>> --
> >>>> Diego
> >>>>
> >>>>
> >>>> On Mon, May 23, 2011 at 21:17, Yiannis Gkoufas <johngouf85@gmail.com=
>
> >>>> wrote:
> >>>>
> >>>>> Hi Diego,
> >>>>>
> >>>>> Are you referring to that project-->
> >>>>> http://code.google.com/p/semanticvectors/ ?
> >>>>> If yes , then documentation exists here
> >>>>>
> >>>>
> >>>
> http://semanticvectors.googlecode.com/svn/javadoc/latest-stable/index.htm=
l
> >>>> .
> >>>>> Also I think this blog might interest you -->
> >>>>> http://sujitpal.blogspot.com/ and
> >>>>> the project related to it ---> http://jtmt.sf.net/
> >>>>>
> >>>>> BR,
> >>>>> Yiannis
> >>>>>
> >>>>> On Tue, May 24, 2011 at 3:09 AM, Diego Cavalcanti <
> >>>>> diego@diegocavalcanti.com
> >>>>>> wrote:
> >>>>>
> >>>>>> Hello,
> >>>>>>
> >>>>>> I have a project which indexes and scores documents using Lucene.
> >>>>> However,
> >>>>>> I'd like to do that using semantic indexing (LSI, LSA or Semantic
> >>>>> Vectors).
> >>>>>>
> >>>>>> I've read old posts and some people said that Semantic Vectors pla=
ys
> >>>> well
> >>>>>> with Lucene. However, I noticed that its classes are used only by
> >>>> command
> >>>>>> line (throw method main) instead of by API.
> >>>>>>
> >>>>>> So, I'd like to know if anyone can suggest any other approach so
> that
> >>> I
> >>>>>> could use semantic indexing in Lucene.
> >>>>>>
> >>>>>> Thanks,
> >>>>>> Diego
> >>>>>>
> >>>>>
> >>>>
> >>>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> --
> Best,
> Danica Damljanovic
> --
> Research Associate
> GATE team http://gate.ac.uk
> Natural Language Processing Group
> University of Sheffield
> http://www.dcs.shef.ac.uk/~danica
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--bcaec52d553147773004a404a7ac--

From java-user-return-49827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 13:33:50 2011
Return-Path: <java-user-return-49827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 93C076042
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 13:33:50 +0000 (UTC)
Received: (qmail 65478 invoked by uid 500); 24 May 2011 13:33:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65421 invoked by uid 500); 24 May 2011 13:33:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65413 invoked by uid 99); 24 May 2011 13:33:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 13:33:48 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.198 as permitted sender)
Received: from [202.224.39.198] (HELO mail2.asahi-net.or.jp) (202.224.39.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 13:33:41 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail2.asahi-net.or.jp (Postfix) with ESMTP id ABB80E597E
	for <java-user@lucene.apache.org>; Tue, 24 May 2011 22:33:19 +0900 (JST)
Message-ID: <4DDBB39F.1080302@r.email.ne.jp>
Date: Tue, 24 May 2011 22:33:19 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter - can FieldFragList expose fragInfo?
References: <1306175304.11040.33.camel@lysdexic.healthline.com>
In-Reply-To: <1306175304.11040.33.camel@lysdexic.healthline.com>
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit

(11/05/24 3:28), Sujit Pal wrote:
> Hello,
> 
> My version: Lucene 3.1.0
> 
> I've had to customize the snippet for highlighting based on our
> application requirements. Specifically, instead of the snippet being a
> set of relevant fragments in the text, I need it to be the first
> sentence where a match occurs, with a fixed size from the beginning of
> the sentence.
> 
> For this, I built (in my application code, using Lucene jars) a custom
> FragmentsBuilder (subclassing SimpleFragmentBuilder and overriding the
> createFragment(IndexReader reader, int docId, String fieldName,
> FieldFragList fieldFragList).
> 
> However, the FieldFragList does not allow access to the
> List<WeightedFragInfo>  member variable. I changed this locally to be
> public so my subclass can access it, ie:
> 
> public List<WeightedFragInfo>  fragInfos = new
> ArrayList<WeightedFragInfo>();
> 
> Once this is done, my createFragment method can get at the fragInfos
> from the passed in fieldFragList, iterate through its
> WeightedFragInfo.SubInfo.Toffs to get the term offsets, which I then use
> to calculate and highlight my snippet (I can provide the code if it
> makes things clearer, but thats the gist).
> 
> So my question is - would it be feasible to make the
> FieldFragList.fragInfos variable public in a future release?

No. Please open a jira ticket and attach a patch, if possible.
I'll take a look.

koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 24 16:04:16 2011
Return-Path: <java-user-return-49828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BA4A16B7D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 24 May 2011 16:04:16 +0000 (UTC)
Received: (qmail 93274 invoked by uid 500); 24 May 2011 16:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93226 invoked by uid 500); 24 May 2011 16:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93218 invoked by uid 99); 24 May 2011 16:04:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 16:04:14 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [216.82.241.211] (HELO mail85.messagelabs.com) (216.82.241.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 24 May 2011 16:04:06 +0000
X-VirusChecked: Checked
X-Env-Sender: gditzler@csc.com
X-Msg-Ref: server-9.tower-85.messagelabs.com!1306253024!6615755!1
X-StarScan-Version: 6.2.9; banners=-,-,-
X-Originating-IP: [20.137.2.88]
Received: (qmail 30699 invoked from network); 24 May 2011 16:03:44 -0000
Received: from amer-mta102.csc.com (HELO amer-mta102.csc.com) (20.137.2.88)
  by server-9.tower-85.messagelabs.com with DHE-RSA-AES256-SHA encrypted SMTP; 24 May 2011 16:03:44 -0000
Received: from amer-gw09.amer.csc.com (amer-gw09.amer.csc.com [20.6.39.245])
	by amer-mta102.csc.com (Switch-3.4.3/Switch-3.3.3mp) with ESMTP id p4OG3iTd017034
	for <java-user@lucene.apache.org>; Tue, 24 May 2011 12:03:44 -0400
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: Apache Lucene v2.3.2
X-KeepSent: 25680A4E:4949B3CB-8525789A:0058315D;
 type=4; name=$KeepSent
X-Mailer: Lotus Notes Release 8.0.2FP1  CCH2 April 23, 2009
From: Garry S Ditzler <gditzler@csc.com>
Message-ID: <OF25680A4E.4949B3CB-ON8525789A.0058315D-8525789A.00583BCF@csc.com>
Date: Tue, 24 May 2011 12:03:42 -0400
X-MIMETrack: Serialize by Router on AMER-GW09/SRV/CSC(Release 8.5.2FP1 HF29|January 09, 2011) at
 05/24/2011 12:02:25 PM,
	Serialize complete at 05/24/2011 12:02:25 PM
Content-Type: multipart/alternative; boundary="=_alternative 00583B6B8525789A_="

--=_alternative 00583B6B8525789A_=
Content-Type: text/plain; charset="US-ASCII"

Is Apache Lucene v2.3.2 still supported?

--=_alternative 00583B6B8525789A_=--

From java-user-return-49829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 02:13:54 2011
Return-Path: <java-user-return-49829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7B2164AED
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 02:13:54 +0000 (UTC)
Received: (qmail 91781 invoked by uid 500); 25 May 2011 02:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91732 invoked by uid 500); 25 May 2011 02:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91724 invoked by uid 99); 25 May 2011 02:13:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 02:13:52 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sujit.pal@comcast.net designates 76.96.59.243 as permitted sender)
Received: from [76.96.59.243] (HELO qmta13.westchester.pa.mail.comcast.net) (76.96.59.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 02:13:42 +0000
Received: from omta18.westchester.pa.mail.comcast.net ([76.96.62.90])
	by qmta13.westchester.pa.mail.comcast.net with comcast
	id ndve1g0051wpRvQ5DeDNRD; Wed, 25 May 2011 02:13:22 +0000
Received: from [10.1.1.36] ([208.106.108.2])
	by omta18.westchester.pa.mail.comcast.net with comcast
	id neDB1g00S038EM43eeDEmX; Wed, 25 May 2011 02:13:20 +0000
Subject: Re: FastVectorHighlighter - can FieldFragList expose fragInfo?
From: Sujit Pal <sujit.pal@comcast.net>
Reply-To: sujit.pal@comcast.net
To: java-user@lucene.apache.org
In-Reply-To: <4DDBB39F.1080302@r.email.ne.jp>
References: <1306175304.11040.33.camel@lysdexic.healthline.com>
	 <4DDBB39F.1080302@r.email.ne.jp>
Content-Type: text/plain
Organization: Personal
Date: Tue, 24 May 2011 19:13:10 -0700
Message-Id: <1306289590.29936.49.camel@lysdexic.healthline.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.3) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you Koji. I opened LUCENE-3141 for this.
https://issues.apache.org/jira/browse/LUCENE-3141 

-sujit

On Tue, 2011-05-24 at 22:33 +0900, Koji Sekiguchi wrote:
> (11/05/24 3:28), Sujit Pal wrote:
> > Hello,
> > 
> > My version: Lucene 3.1.0
> > 
> > I've had to customize the snippet for highlighting based on our
> > application requirements. Specifically, instead of the snippet being a
> > set of relevant fragments in the text, I need it to be the first
> > sentence where a match occurs, with a fixed size from the beginning of
> > the sentence.
> > 
> > For this, I built (in my application code, using Lucene jars) a custom
> > FragmentsBuilder (subclassing SimpleFragmentBuilder and overriding the
> > createFragment(IndexReader reader, int docId, String fieldName,
> > FieldFragList fieldFragList).
> > 
> > However, the FieldFragList does not allow access to the
> > List<WeightedFragInfo>  member variable. I changed this locally to be
> > public so my subclass can access it, ie:
> > 
> > public List<WeightedFragInfo>  fragInfos = new
> > ArrayList<WeightedFragInfo>();
> > 
> > Once this is done, my createFragment method can get at the fragInfos
> > from the passed in fieldFragList, iterate through its
> > WeightedFragInfo.SubInfo.Toffs to get the term offsets, which I then use
> > to calculate and highlight my snippet (I can provide the code if it
> > makes things clearer, but thats the gist).
> > 
> > So my question is - would it be feasible to make the
> > FieldFragList.fragInfos variable public in a future release?
> 
> No. Please open a jira ticket and attach a patch, if possible.
> I'll take a look.
> 
> koji


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 06:57:48 2011
Return-Path: <java-user-return-49830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8E17A42A6
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 06:57:48 +0000 (UTC)
Received: (qmail 79303 invoked by uid 500); 25 May 2011 06:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79193 invoked by uid 500); 25 May 2011 06:57:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79185 invoked by uid 99); 25 May 2011 06:57:45 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 06:57:45 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonyjoseph89@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 06:57:39 +0000
Received: by bwz8 with SMTP id 8so3471199bwz.35
        for <java-user@lucene.apache.org>; Tue, 24 May 2011 23:57:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=Y3hDvKHVXK8gQ2Few8xlFtDxJvetjv3kEf2BpC4pbyA=;
        b=SfqJIG+vXcIk9uec/15yRVs/Arp/agTTaCDzFjrI5v7F9apdEI74mEAQ+TbjiGdywf
         f2dgg1nNL+GyIwUWSCJHAQdMqLIZSzc7oX5EOXvdgyjPSaOs5jPHVOT2TQOElAQC16kU
         2jP4tqaGHO6LZFKpZ29O9+bMttmRSNhNKOcSA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=m0GJbKqLukMuifbhOXMIe1XrQeAA5YNmxvJGBl7UjhzOwkf47AKpmlWxzLXw2awNIz
         PRZhBNpGKS4sohZ9ZQB0OO4gD96d4LcNujwMEvsI9H50shjtWFq3LO3CnpXDvkYBpYNK
         DpLm/A7zuUFi9s7qRH4fTAfSI8xIL+VaDWBXw=
MIME-Version: 1.0
Received: by 10.204.189.209 with SMTP id df17mr1656603bkb.75.1306306638231;
 Tue, 24 May 2011 23:57:18 -0700 (PDT)
Received: by 10.204.17.7 with HTTP; Tue, 24 May 2011 23:57:18 -0700 (PDT)
Date: Wed, 25 May 2011 12:27:18 +0530
Message-ID: <BANLkTinc_S=PAorkcytTdSQsDoVa7-B7qA@mail.gmail.com>
Subject: ImportError: DLL load failed: The specified module could not be found.
From: Antony Joseph <antonyjoseph89@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=485b397dd4e323b74a04a4143711

--485b397dd4e323b74a04a4143711
Content-Type: text/plain; charset=ISO-8859-1

Hi,

Please help me to resolve this imort error.

Thanks
Antony

C:\Documents and Settings\Antony>java -version
java version "1.6.0_24"
Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
Java HotSpot(TM) Client VM (build 19.1-b02, mixed mode, sharing)

C:\Documents and Settings\Antony\Desktop\Core26>easy_install lucene-2.9.4-py2.6-
win32.egg
Processing lucene-2.9.4-py2.6-win32.egg
creating c:\python26\lib\site-packages\lucene-2.9.4-py2.6-win32.egg
Extracting lucene-2.9.4-py2.6-win32.egg to c:\python26\lib\site-packages
Adding lucene 2.9.4 to easy-install.pth file
Installed c:\python26\lib\site-packages\lucene-2.9.4-py2.6-win32.egg
Processing dependencies for lucene==2.9.4
Finished processing dependencies for lucene==2.9.4

C:\Documents and Settings\Antony\Desktop\Core26>easy_install JCC-2.6-py2.6-win32
.egg
Processing JCC-2.6-py2.6-win32.egg
creating c:\python26\lib\site-packages\JCC-2.6-py2.6-win32.egg
Extracting JCC-2.6-py2.6-win32.egg to c:\python26\lib\site-packages
Adding JCC 2.6 to easy-install.pth file
Installed c:\python26\lib\site-packages\jcc-2.6-py2.6-win32.egg
Processing dependencies for JCC==2.6
Finished processing dependencies for JCC==2.6

C:\Documents and Settings\Antony\Desktop\Core26>python
Python 2.6.6 (r266:84297, Aug 24 2010, 18:46:32) [MSC v.1500 32 bit (Intel)] on
win32
Type "help", "copyright", "credits" or "license" for more information.

>>> import lucene

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python26\lib\site-packages\lucene-2.9.4-py2.6-win32.egg\lucene\__init
__.py", line 2, in <module>
    import os, _lucene
ImportError: DLL load failed: The specified module could not be found.

>>>

--485b397dd4e323b74a04a4143711--

From java-user-return-49831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 09:18:03 2011
Return-Path: <java-user-return-49831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0DE58464E
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 09:18:03 +0000 (UTC)
Received: (qmail 78742 invoked by uid 500); 25 May 2011 09:18:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78677 invoked by uid 500); 25 May 2011 09:17:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78669 invoked by uid 99); 25 May 2011 09:17:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 09:17:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 09:17:54 +0000
Received: by iym1 with SMTP id 1so9331184iym.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 02:17:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=yU6JFGj7nimINWAgmC099oSxoW0XioiR9YSl2BYHVTE=;
        b=gFiukoGe7iQxOgXA91cfAfk3pKDy1ZuzQ9MyyyEoJtthslC1MwHfjPXbc/gOPNZ/7o
         ZSWS9g3qu/unidrf51fdkHALNS0/KYkhXDBtiLYkXS48ZQSEg+TuocBt6o3rt09EQB+B
         A6K2UUsuWdmHaUk0sCB2I2yPT5w1GEd8JSaEI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=MOcrTqQO5K5E34irKTkxyGsKm2zN7X+ksgPmZtxWXqbajlG6iUFIbFaBuLkF73J2tv
         p1mb1uuCWlli+3y0+1I1aTv16XJ/TeFZhs22EC3xMdYoZLV3YSn5f2qEWfV3Lnj6GQSs
         hj7bClsbUFK/t+yuBGcwj8/PNMZdOoMzo3cP4=
Received: by 10.42.197.69 with SMTP id ej5mr12755468icb.104.1306315054166;
 Wed, 25 May 2011 02:17:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.202 with HTTP; Wed, 25 May 2011 02:17:14 -0700 (PDT)
In-Reply-To: <OF25680A4E.4949B3CB-ON8525789A.0058315D-8525789A.00583BCF@csc.com>
References: <OF25680A4E.4949B3CB-ON8525789A.0058315D-8525789A.00583BCF@csc.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 25 May 2011 10:17:14 +0100
Message-ID: <BANLkTinw5nmNPeTSD4Lg=JyorPzEOry54Q@mail.gmail.com>
Subject: Re: Apache Lucene v2.3.2
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Probably depends on what you mean by supported.  If you mean messages
on this list, then yes, although be prepared for suggestions that you
upgrade.  If you mean bug fixes/code changes, I'd guess not.

You really should upgrade ...


--
Ian.


On Tue, May 24, 2011 at 5:03 PM, Garry S Ditzler <gditzler@csc.com> wrote:
> Is Apache Lucene v2.3.2 still supported?
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 09:52:07 2011
Return-Path: <java-user-return-49832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9B861420D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 09:52:07 +0000 (UTC)
Received: (qmail 18824 invoked by uid 500); 25 May 2011 09:52:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18774 invoked by uid 500); 25 May 2011 09:52:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18766 invoked by uid 99); 25 May 2011 09:52:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 09:52:05 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.160.48 as permitted sender)
Received: from [209.85.160.48] (HELO mail-pw0-f48.google.com) (209.85.160.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 09:51:55 +0000
Received: by pwi16 with SMTP id 16so4826394pwi.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 02:51:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:from:to:subject:date:message-id:mime-version
         :content-type:x-mailer:thread-index:content-language;
        bh=HbcM91gF+sFAGZbimALpj1NIdrmLjR4uYEdfjrl4TQ8=;
        b=n4CsWaPgFRdNKmpTTGVe7OWeY8GgTq/an4EeXDbg8IHoRebHU8AxT/mD4XbTHavKab
         Dpeg4fKYB/h9nhKWe1FudYS+7rkeuXXO1a4UNdrF/IQ+CH6u0wRotsMb7Wu6sTQl8TsF
         NQQz0CFqcfHEUFJAIgq3e3+WcHgrbiWkGEPho=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=from:to:subject:date:message-id:mime-version:content-type:x-mailer
         :thread-index:content-language;
        b=Pb47QBDwuiiZnnPPpbtsHH9zcRM+GC2dJA7SpbzyNcfCLwV4H13IQw32ipz0czp/yD
         F6AnNoXCDlGIbktfGlYbjN+EDPRT6hOn0OYPEbAM56KJsOi8ule+nH7YX/D18pzf+oIy
         EkQX+tSDR2NtyAsev1RHd/fkrEoSEyWaVECDw=
Received: by 10.68.16.201 with SMTP id i9mr3313943pbd.378.1306317094476;
        Wed, 25 May 2011 02:51:34 -0700 (PDT)
Received: from zcdyPC ([125.123.75.253])
        by mx.google.com with ESMTPS id m4sm5579837pbb.78.2011.05.25.02.51.31
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 25 May 2011 02:51:33 -0700 (PDT)
From: "zhoucheng2008" <zhoucheng2008@gmail.com>
To: <java-user@lucene.apache.org>
Subject: how to search multiple fields
Date: Wed, 25 May 2011 17:51:28 +0800
Message-ID: <013301cc1ac1$561bbb10$02533130$@com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0134_01CC1B04.643EFB10"
X-Mailer: Microsoft Office Outlook 12.0
thread-index: AcwawVGLAxm+NGbTSyevFlsLPAEx6g==
Content-Language: en-us
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0134_01CC1B04.643EFB10
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

Quite a few Lucene examples on lines shows how to insert multiple fields
into a Document and how to query the indexed file with certain fields and
queried text. I would like to know:

 

1.       How to do a cross-field search?

2.       How to specify some key fields as well as some less important
fields?

3.       How many fields would cause performance issue?

 

Thanks!


------=_NextPart_000_0134_01CC1B04.643EFB10--


From java-user-return-49833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 10:21:02 2011
Return-Path: <java-user-return-49833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC3C1415B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 10:21:02 +0000 (UTC)
Received: (qmail 37964 invoked by uid 500); 25 May 2011 10:21:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37880 invoked by uid 500); 25 May 2011 10:21:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37872 invoked by uid 99); 25 May 2011 10:21:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 10:21:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 10:20:54 +0000
Received: by iym1 with SMTP id 1so9386293iym.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 03:20:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type:content-transfer-encoding;
        bh=onViOLv4dSdeBXAt9yHHHolGU3MNzrlmC3RI4vymKi8=;
        b=Pbwl2XYZRgoAmrjTq//yXfcy/Vhh8YGEldvNw3J7Av102ktu+kHArr3XfchThk9mkW
         Y6CcA0DSll/MJn41UXfImF+Xb7fa4uHuWOQ2HcIbeCryovzvcZih2K64rYdRcGda2acu
         9G68hZI4jM/hY3LfLKKXKgR5EPWYxca07XUS4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        b=B0tRclYAlyLtIwZ53zkqsu2xnhuTJc1VXuNPDlLM+PADFs/aGCAkOukXm/f7zZGGmY
         EivVV9iu5FzCnaDXeDVEMVlJwnLDmtnboMZ43BShVSSVmSf8YsjVBHeIn60bW4GILMq9
         Rd5jt01E4xePS8eM5SyKgkOwGDXaPMr0Fkm1k=
Received: by 10.231.141.68 with SMTP id l4mr4268644ibu.158.1306318833202; Wed,
 25 May 2011 03:20:33 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.202 with HTTP; Wed, 25 May 2011 03:20:13 -0700 (PDT)
In-Reply-To: <013301cc1ac1$561bbb10$02533130$@com>
References: <013301cc1ac1$561bbb10$02533130$@com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 25 May 2011 11:20:13 +0100
Message-ID: <BANLkTika-bmMBB3rD-frr+1SO7k4x2p7iQ@mail.gmail.com>
Subject: Re: how to search multiple fields
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

> Quite a few Lucene examples on lines shows how to insert multiple fields
> into a Document and how to query the indexed file with certain fields and
> queried text. I would like to know:
>
> 1. =A0 =A0 =A0 How to do a cross-field search?

http://wiki.apache.org/lucene-java/LuceneFAQ#How_can_I_search_over_multiple=
_fields.3F

> 2. =A0 =A0 =A0 How to specify some key fields as well as some less import=
ant
> fields?

Boosting.  See http://wiki.apache.org/lucene-java/LuceneFAQ#What_is_the_dif=
ference_between_field_.28or_document.29_boosting_and_query_boosting.3F

> 3. =A0 =A0 =A0 How many fields would cause performance issue?

Impossible to answer since there are too many variables but in general
the fewer fields used in a search the faster it will be.  There are
many other factors, some of which are likely to outweigh this.  See
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 12:22:04 2011
Return-Path: <java-user-return-49834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 013C1478C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 12:22:04 +0000 (UTC)
Received: (qmail 86987 invoked by uid 500); 25 May 2011 12:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86930 invoked by uid 500); 25 May 2011 12:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86922 invoked by uid 99); 25 May 2011 12:22:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 12:22:01 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of danbsutton@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 12:21:54 +0000
Received: by vxa37 with SMTP id 37so8820027vxa.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 05:21:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=chipQryNLotlIh4NXgr+Cu4t+VE90mLI9x5YQLupYAM=;
        b=cmtO3FlmR1q5m9XLzXYMShy4RwTYKlCLh9iHWjWPAyaEBdbbj0IaKucTfANf0DaXYN
         aJPUUxW3y0uL/egM+wKGhXVGQMcTZ/ScND+dYTjorsLz4I9v8M75uw1t73ak0CIGWRd0
         dJrSpy5ZgE0RkhF1Cb9iPfBbfPXT13Wj64SLk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=wij50bTH68fudNX2cGXZ9REzTvtvtw7TUIxVGZhk3N1u8VnMElFM0MDGitq1mCiVwR
         maqsXfgVu90xoZtupySNDDGM1CtWdlAVvtI7IvF4ZKaQX1Ax4i5BuUHXy4ZG5m3CgWvJ
         Fwo7NOGjCp7cR4JVQDg56MZhVO7g05MwHECBE=
MIME-Version: 1.0
Received: by 10.52.179.67 with SMTP id de3mr1418757vdc.153.1306326093235; Wed,
 25 May 2011 05:21:33 -0700 (PDT)
Received: by 10.52.186.41 with HTTP; Wed, 25 May 2011 05:21:33 -0700 (PDT)
Date: Wed, 25 May 2011 13:21:33 +0100
Message-ID: <BANLkTikbPS=SsN5T0Ww-6Stw0eWJzwLPRg@mail.gmail.com>
Subject: dynamic frag size - highlighter
From: dan sutton <danbsutton@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'd like to make highlighting work as follows:

length(all snippits) approx. 200 chars
hl.snippits = 2 (2 snippits)

e.g. if there is  only 1 snippet available, length <= 200chars
e.g. if there is >1 snippet, length each snippet == 100chars, so I
take the first 2 and get 200 chars

Is this possible with a custom fragmenter?

Or does anyone know of any contrib fragmenter that might do this?

Many thanks
Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 12:22:18 2011
Return-Path: <java-user-return-49835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 788AD47A7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 12:22:18 +0000 (UTC)
Received: (qmail 88977 invoked by uid 500); 25 May 2011 12:22:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88935 invoked by uid 500); 25 May 2011 12:22:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88927 invoked by uid 99); 25 May 2011 12:22:16 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 12:22:16 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of danbsutton@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 12:22:08 +0000
Received: by pzk10 with SMTP id 10so4814437pzk.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 05:21:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=chipQryNLotlIh4NXgr+Cu4t+VE90mLI9x5YQLupYAM=;
        b=Z+cuRRAo3T5zmWPP5A7hWK4gpXQJCY2wyEP/yN4TgarC+8fhmrNvOfd6nGW1Dgo/oQ
         zTjOktRnmvTmRGGnZi/uPxJgqgLWVFerd30VAYOuBXuksrqOyLip4ztsNwBE9Q1Up+HA
         M+yW46/4Q0nNuOgjcjbrzmm9swBo5l61xRk+0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=Pet2BP2q5nPZlw9CRuYTGassGnr80goRg4kRnVgSRa3i/NISaGT83hoVqWWjFfDuiF
         /b/X+iWBjy6bJy9KFPS0JDlVmsefoFhowGkW1RwTGRL/D4GP7YbIU0n7XJV0a4204NeE
         h3u7D3MAZYuxIiKSalgpCwvp7CU3TlJ/22mw0=
MIME-Version: 1.0
Received: by 10.68.55.10 with SMTP id n10mr3046871pbp.476.1306326107265; Wed,
 25 May 2011 05:21:47 -0700 (PDT)
Received: by 10.68.47.1 with HTTP; Wed, 25 May 2011 05:20:48 -0700 (PDT)
Date: Wed, 25 May 2011 13:20:48 +0100
Message-ID: <BANLkTi=GqqsaptuqipwmZK4tf=g1Yg6QMw@mail.gmail.com>
Subject: dynamic frag size - highlighter
From: dan sutton <danbsutton@gmail.com>
To: java-user <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'd like to make highlighting work as follows:

length(all snippits) approx. 200 chars
hl.snippits = 2 (2 snippits)

e.g. if there is  only 1 snippet available, length <= 200chars
e.g. if there is >1 snippet, length each snippet == 100chars, so I
take the first 2 and get 200 chars

Is this possible with a custom fragmenter?

Or does anyone know of any contrib fragmenter that might do this?

Many thanks
Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 13:49:07 2011
Return-Path: <java-user-return-49836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5ABA34425
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 13:49:07 +0000 (UTC)
Received: (qmail 7958 invoked by uid 500); 25 May 2011 13:49:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7838 invoked by uid 500); 25 May 2011 13:49:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7797 invoked by uid 99); 25 May 2011 13:49:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 13:49:04 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 13:48:56 +0000
Received: by vxa37 with SMTP id 37so8916282vxa.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 06:48:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=Q5BfBLzQuAt1fIder10/xEjLzpAu1uHvlHpQ9dLT284=;
        b=xxfcELMWbunFS3yLeHo3fSDGDUtzUsFpYI8fhXqKsIY9HjNffeMGBfLa+CliuGQI64
         o3y3Ep34c29HBUL9D4BQmbM0ml5crpBUJIE5+ts/BurhVICWTryreMMDULjcG1t+f2Xv
         qF6YRXXYYCMwgT5mP7bY621ZpUm9PdDTrWEV4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=Y8eKmECX3vfpfObB/WkdDScmIj+/MwbVPeDsAyeeTuW0OwCblwN4V0sNFqZiwG76HF
         OacDvlgaZheqAfazKpqGAbdaCFDKQxriVpMGWp9c+M9iUwLIoRfDKKc3SBtoPMpv39zV
         wRCy+Bo9TvLprnZGEv+f6q8d7kghtHIc8/5cU=
MIME-Version: 1.0
Received: by 10.52.176.98 with SMTP id ch2mr7103133vdc.51.1306331315537; Wed,
 25 May 2011 06:48:35 -0700 (PDT)
Received: by 10.52.108.229 with HTTP; Wed, 25 May 2011 06:48:35 -0700 (PDT)
In-Reply-To: <BANLkTika-bmMBB3rD-frr+1SO7k4x2p7iQ@mail.gmail.com>
References: <013301cc1ac1$561bbb10$02533130$@com>
	<BANLkTika-bmMBB3rD-frr+1SO7k4x2p7iQ@mail.gmail.com>
Date: Wed, 25 May 2011 21:48:35 +0800
Message-ID: <BANLkTin1FueeF7f7doU82f_6Lm6WoNwMUQ@mail.gmail.com>
Subject: Re: how to search multiple fields
From: Cheng Zhou <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071cecc0588a804a419f607
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf3071cecc0588a804a419f607
Content-Type: text/plain; charset=ISO-8859-1

Hi lan, thanks. Still two questions.

In the first link you presented, there is one comment that "Note that terms
which occur in short fields have a higher effect on the result ranking."

What does "short fields" mean? What are the differences between the impact
of the short fields and that of the field boost?

Cheng
On Wed, May 25, 2011 at 6:20 PM, Ian Lea <ian.lea@gmail.com> wrote:

> > Quite a few Lucene examples on lines shows how to insert multiple fields
> > into a Document and how to query the indexed file with certain fields and
> > queried text. I would like to know:
> >
> > 1.       How to do a cross-field search?
>
>
> http://wiki.apache.org/lucene-java/LuceneFAQ#How_can_I_search_over_multiple_fields.3F
>
> > 2.       How to specify some key fields as well as some less important
> > fields?
>
> Boosting.  See
> http://wiki.apache.org/lucene-java/LuceneFAQ#What_is_the_difference_between_field_.28or_document.29_boosting_and_query_boosting.3F
>
> > 3.       How many fields would cause performance issue?
>
> Impossible to answer since there are too many variables but in general
> the fewer fields used in a search the faster it will be.  There are
> many other factors, some of which are likely to outweigh this.  See
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.
>
>
> --
> Ian.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf3071cecc0588a804a419f607--

From java-user-return-49837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 14:00:07 2011
Return-Path: <java-user-return-49837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 98EBB46BC
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 14:00:07 +0000 (UTC)
Received: (qmail 27008 invoked by uid 500); 25 May 2011 14:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26965 invoked by uid 500); 25 May 2011 14:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26956 invoked by uid 99); 25 May 2011 14:00:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 14:00:04 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 13:59:57 +0000
Received: by iwr19 with SMTP id 19so9978613iwr.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 06:59:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=Zupk5TULPLkFX6m0hIci/uMfMBPCBr46N6qZc9TlPCI=;
        b=x4c06CpmdvG6kgiqbl67RBq70aQto9FcCLuIEsv4y6Kv0RgOOXY/+3H1wUzrGHymu0
         RZf35L1qky3MNBXT+dKsrkPCeAcGQhW8n1uryfnlojDKH11v410Q6mRp6ts42sTSd1DD
         CqAiltv02fuul3LOG6TMNKGyn0p3jUOz4i4HI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=TIlnCA7/dIUYZhCQOWJOirjIfvCiZM3rwlI37hHT5CKk0FSlhF3ZpaAhesnOUkep9l
         4hXVkpGdXlebDmSowJtfBDQhQ33YWS3Xs4jKTmQgkfYSUhQPKmVknLcZWViCj0iR8/hz
         I5cbLrCv9TYbBN7rwgi1Y0bvzDtqQT1MxpV54=
Received: by 10.231.141.68 with SMTP id l4mr4463169ibu.158.1306331976119; Wed,
 25 May 2011 06:59:36 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.202 with HTTP; Wed, 25 May 2011 06:59:16 -0700 (PDT)
In-Reply-To: <BANLkTin1FueeF7f7doU82f_6Lm6WoNwMUQ@mail.gmail.com>
References: <013301cc1ac1$561bbb10$02533130$@com> <BANLkTika-bmMBB3rD-frr+1SO7k4x2p7iQ@mail.gmail.com>
 <BANLkTin1FueeF7f7doU82f_6Lm6WoNwMUQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 25 May 2011 14:59:16 +0100
Message-ID: <BANLkTinBouSppjTSf9CbvVKvM4ApSG-JLw@mail.gmail.com>
Subject: Re: how to search multiple fields
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

> In the first link you presented, there is one comment that "Note that terms
> which occur in short fields have a higher effect on the result ranking."
>
> What does "short fields" mean?

This is a short sentence.

This is a somewhat longer sentence that may get lower scores when
matched by terms in a lucene query.

> What are the differences between the impact
> of the short fields and that of the field boost?

It all feeds into oal.search.Similarity.  Best to look at that or
search for something like "lucene scoring" using your favourite search
engine.


--
Ian.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 14:28:34 2011
Return-Path: <java-user-return-49838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1918347B5
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 14:28:34 +0000 (UTC)
Received: (qmail 88565 invoked by uid 500); 25 May 2011 14:28:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88512 invoked by uid 500); 25 May 2011 14:28:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 90850 invoked by uid 99); 25 May 2011 11:07:54 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,RFC_ABUSE_POST,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 216.139.236.26 is neither permitted nor denied by domain of gabriel.welsche@googlemail.com)
Date: Wed, 25 May 2011 04:07:29 -0700 (PDT)
From: ai114 <gabriel.welsche@googlemail.com>
To: java-user@lucene.apache.org
Message-ID: <1306321649758-2983908.post@n3.nabble.com>
In-Reply-To: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
References: <AANLkTimnD9Ma+3=SzWbqxt4ct9urxiG819yCTOJhO0ob@mail.gmail.com>
Subject: Re: is OpenBitSet / SortedVIntList compressed bit map index?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


First Last wrote:
> 
> Are there any other compressed bitmap index implementations which offer
> bit
> map compression at a decent performance assuming filters are sparse?
> 

Have a look at  EWAH by Daniel Lemire
google: http://code.google.com/p/javaewah/
http://code.google.com/p/javaewah/ 
research paper:  http://arxiv.org/abs/0901.3751
http://arxiv.org/abs/0901.3751 
code:  https://github.com/lemire/javaewah/tree/
https://github.com/lemire/javaewah/tree/ 

Gabriel

--
View this message in context: http://lucene.472066.n3.nabble.com/is-OpenBitSet-SortedVIntList-compressed-bit-map-index-tp2213863p2983908.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 15:24:50 2011
Return-Path: <java-user-return-49839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A6D9E4DB9
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 15:24:50 +0000 (UTC)
Received: (qmail 10978 invoked by uid 500); 25 May 2011 15:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10927 invoked by uid 500); 25 May 2011 15:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10919 invoked by uid 99); 25 May 2011 15:24:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 15:24:48 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 15:24:42 +0000
Received: by vxa37 with SMTP id 37so9048556vxa.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 08:24:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=DDv9U0FhPlIe+NeOCt/qCSpXbkQSWBhby7pH/e+4r3g=;
        b=ligGE+uTvUXRJWmQ4Q9wsL3dXcDRsWQyCmK7CQIif/G8hhzGDBB0SKq3J2V53JMac6
         n8lvURWFqYolZtnulmCmbdnNupMusOX0QDL+0upmwgiS2M189Hm0HtccE129ymgDUlMa
         3VvhQt5Od3SPE4wIpglkCga6k0rwPxeu2Yqb4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=N/ehkWuAsMISiZsleoGVnErxfxYlEGcM5LT2loSSOXw1uHhRV9R/assT7kJh1DSFB1
         ABfELPIA9PSDTq+qDIQBWSWJrRFUMo02Gw4m0TiZbSHMnm3MFkuSSCuq7NHDIF/l5H/H
         9yYjJAdBTuP1Xg1RYw9DEtmoPZI60cih9l7Kk=
MIME-Version: 1.0
Received: by 10.52.178.98 with SMTP id cx2mr5435554vdc.91.1306337061203; Wed,
 25 May 2011 08:24:21 -0700 (PDT)
Received: by 10.52.108.229 with HTTP; Wed, 25 May 2011 08:24:21 -0700 (PDT)
Date: Wed, 25 May 2011 23:24:21 +0800
Message-ID: <BANLkTinPgM=2eLG0T-dt+LppHS68=vaMCg@mail.gmail.com>
Subject: Is there a limit on the size of the text for a single field?
From: Cheng Zhou <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071cd0c7d70b104a41b4ca3

--20cf3071cd0c7d70b104a41b4ca3
Content-Type: text/plain; charset=ISO-8859-1

Hi, I wonder if I can associate a text string of over 5MB with a single
field.

Thanks.

--20cf3071cd0c7d70b104a41b4ca3--

From java-user-return-49840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 15:45:09 2011
Return-Path: <java-user-return-49840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 415F34922
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 15:45:09 +0000 (UTC)
Received: (qmail 40387 invoked by uid 500); 25 May 2011 15:45:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40343 invoked by uid 500); 25 May 2011 15:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40335 invoked by uid 99); 25 May 2011 15:45:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 15:45:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 15:44:59 +0000
Received: by iwr19 with SMTP id 19so10121264iwr.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 08:44:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:from:date
         :message-id:subject:to:content-type;
        bh=ur8Kkhb8NfGGyPYg4KrRvv2Tqmq18zmB+rXjFaLFjJI=;
        b=qHMavvZUgPOGCsiDSJSdw8OqODNv0asuDLs4GLGn6j3EeO7P9peDvV60nyppK22qB+
         d5ycryCGPjuIzJCXWhubiLXrhQssI3SIFCvhzAo7i/GW4jLtNBXO3KtAW19pZLQsLTPs
         V3bDzeycrwF2MLfiAi/PEsbGSZEjOHwcZqD08=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        b=bV1yZHOPPmN1d1CzOCcauzceEprOnUHd9hgt5bOXJCVE3M+tLgxVJ5tDLHVUf+8dQJ
         +w7MWp1WROWktA47xdZC214Ki4usnJPh9+XsBkoBwqBJ/l4djvfw50/IOVBPcFQ0v13d
         t9b99aIe0p5KGipBRAutM8aPDyic32tj7gfTA=
Received: by 10.231.24.70 with SMTP id u6mr4742171ibb.108.1306338278128; Wed,
 25 May 2011 08:44:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.200.202 with HTTP; Wed, 25 May 2011 08:44:18 -0700 (PDT)
In-Reply-To: <BANLkTinPgM=2eLG0T-dt+LppHS68=vaMCg@mail.gmail.com>
References: <BANLkTinPgM=2eLG0T-dt+LppHS68=vaMCg@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 25 May 2011 16:44:18 +0100
Message-ID: <BANLkTim-=YWQd5NqyzE_-r=Q0u+j90sa9g@mail.gmail.com>
Subject: Re: Is there a limit on the size of the text for a single field?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Sure.  See the javadocs for IndexWriter.setMaxFieldLength or
LimitTokenCountAnalyzer if you are using 3.1.0.


--
Ian.


On Wed, May 25, 2011 at 4:24 PM, Cheng Zhou <zhoucheng2008@gmail.com> wrote:
> Hi, I wonder if I can associate a text string of over 5MB with a single
> field.
>
> Thanks.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 18:36:14 2011
Return-Path: <java-user-return-49841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 67BEE498D
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 18:36:14 +0000 (UTC)
Received: (qmail 37080 invoked by uid 500); 25 May 2011 18:36:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37038 invoked by uid 500); 25 May 2011 18:36:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37024 invoked by uid 99); 25 May 2011 18:36:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 18:36:12 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 18:36:05 +0000
Received: by vxa37 with SMTP id 37so9315277vxa.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 11:35:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=xoEP0ig1jwiNAApyhHn6VheQ49LPpDeP1xZbpkO48V0=;
        b=d+WbPDE9eNbqqD9AC6H3Cok4tzHji84J5+OzeAxi60RjeTIVdrQ6VI6In2mt3M7Azg
         L+IQWs0Pgefal35mvGWbxw2UAfh7Kl9putNsxmyZjHhc87yN+EMQ/10exo3bcD8m8exH
         Svv6ieFF6WccqO1OWEAmdA5Drpq67oBrSC9zc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=nJzCStID+5n8ikRHxHdFwEevLKboIiYmtfrvuBdKHEDQXedlBzFvMo5p1Ko6oKsVfi
         lEr3Te1y3jGGPJ81vg55XJE+PjVI4f9d/w0TGXnZcSUvxs61Z4lNC/yvJBbTJoNPkU3d
         JSD95zBS4IoquvD6UJSSIRflqjyTgqd3ehebc=
MIME-Version: 1.0
Received: by 10.52.178.98 with SMTP id cx2mr5728888vdc.91.1306348544627; Wed,
 25 May 2011 11:35:44 -0700 (PDT)
Received: by 10.52.108.229 with HTTP; Wed, 25 May 2011 11:35:44 -0700 (PDT)
In-Reply-To: <BANLkTim-=YWQd5NqyzE_-r=Q0u+j90sa9g@mail.gmail.com>
References: <BANLkTinPgM=2eLG0T-dt+LppHS68=vaMCg@mail.gmail.com>
	<BANLkTim-=YWQd5NqyzE_-r=Q0u+j90sa9g@mail.gmail.com>
Date: Thu, 26 May 2011 02:35:44 +0800
Message-ID: <BANLkTi=5kwYHTdqG7rM4VUPtNO6yPApkKQ@mail.gmail.com>
Subject: Re: Is there a limit on the size of the text for a single field?
From: Cheng Zhou <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071cd0cf494f804a41df834

--20cf3071cd0cf494f804a41df834
Content-Type: text/plain; charset=ISO-8859-1

thanks lan.

On Wed, May 25, 2011 at 11:44 PM, Ian Lea <ian.lea@gmail.com> wrote:

> Sure.  See the javadocs for IndexWriter.setMaxFieldLength or
> LimitTokenCountAnalyzer if you are using 3.1.0.
>
>
> --
> Ian.
>
>
> On Wed, May 25, 2011 at 4:24 PM, Cheng Zhou <zhoucheng2008@gmail.com>
> wrote:
> > Hi, I wonder if I can associate a text string of over 5MB with a single
> > field.
> >
> > Thanks.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf3071cd0cf494f804a41df834--

From java-user-return-49842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed May 25 20:21:38 2011
Return-Path: <java-user-return-49842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8337C4E56
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 25 May 2011 20:21:38 +0000 (UTC)
Received: (qmail 80226 invoked by uid 500); 25 May 2011 20:21:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80169 invoked by uid 500); 25 May 2011 20:21:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80154 invoked by uid 99); 25 May 2011 20:21:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 20:21:36 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhoucheng2008@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 25 May 2011 20:21:30 +0000
Received: by vxa37 with SMTP id 37so30859vxa.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 13:21:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:date:message-id:subject:from:to
         :content-type;
        bh=3veXFmIQiy8Org1bw0m5Eu5ewR1RM8ZQ+C0wYTibQTg=;
        b=F7CwAyRa7tu+YPg2n4LvoxcxNlCQJtWmt+T7oZKC3dD0n3PpqqUIMs/ZWk5nB+OF+D
         vYobIElpYMRmmDw7PQWo/wjoOXtMWRMiPs24JN2eNDFI5hx9QwvQqh2XE8lBDusllRDf
         P0CkLOXv2hV029ePzUegzTd/kiIUuDC59ZFzY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        b=tbpVobwsgPbHMlYvb65ycv0eyx40eZ34UQeeQZ7L44NyIh0Hbx+749oizKSFlcFDKr
         lCgYqw6t5EwxSUH1zv6DYGcmtY161SIER3qoP8bgjt6EKA8Zk2HScTacI0I15LNikMLL
         KnzmIuuPuaVqA8wCCfX77r6lBE1XNRaR65ajE=
MIME-Version: 1.0
Received: by 10.52.181.102 with SMTP id dv6mr213978vdc.251.1306354620370; Wed,
 25 May 2011 13:17:00 -0700 (PDT)
Received: by 10.52.108.229 with HTTP; Wed, 25 May 2011 13:17:00 -0700 (PDT)
Date: Thu, 26 May 2011 04:17:00 +0800
Message-ID: <BANLkTimMYPLxMasNB33QuL2sT2A9iGJ2-Q@mail.gmail.com>
Subject: JobClient.runJob(job) in Fetcher.java
From: Cheng <zhoucheng2008@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec548a8c7190e1204a41f6359

--bcaec548a8c7190e1204a41f6359
Content-Type: text/plain; charset=ISO-8859-1

Hi, I notice that there are a few run() methods in Fetcher.java and that the
following statement in Crawler.java calls the JobClient.runJob(job) in
Fetcher.java.

fetcher.fetch(segs[0], threads,
org.apache.nutch.fetcher.Fetcher.isParsing(conf));

I would like to know which run() in Fetcher.java has been called by the
above statetment.

Thanks.

--bcaec548a8c7190e1204a41f6359--

From java-user-return-49843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 26 01:04:17 2011
Return-Path: <java-user-return-49843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BC1B34385
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 26 May 2011 01:04:17 +0000 (UTC)
Received: (qmail 85205 invoked by uid 500); 26 May 2011 01:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84996 invoked by uid 500); 26 May 2011 01:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 25012 invoked by uid 99); 25 May 2011 19:47:23 -0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 209.226.175.87 is neither permitted nor denied by domain of leroy.stone@umontreal.ca)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ak0CAP5Z3U1FnRVW/2dsb2JhbAAMmB8BAbR2nweGHASVA4pP
Mime-Version: 1.0
Message-Id: <p06240800ca030b09f319@[208.163.46.4]>
Date: Wed, 25 May 2011 15:46:48 -0400
To: java-user@lucene.apache.org
From: Leroy Stone <leroy.stone@umontreal.ca>
Subject: Passage retrieval with Lucene-based application
Content-Type: text/plain; charset="us-ascii" ; format="flowed"
X-Virus-Checked: Checked by ClamAV on apache.org


Hello!
         I am purchased "Lucene in Action", 2nd Ed., and posted the 
question below at the Manning Forum. Mike MCCandless suggested that I 
send it to you.

Thanks in advance for your attention.

________ the question I posted ___________
I would like the search program to return with segments of a document 
("paragraphs") that contain my search phrase, rather than simply 
pointers to the whole document. in searching among applications based 
upon the Lucene, I have found only one that seems to have this 
functionality. It is at http://www.crosswire.org/bibledesktop/ . Can 
someone point me to some other Lucene-based applications where the 
search engine returns text segments from within documents?
Thanks in advance.
________________________

N.B. I know Lucene can be modified to do what I wish.  My problem is 
that my professional obligations do not allow the time for me to 
build the entire application that I need.  Thus I am searching for 
one that exists already, that I can adapt quickly, and which has all 
the code with which I must surround Lucene to make a full-blown 
application.

The Bible application I cite requires preprocessing of the documents 
into SWORD format.  I will try that route if that is all that is 
available. I thought I would "look around" (with your help) before 
trying to take on the SWORD-format issue.


Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 26 01:09:30 2011
Return-Path: <java-user-return-49844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1705C4494
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 26 May 2011 01:09:30 +0000 (UTC)
Received: (qmail 95939 invoked by uid 500); 26 May 2011 01:09:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95877 invoked by uid 500); 26 May 2011 01:09:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95869 invoked by uid 99); 26 May 2011 01:09:27 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 May 2011 01:09:27 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of shashi.mit@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 May 2011 01:09:21 +0000
Received: by eya28 with SMTP id 28so221484eya.35
        for <java-user@lucene.apache.org>; Wed, 25 May 2011 18:09:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:sender:in-reply-to:references:from
         :date:x-google-sender-auth:message-id:subject:to:content-type;
        bh=tMvS72Fe/1lkAtTFq+OONhhoX8+IVhZWsizIoPCIf9s=;
        b=hE/7uGoFmaCONRXdR/vWldkZlAW43D1cdw2u1ExkR8iNvba3ObG80IblGpWaTW28AB
         bZEKxnFaYL/L4WpMONNIb+Cb7jirvcU8v4XZU0B/nQDm2c9ntaNng/euVEsKbT+f4rZ5
         WxqxFKyFPALRTQLJrKpuw8wC/Aj7J+AK/BpD4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:sender:in-reply-to:references:from:date
         :x-google-sender-auth:message-id:subject:to:content-type;
        b=Igjx6suD0hAYRdSdmqRWbZ32kn1+L2wHxtN/GF6pmCFI54MC2pQ+w/EdGx5l+yxKwk
         /BfxwRDbqFVkuRvgeQxtwYDhIYckpm9qTUWvwPxcc9nC0NIgrA2KK0o1qbGFoElA8s6f
         2FRZHgi0YuKv0t0giZSPHUkgoo9orX50rtKM4=
Received: by 10.14.43.218 with SMTP id l66mr85820eeb.188.1306372141184; Wed,
 25 May 2011 18:09:01 -0700 (PDT)
MIME-Version: 1.0
Sender: shashi.mit@gmail.com
Received: by 10.14.37.14 with HTTP; Wed, 25 May 2011 18:08:31 -0700 (PDT)
In-Reply-To: <p06240800ca030b09f319@208.163.46.4>
References: <p06240800ca030b09f319@208.163.46.4>
From: Shashi Kant <skant@sloan.mit.edu>
Date: Wed, 25 May 2011 21:08:31 -0400
X-Google-Sender-Auth: IHnt6y5ubKxGx2EUPWHY7WaiUz4
Message-ID: <BANLkTikb6eaHcrofThZgbosM9Uy4Ccvi0Q@mail.gmail.com>
Subject: Re: Passage retrieval with Lucene-based application
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

https://issues.apache.org/jira/browse/LUCENE-1522


On Wed, May 25, 2011 at 3:46 PM, Leroy Stone <leroy.stone@umontreal.ca> wrote:
> document ("paragraphs") that contain my search phrase, rather than simply
> pointers to the whole document. in searching among applications based upon
> the Lucene, I have found only one that seems to have this functionality. It
> is at http://www.crosswire.org/bibledesktop/ . Can someone point me to some
> other Lucene-based applications where the search engine returns text
> segments from within documents?
> Thanks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu May 26 01:32:35 2011
Return-Path: <java-user-return-49845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B98DB4933
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 26 May 2011 01:32:35 +0000 (UTC)
Received: (qmail 13118 invoked by uid 500); 26 May 2011 01:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13072 invoked by uid 500); 26 May 2011 01:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13064 invoked by uid 99); 26 May 2011 01:32:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 May 2011 01:32:33 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sujit.pal@comcast.net designates 76.96.30.48 as permitted sender)
Received: from [76.96.30.48] (HELO qmta05.emeryville.ca.mail.comcast.net) (76.96.30.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 26 May 2011 01:32:25 +0000
Received: from omta16.emeryville.ca.mail.comcast.net ([76.96.30.72])
	by qmta05.emeryville.ca.mail.comcast.net with comcast
	id o1Wb1g0031ZMdJ4A51Y2cg; Thu, 26 May 2011 01:32:02 +0000
Received: from [10.1.1.36] ([208.106.108.2])
	by omta16.emeryville.ca.mail.comcast.net with comcast
	id o1Xs1g00B038EM48c1Xwq9; Thu, 26 May 2011 01:32:01 +0000
Subject: Re: Passage retrieval with Lucene-based application
From: Sujit Pal <sujit.pal@comcast.net>
Reply-To: sujit.pal@comcast.net
To: java-user@lucene.apache.org
In-Reply-To: <p06240800ca030b09f319@[208.163.46.4]>
References: <p06240800ca030b09f319@[208.163.46.4]>
Content-Type: text/plain
Organization: Personal
Date: Wed, 25 May 2011 18:31:52 -0700
Message-Id: <1306373512.29936.157.camel@lysdexic.healthline.com>
Mime-Version: 1.0
X-Mailer: Evolution 2.12.3 (2.12.3-8.el5_2.3) 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Leroy,

Would it make sense to index as Lucene documents the unit to be
searched? So if you want paragraphs to be shown in search results, you
could parse the source document during indexing into paragraphs and
index them as separate Lucene documents.

-sujit

On Wed, 2011-05-25 at 15:46 -0400, Leroy Stone wrote:
> Hello!
>          I am purchased "Lucene in Action", 2nd Ed., and posted the 
> question below at the Manning Forum. Mike MCCandless suggested that I 
> send it to you.
> 
> Thanks in advance for your attention.
> 
> ________ the question I posted ___________
> I would like the search program to return with segments of a document 
> ("paragraphs") that contain my search phrase, rather than simply 
> pointers to the whole document. in searching among applications based 
> upon the Lucene, I have found only one that seems to have this 
> functionality. It is at http://www.crosswire.org/bibledesktop/ . Can 
> someone point me to some other Lucene-based applications where the 
> search engine returns text segments from within documents?
> Thanks in advance.
> ________________________
> 
> N.B. I know Lucene can be modified to do what I wish.  My problem is 
> that my professional obligations do not allow the time for me to 
> build the entire application that I need.  Thus I am searching for 
> one that exists already, that I can adapt quickly, and which has all 
> the code with which I must surround Lucene to make a full-blown 
> application.
> 
> The Bible application I cite requires preprocessing of the documents 
> into SWORD format.  I will try that route if that is all that is 
> available. I thought I would "look around" (with your help) before 
> trying to take on the SWORD-format issue.
> 
> 
> Thanks.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 27 10:58:06 2011
Return-Path: <java-user-return-49846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BEA6D42D2
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 27 May 2011 10:58:06 +0000 (UTC)
Received: (qmail 13636 invoked by uid 500); 27 May 2011 10:58:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13566 invoked by uid 500); 27 May 2011 10:58:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13558 invoked by uid 99); 27 May 2011 10:58:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 10:58:03 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [82.132.130.152] (HELO mail.o2.co.uk) (82.132.130.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 10:57:55 +0000
Received: from [192.168.1.64] (86.177.181.6) by mail.o2.co.uk (8.5.119.05) (authenticated as joel.halbert8909@o2.co.uk)
        id 4D035EC322E45937 for java-user@lucene.apache.org; Fri, 27 May 2011 12:07:00 +0100
Subject: FastVectorHighlighter.getBestFragments returning null
From: Joel Halbert <joel@su3analytics.com>
To: lucene users <java-user@lucene.apache.org>
Content-Type: multipart/alternative; boundary="=-I72PqGqlG8mUEjbQgTM4"
Date: Fri, 27 May 2011 11:57:28 +0100
Message-ID: <1306493848.2115.13.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.30.3 

--=-I72PqGqlG8mUEjbQgTM4
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 7bit

Hi,

I'm using Lucene 3.0.3. I'm extracting snippets using
FastVectorHighlighter, for some snippets (I think always when searching
for exact matches, quoted) the fragment is null.

Code looks like:


			query = QueryParser.escape(query);
			if (exact) {
				query = "\""+query+"\"";
			}
                        BooleanQuery allQ = new BooleanQuery();
			Query bodyQ = new QueryParser(Version.LUCENE_30, BODY, analyser).parse(query);
			termQ.add(new BooleanClause(bodyQ, Occur.SHOULD));
                        // add more queries
                        allQ.add(new BooleanClause(termQ, Occur.MUST));
                        
			TopDocs res = is.search(allQ, null, upperRange);	
			FastVectorHighlighter highlighter = new FastVectorHighlighter(true, true);
			
			for (int i = in.getLowerRange(); i < Math.min(res.totalHits, upperRange); i++) {

                           	String[] bodyFrags =
						highlighter.getBestFragments(highlighter.getFieldQuery(bodyQ),
						is.getIndexReader(), res.scoreDocs[i].doc, BODY, 120, 2);
                
                                // bodyFrags is null
                    }


I do get a hit, and the content with the exact match is coming from the
BODY field, but I cann't seem to get the fragment out.

Any clues,

Thanks

- Joel

--=-I72PqGqlG8mUEjbQgTM4--


From java-user-return-49847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 27 11:57:18 2011
Return-Path: <java-user-return-49847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 825DC46B7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 27 May 2011 11:57:18 +0000 (UTC)
Received: (qmail 85194 invoked by uid 500); 27 May 2011 11:57:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85145 invoked by uid 500); 27 May 2011 11:57:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85137 invoked by uid 99); 27 May 2011 11:57:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 11:57:15 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pierre.gosse@arisem.com designates 195.68.26.146 as permitted sender)
Received: from [195.68.26.146] (HELO mail.arisem.com) (195.68.26.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 11:57:09 +0000
Received: from enodios.ARISEM.COM (192.168.1.105) by enodios.arisem.com
 (192.168.1.254) with Microsoft SMTP Server (TLS) id 14.1.289.1; Fri, 27 May
 2011 13:56:28 +0200
Received: from enodios.ARISEM.COM ([192.168.1.105]) by enodios.ARISEM.COM
 ([192.168.1.105]) with mapi; Fri, 27 May 2011 13:56:28 +0200
From: Pierre GOSSE <pierre.gosse@arisem.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 27 May 2011 13:56:27 +0200
Subject: RE: FastVectorHighlighter.getBestFragments returning null
Thread-Topic: FastVectorHighlighter.getBestFragments returning null
Thread-Index: AcwcXPm2un7+5uW0SlSK2mlkQSe/wwAB/9aQ
Message-ID: <4A1AC1E08A1A4A438C4E4502E73AFC744A170150B4@enodios.ARISEM.COM>
References: <1306493848.2115.13.camel@bohr>
In-Reply-To: <1306493848.2115.13.camel@bohr>
Accept-Language: fr-FR, en-US
Content-Language: fr-FR
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: fr-FR, en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

SGksDQoNCk1heWJlIGlzIGl0IHJlbGF0ZWQgdG8gOg0KaHR0cHM6Ly9pc3N1ZXMuYXBhY2hlLm9y
Zy9qaXJhL2Jyb3dzZS9MVUNFTkUtMzA4Nw0KDQpQaWVycmUNCg0KLS0tLS1NZXNzYWdlIGQnb3Jp
Z2luZS0tLS0tDQpEZcKgOiBKb2VsIEhhbGJlcnQgW21haWx0bzpqb2VsQHN1M2FuYWx5dGljcy5j
b21dIA0KRW52b3nDqcKgOiB2ZW5kcmVkaSAyNyBtYWkgMjAxMSAxMjo1Nw0Kw4DCoDogbHVjZW5l
IHVzZXJzDQpPYmpldMKgOiBGYXN0VmVjdG9ySGlnaGxpZ2h0ZXIuZ2V0QmVzdEZyYWdtZW50cyBy
ZXR1cm5pbmcgbnVsbA0KDQpIaSwNCg0KSSdtIHVzaW5nIEx1Y2VuZSAzLjAuMy4gSSdtIGV4dHJh
Y3Rpbmcgc25pcHBldHMgdXNpbmcNCkZhc3RWZWN0b3JIaWdobGlnaHRlciwgZm9yIHNvbWUgc25p
cHBldHMgKEkgdGhpbmsgYWx3YXlzIHdoZW4gc2VhcmNoaW5nDQpmb3IgZXhhY3QgbWF0Y2hlcywg
cXVvdGVkKSB0aGUgZnJhZ21lbnQgaXMgbnVsbC4NCg0KQ29kZSBsb29rcyBsaWtlOg0KDQoNCgkJ
CXF1ZXJ5ID0gUXVlcnlQYXJzZXIuZXNjYXBlKHF1ZXJ5KTsNCgkJCWlmIChleGFjdCkgew0KCQkJ
CXF1ZXJ5ID0gIlwiIitxdWVyeSsiXCIiOw0KCQkJfQ0KICAgICAgICAgICAgICAgICAgICAgICAg
Qm9vbGVhblF1ZXJ5IGFsbFEgPSBuZXcgQm9vbGVhblF1ZXJ5KCk7DQoJCQlRdWVyeSBib2R5USA9
IG5ldyBRdWVyeVBhcnNlcihWZXJzaW9uLkxVQ0VORV8zMCwgQk9EWSwgYW5hbHlzZXIpLnBhcnNl
KHF1ZXJ5KTsNCgkJCXRlcm1RLmFkZChuZXcgQm9vbGVhbkNsYXVzZShib2R5USwgT2NjdXIuU0hP
VUxEKSk7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGQgbW9yZSBxdWVyaWVzDQogICAg
ICAgICAgICAgICAgICAgICAgICBhbGxRLmFkZChuZXcgQm9vbGVhbkNsYXVzZSh0ZXJtUSwgT2Nj
dXIuTVVTVCkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgDQoJCQlUb3BEb2NzIHJlcyA9IGlz
LnNlYXJjaChhbGxRLCBudWxsLCB1cHBlclJhbmdlKTsJDQoJCQlGYXN0VmVjdG9ySGlnaGxpZ2h0
ZXIgaGlnaGxpZ2h0ZXIgPSBuZXcgRmFzdFZlY3RvckhpZ2hsaWdodGVyKHRydWUsIHRydWUpOw0K
CQkJDQoJCQlmb3IgKGludCBpID0gaW4uZ2V0TG93ZXJSYW5nZSgpOyBpIDwgTWF0aC5taW4ocmVz
LnRvdGFsSGl0cywgdXBwZXJSYW5nZSk7IGkrKykgew0KDQogICAgICAgICAgICAgICAgICAgICAg
ICAgICAJU3RyaW5nW10gYm9keUZyYWdzID0NCgkJCQkJCWhpZ2hsaWdodGVyLmdldEJlc3RGcmFn
bWVudHMoaGlnaGxpZ2h0ZXIuZ2V0RmllbGRRdWVyeShib2R5USksDQoJCQkJCQlpcy5nZXRJbmRl
eFJlYWRlcigpLCByZXMuc2NvcmVEb2NzW2ldLmRvYywgQk9EWSwgMTIwLCAyKTsNCiAgICAgICAg
ICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYm9keUZyYWdzIGlz
IG51bGwNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQoNCkkgZG8gZ2V0IGEgaGl0LCBhbmQgdGhl
IGNvbnRlbnQgd2l0aCB0aGUgZXhhY3QgbWF0Y2ggaXMgY29taW5nIGZyb20gdGhlDQpCT0RZIGZp
ZWxkLCBidXQgSSBjYW5uJ3Qgc2VlbSB0byBnZXQgdGhlIGZyYWdtZW50IG91dC4NCg0KQW55IGNs
dWVzLA0KDQpUaGFua3MNCg0KLSBKb2VsDQo=


From java-user-return-49848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 27 12:05:33 2011
Return-Path: <java-user-return-49848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BB7124E97
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 27 May 2011 12:05:33 +0000 (UTC)
Received: (qmail 96349 invoked by uid 500); 27 May 2011 12:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96304 invoked by uid 500); 27 May 2011 12:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96296 invoked by uid 99); 27 May 2011 12:05:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 12:05:31 +0000
X-ASF-Spam-Status: No, hits=2.9 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [82.132.130.150] (HELO mail.o2.co.uk) (82.132.130.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 12:05:21 +0000
Received: from [192.168.1.64] (86.177.181.6) by mail.o2.co.uk (8.5.119.05) (authenticated as joel.halbert8909@o2.co.uk)
        id 4DA2BC230785BAE4 for java-user@lucene.apache.org; Fri, 27 May 2011 13:09:27 +0100
Subject: RE: FastVectorHighlighter.getBestFragments returning null
From: Joel Halbert <joel@su3analytics.com>
To: java-user@lucene.apache.org
In-Reply-To: <4A1AC1E08A1A4A438C4E4502E73AFC744A170150B4@enodios.ARISEM.COM>
References: <1306493848.2115.13.camel@bohr>
	 <4A1AC1E08A1A4A438C4E4502E73AFC744A170150B4@enodios.ARISEM.COM>
Content-Type: multipart/alternative; boundary="=-HQsz5jw2x3MHl6HLSREZ"
Date: Fri, 27 May 2011 13:04:53 +0100
Message-ID: <1306497893.2115.17.camel@bohr>
Mime-Version: 1.0
X-Mailer: Evolution 2.30.3 
X-Virus-Checked: Checked by ClamAV on apache.org

--=-HQsz5jw2x3MHl6HLSREZ
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit

Hi Pierre,

Thanks for the pointer. So if I understand correctly this bug definitely
applies to fields with TermVector.WITH_OFFSETS.

My field uses TermVector.WITH_POSITIONS_OFFSETS)

I wasn't sure from the bug report if it applies to
WITH_POSITIONS_OFFSETS as well? It looks like it might?

- Joel

On Fri, 2011-05-27 at 13:56 +0200, Pierre GOSSE wrote:

> Hi,
> 
> Maybe is it related to :
> https://issues.apache.org/jira/browse/LUCENE-3087
> 
> Pierre
> 
> -----Message d'origine-----
> De : Joel Halbert [mailto:joel@su3analytics.com] 
> Envoy : vendredi 27 mai 2011 12:57
>  : lucene users
> Objet : FastVectorHighlighter.getBestFragments returning null
> 
> Hi,
> 
> I'm using Lucene 3.0.3. I'm extracting snippets using
> FastVectorHighlighter, for some snippets (I think always when searching
> for exact matches, quoted) the fragment is null.
> 
> Code looks like:
> 
> 
> 			query = QueryParser.escape(query);
> 			if (exact) {
> 				query = "\""+query+"\"";
> 			}
>                         BooleanQuery allQ = new BooleanQuery();
> 			Query bodyQ = new QueryParser(Version.LUCENE_30, BODY, analyser).parse(query);
> 			termQ.add(new BooleanClause(bodyQ, Occur.SHOULD));
>                         // add more queries
>                         allQ.add(new BooleanClause(termQ, Occur.MUST));
>                         
> 			TopDocs res = is.search(allQ, null, upperRange);	
> 			FastVectorHighlighter highlighter = new FastVectorHighlighter(true, true);
> 			
> 			for (int i = in.getLowerRange(); i < Math.min(res.totalHits, upperRange); i++) {
> 
>                            	String[] bodyFrags =
> 						highlighter.getBestFragments(highlighter.getFieldQuery(bodyQ),
> 						is.getIndexReader(), res.scoreDocs[i].doc, BODY, 120, 2);
>                 
>                                 // bodyFrags is null
>                     }
> 
> 
> I do get a hit, and the content with the exact match is coming from the
> BODY field, but I cann't seem to get the fragment out.
> 
> Any clues,
> 
> Thanks
> 
> - Joel



--=-HQsz5jw2x3MHl6HLSREZ--


From java-user-return-49849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 27 13:38:10 2011
Return-Path: <java-user-return-49849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7EA154FBF
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 27 May 2011 13:38:10 +0000 (UTC)
Received: (qmail 27269 invoked by uid 500); 27 May 2011 13:38:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27217 invoked by uid 500); 27 May 2011 13:38:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27207 invoked by uid 99); 27 May 2011 13:38:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 13:38:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of pierre.gosse@arisem.com designates 195.68.26.146 as permitted sender)
Received: from [195.68.26.146] (HELO mail.arisem.com) (195.68.26.146)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 13:38:02 +0000
Received: from enodios.ARISEM.COM (192.168.1.105) by enodios.arisem.com
 (192.168.1.254) with Microsoft SMTP Server (TLS) id 14.1.289.1; Fri, 27 May
 2011 15:37:27 +0200
Received: from enodios.ARISEM.COM ([192.168.1.105]) by enodios.ARISEM.COM
 ([192.168.1.105]) with mapi; Fri, 27 May 2011 15:37:27 +0200
From: Pierre GOSSE <pierre.gosse@arisem.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 27 May 2011 15:37:26 +0200
Subject: RE: FastVectorHighlighter.getBestFragments returning null
Thread-Topic: FastVectorHighlighter.getBestFragments returning null
Thread-Index: AcwcZmi0ZyAZWiniRpKlS7hvPWOZCgAC5fmA
Message-ID: <4A1AC1E08A1A4A438C4E4502E73AFC744A170150CE@enodios.ARISEM.COM>
References: <1306493848.2115.13.camel@bohr>
	 <4A1AC1E08A1A4A438C4E4502E73AFC744A170150B4@enodios.ARISEM.COM>
 <1306497893.2115.17.camel@bohr>
In-Reply-To: <1306497893.2115.17.camel@bohr>
Accept-Language: fr-FR, en-US
Content-Language: fr-FR
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: fr-FR, en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

QWN0dWFsbHksIHRoaXMgc2Vjb25kIGlzc3VlIHdhcyBvcGVuZWQgc2luY2UgSGlnaGxpZ2h0IHNl
YW1zIHRvIGlnbm9yZSBwb3NpdGlvbnMgYW5kIHRyZWF0cyBXSVRIX1BPU0lUSU9OU19PRkZTRVRT
IGxpa2UgaXQgd2FzIFdJVEhfT0ZGU0VUUy4NCg0KaHR0cHM6Ly9pc3N1ZXMuYXBhY2hlLm9yZy9q
aXJhL2Jyb3dzZS9MVUNFTkUtMzA5MQ0KDQpBcyBmYXIgYXMgSSByZW1lbWJlciwgdGhlIHRyb3Vi
bGUgaXMgdGhhdCB0byB0cnVzdCBwb3NpdGlvbnMgaW4gdGhlIHRva2Vuc3RyZWFtIGJ1aWx0IGZy
b20gdGVybXZlY3RvciwgeW91IGhhdmUgdG8ga25vdyB0aGUgZmllbGQgcHJvcGVydGllcywgYW5k
IGl0IGlzbid0IGFjY2Vzc2libGUgYXQgdGhlIGNvZGUgbGV2ZWwgd2hlcmUgdGhlIGRlY2lzaW9u
IGlzIG1hZGUgdG8gdXNlIG9mZnNldCBvciBwb3NpdGlvbnMuIFNvIHNvbWUgbW9kaWZpY2F0aW9u
cyBhcmUgdG8gYmUgbWFkZSB0byBwYXNzIHRoaXMgaW5mb3JtYXRpb24gd2l0aCB0aGUgdG9rZW4g
c3RyZWFtLCBvciB0byBnaXZlIGFjY2VzcyB0byBmaWVsZCBwcm9wZXJ0aWVzIHRvIHRoZSBoaWdo
bGlnaHRlci4gTmVpdGhlciBvZiB0aG9zZSBzZWFtZWQgc3RyYWlnaHRmb3J3YXJkLiBCdXQgSSBy
ZWFsbHkgZGlkIHRha2UgYSB2ZXJ5IHNob3J0IGxvb2sgc28gSSdtIHN1cmUgb2Ygbm90aGluZyB0
aGVyZS4NCg0KSSBob3BlIHRoYXQgc29tZW9uZSBvZiBncmVhdGVyIHZpc2lvbiB3aWxsIGZpbmQg
YW4gZWxlZ2FudCBzb2x1dGlvbiB0byB0aGlzIDopLiBCdXQgb3RoZXJ3aXNlIEkgaG9wZSB0byBm
aW5kIHNvbWUgdGltZSB0byB0YWtlIGEgbG9vayBpbiBhIGNvdXBsZSB3ZWVrcywgd2hpbGUgSSd2
ZSBwYXJ0IG9mIHRoZSBjb250ZXh0IHN0aWxsIGluIG1pbmQuDQoNClBpZXJyZQ0KDQotLS0tLU1l
c3NhZ2UgZCdvcmlnaW5lLS0tLS0NCkRlwqA6IEpvZWwgSGFsYmVydCBbbWFpbHRvOmpvZWxAc3Uz
YW5hbHl0aWNzLmNvbV0gDQpFbnZvecOpwqA6IHZlbmRyZWRpIDI3IG1haSAyMDExIDE0OjA1DQrD
gMKgOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcNCk9iamV0wqA6IFJFOiBGYXN0VmVjdG9y
SGlnaGxpZ2h0ZXIuZ2V0QmVzdEZyYWdtZW50cyByZXR1cm5pbmcgbnVsbA0KDQpIaSBQaWVycmUs
DQoNClRoYW5rcyBmb3IgdGhlIHBvaW50ZXIuIFNvIGlmIEkgdW5kZXJzdGFuZCBjb3JyZWN0bHkg
dGhpcyBidWcgZGVmaW5pdGVseQ0KYXBwbGllcyB0byBmaWVsZHMgd2l0aCBUZXJtVmVjdG9yLldJ
VEhfT0ZGU0VUUy4NCg0KTXkgZmllbGQgdXNlcyBUZXJtVmVjdG9yLldJVEhfUE9TSVRJT05TX09G
RlNFVFMpDQoNCkkgd2Fzbid0IHN1cmUgZnJvbSB0aGUgYnVnIHJlcG9ydCBpZiBpdCBhcHBsaWVz
IHRvDQpXSVRIX1BPU0lUSU9OU19PRkZTRVRTIGFzIHdlbGw/IEl0IGxvb2tzIGxpa2UgaXQgbWln
aHQ/DQoNCi0gSm9lbA0KDQpPbiBGcmksIDIwMTEtMDUtMjcgYXQgMTM6NTYgKzAyMDAsIFBpZXJy
ZSBHT1NTRSB3cm90ZToNCg0KPiBIaSwNCj4gDQo+IE1heWJlIGlzIGl0IHJlbGF0ZWQgdG8gOg0K
PiBodHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEvYnJvd3NlL0xVQ0VORS0zMDg3DQo+IA0K
PiBQaWVycmUNCj4gDQo+IC0tLS0tTWVzc2FnZSBkJ29yaWdpbmUtLS0tLQ0KPiBEZSA6IEpvZWwg
SGFsYmVydCBbbWFpbHRvOmpvZWxAc3UzYW5hbHl0aWNzLmNvbV0gDQo+IEVudm95w6kgOiB2ZW5k
cmVkaSAyNyBtYWkgMjAxMSAxMjo1Nw0KPiDDgCA6IGx1Y2VuZSB1c2Vycw0KPiBPYmpldCA6IEZh
c3RWZWN0b3JIaWdobGlnaHRlci5nZXRCZXN0RnJhZ21lbnRzIHJldHVybmluZyBudWxsDQo+IA0K
PiBIaSwNCj4gDQo+IEknbSB1c2luZyBMdWNlbmUgMy4wLjMuIEknbSBleHRyYWN0aW5nIHNuaXBw
ZXRzIHVzaW5nDQo+IEZhc3RWZWN0b3JIaWdobGlnaHRlciwgZm9yIHNvbWUgc25pcHBldHMgKEkg
dGhpbmsgYWx3YXlzIHdoZW4gc2VhcmNoaW5nDQo+IGZvciBleGFjdCBtYXRjaGVzLCBxdW90ZWQp
IHRoZSBmcmFnbWVudCBpcyBudWxsLg0KPiANCj4gQ29kZSBsb29rcyBsaWtlOg0KPiANCj4gDQo+
IAkJCXF1ZXJ5ID0gUXVlcnlQYXJzZXIuZXNjYXBlKHF1ZXJ5KTsNCj4gCQkJaWYgKGV4YWN0KSB7
DQo+IAkJCQlxdWVyeSA9ICJcIiIrcXVlcnkrIlwiIjsNCj4gCQkJfQ0KPiAgICAgICAgICAgICAg
ICAgICAgICAgICBCb29sZWFuUXVlcnkgYWxsUSA9IG5ldyBCb29sZWFuUXVlcnkoKTsNCj4gCQkJ
UXVlcnkgYm9keVEgPSBuZXcgUXVlcnlQYXJzZXIoVmVyc2lvbi5MVUNFTkVfMzAsIEJPRFksIGFu
YWx5c2VyKS5wYXJzZShxdWVyeSk7DQo+IAkJCXRlcm1RLmFkZChuZXcgQm9vbGVhbkNsYXVzZShi
b2R5USwgT2NjdXIuU0hPVUxEKSk7DQo+ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFkZCBt
b3JlIHF1ZXJpZXMNCj4gICAgICAgICAgICAgICAgICAgICAgICAgYWxsUS5hZGQobmV3IEJvb2xl
YW5DbGF1c2UodGVybVEsIE9jY3VyLk1VU1QpKTsNCj4gICAgICAgICAgICAgICAgICAgICAgICAg
DQo+IAkJCVRvcERvY3MgcmVzID0gaXMuc2VhcmNoKGFsbFEsIG51bGwsIHVwcGVyUmFuZ2UpOwkN
Cj4gCQkJRmFzdFZlY3RvckhpZ2hsaWdodGVyIGhpZ2hsaWdodGVyID0gbmV3IEZhc3RWZWN0b3JI
aWdobGlnaHRlcih0cnVlLCB0cnVlKTsNCj4gCQkJDQo+IAkJCWZvciAoaW50IGkgPSBpbi5nZXRM
b3dlclJhbmdlKCk7IGkgPCBNYXRoLm1pbihyZXMudG90YWxIaXRzLCB1cHBlclJhbmdlKTsgaSsr
KSB7DQo+IA0KPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAJU3RyaW5nW10gYm9keUZyYWdz
ID0NCj4gCQkJCQkJaGlnaGxpZ2h0ZXIuZ2V0QmVzdEZyYWdtZW50cyhoaWdobGlnaHRlci5nZXRG
aWVsZFF1ZXJ5KGJvZHlRKSwNCj4gCQkJCQkJaXMuZ2V0SW5kZXhSZWFkZXIoKSwgcmVzLnNjb3Jl
RG9jc1tpXS5kb2MsIEJPRFksIDEyMCwgMik7DQo+ICAgICAgICAgICAgICAgICANCj4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib2R5RnJhZ3MgaXMgbnVsbA0KPiAgICAgICAg
ICAgICAgICAgICAgIH0NCj4gDQo+IA0KPiBJIGRvIGdldCBhIGhpdCwgYW5kIHRoZSBjb250ZW50
IHdpdGggdGhlIGV4YWN0IG1hdGNoIGlzIGNvbWluZyBmcm9tIHRoZQ0KPiBCT0RZIGZpZWxkLCBi
dXQgSSBjYW5uJ3Qgc2VlbSB0byBnZXQgdGhlIGZyYWdtZW50IG91dC4NCj4gDQo+IEFueSBjbHVl
cywNCj4gDQo+IFRoYW5rcw0KPiANCj4gLSBKb2VsDQoNCg0K


From java-user-return-49850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 27 13:55:47 2011
Return-Path: <java-user-return-49850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D95C24B86
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 27 May 2011 13:55:47 +0000 (UTC)
Received: (qmail 57026 invoked by uid 500); 27 May 2011 13:55:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56965 invoked by uid 500); 27 May 2011 13:55:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56957 invoked by uid 99); 27 May 2011 13:55:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 13:55:45 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 13:55:37 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 7043AE34AE
	for <java-user@lucene.apache.org>; Fri, 27 May 2011 22:55:16 +0900 (JST)
Message-ID: <4DDFAD44.3090906@r.email.ne.jp>
Date: Fri, 27 May 2011 22:55:16 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter.getBestFragments returning null
References: <1306493848.2115.13.camel@bohr> <4A1AC1E08A1A4A438C4E4502E73AFC744A170150B4@enodios.ARISEM.COM>
In-Reply-To: <4A1AC1E08A1A4A438C4E4502E73AFC744A170150B4@enodios.ARISEM.COM>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

(11/05/27 20:56), Pierre GOSSE wrote:
> Hi,
>
> Maybe is it related to :
> https://issues.apache.org/jira/browse/LUCENE-3087

No, because Joel's problem is FastVectorHighlighter, but LUCENE-3087
is for Highlighter.

koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 27 13:59:12 2011
Return-Path: <java-user-return-49851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7D6244C52
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 27 May 2011 13:59:12 +0000 (UTC)
Received: (qmail 66572 invoked by uid 500); 27 May 2011 13:59:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66521 invoked by uid 500); 27 May 2011 13:59:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66513 invoked by uid 99); 27 May 2011 13:59:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 13:59:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=SPF_PASS,T_FRT_ADULT2,WEIRD_QUOTING
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of koji@r.email.ne.jp designates 202.224.39.197 as permitted sender)
Received: from [202.224.39.197] (HELO mail1.asahi-net.or.jp) (202.224.39.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 13:59:02 +0000
Received: from Koji-Sekiguchi-no-MacBook-Pro.local (w244069.ppp.asahi-net.or.jp [121.1.244.69])
	by mail1.asahi-net.or.jp (Postfix) with ESMTP id 5D313E5F32
	for <java-user@lucene.apache.org>; Fri, 27 May 2011 22:58:41 +0900 (JST)
Message-ID: <4DDFAE11.7040201@r.email.ne.jp>
Date: Fri, 27 May 2011 22:58:41 +0900
From: Koji Sekiguchi <koji@r.email.ne.jp>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; ja-JP-mac; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FastVectorHighlighter.getBestFragments returning null
References: <1306493848.2115.13.camel@bohr>
In-Reply-To: <1306493848.2115.13.camel@bohr>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

(11/05/27 19:57), Joel Halbert wrote:
> Hi,
>
> I'm using Lucene 3.0.3. I'm extracting snippets using
> FastVectorHighlighter, for some snippets (I think always when searching
> for exact matches, quoted) the fragment is null.
>
> Code looks like:
>
>
> 			query = QueryParser.escape(query);
> 			if (exact) {
> 				query = "\""+query+"\"";
> 			}
>                          BooleanQuery allQ = new BooleanQuery();
> 			Query bodyQ = new QueryParser(Version.LUCENE_30, BODY, analyser).parse(query);

What analyzer do you use? And are you sure bodyQ can be composed of
TermQuery, PhraseQuery, BooleanQuery and DisjunctionMaxQuery?

koji
-- 
http://www.rondhuit.com/en/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri May 27 23:09:34 2011
Return-Path: <java-user-return-49852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7CABA4EF7
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 27 May 2011 23:09:34 +0000 (UTC)
Received: (qmail 62338 invoked by uid 500); 27 May 2011 23:09:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62136 invoked by uid 500); 27 May 2011 23:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62128 invoked by uid 99); 27 May 2011 23:09:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 23:09:31 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [62.23.130.172] (HELO zig.albert.com) (62.23.130.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 27 May 2011 23:09:24 +0000
Received: from localhost (localhost [127.0.0.1])
	by zig.albert.com (Postfix) with ESMTP id 82DC28062;
	Sat, 28 May 2011 01:09:22 +0200 (CEST)
X-Virus-Scanned: amavisd-new at albert.com
Received: from zig.albert.com ([127.0.0.1])
	by localhost (zig.albert.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id uScCoPS1agzH; Sat, 28 May 2011 01:09:21 +0200 (CEST)
Received: from MacBook-Pro-de-Dominique-Bejean.local (ip-177.net-89-2-82.rev.numericable.fr [89.2.82.177])
	(using TLSv1 with cipher DHE-RSA-CAMELLIA256-SHA (256/256 bits))
	(No client certificate requested)
	by zig.albert.com (Postfix) with ESMTP id 9D5648045;
	Sat, 28 May 2011 01:09:21 +0200 (CEST)
Message-ID: <4DE02F0E.10001@eolya.fr>
Date: Sat, 28 May 2011 01:09:02 +0200
From: Dominique Bejean <dominique.bejean@eolya.fr>
Reply-To: dominique.bejean@eolya.fr
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: ajdabholkar@hotmail.com
Subject: Re: [ANNOUNCE] Web Crawler
References: <4D6D8E6A.10004@eolya.fr> <1305379745166-2937762.post@n3.nabble.com>
In-Reply-To: <1305379745166-2937762.post@n3.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Sorry for the delay, but I haven't been checking the mailing list for a 
long time.

Crawl-anywhere includes 3 piece of software : a crawler, a pipeline and 
a solr indexer.

There is a default Solr schema used by Crawl-anywhere, tested with Solr 
1.4.1 and Solr 3.1.0.

But, you can configure the pipeline stage responsible for mapping 
crawled data to Solr field. IN the absolute, you can use any schema with 
any Solr version.

Regards

Dominique



Le 14/05/11 15:29, abhayd a crit :
> hi Dominique,
>
> I am looking for a crawler to feed solr index. After looking at various
> posts i have settled down on two
> Nutch and crawl anywhere.
>
> I dont see any activities on Nutch wiki so wondering if its not being
> developed anymore. But most forums say Nutch is standard for solr.
>
> Crawl Anywhere looks solid. Any way for users like me to decide which one we
> should go for Nutch or Crawl Anywehre?
>
>
> Concern with crawl anywhere is it supports solr 1.3 index not the latest
> version
>
> Any help on the is really appreciated
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/ANNOUNCE-Web-Crawler-tp2607833p2937762.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun May 29 02:25:25 2011
Return-Path: <java-user-return-49853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 82F2C47B1
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 29 May 2011 02:25:25 +0000 (UTC)
Received: (qmail 86691 invoked by uid 500); 29 May 2011 02:25:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86636 invoked by uid 500); 29 May 2011 02:25:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86627 invoked by uid 99); 29 May 2011 02:25:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 May 2011 02:25:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 29 May 2011 02:25:15 +0000
Received: by qwj9 with SMTP id 9so1925876qwj.35
        for <java-user@lucene.apache.org>; Sat, 28 May 2011 19:24:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type:content-transfer-encoding;
        bh=xWxsb0pLsXvB1NwYLkio60AuOw9x7Bp9cWMDQxI/bOU=;
        b=d1/nZs1Qvr7R8wKlHv7Ej6fZItryYImQCk5mpTmbUYAqFOcOKVXjH2O1o8U39Ycmw6
         +bDtIIcLfHxtT0n8y12j5VMrIQxFLcHgcLCh4R83RPiQVvnuAIwCTD8vnCPUgUQfOhS4
         YncgeU7EIlc/CrFjd5el1O5+Egh4OVyYmLhE4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        b=MYTq4gzF363Xh48UYZq2gJ0CRGXzWmj5JkJGTJpT3mi3Ox93YspnsWPILodRVooqAh
         C7GY4AMVYc26fzweQgUXRGBpxfWGHMeMDxvPHPwRSqqwZdfhS7JwgFdkRCLC8EsiOYzl
         UqJnT80RJNOVw1KdSwBbs6akR8XspSCUe8Mfw=
MIME-Version: 1.0
Received: by 10.229.8.195 with SMTP id i3mr2669109qci.26.1306635892435; Sat,
 28 May 2011 19:24:52 -0700 (PDT)
Received: by 10.229.230.196 with HTTP; Sat, 28 May 2011 19:24:52 -0700 (PDT)
In-Reply-To: <BANLkTi=CRujv6EEN9XLzZxu_HjEJ9z=14A@mail.gmail.com>
References: <BANLkTi=xjCgcy6xcaM3-yQZRmRP+TcexiA@mail.gmail.com>
	<BANLkTi=fvWa0_+1Puws5q2zVxoG7ax1tnw@mail.gmail.com>
	<BANLkTikD39vCoiqZN2Z2y=r7tezgd+Cptw@mail.gmail.com>
	<BANLkTi=CRujv6EEN9XLzZxu_HjEJ9z=14A@mail.gmail.com>
Date: Sat, 28 May 2011 19:24:52 -0700
Message-ID: <BANLkTika-Q8XRmbeBo-k594HxUC6w2ZU7Q@mail.gmail.com>
Subject: Re: QueryParser/StopAnalyzer question
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry, I was at Lucene Revolution, and out of circulation for a while.

I agree with your point that "it depends" (what correct behavior is).
Seems like a lot of Solr/Lucene has that answer...

But as to stop words, the trend lately is to NOT remove them
anyway. The whole stop word issue comes from a long time
ago when disk space was much more dear.

As to how much it increases the index size, I don't have
a clue off the top of my head...

Best
Erick

2011/5/23 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
> Hi Erick,
>
> I think answer to this question depends which hat you put on.
>
> If you put search engine hat (or do similar things in, i.e. Google),
> the results will be the same as what Lucene does at the moment. And
> that's fair enough - getting more results in search engine world is
> almost always better than getting less. Even if a bunch of slightly
> irrelevant results is returned, nobody cares.
>
> But if you put a database hat, the world view suddenly changes. I am
> sure there are plenty of people who use Lucene in situations where
> they need exact matches and any excess results are not desirable.
>
> The root of the evil here is coming from the fact that stopwords are
> not indexed and reasonable defaults have to be assumed in different
> situations. Thinking of this, to return all data for stopword-only
> query would probably be least expected and I don't disagree on your
> argument about the mixed case, too.
>
> This probably leaves me with a single option which is not to use
> stopwords at all, allowing me to get the best of the both worlds. Does
> anyone have any experience on how much of increased index size
> (roughly) can I expect?
>
> Regards,
> Mindaugas
>
> On Mon, May 23, 2011 at 3:13 PM, Erick Erickson <erickerickson@gmail.com>=
 wrote:
>> Hmmm, somehow I missed this days ago....
>>
>> Anyway, the Lucene query parsing process isn't quite Boolean logic.
>> I encourage you to think in terms of "required", "optional", and
>> "prohibited".
>>
>> Both queries are equivalent, to see this try attaching &debugQuery=3Don
>> to your URL and look at the "parsed query" in the debug info....
>>
>> Anyway, to your qestion.
>> +foo:bar +baz:"there is"
>>
>> reads that "bar" must appear in the field "foo". So far so good.
>> But it's also required that baz contain the empty clause, which
>> is different than saying baz must be empty. One can argue that
>> any field contains, by definition, nothing.
>>
>> But imagine the impact of what you're requesting. If all stop words
>> get removed, then no query would ever match yours. Which
>> would be very counter-intuitive IMO. Your users have no clue
>> that you've removed stopwords, so they'll sit there saying "Look, I
>> KNOW that "bar" was in foo and I KNOW that "there is" was in
>> baz, why the heck didn't this cursed system find my doc?
>>
>> Anyway, I don't think you really want this behavior in the
>> stopword removal case. If you can post some use-cases where this
>> would be desirable, maybe we can noodle about a solution....
>>
>> Best
>> Erick
>>
>>
>> 2011/5/23 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
>>> Not much luck so far :(
>>>
>>> Just in case if anyone wants to earn some virtual dosh, I have added
>>> some 50 bonus points to this question on StackOverflow:
>>>
>>> http://stackoverflow.com/questions/6H044061/lucene-query-parsing-behavi=
our-joining-query-parts-with-and
>>>
>>> I also promise to post a solution here if anything satisfactory turns u=
p.
>>>
>>> m.
>>>
>>> 2011/5/17 Mindaugas =C5=BDak=C5=A1auskas <mindas@gmail.com>:
>>>> Hi,
>>>>
>>>> Let's say we have an index having few documents indexed using
>>>> StopAnalyzer.ENGLISH_STOP_WORDS_SET. The user issues two queries:
>>>> 1) foo:bar
>>>> 2) baz:"there is"
>>>>
>>>> Let's assume that the first query yields some results because there
>>>> are documents matching that query.
>>>>
>>>> The second query contains two stopwords ("there" and "is") and yields
>>>> 0 results. The reason for this is because when baz:"there is" is
>>>> parsed, it ends up as a void query as both "there" and "is" are
>>>> stopwords (technically speaking, this is converted to an empty
>>>> BooleanQuery having no clauses). So far so good.
>>>>
>>>> However, any of the following combined queries
>>>>
>>>> +foo:bar +baz:"there is"
>>>> foo:bar AND baz:"there is"
>>>>
>>>> behave exactly the same way as query +foo:bar, that is, brings back
>>>> some results. The second AND part which is supposed to yield no
>>>> results is completely ignored.
>>>>
>>>> One might argue that when ANDing both conditions have to be met, that
>>>> is, documents having foo=3Dbar and baz being empty have to be retrieve=
d,
>>>> as when issued seperately, baz:"there is" yields 0 results.
>>>>
>>>> It seem contradictory as an atomic query component has different
>>>> impact on the overall query depending on the context. Is there any
>>>> logical explanation for this? Can this be addressed in any way,
>>>> preferably without writing own QueryAnalyzer?
>>>>
>>>> If this makes any difference, observed behaviour happens under Lucene =
v3.0.2.
>>>>
>>>> Regards,
>>>> Mindaugas
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 30 06:38:08 2011
Return-Path: <java-user-return-49854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1CECF60DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 30 May 2011 06:38:08 +0000 (UTC)
Received: (qmail 13383 invoked by uid 500); 30 May 2011 06:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13105 invoked by uid 500); 30 May 2011 06:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13097 invoked by uid 99); 30 May 2011 06:37:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 May 2011 06:37:54 +0000
X-ASF-Spam-Status: No, hits=3.7 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of antonyjoseph89@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 May 2011 06:37:47 +0000
Received: by bwz8 with SMTP id 8so4332346bwz.35
        for <java-user@lucene.apache.org>; Sun, 29 May 2011 23:37:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=/25zEzdgXKmUAzkQ0bYeHLp2Gu4DHHvKbMDF/lT8fU8=;
        b=oviMZnPeeECGz+HA7+80HS6cRf0HSlx/DWGdCzwobbr49+FUFSHsRSPXJfFb51Vq63
         3n46lLKkhlPcYnNi1k12kttirOGOHi9GtkGw7bSSBqNcZP+F2nl/X1Yn98qIMpD946rK
         WnV7/dW3hW83A/K4lEhhuoPXhsMWhIoggXWkU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=O7PVqOrbxHho5MqfDwF69d9V7sfm1IWJiwGZBhPJNc+FVe/cfE8R8bF2vlewX4nTRo
         VbYcib0FDbnX1mCaRogiwcfjUixf8e9DaVzuY5zhffnUBtlJszeQpip4urZ+yPSfXkbH
         /YiXmgCcrzaHwbyA8UVqkqrWoGqhm8mdiiecY=
MIME-Version: 1.0
Received: by 10.204.133.27 with SMTP id d27mr3251766bkt.69.1306737445852; Sun,
 29 May 2011 23:37:25 -0700 (PDT)
Received: by 10.204.17.7 with HTTP; Sun, 29 May 2011 23:37:25 -0700 (PDT)
In-Reply-To: <BANLkTinc_S=PAorkcytTdSQsDoVa7-B7qA@mail.gmail.com>
References: <BANLkTinc_S=PAorkcytTdSQsDoVa7-B7qA@mail.gmail.com>
Date: Mon, 30 May 2011 12:07:25 +0530
Message-ID: <BANLkTik2mMva1On=wJx2X2dkQ9=PHyYnaw@mail.gmail.com>
Subject: Re: ImportError: DLL load failed: The specified module could not be found.
From: Antony Joseph <antonyjoseph89@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517477f864655a704a47885b9

--001517477f864655a704a47885b9
Content-Type: text/plain; charset=ISO-8859-1

Hi all ,

Finally i resolved my problem msvcp71.dll was missing.

Thanks,

On 25 May 2011 12:27, Antony Joseph <antonyjoseph89@gmail.com> wrote:

> Hi,
>
> Please help me to resolve this imort error.
>
> Thanks
> Antony
>
> C:\Documents and Settings\Antony>java -version
>
> java version "1.6.0_24"
> Java(TM) SE Runtime Environment (build 1.6.0_24-b07)
> Java HotSpot(TM) Client VM (build 19.1-b02, mixed mode, sharing)
>
> C:\Documents and Settings\Antony\Desktop\Core26>easy_install lucene-2.9.4-py2.6-
>
> win32.egg
> Processing lucene-2.9.4-py2.6-win32.egg
> creating c:\python26\lib\site-packages\lucene-2.9.4-py2.6-win32.egg
> Extracting lucene-2.9.4-py2.6-win32.egg to c:\python26\lib\site-packages
> Adding lucene 2.9.4 to easy-install.pth file
>
> Installed c:\python26\lib\site-packages\lucene-2.9.4-py2.6-win32.egg
> Processing dependencies for lucene==2.9.4
> Finished processing dependencies for lucene==2.9.4
>
> C:\Documents and Settings\Antony\Desktop\Core26>easy_install JCC-2.6-py2.6-win32
>
> .egg
> Processing JCC-2.6-py2.6-win32.egg
> creating c:\python26\lib\site-packages\JCC-2.6-py2.6-win32.egg
> Extracting JCC-2.6-py2.6-win32.egg to c:\python26\lib\site-packages
> Adding JCC 2.6 to easy-install.pth file
>
> Installed c:\python26\lib\site-packages\jcc-2.6-py2.6-win32.egg
> Processing dependencies for JCC==2.6
> Finished processing dependencies for JCC==2.6
>
> C:\Documents and Settings\Antony\Desktop\Core26>python
>
> Python 2.6.6 (r266:84297, Aug 24 2010, 18:46:32) [MSC v.1500 32 bit (Intel)] on
> win32
> Type "help", "copyright", "credits" or "license" for more information.
>
> >>> import lucene
>
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File "C:\Python26\lib\site-packages\lucene-2.9.4-py2.6-win32.egg\lucene\__init
> __.py", line 2, in <module>
>
>     import os, _lucene
> ImportError: DLL load failed: The specified module could not be found.
>
> >>>
>
>
>
>
>

--001517477f864655a704a47885b9--

From java-user-return-49855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 30 15:19:04 2011
Return-Path: <java-user-return-49855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B469688A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 30 May 2011 15:19:04 +0000 (UTC)
Received: (qmail 95582 invoked by uid 500); 30 May 2011 15:19:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94966 invoked by uid 500); 30 May 2011 15:19:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94738 invoked by uid 99); 30 May 2011 15:18:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 May 2011 15:18:59 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jdevgl@gmail.com designates 74.125.82.48 as permitted sender)
Received: from [74.125.82.48] (HELO mail-ww0-f48.google.com) (74.125.82.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 May 2011 15:18:52 +0000
Received: by wwi18 with SMTP id 18so2713827wwi.5
        for <java-user@lucene.apache.org>; Mon, 30 May 2011 08:18:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:content-type:content-transfer-encoding;
        bh=B/5D1tyWuwLmpCQZJlI7p+oZM7VPzqQnjeMEqSm9KR4=;
        b=xMAE1+RCFGWIy5mPZzn1A0tTm0U7DD9MfK+aVQTu+ZbNLZnJU9Cq3KjmozSUL+2sN5
         1MvN1Sv9+LUtMQp5SrJjxvDQx+zmElMCgpx2CfIKsfo3LmUclCvKrXYUvPdHbBDzBUq2
         tmnWzZCtGtrI9MISoZ3EqiKnoSLB3MezDO3hc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject
         :content-type:content-transfer-encoding;
        b=pePU/sRYiE4NLQ+i6C56uFHog5egF4d1lL/Ua3FGOpcC+ObWGKlQY2eUCu6pjE5v8p
         0zgFaaBdedHYMV3hMIfuFnFyQZD2O5P8uLlPz+eP4JfdEuWhHeTSom4Tx6OhMTKnllef
         bd970X8CwS20QHxEAnXzpv3mfF3JJLO6lqgD4=
Received: by 10.227.32.136 with SMTP id c8mr5033705wbd.7.1306768711095;
        Mon, 30 May 2011 08:18:31 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id e1sm3116566wbh.22.2011.05.30.08.18.30
        (version=SSLv3 cipher=OTHER);
        Mon, 30 May 2011 08:18:30 -0700 (PDT)
Message-ID: <4DE3B554.6090009@gmail.com>
Date: Mon, 30 May 2011 17:18:44 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: which analyzer for exact matchs
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hello :)

I'm wondering which Analyzer would be the best to query exact value for 
a property. I read the javadoc and it it said that when a document is 
indexed, I could use the Field.Index.NOT_ANALYZED to store the value as 
is and then I would be able to query for it. But in the same time, I 
need to provide an analyzer for the indexWriter constructor and for my 
queries.

Is it possible to specify that no analyzer should be used for both 
indexing and querying ?

If not, which analyzer would be the best choice?

Thanks for the help :)
Regards.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon May 30 15:25:54 2011
Return-Path: <java-user-return-49856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 51B9A6F07
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 30 May 2011 15:25:54 +0000 (UTC)
Received: (qmail 14253 invoked by uid 500); 30 May 2011 15:25:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14187 invoked by uid 500); 30 May 2011 15:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14179 invoked by uid 99); 30 May 2011 15:25:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 May 2011 15:25:52 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of bmdakshinamurthy@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 30 May 2011 15:25:45 +0000
Received: by vxa37 with SMTP id 37so4254147vxa.35
        for <java-user@lucene.apache.org>; Mon, 30 May 2011 08:25:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=HdihCWR5wcYc55QDzfnV/Ja67R09n08/r21Eb4mOrLw=;
        b=WGizoUmx4YDqiquVSqwPPnajAFOPc3dZHZNd8a+bU3CcWobsbU2B0gYEP2U8Nbv+aA
         D/+uPsv/b/y8Wtjsew6GMx5qy9lwCKETYiSqJmD13rH+dKxSkYZS9L/q6mv7cWMhm4WL
         RZSY9iLZ40aAGVI5skPrU6T/PsvDOsbv3i0s8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=aD+3QQkFVINBnY0gdIMdINnLbGdlWVH+dbihXKJYuACqy76eI32c2+D6FRPxphDNcm
         uI1KaS/4KgLqQjdKD3NPWGVOELIf8s31Zlj2iqSbg9vjrFN81GAZdBCaBNAlw++Ddqnn
         TPuIqqs4hVB6V/k395McElG3EcuwcH3E2auVc=
MIME-Version: 1.0
Received: by 10.52.32.71 with SMTP id g7mr6632802vdi.112.1306769124311; Mon,
 30 May 2011 08:25:24 -0700 (PDT)
Received: by 10.52.158.168 with HTTP; Mon, 30 May 2011 08:25:24 -0700 (PDT)
In-Reply-To: <4DE3B554.6090009@gmail.com>
References: <4DE3B554.6090009@gmail.com>
Date: Mon, 30 May 2011 20:55:24 +0530
Message-ID: <BANLkTi=spxJs8vSX3zgLQBuaCLToJ9pd=g@mail.gmail.com>
Subject: Re: which analyzer for exact matchs
From: "bmdakshinamurthy@gmail.com" <bmdakshinamurthy@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51d26f675414f04a47fe5b1

--bcaec51d26f675414f04a47fe5b1
Content-Type: text/plain; charset=ISO-8859-1

I think you are looking for a keyword analyzer.
http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/analysis/KeywordAnalyzer.html

On Mon, May 30, 2011 at 8:48 PM, G.Long <jdevgl@gmail.com> wrote:

> Hello :)
>
> I'm wondering which Analyzer would be the best to query exact value for a
> property. I read the javadoc and it it said that when a document is indexed,
> I could use the Field.Index.NOT_ANALYZED to store the value as is and then I
> would be able to query for it. But in the same time, I need to provide an
> analyzer for the indexWriter constructor and for my queries.
>
> Is it possible to specify that no analyzer should be used for both indexing
> and querying ?
>
> If not, which analyzer would be the best choice?
>
> Thanks for the help :)
> Regards.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Thanks and Regards,
DakshinaMurthy BM

--bcaec51d26f675414f04a47fe5b1--

From java-user-return-49857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 31 06:56:22 2011
Return-Path: <java-user-return-49857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 11AE44591
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 31 May 2011 06:56:22 +0000 (UTC)
Received: (qmail 17441 invoked by uid 500); 31 May 2011 06:56:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17224 invoked by uid 500); 31 May 2011 06:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 16241 invoked by uid 99); 31 May 2011 06:53:00 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of avaer@avaer.net designates 80.86.82.147 as permitted sender)
Content-Type: text/plain; charset=utf-8; format=flowed; delsp=yes
To: java-user@lucene.apache.org
Date: Tue, 31 May 2011 08:52:18 +0200
Subject: Indexing speed on NTFS
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
From: "Maciej Klimczuk" <avaer@avaer.net>
Message-ID: <op.vwb2pgvxjf2el9@pridelands>
User-Agent: Opera Mail/11.11 (Linux)
Received-SPF: pass
X-SPF-Guess: softfail
X-SA-Score: -1.4

Hello everyone

I did some testing with 3.1.0 demo on Windows and encountered some strange  
bahaviour. I tried to index ~60000 small text documents using the demo.
- First trial took about 18 minutes.
- Second and third trial took about 2 minutes.

I then made another test on other, bigger documents set. I let Lucene  
create index of size 10MB and then aborted the process. This took some  
time and I heared hard drive working (typical "head moving noise"). After  
i aborted the indexing process, I removed the created index. Next, I  
started indexing process from scratch, and it created first 10MB of index  
almost immediately, without disk working (or better described: disk wasn't  
noisy). After that 10MB of index was created, the disk could be heared  
again and index started to grow slower. I repeated this with 30B, 60MB and  
100MB, but all the time I aborted the process and removed index, it was  
recreated to the previous size in a matter of tens of seconds (less than  
minute), and after that it was growing slowly.

How could that be explained? Is there any cache of disk contents in  
Windows or JRE, or...?

If there is a document or site explaining this or it was asked before,  
please forgive me; just searching about Lucene indexing performance on  
NTFS doesn't help me much...

Best regards,
Maciej

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 31 07:30:58 2011
Return-Path: <java-user-return-49858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 086F8405E
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 31 May 2011 07:30:58 +0000 (UTC)
Received: (qmail 68113 invoked by uid 500); 31 May 2011 07:30:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67934 invoked by uid 500); 31 May 2011 07:30:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67923 invoked by uid 99); 31 May 2011 07:30:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 May 2011 07:30:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 May 2011 07:30:45 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Tue, 31 May 2011 09:30:25 +0200
Subject: Re: Indexing speed on NTFS
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <op.vwb2pgvxjf2el9@pridelands>
References: <op.vwb2pgvxjf2el9@pridelands>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Tue, 31 May 2011 09:30:25 +0200
Message-ID: <1306827025.29719.4755.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.28.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2011-05-31 at 08:52 +0200, Maciej Klimczuk wrote:
> I did some testing with 3.1.0 demo on Windows and encountered some strange  
> bahaviour. I tried to index ~60000 small text documents using the demo.
> - First trial took about 18 minutes.
> - Second and third trial took about 2 minutes.

First trial sounds strange, even if the documents are single files and
on a traditional harddisk. The 500 documents/second in the subsequent
trials sounds okay for small documents.

> [...] I repeated this with 30B, 60MB and 100MB, but all the time I
> aborted the process and removed index, it was recreated to the
> previous size in a matter of tens of seconds (less than minute),
> and after that it was growing slowly.

It seems like you have extremely slow read access from your storage and
a small enough data set so that the generated index is still in the
write buffer.

Are you perhaps using Windows XP? It drops back to PIO-mode under some
circumstances and it really hurts performance. You can read about it at
http://winhlp.com/node/10

> If there is a document or site explaining this or it was asked before,  
> please forgive me; just searching about Lucene indexing performance on  
> NTFS doesn't help me much...

There should not be any problems like the one you describe with NTFS.
I have used Windows XP with NTFS myself for a year or two and did not
encounter anything like it.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 31 08:02:55 2011
Return-Path: <java-user-return-49859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 547644151
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 31 May 2011 08:02:55 +0000 (UTC)
Received: (qmail 11394 invoked by uid 500); 31 May 2011 08:02:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10899 invoked by uid 500); 31 May 2011 08:02:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10887 invoked by uid 99); 31 May 2011 08:02:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 May 2011 08:02:46 +0000
X-ASF-Spam-Status: No, hits=1.8 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLY,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jdevgl@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 May 2011 08:02:37 +0000
Received: by bwz8 with SMTP id 8so5596223bwz.35
        for <java-user@lucene.apache.org>; Tue, 31 May 2011 01:02:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:message-id:date:from:user-agent:mime-version:to
         :subject:references:in-reply-to:content-type
         :content-transfer-encoding;
        bh=YkiEeBpmkdY31zDn/0CrcGbULbEQY0PsnWjXaqSlL0k=;
        b=XWoWxfjlzD1Q/E/M8pJzNV/YKgmL79rf7lgxIkByp9S+L6NiPw9l9oJwBnksnn+W+1
         vXLG0qN/RlDDfGWS7EKDA2HSroyCL/m2ljKUXODzWtInkT7LBD/J7xgN9z8fzU0hwoph
         HPkcWX/NVGpWLhBoMZtBp+0MO3VX07zeh2su0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references
         :in-reply-to:content-type:content-transfer-encoding;
        b=MXR312WzTVY03oDqv0aYEc0GeHHY9TRCLusPom5xpw8vnDwAylEcRKpo8qXQC+ZfR4
         H70hhPwEsu3jxvCoY5oWddTOIbFiWNvnVJ8HMXIvPYYwMg/6i6f88swxJoopKAfTGl1L
         7HfKLq4jyjnCp0qqCDX8x01kWCEw4i4klDvio=
Received: by 10.204.164.2 with SMTP id c2mr5389380bky.85.1306828937552;
        Tue, 31 May 2011 01:02:17 -0700 (PDT)
Received: from [192.168.20.14] (LPuteaux-151-41-16-99.w217-128.abo.wanadoo.fr [217.128.31.99])
        by mx.google.com with ESMTPS id x13sm3997116bkj.5.2011.05.31.01.02.16
        (version=SSLv3 cipher=OTHER);
        Tue, 31 May 2011 01:02:17 -0700 (PDT)
Message-ID: <4DE4A097.8070603@gmail.com>
Date: Tue, 31 May 2011 10:02:31 +0200
From: "G.Long" <jdevgl@gmail.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; fr; rv:1.9.2.17) Gecko/20110414 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: which analyzer for exact matchs
References: <4DE3B554.6090009@gmail.com> <BANLkTi=spxJs8vSX3zgLQBuaCLToJ9pd=g@mail.gmail.com>
In-Reply-To: <BANLkTi=spxJs8vSX3zgLQBuaCLToJ9pd=g@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you :)

It seems to work as I wanted to. Now If I want to index content to do 
full-text search, would it be better to choose a standardAnalyzer or a 
more specific one like EnglishAnalyzer or FrenchAnalyzer (assuming the 
content I want to index is only in english or only in french) ?

Regards,

Le 30/05/2011 17:25, bmdakshinamurthy@gmail.com a crit :
> I think you are looking for a keyword analyzer.
> http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/analysis/KeywordAnalyzer.html
>
> On Mon, May 30, 2011 at 8:48 PM, G.Long<jdevgl@gmail.com>  wrote:
>
>> Hello :)
>>
>> I'm wondering which Analyzer would be the best to query exact value for a
>> property. I read the javadoc and it it said that when a document is indexed,
>> I could use the Field.Index.NOT_ANALYZED to store the value as is and then I
>> would be able to query for it. But in the same time, I need to provide an
>> analyzer for the indexWriter constructor and for my queries.
>>
>> Is it possible to specify that no analyzer should be used for both indexing
>> and querying ?
>>
>> If not, which analyzer would be the best choice?
>>
>> Thanks for the help :)
>> Regards.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-49860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue May 31 10:24:31 2011
Return-Path: <java-user-return-49860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 48ADF477F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 31 May 2011 10:24:31 +0000 (UTC)
Received: (qmail 96722 invoked by uid 500); 31 May 2011 10:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96616 invoked by uid 500); 31 May 2011 10:24:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96479 invoked by uid 99); 31 May 2011 10:24:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 May 2011 10:24:28 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,RFC_ABUSE_POST,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of bmdakshinamurthy@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 31 May 2011 10:24:20 +0000
Received: by vws7 with SMTP id 7so4950853vws.35
        for <java-user@lucene.apache.org>; Tue, 31 May 2011 03:23:59 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:mime-version:in-reply-to:references:date
         :message-id:subject:from:to:content-type;
        bh=ATwBZQbSpIwzw0ebR/sTlYbr/qFx6i7dTSE3A5j9SvM=;
        b=cRzS74LPHUmC5fmyYLGLxAITVSCHbLWoumYOnu6UAUAEP1KKQaadH5NP8YPGcHal3T
         TJcUhMhC7FXNHYjvly7y6WnhXzI9lLye8s6nyqgVitmYbWbcr3zKVk7fjlzikzQ6NvUf
         B+JR2GHcmEIcQsVxz/5s8mdBPTCcvPjogT9LA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        b=oki/FknPFgcvElaqWdS/8u1igZ0HF9JlnUY6c9yKT7cI4SCfBoiMgYpP06UqSep8VU
         qTZwgs4VrSb/1+Q1DbJoraGGtfbXLC3c6uaVjdpFtZuPyFQo+mKqPoVj9aG+24CNZTro
         vTF0yw6XweNrb6LYXKvCDzy2tHoK5q5sQfpPc=
MIME-Version: 1.0
Received: by 10.52.179.161 with SMTP id dh1mr5620538vdc.177.1306837439542;
 Tue, 31 May 2011 03:23:59 -0700 (PDT)
Received: by 10.52.166.2 with HTTP; Tue, 31 May 2011 03:23:59 -0700 (PDT)
In-Reply-To: <4DE4A097.8070603@gmail.com>
References: <4DE3B554.6090009@gmail.com>
	<BANLkTi=spxJs8vSX3zgLQBuaCLToJ9pd=g@mail.gmail.com>
	<4DE4A097.8070603@gmail.com>
Date: Tue, 31 May 2011 15:53:59 +0530
Message-ID: <BANLkTi=B7RoUBx7KOxL5DQFnR7HtT9Z3ig@mail.gmail.com>
Subject: Re: which analyzer for exact matchs
From: "bmdakshinamurthy@gmail.com" <bmdakshinamurthy@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51a8e565cf5b104a48fcd2d
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec51a8e565cf5b104a48fcd2d
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I am not very sure about a language specific analyzer. French language has
words seperated by an apostrophe. The standard analyzer does not tokenize
words on an apostrophe. Then there is the case of accented letters. It
depends on how you want to handle these. Are you going to store them as is
or convert them to their acsii equivalents? May be somebody else could thro=
w
some light on this.

On Tue, May 31, 2011 at 1:32 PM, G.Long <jdevgl@gmail.com> wrote:

> Thank you :)
>
> It seems to work as I wanted to. Now If I want to index content to do
> full-text search, would it be better to choose a standardAnalyzer or a mo=
re
> specific one like EnglishAnalyzer or FrenchAnalyzer (assuming the content=
 I
> want to index is only in english or only in french) ?
>
> Regards,
>
> Le 30/05/2011 17:25, bmdakshinamurthy@gmail.com a =E9crit :
>
>  I think you are looking for a keyword analyzer.
>>
>> http://lucene.apache.org/java/3_0_2/api/core/org/apache/lucene/analysis/=
KeywordAnalyzer.html
>>
>> On Mon, May 30, 2011 at 8:48 PM, G.Long<jdevgl@gmail.com>  wrote:
>>
>>  Hello :)
>>>
>>> I'm wondering which Analyzer would be the best to query exact value for=
 a
>>> property. I read the javadoc and it it said that when a document is
>>> indexed,
>>> I could use the Field.Index.NOT_ANALYZED to store the value as is and
>>> then I
>>> would be able to query for it. But in the same time, I need to provide =
an
>>> analyzer for the indexWriter constructor and for my queries.
>>>
>>> Is it possible to specify that no analyzer should be used for both
>>> indexing
>>> and querying ?
>>>
>>> If not, which analyzer would be the best choice?
>>>
>>> Thanks for the help :)
>>> Regards.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--=20
Thanks and Regards,
DakshinaMurthy BM

--bcaec51a8e565cf5b104a48fcd2d--

