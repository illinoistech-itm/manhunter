From lucene-user-return-13435-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 08:43:51 2005
Return-Path: <lucene-user-return-13435-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67191 invoked from network); 1 Mar 2005 08:43:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 08:43:51 -0000
Received: (qmail 66579 invoked by uid 500); 1 Mar 2005 08:43:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66552 invoked by uid 500); 1 Mar 2005 08:43:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66538 invoked by uid 99); 1 Mar 2005 08:43:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 00:43:44 -0800
Received: from stenly (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with SMTP id j218hdHE030311
	for <lucene-user@jakarta.apache.org>; Tue, 1 Mar 2005 10:43:39 +0200
Message-ID: <023801c51e3a$c38ab0f0$d380a8c0@sirma.int>
From: "Stanislav Jordanov" <stenly@sirma.bg>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <421F8DB6.3030306@jCatalog.com> <16930.51341.630394.350033@tanto-xipolis.de> <00d301c51d84$bf531970$d380a8c0@sirma.int> <ceaba1d83560d5f35aad6d3005069481@ehatchersolutions.com> <019801c51dab$c2c746e0$d380a8c0@sirma.int> <d08003cfff6c6ece3420f8f8c97895b0@ehatchersolutions.com>
Subject: Re: Fast access to a random page of the search results.
Date: Tue, 1 Mar 2005 10:43:38 +0200
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0235_01C51E4B.86E65670"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.181
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0235_01C51E4B.86E65670
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

// The test source code (second attempt).
// Just in case the .txt attachment does not pass through
// I am pasting the code here:

package index_test;

import org.apache.lucene.search.*;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.Directory;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import java.io.*;
import java.util.Enumeration;
import java.util.StringTokenizer;
import java.util.ArrayList;

import com.odi.util.query.QueryParseException;

public class Search {
    public static void main(String[] args) throws Exception {
        if (args.length != 1) {
            throw new Exception("Usage: " + Search.class.getName() + "
<index dir>");
        }

        File indexDir = new File(args[0]);

        if (!indexDir.exists() || !indexDir.isDirectory()) {
            throw new Exception(indexDir + " is does not exist or is not a
directory.");
        }

        System.out.println("Using index: " + indexDir.getCanonicalPath());

        BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);
        search(indexDir);
    }

    public static void search(File indexDir)  throws Exception {
        Directory fsDir = FSDirectory.getDirectory(indexDir, false);
        IndexSearcher is = null;
        BufferedReader brdr = new BufferedReader(new
InputStreamReader(System.in));

        String q;
        Sort sort = null;
        while (!(q = brdr.readLine()).equals("exit")) {
            q = q.trim();
            if (is == null || q.equals("newsearcher")) {
                is = new IndexSearcher(fsDir);
                if (q.equals("newsearcher")) {
                    continue;
                }
            }
            if (q.startsWith("sort ")) {
                StringTokenizer tkz = new StringTokenizer(q);
                tkz.nextToken(); // skip the "sort" word
                ArrayList<SortField> sortFields = new
ArrayList<SortField>();
                while (tkz.hasMoreTokens()) {
                    String tok = tkz.nextToken();
                    boolean reverse = false;
                    if (tok.startsWith("-")) {
                        tok = tok.substring(1);
                        reverse = true;
                    }
                    sortFields.add(new SortField(tok, reverse));
                }
                sort = new Sort(sortFields.toArray(new SortField[0]));
                System.out.println("Sorting by " + sort);
                continue;
            }
            if (q.equals("nosort")) {
                sort = null;
                System.out.println("Sorting is off");
                continue;
            }
            long startTs = System.currentTimeMillis();
            Query query = null;
            try {
                query  = QueryParser.parse(q, "qcontent", new
StandardAnalyzer(new String[0]));
            }
            catch (QueryParseException exn) {
                exn.printStackTrace();
                continue;
            }
            Hits hits = (sort != null ? is.search(query, sort) :
is.search(query));
            int nHits = hits.length();//hc.nHits;
            long stopTs  = System.currentTimeMillis();
            System.out.println("Found " + nHits + " document(s) that matched
query '" + q + "'");
            System.out.println("Sorting by " + sort);
            System.out.println("query executed in " + (stopTs - startTs) +
"ms");

            if (nHits > 0) {
                startTs = System.currentTimeMillis();
                dummyMethod(hits.doc(nHits - nHits));
                stopTs = System.currentTimeMillis();
                System.out.println("Last doc accessed in " + (stopTs -
startTs)
                                    + "ms");
            }
        }
    }

    public static double  dummyMethod(Document doc) {
        return doc.getBoost();
    }

    private static void  dumpDocument(Document doc) throws IOException {
        System.out.println("<DOCUMENT-DUMP>");
        for (Enumeration e = doc.fields(); e.hasMoreElements(); ) {
            Field f = (Field) e.nextElement();
            System.out.println(f.name() + " ::>> '" + f.stringValue() +
"'");
        }
        System.out.println("</DOCUMENT-DUMP>");
    }
}

------=_NextPart_000_0235_01C51E4B.86E65670
Content-Type: text/plain;
	name="Search.java.txt"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="Search.java.txt"

package index_test;

import org.apache.lucene.search.*;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.store.Directory;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import java.io.*;
import java.util.Enumeration;
import java.util.StringTokenizer;
import java.util.ArrayList;

import com.odi.util.query.QueryParseException;

public class Search {
    public static void main(String[] args) throws Exception {
        if (args.length !=3D 1) {
            throw new Exception("Usage: " + Search.class.getName() + " =
<index dir>");
        }

        File indexDir =3D new File(args[0]);

        if (!indexDir.exists() || !indexDir.isDirectory()) {
            throw new Exception(indexDir + " is does not exist or is not =
a directory.");
        }

        System.out.println("Using index: " + =
indexDir.getCanonicalPath());

        BooleanQuery.setMaxClauseCount(Integer.MAX_VALUE);
        search(indexDir);
    }

    public static void search(File indexDir)  throws Exception {
        Directory fsDir =3D FSDirectory.getDirectory(indexDir, false);
        IndexSearcher is =3D null;
        BufferedReader brdr =3D new BufferedReader(new =
InputStreamReader(System.in));

        String q;
        Sort sort =3D null;
        while (!(q =3D brdr.readLine()).equals("exit")) {
            q =3D q.trim();
            if (is =3D=3D null || q.equals("newsearcher")) {
                is =3D new IndexSearcher(fsDir);
                if (q.equals("newsearcher")) {
                    continue;
                }
            }
            if (q.startsWith("sort ")) {
                StringTokenizer tkz =3D new StringTokenizer(q);
                tkz.nextToken(); // skip the "sort" word
                ArrayList<SortField> sortFields =3D new =
ArrayList<SortField>();
                while (tkz.hasMoreTokens()) {
                    String tok =3D tkz.nextToken();
                    boolean reverse =3D false;
                    if (tok.startsWith("-")) {
                        tok =3D tok.substring(1);
                        reverse =3D true;
                    }
                    sortFields.add(new SortField(tok, reverse));
                }
                sort =3D new Sort(sortFields.toArray(new SortField[0]));
                System.out.println("Sorting by " + sort);
                continue;
            }
            if (q.equals("nosort")) {
                sort =3D null;
                System.out.println("Sorting is off");
                continue;
            }
            long startTs =3D System.currentTimeMillis();
            Query query =3D null;
            try {
                query  =3D QueryParser.parse(q, "qcontent", new =
StandardAnalyzer(new String[0]));
            }
            catch (QueryParseException exn) {
                exn.printStackTrace();
                continue;
            }
            Hits hits =3D (sort !=3D null ? is.search(query, sort) : =
is.search(query));
            int nHits =3D hits.length();//hc.nHits;
            long stopTs  =3D System.currentTimeMillis();
            System.out.println("Found " + nHits + " document(s) that =
matched query '" + q + "'");
            System.out.println("Sorting by " + sort);
            System.out.println("query executed in " + (stopTs - startTs) =
+ "ms");

            if (nHits > 0) {
                startTs =3D System.currentTimeMillis();
                dummyMethod(hits.doc(nHits - nHits));
                stopTs =3D System.currentTimeMillis();
                System.out.println("Last doc accessed in " + (stopTs - =
startTs)
                                    + "ms");
            }
        }
    }

    public static double  dummyMethod(Document doc) {
        return doc.getBoost();
    }

    private static void  dumpDocument(Document doc) throws IOException {
        System.out.println("<DOCUMENT-DUMP>");
        for (Enumeration e =3D doc.fields(); e.hasMoreElements(); ) {
            Field f =3D (Field) e.nextElement();
            System.out.println(f.name() + " ::>> '" + f.stringValue() + =
"'");
        }
        System.out.println("</DOCUMENT-DUMP>");
    }
}


------=_NextPart_000_0235_01C51E4B.86E65670
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_0235_01C51E4B.86E65670--


From lucene-user-return-13436-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 09:45:09 2005
Return-Path: <lucene-user-return-13436-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97088 invoked from network); 1 Mar 2005 09:45:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 09:45:09 -0000
Received: (qmail 62539 invoked by uid 500); 1 Mar 2005 09:45:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62381 invoked by uid 500); 1 Mar 2005 09:45:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43088 invoked by uid 99); 1 Mar 2005 09:36:03 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_90_100,HTML_MESSAGE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: "Jon Humble" <jon.humble@tecsphere.com>
To: <lucene-user@jakarta.apache.org>
Subject: Questions about GermanAnalyzer/Stemmer
Date: Tue, 1 Mar 2005 09:35:33 -0000
Message-ID: <000001c51e42$07a6e4a0$c501a8c0@holmes>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0001_01C51E42.07A6E4A0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2742.200
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:b7d145b28090e0997197a717b934cb1b
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0001_01C51E42.07A6E4A0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
We=92re using the GermanAnalyzer/Stemmer to index/search our (German)
Website.
I have a few questions:
=20
(1)     Why is the GermanAnalyzer case-sensitive? None of the other
language indexers seem to be. What does this feature add?
(2)     With the German Analyzer, wildcard searches containing extended
German characters do not seem to work. So, a* is fine but an=E4* or =F6*
always find zero results.=20
(3)     In a similar vein to (2), wildcard searches with escaped special
characters fail to find results. So a search for co\-operative works but
a search for co\-op* fails.
=20
I will be grateful for any light that can be shed on these problems.
=20
With Thanks,
=20
Jon.
=20
Jon Humble
BSc (hons,)
Software Engineer
eMail: jon.humble@tecsphere.com

TecSphere Ltd
Centre for Advanced Industry
Coble Dene, Royal Quays
Newcastle upon Tyne NE29 6DE
United Kingdom
=20
Direct Dial: +44 (191) 270 31 06
Fax: +44 (191) 270 31 09
http://www.tecsphere.com
=20
=20

------=_NextPart_000_0001_01C51E42.07A6E4A0--


From lucene-user-return-13437-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 11:21:06 2005
Return-Path: <lucene-user-return-13437-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46983 invoked from network); 1 Mar 2005 11:21:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 11:21:05 -0000
Received: (qmail 94785 invoked by uid 500); 1 Mar 2005 11:21:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94762 invoked by uid 500); 1 Mar 2005 11:20:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94747 invoked by uid 99); 1 Mar 2005 11:20:59 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 03:20:59 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id 4F586858F2
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 13:20:56 +0200 (EET)
Message-ID: <42245018.50201@i-hypergrid.com>
Date: Tue, 01 Mar 2005 13:20:56 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Is IndexSearcher thread safe?
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is it thread-safe to share one
instance of IndexSearcher between multiple threads?


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13438-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 11:57:17 2005
Return-Path: <lucene-user-return-13438-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62255 invoked from network); 1 Mar 2005 11:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 11:57:17 -0000
Received: (qmail 31664 invoked by uid 500); 1 Mar 2005 11:57:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31639 invoked by uid 500); 1 Mar 2005 11:57:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31623 invoked by uid 99); 1 Mar 2005 11:57:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 03:57:13 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id 5D91587313
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 13:57:03 +0200 (EET)
Message-ID: <4224588E.8040808@i-hypergrid.com>
Date: Tue, 01 Mar 2005 13:57:02 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Is IndexSearcher thread safe?
References: <42245018.50201@i-hypergrid.com>
In-Reply-To: <42245018.50201@i-hypergrid.com>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Additional question.
If I'm sharing one instance of IndexSearcher between different threads 
Is it good to just to drop this instance to GC.
Because I don't know if some thread is still using this searcher or done 
with it.

Regards,
Volodymyr Bychkoviak


Volodymyr Bychkoviak wrote:

> Is it thread-safe to share one
> instance of IndexSearcher between multiple threads?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13439-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 12:11:24 2005
Return-Path: <lucene-user-return-13439-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68852 invoked from network); 1 Mar 2005 12:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 12:11:24 -0000
Received: (qmail 48971 invoked by uid 500); 1 Mar 2005 12:11:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48634 invoked by uid 500); 1 Mar 2005 12:11:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90377 invoked by uid 99); 1 Mar 2005 11:19:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
In-Reply-To: <000001c51e42$07a6e4a0$c501a8c0@holmes>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Questions about GermanAnalyzer/Stemmer [auf Viren geprueft]
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
From: "Jonathan O'Connor" <jonathan.oconnor@xcom.de>
Message-ID: <OF738D1379.94B2B1D3-ON80256FB7.003B51BF-80256FB7.003E2588@xcom.de>
Date: Tue, 1 Mar 2005 12:18:55 +0100
X-MIMETrack: Serialize by Router on xgate1/SRV/XCOM(Release 6.5.2FP1|November 14, 2004) at
 01.03.2005 12:18:57,
	Serialize complete at 01.03.2005 12:18:57
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jon,
I too found some problems with the German analyser recently. Here's what 
may help:
1. You can try reading Joerg Caumanns' paper "A Fast and Simple Stemming 
Algorithm for German Words". This paper describes the algorithm 
implemented by GermanAnalyser.
2. I guess German nouns all capitalized, so maybe that's why. Although you 
would want to be indexing well written German and not emails or text 
messages!
3. The German Stemmer converts umlauts into some funny form (the code is a 
bit tricky, and I didn't spend any time looking at it), so maybe thats why 
you can't find umlauts properly. I think the main reason for this umlaut 
change is that many plurals are formed by umlauting: E.g. Haus, Haeuser 
(that ae is a umlaut).

Finally, to really understand what's happening, get your hands on Luke. I 
just got it last week, and its brilliant. It shows you everything about 
your indexes. You can also feed text to an Analyser, and see what it makes 
of it. This will show you the real reason why your umlaut search is 
failing.
Ciao,
Jonathan O'Connor
XCOM Dublin



"Jon Humble" <jon.humble@tecsphere.com> 
01/03/2005 09:35
Please respond to
"Lucene Users List" <lucene-user@jakarta.apache.org>


To
<lucene-user@jakarta.apache.org>
cc

Subject
Questions about GermanAnalyzer/Stemmer [auf Viren geprueft]






Hello,
 
We=3Fre using the GermanAnalyzer/Stemmer to index/search our (German)
Website.
I have a few questions:
 
(1)     Why is the GermanAnalyzer case-sensitive=3F None of the other
language indexers seem to be. What does this feature add=3F
(2)     With the German Analyzer, wildcard searches containing extended
German characters do not seem to work. So, a* is fine but an=E4* or =F6*
always find zero results. 
(3)     In a similar vein to (2), wildcard searches with escaped special
characters fail to find results. So a search for co\-operative works but
a search for co\-op* fails.
 
I will be grateful for any light that can be shed on these problems.
 
With Thanks,
 
Jon.
 
Jon Humble
BSc (hons,)
Software Engineer
eMail: jon.humble@tecsphere.com

TecSphere Ltd
Centre for Advanced Industry
Coble Dene, Royal Quays
Newcastle upon Tyne NE29 6DE
United Kingdom
 
Direct Dial: +44 (191) 270 31 06
Fax: +44 (191) 270 31 09
http://www.tecsphere.com
 
 




*** Aktuelle Veranstaltungen der XCOM AG ***

XCOM laedt ein zur IBM Workplace Roadshow in Berlin (02.03.2005)
Anmeldung und Information unter http://lotus.xcom.de/events

Workshop-Reihe "Mobilisierung von Lotus Notes Applikationen"  in Berlin (05.=
03.2005) 
Anmeldung und Information unter http://lotus.xcom.de/events


*** XCOM AG Legal Disclaimer ***

Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und ist allein f=
=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt. Dritten ist da=
s Lesen, Verteilen oder Weiterleiten dieser E-Mail untersagt. Wir bitten, ei=
ne fehlgeleitete E-Mail unverzueglich vollstaendig zu loeschen und uns eine =
Nachricht zukommen zu lassen.

This email may contain material that is confidential and for the sole use of=
 the intended recipient. Any review, distribution by others or forwarding wi=
thout express permission is strictly prohibited. If you are not the intended=
 recipient, please contact the sender and delete all copies.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13440-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 12:16:52 2005
Return-Path: <lucene-user-return-13440-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71809 invoked from network); 1 Mar 2005 12:16:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 12:16:51 -0000
Received: (qmail 62653 invoked by uid 500); 1 Mar 2005 12:16:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62632 invoked by uid 500); 1 Mar 2005 12:16:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62619 invoked by uid 99); 1 Mar 2005 12:16:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 04:16:43 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9E0BD13E2135; Tue,  1 Mar 2005 07:16:39 -0500 (EST)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 9608013E2134
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 07:16:07 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <OF738D1379.94B2B1D3-ON80256FB7.003B51BF-80256FB7.003E2588@xcom.de>
References: <OF738D1379.94B2B1D3-ON80256FB7.003B51BF-80256FB7.003E2588@xcom.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <31cbfa39d996b87fd6e097fc08d865ad@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Questions about GermanAnalyzer/Stemmer [auf Viren geprueft]
Date: Tue, 1 Mar 2005 07:16:04 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I had to moderate both Jonathan and Jon's messages in to the list. =20
Please subscribe to the list and post to it with the address you've=20
subscribed.  I cannot always guarantee I'll catch moderation messages=20
and send them through in a timely fashion.

	Erik

On Mar 1, 2005, at 6:18 AM, Jonathan O'Connor wrote:

> Jon,
> I too found some problems with the German analyser recently. Here's=20
> what
> may help:
> 1. You can try reading Joerg Caumanns' paper "A Fast and Simple=20
> Stemming
> Algorithm for German Words". This paper describes the algorithm
> implemented by GermanAnalyser.
> 2. I guess German nouns all capitalized, so maybe that's why. Although=20=

> you
> would want to be indexing well written German and not emails or text
> messages!
> 3. The German Stemmer converts umlauts into some funny form (the code=20=

> is a
> bit tricky, and I didn't spend any time looking at it), so maybe thats=20=

> why
> you can't find umlauts properly. I think the main reason for this=20
> umlaut
> change is that many plurals are formed by umlauting: E.g. Haus, =
Haeuser
> (that ae is a umlaut).
>
> Finally, to really understand what's happening, get your hands on=20
> Luke. I
> just got it last week, and its brilliant. It shows you everything =
about
> your indexes. You can also feed text to an Analyser, and see what it=20=

> makes
> of it. This will show you the real reason why your umlaut search is
> failing.
> Ciao,
> Jonathan O'Connor
> XCOM Dublin
>
>
>
> "Jon Humble" <jon.humble@tecsphere.com>
> 01/03/2005 09:35
> Please respond to
> "Lucene Users List" <lucene-user@jakarta.apache.org>
>
>
> To
> <lucene-user@jakarta.apache.org>
> cc
>
> Subject
> Questions about GermanAnalyzer/Stemmer [auf Viren geprueft]
>
>
>
>
>
>
> Hello,
>
> We?re using the GermanAnalyzer/Stemmer to index/search our (German)
> Website.
> I have a few questions:
>
> (1)     Why is the GermanAnalyzer case-sensitive? None of the other
> language indexers seem to be. What does this feature add?
> (2)     With the German Analyzer, wildcard searches containing =
extended
> German characters do not seem to work. So, a* is fine but an=E4* or =F6*=

> always find zero results.
> (3)     In a similar vein to (2), wildcard searches with escaped=20
> special
> characters fail to find results. So a search for co\-operative works=20=

> but
> a search for co\-op* fails.
>
> I will be grateful for any light that can be shed on these problems.
>
> With Thanks,
>
> Jon.
>
> Jon Humble
> BSc (hons,)
> Software Engineer
> eMail: jon.humble@tecsphere.com
>
> TecSphere Ltd
> Centre for Advanced Industry
> Coble Dene, Royal Quays
> Newcastle upon Tyne NE29 6DE
> United Kingdom
>
> Direct Dial: +44 (191) 270 31 06
> Fax: +44 (191) 270 31 09
> http://www.tecsphere.com
>
>
>
>
>
>
> *** Aktuelle Veranstaltungen der XCOM AG ***
>
> XCOM laedt ein zur IBM Workplace Roadshow in Berlin (02.03.2005)
> Anmeldung und Information unter http://lotus.xcom.de/events
>
> Workshop-Reihe "Mobilisierung von Lotus Notes Applikationen"  in=20
> Berlin (05.03.2005)
> Anmeldung und Information unter http://lotus.xcom.de/events
>
>
> *** XCOM AG Legal Disclaimer ***
>
> Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und ist=20
> allein f=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt.=20=

> Dritten ist das Lesen, Verteilen oder Weiterleiten dieser E-Mail=20
> untersagt. Wir bitten, eine fehlgeleitete E-Mail unverzueglich=20
> vollstaendig zu loeschen und uns eine Nachricht zukommen zu lassen.
>
> This email may contain material that is confidential and for the sole=20=

> use of the intended recipient. Any review, distribution by others or=20=

> forwarding without express permission is strictly prohibited. If you=20=

> are not the intended recipient, please contact the sender and delete=20=

> all copies.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13441-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 13:17:16 2005
Return-Path: <lucene-user-return-13441-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99487 invoked from network); 1 Mar 2005 13:17:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 13:17:16 -0000
Received: (qmail 38496 invoked by uid 500); 1 Mar 2005 13:17:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38451 invoked by uid 500); 1 Mar 2005 13:17:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24088 invoked by uid 99); 1 Mar 2005 13:07:55 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=RehG2+a1M0PIWc0zMoPuf4+PDBhYKoPUsTj3w4p1iPapGl/itq4OlLzyOzO1HO45oBw10PozKMczeZPuareyNyehgw/y+zH9EVwKSVXZRK9BahW+39mZoZago85TLpKRbFy7ZyItlbfzyVONWfqOzgnMfurFE5rieWv3OBaGkMA=  ;
Message-ID: <20050301130751.57149.qmail@web54606.mail.yahoo.com>
Date: Tue, 1 Mar 2005 05:07:51 -0800 (PST)
From: <tomsdepot-lucene@yahoo.com>
Reply-To: tomsdepot-lucene@yahoo.com
Subject: Re: Custom filters & document numbers
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <010c01c51a7c$ebaa98a0$d380a8c0@sirma.int>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm also interested in knowing what can change the doc numbers.

Does this happen frequently?  Like Stanislav has been asking... what sort of
operations on the index cause the document number to change for any given
document?  If the document numbers change frequently, is there a
straightforward way to modify Lucene to keep the document numbers the same for
the life of the document?  I'd like to have mappings in my sql database that
point to the document numbers that Lucene search returns in its Hits objects.

Thanks,

-Tom-

--- Stanislav Jordanov <stenly@sirma.bg> wrote:

> The first statement is clear to me:
> I know that an IndexReader sees a 'snapshot' of the document set that was
> taken in the moment of the Reader's creation.
> 
> What I don't know is whether this 'snapshot' has also its doc numbers fixed
> or they may change asynchronously.
> And another thing I don't know is what are the index operations that may
> cause the (doc -> doc number) mapping to change.
> Is it only after delete or there are other ocasions, or I'd better not count
> on this at all.
> 
> StJ
> 
> ----- Original Message ----- 
> From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, February 24, 2005 4:07 PM
> Subject: RE: Custom filters & document numbers
> 
> 
> > An IndexReader will always see the same set of documents.
> > Even if another process deletes some documents, adds new ones or
> > optimizes the complete index, your IndexReader instance will not see
> > those changes.
> >
> > If you detect that the Lucene index changed (e.g. by calling
> > IndexReader.getCurrentVersion(...) once in a while), you should close
> > and reopen your 'current' IndexReader and recalculate any data that
> > relies on the Lucene document numbers.
> >
> > Regards, Luc.
> >
> > -----Original Message-----
> > From: Stanislav Jordanov [mailto:stenly@sirma.bg]
> > Sent: donderdag 24 februari 2005 14:18
> > To: Lucene Users List
> > Subject: Custom filters & document numbers
> >
> > Given an IndexReader a custom filter is supposed to create a bit set,
> > that maps each document numbers to {'visible', 'invisible'} On the other
> > hand, it is stated that Lucene is allowed to change document numbers.
> > Is it guaranteed that this BitSet's view of document numbers won't
> > change while the BitSet is still in use (or perhaps the corresponding
> > IndexReader is still opened) ?
> >
> > And another (more low-level) question.
> > When Lucene may change document numbers?
> > Is it only when the index is optimized after there has been a delete
> > operation?
> >
> > Regards: StJ
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13442-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 13:38:09 2005
Return-Path: <lucene-user-return-13442-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9579 invoked from network); 1 Mar 2005 13:38:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 13:38:09 -0000
Received: (qmail 73812 invoked by uid 500); 1 Mar 2005 13:38:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72927 invoked by uid 500); 1 Mar 2005 13:38:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72912 invoked by uid 99); 1 Mar 2005 13:38:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from artishost.net (HELO artisangel.artishost.net) (69.56.132.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 05:38:05 -0800
Received: from [81.25.38.241] (helo=[81.25.38.241])
	by artisangel.artishost.net with esmtpa (Exim 4.43)
	id 1D67ZU-0003RR-RQ; Tue, 01 Mar 2005 07:37:58 -0600
Date: Tue, 1 Mar 2005 15:37:47 +0200
From: Yura Smolsky <info@altervision.biz>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Yura Smolsky <info@altervision.biz>
Organization: AlterVision Web Development Group
X-Priority: 3 (Normal)
Message-ID: <1708854623.20050301153747@altervision.biz>
To: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
CC: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re[2]: Is IndexSearcher thread safe?
In-Reply-To: <4224588E.8040808@i-hypergrid.com>
References: <42245018.50201@i-hypergrid.com> <4224588E.8040808@i-hypergrid.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - artisangel.artishost.net
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - altervision.biz
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello, Volodymyr.

VB> Additional question.
VB> If I'm sharing one instance of IndexSearcher between different threads
VB> Is it good to just to drop this instance to GC.
VB> Because I don't know if some thread is still using this searcher or done
VB> with it.

It is safe to share one instance between many threads and it should be
safe to drop old object to GC.

But I have discovered one strange fact. When you have indexSearcher on
big index, so IndexSearcher object takes a lot of memory (900Mb) and
when you create new IndexSearcher after deletion of all references to
old IndexSearcher then memory consumed my old IndexSearcher will not be
ever freed.
What can community answer on this strange fact?

Yura Smolsky.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13443-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 14:08:04 2005
Return-Path: <lucene-user-return-13443-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28318 invoked from network); 1 Mar 2005 14:08:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 14:08:03 -0000
Received: (qmail 29129 invoked by uid 500); 1 Mar 2005 14:07:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29112 invoked by uid 500); 1 Mar 2005 14:07:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29099 invoked by uid 99); 1 Mar 2005 14:07:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns.xgroup.de (HELO salt.xgroup.de) (62.192.192.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 06:07:56 -0800
Received: from xgate1.xcom.de (62.192.192.130.xcom.de [62.192.192.130])
	by salt.xgroup.de (8.11.6/8.11.6) with ESMTP id j21E7r127309
	for <lucene-user@jakarta.apache.org>; Tue, 1 Mar 2005 15:07:53 +0100
In-Reply-To: <31cbfa39d996b87fd6e097fc08d865ad@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Questions about GermanAnalyzer/Stemmer [auf Viren geprueft]
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
From: "Jonathan O'Connor" <jonathan.oconnor@xcom.de>
Message-ID: <OF1E5D38C9.E15C9240-ON80256FB7.004A5B1E-80256FB7.004D9D1F@xcom.de>
Date: Tue, 1 Mar 2005 14:07:51 +0000
X-MIMETrack: Serialize by Router on xgate1/SRV/XCOM(Release 6.5.2FP1|November 14, 2004) at
 01.03.2005 15:07:52,
	Serialize complete at 01.03.2005 15:07:52
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Apologies Erik,
This must be one of those apostrophe in email address problems I always 
get. Recently I removed the apostrophe from the email address I give out.
Our server recognizes both email addresses, but some of these mail lists 
don't like the O'Connor clann!
Ciao,
Jonathan O'Connor
XCOM Dublin



Erik Hatcher <erik@ehatchersolutions.com> 
01/03/2005 12:16
Please respond to
"Lucene Users List" <lucene-user@jakarta.apache.org>


To
"Lucene Users List" <lucene-user@jakarta.apache.org>
cc

Subject
Re: Questions about GermanAnalyzer/Stemmer [auf Viren geprueft]






I had to moderate both Jonathan and Jon's messages in to the list. 
Please subscribe to the list and post to it with the address you've 
subscribed.  I cannot always guarantee I'll catch moderation messages 
and send them through in a timely fashion.

                 Erik

On Mar 1, 2005, at 6:18 AM, Jonathan O'Connor wrote:

> Jon,
> I too found some problems with the German analyser recently. Here's 
> what
> may help:
> 1. You can try reading Joerg Caumanns' paper "A Fast and Simple 
> Stemming
> Algorithm for German Words". This paper describes the algorithm
> implemented by GermanAnalyser.
> 2. I guess German nouns all capitalized, so maybe that's why. Although 
> you
> would want to be indexing well written German and not emails or text
> messages!
> 3. The German Stemmer converts umlauts into some funny form (the code 
> is a
> bit tricky, and I didn't spend any time looking at it), so maybe thats 
> why
> you can't find umlauts properly. I think the main reason for this 
> umlaut
> change is that many plurals are formed by umlauting: E.g. Haus, Haeuser
> (that ae is a umlaut).
>
> Finally, to really understand what's happening, get your hands on 
> Luke. I
> just got it last week, and its brilliant. It shows you everything about
> your indexes. You can also feed text to an Analyser, and see what it 
> makes
> of it. This will show you the real reason why your umlaut search is
> failing.
> Ciao,
> Jonathan O'Connor
> XCOM Dublin
>
>
>
> "Jon Humble" <jon.humble@tecsphere.com>
> 01/03/2005 09:35
> Please respond to
> "Lucene Users List" <lucene-user@jakarta.apache.org>
>
>
> To
> <lucene-user@jakarta.apache.org>
> cc
>
> Subject
> Questions about GermanAnalyzer/Stemmer [auf Viren geprueft]
>
>
>
>
>
>
> Hello,
>
> We=3Fre using the GermanAnalyzer/Stemmer to index/search our (German)
> Website.
> I have a few questions:
>
> (1)     Why is the GermanAnalyzer case-sensitive=3F None of the other
> language indexers seem to be. What does this feature add=3F
> (2)     With the German Analyzer, wildcard searches containing extended
> German characters do not seem to work. So, a* is fine but an=E4* or =F6*
> always find zero results.
> (3)     In a similar vein to (2), wildcard searches with escaped 
> special
> characters fail to find results. So a search for co\-operative works 
> but
> a search for co\-op* fails.
>
> I will be grateful for any light that can be shed on these problems.
>
> With Thanks,
>
> Jon.
>
> Jon Humble
> BSc (hons,)
> Software Engineer
> eMail: jon.humble@tecsphere.com
>
> TecSphere Ltd
> Centre for Advanced Industry
> Coble Dene, Royal Quays
> Newcastle upon Tyne NE29 6DE
> United Kingdom
>
> Direct Dial: +44 (191) 270 31 06
> Fax: +44 (191) 270 31 09
> http://www.tecsphere.com
>
>
>
>
>
>
> *** Aktuelle Veranstaltungen der XCOM AG ***
>
> XCOM laedt ein zur IBM Workplace Roadshow in Berlin (02.03.2005)
> Anmeldung und Information unter http://lotus.xcom.de/events
>
> Workshop-Reihe "Mobilisierung von Lotus Notes Applikationen"  in 
> Berlin (05.03.2005)
> Anmeldung und Information unter http://lotus.xcom.de/events
>
>
> *** XCOM AG Legal Disclaimer ***
>
> Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und ist 
> allein f=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt. 
> Dritten ist das Lesen, Verteilen oder Weiterleiten dieser E-Mail 
> untersagt. Wir bitten, eine fehlgeleitete E-Mail unverzueglich 
> vollstaendig zu loeschen und uns eine Nachricht zukommen zu lassen.
>
> This email may contain material that is confidential and for the sole 
> use of the intended recipient. Any review, distribution by others or 
> forwarding without express permission is strictly prohibited. If you 
> are not the intended recipient, please contact the sender and delete 
> all copies.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





*** Aktuelle Veranstaltungen der XCOM AG ***

XCOM laedt ein zur IBM Workplace Roadshow in Berlin (02.03.2005)
Anmeldung und Information unter http://lotus.xcom.de/events

Workshop-Reihe "Mobilisierung von Lotus Notes Applikationen"  in Berlin (05.=
03.2005) 
Anmeldung und Information unter http://lotus.xcom.de/events


*** XCOM AG Legal Disclaimer ***

Diese E-Mail einschliesslich ihrer Anhaenge ist vertraulich und ist allein f=
=FCr den Gebrauch durch den vorgesehenen Empfaenger bestimmt. Dritten ist da=
s Lesen, Verteilen oder Weiterleiten dieser E-Mail untersagt. Wir bitten, ei=
ne fehlgeleitete E-Mail unverzueglich vollstaendig zu loeschen und uns eine =
Nachricht zukommen zu lassen.

This email may contain material that is confidential and for the sole use of=
 the intended recipient. Any review, distribution by others or forwarding wi=
thout express permission is strictly prohibited. If you are not the intended=
 recipient, please contact the sender and delete all copies.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13444-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 14:12:19 2005
Return-Path: <lucene-user-return-13444-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31062 invoked from network); 1 Mar 2005 14:12:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 14:12:19 -0000
Received: (qmail 43234 invoked by uid 500); 1 Mar 2005 14:12:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43194 invoked by uid 500); 1 Mar 2005 14:12:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43149 invoked by uid 99); 1 Mar 2005 14:12:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 06:12:04 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: help with boolean expression
Date: Tue, 1 Mar 2005 09:12:01 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA01082996@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: help with boolean expression
thread-index: AcUdaJ8GygAJ4+qdQwexKm+ik52kngA/yVxw
From: "Omar Didi" <odidi@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I found something kind fo weird about the way lucene interprets boolean =
expressions wihout parenthesis.
when i run the query A AND B OR C, it returns only the documents that =
have A(in other words as if the query was just the term A).=20
when I run the query A OR B AND C, it returns only the documents that =
have B AND C(as if teh query was just B AND C ). I set the default =
operator in my application to be AND.=20
can anyone explain this behavior, thanks.

-----Original Message-----
From: Morus Walter [mailto:morus.walter@tanto.de]
Sent: Monday, February 28, 2005 2:40 AM
To: Lucene Users List
Subject: Re: help with boolean expression


Omar Didi writes:
> I have a problem understanding how would lucene iterpret this boolean =
expression : A AND B OR C .
> it neither return the same count as when I enter (A AND B) OR C nor A =
AND (B OR C).=20
> if anyone knows how it is interpreted i would be thankful.
> thanks

A AND B OR C creates a query that requires A and B. C influcenes the=20
score, but is neither sufficient nor required for a match.

IMO query parser is broken for queries mixing AND and OR without =
explicit
braces.
My favorite sample is `a AND b OR c AND d' which equals `a AND b AND c =
AND d'
in query parser.

I suggested a patch some time ago, but it's still pending in bugzilla.
http://issues.apache.org/bugzilla/show_bug.cgi?id=3D25820

Don't know if it's still usable with current sources.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13445-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 14:28:42 2005
Return-Path: <lucene-user-return-13445-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57683 invoked from network); 1 Mar 2005 14:28:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 14:28:42 -0000
Received: (qmail 89769 invoked by uid 500); 1 Mar 2005 14:28:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89631 invoked by uid 500); 1 Mar 2005 14:28:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89615 invoked by uid 99); 1 Mar 2005 14:28:36 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from koutmail.amdocs.com (HELO koutmail.amdocs.com) (212.179.127.169)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 06:28:34 -0800
Received: from omail2.amdocs.com ([212.179.127.133])
	by koutmail.amdocs.com (8.12.11/8.12.9) with ESMTP id j21EGIgP009009
	for <lucene-user@jakarta.apache.org>; Tue, 1 Mar 2005 16:16:18 +0200
Received: from tlvmail7.corp.amdocs.com (localhost.localdomain [127.0.0.1])
	by omail2.amdocs.com (8.12.11/8.12.11) with ESMTP id j21GRt7E014794
	for <lucene-user@jakarta.apache.org>; Tue, 1 Mar 2005 18:27:55 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C51E6A.E37C74AD"
Subject: Remove document fails
Date: Tue, 1 Mar 2005 16:28:06 +0200
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Remove document fails
Thread-Index: AcUeauKvLaEwdOwdQ+SEhzHtQO6MLw==
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C51E6A.E37C74AD
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,
I have a problem doing IndexReader.delete(int doc)
and it fails on lock error.
=0D
=0D

Alex Kiselevski=0D

+9.729.776.4346 (desk)
+9.729.776.1504 (fax)

AMDOCS > INTEGRATED CUSTOMER MANAGEMENT

=0D


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.
------_=_NextPart_001_01C51E6A.E37C74AD--

From lucene-user-return-13446-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 14:29:34 2005
Return-Path: <lucene-user-return-13446-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58149 invoked from network); 1 Mar 2005 14:29:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 14:29:34 -0000
Received: (qmail 91791 invoked by uid 500); 1 Mar 2005 14:29:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91766 invoked by uid 500); 1 Mar 2005 14:29:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91752 invoked by uid 99); 1 Mar 2005 14:29:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from outbound1.z-ptx-11.fr.sopragroup.com (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 06:29:27 -0800
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id j21ETLc0017128
          for <lucene-user@jakarta.apache.org>; Tue, 1 Mar 2005 15:29:23 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="Windows-1251"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Is IndexSearcher thread safe?
Date: Tue, 1 Mar 2005 15:29:20 +0100
Message-ID: <F19E1B11985F2C4E902091B6901CDEFB477C05@wexchbe04.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is IndexSearcher thread safe?
Thread-Index: AcUeVdVSDJwCFM/rT1O/50lqxcBobQAE+Zzg
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 01 Mar 2005 14:30:36.0937 (UTC) FILETIME=[3C25C790:01C51E6B]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



>Additional question.
>If I'm sharing one instance of IndexSearcher between different threads=20
>Is it good to just to drop this instance to GC.
>Because I don't know if some thread is still using this searcher or =
done=20
>with it.

Note that as far as one of the threads keep a reference on the =
IndexSearcher it can not be garbage collected.
Perhaps you meant that you do not know how a thread can declare that it =
does no more need the indexSearcher.

To cope this that I created an IndexSercher pool.
The pool contains a list of IndexSearchers and each one is associated =
with a counter.=20
To get an IndexSearcher reference one must request it to the pool and =
then the counter is incremented.
(To make it cleaner I had the idea to replace IndexSearcher references =
in the pool with proxy objects thus the pool will never distribute =
references of IndexSearchers to clients objects.
The counter can be manage inside the proxy.)

The pool has the ability to close and dereference an IndexSearcher when =
it is no more used (counter=3D0).

Hope it helps.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13447-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 14:33:43 2005
Return-Path: <lucene-user-return-13447-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60568 invoked from network); 1 Mar 2005 14:33:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 14:33:42 -0000
Received: (qmail 5168 invoked by uid 500); 1 Mar 2005 14:33:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5111 invoked by uid 500); 1 Mar 2005 14:33:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5061 invoked by uid 99); 1 Mar 2005 14:33:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from outbound1.z-ptx-11.fr.sopragroup.com (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 06:33:27 -0800
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id j21EXIbw017778;
	Tue, 1 Mar 2005 15:33:18 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Re[2]: Is IndexSearcher thread safe?
Date: Tue, 1 Mar 2005 15:33:16 +0100
Message-ID: <F19E1B11985F2C4E902091B6901CDEFB477C0C@wexchbe04.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re[2]: Is IndexSearcher thread safe?
Thread-Index: AcUeY+ocTNVJSxf2Tg2j6/c5C50pkwAB0W7A
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
        "Yura Smolsky" <info@altervision.biz>
X-OriginalArrivalTime: 01 Mar 2005 14:34:33.0531 (UTC) FILETIME=[C92B28B0:01C51E6B]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I probably had the same trouble (but I'm not sure).
I have run a test programm that was creating  a lot of IndexSearchers =
(but also close and free them).
It went to an outOfMemory Exception.
But i'm not finished with that problem (need to use a profiler).


>But I have discovered one strange fact. When you have indexSearcher on
>big index, so IndexSearcher object takes a lot of memory (900Mb) and
>when you create new IndexSearcher after deletion of all references to
>old IndexSearcher then memory consumed my old IndexSearcher will not be
>ever freed.
>What can community answer on this strange fact?

Yura Smolsky.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13448-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 14:42:13 2005
Return-Path: <lucene-user-return-13448-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65388 invoked from network); 1 Mar 2005 14:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 14:42:13 -0000
Received: (qmail 23563 invoked by uid 500); 1 Mar 2005 14:42:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23255 invoked by uid 500); 1 Mar 2005 14:42:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23240 invoked by uid 99); 1 Mar 2005 14:42:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 06:42:06 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id 0356886BE4
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 16:42:03 +0200 (EET)
Message-ID: <42247F3B.1070401@i-hypergrid.com>
Date: Tue, 01 Mar 2005 16:42:03 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Remove document fails
References: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com>
In-Reply-To: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

may be you have open IndexWriter at the same time you are trying to 
delete document.

Alex Kiselevski wrote:

>Hi,
>I have a problem doing IndexReader.delete(int doc)
>and it fails on lock error.
>
>
>
>
>
>Alex Kiselevski
>
>
>+9.729.776.4346 (desk)
>+9.729.776.1504 (fax)
>
>AMDOCS > INTEGRATED CUSTOMER MANAGEMENT
>
>
>
>
>
>The information contained in this message is proprietary of Amdocs,
>protected from disclosure, and may be privileged.
>The information is intended to be conveyed only to the designated recipient(s)
>of the message. If the reader of this message is not the intended recipient,
>you are hereby notified that any dissemination, use, distribution or copying of
>
>this communication is strictly prohibited and may be unlawful.
>
>If you have received this communication in error, please notify us immediately
>by replying to the message and deleting it from your computer.
>Thank you.
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13449-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 15:30:20 2005
Return-Path: <lucene-user-return-13449-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94788 invoked from network); 1 Mar 2005 15:30:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 15:30:20 -0000
Received: (qmail 16900 invoked by uid 500); 1 Mar 2005 15:30:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16746 invoked by uid 500); 1 Mar 2005 15:30:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16732 invoked by uid 99); 1 Mar 2005 15:30:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 07:30:14 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 1 Mar 2005 10:34:17 -0500
Message-ID: <008501c51e74$21865ae0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <003101c51d6c$41382840$d8040c0a@eu.uis.unisys.com> <16930.54852.293915.792642@tanto-xipolis.de> <006401c51d70$0bcf6110$d8040c0a@eu.uis.unisys.com> <97b971f57318214fc42057858379ba45@ehatchersolutions.com> <00aa01c51d8e$f07fdc40$d8040c0a@eu.uis.unisys.com> <42238D7C.30306@apache.org>
Subject: Zip Files
Date: Tue, 1 Mar 2005 10:34:17 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 01 Mar 2005 15:34:17.0727 (UTC) FILETIME=[218410F0:01C51E74]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello;

Anyone have an ideas on how to index the contents within zip files?

Thanks,

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13450-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 15:48:29 2005
Return-Path: <lucene-user-return-13450-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5498 invoked from network); 1 Mar 2005 15:48:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 15:48:29 -0000
Received: (qmail 58069 invoked by uid 500); 1 Mar 2005 15:48:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57895 invoked by uid 500); 1 Mar 2005 15:48:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57881 invoked by uid 99); 1 Mar 2005 15:48:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from smtp203.mail.sc5.yahoo.com (HELO smtp203.mail.sc5.yahoo.com) (216.136.129.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 01 Mar 2005 07:48:21 -0800
Received: from unknown (HELO ?24.232.184.152?) (desantisernesto@24.232.184.152 with login)
  by smtp203.mail.sc5.yahoo.com with SMTP; 1 Mar 2005 15:48:18 -0000
Received: from 127.0.0.1 (AVG SMTP 7.0.300 [266.5.4]); Tue, 01 Mar 2005 12:48:50 -0300
Message-ID: <42248EE2.4080907@colaborativa.net>
Date: Tue, 01 Mar 2005 12:48:50 -0300
From: Ernesto De Santis <ernesto.desantis@colaborativa.net>
Organization: Colaborativa.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-ar, es, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Zip Files
References: <003101c51d6c$41382840$d8040c0a@eu.uis.unisys.com> <16930.54852.293915.792642@tanto-xipolis.de> <006401c51d70$0bcf6110$d8040c0a@eu.uis.unisys.com> <97b971f57318214fc42057858379ba45@ehatchersolutions.com> <00aa01c51d8e$f07fdc40$d8040c0a@eu.uis.unisys.com> <42238D7C.30306@apache.org> <008501c51e74$21865ae0$7703d00a@hypermedia.com>
In-Reply-To: <008501c51e74$21865ae0$7703d00a@hypermedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello

first, you need a parser for each file type: pdf, txt, word, etc.
and use a java api to iterate zip content, see:

http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/ZipInputStream.html

use getNextEntry() method

little example:

ZipInputStream zis = new ZipInputStream(fileInputStream);
ZipEntry zipEntry;
while(zipEntry = zis.getNextEntry() != null){
    //use zipEntry to get name, etc.
    //get properly parser for current entry
    //use parser with zis (ZipInputStream)
}

good luck
Ernesto

Luke Shannon escribi:

>Hello;
>
>Anyone have an ideas on how to index the contents within zip files?
>
>Thanks,
>
>Luke
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>  
>

-- 
Ernesto De Santis - Colaborativa.net
Crdoba 1147 Piso 6 Oficinas 3 y 4
(S2000AWO) Rosario, SF, Argentina.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13451-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 17:19:34 2005
Return-Path: <lucene-user-return-13451-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56094 invoked from network); 1 Mar 2005 17:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 17:19:34 -0000
Received: (qmail 99974 invoked by uid 500); 1 Mar 2005 17:19:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99955 invoked by uid 500); 1 Mar 2005 17:19:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99941 invoked by uid 99); 1 Mar 2005 17:19:30 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 09:19:28 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id 423D387140
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 19:19:24 +0200 (EET)
Message-ID: <4224A41C.2040008@i-hypergrid.com>
Date: Tue, 01 Mar 2005 19:19:24 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Large Index managing
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

just an idea how to manage large index that is updated very often.

Very often there is need to update an document in index. To update 
document in index you should delete old document from index and then add 
new one. In most cases it require you to open IndexReader, delete 
document, close IndexReader, create IndexWriter, add document, close 
IndexWriter, and re-open IndexSearcher (if index is searched heavily). 
Profiling some applications I found that most time is spend in 
IndexReader.open() method. Also it produces many objects, so it also 
gives GC overhead.

Idea to optimize this process is to create two indexes. One main index 
that could be very large and second index that will serve as "change 
buffer". We can keep one IndexReader open for the first index. (and use 
it for searching and for deleting old documents). Second index is small 
and we can reopen IndexReader frequently when needed.

when second index reaches some number of documents we can merge it with 
main index.
to search this "multi" index we could use MultiSearcher over this two 
indexes but with little trick: first IndexSearcher is kept same during 
all time till second index is merged with main and second IndexSearcher 
is reopened when second index changes.

It is just idea. (It is not tested)

Will it help to improve speed of updating large index and lower memory 
overhead?
Any comments?

Regards,
Volodymyr Bychkoviak



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13452-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 17:35:22 2005
Return-Path: <lucene-user-return-13452-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63234 invoked from network); 1 Mar 2005 17:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 17:35:21 -0000
Received: (qmail 36097 invoked by uid 500); 1 Mar 2005 17:35:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36075 invoked by uid 500); 1 Mar 2005 17:35:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36054 invoked by uid 99); 1 Mar 2005 17:35:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 09:35:13 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 1 Mar 2005 12:39:17 -0500
Message-ID: <00bb01c51e85$979400f0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <003101c51d6c$41382840$d8040c0a@eu.uis.unisys.com> <16930.54852.293915.792642@tanto-xipolis.de> <006401c51d70$0bcf6110$d8040c0a@eu.uis.unisys.com> <97b971f57318214fc42057858379ba45@ehatchersolutions.com> <00aa01c51d8e$f07fdc40$d8040c0a@eu.uis.unisys.com> <42238D7C.30306@apache.org> <008501c51e74$21865ae0$7703d00a@hypermedia.com> <42248EE2.4080907@colaborativa.net>
Subject: Re: Zip Files
Date: Tue, 1 Mar 2005 12:39:17 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 01 Mar 2005 17:39:17.0350 (UTC) FILETIME=[97A3B860:01C51E85]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Ernesto.

The issue I'm working with now (this is more lack of experience than
anything) is getting an input I can index. All my indexing classes (doc,
pdf, xml, ppt) take a File object as a parameter and return a Lucene
Document containing all the fields I need.

I'm struggling with how I can work with an  array of bytes  instead of a
Java File.

It would be easier to unzip the zip to a temp directory, parse the files and
than delete the directory. But this would greatly slow indexing and use up
disk space.

Luke

----- Original Message ----- 
From: "Ernesto De Santis" <ernesto.desantis@colaborativa.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, March 01, 2005 10:48 AM
Subject: Re: Zip Files


> Hello
>
> first, you need a parser for each file type: pdf, txt, word, etc.
> and use a java api to iterate zip content, see:
>
> http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/ZipInputStream.html
>
> use getNextEntry() method
>
> little example:
>
> ZipInputStream zis = new ZipInputStream(fileInputStream);
> ZipEntry zipEntry;
> while(zipEntry = zis.getNextEntry() != null){
>     //use zipEntry to get name, etc.
>     //get properly parser for current entry
>     //use parser with zis (ZipInputStream)
> }
>
> good luck
> Ernesto
>
> Luke Shannon escribi:
>
> >Hello;
> >
> >Anyone have an ideas on how to index the contents within zip files?
> >
> >Thanks,
> >
> >Luke
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >
>
> -- 
> Ernesto De Santis - Colaborativa.net
> Crdoba 1147 Piso 6 Oficinas 3 y 4
> (S2000AWO) Rosario, SF, Argentina.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13453-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 17:46:55 2005
Return-Path: <lucene-user-return-13453-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68980 invoked from network); 1 Mar 2005 17:46:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 17:46:55 -0000
Received: (qmail 67622 invoked by uid 500); 1 Mar 2005 17:46:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67598 invoked by uid 500); 1 Mar 2005 17:46:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67585 invoked by uid 99); 1 Mar 2005 17:46:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc12.comcast.net (HELO rwcrmhc12.comcast.net) (216.148.227.85)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 09:46:49 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc12) with ESMTP
          id <2005030117464801400hmfg1e>; Tue, 1 Mar 2005 17:46:48 +0000
Message-ID: <4224AA87.4010502@apache.org>
Date: Tue, 01 Mar 2005 09:46:47 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: 1.4.x TermInfosWriter.indexInterval not public static ?
References: <421E505D.7070809@newsmonster.org> <421F55DF.2060709@apache.org> <Pine.LNX.4.58.0502251710490.1489@hal.rescomp.berkeley.edu> <4223A1A4.1010900@apache.org> <42240212.4000100@newsmonster.org>
In-Reply-To: <42240212.4000100@newsmonster.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kevin A. Burton wrote:
> BTW.. can you define "a bit"...

Merriam-Webster says:

   a bit : SOMEWHAT, RATHER

> Is "a bit" 5%?  10%?  Benchmarks would be ncie but I'm not that picky.  

If you want benchmarks, make benchmarks.

> I just want to see what performance hits/benefits I could see by 
> tweaking the values.

This parameter determines the amount of computation required per query 
term, regardless of the number of documents that contain that term.  In 
particular, it is the maximum number of other terms that must be scanned 
before a term is located and its frequency and position information may 
be processed.  In a large index with user-entered query terms, query 
processing time is likely to be dominated not by term lookup but rather 
by the processing of frequency and positional data.  In a small index or 
when many uncommon query terms are generated (e.g., by wildcard queries) 
term lookup may become a dominant cost.  Benchmarking your application 
is the best way to determine this.

There is no single percentage answer.  There are cases where 99% of the 
query processing is in term lookup and there are cases where 1% of the 
query processing is in term lookup.  Chances are that, with a large 
index and user-entered query terms, only a small percentage of the time 
is spent in term lookup and thus increasing this value somewhat will not 
affect overall performance much.

If you need something more precise than "much" or "a bit", measure it.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13454-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 18:10:04 2005
Return-Path: <lucene-user-return-13454-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81410 invoked from network); 1 Mar 2005 18:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 18:10:02 -0000
Received: (qmail 18299 invoked by uid 500); 1 Mar 2005 18:09:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18277 invoked by uid 500); 1 Mar 2005 18:09:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18264 invoked by uid 99); 1 Mar 2005 18:09:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 64.50.92.242.ptr.us.xo.net (HELO exch1.colmol.com) (64.50.92.242)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 10:09:54 -0800
Received: from ASSP-nospam ([192.168.1.204]) by exch1.colmol.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 1 Mar 2005 13:09:51 -0500
Received: from 192.168.1.205 ([192.168.1.205] helo=exch1.colmol.com) by ASSP-nospam ;  1 Mar 05 18:09:51 -0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Zip Files
Date: Tue, 1 Mar 2005 13:09:51 -0500
Message-ID: <B1FD64AF10DAED4786DC31F17B1C3884E4EADA@exch1.colmol.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Zip Files
Thread-Index: AcUehQmrBa/1JcXOQj6O2guqaiPtHQABKP6w
From: "Crump, Michael" <mcrump@leadscope.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 01 Mar 2005 18:09:51.0215 (UTC) FILETIME=[DCB54FF0:01C51E89]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Not sure what you are using as your indexing classes but if you changed =
them to use InputStream I think it would go a long way towards making =
them more flexible and solving your problem.

> -----Original Message-----
> From: Luke Shannon [mailto:lshannon@futurebrand.com]
> Sent: Tuesday, March 01, 2005 12:39 PM
> To: Lucene Users List
> Subject: Re: Zip Files
>=20
> Thanks Ernesto.
>=20
> The issue I'm working with now (this is more lack of experience than
> anything) is getting an input I can index. All my indexing classes =
(doc,
> pdf, xml, ppt) take a File object as a parameter and return a Lucene
> Document containing all the fields I need.
>=20
> I'm struggling with how I can work with an  array of bytes  instead of =
a
> Java File.
>=20
> It would be easier to unzip the zip to a temp directory, parse the =
files
> and
> than delete the directory. But this would greatly slow indexing and =
use up
> disk space.
>=20
> Luke
>=20
> ----- Original Message -----
> From: "Ernesto De Santis" <ernesto.desantis@colaborativa.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, March 01, 2005 10:48 AM
> Subject: Re: Zip Files
>=20
>=20
> > Hello
> >
> > first, you need a parser for each file type: pdf, txt, word, etc.
> > and use a java api to iterate zip content, see:
> >
> >
> =
http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/ZipInputStream.html=

> >
> > use getNextEntry() method
> >
> > little example:
> >
> > ZipInputStream zis =3D new ZipInputStream(fileInputStream);
> > ZipEntry zipEntry;
> > while(zipEntry =3D zis.getNextEntry() !=3D null){
> >     //use zipEntry to get name, etc.
> >     //get properly parser for current entry
> >     //use parser with zis (ZipInputStream)
> > }
> >
> > good luck
> > Ernesto
> >
> > Luke Shannon escribi=F3:
> >
> > >Hello;
> > >
> > >Anyone have an ideas on how to index the contents within zip files?
> > >
> > >Thanks,
> > >
> > >Luke
> > >
> > >
> > =
>---------------------------------------------------------------------
> > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >For additional commands, e-mail: =
lucene-user-help@jakarta.apache.org
> > >
> > >
> > >
> > >
> >
> > --
> > Ernesto De Santis - Colaborativa.net
> > C=F3rdoba 1147 Piso 6 Oficinas 3 y 4
> > (S2000AWO) Rosario, SF, Argentina.
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13455-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 18:15:57 2005
Return-Path: <lucene-user-return-13455-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85807 invoked from network); 1 Mar 2005 18:15:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 18:15:57 -0000
Received: (qmail 31728 invoked by uid 500); 1 Mar 2005 18:15:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31693 invoked by uid 500); 1 Mar 2005 18:15:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31680 invoked by uid 99); 1 Mar 2005 18:15:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 10:15:51 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <2005030118154801500l0pr2e>; Tue, 1 Mar 2005 18:15:48 +0000
Message-ID: <4224B153.7080104@apache.org>
Date: Tue, 01 Mar 2005 10:15:47 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Fast access to a random page of the search results.
References: <421F8DB6.3030306@jCatalog.com> <16930.51341.630394.350033@tanto-xipolis.de> <00d301c51d84$bf531970$d380a8c0@sirma.int> <ceaba1d83560d5f35aad6d3005069481@ehatchersolutions.com> <019801c51dab$c2c746e0$d380a8c0@sirma.int> <d08003cfff6c6ece3420f8f8c97895b0@ehatchersolutions.com> <023801c51e3a$c38ab0f0$d380a8c0@sirma.int>
In-Reply-To: <023801c51e3a$c38ab0f0$d380a8c0@sirma.int>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Stanislav Jordanov wrote:
>                 startTs = System.currentTimeMillis();
>                 dummyMethod(hits.doc(nHits - nHits));
>                 stopTs = System.currentTimeMillis();
>                 System.out.println("Last doc accessed in " + (stopTs -
> startTs)
>                                     + "ms");

'nHits - nHits' always equals zero.  So you're actually printing the 
first document, not the last.  The last document would be accessed with 
'hits.doc(nHits)'.  Accessing the last document should not be much 
slower (or faster) than accessing the first.

200+ milliseconds to access a document does seem slow.  Where is you 
index stored?  On a local hard drive?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13456-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 18:19:14 2005
Return-Path: <lucene-user-return-13456-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88972 invoked from network); 1 Mar 2005 18:19:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 18:19:13 -0000
Received: (qmail 46309 invoked by uid 500); 1 Mar 2005 18:19:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46277 invoked by uid 500); 1 Mar 2005 18:19:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46263 invoked by uid 99); 1 Mar 2005 18:19:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc12.comcast.net (HELO rwcrmhc12.comcast.net) (216.148.227.85)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 10:19:07 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc12) with ESMTP
          id <2005030118190601400hpvu7e>; Tue, 1 Mar 2005 18:19:06 +0000
Message-ID: <4224B219.4080001@apache.org>
Date: Tue, 01 Mar 2005 10:19:05 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Custom filters & document numbers
References: <20050301130751.57149.qmail@web54606.mail.yahoo.com>
In-Reply-To: <20050301130751.57149.qmail@web54606.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

tomsdepot-lucene@yahoo.com wrote:
> Does this happen frequently?  Like Stanislav has been asking... what sort of
> operations on the index cause the document number to change for any given
> document?

Documents are only re-numbered after there have been deletions.  Once 
there have been deletions, renumbering may be triggered by any document 
addition or index optimization.  Once an index is optimized, no 
renumbering will be performed unril more deletions are made.

> If the document numbers change frequently, is there a
> straightforward way to modify Lucene to keep the document numbers the same for
> the life of the document?  I'd like to have mappings in my sql database that
> point to the document numbers that Lucene search returns in its Hits objects.

If you require a persistent document id that survives deletions, then 
add it as a field to your documents.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13457-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 19:24:23 2005
Return-Path: <lucene-user-return-13457-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28701 invoked from network); 1 Mar 2005 19:24:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 19:24:23 -0000
Received: (qmail 5949 invoked by uid 500); 1 Mar 2005 19:24:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5918 invoked by uid 500); 1 Mar 2005 19:24:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5904 invoked by uid 99); 1 Mar 2005 19:24:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailout05.sul.t-online.com (HELO mailout05.sul.t-online.com) (194.25.134.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 11:24:17 -0800
Received: from fwd16.aul.t-online.de 
	by mailout05.sul.t-online.com with smtp 
	id 1D6Cyc-0003tY-00; Tue, 01 Mar 2005 20:24:14 +0100
Received: from pD9EBFD4F.dip.t-dialin.net (bjiOi6ZeQeHcZuoeLdSRs-Whdf6FlMfdeFjubTwbsE6JjZ9EDAkgZy@[217.235.253.79]) by fwd16.sul.t-online.de
	with esmtp id 1D6CyB-0XL2dU0; Tue, 1 Mar 2005 20:23:47 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Fast access to a random page of the search results.
Date: Tue, 1 Mar 2005 20:24:04 +0100
User-Agent: KMail/1.7.1
References: <421F8DB6.3030306@jCatalog.com> <023801c51e3a$c38ab0f0$d380a8c0@sirma.int> <4224B153.7080104@apache.org>
In-Reply-To: <4224B153.7080104@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200503012024.04519@danielnaber.de>
X-ID: bjiOi6ZeQeHcZuoeLdSRs-Whdf6FlMfdeFjubTwbsE6JjZ9EDAkgZy@t-dialin.net
X-TOI-MSGID: 64c7f1cd-83b0-4547-a383-9c7d12fd15de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 01 March 2005 19:15, Doug Cutting wrote:

> 'nHits - nHits' always equals zero. =C2=A0So you're actually printing the
> first document, not the last. =C2=A0The last document would be accessed w=
ith
> 'hits.doc(nHits)'.

After fixing this I can reproduce the problem with a local index that=20
contains about 220.000 documents (700MB). Fetching the first document=20
takes for example 30ms, fetching the last one takes >100ms. Of course I=20
tested this with a query that returns many results (about 50.000).=20
Actually it happens even with the default sorting, no need to sort by some=
=20
specific field.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13458-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 19:45:19 2005
Return-Path: <lucene-user-return-13458-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42170 invoked from network); 1 Mar 2005 19:45:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 19:45:19 -0000
Received: (qmail 70300 invoked by uid 500); 1 Mar 2005 19:45:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70266 invoked by uid 500); 1 Mar 2005 19:45:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70251 invoked by uid 99); 1 Mar 2005 19:45:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.199 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 11:45:11 -0800
Received: by rproxy.gmail.com with SMTP id j1so1324390rnf
        for <lucene-user@jakarta.apache.org>; Tue, 01 Mar 2005 11:45:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=eUgBABnVVi/ioy8s1vJ0p72gU+XAJisdR+NVjsDf9uY0RpdPH/JxmkgZamcwf2Bb2sWjIqLQuOooNWA9zgQkh5FgPXXl5J03Ggp57xo5iGlbNACIyU626ALljqvehdAG+hOzk+ppwdTyegaVnRCAe4p5nWFweOQPhqplVYVZgiE=
Received: by 10.38.104.5 with SMTP id b5mr111860rnc;
        Tue, 01 Mar 2005 11:44:44 -0800 (PST)
Received: by 10.38.104.15 with HTTP; Tue, 1 Mar 2005 11:44:13 -0800 (PST)
Message-ID: <88c6a672050301114471550869@mail.gmail.com>
Date: Tue, 1 Mar 2005 13:44:13 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Zip Files
In-Reply-To: <00bb01c51e85$979400f0$7703d00a@hypermedia.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
References: <003101c51d6c$41382840$d8040c0a@eu.uis.unisys.com>
	 <16930.54852.293915.792642@tanto-xipolis.de>
	 <006401c51d70$0bcf6110$d8040c0a@eu.uis.unisys.com>
	 <97b971f57318214fc42057858379ba45@ehatchersolutions.com>
	 <00aa01c51d8e$f07fdc40$d8040c0a@eu.uis.unisys.com>
	 <42238D7C.30306@apache.org>
	 <008501c51e74$21865ae0$7703d00a@hypermedia.com>
	 <42248EE2.4080907@colaborativa.net>
	 <00bb01c51e85$979400f0$7703d00a@hypermedia.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luke,

Look at the javadocs for java.io.ByteArrayInputStream - it wraps a
byte array and makes it accessible as an InputStream.  Also see
java.util.zip.ZipFile.  You should be able to read and parse all
contents of the zip file in memory.

http://java.sun.com/j2se/1.4.2/docs/api/java/io/ByteArrayInputStream.html


On Tue, 1 Mar 2005 12:39:17 -0500, Luke Shannon
<lshannon@futurebrand.com> wrote:
> Thanks Ernesto.
>=20
> I'm struggling with how I can work with an  array of bytes  instead of a
> Java File.
>=20
> It would be easier to unzip the zip to a temp directory, parse the files =
and
> than delete the directory. But this would greatly slow indexing and use u=
p
> disk space.
>=20
> Luke
>=20
> ----- Original Message -----
> From: "Ernesto De Santis" <ernesto.desantis@colaborativa.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, March 01, 2005 10:48 AM
> Subject: Re: Zip Files
>=20
> > Hello
> >
> > first, you need a parser for each file type: pdf, txt, word, etc.
> > and use a java api to iterate zip content, see:
> >
> > http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/ZipInputStream.ht=
ml
> >
> > use getNextEntry() method
> >
> > little example:
> >
> > ZipInputStream zis =3D new ZipInputStream(fileInputStream);
> > ZipEntry zipEntry;
> > while(zipEntry =3D zis.getNextEntry() !=3D null){
> >     //use zipEntry to get name, etc.
> >     //get properly parser for current entry
> >     //use parser with zis (ZipInputStream)
> > }
> >
> > good luck
> > Ernesto
> >
> > Luke Shannon escribi=F3:
> >
> > >Hello;
> > >
> > >Anyone have an ideas on how to index the contents within zip files?
> > >
> > >Thanks,
> > >
> > >Luke
> > >
> > >
> > >---------------------------------------------------------------------
> > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> > >
> > >
> >
> > --
> > Ernesto De Santis - Colaborativa.net
> > C=F3rdoba 1147 Piso 6 Oficinas 3 y 4
> > (S2000AWO) Rosario, SF, Argentina.
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13459-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 19:47:23 2005
Return-Path: <lucene-user-return-13459-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43362 invoked from network); 1 Mar 2005 19:47:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 19:47:23 -0000
Received: (qmail 80337 invoked by uid 500); 1 Mar 2005 19:47:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80285 invoked by uid 500); 1 Mar 2005 19:47:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80226 invoked by uid 99); 1 Mar 2005 19:47:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.202 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 11:47:11 -0800
Received: by rproxy.gmail.com with SMTP id j1so1324727rnf
        for <lucene-user@jakarta.apache.org>; Tue, 01 Mar 2005 11:47:09 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=bfrJUb9TML8LWOwgZT3r3QJync1BVmjZMwragNDegY3rz/oF82nKXxjhZ2A2A0KwKro6kfKImzRd16vghMGq6iHouBD/FtUE/4BpWe2EjDv/w+nMjAoUuxZKUArihtKNBj8a7NFI6NdZtokammBIImzj68v1uVq91NuCrXnt/kE=
Received: by 10.38.15.37 with SMTP id 37mr143999rno;
        Tue, 01 Mar 2005 11:46:37 -0800 (PST)
Received: by 10.38.104.15 with HTTP; Tue, 1 Mar 2005 11:44:13 -0800 (PST)
Message-ID: <88c6a672050301114471550869@mail.gmail.com>
Date: Tue, 1 Mar 2005 13:44:13 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Zip Files
In-Reply-To: <00bb01c51e85$979400f0$7703d00a@hypermedia.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
References: <003101c51d6c$41382840$d8040c0a@eu.uis.unisys.com>
	 <16930.54852.293915.792642@tanto-xipolis.de>
	 <006401c51d70$0bcf6110$d8040c0a@eu.uis.unisys.com>
	 <97b971f57318214fc42057858379ba45@ehatchersolutions.com>
	 <00aa01c51d8e$f07fdc40$d8040c0a@eu.uis.unisys.com>
	 <42238D7C.30306@apache.org>
	 <008501c51e74$21865ae0$7703d00a@hypermedia.com>
	 <42248EE2.4080907@colaborativa.net>
	 <00bb01c51e85$979400f0$7703d00a@hypermedia.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luke,

Look at the javadocs for java.io.ByteArrayInputStream - it wraps a
byte array and makes it accessible as an InputStream.  Also see
java.util.zip.ZipFile.  You should be able to read and parse all
contents of the zip file in memory.

http://java.sun.com/j2se/1.4.2/docs/api/java/io/ByteArrayInputStream.html


On Tue, 1 Mar 2005 12:39:17 -0500, Luke Shannon
<lshannon@futurebrand.com> wrote:
> Thanks Ernesto.
>=20
> I'm struggling with how I can work with an  array of bytes  instead of a
> Java File.
>=20
> It would be easier to unzip the zip to a temp directory, parse the files =
and
> than delete the directory. But this would greatly slow indexing and use u=
p
> disk space.
>=20
> Luke
>=20
> ----- Original Message -----
> From: "Ernesto De Santis" <ernesto.desantis@colaborativa.net>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, March 01, 2005 10:48 AM
> Subject: Re: Zip Files
>=20
> > Hello
> >
> > first, you need a parser for each file type: pdf, txt, word, etc.
> > and use a java api to iterate zip content, see:
> >
> > http://java.sun.com/j2se/1.4.2/docs/api/java/util/zip/ZipInputStream.ht=
ml
> >
> > use getNextEntry() method
> >
> > little example:
> >
> > ZipInputStream zis =3D new ZipInputStream(fileInputStream);
> > ZipEntry zipEntry;
> > while(zipEntry =3D zis.getNextEntry() !=3D null){
> >     //use zipEntry to get name, etc.
> >     //get properly parser for current entry
> >     //use parser with zis (ZipInputStream)
> > }
> >
> > good luck
> > Ernesto
> >
> > Luke Shannon escribi=F3:
> >
> > >Hello;
> > >
> > >Anyone have an ideas on how to index the contents within zip files?
> > >
> > >Thanks,
> > >
> > >Luke
> > >
> > >
> > >---------------------------------------------------------------------
> > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> > >
> > >
> >
> > --
> > Ernesto De Santis - Colaborativa.net
> > C=F3rdoba 1147 Piso 6 Oficinas 3 y 4
> > (S2000AWO) Rosario, SF, Argentina.
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13460-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 20:47:33 2005
Return-Path: <lucene-user-return-13460-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4985 invoked from network); 1 Mar 2005 20:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 20:47:32 -0000
Received: (qmail 87209 invoked by uid 500); 1 Mar 2005 20:47:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87174 invoked by uid 500); 1 Mar 2005 20:47:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87160 invoked by uid 99); 1 Mar 2005 20:47:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.dsg.vertisinc.com (HELO mail.dsg.vertisinc.com) (63.103.126.135)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 12:47:27 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C51E9F.E024D1CD"
Subject: Investingating Lucene For Project 
Date: Tue, 1 Mar 2005 14:47:25 -0600
Message-ID: <34385CBC5E8E664EB0007814636AB36A012D58A8@exchange1.dimensions.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Investingating Lucene For Project 
Thread-Index: AcUen+Am0ocM5SsGRj+IWJewf3Qj0A==
From: "Scott Purcell" <spurcell@vertisinc.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C51E9F.E024D1CD
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am looking for a solution to a problem I am having. We have a =
web-based asset management solution where we manage customers assets.
=20
We have had requests from some clients who would like the ability to =
"index"  PDF files, now and possibly other text files in the future. The =
PDF files live on a server and are in a structured environment. I would =
like to somehow index the content inside the PDF and be able to run =
searches on that information from a web-form. The result MUST BE  a text =
snippet (that being some text prior to the searched word and after the =
searched word).=20
Does this make sense? And can Lucene do this?
=20
If the product can do this, how is the best way to get rolling on a =
project of this nature? Purchase an example book, or are there simple =
examples one can pick up on? Does Lucene have a large learning curve? or =
reasonably quick?
=20
If all the above will work, what kind of license does this require? I =
have not been able to find a link to that yet on the jakarta site.
=20
I sincerely appreciate any input into this.
=20
Sincerely
Scott=20
=20

------_=_NextPart_001_01C51E9F.E024D1CD--

From lucene-user-return-13461-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 21:08:22 2005
Return-Path: <lucene-user-return-13461-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19485 invoked from network); 1 Mar 2005 21:08:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 21:08:22 -0000
Received: (qmail 12683 invoked by uid 500); 1 Mar 2005 21:08:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12655 invoked by uid 500); 1 Mar 2005 21:08:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12641 invoked by uid 99); 1 Mar 2005 21:08:17 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from blacksheep.csh.rit.edu (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 13:08:16 -0800
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id B19D29309
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 16:08:13 -0500 (EST)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id 7E1F214EA; Tue,  1 Mar 2005 16:08:13 -0500 (EST)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id 5C7B514E9
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 16:08:13 -0500 (EST)
Date: Tue, 1 Mar 2005 16:08:13 -0500 (EST)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Investingating Lucene For Project 
In-Reply-To: <34385CBC5E8E664EB0007814636AB36A012D58A8@exchange1.dimensions.com>
Message-ID: <Pine.GSO.4.53.0503011603140.21382@fury.csh.rit.edu>
References: <34385CBC5E8E664EB0007814636AB36A012D58A8@exchange1.dimensions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


See inlined comments below.

> We have had requests from some clients who would like the ability to
> "index"  PDF files, now and possibly other text files in the future. The
> PDF files live on a server and are in a structured environment. I would
> like to somehow index the content inside the PDF and be able to run
> searches on that information from a web-form. The result MUST BE a text
> snippet (that being some text prior to the searched word and after the
> searched word).  Does this make sense? And can Lucene do this?


Lucene indexes text documents, so you will need to convert your PDF to a
text document.  PDFBox (http://www.pdfbox.org/) can do that, PDFBox
provides a summary of the document, which is just the first x number of
characters.  If you wanted a smarter summary you would need to create that
yourself.

> If the product can do this, how is the best way to get rolling on a
> project of this nature? Purchase an example book, or are there simple
> examples one can pick up on? Does Lucene have a large learning curve? or
> reasonably quick?

There are tutorials available on the website, and I would recommend
the "Lucene in Action" book.  There is a learning curve for lucene, but it
sounds like your requirements are pretty basic so it shouldn't be that
hard.



> If all the above will work, what kind of license does this require? I
> have not been able to find a link to that yet on the jakarta site.

http://www.apache.org/licenses/LICENSE-2.0

Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13462-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 21:21:05 2005
Return-Path: <lucene-user-return-13462-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27536 invoked from network); 1 Mar 2005 21:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 21:21:04 -0000
Received: (qmail 44606 invoked by uid 500); 1 Mar 2005 21:20:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44542 invoked by uid 500); 1 Mar 2005 21:20:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44473 invoked by uid 99); 1 Mar 2005 21:20:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from unassigned.norlight.net (HELO brownbear.nameprotect.com) (69.8.156.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 13:20:54 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Investingating Lucene For Project 
Date: Tue, 1 Mar 2005 15:20:51 -0600
Message-ID: <450A5F8E4BF26340B4013C40E11ADA08700572@brownbear.nameprotect.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Investingating Lucene For Project 
Thread-Index: AcUeosvbbHC1Jfh7TxWUA/5YBg1J6AAATISg
From: "Runde, Kevin" <krunde@NameProtect.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Also there is a book called "Lucene in Action" that was released
recently. It is a great introduction to Lucene and has sections
dedicated to indexing different text document types (txt, html, pdf,
doc, rtf). FYI I am in no way related to the book or the authors so this
is a real recommendation. It will help you quickly learn what Lucene is
and can do. It has lots of pointers to other projects that use Lucene or
expand upon it's functionality.

Thanks,
Kevin=20

-----Original Message-----
From: Ben Litchfield [mailto:ben@csh.rit.edu]=20
Sent: Tuesday, March 01, 2005 3:08 PM
To: Lucene Users List
Subject: Re: Investingating Lucene For Project=20


See inlined comments below.

> We have had requests from some clients who would like the ability to
> "index"  PDF files, now and possibly other text files in the future.
The
> PDF files live on a server and are in a structured environment. I
would
> like to somehow index the content inside the PDF and be able to run
> searches on that information from a web-form. The result MUST BE a
text
> snippet (that being some text prior to the searched word and after the
> searched word).  Does this make sense? And can Lucene do this?


Lucene indexes text documents, so you will need to convert your PDF to a
text document.  PDFBox (http://www.pdfbox.org/) can do that, PDFBox
provides a summary of the document, which is just the first x number of
characters.  If you wanted a smarter summary you would need to create
that
yourself.

> If the product can do this, how is the best way to get rolling on a
> project of this nature? Purchase an example book, or are there simple
> examples one can pick up on? Does Lucene have a large learning curve?
or
> reasonably quick?

There are tutorials available on the website, and I would recommend
the "Lucene in Action" book.  There is a learning curve for lucene, but
it
sounds like your requirements are pretty basic so it shouldn't be that
hard.



> If all the above will work, what kind of license does this require? I
> have not been able to find a link to that yet on the jakarta site.

http://www.apache.org/licenses/LICENSE-2.0

Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13463-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 21:39:43 2005
Return-Path: <lucene-user-return-13463-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37949 invoked from network); 1 Mar 2005 21:39:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 21:39:43 -0000
Received: (qmail 86672 invoked by uid 500); 1 Mar 2005 21:39:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86651 invoked by uid 500); 1 Mar 2005 21:39:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86638 invoked by uid 99); 1 Mar 2005 21:39:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mspmail2.stellent.com (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 13:39:36 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id j21KmFj05973
	for <lucene-user@jakarta.apache.org>; Tue, 1 Mar 2005 14:48:15 -0600 (CST)
Subject: Best Practices for Distributing Lucene Indexing and Searching
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Content-Type: text/plain
Message-Id: <1109713160.18862.109.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 01 Mar 2005 15:39:20 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Lucene Users,

We have a requirement for a new version of our software that it run in a
clustered environment. Any node should be able to go down but the
application must keep functioning.

Currently, we use Lucene on a single node but this won't meet our fail
over requirements. If we can't find a solution, we'll have to stop using
Lucene and switch to something else, like full text indexing inside the
database.

So I'm looking for best practices on distributing Lucene indexing and
searching. I'd like to hear from those of you using Lucene in a
multi-process environment what is working for you. I've done some
research, and based on on what I've seen so far, here's a bit of
brainstorming on what seems to be possible:

1. Don't. Have a single indexing and searching node. [Note: this is the
last resort.]

2. Don't distribute indexing. Searching is distributed by storing the
index on NFS. A single indexing node would process all requests.
However, using Lucene on NFS is *not* recommended. See:
http://lucenebook.com/search?query=nfs ...it can result in "stale NFS
file handle" problem:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12481.html
So we'd have to investigate this option. Indexing could use an JMS queue
so if the box goes down, when it comes back up, indexing could resume
where it left off.

3. Distribute indexing and searching into separate indexes for each
node. Combine results using ParallelMultiSearcher. If a box went down, a
piece of the index would be unavailable. Also, there would be serious
issues making sure assets are indexed in the right place to prevent
duplicates, stale results, or deleted assets from showing up in the
index. Another possibility would be a hashing scheme for
indexing...assets could be put into buckets based on their
IDs to prevent duplication. Keeping results consistent as you're
changing the number of the buckets as the nodes come up and down would
be a challenge though

4. Distribute indexing and searching, but index everything at each node.
Each node would have a complete copy of the index. Indexing would be
slower. We could move to a 5 or 15 minute batch approach.

5. Index centrally and push updated indexes to search nodes on a
periodic basis. This would be easy and might avoid the problems with
using NFS.

6. Index locally and synchronize changes periodically. This is an
interesting idea and bears looking into. Lucene can combine multiple
indexes into a single one, which can be written out somewhere else, and
then distributed back to the search nodes to replace their existing
index.

7. Create a JDBCDirectory implementation and let the database handle the
clustering. A JDBCDirectory exists
(http://ppinew.mnis.com/jdbcdirectory/), but has only been tested with
MySQL. It would probably require modification (the code is under the
LGPL). At one time, an OracleDirectory implementation existed but that
was in 2000 and so it is surely badly outdated. But in principle, the
concept is possible. However, these database-based directories are
slower at indexing and searching than the traditional style, probably
mostly due to BLOB handling.

8. Can the Berkely DB-based DBDirectory help us? I am not sure what
advantages it would bring over the traditional FSDirectory, but maybe
someone else has some ideas.

Please let me know if you've got any other ideas or a best practice to
follow.

Thanks,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13464-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Mar 01 22:04:23 2005
Return-Path: <lucene-user-return-13464-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48329 invoked from network); 1 Mar 2005 22:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Mar 2005 22:04:23 -0000
Received: (qmail 34517 invoked by uid 500); 1 Mar 2005 22:04:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34169 invoked by uid 500); 1 Mar 2005 22:04:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34156 invoked by uid 99); 1 Mar 2005 22:04:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 14:04:18 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005030122041601300qibhve>; Tue, 1 Mar 2005 22:04:16 +0000
Message-ID: <4224E6DF.5010109@apache.org>
Date: Tue, 01 Mar 2005 14:04:15 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Fast access to a random page of the search results.
References: <421F8DB6.3030306@jCatalog.com> <023801c51e3a$c38ab0f0$d380a8c0@sirma.int> <4224B153.7080104@apache.org> <200503012024.04519@danielnaber.de>
In-Reply-To: <200503012024.04519@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> After fixing this I can reproduce the problem with a local index that 
> contains about 220.000 documents (700MB). Fetching the first document 
> takes for example 30ms, fetching the last one takes >100ms. Of course I 
> tested this with a query that returns many results (about 50.000). 
> Actually it happens even with the default sorting, no need to sort by some 
> specific field.

In part this is due to the fact that Hits first searches for the 
top-scoring 100 documents.  Then, if you ask for a hit after that, it 
must re-query.  In part this is also due to the fact that maintaining a 
queue of the top 50k hits is more expensive than maintaining a queue of 
the top 100 hits, so the second query is slower.  And in part this could 
be caused by other things, such as that the highest ranking document 
might tend to be cached and not require disk io.

One could perform profiling to determine which is the largest factor. 
Of these, only the first is really fixable: if you know you'll need hit 
50k then you could tell this to Hits and have it perform only a single 
query.  But the algorithmic cost of keeping the queue of the top 50k is 
the same as collecting all the hits and sorting them.  So, in part, 
getting hits 49,990 through 50,000 is inherently slower than getting 
hits 0-10.  We can minimize that, but not eliminate it.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13465-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 01:06:33 2005
Return-Path: <lucene-user-return-13465-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21317 invoked from network); 2 Mar 2005 01:06:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 01:06:33 -0000
Received: (qmail 99893 invoked by uid 500); 2 Mar 2005 01:06:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99856 invoked by uid 500); 2 Mar 2005 01:06:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99841 invoked by uid 99); 2 Mar 2005 01:06:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.200 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 17:06:27 -0800
Received: by wproxy.gmail.com with SMTP id 70so9148wra
        for <lucene-user@jakarta.apache.org>; Tue, 01 Mar 2005 17:06:25 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=BX4k8mGFK2Kw1++XcYLWgphDmBACl39V6m78u/X4QP7F7J/h+VPmcLfclamHLY6mJFSDsAQDx08rn4bc7vQvXiXFlRWp9eJt7B/DLIWL1OtTyQH7WrpVDop2/tUYK2qS/r9Ni0WIoltCiA2/5xfydnrUErN7CgGag4RZjHE51s4=
Received: by 10.54.51.73 with SMTP id y73mr39816wry;
        Tue, 01 Mar 2005 17:06:24 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Tue, 1 Mar 2005 17:06:24 -0800 (PST)
Message-ID: <5f4a6461050301170613fef5da@mail.gmail.com>
Date: Wed, 2 Mar 2005 12:06:24 +1100
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene <lucene-user@jakarta.apache.org>
Subject: Multiple indexes
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

My site has two types of documents with different structure. I would
like to create an index for each type of document. What is the best
way to implement this?

I have been trying to implement this but found out that 90% of the
code is the same.

In Lucene in Action book, there is a case study on jGuru, it just
mentions them using multiple indexes. I would like to do something
like them.

Any resources on the Internet that I can learn from?

Thanks,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13466-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 01:23:37 2005
Return-Path: <lucene-user-return-13466-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27612 invoked from network); 2 Mar 2005 01:23:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 01:23:37 -0000
Received: (qmail 18640 invoked by uid 500); 2 Mar 2005 01:23:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18601 invoked by uid 500); 2 Mar 2005 01:23:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18586 invoked by uid 99); 2 Mar 2005 01:23:32 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 17:23:32 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 856825B798; Tue,  1 Mar 2005 17:23:30 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7BF157F460
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 17:23:30 -0800 (PST)
Date: Tue, 1 Mar 2005 17:23:30 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
In-Reply-To: <1109713160.18862.109.camel@localhost>
Message-ID: <Pine.LNX.4.58.0503011658100.25803@hal.rescomp.berkeley.edu>
References: <1109713160.18862.109.camel@localhost>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

: We have a requirement for a new version of our software that it run in a
: clustered environment. Any node should be able to go down but the
: application must keep functioning.

My application is looking at similar problems.  We aren't yet live, but
the only practicle solution we have implimented so far is the "apply all
adds/deletes to all instances in parallel or sequence" model which we
don't really like very much.  I don't consider it a viable option for our
launch given the volume of updates we need to be able to handle in a
timely manor.

I'm also curious as to what ideas people on this list have about realiable
index replication.  I've included my thoughts on some of the possible
solutions below...


: 2. Don't distribute indexing. Searching is distributed by storing the
: index on NFS. A single indexing node would process all requests.
: However, using Lucene on NFS is *not* recommended. See:

I don't really consider reading/writing to an NFS mounted FSDirectory to
be viable for the very reasons you listed; but I haven't really found any
evidence of problems if you take they approach that a single "writer"
node indexes to local disk, which is NFS mounted by all of your other
nodes for doing queries.  concurent updates/queries may still not be safe
(i'm not sure) but you could have the writer node "clone" the entire index
into a new directory, apply the updates and then signal the other nodes to
stop using the old FSDirectory and start using the new one.

: 3. Distribute indexing and searching into separate indexes for each
: node. Combine results using ParallelMultiSearcher. If a box went down, a
: piece of the index would be unavailable. Also, there would be serious

I haven't really considered this option because it would be unacceptable
for my application.

: 4. Distribute indexing and searching, but index everything at each node.
: Each node would have a complete copy of the index. Indexing would be
: slower. We could move to a 5 or 15 minute batch approach.

As i said, tis is our current "last resort" but there are some serious
issues i worry baout with this under high concurrent update/query load.
they are the same issues you would face if you only had one box -- but
frankly one of the main oals i see for a distributed solution is to reduce
the total amount of processing that needs to be done -- not multiply it by
the number of boxes, so i'm trying to find something better.

: 5. Index centrally and push updated indexes to search nodes on a
: periodic basis. This would be easy and might avoid the problems with
: using NFS.
:
: 6. Index locally and synchronize changes periodically. This is an
: interesting idea and bears looking into. Lucene can combine multiple
: indexes into a single one, which can be written out somewhere else, and
: then distributed back to the search nodes to replace their existing
: index.

Agreed.  These are two of the most promising ideas we're currently
considering, but we haven't acctually tried implimenting yet.  The other
thing we have considered is having a pool of "updater" nodes which process
batches of additions into a small index, which is then copied out to all
of hte other nodes.  these nodes can then either Multisearch between their
existing index and the new one, or they can acctally merge the new one
in (based on their current load).

The concern i have with approaches like this, is that they still require
the individual nodes to all duplicate work of merging, and ultimately:
optimizing.  that's something i don't wnat them to have to do, especially
under potentially heavy query load.

What i'd really like is a single "primary indexer" box, that builds up
lots of small RAMDirectory indexes as updates come in, and periodically
writes them to files to be copied over to "warm standby indexer" boxes.
All of the indexer boxes eventually merge these small indexes into the
master, which is versioned on a regular basis.  The primary indexer would
also be the main guy to decide how often to do an optimize()

if the primary indexer goes down, and of the warm standy indexers can take
over with minimal loss of updates.

Then the various "query boxes" can periodically copy the most recent rev
of the index over whenever they want, close their existing IndexReader and
open a new one poited at the new rev.

Problems that come up:

  1) for indexes big enough to warant these kinds of realiability
     concerns, you need a lot of bandwidth to copy that much data arround.
  2) our application has an expecation that issuing the same query to two
     different nodes in the cluster at the same time should give you the
     same results.  In order for that to be true, in an approach like the
     one i described would reuire some coordination mechanism to know what
     the highest rev# of the index had been copied to all of boxes and
     then signal them all to start using that rev at the same time.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13467-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 02:17:47 2005
Return-Path: <lucene-user-return-13467-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55335 invoked from network); 2 Mar 2005 02:17:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 02:17:47 -0000
Received: (qmail 98027 invoked by uid 500); 2 Mar 2005 02:17:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98008 invoked by uid 500); 2 Mar 2005 02:17:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61571 invoked by uid 99); 2 Mar 2005 00:36:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of smisra@etouch.net designates 216.31.249.101 as permitted sender)
X-Spam-Filtered: Yes
X-Spam-Status: No, hits=-2.2 required=5.0
From: "Srimant Mishra" <smisra@etouch.net>
To: <lucene-user@jakarta.apache.org>
Subject: How to manipulate the lucene index table
Date: Tue, 1 Mar 2005 16:38:43 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0030_01C51E7D.21CA0480"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcUewAExWD+LwIBuS/K7kr0gFmUR7A==
Message-ID: <auto-000008646898@etouch.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0030_01C51E7D.21CA0480
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all, 

 

         I have a web-based application that we use to index text documents
as well as images; the indexes fields are either Field.Unstored or
Field.Keyword. 

 

 

         Currently, we plan to modify some of the index field names. For
example, if the index field name was DOCLOCALE, we plan to break it up into
two fields: DOCUMENTTYPE and LOCALE. Since, the index files that lucene
creates have become quite big (close to 1 gig), we are looking for a way to
be able to read the index entries and modify them via a standalone Java
program.

 

Does lucene provide any APIs to read these index entries and update them? Is
there an easy way to do it?

 

Thanks in advance

Srimant


------=_NextPart_000_0030_01C51E7D.21CA0480--


From lucene-user-return-13468-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 02:21:00 2005
Return-Path: <lucene-user-return-13468-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62278 invoked from network); 2 Mar 2005 02:21:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 02:21:00 -0000
Received: (qmail 1928 invoked by uid 500); 2 Mar 2005 02:20:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1906 invoked by uid 500); 2 Mar 2005 02:20:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1891 invoked by uid 99); 2 Mar 2005 02:20:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.purposedriven.com (HELO pd-sbc-smtp-01.purposedriven.com) (66.161.69.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 18:20:54 -0800
Received: from PD-EVS-01.purposedriven.com ([10.150.3.12] RDNS failed) by pd-sbc-smtp-01.purposedriven.com with Microsoft SMTPSVC(6.0.3790.211);
	 Tue, 1 Mar 2005 18:21:22 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to manipulate the lucene index table
Date: Tue, 1 Mar 2005 18:21:21 -0800
Message-ID: <AB9D830944ED334390AC5BBD6579AD3C01208914@PD-EVS-01.purposedriven.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to manipulate the lucene index table
Thread-Index: AcUewAExWD+LwIBuS/K7kr0gFmUR7AADnBfg
From: "Kyong Kwak" <Kyong@purposedriven.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 02 Mar 2005 02:21:22.0431 (UTC) FILETIME=[86D7C0F0:01C51ECE]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You can try Luke
http://www.getopt.org/luke/=20

-----Original Message-----
From: Srimant Mishra [mailto:smisra@etouch.net]=20
Sent: Tuesday, March 01, 2005 4:39 PM
To: lucene-user@jakarta.apache.org
Subject: How to manipulate the lucene index table

Hi all,=20

=20

         I have a web-based application that we use to index text
documents as well as images; the indexes fields are either
Field.Unstored or Field.Keyword.=20

=20

=20

         Currently, we plan to modify some of the index field names. For
example, if the index field name was DOCLOCALE, we plan to break it up
into two fields: DOCUMENTTYPE and LOCALE. Since, the index files that
lucene creates have become quite big (close to 1 gig), we are looking
for a way to be able to read the index entries and modify them via a
standalone Java program.

=20

Does lucene provide any APIs to read these index entries and update
them? Is there an easy way to do it?

=20

Thanks in advance

Srimant


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13469-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 03:10:18 2005
Return-Path: <lucene-user-return-13469-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83935 invoked from network); 2 Mar 2005 03:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 03:10:18 -0000
Received: (qmail 77420 invoked by uid 500); 2 Mar 2005 03:10:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76554 invoked by uid 500); 2 Mar 2005 03:10:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76540 invoked by uid 99); 2 Mar 2005 03:10:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 19:10:13 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 12E8413E210E; Tue,  1 Mar 2005 22:10:09 -0500 (EST)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 2EA7613E2006
	for <lucene-user@jakarta.apache.org>; Tue,  1 Mar 2005 22:09:49 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <5f4a6461050301170613fef5da@mail.gmail.com>
References: <5f4a6461050301170613fef5da@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <71cfc9d282c75c9a4cde7557bcf82d9c@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Multiple indexes
Date: Tue, 1 Mar 2005 22:09:05 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It's hard to answer such a general question with anything very precise, 
so sorry if this doesn't hit the mark.  Come back with more details and 
we'll gladly assist though.

First, certainly do not copy/paste code.  Use standard reuse practices, 
perhaps the same program can build the two different indexes if passed 
different parameters, or share code between two different programs as a 
JAR.

What specifically are the issues you're encountering?

	Erik


On Mar 1, 2005, at 8:06 PM, Ben wrote:

> Hi
>
> My site has two types of documents with different structure. I would
> like to create an index for each type of document. What is the best
> way to implement this?
>
> I have been trying to implement this but found out that 90% of the
> code is the same.
>
> In Lucene in Action book, there is a case study on jGuru, it just
> mentions them using multiple indexes. I would like to do something
> like them.
>
> Any resources on the Internet that I can learn from?
>
> Thanks,
> Ben
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13470-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 03:46:07 2005
Return-Path: <lucene-user-return-13470-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2193 invoked from network); 2 Mar 2005 03:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 03:46:07 -0000
Received: (qmail 23027 invoked by uid 500); 2 Mar 2005 03:46:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23003 invoked by uid 500); 2 Mar 2005 03:46:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22979 invoked by uid 99); 2 Mar 2005 03:46:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.199 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 19:46:01 -0800
Received: by rproxy.gmail.com with SMTP id a41so52295rng
        for <lucene-user@jakarta.apache.org>; Tue, 01 Mar 2005 19:45:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=TLFT82pgYeqHvBDT51Qqu4pz1U990OPCo81lFRlgcv6gRTAKogwwFB6S6D2phAW62JK3k/x/ygjq9lAXCSM/dbM9xDlK7KPcZaelGw0H/9d4MWP9rXu48wCSxlesqkBffErHZUrk0ukPGVj1v7RLOK6ZRkq1gDNiSRqhFQA859M=
Received: by 10.38.68.14 with SMTP id q14mr286199rna;
        Tue, 01 Mar 2005 19:45:59 -0800 (PST)
Received: by 10.38.12.13 with HTTP; Tue, 1 Mar 2005 19:45:59 -0800 (PST)
Message-ID: <c68e391705030119457d39b3d8@mail.gmail.com>
Date: Tue, 1 Mar 2005 22:45:59 -0500
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
In-Reply-To: <1109713160.18862.109.camel@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <1109713160.18862.109.camel@localhost>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> 6. Index locally and synchronize changes periodically. This is an
> interesting idea and bears looking into. Lucene can combine multiple
> indexes into a single one, which can be written out somewhere else, and
> then distributed back to the search nodes to replace their existing
> index.

This is a promising idea for handling a high update volume because it
avoids all of the search nodes having to do the analysis phase.

Unfortunately, the way addIndexes() is implemented looks like it's
going to present some new problems:

  public synchronized void addIndexes(Directory[] dirs)
      throws IOException {
    optimize();					  // start with zero or 1 seg
    for (int i = 0; i < dirs.length; i++) {
      SegmentInfos sis = new SegmentInfos();	  // read infos from dir
      sis.read(dirs[i]);
      for (int j = 0; j < sis.size(); j++) {
        segmentInfos.addElement(sis.info(j));	  // add each info
      }
    }
    optimize();					  // final cleanup
  }

We need to deal with some very large indexes (40G+), and an optimize
rewrites the entire index, no matter how few documents were added. 
Since our strategy calls for deleting some docs on the primary index
before calling addIndexes() this means *both* calls to optimize() will
end up rewriting the entire index!

The ideal behavior would be that of addDocument() - segments are only
merged occasionally.   That said, I'll throw out a replacement
implementation that probably doesn't work, but hopefully will spur
someone with more knowledge of Lucene internals to take a look at
this.

  public synchronized void addIndexes(Directory[] dirs)
      throws IOException {
    // REMOVED: optimize();
    for (int i = 0; i < dirs.length; i++) {
      SegmentInfos sis = new SegmentInfos();	  // read infos from dir
      sis.read(dirs[i]);
      for (int j = 0; j < sis.size(); j++) {
        segmentInfos.addElement(sis.info(j));	  // add each info
      }
    }
    maybeMergeSegments();   // replaces optimize
  }

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13471-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 04:10:20 2005
Return-Path: <lucene-user-return-13471-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21189 invoked from network); 2 Mar 2005 04:10:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 04:10:20 -0000
Received: (qmail 42614 invoked by uid 500); 2 Mar 2005 04:10:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42575 invoked by uid 500); 2 Mar 2005 04:10:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42561 invoked by uid 99); 2 Mar 2005 04:10:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.205 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 20:10:06 -0800
Received: by wproxy.gmail.com with SMTP id 70so41267wra
        for <lucene-user@jakarta.apache.org>; Tue, 01 Mar 2005 20:10:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=Og6I1/Knt+XJdtDvswdIab7F3vNOh3yPs6e5aoPZOA0kdNy6pZ2l8IOyuE/9y+AwY31x/eyql8DTLGjW2x6sXxfuvxfUTnEXo9VgKninOPE10m33CU79vOkenV96h2WKYyGYHn8O2nBYr1Al25YRJz0yT8Y2ozBBt0AkSl8ZRI4=
Received: by 10.54.51.73 with SMTP id y73mr81901wry;
        Tue, 01 Mar 2005 20:10:03 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Tue, 1 Mar 2005 20:10:03 -0800 (PST)
Message-ID: <5f4a646105030120102eca58f1@mail.gmail.com>
Date: Wed, 2 Mar 2005 15:10:03 +1100
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Multiple indexes
In-Reply-To: <71cfc9d282c75c9a4cde7557bcf82d9c@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <5f4a6461050301170613fef5da@mail.gmail.com>
	 <71cfc9d282c75c9a4cde7557bcf82d9c@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is it true that for each index I have to create a seperate instance
for FSDirectory, IndexWriter and IndexReader? Do I need to create a
seperate locking mechanism as well?

I have already implemented a program using just one index.

Thanks,
Ben

On Tue, 1 Mar 2005 22:09:05 -0500, Erik Hatcher
<erik@ehatchersolutions.com> wrote:
> It's hard to answer such a general question with anything very precise,
> so sorry if this doesn't hit the mark.  Come back with more details and
> we'll gladly assist though.
> 
> First, certainly do not copy/paste code.  Use standard reuse practices,
> perhaps the same program can build the two different indexes if passed
> different parameters, or share code between two different programs as a
> JAR.
> 
> What specifically are the issues you're encountering?
> 
>         Erik
> 
> 
> On Mar 1, 2005, at 8:06 PM, Ben wrote:
> 
> > Hi
> >
> > My site has two types of documents with different structure. I would
> > like to create an index for each type of document. What is the best
> > way to implement this?
> >
> > I have been trying to implement this but found out that 90% of the
> > code is the same.
> >
> > In Lucene in Action book, there is a case study on jGuru, it just
> > mentions them using multiple indexes. I would like to do something
> > like them.
> >
> > Any resources on the Internet that I can learn from?
> >
> > Thanks,
> > Ben
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13472-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 05:04:54 2005
Return-Path: <lucene-user-return-13472-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43863 invoked from network); 2 Mar 2005 05:04:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 05:04:54 -0000
Received: (qmail 30176 invoked by uid 500); 2 Mar 2005 05:04:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30152 invoked by uid 500); 2 Mar 2005 05:04:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30136 invoked by uid 99); 2 Mar 2005 05:04:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 21:04:48 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <2005030205044601500l2r1ke>; Wed, 2 Mar 2005 05:04:46 +0000
Message-ID: <42254963.6000901@apache.org>
Date: Tue, 01 Mar 2005 21:04:35 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
References: <1109713160.18862.109.camel@localhost> <c68e391705030119457d39b3d8@mail.gmail.com>
In-Reply-To: <c68e391705030119457d39b3d8@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
>>6. Index locally and synchronize changes periodically. This is an
>>interesting idea and bears looking into. Lucene can combine multiple
>>indexes into a single one, which can be written out somewhere else, and
>>then distributed back to the search nodes to replace their existing
>>index.
> 
> This is a promising idea for handling a high update volume because it
> avoids all of the search nodes having to do the analysis phase.

A clever way to do this is to take advantage of Lucene's index file 
structure.  Indexes are directories of files.  As the index changes 
through additions and deletions most files in the index stay the same. 
So you can efficiently synchronize multiple copies of an index by only 
copying the files that change.

The way I did this for Technorati was to:

1. On the index master, periodically checkpoint the index.  Every minute 
or so the IndexWriter is closed and a 'cp -lr index index.DATE' command 
is executed from Java, where DATE is the current date and time.  This 
efficiently makes a copy of the index when its in a consistent state by 
constructing a tree of hard links.  If Lucene re-writes any files (e.g., 
the segments file) a new inode is created and the copy is unchanged.

2. From a crontab on each search slave, periodically poll for new 
checkpoints.  When a new index.DATE is found, use 'cp -lr index 
index.DATE' to prepare a copy, then use 'rsync -W --delete 
master:index.DATE index.DATE' to get the incremental index changes. 
Then atomically install the updated index with a symbolic link (ln -fsn 
index.DATE index).

3. In Java on the slave, re-open 'index' it when its version changes. 
This is best done in a separate thread that periodically checks the 
index version.  When it changes, the new version is opened, a few 
typical queries are performed on it to pre-load Lucene's caches.  Then, 
in a synchronized block, the Searcher variable used in production is 
updated.

4. In a crontab on the master, periodically remove the oldest checkpoint 
indexes.

Technorati's Lucene index is updated this way every minute.  A 
mergeFactor of 2 is used on the master in order to minimize the number 
of segments in production.  The master has a hot spare.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13473-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 05:31:18 2005
Return-Path: <lucene-user-return-13473-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56390 invoked from network); 2 Mar 2005 05:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 05:31:18 -0000
Received: (qmail 88964 invoked by uid 500); 2 Mar 2005 05:31:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88634 invoked by uid 500); 2 Mar 2005 05:31:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88621 invoked by uid 99); 2 Mar 2005 05:31:12 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31107.mail.mud.yahoo.com (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 01 Mar 2005 21:31:10 -0800
Received: (qmail 26745 invoked by uid 60001); 2 Mar 2005 05:31:08 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=vn+1cuFXXgabRF6ckm647xo3USMNCXx6IGvJlsPeFvHKx+8g/Ry0EIW1Qstbzd3fM3vM1Epk7yrIk9IwDxgTB0Xi9u3GV25xewmXVzF72NItiAVGeJOu0/op0vGawtc2XMDYdFtlIQbcxiJYxnKAYgU5yuBHen/s/+HIUcYKUQM=  ;
Message-ID: <20050302053108.26743.qmail@web31107.mail.mud.yahoo.com>
Received: from [69.201.143.88] by web31107.mail.mud.yahoo.com via HTTP; Tue, 01 Mar 2005 21:31:08 PST
Date: Tue, 1 Mar 2005 21:31:08 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Multiple indexes
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Ben <newreaders@gmail.com>
In-Reply-To: <5f4a646105030120102eca58f1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ben,

You do need to use a separate instance of those 3 classes for each
index yes.  But this is really something like:

IndexWriter writer = new IndexWriter(....);

So it's normal code-writing process.... you don't really have to create
anything new, just use existing Lucene API.  As for locking, again you
don't need to create anything.  Lucene does have a locking mechanism,
but most of it should be completely invisible to you if you follow the
concurrency rules.

I hope this helps.

Otis

--- Ben <newreaders@gmail.com> wrote:

> Is it true that for each index I have to create a seperate instance
> for FSDirectory, IndexWriter and IndexReader? Do I need to create a
> seperate locking mechanism as well?
> 
> I have already implemented a program using just one index.
> 
> Thanks,
> Ben
> 
> On Tue, 1 Mar 2005 22:09:05 -0500, Erik Hatcher
> <erik@ehatchersolutions.com> wrote:
> > It's hard to answer such a general question with anything very
> precise,
> > so sorry if this doesn't hit the mark.  Come back with more details
> and
> > we'll gladly assist though.
> > 
> > First, certainly do not copy/paste code.  Use standard reuse
> practices,
> > perhaps the same program can build the two different indexes if
> passed
> > different parameters, or share code between two different programs
> as a
> > JAR.
> > 
> > What specifically are the issues you're encountering?
> > 
> >         Erik
> > 
> > 
> > On Mar 1, 2005, at 8:06 PM, Ben wrote:
> > 
> > > Hi
> > >
> > > My site has two types of documents with different structure. I
> would
> > > like to create an index for each type of document. What is the
> best
> > > way to implement this?
> > >
> > > I have been trying to implement this but found out that 90% of
> the
> > > code is the same.
> > >
> > > In Lucene in Action book, there is a case study on jGuru, it just
> > > mentions them using multiple indexes. I would like to do
> something
> > > like them.
> > >
> > > Any resources on the Internet that I can learn from?
> > >
> > > Thanks,
> > > Ben
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-13474-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Mar 02 05:38:42 2005
Return-Path: <lucene-user-return-13474-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58613 invoked from network); 2 Mar 2005 05:38:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 05:38:41 -0000
Received: (qmail 4498 invoked by uid 500); 2 Mar 2005 05:38:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4141 invoked by uid 500); 2 Mar 2005 05:38:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4127 invoked by uid 99); 2 Mar 2005 05:38:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from scorpio.lunarpages.com (HELO scorpio.lunarpages.com) (64.235.234.122)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 01 Mar 2005 21:38:34 -0800
Received: from [67.130.108.112] (helo=[67.130.108.112])
	by scorpio.lunarpages.com with esmtpsa (TLSv1:RC4-SHA:128)
	(Exim 4.44)
	id 1D6MZ5-000280-MJ
	for lucene-user@jakarta.apache.org; Tue, 01 Mar 2005 21:38:31 -0800
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <d0cda0642505d57739380981146695b2@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: lucene-user@jakarta.apache.org
From: Roy T. Fielding <fielding@apache.org>
Subject: list moving to lucene.apache.org
Date: Tue, 1 Mar 2005 21:38:29 -0800
X-Mailer: Apple Mail (2.619.2)
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - scorpio.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - apache.org
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This list is about to be moved to java-user at lucene.apache.org.
Please excuse the temporary inconvenience.


Cheers,

Roy T. Fielding, co-founder, The Apache Software Foundation
                  (fielding@gbiv.com)  <http://roy.gbiv.com/>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From java-user-return-13476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 08:55:08 2005
Return-Path: <java-user-return-13476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83075 invoked from network); 2 Mar 2005 08:55:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 08:55:07 -0000
Received: (qmail 44487 invoked by uid 500); 2 Mar 2005 08:55:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44452 invoked by uid 500); 2 Mar 2005 08:55:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44439 invoked by uid 500); 2 Mar 2005 08:55:01 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 44433 invoked by uid 99); 2 Mar 2005 08:55:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.184.205 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 00:54:59 -0800
Received: by wproxy.gmail.com with SMTP id 58so165775wri
        for <lucene-user@jakarta.apache.org>; Wed, 02 Mar 2005 00:54:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=eTYwJWJH6Q96EhXD1je16RpKO9acBGdmQ7xlerh5CcoRrCljqBv5jWKF7HdsSatK+Fej/QZuBedI/i0a7gFeNzCTe4zZpHLL1QlfMpXND893BDcXrPyS4PHpTNHm9X+At+Sl2YEXC3BNXa/50FiH+rXf2UYjQe+p+U2YlRP498A=
Received: by 10.54.62.11 with SMTP id k11mr13709wra;
        Wed, 02 Mar 2005 00:54:56 -0800 (PST)
Received: from ?192.168.1.100? ([24.6.189.152])
        by smtp.gmail.com with ESMTP id 6sm225267wrl.2005.03.02.00.54.56;
        Wed, 02 Mar 2005 00:54:56 -0800 (PST)
Message-ID: <42257F00.6000009@gmail.com>
Date: Wed, 02 Mar 2005 00:53:20 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: warm up lucene, especially sort by cache
References: <20050302055202.80474.qmail@web31106.mail.mud.yahoo.com>
In-Reply-To: <20050302055202.80474.qmail@web31106.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

1. Need an efficient way to pick up the most frequent words in an index.
    I think this can be done, any example will be appreciated.
2. search by the most freqent words, with sort by options

Is this the only way to warm up lucene? For large indexes, the first 
sort-by search is slow.

Chris


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 09:49:50 2005
Return-Path: <java-user-return-13477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19323 invoked from network); 2 Mar 2005 09:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 09:49:50 -0000
Received: (qmail 27009 invoked by uid 500); 2 Mar 2005 09:49:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26115 invoked by uid 500); 2 Mar 2005 09:49:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26097 invoked by uid 99); 2 Mar 2005 09:49:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 01:49:44 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 6497923CE0
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 10:50:37 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 10759-01 for <java-user@lucene.apache.org>;
 Wed,  2 Mar 2005 10:50:37 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 1646723BF5
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 10:50:37 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j229ot72029397
	for <java-user@lucene.apache.org>; Wed, 2 Mar 2005 10:50:55 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j229otvf029393;
	Wed, 2 Mar 2005 10:50:55 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16933.35967.52468.175591@tanto-xipolis.de>
Date: Wed, 2 Mar 2005 10:50:55 +0100
To: java-user@lucene.apache.org
Subject: Re: warm up lucene, especially sort by cache
In-Reply-To: <42257F00.6000009@gmail.com>
References: <20050302055202.80474.qmail@web31106.mail.mud.yahoo.com>
	<42257F00.6000009@gmail.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Lu writes:
> 1. Need an efficient way to pick up the most frequent words in an index.
>     I think this can be done, any example will be appreciated.
I don't see an alternative to looping through all terms and look at their
frequency.

> 2. search by the most freqent words, with sort by options
> 
> Is this the only way to warm up lucene? For large indexes, the first 
> sort-by search is slow.
> 
that's independent of what you search for.
sort by is done by creating a in memory array of all field values of all
documents. This array is cached and reused for further searches.

So if you use sort, doing one sort after creating the index might be useful.

For reading relevant parts of the index into OS caches, I'd rather use
the most commonly searched terms, than the most frequent ones.

HTH
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 09:51:42 2005
Return-Path: <java-user-return-13478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20299 invoked from network); 2 Mar 2005 09:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 09:51:41 -0000
Received: (qmail 29788 invoked by uid 500); 2 Mar 2005 09:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29736 invoked by uid 500); 2 Mar 2005 09:51:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29720 invoked by uid 99); 2 Mar 2005 09:51:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 01:51:27 -0800
Received: by mail.runtime-collective.com with esmtp (Exim 3.35 #1 (Debian))
	id 1D6QVl-0006AA-00; Wed, 02 Mar 2005 09:51:21 +0000
Subject: Re: Large Index managing
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com>
References: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com>
Content-Type: text/plain
Organization: Runtime Collective
Message-Id: <1109757082.1397.10.camel@percy.runtime-collective.com>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Wed, 02 Mar 2005 09:51:23 +0000
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 2005-03-02 at 05:49, Otis Gospodnetic wrote:
> Or you can just buffer your update requests and delete in batch and
> then add in batch.
> 
> Or you could keep that IndexReader on the large index and use it to
> delete objects, while doing adds on a RAMDirectory.  Then, when you are
> done, merge the RAMDirectory index with the large one.  Also just an
> untested idea.... and really something that is not much different from
> simple buffering in your application logic.

You can batch updates to an index but you cannot do all the deletes and
all the writes because there's no primary key concept in Lucene.
Updating a document consists of two actions, first removing it, then
adding the new copy. If you update a document more than once between
doing the batch changes you can end up with different versions on the
same document in the index.

e.g.

updateDoc(key, doc);

... changes to doc ...

updateDoc(key, doc);

would become

reader.delete(doc);
// 1 document deleted

reader.delete(doc);
// 0 documents deleted

writer.add(doc);
writer.add(doc);

// N.B. syntax is incorrect

and doc would appear twice

You have to do the deletes and writes in the order they happen. But at
least by batching them you can make the long wait infrequent.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 09:51:42 2005
Return-Path: <java-user-return-13479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20316 invoked from network); 2 Mar 2005 09:51:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 09:51:41 -0000
Received: (qmail 29880 invoked by uid 500); 2 Mar 2005 09:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29751 invoked by uid 500); 2 Mar 2005 09:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29725 invoked by uid 500); 2 Mar 2005 09:51:28 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 29720 invoked by uid 99); 2 Mar 2005 09:51:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 01:51:27 -0800
Received: by mail.runtime-collective.com with esmtp (Exim 3.35 #1 (Debian))
	id 1D6QVl-0006AA-00; Wed, 02 Mar 2005 09:51:21 +0000
Subject: Re: Large Index managing
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com>
References: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com>
Content-Type: text/plain
Organization: Runtime Collective
Message-Id: <1109757082.1397.10.camel@percy.runtime-collective.com>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Wed, 02 Mar 2005 09:51:23 +0000
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 2005-03-02 at 05:49, Otis Gospodnetic wrote:
> Or you can just buffer your update requests and delete in batch and
> then add in batch.
> 
> Or you could keep that IndexReader on the large index and use it to
> delete objects, while doing adds on a RAMDirectory.  Then, when you are
> done, merge the RAMDirectory index with the large one.  Also just an
> untested idea.... and really something that is not much different from
> simple buffering in your application logic.

You can batch updates to an index but you cannot do all the deletes and
all the writes because there's no primary key concept in Lucene.
Updating a document consists of two actions, first removing it, then
adding the new copy. If you update a document more than once between
doing the batch changes you can end up with different versions on the
same document in the index.

e.g.

updateDoc(key, doc);

... changes to doc ...

updateDoc(key, doc);

would become

reader.delete(doc);
// 1 document deleted

reader.delete(doc);
// 0 documents deleted

writer.add(doc);
writer.add(doc);

// N.B. syntax is incorrect

and doc would appear twice

You have to do the deletes and writes in the order they happen. But at
least by batching them you can make the long wait infrequent.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 10:27:31 2005
Return-Path: <java-user-return-13480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39325 invoked from network); 2 Mar 2005 10:27:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 10:27:31 -0000
Received: (qmail 93733 invoked by uid 500); 2 Mar 2005 10:27:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93708 invoked by uid 500); 2 Mar 2005 10:27:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93695 invoked by uid 99); 2 Mar 2005 10:27:26 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 02:27:25 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id EB06C7FF58
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 12:27:21 +0200 (EET)
Message-ID: <42259509.60608@i-hypergrid.com>
Date: Wed, 02 Mar 2005 12:27:21 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Large Index managing
References: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com> <1109757082.1397.10.camel@percy.runtime-collective.com>
In-Reply-To: <1109757082.1397.10.camel@percy.runtime-collective.com>
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

this is solved by keeping document key not in list but in set.
then even with two updates delete and add will appear only once.


Miles Barr wrote:

>On Wed, 2005-03-02 at 05:49, Otis Gospodnetic wrote:
>  
>
>>Or you can just buffer your update requests and delete in batch and
>>then add in batch.
>>
>>Or you could keep that IndexReader on the large index and use it to
>>delete objects, while doing adds on a RAMDirectory.  Then, when you are
>>done, merge the RAMDirectory index with the large one.  Also just an
>>untested idea.... and really something that is not much different from
>>simple buffering in your application logic.
>>    
>>
>
>You can batch updates to an index but you cannot do all the deletes and
>all the writes because there's no primary key concept in Lucene.
>Updating a document consists of two actions, first removing it, then
>adding the new copy. If you update a document more than once between
>doing the batch changes you can end up with different versions on the
>same document in the index.
>
>e.g.
>
>updateDoc(key, doc);
>
>... changes to doc ...
>
>updateDoc(key, doc);
>
>would become
>
>reader.delete(doc);
>// 1 document deleted
>
>reader.delete(doc);
>// 0 documents deleted
>
>writer.add(doc);
>writer.add(doc);
>
>// N.B. syntax is incorrect
>
>and doc would appear twice
>
>You have to do the deletes and writes in the order they happen. But at
>least by batching them you can make the long wait infrequent.
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 10:35:53 2005
Return-Path: <java-user-return-13481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43318 invoked from network); 2 Mar 2005 10:35:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 10:35:53 -0000
Received: (qmail 5138 invoked by uid 500); 2 Mar 2005 10:35:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5098 invoked by uid 500); 2 Mar 2005 10:35:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5085 invoked by uid 500); 2 Mar 2005 10:35:49 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 5081 invoked by uid 99); 2 Mar 2005 10:35:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 02:35:47 -0800
Received: from stenly (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with SMTP id j22AZWHE026204
	for <lucene-user@jakarta.apache.org>; Wed, 2 Mar 2005 12:35:32 +0200
Message-ID: <003101c51f13$8f6640d0$d380a8c0@sirma.int>
From: "Stanislav Jordanov" <stenly@sirma.bg>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <421F8DB6.3030306@jCatalog.com> <16930.51341.630394.350033@tanto-xipolis.de> <00d301c51d84$bf531970$d380a8c0@sirma.int> <ceaba1d83560d5f35aad6d3005069481@ehatchersolutions.com> <019801c51dab$c2c746e0$d380a8c0@sirma.int> <d08003cfff6c6ece3420f8f8c97895b0@ehatchersolutions.com> <023801c51e3a$c38ab0f0$d380a8c0@sirma.int> <4224B153.7080104@apache.org>
Subject: Re: Fast access to a random page of the search results.
Date: Wed, 2 Mar 2005 12:35:31 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.181
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You're rihgt:  nHits - nHits == 0 :)
But I did the right tests - it just happened that I've sent you a wrong
source.
I mean I performed the tests accessing the proper last doc: doc(nHits - 1)
then I switched to accessing the first hit, just to make sure (once again)
there is essential difference in access times.
And instead of wiping out the code fragment (nHits - 1) and replacing it
with 0, a replaced 1 with nHits.
That's how the resulting (nHits - nHits) code got posted.

Yes, the index is stored at a local hard drive.

Stenly



----- Original Message ----- 
From: "Doug Cutting" <cutting@apache.org>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, March 01, 2005 8:15 PM
Subject: Re: Fast access to a random page of the search results.


> Stanislav Jordanov wrote:
> >                 startTs = System.currentTimeMillis();
> >                 dummyMethod(hits.doc(nHits - nHits));
> >                 stopTs = System.currentTimeMillis();
> >                 System.out.println("Last doc accessed in " + (stopTs -
> > startTs)
> >                                     + "ms");
>
> 'nHits - nHits' always equals zero.  So you're actually printing the
> first document, not the last.  The last document would be accessed with
> 'hits.doc(nHits)'.  Accessing the last document should not be much
> slower (or faster) than accessing the first.
>
> 200+ milliseconds to access a document does seem slow.  Where is you
> index stored?  On a local hard drive?
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 11:26:27 2005
Return-Path: <java-user-return-13482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72298 invoked from network); 2 Mar 2005 11:26:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 11:26:27 -0000
Received: (qmail 78516 invoked by uid 500); 2 Mar 2005 11:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77628 invoked by uid 500); 2 Mar 2005 11:26:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77614 invoked by uid 500); 2 Mar 2005 11:26:23 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 77608 invoked by uid 99); 2 Mar 2005 11:26:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 03:26:21 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 922BE13E2135; Wed,  2 Mar 2005 06:26:19 -0500 (EST)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 2425713E210E
	for <lucene-user@jakarta.apache.org>; Wed,  2 Mar 2005 06:26:00 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA01082996@hermes.corp.cyveillance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA01082996@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: help with boolean expression
Date: Wed, 2 Mar 2005 06:25:58 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm deep into implementing a custom (not generalizable, sorry) query 
parser and am evaluating this very issue now.

Lucene indeed does some funny stuff with boolean operators.  Output the 
toString of your resultant Query's to see the details, or have a look 
at the Bugzilla issue that Morus mentions below.

First some background: BooleanQuery clauses each have their own set of 
required/optional/prohibited attributes.  Putting operators between 
them is awkward in the Lucene sense because the parser has to set each 
clause individually, not in relation to another one.

QueryParser takes the most recent operator and applies it to both the 
clause before and after, and there is no sense of operator precedence 
(such as in a math expression like 1 + 2 * 3).  In the case of A AND B 
OR C, when the AND is encountered, it sets the required attribute for 
both A and B, but then when the OR is encountered it sets the optional 
attribute on B and C, stepping on the previous required flag for B.  
And similarly with A OR B AND C.

I agree that the current behavior is awkward.  Is it worth breaking 
backwards compatibility to correct this with the patch applied?

As for the default operator, it is not coming into play in your 
expression examples because there all clauses have an explicit 
conjunction that sets the flag.  The default operator comes into play 
for an expression like A B AND C and would be used to set the flag on 
the A clause.

	Erik


On Mar 1, 2005, at 9:12 AM, Omar Didi wrote:

> I found something kind fo weird about the way lucene interprets 
> boolean expressions wihout parenthesis.
> when i run the query A AND B OR C, it returns only the documents that 
> have A(in other words as if the query was just the term A).
> when I run the query A OR B AND C, it returns only the documents that 
> have B AND C(as if teh query was just B AND C ). I set the default 
> operator in my application to be AND.
> can anyone explain this behavior, thanks.
>
> -----Original Message-----
> From: Morus Walter [mailto:morus.walter@tanto.de]
> Sent: Monday, February 28, 2005 2:40 AM
> To: Lucene Users List
> Subject: Re: help with boolean expression
>
>
> Omar Didi writes:
>> I have a problem understanding how would lucene iterpret this boolean 
>> expression : A AND B OR C .
>> it neither return the same count as when I enter (A AND B) OR C nor A 
>> AND (B OR C).
>> if anyone knows how it is interpreted i would be thankful.
>> thanks
>
> A AND B OR C creates a query that requires A and B. C influcenes the
> score, but is neither sufficient nor required for a match.
>
> IMO query parser is broken for queries mixing AND and OR without 
> explicit
> braces.
> My favorite sample is `a AND b OR c AND d' which equals `a AND b AND c 
> AND d'
> in query parser.
>
> I suggested a patch some time ago, but it's still pending in bugzilla.
> http://issues.apache.org/bugzilla/show_bug.cgi?id=25820
>
> Don't know if it's still usable with current sources.
>
> Morus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 12:35:55 2005
Return-Path: <java-user-return-13483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9057 invoked from network); 2 Mar 2005 12:35:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 12:35:55 -0000
Received: (qmail 66414 invoked by uid 500); 2 Mar 2005 12:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66375 invoked by uid 500); 2 Mar 2005 12:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66358 invoked by uid 99); 2 Mar 2005 12:35:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from moutng.kundenserver.de (HELO moutng.kundenserver.de) (212.227.126.188)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 04:35:50 -0800
Received: from [212.227.126.206] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D6T4t-0004ga-00
	for java-user@lucene.apache.org; Wed, 02 Mar 2005 13:35:47 +0100
Received: from [62.245.161.63] (helo=voodoo.federation.net)
	by mrelayng.kundenserver.de with asmtp (TLSv1:RC4-MD5:128)
	(Exim 3.35 #1)
	id 1D6T4t-0003db-00
	for java-user@lucene.apache.org; Wed, 02 Mar 2005 13:35:47 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: java-user@lucene.apache.org
Subject: Re: help with boolean expression
Date: Wed, 2 Mar 2005 13:35:46 +0100
User-Agent: KMail/1.7.1
References: <63434C14F9A6F74CB36B85033E4C30CA01082996@hermes.corp.cyveillance.com> <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com>
In-Reply-To: <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200503021335.46977.daniel.naber@t-online.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 02 March 2005 12:25, Erik Hatcher wrote:

> I agree that the current behavior is awkward. =A0Is it worth breaking
> backwards compatibility to correct this with the patch applied?

I'd vote for fixing this as long as the current QueryParser is still availa=
ble=20
in Lucene core, maybe as OldQueryParser or NoPrecedenceQueryParser. It's=20
surely better to fix it for 2.0 than for 2.x.

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 13:44:37 2005
Return-Path: <java-user-return-13484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46432 invoked from network); 2 Mar 2005 13:44:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 13:44:37 -0000
Received: (qmail 89070 invoked by uid 500); 2 Mar 2005 13:44:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89040 invoked by uid 500); 2 Mar 2005 13:44:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89022 invoked by uid 99); 2 Mar 2005 13:44:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 05:44:30 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: help with boolean expression
Date: Wed, 2 Mar 2005 08:44:28 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA0108299C@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: help with boolean expression
thread-index: AcUfGrI8+a+ukM6GRzmsDNpTELpLVgAEnftg
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

thank you so much Eric and Morus, I have a clear idea now how it works. =
i will try to implement a custom code that adds the parenthesis to =
boolean expressions with some rules about operator precedence.=20

Omar

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, March 02, 2005 6:26 AM
To: Lucene Users List
Subject: Re: help with boolean expression


I'm deep into implementing a custom (not generalizable, sorry) query=20
parser and am evaluating this very issue now.

Lucene indeed does some funny stuff with boolean operators.  Output the=20
toString of your resultant Query's to see the details, or have a look=20
at the Bugzilla issue that Morus mentions below.

First some background: BooleanQuery clauses each have their own set of=20
required/optional/prohibited attributes.  Putting operators between=20
them is awkward in the Lucene sense because the parser has to set each=20
clause individually, not in relation to another one.

QueryParser takes the most recent operator and applies it to both the=20
clause before and after, and there is no sense of operator precedence=20
(such as in a math expression like 1 + 2 * 3).  In the case of A AND B=20
OR C, when the AND is encountered, it sets the required attribute for=20
both A and B, but then when the OR is encountered it sets the optional=20
attribute on B and C, stepping on the previous required flag for B. =20
And similarly with A OR B AND C.

I agree that the current behavior is awkward.  Is it worth breaking=20
backwards compatibility to correct this with the patch applied?

As for the default operator, it is not coming into play in your=20
expression examples because there all clauses have an explicit=20
conjunction that sets the flag.  The default operator comes into play=20
for an expression like A B AND C and would be used to set the flag on=20
the A clause.

	Erik


On Mar 1, 2005, at 9:12 AM, Omar Didi wrote:

> I found something kind fo weird about the way lucene interprets=20
> boolean expressions wihout parenthesis.
> when i run the query A AND B OR C, it returns only the documents that=20
> have A(in other words as if the query was just the term A).
> when I run the query A OR B AND C, it returns only the documents that=20
> have B AND C(as if teh query was just B AND C ). I set the default=20
> operator in my application to be AND.
> can anyone explain this behavior, thanks.
>
> -----Original Message-----
> From: Morus Walter [mailto:morus.walter@tanto.de]
> Sent: Monday, February 28, 2005 2:40 AM
> To: Lucene Users List
> Subject: Re: help with boolean expression
>
>
> Omar Didi writes:
>> I have a problem understanding how would lucene iterpret this boolean =

>> expression : A AND B OR C .
>> it neither return the same count as when I enter (A AND B) OR C nor A =

>> AND (B OR C).
>> if anyone knows how it is interpreted i would be thankful.
>> thanks
>
> A AND B OR C creates a query that requires A and B. C influcenes the
> score, but is neither sufficient nor required for a match.
>
> IMO query parser is broken for queries mixing AND and OR without=20
> explicit
> braces.
> My favorite sample is `a AND b OR c AND d' which equals `a AND b AND c =

> AND d'
> in query parser.
>
> I suggested a patch some time ago, but it's still pending in bugzilla.
> http://issues.apache.org/bugzilla/show_bug.cgi?id=3D25820
>
> Don't know if it's still usable with current sources.
>
> Morus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 13:59:57 2005
Return-Path: <java-user-return-13485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54180 invoked from network); 2 Mar 2005 13:59:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 13:59:56 -0000
Received: (qmail 22639 invoked by uid 500); 2 Mar 2005 13:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22580 invoked by uid 500); 2 Mar 2005 13:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22442 invoked by uid 99); 2 Mar 2005 13:59:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 05:59:47 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 43AA623CE0
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 15:00:40 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 14031-10 for <java-user@lucene.apache.org>;
 Wed,  2 Mar 2005 15:00:40 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 0AFEF23BF5
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 15:00:40 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j22E0w72000678
	for <java-user@lucene.apache.org>; Wed, 2 Mar 2005 15:00:58 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j22E0wjw000674;
	Wed, 2 Mar 2005 15:00:58 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16933.50970.191626.59954@tanto-xipolis.de>
Date: Wed, 2 Mar 2005 15:00:58 +0100
To: java-user@lucene.apache.org
Subject: RE: help with boolean expression
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA0108299C@hermes.corp.cyveillance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA0108299C@hermes.corp.cyveillance.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Omar Didi writes:
> thank you so much Eric and Morus, I have a clear idea now how it works. i will try to implement a custom code that adds the parenthesis to boolean expressions with some rules about operator precedence. 
> 
I rather suggest, that you patch QP instead.

Adding parenthesis before handing the query string to QP means, to parse the
query string in your custom code, serialize the result to a query again
and let QP parse that string.
So in the end, you double the effort. Both for coding and runtime.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 14:25:00 2005
Return-Path: <java-user-return-13486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84786 invoked from network); 2 Mar 2005 14:24:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 14:24:59 -0000
Received: (qmail 88406 invoked by uid 500); 2 Mar 2005 14:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88388 invoked by uid 500); 2 Mar 2005 14:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 58008 invoked by uid 500); 2 Mar 2005 14:15:01 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Date: Wed, 02 Mar 2005 15:13:31 +0100 (CET)
From: Friso van Vollenhoven <friso@func.nl>
Subject: possible concurrent actions table
To: lucene-user@jakarta.apache.org
Message-id: <33123.192.168.0.23.1109772811.squirrel@webmail.linapp02.func.nl>
MIME-version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
Importance: Normal
X-Priority: 3 (Normal)
User-Agent: SquirrelMail/1.4.4
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at func.nl
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I found this table at jGruru:
http://www.jguru.com/forums/view.jsp?EID=910778

Since the table seems to be about 2.5 years old, I was wondering if it is
still correct.

It says that I can concurrently delete and read a document. So if there
are two threads using one IndexReader instance, they could concurrently
read and delete a (possibly the same) document.

And if the threads do not share a single IndexReader instance. Will the
reading thread still see the document when the deleting thread has deleted
(and commited) it (if both IndexReader instances were opened when the
document was not yet deleted).


Thanks to anyone who knows and answers,

Friso



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 14:33:14 2005
Return-Path: <java-user-return-13487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89395 invoked from network); 2 Mar 2005 14:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 14:33:14 -0000
Received: (qmail 3954 invoked by uid 500); 2 Mar 2005 14:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3920 invoked by uid 500); 2 Mar 2005 14:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3906 invoked by uid 99); 2 Mar 2005 14:33:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 06:33:08 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: help with boolean expression
Date: Wed, 2 Mar 2005 09:33:05 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829A1@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: help with boolean expression
thread-index: AcUfMB5UUZDS7aW3Rh+uOdV6qXgy5AABHplg
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I checked the code for the patch and I had no clue how to use it.=20
can you please give me some instructions?
thanks

-----Original Message-----
From: Morus Walter [mailto:morus.walter@tanto.de]
Sent: Wednesday, March 02, 2005 9:01 AM
To: java-user@lucene.apache.org
Subject: RE: help with boolean expression


Omar Didi writes:
> thank you so much Eric and Morus, I have a clear idea now how it =
works. i will try to implement a custom code that adds the parenthesis =
to boolean expressions with some rules about operator precedence.=20
>=20
I rather suggest, that you patch QP instead.

Adding parenthesis before handing the query string to QP means, to parse =
the
query string in your custom code, serialize the result to a query again
and let QP parse that string.
So in the end, you double the effort. Both for coding and runtime.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 14:37:32 2005
Return-Path: <java-user-return-13488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91956 invoked from network); 2 Mar 2005 14:37:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 14:37:32 -0000
Received: (qmail 12925 invoked by uid 500); 2 Mar 2005 14:37:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12888 invoked by uid 500); 2 Mar 2005 14:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12874 invoked by uid 99); 2 Mar 2005 14:37:25 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 06:37:24 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id 947FE8A00B
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 16:37:20 +0200 (EET)
Message-ID: <4225CFA0.4040907@i-hypergrid.com>
Date: Wed, 02 Mar 2005 16:37:20 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: possible concurrent actions table
References: <33123.192.168.0.23.1109772811.squirrel@webmail.linapp02.func.nl>
In-Reply-To: <33123.192.168.0.23.1109772811.squirrel@webmail.linapp02.func.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Friso van Vollenhoven wrote:

>Hi,
>
>I found this table at jGruru:
>http://www.jguru.com/forums/view.jsp?EID=910778
>
>Since the table seems to be about 2.5 years old, I was wondering if it is
>still correct.
>
>It says that I can concurrently delete and read a document. So if there
>are two threads using one IndexReader instance, they could concurrently
>read and delete a (possibly the same) document.
>  
>
document(int) and delete(int) are synchronized methods, so they can be 
used in different threads. However you'll get IllegalArgumentException 
trying to retrieve deleted document.

>And if the threads do not share a single IndexReader instance. Will the
>reading thread still see the document when the deleting thread has deleted
>(and commited) it (if both IndexReader instances were opened when the
>document was not yet deleted).
>  
>
reading IndexReader instance will not see changes until reopened. (also 
this instance will be unable to delete documents as well)

>
>Thanks to anyone who knows and answers,
>
>Friso
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

Regards,
Volodymyr Bychkoviak

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 14:53:03 2005
Return-Path: <java-user-return-13489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1950 invoked from network); 2 Mar 2005 14:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 14:53:03 -0000
Received: (qmail 58108 invoked by uid 500); 2 Mar 2005 14:52:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58085 invoked by uid 500); 2 Mar 2005 14:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58069 invoked by uid 99); 2 Mar 2005 14:52:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 06:52:58 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id D163D23CE0
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 15:53:51 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 15561-10 for <java-user@lucene.apache.org>;
 Wed,  2 Mar 2005 15:53:51 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id AA63823BF5
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 15:53:51 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j22Es972001137
	for <java-user@lucene.apache.org>; Wed, 2 Mar 2005 15:54:09 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j22Es9t4001133;
	Wed, 2 Mar 2005 15:54:09 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16933.54161.895788.118793@tanto-xipolis.de>
Date: Wed, 2 Mar 2005 15:54:09 +0100
To: java-user@lucene.apache.org
Subject: RE: help with boolean expression
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA010829A1@hermes.corp.cyveillance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA010829A1@hermes.corp.cyveillance.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Omar Didi writes:
> I checked the code for the patch and I had no clue how to use it. 
> can you please give me some instructions?

I guess it just patches QueryParser.jj so 
patch < {patchfile}
in the directory where QueryParser.jj is found, should do (on the command
line of course).
If you're on windows, I don't know if there's a patch programm, but you 
might get one from cywin.

Then you have to rebuild lucene.jar from it's sources...

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 15:15:52 2005
Return-Path: <java-user-return-13490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17787 invoked from network); 2 Mar 2005 15:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 15:15:51 -0000
Received: (qmail 15331 invoked by uid 500); 2 Mar 2005 15:15:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15298 invoked by uid 500); 2 Mar 2005 15:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15284 invoked by uid 99); 2 Mar 2005 15:15:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 07:15:45 -0800
Received: from stenly (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with SMTP id j22FFeHE014507
	for <java-user@lucene.apache.org>; Wed, 2 Mar 2005 17:15:41 +0200
Message-ID: <002901c51f3a$b47fdd50$d380a8c0@sirma.int>
From: "Stanislav Jordanov" <stenly@sirma.bg>
To: <java-user@lucene.apache.org>
References: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com> <1109757082.1397.10.camel@percy.runtime-collective.com>
Subject: How exactly is 'Lucene' pronounced?
Date: Wed, 2 Mar 2005 17:15:44 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="koi8-r"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.181
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How exactly is 'Lucene' pronounced?

Some of my collegues pronounce it like "Liu-sin" (accent on the second
syllable)
I use to pronounce like "Lu-sen" (accent on the second syllable)
How's the right way to do it?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 15:20:38 2005
Return-Path: <java-user-return-13491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21357 invoked from network); 2 Mar 2005 15:20:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 15:20:38 -0000
Received: (qmail 27102 invoked by uid 500); 2 Mar 2005 15:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27077 invoked by uid 500); 2 Mar 2005 15:20:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27042 invoked by uid 99); 2 Mar 2005 15:20:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 07:20:33 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CB72D13E200A; Wed,  2 Mar 2005 10:20:30 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id BA04813E2005
	for <java-user@lucene.apache.org>; Wed,  2 Mar 2005 10:20:25 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <002901c51f3a$b47fdd50$d380a8c0@sirma.int>
References: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com> <1109757082.1397.10.camel@percy.runtime-collective.com> <002901c51f3a$b47fdd50$d380a8c0@sirma.int>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b49d8a896c644a335521bc3d91db0676@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How exactly is 'Lucene' pronounced?
Date: Wed, 2 Mar 2005 10:20:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Loo seen
Lou seen


On Mar 2, 2005, at 10:15 AM, Stanislav Jordanov wrote:

> How exactly is 'Lucene' pronounced?
>
> Some of my collegues pronounce it like "Liu-sin" (accent on the second
> syllable)
> I use to pronounce like "Lu-sen" (accent on the second syllable)
> How's the right way to do it?
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 15:22:26 2005
Return-Path: <java-user-return-13492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22755 invoked from network); 2 Mar 2005 15:22:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 15:22:25 -0000
Received: (qmail 34602 invoked by uid 500); 2 Mar 2005 15:22:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34574 invoked by uid 500); 2 Mar 2005 15:22:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34561 invoked by uid 99); 2 Mar 2005 15:22:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.200 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 07:22:20 -0800
Received: by rproxy.gmail.com with SMTP id b11so141147rne
        for <java-user@lucene.apache.org>; Wed, 02 Mar 2005 07:22:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=ILu1VuYOzZNeIRHAFpX1dKArDwytKVm8sxIZupMZBtQQlmkUcsdkScB24XQy1s/9IZlmoXokN96sTwmco8wnh8snB2OmrRDD2QONWm22SfPvj1ADnEBMls8vFuWPyhqoDzZbeaq5FLN4MIrVy5hMMtx9lE0DmPChn1mrXGYk4D8=
Received: by 10.38.72.1 with SMTP id u1mr249246rna;
        Wed, 02 Mar 2005 07:22:15 -0800 (PST)
Received: by 10.38.12.13 with HTTP; Wed, 2 Mar 2005 07:22:15 -0800 (PST)
Message-ID: <c68e391705030207226acee9b9@mail.gmail.com>
Date: Wed, 2 Mar 2005 10:22:15 -0500
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: help with boolean expression
In-Reply-To: <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <63434C14F9A6F74CB36B85033E4C30CA01082996@hermes.corp.cyveillance.com>
	 <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> I agree that the current behavior is awkward.  Is it worth breaking
> backwards compatibility to correct this with the patch applied?

IMHO, definitely.
The current behavior is so surprising that I doubt  that no one is
relying on it.

I didn't really see this behavior explicitly pointed out in "Lucene in
Action".  There is a sentence at the end of 3.4.4 that could allude to
it,  but nothing that hits you over the head.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 15:50:56 2005
Return-Path: <java-user-return-13493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43395 invoked from network); 2 Mar 2005 15:50:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 15:50:56 -0000
Received: (qmail 88805 invoked by uid 500); 2 Mar 2005 15:50:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88772 invoked by uid 500); 2 Mar 2005 15:50:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88759 invoked by uid 99); 2 Mar 2005 15:50:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.wvdsl.net (HELO mail.wvdsl.net) (63.90.67.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 07:50:50 -0800
Received: from ezwv.com [65.78.245.14] by mail.wvdsl.net with ESMTP
  (SMTPD32-8.05) id A0DE880F00D4; Wed, 02 Mar 2005 10:50:54 -0500
Message-ID: <4225E0D6.2020706@ezwv.com>
Date: Wed, 02 Mar 2005 10:50:46 -0500
From: Charles Stover <cestover@ezwv.com>
User-Agent: Mozilla/5.0 (Windows; U; WinNT4.0; en-US; rv:1.5a) Gecko/20030611 Thunderbird/0.1a
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How exactly is 'Lucene' pronounced?
References: <20050302054933.35421.qmail@web31109.mail.mud.yahoo.com> <1109757082.1397.10.camel@percy.runtime-collective.com> <002901c51f3a$b47fdd50$d380a8c0@sirma.int> <b49d8a896c644a335521bc3d91db0676@ehatchersolutions.com>
In-Reply-To: <b49d8a896c644a335521bc3d91db0676@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> Loo seen
> Lou seen
>
>
> On Mar 2, 2005, at 10:15 AM, Stanislav Jordanov wrote:
>
>> How exactly is 'Lucene' pronounced?
>>
>> Some of my collegues pronounce it like "Liu-sin" (accent on the second
>> syllable)
>> I use to pronounce like "Lu-sen" (accent on the second syllable)
>> How's the right way to do it?
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> .
>
Hmm!  I thought that it was pronounced "loo-seen" (accent on the second 
syllable).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 16:31:27 2005
Return-Path: <java-user-return-13494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71818 invoked from network); 2 Mar 2005 16:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 16:31:26 -0000
Received: (qmail 93984 invoked by uid 500); 2 Mar 2005 16:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93920 invoked by uid 500); 2 Mar 2005 16:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93808 invoked by uid 99); 2 Mar 2005 16:31:15 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31109.mail.mud.yahoo.com (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 02 Mar 2005 08:31:13 -0800
Received: (qmail 58595 invoked by uid 60001); 2 Mar 2005 16:31:10 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ixpxrXdV0/pzxCqlWs5nrVOjqlOeeEZsRqwWlGgHjTI/OeRz22JlWYmpmgNr3Th+Q0FMYz70iSgCa2YsofVs8i4xovbGr+tSZcpXUBPv/jyRkrEOoK1ir8Pc+ViJcwr0YDflwTkxabHNrvmkYxsiDh+Ekf6nviME4YMEF5+woYM=  ;
Message-ID: <20050302163110.58593.qmail@web31109.mail.mud.yahoo.com>
Received: from [216.194.17.194] by web31109.mail.mud.yahoo.com via HTTP; Wed, 02 Mar 2005 08:31:10 PST
Date: Wed, 2 Mar 2005 08:31:10 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: possible concurrent actions table
To: java-user@lucene.apache.org
In-Reply-To: <33123.192.168.0.23.1109772811.squirrel@webmail.linapp02.func.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think the table is still up to date, but the most comprehensive
explanation of concurrency rules that I know of is in Chapter 2 of
Lucene in Action:
  http://www.lucenebook.com/search?query=concurrency+rules

As you can see from the 1st hit snippet, it really all boils down to
eliminating concurrent disk modifications.

Otis


--- Friso van Vollenhoven <friso@func.nl> wrote:

> Hi,
> 
> I found this table at jGruru:
> http://www.jguru.com/forums/view.jsp?EID=910778
> 
> Since the table seems to be about 2.5 years old, I was wondering if
> it is
> still correct.
> 
> It says that I can concurrently delete and read a document. So if
> there
> are two threads using one IndexReader instance, they could
> concurrently
> read and delete a (possibly the same) document.
> 
> And if the threads do not share a single IndexReader instance. Will
> the
> reading thread still see the document when the deleting thread has
> deleted
> (and commited) it (if both IndexReader instances were opened when the
> document was not yet deleted).
> 
> 
> Thanks to anyone who knows and answers,
> 
> Friso
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 16:41:00 2005
Return-Path: <java-user-return-13495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78094 invoked from network); 2 Mar 2005 16:41:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 16:41:00 -0000
Received: (qmail 19603 invoked by uid 500); 2 Mar 2005 16:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19563 invoked by uid 500); 2 Mar 2005 16:40:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19548 invoked by uid 500); 2 Mar 2005 16:40:53 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 19542 invoked by uid 99); 2 Mar 2005 16:40:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from redhat.sirma.bg (HELO redhat.sirma.bg) (62.213.161.130)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 08:40:52 -0800
Received: from stenly (stenly.sirma.int [192.168.128.211])
	by redhat.sirma.bg (8.12.7/8.12.7/Sirma Linux 0.6) with SMTP id j22GefHE026098
	for <lucene-user@jakarta.apache.org>; Wed, 2 Mar 2005 18:40:42 +0200
Message-ID: <006201c51f46$974c50e0$d380a8c0@sirma.int>
From: "Stanislav Jordanov" <stenly@sirma.bg>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <421F8DB6.3030306@jCatalog.com> <023801c51e3a$c38ab0f0$d380a8c0@sirma.int> <4224B153.7080104@apache.org> <200503012024.04519@danielnaber.de> <4224E6DF.5010109@apache.org>
Subject: Re: Fast access to a random page of the search results.
Date: Wed, 2 Mar 2005 18:40:49 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.3790.181
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.181
X-Virus-Scanned: by Sirma Antivirus System             
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you guys,

there's a good chance that I will have the management persuaded to drop the
'random access requirement'.
As you surely know, the management (usually) tends to be franticly
optimistic.
True to this trend, our management suggested  us (the R&D team) that:
"... it is time to assume that we will have to modify the core Lucene engine
in order to achieve what we want."
Quite everyone in our craft likes to think of his(or her)self as fairly good
programming geek.
But honestly speeking, I'm lacking the confidence that I can all of a sudden
introduce a significant improvement in Lucene -
a far-from-trivial framework that has been evolving for the last 4 (or 5)
years.

Highly appreciating the work you've done:
Stenly

----- Original Message ----- 
From: "Doug Cutting" <cutting@apache.org>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, March 02, 2005 12:04 AM
Subject: Re: Fast access to a random page of the search results.


> Daniel Naber wrote:
> > After fixing this I can reproduce the problem with a local index that
> > contains about 220.000 documents (700MB). Fetching the first document
> > takes for example 30ms, fetching the last one takes >100ms. Of course I
> > tested this with a query that returns many results (about 50.000).
> > Actually it happens even with the default sorting, no need to sort by
some
> > specific field.
>
> In part this is due to the fact that Hits first searches for the
> top-scoring 100 documents.  Then, if you ask for a hit after that, it
> must re-query.  In part this is also due to the fact that maintaining a
> queue of the top 50k hits is more expensive than maintaining a queue of
> the top 100 hits, so the second query is slower.  And in part this could
> be caused by other things, such as that the highest ranking document
> might tend to be cached and not require disk io.
>
> One could perform profiling to determine which is the largest factor.
> Of these, only the first is really fixable: if you know you'll need hit
> 50k then you could tell this to Hits and have it perform only a single
> query.  But the algorithmic cost of keeping the queue of the top 50k is
> the same as collecting all the hits and sorting them.  So, in part,
> getting hits 49,990 through 50,000 is inherently slower than getting
> hits 0-10.  We can minimize that, but not eliminate it.
>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 19:23:16 2005
Return-Path: <java-user-return-13496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60667 invoked from network); 2 Mar 2005 19:23:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 19:23:16 -0000
Received: (qmail 84504 invoked by uid 500); 2 Mar 2005 19:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84471 invoked by uid 500); 2 Mar 2005 19:23:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84458 invoked by uid 99); 2 Mar 2005 19:23:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc12.comcast.net (HELO rwcrmhc12.comcast.net) (216.148.227.85)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 11:23:10 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc12) with ESMTP
          id <2005030219230801400hnlv4e>; Wed, 2 Mar 2005 19:23:08 +0000
Message-ID: <4226129C.1060600@apache.org>
Date: Wed, 02 Mar 2005 11:23:08 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: warm up lucene, especially sort by cache
References: <20050302055202.80474.qmail@web31106.mail.mud.yahoo.com>	<42257F00.6000009@gmail.com> <16933.35967.52468.175591@tanto-xipolis.de>
In-Reply-To: <16933.35967.52468.175591@tanto-xipolis.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Morus Walter wrote:
> So if you use sort, doing one sort after creating the index might be useful.

Yes, this is a good way to pre-load lots of things.

> For reading relevant parts of the index into OS caches, I'd rather use
> the most commonly searched terms, than the most frequent ones.

If the index was modified on the same machine (with additions and 
deletions) but not optimized, then the most of the cache should still be 
intact, since most of the files in the index will not have changed.  So 
performing more than a single query is probably overkill.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 21:40:47 2005
Return-Path: <java-user-return-13497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34220 invoked from network); 2 Mar 2005 21:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 21:40:47 -0000
Received: (qmail 25894 invoked by uid 500); 2 Mar 2005 21:40:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25750 invoked by uid 500); 2 Mar 2005 21:40:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25734 invoked by uid 500); 2 Mar 2005 21:40:42 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 25731 invoked by uid 99); 2 Mar 2005 21:40:42 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailgate1.eduhi.at (HELO mailgate1.eduhi.at) (193.170.67.93)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 13:40:41 -0800
Received: from localhost (localhost [127.0.0.1])
	by mailgate1.eduhi.at (Postfix) with ESMTP id 339537CA7E
	for <lucene-user@jakarta.apache.org>; Wed,  2 Mar 2005 22:40:29 +0100 (CET)
Received: from mail.eduhi.at (mail.asn-linz.ac.at [172.27.2.5])
	by mailgate1.eduhi.at (Postfix) with ESMTP id 198DA7CA4F
	for <lucene-user@jakarta.apache.org>; Wed,  2 Mar 2005 22:40:29 +0100 (CET)
Received: from [192.168.0.117] ([10.221.9.19]) by mail.eduhi.at with Microsoft SMTPSVC(5.0.2172.1);
	 Wed, 2 Mar 2005 22:40:28 +0100
Message-ID: <422632CB.7020709@eduhi.at>
Date: Wed, 02 Mar 2005 22:40:27 +0100
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Remove document fails
References: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com> <42247F3B.1070401@i-hypergrid.com>
In-Reply-To: <42247F3B.1070401@i-hypergrid.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 02 Mar 2005 21:40:28.0765 (UTC) FILETIME=[73B028D0:01C51F70]
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on mailgate1.eduhi.at
X-Spam-Level: *
X-Spam-Status: No, hits=1.5 required=5.8 tests=AWL,EH_b_llwords,EH_b_lwords,
	EH_b_neg_forgetme,EH_f_whitelist5,EH_u_spam_lllow,
	UNWANTED_LANGUAGE_BODY autolearn=no version=2.64
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Volodymyr Bychkoviak wrote:

> may be you have open IndexWriter at the same time you are trying to 
> delete document.
>
> Alex Kiselevski wrote:
>
>> Hi,
>> I have a problem doing IndexReader.delete(int doc)
>> and it fails on lock error.
>>
>>
>>
>>
>>
>> Alex Kiselevski
>>
>>
>> +9.729.776.4346 (desk)
>> +9.729.776.1504 (fax)
>>
>> AMDOCS > INTEGRATED CUSTOMER MANAGEMENT
>>
>>
>>
>>
>>
>> The information contained in this message is proprietary of Amdocs,
>> protected from disclosure, and may be privileged.
>> The information is intended to be conveyed only to the designated 
>> recipient(s)
>> of the message. If the reader of this message is not the intended 
>> recipient,
>> you are hereby notified that any dissemination, use, distribution or 
>> copying of
>>
>> this communication is strictly prohibited and may be unlawful.
>>
>> If you have received this communication in error, please notify us 
>> immediately
>> by replying to the message and deleting it from your computer.
>> Thank you.
>>  
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
I've the same problem that my IndexWriter is open. Is there any 
possibility to unlock it manually because i do not want to close it.
Thank you


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 21:43:18 2005
Return-Path: <java-user-return-13498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35264 invoked from network); 2 Mar 2005 21:43:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 21:43:18 -0000
Received: (qmail 30023 invoked by uid 500); 2 Mar 2005 21:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29991 invoked by uid 500); 2 Mar 2005 21:43:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29978 invoked by uid 99); 2 Mar 2005 21:43:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx1.scansoft.com (HELO mx1.scansoft.com) (198.71.64.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 13:43:13 -0800
Received: from pb-exchcon.pb.scansoft.com ([10.1.4.73]) by mx1.scansoft.com with InterScan Messaging Security Suite; Wed, 02 Mar 2005 16:54:21 -0500
Received: by pb-exchcon.pb.scansoft.com with Internet Mail Service (5.5.2653.19)
	id <GCSVMDF1>; Wed, 2 Mar 2005 16:43:08 -0500
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B01239E90@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: How to set individual boost factor to each word in a phrase query
	?
Date: Wed, 2 Mar 2005 16:43:02 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Hi everyone.

I've been playing with Lucene a lot in the past few months for an important
project.  We are using the raw score returned by Lucene (we created a custom
similarity) as a part of a confidence score calculation.  My problem is
exactly what the subject line of this email says: How to set individual
boost factor to each word in a phrase query?

So I would like to handle the following situation:

The user asks for "some list of words".  I know that, for some reasons that
really are uninteresting for this thread, the query should be written as:
"some^0.81 list^0.12 of^0.5 words^0.99".  Sending this string to the query
parser simply return garbage...  I could add each words manually to a
BooleanQuery and use the setBoost() member, but I really want to match the
"sentence" i.e. I don't want documents that does not respect the word order.
Also, I cannot really call explain() function because of the CPU/IO
resources that it takes and the fact that I can only look at a certain
number of element at the top of the hits object

Any thought?

Thanks, 

Jp

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 22:40:45 2005
Return-Path: <java-user-return-13499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61582 invoked from network); 2 Mar 2005 22:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 22:40:45 -0000
Received: (qmail 56359 invoked by uid 500); 2 Mar 2005 22:40:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56313 invoked by uid 500); 2 Mar 2005 22:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56298 invoked by uid 500); 2 Mar 2005 22:40:34 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 56288 invoked by uid 99); 2 Mar 2005 22:40:34 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 14:40:32 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 2 Mar 2005 17:44:28 -0500
Message-ID: <028901c51f79$646965e0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <421F8DB6.3030306@jCatalog.com> <023801c51e3a$c38ab0f0$d380a8c0@sirma.int> <4224B153.7080104@apache.org> <200503012024.04519@danielnaber.de> <4224E6DF.5010109@apache.org>
Subject: Indexing sit (stuff it) files
Date: Wed, 2 Mar 2005 17:44:28 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 02 Mar 2005 22:44:28.0724 (UTC) FILETIME=[647B6740:01C51F79]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello;

I've almost completed my zip file indexer. I used the following to get an
InputStream for each file in the archive:

     ZipFile zip = new ZipFile(new File(fileLocation));
            ZipEntry zipEntry;
            Enumeration files = zip.entries();
            while (files.hasMoreElements()) {
                zipEntry = (ZipEntry)files.nextElement();
                //I have conditions here based on
zipEntry.getName().endsWith(".fileExtension) to determine which Document
Handler to use
                //below is the inputstream I send the handler
                InputStream in = zip.getInputStream(zipEntry);
            }

So far this is looking ok (not quite done yet).

A request came in to index stuffit files. I'm hoping to be able to do
something similar as the above, but I haven't found a Java api to work with
this file type. Anyone have any experience with this?

Thanks,

Luke




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 22:48:58 2005
Return-Path: <java-user-return-13500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66205 invoked from network); 2 Mar 2005 22:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 22:48:58 -0000
Received: (qmail 69440 invoked by uid 500); 2 Mar 2005 22:48:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68560 invoked by uid 500); 2 Mar 2005 22:48:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68547 invoked by uid 99); 2 Mar 2005 22:48:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailout11.sul.t-online.com (HELO mailout11.sul.t-online.com) (194.25.134.85)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 14:48:51 -0800
Received: from fwd17.aul.t-online.de 
	by mailout11.sul.t-online.com with smtp 
	id 1D6ce9-0003aa-00; Wed, 02 Mar 2005 23:48:49 +0100
Received: from pD9EBF279.dip.t-dialin.net (VawZLMZfQepfJ5knWtJdeSpsVDzmJIHAbe0-g+IJEeGibqa9DCiQ6R@[217.235.242.121]) by fwd17.sul.t-online.de
	with esmtp id 1D6cdz-0FGlO40; Wed, 2 Mar 2005 23:48:39 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: java-user@lucene.apache.org
Subject: Re: How to set individual boost factor to each word in a phrase query ?
Date: Wed, 2 Mar 2005 23:48:59 +0100
User-Agent: KMail/1.7.1
References: <FBA9F803D33470489B9B4676A6B09F0B01239E90@mt-exch1.montreal.speechworks.com>
In-Reply-To: <FBA9F803D33470489B9B4676A6B09F0B01239E90@mt-exch1.montreal.speechworks.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503022348.59705@danielnaber.de>
X-ID: VawZLMZfQepfJ5knWtJdeSpsVDzmJIHAbe0-g+IJEeGibqa9DCiQ6R@t-dialin.net
X-TOI-MSGID: d640e1d2-2bf0-4809-be14-13e57aa51096
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 02 March 2005 22:43, Robichaud, Jean-Philippe wrote:

> "some^0.81 list^0.12 of^0.5 words^0.99"

You could try

"some list of words"^0 AND (some^0.81 list^0.12 of^0.5 words^0.99)

Will only match documents that contain the phrase, but score the terms (but 
also those terms in the document which are outside the phrase, maybe 
that's good enough).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 02 23:58:27 2005
Return-Path: <java-user-return-13501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90296 invoked from network); 2 Mar 2005 23:58:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Mar 2005 23:58:27 -0000
Received: (qmail 59634 invoked by uid 500); 2 Mar 2005 23:58:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59270 invoked by uid 500); 2 Mar 2005 23:58:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59257 invoked by uid 99); 2 Mar 2005 23:58:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mauroverrocchio@gmail.com designates 64.233.184.204 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 15:58:20 -0800
Received: by wproxy.gmail.com with SMTP id 36so415877wra
        for <java-user@lucene.apache.org>; Wed, 02 Mar 2005 15:58:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=aCFOaQvm7zA42lBxdbPfetVHDlybwKtagt+v+o3FhR4RVb9e97sG9SD+aAiD2ZTwfz1X37Lk1kQvdVHKNPV/ZYSw2kW5tBYrQhvsuYOaY3p8Cj5n0qcpEFe3xqveO5rKSF4CLtIeWzcO8HKKxiloImW6X1Hm9jhvVg+fagx8jK4=
Received: by 10.54.27.7 with SMTP id a7mr81490wra;
        Wed, 02 Mar 2005 15:58:17 -0800 (PST)
Received: by 10.54.3.79 with HTTP; Wed, 2 Mar 2005 15:58:17 -0800 (PST)
Message-ID: <a5755edd05030215587eb45b4a@mail.gmail.com>
Date: Thu, 3 Mar 2005 00:58:17 +0100
From: Mauro Verrocchio <mauroverrocchio@gmail.com>
Reply-To: Mauro Verrocchio <mauroverrocchio@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Remove document fails
In-Reply-To: <422632CB.7020709@eduhi.at>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com>
	 <42247F3B.1070401@i-hypergrid.com> <422632CB.7020709@eduhi.at>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try IndexDirectory.unlock(directory). It's in the javadoc.

Cheers,
Mauro.


On Wed, 02 Mar 2005 22:40:27 +0100, Gusenbauer Stefan
<gusenbauer@eduhi.at> wrote:
> Volodymyr Bychkoviak wrote:
> 
> > may be you have open IndexWriter at the same time you are trying to
> > delete document.
> >
> > Alex Kiselevski wrote:
> >
> >> Hi,
> >> I have a problem doing IndexReader.delete(int doc)
> >> and it fails on lock error.
> >>
> >>
> >>
> >>
> >>
> >> Alex Kiselevski
> >>
> >>
> >> +9.729.776.4346 (desk)
> >> +9.729.776.1504 (fax)
> >>
> >> AMDOCS > INTEGRATED CUSTOMER MANAGEMENT
> >>
> >>
> >>
> >>
> >>
> >> The information contained in this message is proprietary of Amdocs,
> >> protected from disclosure, and may be privileged.
> >> The information is intended to be conveyed only to the designated
> >> recipient(s)
> >> of the message. If the reader of this message is not the intended
> >> recipient,
> >> you are hereby notified that any dissemination, use, distribution or
> >> copying of
> >>
> >> this communication is strictly prohibited and may be unlawful.
> >>
> >> If you have received this communication in error, please notify us
> >> immediately
> >> by replying to the message and deleting it from your computer.
> >> Thank you.
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> I've the same problem that my IndexWriter is open. Is there any
> possibility to unlock it manually because i do not want to close it.
> Thank you
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 04:15:03 2005
Return-Path: <java-user-return-13502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93653 invoked from network); 3 Mar 2005 04:15:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 04:15:02 -0000
Received: (qmail 35218 invoked by uid 500); 3 Mar 2005 04:14:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35178 invoked by uid 500); 3 Mar 2005 04:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35164 invoked by uid 99); 3 Mar 2005 04:14:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.app.aconex.com (HELO mail.app.aconex.com) (203.89.192.138)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 02 Mar 2005 20:14:55 -0800
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id D2E49159FBD
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 15:14:48 +1100 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 4156064007
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 15:14:48 +1100 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 04026-01-8 for <java-user@lucene.apache.org>;
 Thu,  3 Mar 2005 15:14:47 +1100 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 8022E64002
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 15:14:47 +1100 (EST)
Message-ID: <42268F34.5090800@aconex.com>
Date: Thu, 03 Mar 2005 15:14:44 +1100
From: Paul Smith <psmith@aconex.com>
User-Agent: Mozilla Thunderbird 1.0 (Macintosh/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Use of In-like query and performance implications
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If I had a query of the form (assuming this gets converted to Lucene-speak)

Org=X or Folder In(g,h,i,j,.....) or Public=true

Having a field for Org, and Public is easy, but the Folder field In-like 
clause (which would be converted into OR's) could potentially have quite 
a few in the clause.

my question is, is there any performance concerns here if 
("...In(g,h,i,j,....) ") starts getting longer and longer?  Can Lucene 
handle this in an optimal manner, without a serious scalability issue ? 
(memory/cpu/io etc).  Or would it be better that a different design is 
used gor this?


Paul Smith

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 09:58:53 2005
Return-Path: <java-user-return-13503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10048 invoked from network); 3 Mar 2005 09:58:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 09:58:53 -0000
Received: (qmail 9013 invoked by uid 500); 3 Mar 2005 09:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8983 invoked by uid 500); 3 Mar 2005 09:58:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8968 invoked by uid 99); 3 Mar 2005 09:58:45 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 01:58:44 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id 3270E65D51
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 11:58:40 +0200 (EET)
Message-ID: <4226DFCF.1090509@i-hypergrid.com>
Date: Thu, 03 Mar 2005 11:58:39 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Remove document fails
References: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com>	 <42247F3B.1070401@i-hypergrid.com> <422632CB.7020709@eduhi.at> <a5755edd05030215587eb45b4a@mail.gmail.com>
In-Reply-To: <a5755edd05030215587eb45b4a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you read javadoc carefully you can read that unlock should be used 
only for recovery reason. Or you can damage your index.

Mauro Verrocchio wrote:

>Try IndexDirectory.unlock(directory). It's in the javadoc.
>
>Cheers,
>Mauro.
>
>
>On Wed, 02 Mar 2005 22:40:27 +0100, Gusenbauer Stefan
><gusenbauer@eduhi.at> wrote:
>  
>
>>Volodymyr Bychkoviak wrote:
>>
>>    
>>
>>>may be you have open IndexWriter at the same time you are trying to
>>>delete document.
>>>
>>>Alex Kiselevski wrote:
>>>
>>>      
>>>
>>>>Hi,
>>>>I have a problem doing IndexReader.delete(int doc)
>>>>and it fails on lock error.
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>Alex Kiselevski
>>>>
>>>>
>>>>+9.729.776.4346 (desk)
>>>>+9.729.776.1504 (fax)
>>>>
>>>>AMDOCS > INTEGRATED CUSTOMER MANAGEMENT
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>The information contained in this message is proprietary of Amdocs,
>>>>protected from disclosure, and may be privileged.
>>>>The information is intended to be conveyed only to the designated
>>>>recipient(s)
>>>>of the message. If the reader of this message is not the intended
>>>>recipient,
>>>>you are hereby notified that any dissemination, use, distribution or
>>>>copying of
>>>>
>>>>this communication is strictly prohibited and may be unlawful.
>>>>
>>>>If you have received this communication in error, please notify us
>>>>immediately
>>>>by replying to the message and deleting it from your computer.
>>>>Thank you.
>>>>
>>>>
>>>>        
>>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>      
>>>
>>I've the same problem that my IndexWriter is open. Is there any
>>possibility to unlock it manually because i do not want to close it.
>>Thank you
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 11:04:21 2005
Return-Path: <java-user-return-13504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48028 invoked from network); 3 Mar 2005 11:04:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 11:04:21 -0000
Received: (qmail 19953 invoked by uid 500); 3 Mar 2005 11:04:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19897 invoked by uid 500); 3 Mar 2005 11:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19883 invoked by uid 99); 3 Mar 2005 11:04:15 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web86903.mail.ukl.yahoo.com (HELO web86903.mail.ukl.yahoo.com) (217.12.13.55)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 03 Mar 2005 03:04:13 -0800
Received: (qmail 44964 invoked by uid 60001); 3 Mar 2005 11:04:10 -0000
Message-ID: <20050303110410.44962.qmail@web86903.mail.ukl.yahoo.com>
Received: from [217.227.77.54] by web86903.mail.ukl.yahoo.com via HTTP; Thu, 03 Mar 2005 11:04:09 GMT
Date: Thu, 3 Mar 2005 11:04:09 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Not storing norms and term positions info, possible?
To: java-user@lucene.apache.org
In-Reply-To: <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
Is there a way to create index which does not store
norms (.f..) and Positions (.prx files)?

In the case I need to support, no length normalisation
is needed, the same is with positional info.
(Similarity.encodeNorms(float) returns 0; and
Term.SetPositionalIncrement(0) is used)

>From the size of these files I speculate a lot of io
should have happened during indexing. 

Does that make sense?

thanks, Eks




  
 

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 11:30:14 2005
Return-Path: <java-user-return-13505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63269 invoked from network); 3 Mar 2005 11:30:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 11:30:14 -0000
Received: (qmail 64000 invoked by uid 500); 3 Mar 2005 11:30:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63517 invoked by uid 500); 3 Mar 2005 11:30:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63484 invoked by uid 99); 3 Mar 2005 11:30:10 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailgate2.eduhi.at (HELO mailgate2.eduhi.at) (193.170.67.94)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 03:30:08 -0800
Received: from localhost (localhost [127.0.0.1])
	by mailgate2.eduhi.at (Postfix) with ESMTP id 304E328C2
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 12:30:04 +0100 (CET)
Received: from mail.eduhi.at (mail.asn-linz.ac.at [172.27.2.5])
	by mailgate2.eduhi.at (Postfix) with ESMTP id 19DCB288F
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 12:30:04 +0100 (CET)
Received: from [192.168.0.117] ([10.221.9.19]) by mail.eduhi.at with Microsoft SMTPSVC(5.0.2172.1);
	 Thu, 3 Mar 2005 12:30:03 +0100
Message-ID: <4226F53A.1010708@eduhi.at>
Date: Thu, 03 Mar 2005 12:30:02 +0100
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Remove document fails
References: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com>	 <42247F3B.1070401@i-hypergrid.com> <422632CB.7020709@eduhi.at> <a5755edd05030215587eb45b4a@mail.gmail.com> <4226DFCF.1090509@i-hypergrid.com>
In-Reply-To: <4226DFCF.1090509@i-hypergrid.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 Mar 2005 11:30:03.0744 (UTC) FILETIME=[57E33600:01C51FE4]
X-Spam-Checker-Version: SpamAssassin 3.0.2 (2004-11-16) on mailgate2.eduhi.at
X-Spam-Level: 
X-Spam-Status: No, score=-2.9 required=5.8 tests=ALL_TRUSTED,BAYES_00,
	EH_b_llwords,EH_b_lwords,EH_b_neg_forgetme,EH_b_unlikedchar,
	EH_f_whitelist5,EH_u_spam_lllow,UNWANTED_LANGUAGE_BODY autolearn=ham 
	version=3.0.2
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Volodymyr Bychkoviak wrote:

> If you read javadoc carefully you can read that unlock should be used 
> only for recovery reason. Or you can damage your index.
>
> Mauro Verrocchio wrote:
>
>> Try IndexDirectory.unlock(directory). It's in the javadoc.
>>
>> Cheers,
>> Mauro.
>>
>>
>> On Wed, 02 Mar 2005 22:40:27 +0100, Gusenbauer Stefan
>> <gusenbauer@eduhi.at> wrote:
>>  
>>
>>> Volodymyr Bychkoviak wrote:
>>>
>>>   
>>>
>>>> may be you have open IndexWriter at the same time you are trying to
>>>> delete document.
>>>>
>>>> Alex Kiselevski wrote:
>>>>
>>>>     
>>>>
>>>>> Hi,
>>>>> I have a problem doing IndexReader.delete(int doc)
>>>>> and it fails on lock error.
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> Alex Kiselevski
>>>>>
>>>>>
>>>>> +9.729.776.4346 (desk)
>>>>> +9.729.776.1504 (fax)
>>>>>
>>>>> AMDOCS > INTEGRATED CUSTOMER MANAGEMENT
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> The information contained in this message is proprietary of Amdocs,
>>>>> protected from disclosure, and may be privileged.
>>>>> The information is intended to be conveyed only to the designated
>>>>> recipient(s)
>>>>> of the message. If the reader of this message is not the intended
>>>>> recipient,
>>>>> you are hereby notified that any dissemination, use, distribution or
>>>>> copying of
>>>>>
>>>>> this communication is strictly prohibited and may be unlawful.
>>>>>
>>>>> If you have received this communication in error, please notify us
>>>>> immediately
>>>>> by replying to the message and deleting it from your computer.
>>>>> Thank you.
>>>>>
>>>>>
>>>>>       
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>>     
>>>
>>> I've the same problem that my IndexWriter is open. Is there any
>>> possibility to unlock it manually because i do not want to close it.
>>> Thank you
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>   
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>  
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
Thank you for your help, I've constructed a workaround with an arraylist 
so i can insert documents after deleting and i there is no conflict 
between the indexreader and the indexwriter.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 12:55:30 2005
Return-Path: <java-user-return-13506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4365 invoked from network); 3 Mar 2005 12:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 12:55:30 -0000
Received: (qmail 82667 invoked by uid 500); 3 Mar 2005 12:55:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82554 invoked by uid 500); 3 Mar 2005 12:55:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82541 invoked by uid 500); 3 Mar 2005 12:55:25 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 82536 invoked by uid 99); 3 Mar 2005 12:55:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 04:55:22 -0800
Received: from pd9e62cb7.dip.t-dialin.net ([217.230.44.183] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D6prL-0007zd-AK
	for lucene-user@jakarta.apache.org; Thu, 03 Mar 2005 04:55:19 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:       Lucene Users List <lucene-user@jakarta.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Thu, 3 Mar 2005 13:55:00 +0100
Message-ID: <20053313550.438086@Kelvin>
In-Reply-To: <d08003cfff6c6ece3420f8f8c97895b0@ehatchersolutions.com>
Subject: Re: Fast access to a random page of the search results.
Mime-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is this actually in the codebase?  I couldn't find it in SVN or in=
 Bugzilla...

kelvin

On Mon, 28 Feb 2005 11:59:54 -0500, Erik Hatcher wrote:
>=A0Or perhaps you
>=A0need to investigate the (is it in the codebase already?) patch to
>=A0load fields lazily upon demand instead.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 12:59:24 2005
Return-Path: <java-user-return-13507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6845 invoked from network); 3 Mar 2005 12:59:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 12:59:24 -0000
Received: (qmail 88566 invoked by uid 500); 3 Mar 2005 12:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88551 invoked by uid 500); 3 Mar 2005 12:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 80497 invoked by uid 500); 3 Mar 2005 11:47:03 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Message-ID: <019901c51fe6$8e11d680$b101a8c0@emacmillan.edu>
From: "Niraj Alok" <niraj@emacmillan.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: problem with not operator
Date: Thu, 3 Mar 2005 17:15:53 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0195_01C52014.A7B6FFB0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-MDaemon-Deliver-To: lucene-user@jakarta.apache.org
X-Return-Path: niraj@emacmillan.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0195_01C52014.A7B6FFB0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi,

When I am putting the query as 'a not b' there are some documents coming up
which have 'b' as well.

I am searching on 3 fields using a MultiFieldQueryParser and while debugging
the query is also getting shown as
(field1:a -field1:b) (field2:a -field2:b) (field3:a -field3:b)

Yet the results have documents which contain 'b' terms as well.

While indexing, I am using StandardAnaylzer(stopwords), and the field as:
Field fl = new Field("indexhd",indexhd, true, true, true);

etc..

Please could you suggest what the problem could be?



Regards,
Niraj

------=_NextPart_000_0195_01C52014.A7B6FFB0--




From java-user-return-13508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 13:16:55 2005
Return-Path: <java-user-return-13508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15919 invoked from network); 3 Mar 2005 13:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 13:16:55 -0000
Received: (qmail 9291 invoked by uid 500); 3 Mar 2005 13:16:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9264 invoked by uid 500); 3 Mar 2005 13:16:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9237 invoked by uid 99); 3 Mar 2005 13:16:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 05:16:48 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id D67F223CE0
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 14:16:45 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 06240-03 for <java-user@lucene.apache.org>;
 Thu,  3 Mar 2005 14:16:45 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id BB55A23BF5
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 14:16:45 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j23DI272014811
	for <java-user@lucene.apache.org>; Thu, 3 Mar 2005 14:18:02 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j23DI2HC014807;
	Thu, 3 Mar 2005 14:18:02 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16935.3722.145284.764524@tanto-xipolis.de>
Date: Thu, 3 Mar 2005 14:18:02 +0100
To: java-user@lucene.apache.org
Subject: Re: problem with not operator
In-Reply-To: <019901c51fe6$8e11d680$b101a8c0@emacmillan.edu>
References: <019901c51fe6$8e11d680$b101a8c0@emacmillan.edu>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Niraj Alok writes:
> Hi,
> 
> When I am putting the query as 'a not b' there are some documents coming up
> which have 'b' as well.
> 
> I am searching on 3 fields using a MultiFieldQueryParser and while debugging
> the query is also getting shown as
> (field1:a -field1:b) (field2:a -field2:b) (field3:a -field3:b)
> 
> Yet the results have documents which contain 'b' terms as well.
> 
That searches for documents having
a in field1 but not b in field1 OR a in field2 but not b in field2 ...

so a document having one field with a but without b will be found even if
it contains b in some other field.
> 
> Please could you suggest what the problem could be?
> 
You need a query
(field1:a OR field2:b OR field3:c) -(field1:b OR field2:b OR field3:c)

I'm not familliar with MFQP, so I cannot say if it can help you with that.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 13:43:54 2005
Return-Path: <java-user-return-13509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29984 invoked from network); 3 Mar 2005 13:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 13:43:54 -0000
Received: (qmail 53480 invoked by uid 500); 3 Mar 2005 13:43:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53444 invoked by uid 500); 3 Mar 2005 13:43:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53424 invoked by uid 99); 3 Mar 2005 13:43:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 05:43:48 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3E9E113E2007; Thu,  3 Mar 2005 08:43:44 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 2618D13E210E
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 08:43:29 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <019901c51fe6$8e11d680$b101a8c0@emacmillan.edu>
References: <019901c51fe6$8e11d680$b101a8c0@emacmillan.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2a4869ebcdd6e9d06b6cef9f5e7b8aa1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: problem with not operator
Date: Thu, 3 Mar 2005 08:43:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try using an IndexSearcher.explain on a document in the search results 
that you know has "b" - this will give you the gory details of why.

Also, try to simplify without MultiFieldQueryParser - its got plenty of 
known issues - for now and see what that gives you.

	Erik

On Mar 3, 2005, at 6:45 AM, Niraj Alok wrote:

> Hi,
>
> When I am putting the query as 'a not b' there are some documents 
> coming up
> which have 'b' as well.
>
> I am searching on 3 fields using a MultiFieldQueryParser and while 
> debugging
> the query is also getting shown as
> (field1:a -field1:b) (field2:a -field2:b) (field3:a -field3:b)
>
> Yet the results have documents which contain 'b' terms as well.
>
> While indexing, I am using StandardAnaylzer(stopwords), and the field 
> as:
> Field fl = new Field("indexhd",indexhd, true, true, true);
>
> etc..
>
> Please could you suggest what the problem could be?
>
>
>
> Regards,
> Niraj


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 14:09:03 2005
Return-Path: <java-user-return-13510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44316 invoked from network); 3 Mar 2005 14:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 14:09:03 -0000
Received: (qmail 12812 invoked by uid 500); 3 Mar 2005 14:08:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12636 invoked by uid 500); 3 Mar 2005 14:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12623 invoked by uid 99); 3 Mar 2005 14:08:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mauroverrocchio@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 06:08:57 -0800
Received: by wproxy.gmail.com with SMTP id 36so578233wra
        for <java-user@lucene.apache.org>; Thu, 03 Mar 2005 06:08:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=r3eyVRcyxDi1u1Qd2ONWhNWnsh1IT13PrwwtUXTL5UPKza5qDk1HkVE+uYWTKjEWGHF4m+2E0QoDdRS2SHjJOi7lgbrbEXefbr4j3XzLQaVxtWs7/t/XTb6Pyvyb5S+yy8tghQrm0OjZbG8BC2UmH1V33dMPuj92Si3KLP5oEdg=
Received: by 10.54.62.16 with SMTP id k16mr71182wra;
        Thu, 03 Mar 2005 06:08:54 -0800 (PST)
Received: by 10.54.3.79 with HTTP; Thu, 3 Mar 2005 06:08:54 -0800 (PST)
Message-ID: <a5755edd0503030608ef12f51@mail.gmail.com>
Date: Thu, 3 Mar 2005 15:08:54 +0100
From: Mauro Verrocchio <mauroverrocchio@gmail.com>
Reply-To: Mauro Verrocchio <mauroverrocchio@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Remove document fails
In-Reply-To: <4226DFCF.1090509@i-hypergrid.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <191B11CF22BAC54292E97F3B5CDC9C851F3231@tlvmail7.corp.amdocs.com>
	 <42247F3B.1070401@i-hypergrid.com> <422632CB.7020709@eduhi.at>
	 <a5755edd05030215587eb45b4a@mail.gmail.com>
	 <4226DFCF.1090509@i-hypergrid.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sorry! I didn't know that: just got a fast look at the methods...
Thanks anyway: this would be useful to remeber :)

Mauro.

On Thu, 03 Mar 2005 11:58:39 +0200, Volodymyr Bychkoviak
<vbychkoviak@i-hypergrid.com> wrote:
> If you read javadoc carefully you can read that unlock should be used
> only for recovery reason. Or you can damage your index.
> 
> Mauro Verrocchio wrote:
> 
> >Try IndexDirectory.unlock(directory). It's in the javadoc.
> >
> >Cheers,
> >Mauro.
> >
> >
> >On Wed, 02 Mar 2005 22:40:27 +0100, Gusenbauer Stefan
> ><gusenbauer@eduhi.at> wrote:
> >
> >
> >>Volodymyr Bychkoviak wrote:
> >>
> >>
> >>
> >>>may be you have open IndexWriter at the same time you are trying to
> >>>delete document.
> >>>
> >>>Alex Kiselevski wrote:
> >>>
> >>>
> >>>
> >>>>Hi,
> >>>>I have a problem doing IndexReader.delete(int doc)
> >>>>and it fails on lock error.
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>Alex Kiselevski
> >>>>
> >>>>
> >>>>+9.729.776.4346 (desk)
> >>>>+9.729.776.1504 (fax)
> >>>>
> >>>>AMDOCS > INTEGRATED CUSTOMER MANAGEMENT
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>The information contained in this message is proprietary of Amdocs,
> >>>>protected from disclosure, and may be privileged.
> >>>>The information is intended to be conveyed only to the designated
> >>>>recipient(s)
> >>>>of the message. If the reader of this message is not the intended
> >>>>recipient,
> >>>>you are hereby notified that any dissemination, use, distribution or
> >>>>copying of
> >>>>
> >>>>this communication is strictly prohibited and may be unlawful.
> >>>>
> >>>>If you have received this communication in error, please notify us
> >>>>immediately
> >>>>by replying to the message and deleting it from your computer.
> >>>>Thank you.
> >>>>
> >>>>
> >>>>
> >>>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>
> >>>
> >>>
> >>I've the same problem that my IndexWriter is open. Is there any
> >>possibility to unlock it manually because i do not want to close it.
> >>Thank you
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 18:32:44 2005
Return-Path: <java-user-return-13511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98295 invoked from network); 3 Mar 2005 18:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 18:32:44 -0000
Received: (qmail 97273 invoked by uid 500); 3 Mar 2005 18:32:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97218 invoked by uid 500); 3 Mar 2005 18:32:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97196 invoked by uid 99); 3 Mar 2005 18:32:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 10:32:37 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <2005030318323501500l7nohe>; Thu, 3 Mar 2005 18:32:35 +0000
Message-ID: <42275843.3060503@apache.org>
Date: Thu, 03 Mar 2005 10:32:35 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: help with boolean expression
References: <63434C14F9A6F74CB36B85033E4C30CA01082996@hermes.corp.cyveillance.com> <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com> <200503021335.46977.daniel.naber@t-online.de>
In-Reply-To: <200503021335.46977.daniel.naber@t-online.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> On Wednesday 02 March 2005 12:25, Erik Hatcher wrote:
> 
>>I agree that the current behavior is awkward.  Is it worth breaking
>>backwards compatibility to correct this with the patch applied?
> 
> I'd vote for fixing this as long as the current QueryParser is still available 
> in Lucene core, maybe as OldQueryParser or NoPrecedenceQueryParser. It's 
> surely better to fix it for 2.0 than for 2.x.

+1.  Fixing operator precedence seems to me like an acceptable 
incompatibility.  The change needs to be well documented in release 
notes, and the old QueryParser should be available, deprecated, for a 
time for back-compatibility.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 18:51:08 2005
Return-Path: <java-user-return-13512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5129 invoked from network); 3 Mar 2005 18:51:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 18:51:07 -0000
Received: (qmail 23149 invoked by uid 500); 3 Mar 2005 18:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23116 invoked by uid 500); 3 Mar 2005 18:51:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23103 invoked by uid 99); 3 Mar 2005 18:51:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 10:51:02 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 05B2F13E2135; Thu,  3 Mar 2005 13:50:59 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id CBA2E13E210E
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 13:49:58 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <42275843.3060503@apache.org>
References: <63434C14F9A6F74CB36B85033E4C30CA01082996@hermes.corp.cyveillance.com> <ad7dd639d648188d927c27f804ccf7a1@ehatchersolutions.com> <200503021335.46977.daniel.naber@t-online.de> <42275843.3060503@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4b245ba2aba44c26d3a50ba484867a86@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: help with boolean expression
Date: Thu, 3 Mar 2005 13:49:46 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 3, 2005, at 1:32 PM, Doug Cutting wrote:
> Daniel Naber wrote:
>> On Wednesday 02 March 2005 12:25, Erik Hatcher wrote:
>>> I agree that the current behavior is awkward.  Is it worth breaking
>>> backwards compatibility to correct this with the patch applied?
>> I'd vote for fixing this as long as the current QueryParser is still 
>> available in Lucene core, maybe as OldQueryParser or 
>> NoPrecedenceQueryParser. It's surely better to fix it for 2.0 than 
>> for 2.x.
>
> +1.  Fixing operator precedence seems to me like an acceptable 
> incompatibility.  The change needs to be well documented in release 
> notes, and the old QueryParser should be available, deprecated, for a 
> time for back-compatibility.

Ok, since I'm now deep into JavaCC for a consulting project, I will 
attempt this change at some point in the near future.  It's actually 
not too hard.  If someone wants to beat me to it feel free.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 19:13:52 2005
Return-Path: <java-user-return-13513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29777 invoked from network); 3 Mar 2005 19:13:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 19:13:52 -0000
Received: (qmail 65930 invoked by uid 500); 3 Mar 2005 19:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65904 invoked by uid 500); 3 Mar 2005 19:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65891 invoked by uid 99); 3 Mar 2005 19:13:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mh1dmz1.bloomberg.com (HELO mh1dmz1.bloomberg.com) (199.172.169.36)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 11:13:45 -0800
Received: from ns9.bloomberg.com (ns9.bloomberg.com [160.43.164.52]) by mh1dmz1.bloomberg.com with ESMTP for java-user@lucene.apache.org; Thu, 3 Mar 2005 14:13:41 -0500
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns9.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id j23JDdW06349
	for <java-user@lucene.apache.org>; Thu, 3 Mar 2005 14:13:40 -0500 (EST)
Received: from tk2525.corp.bloomberg.com (unverified) by ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.17) with ESMTP id <T6f752c7ba1ac14491a5a4@ny2535.corp.bloomberg.com> for <java-user@lucene.apache.org>;
 Thu, 3 Mar 2005 14:13:39 -0500
Received: from ny2526.corp.bloomberg.com ([172.20.73.28]) by tk2525.corp.bloomberg.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 4 Mar 2005 04:13:37 +0900
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: Sandbox
Date: Thu, 3 Mar 2005 14:13:35 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F40107A789@ny2526.corp.bloomberg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sandbox
Thread-Index: AcUgH2YawqcSYRYkQiyH1Am9oveOEgABZmwA
From: "Chong, Herb" <HChong3@bloomberg.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Mar 2005 19:13:38.0120 (UTC) FILETIME=[1A8C2C80:01C52025]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

where has the sandbox gone? the links from the Apache site no longer
point to anything.

Herb...

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 19:17:41 2005
Return-Path: <java-user-return-13514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31390 invoked from network); 3 Mar 2005 19:17:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 19:17:41 -0000
Received: (qmail 71214 invoked by uid 500); 3 Mar 2005 19:17:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71185 invoked by uid 500); 3 Mar 2005 19:17:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71172 invoked by uid 500); 3 Mar 2005 19:17:28 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 71169 invoked by uid 99); 3 Mar 2005 19:17:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from apsy01.customer.getit.de (HELO controler.ascirum.de) (217.194.225.102)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 11:17:27 -0800
Content-class: urn:content-classes:message
Subject: AW: indexReader close method
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 3 Mar 2005 20:28:41 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <14DF9F1F10D4D74DA815200CDB2203C2029049@controler.ascirum.de>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: indexReader close method
Thread-Index: AcTb0+Wbm/UDMONQQdGzGbeLETtP5REU0wbw
From: "Klaus Moysich" <klaus.moysich@ascirum.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



-----Urspr=FCngliche Nachricht-----
Von: hossman@hal.rescomp.berkeley.edu =
[mailto:hossman@hal.rescomp.berkeley.edu] Im Auftrag von Chris Hostetter
Gesendet: Montag, 6. Dezember 2004 21:32
An: Lucene Users List
Betreff: Re: indexReader close method


: Do you know why I can't close the IndexReader  explicitly under some
: circumstances and why, when I do manage to close it I can still call
: methods on the reader?

1) I tried to create a test case that demonstrated your bug based on the
code outline you provided, and i couldn't (see below).  that implies to =
me
that somethine else is going on.  If you can create a completely self
contained program that demonstrates your bug and mail it to the list =
that
would help us help you.

2) the documentation for IndexReader.close() says...

	Closes files associated with this index. Also saves any new deletions =
to
	disk. No other methods should be called after this has been called.

...note the word "should".  it doesn't say what the other methods will =
do
if you try to call them, just that you shouldn't try.  In some cases =
they
may generate exceptions, in other cases they may just be able to return
you data based on state internal to the object which is unaffected by =
the
fact that the files have all been closed.

-Hoss

    public static void main(String argv[]) throws IOException {

        /* create a directory */
        String d =3D System.getProperty("java.io.tmpdir", "tmp")
            + System.getProperty("file.separator")
            + "index-dir-" + (new Random()).nextInt(1000);
        Directory trash =3D FSDirectory.getDirectory(d, true);


        /* build index */
        Document doc;
        IndexWriter w =3D new IndexWriter(d, new SimpleAnalyzer(), =
true);
        doc =3D new Document();
        doc.add(Field.Text("words", "apple emu"));
        w.addDocument(doc);
        w.optimize();
        w.close();

        /* search index */
        IndexReader r =3D IndexReader.open(d);
        IndexSearcher s =3D new IndexSearcher(r);
        Hits h =3D s.search(new TermQuery(new Term("words", "apple")));

        s.close();
        r.close();

        System.out.println("Reader? - " + r.maxDoc());

    }






---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 20:48:55 2005
Return-Path: <java-user-return-13515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83986 invoked from network); 3 Mar 2005 20:48:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 20:48:55 -0000
Received: (qmail 85015 invoked by uid 500); 3 Mar 2005 20:48:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84983 invoked by uid 500); 3 Mar 2005 20:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84970 invoked by uid 99); 3 Mar 2005 20:48:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 12:48:50 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 22DC213E2138; Thu,  3 Mar 2005 15:48:41 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 5565513E210E
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 15:48:14 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <3B530EF12E388B408ECC3162BA8C00F40107A789@ny2526.corp.bloomberg.com>
References: <3B530EF12E388B408ECC3162BA8C00F40107A789@ny2526.corp.bloomberg.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3ec1951618227a5a29e4884dbbd7a0ee@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sandbox
Date: Thu, 3 Mar 2005 15:48:13 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mar 3, 2005, at 2:13 PM, Chong, Herb wrote:
> where has the sandbox gone? the links from the Apache site no longer
> point to anything.

Lucene is now in Subversion as mentioned on this very list :)

The Sandbox repository was folded into our single Subversion repository 
at:

	http://svn.apache.org/repos/asf/lucene/java/trunk

The sandbox code is in a bit of transition right now, as I've moved 
some of it to /contrib, the rest is under /sandbox.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 20:53:02 2005
Return-Path: <java-user-return-13516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85465 invoked from network); 3 Mar 2005 20:53:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 20:53:02 -0000
Received: (qmail 88334 invoked by uid 500); 3 Mar 2005 20:52:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88313 invoked by uid 500); 3 Mar 2005 20:52:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 73022 invoked by uid 500); 3 Mar 2005 19:19:31 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,DNS_FROM_RFC_WHOIS,SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Message-ID: <422763EC.3060201@eresmas.com>
Date: Thu, 03 Mar 2005 20:22:20 +0100
From: =?ISO-8859-1?Q?Antonio_Chillar=F3n_Barahona?= <achillar@eresmas.com>
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: Problem with Lucene web
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I am sorry if this is not the proper forum for this question.

Recently, I have tried to download Snowball from Lucene's Sandbox but 
the link on "More information can be found ->here<-." from the page:
     http://lucene.apache.org/java/docs/lucene-sandbox/
does not seems to work because the pointed address:
     http://lucene.apache.org/lucene-sandbox/snowball/
does not exists. Many other sandbox links are missing.

I have tried to send this email to the web master but I have been unable 
to find the necessary email address, sorry.

By the way, I have tried to subscribe to the Lucene User List 
(lucene-user-subscribe@jakarta.apache.org) from:
     http://jakarta.apache.org/site/mail2.html#Lucene
but my email was returned with this message:

	> Hi. This is the qmail-send program at apache.org.
	> I'm afraid I wasn't able to deliver your message to the following 
addresses.
	> This is a permanent error; I've given up. Sorry it didn't work out.
	>
	> <lucene-user-subscribe@jakarta.apache.org>:
	> Sorry, no mailbox here by that name. (#5.1.1)

Many thanks,
Antonio.

-- 
Nunca se miente tanto como antes de las elecciones,
durante la guerra y despus de la cacera.
     -- Otto von Bismark

Only a battle lost is sadder than a battle won.
     -- Lews Thelin Telamon (The Wheel Of Time, Robert Jordan)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 20:58:39 2005
Return-Path: <java-user-return-13517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87326 invoked from network); 3 Mar 2005 20:58:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 20:58:39 -0000
Received: (qmail 94461 invoked by uid 500); 3 Mar 2005 20:58:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94211 invoked by uid 500); 3 Mar 2005 20:58:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94198 invoked by uid 99); 3 Mar 2005 20:58:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mh2dmz1.bloomberg.com (HELO mh2dmz1.bloomberg.com) (199.172.169.37)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 12:58:33 -0800
Received: from ns11.bloomberg.com (ns11.bloomberg.com [160.43.8.220]) by mh2dmz1.bloomberg.com with ESMTP for java-user@lucene.apache.org; Thu, 3 Mar 2005 15:58:29 -0500
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns11.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id j23KwSv04053
	for <java-user@lucene.apache.org>; Thu, 3 Mar 2005 15:58:28 -0500 (EST)
Received: from ny2528.corp.bloomberg.com (unverified) by ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.17) with ESMTP id <T6f758c7487ac14491a5a4@ny2535.corp.bloomberg.com> for <java-user@lucene.apache.org>;
 Thu, 3 Mar 2005 15:58:28 -0500
Received: from ny2526.corp.bloomberg.com ([172.20.73.28]) by ny2528.corp.bloomberg.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 3 Mar 2005 15:58:27 -0500
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Sandbox
Date: Thu, 3 Mar 2005 15:58:27 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F40107A78E@ny2526.corp.bloomberg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sandbox
Thread-Index: AcUgMnSBuvOa+DtNRAaydstosxY9nwAAQQYw
From: "Chong, Herb" <HChong3@bloomberg.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Mar 2005 20:58:28.0006 (UTC) FILETIME=[BF9C9C60:01C52033]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

no hints as to where under Subversion though. the first half of the URL
below is referenced, but clicking on the link leads to a 404 error.

Herb...=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Thursday, March 03, 2005 3:48 PM
To: java-user@lucene.apache.org
Subject: Re: Sandbox

Lucene is now in Subversion as mentioned on this very list :)

The Sandbox repository was folded into our single Subversion repository=20
at:

	http://svn.apache.org/repos/asf/lucene/java/trunk

The sandbox code is in a bit of transition right now, as I've moved=20
some of it to /contrib, the rest is under /sandbox.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 21:00:04 2005
Return-Path: <java-user-return-13518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87773 invoked from network); 3 Mar 2005 21:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 21:00:04 -0000
Received: (qmail 96712 invoked by uid 500); 3 Mar 2005 21:00:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95840 invoked by uid 500); 3 Mar 2005 21:00:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95814 invoked by uid 99); 3 Mar 2005 21:00:01 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31109.mail.mud.yahoo.com (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 03 Mar 2005 12:59:59 -0800
Received: (qmail 94934 invoked by uid 60001); 3 Mar 2005 20:59:57 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=QHKcVZOwyrL4NLilTbJ7HKNYb2vE2HWgHWXVR9CY1MiOCYOdjG1DqCaQDgLRCd5RDAFwUO0YmkdREWPcIvzL4MuieUMaQlYg4W8QleII/q5o00Zkc0d7GbUqZZxhtNxMwiGMxhlN2arUwhl4cEwXOJQc84u2dShxfKjlXAtkqbs=  ;
Message-ID: <20050303205957.94932.qmail@web31109.mail.mud.yahoo.com>
Received: from [216.194.17.194] by web31109.mail.mud.yahoo.com via HTTP; Thu, 03 Mar 2005 12:59:57 PST
Date: Thu, 3 Mar 2005 12:59:57 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Sandbox
To: java-user@lucene.apache.org
In-Reply-To: <3B530EF12E388B408ECC3162BA8C00F40107A78E@ny2526.corp.bloomberg.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/

And some more stuff:
http://svn.apache.org/repos/asf/lucene/java/trunk/sandbox/contributions/

Otis

--- "Chong, Herb" <HChong3@bloomberg.com> wrote:

> no hints as to where under Subversion though. the first half of the
> URL
> below is referenced, but clicking on the link leads to a 404 error.
> 
> Herb... 
> 
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
> Sent: Thursday, March 03, 2005 3:48 PM
> To: java-user@lucene.apache.org
> Subject: Re: Sandbox
> 
> Lucene is now in Subversion as mentioned on this very list :)
> 
> The Sandbox repository was folded into our single Subversion
> repository 
> at:
> 
> 	http://svn.apache.org/repos/asf/lucene/java/trunk
> 
> The sandbox code is in a bit of transition right now, as I've moved 
> some of it to /contrib, the rest is under /sandbox.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 21:01:43 2005
Return-Path: <java-user-return-13519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88456 invoked from network); 3 Mar 2005 21:01:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 21:01:43 -0000
Received: (qmail 98906 invoked by uid 500); 3 Mar 2005 21:01:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98838 invoked by uid 500); 3 Mar 2005 21:01:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98825 invoked by uid 99); 3 Mar 2005 21:01:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mh2pdmz3a.bloomberg.com (HELO mh2pdmz3a.bloomberg.com) (208.22.56.38)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 13:01:38 -0800
Received: from ns11.bloomberg.com (ns11.bloomberg.com [160.43.8.220]) by mh2pdmz3a.bloomberg.com with ESMTP for java-user@lucene.apache.org; Thu, 3 Mar 2005 16:01:33 -0500
Received: from ny2535.corp.bloomberg.com (ny2535.bloomberg.com [172.20.73.26])
	by ns11.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id j23L1Wv04918
	for <java-user@lucene.apache.org>; Thu, 3 Mar 2005 16:01:32 -0500 (EST)
Received: from tk2525.corp.bloomberg.com (unverified) by ny2535.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.17) with ESMTP id <T6f758f434cac14491a5a4@ny2535.corp.bloomberg.com> for <java-user@lucene.apache.org>;
 Thu, 3 Mar 2005 16:01:33 -0500
Received: from ny2526.corp.bloomberg.com ([172.20.73.28]) by tk2525.corp.bloomberg.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 4 Mar 2005 06:01:30 +0900
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Sandbox
Date: Thu, 3 Mar 2005 16:01:27 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F40107A78F@ny2526.corp.bloomberg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sandbox
Thread-Index: AcUgNAAO7up4DvJkTcefUbM8OLgYVAAAA+qw
From: "Chong, Herb" <HChong3@bloomberg.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Mar 2005 21:01:30.0463 (UTC) FILETIME=[2C5D56F0:01C52034]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

if i had gotten something other than a 404 error, i might have had a
chance.

Herb...=20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Thursday, March 03, 2005 4:00 PM
To: java-user@lucene.apache.org
Subject: RE: Sandbox

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/

And some more stuff:
http://svn.apache.org/repos/asf/lucene/java/trunk/sandbox/contributions/

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 21:10:35 2005
Return-Path: <java-user-return-13520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92129 invoked from network); 3 Mar 2005 21:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 21:10:35 -0000
Received: (qmail 7697 invoked by uid 500); 3 Mar 2005 21:10:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7668 invoked by uid 500); 3 Mar 2005 21:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7654 invoked by uid 99); 3 Mar 2005 21:10:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 13:10:22 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 050A313E210E; Thu,  3 Mar 2005 16:10:20 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 3404913E210D
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 16:09:46 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <422763EC.3060201@eresmas.com>
References: <422763EC.3060201@eresmas.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <bafa1ae4da927c82953138934ebeac2a@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Problem with Lucene web
Date: Thu, 3 Mar 2005 16:09:46 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have corrected the incorrect hyperlink issues.  Sorry 'bout that.

	Erik

On Mar 3, 2005, at 2:22 PM, Antonio Chillar=F3n Barahona wrote:

> Hello,
>
> I am sorry if this is not the proper forum for this question.
>
> Recently, I have tried to download Snowball from Lucene's Sandbox but=20=

> the link on "More information can be found ->here<-." from the page:
>     http://lucene.apache.org/java/docs/lucene-sandbox/
> does not seems to work because the pointed address:
>     http://lucene.apache.org/lucene-sandbox/snowball/
> does not exists. Many other sandbox links are missing.
>
> I have tried to send this email to the web master but I have been=20
> unable to find the necessary email address, sorry.
>
> By the way, I have tried to subscribe to the Lucene User List=20
> (lucene-user-subscribe@jakarta.apache.org) from:
>     http://jakarta.apache.org/site/mail2.html#Lucene
> but my email was returned with this message:
>
> 	> Hi. This is the qmail-send program at apache.org.
> 	> I'm afraid I wasn't able to deliver your message to the =
following=20
> addresses.
> 	> This is a permanent error; I've given up. Sorry it didn't work =
out.
> 	>
> 	> <lucene-user-subscribe@jakarta.apache.org>:
> 	> Sorry, no mailbox here by that name. (#5.1.1)
>
> Many thanks,
> Antonio.
>
> --=20
> Nunca se miente tanto como antes de las elecciones,
> durante la guerra y despu=E9s de la cacer=EDa.
>     -- Otto von Bismark
>
> Only a battle lost is sadder than a battle won.
>     -- Lews Thelin Telamon (The Wheel Of Time, Robert Jordan)
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 21:17:32 2005
Return-Path: <java-user-return-13521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95064 invoked from network); 3 Mar 2005 21:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 21:17:31 -0000
Received: (qmail 17879 invoked by uid 500); 3 Mar 2005 21:17:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17857 invoked by uid 500); 3 Mar 2005 21:17:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 9363 invoked by uid 99); 3 Mar 2005 21:11:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Date: Thu, 3 Mar 2005 16:11:46 -0500
From: Brian Cuttler <brian@wadsworth.org>
To: java-user@lucene.apache.org
Subject: lucene question, examples
Message-ID: <20050303161145.H600@sodor.wadsworth.org>
References: <3B530EF12E388B408ECC3162BA8C00F40107A78E@ny2526.corp.bloomberg.com> <20050303205957.94932.qmail@web31109.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2us
In-Reply-To: <20050303205957.94932.qmail@web31109.mail.mud.yahoo.com>
X-Wadsworth-MailScanner-Information: Please contact CSS for more information
X-Wadsworth-MailScanner: Found to be clean
X-MailScanner-From: brian@sodor.wadsworth.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've sorry if this is the wrong forum, I was trying for lucene-user
and been unable to subscribe (but seem to see lucene items here).

We have been runing apache on our internal sites for a while, with
tomcat and lucene. Plugged in the demo index build and search 
features... and for a long time life has been good.

Now we are looking to implement apache on our external site with
tomcat and lucene.

System is Solaris 9
Apache/1.3.29 (Unix) ApacheJserv/1.1.2 mod_perl/1.25 configured
Apache, with Tomcat included, from Solaris freeware site.

I didn't see Lucene on the Sun FW site so just replicated the installation
from the internal to the (future) external website.

Lucene is currently v 1.2 (at least that is the version number of the
demo package).

The index we are building (org.apache.lucene.demo.IndexHTML) seems to
capture the tags from the "ALT" text, where really we need it to pick
up not image texts but content and keyword fields, or perhaps even plain
text that is outside of the ALT tags.

We also suspect that we are not picking up all documents, ie, not both
html, htm. We'd like to extend the range of documents we index, soon
to include shtml unless I'm mistaken.

I strongly suspect that newer demos might already do this, or that with
some basic instruction I could modify the document extentions if not the
(I suspect rather complex) target strings.

Unfortunately while the implement demo docs are great, I've so far not
found (or simply not understood) the docs that might give the options
we are hoping to implement.

						Thank you in advance,

						Brian

---
   Brian R Cuttler                 brian.cuttler@wadsworth.org
   Computer Systems Support        (v) 518 486-1697
   Wadsworth Center                (f) 518 473-6384
   NYS Department of Health        Help Desk 518 473-0773


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 21:49:11 2005
Return-Path: <java-user-return-13522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7613 invoked from network); 3 Mar 2005 21:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 21:49:11 -0000
Received: (qmail 64011 invoked by uid 500); 3 Mar 2005 21:49:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63983 invoked by uid 500); 3 Mar 2005 21:49:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63970 invoked by uid 99); 3 Mar 2005 21:49:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 13:49:07 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5336A13E210E; Thu,  3 Mar 2005 16:49:03 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 3D58213E210D
	for <java-user@lucene.apache.org>; Thu,  3 Mar 2005 16:48:52 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <3B530EF12E388B408ECC3162BA8C00F40107A78F@ny2526.corp.bloomberg.com>
References: <3B530EF12E388B408ECC3162BA8C00F40107A78F@ny2526.corp.bloomberg.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <69d806347e7ba07f3181fb432edf17b5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sandbox
Date: Thu, 3 Mar 2005 16:48:40 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don't know why you got a 404 on the URL I sent.... its a valid URL, and  
in fact the same URL used to check out the repository with an svn  
client.

	Erik

On Mar 3, 2005, at 4:01 PM, Chong, Herb wrote:

> if i had gotten something other than a 404 error, i might have had a
> chance.
>
> Herb...
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Thursday, March 03, 2005 4:00 PM
> To: java-user@lucene.apache.org
> Subject: RE: Sandbox
>
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/
>
> And some more stuff:
> http://svn.apache.org/repos/asf/lucene/java/trunk/sandbox/ 
> contributions/
>
> Otis
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 21:55:09 2005
Return-Path: <java-user-return-13523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9690 invoked from network); 3 Mar 2005 21:55:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 21:55:09 -0000
Received: (qmail 77831 invoked by uid 500); 3 Mar 2005 21:55:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77774 invoked by uid 500); 3 Mar 2005 21:55:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77671 invoked by uid 99); 3 Mar 2005 21:55:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mh1dmz1.bloomberg.com (HELO mh1dmz1.bloomberg.com) (199.172.169.36)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 03 Mar 2005 13:55:01 -0800
Received: from ns9.bloomberg.com (ns9.bloomberg.com [160.43.164.52]) by mh1dmz1.bloomberg.com with ESMTP for java-user@lucene.apache.org; Thu, 3 Mar 2005 16:54:58 -0500
Received: from ny2535-dr.corp.bloomberg.com (ny2535-dr.bloomberg.com [172.20.193.74])
	by ns9.bloomberg.com (8.11.7p1+Sun/8.10.2) with ESMTP id j23LsvW01606
	for <java-user@lucene.apache.org>; Thu, 3 Mar 2005 16:54:58 -0500 (EST)
Received: from PN1528.corp.bloomberg.com (unverified) by ny2535-dr.corp.bloomberg.com
 (Content Technologies SMTPRS 4.3.17) with ESMTP id <T6f75c02818ac14c14a744@ny2535-dr.corp.bloomberg.com> for <java-user@lucene.apache.org>;
 Thu, 3 Mar 2005 16:54:57 -0500
Received: from ny2526.corp.bloomberg.com ([172.20.73.28]) by PN1528.corp.bloomberg.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 3 Mar 2005 16:54:57 -0500
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Subject: RE: Sandbox
Date: Thu, 3 Mar 2005 16:54:56 -0500
Message-Id: <3B530EF12E388B408ECC3162BA8C00F40107A79C@ny2526.corp.bloomberg.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sandbox
Thread-Index: AcUgOv3wKLRv2CMoRFWaTLfBt4GJbgAAIw1g
From: "Chong, Herb" <HChong3@bloomberg.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 03 Mar 2005 21:54:57.0409 (UTC) FILETIME=[A3DA7710:01C5203B]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

i got a 404 on all the URLs pointing to the sandbox before i emailed to
the list. your link worked.

Herb...=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Thursday, March 03, 2005 4:49 PM
To: java-user@lucene.apache.org
Subject: Re: Sandbox

Don't know why you got a 404 on the URL I sent.... its a valid URL, and

in fact the same URL used to check out the repository with an svn =20
client.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 03 22:40:51 2005
Return-Path: <java-user-return-13524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27802 invoked from network); 3 Mar 2005 22:40:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Mar 2005 22:40:51 -0000
Received: (qmail 49966 invoked by uid 500); 3 Mar 2005 22:40:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49936 invoked by uid 500); 3 Mar 2005 22:40:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49922 invoked by uid 99); 3 Mar 2005 22:40:45 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31108.mail.mud.yahoo.com (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 03 Mar 2005 14:40:43 -0800
Received: (qmail 20532 invoked by uid 60001); 3 Mar 2005 22:40:41 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=e1002gdygDRpnLYiMpghGaUXcPPR2tPYl/0wXnrBy05gXIShJG7/LKJQAYiXainaGz79PV2OspFJBYsr1z7HI4YYLg5WsKoh47oPNSUCH6/Zeekoyq5gDig0bU2EU0R+uek+glxsqLdBET0vr1WqPdTl+FuWdIy03QXHZa3fTfQ=  ;
Message-ID: <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com>
Received: from [216.194.17.194] by web31108.mail.mud.yahoo.com via HTTP; Thu, 03 Mar 2005 14:40:41 PST
Date: Thu, 3 Mar 2005 14:40:41 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lucene question, examples
To: java-user@lucene.apache.org
In-Reply-To: <20050303161145.H600@sodor.wadsworth.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Brian,

It sounds like you are using a little demo application that comes with
Lucene.  This is really just a demo that shows how you can use Lucene. 
Lucene in a toolkit for building search applications, so you would
really want to develop something of your own around Lucene.  Sure, you
can use a demo, but that little demo is not perfect.  Since v 1.2 there
have been some changes in the demo area, so you could try grabbing the
latest version of Lucene and trying its demo (same application, it's
just that it may be a bit better).  If that fails, you can try the file
indexing framework from Lucene in Action (c.f.
http://www.lucenebook.com ) - source code is freely available.

If by shtml you mean HTML with server-side includes, then note that you
will not be able to do this with Lucene alone, as server-side includes
are not static.

Otis


--- Brian Cuttler <brian@wadsworth.org> wrote:

> I've sorry if this is the wrong forum, I was trying for lucene-user
> and been unable to subscribe (but seem to see lucene items here).
> 
> We have been runing apache on our internal sites for a while, with
> tomcat and lucene. Plugged in the demo index build and search 
> features... and for a long time life has been good.
> 
> Now we are looking to implement apache on our external site with
> tomcat and lucene.
> 
> System is Solaris 9
> Apache/1.3.29 (Unix) ApacheJserv/1.1.2 mod_perl/1.25 configured
> Apache, with Tomcat included, from Solaris freeware site.
> 
> I didn't see Lucene on the Sun FW site so just replicated the
> installation
> from the internal to the (future) external website.
> 
> Lucene is currently v 1.2 (at least that is the version number of the
> demo package).
> 
> The index we are building (org.apache.lucene.demo.IndexHTML) seems to
> capture the tags from the "ALT" text, where really we need it to pick
> up not image texts but content and keyword fields, or perhaps even
> plain
> text that is outside of the ALT tags.
> 
> We also suspect that we are not picking up all documents, ie, not
> both
> html, htm. We'd like to extend the range of documents we index, soon
> to include shtml unless I'm mistaken.
> 
> I strongly suspect that newer demos might already do this, or that
> with
> some basic instruction I could modify the document extentions if not
> the
> (I suspect rather complex) target strings.
> 
> Unfortunately while the implement demo docs are great, I've so far
> not
> found (or simply not understood) the docs that might give the options
> we are hoping to implement.
> 
> 						Thank you in advance,
> 
> 						Brian
> 
> ---
>    Brian R Cuttler                 brian.cuttler@wadsworth.org
>    Computer Systems Support        (v) 518 486-1697
>    Wadsworth Center                (f) 518 473-6384
>    NYS Department of Health        Help Desk 518 473-0773
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 04 14:14:29 2005
Return-Path: <java-user-return-13525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45278 invoked from network); 4 Mar 2005 14:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Mar 2005 14:14:29 -0000
Received: (qmail 33525 invoked by uid 500); 4 Mar 2005 14:14:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33498 invoked by uid 500); 4 Mar 2005 14:14:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33485 invoked by uid 99); 4 Mar 2005 14:14:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from csserv.wadsworth.org (HELO csserv.wadsworth.org) (199.184.18.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 04 Mar 2005 06:14:22 -0800
Received: from sodor.wadsworth.org (sodor [172.16.1.143])
	by csserv.wadsworth.org (8.11.7p1+Sun/8.11.7) with ESMTP id j24EE9J07178
	for <java-user@lucene.apache.org>; Fri, 4 Mar 2005 09:14:09 -0500 (EST)
Received: (from brian@localhost)
	by sodor.wadsworth.org (8.12.2+Sun/8.12.5/Submit) id j24EE8Yg001103
	for java-user@lucene.apache.org; Fri, 4 Mar 2005 09:14:08 -0500 (EST)
Date: Fri, 4 Mar 2005 09:14:08 -0500
From: Brian Cuttler <brian@wadsworth.org>
To: java-user@lucene.apache.org
Subject: Re: lucene question, examples
Message-ID: <20050304091408.C1077@sodor.wadsworth.org>
References: <20050303161145.H600@sodor.wadsworth.org> <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2us
In-Reply-To: <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com>
X-Wadsworth-MailScanner-Information: Please contact CSS for more information
X-Wadsworth-MailScanner: Found to be clean
X-MailScanner-From: brian@sodor.wadsworth.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Otis,

Yes, the 1.2 example code is exactly what I've been running on the
internal servers. Have to say, for sample code we got by pretty
well for a fairly long time.

Will check the newer sources and samples, and the code/site you
indicated. I'm a generalist, I've written and debugged code in
languages that I've never learned and unfortunately the life of
a system admin doesn't allow for much java, at least not at my site.

I'll have a look and let you know, just for the record, how things
turn out.

						thank you,

						Brian

On Thu, Mar 03, 2005 at 02:40:41PM -0800, Otis Gospodnetic wrote:
> Brian,
> 
> It sounds like you are using a little demo application that comes with
> Lucene.  This is really just a demo that shows how you can use Lucene. 
> Lucene in a toolkit for building search applications, so you would
> really want to develop something of your own around Lucene.  Sure, you
> can use a demo, but that little demo is not perfect.  Since v 1.2 there
> have been some changes in the demo area, so you could try grabbing the
> latest version of Lucene and trying its demo (same application, it's
> just that it may be a bit better).  If that fails, you can try the file
> indexing framework from Lucene in Action (c.f.
> http://www.lucenebook.com ) - source code is freely available.
> 
> If by shtml you mean HTML with server-side includes, then note that you
> will not be able to do this with Lucene alone, as server-side includes
> are not static.
> 
> Otis
> 
> 
> --- Brian Cuttler <brian@wadsworth.org> wrote:
> 
> > I've sorry if this is the wrong forum, I was trying for lucene-user
> > and been unable to subscribe (but seem to see lucene items here).
> > 
> > We have been runing apache on our internal sites for a while, with
> > tomcat and lucene. Plugged in the demo index build and search 
> > features... and for a long time life has been good.
> > 
> > Now we are looking to implement apache on our external site with
> > tomcat and lucene.
> > 
> > System is Solaris 9
> > Apache/1.3.29 (Unix) ApacheJserv/1.1.2 mod_perl/1.25 configured
> > Apache, with Tomcat included, from Solaris freeware site.
> > 
> > I didn't see Lucene on the Sun FW site so just replicated the
> > installation
> > from the internal to the (future) external website.
> > 
> > Lucene is currently v 1.2 (at least that is the version number of the
> > demo package).
> > 
> > The index we are building (org.apache.lucene.demo.IndexHTML) seems to
> > capture the tags from the "ALT" text, where really we need it to pick
> > up not image texts but content and keyword fields, or perhaps even
> > plain
> > text that is outside of the ALT tags.
> > 
> > We also suspect that we are not picking up all documents, ie, not
> > both
> > html, htm. We'd like to extend the range of documents we index, soon
> > to include shtml unless I'm mistaken.
> > 
> > I strongly suspect that newer demos might already do this, or that
> > with
> > some basic instruction I could modify the document extentions if not
> > the
> > (I suspect rather complex) target strings.
> > 
> > Unfortunately while the implement demo docs are great, I've so far
> > not
> > found (or simply not understood) the docs that might give the options
> > we are hoping to implement.
> > 
> > 						Thank you in advance,
> > 
> > 						Brian
> > 
> > ---
> >    Brian R Cuttler                 brian.cuttler@wadsworth.org
> >    Computer Systems Support        (v) 518 486-1697
> >    Wadsworth Center                (f) 518 473-6384
> >    NYS Department of Health        Help Desk 518 473-0773
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
---
   Brian R Cuttler                 brian.cuttler@wadsworth.org
   Computer Systems Support        (v) 518 486-1697
   Wadsworth Center                (f) 518 473-6384
   NYS Department of Health        Help Desk 518 473-0773


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 04 16:32:09 2005
Return-Path: <java-user-return-13526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40247 invoked from network); 4 Mar 2005 16:32:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Mar 2005 16:32:09 -0000
Received: (qmail 91779 invoked by uid 500); 4 Mar 2005 16:32:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91743 invoked by uid 500); 4 Mar 2005 16:32:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91729 invoked by uid 99); 4 Mar 2005 16:32:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from csserv.wadsworth.org (HELO csserv.wadsworth.org) (199.184.18.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 04 Mar 2005 08:32:03 -0800
Received: from sodor.wadsworth.org (sodor [172.16.1.143])
	by csserv.wadsworth.org (8.11.7p1+Sun/8.11.7) with ESMTP id j24GVOJ27190
	for <java-user@lucene.apache.org>; Fri, 4 Mar 2005 11:31:24 -0500 (EST)
Received: (from brian@localhost)
	by sodor.wadsworth.org (8.12.2+Sun/8.12.5/Submit) id j24GVNKf001198;
	Fri, 4 Mar 2005 11:31:23 -0500 (EST)
Date: Fri, 4 Mar 2005 11:31:22 -0500
From: Brian Cuttler <brian@wadsworth.org>
To: java-user@lucene.apache.org
Cc: Raydeen Gallogly <raydeen@sodor.wadsworth.org>,
        Lisa Alaxanian <laa01@sodor.wadsworth.org>
Subject: Re: lucene question, examples
Message-ID: <20050304113122.L1077@sodor.wadsworth.org>
References: <20050303161145.H600@sodor.wadsworth.org> <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2us
In-Reply-To: <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com>
X-Wadsworth-MailScanner-Information: Please contact CSS for more information
X-Wadsworth-MailScanner: Found to be clean
X-MailScanner-From: brian@sodor.wadsworth.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Otis,

> If by shtml you mean HTML with server-side includes, then note that you
> will not be able to do this with Lucene alone, as server-side includes
> are not static.

My understanding is that our webmaster is hoping to have very simple
files created by the data-suppliers, ie, depatmental people that generate
web pages. Then use server-side-includes to include site or departement
comment headers/footers/backgrounds, so that ultimately it will be
the .shtml with the interesting data.

Is this something that in your experience works well or is there some
other methology I can recommend to her ?

						thank you,

						Brian

On Thu, Mar 03, 2005 at 02:40:41PM -0800, Otis Gospodnetic wrote:
> Brian,
> 
> It sounds like you are using a little demo application that comes with
> Lucene.  This is really just a demo that shows how you can use Lucene. 
> Lucene in a toolkit for building search applications, so you would
> really want to develop something of your own around Lucene.  Sure, you
> can use a demo, but that little demo is not perfect.  Since v 1.2 there
> have been some changes in the demo area, so you could try grabbing the
> latest version of Lucene and trying its demo (same application, it's
> just that it may be a bit better).  If that fails, you can try the file
> indexing framework from Lucene in Action (c.f.
> http://www.lucenebook.com ) - source code is freely available.
> 
> If by shtml you mean HTML with server-side includes, then note that you
> will not be able to do this with Lucene alone, as server-side includes
> are not static.
> 
> Otis
> 
> 
> --- Brian Cuttler <brian@wadsworth.org> wrote:
> 
> > I've sorry if this is the wrong forum, I was trying for lucene-user
> > and been unable to subscribe (but seem to see lucene items here).
> > 
> > We have been runing apache on our internal sites for a while, with
> > tomcat and lucene. Plugged in the demo index build and search 
> > features... and for a long time life has been good.
> > 
> > Now we are looking to implement apache on our external site with
> > tomcat and lucene.
> > 
> > System is Solaris 9
> > Apache/1.3.29 (Unix) ApacheJserv/1.1.2 mod_perl/1.25 configured
> > Apache, with Tomcat included, from Solaris freeware site.
> > 
> > I didn't see Lucene on the Sun FW site so just replicated the
> > installation
> > from the internal to the (future) external website.
> > 
> > Lucene is currently v 1.2 (at least that is the version number of the
> > demo package).
> > 
> > The index we are building (org.apache.lucene.demo.IndexHTML) seems to
> > capture the tags from the "ALT" text, where really we need it to pick
> > up not image texts but content and keyword fields, or perhaps even
> > plain
> > text that is outside of the ALT tags.
> > 
> > We also suspect that we are not picking up all documents, ie, not
> > both
> > html, htm. We'd like to extend the range of documents we index, soon
> > to include shtml unless I'm mistaken.
> > 
> > I strongly suspect that newer demos might already do this, or that
> > with
> > some basic instruction I could modify the document extentions if not
> > the
> > (I suspect rather complex) target strings.
> > 
> > Unfortunately while the implement demo docs are great, I've so far
> > not
> > found (or simply not understood) the docs that might give the options
> > we are hoping to implement.
> > 
> > 						Thank you in advance,
> > 
> > 						Brian
> > 
> > ---
> >    Brian R Cuttler                 brian.cuttler@wadsworth.org
> >    Computer Systems Support        (v) 518 486-1697
> >    Wadsworth Center                (f) 518 473-6384
> >    NYS Department of Health        Help Desk 518 473-0773
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
---
   Brian R Cuttler                 brian.cuttler@wadsworth.org
   Computer Systems Support        (v) 518 486-1697
   Wadsworth Center                (f) 518 473-6384
   NYS Department of Health        Help Desk 518 473-0773


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 04 16:39:10 2005
Return-Path: <java-user-return-13527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45300 invoked from network); 4 Mar 2005 16:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Mar 2005 16:39:09 -0000
Received: (qmail 13078 invoked by uid 500); 4 Mar 2005 16:39:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13046 invoked by uid 500); 4 Mar 2005 16:39:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13023 invoked by uid 99); 4 Mar 2005 16:39:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from csserv.wadsworth.org (HELO csserv.wadsworth.org) (199.184.18.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 04 Mar 2005 08:39:01 -0800
Received: from sodor.wadsworth.org (sodor [172.16.1.143])
	by csserv.wadsworth.org (8.11.7p1+Sun/8.11.7) with ESMTP id j24GcVJ28386
	for <java-user@lucene.apache.org>; Fri, 4 Mar 2005 11:38:32 -0500 (EST)
Received: (from brian@localhost)
	by sodor.wadsworth.org (8.12.2+Sun/8.12.5/Submit) id j24GcV9d001205;
	Fri, 4 Mar 2005 11:38:31 -0500 (EST)
Date: Fri, 4 Mar 2005 11:38:31 -0500
From: Brian Cuttler <brian@wadsworth.org>
To: java-user@lucene.apache.org
Cc: Raydeen Gallogly <raydeen@sodor.wadsworth.org>,
        Lisa Alaxanian <laa01@sodor.wadsworth.org>
Subject: Re: lucene question, examples
Message-ID: <20050304113830.M1077@sodor.wadsworth.org>
References: <20050303161145.H600@sodor.wadsworth.org> <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com> <20050304113122.L1077@sodor.wadsworth.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2us
In-Reply-To: <20050304113122.L1077@sodor.wadsworth.org>
X-Wadsworth-MailScanner-Information: Please contact CSS for more information
X-Wadsworth-MailScanner: Found to be clean
X-MailScanner-From: brian@sodor.wadsworth.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis,

On Fri, Mar 04, 2005 at 11:31:22AM -0500, Brian Cuttler wrote:
> 
> Otis,
> 
> > If by shtml you mean HTML with server-side includes, then note that you
> > will not be able to do this with Lucene alone, as server-side includes
> > are not static.
> 
> My understanding is that our webmaster is hoping to have very simple
> files created by the data-suppliers, ie, depatmental people that generate
> web pages. Then use server-side-includes to include site or departement
> comment headers/footers/backgrounds, so that ultimately it will be
> the .shtml with the interesting data.

Still not sure I used the right vocabulary to express myself.

I don't believe that there is much in the included files that will
need to be indexed, that will be common header/footer data. It is
the static information in the unprocessed shtml that I believe will
be the data people wanting to search the sites will want to find.

> Is this something that in your experience works well or is there some
> other methology I can recommend to her ?
> 
> 						thank you,
> 
> 						Brian
> 
> On Thu, Mar 03, 2005 at 02:40:41PM -0800, Otis Gospodnetic wrote:
> > Brian,
> > 
> > It sounds like you are using a little demo application that comes with
> > Lucene.  This is really just a demo that shows how you can use Lucene. 
> > Lucene in a toolkit for building search applications, so you would
> > really want to develop something of your own around Lucene.  Sure, you
> > can use a demo, but that little demo is not perfect.  Since v 1.2 there
> > have been some changes in the demo area, so you could try grabbing the
> > latest version of Lucene and trying its demo (same application, it's
> > just that it may be a bit better).  If that fails, you can try the file
> > indexing framework from Lucene in Action (c.f.
> > http://www.lucenebook.com ) - source code is freely available.
> > 
> > If by shtml you mean HTML with server-side includes, then note that you
> > will not be able to do this with Lucene alone, as server-side includes
> > are not static.
> > 
> > Otis
> > 
> > 
> > --- Brian Cuttler <brian@wadsworth.org> wrote:
> > 
> > > I've sorry if this is the wrong forum, I was trying for lucene-user
> > > and been unable to subscribe (but seem to see lucene items here).
> > > 
> > > We have been runing apache on our internal sites for a while, with
> > > tomcat and lucene. Plugged in the demo index build and search 
> > > features... and for a long time life has been good.
> > > 
> > > Now we are looking to implement apache on our external site with
> > > tomcat and lucene.
> > > 
> > > System is Solaris 9
> > > Apache/1.3.29 (Unix) ApacheJserv/1.1.2 mod_perl/1.25 configured
> > > Apache, with Tomcat included, from Solaris freeware site.
> > > 
> > > I didn't see Lucene on the Sun FW site so just replicated the
> > > installation
> > > from the internal to the (future) external website.
> > > 
> > > Lucene is currently v 1.2 (at least that is the version number of the
> > > demo package).
> > > 
> > > The index we are building (org.apache.lucene.demo.IndexHTML) seems to
> > > capture the tags from the "ALT" text, where really we need it to pick
> > > up not image texts but content and keyword fields, or perhaps even
> > > plain
> > > text that is outside of the ALT tags.
> > > 
> > > We also suspect that we are not picking up all documents, ie, not
> > > both
> > > html, htm. We'd like to extend the range of documents we index, soon
> > > to include shtml unless I'm mistaken.
> > > 
> > > I strongly suspect that newer demos might already do this, or that
> > > with
> > > some basic instruction I could modify the document extentions if not
> > > the
> > > (I suspect rather complex) target strings.
> > > 
> > > Unfortunately while the implement demo docs are great, I've so far
> > > not
> > > found (or simply not understood) the docs that might give the options
> > > we are hoping to implement.
> > > 
> > > 						Thank you in advance,
> > > 
> > > 						Brian
> > > 
> > > ---
> > >    Brian R Cuttler                 brian.cuttler@wadsworth.org
> > >    Computer Systems Support        (v) 518 486-1697
> > >    Wadsworth Center                (f) 518 473-6384
> > >    NYS Department of Health        Help Desk 518 473-0773
> > > 
> > > 
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> ---
>    Brian R Cuttler                 brian.cuttler@wadsworth.org
>    Computer Systems Support        (v) 518 486-1697
>    Wadsworth Center                (f) 518 473-6384
>    NYS Department of Health        Help Desk 518 473-0773
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
---
   Brian R Cuttler                 brian.cuttler@wadsworth.org
   Computer Systems Support        (v) 518 486-1697
   Wadsworth Center                (f) 518 473-6384
   NYS Department of Health        Help Desk 518 473-0773


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 04 23:02:12 2005
Return-Path: <java-user-return-13528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20457 invoked from network); 4 Mar 2005 23:02:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Mar 2005 23:02:12 -0000
Received: (qmail 50782 invoked by uid 500); 4 Mar 2005 23:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50747 invoked by uid 500); 4 Mar 2005 23:02:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50734 invoked by uid 99); 4 Mar 2005 23:02:08 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 04 Mar 2005 15:02:07 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 7C9475B791; Fri,  4 Mar 2005 15:02:03 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7A54E7F45E
	for <java-user@lucene.apache.org>; Fri,  4 Mar 2005 15:02:03 -0800 (PST)
Date: Fri, 4 Mar 2005 15:02:03 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: lucene question, examples
In-Reply-To: <20050304091408.C1077@sodor.wadsworth.org>
Message-ID: <Pine.LNX.4.58.0503041443560.1395@hal.rescomp.berkeley.edu>
References: <20050303161145.H600@sodor.wadsworth.org>
 <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com>
 <20050304091408.C1077@sodor.wadsworth.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


If your goal is to setup a web based search interface that queries a
lucene index containing all of the documents from your intranet
webservers, without writting a lot of code; then perhaps using Lucene 9and
the demo programs it comes with) isn't the best course of action.

"Nutch" is an OpenSource project built on top of Lucene that may better
serve your needs.  It is designed to be a full featured "web search
solution" with a built in crawler, parsers for various document types, and
a web based search interface.

    http://incubator.apache.org/nutch/tutorial.html

I haven't played with it very much myself, but from what i've seen, it's
trivial to get it up and running and indexing an intranet (or a single web
server).


: Yes, the 1.2 example code is exactly what I've been running on the
: internal servers. Have to say, for sample code we got by pretty
: well for a fairly long time.
:
: Will check the newer sources and samples, and the code/site you
: indicated. I'm a generalist, I've written and debugged code in
: languages that I've never learned and unfortunately the life of
: a system admin doesn't allow for much java, at least not at my site.
:
: I'll have a look and let you know, just for the record, how things
: turn out.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 06 12:20:58 2005
Return-Path: <java-user-return-13529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 684 invoked from network); 6 Mar 2005 12:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Mar 2005 12:20:58 -0000
Received: (qmail 21581 invoked by uid 500); 6 Mar 2005 12:20:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21305 invoked by uid 500); 6 Mar 2005 12:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21292 invoked by uid 500); 6 Mar 2005 12:20:54 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 21287 invoked by uid 99); 6 Mar 2005 12:20:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.195 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 06 Mar 2005 04:20:54 -0800
Received: by wproxy.gmail.com with SMTP id 70so1217603wra
        for <lucene-user@jakarta.apache.org>; Sun, 06 Mar 2005 04:20:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=HGGtoFixmQyLUnbADvkhk3ZLHh0rq6uBm6MTMzdTwCCk2x/8T/x259uhhBMP7GzePFy+YOH2hvZTxRhH0DMzoWt4vcSwQLZ0yOaJfv/VJMSzSXU0Hq8b/rWLvcZahHAV1JfJrY6kFNhskpEW5Ztw0J/4QiLYzFeIojx9x8Jj+q8=
Received: by 10.54.79.19 with SMTP id c19mr228847wrb;
        Sun, 06 Mar 2005 04:20:52 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Sun, 6 Mar 2005 04:20:52 -0800 (PST)
Message-ID: <5f4a646105030604208e91e8b@mail.gmail.com>
Date: Sun, 6 Mar 2005 23:20:52 +1100
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene <lucene-user@jakarta.apache.org>
Subject: Alerts for search results
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

I would like to allow users on my site be able to create alerts base
on the search keywords for every newly posted article. It would be
good to send out the alert emails hourly, daily or weekly, etc.

Anyone has any experience in this area? What are the best practices
when implement such feature? I would imagine it's going to take a lot
of resources to do a search for each keyword.

Any guidance is greatly appreciated. Thanks!

Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 06 12:23:18 2005
Return-Path: <java-user-return-13530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1381 invoked from network); 6 Mar 2005 12:23:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Mar 2005 12:23:18 -0000
Received: (qmail 23054 invoked by uid 500); 6 Mar 2005 12:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23024 invoked by uid 500); 6 Mar 2005 12:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23011 invoked by uid 99); 6 Mar 2005 12:23:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.204 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 06 Mar 2005 04:23:13 -0800
Received: by wproxy.gmail.com with SMTP id 69so1135089wra
        for <java-user@lucene.apache.org>; Sun, 06 Mar 2005 04:23:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=AB4H+46OIKbZCC3dcuGkFvmvdoYvJvqcN3fuEEcPyrOGIIax+Dj0rOR/+SMx9MBM2gGozXH9HRkXv/+wzxXVHvIbALtEWLH4weFbKBdH3BWYk2tAqFUOCqEaueUUdNwjA48/Ee43R64Srg+FsPkPXUShtZVJTXoLXF3DJva6r00=
Received: by 10.54.22.67 with SMTP id 67mr55625wrv;
        Sun, 06 Mar 2005 04:23:11 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Sun, 6 Mar 2005 04:23:11 -0800 (PST)
Message-ID: <5f4a646105030604236b7e9874@mail.gmail.com>
Date: Sun, 6 Mar 2005 23:23:11 +1100
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Subject: Alerts for search results
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

I would like to allow users on my site be able to create alerts base
on the search keywords for every newly posted article. It would be
good to send out the alert emails hourly, daily or weekly, etc.

Anyone has any experience in this area? What are the best practices
when implement such feature? I would imagine it's going to take a lot
of resources to do a search for each keyword.

Any guidance is greatly appreciated. Thanks!

-Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 06 12:36:06 2005
Return-Path: <java-user-return-13531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3543 invoked from network); 6 Mar 2005 12:36:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Mar 2005 12:36:06 -0000
Received: (qmail 32535 invoked by uid 500); 6 Mar 2005 12:36:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32509 invoked by uid 500); 6 Mar 2005 12:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32494 invoked by uid 99); 6 Mar 2005 12:36:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 06 Mar 2005 04:36:01 -0800
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id AB75335500B4; Sun, 06 Mar 2005 07:45:41 -0500
Message-ID: <422AF92C.7000300@bayt.net>
Date: Sun, 06 Mar 2005 16:35:56 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Alerts for search results
References: <5f4a646105030604208e91e8b@mail.gmail.com>
In-Reply-To: <5f4a646105030604208e91e8b@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well since you're doing it by keyword, it's a little tricky coz if you 
want to batch like searches with each other there won't be much 
similarity,  especially if you allow the user to select Any Word | All 
the Words | Exact phrase, we run 45 000 search agents which dispatch an 
email to users daily to inform them of new jobs added to the site, we 
tor the date of the run and the Lucene search string and then the 
scheduler runs hourly to fetch results/ or result count and send the 
mailer to each person who's email is due. Since we allow for 19 separate 
search criteria batching has not helped us much because the probability 
of enough users having the same search criteria is lower. But you should 
try it though, allow your users to start adding alerts, and do your 
calculations whether batching would help or not.

That was the pull scenario, there is also the push scenario using a 
hashing function, so when a new article is added it's words are compared 
to the words that your users have flagged in their alerts and an email 
is dispatched to interested users, be aware that this only makes sense 
if the total number of distinct words in the document is less than the 
number of distinct keywords your users have flagged, which becomes the 
case when you accumulate a lot of agents.

Here's a quick and dirty calculation:
Pull Scenario: you will run as many searches as there are distinct alerts
Push scenario :  you will run as many searches as there are distinct 
words per document.


Hope this helps.



Nader Henein


Ben wrote:

>Hi
>
>I would like to allow users on my site be able to create alerts base
>on the search keywords for every newly posted article. It would be
>good to send out the alert emails hourly, daily or weekly, etc.
>
>Anyone has any experience in this area? What are the best practices
>when implement such feature? I would imagine it's going to take a lot
>of resources to do a search for each keyword.
>
>Any guidance is greatly appreciated. Thanks!
>
>Ben
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 06 12:45:31 2005
Return-Path: <java-user-return-13532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5441 invoked from network); 6 Mar 2005 12:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Mar 2005 12:45:31 -0000
Received: (qmail 37064 invoked by uid 500); 6 Mar 2005 12:45:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37040 invoked by uid 500); 6 Mar 2005 12:45:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37021 invoked by uid 99); 6 Mar 2005 12:45:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.205 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 06 Mar 2005 04:45:17 -0800
Received: by wproxy.gmail.com with SMTP id 69so1136835wra
        for <java-user@lucene.apache.org>; Sun, 06 Mar 2005 04:45:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=j2MLF5QiriIaAJxDL+Vzxevy8c3Cpe+n+0u7ijfaSm1K3O9C+OZR2pXWwZJiK5Q5yKxFCMTJp4JFcPx3uURQLCw9d61R8dXCgujXbQhhtaC/iaeJ6/Lo05cbvIkT6FnuOZl2U9kdLRg/JUH4KzMcRCJ0MDmcX//E895bQxMXTLY=
Received: by 10.54.78.10 with SMTP id a10mr125374wrb;
        Sun, 06 Mar 2005 04:45:15 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Sun, 6 Mar 2005 04:45:15 -0800 (PST)
Message-ID: <5f4a6461050306044546a861b0@mail.gmail.com>
Date: Sun, 6 Mar 2005 23:45:15 +1100
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org, nsh@bayt.net
Subject: Re: Alerts for search results
In-Reply-To: <422AF92C.7000300@bayt.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <5f4a646105030604208e91e8b@mail.gmail.com>
	 <422AF92C.7000300@bayt.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for your help, something for me to start with.

PS: Sorry about the double posts

-Ben

On Sun, 06 Mar 2005 16:35:56 +0400, Nader Henein <nsh@bayt.net> wrote:
> Well since you're doing it by keyword, it's a little tricky coz if you
> want to batch like searches with each other there won't be much
> similarity,  especially if you allow the user to select Any Word | All
> the Words | Exact phrase, we run 45 000 search agents which dispatch an
> email to users daily to inform them of new jobs added to the site, we
> tor the date of the run and the Lucene search string and then the
> scheduler runs hourly to fetch results/ or result count and send the
> mailer to each person who's email is due. Since we allow for 19 separate
> search criteria batching has not helped us much because the probability
> of enough users having the same search criteria is lower. But you should
> try it though, allow your users to start adding alerts, and do your
> calculations whether batching would help or not.
> 
> That was the pull scenario, there is also the push scenario using a
> hashing function, so when a new article is added it's words are compared
> to the words that your users have flagged in their alerts and an email
> is dispatched to interested users, be aware that this only makes sense
> if the total number of distinct words in the document is less than the
> number of distinct keywords your users have flagged, which becomes the
> case when you accumulate a lot of agents.
> 
> Here's a quick and dirty calculation:
> Pull Scenario: you will run as many searches as there are distinct alerts
> Push scenario :  you will run as many searches as there are distinct
> words per document.
> 
> Hope this helps.
> 
> Nader Henein
> 
> 
> Ben wrote:
> 
> >Hi
> >
> >I would like to allow users on my site be able to create alerts base
> >on the search keywords for every newly posted article. It would be
> >good to send out the alert emails hourly, daily or weekly, etc.
> >
> >Anyone has any experience in this area? What are the best practices
> >when implement such feature? I would imagine it's going to take a lot
> >of resources to do a search for each keyword.
> >
> >Any guidance is greatly appreciated. Thanks!
> >
> >Ben
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> >
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 10:31:34 2005
Return-Path: <java-user-return-13533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51291 invoked from network); 7 Mar 2005 10:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 10:31:33 -0000
Received: (qmail 4905 invoked by uid 500); 7 Mar 2005 10:31:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4847 invoked by uid 500); 7 Mar 2005 10:31:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4832 invoked by uid 99); 7 Mar 2005 10:31:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 02:31:16 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 92B9013E213B; Mon,  7 Mar 2005 05:31:13 -0500 (EST)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 0846A13E213A
	for <java-user@lucene.apache.org>; Mon,  7 Mar 2005 05:30:59 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: QueryParser refactoring
Date: Mon, 7 Mar 2005 05:30:57 -0500
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've been making local changes to QueryParser to fix the operator 
precedence issues (i.e. currently A AND B OR C AND D parses to +A +B +C 
+D).

I've gotten every TestQueryParser test to pass without modification 
including this new one:

   public void testPrecedence() throws Exception {
     Query query1 = QueryParser.parse("A AND B OR C AND D", "field", new 
WhitespaceAnalyzer());
     Query query2 = QueryParser.parse("(A AND B) OR (C AND D)", "field", 
new WhitespaceAnalyzer());
     assertEquals(query1, query2);
   }

except for this one from testQPA:

     assertQueryEquals("term AND NOT phrase term", qpAnalyzer,
                       "+term -\"phrase1 phrase2\" term");

The error I get is this:

junit.framework.AssertionFailedError: Query /term AND NOT phrase term/ 
yielded /(+term -"phrase1 phrase2") term/, expecting /+term -"phrase1 
phrase2" term/

My take is that the test is asserting the incorrect behavior that we 
want to fix.  Do others agree?

If we agree, then I'll adjust the test to expect /(+term -"phrase1 
phrase2") term/ instead.  The next steps will be:

	- Rename my work to PrecedenceQueryParser.jj (name up for discussion 
if desired)
	- Adjust the build file to take this new JavaCC file into account (I'm 
also switching back to using <javacc> and adding a <jjdoc> in to 
document the grammars we use).
	- Deprecate our current QueryParser and refer users to the new 
PrecedenceQueryParser.

I'm switching back to <javacc> in the build as it works fine with 
JavaCC 3.2 and does dependency checking automatically.  The only issue 
is that <javacc> currently only does dependency checking, such that if 
the .jj is newer than the generated .java file then generation is 
skipped - this makes it tricky to force generation.  I'll also add a 
way to force generation by removing the generated .java file, and I'll 
also probably add a force="..." attribute to <javacc> since I'm also an 
Ant committer :) (to be present in Ant 1.6.3 hopefully).  Any other 
<javacc> wishes out there?

Any thoughts on any of the above?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 13:59:11 2005
Return-Path: <java-user-return-13534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72213 invoked from network); 7 Mar 2005 13:59:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 13:59:11 -0000
Received: (qmail 71317 invoked by uid 500); 7 Mar 2005 13:59:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70939 invoked by uid 500); 7 Mar 2005 13:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70925 invoked by uid 500); 7 Mar 2005 13:59:05 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 70921 invoked by uid 99); 7 Mar 2005 13:59:05 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 209-254-108-74.ip.mcleodusa.net (HELO enigmastation.com) (209.254.108.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 05:59:04 -0800
Received: from joeo (helo=localhost)
	by enigmastation.com with local-esmtp (Exim 4.44)
	id 1D8E1L-0007UN-7y
	for lucene-user@jakarta.apache.org; Mon, 07 Mar 2005 03:55:23 -0500
Date: Mon, 7 Mar 2005 03:55:23 -0500 (EST)
From: "Joseph B. Ottinger" <joeo@enigmastation.com>
To: Lucene User's List <lucene-user@jakarta.apache.org>
Subject: Getting the newly-added doc id?
Message-ID: <Pine.LNX.4.62.0503070353390.25563@enigmastation.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is there a way, after IndexWriter.addDocument(), to determine what the 
document's resulting id is? addDocument() has no return type; I could run 
a search, but the search might not be accurate if the document added is 
only slightly different than another document.

Would an external id be necessary?

-----------------------------------------------------------------------
Joseph B. Ottinger                             http://enigmastation.com
IT Consultant                                    joeo@enigmastation.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 14:09:36 2005
Return-Path: <java-user-return-13535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78026 invoked from network); 7 Mar 2005 14:09:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 14:09:35 -0000
Received: (qmail 87688 invoked by uid 500); 7 Mar 2005 14:09:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87672 invoked by uid 500); 7 Mar 2005 14:09:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 77521 invoked by uid 99); 7 Mar 2005 14:02:14 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mario@ops.co.at designates 194.152.182.4 as permitted sender)
Message-ID: <422C5EDD.2020204@ops.co.at>
Date: Mon, 07 Mar 2005 15:02:05 +0100
From: Mario Ivankovits <mario@ops.co.at>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Getting the newly-added doc id?
References: <Pine.LNX.4.62.0503070353390.25563@enigmastation.com>
In-Reply-To: <Pine.LNX.4.62.0503070353390.25563@enigmastation.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on smtp.ops.co.at
X-Spam-Level: 
X-Spam-Status: No, hits=-15.4 required=7.0 tests=AWL,BAYES_00,
	LOCAL_WHITE_RECV_TS1,RATWR10_MESSID,SARE_TOCC_USER autolearn=ham 
	version=2.64
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Joseph B. Ottinger wrote:

> Is there a way, after IndexWriter.addDocument(), to determine what the 
> document's resulting id is? addDocument() has no return type; I could 
> run a search, but the search might not be accurate if the document 
> added is only slightly different than another document.
>
> Would an external id be necessary?

As far as I know - yes.
Especially since the lucene document id can change i.e. if you delete a 
document and optimize the index.

---
Mario


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 14:10:50 2005
Return-Path: <java-user-return-13536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78591 invoked from network); 7 Mar 2005 14:10:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 14:10:49 -0000
Received: (qmail 92155 invoked by uid 500); 7 Mar 2005 14:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92128 invoked by uid 500); 7 Mar 2005 14:10:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92115 invoked by uid 99); 7 Mar 2005 14:10:44 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 209-254-108-74.ip.mcleodusa.net (HELO enigmastation.com) (209.254.108.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 06:10:43 -0800
Received: from joeo (helo=localhost)
	by enigmastation.com with local-esmtp (Exim 4.44)
	id 1D8ECb-0007am-Oa
	for java-user@lucene.apache.org; Mon, 07 Mar 2005 04:07:01 -0500
Date: Mon, 7 Mar 2005 04:07:01 -0500 (EST)
From: "Joseph B. Ottinger" <joeo@enigmastation.com>
To: java-user@lucene.apache.org
Subject: Re: Getting the newly-added doc id?
In-Reply-To: <422C5EDD.2020204@ops.co.at>
Message-ID: <Pine.LNX.4.62.0503070406530.25563@enigmastation.com>
References: <Pine.LNX.4.62.0503070353390.25563@enigmastation.com>
 <422C5EDD.2020204@ops.co.at>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Argh, okay. Thank you very much.

On Mon, 7 Mar 2005, Mario Ivankovits wrote:

> Joseph B. Ottinger wrote:
>
>> Is there a way, after IndexWriter.addDocument(), to determine what the 
>> document's resulting id is? addDocument() has no return type; I could run a 
>> search, but the search might not be accurate if the document added is only 
>> slightly different than another document.
>> 
>> Would an external id be necessary?
>
> As far as I know - yes.
> Especially since the lucene document id can change i.e. if you delete a 
> document and optimize the index.
>
> ---
> Mario
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-----------------------------------------------------------------------
Joseph B. Ottinger                             http://enigmastation.com
IT Consultant                                    joeo@enigmastation.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 15:43:27 2005
Return-Path: <java-user-return-13537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42687 invoked from network); 7 Mar 2005 15:43:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 15:43:27 -0000
Received: (qmail 39618 invoked by uid 500); 7 Mar 2005 15:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39351 invoked by uid 500); 7 Mar 2005 15:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39336 invoked by uid 500); 7 Mar 2005 15:43:22 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 39330 invoked by uid 99); 7 Mar 2005 15:43:22 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 07:43:21 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 7 Mar 2005 10:47:10 -0500
Message-ID: <009601c5232c$ecb9cd20$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <003101c51d6c$41382840$d8040c0a@eu.uis.unisys.com> <16930.54852.293915.792642@tanto-xipolis.de> <006401c51d70$0bcf6110$d8040c0a@eu.uis.unisys.com> <97b971f57318214fc42057858379ba45@ehatchersolutions.com> <00aa01c51d8e$f07fdc40$d8040c0a@eu.uis.unisys.com> <42238D7C.30306@apache.org> <008501c51e74$21865ae0$7703d00a@hypermedia.com>
Subject: Re: Zip Files
Date: Mon, 7 Mar 2005 10:47:10 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 07 Mar 2005 15:47:10.0908 (UTC) FILETIME=[ECD89FC0:01C5232C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello;

I posted a question about ZIPS a while back. I thought I would post the
solution I arrived at.

Below is how I ended up handling ZIP files. If a situation occurs where
there are ZIPS inside of ZIPS I ignore the embedded ZIP. If requests come in
to handle this situation, I think I will have to unzip to a temp folder,
index and than delete the temp folder.

NOTE:
In our system all documents contained in a ZIP need to be associated with an
single document in our CMS. This is why all the field obtained from the
archive files are added to the same collection (and eventually written to
the same document).

Luke

//zip files
        else if (attached.getPath().endsWith(".zip")) {
            Document attachedDoc = new Document();
            Trace.DEBUG("Got a zip file to index: " + attached.getPath());
            try {
                ZipFile zip = new ZipFile(attached);
                ZipEntry zipEntry;
                Enumeration files = zip.entries();
                Vector totalEnummaration = new Vector();
                while (files.hasMoreElements()) {
                    zipEntry = (ZipEntry) files.nextElement();
                    Trace.DEBUG("The zip contains file: " +
zipEntry.getName());
                    Enumeration data =
indexAttached(zip.getInputStream(zipEntry), attached
                    .getPath(), zipEntry.getName());
                    /*
                     * put the return fields in a vector
                     */
                    insertFields(totalEnummaration, data);
                    data = null;
                }
                return totalEnummaration.elements();
            } catch (Exception e) {
                Trace.ERROR("INDEXING ERROR: Was unable to index Zip file: "
+ attached.getPath()
                + " " + e);
                return null;
            }
        }

----- Original Message ----- 
From: "Luke Shannon" <lshannon@futurebrand.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, March 01, 2005 10:34 AM
Subject: Zip Files


> Hello;
>
> Anyone have an ideas on how to index the contents within zip files?
>
> Thanks,
>
> Luke
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 16:26:05 2005
Return-Path: <java-user-return-13538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69039 invoked from network); 7 Mar 2005 16:26:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 16:26:05 -0000
Received: (qmail 26669 invoked by uid 500); 7 Mar 2005 16:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26639 invoked by uid 500); 7 Mar 2005 16:26:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26626 invoked by uid 99); 7 Mar 2005 16:26:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 08:25:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4F90913E213B; Mon,  7 Mar 2005 11:25:57 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 8BC0913E213A
	for <java-user@lucene.apache.org>; Mon,  7 Mar 2005 11:25:51 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <21f1fda77df98c8a54dc2a66307e3c99@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Mon, 7 Mar 2005 11:25:46 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've gone ahead and committed my PrecedenceQueryParser.  I cloned 
TestQueryParser into TestPrecedenceQueryParser and fixed the one item 
mentioned below.

Please give this new PrecedenceQueryParser a try and report back any 
issues you find with it.  I'm still on the steep side of the JavaCC 
learning curve so there are quite possibly cases that it does not 
handle properly, though it does pass all of the test cases from 
QueryParser (with the noted exception).

In my local code, I have deprecated QueryParser and will commit that 
once I'm comfortable that this new one is at least a decent 
replacement.

	Erik



On Mar 7, 2005, at 5:30 AM, Erik Hatcher wrote:

> I've been making local changes to QueryParser to fix the operator 
> precedence issues (i.e. currently A AND B OR C AND D parses to +A +B 
> +C +D).
>
> I've gotten every TestQueryParser test to pass without modification 
> including this new one:
>
>   public void testPrecedence() throws Exception {
>     Query query1 = QueryParser.parse("A AND B OR C AND D", "field", 
> new WhitespaceAnalyzer());
>     Query query2 = QueryParser.parse("(A AND B) OR (C AND D)", 
> "field", new WhitespaceAnalyzer());
>     assertEquals(query1, query2);
>   }
>
> except for this one from testQPA:
>
>     assertQueryEquals("term AND NOT phrase term", qpAnalyzer,
>                       "+term -\"phrase1 phrase2\" term");
>
> The error I get is this:
>
> junit.framework.AssertionFailedError: Query /term AND NOT phrase term/ 
> yielded /(+term -"phrase1 phrase2") term/, expecting /+term -"phrase1 
> phrase2" term/
>
> My take is that the test is asserting the incorrect behavior that we 
> want to fix.  Do others agree?
>
> If we agree, then I'll adjust the test to expect /(+term -"phrase1 
> phrase2") term/ instead.  The next steps will be:
>
> 	- Rename my work to PrecedenceQueryParser.jj (name up for discussion 
> if desired)
> 	- Adjust the build file to take this new JavaCC file into account 
> (I'm also switching back to using <javacc> and adding a <jjdoc> in to 
> document the grammars we use).
> 	- Deprecate our current QueryParser and refer users to the new 
> PrecedenceQueryParser.
>
> I'm switching back to <javacc> in the build as it works fine with 
> JavaCC 3.2 and does dependency checking automatically.  The only issue 
> is that <javacc> currently only does dependency checking, such that if 
> the .jj is newer than the generated .java file then generation is 
> skipped - this makes it tricky to force generation.  I'll also add a 
> way to force generation by removing the generated .java file, and I'll 
> also probably add a force="..." attribute to <javacc> since I'm also 
> an Ant committer :) (to be present in Ant 1.6.3 hopefully).  Any other 
> <javacc> wishes out there?
>
> Any thoughts on any of the above?
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 16:35:42 2005
Return-Path: <java-user-return-13539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74021 invoked from network); 7 Mar 2005 16:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 16:35:41 -0000
Received: (qmail 42314 invoked by uid 500); 7 Mar 2005 16:35:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42268 invoked by uid 500); 7 Mar 2005 16:35:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42247 invoked by uid 99); 7 Mar 2005 16:35:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from moutng.kundenserver.de (HELO moutng.kundenserver.de) (212.227.126.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 08:35:34 -0800
Received: from [212.227.126.208] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D8LCd-00078m-00
	for java-user@lucene.apache.org; Mon, 07 Mar 2005 17:35:31 +0100
Received: from [82.135.64.232] (helo=voodoo.federation.net)
	by mrelayng.kundenserver.de with asmtp (TLSv1:RC4-MD5:128)
	(Exim 3.35 #1)
	id 1D8LCd-0003MG-00
	for java-user@lucene.apache.org; Mon, 07 Mar 2005 17:35:31 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
Date: Mon, 7 Mar 2005 17:35:30 +0100
User-Agent: KMail/1.7.1
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
In-Reply-To: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200503071735.30777.daniel.naber@t-online.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 07 March 2005 11:30, Erik Hatcher wrote:

> =A0=A0=A0=A0=A0=A0=A0=A0- Deprecate our current QueryParser and refer use=
rs to the new
> PrecedenceQueryParser.

I'd consider fixing the precedence a bugfix, so I' prefer to rename=20
QueryParser to "OldQueryParser" or so and make the new one "QueryParser".

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 17:11:30 2005
Return-Path: <java-user-return-13540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91855 invoked from network); 7 Mar 2005 17:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 17:11:30 -0000
Received: (qmail 27013 invoked by uid 500); 7 Mar 2005 17:11:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26977 invoked by uid 500); 7 Mar 2005 17:11:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26962 invoked by uid 99); 7 Mar 2005 17:11:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 09:11:23 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 056CD13E213A; Mon,  7 Mar 2005 12:11:21 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 681B513E213A
	for <java-user@lucene.apache.org>; Mon,  7 Mar 2005 12:11:19 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <200503071735.30777.daniel.naber@t-online.de>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <200503071735.30777.daniel.naber@t-online.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <21db5d7be0fa5c64b63d4d3a60ea3ea1@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Mon, 7 Mar 2005 12:11:14 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 7, 2005, at 11:35 AM, Daniel Naber wrote:
> On Monday 07 March 2005 11:30, Erik Hatcher wrote:
>
>> =A0=A0=A0=A0=A0=A0=A0=A0- Deprecate our current QueryParser and refer =
users to the new
>> PrecedenceQueryParser.
>
> I'd consider fixing the precedence a bugfix, so I' prefer to rename
> QueryParser to "OldQueryParser" or so and make the new one=20
> "QueryParser".

That's fine with me.

Once the new PrecedenceQueryParser has been tested by folks and shown=20
to work as expected, I'll switch it around.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 17:49:46 2005
Return-Path: <java-user-return-13541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11351 invoked from network); 7 Mar 2005 17:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 17:49:45 -0000
Received: (qmail 95978 invoked by uid 500); 7 Mar 2005 17:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95903 invoked by uid 500); 7 Mar 2005 17:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95858 invoked by uid 500); 7 Mar 2005 17:49:38 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 95837 invoked by uid 99); 7 Mar 2005 17:49:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jmuguruza@gmail.com designates 64.233.184.205 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 09:49:37 -0800
Received: by wproxy.gmail.com with SMTP id 58so1419900wri
        for <lucene-user@jakarta.apache.org>; Mon, 07 Mar 2005 09:49:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=EjLmemUZFS+81ySIjJIi1kqNvUTJXH9oAe9jrC1MadB4+4z4swtn/JmF+j4GdG5NeMwamd76Nwdt06ng9WDKQ8+LMRXk+WqsKT5djIsDt7kzbog+0gFUo+cUy0JUHKBVR+Q7WgBn1IbVepdGsgJc14zM5x8+H0bjHtggRAkbC/I=
Received: by 10.54.84.12 with SMTP id h12mr71663wrb;
        Mon, 07 Mar 2005 09:49:10 -0800 (PST)
Received: by 10.54.39.18 with HTTP; Mon, 7 Mar 2005 09:49:09 -0800 (PST)
Message-ID: <f071061b0503070949584fcf82@mail.gmail.com>
Date: Mon, 7 Mar 2005 18:49:09 +0100
From: javier muguruza <jmuguruza@gmail.com>
Reply-To: javier muguruza <jmuguruza@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: identifier field as keyword or unindexed
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

We index our documents in the following way:

        doc = new Document();
        // mailid
        doc.add(Field.UnIndexed("mid",mid));
        //body
        doc.add(Field.UnStored("body", textb));

mid is a unique identifier, and body contains long pieces of text to be indexed.
        
And later make searches on the body field, the mid allows us to find a
file on the filesystem with a compressed (and digitally signed)
version of the original body indexed.
Our way to work in a query in our app is this:
1. first we make a search in a db (for many different reasons) that
returns a number (from 0 to thousands) of mid
2. we use lucene to search for some text in many indexes, this returns
a second list of mid
3. we return the result as the intersection of both lists.

This is working fine right now, but wonder wether we are not using
lucene to the fullest, cause we could also store mid as a keyword
(instead of unindexed), and add the condition (AND mid==[any mid from
our step 1]) to the lucene query we run. My questions are:

1. Is there a limit in the number of conditions I can add to a query??
Sometimes we have 10 mids, other times we have thousands of them so we
would have to add: AND (mid:mid1 OR mid:mid2 ... OR mid:mid10000).
Probably there is a limit, and we could only apply the mid conditions
when the number or mids returned by step 1 is smaller than that limit?
2. As the mid is a unique identifier (I guest lucene does not care
about that right?), and the condition on the mid woudl be ANDed to the
text query conditions, will it be faster for lucene to look first in
the mid field and dont do the text lookup if the mid condition is not
fullfilled? I dont know wether I am clear enough...Will I get some
benefit on the queries by adding some additional conditions or the
cost of adding another field to index will not pay off? Maybe it
depends on the number of documents? Maybe it would be best to set mid
as a keyword just in case, and add it as conditions later if the
searches take too long?

thanks for any though on that

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 19:56:22 2005
Return-Path: <java-user-return-13542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72421 invoked from network); 7 Mar 2005 19:56:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 19:56:22 -0000
Received: (qmail 30144 invoked by uid 500); 7 Mar 2005 19:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30115 invoked by uid 500); 7 Mar 2005 19:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30097 invoked by uid 99); 7 Mar 2005 19:56:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 11:56:16 -0800
Received: from pd9e62be5.dip.t-dialin.net ([217.230.43.229] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D8OKq-0007YJ-Q3
	for java-user@lucene.apache.org; Mon, 07 Mar 2005 11:56:13 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:        <java-user@lucene.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Mon, 7 Mar 2005 20:55:53 +0100
Message-ID: <200537205553.714534@Kelvin>
In-Reply-To: <20053313550.438086@Kelvin>
Subject: Re: Fast access to a random page of the search results.
Mime-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This is a bump post...

I'm wondering if there's any code (contributed, bugzilla, core or otherwise)=
 that provides document lazy-loading functionality, i.e. only=
 eager-initialize specific fields, or load fields on-demand.

Thanks,
k

On Thu, 3 Mar 2005 13:55:00 +0100, Kelvin Tan wrote:
>=A0Is this actually in the codebase? =A0I couldn't find it in SVN or in
>=A0Bugzilla...
>
>=A0kelvin
>
>=A0On Mon, 28 Feb 2005 11:59:54 -0500, Erik Hatcher wrote:
>>=A0Or perhaps you
>>=A0need to investigate the (is it in the codebase already?) patch to
>>=A0=A0load fields lazily upon demand instead.
>
>
>=A0--------------------------------------------------------------------
>=A0- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>=A0For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 20:33:10 2005
Return-Path: <java-user-return-13543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6451 invoked from network); 7 Mar 2005 20:33:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 20:33:09 -0000
Received: (qmail 19903 invoked by uid 500); 7 Mar 2005 20:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19875 invoked by uid 500); 7 Mar 2005 20:33:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19861 invoked by uid 99); 7 Mar 2005 20:33:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from moutvdom.kundenserver.de (HELO moutvdomng.kundenserver.de) (212.227.126.249)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 12:33:02 -0800
Received: from [212.227.126.221] (helo=mrvdomng.kundenserver.de)
	by moutvdomng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D8OuR-0007Ow-00
	for java-user@lucene.apache.org; Mon, 07 Mar 2005 21:32:59 +0100
Received: from [80.128.88.124] (helo=eco)
	by mrvdomng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D8OuR-00011t-00
	for java-user@lucene.apache.org; Mon, 07 Mar 2005 21:32:59 +0100
Received: by eco (Postfix, from userid 1000)
	id 9DF52837C9; Mon,  7 Mar 2005 21:32:38 +0100 (CET)
From: Morus Walter <morus.walter@gmx.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16940.47718.444427.724315@onlinehome.de>
Date: Mon, 7 Mar 2005 21:32:38 +0100
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
In-Reply-To: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
X-Mailer: VM 7.17 under 21.4 (patch 15) "Security Through Obscurity" XEmacs Lucid
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Erik,

> I've been making local changes to QueryParser to fix the operator 
> precedence issues (i.e. currently A AND B OR C AND D parses to +A +B +C 
> +D).
> 
I had a quick look at the new QP. I didn't look at the code yet, but I
redid my patch at the weekend for the current code, and I found it quite 
ugly ;-) I didn't finish it completely, so I didn't upload it to 
bugzilla yet.

Your changes look great in general, though I find some issues:

1) 'stop OR stop AND stop' where stop is a stopword gives a parse error:
Encountered "<EOF>" at line 1, column 0.
Was expecting one of:
    <NOT> ...
...

2) Single term queries using +/- flags are parse to a query without flag
+a -> a
-a -> a
While this doesn't make a difference for +a it's a bit strange for -a,
OTOH -a isn't a usable query anyway.

3) a OR NOT b parses to 'a -b' which is the same as 'a AND NOT b'
   IMHO `a OR NOT b' should be `a OR (NOT b)' though lucene cannot search
   that. Maybe it should raise an error...
   a OR NOT b AND c (parsed to a -(+b +c)) should IMHO be parsed to `a (-b +c)'

Thanks for your effort,
       Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 21:00:49 2005
Return-Path: <java-user-return-13544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19036 invoked from network); 7 Mar 2005 21:00:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 21:00:49 -0000
Received: (qmail 59840 invoked by uid 500); 7 Mar 2005 21:00:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59810 invoked by uid 500); 7 Mar 2005 21:00:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59796 invoked by uid 99); 7 Mar 2005 21:00:44 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp003.mail.ukl.yahoo.com (HELO smtp003.mail.ukl.yahoo.com) (217.12.11.34)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 07 Mar 2005 13:00:43 -0800
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp003.mail.ukl.yahoo.com with SMTP; 7 Mar 2005 21:00:40 -0000
Message-ID: <422CC104.5090403@yahoo.co.uk>
Date: Mon, 07 Mar 2005 21:00:52 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Fast access to a random page of the search results.
References: <200537205553.714534@Kelvin>
In-Reply-To: <200537205553.714534@Kelvin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Did you mean this?
http://marc.theaimsgroup.com/?l=lucene-user&m=108525376821114&w=2




Kelvin Tan wrote:

>This is a bump post...
>
>I'm wondering if there's any code (contributed, bugzilla, core or otherwise) that provides document lazy-loading functionality, i.e. only eager-initialize specific fields, or load fields on-demand.
>
>Thanks,
>k
>
>On Thu, 3 Mar 2005 13:55:00 +0100, Kelvin Tan wrote:
>  
>
>> Is this actually in the codebase?  I couldn't find it in SVN or in
>> Bugzilla...
>>
>> kelvin
>>
>> On Mon, 28 Feb 2005 11:59:54 -0500, Erik Hatcher wrote:
>>    
>>
>>> Or perhaps you
>>> need to investigate the (is it in the codebase already?) patch to
>>>  load fields lazily upon demand instead.
>>>      
>>>
>> --------------------------------------------------------------------
>> - To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>    
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 07 21:36:44 2005
Return-Path: <java-user-return-13545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34339 invoked from network); 7 Mar 2005 21:36:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Mar 2005 21:36:43 -0000
Received: (qmail 37418 invoked by uid 500); 7 Mar 2005 21:36:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37382 invoked by uid 500); 7 Mar 2005 21:36:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37368 invoked by uid 99); 7 Mar 2005 21:36:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 13:36:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F35B013E2005; Mon,  7 Mar 2005 16:36:35 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 19FC113E2005
	for <java-user@lucene.apache.org>; Mon,  7 Mar 2005 16:36:27 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <16940.47718.444427.724315@onlinehome.de>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Mon, 7 Mar 2005 16:36:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Morus - thanks for your quick checks.  More below....

On Mar 7, 2005, at 3:32 PM, Morus Walter wrote:
> I had a quick look at the new QP. I didn't look at the code yet, but I
> redid my patch at the weekend for the current code, and I found it 
> quite
> ugly ;-) I didn't finish it completely, so I didn't upload it to
> bugzilla yet.
>
> Your changes look great in general, though I find some issues:
>
> 1) 'stop OR stop AND stop' where stop is a stopword gives a parse 
> error:
> Encountered "<EOF>" at line 1, column 0.
> Was expecting one of:
>     <NOT> ...
> ...

I think  you must have tried this in a transient state when I forgot to 
check in some JavaCC generated files.  Try again.  This one now returns 
an empty BooleanQuery.

> 2) Single term queries using +/- flags are parse to a query without 
> flag
> +a -> a

Hmmm.... this is a debatable one.  It's returning a TermQuery in this 
case for "a".  Is that appropriate?  Or should it return a BooleanQuery 
with a single TermQuery as required?

I think having it optimized to a TermQuery makes the most sense.  
Though, putting it in a BooleanQuery does make this next one simpler...

> -a -> a
> While this doesn't make a difference for +a it's a bit strange for -a,
> OTOH -a isn't a usable query anyway.

Oops... yeah, you're right.  If its a single clause right now it 
doesn't wrap in a BooleanQuery and thus does not take into account the 
modifier +/-/NOT.   But as you say, this is a bogus query anyway.  I 
guess the right thing to do is wrap both the +a query as above and the 
-a query into a BooleanQuery with the modifier set appropriately.

> 3) a OR NOT b parses to 'a -b' which is the same as 'a AND NOT b'
>    IMHO `a OR NOT b' should be `a OR (NOT b)' though lucene cannot 
> search
>    that. Maybe it should raise an error...

Actually it parses like this:

	a OR NOT b -> a -b
	a AND NOT b -> +a -b

So they are slightly different, though the effect will be the same.

>    a OR NOT b AND c (parsed to a -(+b +c)) should IMHO be parsed to `a 
> (-b +c)'

Ah, ok.... so NOT gets much higher precedence than I'm currently giving 
it.  That might take me a while to achieve, but I'll give it a shot.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 00:23:34 2005
Return-Path: <java-user-return-13546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2861 invoked from network); 8 Mar 2005 00:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 00:23:34 -0000
Received: (qmail 1757 invoked by uid 500); 8 Mar 2005 00:23:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1733 invoked by uid 500); 8 Mar 2005 00:23:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1712 invoked by uid 99); 8 Mar 2005 00:23:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 16:23:28 -0800
Received: from pd9e62be5.dip.t-dialin.net ([217.230.43.229] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D8SVQ-0001sm-EF
	for java-user@lucene.apache.org; Mon, 07 Mar 2005 16:23:25 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:        <java-user@lucene.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Tue, 8 Mar 2005 01:23:06 +0100
Message-ID: <2005381236.303053@Kelvin>
In-Reply-To: <422CC104.5090403@yahoo.co.uk>
Subject: Re: Fast access to a random page of the search results.
Mime-Version: 1.0
Content-Type: text/plain; charset="ISO-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Mark, partially, yes. But I suppose for Document has to be further=
 subclassed so that the other non-initialized fields can be obtained as=
 well, or perhaps an additional method to init the remaining fields from a=
 partially initialized Doc?

Thanks for responding..
k

On Mon, 07 Mar 2005 21:00:52 +0000, markharw00d wrote:
>=A0Did you mean this?
>=A0http://marc.theaimsgroup.com/?l=3Dlucene-user&m=3D108525376821114&w=3D2
>
>
>=A0Kelvin Tan wrote:
>
>>=A0This is a bump post...
>>
>>=A0I'm wondering if there's any code (contributed, bugzilla, core or
>>=A0otherwise) that provides document lazy-loading functionality,
>>=A0i.e. only eager-initialize specific fields, or load fields on-
>>=A0demand.
>>
>>=A0Thanks,
>>=A0k
>>
>>=A0On Thu, 3 Mar 2005 13:55:00 +0100, Kelvin Tan wrote:
>>
>>
>>>=A0Is this actually in the codebase? =A0I couldn't find it in SVN or
>>>=A0in Bugzilla...
>>>
>>>=A0kelvin
>>>
>>>=A0On Mon, 28 Feb 2005 11:59:54 -0500, Erik Hatcher wrote:
>>>
>>>
>>>>=A0Or perhaps you
>>>>=A0need to investigate the (is it in the codebase already?)
>>>>=A0patch to load fields lazily upon demand instead.
>>>>
>>>>
>>>=A0----------------------------------------------------------------
>>>=A0---- - To unsubscribe, e-mail: java-user-
>>>=A0unsubscribe@lucene.apache.org For additional commands, e-mail:
>>>=A0java-user-help@lucene.apache.org
>>
>>
>>=A0------------------------------------------------------------------
>>=A0--- To unsubscribe, e-mail: java-user-
>>=A0unsubscribe@lucene.apache.org For additional commands, e-mail:
>>=A0java-user-help@lucene.apache.org
>
>
>=A0--------------------------------------------------------------------
>=A0- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>=A0For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 07:27:46 2005
Return-Path: <java-user-return-13547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68622 invoked from network); 8 Mar 2005 07:27:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 07:27:46 -0000
Received: (qmail 26597 invoked by uid 500); 8 Mar 2005 07:27:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25735 invoked by uid 500); 8 Mar 2005 07:27:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25722 invoked by uid 99); 8 Mar 2005 07:27:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 07 Mar 2005 23:27:41 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 3543923CE0
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 08:27:47 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 21694-08 for <java-user@lucene.apache.org>;
 Tue,  8 Mar 2005 08:27:47 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 0FE5023BF5
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 08:27:47 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j287T572025127
	for <java-user@lucene.apache.org>; Tue, 8 Mar 2005 08:29:05 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j287T4rG025123;
	Tue, 8 Mar 2005 08:29:04 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16941.21568.532376.650196@tanto-xipolis.de>
Date: Tue, 8 Mar 2005 08:29:04 +0100
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
In-Reply-To: <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
	<16940.47718.444427.724315@onlinehome.de>
	<9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher writes:
> > Your changes look great in general, though I find some issues:
> >
> > 1) 'stop OR stop AND stop' where stop is a stopword gives a parse 
> > error:
> > Encountered "<EOF>" at line 1, column 0.
> > Was expecting one of:
> >     <NOT> ...
> > ...
> 
> I think  you must have tried this in a transient state when I forgot to 
> check in some JavaCC generated files.  Try again.  This one now returns 
> an empty BooleanQuery.
> 
ok.
I'm a bit puzzled, since I called javacc myself, so generated files should
not matter, but if it's fixed, I don't care about what went wrong.

> > 2) Single term queries using +/- flags are parse to a query without 
> > flag
> > +a -> a
> 
> Hmmm.... this is a debatable one.  It's returning a TermQuery in this 
> case for "a".  Is that appropriate?  Or should it return a BooleanQuery 
> with a single TermQuery as required?
> 
I'd prefer, if query parser parses queries created by query.toString()
to the same query. But that's just a nice to have.

> I think having it optimized to a TermQuery makes the most sense.  
> Though, putting it in a BooleanQuery does make this next one simpler...
> 
> > -a -> a
> > While this doesn't make a difference for +a it's a bit strange for -a,
> > OTOH -a isn't a usable query anyway.
> 
> Oops... yeah, you're right.  If its a single clause right now it 
> doesn't wrap in a BooleanQuery and thus does not take into account the 
> modifier +/-/NOT.   But as you say, this is a bogus query anyway.  I 
> guess the right thing to do is wrap both the +a query as above and the 
> -a query into a BooleanQuery with the modifier set appropriately.
> 
Ok.
The question how to handle BooleanQueries, that contain prohibited terms
only, is a question on it's own.
In my fix I choose to silently drop these queries. Basically because it's
effectivly dropped during querying anyway.
In an application, I handled this by dropping the query and notifying the
user, that some part of the query could not be handled and was ignored.

> > 3) a OR NOT b parses to 'a -b' which is the same as 'a AND NOT b'
> >    IMHO `a OR NOT b' should be `a OR (NOT b)' though lucene cannot 
> > search
> >    that. Maybe it should raise an error...
> 
> Actually it parses like this:
> 
> 	a OR NOT b -> a -b
> 	a AND NOT b -> +a -b
> 
> So they are slightly different, though the effect will be the same.
> 
> >    a OR NOT b AND c (parsed to a -(+b +c)) should IMHO be parsed to `a 
> > (-b +c)'
> 
> Ah, ok.... so NOT gets much higher precedence than I'm currently giving 
> it.  That might take me a while to achieve, but I'll give it a shot.
> 
Great. 

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 08:46:12 2005
Return-Path: <java-user-return-13548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28174 invoked from network); 8 Mar 2005 08:46:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 08:46:11 -0000
Received: (qmail 17016 invoked by uid 500); 8 Mar 2005 08:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16985 invoked by uid 500); 8 Mar 2005 08:46:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16970 invoked by uid 99); 8 Mar 2005 08:46:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 00:46:03 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6022B13E200A; Tue,  8 Mar 2005 03:45:59 -0500 (EST)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id DC28F13E2006
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 03:45:55 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <16941.21568.532376.650196@tanto-xipolis.de>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Tue, 8 Mar 2005 03:45:49 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mar 8, 2005, at 2:29 AM, Morus Walter wrote:
> Erik Hatcher writes:
>>> Your changes look great in general, though I find some issues:
>>>
>>> 1) 'stop OR stop AND stop' where stop is a stopword gives a parse
>>> error:
>>> Encountered "<EOF>" at line 1, column 0.
>>> Was expecting one of:
>>>     <NOT> ...
>>> ...
>>
>> I think  you must have tried this in a transient state when I forgot 
>> to
>> check in some JavaCC generated files.  Try again.  This one now 
>> returns
>> an empty BooleanQuery.
>>
> ok.
> I'm a bit puzzled, since I called javacc myself, so generated files 
> should
> not matter, but if it's fixed, I don't care about what went wrong.

Let me know if there is still an issue, though I added this exact case 
to TestPrecedenceQueryParser and its currently working for me.

>>> 2) Single term queries using +/- flags are parse to a query without
>>> flag
>>> +a -> a
>>
>> Hmmm.... this is a debatable one.  It's returning a TermQuery in this
>> case for "a".  Is that appropriate?  Or should it return a 
>> BooleanQuery
>> with a single TermQuery as required?
>>
> I'd prefer, if query parser parses queries created by query.toString()
> to the same query. But that's just a nice to have.

It's also an impossibility to have.  Here's a simple example, take a 
Query that is equivalent to A OR B, .toString equals "A B", then parse 
that with the default operator set to AND and you'll get "+A + B".  I 
created a modified Query->String converter for my current day time 
project (as I use a String representation for the most recently used 
drop-down that is stored as a client-side cookie) that explicitly puts 
in "OR" between SHOULD BooleanClauses.

I still believe that we need to have some query-parser-specific way to 
build strings from Query objects, though I haven't thought through 
exactly how that should be designed.  For example, I'm building a very 
custom query parser for a client that looks nothing like QueryParser 
syntax.  It would be very nice to be able to turn a Query back around 
into their expression syntax.

>> I think having it optimized to a TermQuery makes the most sense.
>> Though, putting it in a BooleanQuery does make this next one 
>> simpler...
>>
>>> -a -> a
>>> While this doesn't make a difference for +a it's a bit strange for 
>>> -a,
>>> OTOH -a isn't a usable query anyway.
>>
>> Oops... yeah, you're right.  If its a single clause right now it
>> doesn't wrap in a BooleanQuery and thus does not take into account the
>> modifier +/-/NOT.   But as you say, this is a bogus query anyway.  I
>> guess the right thing to do is wrap both the +a query as above and the
>> -a query into a BooleanQuery with the modifier set appropriately.
>>
> Ok.
> The question how to handle BooleanQueries, that contain prohibited 
> terms
> only, is a question on it's own.
> In my fix I choose to silently drop these queries. Basically because 
> it's
> effectivly dropped during querying anyway.

Silently drop as in you removed them entirely from the resultant Query?

That'd be easy enough to add - but is that what we want to happen?  
Community, thoughts?

> In an application, I handled this by dropping the query and notifying 
> the
> user, that some part of the query could not be handled and was ignored.

How did your application notice that part of the query was dropped?

>>> 3) a OR NOT b parses to 'a -b' which is the same as 'a AND NOT b'
>>>    IMHO `a OR NOT b' should be `a OR (NOT b)' though lucene cannot
>>> search
>>>    that. Maybe it should raise an error...
>>
>> Actually it parses like this:
>>
>> 	a OR NOT b -> a -b
>> 	a AND NOT b -> +a -b
>>
>> So they are slightly different, though the effect will be the same.
>>
>>>    a OR NOT b AND c (parsed to a -(+b +c)) should IMHO be parsed to 
>>> `a
>>> (-b +c)'
>>
>> Ah, ok.... so NOT gets much higher precedence than I'm currently 
>> giving
>> it.  That might take me a while to achieve, but I'll give it a shot.
>>
> Great.

I've shifted my local parser grammar around some, and have broken other 
tests, but do have the NOT precedence working.  Here's a testSimple 
case that I broke by making NOT have higher precedence (I shifted where 
Modifiers are taken into account - before a Clause now):

	Query /+term -term term/ yielded /(+term) (-term) term/, expecting 
/+term -term term/

As you can see this is wrong and I have more work to do.  A OR NOT B 
now parses to A (-B) though, which I too now believe is a more correct 
(though invalid) interpretation.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 09:11:17 2005
Return-Path: <java-user-return-13549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40947 invoked from network); 8 Mar 2005 09:11:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 09:11:17 -0000
Received: (qmail 52511 invoked by uid 500); 8 Mar 2005 09:11:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52481 invoked by uid 500); 8 Mar 2005 09:11:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52468 invoked by uid 99); 8 Mar 2005 09:11:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 01:11:09 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 8 Mar 2005 10:11:05 +0100
Message-ID: <422D6C28.6070705@ifit.uni-klu.ac.at>
Date: Tue, 08 Mar 2005 10:11:04 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
In-Reply-To: <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 08 Mar 2005 09:11:05.0499 (UTC) FILETIME=[C1F8BEB0:01C523BE]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


>>>> 2) Single term queries using +/- flags are parse to a query without
>>>> flag
>>>> +a -> a
>>>
>>>
>>> Hmmm.... this is a debatable one.  It's returning a TermQuery in this
>>> case for "a".  Is that appropriate?  Or should it return a BooleanQuery
>>> with a single TermQuery as required?
>>>
>> I'd prefer, if query parser parses queries created by query.toString()
>> to the same query. But that's just a nice to have.
>
>
> It's also an impossibility to have.  Here's a simple example, take a 
> Query that is equivalent to A OR B, .toString equals "A B", then parse 
> that with the default operator set to AND and you'll get "+A + B".  I 
> created a modified Query->String converter for my current day time 
> project (as I use a String representation for the most recently used 
> drop-down that is stored as a client-side cookie) that explicitly puts 
> in "OR" between SHOULD BooleanClauses.
>
> I still believe that we need to have some query-parser-specific way to 
> build strings from Query objects, though I haven't thought through 
> exactly how that should be designed.  For example, I'm building a very 
> custom query parser for a client that looks nothing like QueryParser 
> syntax.  It would be very nice to be able to turn a Query back around 
> into their expression syntax.
>
In our project I save search strings, generated with query.toString in 
the database and I reconstruct the Query at runtime.
I would appreciate if the  new QueryParser will pass the following assert:

Query query = QueryParser.parse(queryString, analyzer);
Query query2 =  QueryParser.parse(query.toString(), analyzer);
assertEquals(query.toString(), query2.toString());

I think this might be a usefull test case ....

>>> I think having it optimized to a TermQuery makes the most sense.
>>> Though, putting it in a BooleanQuery does make this next one simpler...
>>>
>>>> -a -> a
>>>> While this doesn't make a difference for +a it's a bit strange for -a,
>>>> OTOH -a isn't a usable query anyway.
>>>
>>>
>>> Oops... yeah, you're right.  If its a single clause right now it
>>> doesn't wrap in a BooleanQuery and thus does not take into account the
>>> modifier +/-/NOT.   But as you say, this is a bogus query anyway.  I
>>> guess the right thing to do is wrap both the +a query as above and the
>>> -a query into a BooleanQuery with the modifier set appropriately.
>>>
>> Ok.
>> The question how to handle BooleanQueries, that contain prohibited terms
>> only, is a question on it's own.
>> In my fix I choose to silently drop these queries. Basically because 
>> it's
>> effectivly dropped during querying anyway.
>
>
> Silently drop as in you removed them entirely from the resultant Query?
>
> That'd be easy enough to add - but is that what we want to happen?  
> Community, thoughts?

In my oppinion is better to throw a RuntimeException, something like ...
throw new ParseException("The query must contain at least one allowed 
term. Full prohibited term queries are not allowed");

I experienced many cases when after long debug sessions I discovered 
silent exception drop ...
One of them was just yesterday ...

>
>> In an application, I handled this by dropping the query and notifying 
>> the
>> user, that some part of the query could not be handled and was ignored.
>
>
> How did your application notice that part of the query was dropped?
>


All the best,

 Sergiu Gordea

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 09:37:01 2005
Return-Path: <java-user-return-13550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53782 invoked from network); 8 Mar 2005 09:37:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 09:37:01 -0000
Received: (qmail 88062 invoked by uid 500); 8 Mar 2005 09:37:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87176 invoked by uid 500); 8 Mar 2005 09:36:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87162 invoked by uid 99); 8 Mar 2005 09:36:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 01:36:57 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 14DDE23CE0
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 10:37:04 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 26079-05 for <java-user@lucene.apache.org>;
 Tue,  8 Mar 2005 10:37:03 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id D4B8123BF5
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 10:37:03 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j289cM72026027
	for <java-user@lucene.apache.org>; Tue, 8 Mar 2005 10:38:22 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j289cLIo026023;
	Tue, 8 Mar 2005 10:38:21 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16941.29325.935944.415129@tanto-xipolis.de>
Date: Tue, 8 Mar 2005 10:38:21 +0100
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
In-Reply-To: <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
	<16940.47718.444427.724315@onlinehome.de>
	<9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com>
	<16941.21568.532376.650196@tanto-xipolis.de>
	<76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher writes:
> > ok.
> > I'm a bit puzzled, since I called javacc myself, so generated files 
> > should
> > not matter, but if it's fixed, I don't care about what went wrong.
> 
> Let me know if there is still an issue, though I added this exact case 
> to TestPrecedenceQueryParser and its currently working for me.
> 
I'll check this evening (I did that at home and don't have that stuff
in the office).

> >>> 2) Single term queries using +/- flags are parse to a query without
> >>> flag
> >>> +a -> a
> >>
> >> Hmmm.... this is a debatable one.  It's returning a TermQuery in this
> >> case for "a".  Is that appropriate?  Or should it return a 
> >> BooleanQuery
> >> with a single TermQuery as required?
> >>
> > I'd prefer, if query parser parses queries created by query.toString()
> > to the same query. But that's just a nice to have.
> 
> It's also an impossibility to have.  Here's a simple example, take a 
> Query that is equivalent to A OR B, .toString equals "A B", then parse 
> that with the default operator set to AND and you'll get "+A + B". 

?
Of course toString creates queries for default operator OR and using 
default operator AND will create different queries.
But "A B" would be parsed to "A B" using default operator OR.
I wouldn't expect more.

> I created a modified Query->String converter for my current day time 
> project (as I use a String representation for the most recently used 
> drop-down that is stored as a client-side cookie) that explicitly puts 
> in "OR" between SHOULD BooleanClauses.
> 
You cannot do that in the general case. BooleanQuery allows for queries
that cannot be expressed only using AND/OR/NOT.
E.g. `a b +c'. That's not `(a OR b) AND c' nor any other boolean expression.
It's also not expressable in QP syntax for default operator AND.

Basically QP (with default OR) allows for two different approaches:
a) you may construct a boolean query specifying the required/prohibited
    flags for each clause using +/-
b) you may use boolean expressions using AND/OR/NOT.

toString creates queries of form a).
Using default AND makes version a) less useful, since you cannot create
clauses that are neither requried nor prohibited any longer.

> > Ok.
> > The question how to handle BooleanQueries, that contain prohibited 
> > terms
> > only, is a question on it's own.
> > In my fix I choose to silently drop these queries. Basically because 
> > it's
> > effectivly dropped during querying anyway.
> 
> Silently drop as in you removed them entirely from the resultant Query?
> 
Right. `a AND (NOT b)'  parses to `a'

> That'd be easy enough to add - but is that what we want to happen?  
> Community, thoughts?
> 
Throwing an exception is presumably the other alternative.
Could that check be done in an overwritable method?

> > In an application, I handled this by dropping the query and notifying 
> > the
> > user, that some part of the query could not be handled and was ignored.
> 
> How did your application notice that part of the query was dropped?
> 
QueryParser told it ;-)
I used a modified query parser that was provided with two StringBuffers
and QP filled one with droped stop words (something to report to the user
as well) and the other with droped subqueries.

Of course this could be done with a nicer api if one restriced query
parsing to a instance method.
In that case QP would keep the information in instance variables and provide
getter methods.
Having a list of recognized tokens could be helpful as well (e.g. to create
spelling suggestions).

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 09:56:47 2005
Return-Path: <java-user-return-13551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64453 invoked from network); 8 Mar 2005 09:56:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 09:56:47 -0000
Received: (qmail 16247 invoked by uid 500); 8 Mar 2005 09:56:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15678 invoked by uid 500); 8 Mar 2005 09:56:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15663 invoked by uid 99); 8 Mar 2005 09:56:42 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26002.mail.ukl.yahoo.com (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 01:56:40 -0800
Received: (qmail 10387 invoked by uid 60001); 8 Mar 2005 09:56:37 -0000
Message-ID: <20050308095637.10385.qmail@web26002.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Tue, 08 Mar 2005 09:56:37 GMT
Date: Tue, 8 Mar 2005 09:56:37 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Fast access to a random page of the search results.
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> But I suppose for Document
> has to be further subclassed so that the other
> non-initialized fields can be obtained as well, or

I don't think Document would be the right place for
this - as a design pattern it is cast as a "value
object" or "transfer object" which is passed to
(potentially remote) clients. It shouldn't be holding
connections to an index so it can load extra fields on
demand.

Regardless, any "laziness" to the selective field
loading will be hard to optimize when it is not
possible to directly access an individual field on
disk - the offsets are not stored and you have to
serially read through all of the document's fields on
disk until you reach the one you want.

There's a price to pay for allowing clients too much
freedom and I think lazy loading of field values is an
example of something which is too costly.
I personally prefer a search interface which requires
clients to state up front what fields they want
returned - the equivalent of SQL's "Select" clause in
addition to the usual "where.." matching criteria. 

Cheers,
Mark


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 10:41:45 2005
Return-Path: <java-user-return-13552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86066 invoked from network); 8 Mar 2005 10:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 10:41:45 -0000
Received: (qmail 80732 invoked by uid 500); 8 Mar 2005 10:41:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80474 invoked by uid 500); 8 Mar 2005 10:41:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 64503 invoked by uid 500); 8 Mar 2005 10:34:04 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
From: "Romain Laboisse" <rlaboisse@opsys.fr>
To: <lucene-user@jakarta.apache.org>
Subject: Searching multiple fields with same name
Date: Tue, 8 Mar 2005 11:33:58 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcUjylW9jhypHCskT/GUsiWhtq1Egg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Message-Id: <20050308103401.BC731280059@smtp-out.completel.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I am indexing documents which may have more than one title and I would like
to be able to search these titles separately.
For example, a document may have two titles, "Jakarta Lucene" and "Powerful
search engine".
A search on 'lucene AND jakarta' should return this document but a search on
'lucene AND search' should not return it.

Is there a way to achieve this?

Thanks,
Romain
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 11:02:47 2005
Return-Path: <java-user-return-13553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97259 invoked from network); 8 Mar 2005 11:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 11:02:47 -0000
Received: (qmail 10762 invoked by uid 500); 8 Mar 2005 11:02:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10723 invoked by uid 500); 8 Mar 2005 11:02:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10707 invoked by uid 99); 8 Mar 2005 11:02:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 217-116-16-4.redes.acens.net (HELO bandalatina.com) (217.116.16.4)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 03:02:33 -0800
Received: (qmail 31647 invoked by uid 520); 8 Mar 2005 11:02:28 -0000
Received: from jmdiez@microgenesis.es by bandalatina.com by uid 512 with qmail-scanner-1.22st 
 (clamdscan: 0.70. spamassassin: 2.64.  Clear:RC:1(80.26.229.239):. 
 Processed in 0.162207 secs); 08 Mar 2005 11:02:28 -0000
Received: from unknown (HELO ?172.16.1.2?) (80.26.229.239)
  by mail.bandalatina.com with SMTP; 8 Mar 2005 11:02:28 -0000
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.6.4]); Tue, 08 Mar 2005 12:02:27 +0100
Message-ID: <422D8643.7010009@microgenesis.es>
Date: Tue, 08 Mar 2005 12:02:27 +0100
From: Jose Miguel Diez <jmdiez@microgenesis.es>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-es, es
To:  java-user@lucene.apache.org
Subject: Re: Searching multiple fields with same name
References: <20050308103401.BC731280059@smtp-out.completel.net>
In-Reply-To: <20050308103401.BC731280059@smtp-out.completel.net>
X-Enigmail-Version: 0.90.1.1
X-Enigmail-Supports: pgp-inline, pgp-mime
Mime-Version: 1.0
Content-Transfer-Encoding: 8bit
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

Just store it in two separate fields, and prepare a query:
 (title1:  myquery ) OR (title2: myquery )

Substitution of myquery by your expressions will work fine.

Saludos,
Jose Miguel

Romain Laboisse escribi:

>Hello,
>
>I am indexing documents which may have more than one title and I would like
>to be able to search these titles separately.
>For example, a document may have two titles, "Jakarta Lucene" and "Powerful
>search engine".
>A search on 'lucene AND jakarta' should return this document but a search on
>'lucene AND search' should not return it.
>
>Is there a way to achieve this?
>
>Thanks,
>Romain
> 
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>  
>


-- 
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.308 / Virus Database: 266.6.4 - Release Date: 07/03/2005


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 11:38:49 2005
Return-Path: <java-user-return-13554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14915 invoked from network); 8 Mar 2005 11:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 11:38:48 -0000
Received: (qmail 58138 invoked by uid 500); 8 Mar 2005 11:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58100 invoked by uid 500); 8 Mar 2005 11:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58086 invoked by uid 99); 8 Mar 2005 11:38:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 03:38:43 -0800
Received: from pd9535793.dip.t-dialin.net ([217.83.87.147] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D8d2u-00015c-NL
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 03:38:41 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:        <java-user@lucene.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Tue, 8 Mar 2005 12:38:36 +0100
Message-ID: <200538123836.361879@Kelvin>
In-Reply-To: <20050308095637.10385.qmail@web26002.mail.ukl.yahoo.com>
Subject: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Mark, 

On Tue, 8 Mar 2005 09:56:37 +0000 (GMT), mark harwood wrote:
>>=A0But I suppose for Document
>>=A0has to be further subclassed so that the other
>>=A0non-initialized fields can be obtained as well, or
>>
>=A0I don't think Document would be the right place for
>=A0this - as a design pattern it is cast as a "value
>=A0object" or "transfer object" which is passed to
>=A0(potentially remote) clients. It shouldn't be holding
>=A0connections to an index so it can load extra fields on
>=A0demand.
>

Good point.

> the offsets are not stored and you have to
>=A0serially read through all of the document's fields on
>=A0disk until you reach the one you want.

How about if the structure of the Document is known (as is usually the=
 case), and a contract be made that the first, say 3 fields, are always=
 lazy-loaded. That way, the iteration through all fields can be avoided.

>
>=A0There's a price to pay for allowing clients too much
>=A0freedom and I think lazy loading of field values is an
>=A0example of something which is too costly.
>=A0I personally prefer a search interface which requires
>=A0clients to state up front what fields they want
>=A0returned - the equivalent of SQL's "Select" clause in
>=A0addition to the usual "where.." matching criteria.

Here's my requirement, and you may have a better idea of approaching it: I=
 need to perform a simple "Top 10 most frequent occurring <field>" from a=
 search. Right now, the naive implementation simply goes through all the=
 hits, gets the respective field(s) and performs the counting. The=
 requirement is not so different from sorting. Sorting loads and caches all=
 the values for that term in the index, but that approach is probably not=
 optimal in this case because there are multiple fields, and they are=
 variable length.

Ideally, I'd like to load only the fields I need from the Documents (for=
 counting purposes). When the user actually views that hit, then I can load=
 the rest of the fields for display.

Any ideas?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 12:20:04 2005
Return-Path: <java-user-return-13555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39534 invoked from network); 8 Mar 2005 12:20:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 12:20:03 -0000
Received: (qmail 9206 invoked by uid 500); 8 Mar 2005 12:19:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9132 invoked by uid 500); 8 Mar 2005 12:19:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8916 invoked by uid 99); 8 Mar 2005 12:19:53 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26001.mail.ukl.yahoo.com (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 04:19:51 -0800
Received: (qmail 63123 invoked by uid 60001); 8 Mar 2005 12:19:49 -0000
Message-ID: <20050308121949.63121.qmail@web26001.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Tue, 08 Mar 2005 12:19:48 GMT
Date: Tue, 8 Mar 2005 12:19:48 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Not sure I get what the requirement is yet:

>>Here's my requirement, ..I need to perform a simple 
>>"Top 10 most frequent occurring <field>" from a
search.

Does this mean:
1)Top 10 fieldnames present in each of your matching
documents? 
2)Top 10 most frequent terms found in a choice of
field?
3)Top 10 fields that contained the search term(s)?

Cheers
Mark 






Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 12:27:22 2005
Return-Path: <java-user-return-13556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42817 invoked from network); 8 Mar 2005 12:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 12:27:22 -0000
Received: (qmail 24957 invoked by uid 500); 8 Mar 2005 12:27:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24929 invoked by uid 500); 8 Mar 2005 12:27:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24915 invoked by uid 99); 8 Mar 2005 12:27:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO virusscanner2.minfin.be) (193.191.216.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 04:27:14 -0800
Received: from finmfe1-hw.minfin.fed.be (localhost [127.0.0.1])
	by virusscanner2.minfin.be (8.11.6+Sun/8.11.6) with ESMTP id j28DKqB20797
	for <java-user@lucene.apache.org>; Tue, 8 Mar 2005 13:20:52 GMT
Received: from BEBRULIBOISC ([10.12.2.162])
 by finmfe1.minfin.fed.be (iPlanet Messaging Server 5.2 HotFix 1.14 (built Mar
 18 2003)) with SMTP id <0ID10008M9BJCW@finmfe1.minfin.fed.be> for
 java-user@lucene.apache.org; Tue, 08 Mar 2005 13:28:32 +0100 (MET)
Date: Tue, 08 Mar 2005 13:25:28 +0100
From: Claude Libois <claude.libois@guest.minfin.fed.be>
Subject: Re: Searching multiple fields with same name
To: java-user@lucene.apache.org
Message-id: <026901c523d9$e99ec8e0$a2020c0a@eu.uis.unisys.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <20050308103401.BC731280059@smtp-out.completel.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Why not use the MultiFieldQueryParser(look at
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/queryParser/MultiFieldQueryParser.html)?
This one allow you to specify on which field the search will be done.  I
think that for your example 'lucene AND jakarta' will be transform by the
parser into (+Title1:Lucene  +Title1:search) (+Title2:Lucene
+Title2:search).
Claude Libois


----- Original Message ----- 
From: "Romain Laboisse" <rlaboisse@opsys.fr>
To: <lucene-user@jakarta.apache.org>
Sent: Tuesday, March 08, 2005 11:33 AM
Subject: Searching multiple fields with same name


> Hello,
>
> I am indexing documents which may have more than one title and I would
like
> to be able to search these titles separately.
> For example, a document may have two titles, "Jakarta Lucene" and
"Powerful
> search engine".
> A search on 'lucene AND jakarta' should return this document but a search
on
> 'lucene AND search' should not return it.
>
> Is there a way to achieve this?
>
> Thanks,
> Romain
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 12:38:48 2005
Return-Path: <java-user-return-13557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48361 invoked from network); 8 Mar 2005 12:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 12:38:48 -0000
Received: (qmail 41394 invoked by uid 500); 8 Mar 2005 12:38:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40526 invoked by uid 500); 8 Mar 2005 12:38:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40513 invoked by uid 99); 8 Mar 2005 12:38:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 04:38:43 -0800
Received: from pd9535793.dip.t-dialin.net ([217.83.87.147] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D8dyy-0008Ub-8e
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 04:38:40 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:        <java-user@lucene.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Tue, 8 Mar 2005 13:38:35 +0100
Message-ID: <200538133835.766149@Kelvin>
In-Reply-To: <20050308121949.63121.qmail@web26001.mail.ukl.yahoo.com>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Neither. :-) 

4) Top 10 fieldvalues (for some fields) returned in search results 

So, let's say the results of a search were:

doc a=3Dtitle:1,keyword:a,contents:somelongmemoryhoggingstring
doc b=3Dtitle:1,keyword:a,contents:somelongmemoryhoggingstring
doc c=3Dtitle:1,keyword:b,contents:somelongmemoryhoggingstring
doc d=3Dtitle:2,keyword:b,contents:somelongmemoryhoggingstring
doc e=3Dtitle:2,keyword:b,contents:somelongmemoryhoggingstring
doc f=3Dtitle:3,keyword:b,contents:somelongmemoryhoggingstring

I'd like to have the following (sorted in decreasing order of frequency)

For the title field, 
field value "1" - frequency =3D3
field value "2" - frequency =3D2
field value "3" - frequency =3D1

For the keyword field,
field value "b" - frequency =3D4
field value "a" - frequency =3D2

So after getting the Hits (or using HitCollector), run through each document=
 to count the frequencies of each field value, so that the top 10 can be=
 obtained. 

k

On Tue, 8 Mar 2005 12:19:48 +0000 (GMT), mark harwood wrote:
>=A0Not sure I get what the requirement is yet:
>
>>>=A0Here's my requirement, ..I need to perform a simple
>>>=A0"Top 10 most frequent occurring <field>" from a
>=A0search.
>
>=A0Does this mean:
>=A01)Top 10 fieldnames present in each of your matching
>=A0documents?
>=A02)Top 10 most frequent terms found in a choice of
>=A0field?
>=A03)Top 10 fields that contained the search term(s)?
>
>=A0Cheers
>=A0Mark
>
>
>=A0Send instant messages to your online friends
>=A0http://uk.messenger.yahoo.com
>
>=A0--------------------------------------------------------------------
>=A0- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>=A0For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 13:03:26 2005
Return-Path: <java-user-return-13558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59570 invoked from network); 8 Mar 2005 13:03:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 13:03:26 -0000
Received: (qmail 64407 invoked by uid 500); 8 Mar 2005 13:03:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63546 invoked by uid 500); 8 Mar 2005 13:03:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63525 invoked by uid 99); 8 Mar 2005 13:03:23 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26002.mail.ukl.yahoo.com (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 05:03:21 -0800
Received: (qmail 61800 invoked by uid 60001); 8 Mar 2005 13:03:19 -0000
Message-ID: <20050308130319.61798.qmail@web26002.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Tue, 08 Mar 2005 13:03:19 GMT
Date: Tue, 8 Mar 2005 13:03:19 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The new TermFreqVector code sounds like what you need
here. This gives you fast access to precomputed totals
of term frequencies for each document.

See IndexReader.getTermFreqVector



Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 13:26:45 2005
Return-Path: <java-user-return-13559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71185 invoked from network); 8 Mar 2005 13:26:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 13:26:45 -0000
Received: (qmail 95916 invoked by uid 500); 8 Mar 2005 13:26:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95894 invoked by uid 500); 8 Mar 2005 13:26:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95880 invoked by uid 99); 8 Mar 2005 13:26:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 05:26:36 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3D2C213E200A; Tue,  8 Mar 2005 08:26:34 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 3D83113E2006
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 08:26:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <422D6C28.6070705@ifit.uni-klu.ac.at>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <422D6C28.6070705@ifit.uni-klu.ac.at>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2560924319c84bba6d75f6e246792f40@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Tue, 8 Mar 2005 08:26:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mar 8, 2005, at 4:11 AM, sergiu gordea wrote:
> In our project I save search strings, generated with query.toString in 
> the database and I reconstruct the Query at runtime.
> I would appreciate if the  new QueryParser will pass the following 
> assert:
>
> Query query = QueryParser.parse(queryString, analyzer);
> Query query2 =  QueryParser.parse(query.toString(), analyzer);
> assertEquals(query.toString(), query2.toString());
>
> I think this might be a usefull test case ....

I agree that this is a nice ideal, but it is unrealistic in the general 
sense.  A custom analyzer could easily break this.  I suspect there are 
other cases where this would break even with a plain SimpleAnalyzer.

>>> Ok.
>>> The question how to handle BooleanQueries, that contain prohibited 
>>> terms
>>> only, is a question on it's own.
>>> In my fix I choose to silently drop these queries. Basically because 
>>> it's
>>> effectivly dropped during querying anyway.
>>
>>
>> Silently drop as in you removed them entirely from the resultant 
>> Query?
>>
>> That'd be easy enough to add - but is that what we want to happen?  
>> Community, thoughts?
>
> In my oppinion is better to throw a RuntimeException, something like 
> ...
> throw new ParseException("The query must contain at least one allowed 
> term. Full prohibited term queries are not allowed");

Ok, I think this could be done.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 13:46:56 2005
Return-Path: <java-user-return-13560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82339 invoked from network); 8 Mar 2005 13:46:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 13:46:56 -0000
Received: (qmail 24760 invoked by uid 500); 8 Mar 2005 13:46:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24735 invoked by uid 500); 8 Mar 2005 13:46:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24721 invoked by uid 99); 8 Mar 2005 13:46:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 05:46:51 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6184913E200A; Tue,  8 Mar 2005 08:46:49 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 963F813E2006
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 08:46:45 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <16941.29325.935944.415129@tanto-xipolis.de>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <16941.29325.935944.415129@tanto-xipolis.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Tue, 8 Mar 2005 08:46:43 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 8, 2005, at 4:38 AM, Morus Walter wrote:
>> I created a modified Query->String converter for my current day time
>> project (as I use a String representation for the most recently used
>> drop-down that is stored as a client-side cookie) that explicitly puts
>> in "OR" between SHOULD BooleanClauses.
>>
> You cannot do that in the general case. BooleanQuery allows for queries
> that cannot be expressed only using AND/OR/NOT.
> E.g. `a b +c'. That's not `(a OR b) AND c' nor any other boolean 
> expression.
> It's also not expressable in QP syntax for default operator AND.

I just added this bit of code to my QueryConverterTest:

     BooleanQuery bq = new BooleanQuery();
     bq.add(new TermQuery(new Term("field", "a")), 
BooleanClause.Occur.SHOULD);
     bq.add(new TermQuery(new Term("field", "b")), 
BooleanClause.Occur.SHOULD);
     bq.add(new TermQuery(new Term("field", "c")), 
BooleanClause.Occur.MUST);

     assertEquals("a OR b +c", QueryConverter.convert(bq, "field"));

     System.out.println(QueryParser.parse(QueryConverter.convert(bq, 
"field"), "field", new SimpleAnalyzer()));

The output is:
	a OR b +c

And the test passes and the query is expressible in QP syntax for 
AND.... unless I'm missing something obvious here.

>> Silently drop as in you removed them entirely from the resultant 
>> Query?
>>
> Right. `a AND (NOT b)'  parses to `a'

Is this what we want to happen for a general purpose next generation 
Lucene QueryParser though?  I'm not sure.  Perhaps this should be a 
ParseException instead?

>> That'd be easy enough to add - but is that what we want to happen?
>> Community, thoughts?
>>
> Throwing an exception is presumably the other alternative.
> Could that check be done in an overwritable method?

Good point.  Sure.

>>> In an application, I handled this by dropping the query and notifying
>>> the
>>> user, that some part of the query could not be handled and was 
>>> ignored.
>>
>> How did your application notice that part of the query was dropped?
>>
> QueryParser told it ;-)
> I used a modified query parser that was provided with two StringBuffers
> and QP filled one with droped stop words (something to report to the 
> user
> as well) and the other with droped subqueries.

Perhaps QueryParser should have some additional hooks allowing you to 
either subclass and tap into things or pass in some sort of custom 
listener hook?

I'm interested in how you trapped the stop words that were removed - 
did you use a custom analyzer that gave you this information?  Or some 
other technique?

> Of course this could be done with a nicer api if one restriced query
> parsing to a instance method.

We can most definitely do that!  Any objections to removing the static 
parse method?

> In that case QP would keep the information in instance variables and 
> provide
> getter methods.
> Having a list of recognized tokens could be helpful as well (e.g. to 
> create
> spelling suggestions).

We're getting vastly more sophisticated than just correcting the order 
of precedence.  I can continue to fiddle with this over time, but I 
won't be able to dedicate a solid effort to all of these.  Feel free to 
take contribute patches that enhance it.  Let me know if my 
PrecedenceQueryParser needs tweaks to be a usable base or if starting 
over with QueryParser is better.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 13:54:51 2005
Return-Path: <java-user-return-13561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86776 invoked from network); 8 Mar 2005 13:54:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 13:54:51 -0000
Received: (qmail 39811 invoked by uid 500); 8 Mar 2005 13:54:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39782 invoked by uid 500); 8 Mar 2005 13:54:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39769 invoked by uid 99); 8 Mar 2005 13:54:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 05:54:45 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 8 Mar 2005 14:54:42 +0100
Message-ID: <422DAEA2.4080200@ifit.uni-klu.ac.at>
Date: Tue, 08 Mar 2005 14:54:42 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <422D6C28.6070705@ifit.uni-klu.ac.at> <2560924319c84bba6d75f6e246792f40@ehatchersolutions.com>
In-Reply-To: <2560924319c84bba6d75f6e246792f40@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 08 Mar 2005 13:54:43.0005 (UTC) FILETIME=[613216D0:01C523E6]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> On Mar 8, 2005, at 4:11 AM, sergiu gordea wrote:
>
>> In our project I save search strings, generated with query.toString 
>> in the database and I reconstruct the Query at runtime.
>> I would appreciate if the  new QueryParser will pass the following 
>> assert:
>>
>> Query query = QueryParser.parse(queryString, analyzer);
>> Query query2 =  QueryParser.parse(query.toString(), analyzer);
>> assertEquals(query.toString(), query2.toString());
>>
>> I think this might be a usefull test case ....
>
>
> I agree that this is a nice ideal, but it is unrealistic in the 
> general sense.  A custom analyzer could easily break this.  I suspect 
> there are other cases where this would break even with a plain 
> SimpleAnalyzer.
>
>     Erik


I understand that this is a feature that requires a lot of attention, 
but in my case it is a very usefull one.  Maybe the Query String that I 
save in the database will
help you understand how usefull it is for me. Of course, I use just 
StandardAnalyzer as a singleton in our project.
Anyway .. as I put the same analyzer in both classses, the test should pass.

So .. here is an example of how I parse a simple query string provided 
by a user ...

the user checks a few flags and writes "test ko AND NOT bo"
and the resulting query.toString() is saved in the database:

+(+(subject:test description:test keywordsTerms:test koProperties:test 
attachmentData:test) +(subject:ko description:ko keywordsTerms:ko 
koProperties:ko attachmentData:ko) -(subject:bo* description:bo* 
keywordsTerms:bo* koProperties:bo* attachmentData:bo*)) +creator:2 
+classType:package.share.om.knowledgeobject +skillLevel:0 
+(keywords:1000 keywords:1020)

I think you agree that is better to be saved in the database instead of  
creating a
CustomQuery class that implements Serializable and save it in the database.

Until now I haven't  had any problem to reconstruct the Query from the 
above string. I think this feature really gives value to Query class, 
and saves a lot development
time for many of  lucene users.
Maybe I'm pushing to much with this functionality ... but if I tell you 
that before i used BooleanQueries to build this query String, it was 
build up with
regular string concatenation, in method with more then  200 lines of 
code ...


  All the best,

 Sergiu
 

>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 14:00:27 2005
Return-Path: <java-user-return-13562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89853 invoked from network); 8 Mar 2005 14:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 14:00:27 -0000
Received: (qmail 55562 invoked by uid 500); 8 Mar 2005 14:00:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55527 invoked by uid 500); 8 Mar 2005 14:00:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55496 invoked by uid 99); 8 Mar 2005 14:00:21 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dns1.hemscott.co.uk (HELO dns1.hemscott.co.uk) (195.47.237.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 06:00:19 -0800
Received: from exchange.hsnet.hemscott.co.uk (exchange [172.22.0.216])
	by dns1.hemscott.co.uk (8.11.6/8.11.6) with ESMTP id j28E0GG21480
	for <java-user@lucene.apache.org>; Tue, 8 Mar 2005 14:00:16 GMT
Received: by exchange.hemscott.co.uk with Internet Mail Service (5.5.2653.19)
	id <1XYTSHZY>; Tue, 8 Mar 2005 14:00:16 -0000
Message-ID: <7157427725CF4A46ADC522959748E7A2113902D6@exchange.hemscott.co.uk>
From: Paul Mellor <pmellor@hemscott.co.uk>
To: "Lucene Mailing List (E-mail)" <java-user@lucene.apache.org>
Subject: Find version of Lucene library
Date: Tue, 8 Mar 2005 14:00:14 -0000 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C523E7.26EE5BE0"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C523E7.26EE5BE0
Content-Type: text/plain;
	charset="iso-8859-1"

Hi guys,
 
Just a quick query - is there any way that I can determine at runtime the
version of Lucene that I am using?  I'm upgrading a system from v1.3 to
v1.4.3 and I would like to be able to print out the version at startup so
that I can be sure that I have got my paths all correct and haven't done
anything stupid like replaced the wrong JAR!
 
Thanks
 
Paul

This e-mail and any files transmitted with it are confidential and intended
solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you should not copy, retransmit or
use the e-mail and/or files transmitted with it  and should not disclose
their contents. In such a case, please notify netwebmaster@hemscott.co.uk
and delete the message from your own system. Any opinions expressed in this
e-mail and/or files transmitted with it that do not relate to the official
business of this company are those solely of the author and should not be
interpreted as being endorsed by this company.

------_=_NextPart_001_01C523E7.26EE5BE0--

From java-user-return-13563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 14:08:10 2005
Return-Path: <java-user-return-13563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95054 invoked from network); 8 Mar 2005 14:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 14:08:10 -0000
Received: (qmail 72455 invoked by uid 500); 8 Mar 2005 14:08:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72103 invoked by uid 500); 8 Mar 2005 14:08:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72090 invoked by uid 99); 8 Mar 2005 14:08:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from moutng.kundenserver.de (HELO moutng.kundenserver.de) (212.227.126.173)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 06:08:03 -0800
Received: from [212.227.126.205] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D8fNR-0000uD-00
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 15:08:01 +0100
Received: from [82.135.5.165] (helo=voodoo.federation.net)
	by mrelayng.kundenserver.de with asmtp (TLSv1:RC4-MD5:128)
	(Exim 3.35 #1)
	id 1D8fNR-00021z-00
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 15:08:01 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
Date: Tue, 8 Mar 2005 15:08:00 +0100
User-Agent: KMail/1.7.1
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16941.29325.935944.415129@tanto-xipolis.de> <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com>
In-Reply-To: <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200503081508.00541.daniel.naber@t-online.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 08 March 2005 14:46, Erik Hatcher wrote:

> > Right. `a AND (NOT b)' =A0parses to `a'
>
> Is this what we want to happen for a general purpose next generation
> Lucene QueryParser though? =A0I'm not sure. =A0Perhaps this should be a
> ParseException instead?

As we have no concept of a "warning" we should indeed prefer to throw an=20
exception instead of silently modifying the query in ways the users don't=20
expect.

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 14:13:19 2005
Return-Path: <java-user-return-13564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98598 invoked from network); 8 Mar 2005 14:13:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 14:13:19 -0000
Received: (qmail 85281 invoked by uid 500); 8 Mar 2005 14:13:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85249 invoked by uid 500); 8 Mar 2005 14:13:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85236 invoked by uid 99); 8 Mar 2005 14:13:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 06:13:11 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 95AC123CE1
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 15:13:19 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 32342-04 for <java-user@lucene.apache.org>;
 Tue,  8 Mar 2005 15:13:19 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 6D6AF23BF5
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 15:13:19 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j28EEb72028271
	for <java-user@lucene.apache.org>; Tue, 8 Mar 2005 15:14:37 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j28EEbS7028267;
	Tue, 8 Mar 2005 15:14:37 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16941.45901.672724.728010@tanto-xipolis.de>
Date: Tue, 8 Mar 2005 15:14:37 +0100
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
In-Reply-To: <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
	<16940.47718.444427.724315@onlinehome.de>
	<9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com>
	<16941.21568.532376.650196@tanto-xipolis.de>
	<76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
	<16941.29325.935944.415129@tanto-xipolis.de>
	<6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher writes:
> 
> On Mar 8, 2005, at 4:38 AM, Morus Walter wrote:
> >> I created a modified Query->String converter for my current day time
> >> project (as I use a String representation for the most recently used
> >> drop-down that is stored as a client-side cookie) that explicitly puts
> >> in "OR" between SHOULD BooleanClauses.
> >>
> > You cannot do that in the general case. BooleanQuery allows for queries
> > that cannot be expressed only using AND/OR/NOT.
> > E.g. `a b +c'. That's not `(a OR b) AND c' nor any other boolean 
> > expression.
> > It's also not expressable in QP syntax for default operator AND.
> 
> I just added this bit of code to my QueryConverterTest:
> 
>      BooleanQuery bq = new BooleanQuery();
>      bq.add(new TermQuery(new Term("field", "a")), 
> BooleanClause.Occur.SHOULD);
>      bq.add(new TermQuery(new Term("field", "b")), 
> BooleanClause.Occur.SHOULD);
>      bq.add(new TermQuery(new Term("field", "c")), 
> BooleanClause.Occur.MUST);
> 
>      assertEquals("a OR b +c", QueryConverter.convert(bq, "field"));
> 
>      System.out.println(QueryParser.parse(QueryConverter.convert(bq, 
> "field"), "field", new SimpleAnalyzer()));
> 
> The output is:
> 	a OR b +c
> 
> And the test passes and the query is expressible in QP syntax for 
> AND.... unless I'm missing something obvious here.
> 
Ok, you're right, if you mix boolean queries and flags you can do that. 
I don't like that because it's hard to explain.
And if you understand that as a OR b AND c, what it is looking like, 
you're lost.

> >> Silently drop as in you removed them entirely from the resultant 
> >> Query?
> >>
> > Right. `a AND (NOT b)'  parses to `a'
> 
> Is this what we want to happen for a general purpose next generation 
> Lucene QueryParser though?  I'm not sure.  Perhaps this should be a 
> ParseException instead?
> 
> >> That'd be easy enough to add - but is that what we want to happen?
> >> Community, thoughts?
> >>
> > Throwing an exception is presumably the other alternative.
> > Could that check be done in an overwritable method?
> 
> Good point.  Sure.
> 
That's ok then. Throw a ParseException and whoever doesn't like that,
can overwrite the method and either keep the query (knowing that it will
be ignored in search anyway) or drop it.

> >>> In an application, I handled this by dropping the query and notifying
> >>> the
> >>> user, that some part of the query could not be handled and was 
> >>> ignored.
> >>
> >> How did your application notice that part of the query was dropped?
> >>
> > QueryParser told it ;-)
> > I used a modified query parser that was provided with two StringBuffers
> > and QP filled one with droped stop words (something to report to the 
> > user
> > as well) and the other with droped subqueries.
> 
> Perhaps QueryParser should have some additional hooks allowing you to 
> either subclass and tap into things or pass in some sort of custom 
> listener hook?
> 
> I'm interested in how you trapped the stop words that were removed - 
> did you use a custom analyzer that gave you this information?  Or some 
> other technique?
> 
Right. That isn't obvious. Actually I had to look into my code (written
about a year ago).
I filtered stop words in the query parser itself. That is, the analyzer
didn't use any stop words but the QP had a stop word map and checked 
the analyzer output.
It's more complicated than simply using the same analyzer as indexing did,
but I think it's relevant to users, to know what happend to their query.

> > In that case QP would keep the information in instance variables and 
> > provide
> > getter methods.
> > Having a list of recognized tokens could be helpful as well (e.g. to 
> > create
> > spelling suggestions).
> 
> We're getting vastly more sophisticated than just correcting the order 
> of precedence.  I can continue to fiddle with this over time, but I 
> won't be able to dedicate a solid effort to all of these.  Feel free to 
> take contribute patches that enhance it.  Let me know if my 
> PrecedenceQueryParser needs tweaks to be a usable base or if starting 
> over with QueryParser is better.
> 
Ok, I'll see how much time I can find for this.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 14:19:00 2005
Return-Path: <java-user-return-13565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10976 invoked from network); 8 Mar 2005 14:19:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 14:19:00 -0000
Received: (qmail 98134 invoked by uid 500); 8 Mar 2005 14:18:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98114 invoked by uid 500); 8 Mar 2005 14:18:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98100 invoked by uid 99); 8 Mar 2005 14:18:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.tanto.de (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 06:18:52 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id A0B1923CE1
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 15:19:00 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 31696-10 for <java-user@lucene.apache.org>;
 Tue,  8 Mar 2005 15:19:00 +0100 (CET)
Received: from tucholsky.office.tanto.de (tucholsky.office.tanto.de [10.0.0.35])
	by mail.tanto.de (Postfix) with ESMTP id 85A6A23BF5
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 15:19:00 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@localhost [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) with ESMTP id j28EKI72028333
	for <java-user@lucene.apache.org>; Tue, 8 Mar 2005 15:20:18 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-7.1) id j28EKIQV028329;
	Tue, 8 Mar 2005 15:20:18 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <16941.46242.773831.529161@tanto-xipolis.de>
Date: Tue, 8 Mar 2005 15:20:18 +0100
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
In-Reply-To: <200503081508.00541.daniel.naber@t-online.de>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
	<16941.29325.935944.415129@tanto-xipolis.de>
	<6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com>
	<200503081508.00541.daniel.naber@t-online.de>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Naber writes:
> On Tuesday 08 March 2005 14:46, Erik Hatcher wrote:
>=20
> > > Right. `a AND (NOT b)' =A0parses to `a'
> >
> > Is this what we want to happen for a general purpose next generatio=
n
> > Lucene QueryParser though? =A0I'm not sure. =A0Perhaps this should =
be a
> > ParseException instead?
>=20
> As we have no concept of a "warning" we should indeed prefer to throw=
 an=20
> exception instead of silently modifying the query in ways the users d=
on't=20
> expect.
>=20
Shouldn't that imply that search itself also throws an exception if it
has to execute such a query?
AFAIK silently ignoring that query is what is currently happening durin=
g=20
search.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 15:07:25 2005
Return-Path: <java-user-return-13566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47725 invoked from network); 8 Mar 2005 15:07:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 15:07:24 -0000
Received: (qmail 30606 invoked by uid 500); 8 Mar 2005 15:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30586 invoked by uid 500); 8 Mar 2005 15:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30572 invoked by uid 99); 8 Mar 2005 15:07:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 07:07:19 -0800
Received: from pd9535793.dip.t-dialin.net ([217.83.87.147] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D8gIl-0006Hz-HZ
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 07:07:16 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:        <java-user@lucene.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Tue, 8 Mar 2005 16:07:10 +0100
Message-ID: <20053816710.457022@Kelvin>
In-Reply-To: <20050308130319.61798.qmail@web26002.mail.ukl.yahoo.com>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ah, I apologize. My use of the word "frequency" was misleading. By that, I=
 meant, the number of hits/documents, whose fields have that value. Once=
 again:

doc a=3Dtitle:1,keyword:a,contents:somelongmemoryhoggingstring
doc b=3Dtitle:1,keyword:a,contents:somelongmemoryhoggingstring
doc c=3Dtitle:1,keyword:b,contents:somelongmemoryhoggingstring
doc d=3Dtitle:2,keyword:b,contents:somelongmemoryhoggingstring
doc e=3Dtitle:2,keyword:b,contents:somelongmemoryhoggingstring
doc f=3Dtitle:3,keyword:b,contents:somelongmemoryhoggingstring

I'd like to have the following :

For the title field,
3 documents have "1" as title
2 documents have "2" as title
1 document has "3" as title

Is it clearer now?
k

On Tue, 8 Mar 2005 13:03:19 +0000 (GMT), mark harwood wrote:
>=A0The new TermFreqVector code sounds like what you need
>=A0here. This gives you fast access to precomputed totals
>=A0of term frequencies for each document.
>
>=A0See IndexReader.getTermFreqVector
>
>
>=A0Send instant messages to your online friends
>=A0http://uk.messenger.yahoo.com
>
>=A0--------------------------------------------------------------------
>=A0- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>=A0For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 15:40:58 2005
Return-Path: <java-user-return-13567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70316 invoked from network); 8 Mar 2005 15:40:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 15:40:57 -0000
Received: (qmail 96222 invoked by uid 500); 8 Mar 2005 15:40:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95366 invoked by uid 500); 8 Mar 2005 15:40:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95353 invoked by uid 500); 8 Mar 2005 15:40:54 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 95350 invoked by uid 99); 8 Mar 2005 15:40:54 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web86904.mail.ukl.yahoo.com (HELO web86904.mail.ukl.yahoo.com) (217.12.13.56)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 07:40:52 -0800
Received: (qmail 80308 invoked by uid 60001); 8 Mar 2005 15:40:49 -0000
Message-ID: <20050308154049.80304.qmail@web86904.mail.ukl.yahoo.com>
Received: from [217.227.73.167] by web86904.mail.ukl.yahoo.com via HTTP; Tue, 08 Mar 2005 15:40:49 GMT
Date: Tue, 8 Mar 2005 15:40:49 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: fresh indexing bug?
To: lucene-user@jakarta.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

When I reindex with the lucene from the latest svn
snapshot, a lot of .tii files that are deletable
appear (checked with luke).

This was not happening with previous version using
exactly the same code for indexing.
At the end of indexing Optimize was succesfully
finished.

Is this a bug?

WinXP, 
here is the content of the index folder:

              214 deletable
               30 segments
           37,176 _2tcg.tii
           38,491 _5mox.tii
              441 _5n36.tii
              442 _5nhf.tii
              438 _5nvo.tii
              415 _5o9x.tii
              445 _5oo6.tii
              459 _5p2f.tii
              452 _5pgo.tii
              427 _5pux.tii
              435 _5q96.tii
              449 _5qnf.tii
              457 _5r1o.tii
              447 _5rfx.tii
              461 _5ru6.tii
              427 _5s8f.tii
              457 _5smo.tii
              426 _5t0x.tii
            4,400 _5t0y.tii
              467 _5tf7.tii
              241 _5tm1.tii
          271,093 _5tm2.f0
          271,093 _5tm2.f1
          271,093 _5tm2.f2
          271,093 _5tm2.f3
          271,093 _5tm2.f4
          271,093 _5tm2.f5
          271,093 _5tm2.f6
          271,093 _5tm2.f7
          271,093 _5tm2.f8
        2,982,023 _5tm2.fdt
        2,168,744 _5tm2.fdx
               53 _5tm2.fnm
        5,643,479 _5tm2.frq
        2,590,001 _5tm2.prx
           68,561 _5tm2.tii
        4,886,688 _5tm2.tis


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 16:04:42 2005
Return-Path: <java-user-return-13568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85391 invoked from network); 8 Mar 2005 16:04:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 16:04:42 -0000
Received: (qmail 30000 invoked by uid 500); 8 Mar 2005 16:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29947 invoked by uid 500); 8 Mar 2005 16:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29902 invoked by uid 99); 8 Mar 2005 16:04:34 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26003.mail.ukl.yahoo.com (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 08:04:31 -0800
Received: (qmail 68246 invoked by uid 60001); 8 Mar 2005 16:04:27 -0000
Message-ID: <20050308160427.68244.qmail@web26003.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Tue, 08 Mar 2005 16:04:27 GMT
Date: Tue, 8 Mar 2005 16:04:27 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Your requirement was clear but I guess my suggested
solution wasn't.
Here it is in detail:


public class CountTest
{

    public static void main(String[] args) throws
Exception
    {
		RAMDirectory tempDir = new RAMDirectory();
		Analyzer analyzer=new WhitespaceAnalyzer();
		
		IndexWriter writer =	new IndexWriter(tempDir,
analyzer, true);
		addDoc(writer,"1 1 1", "a");
		addDoc(writer,"2 1 2", "b 2");
		addDoc(writer,"3 3 3", "b 3");
		writer.close();
		class DocCount
		{
            int count=0;
            private String term;
            public DocCount(String term)
            {
                this.term=term;
            }
            public String toString()
            {
                return term+": "+count;
            }
		}
		HashMap aDocTermCounts=new HashMap();
		IndexReader reader = IndexReader.open(tempDir);
		for(int i=0;i<reader.maxDoc();i++)
		{
		    TermFreqVector
tfv=reader.getTermFreqVector(i,"fieldA");
		    String[] terms=tfv.getTerms();
		    //here we use just the list of terms and ignore
the frequencies.. 
//		    int freqs[]=tfv.getTermFrequencies();
		    for (int j = 0; j < terms.length; j++)
            {
                DocCount docCount=(DocCount)
aDocTermCounts.get(terms[j]);
                if(docCount==null)
                {
                    docCount=new DocCount(terms[j]);
                   
aDocTermCounts.put(terms[j],docCount);                
                }
                docCount.count++;                
            }		    
		}
		for (Iterator iter =
aDocTermCounts.values().iterator(); iter.hasNext();)
        {
            DocCount docCount = (DocCount)
iter.next();
            System.out.println(docCount);
            
        }
		reader.close();
    }
    static void addDoc(IndexWriter writer, String
fieldA, String fieldB) throws IOException
    {
        Document doc=new Document();
		doc.add(	new Field("fieldA", fieldA, 
		        Field.Store.YES, Field.Index.TOKENIZED,
		        Field.TermVector.YES));
        writer.addDocument(doc);
    }
    
}


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 17:20:32 2005
Return-Path: <java-user-return-13569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29501 invoked from network); 8 Mar 2005 17:20:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 17:20:32 -0000
Received: (qmail 18830 invoked by uid 500); 8 Mar 2005 17:20:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18804 invoked by uid 500); 8 Mar 2005 17:20:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18791 invoked by uid 99); 8 Mar 2005 17:20:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc14.comcast.net (HELO rwcrmhc11.comcast.net) (216.148.227.89)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 09:20:27 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc14) with ESMTP
          id <20050308172023014001j6hce>; Tue, 8 Mar 2005 17:20:24 +0000
Message-ID: <422DDED7.1070909@apache.org>
Date: Tue, 08 Mar 2005 09:20:23 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <422D6C28.6070705@ifit.uni-klu.ac.at> <2560924319c84bba6d75f6e246792f40@ehatchersolutions.com> <422DAEA2.4080200@ifit.uni-klu.ac.at>
In-Reply-To: <422DAEA2.4080200@ifit.uni-klu.ac.at>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

sergiu gordea wrote:
> So .. here is an example of how I parse a simple query string provided 
> by a user ...
> 
> the user checks a few flags and writes "test ko AND NOT bo"
> and the resulting query.toString() is saved in the database:
> 
> +(+(subject:test description:test keywordsTerms:test koProperties:test 
> attachmentData:test) +(subject:ko description:ko keywordsTerms:ko 
> koProperties:ko attachmentData:ko) -(subject:bo* description:bo* 
> keywordsTerms:bo* koProperties:bo* attachmentData:bo*)) +creator:2 
> +classType:package.share.om.knowledgeobject +skillLevel:0 
> +(keywords:1000 keywords:1020)
> 
> I think you agree that is better to be saved in the database instead of  
> creating a
> CustomQuery class that implements Serializable and save it in the database.

Your application will be more robust if you instead stored the checked 
flags and "test ko AND NOT bo" in the database and then re-generate the 
Lucene query as needed.  For example, if you wanted to add an "author" 
field that was searched by default, then all of the queries in your 
database would be invalid.  Also, more to the point, if Query.toString() 
changes, the semantics of your queries might change, or if the 
QueryParser changes they might even become unparsable.

The general rule is that the QueryParser should only be used to directly 
parse user input.  Programs should not generate strings to pass to 
QueryParser.  Query.toString() is a program-generated string.  If you 
must save a query, save the user's input.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 17:31:01 2005
Return-Path: <java-user-return-13570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35513 invoked from network); 8 Mar 2005 17:31:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 17:31:01 -0000
Received: (qmail 42883 invoked by uid 500); 8 Mar 2005 17:30:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42854 invoked by uid 500); 8 Mar 2005 17:30:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42831 invoked by uid 99); 8 Mar 2005 17:30:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 09:30:55 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005030817305201300od8uoe>; Tue, 8 Mar 2005 17:30:52 +0000
Message-ID: <422DE14C.20100@apache.org>
Date: Tue, 08 Mar 2005 09:30:52 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: fresh indexing bug?
References: <20050308154049.80304.qmail@web86904.mail.ukl.yahoo.com>
In-Reply-To: <20050308154049.80304.qmail@web86904.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

eks dev wrote:
> When I reindex with the lucene from the latest svn
> snapshot, a lot of .tii files that are deletable
> appear (checked with luke).

This is a bug I introduced yesterday.  Thanks for catching it!

The term index (.tii) was not closed, and on Windows this makes it 
undeleteable.  I just committed the patch to SVN.  Tell me if it helps.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 17:36:58 2005
Return-Path: <java-user-return-13571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39379 invoked from network); 8 Mar 2005 17:36:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 17:36:58 -0000
Received: (qmail 64102 invoked by uid 500); 8 Mar 2005 17:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64069 invoked by uid 500); 8 Mar 2005 17:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64032 invoked by uid 99); 8 Mar 2005 17:36:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 09:36:49 -0800
Received: from pd9535793.dip.t-dialin.net ([217.83.87.147] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D8idR-0003nr-R7
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 09:36:46 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:        <java-user@lucene.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Tue, 8 Mar 2005 18:36:38 +0100
Message-ID: <200538183638.097377@Kelvin>
In-Reply-To: <20050308160427.68244.qmail@web26003.mail.ukl.yahoo.com>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Mark, thanks for the code sample. I did look into this, but for a book's=
 title field, for example, 

"to be able" !=3D "able to be"
and
"java programmer" !=3D "programmer (java)"  - tokenizer will remove the=
 parentheses

so in my use case at least, a field value isn't simply an array of its=
 terms...

k

On Tue, 8 Mar 2005 16:04:27 +0000 (GMT), mark harwood wrote:
>=A0Your requirement was clear but I guess my suggested
>=A0solution wasn't.
>=A0Here it is in detail:
>
>
>=A0public class CountTest
>=A0{
>
>=A0public static void main(String[] args) throws
>=A0Exception
>=A0{
>=A0RAMDirectory tempDir =3D new RAMDirectory();
>=A0Analyzer analyzer=3Dnew WhitespaceAnalyzer();
>
>=A0IndexWriter writer =3D=A0 =A0 =A0 =A0 new IndexWriter(tempDir,
>=A0analyzer, true);
>=A0addDoc(writer,"1 1 1", "a");
>=A0addDoc(writer,"2 1 2", "b 2");
>=A0addDoc(writer,"3 3 3", "b 3");
>=A0writer.close();
>=A0class DocCount
>=A0{
>=A0int count=3D0;
>=A0private String term;
>=A0public DocCount(String term)
>=A0{
>=A0this.term=3Dterm;
>=A0}
>=A0public String toString()
>=A0{
>=A0return term+": "+count;
>=A0}
>=A0}
>=A0HashMap aDocTermCounts=3Dnew HashMap();
>=A0IndexReader reader =3D IndexReader.open(tempDir);
>=A0for(int i=3D0;i<reader.maxDoc();i++)
>=A0{
>=A0TermFreqVector
>=A0tfv=3Dreader.getTermFreqVector(i,"fieldA");
>=A0String[] terms=3Dtfv.getTerms();
>=A0//here we use just the list of terms and ignore
>=A0the frequencies..
>=A0//=A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 int freqs[]=3Dtfv.getTermFrequencies();
>=A0for (int j =3D 0; j <=A0terms.length; j++)
>=A0{
>=A0DocCount docCount=3D(DocCount)
>=A0aDocTermCounts.get(terms[j]);
>=A0if(docCount=3D=3Dnull)
>=A0{
>=A0docCount=3Dnew DocCount(terms[j]);
>
>=A0aDocTermCounts.put(terms[j],docCount);
>=A0}
>=A0docCount.count++;
>=A0}
>=A0}
>=A0for (Iterator iter =3D
>=A0aDocTermCounts.values().iterator(); iter.hasNext();)
>=A0{
>=A0DocCount docCount =3D (DocCount)
>=A0iter.next();
>=A0System.out.println(docCount);
>
>=A0}
>=A0reader.close();
>=A0}
>=A0static void addDoc(IndexWriter writer, String
>=A0fieldA, String fieldB) throws IOException
>=A0{
>=A0Document doc=3Dnew Document();
>=A0doc.add(=A0 =A0 =A0 =A0 new Field("fieldA", fieldA,
>=A0Field.Store.YES, Field.Index.TOKENIZED,
>=A0Field.TermVector.YES));
>=A0writer.addDocument(doc);
>=A0}
>
>=A0}
>
>
>=A0Send instant messages to your online friends
>=A0http://uk.messenger.yahoo.com
>
>=A0--------------------------------------------------------------------
>=A0- To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>=A0For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 17:38:55 2005
Return-Path: <java-user-return-13572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40203 invoked from network); 8 Mar 2005 17:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 17:38:55 -0000
Received: (qmail 67284 invoked by uid 500); 8 Mar 2005 17:38:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67261 invoked by uid 500); 8 Mar 2005 17:38:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67248 invoked by uid 99); 8 Mar 2005 17:38:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from moutvdom.kundenserver.de (HELO moutvdomng.kundenserver.de) (212.227.126.249)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 09:38:48 -0800
Received: from [212.227.126.221] (helo=mrvdomng.kundenserver.de)
	by moutvdomng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D8ifM-0005cB-00
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 18:38:44 +0100
Received: from [80.128.66.11] (helo=eco)
	by mrvdomng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D8ifM-0002QN-00
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 18:38:44 +0100
Received: by eco (Postfix, from userid 1000)
	id 64DB883843; Tue,  8 Mar 2005 18:38:23 +0100 (CET)
From: Morus Walter <morus.walter@gmx.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16941.58127.132686.955303@onlinehome.de>
Date: Tue, 8 Mar 2005 18:38:23 +0100
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
In-Reply-To: <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
	<16940.47718.444427.724315@onlinehome.de>
	<9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com>
	<16941.21568.532376.650196@tanto-xipolis.de>
	<76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
X-Mailer: VM 7.17 under 21.4 (patch 15) "Security Through Obscurity" XEmacs Lucid
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher writes:
> >> I think  you must have tried this in a transient state when I forgot 
> >> to
> >> check in some JavaCC generated files.  Try again.  This one now 
> >> returns
> >> an empty BooleanQuery.
> >>
> > ok.
> > I'm a bit puzzled, since I called javacc myself, so generated files 
> > should
> > not matter, but if it's fixed, I don't care about what went wrong.
> 
> Let me know if there is still an issue, though I added this exact case 
> to TestPrecedenceQueryParser and its currently working for me.
> 
Actually it turns out to be my fault.
I serialized the result and reparsed it to see if it is reproduced, and
it's that second parse of an empty string that throws the exception.
Sorry for the false error report.

That reminds me of a remark Doug made in the discussion of bug
25820 (http://issues.apache.org/bugzilla/show_bug.cgi?id=25820#c7),
that it would be useful if an empty query string parses to an empty
query. So probably a check for that should be added if the query string
is empty.

Morus



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 18:10:35 2005
Return-Path: <java-user-return-13573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58077 invoked from network); 8 Mar 2005 18:10:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 18:10:34 -0000
Received: (qmail 28345 invoked by uid 500); 8 Mar 2005 18:10:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28010 invoked by uid 500); 8 Mar 2005 18:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27997 invoked by uid 99); 8 Mar 2005 18:10:30 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26008.mail.ukl.yahoo.com (HELO web26008.mail.ukl.yahoo.com) (217.12.10.219)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 10:10:29 -0800
Received: (qmail 66516 invoked by uid 60001); 8 Mar 2005 18:10:26 -0000
Message-ID: <20050308181026.66514.qmail@web26008.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26008.mail.ukl.yahoo.com via HTTP; Tue, 08 Mar 2005 18:10:26 GMT
Date: Tue, 8 Mar 2005 18:10:26 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>>> "to be able" != "able to be"

OK, I thought you wanted to count terms within the
title field. If you want to group counts on the whole
field value change the loop in my last post to this:

		for(int i=0;i<reader.maxDoc();i++)
		{
		    String fieldA=reader.document(i).get("fieldA");
            DocCount docCount=(DocCount)
aDocTermCounts.get(fieldA);
            if(docCount==null)
            {
                docCount=new DocCount(fieldA);
                aDocTermCounts.put(fieldA,docCount);  
             
            }
            docCount.count++;                
		}



Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 18:22:38 2005
Return-Path: <java-user-return-13574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63821 invoked from network); 8 Mar 2005 18:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 18:22:38 -0000
Received: (qmail 50373 invoked by uid 500); 8 Mar 2005 18:22:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50342 invoked by uid 500); 8 Mar 2005 18:22:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50319 invoked by uid 99); 8 Mar 2005 18:22:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 10:22:30 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AD82613E2134; Tue,  8 Mar 2005 13:22:28 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id D3F0213E2007
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 13:22:24 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <16941.58127.132686.955303@onlinehome.de>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <16941.58127.132686.955303@onlinehome.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b9cad79cd475cb457b851b204b9c818a@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Tue, 8 Mar 2005 13:22:22 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mar 8, 2005, at 12:38 PM, Morus Walter wrote:
> That reminds me of a remark Doug made in the discussion of bug
> 25820 (http://issues.apache.org/bugzilla/show_bug.cgi?id=25820#c7),
> that it would be useful if an empty query string parses to an empty
> query. So probably a check for that should be added if the query string
> is empty.

No problem.... I've added this test to my local code and will commit my 
changes sometime soon.  My change to the parser to make NOT have higher 
precedence broke more tests so I need to adjust things or revert that 
before I commit.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 18:32:26 2005
Return-Path: <java-user-return-13575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69208 invoked from network); 8 Mar 2005 18:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 18:32:26 -0000
Received: (qmail 76147 invoked by uid 500); 8 Mar 2005 18:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76115 invoked by uid 500); 8 Mar 2005 18:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76102 invoked by uid 99); 8 Mar 2005 18:32:22 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of brogar@gmail.com designates 64.233.170.201 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 10:32:22 -0800
Received: by rproxy.gmail.com with SMTP id i8so1337347rne
        for <java-user@lucene.apache.org>; Tue, 08 Mar 2005 10:32:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=Ua573oqW440OFkvvlGYAyrhjLUd4L5isH32vsmtB9VoJUW8QIOBVIjrD6wjucNIWdcTlc721BU63cfzKIV2JdaYPgtlMT9RzJaAsqq/FShCDaY8wXOs7YYqdvybOYcy5V7dkUUVq99jeK2u2cQ9B35JfahB0b/TRoQNL1SJSQqg=
Received: by 10.38.83.22 with SMTP id g22mr50144rnb;
        Tue, 08 Mar 2005 10:31:45 -0800 (PST)
Received: by 10.54.51.72 with HTTP; Tue, 8 Mar 2005 10:31:43 -0800 (PST)
Message-ID: <34cc3b0a05030810316830135d@mail.gmail.com>
Date: Tue, 8 Mar 2005 13:31:43 -0500
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Webapp Demo throws ArrayIndexOutOfBoundsException on Large index
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've been playing with the webapp and attempting to search over two
indexes that I've created. The first was 700M the second is 2.3G.

When the webapp attempts to search the second I get a
"ArrayIndexOutOfBoundsException":

java.lang.ArrayIndexOutOfBoundsException: -1
  at java.util.ArrayList.get(ArrayList.java:324)
  at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
  at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)
  ...
  at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)

While searching the first works flawlessly. So I figured it might have
been an index that was broken, I reindexed and ran into the same
problem. I then wrote a small stand alone java app that searches the
index and it works just fine.

I'm using lucene 1.4.3 and have tried both tomcat 5.0.x and 5.5.x.

Has anyone else run into this problem? Anyone think of any possible solutions?

Thanks,
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 18:34:26 2005
Return-Path: <java-user-return-13576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70324 invoked from network); 8 Mar 2005 18:34:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 18:34:26 -0000
Received: (qmail 82165 invoked by uid 500); 8 Mar 2005 18:34:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82142 invoked by uid 500); 8 Mar 2005 18:34:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82129 invoked by uid 99); 8 Mar 2005 18:34:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from csserv.wadsworth.org (HELO csserv.wadsworth.org) (199.184.18.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 10:34:18 -0800
Received: from sodor.wadsworth.org (sodor [172.16.1.143])
	by csserv.wadsworth.org (8.11.7p1+Sun/8.11.7) with ESMTP id j28IY4J28832
	for <java-user@lucene.apache.org>; Tue, 8 Mar 2005 13:34:04 -0500 (EST)
Received: (from brian@localhost)
	by sodor.wadsworth.org (8.12.2+Sun/8.12.5/Submit) id j28IY43e002751
	for java-user@lucene.apache.org; Tue, 8 Mar 2005 13:34:04 -0500 (EST)
Date: Tue, 8 Mar 2005 13:34:03 -0500
From: Brian Cuttler <brian@wadsworth.org>
To: java-user@lucene.apache.org
Subject: Re: lucene question, examples
Message-ID: <20050308133403.D2627@sodor.wadsworth.org>
References: <20050303161145.H600@sodor.wadsworth.org> <20050303224041.20530.qmail@web31108.mail.mud.yahoo.com> <20050304091408.C1077@sodor.wadsworth.org> <Pine.LNX.4.58.0503041443560.1395@hal.rescomp.berkeley.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 1.0pre2us
In-Reply-To: <Pine.LNX.4.58.0503041443560.1395@hal.rescomp.berkeley.edu>
X-Wadsworth-MailScanner-Information: Please contact CSS for more information
X-Wadsworth-MailScanner: Found to be clean
X-MailScanner-From: brian@sodor.wadsworth.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris,

Thank you - will take a look at nutch and let you/the list know
if it was a good fit for us.



On Fri, Mar 04, 2005 at 03:02:03PM -0800, Chris Hostetter wrote:
> 
> If your goal is to setup a web based search interface that queries a
> lucene index containing all of the documents from your intranet
> webservers, without writting a lot of code; then perhaps using Lucene 9and
> the demo programs it comes with) isn't the best course of action.
> 
> "Nutch" is an OpenSource project built on top of Lucene that may better
> serve your needs.  It is designed to be a full featured "web search
> solution" with a built in crawler, parsers for various document types, and
> a web based search interface.
> 
>     http://incubator.apache.org/nutch/tutorial.html
> 
> I haven't played with it very much myself, but from what i've seen, it's
> trivial to get it up and running and indexing an intranet (or a single web
> server).
> 
> 
> : Yes, the 1.2 example code is exactly what I've been running on the
> : internal servers. Have to say, for sample code we got by pretty
> : well for a fairly long time.
> :
> : Will check the newer sources and samples, and the code/site you
> : indicated. I'm a generalist, I've written and debugged code in
> : languages that I've never learned and unfortunately the life of
> : a system admin doesn't allow for much java, at least not at my site.
> :
> : I'll have a look and let you know, just for the record, how things
> : turn out.
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
---
   Brian R Cuttler                 brian.cuttler@wadsworth.org
   Computer Systems Support        (v) 518 486-1697
   Wadsworth Center                (f) 518 473-6384
   NYS Department of Health        Help Desk 518 473-0773


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 18:37:55 2005
Return-Path: <java-user-return-13577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71852 invoked from network); 8 Mar 2005 18:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 18:37:54 -0000
Received: (qmail 88822 invoked by uid 500); 8 Mar 2005 18:37:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88797 invoked by uid 500); 8 Mar 2005 18:37:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88783 invoked by uid 99); 8 Mar 2005 18:37:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lyra.lunarpages.com (HELO lyra.lunarpages.com) (64.235.230.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 10:37:49 -0800
Received: from pd9535793.dip.t-dialin.net ([217.83.87.147] helo=Kelvin)
	by lyra.lunarpages.com with esmtpa (Exim 4.44)
	id 1D8jaT-0007sb-4h
	for java-user@lucene.apache.org; Tue, 08 Mar 2005 10:37:45 -0800
From:     Kelvin Tan <kelvin-lists@relevanz.com>
To:        <java-user@lucene.apache.org>
X-Mailer: Barca 1.1 (840) - Licensed Version
Date: Tue, 8 Mar 2005 19:37:38 +0100
Message-ID: <200538193738.107152@Kelvin>
In-Reply-To: <20050308181026.66514.qmail@web26008.mail.ukl.yahoo.com>
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of the search results.]
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - lyra.lunarpages.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - relevanz.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



On Tue, 8 Mar 2005 18:10:26 +0000 (GMT), mark harwood wrote:
>>>>=A0"to be able" !=3D "able to be"
>>>>
>=A0OK, I thought you wanted to count terms within the
>=A0title field. If you want to group counts on the whole
>=A0field value change the loop in my last post to this:
>
>=A0for(int i=3D0;i<reader.maxDoc();i++)
>=A0{
>=A0String fieldA=3Dreader.document(i).get("fieldA");

Which brings me back full-circle, because reader.document(i) loads the=
 entire document with all its fields, hence the request for document=
 lazy-loading...

k


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 19:13:57 2005
Return-Path: <java-user-return-13578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90416 invoked from network); 8 Mar 2005 19:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 19:13:56 -0000
Received: (qmail 52218 invoked by uid 500); 8 Mar 2005 19:13:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52198 invoked by uid 500); 8 Mar 2005 19:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52185 invoked by uid 99); 8 Mar 2005 19:13:52 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web86908.mail.ukl.yahoo.com (HELO web86908.mail.ukl.yahoo.com) (217.12.13.60)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 11:13:50 -0800
Received: (qmail 24697 invoked by uid 60001); 8 Mar 2005 19:13:48 -0000
Message-ID: <20050308191348.24695.qmail@web86908.mail.ukl.yahoo.com>
Received: from [217.94.204.199] by web86908.mail.ukl.yahoo.com via HTTP; Tue, 08 Mar 2005 19:13:48 GMT
Date: Tue, 8 Mar 2005 19:13:48 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Re: fresh indexing bug?
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

works like a charm,
thanks!

as a side note, the latest patch with properly
disabled coord helped me a lot as well, made coord
usable.

--- Doug Cutting <cutting@apache.org> wrote:
> eks dev wrote:
> > When I reindex with the lucene from the latest svn
> > snapshot, a lot of .tii files that are deletable
> > appear (checked with luke).
> 
> This is a bug I introduced yesterday.  Thanks for
> catching it!
> 
> The term index (.tii) was not closed, and on Windows
> this makes it 
> undeleteable.  I just committed the patch to SVN. 
> Tell me if it helps.
> 
> Doug
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 20:16:13 2005
Return-Path: <java-user-return-13579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28135 invoked from network); 8 Mar 2005 20:16:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 20:16:13 -0000
Received: (qmail 57393 invoked by uid 500); 8 Mar 2005 20:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57369 invoked by uid 500); 8 Mar 2005 20:16:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57356 invoked by uid 99); 8 Mar 2005 20:16:08 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp003.mail.ukl.yahoo.com (HELO smtp003.mail.ukl.yahoo.com) (217.12.11.34)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 12:16:07 -0800
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp003.mail.ukl.yahoo.com with SMTP; 8 Mar 2005 20:16:04 -0000
Message-ID: <422E0803.1050807@yahoo.co.uk>
Date: Tue, 08 Mar 2005 20:16:03 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Document lazy-loading WAS [Re: Fast access to a random page of
 the search results.]
References: <200538193738.107152@Kelvin>
In-Reply-To: <200538193738.107152@Kelvin>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

So this is just the old problem of avoiding reading large, less 
frequently accessed fields when you are trying to read just the smaller 
more frequently accessed fields eg titles.
You can achieve this by:

a)  Modifying Lucene using something like the code I  originally posted 
which stops reading a document's fields if the required list has been 
found (hoping the stored field order is favourable to all of your app's 
access patterns)
b) Storing any large-but-rarely-accessed fields externally eg in files 
or an RDBMS and keeping a primary key in Lucene to retrieve the  content 
when required.
c) If you dont want to use an RDBMS and want to keep it all Lucene-based 
you could store any large-but-rarely-accessed fields in another index 
alongside your main one to avoid the hit.. Each large field could be a 
separate document in this index and you could retrieve it when required 
by accessing largeFieldStoreIndexReader.document(x) where x is
 1) calculated by taking the mainSearchIndexReader document id and 
multiplying by the number of externally stored large fields per main 
document or
 2) Querying largeFieldStoreIndex for a unique key which is stored in 
the mainSearchIndex.

I would favour b) as a and c seem messy.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 08 22:17:51 2005
Return-Path: <java-user-return-13580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96528 invoked from network); 8 Mar 2005 22:17:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Mar 2005 22:17:51 -0000
Received: (qmail 64543 invoked by uid 500); 8 Mar 2005 22:17:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64521 invoked by uid 500); 8 Mar 2005 22:17:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64507 invoked by uid 99); 8 Mar 2005 22:17:45 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 14:17:43 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F20975B7CC; Tue,  8 Mar 2005 14:17:38 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E429F7F45E
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 14:17:38 -0800 (PST)
Date: Tue, 8 Mar 2005 14:17:38 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
In-Reply-To: <16941.45901.672724.728010@tanto-xipolis.de>
Message-ID: <Pine.LNX.4.58.0503081405430.21891@hal.rescomp.berkeley.edu>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com>
 <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com>
 <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com>
 <16941.29325.935944.415129@tanto-xipolis.de> <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com>
 <16941.45901.672724.728010@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Earlier in this thread...

: >>> +a -> a
: >>
: >> Hmmm.... this is a debatable one.  It's returning a TermQuery in this
: >> case for "a".  Is that appropriate?  Or should it return a
: >> BooleanQuery
: >> with a single TermQuery as required?

: > Ok.
: > The question how to handle BooleanQueries, that contain prohibited
: > terms
: > only, is a question on it's own.
: > In my fix I choose to silently drop these queries. Basically because
: > it's
: > effectivly dropped during querying anyway.

...I would argue that the most correct behavior would be for QP to
generate a Boolean query indicating the required/expluded term -- even if
a Searcher can't run that query as is.  It's not the QueryParsers job to
know what Query object structures make sense or not, just to know what the
sanest possible maping from text to query object tree is.

i can think of some very valid use cases where a client would build a
complex Query out of some progromaticly generated Query objects, and the
Query returned by the QP -- those clients aren't going to be happy if QP
is returning an exception because the Query it's generating doesn't look
"valid"

(consider the simple case of an author pulldown, and a text box.  i may
want to build up a query object based on the construction of a Term query
from my pulldown, and the results of parsing the text box -- in which case
having QP return a BooleanQuery with one clause is perfectly valid and
ideal for me, becuase it let's people say "+author:foo +text" or
"+author:foo -text")

: > Is this what we want to happen for a general purpose next generation
: > Lucene QueryParser though?  I'm not sure.  Perhaps this should be a
: > ParseException instead?

: That's ok then. Throw a ParseException and whoever doesn't like that,
: can overwrite the method and either keep the query (knowing that it will
: be ignored in search anyway) or drop it.

if that's the route people want to go, then i'd like to instead advocate
that the default behavior for this situation be no error.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 01:54:44 2005
Return-Path: <java-user-return-13581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79633 invoked from network); 9 Mar 2005 01:54:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 01:54:43 -0000
Received: (qmail 54169 invoked by uid 500); 9 Mar 2005 01:54:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54146 invoked by uid 500); 9 Mar 2005 01:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54124 invoked by uid 99); 9 Mar 2005 01:54:38 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.mainstreamdata.com (HELO ns1.mainstreamdata.com) (209.63.42.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 17:54:36 -0800
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 172BB7E3
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 18:54:35 -0700 (MST)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 19835-04 for <java-user@lucene.apache.org>;
	Tue, 8 Mar 2005 18:54:27 -0700 (MST)
Received: from slc-xchg1.slc.mainstreamdata.com (slc-xchg1.slc.mainstreamdata.com [10.7.11.32])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 9A58D12C
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 18:54:27 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5244A.ED424AA6"
Subject: large indexes
Date: Tue, 8 Mar 2005 18:54:27 -0700
Message-ID: <A60AC49BA89F4F4D9D86F2B7519111E87D839A@slc-xchg1.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: large indexes
Thread-Index: AcUkSu0qRV5yJ0qaSW67pDJlDpva3w==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5244A.ED424AA6
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have the need to create an index which will potentially have a
million+ documents.  I know Lucene can accomplish this.  However, the
other requirement is that I need to be continually updating it during
the date (adding 1-30 documents/minute).  I guess I had thought that I
might try to have an active index that I keep today's documents in and
then a large cumulative index of all of the previous day's documents.
At the end of each day, I would create a new version of the cumulative
index adding in that day's documents.  I would use the multi-index
search to search the current day and cumulative indexes.

=20

Has anyone dealt with this design issue?  Is this a reasonable approach?
What have other people done?

=20

Scott=20

=20

=20


------_=_NextPart_001_01C5244A.ED424AA6--

From java-user-return-13582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 01:54:50 2005
Return-Path: <java-user-return-13582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79696 invoked from network); 9 Mar 2005 01:54:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 01:54:50 -0000
Received: (qmail 55082 invoked by uid 500); 9 Mar 2005 01:54:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55037 invoked by uid 500); 9 Mar 2005 01:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55001 invoked by uid 99); 9 Mar 2005 01:54:43 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_BOGUSMX,HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.mainstreamdata.com (HELO ns1.mainstreamdata.com) (209.63.42.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 17:54:42 -0800
Received: from localhost (localhost [127.0.0.1])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id 04EE512C
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 18:54:41 -0700 (MST)
Received: from ns1.mainstreamdata.com ([127.0.0.1])
	by localhost (ns1 [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
	id 18516-10 for <java-user@lucene.apache.org>;
	Tue, 8 Mar 2005 18:54:32 -0700 (MST)
Received: from slc-xchg1.slc.mainstreamdata.com (slc-xchg1.slc.mainstreamdata.com [10.7.11.32])
	by ns1.mainstreamdata.com (Postfix) with ESMTP id D096A7E4
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 18:54:32 -0700 (MST)
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5244A.F06364B6"
Subject: Assorted questions
Date: Tue, 8 Mar 2005 18:54:32 -0700
Message-ID: <A60AC49BA89F4F4D9D86F2B7519111E87D8399@slc-xchg1.slc.mainstreamdata.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Assorted questions
Thread-Index: AcUkSvBLomyHzcOvRn6PbM+SeOZj4Q==
From: "Scott Smith" <ssmith@mainstreamdata.com>
To: <java-user@lucene.apache.org>
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at mainstreamdata.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5244A.F06364B6
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I needed to return my hits list in date/time order (instead of
relevancy).  So, I implemented a class that converted dates to an int
and stored the integer as a field in my index.  I passed a Sort object
to the IndexSearcher (indicating that the sort field was convertible to
int) to get things back in date/time order.  It works great.

=20

Now I need to do a search within a date/time range (e.g., all the
documents between 1/1/2005 00:00:00 to 1/5/2005 23:59:59).  It appears
that there is no way to use the integer date to do the range search
since Lucene is really looking at the string representation of the int.
Even prefixing enough zeros to make all of the integers the same length
doesn't help (darn negative numbers).

=20

Have I missed something?  Or, will I need to put some kind of date/time
string that looks like "20050308172533" (for 3/8/2005 17:25:33) in the
index?

=20

My second question is whether range searches are efficient?  I seem to
recall reading somewhere that range searches get converted to a list of
the individual items.  Since a day has 86,400 seconds, a few days worth
of searching would require a very large list.  Please tell me that I'm
out-in-the-weeds on my recall and that range searches are efficient
(i.e., it's effectively just doing a string compare with the start and
end terms).

=20

Scott=20

=20

=20


------_=_NextPart_001_01C5244A.F06364B6--

From java-user-return-13583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 02:42:47 2005
Return-Path: <java-user-return-13583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10801 invoked from network); 9 Mar 2005 02:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 02:42:47 -0000
Received: (qmail 94831 invoked by uid 500); 9 Mar 2005 02:42:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94808 invoked by uid 500); 9 Mar 2005 02:42:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94791 invoked by uid 99); 9 Mar 2005 02:42:42 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31111.mail.mud.yahoo.com (HELO web31111.mail.mud.yahoo.com) (68.142.200.230)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 18:42:39 -0800
Received: (qmail 31986 invoked by uid 60001); 9 Mar 2005 02:42:37 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=XlW1PxPxIan1Fu1ZkUAEwI7OC6EjM69fXTeir970/2hYIFUOQ+7uUeY5LsLpWOr8cJTif+gIiMxZnYrmZ2l0fBd9g1ff1ZLbXYbLjzDWkQLYUAuJy0dIqxrJH5OA2oKeOhw2NOmIQ2f4wlQTfDJe3LKwu16vKlrETxPqcwB0nFk=  ;
Message-ID: <20050309024237.31984.qmail@web31111.mail.mud.yahoo.com>
Received: from [69.201.130.90] by web31111.mail.mud.yahoo.com via HTTP; Tue, 08 Mar 2005 18:42:37 PST
Date: Tue, 8 Mar 2005 18:42:37 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Find version of Lucene library
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The version information should be included in the Manifest file inside
the Jar.   The JDK comes with some classes that will let you get to
that elegantly.

Otis

--- Paul Mellor <pmellor@hemscott.co.uk> wrote:
> Hi guys,
>  
> Just a quick query - is there any way that I can determine at runtime
> the
> version of Lucene that I am using?  I'm upgrading a system from v1.3
> to
> v1.4.3 and I would like to be able to print out the version at
> startup so
> that I can be sure that I have got my paths all correct and haven't
> done
> anything stupid like replaced the wrong JAR!
>  
> Thanks
>  
> Paul
> 
> This e-mail and any files transmitted with it are confidential and
> intended
> solely for the use of the individual or entity to whom they are
> addressed.
> If you are not the intended recipient, you should not copy,
> retransmit or
> use the e-mail and/or files transmitted with it  and should not
> disclose
> their contents. In such a case, please notify
> netwebmaster@hemscott.co.uk
> and delete the message from your own system. Any opinions expressed
> in this
> e-mail and/or files transmitted with it that do not relate to the
> official
> business of this company are those solely of the author and should
> not be
> interpreted as being endorsed by this company.
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 02:53:55 2005
Return-Path: <java-user-return-13584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14844 invoked from network); 9 Mar 2005 02:53:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 02:53:55 -0000
Received: (qmail 7508 invoked by uid 500); 9 Mar 2005 02:53:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7480 invoked by uid 500); 9 Mar 2005 02:53:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7467 invoked by uid 99); 9 Mar 2005 02:53:52 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31109.mail.mud.yahoo.com (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 18:53:50 -0800
Received: (qmail 35488 invoked by uid 60001); 9 Mar 2005 02:53:48 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=mYkt3LmSk3lwv2TMQe77wGMXDEqow7dbnabYZ6upqTJvsxz2MZ08VRVTM5M0IdYMDbrP9ycyJvJeG8Cy0fUZccMONQHFkoSmZ1XboBvTMR1Y6ETFmE0ziKPp3mAszcdO1Flgam2eb+B06kG/3yuqUkSttLtj0qgKTDDJ4tOExOc=  ;
Message-ID: <20050309025348.35486.qmail@web31109.mail.mud.yahoo.com>
Received: from [69.201.130.90] by web31109.mail.mud.yahoo.com via HTTP; Tue, 08 Mar 2005 18:53:48 PST
Date: Tue, 8 Mar 2005 18:53:48 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Assorted questions
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Your memory is serving you well.
http://www.lucenebook.com/search?query=%22range+query%22+performance

Note the hit in section 6.5.1 - the fact that we used range queries in
the performance section is an indicator that one can really mess things
up if using range queries injudiciously. :)  In particular, the typical
advice is to try to round the time information, to avoid costly range
queries.  Seconds sound like trouble.

Otis


--- Scott Smith <ssmith@mainstreamdata.com> wrote:
> I needed to return my hits list in date/time order (instead of
> relevancy).  So, I implemented a class that converted dates to an int
> and stored the integer as a field in my index.  I passed a Sort
> object
> to the IndexSearcher (indicating that the sort field was convertible
> to
> int) to get things back in date/time order.  It works great.
> 
>  
> 
> Now I need to do a search within a date/time range (e.g., all the
> documents between 1/1/2005 00:00:00 to 1/5/2005 23:59:59).  It
> appears
> that there is no way to use the integer date to do the range search
> since Lucene is really looking at the string representation of the
> int.
> Even prefixing enough zeros to make all of the integers the same
> length
> doesn't help (darn negative numbers).
> 
>  
> 
> Have I missed something?  Or, will I need to put some kind of
> date/time
> string that looks like "20050308172533" (for 3/8/2005 17:25:33) in
> the
> index?
> 
>  
> 
> My second question is whether range searches are efficient?  I seem
> to
> recall reading somewhere that range searches get converted to a list
> of
> the individual items.  Since a day has 86,400 seconds, a few days
> worth
> of searching would require a very large list.  Please tell me that
> I'm
> out-in-the-weeds on my recall and that range searches are efficient
> (i.e., it's effectively just doing a string compare with the start
> and
> end terms).
> 
>  
> 
> Scott 
> 
>  
> 
>  
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 03:30:02 2005
Return-Path: <java-user-return-13585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25157 invoked from network); 9 Mar 2005 03:30:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 03:30:02 -0000
Received: (qmail 38319 invoked by uid 500); 9 Mar 2005 03:29:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38293 invoked by uid 500); 9 Mar 2005 03:29:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38278 invoked by uid 99); 9 Mar 2005 03:29:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 08 Mar 2005 19:29:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 01B0413E200A; Tue,  8 Mar 2005 22:29:55 -0500 (EST)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id AD91C13E2007
	for <java-user@lucene.apache.org>; Tue,  8 Mar 2005 22:29:51 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <Pine.LNX.4.58.0503081405430.21891@hal.rescomp.berkeley.edu>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <16941.29325.935944.415129@tanto-xipolis.de> <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com> <16941.45901.672724.728010@tanto-xipolis.de> <Pine.LNX.4.58.0503081405430.21891@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <a8f4adcecee389f597ab08499fb79c80@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Tue, 8 Mar 2005 22:29:43 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mar 8, 2005, at 5:17 PM, Chris Hostetter wrote:
>
> Earlier in this thread...
>
> : >>> +a -> a
> : >>
> : >> Hmmm.... this is a debatable one.  It's returning a TermQuery in 
> this
> : >> case for "a".  Is that appropriate?  Or should it return a
> : >> BooleanQuery
> : >> with a single TermQuery as required?
>
> : > Ok.
> : > The question how to handle BooleanQueries, that contain prohibited
> : > terms
> : > only, is a question on it's own.
> : > In my fix I choose to silently drop these queries. Basically 
> because
> : > it's
> : > effectivly dropped during querying anyway.
>
> ...I would argue that the most correct behavior would be for QP to
> generate a Boolean query indicating the required/expluded term -- even 
> if
> a Searcher can't run that query as is.  It's not the QueryParsers job 
> to
> know what Query object structures make sense or not, just to know what 
> the
> sanest possible maping from text to query object tree is.

That is a very reasonable mandate for QueryParser.  I agree.

I have committed a round of changes to the PrecedenceQueryParser.  I'm 
going to leave it alone for a while.  There are a couple of tests that 
are failing because I adjusted them to be as desired but not yet 
implemented.  Here are the short comings currently:

	assertQueryEquals("a OR !b", null, "a (-b)");
		junit.framework.AssertionFailedError: Query /a OR !b/ yielded /a -b/, 
expecting /a (-b)/

     query1 = parser.parse("A OR NOT B AND C");
     query2 = parser.parse("A (-B +C)");
     assertEquals(query1, query2);
		junit.framework.AssertionFailedError: expected:<field:A -(+field:B 
+field:C)> but was:<field:A (-field:B +field:C)>

I believe these are similar, if not identical, to what QueryParser does 
with queries, so we're no worse off and we now have operator precedence 
with AND/OR.  I feel the NOT/-/! precedence issue needs to be addressed 
before this is a viable replacement.  If any JavaCC savvy folks are 
interested in lending a handy to fix this remaining issue I'd be 
ecstatic!  I tried some things but thus far unsuccessful.

What else is missing/broken?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 03:31:43 2005
Return-Path: <java-user-return-13586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25994 invoked from network); 9 Mar 2005 03:31:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 03:31:43 -0000
Received: (qmail 41050 invoked by uid 500); 9 Mar 2005 03:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40986 invoked by uid 500); 9 Mar 2005 03:31:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40857 invoked by uid 99); 9 Mar 2005 03:31:29 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from alpha.Xerox.COM (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 08 Mar 2005 19:31:28 -0800
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <173061(2)>; Tue, 8 Mar 2005 19:31:15 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Tue, 8 Mar 2005 19:31:07 PST
To: java-user@lucene.apache.org
Subject: Re: Find version of Lucene library 
In-Reply-To: Your message of "Tue, 08 Mar 2005 18:42:37 PST."
             <20050309024237.31984.qmail@web31111.mail.mud.yahoo.com> 
Date: Tue, 8 Mar 2005 19:30:59 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <05Mar8.193107pst."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> The JDK comes with some classes that will let you get to
> that elegantly.

You mean clumsily :-).

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 08:49:45 2005
Return-Path: <java-user-return-13587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71764 invoked from network); 9 Mar 2005 08:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 08:49:45 -0000
Received: (qmail 66313 invoked by uid 500); 9 Mar 2005 08:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66284 invoked by uid 500); 9 Mar 2005 08:49:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66267 invoked by uid 99); 9 Mar 2005 08:49:38 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 00:49:36 -0800
Received: from [192.168.101.96] ([213.80.34.34])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j298nXV28001
	for <java-user@lucene.apache.org>; Wed, 9 Mar 2005 02:49:33 -0600
Message-ID: <422EB89A.6040707@getopt.org>
Date: Wed, 09 Mar 2005 09:49:30 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Find version of Lucene library
References: <05Mar8.193107pst."58617"@synergy1.parc.xerox.com>
In-Reply-To: <05Mar8.193107pst."58617"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bill Janssen wrote:
>>The JDK comes with some classes that will let you get to
>>that elegantly.
> 
> 
> You mean clumsily :-).

Besides, it doesn't work with WebStart, because the classpath is not 
accessible.


-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 09:01:25 2005
Return-Path: <java-user-return-13588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77967 invoked from network); 9 Mar 2005 09:01:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 09:01:25 -0000
Received: (qmail 85759 invoked by uid 500); 9 Mar 2005 09:01:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85736 invoked by uid 500); 9 Mar 2005 09:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85722 invoked by uid 99); 9 Mar 2005 09:01:20 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from libra.cs.put.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 01:01:19 -0800
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 239C33699
	for <java-user@lucene.apache.org>; Wed,  9 Mar 2005 10:01:15 +0100 (CET)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id E46BD3698
	for <java-user@lucene.apache.org>; Wed,  9 Mar 2005 10:01:14 +0100 (CET)
Message-ID: <422EBB91.1030502@cs.put.poznan.pl>
Date: Wed, 09 Mar 2005 10:02:09 +0100
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Find version of Lucene library
References: <05Mar8.193107pst."58617"@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org>
In-Reply-To: <422EB89A.6040707@getopt.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Can you do a Lucene.class.getResource("/META-INF/.... and read the info 
from there manually? This should return JAR-relative URL and thus should 
work with Java WebStart.

D.

Andrzej Bialecki wrote:
> Bill Janssen wrote:
> 
>>> The JDK comes with some classes that will let you get to
>>> that elegantly.
>>
>>
>>
>> You mean clumsily :-).
> 
> 
> Besides, it doesn't work with WebStart, because the classpath is not 
> accessible.
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 09:07:24 2005
Return-Path: <java-user-return-13589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80297 invoked from network); 9 Mar 2005 09:07:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 09:07:22 -0000
Received: (qmail 94368 invoked by uid 500); 9 Mar 2005 09:07:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94346 invoked by uid 500); 9 Mar 2005 09:07:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94332 invoked by uid 99); 9 Mar 2005 09:07:15 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,RCVD_IN_SBL,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of petite.abeille@gmail.com designates 64.233.184.206 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 01:07:14 -0800
Received: by wproxy.gmail.com with SMTP id 69so191281wra
        for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 01:07:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Hk7ZOJFfQWt6LqTurHvoaFizezxJqrUhtV2o1WjuFgPL8eYMBY0dFZGikp/+7hN/7j+4WbnIPIyq8IIxT4wJteqppGX8Wy24sDmXhSjBwbT/wJd0pVl/5gY+Xbkuyd878F4vVxWAQBNrSjmdgGAK61/WYIDP1RdidkEd1Ch3Mxo=
Received: by 10.54.84.20 with SMTP id h20mr100147wrb;
        Wed, 09 Mar 2005 01:07:11 -0800 (PST)
Received: from ?10.0.1.9? ([62.167.148.111])
        by mx.gmail.com with ESMTP id 9sm449095wrl.2005.03.09.01.07.11;
        Wed, 09 Mar 2005 01:07:11 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <422EB89A.6040707@getopt.org>
References: <05Mar8.193107pst.58617@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <efff3eed7e615adb201f1c400642b038@gmail.com>
Content-Transfer-Encoding: 7bit
From: PA <petite.abeille@gmail.com>
Subject: Re: Find version of Lucene library
Date: Wed, 9 Mar 2005 10:07:07 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 09, 2005, at 09:49, Andrzej Bialecki wrote:

> Besides, it doesn't work with WebStart, because the classpath is not 
> accessible.

Hmmm... would not java.lang.Package various methods do the job?

Cheers

--
PA, Onnay Equitursay
http://alt.textdrive.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 09:15:40 2005
Return-Path: <java-user-return-13590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83500 invoked from network); 9 Mar 2005 09:15:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 09:15:40 -0000
Received: (qmail 9255 invoked by uid 500); 9 Mar 2005 09:15:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9221 invoked by uid 500); 9 Mar 2005 09:15:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9208 invoked by uid 500); 9 Mar 2005 09:15:35 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 9205 invoked by uid 99); 9 Mar 2005 09:15:35 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 09 Mar 2005 01:15:34 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ID2VUU00.H3U for <lucene-user@jakarta.apache.org>; Wed,
          9 Mar 2005 15:02:54 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: SPAN QUERY [HOW TO]
Date: Wed, 9 Mar 2005 14:52:21 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEGJCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0002_01C524B7.98E6E110"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0002_01C524B7.98E6E110
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0003_01C524B7.98E6E110"


------=_NextPart_001_0003_01C524B7.98E6E110
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi

Guys

Apologies..........



The new Feature of lucene 'span query' really is interesting

But need expert suggestions on achieveing the same.

I have 3 documents

Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA
Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
Document 3 contains  =   ELECTRONICS  DIGITAL CAMERA ACCESSIORIES



search word = " DIGITAL CAMERA "

Returned hits  = 1st doc   ONLY [ 2 and 3rd document should not be in the
hit ]

SpanQuery /PharseQuery  ????



How would one achieve this ??? Please




WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0003_01C524B7.98E6E110
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><SPAN class=3D718081309-09032005><FONT face=3DVerdana =
size=3D2><STRONG>Hi&nbsp;=20
</STRONG></FONT></SPAN></P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana=20
size=3D2>Guys</FONT></STRONG></SPAN></P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies..........</FONT></STRONG></SPAN></P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>The new=20
Feature of lucene 'span query' really is =
interesting</FONT></STRONG></SPAN></P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>But need=20
expert suggestions on achieveing the same.</FONT></STRONG></SPAN></P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>I have 3=20
documents <BR><BR></FONT></STRONG></SPAN><SPAN=20
class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>Document 1=20
contains&nbsp; &nbsp;=3D&nbsp;&nbsp;ELECTRONICS &nbsp;DIGITAL CAMERA =
<BR><SPAN=20
class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>Document 2=20
contains</FONT></STRONG></SPAN>&nbsp;&nbsp; =3D&nbsp; ELECTRONICS&nbsp; =
DIGITAL=20
CAMERA 0PTICS<BR><SPAN class=3D718081309-09032005><STRONG><FONT =
face=3DVerdana=20
size=3D2>Document 3 contains</FONT></STRONG></SPAN>&nbsp; =
=3D&nbsp;&nbsp;=20
ELECTRONICS&nbsp; DIGITAL CAMERA =
ACCESSIORIES</FONT></STRONG></SPAN></P><SPAN=20
class=3D718081309-09032005><STRONG><FONT face=3DVerdana size=3D2>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>search word=20
=3D " DIGITAL CAMERA "</FONT></STRONG></SPAN></P></FONT></STRONG></SPAN>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>Returned=20
hits&nbsp; =3D 1st doc&nbsp;&nbsp; ONLY [ 2 and 3rd document should not =
be in the=20
hit ]</FONT></STRONG></SPAN></P><SPAN =
class=3D718081309-09032005><STRONG><FONT=20
face=3DVerdana size=3D2>
<P><SPAN class=3D718081309-09032005>SpanQuery /PharseQuery&nbsp; =
????</SPAN></P>
<P><SPAN class=3D718081309-09032005></SPAN><SPAN=20
class=3D718081309-09032005></SPAN><SPAN=20
class=3D718081309-09032005></SPAN></FONT></STRONG></SPAN><SPAN=20
class=3D718081309-09032005></SPAN><SPAN =
class=3D718081309-09032005><STRONG><FONT=20
face=3DVerdana size=3D2></FONT></STRONG></SPAN>&nbsp;</P>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>How would=20
one achieve this ??? Please</FONT></STRONG></SPAN></P>
<P>&nbsp;</P>
<P><IMG height=3D85 src=3D"cid:718081309@09032005-2495" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0003_01C524B7.98E6E110--

------=_NextPart_000_0002_01C524B7.98E6E110--


From java-user-return-13591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 09:31:42 2005
Return-Path: <java-user-return-13591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90695 invoked from network); 9 Mar 2005 09:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 09:31:41 -0000
Received: (qmail 31478 invoked by uid 500); 9 Mar 2005 09:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31172 invoked by uid 500); 9 Mar 2005 09:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31158 invoked by uid 500); 9 Mar 2005 09:31:37 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 31153 invoked by uid 99); 9 Mar 2005 09:31:36 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from leased-static.200.20.178.bng.vsnl.net.in (HELO crimsonlogic.co.in) (203.200.20.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 01:31:35 -0800
Received: from INA098tnat (localhost.localdomain [127.0.0.1])
	by crimsonlogic.co.in (Postfix) with ESMTP id 8281A233E9
	for <lucene-user@jakarta.apache.org>; Wed,  9 Mar 2005 14:53:46 +0530 (IST)
From: "Natarajan.T" <natarajant@crimsonlogic.co.in>
To: <lucene-user@jakarta.apache.org>
Subject: Remotely Stroring Index file
Date: Wed, 9 Mar 2005 15:06:40 +0530
Message-ID: <003e01c5248b$7f54b8c0$8714a8c0@ssl>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003F_01C524B9.990CF4C0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003F_01C524B9.990CF4C0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

Hi,

 

How to I store indexing files remotely.

For example indexing process running in machine A, then HoHoI want to
store index files in machine B.

 

Regards,

Natarajan.


------=_NextPart_000_003F_01C524B9.990CF4C0--


From java-user-return-13592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 09:32:27 2005
Return-Path: <java-user-return-13592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91109 invoked from network); 9 Mar 2005 09:32:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 09:32:26 -0000
Received: (qmail 32791 invoked by uid 500); 9 Mar 2005 09:32:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32765 invoked by uid 500); 9 Mar 2005 09:32:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32749 invoked by uid 99); 9 Mar 2005 09:32:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 01:32:18 -0800
Received: from [81.168.89.246] (helo=[192.168.1.4])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1D8xY4-0007q7-00
	for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 09:32:13 +0000
Subject: Re: SPAN QUERY [HOW TO]
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <OBELINLGKPEMCIEIJJNKIEGJCCAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKIEGJCCAA.karthik@controlnet.co.in>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Wed, 09 Mar 2005 09:32:14 +0000
Message-Id: <1110360734.8124.103.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 2005-03-09 at 14:52 +0530, Karthik N S wrote:
> The new Feature of lucene 'span query' really is interesting
> 
> But need expert suggestions on achieveing the same.
> 
> I have 3 documents 
> 
> Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA 
> Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
> Document 3 contains  =   ELECTRONICS  DIGITAL CAMERA ACCESSIORIES
> 
>  
> 
> search word = " DIGITAL CAMERA "
> 
> Returned hits  = 1st doc   ONLY [ 2 and 3rd document should not be in
> the hit ]
> 
> SpanQuery /PharseQuery  ????
> 
>  
> 
> How would one achieve this ??? Please

I've used span queries to boost the scores of results where words appear
close together. I'm not sure exactly what you're trying to achieve. All
three documents contain the search phrase, so both span and phrase
queries would return all the documents.

Are you trying to setup a taxonomy? i.e. only display documents in the
category Electronics > Digital Camera, and not those in sub categories?
If this is the case you should try to build the categorisation at the
same time as the indexing process and either add explicit clauses in the
search query or filter afterwards.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 09:39:39 2005
Return-Path: <java-user-return-13593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94566 invoked from network); 9 Mar 2005 09:39:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 09:39:38 -0000
Received: (qmail 44487 invoked by uid 500); 9 Mar 2005 09:39:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44464 invoked by uid 500); 9 Mar 2005 09:39:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44450 invoked by uid 99); 9 Mar 2005 09:39:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 01:39:33 -0800
Received: from [81.168.89.246] (helo=[192.168.1.4])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1D8xf7-0008Iw-00
	for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 09:39:29 +0000
Subject: Re: Remotely Stroring Index file
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <003e01c5248b$7f54b8c0$8714a8c0@ssl>
References: <003e01c5248b$7f54b8c0$8714a8c0@ssl>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Wed, 09 Mar 2005 09:39:30 +0000
Message-Id: <1110361170.8124.106.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 2005-03-09 at 15:06 +0530, Natarajan.T wrote:
> How to I store indexing files remotely.
> 
> For example indexing process running in machine A, then HoHoI want to
> store index files in machine B.

There's no built in support in Lucene to have remote directories. You
can do something at the operating system level, e.g. NFS, to make a
remove directory appear local, but I believe this isn't recommended.

Another approach would be to implement the Directory interface yourself:

http://lucene.apache.org/java/docs/api/org/apache/lucene/store/Directory.html

Then make your implementation capable of storing files remotely. 



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 09:39:52 2005
Return-Path: <java-user-return-13594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94697 invoked from network); 9 Mar 2005 09:39:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 09:39:51 -0000
Received: (qmail 45508 invoked by uid 500); 9 Mar 2005 09:39:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45475 invoked by uid 500); 9 Mar 2005 09:39:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45456 invoked by uid 99); 9 Mar 2005 09:39:45 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 09 Mar 2005 01:39:45 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ID2WZC00.954 for <java-user@lucene.apache.org>; Wed, 9
          Mar 2005 15:27:12 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: SPAN QUERY [HOW TO]
Date: Wed, 9 Mar 2005 15:16:39 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEGKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
In-Reply-To: <1110360734.8124.103.camel@localhost>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi
Guys

Apologies..........

Yes some similar concept in my head is thundering.

I will be using a field 'text'  for the same

Can u guys please tell me using spanQuery or pahrse Query  would do the job
,If so How to proceeed.


Thx in advance
Karthik

-----Original Message-----
From: Miles Barr [mailto:miles@runtime-collective.com]
Sent: Wednesday, March 09, 2005 3:02 PM
To: java-user@lucene.apache.org
Subject: Re: SPAN QUERY [HOW TO]


On Wed, 2005-03-09 at 14:52 +0530, Karthik N S wrote:
> The new Feature of lucene 'span query' really is interesting
>
> But need expert suggestions on achieveing the same.
>
> I have 3 documents
>
> Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA
> Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
> Document 3 contains  =   ELECTRONICS  DIGITAL CAMERA ACCESSIORIES
>
>
>
> search word = " DIGITAL CAMERA "
>
> Returned hits  = 1st doc   ONLY [ 2 and 3rd document should not be in
> the hit ]
>
> SpanQuery /PharseQuery  ????
>
>
>
> How would one achieve this ??? Please

I've used span queries to boost the scores of results where words appear
close together. I'm not sure exactly what you're trying to achieve. All
three documents contain the search phrase, so both span and phrase
queries would return all the documents.

Are you trying to setup a taxonomy? i.e. only display documents in the
category Electronics > Digital Camera, and not those in sub categories?
If this is the case you should try to build the categorisation at the
same time as the indexing process and either add explicit clauses in the
search query or filter afterwards.



--
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 10:30:47 2005
Return-Path: <java-user-return-13595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25312 invoked from network); 9 Mar 2005 10:30:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 10:30:47 -0000
Received: (qmail 28926 invoked by uid 500); 9 Mar 2005 10:30:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28901 invoked by uid 500); 9 Mar 2005 10:30:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28879 invoked by uid 99); 9 Mar 2005 10:30:40 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 02:30:38 -0800
Received: from [192.168.101.96] ([213.80.34.34])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j29AUaL13383
	for <java-user@lucene.apache.org>; Wed, 9 Mar 2005 04:30:36 -0600
Message-ID: <422ED048.508@getopt.org>
Date: Wed, 09 Mar 2005 11:30:32 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Find version of Lucene library
References: <05Mar8.193107pst.58617@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org> <efff3eed7e615adb201f1c400642b038@gmail.com>
In-Reply-To: <efff3eed7e615adb201f1c400642b038@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

PA wrote:
> 
> On Mar 09, 2005, at 09:49, Andrzej Bialecki wrote:
> 
>> Besides, it doesn't work with WebStart, because the classpath is not 
>> accessible.
> 
> 
> Hmmm... would not java.lang.Package various methods do the job?

I'm not sure... I just tried to do 
Package.getPackage("org.apache.lucene") and got null, even though the 
manifest is present in the JAR.

I also tried the Dawid's method, but unfortunately there is only one 
class loader in the application, so it returns just the first resource 
with that name found on classpath, which is... the manifest found in 
rt.jar. :-(

-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 10:38:21 2005
Return-Path: <java-user-return-13596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30736 invoked from network); 9 Mar 2005 10:38:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 10:38:15 -0000
Received: (qmail 43460 invoked by uid 500); 9 Mar 2005 10:38:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43439 invoked by uid 500); 9 Mar 2005 10:38:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43425 invoked by uid 99); 9 Mar 2005 10:38:06 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,RCVD_IN_SBL,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of petite.abeille@gmail.com designates 64.233.170.197 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 02:38:05 -0800
Received: by rproxy.gmail.com with SMTP id y7so133669rne
        for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 02:38:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=URddFpyevd61zd8NhiAMlWnvxLci8FoEKPHn9aYiHjtVbvFSJezFKbA1kBgagPl6VIMR1Qv6WQONP/yYjWTCZ5Yv7uGMsaS5wWG4d8ZWG9LoYm/VZHhlvv0Ke97cUq8uq8OTQWOfCN5RShSc233bq80V7+uCmD+j9OA3BGIEsik=
Received: by 10.38.97.57 with SMTP id u57mr668850rnb;
        Wed, 09 Mar 2005 02:38:00 -0800 (PST)
Received: from ?10.0.1.9? ([62.167.148.111])
        by mx.gmail.com with ESMTP id k6sm554594rnd.2005.03.09.02.38.00;
        Wed, 09 Mar 2005 02:38:00 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <422ED048.508@getopt.org>
References: <05Mar8.193107pst.58617@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org> <efff3eed7e615adb201f1c400642b038@gmail.com> <422ED048.508@getopt.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2d1af9f9ba661a401dcc0487194017f0@gmail.com>
Content-Transfer-Encoding: 7bit
From: PA <petite.abeille@gmail.com>
Subject: Re: Find version of Lucene library
Date: Wed, 9 Mar 2005 11:37:56 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 09, 2005, at 11:30, Andrzej Bialecki wrote:

> I'm not sure... I just tried to do  
> Package.getPackage("org.apache.lucene") and got null, even though the  
> manifest is present in the JAR.

Packages are only defined when their underlying class has been already  
loaded...

http://alt.textdrive.com/assets/public/docs/ 
java.lang.Package.cls.html#getPackage.String

Why don't you do it the other way around, e.g. pick a Lucene class and  
ask it for its package. That works for me.

Cheers

--
PA, Onnay Equitursay
http://alt.textdrive.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 11:31:29 2005
Return-Path: <java-user-return-13597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68997 invoked from network); 9 Mar 2005 11:31:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 11:31:28 -0000
Received: (qmail 31646 invoked by uid 500); 9 Mar 2005 11:31:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31614 invoked by uid 500); 9 Mar 2005 11:31:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31601 invoked by uid 99); 9 Mar 2005 11:31:22 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,RCVD_IN_SBL,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of petite.abeille@gmail.com designates 64.233.170.192 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 03:31:21 -0800
Received: by rproxy.gmail.com with SMTP id b11so191962rne
        for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 03:31:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:mime-version:content-transfer-encoding:message-id:content-type:to:from:subject:date:x-mailer;
        b=JLic9q3oBo//3CLLDs00T48HIEiP89rjEyqff4ktEQEOlo/uKjhXwFFYO4pYpQjiDtydLOT7EKIx4qitzhJQSYlWwRLQ08gti2+vmxUgmuMUPDz3fSm+TV7HBgiE1NzxnJ5Hi/qXdBJPO2OhrGB/ANNrwrILkgTmykCFIgwyxi4=
Received: by 10.38.68.47 with SMTP id q47mr671604rna;
        Wed, 09 Mar 2005 03:31:19 -0800 (PST)
Received: from ?10.0.1.9? ([62.167.148.111])
        by mx.gmail.com with ESMTP id 59sm663559rnb.2005.03.09.03.31.18;
        Wed, 09 Mar 2005 03:31:19 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <e928a7fc38bae4f53c7db9e602d61b30@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: PA <petite.abeille@gmail.com>
Subject: [OT] lucene dydoc
Date: Wed, 9 Mar 2005 12:31:15 +0100
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

Here is some dydoc for Lucene 1.4.3:

http://alt.textdrive.com/assets/public/lucene-1.4.3/ 
org.apache.lucene.index.IndexWriter.cls.html

The entire Lucene dydoc is available for download as well:

http://alt.textdrive.com/assets/public/lucene-1.4.3.tar.gz

dydoc is an alternative documentation tool for Java classes:

http://alt.textdrive.com/dydoc/

Cheers

--
PA, Onnay Equitursay
http://alt.textdrive.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 12:20:20 2005
Return-Path: <java-user-return-13598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91263 invoked from network); 9 Mar 2005 12:20:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 12:20:19 -0000
Received: (qmail 98476 invoked by uid 500); 9 Mar 2005 12:20:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97613 invoked by uid 500); 9 Mar 2005 12:20:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97600 invoked by uid 99); 9 Mar 2005 12:20:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 04:20:14 -0800
Received: from [192.168.101.96] ([213.80.34.34])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j29CK9V05344
	for <java-user@lucene.apache.org>; Wed, 9 Mar 2005 06:20:10 -0600
Message-ID: <422EE9F4.4070704@getopt.org>
Date: Wed, 09 Mar 2005 13:20:04 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Find version of Lucene library
References: <05Mar8.193107pst.58617@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org> <efff3eed7e615adb201f1c400642b038@gmail.com> <422ED048.508@getopt.org> <2d1af9f9ba661a401dcc0487194017f0@gmail.com>
In-Reply-To: <2d1af9f9ba661a401dcc0487194017f0@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

PA wrote:
> 
> On Mar 09, 2005, at 11:30, Andrzej Bialecki wrote:
> 
>> I'm not sure... I just tried to do  
>> Package.getPackage("org.apache.lucene") and got null, even though the  
>> manifest is present in the JAR.
> 
> 
> Packages are only defined when their underlying class has been already  
> loaded...
> 
> http://alt.textdrive.com/assets/public/docs/ 
> java.lang.Package.cls.html#getPackage.String
> 
> Why don't you do it the other way around, e.g. pick a Lucene class and  
> ask it for its package. That works for me.

Hmmm... doesn't want to work for me, though - I tried it also this way. 
It returns a non-null Package instance, but getImplementationVersion and 
any other version-related methods return null. And I'm pretty sure the 
manifest is there, and it contains the following values:

Name: org/apache/lucene
Specification-Title: Lucene Search Engine
Specification-Version: 1.9-rc1-dev
Specification-Vendor: Lucene
Implementation-Title: org.apache.lucene
Implementation-Version: build 2005-02-16
Implementation-Vendor: Lucene



-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 12:25:33 2005
Return-Path: <java-user-return-13599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93492 invoked from network); 9 Mar 2005 12:25:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 12:25:32 -0000
Received: (qmail 4018 invoked by uid 500); 9 Mar 2005 12:25:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3983 invoked by uid 500); 9 Mar 2005 12:25:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3969 invoked by uid 99); 9 Mar 2005 12:25:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 04:25:27 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 9 Mar 2005 13:25:23 +0100
Message-ID: <422EEB33.8090809@ifit.uni-klu.ac.at>
Date: Wed, 09 Mar 2005 13:25:23 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <422D6C28.6070705@ifit.uni-klu.ac.at> <2560924319c84bba6d75f6e246792f40@ehatchersolutions.com> <422DAEA2.4080200@ifit.uni-klu.ac.at> <422DDED7.1070909@apache.org>
In-Reply-To: <422DDED7.1070909@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Mar 2005 12:25:23.0879 (UTC) FILETIME=[11521B70:01C524A3]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> sergiu gordea wrote:
>
>> So .. here is an example of how I parse a simple query string 
>> provided by a user ...
>>
>> the user checks a few flags and writes "test ko AND NOT bo"
>> and the resulting query.toString() is saved in the database:
>>
>> +(+(subject:test description:test keywordsTerms:test 
>> koProperties:test attachmentData:test) +(subject:ko description:ko 
>> keywordsTerms:ko koProperties:ko attachmentData:ko) -(subject:bo* 
>> description:bo* keywordsTerms:bo* koProperties:bo* 
>> attachmentData:bo*)) +creator:2 
>> +classType:package.share.om.knowledgeobject +skillLevel:0 
>> +(keywords:1000 keywords:1020)
>>
>> I think you agree that is better to be saved in the database instead 
>> of  creating a
>> CustomQuery class that implements Serializable and save it in the 
>> database.
>
>
> Your application will be more robust if you instead stored the checked 
> flags and "test ko AND NOT bo" in the database and then re-generate 
> the Lucene query as needed.

> For example, if you wanted to add an "author" field that was searched 
> by default, then all of the queries in your database would be 
> invalid.  Also, more to the point, if Query.toString() changes, the 
> semantics of your queries might change, or if the QueryParser changes 
> they might even become unparsable.

You are right ...  The problem is that the generated String is used in 
extended search functionality, which is quite often improved. Storing
the  "test ko AND NOT bo" string is not enough to regenerate the query, 
because all the other components of the query depend on user data.
Yes, it is better to store 2 Strings  in the database "test ko AND NOT 
bo" and  "+creator:2 +classType:package.share.om.knowledgeobject 
+skillLevel:0 +(keywords:1000 keywords:1020)"
in the database, and then I'll be able to reconstrunct the query at runtime.

I chose to Store the query.toString() because the parsing of this string 
required to write just one line of code  and it was working perfectly 
(one line of code means also less maintainance effort).

I'm not a very experenced software developer (I'm still young :)) ), but 
I've already  meet some sitautions when I needed to make reversible some 
transformations to be reversible
(I mean something like Query => String => Query, with the constraint 
initial query equals final query).

Ok ... I give up ... if  this feature is to hard to be implemented, the 
soltution will be to work around in my source code to make it work.


>
> The general rule is that the QueryParser should only be used to 
> directly parse user input.  Programs should not generate strings to 
> pass to QueryParser.  Query.toString() is a program-generated string.  
> If you must save a query, save the user's input.

You are right, but I already explained why it was much more easy to 
store the generated query String.
And .. there are also some other things to consider. What I explained 
here is the implementation of the "Saved Search" concept .
The search must return the documents that were found first time + new 
added documents, even if the structure of the index is changed....

This is my problem, not lucene's, I just wanted to show you how useful 
is for me the fact that the Query => String transformation is reversible.
Of course there are alternativa solutions all the time.

 Best,

 Sergiu

>
> Doug
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 12:38:08 2005
Return-Path: <java-user-return-13600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2628 invoked from network); 9 Mar 2005 12:38:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 12:38:08 -0000
Received: (qmail 19391 invoked by uid 500); 9 Mar 2005 12:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19252 invoked by uid 500); 9 Mar 2005 12:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19234 invoked by uid 99); 9 Mar 2005 12:38:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 04:38:03 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 9 Mar 2005 13:38:01 +0100
Message-ID: <422EEE28.2020509@ifit.uni-klu.ac.at>
Date: Wed, 09 Mar 2005 13:38:00 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <16941.29325.935944.415129@tanto-xipolis.de> <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com> <16941.45901.672724.728010@tanto-xipolis.de> <Pine.LNX.4.58.0503081405430.21891@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0503081405430.21891@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Mar 2005 12:38:01.0060 (UTC) FILETIME=[D4A2C240:01C524A4]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Hostetter wrote:

>Earlier in this thread...
>
>: >>> +a -> a
>: >>
>: >> Hmmm.... this is a debatable one.  It's returning a TermQuery in this
>: >> case for "a".  Is that appropriate?  Or should it return a
>: >> BooleanQuery
>: >> with a single TermQuery as required?
>
>: > Ok.
>: > The question how to handle BooleanQueries, that contain prohibited
>: > terms
>: > only, is a question on it's own.
>: > In my fix I choose to silently drop these queries. Basically because
>: > it's
>: > effectivly dropped during querying anyway.
>
>...I would argue that the most correct behavior would be for QP to
>generate a Boolean query indicating the required/expluded term -- even if
>a Searcher can't run that query as is.  It's not the QueryParsers job to
>know what Query object structures make sense or not, just to know what the
>sanest possible maping from text to query object tree is.
>
>i can think of some very valid use cases where a client would build a
>complex Query out of some progromaticly generated Query objects, and the
>Query returned by the QP -- those clients aren't going to be happy if QP
>is returning an exception because the Query it's generating doesn't look
>"valid"
>  
>
I makes sense, but I think that invalid queries should trow an 
exception, at least at search time.

>: That's ok then. Throw a ParseException and whoever doesn't like that,
>: can overwrite the method and either keep the query (knowing that it will
>: be ignored in search anyway) or drop it.
>
>if that's the route people want to go, then i'd like to instead advocate
>that the default behavior for this situation be no error.
>  
>
silently drop clauses I consider to be the worst solution ... because 
the user will be confused... it will be hard to discover
why the search is not working how it espects to. An alternative will be 
to use Log4J to log these warnings....

 

>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 12:41:07 2005
Return-Path: <java-user-return-13601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4312 invoked from network); 9 Mar 2005 12:41:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 12:41:07 -0000
Received: (qmail 23639 invoked by uid 500); 9 Mar 2005 12:41:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23620 invoked by uid 500); 9 Mar 2005 12:41:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23607 invoked by uid 99); 9 Mar 2005 12:41:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 04:41:01 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 9 Mar 2005 13:40:58 +0100
Message-ID: <422EEEDA.6050405@ifit.uni-klu.ac.at>
Date: Wed, 09 Mar 2005 13:40:58 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser refactoring
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <16941.29325.935944.415129@tanto-xipolis.de> <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com> <16941.45901.672724.728010@tanto-xipolis.de> <Pine.LNX.4.58.0503081405430.21891@hal.rescomp.berkeley.edu> <a8f4adcecee389f597ab08499fb79c80@ehatchersolutions.com>
In-Reply-To: <a8f4adcecee389f597ab08499fb79c80@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 09 Mar 2005 12:40:58.0816 (UTC) FILETIME=[3E962C00:01C524A5]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> On Mar 8, 2005, at 5:17 PM, Chris Hostetter wrote:
>
>>
>> Earlier in this thread...
>>
>> : >>> +a -> a
>> : >>
>> : >> Hmmm.... this is a debatable one.  It's returning a TermQuery in 
>> this
>> : >> case for "a".  Is that appropriate?  Or should it return a
>> : >> BooleanQuery
>> : >> with a single TermQuery as required?
>>
>> : > Ok.
>> : > The question how to handle BooleanQueries, that contain prohibited
>> : > terms
>> : > only, is a question on it's own.
>> : > In my fix I choose to silently drop these queries. Basically because
>> : > it's
>> : > effectivly dropped during querying anyway.
>>
>> ...I would argue that the most correct behavior would be for QP to
>> generate a Boolean query indicating the required/expluded term -- 
>> even if
>> a Searcher can't run that query as is.  It's not the QueryParsers job to
>> know what Query object structures make sense or not, just to know 
>> what the
>> sanest possible maping from text to query object tree is.
>
>
> That is a very reasonable mandate for QueryParser.  I agree.
>
> I have committed a round of changes to the PrecedenceQueryParser.  I'm 
> going to leave it alone for a while.  There are a couple of tests that 
> are failing because I adjusted them to be as desired but not yet 
> implemented.  Here are the short comings currently:
>
>     assertQueryEquals("a OR !b", null, "a (-b)");
>         junit.framework.AssertionFailedError: Query /a OR !b/ yielded 
> /a -b/, expecting /a (-b)/
>
>     query1 = parser.parse("A OR NOT B AND C");
>     query2 = parser.parse("A (-B +C)");
>     assertEquals(query1, query2);
>         junit.framework.AssertionFailedError: expected:<field:A 
> -(+field:B +field:C)> but was:<field:A (-field:B +field:C)>
>
> I believe these are similar, if not identical, to what QueryParser 
> does with queries, so we're no worse off and we now have operator 
> precedence with AND/OR.  I feel the NOT/-/! precedence issue needs to 
> be addressed before this is a viable replacement.  If any JavaCC savvy 
> folks are interested in lending a handy to fix this remaining issue 
> I'd be ecstatic!  I tried some things but thus far unsuccessful.
>
> What else is missing/broken?

Unfortunately I don't have a lucene project on my computer as this 
moment and I cannot check myself,
do the tests for MultiFieldQueryParser also pass?

Best,

 Sergiu

>
>     Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 12:43:12 2005
Return-Path: <java-user-return-13602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5110 invoked from network); 9 Mar 2005 12:43:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 12:43:12 -0000
Received: (qmail 26480 invoked by uid 500); 9 Mar 2005 12:43:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26457 invoked by uid 500); 9 Mar 2005 12:43:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26444 invoked by uid 99); 9 Mar 2005 12:43:07 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 09 Mar 2005 04:43:05 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ID34VI00.D22 for <java-user@lucene.apache.org>; Wed, 9
          Mar 2005 18:17:42 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: SPAN QUERY [HOW TO]
Date: Wed, 9 Mar 2005 18:07:09 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKAEGNCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <1110360734.8124.103.camel@localhost>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys

Apologies....

Some body Please Help me for this Form


with regards
Karthik


-----Original Message-----
From: Miles Barr [mailto:miles@runtime-collective.com]
Sent: Wednesday, March 09, 2005 3:02 PM
To: java-user@lucene.apache.org
Subject: Re: SPAN QUERY [HOW TO]


On Wed, 2005-03-09 at 14:52 +0530, Karthik N S wrote:
> The new Feature of lucene 'span query' really is interesting
> 
> But need expert suggestions on achieveing the same.
> 
> I have 3 documents 
> 
> Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA 
> Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
> Document 3 contains  =   ELECTRONICS  DIGITAL CAMERA ACCESSIORIES
> 
>  
> 
> search word = " DIGITAL CAMERA "
> 
> Returned hits  = 1st doc   ONLY [ 2 and 3rd document should not be in
> the hit ]
> 
> SpanQuery /PharseQuery  ????
> 
>  
> 
> How would one achieve this ??? Please

I've used span queries to boost the scores of results where words appear
close together. I'm not sure exactly what you're trying to achieve. All
three documents contain the search phrase, so both span and phrase
queries would return all the documents.

Are you trying to setup a taxonomy? i.e. only display documents in the
category Electronics > Digital Camera, and not those in sub categories?
If this is the case you should try to build the categorisation at the
same time as the indexing process and either add explicit clauses in the
search query or filter afterwards.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 13:40:00 2005
Return-Path: <java-user-return-13603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37836 invoked from network); 9 Mar 2005 13:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 13:39:59 -0000
Received: (qmail 8909 invoked by uid 500); 9 Mar 2005 13:39:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8697 invoked by uid 500); 9 Mar 2005 13:39:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8680 invoked by uid 99); 9 Mar 2005 13:39:55 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 05:39:53 -0800
Received: from [81.168.89.246] (helo=[192.168.1.4])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1D91PW-00073y-00; Wed, 09 Mar 2005 13:39:38 +0000
Subject: RE: SPAN QUERY [HOW TO]
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <OBELINLGKPEMCIEIJJNKAEGNCCAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKAEGNCCAA.karthik@controlnet.co.in>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Wed, 09 Mar 2005 13:39:41 +0000
Message-Id: <1110375581.8124.137.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It's not clear what you're trying to achieve. PhraseQuery and
SpanNearQuery can help you find tokens that are close to each other. It
you're using the standard analyzer, tokens are words. They won't help
you group documents under a topic. 

You should setup some other fields in your Lucene document to hold
category information. e.g. for document 1:

text = ELECTRONICS  DIGITAL CAMERA
parent_category = ELECTRONICS
leaf_category = DIGITAL CAMERA

for document 2:

text = ELECTRONICS  DIGITAL CAMERA OPTICS
parent_category = ELECTRONICS
parent_category = DIGITAL CAMERA
leaf_category = OPTICS

Then search on the leaf_category. Make sure you setup the category
fields to be type KEYWORD, i.e. not tokenized.



On Wed, 2005-03-09 at 18:07 +0530, Karthik N S wrote:
> Hi Guys
> 
> Apologies....
> 
> Some body Please Help me for this Form
> 
> 
> with regards
> Karthik
> 
> 
> -----Original Message-----
> From: Miles Barr [mailto:miles@runtime-collective.com]
> Sent: Wednesday, March 09, 2005 3:02 PM
> To: java-user@lucene.apache.org
> Subject: Re: SPAN QUERY [HOW TO]
> 
> 
> On Wed, 2005-03-09 at 14:52 +0530, Karthik N S wrote:
> > The new Feature of lucene 'span query' really is interesting
> > 
> > But need expert suggestions on achieveing the same.
> > 
> > I have 3 documents 
> > 
> > Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA 
> > Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
> > Document 3 contains  =   ELECTRONICS  DIGITAL CAMERA ACCESSIORIES
> > 
> >  
> > 
> > search word = " DIGITAL CAMERA "
> > 
> > Returned hits  = 1st doc   ONLY [ 2 and 3rd document should not be in
> > the hit ]
> > 
> > SpanQuery /PharseQuery  ????
> > 
> >  
> > 
> > How would one achieve this ??? Please
> 
> I've used span queries to boost the scores of results where words appear
> close together. I'm not sure exactly what you're trying to achieve. All
> three documents contain the search phrase, so both span and phrase
> queries would return all the documents.
> 
> Are you trying to setup a taxonomy? i.e. only display documents in the
> category Electronics > Digital Camera, and not those in sub categories?
> If this is the case you should try to build the categorisation at the
> same time as the indexing process and either add explicit clauses in the
> search query or filter afterwards.
> 
> 
> 
-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 14:17:23 2005
Return-Path: <java-user-return-13604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66715 invoked from network); 9 Mar 2005 14:17:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 14:17:23 -0000
Received: (qmail 71930 invoked by uid 500); 9 Mar 2005 14:17:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71909 invoked by uid 500); 9 Mar 2005 14:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71895 invoked by uid 99); 9 Mar 2005 14:17:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 06:17:16 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2B28013E2007; Wed,  9 Mar 2005 09:17:11 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id B313013E200A
	for <java-user@lucene.apache.org>; Wed,  9 Mar 2005 09:16:51 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <422EEB33.8090809@ifit.uni-klu.ac.at>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <422D6C28.6070705@ifit.uni-klu.ac.at> <2560924319c84bba6d75f6e246792f40@ehatchersolutions.com> <422DAEA2.4080200@ifit.uni-klu.ac.at> <422DDED7.1070909@apache.org> <422EEB33.8090809@ifit.uni-klu.ac.at>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <76f66b60015608cb675cc6567f7a0d45@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Wed, 9 Mar 2005 09:16:42 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 9, 2005, at 7:25 AM, sergiu gordea wrote:
> transformations to be reversible
> (I mean something like Query => String => Query, with the constraint 
> initial query equals final query).
>
> Ok ... I give up ... if  this feature is to hard to be implemented, 
> the soltution will be to work around in my source code to make it 
> work.

It's not just hard, its impossible in the generalizable sense.  An 
analyzer is involved in parsing a query and could easily 
remove/change/add to the query.  I suspect there are probably issues 
with escaped characters as well.  For many cases with a straightforward 
analyzer and queries that use alphabetic terms then it'll probably work 
fine as you've seen, but relying on Query.toString is risky.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 14:18:59 2005
Return-Path: <java-user-return-13605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69545 invoked from network); 9 Mar 2005 14:18:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 14:18:58 -0000
Received: (qmail 75910 invoked by uid 500); 9 Mar 2005 14:18:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75884 invoked by uid 500); 9 Mar 2005 14:18:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75871 invoked by uid 99); 9 Mar 2005 14:18:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 06:18:52 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DDF1613E2007; Wed,  9 Mar 2005 09:18:50 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 6D1A513E2007
	for <java-user@lucene.apache.org>; Wed,  9 Mar 2005 09:18:41 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <422EEEDA.6050405@ifit.uni-klu.ac.at>
References: <fd474053427e5310df6049051d0746b4@ehatchersolutions.com> <16940.47718.444427.724315@onlinehome.de> <9ee8730d005921ac5d712bef8d2af0b1@ehatchersolutions.com> <16941.21568.532376.650196@tanto-xipolis.de> <76660b51560499b1f343a32fd7d99adc@ehatchersolutions.com> <16941.29325.935944.415129@tanto-xipolis.de> <6a2448ceb8e385ad4505470dd6037290@ehatchersolutions.com> <16941.45901.672724.728010@tanto-xipolis.de> <Pine.LNX.4.58.0503081405430.21891@hal.rescomp.berkeley.edu> <a8f4adcecee389f597ab08499fb79c80@ehatchersolutions.com> <422EEEDA.6050405@ifit.uni-klu.ac.at>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7dbb7d0e53e6bad325773190d13228cb@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser refactoring
Date: Wed, 9 Mar 2005 09:18:37 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 9, 2005, at 7:40 AM, sergiu gordea wrote:
> Unfortunately I don't have a lucene project on my computer as this 
> moment and I cannot check myself,
> do the tests for MultiFieldQueryParser also pass?

I haven't tried it, though I'm sure it'd be fine since it relies on 
QueryParser.  Since I have not touched the original QueryParser yet, it 
would require modifying the MultiFieldQueryParser code to use 
PrecedenceQueryParser instead.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 15:09:21 2005
Return-Path: <java-user-return-13606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11435 invoked from network); 9 Mar 2005 15:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 15:09:21 -0000
Received: (qmail 79212 invoked by uid 500); 9 Mar 2005 15:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79194 invoked by uid 500); 9 Mar 2005 15:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79181 invoked by uid 99); 9 Mar 2005 15:09:15 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jmuguruza@gmail.com designates 64.233.184.196 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 07:09:14 -0800
Received: by wproxy.gmail.com with SMTP id 36so247833wra
        for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 07:09:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=VaQFp4pziGKsAz3OOeECCY8pdkOotA2167MfHDR6SUDdvYWXtcGsdHH4DQ2rPswkvHqz84nCtg7aq2veHbqo9c41Wrm2pgYxKukXk4553fwlJrQ2J86oLeN85Mw3OIHTaScZ5oMMe3+EVWHHlr/b9tHM1WUPQZAyhwFislpJWXw=
Received: by 10.54.4.8 with SMTP id 8mr858666wrd;
        Wed, 09 Mar 2005 07:09:12 -0800 (PST)
Received: by 10.54.39.18 with HTTP; Wed, 9 Mar 2005 07:09:12 -0800 (PST)
Message-ID: <f071061b05030907096c12c651@mail.gmail.com>
Date: Wed, 9 Mar 2005 16:09:12 +0100
From: javier muguruza <jmuguruza@gmail.com>
Reply-To: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: identifier field as keyword or unindexed
In-Reply-To: <f071061b0503070949584fcf82@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b0503070949584fcf82@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

(I sent this to the old list, I dont know wether it reached the
list...just in case I repost it)

Hi all,

We index our documents in the following way:

        doc = new Document();
        // mailid
        doc.add(Field.UnIndexed("mid",mid));
        //body
        doc.add(Field.UnStored("body", textb));

mid is a unique identifier, and body contains long pieces of text to be indexed.

And later make searches on the body field, the mid allows us to find a
file on the filesystem with a compressed (and digitally signed)
version of the original body indexed.
Our way to work in a query in our app is this:
1. first we make a search in a db (for many different reasons) that
returns a number (from 0 to thousands) of mid
2. we use lucene to search for some text in many indexes, this returns
a second list of mid
3. we return the result as the intersection of both lists.

This is working fine right now, but wonder wether we are not using
lucene to the fullest, cause we could also store mid as a keyword
(instead of unindexed), and add the condition (AND mid==[any mid from
our step 1]) to the lucene query we run. My questions are:

1. Is there a limit in the number of conditions I can add to a query??
Sometimes we have 10 mids, other times we have thousands of them so we
would have to add: AND (mid:mid1 OR mid:mid2 ... OR mid:mid10000).
Probably there is a limit, and we could only apply the mid conditions
when the number or mids returned by step 1 is smaller than that limit?
2. As the mid is a unique identifier (I guest lucene does not care
about that right?), and the condition on the mid woudl be ANDed to the
text query conditions, will it be faster for lucene to look first in
the mid field and dont do the text lookup if the mid condition is not
fullfilled? I dont know wether I am clear enough...Will I get some
benefit on the queries by adding some additional conditions or the
cost of adding another field to index will not pay off? Maybe it
depends on the number of documents? Maybe it would be best to set mid
as a keyword just in case, and add it as conditions later if the
searches take too long?

thanks for any though on that

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 16:36:57 2005
Return-Path: <java-user-return-13607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24627 invoked from network); 9 Mar 2005 16:36:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 16:36:57 -0000
Received: (qmail 19920 invoked by uid 500); 9 Mar 2005 16:36:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19874 invoked by uid 500); 9 Mar 2005 16:36:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19858 invoked by uid 500); 9 Mar 2005 16:36:51 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 19853 invoked by uid 99); 9 Mar 2005 16:36:51 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.194 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 08:36:49 -0800
Received: by rproxy.gmail.com with SMTP id a41so244608rng
        for <lucene-user@jakarta.apache.org>; Wed, 09 Mar 2005 08:36:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=ZDupzSqGwalTDLHnySeODSUP3EeM+YHmB8ptryOUcXY0c2zzYg+o65wZHZO6w9ZjxlPOAFi3kIWmWacsekGP/1EY3Y35o+79vCXIDLwZxbon5e0HtvLj/haR02VfWGaPQu13ZY1w7mPFeJqH7sGA49Zn0J+zOlWSRfMyFGc0udI=
Received: by 10.38.81.43 with SMTP id e43mr915323rnb;
        Wed, 09 Mar 2005 08:36:47 -0800 (PST)
Received: by 10.38.12.53 with HTTP; Wed, 9 Mar 2005 08:36:47 -0800 (PST)
Message-ID: <c68e39170503090836559d334@mail.gmail.com>
Date: Wed, 9 Mar 2005 11:36:47 -0500
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
In-Reply-To: <42254963.6000901@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <1109713160.18862.109.camel@localhost>
	 <c68e391705030119457d39b3d8@mail.gmail.com>
	 <42254963.6000901@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This strategy looks very promising.

One drawback is that documents must be added directly to the main
index for this to be efficient.  This is a bit of a problem if there
is a document uniqueness requirement (a unique id field).

If one takes the approach of adding docs to a  separate lucene index
that is later merged with the main index, enforcing uniqueness is
easier since I can just delete all the duplicate docs before I call
addIndexes().

Enforcing uniqueness while adding docs directly to the main index
can't easily be done, mainly because we can't have both an open
IndexReader with deletions and an open IndexWriter at the same time.

The best workaround I can currently think of is to tag each document
with a version number for that set of updates.  Then, after the
IndexWriter is closed, go through and delete all of the ids of the
added docs that have older version numbers.

Anyone have an easier or faster strategy for ensuring uniqueness?

-Yonik

On Tue, 01 Mar 2005 21:04:35 -0800, Doug Cutting <cutting@apache.org> wrote:
> Yonik Seeley wrote:
> >>6. Index locally and synchronize changes periodically. This is an
> >>interesting idea and bears looking into. Lucene can combine multiple
> >>indexes into a single one, which can be written out somewhere else, and
> >>then distributed back to the search nodes to replace their existing
> >>index.
> >
> > This is a promising idea for handling a high update volume because it
> > avoids all of the search nodes having to do the analysis phase.
> 
> A clever way to do this is to take advantage of Lucene's index file
> structure.  Indexes are directories of files.  As the index changes
> through additions and deletions most files in the index stay the same.
> So you can efficiently synchronize multiple copies of an index by only
> copying the files that change.
> 
> The way I did this for Technorati was to:
> 
> 1. On the index master, periodically checkpoint the index.  Every minute
> or so the IndexWriter is closed and a 'cp -lr index index.DATE' command
> is executed from Java, where DATE is the current date and time.  This
> efficiently makes a copy of the index when its in a consistent state by
> constructing a tree of hard links.  If Lucene re-writes any files (e.g.,
> the segments file) a new inode is created and the copy is unchanged.
> 
> 2. From a crontab on each search slave, periodically poll for new
> checkpoints.  When a new index.DATE is found, use 'cp -lr index
> index.DATE' to prepare a copy, then use 'rsync -W --delete
> master:index.DATE index.DATE' to get the incremental index changes.
> Then atomically install the updated index with a symbolic link (ln -fsn
> index.DATE index).
> 
> 3. In Java on the slave, re-open 'index' it when its version changes.
> This is best done in a separate thread that periodically checks the
> index version.  When it changes, the new version is opened, a few
> typical queries are performed on it to pre-load Lucene's caches.  Then,
> in a synchronized block, the Searcher variable used in production is
> updated.
> 
> 4. In a crontab on the master, periodically remove the oldest checkpoint
> indexes.
> 
> Technorati's Lucene index is updated this way every minute.  A
> mergeFactor of 2 is used on the master in order to minimize the number
> of segments in production.  The master has a hot spare.
> 
> Doug
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 17:29:18 2005
Return-Path: <java-user-return-13608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56542 invoked from network); 9 Mar 2005 17:29:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 17:29:18 -0000
Received: (qmail 44677 invoked by uid 500); 9 Mar 2005 17:29:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44651 invoked by uid 500); 9 Mar 2005 17:29:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44638 invoked by uid 500); 9 Mar 2005 17:29:14 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 44635 invoked by uid 99); 9 Mar 2005 17:29:14 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.170.205 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 09:29:14 -0800
Received: by rproxy.gmail.com with SMTP id 34so237167rns
        for <lucene-user@jakarta.apache.org>; Wed, 09 Mar 2005 09:29:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=Iew9wKkonSp3TyQ2f6DaTk6YXCZ7Z0+8kzzSYh3fRQHX8FxvzcNF0nbMW2rsFRLna+Z5QACRJ+JiLlDbP/kJMW324zj2TRdFXBRGmWOBxXYojaMyhtHUhyTABS7Fa5LhLddBFrAULW4nWXlOYIZXi4FV81PR/2VpBDNqlz7E3Yo=
Received: by 10.38.179.2 with SMTP id b2mr492987rnf;
        Wed, 09 Mar 2005 09:29:12 -0800 (PST)
Received: by 10.38.8.67 with HTTP; Wed, 9 Mar 2005 09:29:12 -0800 (PST)
Message-ID: <7b870341050309092912f99572@mail.gmail.com>
Date: Wed, 9 Mar 2005 18:29:12 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: lucene index with structured fields
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hy everybody,

I would like use a index with structured search field.

- flat index (lucene type)
searchfield1
searchfield2
searchffield3
...
-structured index 
search1
   search2
   	search4
   search3
	search5

to allow simple extensions of some search features: 
- the query TermQuery("search2", "coco" )  search in search2 and
search4 fields,
- The score depend of the depth where the word is found : A document
where "coco" is found in search4 field has a score lower than a
document with "coco" found in search2

How {do with,hack} lucene to integrated easily this notion of
structured field  ? (no fuzzy methods allow because of the
performance) ?

thanks in advance,

Nicolas Maisonneuve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 17:34:56 2005
Return-Path: <java-user-return-13609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59989 invoked from network); 9 Mar 2005 17:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 17:34:55 -0000
Received: (qmail 54499 invoked by uid 500); 9 Mar 2005 17:34:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54466 invoked by uid 500); 9 Mar 2005 17:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54452 invoked by uid 500); 9 Mar 2005 17:34:49 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 54447 invoked by uid 99); 9 Mar 2005 17:34:48 -0000
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=FORGED_MUA_IMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from hades.labone.com (HELO hades.labone.com) (198.70.194.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 09:34:47 -0800
Received: from smsrv.1.24.172.in-addr.arpa by hades.labone.com
          via smtpd (for hermes.apache.org [209.237.227.199]) with ESMTP; Wed, 9 Mar 2005 11:34:39 -0600
From: "Jerry Jalenak" <Jerry.Jalenak@LABONE.com>
To: "'lucene-user@jakarta.apache.org'" <lucene-user@jakarta.apache.org>
Subject: Unsubscribe?
Date: Wed, 9 Mar 2005 11:34:26 -0600
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
X-WSS-ID: 6E31EC2042261328-01-01
Content-Type: text/plain;
 charset=iso-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The e-mail address for unsubscribing from the list appears to not be
working.  Can someone check on it?

Jerry Jalenak
Senior Programmer / Analyst, Web Publishing
LabOne, Inc.
10101 Renner Blvd.
Lenexa, KS  66219
(913) 577-1496

jerry.jalenak@labone.com


This transmission (and any information attached to it) may be confidential and
is intended solely for the use of the individual or entity to which it is
addressed. If you are not the intended recipient or the person responsible for
delivering the transmission to the intended recipient, be advised that you
have received this transmission in error and that any use, dissemination,
forwarding, printing, or copying of this information is strictly prohibited.
If you have received this transmission in error, please immediately notify
LabOne at the following email address: securityincidentreporting@labone.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 17:53:49 2005
Return-Path: <java-user-return-13610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69608 invoked from network); 9 Mar 2005 17:53:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 17:53:48 -0000
Received: (qmail 94463 invoked by uid 500); 9 Mar 2005 17:53:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94442 invoked by uid 500); 9 Mar 2005 17:53:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94429 invoked by uid 500); 9 Mar 2005 17:53:44 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 94426 invoked by uid 99); 9 Mar 2005 17:53:44 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.170.194 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 09:53:43 -0800
Received: by rproxy.gmail.com with SMTP id 34so241205rns
        for <lucene-user@jakarta.apache.org>; Wed, 09 Mar 2005 09:53:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=HiRdzKWscKYh8U3lr+jqNVjOy3IVStFDIeIE9lpPjHJZfGuCDJEEwM/9rruVMJ2p9SPpITUrbzn8x0acp05rUF9bU2Kou5anvl8+X5SMxrxCs9gONpEZK4v037Slk35ZIqfmYSyuIpm1BVlkcQ+2x/+YBcSGfHyyA8Lw3sFN6NI=
Received: by 10.38.206.60 with SMTP id d60mr493677rng;
        Wed, 09 Mar 2005 09:53:41 -0800 (PST)
Received: by 10.38.8.67 with HTTP; Wed, 9 Mar 2005 09:53:41 -0800 (PST)
Message-ID: <7b870341050309095367fcc21d@mail.gmail.com>
Date: Wed, 9 Mar 2005 18:53:41 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: lucene index with structured fields
In-Reply-To: <7b870341050309092912f99572@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <7b870341050309092912f99572@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hmm a idea  would be to create dynamically a boost table  (field,
boostvalue) in a extended version of a TermQuery depending on the
field:
ex: StructuredTermQuery ("search2", "coco")

1-> Update a boost table according to:

*  the virtual structure :

> -structured index
> search1
>    search2
>         search4
>    search3
>         search5

*  the fact the score is decrease with the dept :

*  the search field argument, here "search2"

So for this exemple the table would be =  (search1_boost=0,
search2_boost=1, search3_boost=0, search4_boost=0.7)

2- According to the table , a new Query is created with just non zero
boost search field search2:coco^search1_boost 
search4:coco^search2_boost

WDYT ?

other proposals more flexible, clever, faster ? 

nicolas maisonneuve

On Wed, 9 Mar 2005 18:29:12 +0100, Nicolas Maisonneuve
<n.maisonneuve@gmail.com> wrote:
> hy everybody,
> 
> I would like use a index with structured search field.
> 
> - flat index (lucene type)
> searchfield1
> searchfield2
> searchffield3
> ...

> 
> to allow simple extensions of some search features:
> - the query TermQuery("search2", "coco" )  search in search2 and
> search4 fields,
> - The score depend of the depth where the word is found : A document
> where "coco" is found in search4 field has a score lower than a
> document with "coco" found in search2
> 
> How {do with,hack} lucene to integrated easily this notion of
> structured field  ? (no fuzzy methods allow because of the
> performance) ?
> 
> thanks in advance,
> 
> Nicolas Maisonneuve
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 17:55:40 2005
Return-Path: <java-user-return-13611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70467 invoked from network); 9 Mar 2005 17:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 17:55:40 -0000
Received: (qmail 97057 invoked by uid 500); 9 Mar 2005 17:55:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97026 invoked by uid 500); 9 Mar 2005 17:55:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97013 invoked by uid 500); 9 Mar 2005 17:55:35 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 97010 invoked by uid 99); 9 Mar 2005 17:55:35 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.170.206 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 09:55:35 -0800
Received: by rproxy.gmail.com with SMTP id 34so241567rns
        for <lucene-user@jakarta.apache.org>; Wed, 09 Mar 2005 09:55:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=FXTRtqr0YVkSwNSaQUQokN1E3sKY/+0mzGSwkxrrInXSDayyD3VvGgyXMLPrqfuON7SRdJeagjohXZ1Yq9VDIwOlRJOMkqVIETWgsI7CmbrN6KKhuNGxX0iawtSLwSwS0yG9DAPgTM/jPAB87Xy8kJxIqosOTaVzpD/Vi9vg90U=
Received: by 10.38.179.14 with SMTP id b14mr495493rnf;
        Wed, 09 Mar 2005 09:55:33 -0800 (PST)
Received: by 10.38.8.67 with HTTP; Wed, 9 Mar 2005 09:55:33 -0800 (PST)
Message-ID: <7b87034105030909554032a285@mail.gmail.com>
Date: Wed, 9 Mar 2005 18:55:33 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: lucene index with structured fields
In-Reply-To: <7b870341050309095367fcc21d@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <7b870341050309092912f99572@mail.gmail.com>
	 <7b870341050309095367fcc21d@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

oups .. 

2- According to the table , a new Query is created with just non zero
boost search field search2:coco^search2_boost
search4:coco^search4_boost


On Wed, 9 Mar 2005 18:53:41 +0100, Nicolas Maisonneuve
<n.maisonneuve@gmail.com> wrote:
> hmm a idea  would be to create dynamically a boost table  (field,
> boostvalue) in a extended version of a TermQuery depending on the
> field:
> ex: StructuredTermQuery ("search2", "coco")
> 
> 1-> Update a boost table according to:
> 
> *  the virtual structure :
> 
> > -structured index
> > search1
> >    search2
> >         search4
> >    search3
> >         search5
> 
> *  the fact the score is decrease with the dept :
> 
> *  the search field argument, here "search2"
> 
> So for this exemple the table would be =  (search1_boost=0,
> search2_boost=1, search3_boost=0, search4_boost=0.7)
> 
> 2- According to the table , a new Query is created with just non zero
> boost search field search2:coco^search1_boost
> search4:coco^search2_boost
> 
> WDYT ?
> 
> other proposals more flexible, clever, faster ?
> 
> nicolas maisonneuve
> 
> On Wed, 9 Mar 2005 18:29:12 +0100, Nicolas Maisonneuve
> <n.maisonneuve@gmail.com> wrote:
> > hy everybody,
> >
> > I would like use a index with structured search field.
> >
> > - flat index (lucene type)
> > searchfield1
> > searchfield2
> > searchffield3
> > ...
> 
> >
> > to allow simple extensions of some search features:
> > - the query TermQuery("search2", "coco" )  search in search2 and
> > search4 fields,
> > - The score depend of the depth where the word is found : A document
> > where "coco" is found in search4 field has a score lower than a
> > document with "coco" found in search2
> >
> > How {do with,hack} lucene to integrated easily this notion of
> > structured field  ? (no fuzzy methods allow because of the
> > performance) ?
> >
> > thanks in advance,
> >
> > Nicolas Maisonneuve
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 18:00:32 2005
Return-Path: <java-user-return-13612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73423 invoked from network); 9 Mar 2005 18:00:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 18:00:32 -0000
Received: (qmail 7581 invoked by uid 500); 9 Mar 2005 18:00:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7551 invoked by uid 500); 9 Mar 2005 18:00:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7537 invoked by uid 500); 9 Mar 2005 18:00:26 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 7533 invoked by uid 99); 9 Mar 2005 18:00:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 10:00:25 -0800
Received: from [81.168.89.246] (helo=[192.168.1.4])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1D95Tj-00054o-00
	for <lucene-user@jakarta.apache.org>; Wed, 09 Mar 2005 18:00:15 +0000
Subject: Re: lucene index with structured fields
From: Miles Barr <miles@runtime-collective.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <7b870341050309092912f99572@mail.gmail.com>
References: <7b870341050309092912f99572@mail.gmail.com>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Wed, 09 Mar 2005 18:00:21 +0000
Message-Id: <1110391221.8124.146.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 2005-03-09 at 18:29 +0100, Nicolas Maisonneuve wrote:
> I would like use a index with structured search field.
> 
> - flat index (lucene type)
> searchfield1
> searchfield2
> searchffield3
> ...
> -structured index 
> search1
>    search2
>    	search4
>    search3
> 	search5
> 
> to allow simple extensions of some search features: 
> - the query TermQuery("search2", "coco" )  search in search2 and
> search4 fields,
> - The score depend of the depth where the word is found : A document
> where "coco" is found in search4 field has a score lower than a
> document with "coco" found in search2
> 
> How {do with,hack} lucene to integrated easily this notion of
> structured field  ? (no fuzzy methods allow because of the
> performance) ?

If you know the structure of the index ahead of time and the weights you
want to place on the different levels I'd do a query expansion. i.e.

search2:coco

would become

search2:coco^4 OR search4:coco

but actually creating the query objects rather than generating the
string to be parsed by the QueryParser.


-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 18:09:04 2005
Return-Path: <java-user-return-13613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78061 invoked from network); 9 Mar 2005 18:09:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 18:09:03 -0000
Received: (qmail 24575 invoked by uid 500); 9 Mar 2005 18:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24545 invoked by uid 500); 9 Mar 2005 18:08:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24532 invoked by uid 99); 9 Mar 2005 18:08:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from pollock.hmdnsgroup.com (HELO pollock.hmdnsgroup.com) (63.247.129.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 10:08:56 -0800
Received: from m5c6736d0.tmodns.net ([208.54.103.92])
	by pollock.hmdnsgroup.com with esmtpa (Exim 4.44)
	id 1D95by-000470-3l
	for java-user@lucene.apache.org; Wed, 09 Mar 2005 13:08:51 -0500
Message-ID: <422F3BA4.4050006@alltc.com>
Date: Wed, 09 Mar 2005 13:08:36 -0500
From: Barry Hawkins <barry@alltc.com>
Organization: All Things Computed
User-Agent: Debian Thunderbird 1.0 (X11/20050117)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Java User <java-user@lucene.apache.org>
Subject: Exception when attempting to access January 2005 archive
X-Enigmail-Version: 0.90.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-HMDNSGroup-MailScanner-Information: Please contact the ISP for more information
X-HMDNSGroup-MailScanner: Found to be clean
X-MailScanner-From: barry@alltc.com
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - pollock.hmdnsgroup.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - alltc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

List,
~    I receive a stack trace indicating a Velocity template processing
error when trying to access the Janary 2005 archive[0] for this list.
The stack trace is appended to the end of this message.
~    I am trying to access the original announcement of the move to
Subversion so I can perform an anonymous checkout of the codebase.  If
anyone has succeeded in that, I would appreciate any tips.  My current
attempt which fails is as follows:

$ svn co svn://svn.apache.org/repos/asf/lucene/java/trunk lucene
svn: Can't connect to host 'svn.apache.org': Connection refused


[0] -
http://mail-archives.apache.org/eyebrowse/BrowseList?listName=lucene-user@jakarta.apache.org&by=date&from=2005-01-01&to=2005-01-31&first=1&count=622

VelocityServlet: Error processing the template

null: Got error 127 from table handler
org.apache.velocity.exception.VelocityException: null: Got error 127
from table handler
	at org.tigris.eyebrowse.servlets.EyebrowseServlet.handleRequest(Unknown
Source)
	at
org.apache.velocity.servlet.VelocityServlet.doRequest(VelocityServlet.java:396)
	at org.tigris.eyebrowse.servlets.EyebrowseServlet.doRequest(Unknown Source)
	at
org.apache.velocity.servlet.VelocityServlet.doGet(VelocityServlet.java:355)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:740)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)
	at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2416)
	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:223)
	at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:601)
	at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:392)
	at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:565)
	at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:619)
	at java.lang.Thread.run(Thread.java:534)


Regards,
- --
Barry Hawkins
All Things Computed
site: www.alltc.com
weblog: www.yepthatsme.com

Registered Linux User #368650
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.0 (GNU/Linux)

iD8DBQFCLzuk7bZ6kUftWZwRAvsbAKDaTCtKVnzugnwYp9B4eBcCjOjXpACg2Kdj
/eAavxbBDQT8RJ1cxIHSeQ8=
=uQ0g
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 18:21:02 2005
Return-Path: <java-user-return-13614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85468 invoked from network); 9 Mar 2005 18:21:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 18:21:02 -0000
Received: (qmail 47595 invoked by uid 500); 9 Mar 2005 18:20:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47401 invoked by uid 500); 9 Mar 2005 18:20:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47387 invoked by uid 99); 9 Mar 2005 18:20:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 10:20:54 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20050309182050015004153ue>; Wed, 9 Mar 2005 18:20:50 +0000
Message-ID: <422F3E82.2040109@apache.org>
Date: Wed, 09 Mar 2005 10:20:50 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Find version of Lucene library
References: <05Mar8.193107pst.58617@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org> <efff3eed7e615adb201f1c400642b038@gmail.com> <422ED048.508@getopt.org>
In-Reply-To: <422ED048.508@getopt.org>
Content-Type: multipart/mixed;
 boundary="------------030204070201070702000407"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------030204070201070702000407
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Andrzej Bialecki wrote:
>> Hmmm... would not java.lang.Package various methods do the job?
> 
> 
> I'm not sure... I just tried to do 
> Package.getPackage("org.apache.lucene") and got null, even though the 
> manifest is present in the JAR.

I looked into this.  The package name in the manifest is 
"org/apache/lucene".  But in order for this to work the package name in 
the manifest must: (a) end with a slash; and (b) name a package with 
classes in it, and lucene's classes are all in sub-packages--no classes 
are in "org.apache.lucene".

I've attached a patch that fixes (b) by adding a class in the top-level 
package.  Comments?

Doug

--------------030204070201070702000407
Content-Type: text/x-patch;
 name="package.patch"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="package.patch"

Index: build.xml
===================================================================
--- build.xml	(revision 156658)
+++ build.xml	(working copy)
@@ -189,7 +189,7 @@
       excludes="**/*.java">
       <manifest>
         <attribute name="Created-By" value="Apache Jakarta"/>
-        <section name="org/apache/lucene">
+        <section name="org/apache/lucene/">
           <attribute name="Specification-Title" value="Lucene Search Engine"/>
           <attribute name="Specification-Version" value="${version}"/>
           <attribute name="Specification-Vendor" value="Lucene"/>
Index: src/java/org/apache/lucene/package.html
===================================================================
--- src/java/org/apache/lucene/package.html	(revision 0)
+++ src/java/org/apache/lucene/package.html	(revision 0)
@@ -0,0 +1 @@
+<html><body>Top-level package.</body></html>
Index: src/java/org/apache/lucene/LucenePackage.java
===================================================================
--- src/java/org/apache/lucene/LucenePackage.java	(revision 0)
+++ src/java/org/apache/lucene/LucenePackage.java	(revision 0)
@@ -0,0 +1,28 @@
+package org.apache.lucene;
+
+/**
+ * Copyright 2005 The Apache Software Foundation
+ *
+ * Licensed under the Apache License, Version 2.0 (the "License");
+ * you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+/** Lucene's package information, including version. **/
+public final class LucenePackage {
+
+  private LucenePackage() {}                      // can't construct
+
+  /** Return Lucene's package, including version information. */
+  public static Package get() {
+    return LucenePackage.class.getPackage();
+  }
+}


--------------030204070201070702000407
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------030204070201070702000407--

From java-user-return-13615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 18:23:29 2005
Return-Path: <java-user-return-13615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87217 invoked from network); 9 Mar 2005 18:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 18:23:29 -0000
Received: (qmail 52322 invoked by uid 500); 9 Mar 2005 18:23:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52301 invoked by uid 500); 9 Mar 2005 18:23:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52288 invoked by uid 99); 9 Mar 2005 18:23:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from pollock.hmdnsgroup.com (HELO pollock.hmdnsgroup.com) (63.247.129.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 10:23:23 -0800
Received: from m5c6736d0.tmodns.net ([208.54.103.92])
	by pollock.hmdnsgroup.com with esmtpa (Exim 4.44)
	id 1D95q3-0005Lc-1O
	for java-user@lucene.apache.org; Wed, 09 Mar 2005 13:23:22 -0500
Message-ID: <422F3F00.4040504@alltc.com>
Date: Wed, 09 Mar 2005 13:22:56 -0500
From: Barry Hawkins <barry@alltc.com>
Organization: All Things Computed
User-Agent: Debian Thunderbird 1.0 (X11/20050117)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Exception when attempting to access January 2005 archive
References: <422F3BA4.4050006@alltc.com>
In-Reply-To: <422F3BA4.4050006@alltc.com>
X-Enigmail-Version: 0.90.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-HMDNSGroup-MailScanner-Information: Please contact the ISP for more information
X-HMDNSGroup-MailScanner: Found to be clean
X-MailScanner-From: barry@alltc.com
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - pollock.hmdnsgroup.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - alltc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Barry Hawkins wrote:
[...]
| ~    I am trying to access the original announcement of the move to
| Subversion so I can perform an anonymous checkout of the codebase.  If
| anyone has succeeded in that, I would appreciate any tips.  My current
| attempt which fails is as follows:
|
| $ svn co svn://svn.apache.org/repos/asf/lucene/java/trunk lucene
| svn: Can't connect to host 'svn.apache.org': Connection refused
[...]
Thanks to GMane[0], I was able to find the correct url for an anonymous
svn checkout of the java lucene codebase:
$ svn co http://svn.apache.org/repos/asf/lucene/java/trunk
A  trunk/contrib
A  trunk/contrib/snowball
A  trunk/contrib/snowball/xdocs
A  trunk/contrib/snowball/xdocs/index.xml
A  trunk/contrib/snowball/xdocs/stylesheets
A  trunk/contrib/snowball/xdocs/stylesheets/project.xml
[...]

[0] -
http://article.gmane.org/gmane.comp.jakarta.lucene.user/11800/match=subversion+lucene

Regards,
- --
Barry Hawkins
All Things Computed
site: www.alltc.com
weblog: www.yepthatsme.com

Registered Linux User #368650
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.0 (GNU/Linux)

iD8DBQFCLz8A7bZ6kUftWZwRAlcqAJ4/CC5SA8TwSmDb5Axwg49WPIysoQCgvOe9
n/XHJKe/NiPSTDuKFrIr7ZA=
=Tna3
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 18:36:48 2005
Return-Path: <java-user-return-13616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95355 invoked from network); 9 Mar 2005 18:36:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 18:36:47 -0000
Received: (qmail 77551 invoked by uid 500); 9 Mar 2005 18:36:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77524 invoked by uid 500); 9 Mar 2005 18:36:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77511 invoked by uid 99); 9 Mar 2005 18:36:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 10:36:41 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005030918363901300oh1gme>; Wed, 9 Mar 2005 18:36:39 +0000
Message-ID: <422F4237.7030503@apache.org>
Date: Wed, 09 Mar 2005 10:36:39 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: large indexes
References: <A60AC49BA89F4F4D9D86F2B7519111E87D839A@slc-xchg1.slc.mainstreamdata.com>
In-Reply-To: <A60AC49BA89F4F4D9D86F2B7519111E87D839A@slc-xchg1.slc.mainstreamdata.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Scott Smith wrote:
> I have the need to create an index which will potentially have a
> million+ documents.  I know Lucene can accomplish this.  However, the
> other requirement is that I need to be continually updating it during
> the date (adding 1-30 documents/minute).

Have a look at this thread:

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12709.html

Technorati updates hundreds of blog entries per minute with a single 
Lucene index.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 18:43:52 2005
Return-Path: <java-user-return-13617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2591 invoked from network); 9 Mar 2005 18:43:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 18:43:51 -0000
Received: (qmail 92582 invoked by uid 500); 9 Mar 2005 18:43:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92559 invoked by uid 500); 9 Mar 2005 18:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92546 invoked by uid 99); 9 Mar 2005 18:43:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 10:43:46 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <200503091843440150046ouce>; Wed, 9 Mar 2005 18:43:44 +0000
Message-ID: <422F43DF.9040604@apache.org>
Date: Wed, 09 Mar 2005 10:43:43 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
References: <1109713160.18862.109.camel@localhost>	 <c68e391705030119457d39b3d8@mail.gmail.com>	 <42254963.6000901@apache.org> <c68e39170503090836559d334@mail.gmail.com>
In-Reply-To: <c68e39170503090836559d334@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> This strategy looks very promising.
> 
> One drawback is that documents must be added directly to the main
> index for this to be efficient.  This is a bit of a problem if there
> is a document uniqueness requirement (a unique id field).

This is easy to do with a single index.  Here's the loop:

  1. Poll DB for updated and new documents.
  2. Delete all updated docs from an IndexReader & close it.
  3. Add all new & updated to an IndexWriter & close it.
  4. Tell DB that documents are updated.
  5. Checkpoint index.
  6. Repeat.

Deleting is much faster than adding.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 19:15:37 2005
Return-Path: <java-user-return-13618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20252 invoked from network); 9 Mar 2005 19:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 19:15:36 -0000
Received: (qmail 76104 invoked by uid 500); 9 Mar 2005 19:15:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76076 invoked by uid 500); 9 Mar 2005 19:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76063 invoked by uid 99); 9 Mar 2005 19:15:32 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.170.195 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 11:15:30 -0800
Received: by rproxy.gmail.com with SMTP id 1so215276rny
        for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 11:15:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=mS5n7TGM7kRkTkY3N1Sy1dd3CVvHL4uD0LOf7LYl/3H37zJcH4pcPAccaI2PmhM8BerJBNacjhA3BriW+KZZB2c+e7I+vgsTaR59FCEYvQNf67Q4CFXMcVviq3e0okj2jWL7HDLaSq3yeQfhDRO5mBpQ6nLuUfUlxTRRIXikWZA=
Received: by 10.38.206.60 with SMTP id d60mr504993rng;
        Wed, 09 Mar 2005 11:15:29 -0800 (PST)
Received: by 10.38.8.67 with HTTP; Wed, 9 Mar 2005 11:15:29 -0800 (PST)
Message-ID: <7b87034105030911151c8f5379@mail.gmail.com>
Date: Wed, 9 Mar 2005 20:15:29 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene index with structured fields
In-Reply-To: <1110391221.8124.146.camel@localhost>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <7b870341050309092912f99572@mail.gmail.com>
	 <1110391221.8124.146.camel@localhost>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

thanks Miles, yes... i missed that the queryParser could transform a query.. 

but i don't like very much my idea: the integration is too high level.
it would be great if a low level of integration will be possible
because of the scorer.

In fact the calcul of score will certainly more complex. Actually it's
for XML searching/ranking,   tf*idf would be computed differently not
in all the index but only in the set of search field, with different
variations depending of the query element location,  the structure of
the xml and the semantic of elements.).

i thought a lower integration of this notions would be needed but
maybe not if just a query extendor and a customised similarity class
are suffisant to do that. i'll try this kind of idea first !

If somebody are another solution, just to compare ... 
 

On Wed, 09 Mar 2005 18:00:21 +0000, Miles Barr
<miles@runtime-collective.com> wrote:
> On Wed, 2005-03-09 at 18:29 +0100, Nicolas Maisonneuve wrote:
> > I would like use a index with structured search field.
> >
> > - flat index (lucene type)
> > searchfield1
> > searchfield2
> > searchffield3
> > ...
> > -structured index
> > search1
> >    search2
> >       search4
> >    search3
> >       search5
> >
> > to allow simple extensions of some search features:
> > - the query TermQuery("search2", "coco" )  search in search2 and
> > search4 fields,
> > - The score depend of the depth where the word is found : A document
> > where "coco" is found in search4 field has a score lower than a
> > document with "coco" found in search2
> >
> > How {do with,hack} lucene to integrated easily this notion of
> > structured field  ? (no fuzzy methods allow because of the
> > performance) ?
> 
> If you know the structure of the index ahead of time and the weights you
> want to place on the different levels I'd do a query expansion. i.e.
> 
> search2:coco
> 
> would become
> 
> search2:coco^4 OR search4:coco
> 
> but actually creating the query objects rather than generating the
> string to be parsed by the QueryParser.
> 
> --
> Miles Barr <miles@runtime-collective.com>
> Runtime Collective Ltd.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 19:44:22 2005
Return-Path: <java-user-return-13619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33482 invoked from network); 9 Mar 2005 19:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 19:44:22 -0000
Received: (qmail 31353 invoked by uid 500); 9 Mar 2005 19:44:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31327 invoked by uid 500); 9 Mar 2005 19:44:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31314 invoked by uid 99); 9 Mar 2005 19:44:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 11:44:16 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8215613E2049; Wed,  9 Mar 2005 14:44:14 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 0FCC513E200A
	for <java-user@lucene.apache.org>; Wed,  9 Mar 2005 14:44:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <f071061b05030907096c12c651@mail.gmail.com>
References: <f071061b0503070949584fcf82@mail.gmail.com> <f071061b05030907096c12c651@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8560cb322eee463457f307300710e4f5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: identifier field as keyword or unindexed
Date: Wed, 9 Mar 2005 14:43:58 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 9, 2005, at 10:09 AM, javier muguruza wrote:
> (I sent this to the old list, I dont know wether it reached the
> list...just in case I repost it)
>
> Hi all,
>
> We index our documents in the following way:
>
>         doc = new Document();
>         // mailid
>         doc.add(Field.UnIndexed("mid",mid));
>         //body
>         doc.add(Field.UnStored("body", textb));
>
> mid is a unique identifier, and body contains long pieces of text to 
> be indexed.
>
> And later make searches on the body field, the mid allows us to find a
> file on the filesystem with a compressed (and digitally signed)
> version of the original body indexed.
> Our way to work in a query in our app is this:
> 1. first we make a search in a db (for many different reasons) that
> returns a number (from 0 to thousands) of mid
> 2. we use lucene to search for some text in many indexes, this returns
> a second list of mid
> 3. we return the result as the intersection of both lists.
>
> This is working fine right now, but wonder wether we are not using
> lucene to the fullest, cause we could also store mid as a keyword
> (instead of unindexed), and add the condition (AND mid==[any mid from
> our step 1]) to the lucene query we run. My questions are:
>
> 1. Is there a limit in the number of conditions I can add to a query??
> Sometimes we have 10 mids, other times we have thousands of them so we
> would have to add: AND (mid:mid1 OR mid:mid2 ... OR mid:mid10000).
> Probably there is a limit, and we could only apply the mid conditions
> when the number or mids returned by step 1 is smaller than that limit?

BooleanQuery has a built-in limit of 1,024 clauses so it would only be 
useful when there is a small number of mids.  Consider using a Filter 
though.  There are some built-in ones, but maybe a custom one is best.

> 2. As the mid is a unique identifier (I guest lucene does not care
> about that right?)

Right, Lucene doesn't care about field/term uniqueness.

> , and the condition on the mid woudl be ANDed to the
> text query conditions, will it be faster for lucene to look first in
> the mid field and dont do the text lookup if the mid condition is not
> fullfilled? I dont know wether I am clear enough...Will I get some
> benefit on the queries by adding some additional conditions or the
> cost of adding another field to index will not pay off? Maybe it
> depends on the number of documents? Maybe it would be best to set mid
> as a keyword just in case, and add it as conditions later if the
> searches take too long?

I doubt you'd even notice the difference.  There is little cost to 
adding the additional field, and looks like you'd benefit from having 
mid as a Keyword.

Also, with a Filter,  you could use it to bounce to your relational 
database to constrain results based on a set of mids.  Filters are 
designed to be used for multiple queries and cached - keep that in mind 
and maybe it'll work out well in your scenario.

	Erik


>
> thanks for any though on that
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 19:47:39 2005
Return-Path: <java-user-return-13620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34694 invoked from network); 9 Mar 2005 19:47:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 19:47:39 -0000
Received: (qmail 38763 invoked by uid 500); 9 Mar 2005 19:47:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38730 invoked by uid 500); 9 Mar 2005 19:47:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38706 invoked by uid 99); 9 Mar 2005 19:47:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 11:47:33 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B02E913E2049; Wed,  9 Mar 2005 14:47:31 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id DE62F13E200A
	for <java-user@lucene.apache.org>; Wed,  9 Mar 2005 14:47:04 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <422F3E82.2040109@apache.org>
References: <05Mar8.193107pst.58617@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org> <efff3eed7e615adb201f1c400642b038@gmail.com> <422ED048.508@getopt.org> <422F3E82.2040109@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <9b9f3514f0043569f5b473395542cd29@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Find version of Lucene library
Date: Wed, 9 Mar 2005 14:46:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

+1

	Erik

On Mar 9, 2005, at 1:20 PM, Doug Cutting wrote:

> Andrzej Bialecki wrote:
>>> Hmmm... would not java.lang.Package various methods do the job?
>> I'm not sure... I just tried to do 
>> Package.getPackage("org.apache.lucene") and got null, even though the 
>> manifest is present in the JAR.
>
> I looked into this.  The package name in the manifest is 
> "org/apache/lucene".  But in order for this to work the package name 
> in the manifest must: (a) end with a slash; and (b) name a package 
> with classes in it, and lucene's classes are all in sub-packages--no 
> classes are in "org.apache.lucene".
>
> I've attached a patch that fixes (b) by adding a class in the 
> top-level package.  Comments?
>
> Doug
> Index: build.xml
> ===================================================================
> --- build.xml	(revision 156658)
> +++ build.xml	(working copy)
> @@ -189,7 +189,7 @@
>        excludes="**/*.java">
>        <manifest>
>          <attribute name="Created-By" value="Apache Jakarta"/>
> -        <section name="org/apache/lucene">
> +        <section name="org/apache/lucene/">
>            <attribute name="Specification-Title" value="Lucene Search 
> Engine"/>
>            <attribute name="Specification-Version" value="${version}"/>
>            <attribute name="Specification-Vendor" value="Lucene"/>
> Index: src/java/org/apache/lucene/package.html
> ===================================================================
> --- src/java/org/apache/lucene/package.html	(revision 0)
> +++ src/java/org/apache/lucene/package.html	(revision 0)
> @@ -0,0 +1 @@
> +<html><body>Top-level package.</body></html>
> Index: src/java/org/apache/lucene/LucenePackage.java
> ===================================================================
> --- src/java/org/apache/lucene/LucenePackage.java	(revision 0)
> +++ src/java/org/apache/lucene/LucenePackage.java	(revision 0)
> @@ -0,0 +1,28 @@
> +package org.apache.lucene;
> +
> +/**
> + * Copyright 2005 The Apache Software Foundation
> + *
> + * Licensed under the Apache License, Version 2.0 (the "License");
> + * you may not use this file except in compliance with the License.
> + * You may obtain a copy of the License at
> + *
> + *     http://www.apache.org/licenses/LICENSE-2.0
> + *
> + * Unless required by applicable law or agreed to in writing, software
> + * distributed under the License is distributed on an "AS IS" BASIS,
> + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or 
> implied.
> + * See the License for the specific language governing permissions and
> + * limitations under the License.
> + */
> +
> +/** Lucene's package information, including version. **/
> +public final class LucenePackage {
> +
> +  private LucenePackage() {}                      // can't construct
> +
> +  /** Return Lucene's package, including version information. */
> +  public static Package get() {
> +    return LucenePackage.class.getPackage();
> +  }
> +}
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 19:57:17 2005
Return-Path: <java-user-return-13621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38645 invoked from network); 9 Mar 2005 19:57:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 19:57:17 -0000
Received: (qmail 58963 invoked by uid 500); 9 Mar 2005 19:57:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58929 invoked by uid 500); 9 Mar 2005 19:57:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58912 invoked by uid 99); 9 Mar 2005 19:57:12 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.198 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 11:57:12 -0800
Received: by rproxy.gmail.com with SMTP id b11so337655rne
        for <java-user@lucene.apache.org>; Wed, 09 Mar 2005 11:57:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=uaCzm7G5UDahja0DfOW0JJLNEKp2++Hn5pPxpezc4IJB3kD+Uhfx83TrFVB9eFtwl5TSjkUtfEqrg4zfTHpyFSvKuvTbbfrCswoH5TH1V0BqV2VIAOIATTNnubOPmiSySvYpmz52Gri5a2a5Cn9hC1jvl/BE6eAJoH6WUuq64vo=
Received: by 10.38.73.45 with SMTP id v45mr1091187rna;
        Wed, 09 Mar 2005 11:57:10 -0800 (PST)
Received: by 10.38.12.53 with HTTP; Wed, 9 Mar 2005 11:57:10 -0800 (PST)
Message-ID: <c68e391705030911579311055@mail.gmail.com>
Date: Wed, 9 Mar 2005 14:57:10 -0500
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
In-Reply-To: <422F43DF.9040604@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <1109713160.18862.109.camel@localhost>
	 <c68e391705030119457d39b3d8@mail.gmail.com>
	 <42254963.6000901@apache.org>
	 <c68e39170503090836559d334@mail.gmail.com>
	 <422F43DF.9040604@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm trying to support an interface where documents can be added one at
a time at a high rate (via HTTP POST).  You don't know all of the
documents ahead of time, so you can't delete them all ahead of time.

Given this constraint, it seems like you can do one of two things:
1) collect all the documents to be added, without actually adding
them.  Then you know the complete list and can do the deletes before
the adds
2) tag all the documents as you add them so you can tell old from new.
3) depend on some special ordering that may exist in a lucene index
(see Big Questions below)

For the 2nd approach to work with duplicates in the same group (doc A
added twice before the IndexWriter is closed), it looks like you would
have to keep track of what you tagged each individual document with. 
After the IndexWriter has closed, you could use a term enumerator to
go through every document you added and delete anything but the latest
(but to find which lucene docid corresponds to which version is more
work still...)

Big Big Question:
Will a term enumerator enumerate in the order documents were added to
the index (for a single term of say id:a)?  If so, there would be no
need to tag at all - simply enumerate and delete all but the last.

Another Big Big Question:
If the former idea doesn't work, can we depend on the ordering of the
docids?  Will docs added later always have higher internal docids than
ones added earlier?

-Yonik


On Wed, 09 Mar 2005 10:43:43 -0800, Doug Cutting <cutting@apache.org> wrote:
> Yonik Seeley wrote:
> > This strategy looks very promising.
> >
> > One drawback is that documents must be added directly to the main
> > index for this to be efficient.  This is a bit of a problem if there
> > is a document uniqueness requirement (a unique id field).
> 
> This is easy to do with a single index.  Here's the loop:
> 
>   1. Poll DB for updated and new documents.
>   2. Delete all updated docs from an IndexReader & close it.
>   3. Add all new & updated to an IndexWriter & close it.
>   4. Tell DB that documents are updated.
>   5. Checkpoint index.
>   6. Repeat.
> 
> Deleting is much faster than adding.
> 
> Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 20:08:46 2005
Return-Path: <java-user-return-13622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43886 invoked from network); 9 Mar 2005 20:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 20:08:45 -0000
Received: (qmail 84564 invoked by uid 500); 9 Mar 2005 20:08:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84542 invoked by uid 500); 9 Mar 2005 20:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 68248 invoked by uid 500); 9 Mar 2005 20:01:51 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: Andy Roberts <dev@andy-roberts.net>
To: lucene-user@jakarta.apache.org
Subject: Obtaining the contexts of hits
Date: Wed, 9 Mar 2005 20:04:08 +0000
User-Agent: KMail/1.8
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503092004.08267.dev@andy-roberts.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I've been using Lucene for a few months now, although not in a typical 
"building a search engine" kind of way*. Basically, I have some large 
documents. I would like a system whereby I search for a term, and then I 
receive a hit for each match, with its context, e.g., ten words either side 
of the match.

I've been looking through the API, and there's a SpanNearQuery (or something 
similar) which looked at first glance to be what I want, but after second 
thoughts, it appears it's searching for a set of words within a given 
proximity. 

I know Lucene stores TermPositions: I know how to get the position of a match. 
Is there a way of doing a reverse lookup, i.e., given a position, return the 
term. Because if that were the case, I could easily build a context up by 
finding pos, then looping to get all terms +- a specified window.

Either way, I can't see a way forward. Simply being able to find which 
documents the terms are in isn't very helpful, because let's say I find the 
docs that match, I then have to open up each one, tokenise and re-search for 
my term,etc, etc. All this info is there, somewhere in the index, I just want 
to get to it so that I can benefit from the many speed benefits of Lucene.

I don't expect sample code or anything, just a pointer to the right direction. 
I do own the LIA book, but haven't read it all yet - so if there's anything 
in there which could be relevant, please let me know :)

Much help appreciated,
Andrew Roberts

* for those who are interested, I'm a computer scientist doing research which 
is basically a cross between computational linguistics and machine learning. 
I work with large text corpora, gather information about how words behave 
relative to each and try to infer word class and grammatical structure from 
it. I'm using Lucene to try and speed up text processing overheads, by having 
my corpora indexed.

-- 
Computer Vision and Language Reseearch Group
School of Computing
Univeristy of Leeds
Leeds, UK
LS2 9JT
http://www.comp.leeds.ac.uk/andyr

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 20:14:15 2005
Return-Path: <java-user-return-13623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47650 invoked from network); 9 Mar 2005 20:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 20:14:14 -0000
Received: (qmail 98005 invoked by uid 500); 9 Mar 2005 20:14:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97707 invoked by uid 500); 9 Mar 2005 20:14:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97694 invoked by uid 99); 9 Mar 2005 20:14:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 12:14:09 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <200503092014070150048edee>; Wed, 9 Mar 2005 20:14:07 +0000
Message-ID: <422F590F.1060005@apache.org>
Date: Wed, 09 Mar 2005 12:14:07 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
References: <1109713160.18862.109.camel@localhost>	 <c68e391705030119457d39b3d8@mail.gmail.com>	 <42254963.6000901@apache.org>	 <c68e39170503090836559d334@mail.gmail.com>	 <422F43DF.9040604@apache.org> <c68e391705030911579311055@mail.gmail.com>
In-Reply-To: <c68e391705030911579311055@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:
> I'm trying to support an interface where documents can be added one at
> a time at a high rate (via HTTP POST).  You don't know all of the
> documents ahead of time, so you can't delete them all ahead of time.

A simple solution is to queue documents as they're posted.  When either 
(a) the queue has 1000 documents or (b) one minute has passed, process 
the queue.  First delete each document in the queue by its unique id, 
then add them.  Reset the queue and repeat.

> Big Big Question:
> Will a term enumerator enumerate in the order documents were added to
> the index (for a single term of say id:a)?

Yes.

> Another Big Big Question:
> If the former idea doesn't work, can we depend on the ordering of the
> docids?  Will docs added later always have higher internal docids than
> ones added earlier?

Yes.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 21:40:18 2005
Return-Path: <java-user-return-13624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4583 invoked from network); 9 Mar 2005 21:40:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 21:40:18 -0000
Received: (qmail 53090 invoked by uid 500); 9 Mar 2005 21:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52845 invoked by uid 500); 9 Mar 2005 21:40:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52487 invoked by uid 99); 9 Mar 2005 21:40:11 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31109.mail.mud.yahoo.com (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 09 Mar 2005 13:40:09 -0800
Received: (qmail 28797 invoked by uid 60001); 9 Mar 2005 21:40:07 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=to2EsUOdd6+OpJfgvGmmvY7vRWWLmZYcLQmJTbp0XM1JA0ve2NuV0z14mVjHRwjq5yogzDJYXvL9IDszhGL2iX8QoL1Jz9JKlGwtEBeJUJh/8M/2at3BPgFnDVHALYQtOBrBAmCZ0vzSyiC4XY2TYq2I+VQ0da/ayUqraZdVx+A=  ;
Message-ID: <20050309214007.28795.qmail@web31109.mail.mud.yahoo.com>
Received: from [216.194.17.194] by web31109.mail.mud.yahoo.com via HTTP; Wed, 09 Mar 2005 13:40:07 PST
Date: Wed, 9 Mar 2005 13:40:07 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Unsubscribe?
To: java-user@lucene.apache.org
Cc: Jerry.Jalenak@LABONE.com
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try <java-user-unsubscribe@lucene.apache.org>

--- Jerry Jalenak <Jerry.Jalenak@LABONE.com> wrote:
> The e-mail address for unsubscribing from the list appears to not be
> working.  Can someone check on it?
> 
> Jerry Jalenak
> Senior Programmer / Analyst, Web Publishing
> LabOne, Inc.
> 10101 Renner Blvd.
> Lenexa, KS  66219
> (913) 577-1496
> 
> jerry.jalenak@labone.com
> 
> 
> This transmission (and any information attached to it) may be
> confidential and
> is intended solely for the use of the individual or entity to which
> it is
> addressed. If you are not the intended recipient or the person
> responsible for
> delivering the transmission to the intended recipient, be advised
> that you
> have received this transmission in error and that any use,
> dissemination,
> forwarding, printing, or copying of this information is strictly
> prohibited.
> If you have received this transmission in error, please immediately
> notify
> LabOne at the following email address:
> securityincidentreporting@labone.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 21:42:26 2005
Return-Path: <java-user-return-13625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5566 invoked from network); 9 Mar 2005 21:42:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 21:42:26 -0000
Received: (qmail 55907 invoked by uid 500); 9 Mar 2005 21:42:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55538 invoked by uid 500); 9 Mar 2005 21:42:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55520 invoked by uid 99); 9 Mar 2005 21:42:22 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31105.mail.mud.yahoo.com (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 09 Mar 2005 13:42:19 -0800
Received: (qmail 90313 invoked by uid 60001); 9 Mar 2005 21:42:17 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=BnUr7o7mqGIF+fbcLmQJOZk/wJVZMc/cdF/T7jCeMHhnFnn33g02YciYUYx22lLlKBgdGo6SEsB2UIz7p0wfF2BFwUtr8KDznsLgQNE7rxPTkQcVckg6NJNcp4KALBKQboh1WzkvwLxh5kCDm7+ppMILbj9rG7086qTrwAsJAvE=  ;
Message-ID: <20050309214217.90311.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.17.194] by web31105.mail.mud.yahoo.com via HTTP; Wed, 09 Mar 2005 13:42:17 PST
Date: Wed, 9 Mar 2005 13:42:17 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Obtaining the contexts of hits
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Since you own Lucene in Action, look at this:
http://www.lucenebook.com/search?query=highlighter+context

See section 8.7, Highlighting query terms.

Otis


--- Andy Roberts <dev@andy-roberts.net> wrote:
> Hi,
> 
> I've been using Lucene for a few months now, although not in a
> typical 
> "building a search engine" kind of way*. Basically, I have some large
> 
> documents. I would like a system whereby I search for a term, and
> then I 
> receive a hit for each match, with its context, e.g., ten words
> either side 
> of the match.
> 
> I've been looking through the API, and there's a SpanNearQuery (or
> something 
> similar) which looked at first glance to be what I want, but after
> second 
> thoughts, it appears it's searching for a set of words within a given
> 
> proximity. 
> 
> I know Lucene stores TermPositions: I know how to get the position of
> a match. 
> Is there a way of doing a reverse lookup, i.e., given a position,
> return the 
> term. Because if that were the case, I could easily build a context
> up by 
> finding pos, then looping to get all terms +- a specified window.
> 
> Either way, I can't see a way forward. Simply being able to find
> which 
> documents the terms are in isn't very helpful, because let's say I
> find the 
> docs that match, I then have to open up each one, tokenise and
> re-search for 
> my term,etc, etc. All this info is there, somewhere in the index, I
> just want 
> to get to it so that I can benefit from the many speed benefits of
> Lucene.
> 
> I don't expect sample code or anything, just a pointer to the right
> direction. 
> I do own the LIA book, but haven't read it all yet - so if there's
> anything 
> in there which could be relevant, please let me know :)
> 
> Much help appreciated,
> Andrew Roberts
> 
> * for those who are interested, I'm a computer scientist doing
> research which 
> is basically a cross between computational linguistics and machine
> learning. 
> I work with large text corpora, gather information about how words
> behave 
> relative to each and try to infer word class and grammatical
> structure from 
> it. I'm using Lucene to try and speed up text processing overheads,
> by having 
> my corpora indexed.
> 
> -- 
> Computer Vision and Language Reseearch Group
> School of Computing
> Univeristy of Leeds
> Leeds, UK
> LS2 9JT
> http://www.comp.leeds.ac.uk/andyr
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 09 22:56:13 2005
Return-Path: <java-user-return-13626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38501 invoked from network); 9 Mar 2005 22:56:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Mar 2005 22:56:13 -0000
Received: (qmail 4116 invoked by uid 500); 9 Mar 2005 22:55:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3995 invoked by uid 500); 9 Mar 2005 22:55:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3970 invoked by uid 99); 9 Mar 2005 22:55:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 14:55:54 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 9 Mar 2005 17:59:37 -0500
Message-ID: <01ce01c524fb$2305a190$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: <java-user@lucene.apache.org>
References: <3B530EF12E388B408ECC3162BA8C00F40107A789@ny2526.corp.bloomberg.com> <3ec1951618227a5a29e4884dbbd7a0ee@ehatchersolutions.com>
Subject: Score Question
Date: Wed, 9 Mar 2005 17:55:49 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 09 Mar 2005 22:59:37.0652 (UTC) FILETIME=[AB230F40:01C524FB]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi;

Has the scoring changed recently? I just upgraded all the jars is our
application (Lucene included).

I'm getting scores like this from documents in hits:

6.9699495E-4

The XSL that creates the user interface converts the score to an int and
than display it. This currently resulting in a zero for all scores.

I'm being told that the XSL has always done this and everything worked fine
before I did this upgrade.

I made a few changes to the query parsing and searching logic.

I'm thinking I have either:
1. Done something to screw up the scores being returned (is this possible?)
2. The XSL did do something with this value before converting it to an int
and somehow that code has been misplaced.
3. Scoring has changed in the last version of Lucene and I need multilply
the score by some factor to make it more int friendly.

Can someone shed some light on this please?

Thanks,

Luke




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 01:03:24 2005
Return-Path: <java-user-return-13627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83457 invoked from network); 10 Mar 2005 01:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 01:03:23 -0000
Received: (qmail 60333 invoked by uid 500); 10 Mar 2005 01:03:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60311 invoked by uid 500); 10 Mar 2005 01:03:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60297 invoked by uid 99); 10 Mar 2005 01:03:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 17:03:18 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B2D3E13E2049; Wed,  9 Mar 2005 20:03:16 -0500 (EST)
Received: from [192.168.1.100] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 43FFA13E200A
	for <java-user@lucene.apache.org>; Wed,  9 Mar 2005 20:03:13 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <01ce01c524fb$2305a190$7703d00a@hypermedia.com>
References: <3B530EF12E388B408ECC3162BA8C00F40107A789@ny2526.corp.bloomberg.com> <3ec1951618227a5a29e4884dbbd7a0ee@ehatchersolutions.com> <01ce01c524fb$2305a190$7703d00a@hypermedia.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <f39ec9df4e0d837b08d2ba12dfe451f0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Score Question
Date: Wed, 9 Mar 2005 20:03:09 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Did you reindex after upgrading?

	Erik

On Mar 9, 2005, at 5:55 PM, Luke Shannon wrote:

> Hi;
>
> Has the scoring changed recently? I just upgraded all the jars is our
> application (Lucene included).
>
> I'm getting scores like this from documents in hits:
>
> 6.9699495E-4
>
> The XSL that creates the user interface converts the score to an int 
> and
> than display it. This currently resulting in a zero for all scores.
>
> I'm being told that the XSL has always done this and everything worked 
> fine
> before I did this upgrade.
>
> I made a few changes to the query parsing and searching logic.
>
> I'm thinking I have either:
> 1. Done something to screw up the scores being returned (is this 
> possible?)
> 2. The XSL did do something with this value before converting it to an 
> int
> and somehow that code has been misplaced.
> 3. Scoring has changed in the last version of Lucene and I need 
> multilply
> the score by some factor to make it more int friendly.
>
> Can someone shed some light on this please?
>
> Thanks,
>
> Luke
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 01:22:19 2005
Return-Path: <java-user-return-13628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89449 invoked from network); 10 Mar 2005 01:22:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 01:22:19 -0000
Received: (qmail 79467 invoked by uid 500); 10 Mar 2005 01:22:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79433 invoked by uid 500); 10 Mar 2005 01:22:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79420 invoked by uid 99); 10 Mar 2005 01:22:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 09 Mar 2005 17:22:13 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Score Question
Date: Wed, 9 Mar 2005 20:22:11 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829B9@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Score Question
thread-index: AcUlDPTHDvyvZAm9TLy6sKc3MLndgAAAdlaA
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks,

I have a task when I need to read the query entered by the user and then =
add to it many other terms in a boolean expression.
for examples: if the user enters: red. i need to take red and generate =
the following query(red AND blue) OR (red AND green) OR( red AND =
yellow). the problem is i need to get a count of how many return =
document contain (red AND blue) and how many contain (red AND green). I =
want to know if there is a way that i sent the whole new query and can =
get the count of each clause separetly?. or shall i just break the query =
and send multiple queries?.
any ideas will be very welcome.
thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 06:25:39 2005
Return-Path: <java-user-return-13629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17811 invoked from network); 10 Mar 2005 06:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 06:25:38 -0000
Received: (qmail 75427 invoked by uid 500); 10 Mar 2005 06:25:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75394 invoked by uid 500); 10 Mar 2005 06:25:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75380 invoked by uid 99); 10 Mar 2005 06:25:31 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 09 Mar 2005 22:25:30 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ID4INP00.GBJ for <java-user@lucene.apache.org>; Thu, 10
          Mar 2005 12:13:01 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: SPAN QUERY [HOW TO]
Date: Thu, 10 Mar 2005 12:02:29 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEHBCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <1110375581.8124.137.camel@localhost>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

  Guys.

Apologies........

 U got it bingo,Am trying to do something similar as u replied.
 But there is a glitch in the  process

 If the search is done on the 'leaf_category'  as u said

 with word such as  'CAMERA DIGITAL'  instead of  'DIGITAL CAMERA'  the
resultant

 return hits will be  ZERO '0'. Usage of SpanQuery  for such conditions
applied should return still

 the 1st document of 3.

 A permutation combination of words entered should result in the specific
document being returned.



with  regards

Karthik


-----Original Message-----
From: Miles Barr [mailto:miles@runtime-collective.com]
Sent: Wednesday, March 09, 2005 7:10 PM
To: java-user@lucene.apache.org
Subject: RE: SPAN QUERY [HOW TO]


It's not clear what you're trying to achieve. PhraseQuery and
SpanNearQuery can help you find tokens that are close to each other. It
you're using the standard analyzer, tokens are words. They won't help
you group documents under a topic.

You should setup some other fields in your Lucene document to hold
category information. e.g. for document 1:

text = ELECTRONICS  DIGITAL CAMERA
parent_category = ELECTRONICS
leaf_category = DIGITAL CAMERA

for document 2:

text = ELECTRONICS  DIGITAL CAMERA OPTICS
parent_category = ELECTRONICS
parent_category = DIGITAL CAMERA
leaf_category = OPTICS

Then search on the leaf_category. Make sure you setup the category
fields to be type KEYWORD, i.e. not tokenized.



On Wed, 2005-03-09 at 18:07 +0530, Karthik N S wrote:
> Hi Guys
>
> Apologies....
>
> Some body Please Help me for this Form
>
>
> with regards
> Karthik
>
>
> -----Original Message-----
> From: Miles Barr [mailto:miles@runtime-collective.com]
> Sent: Wednesday, March 09, 2005 3:02 PM
> To: java-user@lucene.apache.org
> Subject: Re: SPAN QUERY [HOW TO]
>
>
> On Wed, 2005-03-09 at 14:52 +0530, Karthik N S wrote:
> > The new Feature of lucene 'span query' really is interesting
> >
> > But need expert suggestions on achieveing the same.
> >
> > I have 3 documents
> >
> > Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA
> > Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
> > Document 3 contains  =   ELECTRONICS  DIGITAL CAMERA ACCESSIORIES
> >
> >
> >
> > search word = " DIGITAL CAMERA "
> >
> > Returned hits  = 1st doc   ONLY [ 2 and 3rd document should not be in
> > the hit ]
> >
> > SpanQuery /PharseQuery  ????
> >
> >
> >
> > How would one achieve this ??? Please
>
> I've used span queries to boost the scores of results where words appear
> close together. I'm not sure exactly what you're trying to achieve. All
> three documents contain the search phrase, so both span and phrase
> queries would return all the documents.
>
> Are you trying to setup a taxonomy? i.e. only display documents in the
> category Electronics > Digital Camera, and not those in sub categories?
> If this is the case you should try to build the categorisation at the
> same time as the indexing process and either add explicit clauses in the
> search query or filter afterwards.
>
>
>
--
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 09:20:08 2005
Return-Path: <java-user-return-13630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57483 invoked from network); 10 Mar 2005 09:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 09:20:07 -0000
Received: (qmail 28554 invoked by uid 500); 10 Mar 2005 09:20:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28524 invoked by uid 500); 10 Mar 2005 09:20:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28509 invoked by uid 99); 10 Mar 2005 09:20:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 01:20:00 -0800
Received: from [81.168.89.246] (helo=[192.168.1.4])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1D9Jpi-0004pE-00
	for <java-user@lucene.apache.org>; Thu, 10 Mar 2005 09:19:54 +0000
Subject: Re: Obtaining the contexts of hits
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <200503092004.08267.dev@andy-roberts.net>
References: <200503092004.08267.dev@andy-roberts.net>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Thu, 10 Mar 2005 09:19:55 +0000
Message-Id: <1110446395.8124.150.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The highligher contrib package does what you're looking for:

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/highlighter/

By default it breaks the document into chunks roughly 100 characters
long. You can alter it to get tens words either side of the matched
term.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 09:23:30 2005
Return-Path: <java-user-return-13631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60441 invoked from network); 10 Mar 2005 09:23:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 09:23:30 -0000
Received: (qmail 41446 invoked by uid 500); 10 Mar 2005 09:23:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41410 invoked by uid 500); 10 Mar 2005 09:23:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41379 invoked by uid 99); 10 Mar 2005 09:23:20 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 01:23:19 -0800
Received: from [81.168.89.246] (helo=[192.168.1.4])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1D9Jsw-00052k-00
	for <java-user@lucene.apache.org>; Thu, 10 Mar 2005 09:23:14 +0000
Subject: RE: SPAN QUERY [HOW TO]
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <OBELINLGKPEMCIEIJJNKIEHBCCAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKIEHBCCAA.karthik@controlnet.co.in>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Thu, 10 Mar 2005 09:23:15 +0000
Message-Id: <1110446595.8124.153.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thu, 2005-03-10 at 12:02 +0530, Karthik N S wrote:
>  U got it bingo,Am trying to do something similar as u replied.
>  But there is a glitch in the  process
> 
>  If the search is done on the 'leaf_category'  as u said
> 
>  with word such as  'CAMERA DIGITAL'  instead of  'DIGITAL CAMERA'  the
> resultant
> 
>  return hits will be  ZERO '0'. Usage of SpanQuery  for such conditions
> applied should return still
> 
>  the 1st document of 3.
> 
>  A permutation combination of words entered should result in the specific
> document being returned.

If depends what the type of leaf_category is. If you made it Keyword as
I suggested then it won't be tokenized. i.e. there's one token 'DIGITAL
CAMERA' instead of the two tokens you normally get, 'digital' and
'camera'.

If you change the field type to Text you should be able to use a
SpanNearQuery to do your search.

-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 09:41:44 2005
Return-Path: <java-user-return-13632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71448 invoked from network); 10 Mar 2005 09:41:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 09:41:44 -0000
Received: (qmail 82818 invoked by uid 500); 10 Mar 2005 09:41:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82797 invoked by uid 500); 10 Mar 2005 09:41:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82783 invoked by uid 99); 10 Mar 2005 09:41:38 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jmuguruza@gmail.com designates 64.233.184.200 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 01:41:36 -0800
Received: by wproxy.gmail.com with SMTP id 36so515090wra
        for <java-user@lucene.apache.org>; Thu, 10 Mar 2005 01:41:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=UDdtfeAxNbHqzM3L3xn8lcuWUQrHsWI0ov77qkScE6rgzYlGSqRgvdyvFdVYjqheRHt3VdhWYuhyp0554NpkpTFd0HJFEtTs9qnAgvBDK/KBBzxILaakAwKKHeq1JM9L5/fA8xCLXIzBYj8yOWm+O+kmk9LIrtFkhBLlGY0nB6Y=
Received: by 10.54.65.13 with SMTP id n13mr258759wra;
        Thu, 10 Mar 2005 01:41:33 -0800 (PST)
Received: by 10.54.39.18 with HTTP; Thu, 10 Mar 2005 01:41:33 -0800 (PST)
Message-ID: <f071061b050310014162f39362@mail.gmail.com>
Date: Thu, 10 Mar 2005 10:41:33 +0100
From: javier muguruza <jmuguruza@gmail.com>
Reply-To: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: identifier field as keyword or unindexed
In-Reply-To: <8560cb322eee463457f307300710e4f5@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b0503070949584fcf82@mail.gmail.com>
	 <f071061b05030907096c12c651@mail.gmail.com>
	 <8560cb322eee463457f307300710e4f5@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Erik,

I will investigate Filters and I'll see then.


On Wed, 9 Mar 2005 14:43:58 -0500, Erik Hatcher
<erik@ehatchersolutions.com> wrote:
> 
> On Mar 9, 2005, at 10:09 AM, javier muguruza wrote:
> > (I sent this to the old list, I dont know wether it reached the
> > list...just in case I repost it)
> >
> > Hi all,
> >
> > We index our documents in the following way:
> >
> >         doc = new Document();
> >         // mailid
> >         doc.add(Field.UnIndexed("mid",mid));
> >         //body
> >         doc.add(Field.UnStored("body", textb));
> >
> > mid is a unique identifier, and body contains long pieces of text to
> > be indexed.
> >
> > And later make searches on the body field, the mid allows us to find a
> > file on the filesystem with a compressed (and digitally signed)
> > version of the original body indexed.
> > Our way to work in a query in our app is this:
> > 1. first we make a search in a db (for many different reasons) that
> > returns a number (from 0 to thousands) of mid
> > 2. we use lucene to search for some text in many indexes, this returns
> > a second list of mid
> > 3. we return the result as the intersection of both lists.
> >
> > This is working fine right now, but wonder wether we are not using
> > lucene to the fullest, cause we could also store mid as a keyword
> > (instead of unindexed), and add the condition (AND mid==[any mid from
> > our step 1]) to the lucene query we run. My questions are:
> >
> > 1. Is there a limit in the number of conditions I can add to a query??
> > Sometimes we have 10 mids, other times we have thousands of them so we
> > would have to add: AND (mid:mid1 OR mid:mid2 ... OR mid:mid10000).
> > Probably there is a limit, and we could only apply the mid conditions
> > when the number or mids returned by step 1 is smaller than that limit?
> 
> BooleanQuery has a built-in limit of 1,024 clauses so it would only be
> useful when there is a small number of mids.  Consider using a Filter
> though.  There are some built-in ones, but maybe a custom one is best.
> 
> > 2. As the mid is a unique identifier (I guest lucene does not care
> > about that right?)
> 
> Right, Lucene doesn't care about field/term uniqueness.
> 
> > , and the condition on the mid woudl be ANDed to the
> > text query conditions, will it be faster for lucene to look first in
> > the mid field and dont do the text lookup if the mid condition is not
> > fullfilled? I dont know wether I am clear enough...Will I get some
> > benefit on the queries by adding some additional conditions or the
> > cost of adding another field to index will not pay off? Maybe it
> > depends on the number of documents? Maybe it would be best to set mid
> > as a keyword just in case, and add it as conditions later if the
> > searches take too long?
> 
> I doubt you'd even notice the difference.  There is little cost to
> adding the additional field, and looks like you'd benefit from having
> mid as a Keyword.
> 
> Also, with a Filter,  you could use it to bounce to your relational
> database to constrain results based on a set of mids.  Filters are
> designed to be used for multiple queries and cached - keep that in mind
> and maybe it'll work out well in your scenario.
> 
>         Erik
> 
> 
> >
> > thanks for any though on that
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 11:02:16 2005
Return-Path: <java-user-return-13633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15814 invoked from network); 10 Mar 2005 11:02:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 11:02:15 -0000
Received: (qmail 30300 invoked by uid 500); 10 Mar 2005 11:02:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30279 invoked by uid 500); 10 Mar 2005 11:02:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30266 invoked by uid 99); 10 Mar 2005 11:02:09 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from p15112568.pureserver.info (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 03:02:07 -0800
Received: from [192.168.10.124] (ppp-82-135-64-55.mnet-online.de [82.135.64.55])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id 4614014010F
	for <java-user@lucene.apache.org>; Thu, 10 Mar 2005 12:02:03 +0100 (CET)
Message-ID: <423028C3.8030104@intrafind.de>
Date: Thu, 10 Mar 2005 12:00:19 +0100
From: Bernhard Messer <bernhard.messer@intrafind.de>
Organization: IntraFind Software AG
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Find version of Lucene library
References: <05Mar8.193107pst.58617@synergy1.parc.xerox.com> <422EB89A.6040707@getopt.org> <efff3eed7e615adb201f1c400642b038@gmail.com> <422ED048.508@getopt.org> <422F3E82.2040109@apache.org>
In-Reply-To: <422F3E82.2040109@apache.org>
Content-Type: multipart/alternative;
 boundary="------------060006070606000400020704"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------060006070606000400020704
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

+1
   
    Bernhard

Doug Cutting wrote:

> Andrzej Bialecki wrote:
>
>>> Hmmm... would not java.lang.Package various methods do the job?
>>
>>
>>
>> I'm not sure... I just tried to do 
>> Package.getPackage("org.apache.lucene") and got null, even though the 
>> manifest is present in the JAR.
>
>
> I looked into this.  The package name in the manifest is 
> "org/apache/lucene".  But in order for this to work the package name 
> in the manifest must: (a) end with a slash; and (b) name a package 
> with classes in it, and lucene's classes are all in sub-packages--no 
> classes are in "org.apache.lucene".
>
> I've attached a patch that fixes (b) by adding a class in the 
> top-level package.  Comments?
>
> Doug
>
>------------------------------------------------------------------------
>
>Index: build.xml
>===================================================================
>--- build.xml	(revision 156658)
>+++ build.xml	(working copy)
>@@ -189,7 +189,7 @@
>       excludes="**/*.java">
>       <manifest>
>         <attribute name="Created-By" value="Apache Jakarta"/>
>-        <section name="org/apache/lucene">
>+        <section name="org/apache/lucene/">
>           <attribute name="Specification-Title" value="Lucene Search Engine"/>
>           <attribute name="Specification-Version" value="${version}"/>
>           <attribute name="Specification-Vendor" value="Lucene"/>
>Index: src/java/org/apache/lucene/package.html
>===================================================================
>--- src/java/org/apache/lucene/package.html	(revision 0)
>+++ src/java/org/apache/lucene/package.html	(revision 0)
>@@ -0,0 +1 @@
>+<html><body>Top-level package.</body></html>
>Index: src/java/org/apache/lucene/LucenePackage.java
>===================================================================
>--- src/java/org/apache/lucene/LucenePackage.java	(revision 0)
>+++ src/java/org/apache/lucene/LucenePackage.java	(revision 0)
>@@ -0,0 +1,28 @@
>+package org.apache.lucene;
>+
>+/**
>+ * Copyright 2005 The Apache Software Foundation
>+ *
>+ * Licensed under the Apache License, Version 2.0 (the "License");
>+ * you may not use this file except in compliance with the License.
>+ * You may obtain a copy of the License at
>+ *
>+ *     http://www.apache.org/licenses/LICENSE-2.0
>+ *
>+ * Unless required by applicable law or agreed to in writing, software
>+ * distributed under the License is distributed on an "AS IS" BASIS,
>+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
>+ * See the License for the specific language governing permissions and
>+ * limitations under the License.
>+ */
>+
>+/** Lucene's package information, including version. **/
>+public final class LucenePackage {
>+
>+  private LucenePackage() {}                      // can't construct
>+
>+  /** Return Lucene's package, including version information. */
>+  public static Package get() {
>+    return LucenePackage.class.getPackage();
>+  }
>+}
>
>  
>
>------------------------------------------------------------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------060006070606000400020704--

From java-user-return-13634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 12:19:42 2005
Return-Path: <java-user-return-13634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69880 invoked from network); 10 Mar 2005 12:19:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 12:19:42 -0000
Received: (qmail 61682 invoked by uid 500); 10 Mar 2005 12:19:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61651 invoked by uid 500); 10 Mar 2005 12:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61638 invoked by uid 99); 10 Mar 2005 12:19:37 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 10 Mar 2005 04:19:35 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id ID4Z1F00.2BZ for <java-user@lucene.apache.org>; Thu, 10
          Mar 2005 18:06:51 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: SPAN QUERY [HOW TO]
Date: Thu, 10 Mar 2005 17:56:19 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEHCCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <1110446595.8124.153.camel@localhost>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys

 Apologies.......


  I ditto as u said but the SpanNearQuery is

  returning me all the 3 documents containing  for rollover of  words

 'DIGITAL CAMERAS' instead of returning me the 1st doc, Or none by changing
the slop factor

Any more ideas Please do .......... B(

with regards
karthik


-----Original Message-----
From: Miles Barr [mailto:miles@runtime-collective.com]
Sent: Thursday, March 10, 2005 2:53 PM
To: java-user@lucene.apache.org
Subject: RE: SPAN QUERY [HOW TO]


On Thu, 2005-03-10 at 12:02 +0530, Karthik N S wrote:
>  U got it bingo,Am trying to do something similar as u replied.
>  But there is a glitch in the  process
>
>  If the search is done on the 'leaf_category'  as u said
>
>  with word such as  'CAMERA DIGITAL'  instead of  'DIGITAL CAMERA'  the
> resultant
>
>  return hits will be  ZERO '0'. Usage of SpanQuery  for such conditions
> applied should return still
>
>  the 1st document of 3.
>
>  A permutation combination of words entered should result in the specific
> document being returned.

If depends what the type of leaf_category is. If you made it Keyword as
I suggested then it won't be tokenized. i.e. there's one token 'DIGITAL
CAMERA' instead of the two tokens you normally get, 'digital' and
'camera'.

If you change the field type to Text you should be able to use a
SpanNearQuery to do your search.

--
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 13:23:34 2005
Return-Path: <java-user-return-13635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5148 invoked from network); 10 Mar 2005 13:23:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 13:23:31 -0000
Received: (qmail 53859 invoked by uid 500); 10 Mar 2005 13:23:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53828 invoked by uid 500); 10 Mar 2005 13:23:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53813 invoked by uid 99); 10 Mar 2005 13:23:25 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 05:23:24 -0800
Received: from [81.168.89.246] (helo=[192.168.1.4])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1D9NdF-0004as-00
	for <java-user@lucene.apache.org>; Thu, 10 Mar 2005 13:23:17 +0000
Subject: RE: SPAN QUERY [HOW TO]
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <OBELINLGKPEMCIEIJJNKIEHCCCAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKIEHCCCAA.karthik@controlnet.co.in>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Thu, 10 Mar 2005 13:23:20 +0000
Message-Id: <1110461000.4189.9.camel@localhost>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What fields do you have and what are you putting in them?



On Thu, 2005-03-10 at 17:56 +0530, Karthik N S wrote:
> Hi Guys
> 
>  Apologies.......
> 
> 
>   I ditto as u said but the SpanNearQuery is
> 
>   returning me all the 3 documents containing  for rollover of  words
> 
>  'DIGITAL CAMERAS' instead of returning me the 1st doc, Or none by changing
> the slop factor
> 
> Any more ideas Please do .......... B(
> 
> with regards
> karthik
> 
> 
> -----Original Message-----
> From: Miles Barr [mailto:miles@runtime-collective.com]
> Sent: Thursday, March 10, 2005 2:53 PM
> To: java-user@lucene.apache.org
> Subject: RE: SPAN QUERY [HOW TO]
> 
> 
> On Thu, 2005-03-10 at 12:02 +0530, Karthik N S wrote:
> >  U got it bingo,Am trying to do something similar as u replied.
> >  But there is a glitch in the  process
> >
> >  If the search is done on the 'leaf_category'  as u said
> >
> >  with word such as  'CAMERA DIGITAL'  instead of  'DIGITAL CAMERA'  the
> > resultant
> >
> >  return hits will be  ZERO '0'. Usage of SpanQuery  for such conditions
> > applied should return still
> >
> >  the 1st document of 3.
> >
> >  A permutation combination of words entered should result in the specific
> > document being returned.
> 
> If depends what the type of leaf_category is. If you made it Keyword as
> I suggested then it won't be tokenized. i.e. there's one token 'DIGITAL
> CAMERA' instead of the two tokens you normally get, 'digital' and
> 'camera'.
> 
> If you change the field type to Text you should be able to use a
> SpanNearQuery to do your search.
> 
> --
> Miles Barr <miles@runtime-collective.com>
> Runtime Collective Ltd.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 13:45:58 2005
Return-Path: <java-user-return-13636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22716 invoked from network); 10 Mar 2005 13:45:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 13:45:57 -0000
Received: (qmail 97284 invoked by uid 500); 10 Mar 2005 13:45:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96893 invoked by uid 500); 10 Mar 2005 13:45:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96879 invoked by uid 99); 10 Mar 2005 13:45:52 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from static-70-19-127-127.ny325.east.verizon.net (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 05:45:51 -0800
Received: from MCELONA (unknown [192.168.42.109])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id 5CFA615E7B
	for <java-user@lucene.apache.org>; Thu, 10 Mar 2005 08:45:48 -0500 (EST)
From: "Michael Celona" <mcelona@criticalmention.com>
To: <java-user@lucene.apache.org>
Subject: search performace
Date: Thu, 10 Mar 2005 08:45:43 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000C_01C5254D.8C1AE710"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcUld3QfHPnV+sMJRzKpxFl9fq+NlQ==
Message-Id: <20050310134548.5CFA615E7B@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000C_01C5254D.8C1AE710
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

I have a large index that needs to yield very fast query times.  I am
sorting by date as default since I am interested in the most recent
documents.  I was wondering if I boosted the score of my documents in
proportion to the date and not sorting would this increase search
performance. Thoughts?

 

Thanks,

Michael


------=_NextPart_000_000C_01C5254D.8C1AE710--



From java-user-return-13637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 14:25:31 2005
Return-Path: <java-user-return-13637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56122 invoked from network); 10 Mar 2005 14:25:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 14:25:31 -0000
Received: (qmail 78358 invoked by uid 500); 10 Mar 2005 14:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78204 invoked by uid 500); 10 Mar 2005 14:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78190 invoked by uid 99); 10 Mar 2005 14:25:24 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.170.203 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 06:25:24 -0800
Received: by rproxy.gmail.com with SMTP id 1so288296rny
        for <java-user@lucene.apache.org>; Thu, 10 Mar 2005 06:25:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=jKYn4FPHWM5lbhvz8mtGpovqUWsuQmhvzdzUuYVw1KDedwoStrkJwsTSnBC1BrpFrbDKDMZ6mTGrEQLccxg7EN9I5c+MDBdbtcZGdl35LXRSVT4YO3tED1BvBnQFyyI3rYvmplKM7rvpcE9sW5F8mdcZe1tWa7+dNCYXyx4W3sw=
Received: by 10.38.179.2 with SMTP id b2mr638471rnf;
        Thu, 10 Mar 2005 06:25:22 -0800 (PST)
Received: by 10.38.8.67 with HTTP; Thu, 10 Mar 2005 06:25:22 -0800 (PST)
Message-ID: <7b87034105031006257fd212b@mail.gmail.com>
Date: Thu, 10 Mar 2005 15:25:22 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: java-user@lucene.apache.org
Subject: problem for the adataption of a xml ranking model
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hy,

I'm trying to adapte a xml ranking model for lucene. 

For the moment i'm just playing with the leaf node i.e. a node
containing data. For lucene, this node is a a search field and the idf
is replaced by ief (inversed element frequency)
ief= log (NumDoc_e)/(NumDoc_e_t+1) +1

NumDoc_e_t = number of doc with element e containing the term t.
NumDoc_e_t=docFreq(new Term(e, t))

NumDoc_e = number of documents with the element  el ( = number of
documents with some values in the search field el )

How do you compute the numDoc_e with the lucene API ?.

thanks,

nicolas maisonneuve

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 14:34:22 2005
Return-Path: <java-user-return-13638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67149 invoked from network); 10 Mar 2005 14:34:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 14:34:21 -0000
Received: (qmail 89733 invoked by uid 500); 10 Mar 2005 14:34:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89710 invoked by uid 500); 10 Mar 2005 14:34:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89697 invoked by uid 99); 10 Mar 2005 14:34:15 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 06:34:14 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 10 Mar 2005 09:39:06 -0500
Message-ID: <000b01c5257e$e94000c0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: <java-user@lucene.apache.org>
References: <3B530EF12E388B408ECC3162BA8C00F40107A789@ny2526.corp.bloomberg.com> <3ec1951618227a5a29e4884dbbd7a0ee@ehatchersolutions.com> <01ce01c524fb$2305a190$7703d00a@hypermedia.com> <f39ec9df4e0d837b08d2ba12dfe451f0@ehatchersolutions.com>
Subject: Re: Score Question
Date: Thu, 10 Mar 2005 09:39:05 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Mar 2005 14:39:06.0620 (UTC) FILETIME=[E9A8FBC0:01C5257E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

A couple of times.

Luke

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, March 09, 2005 8:03 PM
Subject: Re: Score Question


> Did you reindex after upgrading?
> 
> Erik
> 
> On Mar 9, 2005, at 5:55 PM, Luke Shannon wrote:
> 
> > Hi;
> >
> > Has the scoring changed recently? I just upgraded all the jars is our
> > application (Lucene included).
> >
> > I'm getting scores like this from documents in hits:
> >
> > 6.9699495E-4
> >
> > The XSL that creates the user interface converts the score to an int 
> > and
> > than display it. This currently resulting in a zero for all scores.
> >
> > I'm being told that the XSL has always done this and everything worked 
> > fine
> > before I did this upgrade.
> >
> > I made a few changes to the query parsing and searching logic.
> >
> > I'm thinking I have either:
> > 1. Done something to screw up the scores being returned (is this 
> > possible?)
> > 2. The XSL did do something with this value before converting it to an 
> > int
> > and somehow that code has been misplaced.
> > 3. Scoring has changed in the last version of Lucene and I need 
> > multilply
> > the score by some factor to make it more int friendly.
> >
> > Can someone shed some light on this please?
> >
> > Thanks,
> >
> > Luke
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 15:53:57 2005
Return-Path: <java-user-return-13639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13225 invoked from network); 10 Mar 2005 15:53:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 15:53:57 -0000
Received: (qmail 33242 invoked by uid 500); 10 Mar 2005 15:53:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33218 invoked by uid 500); 10 Mar 2005 15:53:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33192 invoked by uid 99); 10 Mar 2005 15:53:50 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 07:53:49 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 10 Mar 2005 10:58:40 -0500
Message-ID: <008001c5258a$06a8af80$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: <java-user@lucene.apache.org>
References: <3B530EF12E388B408ECC3162BA8C00F40107A789@ny2526.corp.bloomberg.com> <3ec1951618227a5a29e4884dbbd7a0ee@ehatchersolutions.com>
Subject: Re: Score Question
Date: Thu, 10 Mar 2005 10:58:39 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Mar 2005 15:58:40.0343 (UTC) FILETIME=[07054E70:01C5258A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think I've found my problem. In the example I'm having the problem with I
do a multiple field query.  I think I need to play with my boosting factors.

This is the section of the book that I think will lead to a resolution to my
problem:

In addition to the explicit factors in this equation, other factors can be
computed
on a per-query basis as part of the queryNorm factor. Queries themselves can
have an impact on the document score. Boosting a Query instance is sensible
only
in a multiple-clause query; if only a single term is used for searching,
boosting it
would boost all matched documents equally. In a multiple-clause boolean
query,
some documents may match one clause but not another, enabling the boost
factor
to discriminate between queries. Queries also default to a 1.0 boost factor.

Luke



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 16:08:49 2005
Return-Path: <java-user-return-13640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22868 invoked from network); 10 Mar 2005 16:08:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 16:08:48 -0000
Received: (qmail 63246 invoked by uid 500); 10 Mar 2005 16:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63219 invoked by uid 500); 10 Mar 2005 16:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63206 invoked by uid 99); 10 Mar 2005 16:08:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 08:08:40 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: help with  query format design 
Date: Thu, 10 Mar 2005 11:08:37 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829BE@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Score Question
thread-index: AcUlDPTHDvyvZAm9TLy6sKc3MLndgAAAdlaAAB5y3HA=
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks,

I have a task when I need to read the query entered by the user, add to =
it many other terms in a boolean expression and get the count of each =
clause in a different field.
for examples: if the user enters: red. i need to take red and generate =
the following query(red AND blue) OR (red AND green) OR( red AND =
yellow).  i need to get a count of how many returned documents contain =
(red AND blue) in the "url"(field), and the count in "contnet" and so =
on(I have 5 different fields). i will have to do this for every clause =
in the query that i generate and populate the results in an xml =
document.
if i just have one long query, is there a way to get the count from the =
Hits that way i want, or shall i have multiple queries?
will termDocs and docFreq methods be helpful?.

thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 17:21:20 2005
Return-Path: <java-user-return-13641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61880 invoked from network); 10 Mar 2005 17:21:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 17:21:18 -0000
Received: (qmail 77993 invoked by uid 500); 10 Mar 2005 17:21:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77966 invoked by uid 500); 10 Mar 2005 17:21:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77952 invoked by uid 500); 10 Mar 2005 17:21:06 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 77948 invoked by uid 99); 10 Mar 2005 17:21:06 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.170.205 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 09:21:05 -0800
Received: by rproxy.gmail.com with SMTP id 34so363710rns
        for <lucene-user@jakarta.apache.org>; Thu, 10 Mar 2005 09:21:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=WKYFzKtuU5RP1kQtVrqAODpnTBXbIASR+veSIG7ZIHZeOC3feG4Q54K1J+XrDCoF43+3KZ+US1Ue78JPrVmxfDX72lr2SgBXZRAuVRgKbLUn0UmDIVHhKS8V7rgcEguI1yM+gwOmfTDeyiv5/0+bYWNYlmP4DqxaURujiwKDA4s=
Received: by 10.38.179.14 with SMTP id b14mr663328rnf;
        Thu, 10 Mar 2005 09:21:03 -0800 (PST)
Received: by 10.38.8.67 with HTTP; Thu, 10 Mar 2005 09:21:03 -0800 (PST)
Message-ID: <7b87034105031009215d79acd4@mail.gmail.com>
Date: Thu, 10 Mar 2005 18:21:03 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: what is the index compression technique in lucene ?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hy, 

i would just know what is the index compression technique used in
lucene. where can i find some information about this ?

thanks in advance,
nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 17:24:04 2005
Return-Path: <java-user-return-13642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63638 invoked from network); 10 Mar 2005 17:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 17:24:03 -0000
Received: (qmail 82027 invoked by uid 500); 10 Mar 2005 17:23:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81996 invoked by uid 500); 10 Mar 2005 17:23:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81976 invoked by uid 99); 10 Mar 2005 17:23:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.nstein.com (HELO exmtl01.nstein.com) (206.162.161.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 09:23:57 -0800
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: what is the index compression technique in lucene ?
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6556.0
Date: Thu, 10 Mar 2005 12:23:54 -0500
Message-ID: <CB6D77A564237E43B4C7EF9A6132CD435CCF68@exmtl01.nstein.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: what is the index compression technique in lucene ?
Thread-Index: AcUllY8J3Hy4bQbxTaiqrWToaHqplwAAFgLg
From: "Tate Avery" <tate.avery@nstein.com>
To: <java-user@lucene.apache.org>,
	"Nicolas Maisonneuve" <n.maisonneuve@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


This might be what you are looking for...
http://lucene.apache.org/java/docs/fileformats.html


-----Original Message-----
From: Nicolas Maisonneuve [mailto:n.maisonneuve@gmail.com]
Sent: Thursday, March 10, 2005 12:21 PM
To: Lucene Users List
Subject: what is the index compression technique in lucene ?


hy,=20

i would just know what is the index compression technique used in
lucene. where can i find some information about this ?

thanks in advance,
nicolas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 18:48:37 2005
Return-Path: <java-user-return-13643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18798 invoked from network); 10 Mar 2005 18:48:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 18:48:37 -0000
Received: (qmail 83399 invoked by uid 500); 10 Mar 2005 18:48:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83377 invoked by uid 500); 10 Mar 2005 18:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83362 invoked by uid 99); 10 Mar 2005 18:48:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from artishost.net (HELO artisangel.artishost.net) (69.56.132.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 10:48:30 -0800
Received: from [81.25.38.241] (helo=[81.25.38.241])
	by artisangel.artishost.net with esmtpa (Exim 4.43)
	id 1D9Sh7-0004MM-VV
	for java-user@lucene.apache.org; Thu, 10 Mar 2005 12:47:39 -0600
Date: Thu, 10 Mar 2005 20:48:19 +0200
From: Yura Smolsky <info@altervision.biz>
X-Mailer: The Bat! (v3.0.1.33) Professional
Reply-To: Yura Smolsky <info@altervision.biz>
Organization: AlterVision Web Development Group
X-Priority: 3 (Normal)
Message-ID: <1902747895.20050310204819@altervision.biz>
To: java-user@lucene.apache.org
Subject: highlighter and phrase search
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Spam-Score: 0.0
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - artisangel.artishost.net
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - altervision.biz
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello, java-user.

I have two documents:
1. content:A V A B
2. content:A B C D
When I do search for content:"A B" (exact phrase search) and
StandardAnalyzer(),
when I use Highlighter I receive following highlighted results:

1. _A_ V _A B_
2. _A B_ C D

Actually "A" in the first result does not need to be highlighted b/c
requested keyword was "A B".

Is this a bug or I do not understand something?

Yura Smolsky.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 19:09:50 2005
Return-Path: <java-user-return-13644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31793 invoked from network); 10 Mar 2005 19:09:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 19:09:50 -0000
Received: (qmail 21385 invoked by uid 500); 10 Mar 2005 19:09:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21356 invoked by uid 500); 10 Mar 2005 19:09:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21343 invoked by uid 99); 10 Mar 2005 19:09:46 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp002.mail.ukl.yahoo.com (HELO smtp002.mail.ukl.yahoo.com) (217.12.11.33)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 10 Mar 2005 11:09:45 -0800
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp002.mail.ukl.yahoo.com with SMTP; 10 Mar 2005 19:09:42 -0000
Message-ID: <42309B7A.2090301@yahoo.co.uk>
Date: Thu, 10 Mar 2005 19:09:46 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: highlighter and phrase search
References: <1902747895.20050310204819@altervision.biz>
In-Reply-To: <1902747895.20050310204819@altervision.biz>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The short answer is "no",  there is not support for this currently.
Implementing this support is possible but fiddly- there is a related 
discussion here which outlines some of the challenges :
    http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12435.html

Cheers,
Mark


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 10 19:31:31 2005
Return-Path: <java-user-return-13645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44621 invoked from network); 10 Mar 2005 19:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Mar 2005 19:31:31 -0000
Received: (qmail 65855 invoked by uid 500); 10 Mar 2005 19:31:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65834 invoked by uid 500); 10 Mar 2005 19:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65820 invoked by uid 99); 10 Mar 2005 19:31:26 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from 87.52.220-216.q9.net (HELO mail.futurebrandexp.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 10 Mar 2005 11:31:25 -0800
Received: from p001002 ([204.225.84.27]) by mail.futurebrandexp.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 10 Mar 2005 14:36:16 -0500
Message-ID: <00ba01c525a8$6ca3ba50$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@futurebrand.com>
To: <java-user@lucene.apache.org>
References: <63434C14F9A6F74CB36B85033E4C30CA010829BE@hermes.corp.cyveillance.com>
Subject: Boost/Scoring Question
Date: Thu, 10 Mar 2005 14:36:15 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Mar 2005 19:36:16.0555 (UTC) FILETIME=[6D2127B0:01C525A8]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello;

This may be a trivial questions, but it has me stuck.

I'm getting some really small scores:

8.799379E-4

I need to figure out why they are so small.

I think it is problem which can be resolved using boosting.

I'm not sure how to boost given the system I have. The fields I query
against are not known at the time I create the query, nor are they known
when I index.

Here is how I create a query (the names of the fields I query against are
returned from the ContentFields object):

private static Query parseKeywordsQuery(ArrayList queryData) throws
Exception {
        //get all the content fields
        TreeSet sFields = ContentFields.getInstance().getFields();
        String[] fields = (String[])sFields.toArray(new
String[ContentFields.getInstance().getFields().size()]);
        //get the argument
        String arg = (String) queryData.get(1);
        //create a query
        Query query = MultiFieldQueryParser.parse(arg, fields, new
StandardAnalyzer());
        return query;
    }

Here is the query created for sub-brand:

TEXT:"sub brand" TEXT2:"sub brand" active:"sub brand" anouncement:"sub
brand" businessphone:"sub brand" cellphone:"sub brand" cname:"sub brand"
contents:"sub brand" definition:"sub brand" desc:"sub brand" email:"sub
brand" fax:"sub brand" help_image:"sub brand" homephone:"sub brand"
hotwords:"sub brand" id:"sub brand" jobtitle:"sub brand" kcfileupload:"sub
brand" kcpreviewupload:"sub brand" keywords:"sub brand" level:"sub brand"
level_association:"sub brand" mac_file:"sub brand" name:"sub brand"
note:"sub brand" pc_file:"sub brand" question:"sub brand" sort:"sub brand"
stylesheet:"sub brand" thumbnail:"sub brand" uncomp_ext:"sub brand"
urgent:"sub brand" weblink:"sub brand"

I get 22 results but they are all smaller than 0 by an exponent of 4.

Is there anything I can do to resolve this?

Luke



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 03:13:46 2005
Return-Path: <java-user-return-13646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82387 invoked from network); 11 Mar 2005 03:13:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 03:13:46 -0000
Received: (qmail 76421 invoked by uid 500); 11 Mar 2005 03:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75606 invoked by uid 500); 11 Mar 2005 03:13:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 44146 invoked by uid 99); 10 Mar 2005 13:18:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Highlighter compile error
Date: Thu, 10 Mar 2005 13:21:10 +0000
User-Agent: KMail/1.8
MIME-Version: 1.0
Content-Disposition: inline
Message-Id: <200503101321.10733.mail@andy-roberts.net>
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've search the archives for this error, but it reported no matches...

I'm trying to get hold of the Highlighter code as this could be relevant 
to my earlier post. I've checked out the highlight repo to my PC and 
tried to build.

I get the following error:

$ ant
Buildfile: build.xml

init:
     [echo] Building highlighter

compile:
    [javac] Compiling 17 source files 
to /home/andyr/programming/java/lucene/hig
hlighter/build/classes
    
[javac] /home/andyr/programming/java/lucene/highlighter/src/java/org/apache/
lucene/search/highlight/TokenSources.java:19: cannot find symbol
    [javac] symbol  : class TermVectorOffsetInfo
    [javac] location: package org.apache.lucene.index
    [javac] import org.apache.lucene.index.TermVectorOffsetInfo;
    [javac]                                ^
    
[javac] /home/andyr/programming/java/lucene/highlighter/src/java/org/apache/
lucene/search/highlight/TokenSources.java:124: cannot find symbol
    [javac] symbol  : class TermVectorOffsetInfo
    [javac] location: class org.apache.lucene.search.highlight.TokenSources
    [javac]             TermVectorOffsetInfo[] offsets=tpv.getOffsets(t);
    [javac]             ^
    
[javac] /home/andyr/programming/java/lucene/highlighter/src/java/org/apache/
lucene/search/highlight/TokenSources.java:124: cannot find symbol
    [javac] symbol  : method getOffsets(int)
    [javac] location: interface org.apache.lucene.index.TermPositionVector
    [javac]             TermVectorOffsetInfo[] offsets=tpv.getOffsets(t);
    [javac]                                               ^
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 3 errors

BUILD FAILED
/home/andyr/programming/java/lucene/common.xml:107: Compile failed; see the 
compiler error output for details.

It may not be obvious to those not using fixed-width fonts, but basically it 
can't find the 
TermVectorOffsetInfo class. Which is hardly surprising, since it doesn't seem 
to exist! I've
also downloaded and successfully built the code in the lucene-1.4.2-dev 
branch,
but that doesn't contain that class either!

Any hints? Google didn't shed any light, btw.

Cheers,
Andy Roberts

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 03:41:47 2005
Return-Path: <java-user-return-13647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91261 invoked from network); 11 Mar 2005 03:41:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 03:41:47 -0000
Received: (qmail 98731 invoked by uid 500); 11 Mar 2005 03:41:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98709 invoked by uid 500); 11 Mar 2005 03:41:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 28150 invoked by uid 500); 10 Mar 2005 21:01:45 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of smisra@etouch.net designates 216.31.249.101 as permitted sender)
X-Spam-Filtered: Yes
X-Spam-Status: No, hits=-2.8 required=5.0
From: "Srimant Mishra" <smisra@etouch.net>
To: <lucene-user@jakarta.apache.org>
Subject: case insensitive searches
Date: Thu, 10 Mar 2005 13:04:10 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_08F0_01C52571.A66EF970"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcUltLRztYtWKNtcSmqsky4rqmcljw==
Message-ID: <auto-000008769788@etouch.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_08F0_01C52571.A66EF970
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi all, 

 

              I have a field that has been populated as a keyword e.g.
populated via doc.add(Field.Keyword("ID", "Xyz Abc"));

 

              Is it possible to perform a case insensitive query that is if
I do a search for xyz, the document is returned.

 

 

              I know that this is possible for UnStored fields as they are
stored in lower case formats. 

 

 

-Srimant


------=_NextPart_000_08F0_01C52571.A66EF970--



From java-user-return-13648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 03:50:29 2005
Return-Path: <java-user-return-13648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93743 invoked from network); 11 Mar 2005 03:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 03:50:29 -0000
Received: (qmail 4699 invoked by uid 500); 11 Mar 2005 03:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4666 invoked by uid 500); 11 Mar 2005 03:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 23611 invoked by uid 500); 11 Mar 2005 01:00:45 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of hari.mailinglists@gmail.com designates 64.233.184.202 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=TyZsR4T4wxVTO4xjbpFE1L8pm7no5b8P15hDqglFUCra5LgI7oWqmnpoEq08E3bPHXn0INUT9HnfMEZ9J5JrDPs6EEyu0X5k3rMcD3xmhM6OwVJXgE2bat9O9KvaIn14YtrkrS72sfTcb5UMW3m8BtlRgX6qPBdAxGY8B/KiN6M=
Message-ID: <31d823d905031017006747250c@mail.gmail.com>
Date: Thu, 10 Mar 2005 17:00:41 -0800
From: Hari Kodungallur <hari.mailinglists@gmail.com>
Reply-To: Hari Kodungallur <hari.mailinglists@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Test Fails
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

FYI:

The Lucence test fails with the following error:

compile-test:
    [mkdir] Created dir: /opt/lucene/lucene/build/classes/test
    [javac] Compiling 79 source files to /opt/lucene/lucene/build/classes/test
    [javac] /opt/lucene/lucene/src/test/org/apache/lucene/index/TermInfosTest.java:89:
cannot resolve symbol
    [javac] symbol  : constructor TermInfosWriter
(org.apache.lucene.store.Directory,java.lang.String,org.apache.lucene.index.FieldInfos)
    [javac] location: class org.apache.lucene.index.TermInfosWriter
    [javac]     TermInfosWriter writer = new TermInfosWriter(store,
"words", fis);


I see that TermInfosWriter was changed yesterday to add another
argument to its constructor.

(I am new to this list; could you please reply-all? Mails to
lucene-user-subscribe@jakarta.apache.org are bouncing back and so I
could not subscribe to the list)

Thanks much!
-Hari

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 06:20:01 2005
Return-Path: <java-user-return-13649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48349 invoked from network); 11 Mar 2005 06:20:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 06:20:01 -0000
Received: (qmail 23539 invoked by uid 500); 11 Mar 2005 06:19:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23512 invoked by uid 500); 11 Mar 2005 06:19:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23496 invoked by uid 99); 11 Mar 2005 06:19:57 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31104.mail.mud.yahoo.com (HELO web31104.mail.mud.yahoo.com) (68.142.200.37)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 10 Mar 2005 22:19:56 -0800
Received: (qmail 75743 invoked by uid 60001); 11 Mar 2005 06:19:54 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=5mpc1LJIYfEtwpkO8bn+RGngpBDTFEfYcEPREKhSAPnoyGCjYIhscfnthA0IjVnjBbAULXY+yl5MQ48Sx/eICwlMITKGWL8yWX1KTr4v1PLcQGUPj9HHfrg+kvYd4ISAoYVDnw4Cx9QNB1vVF8Rw/hKnbh5n0zvGoMDUMprF37w=  ;
Message-ID: <20050311061954.75741.qmail@web31104.mail.mud.yahoo.com>
Received: from [69.201.136.9] by web31104.mail.mud.yahoo.com via HTTP; Thu, 10 Mar 2005 22:19:54 PST
Date: Thu, 10 Mar 2005 22:19:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: case insensitive searches
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What typically makes searches case insensitive are Analyzers that
lowercase/normalize tokens, perhaps with LowerCaseTokenizers.  Since
Field.Keyword doesn't get analyzed, you'd have to manually
normalize/lowercase field values before indexing, or just add the raw +
the normalized value under the same field name.  It looks like you'll
have to reindex.

Otis


--- Srimant Mishra <smisra@etouch.net> wrote:
> Hi all, 
> 
>  
> 
>               I have a field that has been populated as a keyword
> e.g.
> populated via doc.add(Field.Keyword("ID", "Xyz Abc"));
> 
>  
> 
>               Is it possible to perform a case insensitive query that
> is if
> I do a search for xyz, the document is returned.
> 
>  
> 
>  
> 
>               I know that this is possible for UnStored fields as
> they are
> stored in lower case formats. 
> 
>  
> 
>  
> 
> -Srimant
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 06:27:07 2005
Return-Path: <java-user-return-13650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51744 invoked from network); 11 Mar 2005 06:27:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 06:27:07 -0000
Received: (qmail 30847 invoked by uid 500); 11 Mar 2005 06:27:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30807 invoked by uid 500); 11 Mar 2005 06:27:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30792 invoked by uid 99); 11 Mar 2005 06:27:03 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31110.mail.mud.yahoo.com (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 10 Mar 2005 22:27:02 -0800
Received: (qmail 46658 invoked by uid 60001); 11 Mar 2005 06:27:00 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Gj/nie6+/e1Z1Ov0+9q1VrhcznGgC+yLjGvNYb3+qkmeRQ25kzIUQDPiBR6HRjuCkCGh7o8JKfUuZaK6odeo6fcazjzwDAwcJa2Hz6bX7vJnpggtNHBbd8lv3D92FDkuIsDqrk0Jbc1Hg6BoH/QDXcAdFUXC/imNbSpr/Klt67A=  ;
Message-ID: <20050311062700.46656.qmail@web31110.mail.mud.yahoo.com>
Received: from [69.201.136.9] by web31110.mail.mud.yahoo.com via HTTP; Thu, 10 Mar 2005 22:27:00 PST
Date: Thu, 10 Mar 2005 22:27:00 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Highlighter compile error
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Andy,

Judging from your path, it looks like you didn't check things out of
SVN.

You'll need a SVN client, and then you could:

  svn co http://svn.apache.org/repos/asf/lucene/java/trunk/

In there you will see a contrib/ directory, and highlighter underneath
it.  Running ant from there builds the Highligher without errors for me
now.

Andy Roberts.... familiar name.  jTokeniser?  I just 'Simpied' you
earlier today: http://www.simpy.com/simpy/User.do?username=otis

Otis


--- Andy Roberts <mail@andy-roberts.net> wrote:
> I've search the archives for this error, but it reported no
> matches...
> 
> I'm trying to get hold of the Highlighter code as this could be
> relevant 
> to my earlier post. I've checked out the highlight repo to my PC and 
> tried to build.
> 
> I get the following error:
> 
> $ ant
> Buildfile: build.xml
> 
> init:
>      [echo] Building highlighter
> 
> compile:
>     [javac] Compiling 17 source files 
> to /home/andyr/programming/java/lucene/hig
> hlighter/build/classes
>     
> [javac]
> /home/andyr/programming/java/lucene/highlighter/src/java/org/apache/
> lucene/search/highlight/TokenSources.java:19: cannot find symbol
>     [javac] symbol  : class TermVectorOffsetInfo
>     [javac] location: package org.apache.lucene.index
>     [javac] import org.apache.lucene.index.TermVectorOffsetInfo;
>     [javac]                                ^
>     
> [javac]
> /home/andyr/programming/java/lucene/highlighter/src/java/org/apache/
> lucene/search/highlight/TokenSources.java:124: cannot find symbol
>     [javac] symbol  : class TermVectorOffsetInfo
>     [javac] location: class
> org.apache.lucene.search.highlight.TokenSources
>     [javac]             TermVectorOffsetInfo[]
> offsets=tpv.getOffsets(t);
>     [javac]             ^
>     
> [javac]
> /home/andyr/programming/java/lucene/highlighter/src/java/org/apache/
> lucene/search/highlight/TokenSources.java:124: cannot find symbol
>     [javac] symbol  : method getOffsets(int)
>     [javac] location: interface
> org.apache.lucene.index.TermPositionVector
>     [javac]             TermVectorOffsetInfo[]
> offsets=tpv.getOffsets(t);
>     [javac]                                               ^
>     [javac] Note: Some input files use unchecked or unsafe
> operations.
>     [javac] Note: Recompile with -Xlint:unchecked for details.
>     [javac] 3 errors
> 
> BUILD FAILED
> /home/andyr/programming/java/lucene/common.xml:107: Compile failed;
> see the 
> compiler error output for details.
> 
> It may not be obvious to those not using fixed-width fonts, but
> basically it 
> can't find the 
> TermVectorOffsetInfo class. Which is hardly surprising, since it
> doesn't seem 
> to exist! I've
> also downloaded and successfully built the code in the
> lucene-1.4.2-dev 
> branch,
> but that doesn't contain that class either!
> 
> Any hints? Google didn't shed any light, btw.
> 
> Cheers,
> Andy Roberts
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 11:12:56 2005
Return-Path: <java-user-return-13651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12970 invoked from network); 11 Mar 2005 11:12:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 11:12:56 -0000
Received: (qmail 22294 invoked by uid 500); 11 Mar 2005 11:12:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22266 invoked by uid 500); 11 Mar 2005 11:12:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22253 invoked by uid 99); 11 Mar 2005 11:12:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO virusscanner1.minfin.be) (193.191.216.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 11 Mar 2005 03:12:47 -0800
Received: from finmfe1-hw.minfin.fed.be (localhost [127.0.0.1])
	by virusscanner1.minfin.be (8.11.6+Sun/8.11.6) with ESMTP id j2BC3JD29020;
	Fri, 11 Mar 2005 12:03:20 GMT
Received: from BEBRULIBOISC ([10.12.2.205])
 by finmfe1.minfin.fed.be (iPlanet Messaging Server 5.2 HotFix 1.14 (built Mar
 18 2003)) with SMTP id <0ID6005PYPX255@finmfe1.minfin.fed.be>; Fri,
 11 Mar 2005 12:15:02 +0100 (MET)
Date: Fri, 11 Mar 2005 12:12:00 +0100
From: Claude Libois <claude.libois@guest.minfin.fed.be>
Subject: Re: what is the index compression technique in lucene ?
To: java-user@lucene.apache.org, Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Message-id: <002001c5262b$25966670$cd020c0a@eu.uis.unisys.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: 7BIT
X-Priority: 3
X-MSMail-priority: Normal
References: <7b87034105031009215d79acd4@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Look at http://lucene.apache.org/java/docs/fileformats.html
You should also buy "Lucene in action" which explain the structure of the
index.
Claude Libois
claude.libois@guest.minfin.fed.be
Technical associate - Unisys

----- Original Message ----- 
From: "Nicolas Maisonneuve" <n.maisonneuve@gmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, March 10, 2005 6:21 PM
Subject: what is the index compression technique in lucene ?


> hy,
>
> i would just know what is the index compression technique used in
> lucene. where can i find some information about this ?
>
> thanks in advance,
> nicolas
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 15:35:57 2005
Return-Path: <java-user-return-13652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58164 invoked from network); 11 Mar 2005 15:35:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 15:35:56 -0000
Received: (qmail 59337 invoked by uid 500); 11 Mar 2005 15:35:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59210 invoked by uid 500); 11 Mar 2005 15:35:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59142 invoked by uid 99); 11 Mar 2005 15:35:45 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of brogar@gmail.com designates 64.233.184.207 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 11 Mar 2005 07:35:44 -0800
Received: by wproxy.gmail.com with SMTP id 71so598022wri
        for <java-user@lucene.apache.org>; Fri, 11 Mar 2005 07:35:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=cxSpMG/84S9jiP7VbnECxT9A9Kr139Rmox5QiIwIgSNbCvX3Red5SExY++P9sumKZCEN+gK1wfciPyxGj1ML8OeXPq1gNzwOcBIQNht862EkBmhq8JgolaehkRpr+4n4RaLO/Od+b415vbBAtyvGTD9P8ztidIbC1M1SyPqVXI0=
Received: by 10.54.40.2 with SMTP id n2mr2538137wrn;
        Fri, 11 Mar 2005 07:35:40 -0800 (PST)
Received: by 10.54.51.72 with HTTP; Fri, 11 Mar 2005 07:35:40 -0800 (PST)
Message-ID: <34cc3b0a050311073577723dcb@mail.gmail.com>
Date: Fri, 11 Mar 2005 10:35:40 -0500
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Webapp Demo throws ArrayIndexOutOfBoundsException on Large index
In-Reply-To: <34cc3b0a05030810316830135d@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <34cc3b0a05030810316830135d@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 8 Mar 2005 13:31:43 -0500, Chris D <brogar@gmail.com> wrote:
> I've been playing with the webapp and attempting to search over two
> indexes that I've created. The first was 700M the second is 2.3G.
> 
> When the webapp attempts to search the second I get a
> "ArrayIndexOutOfBoundsException":
> 
> java.lang.ArrayIndexOutOfBoundsException: -1
>   at java.util.ArrayList.get(ArrayList.java:324)
>   at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
>   at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)
>   ...
>   at org.apache.lucene.index.IndexReader.open(IndexReader.java:95)
> 
> While searching the first works flawlessly. So I figured it might have
> been an index that was broken, I reindexed and ran into the same
> problem. I then wrote a small stand alone java app that searches the
> index and it works just fine.

I did some more investigation... This method is the culprit

  public FieldInfo fieldInfo(int fieldNumber) {
    return (FieldInfo) byNumber.get(fieldNumber);
  }
 
   The fieldNumber is -1 when it's read by 

   return new Term(fieldInfos.fieldName(input.readVInt()),
            new String(buffer, 0, totalLength), false);

   in SegmentTermEnum.readTerm.

Thinking it might be my application I also ran Limo just to check,
Limo (which is also a tomcat application) crashed with the same error.
 Is there an issue with Tomcat and large indexes? Should I be looking
elsewhere for a solution?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 15:48:09 2005
Return-Path: <java-user-return-13653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65836 invoked from network); 11 Mar 2005 15:48:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 15:48:09 -0000
Received: (qmail 84504 invoked by uid 500); 11 Mar 2005 15:47:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84470 invoked by uid 500); 11 Mar 2005 15:47:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84440 invoked by uid 99); 11 Mar 2005 15:47:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from moutng.kundenserver.de (HELO moutng.kundenserver.de) (212.227.126.191)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 11 Mar 2005 07:47:54 -0800
Received: from [212.227.126.208] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1D9mMi-0002b0-00
	for java-user@lucene.apache.org; Fri, 11 Mar 2005 16:47:52 +0100
Received: from [82.135.64.176] (helo=voodoo.federation.net)
	by mrelayng.kundenserver.de with asmtp (TLSv1:RC4-MD5:128)
	(Exim 3.35 #1)
	id 1D9mMh-0003xm-00
	for java-user@lucene.apache.org; Fri, 11 Mar 2005 16:47:51 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: java-user@lucene.apache.org
Subject: Re: Webapp Demo throws ArrayIndexOutOfBoundsException on Large index
Date: Fri, 11 Mar 2005 16:47:50 +0100
User-Agent: KMail/1.7.1
References: <34cc3b0a05030810316830135d@mail.gmail.com> <34cc3b0a050311073577723dcb@mail.gmail.com>
In-Reply-To: <34cc3b0a050311073577723dcb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200503111647.50444.daniel.naber@t-online.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 11 March 2005 16:35, Chris D wrote:

> =A0Is there an issue with Tomcat and large indexes? Should I be looking
> elsewhere for a solution?

Are you sure tomcat uses the same lucene.jar as your standalone test does?

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 11 16:02:57 2005
Return-Path: <java-user-return-13654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73238 invoked from network); 11 Mar 2005 16:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Mar 2005 16:02:56 -0000
Received: (qmail 16288 invoked by uid 500); 11 Mar 2005 16:02:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16138 invoked by uid 500); 11 Mar 2005 16:02:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16120 invoked by uid 99); 11 Mar 2005 16:02:52 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of brogar@gmail.com designates 64.233.184.195 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 11 Mar 2005 08:02:52 -0800
Received: by wproxy.gmail.com with SMTP id 69so1292043wra
        for <java-user@lucene.apache.org>; Fri, 11 Mar 2005 08:02:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=EwHrq1uFiOcrzg60tcZZJiEqlFM5Zz3y7HVgXOIClJK+8QwbKNa1LWxkUDnmjvswdia59htk39AEjN4bGykkbmVZrwuS0ED0sSm0WAIPUNaDy3Q2yU8o3SFuouGV+d3vd60N1wpzObaeJXhoGU7oSEtFnfZRhxTJixSVKBlU/18=
Received: by 10.54.10.39 with SMTP id 39mr2684029wrj;
        Fri, 11 Mar 2005 08:02:49 -0800 (PST)
Received: by 10.54.51.72 with HTTP; Fri, 11 Mar 2005 08:02:49 -0800 (PST)
Message-ID: <34cc3b0a050311080278e7c52b@mail.gmail.com>
Date: Fri, 11 Mar 2005 11:02:49 -0500
From: Chris D <brogar@gmail.com>
Reply-To: Chris D <brogar@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Webapp Demo throws ArrayIndexOutOfBoundsException on Large index
In-Reply-To: <200503111647.50444.daniel.naber@t-online.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <34cc3b0a05030810316830135d@mail.gmail.com>
	 <34cc3b0a050311073577723dcb@mail.gmail.com>
	 <200503111647.50444.daniel.naber@t-online.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, 11 Mar 2005 16:47:50 +0100, Daniel Naber
<daniel.naber@t-online.de> wrote:
> On Friday 11 March 2005 16:35, Chris D wrote:
> 
> >  Is there an issue with Tomcat and large indexes? Should I be looking
> > elsewhere for a solution?
> 
> Are you sure tomcat uses the same lucene.jar as your standalone test does?
> 
> Regards
>  Daniel
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

It was, but along that train of thought I updated to a more recent
lucene.jar (out of CVS) and it's remedied the situation.

Many thanks.
Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 12 02:23:01 2005
Return-Path: <java-user-return-13655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39453 invoked from network); 12 Mar 2005 02:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Mar 2005 02:23:00 -0000
Received: (qmail 76823 invoked by uid 500); 12 Mar 2005 02:22:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76783 invoked by uid 500); 12 Mar 2005 02:22:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76600 invoked by uid 99); 12 Mar 2005 02:22:54 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31107.mail.mud.yahoo.com (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 11 Mar 2005 18:22:52 -0800
Received: (qmail 82769 invoked by uid 60001); 12 Mar 2005 02:22:51 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=kX1D/umXhQr+VY8cCqo/8NHclKyFbsbbFI40Qq8HcBm2b/q+JoviPMgDq6+2xkjvf5m8N32arZuZW+zOfWVimAZVZNPyp4VmiTjxjIdocJkknaFPK5rQln7MbmUgqOaO8U9MYToDBT+OZi3G1UUPwQEvfvYtoT7ozGal9zTP35Y=  ;
Message-ID: <20050312022251.82767.qmail@web31107.mail.mud.yahoo.com>
Received: from [69.201.136.9] by web31107.mail.mud.yahoo.com via HTTP; Fri, 11 Mar 2005 18:22:50 PST
Date: Fri, 11 Mar 2005 18:22:50 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: TSS interview with Doug Cutting
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nobody posted a link, but I'm sure lots of people here would be
interested in TSS' interview with Doug Cutting:

  http://theserverside.com/news/thread.tss?thread_id=32509

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 12 03:31:18 2005
Return-Path: <java-user-return-13656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58982 invoked from network); 12 Mar 2005 03:31:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Mar 2005 03:31:18 -0000
Received: (qmail 30859 invoked by uid 500); 12 Mar 2005 03:31:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30832 invoked by uid 500); 12 Mar 2005 03:31:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30819 invoked by uid 99); 12 Mar 2005 03:31:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 209-254-108-74.ip.mcleodusa.net (HELO enigmastation.com) (209.254.108.74)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 11 Mar 2005 19:31:12 -0800
Received: from joeo (helo=localhost)
	by enigmastation.com with local-esmtp (Exim 4.44)
	id 1D9xLC-0004eT-Jm
	for java-user@lucene.apache.org; Fri, 11 Mar 2005 22:31:02 -0500
Date: Fri, 11 Mar 2005 22:31:02 -0500 (EST)
From: "Joseph B. Ottinger" <joeo@enigmastation.com>
To: java-user@lucene.apache.org
Subject: Re: TSS interview with Doug Cutting
In-Reply-To: <20050312022251.82767.qmail@web31107.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.62.0503112230470.4426@enigmastation.com>
References: <20050312022251.82767.qmail@web31107.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I know *I* found it of interest... :)

On Fri, 11 Mar 2005, Otis Gospodnetic wrote:

> Nobody posted a link, but I'm sure lots of people here would be
> interested in TSS' interview with Doug Cutting:
>
>  http://theserverside.com/news/thread.tss?thread_id=32509

-----------------------------------------------------------------------
Joseph B. Ottinger                             http://enigmastation.com
Editor, http://www.TheServerSide.com             joeo@enigmastation.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 12 05:12:47 2005
Return-Path: <java-user-return-13657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93577 invoked from network); 12 Mar 2005 05:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Mar 2005 05:12:46 -0000
Received: (qmail 93639 invoked by uid 500); 12 Mar 2005 05:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93610 invoked by uid 500); 12 Mar 2005 05:12:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93597 invoked by uid 500); 12 Mar 2005 05:12:43 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 93592 invoked by uid 99); 12 Mar 2005 05:12:43 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31105.mail.mud.yahoo.com (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 11 Mar 2005 21:12:41 -0800
Received: (qmail 80086 invoked by uid 60001); 12 Mar 2005 05:12:39 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=gmJmxKDkQyHXznxJ1TYPLhe2OL3cp8FY1yX3TMpBkyJtAkzwNCgJxywea+Fs0pmY0FcZDjsiiEGDP4KyeBEwdAQsjMgGgi/h8bdgyTCkMhQN1NwgsuBC3H2Niiy4sbVDEh3sFhMorgABo/sq6AReD+La08yt7ZFzcmWIgnyt2PQ=  ;
Message-ID: <20050312051239.80084.qmail@web31105.mail.mud.yahoo.com>
Received: from [69.201.136.9] by web31105.mail.mud.yahoo.com via HTTP; Fri, 11 Mar 2005 21:12:39 PST
Date: Fri, 11 Mar 2005 21:12:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Reloading LARGE index causes OutOfMemory... intern Terms?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kevin, have you tried interning Terms, and did that have the desired
effect?

Otis

--- "Kevin A. Burton" <burton@newsmonster.org> wrote:
> We nighly optimizing one of our main indexes which takes up about 70%
> of 
> system memory when loaded due to Term objects being stored in memory.
> 
> We perform the optimization out of process then tell Tomcat to reload
> 
> its index.  This then causes us to open the index again which would
> need 
> 140% of system memory and so causes an  OutOfMemory exception.
> 
> Whats the best way to handle this?  Do I open the index again or is 
> there a better way to tell Lucene that I'm reloading an existing
> index 
> so it uses less memory?
> 
> Is it possible to intern the Term objects so that I only have one
> term 
> per virtual machine instead of one per index?
> 
> Kevin
> 
> -- 
> 
> Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an
> 
> invite!  Also see irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
> If you're interested in RSS, Weblogs, Social Networking, etc... then
> you 
> should work for Rojo!  If you recommend someone and we hire them
> you'll 
> get a free iPod!
>     
> Kevin A. Burton, Location - San Francisco, CA
>        AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 07:06:19 2005
Return-Path: <java-user-return-13658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55825 invoked from network); 14 Mar 2005 07:06:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 07:06:19 -0000
Received: (qmail 54913 invoked by uid 500); 14 Mar 2005 07:06:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54548 invoked by uid 500); 14 Mar 2005 07:06:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54534 invoked by uid 99); 14 Mar 2005 07:06:14 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 13 Mar 2005 23:06:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 9DDB35B7A1; Sun, 13 Mar 2005 23:06:07 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8CC247F45C
	for <java-user@lucene.apache.org>; Sun, 13 Mar 2005 23:06:07 -0800 (PST)
Date: Sun, 13 Mar 2005 23:06:07 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Assorted questions
In-Reply-To: <20050309025348.35486.qmail@web31109.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.58.0503132259420.1478@hal.rescomp.berkeley.edu>
References: <20050309025348.35486.qmail@web31109.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


: Note the hit in section 6.5.1 - the fact that we used range queries in
: the performance section is an indicator that one can really mess things
: up if using range queries injudiciously. :)  In particular, the typical
: advice is to try to round the time information, to avoid costly range
: queries.  Seconds sound like trouble.

I hate to sound like a broken record, but in my opinion, there is no
reason to ever do a "RangeQuery" on dates.  Using a "DateFilter" (or a
"RangeFilter") on the other hand, might make a lot of sense -- and doesn't
suffer from any of RangeQuery's downsides.

     See "Using a Filter Instead" in...
     http://wiki.apache.org/jakarta-lucene/DateRangeQueries


: > I needed to return my hits list in date/time order (instead of
: > relevancy).  So, I implemented a class that converted dates to an int
: > and stored the integer as a field in my index.  I passed a Sort
: > object
: > to the IndexSearcher (indicating that the sort field was convertible
: > to
: > int) to get things back in date/time order.  It works great.
: >
: >
: >
: > Now I need to do a search within a date/time range (e.g., all the
: > documents between 1/1/2005 00:00:00 to 1/5/2005 23:59:59).  It
: > appears
: > that there is no way to use the integer date to do the range search
: > since Lucene is really looking at the string representation of the
: > int.
: > Even prefixing enough zeros to make all of the integers the same
: > length
: > doesn't help (darn negative numbers).
: >
: >
: >
: > Have I missed something?  Or, will I need to put some kind of
: > date/time
: > string that looks like "20050308172533" (for 3/8/2005 17:25:33) in
: > the
: > index?
: >
: >
: >
: > My second question is whether range searches are efficient?  I seem
: > to
: > recall reading somewhere that range searches get converted to a list
: > of
: > the individual items.  Since a day has 86,400 seconds, a few days
: > worth
: > of searching would require a very large list.  Please tell me that
: > I'm
: > out-in-the-weeds on my recall and that range searches are efficient
: > (i.e., it's effectively just doing a string compare with the start
: > and
: > end terms).
: >
: >
: >
: > Scott
: >
: >
: >
: >
: >
: >
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 07:15:33 2005
Return-Path: <java-user-return-13659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65155 invoked from network); 14 Mar 2005 07:15:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 07:15:33 -0000
Received: (qmail 72111 invoked by uid 500); 14 Mar 2005 07:15:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71872 invoked by uid 500); 14 Mar 2005 07:15:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71857 invoked by uid 500); 14 Mar 2005 07:15:27 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 71853 invoked by uid 99); 14 Mar 2005 07:15:27 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FORGED_RCVD_HELO,HTML_90_100,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from lan-202-144-61-68.maa.sify.net (HELO delmail1.sapient.com) (202.144.61.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 13 Mar 2005 23:15:25 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C52865.8A91C9F2"
Subject: Limit on number of search documents
Date: Mon, 14 Mar 2005 12:45:03 +0530
Message-ID: <88B56FBAEB84EC448511C30CD63D3F8A0279F807@delmail1.sapient.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Limit on number of search documents
Thread-Index: AcUoZZSjwuREX3RDR4ui0fYxn5Lafg==
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C52865.8A91C9F2
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We have an application which needs to index over 50, 000 documents which
will go up to 250,000 documents in the next two years. We have been
using Lucene to generate indexes so far. I was wondering if there is a
limit to number of search documents which Lucene can handle?
=20
Thanks and regards
Neelam Bhatnagar
=20

------_=_NextPart_001_01C52865.8A91C9F2--

From java-user-return-13660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 09:50:05 2005
Return-Path: <java-user-return-13660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12835 invoked from network); 14 Mar 2005 09:50:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 09:50:05 -0000
Received: (qmail 74072 invoked by uid 500); 14 Mar 2005 09:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74038 invoked by uid 500); 14 Mar 2005 09:50:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74022 invoked by uid 99); 14 Mar 2005 09:50:01 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=HTML_MESSAGE,SUBJ_ALL_CAPS,UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 14 Mar 2005 01:49:59 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IDC5Z100.OQR for <java-user@lucene.apache.org>; Mon, 14
          Mar 2005 15:19:49 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: SPECIFIC HIT
Date: Mon, 14 Mar 2005 15:09:22 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKMEHOCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_000C_01C528A7.CDAE0330"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000C_01C528A7.CDAE0330
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000D_01C528A7.CDAE0330"


------=_NextPart_001_000D_01C528A7.CDAE0330
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



Hi  Guys

Apologies...........

I have Indexed documents sucessfully and they would be

Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA
Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES
Document 3 contains   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
Document 4 contains  =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
Document 5 contains  =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIES
Document 6 contains  =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
ACCESSORIES
Document 7 contains  =   ELECTRONICS  DIGITAL CAMERA APPERAL ACCESSORIES

On Search  "Digital Camera Optics" , How to get hits return me 3rd Document
ONLY
instead of other Documents  [ The word DIGITAL CAMERA is common word in all
cases].


Thx in advance
Karthik






















WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_000D_01C528A7.CDAE0330
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D781312509-14032005><FONT face=3DVerdana =
size=3D2><STRONG>Hi&nbsp;=20
Guys</STRONG></FONT></SPAN></P>
<P><SPAN class=3D781312509-14032005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies...........</FONT></STRONG></SPAN></P><SPAN=20
class=3D781312509-14032005>
<P><SPAN class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>I=20
have&nbsp;<SPAN class=3D781312509-14032005>Indexed</SPAN><SPAN=20
class=3D781312509-14032005>&nbsp;</SPAN>documents<SPAN =
class=3D781312509-14032005>=20
</SPAN><SPAN class=3D781312509-14032005>sucessfully and they would be=20
</SPAN><BR><BR></FONT></STRONG></SPAN><SPAN=20
class=3D718081309-09032005><STRONG><FONT face=3DVerdana =
size=3D2>Document 1=20
contains&nbsp; &nbsp;=3D&nbsp;&nbsp;ELECTRONICS &nbsp;DIGITAL CAMERA=20
<BR></FONT></STRONG></SPAN><SPAN =
class=3D718081309-09032005><STRONG><FONT=20
size=3D+0><FONT face=3DVerdana><FONT size=3D2><SPAN=20
class=3D718081309-09032005><STRONG>Document&nbsp;<SPAN=20
class=3D781312509-14032005>2</SPAN> contains&nbsp; =
&nbsp;=3D&nbsp;&nbsp;ELECTRONICS=20
&nbsp;DIGITAL CAMERA&nbsp;<SPAN class=3D781312509-14032005>BATTERY=20
ACCESSORIES</SPAN></STRONG></SPAN><BR><SPAN=20
class=3D718081309-09032005><STRONG>Document&nbsp;<SPAN=20
class=3D781312509-14032005>3</SPAN> contains</STRONG></SPAN>&nbsp;&nbsp; =
=3D&nbsp;=20
ELECTRONICS&nbsp; DIGITAL CAMERA 0PTICS<BR><SPAN=20
class=3D718081309-09032005><STRONG>Document&nbsp;<SPAN=20
class=3D781312509-14032005>4</SPAN> contains</STRONG></SPAN>&nbsp; =
=3D&nbsp;&nbsp;=20
ELECTRONICS&nbsp; DIGITAL CAMERA=20
ACCESSORIES<BR></FONT></FONT></FONT></STRONG></SPAN></SPAN><STRONG><FONT =

face=3DVerdana><FONT size=3D2><SPAN=20
class=3D718081309-09032005><STRONG>Document&nbsp;<SPAN=20
class=3D781312509-14032005>5</SPAN> contains</STRONG></SPAN>&nbsp; =
=3D&nbsp;&nbsp;=20
ELECTRONICS&nbsp; DIGITAL CAMERA&nbsp;</FONT></FONT><SPAN=20
class=3D781312509-14032005><FONT face=3DVerdana size=3D2>CABEL=20
ACCESSORIES<BR></FONT></SPAN></STRONG><STRONG><SPAN=20
class=3D781312509-14032005><FONT face=3DVerdana><FONT size=3D2><SPAN=20
class=3D718081309-09032005><STRONG>Document&nbsp;6 =
contains</STRONG></SPAN>&nbsp;=20
=3D&nbsp;&nbsp; ELECTRONICS&nbsp; DIGITAL CAMERA&nbsp;OPTICS CABEL<SPAN=20
class=3D781312509-14032005> ACCESSORIES</SPAN><BR><SPAN=20
class=3D718081309-09032005><STRONG>Document&nbsp;7 =
contains</STRONG></SPAN>&nbsp;=20
=3D&nbsp;&nbsp; ELECTRONICS&nbsp; DIGITAL CAMERA&nbsp;APPERAL<SPAN=20
class=3D781312509-14032005> =
ACCESSORIES</SPAN></FONT></FONT></SPAN></STRONG></P>
<P><SPAN class=3D781312509-14032005><FONT face=3DVerdana =
size=3D2><STRONG>On=20
Search&nbsp; "Digital Camera Optics" , How to get hits return =
me&nbsp;3rd=20
Document ONLY <BR></STRONG></FONT></SPAN><SPAN =
class=3D781312509-14032005><FONT=20
face=3DVerdana size=3D2><STRONG>instead of other Documents&nbsp; [ The =
word DIGITAL=20
CAMERA&nbsp;is common word in all cases].<BR></STRONG></FONT></SPAN></P>
<P><SPAN class=3D781312509-14032005><STRONG><FONT face=3DVerdana =
size=3D2>Thx in=20
advance<BR></FONT></STRONG></SPAN><SPAN =
class=3D781312509-14032005><STRONG><FONT=20
face=3DVerdana size=3D2>Karthik</FONT></STRONG></SPAN></P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P><IMG height=3D85 src=3D"cid:750523809@14032005-1fae" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_000D_01C528A7.CDAE0330--

------=_NextPart_000_000C_01C528A7.CDAE0330--


From java-user-return-13661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 10:19:12 2005
Return-Path: <java-user-return-13661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35301 invoked from network); 14 Mar 2005 10:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 10:19:12 -0000
Received: (qmail 21813 invoked by uid 500); 14 Mar 2005 10:19:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21790 invoked by uid 500); 14 Mar 2005 10:19:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21774 invoked by uid 99); 14 Mar 2005 10:19:08 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 02:19:07 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 14 Mar 2005 11:19:04 +0100
Message-ID: <42356518.3050200@ifit.uni-klu.ac.at>
Date: Mon, 14 Mar 2005 11:19:04 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SPECIFIC HIT
References: <OBELINLGKPEMCIEIJJNKMEHOCCAA.karthik@controlnet.co.in>
In-Reply-To: <OBELINLGKPEMCIEIJJNKMEHOCCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Mar 2005 10:19:04.0937 (UTC) FILETIME=[3FFC1590:01C5287F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Karthik N S wrote:

> ** 
>
> *Hi  Guys*
>
> *Apologies...........*
>
> *I have Indexed documents sucessfully and they would be
>
> **Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA
> ***Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA BATTERY 
> ACCESSORIES*
> *Document 3 contains*   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
> *Document 4 contains*  =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
> *
>
> **Document 5 contains*  =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIES
> ***Document 6 contains*  =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL 
> ACCESSORIES
> *Document 7 contains*  =   ELECTRONICS  DIGITAL CAMERA APPERAL 
> ACCESSORIES*
>
> *On Search  "Digital Camera Optics" , How to get hits return me 3rd 
> Document ONLY
> **instead of other Documents  [ The word DIGITAL CAMERA is common word 
> in all cases].
> *
>
> *Thx in advance
> **Karthik*
>

You cannot get just the 3rd document.
If you set default operator to AND in queryparser, then you will the 3rd 
and the 6th document.

your query must look like:

+digital +camera +optics

 Best,

  Sergiu

>  
>
>  
>
>  
>
>  
>
>  
>
>  
>
>  
>
>  
>
>  
>
>  
>
>
> *WITH WARM REGARDS
> HAVE A NICE DAY
> [ N.S.KARTHIK]*
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 10:24:47 2005
Return-Path: <java-user-return-13662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40282 invoked from network); 14 Mar 2005 10:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 10:24:47 -0000
Received: (qmail 34491 invoked by uid 500); 14 Mar 2005 10:24:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34384 invoked by uid 500); 14 Mar 2005 10:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34320 invoked by uid 99); 14 Mar 2005 10:24:34 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO asknow-pdc.asknow.nl) (193.173.68.49)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 02:24:33 -0800
content-class: urn:content-classes:message
Subject: RE: SPECIFIC HIT
MIME-Version: 1.0
Content-Type: text/plain;
	charset="windows-1250"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 14 Mar 2005 11:25:29 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Message-ID: <660D6C0C43326D4DB5AE8C152D72322516B3C4@asknow-pdc.asknow.nl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: SPECIFIC HIT
Thread-Index: AcUof2cJ6WY/qun6S4qkmry8tMMKGwAAEzIQ
From: "Bram Kouwenberg" <b.kouwenberg@asknow.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well,

If I understand the workings of the TF/IDF model used by Lucene =
correctly, then doc 6 should score lower than 3 because of the extra =
noise caused by 'CABEL ACCESSORIES', and setting the threshold high =
enough for feedback of the highest score should do the trick. Right?
=20
Bram Kouwenberg

-----Oorspronkelijk bericht-----
Van: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]=20
Verzonden: maandag 14 maart 2005 11:19
Aan: java-user@lucene.apache.org
Onderwerp: Re: SPECIFIC HIT

Karthik N S wrote:

> **=20
>
> *Hi  Guys*
>
> *Apologies...........*
>
> *I have Indexed documents sucessfully and they would be
>
> **Document 1 contains   =3D  ELECTRONICS  DIGITAL CAMERA
> ***Document 2 contains   =3D  ELECTRONICS  DIGITAL CAMERA BATTERY=20
> ACCESSORIES*
> *Document 3 contains*   =3D  ELECTRONICS  DIGITAL CAMERA 0PTICS
> *Document 4 contains*  =3D   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
> *
>
> **Document 5 contains*  =3D   ELECTRONICS  DIGITAL CAMERA CABEL =
ACCESSORIES
> ***Document 6 contains*  =3D   ELECTRONICS  DIGITAL CAMERA OPTICS =
CABEL=20
> ACCESSORIES
> *Document 7 contains*  =3D   ELECTRONICS  DIGITAL CAMERA APPERAL=20
> ACCESSORIES*
>
> *On Search  "Digital Camera Optics" , How to get hits return me 3rd=20
> Document ONLY
> **instead of other Documents  [ The word DIGITAL CAMERA is common word =

> in all cases].
> *
>
> *Thx in advance
> **Karthik*
>

You cannot get just the 3rd document.
If you set default operator to AND in queryparser, then you will the 3rd =

and the 6th document.

your query must look like:

+digital +camera +optics

 Best,

  Sergiu

> =20
>
> =20
>
> =20
>
> =20
>
> =20
>
> =20
>
> =20
>
> =20
>
> =20
>
> =20
>
>
> *WITH WARM REGARDS
> HAVE A NICE DAY
> [ N.S.KARTHIK]*
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--=20
No virus found in this incoming message.
Checked by AVG Anti-Virus.
Version: 7.0.308 / Virus Database: 266.7.2 - Release Date: 11-3-2005
=20

--=20
No virus found in this outgoing message.
Checked by AVG Anti-Virus.
Version: 7.0.308 / Virus Database: 266.7.2 - Release Date: 11-3-2005
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 10:34:53 2005
Return-Path: <java-user-return-13663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48356 invoked from network); 14 Mar 2005 10:34:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 10:34:53 -0000
Received: (qmail 46894 invoked by uid 500); 14 Mar 2005 10:34:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46864 invoked by uid 500); 14 Mar 2005 10:34:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46849 invoked by uid 99); 14 Mar 2005 10:34:49 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 14 Mar 2005 02:34:48 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IDC8VC00.MWC for <java-user@lucene.apache.org>; Mon, 14
          Mar 2005 16:22:24 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: SPECIFIC HIT
Date: Mon, 14 Mar 2005 16:11:57 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-reply-to: <42356518.3050200@ifit.uni-klu.ac.at>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys

Is there a way around for which the query parser would  have something like
this

   (+digital +camera +optics) -(All other Default variables)

But a run time Once cannot determine the default values.

I am stuck in between for this cause ........  :(D

-----Original Message-----
From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
Sent: Monday, March 14, 2005 3:49 PM
To: java-user@lucene.apache.org
Subject: Re: SPECIFIC HIT


Karthik N S wrote:

> **
>
> *Hi  Guys*
>
> *Apologies...........*
>
> *I have Indexed documents sucessfully and they would be
>
> **Document 1 contains   =  ELECTRONICS  DIGITAL CAMERA
> ***Document 2 contains   =  ELECTRONICS  DIGITAL CAMERA BATTERY
> ACCESSORIES*
> *Document 3 contains*   =  ELECTRONICS  DIGITAL CAMERA 0PTICS
> *Document 4 contains*  =   ELECTRONICS  DIGITAL CAMERA ACCESSORIES
> *
>
> **Document 5 contains*  =   ELECTRONICS  DIGITAL CAMERA CABEL ACCESSORIES
> ***Document 6 contains*  =   ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
> ACCESSORIES
> *Document 7 contains*  =   ELECTRONICS  DIGITAL CAMERA APPERAL
> ACCESSORIES*
>
> *On Search  "Digital Camera Optics" , How to get hits return me 3rd
> Document ONLY
> **instead of other Documents  [ The word DIGITAL CAMERA is common word
> in all cases].
> *
>
> *Thx in advance
> **Karthik*
>

You cannot get just the 3rd document.
If you set default operator to AND in queryparser, then you will the 3rd
and the 6th document.

your query must look like:

+digital +camera +optics

 Best,

  Sergiu

>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> *WITH WARM REGARDS
> HAVE A NICE DAY
> [ N.S.KARTHIK]*
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 10:48:03 2005
Return-Path: <java-user-return-13664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62263 invoked from network); 14 Mar 2005 10:48:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 10:48:02 -0000
Received: (qmail 61570 invoked by uid 500); 14 Mar 2005 10:47:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61540 invoked by uid 500); 14 Mar 2005 10:47:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61525 invoked by uid 99); 14 Mar 2005 10:47:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 02:47:56 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 14 Mar 2005 11:47:54 +0100
Message-ID: <42356BDA.30407@ifit.uni-klu.ac.at>
Date: Mon, 14 Mar 2005 11:47:54 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SPECIFIC HIT
References: <OBELINLGKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in>
In-Reply-To: <OBELINLGKPEMCIEIJJNKEEIACCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 14 Mar 2005 10:47:54.0305 (UTC) FILETIME=[46C4B310:01C52883]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Karthik N S wrote:

>Hi Guys
>
>Is there a way around for which the query parser would  have something like
>this
>
>   (+digital +camera +optics) -(All other Default variables)
>  
>
>But a run time Once cannot determine the default values.
>
>I am stuck in between for this cause ........  :(D
>  
>
You can ask the user to provide mandatory terms and optional terms and 
then combine the queries in a

mandatory : digital camera optics
optional: battery cable

an then create the query: +digital  +camera +optics battery cable

Hope it helps even if I don't know if I undestood your problem correctly.

 Sergiu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 11:09:15 2005
Return-Path: <java-user-return-13665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84475 invoked from network); 14 Mar 2005 11:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 11:09:15 -0000
Received: (qmail 3383 invoked by uid 500); 14 Mar 2005 11:09:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2868 invoked by uid 500); 14 Mar 2005 11:09:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2851 invoked by uid 99); 14 Mar 2005 11:09:09 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 14 Mar 2005 03:09:07 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IDC9XE00.DPK for <java-user@lucene.apache.org>; Mon, 14
          Mar 2005 16:45:14 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: SPECIFIC HIT
Date: Mon, 14 Mar 2005 16:34:47 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKMEIACCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <42356BDA.30407@ifit.uni-klu.ac.at>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys

The process is correct ,
but It is Impossible to have the optional terms.

The Documents we Index is in millions with similar word trailers .


Any other Ideas , Please advise....

Thx in advance
Karthik

-----Original Message-----
From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
Sent: Monday, March 14, 2005 4:18 PM
To: java-user@lucene.apache.org
Subject: Re: SPECIFIC HIT


Karthik N S wrote:

>Hi Guys
>
>Is there a way around for which the query parser would  have something like
>this
>
>   (+digital +camera +optics) -(All other Default variables)
>
>
>But a run time Once cannot determine the default values.
>
>I am stuck in between for this cause ........  :(D
>
>
You can ask the user to provide mandatory terms and optional terms and
then combine the queries in a

mandatory : digital camera optics
optional: battery cable

an then create the query: +digital  +camera +optics battery cable

Hope it helps even if I don't know if I undestood your problem correctly.

 Sergiu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 11:54:45 2005
Return-Path: <java-user-return-13666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29565 invoked from network); 14 Mar 2005 11:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 11:54:45 -0000
Received: (qmail 71170 invoked by uid 500); 14 Mar 2005 11:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71137 invoked by uid 500); 14 Mar 2005 11:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71121 invoked by uid 99); 14 Mar 2005 11:54:42 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 03:54:40 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id B50E91EF0A
	for <java-user@lucene.apache.org>; Mon, 14 Mar 2005 13:54:33 +0200 (EET)
Message-ID: <42357B7E.3000709@i-hypergrid.com>
Date: Mon, 14 Mar 2005 13:54:38 +0200
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: WildCard search replacement
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all.

 

I have large index of documents (about 1.6 millions)

One field (for example called number) contains string of digits.

 I need to do wildcard search on this field such as *expression* (i.e. 
all documents that contains expression in this field.

 
When I run such search with very short expression (i.e. "*321") I get 
OutOfMemoryError or TooManyClauses Exception. (This case depends on 
BooleanQuery.maxClauseCount setting).

 So I found following workaround. I index this field as sequence of 
terms, each of containing single digit from needed value. (For example I 
have 123214213 value that needs to be indexed. Then it will be indexed 
as sequence of 1,2,3,2,1,4,2,1,3 terms.) This can be 
done by custom Analyzer class.

 
To search in this by wildcard query I do search by PhraseQuery, which 
contains single digit terms.

 For example: to search documents which contains 321 in field named 
number I create following PhraseQuery:

    PhraseQuery phraseQuery = new PhraseQuery();

    phraseQuery.add(new Term("number ","3"));

    phraseQuery.add(new Term("number ","2"));

    phraseQuery.add(new Term("number ","1"));

 
This approach works faster in case when you need to do search by very 
short expression and never run out of memory (or throws TooManyClauses 
Exception).

 
I think this can be useful for someone who needs similar functionality.

Also any comments are appreciated.

 

Regards,

Volodymyr Bychkoviak

 

 

 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 17:19:34 2005
Return-Path: <java-user-return-13667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63146 invoked from network); 14 Mar 2005 17:19:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 17:19:34 -0000
Received: (qmail 98302 invoked by uid 500); 14 Mar 2005 17:19:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98269 invoked by uid 500); 14 Mar 2005 17:19:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98254 invoked by uid 99); 14 Mar 2005 17:19:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 09:19:29 -0800
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DAtDr-0006Wh-00
	for <java-user@lucene.apache.org>; Mon, 14 Mar 2005 17:19:20 +0000
Subject: Removing similar documents from search results
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Mon, 14 Mar 2005 17:19:24 +0000
Message-Id: <1110820764.11418.36.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Has anyone tried to remove similar documents from their search results?
It looks like Google does some on the fly filtering of the results,
hiding pages which is thinks are too similar, i.e. when you see:

"In order to show you the most relevant results, we have omitted some
entries very similar to the 7 already displayed.
If you like, you can repeat the search with the omitted results
included."

at the bottom of the page.

Is there anything in Lucene or one of the contrib packages that compares
two documents?



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 17:57:39 2005
Return-Path: <java-user-return-13668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79996 invoked from network); 14 Mar 2005 17:57:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 17:57:39 -0000
Received: (qmail 59500 invoked by uid 500); 14 Mar 2005 17:57:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59479 invoked by uid 500); 14 Mar 2005 17:57:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59465 invoked by uid 99); 14 Mar 2005 17:57:34 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from libra.cs.put.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 09:57:34 -0800
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 744873923
	for <java-user@lucene.apache.org>; Mon, 14 Mar 2005 18:57:30 +0100 (CET)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 4898B3913
	for <java-user@lucene.apache.org>; Mon, 14 Mar 2005 18:57:30 +0100 (CET)
Message-ID: <4235D01D.9020301@cs.put.poznan.pl>
Date: Mon, 14 Mar 2005 18:55:41 +0100
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Removing similar documents from search results
References: <1110820764.11418.36.camel@saturn>
In-Reply-To: <1110820764.11418.36.camel@saturn>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Miles :)

I can imagine if you apply clustering to search results anyway then the 
information about clusters can help you determine 'similar' results and 
reorder the output list.

Just a thought.

D.


Miles Barr wrote:
> Has anyone tried to remove similar documents from their search results?
> It looks like Google does some on the fly filtering of the results,
> hiding pages which is thinks are too similar, i.e. when you see:
> 
> "In order to show you the most relevant results, we have omitted some
> entries very similar to the 7 already displayed.
> If you like, you can repeat the search with the omitted results
> included."
> 
> at the bottom of the page.
> 
> Is there anything in Lucene or one of the contrib packages that compares
> two documents?
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 18:09:18 2005
Return-Path: <java-user-return-13669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85095 invoked from network); 14 Mar 2005 18:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 18:09:18 -0000
Received: (qmail 73769 invoked by uid 500); 14 Mar 2005 18:09:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73743 invoked by uid 500); 14 Mar 2005 18:09:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73729 invoked by uid 99); 14 Mar 2005 18:09:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 10:09:10 -0800
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DAtzq-0001Ra-00; Mon, 14 Mar 2005 18:08:54 +0000
Subject: Re: Removing similar documents from search results
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
In-Reply-To: <4235D01D.9020301@cs.put.poznan.pl>
References: <1110820764.11418.36.camel@saturn>
	 <4235D01D.9020301@cs.put.poznan.pl>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Mon, 14 Mar 2005 18:08:59 +0000
Message-Id: <1110823739.11418.45.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Dawid,

On Mon, 2005-03-14 at 18:55 +0100, Dawid Weiss wrote:
> I can imagine if you apply clustering to search results anyway then the 
> information about clusters can help you determine 'similar' results and 
> reorder the output list.

That's an interesting idea. How easy is it to 'tighten' the clustering
clones? So say we take a very narrow cone around each result and any
other documents within that cone can be considered similar enough, and
hence not displayed. Then we'd take the document closest to the centre
of the cloud and make that the 'original' copy and display it.

Or would that approach be too expensive to calculate for each search?



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 18:24:07 2005
Return-Path: <java-user-return-13670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91575 invoked from network); 14 Mar 2005 18:24:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 18:24:07 -0000
Received: (qmail 98968 invoked by uid 500); 14 Mar 2005 18:24:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98932 invoked by uid 500); 14 Mar 2005 18:24:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98918 invoked by uid 99); 14 Mar 2005 18:24:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 10:24:00 -0800
Received: (qmail 11508 invoked by uid 532); 14 Mar 2005 18:23:01 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.0.  Clear:. 
 Processed in 0.055068 secs); 14 Mar 2005 18:23:01 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 14 Mar 2005 18:23:01 -0000
Message-ID: <4235D6E0.3040404@tropo.com>
Date: Mon, 14 Mar 2005 10:24:32 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Removing similar documents from search results
References: <1110820764.11418.36.camel@saturn>
In-Reply-To: <1110820764.11418.36.camel@saturn>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Miles Barr wrote:

> Has anyone tried to remove similar documents from their search results?
> It looks like Google does some on the fly filtering of the results,
> hiding pages which is thinks are too similar, i.e. when you see:
> 
> "In order to show you the most relevant results, we have omitted some
> entries very similar to the 7 already displayed.
> If you like, you can repeat the search with the omitted results
> included."
> 
> at the bottom of the page.
> 
> Is there anything in Lucene or one of the contrib packages that compares
> two documents?

Yes, in theory the "similarity" package in the sandbox can help.
The code generates a query for a source document to find documents that 
are similar to it - the MoreLikeThis class uses the heuristic that 2 
docs are similar if they share "interesting" words. "Interesting" words 
are words that are common in a source doc but not too common in the 
corpus. If you were do do this you'd do something like this:

[1] Do your normal query
[2] As you loop thru the results, for every doc
[2a]	generate a similarity query
[2b]	requery the index for similar docs
[2c]	then, maybe, for every doc from [2b] with a score above some 
threshold, it it's also high up in the results from [2] then "hide" the 
doc a la google et. al.

Could be tricky coding. Another way is to only show 1 doc from any given 
domain. Note that instead of 1 query you'll have "1+n" queries for the 
display of "n" search results.




Similarity links:

Source control:

	http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/similarity/

My weblog entry about the code being checked in:

	http://searchmorph.com/weblog/index.php?id=44

Javadoc of it that I host:

	http://searchmorph.com/pub/jakarta-lucene-sandbox/contributions/similarity/build/docs/api/org/apache/lucene/search/similar/MoreLikeThis.html


-- Dave


> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 18:37:41 2005
Return-Path: <java-user-return-13671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98147 invoked from network); 14 Mar 2005 18:37:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 18:37:41 -0000
Received: (qmail 18357 invoked by uid 500); 14 Mar 2005 18:37:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18327 invoked by uid 500); 14 Mar 2005 18:37:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18312 invoked by uid 500); 14 Mar 2005 18:37:36 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 18309 invoked by uid 99); 14 Mar 2005 18:37:36 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of hasan.diwan@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 10:37:36 -0800
Received: by wproxy.gmail.com with SMTP id 68so2068664wri
        for <lucene-user@jakarta.apache.org>; Mon, 14 Mar 2005 10:37:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=AXMedDgjO+KUE2caCHmhNQyfZrzbUaTRSg7qScrnNjKUxTRp8BZ26USQtEyWu3aNuDo/Uyf29jJWyOlGwKHtxWkwiD/b+w3cBbIiI7CNEVvCwPM53+Bi677ye7EN5DpWSCrEmeIlPmBQMlgUYtjjpx8+jINf98fz4IKy+BkE2L0=
Received: by 10.54.10.39 with SMTP id 39mr4947637wrj;
        Mon, 14 Mar 2005 10:37:32 -0800 (PST)
Received: by 10.54.40.33 with HTTP; Mon, 14 Mar 2005 10:37:32 -0800 (PST)
Message-ID: <2cda2fc905031410375c665d1b@mail.gmail.com>
Date: Mon, 14 Mar 2005 10:37:32 -0800
From: Hasan Diwan <hasan.diwan@gmail.com>
Reply-To: Hasan Diwan <hasan.diwan@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Luceneweb.war
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I just checked out a copy of the svn sources and was wondering what
the difference is between luceneweb.war and nutch. I'm certain there
must be differences, else there wouldn't be two different projects.
-- 
Cheers,
Hasan Diwan <hasan.diwan@gmail.com>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 18:58:54 2005
Return-Path: <java-user-return-13672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8727 invoked from network); 14 Mar 2005 18:58:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 18:58:54 -0000
Received: (qmail 51839 invoked by uid 500); 14 Mar 2005 18:58:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51772 invoked by uid 500); 14 Mar 2005 18:58:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51713 invoked by uid 99); 14 Mar 2005 18:58:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from webmail.purposedriven.com (HELO pd-sbc-smtp-01.purposedriven.com) (66.161.69.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 10:58:47 -0800
Received: from PD-EVS-01.purposedriven.com ([10.150.3.12] RDNS failed) by pd-sbc-smtp-01.purposedriven.com with Microsoft SMTPSVC(6.0.3790.211);
	 Mon, 14 Mar 2005 10:59:33 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C528C7.F5885798"
Subject: Simple Search Question.
Date: Mon, 14 Mar 2005 10:59:32 -0800
Message-ID: <AB9D830944ED334390AC5BBD6579AD3C01313D70@PD-EVS-01.purposedriven.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Simple Search Question.
Thread-Index: AcUox/U1ypX1yUXYTy6mOgeBFhndPQ==
From: "Kyong Kwak" <Kyong@purposedriven.com>
To: "Lucene Mail-list" <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Mar 2005 18:59:33.0463 (UTC) FILETIME=[F5A2FE70:01C528C7]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C528C7.F5885798
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20
I looked and didn't find anything and wanted to know what the best way
might be for getting a unique list of values in a given field?
so if I have a field named "category" ( it's a keyword ) and I wanted to
get all the unique values for that, how would I go about it?
=20
thanks!
=20

------_=_NextPart_001_01C528C7.F5885798--

From java-user-return-13673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 19:01:02 2005
Return-Path: <java-user-return-13673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9718 invoked from network); 14 Mar 2005 19:01:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 19:01:02 -0000
Received: (qmail 54721 invoked by uid 500); 14 Mar 2005 19:01:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53883 invoked by uid 500); 14 Mar 2005 19:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53869 invoked by uid 99); 14 Mar 2005 19:00:59 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31105.mail.mud.yahoo.com (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 14 Mar 2005 11:00:57 -0800
Received: (qmail 19702 invoked by uid 60001); 14 Mar 2005 19:00:55 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=btb+MEFhi+xpCF5aoThJc2UC3wo9PBCPUIlkuIFs8j9XhuAt9225/Z8F5BYctRfJrL0GQf1mlntdMM+vV1wBvAoUOuFwRvteqgSV3QND+UWh9kHxDUsGzbP+LPzabrdYGpe2ZCziSg98NY9h8LxHIsubFJ6+3A0yNkm874mQuRc=  ;
Message-ID: <20050314190055.19700.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31105.mail.mud.yahoo.com via HTTP; Mon, 14 Mar 2005 11:00:55 PST
Date: Mon, 14 Mar 2005 11:00:55 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Removing similar documents from search results
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The problem with 2c is that scores are currently relative, and not
absolute.  I am hoping Chuck's patch makes it into the source, as
making scores absolute would be helpful in situations like this one.

Otis


--- David Spencer <dave-lucene-user@tropo.com> wrote:
> Miles Barr wrote:
> 
> > Has anyone tried to remove similar documents from their search
> results?
> > It looks like Google does some on the fly filtering of the results,
> > hiding pages which is thinks are too similar, i.e. when you see:
> > 
> > "In order to show you the most relevant results, we have omitted
> some
> > entries very similar to the 7 already displayed.
> > If you like, you can repeat the search with the omitted results
> > included."
> > 
> > at the bottom of the page.
> > 
> > Is there anything in Lucene or one of the contrib packages that
> compares
> > two documents?
> 
> Yes, in theory the "similarity" package in the sandbox can help.
> The code generates a query for a source document to find documents
> that 
> are similar to it - the MoreLikeThis class uses the heuristic that 2 
> docs are similar if they share "interesting" words. "Interesting"
> words 
> are words that are common in a source doc but not too common in the 
> corpus. If you were do do this you'd do something like this:
> 
> [1] Do your normal query
> [2] As you loop thru the results, for every doc
> [2a]	generate a similarity query
> [2b]	requery the index for similar docs
> [2c]	then, maybe, for every doc from [2b] with a score above some 
> threshold, it it's also high up in the results from [2] then "hide"
> the 
> doc a la google et. al.
> 
> Could be tricky coding. Another way is to only show 1 doc from any
> given 
> domain. Note that instead of 1 query you'll have "1+n" queries for
> the 
> display of "n" search results.
> 
> 
> 
> 
> Similarity links:
> 
> Source control:
> 
> 
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/similarity/
> 
> My weblog entry about the code being checked in:
> 
> 	http://searchmorph.com/weblog/index.php?id=44
> 
> Javadoc of it that I host:
> 
> 
>
http://searchmorph.com/pub/jakarta-lucene-sandbox/contributions/similarity/build/docs/api/org/apache/lucene/search/similar/MoreLikeThis.html
> 
> 
> -- Dave
> 
> 
> > 
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 19:02:28 2005
Return-Path: <java-user-return-13674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10391 invoked from network); 14 Mar 2005 19:02:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 19:02:28 -0000
Received: (qmail 56627 invoked by uid 500); 14 Mar 2005 19:02:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56527 invoked by uid 500); 14 Mar 2005 19:02:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56513 invoked by uid 99); 14 Mar 2005 19:02:23 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31105.mail.mud.yahoo.com (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 14 Mar 2005 11:02:22 -0800
Received: (qmail 20281 invoked by uid 60001); 14 Mar 2005 19:02:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=mvXfkICvFT+suUJDy+t5eijs8QBBMrelDoXacfGZnL4Lxt6oCvaoivU7Kbk/Oo98vVMyUnRVoND6y4EVvmfgiZHLqgdbKB7p1Dpi8ur+ouxXDahPJWhAejZzca+ydOU5nv2zxJoFuaEPQ3wZhlXPB/Fp2iF9hZh9/Wy8RCu9t+4=  ;
Message-ID: <20050314190220.20279.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31105.mail.mud.yahoo.com via HTTP; Mon, 14 Mar 2005 11:02:20 PST
Date: Mon, 14 Mar 2005 11:02:20 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Luceneweb.war
To: java-user@lucene.apache.org, Hasan Diwan <hasan.diwan@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nutch is a full-blown search engine (fetcher/crawler, web links
databases, etc.).  luceneweb.war is simply a web-app with with a Lucene
demo.  Lucene is only a toolkit, not a full-blows application.

Otis



--- Hasan Diwan <hasan.diwan@gmail.com> wrote:
> I just checked out a copy of the svn sources and was wondering what
> the difference is between luceneweb.war and nutch. I'm certain there
> must be differences, else there wouldn't be two different projects.
> -- 
> Cheers,
> Hasan Diwan <hasan.diwan@gmail.com>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 19:05:22 2005
Return-Path: <java-user-return-13675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11520 invoked from network); 14 Mar 2005 19:05:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 19:05:21 -0000
Received: (qmail 62925 invoked by uid 500); 14 Mar 2005 19:05:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62625 invoked by uid 500); 14 Mar 2005 19:05:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62609 invoked by uid 99); 14 Mar 2005 19:05:16 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr1.xs4all.nl (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 11:05:15 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.12.11/8.12.11) with ESMTP id j2EJ5C0E060311
	for <java-user@lucene.apache.org>; Mon, 14 Mar 2005 20:05:12 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Simple Search Question.
Date: Mon, 14 Mar 2005 20:05:12 +0100
User-Agent: KMail/1.5.4
References: <AB9D830944ED334390AC5BBD6579AD3C01313D70@PD-EVS-01.purposedriven.com>
In-Reply-To: <AB9D830944ED334390AC5BBD6579AD3C01313D70@PD-EVS-01.purposedriven.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503142005.12240.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 14 March 2005 19:59, Kyong Kwak wrote:
> 
> I looked and didn't find anything and wanted to know what the best way
> might be for getting a unique list of values in a given field?
> so if I have a field named "category" ( it's a keyword ) and I wanted to
> get all the unique values for that, how would I go about it?

The normal way is to use IndexReader.terms(Term), passing it a Term
constructed from the field name and an empty string, and stopping
on the returned TermEnum when the field name changes.

Regards,
Paul Elschot



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 19:07:28 2005
Return-Path: <java-user-return-13676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12493 invoked from network); 14 Mar 2005 19:07:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 19:07:28 -0000
Received: (qmail 66136 invoked by uid 500); 14 Mar 2005 19:07:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66107 invoked by uid 500); 14 Mar 2005 19:07:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66093 invoked by uid 99); 14 Mar 2005 19:07:23 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31111.mail.mud.yahoo.com (HELO web31111.mail.mud.yahoo.com) (68.142.200.230)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 14 Mar 2005 11:07:22 -0800
Received: (qmail 9212 invoked by uid 60001); 14 Mar 2005 19:07:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=kb4dMC6ZoO9j3jPAa6V0sLHYm9xCrc1UBgnn06Asa5VWFuviZsk5sKcJy3HeSGe4dENGe2ZedHEcQQH2jVJpRsSoBY8DHXKSPM9Q4LN/Q2Q+u6814d1t4OSzzdRCFOWNKTewmh2YNTgYiCIeHrmamQGYDK8IRxae98/BbD3dS8I=  ;
Message-ID: <20050314190720.9210.qmail@web31111.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31111.mail.mud.yahoo.com via HTTP; Mon, 14 Mar 2005 11:07:20 PST
Date: Mon, 14 Mar 2005 11:07:20 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Simple Search Question.
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This will help:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/TermEnum.html

Otis

--- Kyong Kwak <Kyong@purposedriven.com> wrote:
>  
> I looked and didn't find anything and wanted to know what the best
> way
> might be for getting a unique list of values in a given field?
> so if I have a field named "category" ( it's a keyword ) and I wanted
> to
> get all the unique values for that, how would I go about it?
>  
> thanks!
>  
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 19:44:31 2005
Return-Path: <java-user-return-13677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34038 invoked from network); 14 Mar 2005 19:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 19:44:31 -0000
Received: (qmail 22294 invoked by uid 500); 14 Mar 2005 19:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22269 invoked by uid 500); 14 Mar 2005 19:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22254 invoked by uid 99); 14 Mar 2005 19:44:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 11:44:25 -0800
Received: (qmail 18860 invoked by uid 532); 14 Mar 2005 19:43:26 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.0.  Clear:. 
 Processed in 0.125013 secs); 14 Mar 2005 19:43:26 -0000
Received: from unknown (HELO ?10.0.0.157?) (127.0.0.1)
  by 0 with SMTP; 14 Mar 2005 19:43:26 -0000
Message-ID: <4235E9BA.7090401@tropo.com>
Date: Mon, 14 Mar 2005 11:44:58 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Removing similar documents from search results
References: <20050314190055.19700.qmail@web31105.mail.mud.yahoo.com>
In-Reply-To: <20050314190055.19700.qmail@web31105.mail.mud.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

> The problem with 2c is that scores are currently relative, and not
> absolute.  I am hoping Chuck's patch makes it into the source, as
> making scores absolute would be helpful in situations like this one.

Good point.

If the orig MoreLikeThis query allows the source doc to be returned it 
might be used to normalize the scores however...

> 
> Otis
> 
> 
> --- David Spencer <dave-lucene-user@tropo.com> wrote:
> 
>>Miles Barr wrote:
>>
>>
>>>Has anyone tried to remove similar documents from their search
>>
>>results?
>>
>>>It looks like Google does some on the fly filtering of the results,
>>>hiding pages which is thinks are too similar, i.e. when you see:
>>>
>>>"In order to show you the most relevant results, we have omitted
>>
>>some
>>
>>>entries very similar to the 7 already displayed.
>>>If you like, you can repeat the search with the omitted results
>>>included."
>>>
>>>at the bottom of the page.
>>>
>>>Is there anything in Lucene or one of the contrib packages that
>>
>>compares
>>
>>>two documents?
>>
>>Yes, in theory the "similarity" package in the sandbox can help.
>>The code generates a query for a source document to find documents
>>that 
>>are similar to it - the MoreLikeThis class uses the heuristic that 2 
>>docs are similar if they share "interesting" words. "Interesting"
>>words 
>>are words that are common in a source doc but not too common in the 
>>corpus. If you were do do this you'd do something like this:
>>
>>[1] Do your normal query
>>[2] As you loop thru the results, for every doc
>>[2a]	generate a similarity query
>>[2b]	requery the index for similar docs
>>[2c]	then, maybe, for every doc from [2b] with a score above some 
>>threshold, it it's also high up in the results from [2] then "hide"
>>the 
>>doc a la google et. al.
>>
>>Could be tricky coding. Another way is to only show 1 doc from any
>>given 
>>domain. Note that instead of 1 query you'll have "1+n" queries for
>>the 
>>display of "n" search results.
>>
>>
>>
>>
>>Similarity links:
>>
>>Source control:
>>
>>
>>http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/similarity/
>>
>>My weblog entry about the code being checked in:
>>
>>	http://searchmorph.com/weblog/index.php?id=44
>>
>>Javadoc of it that I host:
>>
>>
>>
> 
> http://searchmorph.com/pub/jakarta-lucene-sandbox/contributions/similarity/build/docs/api/org/apache/lucene/search/similar/MoreLikeThis.html
> 
>>
>>-- Dave
>>
>>
>>
>>>
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 19:50:38 2005
Return-Path: <java-user-return-13678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37114 invoked from network); 14 Mar 2005 19:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 19:50:37 -0000
Received: (qmail 34092 invoked by uid 500); 14 Mar 2005 19:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34069 invoked by uid 500); 14 Mar 2005 19:50:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34056 invoked by uid 99); 14 Mar 2005 19:50:33 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from libra.cs.put.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 11:50:32 -0800
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP id 680663736
	for <java-user@lucene.apache.org>; Mon, 14 Mar 2005 20:50:29 +0100 (CET)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 440FE36C1
	for <java-user@lucene.apache.org>; Mon, 14 Mar 2005 20:50:29 +0100 (CET)
Message-ID: <4235EA99.9000703@cs.put.poznan.pl>
Date: Mon, 14 Mar 2005 20:48:41 +0100
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Removing similar documents from search results
References: <1110820764.11418.36.camel@saturn>	 <4235D01D.9020301@cs.put.poznan.pl> <1110823739.11418.45.camel@saturn>
In-Reply-To: <1110823739.11418.45.camel@saturn>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I think what they do at Google is a fancy heuristic -- as David Spencer 
mentioned, suburls of a given page, identical snippets, or titles... My 
idea was more towards providing a 'realistic overview' of subjects in 
pages. So you could pick, say, the first document from each cluster and 
show them like that to the user. Then, in every cluster documents 
already have mutual similarity (this could be calculated manually, the 
clustering algorithm doesn't do it for all pairs of documents), but some 
have more and some have less. You could then hide nearly identical 
results from the user.

Anyway, I think the Google method is just a heuristic based on URLs and 
nothing as fancy.

D.

Miles Barr wrote:
> Hi Dawid,
> 
> On Mon, 2005-03-14 at 18:55 +0100, Dawid Weiss wrote:
> 
>>I can imagine if you apply clustering to search results anyway then the 
>>information about clusters can help you determine 'similar' results and 
>>reorder the output list.
> 
> 
> That's an interesting idea. How easy is it to 'tighten' the clustering
> clones? So say we take a very narrow cone around each result and any
> other documents within that cone can be considered similar enough, and
> hence not displayed. Then we'd take the document closest to the centre
> of the cloud and make that the 'original' copy and display it.
> 
> Or would that approach be too expensive to calculate for each search?
> 
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 14 22:45:24 2005
Return-Path: <java-user-return-13679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27294 invoked from network); 14 Mar 2005 22:45:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Mar 2005 22:45:24 -0000
Received: (qmail 37098 invoked by uid 500); 14 Mar 2005 22:45:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37068 invoked by uid 500); 14 Mar 2005 22:45:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37047 invoked by uid 99); 14 Mar 2005 22:45:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from webmail.purposedriven.com (HELO pd-sbc-smtp-01.purposedriven.com) (66.161.69.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 14 Mar 2005 14:45:18 -0800
Received: from PD-EVS-01.purposedriven.com ([10.150.3.12] RDNS failed) by pd-sbc-smtp-01.purposedriven.com with Microsoft SMTPSVC(6.0.3790.211);
	 Mon, 14 Mar 2005 14:46:05 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Simple Search Question.
Date: Mon, 14 Mar 2005 14:46:04 -0800
Message-ID: <AB9D830944ED334390AC5BBD6579AD3C013140B3@PD-EVS-01.purposedriven.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Simple Search Question.
Thread-Index: AcUoyOGshteP8aB4QS+Xb1HRFj/HswAHrO1A
From: "Kyong Kwak" <Kyong@purposedriven.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 14 Mar 2005 22:46:05.0010 (UTC) FILETIME=[9AD47B20:01C528E7]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks, works like a charm.=20

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]=20
Sent: Monday, March 14, 2005 11:05 AM
To: java-user@lucene.apache.org
Subject: Re: Simple Search Question.

On Monday 14 March 2005 19:59, Kyong Kwak wrote:
>=20
> I looked and didn't find anything and wanted to know what the best way

> might be for getting a unique list of values in a given field?
> so if I have a field named "category" ( it's a keyword ) and I wanted=20
> to get all the unique values for that, how would I go about it?

The normal way is to use IndexReader.terms(Term), passing it a Term
constructed from the field name and an empty string, and stopping on the
returned TermEnum when the field name changes.

Regards,
Paul Elschot



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 10:34:27 2005
Return-Path: <java-user-return-13680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37723 invoked from network); 15 Mar 2005 10:34:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 10:34:27 -0000
Received: (qmail 36436 invoked by uid 500); 15 Mar 2005 10:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36413 invoked by uid 500); 15 Mar 2005 10:34:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36395 invoked by uid 99); 15 Mar 2005 10:34:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 02:34:20 -0800
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DB9NO-0005Ve-00
	for <java-user@lucene.apache.org>; Tue, 15 Mar 2005 10:34:14 +0000
Subject: Re: Removing similar documents from search results
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
In-Reply-To: <4235D6E0.3040404@tropo.com>
References: <1110820764.11418.36.camel@saturn>  <4235D6E0.3040404@tropo.com>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 15 Mar 2005 10:34:08 +0000
Message-Id: <1110882848.11418.66.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mon, 2005-03-14 at 10:24 -0800, David Spencer wrote:
> Yes, in theory the "similarity" package in the sandbox can help.
> The code generates a query for a source document to find documents that 
> are similar to it - the MoreLikeThis class uses the heuristic that 2 
> docs are similar if they share "interesting" words. "Interesting" words 
> are words that are common in a source doc but not too common in the 
> corpus. If you were do do this you'd do something like this:
> 
> [1] Do your normal query
> [2] As you loop thru the results, for every doc
> [2a]	generate a similarity query
> [2b]	requery the index for similar docs
> [2c]	then, maybe, for every doc from [2b] with a score above some 
> threshold, it it's also high up in the results from [2] then "hide" the 
> doc a la google et. al.
> 
> Could be tricky coding. Another way is to only show 1 doc from any given 
> domain. Note that instead of 1 query you'll have "1+n" queries for the 
> display of "n" search results.

That sounds like an interesting approach. But I'll probably wait until
Chuck's patch is included. I'm also a bit worried about the performance
of this approach. It might add too much time to each query.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 10:51:28 2005
Return-Path: <java-user-return-13681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48115 invoked from network); 15 Mar 2005 10:51:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 10:51:27 -0000
Received: (qmail 64359 invoked by uid 500); 15 Mar 2005 10:51:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63502 invoked by uid 500); 15 Mar 2005 10:51:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63488 invoked by uid 99); 15 Mar 2005 10:51:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 02:51:23 -0800
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DB9dq-0006gP-00
	for <java-user@lucene.apache.org>; Tue, 15 Mar 2005 10:51:16 +0000
Subject: Re: Removing similar documents from search results
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
In-Reply-To: <4235EA99.9000703@cs.put.poznan.pl>
References: <1110820764.11418.36.camel@saturn>
	 <4235D01D.9020301@cs.put.poznan.pl> <1110823739.11418.45.camel@saturn>
	 <4235EA99.9000703@cs.put.poznan.pl>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 15 Mar 2005 10:50:55 +0000
Message-Id: <1110883855.11418.75.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mon, 2005-03-14 at 20:48 +0100, Dawid Weiss wrote:
> I think what they do at Google is a fancy heuristic -- as David Spencer 
> mentioned, suburls of a given page, identical snippets, or titles... My 
> idea was more towards providing a 'realistic overview' of subjects in 
> pages. So you could pick, say, the first document from each cluster and 
> show them like that to the user. Then, in every cluster documents 
> already have mutual similarity (this could be calculated manually, the 
> clustering algorithm doesn't do it for all pairs of documents), but some 
> have more and some have less. You could then hide nearly identical 
> results from the user.
> 
> Anyway, I think the Google method is just a heuristic based on URLs and 
> nothing as fancy.

At the moment I need something quite simple. To identify a page that
appears in many forms, e.g.:

- Normal version
- Split across several pages
- Print version
- From a different section (different styling and navigation elements)

Basically identical content, presented in different ways.

I beginning to think any on the fly filtering would have to be quite
simple because of the required response time. Something like looking at
URLs and titles (which are already separate in the index).

A more permanent solution would have to process the pages ahead of time,
trying to break it down into chunks, then maybe built up a list of
hashes of the chunks for each page. Then each page would have a
'fingerprint', and hopefully you could come up with a quick way to
compare them at query time.


-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 11:03:46 2005
Return-Path: <java-user-return-13682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55602 invoked from network); 15 Mar 2005 11:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 11:03:45 -0000
Received: (qmail 83302 invoked by uid 500); 15 Mar 2005 11:03:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83216 invoked by uid 500); 15 Mar 2005 11:03:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83157 invoked by uid 99); 15 Mar 2005 11:03:28 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.184.196 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 03:03:27 -0800
Received: by wproxy.gmail.com with SMTP id 36so4997wra
        for <java-user@lucene.apache.org>; Tue, 15 Mar 2005 03:03:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=H0U9fRNa6hJ6cjxQTZ+28Npmv9lXJe0+ZX3yGYiUCx3SwkLAhCGyZ1M9Md5UmrYUA8CgEmIDu9TGG0kgdA4Ss653Gw9eU8y2zuxHD04zLvwM1fmyrpol9x6LnVVaF1kmPjbqbljb+b3h7xp6qHDI4/q+77S0nVGtfWkKCT3cuZc=
Received: by 10.38.15.37 with SMTP id 37mr526462rno;
        Tue, 15 Mar 2005 03:03:22 -0800 (PST)
Received: by 10.38.104.11 with HTTP; Tue, 15 Mar 2005 03:03:22 -0800 (PST)
Message-ID: <88c6a6720503150303226c6957@mail.gmail.com>
Date: Tue, 15 Mar 2005 05:03:22 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Removing similar documents from search results
In-Reply-To: <1110820764.11418.36.camel@saturn>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <1110820764.11418.36.camel@saturn>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Miles,

I'm assuming that you want to detect documents that are "almost"
exactly the same (since if they were identical, you could just do a
straight string compare or md5 compare, etc).

If you're storing term vectors in your index, you could compare the
term vectors for the search results, and if their similarity is less
than some threshold, consider them duplicates.  How you define
"similarity" is up to you, but using the cosine similarity between
each document is probably a good start.

You don't want to compare each document in your result set to each
other document (this would be n^2 comparisons!).  But you know the
documents are returned in order of relevance to your query (assuming
you didn't sort on some other field).  So you know that if two or more
documents are going to be near-duplicates, then they should appear
consecutively in the Hits.  This saves you not only from the n^2
comparisons, but from comparing documents whose scores are so
different that they can't possibly be duplicates.

Thus, I think the following logic may perform fairly efficiently:

final float DUPE_THRESHOLD = 0.05f;  // you'll have to tune this parameter
float previousScore = Float.MAX_VALUE;

for (int i=0; i < hits.length(); ++i) {
  Document doc = hits.doc(i);
  // assumption: scores are non-increasing
  float delta = previousScore - hits.score(i);
  if (delta < DUPE_THRESHOLD) {
    // docs score is very close, now check for dupes
    // using cosine similarity or some other measure    
    ...
    // probably don't set previous score here, since you
    // want to compare each doc to the first non-duplicate doc in the group
  } else {
    // scores are too far apart to be duplicates
    // so don't even compute cosine similarity
    previousScore = hits.score(i);
  }
}


I haven't tried this approach out yet.  If anyone sees any big flaws
in it, please let me know, and if you try it, I'd like to hear how it
works out.

-chris


On Mon, 14 Mar 2005 17:19:24 +0000, Miles Barr
<miles@runtime-collective.com> wrote:
> Has anyone tried to remove similar documents from their search results?
> It looks like Google does some on the fly filtering of the results,
> hiding pages which is thinks are too similar, i.e. when you see:
> 
> "In order to show you the most relevant results, we have omitted some
> entries very similar to the 7 already displayed.
> If you like, you can repeat the search with the omitted results
> included."
> 
> at the bottom of the page.
> 
> Is there anything in Lucene or one of the contrib packages that compares
> two documents?
> 
> --
> Miles Barr <miles@runtime-collective.com>
> Runtime Collective Ltd.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 11:13:52 2005
Return-Path: <java-user-return-13683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61808 invoked from network); 15 Mar 2005 11:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 11:13:51 -0000
Received: (qmail 97909 invoked by uid 500); 15 Mar 2005 11:13:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97876 invoked by uid 500); 15 Mar 2005 11:13:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 76280 invoked by uid 500); 14 Mar 2005 09:50:53 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FORGED_RCVD_HELO,HTML_20_30,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
X-Server-Uuid: 0FAE8E5D-17EC-437C-9534-AE47E695D040
To: lucene-user@jakarta.apache.org
Subject: Querying multiple indexes and combining results
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.0 September 26, 2002
Message-ID: <OF83630354.0F2994C5-ON80256FC4.0033E07B-80256FC4.00361285@sb.com>
From: iain.d.keddie@gsk.com
Date: Mon, 14 Mar 2005 09:50:05 +0000
X-MIMETrack: Serialize by Router on STVSNIM001/Servers/GSK(Release
 5.0.10 |March 22, 2002) at 14/03/2005 09:50:40, Serialize complete at
 14/03/2005 09:50:40
X-WSS-ID: 6E2B81FA2PS947313-01-01
Content-Type: multipart/alternative;
 boundary="=_alternative 0036128080256FC4_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 0036128080256FC4_=
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi,
I am currently evaluating a system that uses Lucene, so please excuse any 
lack of understanding.

Could somebody tell me if it is possible to query across separate indexes 
with different criteria, but then to join/merge the results.  An analogy 
is querying two separate tables then joining based on a key.

This sounds odd so I'll try and give a concrete example, it's not easy to 
explain either!  The system holds 2 conceptually different types of 
information: nodes(proteine interactors) and edges(protein interactions). 
We currently index the edges, and add all of the node information to the 
record as well.  This causes problems when we want to filter on node 
information, as we will always have more than one node in a record.  For 
example taking one edge record: if the index field "species" on one node 
is "mouse" and one is "rat", then my index record has 2 species. This is 
sometimes undesirable.

If I had an index of node information and an index of edge information, I 
could run a query which filters on node fields and edge fields; then 
combines based on a specific ID field. 

Sorry if the question is a little unclear.

Many thanks
--=_alternative 0036128080256FC4_=--


From java-user-return-13684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 12:17:46 2005
Return-Path: <java-user-return-13684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89157 invoked from network); 15 Mar 2005 12:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 12:17:46 -0000
Received: (qmail 84663 invoked by uid 500); 15 Mar 2005 12:17:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83815 invoked by uid 500); 15 Mar 2005 12:17:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83798 invoked by uid 99); 15 Mar 2005 12:17:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from proserver2.ifit.uni-klu.ac.at (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 04:17:39 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 15 Mar 2005 13:17:36 +0100
Message-ID: <4236D25F.1060305@ifit.uni-klu.ac.at>
Date: Tue, 15 Mar 2005 13:17:35 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Removing similar documents from search results
References: <1110820764.11418.36.camel@saturn> <88c6a6720503150303226c6957@mail.gmail.com>
In-Reply-To: <88c6a6720503150303226c6957@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Mar 2005 12:17:36.0070 (UTC) FILETIME=[F8F69E60:01C52958]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Lamprecht wrote:

It's a nice idea, and makes sense. I think that it can be broken if 
boosting is used and the search is performed on multiple fileds, especially
unstored ones. In this case the distance between very similar documents 
might be increased.
I think that also the duplications should be searched in a proximity of 
x docs, or x score units.
The point is .. you need 2 loops, even if the second is a short one.

 Best,

 Sergiu

>Miles,
>
>I'm assuming that you want to detect documents that are "almost"
>exactly the same (since if they were identical, you could just do a
>straight string compare or md5 compare, etc).
>
>If you're storing term vectors in your index, you could compare the
>term vectors for the search results, and if their similarity is less
>than some threshold, consider them duplicates.  How you define
>"similarity" is up to you, but using the cosine similarity between
>each document is probably a good start.
>
>You don't want to compare each document in your result set to each
>other document (this would be n^2 comparisons!).  But you know the
>documents are returned in order of relevance to your query (assuming
>you didn't sort on some other field).  So you know that if two or more
>documents are going to be near-duplicates, then they should appear
>consecutively in the Hits.  This saves you not only from the n^2
>comparisons, but from comparing documents whose scores are so
>different that they can't possibly be duplicates.
>
>Thus, I think the following logic may perform fairly efficiently:
>
>final float DUPE_THRESHOLD = 0.05f;  // you'll have to tune this parameter
>float previousScore = Float.MAX_VALUE;
>
>for (int i=0; i < hits.length(); ++i) {
>  Document doc = hits.doc(i);
>  // assumption: scores are non-increasing
>  float delta = previousScore - hits.score(i);
>  if (delta < DUPE_THRESHOLD) {
>    // docs score is very close, now check for dupes
>    // using cosine similarity or some other measure    
>    ...
>    // probably don't set previous score here, since you
>    // want to compare each doc to the first non-duplicate doc in the group
>  } else {
>    // scores are too far apart to be duplicates
>    // so don't even compute cosine similarity
>    previousScore = hits.score(i);
>  }
>}
>
>
>I haven't tried this approach out yet.  If anyone sees any big flaws
>in it, please let me know, and if you try it, I'd like to hear how it
>works out.
>
>-chris
>
>
>On Mon, 14 Mar 2005 17:19:24 +0000, Miles Barr
><miles@runtime-collective.com> wrote:
>  
>
>>Has anyone tried to remove similar documents from their search results?
>>It looks like Google does some on the fly filtering of the results,
>>hiding pages which is thinks are too similar, i.e. when you see:
>>
>>"In order to show you the most relevant results, we have omitted some
>>entries very similar to the 7 already displayed.
>>If you like, you can repeat the search with the omitted results
>>included."
>>
>>at the bottom of the page.
>>
>>Is there anything in Lucene or one of the contrib packages that compares
>>two documents?
>>
>>--
>>Miles Barr <miles@runtime-collective.com>
>>Runtime Collective Ltd.
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 13:21:40 2005
Return-Path: <java-user-return-13685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26275 invoked from network); 15 Mar 2005 13:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 13:21:40 -0000
Received: (qmail 87288 invoked by uid 500); 15 Mar 2005 13:21:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87266 invoked by uid 500); 15 Mar 2005 13:21:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87247 invoked by uid 99); 15 Mar 2005 13:21:34 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mx1.scansoft.com (HELO mx1.scansoft.com) (198.71.64.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 05:21:31 -0800
Received: from pb-exchcon.pb.scansoft.com ([10.1.4.73]) by mx1.scansoft.com with InterScan Messaging Security Suite; Tue, 15 Mar 2005 08:33:01 -0500
Received: by pb-exchcon.pb.scansoft.com with Internet Mail Service (5.5.2653.19)
	id <GCSWQTAF>; Tue, 15 Mar 2005 08:21:27 -0500
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B01283F39@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: RE: SPECIFIC HIT
Date: Tue, 15 Mar 2005 08:21:24 -0500
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys, 
	It is somewhat difficult to suggest something useful without more
details.  If you a pretty sure of the quality of the query, then here is my
suggestion:

Index the documents with an extra field called "last_word" that will
contains the last word in the document.  So from your example below :


Document 1: content=ELECTRONICS  DIGITAL CAMERA, last_word=CAMERA
Document 2: content=ELECTRONICS  DIGITAL CAMERA BATTERY ACCESSORIES,
last_word=ACCESSORIES
Document 3: content=ELECTRONICS  DIGITAL CAMERA 0PTICS,last_word=OPTICS
Document 4: content=ELECTRONICS  DIGITAL CAMERA
ACCESSORIES,last_words=ACCESSORIES
Document 5: content=ELECTRONICS  DIGITAL CAMERA CABEL
ACCESSORIES,last_words=ACCESSORIES
Document 6: content=ELECTRONICS  DIGITAL CAMERA OPTICS CABEL
ACCESSORIES,last_words=ACCESSORIES
Document 7: content=ELECTRONICS  DIGITAL CAMERA APPERAL
ACCESSORIES,last_words=ACCESSORIES


Then, when the query looks like: "Digital Camera Optics", you can rewrite
the query: "digital camera optics +last_word:optics"
If this query returned nothing, then search without the term
last_word:optics and sort the results by score and be length...  

Does that help ?

Jp


_______________________________________________________________________
SpeechWorks solutions from ScanSoft. Inspired Applications, Exceptional
Results
 
<Jean-Philippe Robichaud >  ::  Solution Speech Scientist
ScanSoft :: Professional Services
5100-75 Queen Street, Montreal, QC
P +1 514 843 4884 
 

-----Original Message-----
From: Karthik N S [mailto:karthik@controlnet.co.in] 
Sent: Monday, March 14, 2005 6:05 AM
To: java-user@lucene.apache.org
Subject: RE: SPECIFIC HIT

Hi Guys

The process is correct ,
but It is Impossible to have the optional terms.

The Documents we Index is in millions with similar word trailers .


Any other Ideas , Please advise....

Thx in advance
Karthik

-----Original Message-----
From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
Sent: Monday, March 14, 2005 4:18 PM
To: java-user@lucene.apache.org
Subject: Re: SPECIFIC HIT


Karthik N S wrote:

>Hi Guys
>
>Is there a way around for which the query parser would  have something like
>this
>
>   (+digital +camera +optics) -(All other Default variables)
>
>
>But a run time Once cannot determine the default values.
>
>I am stuck in between for this cause ........  :(D
>
>
You can ask the user to provide mandatory terms and optional terms and
then combine the queries in a

mandatory : digital camera optics
optional: battery cable

an then create the query: +digital  +camera +optics battery cable

Hope it helps even if I don't know if I undestood your problem correctly.

 Sergiu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 13:43:16 2005
Return-Path: <java-user-return-13686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38704 invoked from network); 15 Mar 2005 13:43:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 13:43:16 -0000
Received: (qmail 35296 invoked by uid 500); 15 Mar 2005 13:43:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35271 invoked by uid 500); 15 Mar 2005 13:43:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35258 invoked by uid 99); 15 Mar 2005 13:43:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 05:43:09 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1504A13E200A; Tue, 15 Mar 2005 08:43:08 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 073A113E2007
	for <java-user@lucene.apache.org>; Tue, 15 Mar 2005 08:43:06 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <20050310134548.5CFA615E7B@mail01.nyc-ofc.criticalmention.com>
References: <20050310134548.5CFA615E7B@mail01.nyc-ofc.criticalmention.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <82e94e60b2a0b2a6c188f03cd99652a0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search performace
Date: Tue, 15 Mar 2005 08:43:13 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've been effectively off-line for a few days, so I'm not sure if 
anyone has replied on this thread yet.

Using boosts will definitely use less resources than sorting.  If you 
do use sorting for dates, be sure you're doing it numerically rather 
than lexicographically.

	Erik

On Mar 10, 2005, at 8:45 AM, Michael Celona wrote:

> I have a large index that needs to yield very fast query times.  I am
> sorting by date as default since I am interested in the most recent
> documents.  I was wondering if I boosted the score of my documents in
> proportion to the date and not sorting would this increase search
> performance. Thoughts?
>
>
>
> Thanks,
>
> Michael
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 16:08:56 2005
Return-Path: <java-user-return-13687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44302 invoked from network); 15 Mar 2005 16:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 16:08:56 -0000
Received: (qmail 37044 invoked by uid 500); 15 Mar 2005 16:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36896 invoked by uid 500); 15 Mar 2005 16:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 14731 invoked by uid 500); 15 Mar 2005 15:52:18 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Message-ID: <423704ED.8000801@bassy.net>
Date: Tue, 15 Mar 2005 16:53:17 +0100
From: =?ISO-8859-1?Q?Jer=F3nimo_L=F3pez_Bezanilla?= <jlopez@bassy.net>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-es, es
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: Search in appendable fields
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I want to index articles:
My document is:
- Title
- Authors

There are one or more authors, and I index the field with "Appendable 
Fields" (page 68, Lucene in action).

Document doc = new Document();
doc.add(Field.Text("Title", title));
doc.add(Field.Text("Author", author1));
doc.add(Field.Text("Author", author2));

For example I have this documents:

Title: "Lucene in Action"
Author1: "ERIK HATCHER"
Author2: "OTIS GOSPODNETIC"

Title: "Lucene in 21 days"
Author1: "OTIS HATCHER"
Author2: "LOPEZ JESUS"

And the problem is that if I search by the author "OTIS HATCHER" y get 
both documents as a hit, but only the second one is valid.
How can i force that all words of "OTIS HATCHER" must appear in the same 
field?


Thanks
Jerolba




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 16:09:52 2005
Return-Path: <java-user-return-13688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44792 invoked from network); 15 Mar 2005 16:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 16:09:52 -0000
Received: (qmail 39031 invoked by uid 500); 15 Mar 2005 16:09:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39002 invoked by uid 500); 15 Mar 2005 16:09:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 54427 invoked by uid 500); 11 Mar 2005 18:42:58 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Message-ID: <4231E691.6080406@csail.mit.edu>
Date: Fri, 11 Mar 2005 13:42:25 -0500
From: Vineet Sinha <vineet@csail.mit.edu>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: Survey on Understanding Code
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
We are running a set of small surveys, in an attempt to understand 
developers problems when attempting to understand code. Results from 
this survey will be used in refining (open-source) tools that we are 
building.

If you have looked at the code of any of the (Java) projects below, we 
would appreciate you taking a few minutes to fill out as many of the 
respective surveys: Ant, Struts, Geronimo, Cocoon, Xerces, Xalan, 
Tomcat, Derby, Lucene, and Batik.

The survey can be found at:
http://people.csail.mit.edu/people/vineet/pc_apache.html


Please contact me if you have any questions, concerns, or comments!


Thanks!!

Regards,

Vineet Sinha
vineet@csail.mit.edu


PS: If this is not an appropriate place for posting this message, I will 
appreciate a pointer to the appropriate locations - Thanks!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 16:42:47 2005
Return-Path: <java-user-return-13689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65088 invoked from network); 15 Mar 2005 16:42:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 16:42:47 -0000
Received: (qmail 29221 invoked by uid 500); 15 Mar 2005 16:42:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29200 invoked by uid 500); 15 Mar 2005 16:42:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29187 invoked by uid 99); 15 Mar 2005 16:42:43 -0000
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD,URIBL_SBL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31106.mail.mud.yahoo.com (HELO web31106.mail.mud.yahoo.com) (68.142.200.39)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 15 Mar 2005 08:42:40 -0800
Received: (qmail 69558 invoked by uid 60001); 15 Mar 2005 16:42:38 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Omnjr+ewKbKETeSPpd+lEBWlo+TDyN5F/WEpnYnYumNYFFKrKddmOvf+WCf+2gXY+2ZJUDsTtU1OAPadYJozcCU1ENGJs6tiJiNAl3itoNWx0cdsYXrmtFdIE312k55zjpwv5YjvtOB7EvmX+tci5PRqhGswrz7hpeLMQw4Gc7s=  ;
Message-ID: <20050315164238.69556.qmail@web31106.mail.mud.yahoo.com>
Received: from [69.201.136.9] by web31106.mail.mud.yahoo.com via HTTP; Tue, 15 Mar 2005 08:42:38 PST
Date: Tue, 15 Mar 2005 08:42:38 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Search in appendable fields
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

PhraseQuery will help you do that, as will BooleanQuery (make both
clauses required), or Boolean operators (using + in front of each term
or AND between them) if you are parsing the query string with
QueryParser:
  http://www.lucenebook.com/search?query=phrase+query
  http://www.lucenebook.com/search?query=boolean+query

+name:Otis


--- Jernimo Lpez Bezanilla <jlopez@bassy.net> wrote:
> I want to index articles:
> My document is:
> - Title
> - Authors
> 
> There are one or more authors, and I index the field with "Appendable
> 
> Fields" (page 68, Lucene in action).
> 
> Document doc = new Document();
> doc.add(Field.Text("Title", title));
> doc.add(Field.Text("Author", author1));
> doc.add(Field.Text("Author", author2));
> 
> For example I have this documents:
> 
> Title: "Lucene in Action"
> Author1: "ERIK HATCHER"
> Author2: "OTIS GOSPODNETIC"
> 
> Title: "Lucene in 21 days"
> Author1: "OTIS HATCHER"
> Author2: "LOPEZ JESUS"
> 
> And the problem is that if I search by the author "OTIS HATCHER" y
> get 
> both documents as a hit, but only the second one is valid.
> How can i force that all words of "OTIS HATCHER" must appear in the
> same 
> field?
> 
> 
> Thanks
> Jerolba
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 16:56:55 2005
Return-Path: <java-user-return-13690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74319 invoked from network); 15 Mar 2005 16:56:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 16:56:54 -0000
Received: (qmail 59168 invoked by uid 500); 15 Mar 2005 16:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59139 invoked by uid 500); 15 Mar 2005 16:56:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59126 invoked by uid 99); 15 Mar 2005 16:56:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 08:56:47 -0800
Received: from [192.168.1.100] ([::ffff:67.119.27.11])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Tue, 15 Mar 2005 10:56:45 -0600
  id 000740BC.423713CD.0000782B
Message-ID: <423713C0.8020903@allthingslocal.com>
Date: Tue, 15 Mar 2005 08:56:32 -0800
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Congratulations to Otis and Erik
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nice write-up in today's Search Day on Lucene in Action!

If you don't get it, you can see it here (currently the top article):  
http://searchenginewatch.com/

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 15 20:13:09 2005
Return-Path: <java-user-return-13691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76651 invoked from network); 15 Mar 2005 20:13:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Mar 2005 20:13:09 -0000
Received: (qmail 28804 invoked by uid 500); 15 Mar 2005 20:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28777 invoked by uid 500); 15 Mar 2005 20:13:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28761 invoked by uid 99); 15 Mar 2005 20:13:04 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.alterpoint.com (HELO exchange.inside.eclyptic.com) (66.219.38.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 12:12:59 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5299B.609CFE04"
Subject: Using JDBCDirectory
Date: Tue, 15 Mar 2005 14:12:56 -0600
Message-ID: <3F227B042654B049A3C1B7B10FF65A0814EFFD@exchange.inside.eclyptic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using JDBCDirectory
Thread-Index: AcUpm2CaPEtC15/dSf27m+TZ+irouA==
From: "Ravi Rao" <rrao@alterpoint.com>
To: <java-user@lucene.apache.org>
Cc: "Ravi Rao" <rrao@alterpoint.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5299B.609CFE04
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

All,

I got JDBCDirectory from information on the lucene-user's mailing list.

http://mail-archives.apache.org/eyebrowse/ReadMsg?listName=3Dlucene-user@=
jakarta.apache.org&msgId=3D1644063

I cannot get basic searches to work.  I tried to merge the JDBC
directory with a filesystem index and search the filesystem index.
That produced nothing in the filesystem index.  I'm investigating.
Has anyone had success with JDBC directory?

Thanks,
--=20
Ravi(ndra) Rao/
Alterpoint Inc.

------_=_NextPart_001_01C5299B.609CFE04--

From java-user-return-13692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 05:51:46 2005
Return-Path: <java-user-return-13692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79786 invoked from network); 16 Mar 2005 05:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 05:51:45 -0000
Received: (qmail 76843 invoked by uid 500); 16 Mar 2005 05:51:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76800 invoked by uid 500); 16 Mar 2005 05:51:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76784 invoked by uid 99); 16 Mar 2005 05:51:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 15 Mar 2005 21:51:30 -0800
Received: (qmail 10291 invoked by uid 532); 16 Mar 2005 05:50:28 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.0.  Clear:. 
 Processed in 0.161066 secs); 16 Mar 2005 05:50:28 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 16 Mar 2005 05:50:28 -0000
Message-ID: <4237C95F.5040908@tropo.com>
Date: Tue, 15 Mar 2005 21:51:27 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Removing similar documents from search results
References: <1110820764.11418.36.camel@saturn>	 <4235D01D.9020301@cs.put.poznan.pl> <1110823739.11418.45.camel@saturn>	 <4235EA99.9000703@cs.put.poznan.pl> <1110883855.11418.75.camel@saturn>
In-Reply-To: <1110883855.11418.75.camel@saturn>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Miles Barr wrote:
> On Mon, 2005-03-14 at 20:48 +0100, Dawid Weiss wrote:
> 
>>I think what they do at Google is a fancy heuristic -- as David Spencer 
>>mentioned, suburls of a given page, identical snippets, or titles... My 
>>idea was more towards providing a 'realistic overview' of subjects in 
>>pages. So you could pick, say, the first document from each cluster and 
>>show them like that to the user. Then, in every cluster documents 
>>already have mutual similarity (this could be calculated manually, the 
>>clustering algorithm doesn't do it for all pairs of documents), but some 
>>have more and some have less. You could then hide nearly identical 
>>results from the user.
>>
>>Anyway, I think the Google method is just a heuristic based on URLs and 
>>nothing as fancy.
> 
> 
> At the moment I need something quite simple. To identify a page that
> appears in many forms, e.g.:
> 
> - Normal version
> - Split across several pages
> - Print version
> - From a different section (different styling and navigation elements)
> 
> Basically identical content, presented in different ways.
> 
> I beginning to think any on the fly filtering would have to be quite
> simple because of the required response time. Something like looking at
> URLs and titles (which are already separate in the index).
> 
> A more permanent solution would have to process the pages ahead of time,
> trying to break it down into chunks, then maybe built up a list of
> hashes of the chunks for each page. Then each page would have a
> 'fingerprint', and hopefully you could come up with a quick way to
> compare them at query time.

I think the paper "Syntactic Clustering of the Web" describes a 
technique similar to what you suggest:

http://www.std.org/~msm/common/clustering.html
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 17:26:59 2005
Return-Path: <java-user-return-13693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55005 invoked from network); 16 Mar 2005 17:26:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 17:26:59 -0000
Received: (qmail 36169 invoked by uid 500); 16 Mar 2005 17:26:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36117 invoked by uid 500); 16 Mar 2005 17:26:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36103 invoked by uid 99); 16 Mar 2005 17:26:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: 205.152.59.71 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from imf23aec.mail.bellsouth.net (HELO imf23aec.mail.bellsouth.net) (205.152.59.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Mar 2005 09:26:53 -0800
Received: from foo-bar.org ([68.209.119.157])
          by imf23aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20050316172650.YCYG24632.imf23aec.mail.bellsouth.net@foo-bar.org>
          for <java-user@lucene.apache.org>;
          Wed, 16 Mar 2005 12:26:50 -0500
Received: from rwatkins by foo-bar.org with local (Exim 4.43)
	id IDGGGB-000478-2T
	for java-user@lucene.apache.org; Wed, 16 Mar 2005 12:26:35 -0500
Date: Wed, 16 Mar 2005 12:26:34 -0500
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Alert function (aka "profiled alerting")
Message-ID: <Pine.CYG.4.58.0503161202510.4536@johndrake>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We are considering Lucene as a replacement for Verity K2 (I won't go
into the myriad reasons, other than to highlight that the K2 Java API
is riddled with errors, falsities and just plain stupidity [okay,
I've had my rant]) and figure that Lucene can do what we are
currently using K2 for, except for what Verity calls "profiling"
(matching incoming documents against a stored index of queries).

The very question I need answered was asked on 31 October, 2001 in
a message with the subject "Alert function" (message ID 116006, I do
believe), but there was never an answer. I will, in fact, quote this
message, as it states the question very well indeed:

> One thing I need is an alert function, that is, instead of searching
> with a query on a lot of documents, I want all incoming documents to be
> searched against a bunch of stored search queries (called "agents").
>
> The simple solution is to index the document and then iterate through
> all agents, but that isn't very scalable (say there are 10 new documents
> a minute, and 10000 stored agents...).
>
> The way commercial products like Verity and Autonomy handles this is to
> store the search queries (the agents) instead, and then use the incoming
> document as a search query against the stored agents. This way it
> becomes extremely scalable.
>
> Could this be a solution with Lucene too, and how would that look like?

This was originally posted by a Christian Ubbesen. I have tried to contact
him, to see if he had managed to solve this, but have not heard back (hey,
he could well have moved on in 3.5 years!)

Thanks,
-- Robert

--------------------
Robert Watkins
rwatkins@foo-bar.org
--------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 17:40:33 2005
Return-Path: <java-user-return-13694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65557 invoked from network); 16 Mar 2005 17:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 17:40:33 -0000
Received: (qmail 67869 invoked by uid 500); 16 Mar 2005 17:40:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67843 invoked by uid 500); 16 Mar 2005 17:40:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67821 invoked by uid 99); 16 Mar 2005 17:40:27 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31102.mail.mud.yahoo.com (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 16 Mar 2005 09:40:25 -0800
Received: (qmail 43062 invoked by uid 60001); 16 Mar 2005 17:40:22 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=fUxsBiSNjyI9Ms9tD4kas/N3ff45+sgwiWw8RNH+v2Aj6cL6vtDtnmXqi//i5Pfk3/Y2ciIxv5PJpY0QC5kZBjq0bsczviRLkMCfSd5w0d/YwBS1lS+NRuNADsmeTXXgVmG5oNKljK4nbCL0lhGb4AWobClJVgGlUaF/alpSlJs=  ;
Message-ID: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31102.mail.mud.yahoo.com via HTTP; Wed, 16 Mar 2005 09:40:22 PST
Date: Wed, 16 Mar 2005 09:40:22 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Alert function (aka "profiled alerting")
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think this is doable.  Lucene compares how similar query terms are to
terms in indexed documents.  Flip that around, and you are close to a
solution.  Perhaps you'll want to process incoming documents to keep
only the top N most-important terms or phrases.  You could then create
a query out of those terms and run it against indexed queries. 
There'll be some tricks, such as dealing with situations where your
query contains a phrase, and you have to prevent individual terms in
incoming documents to matching individual words of that phrase...

Tell us how this goes, I'm interested in this, too.

Otis



--- Robert Watkins <rwatkins@foo-bar.org> wrote:
> We are considering Lucene as a replacement for Verity K2 (I won't go
> into the myriad reasons, other than to highlight that the K2 Java API
> is riddled with errors, falsities and just plain stupidity [okay,
> I've had my rant]) and figure that Lucene can do what we are
> currently using K2 for, except for what Verity calls "profiling"
> (matching incoming documents against a stored index of queries).
> 
> The very question I need answered was asked on 31 October, 2001 in
> a message with the subject "Alert function" (message ID 116006, I do
> believe), but there was never an answer. I will, in fact, quote this
> message, as it states the question very well indeed:
> 
> > One thing I need is an alert function, that is, instead of
> searching
> > with a query on a lot of documents, I want all incoming documents
> to be
> > searched against a bunch of stored search queries (called
> "agents").
> >
> > The simple solution is to index the document and then iterate
> through
> > all agents, but that isn't very scalable (say there are 10 new
> documents
> > a minute, and 10000 stored agents...).
> >
> > The way commercial products like Verity and Autonomy handles this
> is to
> > store the search queries (the agents) instead, and then use the
> incoming
> > document as a search query against the stored agents. This way it
> > becomes extremely scalable.
> >
> > Could this be a solution with Lucene too, and how would that look
> like?
> 
> This was originally posted by a Christian Ubbesen. I have tried to
> contact
> him, to see if he had managed to solve this, but have not heard back
> (hey,
> he could well have moved on in 3.5 years!)
> 
> Thanks,
> -- Robert
> 
> --------------------
> Robert Watkins
> rwatkins@foo-bar.org
> --------------------
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 18:06:08 2005
Return-Path: <java-user-return-13695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81949 invoked from network); 16 Mar 2005 18:06:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 18:06:07 -0000
Received: (qmail 9508 invoked by uid 500); 16 Mar 2005 18:06:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9476 invoked by uid 500); 16 Mar 2005 18:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9462 invoked by uid 99); 16 Mar 2005 18:06:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: 205.152.59.66 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from imf18aec.mail.bellsouth.net (HELO imf18aec.mail.bellsouth.net) (205.152.59.66)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Mar 2005 10:06:02 -0800
Received: from foo-bar.org ([68.209.119.157])
          by imf18aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20050316180559.XNYQ7187.imf18aec.mail.bellsouth.net@foo-bar.org>
          for <java-user@lucene.apache.org>;
          Wed, 16 Mar 2005 13:05:59 -0500
Received: from rwatkins by foo-bar.org with local (Exim 4.43)
	id IDGI9Y-0004HS-NE
	for java-user@lucene.apache.org; Wed, 16 Mar 2005 13:05:58 -0500
Date: Wed, 16 Mar 2005 13:05:58 -0500
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
In-Reply-To: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com>
Message-ID: <Pine.CYG.4.58.0503161251350.5868@johndrake>
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Okay, I only bought your book a few days ago, so I haven't read much
yet! Also, this project is still at the exploratory level, so very
little time has been dedicated to it (the irony is I am currently
spending most of my time trying to work around K2 ... issues). As
such, it will be some time before I get my hands dirty with actual
code (my finger tips are itching, however).

There are further complexities, also. For example, if a query includes
a field search, then it will be important not to match the name of the
field in a given document. I _don't_ think the solution will come by
simply indexing the queries as if they were short documents, but how
the commercial guys do it is (of course) a black box.

Thank you nonetheless for your ideas,
-- Robert

On Wed, 16 Mar 2005, Otis Gospodnetic wrote:

> I think this is doable.  Lucene compares how similar query terms are to
> terms in indexed documents.  Flip that around, and you are close to a
> solution.  Perhaps you'll want to process incoming documents to keep
> only the top N most-important terms or phrases.  You could then create
> a query out of those terms and run it against indexed queries.
> There'll be some tricks, such as dealing with situations where your
> query contains a phrase, and you have to prevent individual terms in
> incoming documents to matching individual words of that phrase...
>
> Tell us how this goes, I'm interested in this, too.
>
> Otis
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 18:25:02 2005
Return-Path: <java-user-return-13696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94659 invoked from network); 16 Mar 2005 18:25:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 18:25:02 -0000
Received: (qmail 45577 invoked by uid 500); 16 Mar 2005 18:24:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45557 invoked by uid 500); 16 Mar 2005 18:24:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45544 invoked by uid 99); 16 Mar 2005 18:24:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp.battelle.org (HELO ws-bco-smtp1.IM.BATTELLE.ORG) (131.167.253.61)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Mar 2005 10:24:50 -0800
Received: from [131.167.170.26] by smtp.BATTELLE.ORG (PMDF V6.2-X26 #30874)
 with ESMTP id <CAUU08P0V8DSZL03GC@smtp.BATTELLE.ORG> for
 java-user@lucene.apache.org; Wed,
 16 Mar 2005 13:24:44 -0500 (Eastern Standard Time)
Date: Wed, 16 Mar 2005 13:25:01 -0500
From: Dan Funk <funkd@BATTELLE.ORG>
Subject: Re: Alert function (aka "profiled alerting")
In-reply-to: <Pine.CYG.4.58.0503161251350.5868@johndrake>
To: java-user@lucene.apache.org
Message-id: <423879FD.4090805@battelle.org>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7bit
X-Accept-Language: en-us, en
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com>
 <Pine.CYG.4.58.0503161251350.5868@johndrake>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I don't understand - this is all happening in the background right?
Why not just add the document to the index, then execute all the queries 
(with an extra clause to restrict results to that document) and see what 
hits?



Robert Watkins wrote:

>Okay, I only bought your book a few days ago, so I haven't read much
>yet! Also, this project is still at the exploratory level, so very
>little time has been dedicated to it (the irony is I am currently
>spending most of my time trying to work around K2 ... issues). As
>such, it will be some time before I get my hands dirty with actual
>code (my finger tips are itching, however).
>
>There are further complexities, also. For example, if a query includes
>a field search, then it will be important not to match the name of the
>field in a given document. I _don't_ think the solution will come by
>simply indexing the queries as if they were short documents, but how
>the commercial guys do it is (of course) a black box.
>
>Thank you nonetheless for your ideas,
>-- Robert
>
>On Wed, 16 Mar 2005, Otis Gospodnetic wrote:
>
>  
>
>>I think this is doable.  Lucene compares how similar query terms are to
>>terms in indexed documents.  Flip that around, and you are close to a
>>solution.  Perhaps you'll want to process incoming documents to keep
>>only the top N most-important terms or phrases.  You could then create
>>a query out of those terms and run it against indexed queries.
>>There'll be some tricks, such as dealing with situations where your
>>query contains a phrase, and you have to prevent individual terms in
>>incoming documents to matching individual words of that phrase...
>>
>>Tell us how this goes, I'm interested in this, too.
>>
>>Otis
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 18:38:09 2005
Return-Path: <java-user-return-13697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3722 invoked from network); 16 Mar 2005 18:38:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 18:38:09 -0000
Received: (qmail 71656 invoked by uid 500); 16 Mar 2005 18:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71632 invoked by uid 500); 16 Mar 2005 18:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71617 invoked by uid 99); 16 Mar 2005 18:38:04 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr13.xs4all.nl (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Mar 2005 10:38:02 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.12.11/8.12.11) with ESMTP id j2GIc0A5060915
	for <java-user@lucene.apache.org>; Wed, 16 Mar 2005 19:38:00 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
Date: Wed, 16 Mar 2005 19:37:59 +0100
User-Agent: KMail/1.5.4
References: <Pine.CYG.4.58.0503161202510.4536@johndrake>
In-Reply-To: <Pine.CYG.4.58.0503161202510.4536@johndrake>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503161937.59857.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 16 March 2005 18:26, Robert Watkins wrote:
> We are considering Lucene as a replacement for Verity K2 (I won't go
> into the myriad reasons, other than to highlight that the K2 Java API
> is riddled with errors, falsities and just plain stupidity [okay,
> I've had my rant]) and figure that Lucene can do what we are
> currently using K2 for, except for what Verity calls "profiling"
> (matching incoming documents against a stored index of queries).
> 
> The very question I need answered was asked on 31 October, 2001 in
> a message with the subject "Alert function" (message ID 116006, I do
> believe), but there was never an answer. I will, in fact, quote this
> message, as it states the question very well indeed:
> 
> > One thing I need is an alert function, that is, instead of searching
> > with a query on a lot of documents, I want all incoming documents to be
> > searched against a bunch of stored search queries (called "agents").
> >
> > The simple solution is to index the document and then iterate through
> > all agents, but that isn't very scalable (say there are 10 new documents
> > a minute, and 10000 stored agents...).
> >
> > The way commercial products like Verity and Autonomy handles this is to
> > store the search queries (the agents) instead, and then use the incoming
> > document as a search query against the stored agents. This way it
> > becomes extremely scalable.
> >
> > Could this be a solution with Lucene too, and how would that look like?
> 
> This was originally posted by a Christian Ubbesen. I have tried to contact
> him, to see if he had managed to solve this, but have not heard back (hey,
> he could well have moved on in 3.5 years!)

There are two ways to make this scalable in using Lucene without turning
things upside town (ie. without quering the alert queries with the new
documents as queries):
- collect the new documents in a temporary index, run the alert queries
  on that index, and then merge the new and the old index, possible deleting
  old documents in the old index just before merging.
- create a filter for the new documents in the updated index and use that in a
  FilteredQuery for  each alert on the new index. For very large indexes and
  relatively small numbers of new documents this FilteredQuery scales better
  than the current one:
  http://issues.apache.org/bugzilla/show_bug.cgi?id=32965

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 19:06:20 2005
Return-Path: <java-user-return-13698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21033 invoked from network); 16 Mar 2005 19:06:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 19:06:20 -0000
Received: (qmail 28414 invoked by uid 500); 16 Mar 2005 19:06:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28315 invoked by uid 500); 16 Mar 2005 19:06:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28288 invoked by uid 99); 16 Mar 2005 19:06:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: 205.152.59.65 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from imf17aec.mail.bellsouth.net (HELO imf17aec.mail.bellsouth.net) (205.152.59.65)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Mar 2005 11:06:13 -0800
Received: from foo-bar.org ([68.209.119.157])
          by imf17aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20050316190609.USYR14338.imf17aec.mail.bellsouth.net@foo-bar.org>
          for <java-user@lucene.apache.org>;
          Wed, 16 Mar 2005 14:06:09 -0500
Received: from rwatkins by foo-bar.org with local (Exim 4.43)
	id IDGL26-0003W8-EG
	for java-user@lucene.apache.org; Wed, 16 Mar 2005 14:06:06 -0500
Date: Wed, 16 Mar 2005 14:06:06 -0500
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
In-Reply-To: <423879FD.4090805@battelle.org>
Message-ID: <Pine.CYG.4.58.0503161402320.5288@johndrake>
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com>
 <Pine.CYG.4.58.0503161251350.5868@johndrake> <423879FD.4090805@battelle.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The reason your suggestion is not practical is scalability. In a production
environment you might have, for example, 10,000 stored queries and 10 new
documents a minute. That's a fair bit of load on the system for only one
aspect of a much larger search application.


On Wed, 16 Mar 2005, Dan Funk wrote:
>
> I don't understand - this is all happening in the background right?
> Why not just add the document to the index, then execute all the queries
> (with an extra clause to restrict results to that document) and see what
> hits?
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 16 22:43:52 2005
Return-Path: <java-user-return-13699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58570 invoked from network); 16 Mar 2005 22:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Mar 2005 22:43:52 -0000
Received: (qmail 83798 invoked by uid 500); 16 Mar 2005 22:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83358 invoked by uid 500); 16 Mar 2005 22:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83345 invoked by uid 99); 16 Mar 2005 22:43:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from smtp201.mail.sc5.yahoo.com (HELO smtp201.mail.sc5.yahoo.com) (216.136.129.91)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 16 Mar 2005 14:43:46 -0800
Received: from unknown (HELO ?24.232.184.152?) (desantisernesto@24.232.184.152 with login)
  by smtp201.mail.sc5.yahoo.com with SMTP; 16 Mar 2005 22:43:42 -0000
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.7.3]); Wed, 16 Mar 2005 19:45:00 -0300
Message-ID: <4238B6EB.3050101@colaborativa.net>
Date: Wed, 16 Mar 2005 19:44:59 -0300
From: Ernesto De Santis <ernesto.desantis@colaborativa.net>
Organization: Colaborativa.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-ar, es, en-us, en
MIME-Version: 1.0
To: Lucene Users List <java-user@lucene.apache.org>
Subject: snowball analyzer uismo issue in spanish stemmer
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

I found a problem with the SpanishStemmer in SnowballAnalyzer.

The words finished in "ismo" are striped fine, but words finished in 
"guismo" not.

in Spanish:

"america" and "americanismo" are fine
"argentina" and "argentinismo" are fine

"amigo" is fine but "amigismo" not is fine
the right word is "amiguismo".

this happen every times when the 'g' letter.

I don't know if it is possible to fix or it produces an ambiguity.

Ernesto.







-- 
Ernesto De Santis - Colaborativa.net
Crdoba 1147 Piso 6 Oficinas 3 y 4
(S2000AWO) Rosario, SF, Argentina.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 00:28:18 2005
Return-Path: <java-user-return-13700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97117 invoked from network); 17 Mar 2005 00:28:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 00:28:17 -0000
Received: (qmail 1666 invoked by uid 500); 17 Mar 2005 00:28:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1641 invoked by uid 500); 17 Mar 2005 00:28:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1628 invoked by uid 99); 17 Mar 2005 00:28:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Mar 2005 16:28:11 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B8C4B13E2008; Wed, 16 Mar 2005 19:28:05 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 68FEA13E2008
	for <java-user@lucene.apache.org>; Wed, 16 Mar 2005 19:27:42 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <4238B6EB.3050101@colaborativa.net>
References: <4238B6EB.3050101@colaborativa.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <05f5d3b74ca529f6d427ccf95bcfcfa0@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: snowball analyzer uismo issue in spanish stemmer
Date: Wed, 16 Mar 2005 19:27:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The Snowball stemmers are generated from the definitions pulled =20
automatically from the Snowball projects CVS server.

I just tried regenerating, which automatically pulls from CVS, and got =20=

this error:

compile-compiler:
     [apply] =20
/Users/erik/dev/lucene/java/contrib/snowball/snowball/website/p/=20
generator.c: In function `generate_backwards':
     [apply] =20
/Users/erik/dev/lucene/java/contrib/snowball/snowball/website/p/=20
generator.c:425: error: unrecognizable insn:
     [apply] (insn 32 29 33 0 0x0 (??? bad code 4155
     [apply] ) -1 (nil)
     [apply]     (nil))
     [apply] =20
/Users/erik/dev/lucene/java/contrib/snowball/snowball/website/p/=20
generator.c:425: internal compiler error: in extract_insn, at =20
recog.c:2175
     [apply] Please submit a full bug report,
     [apply] with preprocessed source if appropriate.
     [apply] See <URL:http://developer.apple.com/bugreporter> for =20
instructions.

BUILD FAILED
/Users/erik/dev/lucene/java/contrib/snowball/build.xml:40: apply =20
returned: 1

I haven't tried this in a long time - anyone know what the issue is?

	Erik


On Mar 16, 2005, at 5:44 PM, Ernesto De Santis wrote:

> Hi
>
> I found a problem with the SpanishStemmer in SnowballAnalyzer.
>
> The words finished in "ismo" are striped fine, but words finished in =20=

> "guismo" not.
>
> in Spanish:
>
> "america" and "americanismo" are fine
> "argentina" and "argentinismo" are fine
>
> "amigo" is fine but "amigismo" not is fine
> the right word is "amiguismo".
>
> this happen every times when the 'g' letter.
>
> I don't know if it is possible to fix or it produces an ambiguity.
>
> Ernesto.
>
>
>
>
>
>
>
> --=20
> Ernesto De Santis - Colaborativa.net
> C=F3rdoba 1147 Piso 6 Oficinas 3 y 4
> (S2000AWO) Rosario, SF, Argentina.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 04:44:00 2005
Return-Path: <java-user-return-13701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36021 invoked from network); 17 Mar 2005 04:44:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 04:44:00 -0000
Received: (qmail 79946 invoked by uid 500); 17 Mar 2005 04:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79093 invoked by uid 500); 17 Mar 2005 04:43:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79080 invoked by uid 99); 17 Mar 2005 04:43:56 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chakra.yadavalli@gmail.com designates 64.233.170.203 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 16 Mar 2005 20:43:54 -0800
Received: by rproxy.gmail.com with SMTP id 34so39603rns
        for <java-user@lucene.apache.org>; Wed, 16 Mar 2005 20:43:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=JvNR4n34/OA2o8gfOOt9STrKkUvvd9nwcQW4VNOdIUB6r+efN0d4IYE6dm3sikVp51ZcwxE00kflXtyE6kst6ILiGKp+dQ4CpDaYbwJlKxXjo5QUpVFk+5h7AZn6CLlJNCJFEqG5tRPdkKyyxYXct9Qg8RkZk8+Gpa77w11pNfI=
Received: by 10.38.179.66 with SMTP id b66mr314414rnf;
        Wed, 16 Mar 2005 20:43:52 -0800 (PST)
Received: by 10.38.8.5 with HTTP; Wed, 16 Mar 2005 20:43:52 -0800 (PST)
Message-ID: <8b6ad07a0503162043240dc842@mail.gmail.com>
Date: Wed, 16 Mar 2005 23:43:52 -0500
From: Chakra Yadavalli <chakra.yadavalli@gmail.com>
Reply-To: Chakra Yadavalli <chakra.yadavalli@gmail.com>
To: java-user@lucene.apache.org
Subject: How do you make "protected content" searchable by Google?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello, I am not sure if this is the right question for this list but
it is in regards to search engines.

Suppose you have a website that hosts some protected content that is
accessible via registered users. How you make the content searchable
by Google and other popular websearch engines? The idea is not to
reveal the conent even via the "Google cache."

Here is what I am thinking... 
Using Lucene (or its derivatives), skim thru the "protected content"
and remove all the common stop words , stem the words and place the
resulting text files in a directory availabe for the search bots (via
robotstxt rules). That way, even if the content is cached by the
search engines, it does not make much sense to humans but it still
will enable them to search it. When they click on the link to the
skimmed files, we need to redirect them to the login/registe page and
upon successful login, they should  be redirected to the actual human
readable/understandable page that corresponds to that has the "skimmed
content." Note that the "protected content" may be living in a Content
Management System or a database.

Am I overthinking/engineering it? Any ideas are really appreciated.

Thanks in advance,
Chakra
-- 
Visit my weblog: http://www.jroller.com/page/cyblogue

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 05:22:34 2005
Return-Path: <java-user-return-13702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55562 invoked from network); 17 Mar 2005 05:22:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 05:22:33 -0000
Received: (qmail 23200 invoked by uid 500); 17 Mar 2005 05:22:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23086 invoked by uid 500); 17 Mar 2005 05:22:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23062 invoked by uid 99); 17 Mar 2005 05:22:27 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31107.mail.mud.yahoo.com (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 16 Mar 2005 21:22:25 -0800
Received: (qmail 50949 invoked by uid 60001); 17 Mar 2005 05:22:24 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=P/xQSn0hZ21zfBV0JNhJa/VgEIRXPnyKBUc2+6TF6o836Bxr58TGGkUf4dVTeSEkyg8XqxEdUGuClq+2uIaI4TKR1xGf+UA5wUKue/7pWdHvB6369xSI2Z0gmiYMHMDtg8GmjfsRPn+aYeBqG8pHj2++021P0TocCvFy055RNC4=  ;
Message-ID: <20050317052224.50947.qmail@web31107.mail.mud.yahoo.com>
Received: from [69.201.136.9] by web31107.mail.mud.yahoo.com via HTTP; Wed, 16 Mar 2005 21:22:24 PST
Date: Wed, 16 Mar 2005 21:22:24 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: How do you make "protected content" searchable by Google?
To: java-user@lucene.apache.org, Chakra Yadavalli <chakra.yadavalli@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

--- Chakra Yadavalli <chakra.yadavalli@gmail.com> wrote:
> Hello, I am not sure if this is the right question for this list but
> it is in regards to search engines.

This is not really the right place to ask these types of questions,
but...  robots at mccmedia.com may be a better place to ask, or one of
those forums where people who track things phenomena such as Google
Dances exchange information.

> Suppose you have a website that hosts some protected content that is
> accessible via registered users. How you make the content searchable
> by Google and other popular websearch engines? The idea is not to
> reveal the conent even via the "Google cache."
> 
> Here is what I am thinking... 
> Using Lucene (or its derivatives), skim thru the "protected content"
> and remove all the common stop words , stem the words and place the
> resulting text files in a directory availabe for the search bots (via
> robotstxt rules). That way, even if the content is cached by the
> search engines, it does not make much sense to humans but it still
> will enable them to search it. When they click on the link to the
> skimmed files, we need to redirect them to the login/registe page and
> upon successful login, they should  be redirected to the actual human
> readable/understandable page that corresponds to that has the
> "skimmed
> content." Note that the "protected content" may be living in a
> Content
> Management System or a database.
> 
> Am I overthinking/engineering it? Any ideas are really appreciated.

What you described is doable.  You will have to detect Googlebot user
agent, and feed it indexable text, while redirecting real users to the
protected area.

Using Lucene is an overkill, though.  You can easily remove stop words
with a simple Perl script, for example.  Another thing you could do is
just shuffle the words around.  The current generation of search
engines typically doesn't care (make use of) the word order, while a
human will be lost if you shuffle the words.

Otis


> Thanks in advance,
> Chakra
> -- 
> Visit my weblog: http://www.jroller.com/page/cyblogue
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 08:21:50 2005
Return-Path: <java-user-return-13703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56597 invoked from network); 17 Mar 2005 08:21:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 08:21:50 -0000
Received: (qmail 43600 invoked by uid 500); 17 Mar 2005 08:21:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43573 invoked by uid 500); 17 Mar 2005 08:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43558 invoked by uid 99); 17 Mar 2005 08:21:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 00:21:42 -0800
Received: (qmail 31189 invoked by uid 532); 17 Mar 2005 08:19:54 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.0.  Clear:. 
 Processed in 0.324643 secs); 17 Mar 2005 08:19:54 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 17 Mar 2005 08:19:53 -0000
Message-ID: <42393DE5.3050709@tropo.com>
Date: Thu, 17 Mar 2005 00:20:53 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041217
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com> <Pine.CYG.4.58.0503161251350.5868@johndrake> <423879FD.4090805@battelle.org> <Pine.CYG.4.58.0503161402320.5288@johndrake>
In-Reply-To: <Pine.CYG.4.58.0503161402320.5288@johndrake>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Robert Watkins wrote:

> The reason your suggestion is not practical is scalability. In a production
> environment you might have, for example, 10,000 stored queries and 10 new
> documents a minute. That's a fair bit of load on the system for only one
> aspect of a much larger search application.

Fun, interesting question - maybe you could elaborate on the 
requirements a bit.

I believe the basic kind of use case here is something like "Google 
alerts", only more time sensitive - a large number of queries sitting 
around waiting to execute against incoming news feeds...

So:

Number of stored queries: could be 10,000 (thus a "large" number)
Incoming docs: 10/min (thus not a huge load)

Questions:

- How complicated are the queries? Are they essentially a list of words 
ANDed together, or are they generalized queries against multiple fields 
with things like fuzzy term expansion and phrase matches allowed?

- How big are the incoming documents?

=====

I believe the general goal is to avoid looping thru all 10k queries 
every time a doc comes in.

These approaches come to mind:

[a] Store queries in memory, and batch incoming documents into a 
RAMDirectory, and do the dumb loop thru all 10k queries every minute, 
and then destrory the RAMDirectory. Good news pure Lucene and easy to 
code, bad news it has the dreaded loop thru all 10k queries.

[b] For each query generate a sparse term boolean array (maybe "bitmask" 
is a better term), where any bit in the array that's set means the query 
requires that word (er..term).

For every incoming document form a term vector and then you AND the 
document term array against each queries. If the AND returns all bits 
set that the query needs, then you can execute the query, else, 
hopefully, you've avoided an "expensive" query execution by this logic.
Bad news is you still have a loop. If the queries are trivial then you 
don't have to separately execute it, as you've already shown that it 
will match. If the queries are non-trival, well, then any query that 
passes the AND might succeed, whereas any that fails the AND will not 
succeed, so this prevents some query executions.

[c]
A variation on [b] is to form some kind of a "parse tree". The source 
document terms guide you through the tree, and the nodes in the tree 
indicate which queries should be executed based on the matching terms. 
Good news is you avoid a loop, bad news is this could be the most memory 
intensive and it's a bit trickier to build the data structure.

For both [b] and [c], you can also stem the terms to reduce the number 
of different ones, and thus the memory required, at the expense of 
having more "false positives".


-- Dave






> 
> 
> On Wed, 16 Mar 2005, Dan Funk wrote:
> 
>>I don't understand - this is all happening in the background right?
>>Why not just add the document to the index, then execute all the queries
>>(with an extra clause to restrict results to that document) and see what
>>hits?
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 08:40:34 2005
Return-Path: <java-user-return-13704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72224 invoked from network); 17 Mar 2005 08:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 08:40:33 -0000
Received: (qmail 74938 invoked by uid 500); 17 Mar 2005 08:40:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74917 invoked by uid 500); 17 Mar 2005 08:40:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74903 invoked by uid 99); 17 Mar 2005 08:40:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from otto.isd-holland.nl (HELO otto2.isd-holland.nl) (62.221.254.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 00:40:28 -0800
Received: from [192.168.0.103] (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by otto2.isd-holland.nl (Postfix) with ESMTP id EB4B336412D
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 09:40:24 +0100 (CET)
Message-ID: <42394278.70008@rotterdam-cs.com>
Date: Thu, 17 Mar 2005 09:40:24 +0100
From: Aad Nales <aad.nales@rotterdam-cs.com>
Reply-To: aad.nales@rotterdam-cs.com
Organization: Rotterdam CS
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com> <Pine.CYG.4.58.0503161251350.5868@johndrake> <423879FD.4090805@battelle.org> <Pine.CYG.4.58.0503161402320.5288@johndrake> <42393DE5.3050709@tropo.com>
In-Reply-To: <42393DE5.3050709@tropo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I am not even sure what can of worms I open with this suggestion but:

Suppose that one of my 10.000 queries results in a set of documents 
(A,B,.., N)
Suppose I generate a new document from this 'search result history' and 
store this in a new index
Suppose I take the new document and (not sure if this is possible, so 
please flame) compare it with (I think TermVectors) against the search 
result history. (using some kind of query ?)

Now if the new document is similar to 'search result history' fire off 
the original query (stored as a field in the search result index).

The caveats are:

1. can you compare documents?
2. do the results of alerts have sufficient history and can you 
'predict' the level of similarity?

cheers,
Aad

PS: feel free to flame me in public :-)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 08:46:50 2005
Return-Path: <java-user-return-13705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74999 invoked from network); 17 Mar 2005 08:46:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 08:46:50 -0000
Received: (qmail 83323 invoked by uid 500); 17 Mar 2005 08:46:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82467 invoked by uid 500); 17 Mar 2005 08:46:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82454 invoked by uid 99); 17 Mar 2005 08:46:47 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr14.xs4all.nl (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 00:46:45 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.12.11/8.12.11) with ESMTP id j2H8kg5i041364
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 09:46:42 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
Date: Thu, 17 Mar 2005 09:46:42 +0100
User-Agent: KMail/1.5.4
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com> <Pine.CYG.4.58.0503161402320.5288@johndrake> <42393DE5.3050709@tropo.com>
In-Reply-To: <42393DE5.3050709@tropo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503170946.42369.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 17 March 2005 09:20, David Spencer wrote:
> Robert Watkins wrote:
> 
> > The reason your suggestion is not practical is scalability. In a 
production
> > environment you might have, for example, 10,000 stored queries and 10 new
> > documents a minute. That's a fair bit of load on the system for only one
> > aspect of a much larger search application.
> 
> Fun, interesting question - maybe you could elaborate on the 
> requirements a bit.
> 
> I believe the basic kind of use case here is something like "Google 
> alerts", only more time sensitive - a large number of queries sitting 
> around waiting to execute against incoming news feeds...
> 
> So:
> 
> Number of stored queries: could be 10,000 (thus a "large" number)
> Incoming docs: 10/min (thus not a huge load)
> 
> Questions:
> 
> - How complicated are the queries? Are they essentially a list of words 
> ANDed together, or are they generalized queries against multiple fields 
> with things like fuzzy term expansion and phrase matches allowed?
> 
> - How big are the incoming documents?
> 
> =====
> 
> I believe the general goal is to avoid looping thru all 10k queries 
> every time a doc comes in.
> 
> These approaches come to mind:
> 
> [a] Store queries in memory, and batch incoming documents into a 
> RAMDirectory, and do the dumb loop thru all 10k queries every minute, 
> and then destrory the RAMDirectory. Good news pure Lucene and easy to 
> code, bad news it has the dreaded loop thru all 10k queries.

If the order of the queries can be chosen by the implementation, the
speed of this loop can be improved by trying to order the queries such
that the next query has terms in common with the previous one(s).

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 12:55:44 2005
Return-Path: <java-user-return-13706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13654 invoked from network); 17 Mar 2005 12:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 12:55:44 -0000
Received: (qmail 98526 invoked by uid 500); 17 Mar 2005 12:55:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98203 invoked by uid 500); 17 Mar 2005 12:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98189 invoked by uid 99); 17 Mar 2005 12:55:38 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-32-221-50.dsl.iad.megapath.net (HELO mail.lou.emergint.com) (64.32.221.50)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 04:55:37 -0800
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How do you make "protected content" searchable by Google?
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Date: Thu, 17 Mar 2005 07:55:31 -0500
Message-ID: <8D7DE0C84F1D5149894354E754E6807E3326D9@mail.lou.emergint.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How do you make "protected content" searchable by Google?
Thread-Index: AcUqq/I79fFbZYgMRUaUe/+SfAugSAAQ4Xuw
From: "Kevin L. Cobb" <kevin.cobb@emergint.com>
To: <java-user@lucene.apache.org>,
	"Chakra Yadavalli" <chakra.yadavalli@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I worked on a website that had the same issue. We made a "search engine"
page that listed all the documents that we wanted to index as links to
documents that contained summaries of those documents with links to the
entire document on the limited access site - Google won't be able to
follow these links because they require use sign on, but the link will
be there for enticement when Googlers find the page.

Love the idea about retrieving the stop words and stemming them for
google indexing. But, Google is pretty picky I am told, so I would not
be surprised if they detected this sort of scheme and decided not to
index your pages.=20

Good luck.=20
=20
KLCobb

-----Original Message-----
From: Chakra Yadavalli [mailto:chakra.yadavalli@gmail.com]=20
Sent: Wednesday, March 16, 2005 11:44 PM
To: java-user@lucene.apache.org
Subject: How do you make "protected content" searchable by Google?

Hello, I am not sure if this is the right question for this list but
it is in regards to search engines.

Suppose you have a website that hosts some protected content that is
accessible via registered users. How you make the content searchable
by Google and other popular websearch engines? The idea is not to
reveal the conent even via the "Google cache."

Here is what I am thinking...=20
Using Lucene (or its derivatives), skim thru the "protected content"
and remove all the common stop words , stem the words and place the
resulting text files in a directory availabe for the search bots (via
robotstxt rules). That way, even if the content is cached by the
search engines, it does not make much sense to humans but it still
will enable them to search it. When they click on the link to the
skimmed files, we need to redirect them to the login/registe page and
upon successful login, they should  be redirected to the actual human
readable/understandable page that corresponds to that has the "skimmed
content." Note that the "protected content" may be living in a Content
Management System or a database.

Am I overthinking/engineering it? Any ideas are really appreciated.

Thanks in advance,
Chakra
--=20
Visit my weblog: http://www.jroller.com/page/cyblogue

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 13:37:25 2005
Return-Path: <java-user-return-13707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32494 invoked from network); 17 Mar 2005 13:37:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 13:37:25 -0000
Received: (qmail 80976 invoked by uid 500); 17 Mar 2005 13:37:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80836 invoked by uid 500); 17 Mar 2005 13:37:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80820 invoked by uid 99); 17 Mar 2005 13:37:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: 205.152.59.67 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from imf19aec.mail.bellsouth.net (HELO imf19aec.mail.bellsouth.net) (205.152.59.67)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 05:37:18 -0800
Received: from foo-bar.org ([68.209.119.157])
          by imf19aec.mail.bellsouth.net
          (InterMail vM.5.01.06.11 201-253-122-130-111-20040605) with ESMTP
          id <20050317133716.ZJOH5764.imf19aec.mail.bellsouth.net@foo-bar.org>
          for <java-user@lucene.apache.org>;
          Thu, 17 Mar 2005 08:37:16 -0500
Received: from rwatkins by foo-bar.org with local (Exim 4.43)
	id IDI0HN-0006LK-NS
	for java-user@lucene.apache.org; Thu, 17 Mar 2005 08:36:59 -0500
Date: Thu, 17 Mar 2005 08:36:59 -0500
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
In-Reply-To: <42393DE5.3050709@tropo.com>
Message-ID: <Pine.CYG.4.58.0503170824490.7152@johndrake>
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com>
 <Pine.CYG.4.58.0503161251350.5868@johndrake> <423879FD.4090805@battelle.org>
 <Pine.CYG.4.58.0503161402320.5288@johndrake> <42393DE5.3050709@tropo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you, David, for your very interesting suggestions. As I said
earlier in this thread somewhere, we are still at the exploratory
stage (considering Lucene as a replacement for a commercial engine)
so it will be some time before I can get my hands dirty, but you have
certainly given me some good ideas. Answers to your questions are
below.

-- Robert

On Thu, 17 Mar 2005, David Spencer wrote:

> Fun, interesting question - maybe you could elaborate on the
> requirements a bit.
>
We deliver on-line content -- journals, reference works and the like.
Users can save their own queries and set an alert on any of the saved
queries. As new documents get published (quite a few each day) they
are matched against the saved queries and emails are generated to let
people know that such-and-such an article was matched by one of their
saved queries.

> [ snipped ]
>
> - How complicated are the queries? Are they essentially a list of words
> ANDed together, or are they generalized queries against multiple fields
> with things like fuzzy term expansion and phrase matches allowed?
>
The queries can achieve any level of complexity, as they are written by
users. There are certainly multiple fields, wildcards, sounds-like, phrase
matches, etc. etc.

> - How big are the incoming documents?
>
While most of the incoming documents are relatively small (under 100 Kb),
some can be fairly large (500 Kb and more)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 13:50:30 2005
Return-Path: <java-user-return-13708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39306 invoked from network); 17 Mar 2005 13:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 13:50:29 -0000
Received: (qmail 3176 invoked by uid 500); 17 Mar 2005 13:50:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3154 invoked by uid 500); 17 Mar 2005 13:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3140 invoked by uid 99); 17 Mar 2005 13:50:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from maui.ebi.ac.uk (HELO maui.ebi.ac.uk) (193.62.196.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 05:50:23 -0800
Received: from neptune.ebi.ac.uk (neptune.ebi.ac.uk [172.22.8.118])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with ESMTP id j2HDoHm06692
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 13:50:17 GMT
Received: (from kirsch@localhost)
	by neptune.ebi.ac.uk (8.11.6/8.11.6) id j2HDoH907674
	for java-user@lucene.apache.org; Thu, 17 Mar 2005 13:50:17 GMT
Date: Thu, 17 Mar 2005 13:50:17 +0000
From: Harald Kirsch <kirsch@ebi.ac.uk>
To: java-user@lucene.apache.org
Subject: storing int fields
Message-ID: <20050317135017.I6989@neptune.ebi.ac.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
User-Agent: Mutt/1.2.5.1i
X-EBI-Information: This email is scanned using www.mailscanner.info.
X-EBI: Found to be clean
X-EBI-SpamCheck: not spam, SpamAssassin (score=0, required 5)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I need a field to store an int value. It need not be indexed or
tokenized. The obvious way to store it is of course to convert to a
String. I wonder however, if something like this would work too:

  StringBuffer sb = new StringBuffer();
  sb.append((char)(i&0xFFFF))
    .append((char)(i>>16));
  Field f = new Field(sb.substring(0), ...

Is there any encoding/decoding done on the strings when they are
written to file so that I might get complaints from the encoder about
malformed characters.

To be honest, I would not try this route if it were for just one
field. But I have several of those and the above would allow me to
store several int values easily and quickly in just one field. As we
have already many fields, saving on the number of fields seems to be
important to enable a large mergeFactor.

  Thanks,
  Harald.

-- 
------------------------------------------------------------------------
Harald Kirsch | kirsch@ebi.ac.uk | +44 (0) 1223/49-2593
BioMed Information Extraction: http://www.ebi.ac.uk/Rebholz-srv/whatizit

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 14:00:09 2005
Return-Path: <java-user-return-13709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44295 invoked from network); 17 Mar 2005 14:00:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 14:00:09 -0000
Received: (qmail 23494 invoked by uid 500); 17 Mar 2005 14:00:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23465 invoked by uid 500); 17 Mar 2005 14:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23445 invoked by uid 99); 17 Mar 2005 14:00:04 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from static-70-19-127-127.ny325.east.verizon.net (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 06:00:03 -0800
Received: from MCELONA (unknown [192.168.42.109])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id 58AD11664F
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 08:59:59 -0500 (EST)
From: "Michael Celona" <mcelona@criticalmention.com>
To: <java-user@lucene.apache.org>
Subject: RE: search performace
Date: Thu, 17 Mar 2005 08:59:49 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <82e94e60b2a0b2a6c188f03cd99652a0@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcUpZPCZNVW+EKg3T6ebnxeAJuXmEwBk4hKw
Message-Id: <20050317135959.58AD11664F@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am sorting against an epoch time stored in my index. By using:

contactDocument.add( Field.Keyword( "epoch_time", epoch );

Then I sort by this field.  My search time is in the order of 3sec on an
index of about 6G using simple searches against a text field.  By using
boosts I was hoping to increase performance.  Do you think this will make a
big difference?

	Michael

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Tuesday, March 15, 2005 8:43 AM
To: java-user@lucene.apache.org
Subject: Re: search performace

I've been effectively off-line for a few days, so I'm not sure if 
anyone has replied on this thread yet.

Using boosts will definitely use less resources than sorting.  If you 
do use sorting for dates, be sure you're doing it numerically rather 
than lexicographically.

	Erik

On Mar 10, 2005, at 8:45 AM, Michael Celona wrote:

> I have a large index that needs to yield very fast query times.  I am
> sorting by date as default since I am interested in the most recent
> documents.  I was wondering if I boosted the score of my documents in
> proportion to the date and not sorting would this increase search
> performance. Thoughts?
>
>
>
> Thanks,
>
> Michael
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 14:06:18 2005
Return-Path: <java-user-return-13710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47079 invoked from network); 17 Mar 2005 14:06:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 14:06:16 -0000
Received: (qmail 34728 invoked by uid 500); 17 Mar 2005 14:06:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34638 invoked by uid 500); 17 Mar 2005 14:06:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34610 invoked by uid 99); 17 Mar 2005 14:06:05 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chakra.yadavalli@gmail.com designates 64.233.170.203 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 06:06:04 -0800
Received: by rproxy.gmail.com with SMTP id 34so72940rns
        for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 06:06:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=t9RaM8oX4oLhzDyuE0csthRB5GrNCqMCyk2v2dO5zai1Vz3EHJlV97OoAco6hW5aGjs3lBnFcUnN5jF0VkhcBXCggbsIraRq7z0HRKcAwIRf7DIky+uIumu04/ivUFS6yC2xHn39uv3duUoooVlvhkr9g9DMvlbKOAHsB09AZOM=
Received: by 10.38.179.66 with SMTP id b66mr450267rnf;
        Thu, 17 Mar 2005 06:06:02 -0800 (PST)
Received: by 10.38.8.5 with HTTP; Thu, 17 Mar 2005 06:06:02 -0800 (PST)
Message-ID: <8b6ad07a05031706063c251aa@mail.gmail.com>
Date: Thu, 17 Mar 2005 09:06:02 -0500
From: Chakra Yadavalli <chakra.yadavalli@gmail.com>
Reply-To: Chakra Yadavalli <chakra.yadavalli@gmail.com>
To: "Kevin L. Cobb" <kevin.cobb@emergint.com>
Subject: Re: How do you make "protected content" searchable by Google?
Cc: java-user@lucene.apache.org
In-Reply-To: <8D7DE0C84F1D5149894354E754E6807E3326D9@mail.lou.emergint.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <8D7DE0C84F1D5149894354E754E6807E3326D9@mail.lou.emergint.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think this scheme is not misleading any users. We are not putting
"meaningless" keywords into the pages to get the page rank. That would
be against google's policy. correct?


On Thu, 17 Mar 2005 07:55:31 -0500, Kevin L. Cobb
<kevin.cobb@emergint.com> wrote:
> I worked on a website that had the same issue. We made a "search engine"
> page that listed all the documents that we wanted to index as links to
> documents that contained summaries of those documents with links to the
> entire document on the limited access site - Google won't be able to
> follow these links because they require use sign on, but the link will
> be there for enticement when Googlers find the page.
> 
> Love the idea about retrieving the stop words and stemming them for
> google indexing. But, Google is pretty picky I am told, so I would not
> be surprised if they detected this sort of scheme and decided not to
> index your pages.
> 
> Good luck.
> 
> KLCobb
> 
> -----Original Message-----
> From: Chakra Yadavalli [mailto:chakra.yadavalli@gmail.com]
> Sent: Wednesday, March 16, 2005 11:44 PM
> To: java-user@lucene.apache.org
> Subject: How do you make "protected content" searchable by Google?
> 
> Hello, I am not sure if this is the right question for this list but
> it is in regards to search engines.
> 
> Suppose you have a website that hosts some protected content that is
> accessible via registered users. How you make the content searchable
> by Google and other popular websearch engines? The idea is not to
> reveal the conent even via the "Google cache."
> 
> Here is what I am thinking...
> Using Lucene (or its derivatives), skim thru the "protected content"
> and remove all the common stop words , stem the words and place the
> resulting text files in a directory availabe for the search bots (via
> robotstxt rules). That way, even if the content is cached by the
> search engines, it does not make much sense to humans but it still
> will enable them to search it. When they click on the link to the
> skimmed files, we need to redirect them to the login/registe page and
> upon successful login, they should  be redirected to the actual human
> readable/understandable page that corresponds to that has the "skimmed
> content." Note that the "protected content" may be living in a Content
> Management System or a database.
> 
> Am I overthinking/engineering it? Any ideas are really appreciated.
> 
> Thanks in advance,
> Chakra
> --
> Visit my weblog: http://www.jroller.com/page/cyblogue
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


-- 
Visit my weblog: http://www.jroller.com/page/cyblogue

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 14:54:31 2005
Return-Path: <java-user-return-13711-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93911 invoked from network); 17 Mar 2005 14:54:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 14:54:31 -0000
Received: (qmail 30330 invoked by uid 500); 17 Mar 2005 14:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30307 invoked by uid 500); 17 Mar 2005 14:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30293 invoked by uid 99); 17 Mar 2005 14:54:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 06:54:25 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D589713E200A; Thu, 17 Mar 2005 09:54:20 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 847E413E200A
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 09:53:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <20050317135959.58AD11664F@mail01.nyc-ofc.criticalmention.com>
References: <20050317135959.58AD11664F@mail01.nyc-ofc.criticalmention.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <6f1901f98ec9ed81427e2dd9235153af@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search performace
Date: Thu, 17 Mar 2005 09:53:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is epoch a Date?  or a String?  If a String, what format is it?

Sorting by a Date keyword field will be sorting as a String value, 
which is a fair bit more resource intensive than if it was numeric.

Try using a purely numeric field (though as a String) that can be 
represented as an int be sure to specify the sort type as an int and 
see if that improves performance.  I'm pretty certain you'd still get 
better performance by using a boost than a sort though.

	Erik

On Mar 17, 2005, at 8:59 AM, Michael Celona wrote:

> I am sorting against an epoch time stored in my index. By using:
>
> contactDocument.add( Field.Keyword( "epoch_time", epoch );
>
> Then I sort by this field.  My search time is in the order of 3sec on 
> an
> index of about 6G using simple searches against a text field.  By using
> boosts I was hoping to increase performance.  Do you think this will 
> make a
> big difference?
>
> 	Michael
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, March 15, 2005 8:43 AM
> To: java-user@lucene.apache.org
> Subject: Re: search performace
>
> I've been effectively off-line for a few days, so I'm not sure if
> anyone has replied on this thread yet.
>
> Using boosts will definitely use less resources than sorting.  If you
> do use sorting for dates, be sure you're doing it numerically rather
> than lexicographically.
>
> 	Erik
>
> On Mar 10, 2005, at 8:45 AM, Michael Celona wrote:
>
>> I have a large index that needs to yield very fast query times.  I am
>> sorting by date as default since I am interested in the most recent
>> documents.  I was wondering if I boosted the score of my documents in
>> proportion to the date and not sorting would this increase search
>> performance. Thoughts?
>>
>>
>>
>> Thanks,
>>
>> Michael
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 16:14:30 2005
Return-Path: <java-user-return-13712-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41898 invoked from network); 17 Mar 2005 16:14:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 16:14:29 -0000
Received: (qmail 14248 invoked by uid 500); 17 Mar 2005 16:14:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14040 invoked by uid 500); 17 Mar 2005 16:14:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14026 invoked by uid 99); 17 Mar 2005 16:14:22 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from static-70-19-127-127.ny325.east.verizon.net (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 08:14:21 -0800
Received: from MCELONA (unknown [192.168.42.109])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id CFC3F1664B
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 11:14:16 -0500 (EST)
From: "Michael Celona" <mcelona@criticalmention.com>
To: <java-user@lucene.apache.org>
Subject: RE: search performace
Date: Thu, 17 Mar 2005 11:13:47 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <6f1901f98ec9ed81427e2dd9235153af@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcUrATmGBrIv0ep5Q/qbVen7DSiV5gACrlXA
Message-Id: <20050317161416.CFC3F1664B@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Epoch is in seconds... I am also forced to used a date filter on most of
searches... how bad is the performance hit of that. 

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Thursday, March 17, 2005 9:54 AM
To: java-user@lucene.apache.org
Subject: Re: search performace

Is epoch a Date?  or a String?  If a String, what format is it?

Sorting by a Date keyword field will be sorting as a String value, 
which is a fair bit more resource intensive than if it was numeric.

Try using a purely numeric field (though as a String) that can be 
represented as an int be sure to specify the sort type as an int and 
see if that improves performance.  I'm pretty certain you'd still get 
better performance by using a boost than a sort though.

	Erik

On Mar 17, 2005, at 8:59 AM, Michael Celona wrote:

> I am sorting against an epoch time stored in my index. By using:
>
> contactDocument.add( Field.Keyword( "epoch_time", epoch );
>
> Then I sort by this field.  My search time is in the order of 3sec on 
> an
> index of about 6G using simple searches against a text field.  By using
> boosts I was hoping to increase performance.  Do you think this will 
> make a
> big difference?
>
> 	Michael
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tuesday, March 15, 2005 8:43 AM
> To: java-user@lucene.apache.org
> Subject: Re: search performace
>
> I've been effectively off-line for a few days, so I'm not sure if
> anyone has replied on this thread yet.
>
> Using boosts will definitely use less resources than sorting.  If you
> do use sorting for dates, be sure you're doing it numerically rather
> than lexicographically.
>
> 	Erik
>
> On Mar 10, 2005, at 8:45 AM, Michael Celona wrote:
>
>> I have a large index that needs to yield very fast query times.  I am
>> sorting by date as default since I am interested in the most recent
>> documents.  I was wondering if I boosted the score of my documents in
>> proportion to the date and not sorting would this increase search
>> performance. Thoughts?
>>
>>
>>
>> Thanks,
>>
>> Michael
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 16:41:39 2005
Return-Path: <java-user-return-13713-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61684 invoked from network); 17 Mar 2005 16:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 16:41:39 -0000
Received: (qmail 78206 invoked by uid 500); 17 Mar 2005 16:41:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78177 invoked by uid 500); 17 Mar 2005 16:41:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78164 invoked by uid 99); 17 Mar 2005 16:41:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 08:41:31 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 72CF513E2120; Thu, 17 Mar 2005 11:41:28 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id C0B3913E200A
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 11:41:03 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <20050317161416.CFC3F1664B@mail01.nyc-ofc.criticalmention.com>
References: <20050317161416.CFC3F1664B@mail01.nyc-ofc.criticalmention.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1a8b6c63fb86885dc74cb08766e1e62e@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search performace
Date: Thu, 17 Mar 2005 11:40:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Mar 17, 2005, at 11:13 AM, Michael Celona wrote:
> Epoch is in seconds...

But you still haven't provided the *type* of epoch.  It's a Date?  a 
String?  What do the string values look like?

>  I am also forced to used a date filter on most of
> searches... how bad is the performance hit of that.

Only testing will tell.  The hit of a filter comes the first time (as 
long as you cache and use the same IndexReader), so its not likely to 
be a factor over many queries.

	Erik

>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, March 17, 2005 9:54 AM
> To: java-user@lucene.apache.org
> Subject: Re: search performace
>
> Is epoch a Date?  or a String?  If a String, what format is it?
>
> Sorting by a Date keyword field will be sorting as a String value,
> which is a fair bit more resource intensive than if it was numeric.
>
> Try using a purely numeric field (though as a String) that can be
> represented as an int be sure to specify the sort type as an int and
> see if that improves performance.  I'm pretty certain you'd still get
> better performance by using a boost than a sort though.
>
> 	Erik
>
> On Mar 17, 2005, at 8:59 AM, Michael Celona wrote:
>
>> I am sorting against an epoch time stored in my index. By using:
>>
>> contactDocument.add( Field.Keyword( "epoch_time", epoch );
>>
>> Then I sort by this field.  My search time is in the order of 3sec on
>> an
>> index of about 6G using simple searches against a text field.  By 
>> using
>> boosts I was hoping to increase performance.  Do you think this will
>> make a
>> big difference?
>>
>> 	Michael
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Tuesday, March 15, 2005 8:43 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: search performace
>>
>> I've been effectively off-line for a few days, so I'm not sure if
>> anyone has replied on this thread yet.
>>
>> Using boosts will definitely use less resources than sorting.  If you
>> do use sorting for dates, be sure you're doing it numerically rather
>> than lexicographically.
>>
>> 	Erik
>>
>> On Mar 10, 2005, at 8:45 AM, Michael Celona wrote:
>>
>>> I have a large index that needs to yield very fast query times.  I am
>>> sorting by date as default since I am interested in the most recent
>>> documents.  I was wondering if I boosted the score of my documents in
>>> proportion to the date and not sorting would this increase search
>>> performance. Thoughts?
>>>
>>>
>>>
>>> Thanks,
>>>
>>> Michael
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 16:55:49 2005
Return-Path: <java-user-return-13714-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68749 invoked from network); 17 Mar 2005 16:55:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 16:55:48 -0000
Received: (qmail 14220 invoked by uid 500); 17 Mar 2005 16:55:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14197 invoked by uid 500); 17 Mar 2005 16:55:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14184 invoked by uid 99); 17 Mar 2005 16:55:42 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from static-70-19-127-127.ny325.east.verizon.net (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 08:55:42 -0800
Received: from MCELONA (unknown [192.168.42.109])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id E0DB216679
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 11:55:39 -0500 (EST)
From: "Michael Celona" <mcelona@criticalmention.com>
To: <java-user@lucene.apache.org>
Subject: RE: search performace
Date: Thu, 17 Mar 2005 11:55:04 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <1a8b6c63fb86885dc74cb08766e1e62e@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcUrEDBQH7A0JaUrQtiwIEDQkXJATwAAcv/Q
Message-Id: <20050317165539.E0DB216679@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

My epoch looks like 1110816121 but is represented by a string.

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Thursday, March 17, 2005 11:41 AM
To: java-user@lucene.apache.org
Subject: Re: search performace


On Mar 17, 2005, at 11:13 AM, Michael Celona wrote:
> Epoch is in seconds...

But you still haven't provided the *type* of epoch.  It's a Date?  a 
String?  What do the string values look like?

>  I am also forced to used a date filter on most of
> searches... how bad is the performance hit of that.

Only testing will tell.  The hit of a filter comes the first time (as 
long as you cache and use the same IndexReader), so its not likely to 
be a factor over many queries.

	Erik

>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, March 17, 2005 9:54 AM
> To: java-user@lucene.apache.org
> Subject: Re: search performace
>
> Is epoch a Date?  or a String?  If a String, what format is it?
>
> Sorting by a Date keyword field will be sorting as a String value,
> which is a fair bit more resource intensive than if it was numeric.
>
> Try using a purely numeric field (though as a String) that can be
> represented as an int be sure to specify the sort type as an int and
> see if that improves performance.  I'm pretty certain you'd still get
> better performance by using a boost than a sort though.
>
> 	Erik
>
> On Mar 17, 2005, at 8:59 AM, Michael Celona wrote:
>
>> I am sorting against an epoch time stored in my index. By using:
>>
>> contactDocument.add( Field.Keyword( "epoch_time", epoch );
>>
>> Then I sort by this field.  My search time is in the order of 3sec on
>> an
>> index of about 6G using simple searches against a text field.  By 
>> using
>> boosts I was hoping to increase performance.  Do you think this will
>> make a
>> big difference?
>>
>> 	Michael
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Tuesday, March 15, 2005 8:43 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: search performace
>>
>> I've been effectively off-line for a few days, so I'm not sure if
>> anyone has replied on this thread yet.
>>
>> Using boosts will definitely use less resources than sorting.  If you
>> do use sorting for dates, be sure you're doing it numerically rather
>> than lexicographically.
>>
>> 	Erik
>>
>> On Mar 10, 2005, at 8:45 AM, Michael Celona wrote:
>>
>>> I have a large index that needs to yield very fast query times.  I am
>>> sorting by date as default since I am interested in the most recent
>>> documents.  I was wondering if I boosted the score of my documents in
>>> proportion to the date and not sorting would this increase search
>>> performance. Thoughts?
>>>
>>>
>>>
>>> Thanks,
>>>
>>> Michael
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 17:13:41 2005
Return-Path: <java-user-return-13715-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78416 invoked from network); 17 Mar 2005 17:13:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 17:13:40 -0000
Received: (qmail 37537 invoked by uid 500); 17 Mar 2005 17:13:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37517 invoked by uid 500); 17 Mar 2005 17:13:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37504 invoked by uid 99); 17 Mar 2005 17:13:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from server1.hostmon.com (HELO server1.hostmon.com) (66.139.76.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 09:13:34 -0800
Received: (qmail 12221 invoked by uid 532); 17 Mar 2005 17:12:30 -0000
Received: from dave-lucene-user@tropo.com by server1.hostmon.com by uid 0 with qmail-scanner-1.16 
 (spamassassin: 3.0.0.  Clear:. 
 Processed in 0.20446 secs); 17 Mar 2005 17:12:30 -0000
Received: from unknown (HELO ?172.31.1.2?) (127.0.0.1)
  by 0 with SMTP; 17 Mar 2005 17:12:30 -0000
Message-ID: <4239BAB8.2060907@tropo.com>
Date: Thu, 17 Mar 2005 09:13:28 -0800
From: David Spencer <dave-lucene-user@tropo.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.5) Gecko/20041217
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Alert function (aka "profiled alerting")
References: <20050316174022.43060.qmail@web31102.mail.mud.yahoo.com> <Pine.CYG.4.58.0503161251350.5868@johndrake> <423879FD.4090805@battelle.org> <Pine.CYG.4.58.0503161402320.5288@johndrake> <42393DE5.3050709@tropo.com> <Pine.CYG.4.58.0503170824490.7152@johndrake>
In-Reply-To: <Pine.CYG.4.58.0503170824490.7152@johndrake>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Robert Watkins wrote:

> Thank you, David, for your very interesting suggestions.

You're welcome, it's a fun problem.

Unless there's a requirement to the contrary, I would try to only 
execute the queries, say, 1x/day, and try to avoid all the cool 
optimizations by default - this uses one of those first principles of 
optimization, "don't do it".

I'd also suggest you look at how you invoke the (Lucene) JVM - a 
combination of the -server flag, a big argument to -Xmx (max memory), 
use of a RAMDirectory, and maybe even -XX:CompileThreshold=10 should 
give you better-than-default performance. The last secret arg tells the 
JVM to compile methods sooner.

>  As I said
> earlier in this thread somewhere, we are still at the exploratory
> stage (considering Lucene as a replacement for a commercial engine)
> so it will be some time before I can get my hands dirty, but you have
> certainly given me some good ideas. Answers to your questions are
> below.
> 
> -- Robert
> 
> On Thu, 17 Mar 2005, David Spencer wrote:
> 
> 
>>Fun, interesting question - maybe you could elaborate on the
>>requirements a bit.
>>
> 
> We deliver on-line content -- journals, reference works and the like.
> Users can save their own queries and set an alert on any of the saved
> queries. As new documents get published (quite a few each day) they
> are matched against the saved queries and emails are generated to let
> people know that such-and-such an article was matched by one of their
> saved queries.
> 
> 
>>[ snipped ]
>>
>>- How complicated are the queries? Are they essentially a list of words
>>ANDed together, or are they generalized queries against multiple fields
>>with things like fuzzy term expansion and phrase matches allowed?
>>
> 
> The queries can achieve any level of complexity, as they are written by
> users. There are certainly multiple fields, wildcards, sounds-like, phrase
> matches, etc. etc.
> 
> 
>>- How big are the incoming documents?
>>
> 
> While most of the incoming documents are relatively small (under 100 Kb),
> some can be fairly large (500 Kb and more)
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 21:12:22 2005
Return-Path: <java-user-return-13716-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13265 invoked from network); 17 Mar 2005 21:12:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 21:12:22 -0000
Received: (qmail 5054 invoked by uid 500); 17 Mar 2005 21:12:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5029 invoked by uid 500); 17 Mar 2005 21:12:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5016 invoked by uid 99); 17 Mar 2005 21:12:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 13:12:16 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0A38713E2122; Thu, 17 Mar 2005 16:12:06 -0500 (EST)
Received: from [128.143.167.124] (d-128-167-124.bootp.Virginia.EDU [128.143.167.124])
	by ehatchersolutions.com (Postfix) with ESMTP id 846ED13E2120
	for <java-user@lucene.apache.org>; Thu, 17 Mar 2005 16:11:53 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <42357B7E.3000709@i-hypergrid.com>
References: <42357B7E.3000709@i-hypergrid.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed
Message-Id: <6f32ce7256b0d3c34f41fa184aa06f82@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: WildCard search replacement
Date: Thu, 17 Mar 2005 16:11:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00,
	MIME_QP_LONG_LINE autolearn=ham version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That's a great technique - thanks for sharing it!

	Erik

On Mar 14, 2005, at 6:54 AM, Volodymyr Bychkoviak wrote:

> Hi all.
>
>
> I have large index of documents (about 1.6 millions)
>
> One field (for example called =93number=94) contains string of digits.
>
> I need to do wildcard search on this field such as =93*expression*=94=20=

> (i.e. all documents that contains =93expression=94 in this field.
>
> When I run such search with very short expression (i.e. "*321") I get=20=

> OutOfMemoryError or TooManyClauses Exception. (This case depends on=20
> BooleanQuery.maxClauseCount setting).
>
> So I found following workaround. I index this field as sequence of=20
> terms, each of containing single digit from needed value. (For example=20=

> I have =93123214213=94 value that needs to be indexed. Then it will be=20=

> indexed as sequence of =931=94,=942=94,=943=94,=942=94,=941=94,=944=94,=94=
2=94,=941=94,=943=94 terms.)=20
> This can be done by custom Analyzer class.
>
> To search in this by =93wildcard=94 query I do search by PhraseQuery,=20=

> which contains single digit terms.
>
> For example: to search documents which contains =93321=94 in field =
named=20
> =93number=94 I create following PhraseQuery:
>
>    PhraseQuery phraseQuery =3D new PhraseQuery();
>
>    phraseQuery.add(new Term("number ","3"));
>
>    phraseQuery.add(new Term("number ","2"));
>
>    phraseQuery.add(new Term("number ","1"));
>
> This approach works faster in case when you need to do search by very=20=

> short expression and never run out of memory (or throws TooManyClauses=20=

> Exception).
>
> I think this can be useful for someone who needs similar =
functionality.
>
> Also any comments are appreciated.
>
>
> Regards,
>
> Volodymyr Bychkoviak
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 22:58:35 2005
Return-Path: <java-user-return-13717-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65527 invoked from network); 17 Mar 2005 22:58:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 22:58:35 -0000
Received: (qmail 4831 invoked by uid 500); 17 Mar 2005 22:58:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4807 invoked by uid 500); 17 Mar 2005 22:58:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4794 invoked by uid 99); 17 Mar 2005 22:58:31 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.clicvu.com (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 14:58:31 -0800
Received: from smtp.clicvu.com ([192.168.0.72]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <java-user@lucene.apache.org>;
          Thu, 17 Mar 2005 17:54:43 -0500
Content-type: text/plain
Date: Thu, 17 Mar 2005 17:52:17 -0500
From: roy-lucene-user@xemaps.com
Subject: new added documents not showing
To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys,

We were noticing some odd behavior recently with our indexes.

We have a process that adds new documents into our indexes.  When we iterate through all the documents through an IndexReader, we're not seeing the new documents and we're not seeing the new documents when we run a search.

However, after optimizing, suddenly those new documents appear.  Its almost as if the new segments are not being read by the IndexReader.

Any thoughts?

We're running on Windows NT, jdk 1.4.2 and lucene 1.4.

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 17 23:39:20 2005
Return-Path: <java-user-return-13718-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79566 invoked from network); 17 Mar 2005 23:39:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Mar 2005 23:39:20 -0000
Received: (qmail 64874 invoked by uid 500); 17 Mar 2005 23:39:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64847 invoked by uid 500); 17 Mar 2005 23:39:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64831 invoked by uid 99); 17 Mar 2005 23:39:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fckdp@ok.ru designates 195.2.83.236 as permitted sender)
Received: from mail4.zmail.ru (HELO aha.ru) (195.2.83.236)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 15:39:14 -0800
Received: from [195.98.167.2] (account fckdp@ok.ru HELO pb)
  by frontend4.aha.ru (CommuniGate Pro SMTP 4.2.8)
  with ESMTP id 124700709 for java-user@lucene.apache.org; Fri, 18 Mar 2005 02:39:10 +0300
Reply-To: <fckdp@ok.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: <java-user@lucene.apache.org>
Subject: RE: new added documents not showing
Date: Fri, 18 Mar 2005 02:43:36 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
In-Reply-To: <auto-000004623360@frontend3.aha.ru>
thread-index: AcUrRNiAKki3MllBRDyEYjZRjk9ATwABcD8g
Message-ID: <auto-000124700709@frontend4.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, 

> From: roy-lucene-user@xemaps.com [mailto:roy-lucene-user@xemaps.com] 
 
> However, after optimizing, suddenly those new documents 
> appear.  Its almost as if the new segments are not being read 
> by the IndexReader.
> 
> Any thoughts?

You need to close IndexWriter before open IndexReader. Or reopen
IndexReader.

See TestIndexReader.java:: private void deleteReaderWriterConflict(boolean
optimize) throws IOException
for more info.

Pasha Bizhan
http://lucenedotnet.com
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 06:47:15 2005
Return-Path: <java-user-return-13719-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45645 invoked from network); 18 Mar 2005 06:47:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 06:47:14 -0000
Received: (qmail 99418 invoked by uid 500); 18 Mar 2005 06:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98979 invoked by uid 500); 18 Mar 2005 06:47:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98961 invoked by uid 99); 18 Mar 2005 06:47:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from envoy.cybage.com (HELO envoy.cybage.com) (203.199.150.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 17 Mar 2005 22:47:06 -0800
Received: from chandrasekhard ([192.168.11.236]) by envoy.cybage.com with Microsoft SMTPSVC(6.0.3790.211);
	 Fri, 18 Mar 2005 12:16:00 +0530
From: "Chandrashekhar" <chandrashekhard@cybage.com>
To: <java-user@lucene.apache.org>
Subject: Lucene and CLucene
Date: Fri, 18 Mar 2005 12:16:00 +0530
Message-ID: <HMEBILHDEDLGKKKDMGGAMEIKCCAA.chandrashekhard@cybage.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 18 Mar 2005 06:46:00.0901 (UTC) FILETIME=[25C1FF50:01C52B86]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All,
I am using java lucene 1.3 to index content repository and want to use
clucene 0.8.10 for merge and search on these index files. search works well
but while merging two index files i am getting "term out of order"
exception.
So just wanted to know is there any difference between file formats of java
lucene and clucene? Also does clucene lib is reliable?


Regards,
Chandra


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 07:42:41 2005
Return-Path: <java-user-return-13720-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68696 invoked from network); 18 Mar 2005 07:42:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 07:42:41 -0000
Received: (qmail 70483 invoked by uid 500); 18 Mar 2005 07:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70449 invoked by uid 500); 18 Mar 2005 07:42:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70423 invoked by uid 99); 18 Mar 2005 07:42:28 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31109.mail.mud.yahoo.com (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 17 Mar 2005 23:42:27 -0800
Received: (qmail 89488 invoked by uid 60001); 18 Mar 2005 07:42:25 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=IguYSfDfWz+tYON79D8ctwOb9UoUoMSvmVFN2lPuESNANvDhpDvBgEFNKFLkMuJxmbWzrlbTgtHrIxHxAHHp/NTA/XkiwKNmy7cbJ6L3JVOob3Oe+ztP1rKKOLwYEuQeVEgWGs586WdIOoTeECaQHU7k46mCIyrLLwbdFHj9/G4=  ;
Message-ID: <20050318074225.89486.qmail@web31109.mail.mud.yahoo.com>
Received: from [69.201.131.192] by web31109.mail.mud.yahoo.com via HTTP; Thu, 17 Mar 2005 23:42:24 PST
Date: Thu, 17 Mar 2005 23:42:24 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene and CLucene
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I believe those two versions don't have compatible indices:
  http://www.lucenebook.com/search?query=clucene+compatible

But CLucene team has been pretty active, so I'm not sure where they are
currently in terms of index compatibility.

Otis

--- Chandrashekhar <chandrashekhard@cybage.com> wrote:
> Hi All,
> I am using java lucene 1.3 to index content repository and want to
> use
> clucene 0.8.10 for merge and search on these index files. search
> works well
> but while merging two index files i am getting "term out of order"
> exception.
> So just wanted to know is there any difference between file formats
> of java
> lucene and clucene? Also does clucene lib is reliable?
> 
> 
> Regards,
> Chandra
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 13:52:29 2005
Return-Path: <java-user-return-13721-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72676 invoked from network); 18 Mar 2005 13:52:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 13:52:29 -0000
Received: (qmail 38803 invoked by uid 500); 18 Mar 2005 13:52:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37949 invoked by uid 500); 18 Mar 2005 13:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37935 invoked by uid 99); 18 Mar 2005 13:52:24 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 05:52:23 -0800
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1DCHs2-00079O-OS
	for java-user@lucene.apache.org; Fri, 18 Mar 2005 14:50:35 +0100
Received: from host-84-9-134-55.bulldogdsl.com ([84.9.134.55])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 14:50:34 +0100
Received: from dev_johnpatterson by host-84-9-134-55.bulldogdsl.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 14:50:34 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  John Patterson <dev_johnpatterson@hotmail.com>
Subject:  NumberTools
Date: Fri, 18 Mar 2005 09:31:51 +0000 (UTC)
Lines: 6
Message-ID:  <loom.20050318T103020-615@post.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 84.9.134.55 (Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0)
Sender: news <news@sea.gmane.org>
X-Gmane-MailScanner: Found to be clean
X-Gmane-MailScanner: Found to be clean
X-MailScanner-From: jak-lucene-user@m.gmane.org
X-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I was wondering why NumberTools and DateTools create strings restricted to
alpha-numberic values?

John.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 15:05:36 2005
Return-Path: <java-user-return-13722-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33261 invoked from network); 18 Mar 2005 15:05:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 15:05:36 -0000
Received: (qmail 68889 invoked by uid 500); 18 Mar 2005 15:05:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68865 invoked by uid 500); 18 Mar 2005 15:05:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68852 invoked by uid 99); 18 Mar 2005 15:05:31 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.clicvu.com (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 07:05:30 -0800
Received: from smtp.clicvu.com ([192.168.0.72]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <java-user@lucene.apache.org>;
          Fri, 18 Mar 2005 10:01:43 -0500
Content-type: text/plain
Date: Fri, 18 Mar 2005 09:58:46 -0500
From: roy-lucene-user@xemaps.com
Subject: Re: new added documents not showing
To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> > However, after optimizing, suddenly those new documents
> > appear.  Its almost as if the new segments are not being read
> > by the IndexReader.
> 
> You need to close IndexWriter before open IndexReader. Or reopen
> IndexReader.
> 
> See TestIndexReader.java:: private void deleteReaderWriterConflict(boolean
> optimize) throws IOException
> for more info.

I don't think that is the problem since I'm starting a complete new IndexReader after an indexing process has completed in a new jvm.

But reading the TestIndexReader I found this:
// REQUEST OPTIMIZATION
// This causes a new segment to become current for all subsequent
// searchers. Because of this, deletions made via a previously open
// reader, which would be applied to that reader's segment, are lost
// for subsequent searchers/readers

Does this mean I have optimize for my new segments to be recognized?

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 15:13:57 2005
Return-Path: <java-user-return-13723-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40143 invoked from network); 18 Mar 2005 15:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 15:13:56 -0000
Received: (qmail 95201 invoked by uid 500); 18 Mar 2005 15:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95164 invoked by uid 500); 18 Mar 2005 15:13:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95128 invoked by uid 99); 18 Mar 2005 15:13:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 07:13:46 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0A40913E2120; Fri, 18 Mar 2005 10:13:42 -0500 (EST)
Received: from [128.143.167.231] (d-128-167-231.bootp.Virginia.EDU [128.143.167.231])
	by ehatchersolutions.com (Postfix) with ESMTP id 408D713E2120
	for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 10:13:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <loom.20050318T103020-615@post.gmane.org>
References: <loom.20050318T103020-615@post.gmane.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: NumberTools
Date: Fri, 18 Mar 2005 10:13:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Because Lucene deals with String's lexicographically ordered.

Is there an issue you're encountering?

	Erik

On Mar 18, 2005, at 4:31 AM, John Patterson wrote:

> Hi all,
>
> I was wondering why NumberTools and DateTools create strings 
> restricted to
> alpha-numberic values?
>
> John.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 15:52:15 2005
Return-Path: <java-user-return-13724-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67216 invoked from network); 18 Mar 2005 15:52:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 15:52:15 -0000
Received: (qmail 95280 invoked by uid 500); 18 Mar 2005 15:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95255 invoked by uid 500); 18 Mar 2005 15:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95241 invoked by uid 500); 18 Mar 2005 15:52:10 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 95237 invoked by uid 99); 18 Mar 2005 15:52:10 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from otto.isd-holland.nl (HELO otto2.isd-holland.nl) (62.221.254.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 07:52:09 -0800
Received: from [192.168.0.103] (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by otto2.isd-holland.nl (Postfix) with ESMTP id 93E3536424A
	for <lucene-user@jakarta.apache.org>; Fri, 18 Mar 2005 16:52:06 +0100 (CET)
Message-ID: <423AF926.6040703@rotterdam-cs.com>
Date: Fri, 18 Mar 2005 16:52:06 +0100
From: Aad Nales <aad.nales@rotterdam-cs.com>
Reply-To: aad.nales@rotterdam-cs.com
Organization: Rotterdam CS
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: references to large installations
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We have been using Lucene for quite some time now but recently a 
customer asked to what level Lucene has scaled and if any public 
references to such projects exist. The (potential) customer is looking 
towards an index based on 15M (million) documents. Do any of you know of 
public sites that using lucene to search to similar amounts of documents?

Any references are received with loads of kudos,

cheers,
Aad

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 16:35:11 2005
Return-Path: <java-user-return-13725-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92835 invoked from network); 18 Mar 2005 16:35:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 16:35:11 -0000
Received: (qmail 84936 invoked by uid 500); 18 Mar 2005 16:35:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84916 invoked by uid 500); 18 Mar 2005 16:35:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84903 invoked by uid 99); 18 Mar 2005 16:35:05 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 08:35:03 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DCKJw-0001iA-W9
	for java-user@lucene.apache.org; Fri, 18 Mar 2005 17:27:33 +0100
Received: from host-84-9-128-177.bulldogdsl.com ([84.9.128.177])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 17:27:32 +0100
Received: from dev_johnpatterson by host-84-9-128-177.bulldogdsl.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 17:27:32 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  John Patterson <dev_johnpatterson@hotmail.com>
Subject:  Re: NumberTools
Date: Fri, 18 Mar 2005 16:21:42 +0000 (UTC)
Lines: 10
Message-ID:  <loom.20050318T171427-755@post.gmane.org>
References:  <loom.20050318T103020-615@post.gmane.org> <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 84.9.128.177 (Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0)
Sender: news <news@sea.gmane.org>
X-Gmane-MailScanner: Found to be clean
X-Gmane-MailScanner: Found to be clean
X-MailScanner-From: jak-lucene-user@m.gmane.org
X-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


> Because Lucene deals with String's lexicographically ordered.

I thought lexographical ordering simply used the Unicode value of the chars and
so would also work with non alpa-numeric strings.

> Is there an issue you're encountering?

No issue - I will soon need to add a lot of unstored numerical data to my index
and I am worried that the size may increase a lot.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 17:23:15 2005
Return-Path: <java-user-return-13726-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23864 invoked from network); 18 Mar 2005 17:23:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 17:23:14 -0000
Received: (qmail 33136 invoked by uid 500); 18 Mar 2005 17:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33110 invoked by uid 500); 18 Mar 2005 17:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33097 invoked by uid 99); 18 Mar 2005 17:23:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 09:23:07 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 818EF13E200A; Fri, 18 Mar 2005 12:23:04 -0500 (EST)
Received: from [128.143.167.231] (d-128-167-231.bootp.Virginia.EDU [128.143.167.231])
	by ehatchersolutions.com (Postfix) with ESMTP id 46A0813E2120
	for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 12:22:54 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <loom.20050318T171427-755@post.gmane.org>
References: <loom.20050318T103020-615@post.gmane.org> <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com> <loom.20050318T171427-755@post.gmane.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: NumberTools
Date: Fri, 18 Mar 2005 12:23:01 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mar 18, 2005, at 11:21 AM, John Patterson wrote:
>
>> Because Lucene deals with String's lexicographically ordered.
>
> I thought lexographical ordering simply used the Unicode value of the 
> chars and
> so would also work with non alpa-numeric strings.

Lucene's index works with any String.  But, when dealing with numbers 
and dates such that range queries work, they need to be formatted in a 
way that makes them orderable.

If you index the numbers 1 - 10, you have to pad them, otherwise you'll 
end up with 1, 10, 2, 3, ... and that will throw off sensible range 
queries.

>> Is there an issue you're encountering?
>
> No issue - I will soon need to add a lot of unstored numerical data to 
> my index
> and I am worried that the size may increase a lot.

There is prefix compression used on term values.  So you could pad 
numbers with lots of leading zeros and not incur much additional 
size... 000000000001, for example.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 17:47:18 2005
Return-Path: <java-user-return-13727-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36620 invoked from network); 18 Mar 2005 17:47:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 17:47:18 -0000
Received: (qmail 84869 invoked by uid 500); 18 Mar 2005 17:47:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84799 invoked by uid 500); 18 Mar 2005 17:47:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84727 invoked by uid 99); 18 Mar 2005 17:47:01 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.194 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 09:47:01 -0800
Received: by rproxy.gmail.com with SMTP id b11so180577rne
        for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 09:46:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=bwxkr/FdeQRjUGPVpKPNvy5g8xt5F2/xWnrnVBHbcptds/n+XSjK1CuM2Le918YrFavbzS3YsLwCoHNMDaApaJ5JQtM7YUkLsW9PzPVtpm88gfTc5nQ1TORV9nLMe4CLI3lO1mVBuhCoE+HjCtQqXCq7kX2tvoObHSARsE7IILQ=
Received: by 10.38.22.69 with SMTP id 69mr994448rnv;
        Fri, 18 Mar 2005 09:46:58 -0800 (PST)
Received: by 10.38.12.53 with HTTP; Fri, 18 Mar 2005 09:46:58 -0800 (PST)
Message-ID: <c68e39170503180946de0beb@mail.gmail.com>
Date: Fri, 18 Mar 2005 12:46:58 -0500
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NumberTools
In-Reply-To: <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <loom.20050318T103020-615@post.gmane.org>
	 <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>
	 <loom.20050318T171427-755@post.gmane.org>
	 <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> There is prefix compression used on term values.  So you could pad
> numbers with lots of leading zeros and not incur much additional
> size... 000000000001, for example.

Interesting...

One annoyance I have run across is the impedance mismatch between
range queries and sorting.

If your terms are  indexed as standard numbers, then integer sorting
is fast, but range queries don't work (for negative values).  If you
format the terms such that range queries work for any integer, then
you have to use the slower string (or custom) sorting.

Is there a way around this besides writing my own custom sorting hit collector? 

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 18:27:01 2005
Return-Path: <java-user-return-13728-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62094 invoked from network); 18 Mar 2005 18:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 18:27:01 -0000
Received: (qmail 77854 invoked by uid 500); 18 Mar 2005 18:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77759 invoked by uid 500); 18 Mar 2005 18:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77746 invoked by uid 99); 18 Mar 2005 18:26:57 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.clicvu.com (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 10:26:56 -0800
Received: from smtp.clicvu.com ([192.168.0.72]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <java-user@lucene.apache.org>;
          Fri, 18 Mar 2005 13:23:08 -0500
Content-type: text/plain
Date: Fri, 18 Mar 2005 13:20:21 -0500
From: roy-lucene-user@xemaps.com
Subject: Re: new added documents not showing
To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys,

Just trying to understand where problems can occur.

Maybe I need to describe our indexing process some more.

We create new indexes as "index parts" with Documents that are supposed to contain unique ID key fields.

These "index parts" get merged into two separate indexes: a main index and a message index.  The main index does not "store" any text (for faster search retrieval), so we create new Documents based on the old Documents and add them with the IndexWriter.addDocument method.

There is also the possibility that multiple copies of the same document exist (updated versions) in the main index and the "index parts".  Also multiple copies of the same document can exist in separate "index parts" as well.

So what we do is build a unique list of Documents based on the unique ID field by iterating through every Document in every "index part".  This entails opening and closing an IndexReader for each "index part".

We then make sure that none of these documents exist in the main index.  We open another IndexReader to the main index and then loop through all the Documents and run a IndexReader.delete( new Term( "ID", id ) ).  The IndexReader is then closed.

We then open an IndexWriter to the main index.  We then loop through all the Documents again, this time do a IndexWriter.addDocument for each Document.  We then close the main index.

We do not optimize until the weekend.

There is also another jvm running that handles searches.  This could be running a search on the main index at any given moment.  However, it closes the IndexSearcher after every search.

Are there areas here where it can cause the problem?

Roy.

On Thu, 17 Mar 2005 17:52:17 -0500, roy-lucene-user@xemaps.com <roy-lucene-user@xemaps.com> wrote:
> We were noticing some odd behavior recently with our indexes.
> 
> We have a process that adds new documents into our indexes.  When we iterate through all the documents through an IndexReader, we're not seeing the new documents and we're not seeing the new documents when we run a search.
> 
> However, after optimizing, suddenly those new documents appear.  Its almost as if the new segments are not being read by the IndexReader.
> 
> Any thoughts?
> 
> We're running on Windows NT, jdk 1.4.2 and lucene 1.4.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 18 18:56:44 2005
Return-Path: <java-user-return-13729-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80995 invoked from network); 18 Mar 2005 18:56:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Mar 2005 18:56:43 -0000
Received: (qmail 57435 invoked by uid 500); 18 Mar 2005 18:56:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57412 invoked by uid 500); 18 Mar 2005 18:56:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57399 invoked by uid 99); 18 Mar 2005 18:56:39 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31110.mail.mud.yahoo.com (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 18 Mar 2005 10:56:37 -0800
Received: (qmail 7173 invoked by uid 60001); 18 Mar 2005 18:56:35 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=WTrUdTHQKkhJmby+bs2Qe7FSKFh4jolRePGO8sv224Z5ILLCtIfVHaXKCZJ5HQxIr9PEp6ZfBc1ajhymN8A6xORhzOGHEEa+MNYNv/Mjr9RrokEgprVRw1qsXQ7He2PTHQqZNHEoewmgufEZjui30nKtbrLc5k5ZhWjrGCfIlIs=  ;
Message-ID: <20050318185635.7171.qmail@web31110.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31110.mail.mud.yahoo.com via HTTP; Fri, 18 Mar 2005 10:56:35 PST
Date: Fri, 18 Mar 2005 10:56:35 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: references to large installations
To: java-user@lucene.apache.org, aad.nales@rotterdam-cs.com
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Technorati uses Lucene.

Otis


--- Aad Nales <aad.nales@rotterdam-cs.com> wrote:
> We have been using Lucene for quite some time now but recently a 
> customer asked to what level Lucene has scaled and if any public 
> references to such projects exist. The (potential) customer is
> looking 
> towards an index based on 15M (million) documents. Do any of you know
> of 
> public sites that using lucene to search to similar amounts of
> documents?
> 
> Any references are received with loads of kudos,
> 
> cheers,
> Aad
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 19 05:00:31 2005
Return-Path: <java-user-return-13730-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82257 invoked from network); 19 Mar 2005 05:00:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Mar 2005 05:00:31 -0000
Received: (qmail 98288 invoked by uid 500); 18 Mar 2005 23:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98078 invoked by uid 500); 18 Mar 2005 23:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98065 invoked by uid 99); 18 Mar 2005 23:29:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 15:29:07 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 978A913E2122; Fri, 18 Mar 2005 18:29:03 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id D3E9A13E211E
	for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 18:28:42 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <c68e39170503180946de0beb@mail.gmail.com>
References: <loom.20050318T103020-615@post.gmane.org> <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com> <loom.20050318T171427-755@post.gmane.org> <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <be6be42b944ca97258ad9a26583d0b81@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: NumberTools
Date: Fri, 18 Mar 2005 18:28:49 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Using a zero-padded number like 00000001 is fine for both range queries 
and for integer-based sorting.  Are you finding otherwise?

	Erik


On Mar 18, 2005, at 12:46 PM, Yonik Seeley wrote:

>> There is prefix compression used on term values.  So you could pad
>> numbers with lots of leading zeros and not incur much additional
>> size... 000000000001, for example.
>
> Interesting...
>
> One annoyance I have run across is the impedance mismatch between
> range queries and sorting.
>
> If your terms are  indexed as standard numbers, then integer sorting
> is fast, but range queries don't work (for negative values).  If you
> format the terms such that range queries work for any integer, then
> you have to use the slower string (or custom) sorting.
>
> Is there a way around this besides writing my own custom sorting hit 
> collector?
>
> -Yonik
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 19 05:27:00 2005
Return-Path: <java-user-return-13731-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90276 invoked from network); 19 Mar 2005 05:27:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Mar 2005 05:27:00 -0000
Received: (qmail 19836 invoked by uid 500); 18 Mar 2005 23:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19806 invoked by uid 500); 18 Mar 2005 23:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19790 invoked by uid 99); 18 Mar 2005 23:55:38 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 15:55:36 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DCRHN-0000QV-PA
	for java-user@lucene.apache.org; Sat, 19 Mar 2005 00:53:23 +0100
Received: from host-84-9-132-190.bulldogdsl.com ([84.9.132.190])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 19 Mar 2005 00:53:21 +0100
Received: from dev_johnpatterson by host-84-9-132-190.bulldogdsl.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 19 Mar 2005 00:53:21 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  John Patterson <dev_johnpatterson@hotmail.com>
Subject:  Re: NumberTools
Date: Fri, 18 Mar 2005 23:52:32 +0000 (UTC)
Lines: 59
Message-ID:  <loom.20050319T004919-953@post.gmane.org>
References:  <loom.20050318T103020-615@post.gmane.org> <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com> <loom.20050318T171427-755@post.gmane.org> <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 84.9.132.190 (Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0)
Sender: news <news@sea.gmane.org>
X-Gmane-MailScanner: Found to be clean
X-Gmane-MailScanner: Found to be clean
X-MailScanner-From: jak-lucene-user@m.gmane.org
X-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher <erik <at> ehatchersolutions.com> writes:

> Lucene's index works with any String.  But, when dealing with numbers 
> and dates such that range queries work, they need to be formatted in a 
> way that makes them orderable.

What I am suggesting here is storing numeric values as unsigned binary values so
that they can be used in a range query.  To convert a signed 2's complement
number to an unsigned number you just flip the left most bit.  The easiest way
to do this is to add the min value (eg Integer.MIN_VALUE).

Then to convert the integer to chars I would do somehing like this:

int unsigned = signed + Integer.MIN_VALUE;
char c2 = (char) (unsigned & 0x0000FFFF);
char c1 = (char) (unsigned >> 16 & 0x0000FFFF);
String intText new String(new char[] {c1, c2});

As I don't often think in binary I wrote a little test to verify that this is
correct according to String.compareTo() which is used during index creation to
sort the fields.

public class NumberCompareTest
{
  public static String convertTotText(int input)
  {
    int unsigned = input + Integer.MIN_VALUE;
    char c2 = (char) (unsigned & 0x0000FFFF);
    char c1 = (char) (unsigned >> 16 & 0x0000FFFF);
    return new String(new char[] {c1, c2});
  }
  
  public static void main(String[] args)
  {
    isLessThan(convertTotText(-1), convertTotText(0));
    isLessThan(convertTotText(0), convertTotText(1));
    isLessThan(convertTotText(Integer.MIN_VALUE), convertTotText(0));
    isLessThan(convertTotText(Integer.MIN_VALUE),
convertTotText(Integer.MAX_VALUE));
    isLessThan(convertTotText(0), convertTotText(Integer.MAX_VALUE));
	
    // will be false
    isLessThan(convertTotText(45), convertTotText(21));
  }

  public static void isLessThan(String s1, String s2)
  {
    System.out.println(s1.compareTo(s2) < 0);
  }
}

It all seems to work OK so will this also work for Lucene?  Possibly Field.java
could be have a isNumeric field added to it.

John






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 19 05:35:30 2005
Return-Path: <java-user-return-13732-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92410 invoked from network); 19 Mar 2005 05:35:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Mar 2005 05:35:29 -0000
Received: (qmail 7360 invoked by uid 500); 19 Mar 2005 05:35:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7334 invoked by uid 500); 19 Mar 2005 05:35:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7315 invoked by uid 99); 19 Mar 2005 05:35:24 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.170.196 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 18 Mar 2005 21:35:23 -0800
Received: by rproxy.gmail.com with SMTP id c51so394760rne
        for <java-user@lucene.apache.org>; Fri, 18 Mar 2005 21:35:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type;
        b=LZH3xgu0VLEAIECmwRvervl7pYUfuBWFjdLk6QyovAqCvBYMjQbjoI7IhuRtyMxVYXzDGOVbUxAVrqEPbN/O4BHxgruSJ711ExGcPhg/3b7Dnb/jgw3aGs2Cp+VaAd5/Tk2TtPbQixB/9aMvTl8m2Mp3gMI27gsP/XI2Q1XrTpc=
Received: by 10.38.99.9 with SMTP id w9mr3452944rnb;
        Fri, 18 Mar 2005 21:35:20 -0800 (PST)
Received: from ?192.168.1.100? ([24.6.189.152])
        by mx.gmail.com with ESMTP id k23sm658476rnb.2005.03.18.21.35.20;
        Fri, 18 Mar 2005 21:35:20 -0800 (PST)
Message-ID: <423BB9F0.1070605@gmail.com>
Date: Fri, 18 Mar 2005 21:34:40 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: how to detect index integrity?
Content-Type: multipart/alternative;
 boundary="------------000307070706010609000104"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------000307070706010609000104
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

Is there any way to detect the index's integrity?
Sometimes I came upon exceptions like these. If it happens, my only way 
is to delete the corrupted index.

    * Exception in thread "main" java.io.IOException : read past EOF
    * java.lang.ArrayIndexOutOfBoundsException



Being able to verify the index's integrity will prevent nightmare like 
this: http://java2.5341.com/msg/73077.html


Chris

--------------000307070706010609000104--

From java-user-return-13733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Mar 19 05:56:55 2005
Return-Path: <java-user-return-13733-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94539 invoked from network); 19 Mar 2005 05:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Mar 2005 05:56:55 -0000
Received: (qmail 24295 invoked by uid 500); 19 Mar 2005 05:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24269 invoked by uid 500); 19 Mar 2005 05:56:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24256 invoked by uid 99); 19 Mar 2005 05:56:42 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31103.mail.mud.yahoo.com (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 18 Mar 2005 21:56:41 -0800
Received: (qmail 30854 invoked by uid 60001); 19 Mar 2005 05:56:39 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Yd0wYz9VJJd3NcOA7/yXBOHMy8Dr8g/Y4kOY+AipAwcXdmatPPKimY7GTmnTgp4B+aRaYcGjQkrfhaDyGGZLATl9MD9+wd3grO0iw0QHEmDJaksqE3pLE/7Fj/6j8cZXr6W6AqbjBaS9BNjyP2+/AdsY9divoTd8AK1wZe657fw=  ;
Message-ID: <20050319055639.30852.qmail@web31103.mail.mud.yahoo.com>
Received: from [69.201.131.192] by web31103.mail.mud.yahoo.com via HTTP; Fri, 18 Mar 2005 21:56:39 PST
Date: Fri, 18 Mar 2005 21:56:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: how to detect index integrity?
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Somebody recently submitted a NoOpDirectory, which may help you detect
a corrupt index.  There are no tools that will fix a corrupt index,
though.

Otis

--- Chris Lu <chris.lu@gmail.com> wrote:
> Hi,
> 
> Is there any way to detect the index's integrity?
> Sometimes I came upon exceptions like these. If it happens, my only
> way 
> is to delete the corrupted index.
> 
>     * Exception in thread "main" java.io.IOException : read past EOF
>     * java.lang.ArrayIndexOutOfBoundsException
> 
> 
> 
> Being able to verify the index's integrity will prevent nightmare
> like 
> this: http://java2.5341.com/msg/73077.html
> 
> 
> Chris
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 20 01:45:34 2005
Return-Path: <java-user-return-13734-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13629 invoked from network); 20 Mar 2005 01:45:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Mar 2005 01:45:34 -0000
Received: (qmail 88312 invoked by uid 500); 20 Mar 2005 01:45:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88292 invoked by uid 500); 20 Mar 2005 01:45:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88276 invoked by uid 99); 20 Mar 2005 01:45:29 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.184.203 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 19 Mar 2005 17:45:28 -0800
Received: by wproxy.gmail.com with SMTP id 37so576511wra
        for <java-user@lucene.apache.org>; Sat, 19 Mar 2005 17:45:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type;
        b=M2fFRgEGtSps6Up2zlCXjhftKS4pPW1bHX9iuSurvvKoxCYSlsAesZGHfqalTzFmFCAXVmvTYvOamyWOx5lh6wqVs2WOJDdWVJkwrRK5r094QdeMzDJzvNGJ+l8vnoMZvdHanezYtRTs73bSexjySgLUV1yj1Bufms6FAt3cVrw=
Received: by 10.54.24.27 with SMTP id 27mr2573105wrx;
        Sat, 19 Mar 2005 12:18:46 -0800 (PST)
Received: from ?192.168.1.100? ([24.6.189.152])
        by mx.gmail.com with ESMTP id g3sm265918wra.2005.03.19.12.18.45;
        Sat, 19 Mar 2005 12:18:46 -0800 (PST)
Message-ID: <423C88FC.9000909@gmail.com>
Date: Sat, 19 Mar 2005 12:18:04 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how to detect index integrity?
References: <20050319055639.30852.qmail@web31103.mail.mud.yahoo.com>
In-Reply-To: <20050319055639.30852.qmail@web31103.mail.mud.yahoo.com>
Content-Type: multipart/alternative;
 boundary="------------030104060700020600050207"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030104060700020600050207
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

That would definitely help!
Where to get the source? I couldn't find it in Sandbox or the source 
code tree that I know of.

Chris

Otis Gospodnetic wrote:

>Somebody recently submitted a NoOpDirectory, which may help you detect
>a corrupt index.  There are no tools that will fix a corrupt index,
>though.
>
>Otis
>
>--- Chris Lu <chris.lu@gmail.com> wrote:
>  
>
>>Hi,
>>
>>Is there any way to detect the index's integrity?
>>Sometimes I came upon exceptions like these. If it happens, my only
>>way 
>>is to delete the corrupted index.
>>
>>    * Exception in thread "main" java.io.IOException : read past EOF
>>    * java.lang.ArrayIndexOutOfBoundsException
>>
>>
>>
>>Being able to verify the index's integrity will prevent nightmare
>>like 
>>this: http://java2.5341.com/msg/73077.html
>>
>>
>>Chris
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


--------------030104060700020600050207--

From java-user-return-13735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 20 06:33:03 2005
Return-Path: <java-user-return-13735-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3609 invoked from network); 20 Mar 2005 06:33:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Mar 2005 06:33:03 -0000
Received: (qmail 71486 invoked by uid 500); 20 Mar 2005 06:33:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70617 invoked by uid 500); 20 Mar 2005 06:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70604 invoked by uid 99); 20 Mar 2005 06:32:59 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31102.mail.mud.yahoo.com (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 19 Mar 2005 22:32:58 -0800
Received: (qmail 66074 invoked by uid 60001); 20 Mar 2005 06:32:55 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=qkveE5FREyr7wvzKq933hyussONLsO4zAL7ei06vBWT5rcOPMGDvCrYOjyp5RCU5gpeornIjBwmhrOXia6TT63Y6fvuGvXq/XEa+6d7AamlWbECSSmLSRCLwUkqOJqNq7Kc0FxPGwG6v07cNhwiCIgTvSDVW+6ndN0+H1EYxXb4=  ;
Message-ID: <20050320063255.66072.qmail@web31102.mail.mud.yahoo.com>
Received: from [69.201.131.192] by web31102.mail.mud.yahoo.com via HTTP; Sat, 19 Mar 2005 22:32:55 PST
Date: Sat, 19 Mar 2005 22:32:55 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: how to detect index integrity?
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It is currently in bugzilla.

Otis

--- Chris Lu <chris.lu@gmail.com> wrote:
> That would definitely help!
> Where to get the source? I couldn't find it in Sandbox or the source 
> code tree that I know of.
> 
> Chris
> 
> Otis Gospodnetic wrote:
> 
> >Somebody recently submitted a NoOpDirectory, which may help you
> detect
> >a corrupt index.  There are no tools that will fix a corrupt index,
> >though.
> 
> >Otis
> >
> >--- Chris Lu <chris.lu@gmail.com> wrote:
> >  
> >
> >>Hi,
> >>
> >>Is there any way to detect the index's integrity?
> >>Sometimes I came upon exceptions like these. If it happens, my only
> >>way 
> >>is to delete the corrupted index.
> >>
> >>    * Exception in thread "main" java.io.IOException : read past
> EOF
> >>    * java.lang.ArrayIndexOutOfBoundsException
> >>
> >>
> >>
> >>Being able to verify the index's integrity will prevent nightmare
> >>like 
> >>this: http://java2.5341.com/msg/73077.html
> >>
> >>
> >>Chris
> >>
> >>    
> >>
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >  
> >
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 20 08:49:24 2005
Return-Path: <java-user-return-13736-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59060 invoked from network); 20 Mar 2005 08:49:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Mar 2005 08:49:24 -0000
Received: (qmail 37926 invoked by uid 500); 20 Mar 2005 08:49:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37884 invoked by uid 500); 20 Mar 2005 08:49:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37871 invoked by uid 99); 20 Mar 2005 08:49:11 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 20 Mar 2005 00:49:09 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3F71A5B776; Sun, 20 Mar 2005 00:49:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 37D1B7F45C
	for <java-user@lucene.apache.org>; Sun, 20 Mar 2005 00:49:05 -0800 (PST)
Date: Sun, 20 Mar 2005 00:49:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene User <java-user@lucene.apache.org>
Subject: Re: Removing similar documents from search results
In-Reply-To: <1110883855.11418.75.camel@saturn>
Message-ID: <Pine.LNX.4.58.0503200031550.21116@hal.rescomp.berkeley.edu>
References: <1110820764.11418.36.camel@saturn>  <4235D01D.9020301@cs.put.poznan.pl>
 <1110823739.11418.45.camel@saturn>  <4235EA99.9000703@cs.put.poznan.pl>
 <1110883855.11418.75.camel@saturn>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: At the moment I need something quite simple. To identify a page that
: appears in many forms, e.g.:
:
: - Normal version
: - Split across several pages
: - Print version
: - From a different section (different styling and navigation elements)
:
: Basically identical content, presented in different ways.

Actually, your "Split across several pages" comment implies that you want
a system which can tell that page 1 of a multipage article should be
grouped with page 2 -- which may be radically different content.  Most
multipage documents have very differnet text on subsequent pages, so i'm
not sure that a progromatic solution is going to be bale to spot that.

I may also be reading too much into your message, but it sounds like you
aren't trying to index generic content -- it sounds like you are trying to
index content under your control (ie: content on your own web site).

if that's the case, then presumably you know somethign about the
source data and the URL strucutre -- maybe you could solve this problem
when you build your index.

for example, if i look at a site like perl.com, i can see a pattern in the
way the article URLs look...

page 1...
http://www.perl.com/pub/a/2005/02/17/3d_engine.html
page 2, etc...
http://www.perl.com/pub/a/2005/02/17/3d_engine.html?page=2
printable...
http://www.perl.com/lpt/a/2005/02/17/3d_engine.html


So instead of putting all of those URLs in the index as seperate docs, why
not createa single doc, with all of those URLs?




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 11:06:56 2005
Return-Path: <java-user-return-13737-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67970 invoked from network); 21 Mar 2005 11:06:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 11:06:56 -0000
Received: (qmail 35517 invoked by uid 500); 21 Mar 2005 11:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35418 invoked by uid 500); 21 Mar 2005 11:06:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34894 invoked by uid 99); 21 Mar 2005 11:06:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from intranet.runtime-collective.com (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 03:06:42 -0800
Received: from [81.168.89.246] (helo=[192.168.1.28])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1DDKjz-0006x3-00
	for <java-user@lucene.apache.org>; Mon, 21 Mar 2005 11:06:35 +0000
Subject: Re: Removing similar documents from search results
From: Miles Barr <miles@runtime-collective.com>
To: Lucene User <java-user@lucene.apache.org>
In-Reply-To: <Pine.LNX.4.58.0503200031550.21116@hal.rescomp.berkeley.edu>
References: <1110820764.11418.36.camel@saturn>
	 <4235D01D.9020301@cs.put.poznan.pl> <1110823739.11418.45.camel@saturn>
	 <4235EA99.9000703@cs.put.poznan.pl> <1110883855.11418.75.camel@saturn>
	 <Pine.LNX.4.58.0503200031550.21116@hal.rescomp.berkeley.edu>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Mon, 21 Mar 2005 11:06:18 +0000
Message-Id: <1111403178.11418.320.camel@saturn>
Mime-Version: 1.0
X-Mailer: Evolution 2.0.4 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sun, 2005-03-20 at 00:49 -0800, Chris Hostetter wrote:
> Actually, your "Split across several pages" comment implies that you want
> a system which can tell that page 1 of a multipage article should be
> grouped with page 2 -- which may be radically different content.  Most
> multipage documents have very differnet text on subsequent pages, so i'm
> not sure that a progromatic solution is going to be bale to spot that.

Actually I added that in after I saw that Google does it. You're right
that the context is likely to be completely different so I guess they do
it through some URL matching.

> I may also be reading too much into your message, but it sounds like you
> aren't trying to index generic content -- it sounds like you are trying to
> index content under your control (ie: content on your own web site).
> 
> if that's the case, then presumably you know somethign about the
> source data and the URL strucutre -- maybe you could solve this problem
> when you build your index.
> 
> for example, if i look at a site like perl.com, i can see a pattern in the
> way the article URLs look...
> 
> page 1...
> http://www.perl.com/pub/a/2005/02/17/3d_engine.html
> page 2, etc...
> http://www.perl.com/pub/a/2005/02/17/3d_engine.html?page=2
> printable...
> http://www.perl.com/lpt/a/2005/02/17/3d_engine.html
> 
> 
> So instead of putting all of those URLs in the index as seperate docs, why
> not create a single doc, with all of those URLs?

I have to index several sites and I used some examples of the problems
I've come across so far. I don't control the content for any of them,
and they get picked up by a spider so excluding pages requires adding
special cases.

I'll probably adopt a two stage approach.

1. Prevent duplicate documents from getting into the index in the first
place, e.g. compare MD5 hashes and file sizes, maybe make the spider
configurable to spot certain URL patterns, etc.

2. Try out the various techniques suggested in this thread to spot
similar pages at query time and hide them.



-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective Ltd.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 14:18:54 2005
Return-Path: <java-user-return-13738-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58810 invoked from network); 21 Mar 2005 14:18:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 14:18:54 -0000
Received: (qmail 73135 invoked by uid 500); 21 Mar 2005 14:18:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73094 invoked by uid 500); 21 Mar 2005 14:18:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73079 invoked by uid 500); 21 Mar 2005 14:18:48 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 73076 invoked by uid 99); 21 Mar 2005 14:18:48 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailgate1.eduhi.at (HELO mailgate1.eduhi.at) (193.170.67.93)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 06:18:46 -0800
Received: from localhost (localhost [127.0.0.1])
	by mailgate1.eduhi.at (Postfix) with ESMTP id 0214A7CAA8
	for <lucene-user@jakarta.apache.org>; Mon, 21 Mar 2005 15:18:41 +0100 (CET)
Received: from mail.eduhi.at (mail.asn-linz.ac.at [172.27.2.5])
	by mailgate1.eduhi.at (Postfix) with ESMTP id D03027CA5F
	for <lucene-user@jakarta.apache.org>; Mon, 21 Mar 2005 15:18:37 +0100 (CET)
Received: from [192.168.0.117] ([10.221.8.220]) by mail.eduhi.at with Microsoft SMTPSVC(5.0.2172.1);
	 Mon, 21 Mar 2005 15:18:37 +0100
Message-ID: <423ED96C.9010404@eduhi.at>
Date: Mon, 21 Mar 2005 15:25:48 +0100
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Multiple Field Queries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 21 Mar 2005 14:18:37.0690 (UTC) FILETIME=[DFB465A0:01C52E20]
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on mailgate1.eduhi.at
X-Spam-Level: *
X-Spam-Status: No, hits=1.7 required=5.8 tests=AWL,EH_b_lwords,
	EH_f_whitelist5,UNWANTED_LANGUAGE_BODY autolearn=no version=2.64
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
at the moment i cannot search through the mailinglist archives so i will 
bother you. I will search over multiple fields for example content and 
filename. The MultiFieldQueryParser is not applicable for me so i create 
the query syntax programmatically. The querystring is parsed with the 
QueryParser i use it in this example two times for content and filename 
the resulting query. Then i combine them with BooleanQuery add the 
resulting string is for example +content:test +filename:test. The 
problem here is i would like to construct a query like (+content:test) 
OR (+filename:test). Is the only alternative to extend the boolean query 
to the string and make some string operations above it and pass it 
through the QueryParser again?
Thanks
Stefan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 15:38:31 2005
Return-Path: <java-user-return-13739-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20041 invoked from network); 21 Mar 2005 15:38:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 15:38:31 -0000
Received: (qmail 48377 invoked by uid 500); 21 Mar 2005 15:38:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48293 invoked by uid 500); 21 Mar 2005 15:38:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48250 invoked by uid 99); 21 Mar 2005 15:38:22 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from pluto.isd-holland.nl (HELO pluto2.isd-holland.nl) (62.221.254.24)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 07:38:21 -0800
Received: from [192.168.0.103] (dsl-82-199-135-164.dutchdsl.nl [82.199.135.164])
	by pluto2.isd-holland.nl (Postfix) with ESMTP id 6584A2FC219
	for <java-user@lucene.apache.org>; Mon, 21 Mar 2005 16:38:18 +0100 (CET)
Message-ID: <423EEA6A.7090802@rotterdam-cs.com>
Date: Mon, 21 Mar 2005 16:38:18 +0100
From: Aad Nales <aad.nales@rotterdam-cs.com>
Reply-To: aad.nales@rotterdam-cs.com
Organization: Rotterdam CS
User-Agent: Mozilla Thunderbird 1.0 (X11/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple Field Queries
References: <423ED96C.9010404@eduhi.at>
In-Reply-To: <423ED96C.9010404@eduhi.at>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Perhaps i misunderstand but it seems to me that if you execute the add 
with two times a false value you will end up with the required result.

(content:test) (filename:test)

which is equivalent to your requested query.

hope this helps,
Aad Nales


Gusenbauer Stefan wrote:

> Hello,
> at the moment i cannot search through the mailinglist archives so i 
> will bother you. I will search over multiple fields for example 
> content and filename. The MultiFieldQueryParser is not applicable for 
> me so i create the query syntax programmatically. The querystring is 
> parsed with the QueryParser i use it in this example two times for 
> content and filename the resulting query. Then i combine them with 
> BooleanQuery add the resulting string is for example +content:test 
> +filename:test. The problem here is i would like to construct a query 
> like (+content:test) OR (+filename:test). Is the only alternative to 
> extend the boolean query to the string and make some string operations 
> above it and pass it through the QueryParser again?
> Thanks
> Stefan
>
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 16:36:34 2005
Return-Path: <java-user-return-13740-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47921 invoked from network); 21 Mar 2005 16:36:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 16:36:34 -0000
Received: (qmail 73243 invoked by uid 500); 21 Mar 2005 16:36:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73043 invoked by uid 500); 21 Mar 2005 16:36:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73029 invoked by uid 99); 21 Mar 2005 16:36:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.alterpoint.com (HELO exchange.inside.eclyptic.com) (66.219.38.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 08:36:24 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C52E34.1D5904FC"
Subject: RE: how to detect index integrity?
Date: Mon, 21 Mar 2005 10:36:21 -0600
Message-ID: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
Thread-Topic: how to detect index integrity?
Thread-Index: AcUsRXQJ+lbCQnoKRpS4tn0aHVXoWwB7fPvi
From: "Ravi Rao" <rrao@alterpoint.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C52E34.1D5904FC
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

> From: chris.lu@gmail.com
> Sent: Fri 3/18/2005 11:34 PM

> Is there any way to detect the index's integrity?
> Sometimes I came upon exceptions like these. If it happens, my only =
way=20
> is to delete the corrupted index.

>    * Exception in thread "main" java.io.IOException : read past EOF
>    * java.lang.ArrayIndexOutOfBoundsException

> [ ... ]

I did too, which is why I wrote NullDirectory.  You can find the
sources and a description in bugzilla.

   http://issues.apache.org/bugzilla/show_bug.cgi?id=3D33851

Look at the tests for examples of use.  I would value your feedback.
--=20
Ravi/


------_=_NextPart_001_01C52E34.1D5904FC
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C52E34.1D5904FC--

From java-user-return-13741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 17:13:31 2005
Return-Path: <java-user-return-13741-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64443 invoked from network); 21 Mar 2005 17:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 17:13:31 -0000
Received: (qmail 14088 invoked by uid 500); 21 Mar 2005 17:09:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14059 invoked by uid 500); 21 Mar 2005 17:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14042 invoked by uid 99); 21 Mar 2005 17:09:44 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailgate3.eduhi.at (HELO mailgate2.eduhi.at) (193.170.67.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 09:09:42 -0800
Received: from localhost (localhost [127.0.0.1])
	by mailgate2.eduhi.at (Postfix) with ESMTP id C467B2B20B
	for <java-user@lucene.apache.org>; Mon, 21 Mar 2005 17:59:25 +0100 (CET)
Received: from mail.eduhi.at (mail.asn-linz.ac.at [172.27.2.5])
	by mailgate2.eduhi.at (Postfix) with ESMTP id B404B2B206
	for <java-user@lucene.apache.org>; Mon, 21 Mar 2005 17:59:25 +0100 (CET)
Received: from [192.168.0.117] ([10.221.8.220]) by mail.eduhi.at with Microsoft SMTPSVC(5.0.2172.1);
	 Mon, 21 Mar 2005 17:59:23 +0100
Message-ID: <423EFF19.5060802@eduhi.at>
Date: Mon, 21 Mar 2005 18:06:33 +0100
From: Gusenbauer Stefan <gusenbauer@eduhi.at>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Multiple Field Queries
References: <423ED96C.9010404@eduhi.at> <423EEA6A.7090802@rotterdam-cs.com>
In-Reply-To: <423EEA6A.7090802@rotterdam-cs.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 21 Mar 2005 16:59:23.0184 (UTC) FILETIME=[54DDFB00:01C52E37]
X-Spam-Checker-Version: SpamAssassin 2.64 (2004-01-11) on mailgate2.eduhi.at
X-Spam-Level: **
X-Spam-Status: No, hits=2.5 required=5.8 tests=EH_b_lwords,EH_f_whitelist5,
	EH_u_spam_lllow,UNWANTED_LANGUAGE_BODY autolearn=no version=2.64
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Aad Nales wrote:

> Perhaps i misunderstand but it seems to me that if you execute the add 
> with two times a false value you will end up with the required result.
>
> (content:test) (filename:test)
>
> which is equivalent to your requested query.
>
> hope this helps,
> Aad Nales
>
>
> Gusenbauer Stefan wrote:
>
>> Hello,
>> at the moment i cannot search through the mailinglist archives so i 
>> will bother you. I will search over multiple fields for example 
>> content and filename. The MultiFieldQueryParser is not applicable for 
>> me so i create the query syntax programmatically. The querystring is 
>> parsed with the QueryParser i use it in this example two times for 
>> content and filename the resulting query. Then i combine them with 
>> BooleanQuery add the resulting string is for example +content:test 
>> +filename:test. The problem here is i would like to construct a query 
>> like (+content:test) OR (+filename:test). Is the only alternative to 
>> extend the boolean query to the string and make some string 
>> operations above it and pass it through the QueryParser again?
>> Thanks
>> Stefan
>>
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
thanks
add(query,false,false) works now. The failure was because i added a 
field to all documents for searching with a datefile. therefore there 
were always all documents returned.
stefan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 18:25:55 2005
Return-Path: <java-user-return-13742-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18549 invoked from network); 21 Mar 2005 18:25:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 18:25:55 -0000
Received: (qmail 92902 invoked by uid 500); 21 Mar 2005 18:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92863 invoked by uid 500); 21 Mar 2005 18:25:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92783 invoked by uid 99); 21 Mar 2005 18:25:43 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.clicvu.com (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 10:25:41 -0800
Received: from smtp.clicvu.com ([192.168.0.72]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <java-user@lucene.apache.org>;
          Mon, 21 Mar 2005 13:21:53 -0500
Content-type: text/plain
Date: Mon, 21 Mar 2005 13:19:13 -0500
From: roy-lucene-user@xemaps.com
Subject: Re: new added documents not showing
To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sat, 19 Mar 2005 22:43:44 +0300, Pasha Bizhan <fckdp@ok.ru> wrote:
> Could you provide the code snippets for your process?
> 

Sure (thanx for helping, btw)

I just realized that the way I described our process was off a little bit.

Here's the process again:

1.  grab all index Directorys (index parts)
2.  loop newest to oldest and make documents unique (by deleting older documents)
3.  get list of documents from index parts to delete from our main index
4.  delete documents from main index
5.  add all documents from index parts into the main index

I apologize for the amount of code below.

Here is the code that loops through all the index parts, from newest to oldest, and then deletes the documents from any older index parts.

The unique ID we use as a Key Field is "ReceivedDate".

        IndexReader reader = null;
        IndexReader reader2 = null;

        try {
            /*
             *-------------------------------------------------------------
             * Loop backwards (latest to oldest) through parts
             *-------------------------------------------------------------
             */
            for ( int i = ( directories.length - 1 ); i >= 0; i-- ) {
                reader = IndexReader.open( FSDirectory.getDirectory( directories[i], false ) );
                int numDocuments = reader.numDocs();

                /*
                 *-------------------------------------------------------------
                 * Loop forward (oldest to latest) up to the current part
                 * being looked at.
                 * Delete any messages from the older parts that exist in the
                 * current part.
                 *-------------------------------------------------------------
                 */
                for ( int x = 0; x < i; x++ ) {
                    String partName = directories[x].getName();
                    reader2 = IndexReader.open( FSDirectory.getDirectory( directories[x], false ) );

                    for ( int h = 0; h < numDocuments; h++ ) {
                        if ( !reader.isDeleted( h ) ) {
                            Document d = reader.document( h );
                            String receivedDate = d.get( "ReceivedDate" );
                            Term term = new Term( "ReceivedDate", receivedDate );
                            int num = reader2.delete( term );
                        }
                    }

                    reader2.close();
                    reader2 = null;
                }

                reader.close();
                reader = null;
            }
        }
        catch ( Exception e ) {
            // log error
        }
        finally {
            try {
                if ( reader != null ) reader.close();
                if ( reader2 != null ) reader2.close();
            }
            catch ( IOException e ) {
                // log error
            }
        }

Here we build up a list of ReceivedDates to help us delete from the main.index.  I just realized that we could build this list from the previous section.

        List list = new ArrayList();
        for ( int i = 0; i < directories.length; i++ ) {
            IndexReader r = null;
            try {
                r = IndexReader.open( directories[i] );
                int num = r.numDocs();

                for ( int x = 0; x < num; x++ ) {
                    if ( !r.isDeleted( x ) ) {
                        Map map = new HashMap();
                        Document d = r.document( x );
                        map.put( "ReceivedDate", d.get( "ReceivedDate" ) );
                        list.add( map );
                    }
                }
            }
            catch ( Exception e ) {
                e.printStackTrace();
            }
            finally {
                if ( r != null ) try { r.close(); } catch ( Exception e ) {}
            }
        }
        return list;

Here we actually go through and delete the documents from the main index.

        IndexReader reader = null;

        Map message;
        try {
            reader = IndexReader.open( mainindex );
            Iterator it = indexList.iterator(); // returned from previous section

            /*
             *-------------------------------------------------------------
             * Loop through messages to clear from the index
             *-------------------------------------------------------------
             */
            while ( it.hasNext() ) {
                message = (Map)it.next();

                /*
                 *-------------------------------------------------------------
                 * Delete based on received date
                 *-------------------------------------------------------------
                 */
                String receivedDate = (String)message.get( "ReceivedDate" );
                Term term = new Term( "ReceivedDate", receivedDate );
                int num = reader.delete( term );
            }
            /*
             *-------------------------------------------------------------
             * End loop through messages to clear from the index
             *-------------------------------------------------------------
             */
        }
        catch ( Exception e ) {
            // log error
        }
        finally {
            try {
                if ( reader != null ) reader.close();
            }
            catch ( IOException e ) {
                // log close error
            }
        }

Now we loop through each index part and add each document separately, this time with most fields as Unstored.

        IndexReader r = null;
        try {
            /*
             *-------------------------------------------------------------
             * Open an index reader to an index part
             *-------------------------------------------------------------
             */
            r = IndexReader.open( directory );
            int num = r.numDocs();

            /*
             *-------------------------------------------------------------
             * Loop through messages in the index part
             *-------------------------------------------------------------
             */
            for ( int i = 0; i < num; i++ ) {
                if ( !r.isDeleted( i ) ) {
                    /*
                     *-------------------------------------------------------------
                     * Current document while looping through
                     *-------------------------------------------------------------
                     */
                    Document d = r.document( i );

                    if ( writer != null ) {
                        /*
                         *-------------------------------------------------------------
                         * New document to add into main index
                         *-------------------------------------------------------------
                         */
                        Document nd = new Document();

                        /*
                         *-------------------------------------------------------------
                         * Loop through document fields.
                         *-------------------------------------------------------------
                         */
                        for ( Enumeration e = d.fields(); e.hasMoreElements(); ) {
                            Field f = (Field)e.nextElement();
                             // re-add most fields as unstored

                        }
                        /*
                         *-------------------------------------------------------------
                         * End loop through document fields.
                         *-------------------------------------------------------------
                         */

                        /*
                         *-------------------------------------------------------------
                         * Add new document into main index.
                         *-------------------------------------------------------------
                         */
                        writer.addDocument( nd );
                    }
                }
            }
            /*
             *-------------------------------------------------------------
             * End loop through messages in the index part
             *-------------------------------------------------------------
             */
        }
        finally {
            if ( r != null ) try { r.close(); } catch ( Exception e ) {}
        }

After that the index writer is closed.

Thanks for helping out!

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 18:59:34 2005
Return-Path: <java-user-return-13743-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36488 invoked from network); 21 Mar 2005 18:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 18:59:34 -0000
Received: (qmail 37387 invoked by uid 500); 21 Mar 2005 18:59:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36554 invoked by uid 500); 21 Mar 2005 18:59:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36541 invoked by uid 99); 21 Mar 2005 18:59:31 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 10:59:30 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 16B175B787; Mon, 21 Mar 2005 10:59:28 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 0D70B7F45C; Mon, 21 Mar 2005 10:59:28 -0800 (PST)
Date: Mon, 21 Mar 2005 10:59:28 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, Yonik Seeley <yseeley@gmail.com>
Subject: Re: NumberTools
In-Reply-To: <c68e39170503180946de0beb@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu>
References: <loom.20050318T103020-615@post.gmane.org> 
 <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com> 
 <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com>
 <c68e39170503180946de0beb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: One annoyance I have run across is the impedance mismatch between
: range queries and sorting.
:
: If your terms are  indexed as standard numbers, then integer sorting
: is fast, but range queries don't work (for negative values).  If you
: format the terms such that range queries work for any integer, then
: you have to use the slower string (or custom) sorting.
:
: Is there a way around this besides writing my own custom sorting hit collector?

yeah, this is something that's never really made sense to me, I've tried
digging into the code to understand this a couple of times, but i've never
had much success, maybe my assumptions/understanding is wrong...

   1) lucene stores all fields as Strings
   2) You can construct a "Sort" object with SortField of type "INT"
   3) according to tribal wisdom (and Lucene in Action) sorting by a
      numeric fields caches the numeric value and is more efficient then
      sorting by a string field (in which the string value needs to be cached)

1+2+3 tells me that at some point, when the the search/sort code sees a
SortField of type "INT" (or of type AUTO and the value of that field in
the first doc looks like an INT) that a single pass is done to convert
the string value of hte field from disk into a numeric value for caching
(and sorting).

     So why couldn't a user specified NumberFormat object be used to
     convert that string into an Integer?  Allowing people to format
     their numbers in a way that sorts lexigraphically for Range Filters,
     but still get the good Numeric Sotr efficiency?


I can see in FieldDocSortedHitQueue where the case statement deals with
the various types of SortField, but at that point it's comparing FieldDoc
objects whose fields[i] is expected to allready be an "Integer" object.
where is that "Integer" object parsed from the String value of the field?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 19:02:59 2005
Return-Path: <java-user-return-13744-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39440 invoked from network); 21 Mar 2005 19:02:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 19:02:59 -0000
Received: (qmail 47206 invoked by uid 500); 21 Mar 2005 19:02:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47185 invoked by uid 500); 21 Mar 2005 19:02:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47172 invoked by uid 99); 21 Mar 2005 19:02:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fckdp@ok.ru designates 195.2.83.166 as permitted sender)
Received: from mail1.zmail.ru (HELO aha.ru) (195.2.83.166)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 11:02:52 -0800
Received: from [195.98.167.2] (account fckdp@ok.ru HELO pb)
  by frontend1.aha.ru (CommuniGate Pro SMTP 4.2.8)
  with ESMTP id 162336471 for java-user@lucene.apache.org; Mon, 21 Mar 2005 22:02:48 +0300
Reply-To: <fckdp@ok.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: <java-user@lucene.apache.org>
Subject: RE: new added documents not showing
Date: Mon, 21 Mar 2005 22:07:17 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <auto-000162328947@frontend1.aha.ru>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Thread-Index: AcUuQ2YQcV8ISEfLRiaVejyK//zzKgABVxvg
Message-ID: <auto-000162336471@frontend1.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: roy-lucene-user@xemaps.com [mailto:roy-lucene-user@xemaps.com] 

> I just realized that the way I described our process was off 
> a little bit.
> 
> Here's the process again:
> 
> I apologize for the amount of code below.

When you open the index writer? Where is the code?

Pasha Bizhan
http://lucenedotnet.com
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 19:06:02 2005
Return-Path: <java-user-return-13745-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41818 invoked from network); 21 Mar 2005 19:06:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 19:06:01 -0000
Received: (qmail 51655 invoked by uid 500); 21 Mar 2005 19:05:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51633 invoked by uid 500); 21 Mar 2005 19:05:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51619 invoked by uid 99); 21 Mar 2005 19:05:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fckdp@ok.ru designates 195.2.83.206 as permitted sender)
Received: from mail2.zmail.ru (HELO aha.ru) (195.2.83.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 11:05:54 -0800
Received: from [195.98.167.2] (account fckdp@ok.ru HELO pb)
  by frontend2.aha.ru (CommuniGate Pro SMTP 4.2.8)
  with ESMTP id 169896816 for java-user@lucene.apache.org; Mon, 21 Mar 2005 22:05:51 +0300
Reply-To: <fckdp@ok.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: <java-user@lucene.apache.org>
Subject: RE: new added documents not showing
Date: Mon, 21 Mar 2005 22:10:20 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <auto-000162328947@frontend1.aha.ru>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Thread-Index: AcUuQ2YQcV8ISEfLRiaVejyK//zzKgABhz9w
Message-ID: <auto-000169896816@frontend2.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: roy-lucene-user@xemaps.com [mailto:roy-lucene-user@xemaps.com]

> I just realized that the way I described our process was off a little 
> bit.
> 
> Here's the process again:
> 
> I apologize for the amount of code below.

When do you open the index writer? Where is the code?

Pasha Bizhan
http://lucenedotnet.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 19:17:24 2005
Return-Path: <java-user-return-13746-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49095 invoked from network); 21 Mar 2005 19:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 19:17:24 -0000
Received: (qmail 63732 invoked by uid 500); 21 Mar 2005 19:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62865 invoked by uid 500); 21 Mar 2005 19:17:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62850 invoked by uid 99); 21 Mar 2005 19:17:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 11:17:20 -0800
Received: from [192.168.1.100] ([::ffff:66.124.224.144])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Mon, 21 Mar 2005 13:17:18 -0600
  id 00074162.423F1DBE.0000059E
Message-ID: <423F1DB4.9060503@allthingslocal.com>
Date: Mon, 21 Mar 2005 11:17:08 -0800
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NumberTools
References: <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>: One annoyance I have run across is the impedance mismatch between
>: range queries and sorting.
>:
>: If your terms are  indexed as standard numbers, then integer sorting
>: is fast, but range queries don't work (for negative values).  If you
>: format the terms such that range queries work for any integer, then
>: you have to use the slower string (or custom) sorting.
>:
>: Is there a way around this besides writing my own custom sorting hit collector?
>  
>
I solve this problem by using two separate fields:  one for range 
queries and one for sorting, each formatted appropriately.  Adds very 
little space to the index.  A bit ugly, but better than writing a custom 
hit collector.

A better solution that unified these formats, perhaps along the lines 
Hoss suggests, would be appreciated.

Chuck



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 19:22:42 2005
Return-Path: <java-user-return-13747-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50852 invoked from network); 21 Mar 2005 19:22:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 19:22:42 -0000
Received: (qmail 69144 invoked by uid 500); 21 Mar 2005 19:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68301 invoked by uid 500); 21 Mar 2005 19:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68287 invoked by uid 99); 21 Mar 2005 19:22:39 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.clicvu.com (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 11:22:38 -0800
Received: from smtp.clicvu.com ([192.168.0.72]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <java-user@lucene.apache.org>;
          Mon, 21 Mar 2005 14:18:50 -0500
Content-type: text/plain
Date: Mon, 21 Mar 2005 14:16:16 -0500
From: roy-lucene-user@xemaps.com
Subject: Re: new added documents not showing
To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> When do you open the index writer? Where is the code?

Ah, sorry.  That last section is in a method that gets called in a loop.

        IndexWriter writer = null;
        try {
            writer = new IndexWriter( mainindex, new StandardAnalyzer(), false );
            for ( int i = 0; i < directories.length; i++ ) {
                moveDocumentsOver( writer, directories[i] );
                // delete dir
            }
        }
        catch ( Exception e ) {
            // log error
        }
        finally {
            if ( writer != null ) try { writer.close(); } catch ( Exception e ) {}
        }

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 20:07:08 2005
Return-Path: <java-user-return-13748-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68573 invoked from network); 21 Mar 2005 20:07:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 20:07:08 -0000
Received: (qmail 46959 invoked by uid 500); 21 Mar 2005 20:07:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46929 invoked by uid 500); 21 Mar 2005 20:07:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46916 invoked by uid 99); 21 Mar 2005 20:07:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fckdp@ok.ru designates 195.2.83.206 as permitted sender)
Received: from mail2.zmail.ru (HELO aha.ru) (195.2.83.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 12:07:02 -0800
Received: from [195.98.167.2] (account fckdp@ok.ru HELO pb)
  by frontend2.aha.ru (CommuniGate Pro SMTP 4.2.8)
  with ESMTP id 169916891 for java-user@lucene.apache.org; Mon, 21 Mar 2005 23:06:59 +0300
Reply-To: <fckdp@ok.ru>
From: "Pasha Bizhan" <fckdp@ok.ru>
To: <java-user@lucene.apache.org>
Subject: RE: new added documents not showing
Date: Mon, 21 Mar 2005 23:11:28 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <auto-000169902571@frontend2.aha.ru>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Thread-Index: AcUuS1opbzL5vz7dS4SfzglcbEk/kQABKEYw
Message-ID: <auto-000169916891@frontend2.aha.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: roy-lucene-user@xemaps.com [mailto:roy-lucene-user@xemaps.com] 

> Ah, sorry.  That last section is in a method that gets called 
> in a loop.

The shortest version of your code is:
-----------------
 void mainFunction() {
	IndexWriter writer = null;
	writer = new IndexWriter( mainindex, new StandardAnalyzer(), false
);
	moveDocumentsOver( writer, oldDirectory);	
	writer.close();
 }

 void moveDocumentsOver( IndexWriter writer, string oldDirectory){
      	IndexReader r = null;
      	r = IndexReader.open( oldDirectory );
      	int num = r.numDocs();
      	for ( int i = 0; i < num; i++ ) {
              if ( !r.isDeleted( i ) ) { 
                Document d = r.document( i );
                Document nd = new Document();
		// fill nd by d
                writer.addDocument( nd );
	  }
	}
	r.close();
}
-----------------

And then you execute the search (using mainindex) and you don't see the new
documents. Yes?

Pasha Bizhan
http://lucenedotnet.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 21 20:27:55 2005
Return-Path: <java-user-return-13749-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94015 invoked from network); 21 Mar 2005 20:27:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Mar 2005 20:27:54 -0000
Received: (qmail 88628 invoked by uid 500); 21 Mar 2005 20:27:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88596 invoked by uid 500); 21 Mar 2005 20:27:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88583 invoked by uid 99); 21 Mar 2005 20:27:50 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.clicvu.com (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 12:27:49 -0800
Received: from smtp.clicvu.com ([192.168.0.71]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <java-user@lucene.apache.org>;
          Mon, 21 Mar 2005 15:24:01 -0500
Content-type: text/plain
Date: Mon, 21 Mar 2005 15:23:49 -0500
From: roy-lucene-user@xemaps.com
Subject: Re: new added documents not showing
To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

correct, we also can't see the new documents when we open an IndexReader to the main index.

Roy.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 02:06:49 2005
Return-Path: <java-user-return-13752-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8311 invoked from network); 22 Mar 2005 02:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 02:06:49 -0000
Received: (qmail 53512 invoked by uid 500); 22 Mar 2005 01:38:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53483 invoked by uid 500); 22 Mar 2005 01:38:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53467 invoked by uid 99); 22 Mar 2005 01:38:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 17:38:45 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EF0CE13E2122; Mon, 21 Mar 2005 20:38:40 -0500 (EST)
Received: from [192.168.1.104] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 9725313E211F
	for <java-user@lucene.apache.org>; Mon, 21 Mar 2005 20:38:34 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <d20f2853043de6015992f2267059e8fb@media-style.com>
References: <d20f2853043de6015992f2267059e8fb@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <5527e841dd9a61fd2f6bdbf79caba882@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: boosting?
Date: Mon, 21 Mar 2005 20:38:17 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stefan,

Boosts are not stored directly, necessarily.  Each field has an 
associated normalization factor, of which boost is multiplied into.  
This value is precomputed at indexing time, so getting the boost isn't 
possible unless the length normalization is 1.0 (which is not usually a 
good idea).

	Erik

On Mar 21, 2005, at 4:35 PM, Stefan Groschupf wrote:

> Hi there,
> how to get the real boost value of a field or document?
> The java doc says that it is _may_ not correct returned when reading a 
> document with a index reader.
>  Any hints how to get the boost when reading a document?
> Thanks.
> Stefan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 02:09:52 2005
Return-Path: <java-user-return-13750-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10945 invoked from network); 22 Mar 2005 02:09:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 02:09:52 -0000
Received: (qmail 23296 invoked by uid 500); 22 Mar 2005 00:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22666 invoked by uid 500); 22 Mar 2005 00:30:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22370 invoked by uid 99); 22 Mar 2005 00:29:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 16:29:45 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C52E60.760D14A3"
Subject: using Expression language for lucene api
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Mon, 21 Mar 2005 16:53:48 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829CF@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: using Expression language for lucene api
thread-index: AcUuYHYKT3BZ9ncnQaS8GTqm3SlKSQ==
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C52E60.760D14A3
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I have the following expression :=20

<c:set var=3D"result" value=3D"${searchForm.results}"/>

results is of type Hits, i want to know if there is a way using =
Expression language or jstl to access for example: result.doc(i).

=20


------_=_NextPart_001_01C52E60.760D14A3--

From java-user-return-13753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 02:21:42 2005
Return-Path: <java-user-return-13753-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36805 invoked from network); 22 Mar 2005 02:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 02:21:41 -0000
Received: (qmail 6125 invoked by uid 500); 22 Mar 2005 02:20:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6067 invoked by uid 500); 22 Mar 2005 02:20:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6033 invoked by uid 99); 22 Mar 2005 02:20:39 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31102.mail.mud.yahoo.com (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 21 Mar 2005 18:20:35 -0800
Received: (qmail 95305 invoked by uid 60001); 22 Mar 2005 02:20:32 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=aOl5urEeLP1xp/c4iAbu9Vf4xT8jhCNMmV2oVyUBiSl8F7Q/OA7W0zWzm9Bo+Ch4cSkIsCyicHkbKQ2pgd/Nr/xOo5vF1upCdNOxxim7GzUz8YoCEpUKfrezWqxXIenmQLh5sdu5UqWA9q+UlHOF6Bxc681bEYIu68I/YaSP+Mw=  ;
Message-ID: <20050322022032.95303.qmail@web31102.mail.mud.yahoo.com>
Received: from [69.201.131.192] by web31102.mail.mud.yahoo.com via HTTP; Mon, 21 Mar 2005 18:20:32 PST
Date: Mon, 21 Mar 2005 18:20:32 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: new added documents not showing
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Sorry if this is stating the obvious, but have you used Luke to verify
that the new documents were indexed in the first place?  Sorry if
you've already mentioned this.

Otis


--- roy-lucene-user@xemaps.com wrote:
> > When do you open the index writer? Where is the code?
> 
> Ah, sorry.  That last section is in a method that gets called in a
> loop.
> 
>         IndexWriter writer = null;
>         try {
>             writer = new IndexWriter( mainindex, new
> StandardAnalyzer(), false );
>             for ( int i = 0; i < directories.length; i++ ) {
>                 moveDocumentsOver( writer, directories[i] );
>                 // delete dir
>             }
>         }
>         catch ( Exception e ) {
>             // log error
>         }
>         finally {
>             if ( writer != null ) try { writer.close(); } catch (
> Exception e ) {}
>         }
> 
> Roy.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 02:25:10 2005
Return-Path: <java-user-return-13754-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38001 invoked from network); 22 Mar 2005 02:25:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 02:25:10 -0000
Received: (qmail 17412 invoked by uid 500); 22 Mar 2005 02:25:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17386 invoked by uid 500); 22 Mar 2005 02:25:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17373 invoked by uid 99); 22 Mar 2005 02:25:03 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31103.mail.mud.yahoo.com (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 21 Mar 2005 18:25:03 -0800
Received: (qmail 58880 invoked by uid 60001); 22 Mar 2005 02:18:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=DSWL04xGngSoZulrX9w/LDjIRnGDdQFDtROtkpt1dCnDMGX1SyJrk/eKCqpqdG/KBbh3lLnH9x67wasgiBJVW2iwgMLHyh1GT8nnj36+Tl/H/SwmVbu4rXdQU3PXAWvrY/kKdns+FdlaQ2RfMCdBmX/ZAH6Jk3lZIZi1wpuk/FM=  ;
Message-ID: <20050322021820.58878.qmail@web31103.mail.mud.yahoo.com>
Received: from [69.201.131.192] by web31103.mail.mud.yahoo.com via HTTP; Mon, 21 Mar 2005 18:18:19 PST
Date: Mon, 21 Mar 2005 18:18:19 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: using Expression language for lucene api
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think there are some taglibs that let you call functions on objects,
but you could also considering wrapping Hits in something that is JSTL
friendly, perhaps a List that JSTL knows how to handle.

Otis


--- Omar Didi <odidi@Cyveillance.com> wrote:
> I have the following expression : 
> 
> <c:set var="result" value="${searchForm.results}"/>
> 
> results is of type Hits, i want to know if there is a way using
> Expression language or jstl to access for example: result.doc(i).
> 
>  
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 03:10:18 2005
Return-Path: <java-user-return-13751-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55734 invoked from network); 22 Mar 2005 03:10:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 03:10:18 -0000
Received: (qmail 30182 invoked by uid 500); 22 Mar 2005 01:01:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30155 invoked by uid 500); 22 Mar 2005 01:01:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30138 invoked by uid 99); 22 Mar 2005 01:01:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mslinux.media-style.com (HELO mslinux.media-style.com) (80.64.181.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 17:01:12 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id 5B0B41440A5
	for <java-user@lucene.apache.org>; Mon, 21 Mar 2005 22:29:21 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 26117-08 for <java-user@lucene.apache.org>;
	Mon, 21 Mar 2005 22:29:21 +0100 (CET)
Received: from [192.168.8.2] (dsl-082-082-221-099.arcor-ip.net [82.82.221.99])
	by mslinux.media-style.com (Postfix) with ESMTP id E02BC1440A4
	for <java-user@lucene.apache.org>; Mon, 21 Mar 2005 22:29:20 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <d20f2853043de6015992f2267059e8fb@media-style.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Stefan Groschupf <sg@media-style.com>
Subject: boosting?
Date: Mon, 21 Mar 2005 22:35:57 +0100
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi there,
how to get the real boost value of a field or document?
The java doc says that it is _may_ not correct returned when reading a 
document with a index reader.
  Any hints how to get the boost when reading a document?
Thanks.
Stefan 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 07:40:36 2005
Return-Path: <java-user-return-13755-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58019 invoked from network); 22 Mar 2005 07:40:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 07:40:07 -0000
Received: (qmail 37074 invoked by uid 500); 22 Mar 2005 07:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36883 invoked by uid 500); 22 Mar 2005 07:40:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36869 invoked by uid 99); 22 Mar 2005 07:40:01 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr15.xs4all.nl (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 23:40:00 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.12.11/8.12.11) with ESMTP id j2M7durP059958
	for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 08:39:57 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: boosting?
Date: Tue, 22 Mar 2005 08:39:56 +0100
User-Agent: KMail/1.5.4
References: <d20f2853043de6015992f2267059e8fb@media-style.com>
In-Reply-To: <d20f2853043de6015992f2267059e8fb@media-style.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503220839.56646.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Stephan,

On Monday 21 March 2005 22:35, Stefan Groschupf wrote:
> Hi there,
> how to get the real boost value of a field or document?
> The java doc says that it is _may_ not correct returned when reading a 
> document with a index reader.
>   Any hints how to get the boost when reading a document?

The javadoc of Field.setBoost() has meanwhile been extended a bit
(source from the trunk at
http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/document/):

   * <p>The boost is multiplied by {@link Document#getBoost()} of the document
   * containing this field.  If a document has multiple fields with the same
   * name, all such values are multiplied together.  This product is then
   * multipled by the value {@link Similarity#lengthNorm(String,int)}, and
   * rounded by {@link Similarity#encodeNorm(float)} before it is stored in the
   * index.  One should attempt to ensure that this product does not overflow
   * the range of that encoding.

One feature of Similarity.encodeNorm(float) is that it returns a byte, so
at most 256 different values can be stored, which is a lot less than
the number of possible floating point values. 
encodeNorm() rounds to a representable value close to the given float,
and decodeNorm() returns that representable value, normally
used in TermScorer.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 07:43:59 2005
Return-Path: <java-user-return-13756-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58991 invoked from network); 22 Mar 2005 07:43:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 07:43:50 -0000
Received: (qmail 43275 invoked by uid 500); 22 Mar 2005 07:43:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42421 invoked by uid 500); 22 Mar 2005 07:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42407 invoked by uid 99); 22 Mar 2005 07:43:47 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 21 Mar 2005 23:43:45 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DDe0z-0004MD-4P
	for java-user@lucene.apache.org; Tue, 22 Mar 2005 08:41:25 +0100
Received: from host-83-146-14-66.bulldogdsl.com ([83.146.14.66])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 08:41:25 +0100
Received: from dev_johnpatterson by host-83-146-14-66.bulldogdsl.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 08:41:25 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  John Patterson <dev_johnpatterson@hotmail.com>
Subject:  Re: NumberTools
Date: Tue, 22 Mar 2005 07:41:19 +0000 (UTC)
Lines: 19
Message-ID:  <loom.20050322T083814-855@post.gmane.org>
References:  <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 83.146.14.66 (Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0)
Sender: news <news@sea.gmane.org>
X-Gmane-MailScanner: Found to be clean
X-Gmane-MailScanner: Found to be clean
X-MailScanner-From: jak-lucene-user@m.gmane.org
X-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter <hossman_lucene <at> fucit.org> writes:

> 
>      So why couldn't a user specified NumberFormat object be used to
>      convert that string into an Integer?  Allowing people to format
>      their numbers in a way that sorts lexigraphically for Range Filters,
>      but still get the good Numeric Sotr efficiency?
> 
> I can see in FieldDocSortedHitQueue where the case statement deals with
> the various types of SortField, but at that point it's comparing FieldDoc
> objects whose fields[i] is expected to allready be an "Integer" object.
> where is that "Integer" object parsed from the String value of the field?
> 

Surely, by using the number -> string algorithm I showed earlier this would not
be a problem.  Did I miss something?





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 08:25:36 2005
Return-Path: <java-user-return-13757-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90311 invoked from network); 22 Mar 2005 08:25:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 08:25:33 -0000
Received: (qmail 86993 invoked by uid 500); 22 Mar 2005 08:25:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86972 invoked by uid 500); 22 Mar 2005 08:25:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86958 invoked by uid 99); 22 Mar 2005 08:25:27 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 00:25:25 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8C3B05B776; Tue, 22 Mar 2005 00:25:23 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 849797F45C
	for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 00:25:23 -0800 (PST)
Date: Tue, 22 Mar 2005 00:25:23 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: NumberTools
In-Reply-To: <loom.20050322T083814-855@post.gmane.org>
Message-ID: <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu>
References: <loom.20050318T103020-615@post.gmane.org> 
 <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com> 
 <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com>
 <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu>
 <loom.20050322T083814-855@post.gmane.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: > I can see in FieldDocSortedHitQueue where the case statement deals with
: > the various types of SortField, but at that point it's comparing FieldDoc
: > objects whose fields[i] is expected to allready be an "Integer" object.
: > where is that "Integer" object parsed from the String value of the field?
: >
:
: Surely, by using the number -> string algorithm I showed earlier this
: would not be a problem.  Did I miss something?

I haven't worked through the math to prove to myself that your algorithm
is a viable way of expressing any Integer as a 4 byte String;  such that
any two Integers sort lexigraphically correct as strings ... but let's
assume that i have, and that it works perfectly.

So now any RangeFilter or RangeQuery (which operate on String term values)
will work ... what about sorting?

Well, the basis of your idea is custom code to format the Integer as a
string, mainly...

:   public static String convertTotText(int input)
:   {
:     int unsigned = input + Integer.MIN_VALUE;
:     char c2 = (char) (unsigned & 0x0000FFFF);
:     char c1 = (char) (unsigned >> 16 & 0x0000FFFF);
:     return new String(new char[] {c1, c2});
:   }

As Strings, the Lucene sorting code is not going to look at those and
recognize them as numbers, and even if you specified SortField.INT, the
default parser (wherever it is) isn't going to be able to make heads or
tails of them -- so it's going to have to Sort them as Strings, which is
slower then sorting them as Integers -- even if they are only 4 bytes long
(unless I'm wrong, which is entirely possible ... i haven't tested it).

Now, if we could override the method used to parse the Term values from
Strings to Integers (using a user specified NumberFormat as i proposed)
then we could name your "convertTotText" method as "format" and write a
corrisponding "parse" method, and everything would work smashing.



-Hoss

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 09:00:40 2005
Return-Path: <java-user-return-13758-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3258 invoked from network); 22 Mar 2005 09:00:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 09:00:39 -0000
Received: (qmail 22357 invoked by uid 500); 22 Mar 2005 09:00:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22335 invoked by uid 500); 22 Mar 2005 09:00:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22321 invoked by uid 99); 22 Mar 2005 09:00:32 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 01:00:31 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DDfD7-0006e3-86
	for java-user@lucene.apache.org; Tue, 22 Mar 2005 09:58:03 +0100
Received: from host-83-146-14-66.bulldogdsl.com ([83.146.14.66])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 09:58:01 +0100
Received: from dev_johnpatterson by host-83-146-14-66.bulldogdsl.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 09:58:01 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  John Patterson <dev_johnpatterson@hotmail.com>
Subject:  Re: NumberTools
Date: Tue, 22 Mar 2005 08:56:13 +0000 (UTC)
Lines: 62
Message-ID:  <loom.20050322T093238-315@post.gmane.org>
References:  <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu> <loom.20050322T083814-855@post.gmane.org> <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 83.146.14.66 (Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0)
Sender: news <news@sea.gmane.org>
X-Gmane-MailScanner: Found to be clean
X-Gmane-MailScanner: Found to be clean
X-MailScanner-From: jak-lucene-user@m.gmane.org
X-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Hostetter <hossman_lucene <at> fucit.org> writes:

> I haven't worked through the math to prove to myself that your algorithm
> is a viable way of expressing any Integer as a 4 byte String;  such that
> any two Integers sort lexigraphically correct as strings ... but let's
> assume that i have, and that it works perfectly.

The concept is this:  Signed ints range from MIN_VALUE to MAX_VALUE which are
represented in binary as:

10000000 00000000 00000000 00000000 (MIN_VALUE)
11111111 11111111 11111111 11111111 (-1)
00000000 00000000 00000000 00000000 (0)
00000000 00000000 00000000 00000001 (1)
01111111 11111111 11111111 11111111 (MAX_VALUE)

Any number begining with a 1 is negative.  Adding 1 to -1 causes the left most
bit to overflow and is ignored.

The problem with converting these numbers into chars (and Strings) is that
numbers that negative numbers begin with 1 and so are actually greater than
positive numbers that all begin with 0.  Apart from the left-most bit every
thing is as it should be.

To remedy this we need to change the numbers to unsigned ints such that

00000000 00000000 00000000 00000000 (MIN_VALUE)
01111111 11111111 11111111 11111111 (-1)
10000000 00000000 00000000 00000000 (0)
10000000 00000000 00000000 00000001 (1)
11111111 11111111 11111111 11111111 (MAX_VALUE)

To convert from one to the other is just a case of flipping the left most bit
which is done by adding MIN_VALUE

00000000 00000000 00000000 00000001 (1)
10000000 00000000 00000000 00000000 (MIN_VALUE)
-----------------------------------
10000000 00000000 00000000 00000001 (unsigned 1)

My test case shows that this calculation works for a number of boundry cases.

>so it's going to have to Sort them as Strings, which is
> slower then sorting them as Integers -- even if they are only 4 bytes long
> (unless I'm wrong, which is entirely possible ... i haven't tested it).

An int will be stored as a 2 char string which will be sorted "char by char" so
they will be almost as fast as sorting as integers.  Certainly much faster than
converting the Strings back to integers first and then sorting them!
 
> Now, if we could override the method used to parse the Term values from
> Strings to Integers (using a user specified NumberFormat as i proposed)
> then we could name your "convertTotText" method as "format" and write a
> corrisponding "parse" method, and everything would work smashing.

It would be great if this could be incorporated into Lucene as it will make
numeric searches much more efficient.  I will soon need to store simple
geographical data in my index to do a "find the nearest x" type of search.

John




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 11:23:06 2005
Return-Path: <java-user-return-13759-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31594 invoked from network); 22 Mar 2005 11:23:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 11:23:06 -0000
Received: (qmail 10438 invoked by uid 500); 22 Mar 2005 11:17:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10367 invoked by uid 500); 22 Mar 2005 11:17:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10350 invoked by uid 99); 22 Mar 2005 11:17:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mslinux.media-style.com (HELO mslinux.media-style.com) (80.64.181.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 03:17:53 -0800
Received: from localhost (localhost [127.0.0.1])
	by mslinux.media-style.com (Postfix) with ESMTP id E697C1440A2
	for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 11:15:24 +0100 (CET)
Received: from mslinux.media-style.com ([127.0.0.1])
	by localhost (mslinux.media-style.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 28414-09 for <java-user@lucene.apache.org>;
	Tue, 22 Mar 2005 11:15:24 +0100 (CET)
Received: from [192.168.200.56] (unknown [80.64.181.33])
	by mslinux.media-style.com (Postfix) with ESMTP id 9799814409E
	for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 11:15:24 +0100 (CET)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <5527e841dd9a61fd2f6bdbf79caba882@ehatchersolutions.com>
References: <d20f2853043de6015992f2267059e8fb@media-style.com> <5527e841dd9a61fd2f6bdbf79caba882@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b6c57dc47d274ab5182186003e4f0f53@media-style.com>
Content-Transfer-Encoding: 7bit
From: Stefan Groschupf <sg@media-style.com>
Subject: Re: boosting?
Date: Tue, 22 Mar 2005 11:22:10 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at media-style.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik,
thanks, I see.
Stefan

Am 22.03.2005 um 02:38 schrieb Erik Hatcher:

> Stefan,
>
> Boosts are not stored directly, necessarily.  Each field has an 
> associated normalization factor, of which boost is multiplied into.  
> This value is precomputed at indexing time, so getting the boost isn't 
> possible unless the length normalization is 1.0 (which is not usually 
> a good idea).
>
> 	Erik
>
> On Mar 21, 2005, at 4:35 PM, Stefan Groschupf wrote:
>
>> Hi there,
>> how to get the real boost value of a field or document?
>> The java doc says that it is _may_ not correct returned when reading 
>> a document with a index reader.
>>  Any hints how to get the boost when reading a document?
>> Thanks.
>> Stefan
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
-----------information technology-------------------
company:     http://www.media-style.com
forum:           http://www.text-mining.org
blog:	             http://www.find23.net


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 13:07:52 2005
Return-Path: <java-user-return-13760-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64286 invoked from network); 22 Mar 2005 13:07:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 13:07:52 -0000
Received: (qmail 92352 invoked by uid 500); 22 Mar 2005 13:07:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92097 invoked by uid 500); 22 Mar 2005 13:07:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92083 invoked by uid 99); 22 Mar 2005 13:07:48 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sunilgoyal@gmail.com designates 64.233.184.207 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 05:07:48 -0800
Received: by wproxy.gmail.com with SMTP id 36so1374345wra
        for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 05:07:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=j9tvwpsEuxMFoEc+Pdj/Fijd8uGxqQacBU1kyqiclS52MzxD2Dp1Opfy3lRvUpjm0QeTsN9sGmKCBWtQVkUYmwRzkXu9wZcJE3yqgwWHnV8WkyPzYX9TMewiHF7Veg4eWc9h8cYAyCtSy5bmhH4ija54LZ/81moJx8+CEcJ1zPM=
Received: by 10.54.11.66 with SMTP id 66mr2714401wrk;
        Tue, 22 Mar 2005 05:07:45 -0800 (PST)
Received: by 10.54.2.75 with HTTP; Tue, 22 Mar 2005 05:07:45 -0800 (PST)
Message-ID: <8d8cb1e05032205077cae37dc@mail.gmail.com>
Date: Tue, 22 Mar 2005 18:37:45 +0530
From: sunil goyal <sunilgoyal@gmail.com>
Reply-To: sunil goyal <sunilgoyal@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene incremental indexing - efficiency
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I am trying to use Lucene for doing incremental indexing of the order
of million of records daily using a single machine (P4 2.4Ghz 1 GB
RAM). I do get messages updated every few minutes based on which I
need to update the index.

I am using a StandardAnalyzer and writing documents using IndexWriter
(FSDirectory) using the following structure:

Document document = new Document();
document.add(Field.Keyword(INDEX_MESG_ID, LongField.longToString(mesg_id)));
document.add(Field.UnStored(INDEX_MESG_TITLE, mesgTitle));
document.add(Field.UnStored(INDEX_MESG_DESCRIPTION,mesgDescription)); 
document.add(Field.Keyword(INDEX_MESG_DATE,mesgDate));

mesgTitle is string of the order of 20-50 words
mesgDescription is a string of the order of 500-1000 words.

I profiled my application and the index writer is able to write 16
messages per second, which is too low for the order that I want to
achieve. I have tried various options:
- increasing mergeFactor and minMergeDocs from 10 to 100 to 1000 didn't help.
- Changed indexwriter from FSDirectory to RAMDirectory and later
synchronizing changes to FSDirectory. Even this didn't help.

It will be great if someone can give me pointers for increasing the
efficiency of index writer process. Can someone give me practical
examples of how much maximum efficiency can be achieved for similar
process on a single machine?

Thanks

Regards
Sunil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 13:30:39 2005
Return-Path: <java-user-return-13761-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72038 invoked from network); 22 Mar 2005 13:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 13:30:39 -0000
Received: (qmail 37964 invoked by uid 500); 22 Mar 2005 13:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37942 invoked by uid 500); 22 Mar 2005 13:30:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37928 invoked by uid 99); 22 Mar 2005 13:30:35 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web01-nyc.clicvu.com (HELO web01-nyc.clicvu.com) (209.10.150.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 05:30:33 -0800
Received: from [192.168.0.71] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <java-user@lucene.apache.org>;
          Tue, 22 Mar 2005 08:27:08 -0500
Received: by rproxy.gmail.com with SMTP id b11so1104630rne
        for <java-user@lucene.apache.org                                                                                                                                                                                                                                    >; Tue, 22 Mar 2005 05:30:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=dcolJjfYSuyKNu/w6DNfUjlRoI7m8QTB4nFdNhFaQ/FiQw6g6u72uKgFHYkxu748NhUztFObNNDxLEDiTgqibQgvX1iW4BvQYc1Q4fjrfBtfD/AdbmX2xcqIepL4eLmpFzDwQ3EAq2yJ1YhxuxFZq1cTHjsnJNODeJ8wajQhT88=
Received: by 10.38.102.12 with SMTP id z12mr5520441rnb;
        Tue, 22 Mar 2005 05:30:29 -0800 (PST)
Received: by 10.38.24.53 with HTTP; Tue, 22 Mar 2005 05:30:29 -0800 (PST)
Message-ID: <454006f50503220530679d7bdc@mail.gmail.com>
Date: Tue, 22 Mar 2005 08:30:29 -0500
From: roy-lucene-user@xemaps.com
Reply-To: Roy Rim <roy-lucene-user@xemaps.com>
To: java-user@lucene.apache.org                                                                                                                                                                                                                                    
Subject: Re: new added documents not showing
In-Reply-To: <20050322022032.95303.qmail@web31102.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <20050322022032.95303.qmail@web31102.mail.mud.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Pasha, in short, that is all I'm trying to do.  Wasn't an issue really before.

Otis, not sure what Luke is.  But the documents appear after we optimize.

Roy.


On Mon, 21 Mar 2005 18:20:32 -0800 (PST), Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> * Replies will be sent through Spamex to java-user@lucene.apache.org
> * For additional info click -> http://www.spamex.com/i/?v=6020981
> 
> Hello,
> 
> Sorry if this is stating the obvious, but have you used Luke to verify
> that the new documents were indexed in the first place?  Sorry if
> you've already mentioned this.
> 
> Otis
> 
> 
> --- roy-lucene-user@xemaps.com wrote:
> > > When do you open the index writer? Where is the code?
> >
> > Ah, sorry.  That last section is in a method that gets called in a
> > loop.
> >
> >         IndexWriter writer = null;
> >         try {
> >             writer = new IndexWriter( mainindex, new
> > StandardAnalyzer(), false );
> >             for ( int i = 0; i < directories.length; i++ ) {
> >                 moveDocumentsOver( writer, directories[i] );
> >                 // delete dir
> >             }
> >         }
> >         catch ( Exception e ) {
> >             // log error
> >         }
> >         finally {
> >             if ( writer != null ) try { writer.close(); } catch (
> > Exception e ) {}
> >         }
> >
> > Roy.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 13:39:46 2005
Return-Path: <java-user-return-13762-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75320 invoked from network); 22 Mar 2005 13:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 13:39:46 -0000
Received: (qmail 56417 invoked by uid 500); 22 Mar 2005 13:39:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56058 invoked by uid 500); 22 Mar 2005 13:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56045 invoked by uid 500); 22 Mar 2005 13:39:42 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 56042 invoked by uid 99); 22 Mar 2005 13:39:42 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sunilgoyal@gmail.com designates 64.233.184.204 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 05:39:42 -0800
Received: by wproxy.gmail.com with SMTP id 37so1078016wra
        for <lucene-user@jakarta.apache.org>; Tue, 22 Mar 2005 05:39:40 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=LWlci3CvxTykc0IHTmMbdcsYVHJUgHQ96R3CzNPo2fyiRbb83NdQ6u2K95MKG5i7J5VcPhi+gQpxFRlbSGi8+0BTeUTmChYVJqhwKndYH1Ci8JIA/a9Ain4SdunMWMDGbSoF/Dag7rFDWT+4ahnBMs5P/fnY0aSOAt5eLUJ7HQg=
Received: by 10.54.29.61 with SMTP id c61mr5895112wrc;
        Tue, 22 Mar 2005 05:39:40 -0800 (PST)
Received: by 10.54.2.75 with HTTP; Tue, 22 Mar 2005 05:39:40 -0800 (PST)
Message-ID: <8d8cb1e05032205392f6c08ed@mail.gmail.com>
Date: Tue, 22 Mar 2005 19:09:40 +0530
From: sunil goyal <sunilgoyal@gmail.com>
Reply-To: sunil goyal <sunilgoyal@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: lucene incremental indexing - efficiency
In-Reply-To: <8d8cb1e05032205077cae37dc@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <8d8cb1e05032205077cae37dc@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I am trying to use Lucene for doing incremental indexing of the order
of million of records daily using a single machine (P4 2.4Ghz 1 GB
RAM). I do get messages updated every few minutes based on which I
need to update the index.

I am using a StandardAnalyzer and writing documents using IndexWriter
(FSDirectory) using the following structure:

Document document = new Document();
document.add(Field.Keyword(INDEX_MESG_ID, LongField.longToString(mesg_id)));
document.add(Field.UnStored(INDEX_MESG_TITLE, mesgTitle));
document.add(Field.UnStored(INDEX_MESG_DESCRIPTION,mesgDescription));
document.add(Field.Keyword(INDEX_MESG_DATE,mesgDate));

mesgTitle is string of the order of 20-50 words
mesgDescription is a string of the order of 500-1000 words.

I profiled my application and the index writer is able to write 16
messages per second, which is too low for the order that I want to
achieve. I have tried various options:
- increasing mergeFactor and minMergeDocs from 10 to 100 to 1000 didn't help.
- Changed indexwriter from FSDirectory to RAMDirectory and later
synchronizing changes to FSDirectory. Even this didn't help.

It will be great if someone can give me pointers for increasing the
efficiency of index writer process. Can someone give me practical
examples of how much maximum efficiency can be achieved for similar
process on a single machine?

Thanks

Regards
Sunil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 17:21:04 2005
Return-Path: <java-user-return-13763-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79188 invoked from network); 22 Mar 2005 17:21:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 17:21:04 -0000
Received: (qmail 56953 invoked by uid 500); 22 Mar 2005 17:20:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56928 invoked by uid 500); 22 Mar 2005 17:20:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56914 invoked by uid 99); 22 Mar 2005 17:20:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc12.comcast.net (HELO rwcrmhc12.comcast.net) (216.148.227.85)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 09:20:56 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc12) with ESMTP
          id <2005032217205401400516s6e>; Tue, 22 Mar 2005 17:20:54 +0000
Message-ID: <424053F5.2010001@apache.org>
Date: Tue, 22 Mar 2005 09:20:53 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NumberTools
References: <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu> <loom.20050322T083814-855@post.gmane.org> <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu> <loom.20050322T093238-315@post.gmane.org>
In-Reply-To: <loom.20050322T093238-315@post.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Patterson wrote:
> It would be great if this could be incorporated into Lucene as it will make
> numeric searches much more efficient.

I'd like to see benchmarks that demonstrate the improvement before we 
consider including such a patch.  You're making a lot of assumptions 
about where time is spent performing numeric searching and sorting. 
Sort and RangeFilter are already pretty efficient.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 17:54:45 2005
Return-Path: <java-user-return-13764-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91681 invoked from network); 22 Mar 2005 17:54:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 17:54:45 -0000
Received: (qmail 39876 invoked by uid 500); 22 Mar 2005 17:54:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39539 invoked by uid 500); 22 Mar 2005 17:54:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39525 invoked by uid 99); 22 Mar 2005 17:54:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 09:54:38 -0800
Received: from [192.168.1.100] ([::ffff:66.124.224.144])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Tue, 22 Mar 2005 11:54:37 -0600
  id 00074166.42405BDD.0000673E
Message-ID: <42405BCF.2040904@allthingslocal.com>
Date: Tue, 22 Mar 2005 09:54:23 -0800
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NumberTools
References: <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu> <loom.20050322T083814-855@post.gmane.org> <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu> <loom.20050322T093238-315@post.gmane.org>
In-Reply-To: <loom.20050322T093238-315@post.gmane.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Patterson writes (3/22/2005 12:56 AM):

>It would be great if this could be incorporated into Lucene as it will make
>numeric searches much more efficient.  I will soon need to store simple
>geographical data in my index to do a "find the nearest x" type of search.
>  
>
I just added "find the nearest x" to my app.  I didn't need signed 
integers, but did need another feature.  Finding the nearest x requires 
knowing what you want to find it near to, which is a query-time 
parameter.  The current sorting mechanism does not have any provision 
for query-time parameters, although there is nothing intrinsic that 
makes this difficult or inefficient.  I was able to achieve the result 
by specializing classes modulo one issue that required a patch (filed as 
issue http://issues.apache.org/bugzilla/show_bug.cgi?id=34028).  I used 
the following technique:
  1.  Create a sort field with a custom SortComparatorSource that 
compares query-time and document geographical data by using a 
specialized ScoreDocComparator
  2.  Create the specialized ScoreDocComparator with a version of 
compare() that accepts the query-time location parameter, and a 
constructor that parses and maintains an efficient cache of the stored 
document geographical data (using the same technique as the built-in 
primitive types, so just as efficient)
  3.  Specialize FieldSortedHitQueue to take (in its constructor) the 
query-time location, to implement a version of lessThan that uses the 
query-time location to do compare's, and implements fillFields for the 
custom geographic data for support with MultiSearchers
  4.  Specialize IndexSearcher to use the specialized 
FieldSortedHitQueue for searches with sorts

This was all painless except for the filed issue.  If there is going to 
be any generalization to built-in sorting representations, I'd like to 
suggest two things be included:
  1.  Fix issue 34028 (delete the one word "final")
  2.  Include a provision for query-time parameters

My opinion is that making the specialization a little more 
straightforward than the above would be more flexible than the proposed 
number parsers (which would have not helped in my case at all).  With a 
simplified specialization architecture, it would be straightforward for 
any app to create parsers.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 18:05:13 2005
Return-Path: <java-user-return-13765-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93798 invoked from network); 22 Mar 2005 18:05:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 18:05:13 -0000
Received: (qmail 53066 invoked by uid 500); 22 Mar 2005 18:05:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52202 invoked by uid 500); 22 Mar 2005 18:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52184 invoked by uid 99); 22 Mar 2005 18:05:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 10:05:08 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005032218050601300ebhhme>; Tue, 22 Mar 2005 18:05:06 +0000
Message-ID: <42405E52.3080403@apache.org>
Date: Tue, 22 Mar 2005 10:05:06 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NumberTools
References: <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu> <loom.20050322T083814-855@post.gmane.org> <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu> <loom.20050322T093238-315@post.gmane.org> <42405BCF.2040904@allthingslocal.com>
In-Reply-To: <42405BCF.2040904@allthingslocal.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chuck Williams wrote:
> If there is going to 
> be any generalization to built-in sorting representations, I'd like to 
> suggest two things be included:
>  1.  Fix issue 34028 (delete the one word "final")

Done.

>  2.  Include a provision for query-time parameters

Can you provide a proposal?

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 18:21:41 2005
Return-Path: <java-user-return-13766-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97882 invoked from network); 22 Mar 2005 18:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 18:21:41 -0000
Received: (qmail 81822 invoked by uid 500); 22 Mar 2005 18:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81794 invoked by uid 500); 22 Mar 2005 18:21:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81779 invoked by uid 99); 22 Mar 2005 18:21:29 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO ciao.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 10:21:27 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DDnxt-0006jR-Qh
	for java-user@lucene.apache.org; Tue, 22 Mar 2005 19:18:58 +0100
Received: from host-83-146-14-66.bulldogdsl.com ([83.146.14.66])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 19:18:53 +0100
Received: from dev_johnpatterson by host-83-146-14-66.bulldogdsl.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 22 Mar 2005 19:18:53 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  John Patterson <dev_johnpatterson@hotmail.com>
Subject:  Re: NumberTools
Date: Tue, 22 Mar 2005 18:18:49 +0000 (UTC)
Lines: 12
Message-ID:  <loom.20050322T191704-416@post.gmane.org>
References:  <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu> <loom.20050322T083814-855@post.gmane.org> <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu> <loom.20050322T093238-315@post.gmane.org> <424053F5.2010001@apache.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: main.gmane.org
User-Agent: Loom/3.14 (http://gmane.org/)
X-Loom-IP: 83.146.14.66 (Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.5) Gecko/20041107 Firefox/1.0)
Sender: news <news@sea.gmane.org>
X-Gmane-MailScanner: Found to be clean
X-Gmane-MailScanner: Found to be clean
X-MailScanner-From: jak-lucene-user@m.gmane.org
X-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug Cutting <cutting <at> apache.org> writes:

> I'd like to see benchmarks that demonstrate the improvement before we 
> consider including such a patch.  You're making a lot of assumptions 
> about where time is spent performing numeric searching and sorting. 
> Sort and RangeFilter are already pretty efficient.

Fair enough, I'll try to do this in the next month when I will be using this
functionality.





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 22 21:08:53 2005
Return-Path: <java-user-return-13767-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62746 invoked from network); 22 Mar 2005 21:08:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Mar 2005 21:08:53 -0000
Received: (qmail 90340 invoked by uid 500); 22 Mar 2005 21:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90305 invoked by uid 500); 22 Mar 2005 21:08:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90289 invoked by uid 99); 22 Mar 2005 21:08:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 13:08:44 -0800
Received: from [192.168.1.100] ([::ffff:66.124.224.144])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Tue, 22 Mar 2005 13:12:42 -0600
  id 00074160.42406E2A.00006D2C
Message-ID: <42406E1E.5060105@allthingslocal.com>
Date: Tue, 22 Mar 2005 11:12:30 -0800
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: NumberTools
References: <loom.20050318T103020-615@post.gmane.org>  <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>  <loom.20050318T171427-755@post.gmane.org>  <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com> <c68e39170503180946de0beb@mail.gmail.com> <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu> <loom.20050322T083814-855@post.gmane.org> <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu> <loom.20050322T093238-315@post.gmane.org> <42405BCF.2040904@allthingslocal.com> <42405E52.3080403@apache.org>
In-Reply-To: <42405E52.3080403@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug Cutting writes (3/22/2005 10:05 AM):

> Chuck Williams wrote:
>
>> If there is going to be any generalization to built-in sorting 
>> representations, I'd like to suggest two things be included:
>>  1.  Fix issue 34028 (delete the one word "final")
>
>
> Done.

Thank you!

>
>>  2.  Include a provision for query-time parameters
>
>
> Can you provide a proposal?

I'd like to think it out further, but one possible improvement that 
comes to mind immediately is to make FieldSortedHitQueue an inner class 
of Sort.  It is already a function of Sort (specifically, of Sort.fields 
which is the entire state of Sort).  Making it an inner class is 
therefore natural, and allows users to create specialized Sort's, e.g. 
with query-time parameters that they can reference in their specialized 
FieldSortedHitQueues.  This would eliminate the need to specialize 
IndexSearcher.

The other specializations are FieldSortedHitQueue, SortComparatorSource 
and ScoreDocComparator.  ScoredDocCompator implements the semantics; it 
must be a global class since it stores the arrays of sort-field values, 
cached with the IndexReader.  The issue is passing the query-time 
parameters to its varous methods, which is done though FieldSortedHitQueue.

It would be nice to go one step further and avoid the need to specialize 
FieldSortedHitQueue.  It seems this could be done if the queue itself, 
or its Sort container, were passed as parameters to all the methods in 
ScoreDocComparator, but I have not worked out all the details to fully 
assess that.  If this was done, then the entire specialization would be 
to create a custom Sort with the addition of arbitrary query-time 
parameters, and create a custom SortComparatorSource to construct a 
custom ScoreDocComparator that implements all of the semantics of 
parsing, caching, comparing, etc., the stored and query-time sort 
parameters.

That would be elegant.

If this sounds like a good approach, I could put it in my task queue to 
construct a patch.

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 02:36:46 2005
Return-Path: <java-user-return-13768-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7107 invoked from network); 23 Mar 2005 02:36:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 02:36:46 -0000
Received: (qmail 43184 invoked by uid 500); 23 Mar 2005 02:36:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42322 invoked by uid 500); 23 Mar 2005 02:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42307 invoked by uid 500); 23 Mar 2005 02:36:42 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 42304 invoked by uid 99); 23 Mar 2005 02:36:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 18:36:42 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2352813E2136; Tue, 22 Mar 2005 21:36:40 -0500 (EST)
Received: from [192.168.1.104] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 604AD13E2135
	for <lucene-user@jakarta.apache.org>; Tue, 22 Mar 2005 21:36:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
Content-Transfer-Encoding: 7bit
Message-Id: <b679b250da069c55ce67c826b766dd95@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene User <lucene-user@jakarta.apache.org>
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: DirectLink followed by redirect
Date: Tue, 22 Mar 2005 21:36:28 -0500
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A common pattern I've been implementing is to throw a RedirectException 
in my listener methods from form submits or DirectLink's.  I want to 
ensure the browser's URL is always bookmarkable and refreshable.  A 
DirectLink to add an item to a shopping cart would add the item again 
when refreshed.

Are others doing this?  Has anyone come up with clever and clean ways 
to generalize this?

I'm considering implementing my own link service and component that 
would redirect after the trigger, parameterizable on the link component 
somehow.  The defaults of redirecting to the current page as if it was 
a PageLink would be ok, and if parameters are specified then redirect 
like its an ExternalLink.  Reasonable?  What am I missing?

On a related note ExternalLink is beginning to frustrate me.  I'd like 
to be able to link to a page, pass it _named_ parameters and have the 
page just get them automatically.  Having to implement another 
interface and ensure parameters are ordered is too brittle.  I'd like a 
link component/service that links to a page optionally with informal 
named parameters, and sets the property for those names before 
activating the page.  That seems like it'd simplify a lot of what I do. 
  What else would something like this need to be robust and 
generalizable?

Maybe there could be one link component to rule them all?  :)  Maybe 
this isn't so far fetched, if a listener is not specified then it acts 
as the named parameter link to just activate the page, but if a 
listener is specified it still sets the parameters and then calls the 
listener.  Drawbacks?

Thanks,
	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 04:33:43 2005
Return-Path: <java-user-return-13769-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59694 invoked from network); 23 Mar 2005 04:33:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 04:33:43 -0000
Received: (qmail 68399 invoked by uid 500); 23 Mar 2005 04:33:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68359 invoked by uid 500); 23 Mar 2005 04:33:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68344 invoked by uid 99); 23 Mar 2005 04:33:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from sparta.hostgo.com (HELO sparta.hostgo.com) (66.220.22.162)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 20:33:33 -0800
Received: from [65.19.37.63] (helo=[10.0.1.2])
	by sparta.hostgo.com with esmtpa (Exim 4.44)
	id 1DDo1d-0000Mv-6X
	for java-user@lucene.apache.org; Tue, 22 Mar 2005 13:22:50 -0500
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1111283130.88401.ezmlm@lucene.apache.org>
References: <1111283130.88401.ezmlm@lucene.apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2CB62A7E-9AFF-11D9-81E6-000A95973046@backspaces.net>
Content-Transfer-Encoding: 7bit
From: Owen Densmore <owen@backspaces.net>
Subject: PHP-Lucene Integration
Date: Tue, 22 Mar 2005 11:21:14 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619)
X-MailScanner-Information: This email message has been scanned for viruses
X-MailScanner-HostGo: Found to be clean
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - sparta.hostgo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - backspaces.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

[Sorry if this is received twice .. I tried earlier but didn't see it 
in the list!]

A while back I asked folks how they deployed Lucene in a PHP 
environment.  This summarizes how we proceeded with doing so.

The response to the initial question was quite helpful. Kelvin Tan 
mentioned "How about XML-RPC/SOAP, or REST?" while pedja did a great 
job of presenting the use of the "PHP-Java-Bridge".  Maurits suggested 
a way to use a proxy approach.  Great example of how useful this list 
is!

The solution we (http://redfish.com) chose was REST ..i.e. build a 
servlet which provides access to the index with a few bells and 
whistles unique to our application.  This servlet then is accessed via 
PHP using the enhanced fopen(url,'r') which allows the filename to be a 
url.  The PHP code then just reads in the result of searches line by 
line and makes them available as dynamic web pages.  The php is used 
two ways: one as a fairly standard text search capability, and more 
creatively, as the feed to a Flash graphical interface which lets you 
"fly" through the collection. The servlet itself emits only plain text, 
no html.  It likely should convert to XML.

The reason we chose this approach is because it fits into a broader 
desire of the client to form a general "institutional repository".  
Each group could have such a servlet exporting their data as a "web 
service" that others can listen in on.  An example of a study this 
would enable is studying co-authorship (collaboration) in relation to 
the "events" group -- folks putting on workshops and conferences.  It 
would be interesting to see whether or not the event attendees do 
eventually increase their collaboration with others due to the event.  
So we would link the events data with the working papers data to see 
whether or not there are increased collaborations.  Loosely coupled, 
tightly aligned.

The collection we're providing access to is a very innovative 
scientific set .. 1200 working papers of the Santa Fe Institute.  
"Similarity" searching has proven very useful.  A user looks at a 
document and can then ask for similar ones.  Another extremely useful 
secondary search is for co-authors: search for all of the documents by 
a given author, collect all their collaborators, and provide that as a 
result.

These secondary searches are done with a general interface which uses 
two searches: a primary search which is then used as input to the 
second batch.  So for co-author searches, we perform a primary search 
for an author.  We collect all their documents, stripping out the 
authors for each document.  This list of authors forms a secondary 
search which in effect returns all the documents with authors who have 
co-authored with the initial search.

This is extremely general and lets us perform a poor man's clustering.  
We find the documents most representative of a set of documents our 
client wants to use as a cluster.  We use the similarity searching 
above, with the primary search being the documents representative of a 
cluster.  The secondary search is much like in the Lucene book's 
example: give the author's of the retrieved documents a boost of 2, and 
then tack on a search of all the relative text terms.

We wanted to provide additional examples of clustering, so we got some 
earlier work done by the institute's library and information technology 
experts, and created a second set of similarity searches.  These worked 
quite well, and the similarity technique helped bridge a two year gap 
caused by dropping the professional classification project.  Indeed, it 
may breathe life back into that project due to our showing how useful 
it was.

For comedy relief we provided a third classification built upon 
astrological signs!  We captured the 12 signs descriptions, and used 
them as our primary search.  Then we used the documents recovered by 
these searches and used there terms to find similar documents.  It was 
great fun and naturally enough helped make the technique understandable 
by the clients.  We can't wait to find out which authors are "aries" 
and so on.

The improvement over the traditional searching used by the institute is 
quite dramatic.  My partner and I find ourselves getting lost for tens 
of minutes tracking down papers we simply didn't know were there.

We are hoping the institute can afford to have us work on true 
clustering techniques such as Carrot2 uses. (Thanks to Dawid and all 
the Poznan University folks who's papers were so stimulating!)  We did 
do a quick LSA SVD on a random set of the papers to see what the 
performance (both CPU and good clustering) would be like.  Our results 
are encouraging, and I think the frequent phrases approach would be 
best for this collection.  This collection is quite a clustering 
challenge due to its extreme cross-discipline nature.

BTW: My partner uncovered an interesting solution which allows us to 
mix the "keyword" and "text" world nicely.  The papers use key-phrases 
which are entirely author derived.  One my use "evolution" and another 
"human evolution".  We liked the looseness of letting them be text.  
But we also need to search for exact phrases as used by the authors.  A 
simple solution was to create a set of relations in the RDB sense 
during the indexing phase.  Then evolution might have a keyphrase index 
of 22, say.  We can then use that for unambiguous keyphrase searching 
when we want.  (Note that phrase quoting does not work for evolution: 
searching for "evolution" will still hit on "human evolution".  The 
relations remove that problem.)

I just want to take this as an opportunity to thank everyone for all 
the help.  Thanks!

Owen


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 07:41:13 2005
Return-Path: <java-user-return-13770-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32559 invoked from network); 23 Mar 2005 07:41:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 07:41:12 -0000
Received: (qmail 11992 invoked by uid 500); 23 Mar 2005 07:37:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11959 invoked by uid 500); 23 Mar 2005 07:37:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11933 invoked by uid 99); 23 Mar 2005 07:37:27 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from kogni.poznan.pl (HELO libra.cs.put.poznan.pl) (150.254.30.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 23:37:27 -0800
Received: from libra.cs.put.poznan.pl (localhost [127.0.0.1])
	by libra (Postfix on VMS) with SMTP
	id 056B73703; Wed, 23 Mar 2005 07:40:40 +0100 (CET)
Received: from [150.254.24.146] (idss-dw-pnca.cs.put.poznan.pl [150.254.24.146])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP
	id C017336E4; Wed, 23 Mar 2005 07:40:39 +0100 (CET)
Message-ID: <42410F9D.8030307@cs.put.poznan.pl>
Date: Wed, 23 Mar 2005 07:41:33 +0100
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: PHP-Lucene Integration
References: <1111283130.88401.ezmlm@lucene.apache.org> <2CB62A7E-9AFF-11D9-81E6-000A95973046@backspaces.net>
In-Reply-To: <2CB62A7E-9AFF-11D9-81E6-000A95973046@backspaces.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Your implementation and ideas sound very interesting, Owen. Can we see 
the system anywhere in public (and play with it?)

> We are hoping the institute can afford to have us work on true 
> clustering techniques such as Carrot2 uses. (Thanks to Dawid and all the 
> Poznan University folks who's papers were so stimulating!)  

You are very welcome. We are also academic, so in the feeling of 
brotherhood we might help you set up a demo on-line clustering server 
free of charge. There really is not better clustering technique than the 
one devised to a particular problem and it seems like you found that 
niche. Although it's always worth experimenting with other stuff just 
for the sake of comparison. Just let me know if you're interested (if we 
  can access the 'feed' of those plain search results I can set up the 
clustering demo in a few minutes, really).

 > We did do a
> quick LSA SVD on a random set of the papers to see what the performance 
> (both CPU and good clustering) would be like.  Our results are 
> encouraging, and I think the frequent phrases approach would be best for 
> this collection.  

It is always going to be challanging if you attempt to cluster the 
entire collection, you know. I'm (or rather: I will be) working on 
algorithm's extensions to deal with full text documents.

Dawid


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 07:50:34 2005
Return-Path: <java-user-return-13771-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37984 invoked from network); 23 Mar 2005 07:50:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 07:50:34 -0000
Received: (qmail 39050 invoked by uid 500); 23 Mar 2005 07:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38197 invoked by uid 500); 23 Mar 2005 07:50:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38180 invoked by uid 500); 23 Mar 2005 07:50:30 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 38177 invoked by uid 99); 23 Mar 2005 07:50:30 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sunilgoyal@gmail.com designates 64.233.184.195 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 22 Mar 2005 23:50:29 -0800
Received: by wproxy.gmail.com with SMTP id 58so144445wri
        for <lucene-user@jakarta.apache.org>; Tue, 22 Mar 2005 23:50:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=V5AtqOb8E9zCUaw9/sv2GPxVdflNKHOlN7AUPy8Nzb+PxNuWIjzu9w3y9XYh1Jzr95q3ZnT7hZhMkDC3JUlbsBnM0AwJXwZpait2UFMhyIo4sGTGwt5QB6/TMo3Z9Jkypuu30ECe3myYIvh7EaMwWihQUidkHu/OQmEVexWJ3Tg=
Received: by 10.54.91.18 with SMTP id o18mr61548wrb;
        Tue, 22 Mar 2005 23:50:24 -0800 (PST)
Received: by 10.54.2.75 with HTTP; Tue, 22 Mar 2005 23:50:24 -0800 (PST)
Message-ID: <8d8cb1e050322235040356c07@mail.gmail.com>
Date: Wed, 23 Mar 2005 13:20:24 +0530
From: sunil goyal <sunilgoyal@gmail.com>
Reply-To: sunil goyal <sunilgoyal@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: incremental indexing - efficiency
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

I am trying to use Lucene for doing incremental indexing of the order
of million of records daily using a single machine (P4 2.4Ghz 1 GB
RAM). I do get messages updated every few minutes based on which I
need to update the index.

I am using a StandardAnalyzer and writing documents using IndexWriter
(FSDirectory) using the following structure:

Document document = new Document();
document.add(Field.Keyword(INDEX_MESG_ID, LongField.longToString(mesg_id)));
document.add(Field.UnStored(INDEX_MESG_TITLE, mesgTitle));
document.add(Field.UnStored(INDEX_MESG_DESCRIPTION,mesgDescription));
document.add(Field.Keyword(INDEX_MESG_DATE,mesgDate));

mesgTitle is string of the order of 20-50 words
mesgDescription is a string of the order of 500-1000 words.

I profiled my application and the index writer is able to write 16
messages per second, which is too low for the order that I want to
achieve. I have tried various options:
- increasing mergeFactor and minMergeDocs from 10 to 100 to 1000 didn't help.
- Changed indexwriter from FSDirectory to RAMDirectory and later
synchronizing changes to FSDirectory. Even this didn't help.

It will be great if someone can give me pointers for increasing the
efficiency of index writer process. Can someone give me practical
examples of how much maximum efficiency can be achieved for similar
process on a single machine?

Thanks

Regards
Sunil

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 09:43:47 2005
Return-Path: <java-user-return-13772-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10249 invoked from network); 23 Mar 2005 09:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 09:43:46 -0000
Received: (qmail 68057 invoked by uid 500); 23 Mar 2005 09:43:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67237 invoked by uid 500); 23 Mar 2005 09:43:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67215 invoked by uid 99); 23 Mar 2005 09:43:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 01:43:41 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5A04F13E2136; Wed, 23 Mar 2005 04:43:40 -0500 (EST)
Received: from [192.168.1.104] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id D122A13E2135
	for <java-user@lucene.apache.org>; Wed, 23 Mar 2005 04:43:38 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <b679b250da069c55ce67c826b766dd95@ehatchersolutions.com>
References: <b679b250da069c55ce67c826b766dd95@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <ff842d148dae8711af8e74dfdd1de677@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: DirectLink followed by redirect
Date: Wed, 23 Mar 2005 04:43:13 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

oops..... wow, that's a first for me.... that message of course was 
meant for the tapestry-user list.

	Erik

On Mar 22, 2005, at 9:36 PM, Erik Hatcher wrote:

> A common pattern I've been implementing is to throw a 
> RedirectException in my listener methods from form submits or 
> DirectLink's.  I want to ensure the browser's URL is always 
> bookmarkable and refreshable.  A DirectLink to add an item to a 
> shopping cart would add the item again when refreshed.
>
> Are others doing this?  Has anyone come up with clever and clean ways 
> to generalize this?
>
> I'm considering implementing my own link service and component that 
> would redirect after the trigger, parameterizable on the link 
> component somehow.  The defaults of redirecting to the current page as 
> if it was a PageLink would be ok, and if parameters are specified then 
> redirect like its an ExternalLink.  Reasonable?  What am I missing?
>
> On a related note ExternalLink is beginning to frustrate me.  I'd like 
> to be able to link to a page, pass it _named_ parameters and have the 
> page just get them automatically.  Having to implement another 
> interface and ensure parameters are ordered is too brittle.  I'd like 
> a link component/service that links to a page optionally with informal 
> named parameters, and sets the property for those names before 
> activating the page.  That seems like it'd simplify a lot of what I 
> do.  What else would something like this need to be robust and 
> generalizable?
>
> Maybe there could be one link component to rule them all?  :)  Maybe 
> this isn't so far fetched, if a listener is not specified then it acts 
> as the named parameter link to just activate the page, but if a 
> listener is specified it still sets the parameters and then calls the 
> listener.  Drawbacks?
>
> Thanks,
> 	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 15:01:17 2005
Return-Path: <java-user-return-13773-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26319 invoked from network); 23 Mar 2005 15:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 15:01:17 -0000
Received: (qmail 55954 invoked by uid 500); 23 Mar 2005 15:01:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55902 invoked by uid 500); 23 Mar 2005 15:01:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55888 invoked by uid 99); 23 Mar 2005 15:01:12 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ns1.clicvu.com (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 07:01:11 -0800
Received: from smtp.clicvu.com ([192.168.0.71]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <java-user@lucene.apache.org>;
          Wed, 23 Mar 2005 09:57:22 -0500
Content-type: text/plain
Date: Wed, 23 Mar 2005 09:57:45 -0500
From: roy-lucene-user@xemaps.com
Subject: Re: new added documents not showing
To: java-user@lucene.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Pasha, in short, that is all I'm trying to do.  Wasn't an issue really before.

Otis, not sure what Luke is.  But the documents appear after we optimize.

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 18:31:48 2005
Return-Path: <java-user-return-13774-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 462 invoked from network); 23 Mar 2005 18:31:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 18:31:48 -0000
Received: (qmail 3682 invoked by uid 500); 23 Mar 2005 18:31:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3636 invoked by uid 500); 23 Mar 2005 18:31:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3622 invoked by uid 99); 23 Mar 2005 18:31:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.jcatalog.de (HELO mail.jcatalog.de) (195.127.150.126)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 10:31:40 -0800
Received: by mail.jcatalog.de (Postfix, from userid 1079)
	id 26E3E79400F; Wed, 23 Mar 2005 19:22:46 +0100 (CET)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by mail.jcatalog.de (Postfix) with ESMTP id E244B79400E
	for <java-user@lucene.apache.org>; Wed, 23 Mar 2005 19:22:44 +0100 (CET)
Received: from mail.jcatalog.de (localhost.localdomain [127.0.0.1])
	by localhost.localdomain (AvMailGate-2.0.2-9) id 16553-14BFB39F;
	Wed, 23 Mar 2005 19:22:44 +0100
Received: from jCatalog.com (unknown [172.16.154.166])
	by mail.jcatalog.de (Postfix) with ESMTP id C214079400E
	for <java-user@lucene.apache.org>; Wed, 23 Mar 2005 19:22:44 +0100 (CET)
Message-ID: <4241B5C4.4090502@jCatalog.com>
Date: Wed, 23 Mar 2005 19:30:28 +0100
From: Jochen Franke <Jochen.Franke@jCatalog.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.6) Gecko/20040113
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Problem with memory utilisation during Lucene search
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiVirus: checked by AntiVir MailGate (version: 2.0.2-9; AVE: 6.30.0.7; VDF: 6.30.0.43; host: jcatalog.de)
X-Spam-Checker-Version: SpamAssassin 2.60 (1.212-2003-09-23-exp) on 
	mail.jcatalog.de
X-Spam-Status: No, hits=-4.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=2.60
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,

our web application is currectly executing queries on a Lucene index 
with 6 Mio. records. The memory used by the virtual machine increases up 
to 80MB when a search executed. With eight parallel searches we hit the 
400MB mark.
Because we had some "out of memory" exceptions in the applications
in the last days with 1200MB memory assigned to the virtual machine
my questions are:

1. Is such an extensive memory utilisation normal which an index of this
size or is it an uncommon behaviour? Has anybody made similar experiences?
2. Are there possibilities to restrict or reduce the memory consumption
of Lucene?
3. Does Lucene provide a mechanism to limit the number of concurrent 
searches or must I implement my own wrapper around the search calls
to Lucene?

Thanks
	Jochen




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 18:51:28 2005
Return-Path: <java-user-return-13775-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7794 invoked from network); 23 Mar 2005 18:51:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 18:51:28 -0000
Received: (qmail 57600 invoked by uid 500); 23 Mar 2005 18:51:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57549 invoked by uid 500); 23 Mar 2005 18:51:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57397 invoked by uid 99); 23 Mar 2005 18:51:15 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.13 as permitted sender)
Received: from smtprelay01.ispgateway.de (HELO smtprelay01.ispgateway.de) (80.67.18.13)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 10:51:13 -0800
Received: (qmail 30233 invoked from network); 23 Mar 2005 18:51:09 -0000
Received: from unknown (HELO p54802DEC.dip.t-dialin.net) ([pbs]937788@[84.128.45.236])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 23 Mar 2005 18:51:09 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Problem with memory utilisation during Lucene search
Date: Wed, 23 Mar 2005 19:52:13 +0100
User-Agent: KMail/1.7.1
References: <4241B5C4.4090502@jCatalog.com>
In-Reply-To: <4241B5C4.4090502@jCatalog.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200503231952.14004@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 23 March 2005 19:30, Jochen Franke wrote:

> 2. Are there possibilities to restrict or reduce the memory consumption
> of Lucene?

I think Doug made a fix for indexes with many fields. So you could try with 
the development version from SVN. If that doesn't help: are you sure 
you're using Lucene the right way, e.g. having only one 
IndexReader/Searcher and using it for all searches?

> 3. Does Lucene provide a mechanism to limit the number of concurrent
> searches or must I implement my own wrapper around the search calls
> to Lucene?

You'd need to implement this yourself.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 20:05:45 2005
Return-Path: <java-user-return-13776-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28018 invoked from network); 23 Mar 2005 20:05:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 20:05:44 -0000
Received: (qmail 41909 invoked by uid 500); 23 Mar 2005 20:05:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41470 invoked by uid 500); 23 Mar 2005 20:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41445 invoked by uid 99); 23 Mar 2005 20:05:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 12:05:36 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <2005032320053401500elefde>; Wed, 23 Mar 2005 20:05:34 +0000
Message-ID: <4241CC0D.7040902@apache.org>
Date: Wed, 23 Mar 2005 12:05:33 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041127)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem with memory utilisation during Lucene search
References: <4241B5C4.4090502@jCatalog.com> <200503231952.14004@danielnaber.de>
In-Reply-To: <200503231952.14004@danielnaber.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Daniel Naber wrote:
> If that doesn't help: are you sure 
> you're using Lucene the right way, e.g. having only one 
> IndexReader/Searcher and using it for all searches?

That's my first suggestion too.  Memory consumption should not primarily 
grow per query, rather per IndexSearcher.  You're seeing 80MB of RAM 
consumed per query over an 6M document index.  That sounds plausible if, 
e.g., you're using a Sort and not re-using a single IndexSearcher.  Once 
you start re-using the IndexSearcher overall consumption should be 
around 80MB.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 20:51:00 2005
Return-Path: <java-user-return-13777-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52644 invoked from network); 23 Mar 2005 20:50:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 20:50:59 -0000
Received: (qmail 33443 invoked by uid 500); 23 Mar 2005 20:50:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33406 invoked by uid 500); 23 Mar 2005 20:50:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33393 invoked by uid 99); 23 Mar 2005 20:50:55 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31101.mail.mud.yahoo.com (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 23 Mar 2005 12:50:54 -0800
Received: (qmail 39434 invoked by uid 60001); 23 Mar 2005 20:50:51 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=38D6SV+As0gC1M5idz4mMXzJXHx/NQGMHNWJC34UXZn/hKIp5LBcEAuKPFM7Jr78dGbE0yOwCFrjvT3iRCjvJXS4iXVeGFBY9mnbFeZQ8dD+j5ZGFopkh3BNUrrvBRczbBL+UAU53fUeSFOn3nTa9W8f4gxCUi1e1bACc5NzPZI=  ;
Message-ID: <20050323205051.39432.qmail@web31101.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31101.mail.mud.yahoo.com via HTTP; Wed, 23 Mar 2005 12:50:51 PST
Date: Wed, 23 Mar 2005 12:50:51 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: incremental indexing - efficiency
To: java-user@lucene.apache.org, sunil goyal <sunilgoyal@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That sounds a little low.  I'll assume that you profiled your whole
application, which leaves room for something else slowing things down,
and I'll suggest you write a standalone application whose only task is
to index documents as quickly as possible.  Hm, this reminds me that
I've written stuff like that twice, once for O'Reilly's OnJava site:
http://www.onjava.com/lpt/a/3273 and once for Lucene in Action.  Both
contain free code, which should help you figure out if it's really
Lucene or your other code.

If you write something that's standalone I could run it on my machine
and report the results.

Oh, and check this: http://lucene.apache.org/java/docs/benchmarks.html

Otis


--- sunil goyal <sunilgoyal@gmail.com> wrote:
> Hello all,
> 
> I am trying to use Lucene for doing incremental indexing of the order
> of million of records daily using a single machine (P4 2.4Ghz 1 GB
> RAM). I do get messages updated every few minutes based on which I
> need to update the index.
> 
> I am using a StandardAnalyzer and writing documents using IndexWriter
> (FSDirectory) using the following structure:
> 
> Document document = new Document();
> document.add(Field.Keyword(INDEX_MESG_ID,
> LongField.longToString(mesg_id)));
> document.add(Field.UnStored(INDEX_MESG_TITLE, mesgTitle));
> document.add(Field.UnStored(INDEX_MESG_DESCRIPTION,mesgDescription));
> document.add(Field.Keyword(INDEX_MESG_DATE,mesgDate));
> 
> mesgTitle is string of the order of 20-50 words
> mesgDescription is a string of the order of 500-1000 words.
> 
> I profiled my application and the index writer is able to write 16
> messages per second, which is too low for the order that I want to
> achieve. I have tried various options:
> - increasing mergeFactor and minMergeDocs from 10 to 100 to 1000
> didn't help.
> - Changed indexwriter from FSDirectory to RAMDirectory and later
> synchronizing changes to FSDirectory. Even this didn't help.
> 
> It will be great if someone can give me pointers for increasing the
> efficiency of index writer process. Can someone give me practical
> examples of how much maximum efficiency can be achieved for similar
> process on a single machine?
> 
> Thanks
> 
> Regards
> Sunil
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 23 22:21:48 2005
Return-Path: <java-user-return-13778-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73402 invoked from network); 23 Mar 2005 22:21:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Mar 2005 22:21:48 -0000
Received: (qmail 60247 invoked by uid 500); 23 Mar 2005 22:21:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60064 invoked by uid 500); 23 Mar 2005 22:21:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59973 invoked by uid 500); 23 Mar 2005 22:21:27 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 59938 invoked by uid 99); 23 Mar 2005 22:21:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO disidente.novamens.com) (200.73.189.61)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 14:21:26 -0800
Received: from 127.0.0.1 (disidente [127.0.0.1])
	by disidente.novamens.com (Postfix) with SMTP id 9CE385B63E
	for <lucene-user@jakarta.apache.org>; Wed, 23 Mar 2005 19:21:21 -0300 (ART)
Received: from disidente.novamens.com ([127.0.0.1])
	by localhost (disidente [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 13502-06 for <lucene-user@jakarta.apache.org>;
	Wed, 23 Mar 2005 19:21:16 -0300 (ART)
Received: from mens.hq.novamens.com (unknown [200.73.189.82])
	by disidente.novamens.com (Postfix) with ESMTP id CAC3F5B633
	for <lucene-user@jakarta.apache.org>; Wed, 23 Mar 2005 19:21:16 -0300 (ART)
Received: from [127.0.0.1] (unknown [192.168.1.11])
	by mens.hq.novamens.com (Postfix) with ESMTP id 0B00B37E53
	for <lucene-user@jakarta.apache.org>; Wed, 23 Mar 2005 19:21:16 -0300 (ART)
Message-ID: <4241EBDC.9090104@novamens.com>
Date: Wed, 23 Mar 2005 19:21:16 -0300
From: Alexis Rodriguez <alexis@novamens.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: lucene-user@jakarta.apache.org
Subject: "docs out of order exception" in Lucene. Please help.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, we have an issue with Lucene and haven't found a solution so far.
So, I'm asking for your help if that's possible.

The scenario is as follows:
We are using 2 lucene FS directories, a main one and a small temporary one
where all our documents are added. After adding 100 documents, that small
directory is merged into the main one and then a new index is created
into the same temporary directory (using IndexWriter constructor with 
create = true).
We also have a MultiReader on both directories (wraps 2 indexReaders) for
doing search and removal of documents.
This MultiReader is never closed explicitally. Instead the IndexReader 
on the main directory
is closed only when doing a merge, and the indexReader on the temp 
directory is
closed when doing an update (adding a document) with IndexWriter.
Everything is synchronized so that they are closed only when MultiReader 
is not being
used. This MultiReader is the only IndexReader we export in the 
interface and
has a count number which is being incremented when an indexReader is
requested and decremented when that indexreader is closed. Remember the 
MultiReader
is not really closed. When one of the 2 underlying readers is closed, we 
assign
a new MultiReader to the variable holding it.

So, the problem is that randomly, but oftenly, when we are doing a close 
on the
IndexWriter (after adding a document), we get an "docs out of order" 
exception.
Problem seems to be with some SegmentMergeInfos in the Working FS directory
and some SegmentMergeInfos in the internal RAMDirectory of the IndexWriter.

Have any of you got that "docs out of order" exception and know what is 
causing it?
Searching in Lucene mailing-list we saw little reference to that exception
(marking it as a lucene bug, but no answer on how to deal with it).
We have to get this problem solved by Monday, so ANY help will be 
appreciated.

Thanks in advance.

Alexis Rodriguez, from Novamens S.A.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 00:42:13 2005
Return-Path: <java-user-return-13779-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4993 invoked from network); 24 Mar 2005 00:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 00:42:13 -0000
Received: (qmail 57430 invoked by uid 500); 24 Mar 2005 00:42:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57174 invoked by uid 500); 24 Mar 2005 00:42:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57078 invoked by uid 99); 24 Mar 2005 00:41:59 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-7-7-100.dsl.nyc.megapath.net (HELO mail.monsur.com) (64.7.7.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 16:41:58 -0800
Received: from phoenix [64.7.7.101] by mail.monsur.com with ESMTP
  (SMTPD32-8.04) id AE69183A0138; Wed, 23 Mar 2005 19:48:41 -0500
From: "Monsur Hossain" <monsur@monsur.com>
To: <java-user@lucene.apache.org>
Subject: Deploying index to multiple webservers
Date: Wed, 23 Mar 2005 19:41:50 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
thread-index: AcUwCkRERJkHQjN5Q/adeAX86mkFaw==
Message-Id: <200503231948546.SM01852@phoenix>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The setup: Using Lucene.NET in a web environment on Win2k3 servers.  One
process runs every 5 minutes, grabbing new rows from the database, and
adding them to a Lucene index.  Only additions are made to the index, no
deletions.  The mergeFactor is set to 2 to minimize the number of segments.

This index is not searched on, but it is copied to a series of webservers,
where searches are performed.  I'm caching the IndexReader used by the
IndexSearcher; this IndexReader is recreated whenever the index files
change.  

My questions:  What's the proper way to deploy this main index to all the
webservers?  Is it safe to just xcopy the index to each individual
webserver?  If so, is there a good way to delete the old index files?

Now this is just the setup I've dreamed up; if someone can suggest a better
method, I'm all ears.  I'd like to keep the indexing process separated from
the index deployment process.  And I don't want to interrupt searches on the
web frontend.

Thanks!



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 01:02:26 2005
Return-Path: <java-user-return-13780-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8945 invoked from network); 24 Mar 2005 01:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 01:02:26 -0000
Received: (qmail 85745 invoked by uid 500); 24 Mar 2005 01:02:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85450 invoked by uid 500); 24 Mar 2005 01:02:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85432 invoked by uid 99); 24 Mar 2005 01:02:20 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME,TO_ADDRESS_EQ_REAL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shim1.irt.drexel.edu (HELO shim1.irt.drexel.edu) (144.118.29.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 17:02:18 -0800
Received: from conversion-daemon.shim1.irt.drexel.edu by shim1.irt.drexel.edu
 (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun 23 2003))
 id <0IDT00B01YZFLR@shim1.irt.drexel.edu> for java-user@lucene.apache.org; Wed,
 23 Mar 2005 20:02:16 -0500 (EST)
Received: from drexel.edu ([192.168.5.136])
 by shim1.irt.drexel.edu (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun
 23 2003)) with ESMTP id <0IDU00J0D07QLM@shim1.irt.drexel.edu> for
 java-user@lucene.apache.org; Wed, 23 Mar 2005 20:02:14 -0500 (EST)
Received: from [144.118.29.48] by mail1.prvt.drexel.edu (mshttpd); Wed,
 23 Mar 2005 20:02:14 -0500
Date: Wed, 23 Mar 2005 20:02:14 -0500
From: xx28@drexel.edu
Subject: large number of documents
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id: <ba5524ba6657.ba6657ba5524@drexel.edu>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.17 (built Jun 23 2003)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

We are evaluating to use Lucence as one search engine for almost 100,000 documents (each will be less than 10,000 words)collections, is it feasible or no sense at all? someone has similar experience before?

Many thanks for suggestions,

George


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 01:25:12 2005
Return-Path: <java-user-return-13781-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11728 invoked from network); 24 Mar 2005 01:25:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 01:25:11 -0000
Received: (qmail 6954 invoked by uid 500); 24 Mar 2005 01:25:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6934 invoked by uid 500); 24 Mar 2005 01:25:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6919 invoked by uid 99); 24 Mar 2005 01:25:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 17:25:04 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9699B13E2136; Wed, 23 Mar 2005 20:25:01 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 88ADA13E2135
	for <java-user@lucene.apache.org>; Wed, 23 Mar 2005 20:24:36 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <ba5524ba6657.ba6657ba5524@drexel.edu>
References: <ba5524ba6657.ba6657ba5524@drexel.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3840996a0adb162925234043a84cc5af@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: large number of documents
Date: Wed, 23 Mar 2005 20:24:34 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quite feasible and you'll be very glad you picked Lucene :)

	Erik

On Mar 23, 2005, at 8:02 PM, xx28@drexel.edu wrote:

> Hi,
>
> We are evaluating to use Lucence as one search engine for almost 
> 100,000 documents (each will be less than 10,000 words)collections, is 
> it feasible or no sense at all? someone has similar experience before?
>
> Many thanks for suggestions,
>
> George
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 02:48:35 2005
Return-Path: <java-user-return-13782-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41352 invoked from network); 24 Mar 2005 02:48:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 02:48:35 -0000
Received: (qmail 74988 invoked by uid 500); 24 Mar 2005 02:48:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74955 invoked by uid 500); 24 Mar 2005 02:48:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74941 invoked by uid 99); 24 Mar 2005 02:48:30 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31102.mail.mud.yahoo.com (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 23 Mar 2005 18:48:27 -0800
Received: (qmail 61922 invoked by uid 60001); 24 Mar 2005 02:48:24 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=SPt7Wr+kTuOVQQOBm+JfQOhgZCIn88dpTZ1LMHhy++TD6l4RrNeFSzCfjBSHHu8+T1nQpeEKZF++8SVdPQQ/cPmAIZgAaXNcGJpkzTKtzwOcq8s+AoR+X+OHTlHQf53ldu0V0EZwfRwNmpto/tSUP/khf3P4xlRKpUIn7ihyY5g=  ;
Message-ID: <20050324024824.61919.qmail@web31102.mail.mud.yahoo.com>
Received: from [69.201.131.192] by web31102.mail.mud.yahoo.com via HTTP; Wed, 23 Mar 2005 18:48:24 PST
Date: Wed, 23 Mar 2005 18:48:24 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Deploying index to multiple webservers
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Monsur,

Since the index is not being searched while it is being built, I'd use
a higher mergeFactor.

As for deployment, I am not sure about the Windows environment, but you
could try imitating this:

http://mail-archives.eu.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3C42254963.6000901@apache.org%3E

Otis


--- Monsur Hossain <monsur@monsur.com> wrote:
> The setup: Using Lucene.NET in a web environment on Win2k3 servers. 
> One
> process runs every 5 minutes, grabbing new rows from the database,
> and
> adding them to a Lucene index.  Only additions are made to the index,
> no
> deletions.  The mergeFactor is set to 2 to minimize the number of
> segments.
> 
> This index is not searched on, but it is copied to a series of
> webservers,
> where searches are performed.  I'm caching the IndexReader used by
> the
> IndexSearcher; this IndexReader is recreated whenever the index files
> change.  
> 
> My questions:  What's the proper way to deploy this main index to all
> the
> webservers?  Is it safe to just xcopy the index to each individual
> webserver?  If so, is there a good way to delete the old index files?
> 
> Now this is just the setup I've dreamed up; if someone can suggest a
> better
> method, I'm all ears.  I'd like to keep the indexing process
> separated from
> the index deployment process.  And I don't want to interrupt searches
> on the
> web frontend.
> 
> Thanks!
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 05:00:18 2005
Return-Path: <java-user-return-13783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78517 invoked from network); 24 Mar 2005 05:00:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 05:00:18 -0000
Received: (qmail 56767 invoked by uid 500); 24 Mar 2005 05:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56645 invoked by uid 500); 24 Mar 2005 05:00:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56602 invoked by uid 99); 24 Mar 2005 05:00:04 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rs15.luxsci.com (HELO rs15.luxsci.com) (65.61.166.71)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 23 Mar 2005 21:00:02 -0800
Received: from [192.168.70.101] (ppp115-120.static.internode.on.net [150.101.115.120])
	(authenticated bits=0)
	by rs15.luxsci.com (8.12.11/8.12.11) with ESMTP id j2O4xsbe023532
	for <java-user@lucene.apache.org>; Wed, 23 Mar 2005 22:59:55 -0600
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <4241EBDC.9090104@novamens.com>
References: <4241EBDC.9090104@novamens.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <70713fa4fa9e08b9a8017ac4f9119e43@cenqua.com>
Content-Transfer-Encoding: 7bit
From: Matt Quail <matt@cenqua.com>
Subject: Re: "docs out of order exception" in Lucene. Please help.
Date: Thu, 24 Mar 2005 15:59:26 +1100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have also just seen this exception in a production system (lucene  
1.4.3).

Any tips on what might be causing it? I'll be attempting to reproduce  
it later, but I'm quite confident that while I'm using that  
IndexWriter, no other readers are open, and no other Writers, either.

java.lang.IllegalStateException: docs out of order
	at  
org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java: 
353)
	at  
org.apache.lucene.index.SegmentMerger.mergeTermInfo(SegmentMerger.java: 
316)
	at  
org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java: 
290)
	at  
org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java: 
254)
	at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:93)
	at  
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
	at  
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java: 
458)
	at  
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)
	at  
org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:294)

=Matt

On 24/03/2005, at 9:21 AM, Alexis Rodriguez wrote:

> Hello, we have an issue with Lucene and haven't found a solution so  
> far.
> So, I'm asking for your help if that's possible.
>
> The scenario is as follows:
> We are using 2 lucene FS directories, a main one and a small temporary  
> one
> where all our documents are added. After adding 100 documents, that  
> small
> directory is merged into the main one and then a new index is created
> into the same temporary directory (using IndexWriter constructor with  
> create = true).
> We also have a MultiReader on both directories (wraps 2 indexReaders)  
> for
> doing search and removal of documents.
> This MultiReader is never closed explicitally. Instead the IndexReader  
> on the main directory
> is closed only when doing a merge, and the indexReader on the temp  
> directory is
> closed when doing an update (adding a document) with IndexWriter.
> Everything is synchronized so that they are closed only when  
> MultiReader is not being
> used. This MultiReader is the only IndexReader we export in the  
> interface and
> has a count number which is being incremented when an indexReader is
> requested and decremented when that indexreader is closed. Remember  
> the MultiReader
> is not really closed. When one of the 2 underlying readers is closed,  
> we assign
> a new MultiReader to the variable holding it.
>
> So, the problem is that randomly, but oftenly, when we are doing a  
> close on the
> IndexWriter (after adding a document), we get an "docs out of order"  
> exception.
> Problem seems to be with some SegmentMergeInfos in the Working FS  
> directory
> and some SegmentMergeInfos in the internal RAMDirectory of the  
> IndexWriter.
>
> Have any of you got that "docs out of order" exception and know what  
> is causing it?
> Searching in Lucene mailing-list we saw little reference to that  
> exception
> (marking it as a lucene bug, but no answer on how to deal with it).
> We have to get this problem solved by Monday, so ANY help will be  
> appreciated.
>
> Thanks in advance.
>
> Alexis Rodriguez, from Novamens S.A.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 09:28:54 2005
Return-Path: <java-user-return-13784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68005 invoked from network); 24 Mar 2005 09:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 09:28:54 -0000
Received: (qmail 67850 invoked by uid 500); 24 Mar 2005 09:28:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67828 invoked by uid 500); 24 Mar 2005 09:28:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67814 invoked by uid 99); 24 Mar 2005 09:28:49 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DATE_IN_PAST_06_12
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 24 Mar 2005 01:28:47 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4ECEB13E2125; Thu, 24 Mar 2005 04:28:45 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id B469A13E2121
	for <java-user@lucene.apache.org>; Thu, 24 Mar 2005 04:28:36 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <ba5524ba6657.ba6657ba5524@drexel.edu>
References: <ba5524ba6657.ba6657ba5524@drexel.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3840996a0adb162925234043a84cc5af@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: large number of documents
Date: Wed, 23 Mar 2005 20:24:34 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quite feasible and you'll be very glad you picked Lucene :)

	Erik

On Mar 23, 2005, at 8:02 PM, xx28@drexel.edu wrote:

> Hi,
>
> We are evaluating to use Lucence as one search engine for almost 
> 100,000 documents (each will be less than 10,000 words)collections, is 
> it feasible or no sense at all? someone has similar experience before?
>
> Many thanks for suggestions,
>
> George
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 14:39:06 2005
Return-Path: <java-user-return-13785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67178 invoked from network); 24 Mar 2005 14:39:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 14:39:06 -0000
Received: (qmail 62133 invoked by uid 500); 24 Mar 2005 14:39:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62091 invoked by uid 500); 24 Mar 2005 14:39:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62078 invoked by uid 99); 24 Mar 2005 14:39:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from skipper.frogspace.net (HELO skipper.frogspace.net) (216.222.192.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 24 Mar 2005 06:38:59 -0800
Received: from slip-12-64-126-104.mis.prserv.net ([12.64.126.104] helo=aroushlt)
	by skipper.frogspace.net with esmtp (Exim 4.44)
	id 1DETU8-00084k-48
	for java-user@lucene.apache.org; Thu, 24 Mar 2005 06:38:56 -0800
From: "George Aroush" <george@aroush.net>
To: <java-user@lucene.apache.org>
Subject: RE: Deploying index to multiple webservers
Date: Thu, 24 Mar 2005 09:38:55 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
In-Reply-To: <20050324024824.61919.qmail@web31102.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1478
Thread-Index: AcUwG/o1/tAn74WPQ6iyJCf3pTrlHgAYetgQ
X-SA-Exim-Connect-IP: 12.64.126.104
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Monsur,

On Windows, using Lucene.Net/DotLucene I have done a similar trick to what
Otis pointed out in his link.  However, in my case, I renamed the index
folder (much faster then copying the index around.)  That is, I have two
folders, lets call one "LiveIndex" the other "LiveSearch".  Based on a
configuration file, when the LiveIndex hits a certain limit, I set a flag (a
"lock" file if you will) and my search application monitors this flag.  When
it's set, it renames those folders, et. al.

Regards,

-- George Aroush

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Wednesday, March 23, 2005 9:48 PM
To: java-user@lucene.apache.org
Subject: Re: Deploying index to multiple webservers

Hello Monsur,

Since the index is not being searched while it is being built, I'd use a
higher mergeFactor.

As for deployment, I am not sure about the Windows environment, but you
could try imitating this:

http://mail-archives.eu.apache.org/mod_mbox/lucene-java-user/200503.mbox/%3C
42254963.6000901@apache.org%3E

Otis


--- Monsur Hossain <monsur@monsur.com> wrote:
> The setup: Using Lucene.NET in a web environment on Win2k3 servers. 
> One
> process runs every 5 minutes, grabbing new rows from the database, and 
> adding them to a Lucene index.  Only additions are made to the index, 
> no deletions.  The mergeFactor is set to 2 to minimize the number of 
> segments.
> 
> This index is not searched on, but it is copied to a series of 
> webservers, where searches are performed.  I'm caching the IndexReader 
> used by the IndexSearcher; this IndexReader is recreated whenever the 
> index files change.
> 
> My questions:  What's the proper way to deploy this main index to all 
> the webservers?  Is it safe to just xcopy the index to each individual 
> webserver?  If so, is there a good way to delete the old index files?
> 
> Now this is just the setup I've dreamed up; if someone can suggest a 
> better method, I'm all ears.  I'd like to keep the indexing process 
> separated from the index deployment process.  And I don't want to 
> interrupt searches on the web frontend.
> 
> Thanks!
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 24 16:56:10 2005
Return-Path: <java-user-return-13786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17524 invoked from network); 24 Mar 2005 16:56:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Mar 2005 16:56:10 -0000
Received: (qmail 79641 invoked by uid 500); 24 Mar 2005 16:56:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79618 invoked by uid 500); 24 Mar 2005 16:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79605 invoked by uid 99); 24 Mar 2005 16:56:05 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of yseeley@gmail.com designates 64.233.170.199 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 24 Mar 2005 08:56:05 -0800
Received: by rproxy.gmail.com with SMTP id r35so544578rna
        for <java-user@lucene.apache.org>; Thu, 24 Mar 2005 08:56:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=VAwqFvG7OuiSXVAHo4KEC0fDtoIZ32TlmhpMMAe7fQoNCjkeueQUhVpQp+Ab102k3FUmvW2qNQFO2ikgU5+O5BYubBGVX5PM5OynBhc/3esknYIhinLkQulywCEYOilsShl0+oBKAHxF9eNy0GtiCU5VH0HW7IatPSv5lt6E65M=
Received: by 10.38.81.48 with SMTP id e48mr1719099rnb;
        Thu, 24 Mar 2005 08:56:02 -0800 (PST)
Received: by 10.38.12.53 with HTTP; Thu, 24 Mar 2005 08:56:02 -0800 (PST)
Message-ID: <c68e391705032408561703c24a@mail.gmail.com>
Date: Thu, 24 Mar 2005 11:56:02 -0500
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: NumberTools
In-Reply-To: <loom.20050322T093238-315@post.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <loom.20050318T103020-615@post.gmane.org>
	 <ba6e1c84ca3d3ef8c32e68e89307b752@ehatchersolutions.com>
	 <loom.20050318T171427-755@post.gmane.org>
	 <921e33407f76e2f94588dc8a426f6212@ehatchersolutions.com>
	 <c68e39170503180946de0beb@mail.gmail.com>
	 <Pine.LNX.4.58.0503211043550.28628@hal.rescomp.berkeley.edu>
	 <loom.20050322T083814-855@post.gmane.org>
	 <Pine.LNX.4.58.0503220001580.23028@hal.rescomp.berkeley.edu>
	 <loom.20050322T093238-315@post.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> An int will be stored as a 2 char string which will be sorted "char by char" so
> they will be almost as fast as sorting as integers.

John, two problems:
1) Memory consumption - string sorting uses String[] instead of int[]
2) Lucene uses UTF-8 to store strings, and you can't round-trip
arbitrary characters (see test code below that will fail.)

    char[] carr = new char[65536];
    for (int ch=0; ch<65536; ch++) carr[ch]=(char)ch;
    String s = new String(carr);
    byte[] b1 = s.getBytes("UTF-8");
    String s2 = new String(b1,"UTF-8");
    if (!s.equals(s2)) System.out.println("ERROR! Strings don't match");

-Yonik


On Tue, 22 Mar 2005 08:56:13 +0000 (UTC), John Patterson
<dev_johnpatterson@hotmail.com> wrote:
> Chris Hostetter <hossman_lucene <at> fucit.org> writes:
> 
> > I haven't worked through the math to prove to myself that your algorithm
> > is a viable way of expressing any Integer as a 4 byte String;  such that
> > any two Integers sort lexigraphically correct as strings ... but let's
> > assume that i have, and that it works perfectly.
> 
> The concept is this:  Signed ints range from MIN_VALUE to MAX_VALUE which are
> represented in binary as:
> 
> 10000000 00000000 00000000 00000000 (MIN_VALUE)
> 11111111 11111111 11111111 11111111 (-1)
> 00000000 00000000 00000000 00000000 (0)
> 00000000 00000000 00000000 00000001 (1)
> 01111111 11111111 11111111 11111111 (MAX_VALUE)
> 
> Any number begining with a 1 is negative.  Adding 1 to -1 causes the left most
> bit to overflow and is ignored.
> 
> The problem with converting these numbers into chars (and Strings) is that
> numbers that negative numbers begin with 1 and so are actually greater than
> positive numbers that all begin with 0.  Apart from the left-most bit every
> thing is as it should be.
> 
> To remedy this we need to change the numbers to unsigned ints such that
> 
> 00000000 00000000 00000000 00000000 (MIN_VALUE)
> 01111111 11111111 11111111 11111111 (-1)
> 10000000 00000000 00000000 00000000 (0)
> 10000000 00000000 00000000 00000001 (1)
> 11111111 11111111 11111111 11111111 (MAX_VALUE)
> 
> To convert from one to the other is just a case of flipping the left most bit
> which is done by adding MIN_VALUE
> 
> 00000000 00000000 00000000 00000001 (1)
> 10000000 00000000 00000000 00000000 (MIN_VALUE)
> -----------------------------------
> 10000000 00000000 00000000 00000001 (unsigned 1)
> 
> My test case shows that this calculation works for a number of boundry cases.
> 
> >so it's going to have to Sort them as Strings, which is
> > slower then sorting them as Integers -- even if they are only 4 bytes long
> > (unless I'm wrong, which is entirely possible ... i haven't tested it).
> 
> An int will be stored as a 2 char string which will be sorted "char by char" so
> they will be almost as fast as sorting as integers.  Certainly much faster than
> converting the Strings back to integers first and then sorting them!
> 
> > Now, if we could override the method used to parse the Term values from
> > Strings to Integers (using a user specified NumberFormat as i proposed)
> > then we could name your "convertTotText" method as "format" and write a
> > corrisponding "parse" method, and everything would work smashing.
> 
> It would be great if this could be incorporated into Lucene as it will make
> numeric searches much more efficient.  I will soon need to store simple
> geographical data in my index to do a "find the nearest x" type of search.
> 
> John
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 25 08:33:15 2005
Return-Path: <java-user-return-13787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54324 invoked from network); 25 Mar 2005 08:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Mar 2005 08:33:12 -0000
Received: (qmail 963 invoked by uid 500); 25 Mar 2005 08:33:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7219 invoked by uid 500); 25 Mar 2005 08:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7205 invoked by uid 99); 25 Mar 2005 08:20:56 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.170.203 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 25 Mar 2005 00:20:55 -0800
Received: by rproxy.gmail.com with SMTP id 1so557268rny
        for <java-user@lucene.apache.org>; Fri, 25 Mar 2005 00:20:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type;
        b=nyc939ngJe94f06xpTiNxsHf/HBvl1i7Qd+eFKAkiC09cXRbFW2lPZilnph97pceeVA14kRUEMADYf3a4JCcZ24fSTAGMw02hRp3Y/OwxOtlo7gJBdiGJU5iDqnIgosAxkClPyVv9Rr7iKMHkmtkczbesaLzYfBmDIR1ZhYjr54=
Received: by 10.38.206.58 with SMTP id d58mr2628357rng;
        Fri, 25 Mar 2005 00:20:51 -0800 (PST)
Received: from ?192.168.1.101? ([24.6.189.152])
        by mx.gmail.com with ESMTP id 62sm462361rna.2005.03.25.00.20.50;
        Fri, 25 Mar 2005 00:20:50 -0800 (PST)
Message-ID: <4243C9A5.2020205@gmail.com>
Date: Fri, 25 Mar 2005 00:19:49 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org,  rrao@alterpoint.com
Subject: Re: how to detect index integrity?
References: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
In-Reply-To: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
Content-Type: multipart/alternative;
 boundary="------------030703000909070802080501"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030703000909070802080501
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi, Ravi,

I used your NullDirectory.java, and found it works fine for smaller 
indexes, but when it comes to larger indexes(I am not quite sure, just 
observation), it always throws this exception at here:

  private void refill() throws IOException {
    long start = bufferStart + bufferPosition;
    long end = start + BUFFER_SIZE;
    if (end > length)                  // don't read past EOF
      end = length;
    bufferLength = (int)(end - start);
    if (bufferLength == 0)
      throw new IOException("read past EOF");
   ....

The print out and stack trace are:
merging segments _2io (50 docs) _2k3 (50 docs) _2li (50 docs) _2mx (50 
docs) _2oc (50 docs) _2pr (50 docs) _2r6 (50 docs) _2sl (50 docs) _2u0 
(50 docs) _2u4 (3 docs) into _0 (453 docs)
merging segments _25x (50 docs) _27c (50 docs) _28r (50 docs) _2a6 (50 
docs) _2bl (50 docs) _2d0 (50 docs) _2ef (50 docs) _2fu (50 docs) _2h9 
(50 docs) _0 (453 docs)ERROR 44|java.io.IOException: read past EOF|...
java.io.IOException: read past EOF
    at org.apache.lucene.store.InputStream.refill(InputStream.java:154)
    at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
    at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
    at 
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:66)
    at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:104)
    at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
    at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:480)
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
    at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:389)



Chris

Ravi Rao wrote:

>>From: chris.lu@gmail.com
>>Sent: Fri 3/18/2005 11:34 PM
>>    
>>
>
>  
>
>>Is there any way to detect the index's integrity?
>>Sometimes I came upon exceptions like these. If it happens, my only way 
>>is to delete the corrupted index.
>>    
>>
>
>  
>
>>   * Exception in thread "main" java.io.IOException : read past EOF
>>   * java.lang.ArrayIndexOutOfBoundsException
>>    
>>
>
>  
>
>>[ ... ]
>>    
>>
>
>I did too, which is why I wrote NullDirectory.  You can find the
>sources and a description in bugzilla.
>
>   http://issues.apache.org/bugzilla/show_bug.cgi?id=33851
>
>Look at the tests for examples of use.  I would value your feedback.
>  
>
>------------------------------------------------------------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------030703000909070802080501--

From java-user-return-13787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 25 08:33:15 2005
Return-Path: <java-user-return-13787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54326 invoked from network); 25 Mar 2005 08:33:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Mar 2005 08:33:12 -0000
Received: (qmail 7258 invoked by uid 500); 25 Mar 2005 08:20:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7219 invoked by uid 500); 25 Mar 2005 08:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7205 invoked by uid 99); 25 Mar 2005 08:20:56 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.170.203 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 25 Mar 2005 00:20:55 -0800
Received: by rproxy.gmail.com with SMTP id 1so557268rny
        for <java-user@lucene.apache.org>; Fri, 25 Mar 2005 00:20:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type;
        b=nyc939ngJe94f06xpTiNxsHf/HBvl1i7Qd+eFKAkiC09cXRbFW2lPZilnph97pceeVA14kRUEMADYf3a4JCcZ24fSTAGMw02hRp3Y/OwxOtlo7gJBdiGJU5iDqnIgosAxkClPyVv9Rr7iKMHkmtkczbesaLzYfBmDIR1ZhYjr54=
Received: by 10.38.206.58 with SMTP id d58mr2628357rng;
        Fri, 25 Mar 2005 00:20:51 -0800 (PST)
Received: from ?192.168.1.101? ([24.6.189.152])
        by mx.gmail.com with ESMTP id 62sm462361rna.2005.03.25.00.20.50;
        Fri, 25 Mar 2005 00:20:50 -0800 (PST)
Message-ID: <4243C9A5.2020205@gmail.com>
Date: Fri, 25 Mar 2005 00:19:49 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org,  rrao@alterpoint.com
Subject: Re: how to detect index integrity?
References: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
In-Reply-To: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
Content-Type: multipart/alternative;
 boundary="------------030703000909070802080501"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030703000909070802080501
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi, Ravi,

I used your NullDirectory.java, and found it works fine for smaller 
indexes, but when it comes to larger indexes(I am not quite sure, just 
observation), it always throws this exception at here:

  private void refill() throws IOException {
    long start = bufferStart + bufferPosition;
    long end = start + BUFFER_SIZE;
    if (end > length)                  // don't read past EOF
      end = length;
    bufferLength = (int)(end - start);
    if (bufferLength == 0)
      throw new IOException("read past EOF");
   ....

The print out and stack trace are:
merging segments _2io (50 docs) _2k3 (50 docs) _2li (50 docs) _2mx (50 
docs) _2oc (50 docs) _2pr (50 docs) _2r6 (50 docs) _2sl (50 docs) _2u0 
(50 docs) _2u4 (3 docs) into _0 (453 docs)
merging segments _25x (50 docs) _27c (50 docs) _28r (50 docs) _2a6 (50 
docs) _2bl (50 docs) _2d0 (50 docs) _2ef (50 docs) _2fu (50 docs) _2h9 
(50 docs) _0 (453 docs)ERROR 44|java.io.IOException: read past EOF|...
java.io.IOException: read past EOF
    at org.apache.lucene.store.InputStream.refill(InputStream.java:154)
    at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
    at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
    at 
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:66)
    at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:104)
    at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
    at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:480)
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
    at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:389)



Chris

Ravi Rao wrote:

>>From: chris.lu@gmail.com
>>Sent: Fri 3/18/2005 11:34 PM
>>    
>>
>
>  
>
>>Is there any way to detect the index's integrity?
>>Sometimes I came upon exceptions like these. If it happens, my only way 
>>is to delete the corrupted index.
>>    
>>
>
>  
>
>>   * Exception in thread "main" java.io.IOException : read past EOF
>>   * java.lang.ArrayIndexOutOfBoundsException
>>    
>>
>
>  
>
>>[ ... ]
>>    
>>
>
>I did too, which is why I wrote NullDirectory.  You can find the
>sources and a description in bugzilla.
>
>   http://issues.apache.org/bugzilla/show_bug.cgi?id=33851
>
>Look at the tests for examples of use.  I would value your feedback.
>  
>
>------------------------------------------------------------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------030703000909070802080501--

From java-user-return-13787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 25 08:33:25 2005
Return-Path: <java-user-return-13787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54399 invoked from network); 25 Mar 2005 08:33:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Mar 2005 08:33:22 -0000
Received: (qmail 1351 invoked by uid 500); 25 Mar 2005 08:33:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1066 invoked by uid 500); 25 Mar 2005 08:33:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7205 invoked by uid 99); 25 Mar 2005 08:20:56 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_MESSAGE,HTML_TITLE_EMPTY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of chris.lu@gmail.com designates 64.233.170.203 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 25 Mar 2005 00:20:55 -0800
Received: by rproxy.gmail.com with SMTP id 1so557268rny
        for <java-user@lucene.apache.org>; Fri, 25 Mar 2005 00:20:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type;
        b=nyc939ngJe94f06xpTiNxsHf/HBvl1i7Qd+eFKAkiC09cXRbFW2lPZilnph97pceeVA14kRUEMADYf3a4JCcZ24fSTAGMw02hRp3Y/OwxOtlo7gJBdiGJU5iDqnIgosAxkClPyVv9Rr7iKMHkmtkczbesaLzYfBmDIR1ZhYjr54=
Received: by 10.38.206.58 with SMTP id d58mr2628357rng;
        Fri, 25 Mar 2005 00:20:51 -0800 (PST)
Received: from ?192.168.1.101? ([24.6.189.152])
        by mx.gmail.com with ESMTP id 62sm462361rna.2005.03.25.00.20.50;
        Fri, 25 Mar 2005 00:20:50 -0800 (PST)
Message-ID: <4243C9A5.2020205@gmail.com>
Date: Fri, 25 Mar 2005 00:19:49 -0800
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org,  rrao@alterpoint.com
Subject: Re: how to detect index integrity?
References: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
In-Reply-To: <3F227B042654B049A3C1B7B10FF65A0814F013@exchange.inside.eclyptic.com>
Content-Type: multipart/alternative;
 boundary="------------030703000909070802080501"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030703000909070802080501
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi, Ravi,

I used your NullDirectory.java, and found it works fine for smaller 
indexes, but when it comes to larger indexes(I am not quite sure, just 
observation), it always throws this exception at here:

  private void refill() throws IOException {
    long start = bufferStart + bufferPosition;
    long end = start + BUFFER_SIZE;
    if (end > length)                  // don't read past EOF
      end = length;
    bufferLength = (int)(end - start);
    if (bufferLength == 0)
      throw new IOException("read past EOF");
   ....

The print out and stack trace are:
merging segments _2io (50 docs) _2k3 (50 docs) _2li (50 docs) _2mx (50 
docs) _2oc (50 docs) _2pr (50 docs) _2r6 (50 docs) _2sl (50 docs) _2u0 
(50 docs) _2u4 (3 docs) into _0 (453 docs)
merging segments _25x (50 docs) _27c (50 docs) _28r (50 docs) _2a6 (50 
docs) _2bl (50 docs) _2d0 (50 docs) _2ef (50 docs) _2fu (50 docs) _2h9 
(50 docs) _0 (453 docs)ERROR 44|java.io.IOException: read past EOF|...
java.io.IOException: read past EOF
    at org.apache.lucene.store.InputStream.refill(InputStream.java:154)
    at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
    at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
    at 
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:66)
    at 
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:104)
    at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
    at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:480)
    at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
    at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:389)



Chris

Ravi Rao wrote:

>>From: chris.lu@gmail.com
>>Sent: Fri 3/18/2005 11:34 PM
>>    
>>
>
>  
>
>>Is there any way to detect the index's integrity?
>>Sometimes I came upon exceptions like these. If it happens, my only way 
>>is to delete the corrupted index.
>>    
>>
>
>  
>
>>   * Exception in thread "main" java.io.IOException : read past EOF
>>   * java.lang.ArrayIndexOutOfBoundsException
>>    
>>
>
>  
>
>>[ ... ]
>>    
>>
>
>I did too, which is why I wrote NullDirectory.  You can find the
>sources and a description in bugzilla.
>
>   http://issues.apache.org/bugzilla/show_bug.cgi?id=33851
>
>Look at the tests for examples of use.  I would value your feedback.
>  
>
>------------------------------------------------------------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>


--------------030703000909070802080501--

From java-user-return-13788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 25 13:28:34 2005
Return-Path: <java-user-return-13788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30072 invoked from network); 25 Mar 2005 13:28:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Mar 2005 13:28:34 -0000
Received: (qmail 18213 invoked by uid 500); 25 Mar 2005 13:28:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18190 invoked by uid 500); 25 Mar 2005 13:28:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18168 invoked by uid 99); 25 Mar 2005 13:28:27 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.alterpoint.com (HELO exchange.inside.eclyptic.com) (66.219.38.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 25 Mar 2005 05:28:22 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5313E.811C091E"
Subject: RE: how to detect index integrity?
Date: Fri, 25 Mar 2005 07:28:17 -0600
Message-ID: <3F227B042654B049A3C1B7B10FF65A0814F02F@exchange.inside.eclyptic.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: how to detect index integrity?
Thread-Index: AcUxE44O7Mig4DfeSMavm6U1F4vpOgAKO+xe
From: "Ravi Rao" <rrao@alterpoint.com>
To: "Chris Lu" <chris.lu@gmail.com>
Cc: <java-user@lucene.apache.org>,
	"Ravi Rao" <rrao@alterpoint.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5313E.811C091E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

> From: chris.lu@gmail.com
> Sent: Fri 3/25/2005 2:19 AM

> I used your NullDirectory.java, and found it works fine for smaller=20
> indexes, but when it comes to larger indexes(I am not quite sure, just =

> observation), it always throws this exception at here:

> [ ... code and stack trace moved to end of mail ...]

Chris,

The call to addIndexes results in the target directory (in this case
an instance of NullDirectory) being optimized twice.  Your stacktrace
shows that it is the second call to optimize that is the problem.  I
assume this is 'lucene-1.4-final'.

I will get to this as soon as I can.  Thanks for taking the time to
send me this information.
--=20
Ravi/
-----------------------------------------------------------

private void refill() throws IOException {
    long start =3D bufferStart + bufferPosition;
    long end =3D start + BUFFER_SIZE;
    if (end > length)                  // don't read past EOF
      end =3D length;
    bufferLength =3D (int)(end - start);
    if (bufferLength =3D=3D 0)
      throw new IOException("read past EOF");
   ....

The print out and stack trace are:
merging segments _2io (50 docs) _2k3 (50 docs) _2li (50 docs) _2mx (50 =
docs) _2oc (50 docs) _2pr (50 docs) _2r6 (50 docs) _2sl (50 docs) _2u0 =
(50 docs) _2u4 (3 docs) into _0 (453 docs)
merging segments _25x (50 docs) _27c (50 docs) _28r (50 docs) _2a6 (50 =
docs) _2bl (50 docs) _2d0 (50 docs) _2ef (50 docs) _2fu (50 docs) _2h9 =
(50 docs) _0 (453 docs)ERROR 44|java.io.IOException: read past EOF|...
java.io.IOException: read past EOF
    at org.apache.lucene.store.InputStream.refill(InputStream.java:154)
    at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
    at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
    at =
org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java=
:66)
    at =
org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:104)
    at =
org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
    at =
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:480)
    at =
org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
    at =
org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:389)

------_=_NextPart_001_01C5313E.811C091E--

From java-user-return-13789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Mar 25 15:34:22 2005
Return-Path: <java-user-return-13789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89254 invoked from network); 25 Mar 2005 15:34:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Mar 2005 15:34:22 -0000
Received: (qmail 63013 invoked by uid 500); 25 Mar 2005 15:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62808 invoked by uid 500); 25 Mar 2005 15:34:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62795 invoked by uid 99); 25 Mar 2005 15:34:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.crcpress.com (HELO flexbe01.crcpress.com) (65.244.170.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 25 Mar 2005 07:34:16 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: FilteredQuery and Boolean AND
Date: Fri, 25 Mar 2005 10:34:13 -0500
Message-ID: <78A2AFE317F5AD48B823BE740D4A815224070C@flexbe01.crcpress.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FilteredQuery and Boolean AND
Thread-Index: AcUxUBgGSqKrSKbOQASE4TXxhK/3pg==
From: "Kipping, Peter" <Peter.Kipping@taylorandfrancis.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have the following query structure:

BooleanQuery q2 =3D new BooleanQuery();
TermQuery tq =3D new TermQuery(new Term("all_entries", "y"));
FilteredQuery fq =3D new FilteredQuery(tq, ft);
FilteredQuery fq2 =3D new FilteredQuery(tq, ft2);
q2.add(fq, false, false);
q2.add(fq2, false, false);

The two filters are searches over numeric ranges.  I'm using filters so
I don't get the TooManyBooleanClauses Exception.  And my TermQuery tq is
just a field that has 'y' in every document so I can filter over the
entire index.  The last two lines I am creating a boolean OR, and
everything works fine.  I get back 30 documents which is correct.

However when I change the last two lines to create an AND:

q2.add(fq, true, false);
q2.add(fq2, true, false);

I still get back 30 documents, which is not correct.  It should be 0.
What's going on with FilteredQuery?

Thanks,
Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 27 00:33:14 2005
Return-Path: <java-user-return-13790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18154 invoked from network); 27 Mar 2005 00:33:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Mar 2005 00:33:14 -0000
Received: (qmail 14434 invoked by uid 500); 27 Mar 2005 00:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13625 invoked by uid 500); 27 Mar 2005 00:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13601 invoked by uid 99); 27 Mar 2005 00:33:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from force-elite.com (HELO utopia.in.force-elite.com) (216.255.199.145)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 26 Mar 2005 16:33:08 -0800
X-AuthUser: chip@force-elite.com
Received: from [10.0.0.42] (10.0.0.42:54102)
	by utopia.in.force-elite.com with [XMail 1.17 (Linux/Ix86) ESMTP Server]
	id <SA2A82> for <java-user@lucene.apache.org> from <chip@force-elite.com>;
	Sat, 26 Mar 2005 16:07:18 -0800
Message-ID: <4245F936.6030500@force-elite.com>
Date: Sat, 26 Mar 2005 16:07:18 -0800
From: Paul Querna <chip@force-elite.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Macintosh/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Performanmce of MultiSearcher?
X-Enigmail-Version: 0.89.6.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

I am working on using Lucence based indexes for the ASF's mod_mbox. 
Current versions of mod_mbox support MIME, and I am trying to add full 
text searching. (Then we can completely remove Eyebrowse)

Currently I am hacking around with the C++ (CLucence) Implementation, 
but I intend to migrate to Lucence4c shortly.

I was structuring one Lucence Index per-mailing list.  To search All 
mailing lists, I was planning on using a MultiSearcher.

Currently, the ASF public mail archives use about 17 Gigs, uncompressed, 
in the raw mbox format.

There are also about ~300 mailing lists in the public archives.

Can a multi-searcher quickly search 300 different indexes?  I am 
thinking that it will not.  300 separate indexes is lots of files to 
scan, even if Lucence is fast.  Any experience from other users would be 
helpful.

Would it better to have a Single Main Index, for all of the lists, and 
include the List Names as a keyed field?

I suspect most searches would be restricted to one or two lists, but I 
would like good performance if I wanted to search all of the ASF lists.

Ideas/Comments?  Anyone willing to help me write some C :) ?

Thanks,

-Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Mar 27 03:50:15 2005
Return-Path: <java-user-return-13791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59458 invoked from network); 27 Mar 2005 03:50:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Mar 2005 03:50:15 -0000
Received: (qmail 33969 invoked by uid 500); 27 Mar 2005 03:50:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33942 invoked by uid 500); 27 Mar 2005 03:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33928 invoked by uid 99); 27 Mar 2005 03:50:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from sparta.hostgo.com (HELO sparta.hostgo.com) (66.220.22.162)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 26 Mar 2005 19:50:01 -0800
Received: from [65.19.37.63] (helo=[10.0.1.2])
	by sparta.hostgo.com with esmtpa (Exim 4.44)
	id 1DFOmi-0001Od-SD; Sat, 26 Mar 2005 22:49:57 -0500
Mime-Version: 1.0 (Apple Message framework v619)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4799625E-9E73-11D9-AA19-000A95973046@backspaces.net>
Content-Transfer-Encoding: 7bit
Cc: Stephen Guerin <stephen.guerin@redfish.com>
From: Owen Densmore <owen@backspaces.net>
Subject: PHP-Lucene Integration
Date: Sat, 26 Mar 2005 20:49:54 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619)
X-MailScanner-Information: This email message has been scanned for viruses
X-MailScanner-HostGo: Found to be clean
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - sparta.hostgo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - backspaces.net
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks all for the interesting responses.  Sorry for being a bit late 
in responding!

	-- Owen

Owen Densmore - http://backspaces.net - http://redfish.com - 
owen@backspaces.net

Begin forwarded message:

> From: "Philippe Ombredanne" <pombredanne@nexb.com>
> Subject: RE: PHP-Lucene Integration
>
> Owen,
> very interesting!
> Anything (code) you can share?

Hi Philippe.  We will definitely make our code available.  I suspect, 
however, it is not terribly interesting.  But if simply useful as a 
"case study" that would still be good.

> From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
> Subject: Re: PHP-Lucene Integration
>
> Your implementation and ideas sound very interesting, Owen. Can we see 
> the system anywhere in public (and play with it?)

We'll send a link to the site fairly soon.  We're having our final 
review tomorrow, and should have a good idea when we can let folks look 
at it.

>> We are hoping the institute can afford to have us work on true 
>> clustering techniques such as Carrot2 uses. (Thanks to Dawid and all 
>> the Poznan University folks who's papers were so stimulating!)
>
> You are very welcome. We are also academic, so in the feeling of 
> brotherhood we might help you set up a demo on-line clustering server 
> free of charge. There really is not better clustering technique than 
> the one devised to a particular problem and it seems like you found 
> that niche. Although it's always worth experimenting with other stuff 
> just for the sake of comparison. Just let me know if you're interested 
> (if we  can access the 'feed' of those plain search results I can set 
> up the clustering demo in a few minutes, really).

This would be really great!  Indeed, we'd like to help SFI to be a bit 
more involved with exploring their collection with innovative, research 
oriented methods.

Some of the staff at SFI are excited by DSpace, for example, and we'd 
be interested in helping them explore its use in the lucene/clustering 
context.  That, and their use of Dublin Core for cataloging their 
future work might be of general interest here in the mail list too.

> > We did do a
>> quick LSA SVD on a random set of the papers to see what the 
>> performance (both CPU and good clustering) would be like.  Our 
>> results are encouraging, and I think the frequent phrases approach 
>> would be best for this collection.
>
> It is always going to be challanging if you attempt to cluster the 
> entire collection, you know. I'm (or rather: I will be) working on 
> algorithm's extensions to deal with full text documents.

We're mainly using Abstracts and other meta data (Title, Authors, Key 
phrases, Abstracts, Dates, and so on).  These are reasonably small: 
Abstracts are 150 words on the average over the current 1122 document 
collection.  If we include the title and key phrases, we get 172 
words/doc.

I suspect we could safely limit the abstracts to the first few 
sentences too, getting us to a much smaller number.  Indeed, if we 
tossed the abstracts altogether, and used just titles and key phrases, 
we're down to less than 20 words/doc!  I bet simply using reasonable 
preprocessing we could get small enough "snippets" as to be workable.

> Dawid


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 00:39:04 2005
Return-Path: <java-user-return-13792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75102 invoked from network); 28 Mar 2005 00:39:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 00:39:04 -0000
Received: (qmail 55374 invoked by uid 500); 28 Mar 2005 00:38:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55338 invoked by uid 500); 28 Mar 2005 00:38:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55325 invoked by uid 99); 28 Mar 2005 00:38:57 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.199 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 27 Mar 2005 16:38:56 -0800
Received: by wproxy.gmail.com with SMTP id 50so160637wri
        for <java-user@lucene.apache.org>; Sun, 27 Mar 2005 16:38:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=bEYvHpYUccN8qOwKNFqvjT2YWga8cz++ceUawmGRzPK2SfvfQjKdkFl8ZvrrlWAQav8jbMw34mxiGyA4XNBs3zsaIDJcFWK3eWEgkwfeAXA3/bGRQ8+cJnL43rPl6jezxbCPWEojujE/EmAHi0kXY98yytGGRpXPOItfV5KB9wQ=
Received: by 10.54.38.38 with SMTP id l38mr566167wrl;
        Sun, 27 Mar 2005 16:38:52 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Sun, 27 Mar 2005 16:38:52 -0800 (PST)
Message-ID: <5f4a64610503271638316ec5fe@mail.gmail.com>
Date: Mon, 28 Mar 2005 10:38:52 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Subject: batch delete
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I need to delete a number of documents that are older than a
particular time from a Lucene index. What is the best way to do this?

Thanks,
Ben

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 04:47:39 2005
Return-Path: <java-user-return-13793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25001 invoked from network); 28 Mar 2005 04:47:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 04:47:39 -0000
Received: (qmail 22880 invoked by uid 500); 28 Mar 2005 04:47:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22842 invoked by uid 500); 28 Mar 2005 04:47:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22828 invoked by uid 99); 28 Mar 2005 04:47:31 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31107.mail.mud.yahoo.com (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 27 Mar 2005 20:47:29 -0800
Received: (qmail 824 invoked by uid 60001); 28 Mar 2005 04:47:27 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=YTono0u8rXDOSkEdYFGebKbTGgHx8UlChoUqXpuBgbUTXypabptX5Ex5oo5/UtrjM8lwkzwjM+Lh9DJ7mH+akDuV1uXJPdkscIgNI70Gr83n2RzmRHHyiJIX448h53bMqWnmE+up7JcPTy9AL5TixGUGXPHs1ZJOvWggvQTVqhs=  ;
Message-ID: <20050328044727.822.qmail@web31107.mail.mud.yahoo.com>
Received: from [69.201.128.126] by web31107.mail.mud.yahoo.com via HTTP; Sun, 27 Mar 2005 20:47:27 PST
Date: Sun, 27 Mar 2005 20:47:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Performanmce of MultiSearcher?
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I spoke to one person whose company runs searches over 300 indices with
either MutliSearcher or ParallelMultiSearcher, and apparently this is
not an issue.  I never had to search so many indices at once.  The
person is on this list, so maybe he will speak up and share more of his
experience with this setup.

Otis


--- Paul Querna <chip@force-elite.com> wrote:
> Hello,
> 
> I am working on using Lucence based indexes for the ASF's mod_mbox. 
> Current versions of mod_mbox support MIME, and I am trying to add
> full 
> text searching. (Then we can completely remove Eyebrowse)
> 
> Currently I am hacking around with the C++ (CLucence) Implementation,
> 
> but I intend to migrate to Lucence4c shortly.
> 
> I was structuring one Lucence Index per-mailing list.  To search All 
> mailing lists, I was planning on using a MultiSearcher.
> 
> Currently, the ASF public mail archives use about 17 Gigs,
> uncompressed, 
> in the raw mbox format.
> 
> There are also about ~300 mailing lists in the public archives.
> 
> Can a multi-searcher quickly search 300 different indexes?  I am 
> thinking that it will not.  300 separate indexes is lots of files to 
> scan, even if Lucence is fast.  Any experience from other users would
> be 
> helpful.
> 
> Would it better to have a Single Main Index, for all of the lists,
> and 
> include the List Names as a keyed field?
> 
> I suspect most searches would be restricted to one or two lists, but
> I 
> would like good performance if I wanted to search all of the ASF
> lists.
> 
> Ideas/Comments?  Anyone willing to help me write some C :) ?
> 
> Thanks,
> 
> -Paul
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 07:58:55 2005
Return-Path: <java-user-return-13794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51414 invoked from network); 28 Mar 2005 07:58:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 07:58:51 -0000
Received: (qmail 49919 invoked by uid 500); 28 Mar 2005 07:58:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49072 invoked by uid 500); 28 Mar 2005 07:58:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49059 invoked by uid 99); 28 Mar 2005 07:58:47 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.197 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 27 Mar 2005 23:58:46 -0800
Received: by wproxy.gmail.com with SMTP id 69so200723wra
        for <java-user@lucene.apache.org>; Sun, 27 Mar 2005 23:58:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=X/7+jK3NFf53azEGtgxyeOQ3XXC8FwbdYBiN62sVU1LtpO1+xg2mzAk1OWvfMupFw8/jGJjxXi+Qt++DPrF/ihRG637gvIFV74nGEbw3JH59BMDs1vA9kaZl4aYQRajXb/uHEa9TDCxjsBCcKVWR8CJzj2RVCxEIp81Ra/oMmTg=
Received: by 10.54.33.61 with SMTP id g61mr1077403wrg;
        Sun, 27 Mar 2005 23:58:44 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Sun, 27 Mar 2005 23:58:44 -0800 (PST)
Message-ID: <5f4a646105032723581a721284@mail.gmail.com>
Date: Mon, 28 Mar 2005 17:58:44 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: Lucene <java-user@lucene.apache.org>
Subject: Re: batch delete
In-Reply-To: <5f4a64610503271638316ec5fe@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <5f4a64610503271638316ec5fe@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

BTW is it possible to do what I am trying to achieve without querying
the database or the index?

Thanks,
Ben

On Mon, 28 Mar 2005 10:38:52 +1000, Ben <newreaders@gmail.com> wrote:
> Hi
> 
> I need to delete a number of documents that are older than a
> particular time from a Lucene index. What is the best way to do this?
> 
> Thanks,
> Ben
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 08:09:28 2005
Return-Path: <java-user-return-13795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53415 invoked from network); 28 Mar 2005 08:09:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 08:09:24 -0000
Received: (qmail 57076 invoked by uid 500); 28 Mar 2005 08:09:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57047 invoked by uid 500); 28 Mar 2005 08:09:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57033 invoked by uid 500); 28 Mar 2005 08:09:17 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 57027 invoked by uid 99); 28 Mar 2005 08:09:17 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from outmail.amdocs.com (HELO outmail.amdocs.com) (212.117.152.141)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 00:09:15 -0800
Received: from omail1.amdocs.com (omail.amdocs.com [80.179.114.1])
	by outmail.amdocs.com (8.12.9/8.12.9) with ESMTP id j2S8oMJA024627
	for <lucene-user@jakarta.apache.org>; Mon, 28 Mar 2005 10:50:22 +0200
Received: from tlvmail7.corp.amdocs.com (localhost [127.0.0.1])
	by omail1.amdocs.com (8.12.11/8.12.11) with ESMTP id j2SA8Ova010449
	for <lucene-user@jakarta.apache.org>; Mon, 28 Mar 2005 12:08:24 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5336D.6F21BFC3"
Subject: How Lucene works with DB
Date: Mon, 28 Mar 2005 10:09:15 +0200
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C852A16A6@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How Lucene works with DB
Thread-Index: AcUzbW8VzmxTo0goRxeWDw4LskzzBQ==
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5336D.6F21BFC3
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,
I work with Lucene in file system.
Please give me some links or tips how to work with Lucene and Data Base.
=0D
Thanks in advance

Alex Kiselevski=0D

+9.729.776.4346 (desk)
+9.729.776.1504 (fax)

AMDOCS > INTEGRATED CUSTOMER MANAGEMENT

=0D


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.
------_=_NextPart_001_01C5336D.6F21BFC3--

From java-user-return-13796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 08:13:57 2005
Return-Path: <java-user-return-13796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53893 invoked from network); 28 Mar 2005 08:13:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 08:13:53 -0000
Received: (qmail 60092 invoked by uid 500); 28 Mar 2005 08:13:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60060 invoked by uid 500); 28 Mar 2005 08:13:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60047 invoked by uid 99); 28 Mar 2005 08:13:50 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.196 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 00:13:50 -0800
Received: by rproxy.gmail.com with SMTP id i8so1264244rne
        for <java-user@lucene.apache.org>; Mon, 28 Mar 2005 00:13:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=oK8eflxqMWWBLSPbq7z47kTn4h7S9+AorndMI55SVZoL9lJ23KfjvaggU18op7X1/li2Tb6LdTkO/MYPge1pQIRtj8C0uIVejjDEvd9x3CuqIJRTVD19EeW0P4v5e9VR2qNba4H3bo/UhIUJLwjDPKaOX7ozbNHb7muNk3MnJ8E=
Received: by 10.38.75.67 with SMTP id x67mr2196904rna;
        Mon, 28 Mar 2005 00:13:48 -0800 (PST)
Received: by 10.38.104.11 with HTTP; Mon, 28 Mar 2005 00:13:48 -0800 (PST)
Message-ID: <88c6a672050328001377858136@mail.gmail.com>
Date: Mon, 28 Mar 2005 02:13:48 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: batch delete
In-Reply-To: <5f4a646105032723581a721284@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <5f4a64610503271638316ec5fe@mail.gmail.com>
	 <5f4a646105032723581a721284@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ben,

If you know the exact terms you want to delete, you can do it without querying:

IndexReader reader = IndexReader.open(indexDir);
Term deleteTerm = new Term("yyyymmdd", yyyymmdd);
reader.delete(deleteTerm);

If you are using a lucene date field, I think you'll have to enumerate
through all the dates that you want to delete.  You can use
reader.terms(Term) to get an enumeration of terms.

-chris

On Mon, 28 Mar 2005 17:58:44 +1000, Ben <newreaders@gmail.com> wrote:
> BTW is it possible to do what I am trying to achieve without querying
> the database or the index?
> 
> Thanks,
> Ben
> 
> On Mon, 28 Mar 2005 10:38:52 +1000, Ben <newreaders@gmail.com> wrote:
> > Hi
> >
> > I need to delete a number of documents that are older than a
> > particular time from a Lucene index. What is the best way to do this?
> >
> > Thanks,
> > Ben
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 08:19:57 2005
Return-Path: <java-user-return-13797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73117 invoked from network); 28 Mar 2005 08:19:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 08:19:53 -0000
Received: (qmail 64605 invoked by uid 500); 28 Mar 2005 08:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63758 invoked by uid 500); 28 Mar 2005 08:19:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63745 invoked by uid 99); 28 Mar 2005 08:19:50 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.194 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 00:19:50 -0800
Received: by wproxy.gmail.com with SMTP id 50so218569wri
        for <java-user@lucene.apache.org>; Mon, 28 Mar 2005 00:19:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=hgn2NU1ih5bDCUGGKKT0Vf/aRnIUEs34KOTanYoiIno41vakJg4lvptG9PQHnrxi4NbX4oaSnF+jEskhNLSkAKXy3fUr4QHjs/Ov1a2edDHG3jh3ASq/3RTm0pjIqWBiaIBfdVvZtEnfvDrFYdq5RtGK6iBfHpW3MmNAnymeoFM=
Received: by 10.54.30.77 with SMTP id d77mr2433252wrd;
        Mon, 28 Mar 2005 00:19:46 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Mon, 28 Mar 2005 00:19:46 -0800 (PST)
Message-ID: <5f4a646105032800196d97bd41@mail.gmail.com>
Date: Mon, 28 Mar 2005 18:19:46 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org, Chris Lamprecht <clamprecht@gmail.com>
Subject: Re: batch delete
In-Reply-To: <88c6a672050328001377858136@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <5f4a64610503271638316ec5fe@mail.gmail.com>
	 <5f4a646105032723581a721284@mail.gmail.com>
	 <88c6a672050328001377858136@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

OK, so I have to query for a list of old documents (from a given date)
and delete each document individually?

Can I use DateFilter.Before() with Term?

Thanks,
Ben

On Mon, 28 Mar 2005 02:13:48 -0600, Chris Lamprecht
<clamprecht@gmail.com> wrote:
> Ben,
> 
> If you know the exact terms you want to delete, you can do it without querying:
> 
> IndexReader reader = IndexReader.open(indexDir);
> Term deleteTerm = new Term("yyyymmdd", yyyymmdd);
> reader.delete(deleteTerm);
> 
> If you are using a lucene date field, I think you'll have to enumerate
> through all the dates that you want to delete.  You can use
> reader.terms(Term) to get an enumeration of terms.
> 
> -chris
> 
> On Mon, 28 Mar 2005 17:58:44 +1000, Ben <newreaders@gmail.com> wrote:
> > BTW is it possible to do what I am trying to achieve without querying
> > the database or the index?
> >
> > Thanks,
> > Ben
> >
> > On Mon, 28 Mar 2005 10:38:52 +1000, Ben <newreaders@gmail.com> wrote:
> > > Hi
> > >
> > > I need to delete a number of documents that are older than a
> > > particular time from a Lucene index. What is the best way to do this?
> > >
> > > Thanks,
> > > Ben
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 08:34:19 2005
Return-Path: <java-user-return-13798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81130 invoked from network); 28 Mar 2005 08:34:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 08:34:18 -0000
Received: (qmail 72404 invoked by uid 500); 28 Mar 2005 08:34:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72376 invoked by uid 500); 28 Mar 2005 08:34:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72363 invoked by uid 99); 28 Mar 2005 08:34:11 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.193 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 00:34:09 -0800
Received: by rproxy.gmail.com with SMTP id a36so1889399rnf
        for <java-user@lucene.apache.org>; Mon, 28 Mar 2005 00:34:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=F3cQI2JGq7aL5LtxYUCRNBEvKxnIwfNKGPF4DeYC9z96duk2+iFVQ3FwTXtBG9/J2jiuyC08DgFG6bgTL0zi54SLA0Jvfnh875IYqBya9fRVpHF80rcOhriWDTiRenXOVtp3RPMe4kV5z2nsBRxSYktNsLHTVbgIFxecF4Ez0gQ=
Received: by 10.39.2.36 with SMTP id e36mr4160541rni;
        Mon, 28 Mar 2005 00:34:07 -0800 (PST)
Received: by 10.38.104.11 with HTTP; Mon, 28 Mar 2005 00:34:07 -0800 (PST)
Message-ID: <88c6a672050328003423dffe14@mail.gmail.com>
Date: Mon, 28 Mar 2005 02:34:07 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: batch delete
In-Reply-To: <5f4a646105032800196d97bd41@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <5f4a64610503271638316ec5fe@mail.gmail.com>
	 <5f4a646105032723581a721284@mail.gmail.com>
	 <88c6a672050328001377858136@mail.gmail.com>
	 <5f4a646105032800196d97bd41@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That's one way to do it - do a query, get a list of document IDs, and
then delete that list of doc IDs.

The method I mentioned in my previous message is different - you're
getting a list of all Terms that are in the index.  There will be 1
term for each date (possibly down to the millisecond), which could
point to 1 or more documents (maybe 0 or more -- I'm not sure).  But
using this method, you don't need to know the document IDs; you only
need to know all of the terms you want to delete.

Try something like this code -- (double-check to make sure it's ok to
delete while enumerating over the Terms):

Term first = new Term("foo", "start");
Term last = new Term("foo", "end");
TermEnum terms = reader.terms(first);
while (terms.next() && terms.term().compareTo(last) <= 0) {
   reader.delete(terms.term());
}
reader.close();



On Mon, 28 Mar 2005 18:19:46 +1000, Ben <newreaders@gmail.com> wrote:
> OK, so I have to query for a list of old documents (from a given date)
> and delete each document individually?
> 
> Can I use DateFilter.Before() with Term?
> 
> Thanks,
> Ben
> 
> On Mon, 28 Mar 2005 02:13:48 -0600, Chris Lamprecht
> <clamprecht@gmail.com> wrote:
> > Ben,
> >
> > If you know the exact terms you want to delete, you can do it without querying:
> >
> > IndexReader reader = IndexReader.open(indexDir);
> > Term deleteTerm = new Term("yyyymmdd", yyyymmdd);
> > reader.delete(deleteTerm);
> >
> > If you are using a lucene date field, I think you'll have to enumerate
> > through all the dates that you want to delete.  You can use
> > reader.terms(Term) to get an enumeration of terms.
> >
> > -chris
> >
> > On Mon, 28 Mar 2005 17:58:44 +1000, Ben <newreaders@gmail.com> wrote:
> > > BTW is it possible to do what I am trying to achieve without querying
> > > the database or the index?
> > >
> > > Thanks,
> > > Ben
> > >
> > > On Mon, 28 Mar 2005 10:38:52 +1000, Ben <newreaders@gmail.com> wrote:
> > > > Hi
> > > >
> > > > I need to delete a number of documents that are older than a
> > > > particular time from a Lucene index. What is the best way to do this?
> > > >
> > > > Thanks,
> > > > Ben
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 09:59:18 2005
Return-Path: <java-user-return-13799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94632 invoked from network); 28 Mar 2005 09:59:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 09:59:17 -0000
Received: (qmail 52620 invoked by uid 500); 28 Mar 2005 09:59:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52585 invoked by uid 500); 28 Mar 2005 09:59:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52571 invoked by uid 99); 28 Mar 2005 09:59:10 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.200 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 01:59:08 -0800
Received: by wproxy.gmail.com with SMTP id 50so230077wri
        for <java-user@lucene.apache.org>; Mon, 28 Mar 2005 01:59:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=T7z62LDzAvVwVYigpa3A8t9m575ZpZK6Q+zZrXeMK0VL0TEAwBUZ+f+LJq0W3b15uC/tod1Be7X6g3yxOPX5J9qYknkrKFvJcAzGGOaC1ypNRi+F6dW3sxotA5jx9XOArgVWGktlhUOfbph8OIVocIecpXN/tr3qeADAD+3WDYM=
Received: by 10.54.98.2 with SMTP id v2mr577617wrb;
        Mon, 28 Mar 2005 01:59:06 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Mon, 28 Mar 2005 01:59:06 -0800 (PST)
Message-ID: <5f4a646105032801596cf82b6a@mail.gmail.com>
Date: Mon, 28 Mar 2005 19:59:06 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org, Chris Lamprecht <clamprecht@gmail.com>
Subject: Re: batch delete
In-Reply-To: <88c6a672050328003423dffe14@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <5f4a64610503271638316ec5fe@mail.gmail.com>
	 <5f4a646105032723581a721284@mail.gmail.com>
	 <88c6a672050328001377858136@mail.gmail.com>
	 <5f4a646105032800196d97bd41@mail.gmail.com>
	 <88c6a672050328003423dffe14@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, will investigate your method.

Is there a typo in the javadoc for Term.compareTo(Term other)?

>From javadoc:

Compares two terms, returning an integer which is less than zero iff
this term belongs after the argument, equal zero iff this term is
equal to the argument, and greater than zero iff this term belongs
after the argument.

Shouldn't it be:

Compares two terms, returning an integer which is less than zero if
this term belongs before the argument, equal zero if this term is
equal to the argument, and greater than zero if this term belongs
after the argument

Thanks,
Ben

On Mon, 28 Mar 2005 02:34:07 -0600, Chris Lamprecht
<clamprecht@gmail.com> wrote:
> That's one way to do it - do a query, get a list of document IDs, and
> then delete that list of doc IDs.
> 
> The method I mentioned in my previous message is different - you're
> getting a list of all Terms that are in the index.  There will be 1
> term for each date (possibly down to the millisecond), which could
> point to 1 or more documents (maybe 0 or more -- I'm not sure).  But
> using this method, you don't need to know the document IDs; you only
> need to know all of the terms you want to delete.
> 
> Try something like this code -- (double-check to make sure it's ok to
> delete while enumerating over the Terms):
> 
> Term first = new Term("foo", "start");
> Term last = new Term("foo", "end");
> TermEnum terms = reader.terms(first);
> while (terms.next() && terms.term().compareTo(last) <= 0) {
>    reader.delete(terms.term());
> }
> reader.close();
> 
> On Mon, 28 Mar 2005 18:19:46 +1000, Ben <newreaders@gmail.com> wrote:
> > OK, so I have to query for a list of old documents (from a given date)
> > and delete each document individually?
> >
> > Can I use DateFilter.Before() with Term?
> >
> > Thanks,
> > Ben
> >
> > On Mon, 28 Mar 2005 02:13:48 -0600, Chris Lamprecht
> > <clamprecht@gmail.com> wrote:
> > > Ben,
> > >
> > > If you know the exact terms you want to delete, you can do it without querying:
> > >
> > > IndexReader reader = IndexReader.open(indexDir);
> > > Term deleteTerm = new Term("yyyymmdd", yyyymmdd);
> > > reader.delete(deleteTerm);
> > >
> > > If you are using a lucene date field, I think you'll have to enumerate
> > > through all the dates that you want to delete.  You can use
> > > reader.terms(Term) to get an enumeration of terms.
> > >
> > > -chris
> > >
> > > On Mon, 28 Mar 2005 17:58:44 +1000, Ben <newreaders@gmail.com> wrote:
> > > > BTW is it possible to do what I am trying to achieve without querying
> > > > the database or the index?
> > > >
> > > > Thanks,
> > > > Ben
> > > >
> > > > On Mon, 28 Mar 2005 10:38:52 +1000, Ben <newreaders@gmail.com> wrote:
> > > > > Hi
> > > > >
> > > > > I need to delete a number of documents that are older than a
> > > > > particular time from a Lucene index. What is the best way to do this?
> > > > >
> > > > > Thanks,
> > > > > Ben
> > > > >
> > > >
> > > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 15:34:48 2005
Return-Path: <java-user-return-13800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12277 invoked from network); 28 Mar 2005 15:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 15:34:47 -0000
Received: (qmail 97256 invoked by uid 500); 28 Mar 2005 15:34:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97216 invoked by uid 500); 28 Mar 2005 15:34:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97203 invoked by uid 99); 28 Mar 2005 15:34:40 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31103.mail.mud.yahoo.com (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 28 Mar 2005 07:34:38 -0800
Received: (qmail 30115 invoked by uid 60001); 28 Mar 2005 15:34:35 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=DBK0BdEXVgUrlyvP3DKTmirxAmUCOlUNN1t6H3M07+M8ENuBb32hV7LOfaTrKPxdZCUeyq3aA3mOK1iOPidqSMSeFv0AjWvqj1Xqn1KF4YX8JKOTot/YXFPksJwxQTDX332QvZl/eFLB94qBBjGNaZz9bKbpoaOA7EvpER/O9O0=  ;
Message-ID: <20050328153435.30113.qmail@web31103.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31103.mail.mud.yahoo.com via HTTP; Mon, 28 Mar 2005 07:34:35 PST
Date: Mon, 28 Mar 2005 07:34:35 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: batch delete
To: java-user@lucene.apache.org, Ben <newreaders@gmail.com>
In-Reply-To: <5f4a646105032801596cf82b6a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

iff = if and only if.  Not a typo, but it may be redundant.

Otis

--- Ben <newreaders@gmail.com> wrote:

> Thanks, will investigate your method.
> 
> Is there a typo in the javadoc for Term.compareTo(Term other)?
> 
> From javadoc:
> 
> Compares two terms, returning an integer which is less than zero iff
> this term belongs after the argument, equal zero iff this term is
> equal to the argument, and greater than zero iff this term belongs
> after the argument.
> 
> Shouldn't it be:
> 
> Compares two terms, returning an integer which is less than zero if
> this term belongs before the argument, equal zero if this term is
> equal to the argument, and greater than zero if this term belongs
> after the argument
> 
> Thanks,
> Ben
> 
> On Mon, 28 Mar 2005 02:34:07 -0600, Chris Lamprecht
> <clamprecht@gmail.com> wrote:
> > That's one way to do it - do a query, get a list of document IDs,
> and
> > then delete that list of doc IDs.
> > 
> > The method I mentioned in my previous message is different - you're
> > getting a list of all Terms that are in the index.  There will be 1
> > term for each date (possibly down to the millisecond), which could
> > point to 1 or more documents (maybe 0 or more -- I'm not sure). 
> But
> > using this method, you don't need to know the document IDs; you
> only
> > need to know all of the terms you want to delete.
> > 
> > Try something like this code -- (double-check to make sure it's ok
> to
> > delete while enumerating over the Terms):
> > 
> > Term first = new Term("foo", "start");
> > Term last = new Term("foo", "end");
> > TermEnum terms = reader.terms(first);
> > while (terms.next() && terms.term().compareTo(last) <= 0) {
> >    reader.delete(terms.term());
> > }
> > reader.close();
> > 
> > On Mon, 28 Mar 2005 18:19:46 +1000, Ben <newreaders@gmail.com>
> wrote:
> > > OK, so I have to query for a list of old documents (from a given
> date)
> > > and delete each document individually?
> > >
> > > Can I use DateFilter.Before() with Term?
> > >
> > > Thanks,
> > > Ben
> > >
> > > On Mon, 28 Mar 2005 02:13:48 -0600, Chris Lamprecht
> > > <clamprecht@gmail.com> wrote:
> > > > Ben,
> > > >
> > > > If you know the exact terms you want to delete, you can do it
> without querying:
> > > >
> > > > IndexReader reader = IndexReader.open(indexDir);
> > > > Term deleteTerm = new Term("yyyymmdd", yyyymmdd);
> > > > reader.delete(deleteTerm);
> > > >
> > > > If you are using a lucene date field, I think you'll have to
> enumerate
> > > > through all the dates that you want to delete.  You can use
> > > > reader.terms(Term) to get an enumeration of terms.
> > > >
> > > > -chris
> > > >
> > > > On Mon, 28 Mar 2005 17:58:44 +1000, Ben <newreaders@gmail.com>
> wrote:
> > > > > BTW is it possible to do what I am trying to achieve without
> querying
> > > > > the database or the index?
> > > > >
> > > > > Thanks,
> > > > > Ben
> > > > >
> > > > > On Mon, 28 Mar 2005 10:38:52 +1000, Ben
> <newreaders@gmail.com> wrote:
> > > > > > Hi
> > > > > >
> > > > > > I need to delete a number of documents that are older than
> a
> > > > > > particular time from a Lucene index. What is the best way
> to do this?
> > > > > >
> > > > > > Thanks,
> > > > > > Ben
> > > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 16:19:38 2005
Return-Path: <java-user-return-13801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27250 invoked from network); 28 Mar 2005 16:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 16:19:37 -0000
Received: (qmail 74707 invoked by uid 500); 28 Mar 2005 16:19:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74681 invoked by uid 500); 28 Mar 2005 16:19:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74668 invoked by uid 99); 28 Mar 2005 16:19:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 08:19:31 -0800
Received: from [192.168.1.100] ([::ffff:66.124.226.175])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Mon, 28 Mar 2005 10:19:29 -0600
  id 00074178.42482E91.00004A6A
Message-ID: <42482E87.9020802@allthingslocal.com>
Date: Mon, 28 Mar 2005 08:19:19 -0800
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: batch delete
References: <20050328153435.30113.qmail@web31103.mail.mud.yahoo.com>
In-Reply-To: <20050328153435.30113.qmail@web31103.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic writes (3/28/2005 7:34 AM):

>iff = if and only if.  Not a typo, but it may be redundant.
>  
>
Definitely not a typo, but also definitely redundant since the integers 
are partitioned into before-zero, zero and after-zero.

However, nobody seems to have noticed the other change below.  Ben is 
asking whether the polarity is opposite (look at after<-->before).

Chuck

>--- Ben <newreaders@gmail.com> wrote:
>  
>
>>Is there a typo in the javadoc for Term.compareTo(Term other)?
>>
>>>From javadoc:
>>
>>Compares two terms, returning an integer which is less than zero iff
>>this term belongs after the argument, equal zero iff this term is
>>equal to the argument, and greater than zero iff this term belongs
>>after the argument.
>>
>>Shouldn't it be:
>>
>>Compares two terms, returning an integer which is less than zero if
>>this term belongs before the argument, equal zero if this term is
>>equal to the argument, and greater than zero if this term belongs
>>after the argument
>>
>>    
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 18:46:32 2005
Return-Path: <java-user-return-13802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69548 invoked from network); 28 Mar 2005 18:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 18:46:32 -0000
Received: (qmail 93169 invoked by uid 500); 28 Mar 2005 18:46:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93146 invoked by uid 500); 28 Mar 2005 18:46:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93131 invoked by uid 99); 28 Mar 2005 18:46:24 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of sushil.sureka@gmail.com designates 64.233.184.198 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 10:46:23 -0800
Received: by wproxy.gmail.com with SMTP id 58so388775wri
        for <java-user@lucene.apache.org>; Mon, 28 Mar 2005 10:46:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZTkDB0zQM20GgpoVwA4q5wKXu5WhvIdlPIIhxf4XbtsEEcUxQBCUHBdAB4C/LerIuGkyao80HJCb/JwMMIjxskcoYR03QBWRxmxgnheM2cR2/yZRyV5yGqW3Pqu1/dy6lVWHXnXLQkMu9/NcDcZiBPLOgTDtXI8AKgXsOF7oZcw=
Received: by 10.54.39.4 with SMTP id m4mr1757930wrm;
        Mon, 28 Mar 2005 10:46:16 -0800 (PST)
Received: by 10.54.14.27 with HTTP; Mon, 28 Mar 2005 10:46:16 -0800 (PST)
Message-ID: <c831003005032810467db823fb@mail.gmail.com>
Date: Mon, 28 Mar 2005 12:46:16 -0600
From: Sushil Sureka <sushil.sureka@gmail.com>
Reply-To: Sushil Sureka <sushil.sureka@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: File name searching
In-Reply-To: <c8310030050328104362b3959d@mail.gmail.com>
Mime-Version: 1.0
Content-Type: multipart/mixed; 
	boundary="----=_Part_1831_17576981.1112035576912"
References: <c8310030050328104362b3959d@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1831_17576981.1112035576912
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I am trying to learn Lucene by going through tutorials and article. I
took  a sample program and modified it a little to index all the file
names on my local file system to allow me to search for a file
quickly.

I am not sure what's happening, for some file names the search is
working where as for others it does not work. I had let the program
run all the way to the end meaning I am sure it should have indexed
all the files on my local hard drive. Is there a way to debug the
issue in any way. The sample programs are attached.

--
Thanks
Sushil




-- 
Thanks
Sushil

------=_Part_1831_17576981.1112035576912
Content-Type: text/x-java; name=FileDocument.java; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="FileDocument.java"


import java.io.File;
import java.io.Reader;
import java.io.FileInputStream;
import java.io.BufferedReader;
import java.io.InputStreamReader;

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.DateField;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.*;

/** A utility for making Lucene Documents from a File. */

public class FileDocument {

    public static Document Document(File f)
            throws java.io.FileNotFoundException {

        // make a new, empty document
        Document doc = new Document();

        doc.add(Field.Text("path", f.getPath()));
        doc.add(Field.Text("filename", f.getName()));

        return doc;
    }

    private FileDocument() {
    }
}



------=_Part_1831_17576981.1112035576912
Content-Type: text/x-java; name=FileNameIndexer.java; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="FileNameIndexer.java"


import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Date;

import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.index.IndexWriter;

class FileNameIndexer {
  public static void main(String[] args) throws IOException {
    String usage = "java " + FileNameIndexer.class + " <root_directory>";
    if (args.length == 0) {
      System.err.println("Usage: " + usage);
      System.exit(1);
    }

    Date start = new Date();
    try {
      IndexWriter writer = new IndexWriter("filepath", new WhitespaceAnalyzer(), true);
      indexDocs(writer, new File(args[0]));

      writer.optimize();
      writer.close();

      Date end = new Date();

      System.out.print(end.getTime() - start.getTime());
      System.out.println(" total milliseconds");

    } catch (IOException e) {
      System.out.println(" caught a " + e.getClass() +
       "\n with message: " + e.getMessage());
    }
  }

  public static void indexDocs(IndexWriter writer, File file)
    throws IOException {
    // do not try to index files that cannot be read
    if (file.canRead()) {
      if (file.isDirectory()) {
        String[] files = file.list();
        // an IO error could occur
        if (files != null) {
          for (int i = 0; i < files.length; i++) {
            indexDocs(writer, new File(file, files[i]));
          }
        }
      } else {
        try {
          writer.addDocument(FileDocument.Document(file));
        }
        // at least on windows, some temporary files raise this exception with an "access denied" message
        // checking if the file can be read doesn't help
        catch (FileNotFoundException fnfe) {
          ;
        }
      }
    }
  }
}


------=_Part_1831_17576981.1112035576912
Content-Type: text/x-java; name=SearchFileName.java; charset=us-ascii
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="SearchFileName.java"


import java.io.BufferedReader;
import java.io.InputStreamReader;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.WhitespaceAnalyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.index.Term;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.*;

class SearchFileName {
    public static void main(String[] args) {
        try {
            Searcher searcher = new IndexSearcher("filepath");
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    System.in));
            while (true) {
                System.out.print("filename: ");
                String line = in.readLine();

                if (line.length() == -1)
                    break;

                System.out.println("line <<" + line + ">>");
                // Query query = new WildcardQuery(new Term("filename", line));
                Query query = QueryParser.parse(line, "filename", new StandardAnalyzer());

                Hits hits = searcher.search(query);
                System.out.println(hits.length() + " total matching documents");

                final int HITS_PER_PAGE = 10;
                for (int start = 0; start < hits.length(); start += HITS_PER_PAGE) {
                    int end = Math.min(hits.length(), start + HITS_PER_PAGE);
                    for (int i = start; i < end; i++) {
                        Document doc = hits.doc(i);
                        String path = doc.get("path");
                        if (path != null) {
                            System.out.println(i + ". " + path);
                        } else {
                            System.out.println("file not found");
                        }
                    }
                    if (hits.length() > end) {
                        System.out.print("more (y/n) ? ");
                        line = in.readLine();
                        if (line.length() == 0 || line.charAt(0) == 'n')
                            break;
                    }
                }
                if(hits.length() == 0)
                  System.out.println("file " + line + "  not found");	        	      


            }
            searcher.close();

        } catch (Exception e) {
            e.printStackTrace();
            System.out.println(" caught a " + e.getClass()
                    + "\n with message: " + e.getMessage());
        }
    }
}


------=_Part_1831_17576981.1112035576912
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_Part_1831_17576981.1112035576912--

From java-user-return-13803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Mar 28 19:13:57 2005
Return-Path: <java-user-return-13803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75162 invoked from network); 28 Mar 2005 19:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Mar 2005 19:13:56 -0000
Received: (qmail 29259 invoked by uid 500); 28 Mar 2005 19:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29226 invoked by uid 500); 28 Mar 2005 19:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29206 invoked by uid 99); 28 Mar 2005 19:13:48 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31101.mail.mud.yahoo.com (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 28 Mar 2005 11:13:47 -0800
Received: (qmail 74893 invoked by uid 60001); 28 Mar 2005 19:13:44 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=zOIK6Wyxe5bYOsb6D/3gSzUT1ApfuKIDlkXDAQb4JDYYDL/ES7bulSqVB7I7rOkwm9kaz2YhnMyHfLLN89MSlmzfIeESBMx0r9OsJcWlnbAR5iJ0UWWkB5lfsL0B6u6fcE00eze6TlKZ938DE72dMWTZhBUWG+NxvGlYVVh7LIk=  ;
Message-ID: <20050328191344.74890.qmail@web31101.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31101.mail.mud.yahoo.com via HTTP; Mon, 28 Mar 2005 11:13:44 PST
Date: Mon, 28 Mar 2005 11:13:44 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Fwd: File name searching
To: java-user@lucene.apache.org, Sushil Sureka <sushil.sureka@gmail.com>
In-Reply-To: <c831003005032810467db823fb@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Super-cursory look over the code... the following doesn't look good:

        try {
          writer.addDocument(FileDocument.Document(file));
        }
        // at least on windows, some temporary files raise this 
exception with an "access denied" message
        // checking if the file can be read doesn't help
        catch (FileNotFoundException fnfe) {
          ;
        }

Who knows, maybe some files are skipped here.  Code that comes with
Lucene in Action includes a working file indexer application.  You can
get the code from lucenebook.com.

Otis


--- Sushil Sureka <sushil.sureka@gmail.com> wrote:

> I am trying to learn Lucene by going through tutorials and article. I
> took  a sample program and modified it a little to index all the file
> names on my local file system to allow me to search for a file
> quickly.
> 
> I am not sure what's happening, for some file names the search is
> working where as for others it does not work. I had let the program
> run all the way to the end meaning I am sure it should have indexed
> all the files on my local hard drive. Is there a way to debug the
> issue in any way. The sample programs are attached.
> 
> --
> Thanks
> Sushil
> 
> 
> 
> 
> -- 
> Thanks
> Sushil
> > 
> import java.io.File;
> import java.io.Reader;
> import java.io.FileInputStream;
> import java.io.BufferedReader;
> import java.io.InputStreamReader;
> 
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.document.DateField;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.*;
> 
> /** A utility for making Lucene Documents from a File. */
> 
> public class FileDocument {
> 
>     public static Document Document(File f)
>             throws java.io.FileNotFoundException {
> 
>         // make a new, empty document
>         Document doc = new Document();
> 
>         doc.add(Field.Text("path", f.getPath()));
>         doc.add(Field.Text("filename", f.getName()));
> 
>         return doc;
>     }
> 
>     private FileDocument() {
>     }
> }
> 
> 
> > 
> import java.io.File;
> import java.io.FileNotFoundException;
> import java.io.IOException;
> import java.util.Date;
> 
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.index.IndexWriter;
> 
> class FileNameIndexer {
>   public static void main(String[] args) throws IOException {
>     String usage = "java " + FileNameIndexer.class + "
> <root_directory>";
>     if (args.length == 0) {
>       System.err.println("Usage: " + usage);
>       System.exit(1);
>     }
> 
>     Date start = new Date();
>     try {
>       IndexWriter writer = new IndexWriter("filepath", new
> WhitespaceAnalyzer(), true);
>       indexDocs(writer, new File(args[0]));
> 
>       writer.optimize();
>       writer.close();
> 
>       Date end = new Date();
> 
>       System.out.print(end.getTime() - start.getTime());
>       System.out.println(" total milliseconds");
> 
>     } catch (IOException e) {
>       System.out.println(" caught a " + e.getClass() +
>        "\n with message: " + e.getMessage());
>     }
>   }
> 
>   public static void indexDocs(IndexWriter writer, File file)
>     throws IOException {
>     // do not try to index files that cannot be read
>     if (file.canRead()) {
>       if (file.isDirectory()) {
>         String[] files = file.list();
>         // an IO error could occur
>         if (files != null) {
>           for (int i = 0; i < files.length; i++) {
>             indexDocs(writer, new File(file, files[i]));
>           }
>         }
>       } else {
>         try {
>           writer.addDocument(FileDocument.Document(file));
>         }
>         // at least on windows, some temporary files raise this
> exception with an "access denied" message
>         // checking if the file can be read doesn't help
>         catch (FileNotFoundException fnfe) {
>           ;
>         }
>       }
>     }
>   }
> }
> 
> > 
> import java.io.BufferedReader;
> import java.io.InputStreamReader;
> 
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.WhitespaceAnalyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.search.*;
> 
> class SearchFileName {
>     public static void main(String[] args) {
>         try {
>             Searcher searcher = new IndexSearcher("filepath");
>             BufferedReader in = new BufferedReader(new
> InputStreamReader(
>                     System.in));
>             while (true) {
>                 System.out.print("filename: ");
>                 String line = in.readLine();
> 
>                 if (line.length() == -1)
>                     break;
> 
>                 System.out.println("line <<" + line + ">>");
>                 // Query query = new WildcardQuery(new
> Term("filename", line));
>                 Query query = QueryParser.parse(line, "filename", new
> StandardAnalyzer());
> 
>                 Hits hits = searcher.search(query);
>                 System.out.println(hits.length() + " total matching
> documents");
> 
>                 final int HITS_PER_PAGE = 10;
>                 for (int start = 0; start < hits.length(); start +=
> HITS_PER_PAGE) {
>                     int end = Math.min(hits.length(), start +
> HITS_PER_PAGE);
>                     for (int i = start; i < end; i++) {
>                         Document doc = hits.doc(i);
>                         String path = doc.get("path");
>                         if (path != null) {
>                             System.out.println(i + ". " + path);
>                         } else {
>                             System.out.println("file not found");
>                         }
>                     }
>                     if (hits.length() > end) {
>                         System.out.print("more (y/n) ? ");
>                         line = in.readLine();
>                         if (line.length() == 0 || line.charAt(0) ==
> 'n')
>                             break;
>                     }
>                 }
>                 if(hits.length() == 0)
>                   System.out.println("file " + line + "  not found");
>         	      
> 
> 
>             }
>             searcher.close();
> 
>         } catch (Exception e) {
>             e.printStackTrace();
>             System.out.println(" caught a " + e.getClass()
>                     + "\n with message: " + e.getMessage());
>         }
>     }
> }
> 
> >
---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 29 03:41:18 2005
Return-Path: <java-user-return-13804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6644 invoked from network); 29 Mar 2005 03:41:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Mar 2005 03:41:18 -0000
Received: (qmail 4740 invoked by uid 500); 29 Mar 2005 03:41:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4705 invoked by uid 500); 29 Mar 2005 03:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4688 invoked by uid 99); 29 Mar 2005 03:41:14 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of newreaders@gmail.com designates 64.233.184.202 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 28 Mar 2005 19:41:13 -0800
Received: by wproxy.gmail.com with SMTP id 50so444608wri
        for <java-user@lucene.apache.org>; Mon, 28 Mar 2005 19:41:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=ZdrOcmZh5+19y7mfQtafY2ZvJGkh3cbmNhtkKBNsZVqJ4KhGoZlcO0/SL+CoHU/J0p9sfiZf9RRk9AE0+LuXCcN9gFn3ikB8z1e54Ke/TFawgH57Fi3d1CvSJYLl9YuN7uArJaAqELRmVIOhluWsTZ7nj9Wcs1wAP/0JP/hN1N4=
Received: by 10.54.38.79 with SMTP id l79mr185367wrl;
        Mon, 28 Mar 2005 19:41:08 -0800 (PST)
Received: by 10.54.23.39 with HTTP; Mon, 28 Mar 2005 19:41:02 -0800 (PST)
Message-ID: <5f4a646105032819417a2feb2a@mail.gmail.com>
Date: Tue, 29 Mar 2005 13:41:02 +1000
From: Ben <newreaders@gmail.com>
Reply-To: Ben <newreaders@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: batch delete
In-Reply-To: <42482E87.9020802@allthingslocal.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <20050328153435.30113.qmail@web31103.mail.mud.yahoo.com>
	 <42482E87.9020802@allthingslocal.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Cheers, I didn't know iff = if and only if. :)

My question was mainly about the polarity.

Thanks,
Ben

On Mon, 28 Mar 2005 08:19:19 -0800, Chuck Williams
<chuck@allthingslocal.com> wrote:
> Otis Gospodnetic writes (3/28/2005 7:34 AM):
> 
> >iff = if and only if.  Not a typo, but it may be redundant.
> >
> >
> Definitely not a typo, but also definitely redundant since the integers
> are partitioned into before-zero, zero and after-zero.
> 
> However, nobody seems to have noticed the other change below.  Ben is
> asking whether the polarity is opposite (look at after<-->before).
> 
> Chuck
> 
> >--- Ben <newreaders@gmail.com> wrote:
> >
> >
> >>Is there a typo in the javadoc for Term.compareTo(Term other)?
> >>
> >>From javadoc:
> >>
> >>Compares two terms, returning an integer which is less than zero iff
> >>this term belongs after the argument, equal zero iff this term is
> >>equal to the argument, and greater than zero iff this term belongs
> >>after the argument.
> >>
> >>Shouldn't it be:
> >>
> >>Compares two terms, returning an integer which is less than zero if
> >>this term belongs before the argument, equal zero if this term is
> >>equal to the argument, and greater than zero if this term belongs
> >>after the argument
> >>
> >>
> >>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 29 09:21:48 2005
Return-Path: <java-user-return-13805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14765 invoked from network); 29 Mar 2005 09:21:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Mar 2005 09:21:48 -0000
Received: (qmail 42531 invoked by uid 500); 29 Mar 2005 09:21:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42502 invoked by uid 500); 29 Mar 2005 09:21:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42488 invoked by uid 99); 29 Mar 2005 09:21:41 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=SPF_HELO_PASS,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (hermes.apache.org: transitioning domain of lucenelist@danielnaber.de does not designate 80.67.18.13 as permitted sender)
Received: from smtprelay01.ispgateway.de (HELO smtprelay01.ispgateway.de) (80.67.18.13)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 01:21:40 -0800
Received: (qmail 4782 invoked from network); 29 Mar 2005 09:21:36 -0000
Received: from unknown (HELO pD9FCBB91.dip.t-dialin.net) ([pbs]937788@[217.252.187.145])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with SMTP
          for <java-user@lucene.apache.org>; 29 Mar 2005 09:21:36 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: batch delete
User-Agent: KMail/1.8
References: <5f4a64610503271638316ec5fe@mail.gmail.com> <88c6a672050328003423dffe14@mail.gmail.com> <5f4a646105032801596cf82b6a@mail.gmail.com>
In-Reply-To: <5f4a646105032801596cf82b6a@mail.gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
Date: Tue, 29 Mar 2005 11:22:33 +0200
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200503291122.33487@danielnaber.de>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 28 March 2005 11:59, Ben wrote:

> Is there a typo in the javadoc for Term.compareTo(Term other)?

Thanks --the before/after issue has been fixed in SVN some time ago 
already, I just also fixed the iff -> if.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 29 12:33:38 2005
Return-Path: <java-user-return-13806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80913 invoked from network); 29 Mar 2005 12:33:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Mar 2005 12:33:38 -0000
Received: (qmail 84157 invoked by uid 500); 29 Mar 2005 12:33:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84125 invoked by uid 500); 29 Mar 2005 12:33:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84111 invoked by uid 99); 29 Mar 2005 12:33:31 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 04:33:30 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id A050445BF8
	for <java-user@lucene.apache.org>; Tue, 29 Mar 2005 15:33:27 +0300 (EEST)
Message-ID: <42494B17.9060108@i-hypergrid.com>
Date: Tue, 29 Mar 2005 15:33:27 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Result grouping
Content-Type: text/plain; charset=windows-1251; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All.

In my index documents have field named "group". I need to show result of 
search in form of "N items found in M groups", where <N> is a number of 
total hits found and <M> is a number of different groups according to 
"group" field.

Does anybody has an idea to to achieve this.
P.S. It have to be fast enough, because it will be used in incremental 
search.

Thanks for answer.

Regards,
Volodymyr Bychkoviak.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 29 14:51:17 2005
Return-Path: <java-user-return-13807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49646 invoked from network); 29 Mar 2005 14:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Mar 2005 14:51:17 -0000
Received: (qmail 13202 invoked by uid 500); 29 Mar 2005 14:51:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13180 invoked by uid 500); 29 Mar 2005 14:51:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13167 invoked by uid 99); 29 Mar 2005 14:51:10 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from plesk2.axarnet.com (HELO plesk1.axarnet.com) (213.200.101.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 06:51:08 -0800
Received: (qmail 19785 invoked from network); 29 Mar 2005 14:51:02 -0000
Received: from 172.red-217-127-83.pooles.rima-tde.net (HELO XerAcer803) (217.127.83.172)
  by ip.grupoibc.com with SMTP; 29 Mar 2005 14:51:02 -0000
From: "Carlos Franco Robles" <carlos.franco@xeridia.com>
To: <java-user@lucene.apache.org>
Subject: Implementing security in search
Date: Tue, 29 Mar 2005 16:54:54 +0200
Message-ID: <003701c5346f$44dbd900$0b01a8c0@XerAcer803>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0038_01C53480.0864A900"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0038_01C53480.0864A900
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi! I need to implement security in search. When I'm indexing contents, 
I set a field with the roles assigned to that particular content. The 
problem is that a content should be retrieved from a search only if the 
user has *all* the roles assigned to the indexed content, not just one 
(in that case it would be easy). So, for example, if a content has the 
roles Role1, Role2 and Role3, and the user only has Role1 and Role3, the

content should not be retrieved. The set of roles available to both 
contents and users is not fixed. So far I haven't seen an easy way to do

that in Lucene. Any idea?
 
Thanks in advance.
 

------=_NextPart_000_0038_01C53480.0864A900--


From java-user-return-13808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 29 15:08:37 2005
Return-Path: <java-user-return-13808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54234 invoked from network); 29 Mar 2005 15:08:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Mar 2005 15:08:37 -0000
Received: (qmail 48418 invoked by uid 500); 29 Mar 2005 15:08:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48390 invoked by uid 500); 29 Mar 2005 15:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48377 invoked by uid 99); 29 Mar 2005 15:08:31 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from uar.spline-software.com (HELO stargate.i-hypergrid.com) (194.44.193.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 07:08:29 -0800
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by stargate.i-hypergrid.com (Postfix) with ESMTP id BD1EF177349
	for <java-user@lucene.apache.org>; Tue, 29 Mar 2005 18:08:21 +0300 (EEST)
Message-ID: <42496F64.1090907@i-hypergrid.com>
Date: Tue, 29 Mar 2005 18:08:20 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Implementing security in search
References: <003701c5346f$44dbd900$0b01a8c0@XerAcer803>
In-Reply-To: <003701c5346f$44dbd900$0b01a8c0@XerAcer803>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

maybe it is not the best solution, but

you can form restriction clause like (+allowedRole1 +allowedRole2 
+allowedRole2 -forbiddenRole1 -forbiddenRole2 ... -forbiddenRoleN)

where (forbiddenRole1 ... forbiddenRoleN)  are all posible roles except 
allowed roles.

regards,
Volodymyr Bychkoviak


Carlos Franco Robles wrote:

>Hi! I need to implement security in search. When I'm indexing contents, 
>I set a field with the roles assigned to that particular content. The 
>problem is that a content should be retrieved from a search only if the 
>user has *all* the roles assigned to the indexed content, not just one 
>(in that case it would be easy). So, for example, if a content has the 
>roles Role1, Role2 and Role3, and the user only has Role1 and Role3, the
>
>content should not be retrieved. The set of roles available to both 
>contents and users is not fixed. So far I haven't seen an easy way to do
>
>that in Lucene. Any idea?
> 
>Thanks in advance.
> 
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 29 18:33:46 2005
Return-Path: <java-user-return-13809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32853 invoked from network); 29 Mar 2005 18:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Mar 2005 18:33:46 -0000
Received: (qmail 85013 invoked by uid 500); 29 Mar 2005 18:33:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84926 invoked by uid 500); 29 Mar 2005 18:33:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84864 invoked by uid 99); 29 Mar 2005 18:33:36 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 10:33:36 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DE8AE5B783; Tue, 29 Mar 2005 10:33:31 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DC13C7F459
	for <java-user@lucene.apache.org>; Tue, 29 Mar 2005 10:33:31 -0800 (PST)
Date: Tue, 29 Mar 2005 10:33:31 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Implementing security in search
In-Reply-To: <42496F64.1090907@i-hypergrid.com>
Message-ID: <Pine.LNX.4.58.0503291022450.27883@hal.rescomp.berkeley.edu>
References: <003701c5346f$44dbd900$0b01a8c0@XerAcer803> <42496F64.1090907@i-hypergrid.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: maybe it is not the best solution, but
:
: you can form restriction clause like (+allowedRole1 +allowedRole2
: +allowedRole2 -forbiddenRole1 -forbiddenRole2 ... -forbiddenRoleN)
:
: where (forbiddenRole1 ... forbiddenRoleN)  are all posible roles except
: allowed roles.

One catch there is that you don't acctually want "+" on the allowed roles,
because the person might have more roles then the document requires.

In fact, I don't think you really need the "allowed roles" clauses at all
-- just generate the list of all roles the user does *NOT* have and make
negative clauses for them.

You mentioned that the list of roles is not fixed, so that may sound hard,
but thatns to the wonders of "IndexReader.terms(Term t)" it's trivial to
get Lucene to tell you the list of all Terms in the index for the a
specific field.

The only other suggestion I would make, is that instead of building up
the list of "forbidden roles" as a additional query clauses, you might
consider using the ChainedFilter class in the sandbox ...

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/sandbox/contributions/miscellaneous/src/java/org/apache/lucene/misc/ChainedFilter.java?rev=151018&view=markup

(you'll have to wrap it in a simple "NotFilter" since you want the
negetion, but thta's fairly straight forward)

: >Hi! I need to implement security in search. When I'm indexing contents,
: >I set a field with the roles assigned to that particular content. The
: >problem is that a content should be retrieved from a search only if the
: >user has *all* the roles assigned to the indexed content, not just one
: >(in that case it would be easy). So, for example, if a content has the
: >roles Role1, Role2 and Role3, and the user only has Role1 and Role3, the
: >
: >content should not be retrieved. The set of roles available to both
: >contents and users is not fixed. So far I haven't seen an easy way to do
: >
: >that in Lucene. Any idea?


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Mar 29 21:15:36 2005
Return-Path: <java-user-return-13810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24822 invoked from network); 29 Mar 2005 21:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Mar 2005 21:15:36 -0000
Received: (qmail 32575 invoked by uid 500); 29 Mar 2005 21:15:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32167 invoked by uid 500); 29 Mar 2005 21:15:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32153 invoked by uid 99); 29 Mar 2005 21:15:32 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.201 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 13:15:31 -0800
Received: by rproxy.gmail.com with SMTP id 1so95717rny
        for <java-user@lucene.apache.org>; Tue, 29 Mar 2005 13:15:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=jC/ZNcuqEi31sVJaqX/Pq9/KgR2Oek3KtWvSk8vqmqm51//jTOystDsRDCul7/o185QUSxXsal6cJ+3OAaxIt+d+ny3sMj4uaQNE62B02AIYCvPiE3jKZUZnxHD758hWVvNJlbUme4cCRW48v3q9rRfg0P69jru/8O995JhProk=
Received: by 10.38.25.3 with SMTP id 3mr435396rny;
        Tue, 29 Mar 2005 13:15:29 -0800 (PST)
Received: by 10.38.206.76 with HTTP; Tue, 29 Mar 2005 13:15:29 -0800 (PST)
Message-ID: <8837fb77050329131533592428@mail.gmail.com>
Date: Tue, 29 Mar 2005 13:15:29 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: how to detect index integrity?
In-Reply-To: <3F227B042654B049A3C1B7B10FF65A0814F02F@exchange.inside.eclyptic.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <3F227B042654B049A3C1B7B10FF65A0814F02F@exchange.inside.eclyptic.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Ravi:

    I'd like to use this too. Do you have an update on this?

Thanks

-John


On Fri, 25 Mar 2005 07:28:17 -0600, Ravi Rao <rrao@alterpoint.com> wrote:
> > From: chris.lu@gmail.com
> > Sent: Fri 3/25/2005 2:19 AM
> 
> > I used your NullDirectory.java, and found it works fine for smaller
> > indexes, but when it comes to larger indexes(I am not quite sure, just
> > observation), it always throws this exception at here:
> 
> > [ ... code and stack trace moved to end of mail ...]
> 
> Chris,
> 
> The call to addIndexes results in the target directory (in this case
> an instance of NullDirectory) being optimized twice.  Your stacktrace
> shows that it is the second call to optimize that is the problem.  I
> assume this is 'lucene-1.4-final'.
> 
> I will get to this as soon as I can.  Thanks for taking the time to
> send me this information.
> --
> Ravi/
> -----------------------------------------------------------
> 
> private void refill() throws IOException {
>     long start = bufferStart + bufferPosition;
>     long end = start + BUFFER_SIZE;
>     if (end > length)                  // don't read past EOF
>       end = length;
>     bufferLength = (int)(end - start);
>     if (bufferLength == 0)
>       throw new IOException("read past EOF");
>    ....
> 
> The print out and stack trace are:
> merging segments _2io (50 docs) _2k3 (50 docs) _2li (50 docs) _2mx (50 docs) _2oc (50 docs) _2pr (50 docs) _2r6 (50 docs) _2sl (50 docs) _2u0 (50 docs) _2u4 (3 docs) into _0 (453 docs)
> merging segments _25x (50 docs) _27c (50 docs) _28r (50 docs) _2a6 (50 docs) _2bl (50 docs) _2d0 (50 docs) _2ef (50 docs) _2fu (50 docs) _2h9 (50 docs) _0 (453 docs)ERROR 44|java.io.IOException: read past EOF|...
> java.io.IOException: read past EOF
>     at org.apache.lucene.store.InputStream.refill(InputStream.java:154)
>     at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
>     at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
>     at org.apache.lucene.index.CompoundFileReader.<init>(CompoundFileReader.java:66)
>     at org.apache.lucene.index.SegmentReader.initialize(SegmentReader.java:104)
>     at org.apache.lucene.index.SegmentReader.<init>(SegmentReader.java:94)
>     at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:480)
>     at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>     at org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:389)
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 00:01:23 2005
Return-Path: <java-user-return-13811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88860 invoked from network); 30 Mar 2005 00:01:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 00:01:23 -0000
Received: (qmail 57066 invoked by uid 500); 30 Mar 2005 00:01:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57021 invoked by uid 500); 30 Mar 2005 00:01:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57007 invoked by uid 99); 30 Mar 2005 00:01:19 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of antony.sequeira@gmail.com designates 64.233.184.206 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 16:01:18 -0800
Received: by wproxy.gmail.com with SMTP id 36so1003580wra
        for <java-user@lucene.apache.org>; Tue, 29 Mar 2005 16:01:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=hpoVneOMSeI0QdLSYeapaVlXKfq6RTN0A06ee8V1U09gKF6itzC+zyia5U0arIkFsyrNbBLZLDol3IsnxN2L9nhEwcV8T3v4eKW/5Wu721u0bxyhmXmbl6VENWZTtXTiNMLsyfKNdiCxLa07EwsxnY9QWuX4Xdcis70xWxjl6uQ=
Received: by 10.54.45.12 with SMTP id s12mr349306wrs;
        Tue, 29 Mar 2005 16:01:16 -0800 (PST)
Received: by 10.54.8.54 with HTTP; Tue, 29 Mar 2005 16:01:16 -0800 (PST)
Message-ID: <6fb33c15050329160136d91ee2@mail.gmail.com>
Date: Tue, 29 Mar 2005 16:01:16 -0800
From: Antony Sequeira <antony.sequeira@gmail.com>
Reply-To: Antony Sequeira <antony.sequeira@gmail.com>
To: java-user@lucene.apache.org
Subject: pre computing possible search results narrowing and hit counts on those
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi
I have the above requirement, for which I could not find a good way to do.
I think the best way to explain my problem would be to give an example.

I have documents where each document represents a real estate property
for sale in US.
So, each document would have a city associated with it.
(We index the document and maybe index a city field.)

A user does a search for say "condominium", and i show him the 50,000
properties that meet that description.

I need two other pieces of information for display -
1. I want to show a "select" box on the UI, which contains all the
cities that appear in those 50,000 documents
2. Against each city I want to show the count of matching documents.

For example the drop down might look like
"Los Angeles"  10000
"San Francisco" 5000

(But, I do not want to show "San Jose" if none of the 50,000 documents
contain it)
Now, the user will be able to narrow down the search using one of the
selections (which I can turn into a boolean query).

My problem is, I do not know how to generate that 'select' list
without having to actually access each of those  50,000 documents.

Thanks,
-Antony

P.S.: The above app is fictional, since my employer won't like it if I
expose the actual stuff I am working on.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 00:19:52 2005
Return-Path: <java-user-return-13812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96292 invoked from network); 30 Mar 2005 00:19:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 00:19:52 -0000
Received: (qmail 77714 invoked by uid 500); 30 Mar 2005 00:19:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76852 invoked by uid 500); 30 Mar 2005 00:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76838 invoked by uid 99); 30 Mar 2005 00:19:48 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 16:19:47 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8E0145B791; Tue, 29 Mar 2005 16:19:45 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 452F37F459; Tue, 29 Mar 2005 16:19:45 -0800 (PST)
Date: Tue, 29 Mar 2005 16:19:45 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org,
	Antony Sequeira <antony.sequeira@gmail.com>
Subject: Re: pre computing possible search results narrowing and hit counts
 on those
In-Reply-To: <6fb33c15050329160136d91ee2@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0503291613570.28791@hal.rescomp.berkeley.edu>
References: <6fb33c15050329160136d91ee2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I need two other pieces of information for display -
: 1. I want to show a "select" box on the UI, which contains all the
: cities that appear in those 50,000 documents
: 2. Against each city I want to show the count of matching documents.

: My problem is, I do not know how to generate that 'select' list
: without having to actually access each of those  50,000 documents.

the straight forward way to do this, is to use a TermEnumerator to get a
list of all the "cities" in your collection, and then for each one
construct a Filter.  you can then either issue every search N+1 times
(once with no filter for real results, and once with each filter to get
the counts) or you can use the Filter.bits(IndexReader) method directly
with each Filter, and compute the AND of a clone of each with the BitSet
generated using a HitCollector when you do your search -- this assumes you
have access to the IndexReader.  in both cases you can improve performance
by using CachingWrapperFilter.

If you list of vales for that field is too vast to generate, then you
might wnat to take a look at this thread, which i have not read in it's
entirety, but what i did read lead me to believe it's the exact same
problem you describe...

http://www.mail-archive.com/java-dev@lucene.apache.org/msg00034.html

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 00:51:36 2005
Return-Path: <java-user-return-13813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6152 invoked from network); 30 Mar 2005 00:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 00:51:36 -0000
Received: (qmail 9432 invoked by uid 500); 30 Mar 2005 00:51:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8572 invoked by uid 500); 30 Mar 2005 00:51:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8559 invoked by uid 99); 30 Mar 2005 00:51:32 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of omar.didi@gmail.com designates 64.233.170.192 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 16:51:32 -0800
Received: by rproxy.gmail.com with SMTP id i8so1729156rne
        for <java-user@lucene.apache.org>; Tue, 29 Mar 2005 16:51:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=O/MdjchUoYKs3HpMcs6U74SG6e/ExEw/tsew5rsh5lUJxwrGSSB/MluyC3Zf2f71SdeT9Ldx0AXYyVGKfouQDj01cxMaP7sg8yKKy5XAoAnQOfdWgWkDID6XRpEClj7RuylUpck55Ap2xWzBzQhHigvmQo7P4Kp7v+OsKLmpyEI=
Received: by 10.38.15.11 with SMTP id 11mr285683rno;
        Tue, 29 Mar 2005 16:51:28 -0800 (PST)
Received: by 10.38.14.62 with HTTP; Tue, 29 Mar 2005 16:51:28 -0800 (PST)
Message-ID: <e285b27a050329165111a0138a@mail.gmail.com>
Date: Tue, 29 Mar 2005 19:51:28 -0500
From: omar didi <omar.didi@gmail.com>
Reply-To: omar didi <omar.didi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Result grouping
In-Reply-To: <42494B17.9060108@i-hypergrid.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <42494B17.9060108@i-hypergrid.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I am running a search on a large index (100GB), my search consists of
10 booleanQueries that run at the same time and their results is
combined to display the results. the first problem is it is very slow,
but that is normal i guess for such a big index, the problem i have
been having lately is java.lang.OutOfMemoryException. is it normal to
get this exception and shall I just increase the VM memory or could it
be another problem with the way i run the queries.

these are some of the indexed fields:
private static String	domain	= "domain";
private static String	contents	= "contents";
 and this is some queries:
private void setLocations( String brandName )
			throws IOException,
			ParseException
	{
Element locations = new Element( "locations" );
String[] _locations = { "body", "meta", "link", "title", "alt" };
	int sum = 0;
	for ( int i = 0; i < _locations.length; i++ )	{
int count = m_searchIndex.searchTerms( _locations[ i ], brandName );
locations.addContent( createNodes( new Element( "location" ),
_locations[ i ], count ) );
	sum += count;
	}
	locations.setAttribute( "total_count", String.valueOf( sum ) );
	root.addContent( locations );
	}

thanks guys,

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 00:56:09 2005
Return-Path: <java-user-return-13814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7804 invoked from network); 30 Mar 2005 00:56:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 00:56:09 -0000
Received: (qmail 17779 invoked by uid 500); 30 Mar 2005 00:56:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17385 invoked by uid 500); 30 Mar 2005 00:56:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17372 invoked by uid 99); 30 Mar 2005 00:56:04 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of omar.didi@gmail.com designates 64.233.170.194 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 16:56:03 -0800
Received: by rproxy.gmail.com with SMTP id i8so1729876rne
        for <java-user@lucene.apache.org>; Tue, 29 Mar 2005 16:56:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=b0wKlcmnods6J+HtlCIIAaDJxSRTn/F4J9zWoEM74tGVGbT4ZL7//IWhidqyqDFXv5lNDeJ/EMX9ADVXH2Ootkcy+ZTfQRBmpCf13pKWFxpqjf+IBIrk9SRGbKRgB1kPPLMkC0ayRIyUC1kLIcaCaXmAVZ7UaIh/1ws0WtZmTVA=
Received: by 10.38.82.58 with SMTP id f58mr172875rnb;
        Tue, 29 Mar 2005 16:56:00 -0800 (PST)
Received: by 10.38.14.62 with HTTP; Tue, 29 Mar 2005 16:56:00 -0800 (PST)
Message-ID: <e285b27a050329165635c2e25f@mail.gmail.com>
Date: Tue, 29 Mar 2005 19:56:00 -0500
From: omar didi <omar.didi@gmail.com>
Reply-To: omar didi <omar.didi@gmail.com>
To: java-user@lucene.apache.org
Subject: java.lang.OutOfMemoryException
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I am running a search on a large index (100GB), my search consists of
10 booleanQueries that run at the same time and their results is
combined to display the results. the first problem is it is very slow,
but that is normal i guess for such a big index, the problem i have
been having lately is java.lang.OutOfMemoryException. is it normal to
get this exception and shall I just increase the VM memory or could it
be another problem with the way i run the queries.

these are some of the indexed fields:
private static String	domain	= "domain";
private static String	contents	= "contents";
 and this is some queries:
private void setLocations( String brandName )
			throws IOException,
			ParseException
	{
Element locations = new Element( "locations" );
String[] _locations = { "body", "meta", "link", "title", "alt" };
	int sum = 0;
	for ( int i = 0; i < _locations.length; i++ )	{
int count = m_searchIndex.searchTerms( _locations[ i ], brandName );
locations.addContent( createNodes( new Element( "location" ),
_locations[ i ], count ) );
	sum += count;
	}
	locations.setAttribute( "total_count", String.valueOf( sum ) );
	root.addContent( locations );
	}

thanks guys,

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 05:14:24 2005
Return-Path: <java-user-return-13815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5655 invoked from network); 30 Mar 2005 05:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 05:14:23 -0000
Received: (qmail 53266 invoked by uid 500); 30 Mar 2005 05:14:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53243 invoked by uid 500); 30 Mar 2005 05:14:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53227 invoked by uid 99); 30 Mar 2005 05:14:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from dev.allthingslocal.com (HELO dev.allthingslocal.com) (69.44.58.51)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 29 Mar 2005 21:14:12 -0800
Received: from [192.168.1.100] ([::ffff:66.124.226.175])
  (AUTH: LOGIN chuck, TLS: TLSv1/SSLv3,256bits,AES256-SHA)
  by dev.allthingslocal.com with esmtp; Tue, 29 Mar 2005 23:14:10 -0600
  id 0007416C.424A35A3.00000194
Message-ID: <424A3591.4060301@allthingslocal.com>
Date: Tue, 29 Mar 2005 21:13:53 -0800
From: Chuck Williams <chuck@allthingslocal.com>
Organization: All Things Local
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Seeking advice on index parameter settings for large index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm preparing to help a company run a scalability test and decide 
whether or not to use Lucene.  Relevant particulars for the test include:
  1.  2 pairs of indices.  Each pair has 1 index with about 7.5 million 
small documents and 1 index with about 1 million large documents.  Each 
index has a substantial number of (small) fields in addition to the 
documents.
  2.  Searching will done using a node for each index pair -- i.e., the 
test will use a MultiSearcher accessing the remote indices.
  3.  Indexing and searching will be done simultaneously -- indexing 
will be incremental and continual.  There are no deletes.
  4.  The platform is Windows
  5.  Both search and indexing time are essential, and so need to be 
balanced.

Based on some early measurements with small test sets, but mostly first 
principles, I'm thinking of using these settings.  The index will take a 
long time to create and I probably get only one chance to prove what 
Lucene can do, and so I'd appreciate any good advice or experience that 
would suggest different settings:

        index.setMaxBufferedDocs(10);  // Buffer 10 documents at a time 
in memory (they could be big)
        index.setMaxFieldLength(Integer.MAX_VALUE);  // We do the 
limiting ourselves by what we pass in
        index.setMaxMergeDocs(100000);  // Yields about 75 large 
segments for 7.5 million docs (plus log2 smaller segments) = 100 total
        index.setMergeFactor(2);  // Faster searches due to fewer 
(small) segements, but slower indexing due to more frequent merging
        index.setSimilarity(similarity);
        index.setTermIndexInterval(128);  // Default.  Larger nubmer 
will reduce memory at cost of slower term access
        index.setUseCompoundFile(true);  // false could improve 
performance but will consume more file handles     

Thanks for any suggestions!

Chuck


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 17:30:09 2005
Return-Path: <java-user-return-13816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79113 invoked from network); 30 Mar 2005 17:30:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 17:30:09 -0000
Received: (qmail 79854 invoked by uid 500); 30 Mar 2005 17:29:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79816 invoked by uid 500); 30 Mar 2005 17:29:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79803 invoked by uid 99); 30 Mar 2005 17:29:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc13.comcast.net (HELO rwcrmhc13.comcast.net) (204.127.198.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 09:29:54 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc13) with ESMTP
          id <20050330172952015001f57ae>; Wed, 30 Mar 2005 17:29:52 +0000
Message-ID: <424AE20F.5090102@apache.org>
Date: Wed, 30 Mar 2005 09:29:51 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Seeking advice on index parameter settings for large index
References: <424A3591.4060301@allthingslocal.com>
In-Reply-To: <424A3591.4060301@allthingslocal.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chuck Williams wrote:
>        index.setMaxBufferedDocs(10);  // Buffer 10 documents at a time 
> in memory (they could be big)

You might use a larger value here for the index with the small 
documents.  I've sucessfully used values as high as a 1000 when indexing 
documents that average a few kilobytes with a few hundred megabyte heap. 
  This can make indexing a lot faster.  Note that this is the number of 
single document indexes that are buffered, not document text.  Indexes 
are typically smaller than the text.

>        index.setMaxMergeDocs(100000);  // Yields about 75 large segments 
> for 7.5 million docs (plus log2 smaller segments) = 100 total

This is reasonable while incrementally indexing, in order to bound the 
delay while adding documents.  But I would use Integer.MAX_VALUE during 
the initial build.  75 segments are much slower to search than one 
segment.  I think this is also a realistic assumption for most systems 
that are incrementally updated.  For example, if you have "scheduled 
downtime" you can optimize the index.  Or perhaps you can optimize at 
midnight every night, queing updates while this operates.  If there's 
never downtime, and updates must always be prompt, you can, as a 
background process, periodically copy the index, optimize it and apply 
queued updates until it is in sync with the live index, then swap them. 
  There are lots of ways to implement this, but, in short, you should 
never need to have 75 segments, but only ever 1 + 
log2(#updates_since_optimize).

>        index.setUseCompoundFile(true);  // false could improve 
> performance but will consume more file handles    

If you don't have 75 big segments, then you can probably afford to set 
this false.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 17:31:38 2005
Return-Path: <java-user-return-13817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79706 invoked from network); 30 Mar 2005 17:31:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 17:31:38 -0000
Received: (qmail 82691 invoked by uid 500); 30 Mar 2005 17:31:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82666 invoked by uid 500); 30 Mar 2005 17:31:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82651 invoked by uid 99); 30 Mar 2005 17:31:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 09:31:33 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: HTML pages highlighter
Date: Wed, 30 Mar 2005 12:31:31 -0500
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C11755115@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU1T0O53M3LNRkFQOiEbQ8ibcf96A==
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Lucene-User,
	Is any one try to do highlighting with HTML pages?

I am trying to do this using demo example by Keld H. Hansen article =
"Unweaving a Tangled Web HTMLParser and Lucene" but I am getting "null" =
value for text at line #47 Any Idea?

      1 package org.apache.lucene.search.highlight;
      2
      3 import java.io.StringReader;
      4
      5 import org.apache.lucene.analysis.Analyzer;
      6 import org.apache.lucene.analysis.TokenStream;
      7 import org.apache.lucene.analysis.standard.StandardAnalyzer;
      8 import org.apache.lucene.queryParser.QueryParser;
      9 import org.apache.lucene.search.Hits;
     10 import org.apache.lucene.search.IndexSearcher;
     11 import org.apache.lucene.search.Query;
     12 import org.apache.lucene.search.highlight.Formatter;
     13 import org.apache.lucene.search.highlight.Highlighter;
     14 import org.apache.lucene.search.highlight.QueryScorer;
     15 import org.apache.lucene.search.highlight.SimpleFragmenter;
     16
     17 public class Searcher {
     18
     19    static Query query;
     20    static Hits hits;
     21
     22    private static final String FIELD_NAME =3D "contents";
     23    private static final String indexDir =3D =
"/opt/dynamo/prod/hww-doc/hww/help/index";
     24
     25    private static Analyzer analyzer =3D new StandardAnalyzer();
     26
     27    public static void main(String[] args) throws Exception {
     28
     29       IndexSearcher is   =3D new IndexSearcher(indexDir);
     30       String searchCriteria =3D "scholarly";
     31       query =3D QueryParser.parse(searchCriteria, "contents", =
analyzer);
     32
     33       hits  =3D is.search(query);
     34       System.out.println("found in: " + query +"\nhits-length:" =
+hits.length());
     35
     36       doStandardHighlights();
     37
     38       is.close();
     39    }
     40
     41    static void doStandardHighlights() throws Exception {
     42       Highlighter highlighter =3D new Highlighter(new =
MyBolder(), new QueryScorer(query));
     43       System.out.println("Highlighter: " + highlighter =
+"\nhits-length:" +hits.length());
     44       highlighter.setTextFragmenter(new SimpleFragmenter(20));
     45       for (int i =3D 0; i < hits.length(); i++) {
     46          System.out.println("URL " + (i + 1) + ": " + =
hits.doc(i).getField("path").stringValue());
     47          String text =3D hits.doc(i).get("FIELD_NAME");
     48          int maxNumFragmentsRequired =3D 2;
     49          String fragmentSeparator =3D "...";
     50          TokenStream tokenStream =3D =
analyzer.tokenStream(FIELD_NAME, new StringReader(text));
     51
     52          String result =3D
     53             highlighter.getBestFragments(
     54                tokenStream,
     55                text,
     56                maxNumFragmentsRequired,
     57                fragmentSeparator);
     58          System.out.println("\tfound in: " + result);
     59       }
     60    }
     61
     62    private static class MyBolder implements Formatter {
     63         public String highlightTerm(String originalText , =
TokenGroup group)
     64         {
     65                 if(group.getTotalScore()<=3D0)
     66                 {
     67                         return originalText;
     68                 }
     69                 return "<b>" + originalText + "</b>";
     70         }
     71    }
     72
     73 }

Yagnesh N. Shah=20
Senior Technology Engineer=20
CS Dept., 4th Floor
H. W. Wilson=20
950 University Avenue,=20
Bronx NY 10452=20
(718) 588 8400 x2721=20
http://www.hwwilson.com

=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 17:42:40 2005
Return-Path: <java-user-return-13818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84107 invoked from network); 30 Mar 2005 17:42:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 17:42:40 -0000
Received: (qmail 3298 invoked by uid 500); 30 Mar 2005 17:42:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2588 invoked by uid 500); 30 Mar 2005 17:42:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2575 invoked by uid 99); 30 Mar 2005 17:42:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc14.comcast.net (HELO rwcrmhc14.comcast.net) (216.148.227.89)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 09:42:35 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc14) with ESMTP
          id <2005033017423301400aj4i3e>; Wed, 30 Mar 2005 17:42:33 +0000
Message-ID: <424AE508.6030301@apache.org>
Date: Wed, 30 Mar 2005 09:42:32 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: pre computing possible search results narrowing and hit counts
 on those
References: <6fb33c15050329160136d91ee2@mail.gmail.com>
In-Reply-To: <6fb33c15050329160136d91ee2@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Antony Sequeira wrote:
> A user does a search for say "condominium", and i show him the 50,000
> properties that meet that description.
> 
> I need two other pieces of information for display -
> 1. I want to show a "select" box on the UI, which contains all the
> cities that appear in those 50,000 documents
> 2. Against each city I want to show the count of matching documents.
> 
> For example the drop down might look like
> "Los Angeles"  10000
> "San Francisco" 5000
> 
> (But, I do not want to show "San Jose" if none of the 50,000 documents
> contain it)

You can use the FieldCache & HitCollector:

private class Count { int value; }

String[] docToCity = FieldCache.getStrings(indexReader, "city");
Map cityToCount = new HashMap();

searcher.search(query, new HitCollector() {
   public void collect(int doc, float score) {
     String city = docToCity[doc];
     Count count = cityToCount.get(city);
     if (count == null) {
       count = new Count();
       cityToCount.put(city, count);
     }
     count.value++;
   }
});

// sort & display entries in cityToCount

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 18:32:41 2005
Return-Path: <java-user-return-13819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3982 invoked from network); 30 Mar 2005 18:32:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 18:32:41 -0000
Received: (qmail 84247 invoked by uid 500); 30 Mar 2005 18:32:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83369 invoked by uid 500); 30 Mar 2005 18:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83352 invoked by uid 99); 30 Mar 2005 18:32:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 10:32:36 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: searcher question
Date: Wed, 30 Mar 2005 13:32:32 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829EC@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: pre computing possible search results narrowing and hit counts on those
thread-index: AcU1T+TxqFmVm0NxT8iHxj6odj7eoQABPfNw
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am having a large index (100GB) and when i run the following code :

String indexLocation =3D servlet.getServletContext().getInitParameter( =
"com.lucene.index" );
logger.log( Level.INFO, "got the index location from:  " + indexLocation =
);
searcher =3D new IndexSearcher(indexLocation);
logger.log( Level.INFO, "we created an instance of  SearchIndex" );

I never get to see the last message "we created an instance of  =
SearchIndex" and I get=20
java.lang.OutOfMemoryError: Java heap space.

please if anyone has any ideas???.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 18:59:28 2005
Return-Path: <java-user-return-13820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12231 invoked from network); 30 Mar 2005 18:59:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 18:59:28 -0000
Received: (qmail 22849 invoked by uid 500); 30 Mar 2005 18:59:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22457 invoked by uid 500); 30 Mar 2005 18:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22444 invoked by uid 99); 30 Mar 2005 18:59:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from rwcrmhc11.comcast.net (HELO rwcrmhc11.comcast.net) (204.127.198.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 10:59:22 -0800
Received: from [192.168.168.81] (c-24-5-160-217.client.comcast.net[24.5.160.217])
          by comcast.net (rwcrmhc11) with ESMTP
          id <2005033018592001300dsacte>; Wed, 30 Mar 2005 18:59:20 +0000
Message-ID: <424AF707.9010504@apache.org>
Date: Wed, 30 Mar 2005 10:59:19 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.2 (X11/20050324)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: searcher question
References: <63434C14F9A6F74CB36B85033E4C30CA010829EC@hermes.corp.cyveillance.com>
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA010829EC@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Omar Didi wrote:
> I am having a large index (100GB) and when i run the following code :
> 
> String indexLocation = servlet.getServletContext().getInitParameter( "com.lucene.index" );
> logger.log( Level.INFO, "got the index location from:  " + indexLocation );
> searcher = new IndexSearcher(indexLocation);
> logger.log( Level.INFO, "we created an instance of  SearchIndex" );
> 
> I never get to see the last message "we created an instance of  SearchIndex" and I get 
> java.lang.OutOfMemoryError: Java heap space.

How big is your java heap?  How much RAM do you have on the machine? 
How many documents are in the index?  What version of Lucene?

You might try calling IndexWriter.setTermIndexInterval(512) and 
re-optimizing your index.  You might need to add and/or delete a 
document for this to have an effect if the index is already optimized. 
This method is only in the latest sources, available from subversion. 
It should dramatically reduce the amount of memory required to open the 
index.  There are other changes in the latest sources that will also 
reduce memory requirements, so you may not even need to use 
IndexWriter.setTermIndexInterval().

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 20:14:56 2005
Return-Path: <java-user-return-13821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29650 invoked from network); 30 Mar 2005 20:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 20:14:56 -0000
Received: (qmail 21138 invoked by uid 500); 30 Mar 2005 20:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21110 invoked by uid 500); 30 Mar 2005 20:14:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21097 invoked by uid 99); 30 Mar 2005 20:14:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 12:14:51 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: searcher question
Date: Wed, 30 Mar 2005 15:14:48 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829EF@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: searcher question
thread-index: AcU1WpnkpvVYEpMmRpCk3q+2G8pmcAACPdAA
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

my java heap is between 128 and 1024 MB, I have 2GB of RAM and about 10 =
million documents in the index which is broken down to 6 indexes. I am =
using a multi-searcher to query the index. I am using lucene1.4.3.
-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]
Sent: Wednesday, March 30, 2005 1:59 PM
To: java-user@lucene.apache.org
Subject: Re: searcher question


Omar Didi wrote:
> I am having a large index (100GB) and when i run the following code :
>=20
> String indexLocation =3D servlet.getServletContext().getInitParameter( =
"com.lucene.index" );
> logger.log( Level.INFO, "got the index location from:  " + =
indexLocation );
> searcher =3D new IndexSearcher(indexLocation);
> logger.log( Level.INFO, "we created an instance of  SearchIndex" );
>=20
> I never get to see the last message "we created an instance of  =
SearchIndex" and I get=20
> java.lang.OutOfMemoryError: Java heap space.

How big is your java heap?  How much RAM do you have on the machine?=20
How many documents are in the index?  What version of Lucene?

You might try calling IndexWriter.setTermIndexInterval(512) and=20
re-optimizing your index.  You might need to add and/or delete a=20
document for this to have an effect if the index is already optimized.=20
This method is only in the latest sources, available from subversion.=20
It should dramatically reduce the amount of memory required to open the=20
index.  There are other changes in the latest sources that will also=20
reduce memory requirements, so you may not even need to use=20
IndexWriter.setTermIndexInterval().

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 20:40:39 2005
Return-Path: <java-user-return-13822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51515 invoked from network); 30 Mar 2005 20:40:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 20:40:39 -0000
Received: (qmail 53613 invoked by uid 500); 30 Mar 2005 20:40:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53585 invoked by uid 500); 30 Mar 2005 20:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53572 invoked by uid 99); 30 Mar 2005 20:40:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from static-70-19-127-127.ny325.east.verizon.net (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 12:40:34 -0800
Received: from MCELONA (unknown [192.168.42.109])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id D2F92106D8
	for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 15:40:31 -0500 (EST)
From: "Michael Celona" <mcelona@criticalmention.com>
To: <java-user@lucene.apache.org>
Subject: RE: searcher question
Date: Wed, 30 Mar 2005 15:40:37 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcU1WpnkpvVYEpMmRpCk3q+2G8pmcAACPdAAAAFCJ4A=
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA010829EF@hermes.corp.cyveillance.com>
Message-Id: <20050330204031.D2F92106D8@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Curious... what kind of search performance are you getting for an index this
size...

-----Original Message-----
From: Omar Didi [mailto:odidi@Cyveillance.com] 
Sent: Wednesday, March 30, 2005 3:15 PM
To: java-user@lucene.apache.org
Subject: RE: searcher question

my java heap is between 128 and 1024 MB, I have 2GB of RAM and about 10
million documents in the index which is broken down to 6 indexes. I am using
a multi-searcher to query the index. I am using lucene1.4.3.
-----Original Message-----
From: Doug Cutting [mailto:cutting@apache.org]
Sent: Wednesday, March 30, 2005 1:59 PM
To: java-user@lucene.apache.org
Subject: Re: searcher question


Omar Didi wrote:
> I am having a large index (100GB) and when i run the following code :
> 
> String indexLocation = servlet.getServletContext().getInitParameter(
"com.lucene.index" );
> logger.log( Level.INFO, "got the index location from:  " + indexLocation
);
> searcher = new IndexSearcher(indexLocation);
> logger.log( Level.INFO, "we created an instance of  SearchIndex" );
> 
> I never get to see the last message "we created an instance of
SearchIndex" and I get 
> java.lang.OutOfMemoryError: Java heap space.

How big is your java heap?  How much RAM do you have on the machine? 
How many documents are in the index?  What version of Lucene?

You might try calling IndexWriter.setTermIndexInterval(512) and 
re-optimizing your index.  You might need to add and/or delete a 
document for this to have an effect if the index is already optimized. 
This method is only in the latest sources, available from subversion. 
It should dramatically reduce the amount of memory required to open the 
index.  There are other changes in the latest sources that will also 
reduce memory requirements, so you may not even need to use 
IndexWriter.setTermIndexInterval().

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 21:03:11 2005
Return-Path: <java-user-return-13823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57449 invoked from network); 30 Mar 2005 21:03:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 21:03:10 -0000
Received: (qmail 91968 invoked by uid 500); 30 Mar 2005 21:03:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91945 invoked by uid 500); 30 Mar 2005 21:03:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91931 invoked by uid 99); 30 Mar 2005 21:03:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 13:03:04 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 79E7513E200A; Wed, 30 Mar 2005 16:03:00 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 8292713E211E
	for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 16:01:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <E3AD9C3F9EC34949855CDFC6FB5A6C11755115@NYHWWEX001.hwwilson.local>
References: <E3AD9C3F9EC34949855CDFC6FB5A6C11755115@NYHWWEX001.hwwilson.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8d9f5c442dc6707170db40a259ed8718@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTML pages highlighter
Date: Wed, 30 Mar 2005 16:00:59 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How did you index "contents"?  If you did not use a stored field type, 
then that is the issue.

	Erik

On Mar 30, 2005, at 12:31 PM, Yagnesh Shah wrote:

> Hello Lucene-User,
> 	Is any one try to do highlighting with HTML pages?
>
> I am trying to do this using demo example by Keld H. Hansen article 
> "Unweaving a Tangled Web HTMLParser and Lucene" but I am getting 
> "null" value for text at line #47 Any Idea?
>
>       1 package org.apache.lucene.search.highlight;
>       2
>       3 import java.io.StringReader;
>       4
>       5 import org.apache.lucene.analysis.Analyzer;
>       6 import org.apache.lucene.analysis.TokenStream;
>       7 import org.apache.lucene.analysis.standard.StandardAnalyzer;
>       8 import org.apache.lucene.queryParser.QueryParser;
>       9 import org.apache.lucene.search.Hits;
>      10 import org.apache.lucene.search.IndexSearcher;
>      11 import org.apache.lucene.search.Query;
>      12 import org.apache.lucene.search.highlight.Formatter;
>      13 import org.apache.lucene.search.highlight.Highlighter;
>      14 import org.apache.lucene.search.highlight.QueryScorer;
>      15 import org.apache.lucene.search.highlight.SimpleFragmenter;
>      16
>      17 public class Searcher {
>      18
>      19    static Query query;
>      20    static Hits hits;
>      21
>      22    private static final String FIELD_NAME = "contents";
>      23    private static final String indexDir = 
> "/opt/dynamo/prod/hww-doc/hww/help/index";
>      24
>      25    private static Analyzer analyzer = new StandardAnalyzer();
>      26
>      27    public static void main(String[] args) throws Exception {
>      28
>      29       IndexSearcher is   = new IndexSearcher(indexDir);
>      30       String searchCriteria = "scholarly";
>      31       query = QueryParser.parse(searchCriteria, "contents", 
> analyzer);
>      32
>      33       hits  = is.search(query);
>      34       System.out.println("found in: " + query 
> +"\nhits-length:" +hits.length());
>      35
>      36       doStandardHighlights();
>      37
>      38       is.close();
>      39    }
>      40
>      41    static void doStandardHighlights() throws Exception {
>      42       Highlighter highlighter = new Highlighter(new 
> MyBolder(), new QueryScorer(query));
>      43       System.out.println("Highlighter: " + highlighter 
> +"\nhits-length:" +hits.length());
>      44       highlighter.setTextFragmenter(new SimpleFragmenter(20));
>      45       for (int i = 0; i < hits.length(); i++) {
>      46          System.out.println("URL " + (i + 1) + ": " + 
> hits.doc(i).getField("path").stringValue());
>      47          String text = hits.doc(i).get("FIELD_NAME");
>      48          int maxNumFragmentsRequired = 2;
>      49          String fragmentSeparator = "...";
>      50          TokenStream tokenStream = 
> analyzer.tokenStream(FIELD_NAME, new StringReader(text));
>      51
>      52          String result =
>      53             highlighter.getBestFragments(
>      54                tokenStream,
>      55                text,
>      56                maxNumFragmentsRequired,
>      57                fragmentSeparator);
>      58          System.out.println("\tfound in: " + result);
>      59       }
>      60    }
>      61
>      62    private static class MyBolder implements Formatter {
>      63         public String highlightTerm(String originalText , 
> TokenGroup group)
>      64         {
>      65                 if(group.getTotalScore()<=0)
>      66                 {
>      67                         return originalText;
>      68                 }
>      69                 return "<b>" + originalText + "</b>";
>      70         }
>      71    }
>      72
>      73 }
>
> Yagnesh N. Shah
> Senior Technology Engineer
> CS Dept., 4th Floor
> H. W. Wilson
> 950 University Avenue,
> Bronx NY 10452
> (718) 588 8400 x2721
> http://www.hwwilson.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 21:14:17 2005
Return-Path: <java-user-return-13824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60408 invoked from network); 30 Mar 2005 21:14:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 21:14:17 -0000
Received: (qmail 11993 invoked by uid 500); 30 Mar 2005 21:14:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11950 invoked by uid 500); 30 Mar 2005 21:14:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11890 invoked by uid 99); 30 Mar 2005 21:14:01 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 13:13:59 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: HTML pages highlighter
Date: Wed, 30 Mar 2005 16:13:55 -0500
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C11755118@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU1a+Ildewq+OxJQ7OWO3GkKf4FDwAAl+SQ
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! Erik,
	Here is what I used :
cd /opt/dynamo/prod/hww-doc/hww
java org.apache.lucene.demo.IndexHTML -create -index help/index help

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, March 30, 2005 4:01 PM
To: java-user@lucene.apache.org
Subject: Re: HTML pages highlighter


How did you index "contents"?  If you did not use a stored field type,=20
then that is the issue.

	Erik

On Mar 30, 2005, at 12:31 PM, Yagnesh Shah wrote:

> Hello Lucene-User,
> 	Is any one try to do highlighting with HTML pages?
>
> I am trying to do this using demo example by Keld H. Hansen article=20
> "Unweaving a Tangled Web HTMLParser and Lucene" but I am getting=20
> "null" value for text at line #47 Any Idea?
>
>       1 package org.apache.lucene.search.highlight;
>       2
>       3 import java.io.StringReader;
>       4
>       5 import org.apache.lucene.analysis.Analyzer;
>       6 import org.apache.lucene.analysis.TokenStream;
>       7 import org.apache.lucene.analysis.standard.StandardAnalyzer;
>       8 import org.apache.lucene.queryParser.QueryParser;
>       9 import org.apache.lucene.search.Hits;
>      10 import org.apache.lucene.search.IndexSearcher;
>      11 import org.apache.lucene.search.Query;
>      12 import org.apache.lucene.search.highlight.Formatter;
>      13 import org.apache.lucene.search.highlight.Highlighter;
>      14 import org.apache.lucene.search.highlight.QueryScorer;
>      15 import org.apache.lucene.search.highlight.SimpleFragmenter;
>      16
>      17 public class Searcher {
>      18
>      19    static Query query;
>      20    static Hits hits;
>      21
>      22    private static final String FIELD_NAME =3D "contents";
>      23    private static final String indexDir =3D=20
> "/opt/dynamo/prod/hww-doc/hww/help/index";
>      24
>      25    private static Analyzer analyzer =3D new =
StandardAnalyzer();
>      26
>      27    public static void main(String[] args) throws Exception {
>      28
>      29       IndexSearcher is   =3D new IndexSearcher(indexDir);
>      30       String searchCriteria =3D "scholarly";
>      31       query =3D QueryParser.parse(searchCriteria, "contents",=20
> analyzer);
>      32
>      33       hits  =3D is.search(query);
>      34       System.out.println("found in: " + query=20
> +"\nhits-length:" +hits.length());
>      35
>      36       doStandardHighlights();
>      37
>      38       is.close();
>      39    }
>      40
>      41    static void doStandardHighlights() throws Exception {
>      42       Highlighter highlighter =3D new Highlighter(new=20
> MyBolder(), new QueryScorer(query));
>      43       System.out.println("Highlighter: " + highlighter=20
> +"\nhits-length:" +hits.length());
>      44       highlighter.setTextFragmenter(new SimpleFragmenter(20));
>      45       for (int i =3D 0; i < hits.length(); i++) {
>      46          System.out.println("URL " + (i + 1) + ": " +=20
> hits.doc(i).getField("path").stringValue());
>      47          String text =3D hits.doc(i).get("FIELD_NAME");
>      48          int maxNumFragmentsRequired =3D 2;
>      49          String fragmentSeparator =3D "...";
>      50          TokenStream tokenStream =3D=20
> analyzer.tokenStream(FIELD_NAME, new StringReader(text));
>      51
>      52          String result =3D
>      53             highlighter.getBestFragments(
>      54                tokenStream,
>      55                text,
>      56                maxNumFragmentsRequired,
>      57                fragmentSeparator);
>      58          System.out.println("\tfound in: " + result);
>      59       }
>      60    }
>      61
>      62    private static class MyBolder implements Formatter {
>      63         public String highlightTerm(String originalText ,=20
> TokenGroup group)
>      64         {
>      65                 if(group.getTotalScore()<=3D0)
>      66                 {
>      67                         return originalText;
>      68                 }
>      69                 return "<b>" + originalText + "</b>";
>      70         }
>      71    }
>      72
>      73 }
>
> Yagnesh N. Shah
> Senior Technology Engineer
> CS Dept., 4th Floor
> H. W. Wilson
> 950 University Avenue,
> Bronx NY 10452
> (718) 588 8400 x2721
> http://www.hwwilson.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 21:17:31 2005
Return-Path: <java-user-return-13825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61591 invoked from network); 30 Mar 2005 21:17:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 21:17:31 -0000
Received: (qmail 16677 invoked by uid 500); 30 Mar 2005 21:17:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16225 invoked by uid 500); 30 Mar 2005 21:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16212 invoked by uid 99); 30 Mar 2005 21:17:23 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 13:17:22 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: HTML pages highlighter
Date: Wed, 30 Mar 2005 16:17:20 -0500
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C11755119@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU1a+Ildewq+OxJQ7OWO3GkKf4FDwAAsLpw
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! Eric,
	One more thing, I am using the same HTMLDocument.java that comes with =
/trunk/src/demo/org/apache/lucene/demo

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, March 30, 2005 4:01 PM
To: java-user@lucene.apache.org
Subject: Re: HTML pages highlighter


How did you index "contents"?  If you did not use a stored field type,=20
then that is the issue.

	Erik

On Mar 30, 2005, at 12:31 PM, Yagnesh Shah wrote:

> Hello Lucene-User,
> 	Is any one try to do highlighting with HTML pages?
>
> I am trying to do this using demo example by Keld H. Hansen article=20
> "Unweaving a Tangled Web HTMLParser and Lucene" but I am getting=20
> "null" value for text at line #47 Any Idea?
>
>       1 package org.apache.lucene.search.highlight;
>       2
>       3 import java.io.StringReader;
>       4
>       5 import org.apache.lucene.analysis.Analyzer;
>       6 import org.apache.lucene.analysis.TokenStream;
>       7 import org.apache.lucene.analysis.standard.StandardAnalyzer;
>       8 import org.apache.lucene.queryParser.QueryParser;
>       9 import org.apache.lucene.search.Hits;
>      10 import org.apache.lucene.search.IndexSearcher;
>      11 import org.apache.lucene.search.Query;
>      12 import org.apache.lucene.search.highlight.Formatter;
>      13 import org.apache.lucene.search.highlight.Highlighter;
>      14 import org.apache.lucene.search.highlight.QueryScorer;
>      15 import org.apache.lucene.search.highlight.SimpleFragmenter;
>      16
>      17 public class Searcher {
>      18
>      19    static Query query;
>      20    static Hits hits;
>      21
>      22    private static final String FIELD_NAME =3D "contents";
>      23    private static final String indexDir =3D=20
> "/opt/dynamo/prod/hww-doc/hww/help/index";
>      24
>      25    private static Analyzer analyzer =3D new =
StandardAnalyzer();
>      26
>      27    public static void main(String[] args) throws Exception {
>      28
>      29       IndexSearcher is   =3D new IndexSearcher(indexDir);
>      30       String searchCriteria =3D "scholarly";
>      31       query =3D QueryParser.parse(searchCriteria, "contents",=20
> analyzer);
>      32
>      33       hits  =3D is.search(query);
>      34       System.out.println("found in: " + query=20
> +"\nhits-length:" +hits.length());
>      35
>      36       doStandardHighlights();
>      37
>      38       is.close();
>      39    }
>      40
>      41    static void doStandardHighlights() throws Exception {
>      42       Highlighter highlighter =3D new Highlighter(new=20
> MyBolder(), new QueryScorer(query));
>      43       System.out.println("Highlighter: " + highlighter=20
> +"\nhits-length:" +hits.length());
>      44       highlighter.setTextFragmenter(new SimpleFragmenter(20));
>      45       for (int i =3D 0; i < hits.length(); i++) {
>      46          System.out.println("URL " + (i + 1) + ": " +=20
> hits.doc(i).getField("path").stringValue());
>      47          String text =3D hits.doc(i).get("FIELD_NAME");
>      48          int maxNumFragmentsRequired =3D 2;
>      49          String fragmentSeparator =3D "...";
>      50          TokenStream tokenStream =3D=20
> analyzer.tokenStream(FIELD_NAME, new StringReader(text));
>      51
>      52          String result =3D
>      53             highlighter.getBestFragments(
>      54                tokenStream,
>      55                text,
>      56                maxNumFragmentsRequired,
>      57                fragmentSeparator);
>      58          System.out.println("\tfound in: " + result);
>      59       }
>      60    }
>      61
>      62    private static class MyBolder implements Formatter {
>      63         public String highlightTerm(String originalText ,=20
> TokenGroup group)
>      64         {
>      65                 if(group.getTotalScore()<=3D0)
>      66                 {
>      67                         return originalText;
>      68                 }
>      69                 return "<b>" + originalText + "</b>";
>      70         }
>      71    }
>      72
>      73 }
>
> Yagnesh N. Shah
> Senior Technology Engineer
> CS Dept., 4th Floor
> H. W. Wilson
> 950 University Avenue,
> Bronx NY 10452
> (718) 588 8400 x2721
> http://www.hwwilson.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 21:35:47 2005
Return-Path: <java-user-return-13826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69095 invoked from network); 30 Mar 2005 21:35:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 21:35:47 -0000
Received: (qmail 50741 invoked by uid 500); 30 Mar 2005 21:35:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50710 invoked by uid 500); 30 Mar 2005 21:35:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50687 invoked by uid 99); 30 Mar 2005 21:35:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 13:35:40 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 842BA13E200A; Wed, 30 Mar 2005 16:35:36 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 774C713E2006
	for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 16:34:46 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <E3AD9C3F9EC34949855CDFC6FB5A6C11755119@NYHWWEX001.hwwilson.local>
References: <E3AD9C3F9EC34949855CDFC6FB5A6C11755119@NYHWWEX001.hwwilson.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <2553d8e23b7f88e17442bcf0d7a8b93a@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTML pages highlighter
Date: Wed, 30 Mar 2005 16:34:43 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Mar 30, 2005, at 4:17 PM, Yagnesh Shah wrote:

> Hi! Eric,
> 	One more thing, I am using the same HTMLDocument.java that comes with 
> /trunk/src/demo/org/apache/lucene/demo

Which does this:

	 doc.add(new Field("contents", parser.getReader()));

That is not a stored field.  In other words, the original "contents" 
are not available from the Lucene index.   You will have to adjust your 
indexing code to store the contents, or adjust your highlighting code 
to pull the contents from the original source again.

	Erik


>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, March 30, 2005 4:01 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
> How did you index "contents"?  If you did not use a stored field type,
> then that is the issue.
>
> 	Erik
>
> On Mar 30, 2005, at 12:31 PM, Yagnesh Shah wrote:
>
>> Hello Lucene-User,
>> 	Is any one try to do highlighting with HTML pages?
>>
>> I am trying to do this using demo example by Keld H. Hansen article
>> "Unweaving a Tangled Web HTMLParser and Lucene" but I am getting
>> "null" value for text at line #47 Any Idea?
>>
>>       1 package org.apache.lucene.search.highlight;
>>       2
>>       3 import java.io.StringReader;
>>       4
>>       5 import org.apache.lucene.analysis.Analyzer;
>>       6 import org.apache.lucene.analysis.TokenStream;
>>       7 import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>       8 import org.apache.lucene.queryParser.QueryParser;
>>       9 import org.apache.lucene.search.Hits;
>>      10 import org.apache.lucene.search.IndexSearcher;
>>      11 import org.apache.lucene.search.Query;
>>      12 import org.apache.lucene.search.highlight.Formatter;
>>      13 import org.apache.lucene.search.highlight.Highlighter;
>>      14 import org.apache.lucene.search.highlight.QueryScorer;
>>      15 import org.apache.lucene.search.highlight.SimpleFragmenter;
>>      16
>>      17 public class Searcher {
>>      18
>>      19    static Query query;
>>      20    static Hits hits;
>>      21
>>      22    private static final String FIELD_NAME = "contents";
>>      23    private static final String indexDir =
>> "/opt/dynamo/prod/hww-doc/hww/help/index";
>>      24
>>      25    private static Analyzer analyzer = new StandardAnalyzer();
>>      26
>>      27    public static void main(String[] args) throws Exception {
>>      28
>>      29       IndexSearcher is   = new IndexSearcher(indexDir);
>>      30       String searchCriteria = "scholarly";
>>      31       query = QueryParser.parse(searchCriteria, "contents",
>> analyzer);
>>      32
>>      33       hits  = is.search(query);
>>      34       System.out.println("found in: " + query
>> +"\nhits-length:" +hits.length());
>>      35
>>      36       doStandardHighlights();
>>      37
>>      38       is.close();
>>      39    }
>>      40
>>      41    static void doStandardHighlights() throws Exception {
>>      42       Highlighter highlighter = new Highlighter(new
>> MyBolder(), new QueryScorer(query));
>>      43       System.out.println("Highlighter: " + highlighter
>> +"\nhits-length:" +hits.length());
>>      44       highlighter.setTextFragmenter(new SimpleFragmenter(20));
>>      45       for (int i = 0; i < hits.length(); i++) {
>>      46          System.out.println("URL " + (i + 1) + ": " +
>> hits.doc(i).getField("path").stringValue());
>>      47          String text = hits.doc(i).get("FIELD_NAME");
>>      48          int maxNumFragmentsRequired = 2;
>>      49          String fragmentSeparator = "...";
>>      50          TokenStream tokenStream =
>> analyzer.tokenStream(FIELD_NAME, new StringReader(text));
>>      51
>>      52          String result =
>>      53             highlighter.getBestFragments(
>>      54                tokenStream,
>>      55                text,
>>      56                maxNumFragmentsRequired,
>>      57                fragmentSeparator);
>>      58          System.out.println("\tfound in: " + result);
>>      59       }
>>      60    }
>>      61
>>      62    private static class MyBolder implements Formatter {
>>      63         public String highlightTerm(String originalText ,
>> TokenGroup group)
>>      64         {
>>      65                 if(group.getTotalScore()<=0)
>>      66                 {
>>      67                         return originalText;
>>      68                 }
>>      69                 return "<b>" + originalText + "</b>";
>>      70         }
>>      71    }
>>      72
>>      73 }
>>
>> Yagnesh N. Shah
>> Senior Technology Engineer
>> CS Dept., 4th Floor
>> H. W. Wilson
>> 950 University Avenue,
>> Bronx NY 10452
>> (718) 588 8400 x2721
>> http://www.hwwilson.com
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 21:42:08 2005
Return-Path: <java-user-return-13827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70465 invoked from network); 30 Mar 2005 21:42:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 21:42:07 -0000
Received: (qmail 62550 invoked by uid 500); 30 Mar 2005 21:42:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62527 invoked by uid 500); 30 Mar 2005 21:42:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62513 invoked by uid 99); 30 Mar 2005 21:42:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 13:42:01 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: error when query contains numbers
Date: Wed, 30 Mar 2005 16:41:59 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829F1@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
thread-index: AcU1cHFaHmVOqgYLT92oHcs/Znt/CAAAJq/w
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi guys,

I am using a QueryParser to search the index. when the query has =
numbers, i don t get any results??=20
any suggestions??



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 21:43:03 2005
Return-Path: <java-user-return-13828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70575 invoked from network); 30 Mar 2005 21:43:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 21:43:03 -0000
Received: (qmail 64018 invoked by uid 500); 30 Mar 2005 21:42:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63995 invoked by uid 500); 30 Mar 2005 21:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63982 invoked by uid 99); 30 Mar 2005 21:42:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from mail.saumag.edu (HELO mail.SAUMAG.EDU) (150.208.44.1)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 13:42:58 -0800
Received: from 32217 (32217-.saumag.edu [10.1.1.13]) by mail.SAUMAG.EDU with SMTP (Microsoft Exchange Internet Mail Service Version 5.5.2653.13)
	id H3A3369W; Wed, 30 Mar 2005 15:42:52 -0600
From: "Luis Medina" <lmedina@ruralsource.com>
To: <java-user@lucene.apache.org>
Subject: Newbie question
Date: Wed, 30 Mar 2005 15:42:53 -0600
Message-ID: <ACEIJKEFACAHGGILCJHOEECNCAAA.lmedina@ruralsource.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Newbie question here,
is upgrading Lucene as easy as replacing the old Jar file with a newer
version's Jar file? or do I need to recompile the application's code?

Thanks,
Luis


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 21:46:32 2005
Return-Path: <java-user-return-13829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71806 invoked from network); 30 Mar 2005 21:46:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 21:46:32 -0000
Received: (qmail 74280 invoked by uid 500); 30 Mar 2005 21:46:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73734 invoked by uid 500); 30 Mar 2005 21:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73708 invoked by uid 99); 30 Mar 2005 21:46:27 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 13:46:27 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: HTML pages highlighter
Date: Wed, 30 Mar 2005 16:46:25 -0500
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C1175511A@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU1cHBDczX5qT6CSgq+35RbwNKpFgAAd9eA
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! Eric,
	I try to modified that with this but I get compile error. Do you have =
any code snippet of highlighting code to pull the contents from the =
original source? or Do you know how I can do field store?

      doc.add(new Field("contents", parser.getReader(), Field.Store.YES, =
Field.Index.NO));


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, March 30, 2005 4:35 PM
To: java-user@lucene.apache.org
Subject: Re: HTML pages highlighter



On Mar 30, 2005, at 4:17 PM, Yagnesh Shah wrote:

> Hi! Eric,
> 	One more thing, I am using the same HTMLDocument.java that comes with =

> /trunk/src/demo/org/apache/lucene/demo

Which does this:

	 doc.add(new Field("contents", parser.getReader()));

That is not a stored field.  In other words, the original "contents"=20
are not available from the Lucene index.   You will have to adjust your=20
indexing code to store the contents, or adjust your highlighting code=20
to pull the contents from the original source again.

	Erik


>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, March 30, 2005 4:01 PM
> To: java-user@lucene.apache.org
> Subject: Re: HTML pages highlighter
>
>
> How did you index "contents"?  If you did not use a stored field type,
> then that is the issue.
>
> 	Erik
>
> On Mar 30, 2005, at 12:31 PM, Yagnesh Shah wrote:
>
>> Hello Lucene-User,
>> 	Is any one try to do highlighting with HTML pages?
>>
>> I am trying to do this using demo example by Keld H. Hansen article
>> "Unweaving a Tangled Web HTMLParser and Lucene" but I am getting
>> "null" value for text at line #47 Any Idea?
>>
>>       1 package org.apache.lucene.search.highlight;
>>       2
>>       3 import java.io.StringReader;
>>       4
>>       5 import org.apache.lucene.analysis.Analyzer;
>>       6 import org.apache.lucene.analysis.TokenStream;
>>       7 import org.apache.lucene.analysis.standard.StandardAnalyzer;
>>       8 import org.apache.lucene.queryParser.QueryParser;
>>       9 import org.apache.lucene.search.Hits;
>>      10 import org.apache.lucene.search.IndexSearcher;
>>      11 import org.apache.lucene.search.Query;
>>      12 import org.apache.lucene.search.highlight.Formatter;
>>      13 import org.apache.lucene.search.highlight.Highlighter;
>>      14 import org.apache.lucene.search.highlight.QueryScorer;
>>      15 import org.apache.lucene.search.highlight.SimpleFragmenter;
>>      16
>>      17 public class Searcher {
>>      18
>>      19    static Query query;
>>      20    static Hits hits;
>>      21
>>      22    private static final String FIELD_NAME =3D "contents";
>>      23    private static final String indexDir =3D
>> "/opt/dynamo/prod/hww-doc/hww/help/index";
>>      24
>>      25    private static Analyzer analyzer =3D new =
StandardAnalyzer();
>>      26
>>      27    public static void main(String[] args) throws Exception {
>>      28
>>      29       IndexSearcher is   =3D new IndexSearcher(indexDir);
>>      30       String searchCriteria =3D "scholarly";
>>      31       query =3D QueryParser.parse(searchCriteria, "contents",
>> analyzer);
>>      32
>>      33       hits  =3D is.search(query);
>>      34       System.out.println("found in: " + query
>> +"\nhits-length:" +hits.length());
>>      35
>>      36       doStandardHighlights();
>>      37
>>      38       is.close();
>>      39    }
>>      40
>>      41    static void doStandardHighlights() throws Exception {
>>      42       Highlighter highlighter =3D new Highlighter(new
>> MyBolder(), new QueryScorer(query));
>>      43       System.out.println("Highlighter: " + highlighter
>> +"\nhits-length:" +hits.length());
>>      44       highlighter.setTextFragmenter(new =
SimpleFragmenter(20));
>>      45       for (int i =3D 0; i < hits.length(); i++) {
>>      46          System.out.println("URL " + (i + 1) + ": " +
>> hits.doc(i).getField("path").stringValue());
>>      47          String text =3D hits.doc(i).get("FIELD_NAME");
>>      48          int maxNumFragmentsRequired =3D 2;
>>      49          String fragmentSeparator =3D "...";
>>      50          TokenStream tokenStream =3D
>> analyzer.tokenStream(FIELD_NAME, new StringReader(text));
>>      51
>>      52          String result =3D
>>      53             highlighter.getBestFragments(
>>      54                tokenStream,
>>      55                text,
>>      56                maxNumFragmentsRequired,
>>      57                fragmentSeparator);
>>      58          System.out.println("\tfound in: " + result);
>>      59       }
>>      60    }
>>      61
>>      62    private static class MyBolder implements Formatter {
>>      63         public String highlightTerm(String originalText ,
>> TokenGroup group)
>>      64         {
>>      65                 if(group.getTotalScore()<=3D0)
>>      66                 {
>>      67                         return originalText;
>>      68                 }
>>      69                 return "<b>" + originalText + "</b>";
>>      70         }
>>      71    }
>>      72
>>      73 }
>>
>> Yagnesh N. Shah
>> Senior Technology Engineer
>> CS Dept., 4th Floor
>> H. W. Wilson
>> 950 University Avenue,
>> Bronx NY 10452
>> (718) 588 8400 x2721
>> http://www.hwwilson.com
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Mar 30 23:16:43 2005
Return-Path: <java-user-return-13830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99653 invoked from network); 30 Mar 2005 23:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Mar 2005 23:16:43 -0000
Received: (qmail 49076 invoked by uid 500); 30 Mar 2005 23:16:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48882 invoked by uid 500); 30 Mar 2005 23:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48868 invoked by uid 99); 30 Mar 2005 23:16:39 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of antony.sequeira@gmail.com designates 64.233.184.199 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 15:16:37 -0800
Received: by wproxy.gmail.com with SMTP id 36so416450wra
        for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 15:16:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=UVqMKsnO5QNF4Id7b/CYKEcl/K3JkoNd2k2ge2oDrUD7H1Jkf07SsGyVAu7tOdo3rRJZQom2t8yhMbMYWgLMH37BalIOGp5nrn2BZT5/wCPXFw3ihwi9WmbEBsuuYxYb45BoYte1/Q8ceqIUV8o9TnvDmDIy0zD5m+VNLei5EY8=
Received: by 10.54.8.48 with SMTP id 48mr316221wrh;
        Wed, 30 Mar 2005 15:16:35 -0800 (PST)
Received: by 10.54.8.54 with HTTP; Wed, 30 Mar 2005 15:16:34 -0800 (PST)
Message-ID: <6fb33c1505033015161e2508e1@mail.gmail.com>
Date: Wed, 30 Mar 2005 15:16:34 -0800
From: Antony Sequeira <antony.sequeira@gmail.com>
Reply-To: Antony Sequeira <antony.sequeira@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: pre computing possible search results narrowing and hit counts on those
In-Reply-To: <424AE508.6030301@apache.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
References: <6fb33c15050329160136d91ee2@mail.gmail.com>
	 <424AE508.6030301@apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wed, 30 Mar 2005 09:42:32 -0800, Doug Cutting <cutting@apache.org> wrote:
> Antony Sequeira wrote:
> > A user does a search for say "condominium", and i show him the 50,000
> > properties that meet that description.
> >
> > I need two other pieces of information for display -
> > 1. I want to show a "select" box on the UI, which contains all the
> > cities that appear in those 50,000 documents
> > 2. Against each city I want to show the count of matching documents.
> >
> > For example the drop down might look like
> > "Los Angeles"  10000
> > "San Francisco" 5000
> >
> > (But, I do not want to show "San Jose" if none of the 50,000 documents
> > contain it)
> 
> You can use the FieldCache & HitCollector:
> 
> private class Count { int value; }
> 
> String[] docToCity = FieldCache.getStrings(indexReader, "city");
> Map cityToCount = new HashMap();
> 
> searcher.search(query, new HitCollector() {
>    public void collect(int doc, float score) {
>      String city = docToCity[doc];
>      Count count = cityToCount.get(city);
>      if (count == null) {
>        count = new Count();
>        cityToCount.put(city, count);
>      }
>      count.value++;
>    }
> });
> 
> // sort & display entries in cityToCount
> 
> Doug
> 
Based on a previous reply , I went through the java docs and came up with

 public class PreFilterCollector extends HitCollector {
        final BitVector bits = new BitVector(reader.maxDoc());
        java.util.HashMap<String,Integer> statemap = new    
java.util.HashMap<String,Integer>() ;

        public void collect(int id, float score) {
            bits.set(id);
        }

        public java.util.HashMap<String,Integer> getStateCounts() {
            try {
                int k = bits.size();
                int j = 0;
                for (int i =0; i < k; i++) {
                    if (!bits.get(i))
                        continue;
                    Document doc = reader.document(i); 
                    j++;
                    String state = doc.get("state"); // we assume one
state for now
                    if (statemap.containsKey(state)) {
                        statemap.put(state,statemap.get(state) + 1); 
                    } else {
                        statemap.put(state,1);
                    }
                }
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
            return statemap;
        }
  }

But, I have the following questions
1. My code first collects all the doc ids and then iterates over them
to collect field info. I did this becasue,
http://lucene.apache.org/java/docs/api/org/apache/lucene/search/HitCollector.html
says "This is called in an inner search loop. For good search
performance, implementations of this method should not call
Searchable.doc(int) or IndexReader.document(int) on every document
number encountered"
Have I misunderstood and doing this wrongly ?

2. Would your code be faster (under what circumstances) ?

3.  One problem i see with my current solution is that it accesses
every doc of the result  set.
One of the previous responses pointed to a solution in
http://www.mail-archive.com/java-dev@lucene.apache.org/msg00034.html
After reading it, to me it looked like that solution won't be any
better. (Looks like it walks values of terms that do not even occur in
teh current search result set).  Have I got this right ?


I am a newbee to lucene. Thanks for all the replies. Appreciate it very much.

-Antony

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 00:34:41 2005
Return-Path: <java-user-return-13831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28111 invoked from network); 31 Mar 2005 00:34:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 00:34:41 -0000
Received: (qmail 26419 invoked by uid 500); 31 Mar 2005 00:34:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26392 invoked by uid 500); 31 Mar 2005 00:34:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26378 invoked by uid 99); 31 Mar 2005 00:34:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 16:34:36 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 84DF713E200A; Wed, 30 Mar 2005 19:34:34 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 130EC13E2006
	for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 19:33:13 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA010829F1@hermes.corp.cyveillance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA010829F1@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <303e2f5075ffc5fc6371d9c435dc25ac@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: error when query contains numbers
Date: Wed, 30 Mar 2005 19:33:09 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mar 30, 2005, at 4:41 PM, Omar Didi wrote:
> I am using a QueryParser to search the index. when the query has 
> numbers, i don t get any results??
> any suggestions??

What is the .toString of the Query object instance returned from 
QueryParser?  What Analyzer are you using?  How did you index the 
field(s) being queried?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 00:35:16 2005
Return-Path: <java-user-return-13832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28385 invoked from network); 31 Mar 2005 00:35:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 00:35:15 -0000
Received: (qmail 28250 invoked by uid 500); 31 Mar 2005 00:35:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28206 invoked by uid 500); 31 Mar 2005 00:35:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28191 invoked by uid 99); 31 Mar 2005 00:35:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 16:35:09 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DD5B113E200A; Wed, 30 Mar 2005 19:35:07 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id BEA8013E2006
	for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 19:35:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <ACEIJKEFACAHGGILCJHOEECNCAAA.lmedina@ruralsource.com>
References: <ACEIJKEFACAHGGILCJHOEECNCAAA.lmedina@ruralsource.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <aac9ca011b8b2c0ffb318c38b9eb1d6e@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Newbie question
Date: Wed, 30 Mar 2005 19:34:58 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mar 30, 2005, at 4:42 PM, Luis Medina wrote:
> Newbie question here,
> is upgrading Lucene as easy as replacing the old Jar file with a newer
> version's Jar file? or do I need to recompile the application's code?

Try it and see :)

It should work fine by replacing the JAR, with no recompilation 
necessary.  The more important question is do you need to reindex.  
Most likely not, but there have been some versions of Lucene that have 
changed how some factors were computed and a reindex is needed in those 
cases to keep things in sync.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 00:38:50 2005
Return-Path: <java-user-return-13833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28839 invoked from network); 31 Mar 2005 00:38:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 00:38:50 -0000
Received: (qmail 32510 invoked by uid 500); 31 Mar 2005 00:38:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32486 invoked by uid 500); 31 Mar 2005 00:38:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32472 invoked by uid 99); 31 Mar 2005 00:38:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 16:38:46 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D618C13E200A; Wed, 30 Mar 2005 19:38:41 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 0C18813E2006
	for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 19:38:24 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <E3AD9C3F9EC34949855CDFC6FB5A6C1175511A@NYHWWEX001.hwwilson.local>
References: <E3AD9C3F9EC34949855CDFC6FB5A6C1175511A@NYHWWEX001.hwwilson.local>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <11192132ec8cf73bdce9e9a8291ef8a9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: HTML pages highlighter
Date: Wed, 30 Mar 2005 19:38:21 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:

> Hi! Eric,

Erik - with a 'k' - Sorry, I let it slide once though :)

> 	I try to modified that with this but I get compile error. Do you have 
> any code snippet of highlighting code to pull the contents from the 
> original source?

I have a whole book full of code examples :)   
http://www.lucenebook.com - Grab the source code and look in 
src/lia/tools at Highlight*.java

>  or Do you know how I can do field store?
>
>       doc.add(new Field("contents", parser.getReader(), 
> Field.Store.YES, Field.Index.NO));

You cannot store it with a Reader.  You need to use Field.Text(String, 
String), or one of the other variations.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 01:05:23 2005
Return-Path: <java-user-return-13834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32402 invoked from network); 31 Mar 2005 01:05:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 01:05:23 -0000
Received: (qmail 52140 invoked by uid 500); 31 Mar 2005 01:05:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52101 invoked by uid 500); 31 Mar 2005 01:05:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52088 invoked by uid 99); 31 Mar 2005 01:05:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 17:05:19 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: error when query contains numbers
Date: Wed, 30 Mar 2005 20:05:16 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829F3@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: error when query contains numbers
thread-index: AcU1iXBbw2FMI6DxQYCPKJkLGe3dMgAAyP4w
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


the .toString() looks excactly like the query I enter: if I search for =
"yahoo AND 200" it returns 0 hits. I am sure there are documents that =
have 200 hundreds in them. The analyzer I am using is a custom analyzer =
that has a list of stop words. I don t know much about the way data was =
indexed, I am just developing an aplication to search using the analyzer =
that was used while indexing.
my concern now is if there is an error with the way the indexing was do =
I have to reindex the documents?
thanks

On Mar 30, 2005, at 4:41 PM, Omar Didi wrote:
> I am using a QueryParser to search the index. when the query has=20
> numbers, i don t get any results??
> any suggestions??

What is the .toString of the Query object instance returned from=20
QueryParser?  What Analyzer are you using?  How did you index the=20
field(s) being queried?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 01:59:05 2005
Return-Path: <java-user-return-13835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40385 invoked from network); 31 Mar 2005 01:59:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 01:59:05 -0000
Received: (qmail 5312 invoked by uid 500); 31 Mar 2005 01:58:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5286 invoked by uid 500); 31 Mar 2005 01:58:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5272 invoked by uid 99); 31 Mar 2005 01:58:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 17:58:51 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C4DCD13E200A; Wed, 30 Mar 2005 20:58:47 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 860C913E2006
	for <java-user@lucene.apache.org>; Wed, 30 Mar 2005 20:58:21 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA010829F3@hermes.corp.cyveillance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA010829F3@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <b573b490ade1574e8729ef1492e81671@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: error when query contains numbers
Date: Wed, 30 Mar 2005 20:58:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Mar 30, 2005, at 8:05 PM, Omar Didi wrote:
> the .toString() looks excactly like the query I enter: if I search for 
> "yahoo AND 200" it returns 0 hits. I am sure there are documents that 
> have 200 hundreds in them. The analyzer I am using is a custom 
> analyzer that has a list of stop words. I don t know much about the 
> way data was indexed, I am just developing an aplication to search 
> using the analyzer that was used while indexing.

Try the tips here: 
http://wiki.apache.org/jakarta-lucene/AnalysisParalysis - you need to 
analyze your analyzer and ensure what you think was indexed actually 
was.  Also, look into using Luke - http://www.getopt.org/luke/ - to see 
what makes your index tick.

> my concern now is if there is an error with the way the indexing was 
> do I have to reindex the documents?

Yes.  That's just the nature of how it works.  Getting the analysis 
right is important stuff, and if you didn't index it, you can't search 
for it!

Feel free to share more details of your analyzer, and we'd be happy to 
"analyze" it.

	Erik


> thanks
>
> On Mar 30, 2005, at 4:41 PM, Omar Didi wrote:
>> I am using a QueryParser to search the index. when the query has
>> numbers, i don t get any results??
>> any suggestions??
>
> What is the .toString of the Query object instance returned from
> QueryParser?  What Analyzer are you using?  How did you index the
> field(s) being queried?
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 03:01:58 2005
Return-Path: <java-user-return-13836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63851 invoked from network); 31 Mar 2005 03:01:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 03:01:58 -0000
Received: (qmail 71108 invoked by uid 500); 31 Mar 2005 03:01:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70609 invoked by uid 500); 31 Mar 2005 03:01:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70594 invoked by uid 99); 31 Mar 2005 03:01:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 19:01:53 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C5359D.FC26ADEB"
Subject: RE: error when query contains numbers
Date: Wed, 30 Mar 2005 21:58:02 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010E3125@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <63434C14F9A6F74CB36B85033E4C30CA010E3125@hermes.corp.cyveillance.com>
Thread-Topic: error when query contains numbers
thread-index: AcU1lTNks9m8yIPCQN+TlSfP4Y/F8AACEC6T
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5359D.FC26ADEB
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Thanks Eric, I have looked at the way the documents were indexed and =
they are using 90% of the code using in chapter 2 and 4 of your book =
LIA. except for the stop words.=20
I will try to use Luke to see if there are any numbers indexed first.
=20

________________________________

From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wed 3/30/2005 8:58 PM
To: java-user@lucene.apache.org
Subject: Re: error when query contains numbers




On Mar 30, 2005, at 8:05 PM, Omar Didi wrote:
> the .toString() looks excactly like the query I enter: if I search for
> "yahoo AND 200" it returns 0 hits. I am sure there are documents that
> have 200 hundreds in them. The analyzer I am using is a custom
> analyzer that has a list of stop words. I don t know much about the
> way data was indexed, I am just developing an aplication to search
> using the analyzer that was used while indexing.

Try the tips here:
http://wiki.apache.org/jakarta-lucene/AnalysisParalysis - you need to
analyze your analyzer and ensure what you think was indexed actually
was.  Also, look into using Luke - http://www.getopt.org/luke/ - to see
what makes your index tick.

> my concern now is if there is an error with the way the indexing was
> do I have to reindex the documents?

Yes.  That's just the nature of how it works.  Getting the analysis
right is important stuff, and if you didn't index it, you can't search
for it!

Feel free to share more details of your analyzer, and we'd be happy to
"analyze" it.

        Erik


> thanks
>
> On Mar 30, 2005, at 4:41 PM, Omar Didi wrote:
>> I am using a QueryParser to search the index. when the query has
>> numbers, i don t get any results??
>> any suggestions??
>
> What is the .toString of the Query object instance returned from
> QueryParser?  What Analyzer are you using?  How did you index the
> field(s) being queried?
>
>       Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C5359D.FC26ADEB
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C5359D.FC26ADEB--

From java-user-return-13837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 06:56:18 2005
Return-Path: <java-user-return-13837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9460 invoked from network); 31 Mar 2005 06:56:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 06:56:18 -0000
Received: (qmail 13858 invoked by uid 500); 31 Mar 2005 06:56:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13830 invoked by uid 500); 31 Mar 2005 06:56:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13817 invoked by uid 99); 31 Mar 2005 06:56:12 -0000
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=HTML_IMAGE_ONLY_20,HTML_MESSAGE,SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from daakghar.controlnet.co.in (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 30 Mar 2005 22:56:11 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IE7G3C00.8CH for <java-user@lucene.apache.org>; Thu, 31
          Mar 2005 12:44:00 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: LUKE [ NEW VERSION ]
Date: Thu, 31 Mar 2005 12:34:03 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKCELFCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0000_01C535ED.EC5E6E20"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C535ED.EC5E6E20
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0001_01C535ED.EC5E6E20"


------=_NextPart_001_0001_01C535ED.EC5E6E20
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi Guys.

Apologies......... :(



Can Somebody Please Tell me   How to add  Custom Analyzer's  to the  new
Version of  LUKE  ,

or is there an existing Process to do the same.



Thx in advance


WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0001_01C535ED.EC5E6E20
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2><SPAN =
class=3D750155706-31032005>Hi=20
Guys.</SPAN></FONT></STRONG></P>
<P><STRONG><FONT face=3DVerdana size=3D2><SPAN=20
class=3D750155706-31032005>Apologies......... =
:(</SPAN></FONT></STRONG></P>
<P><STRONG><FONT face=3DVerdana size=3D2><SPAN=20
class=3D750155706-31032005></SPAN></FONT></STRONG>&nbsp;</P>
<P><STRONG><FONT face=3DVerdana size=3D2><SPAN =
class=3D750155706-31032005>Can Somebody=20
Please Tell me&nbsp;&nbsp; How to add&nbsp; Custom Analyzer's&nbsp; to =
the&nbsp;=20
new Version of&nbsp; LUKE&nbsp; ,</SPAN></FONT></STRONG></P>
<P><STRONG><FONT face=3DVerdana size=3D2><SPAN =
class=3D750155706-31032005>or is there=20
an existing Process to do the same.</SPAN></FONT></STRONG></P>
<P><STRONG><FONT face=3DVerdana size=3D2><SPAN=20
class=3D750155706-31032005></SPAN></FONT></STRONG>&nbsp;</P>
<P><STRONG><FONT face=3DVerdana size=3D2><SPAN =
class=3D750155706-31032005>Thx in=20
advance</SPAN></FONT></STRONG></P>
<P><IMG height=3D85 src=3D"cid:750155706@31032005-3684" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0001_01C535ED.EC5E6E20--

------=_NextPart_000_0000_01C535ED.EC5E6E20--


From java-user-return-13838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 07:29:53 2005
Return-Path: <java-user-return-13838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17773 invoked from network); 31 Mar 2005 07:29:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 07:29:53 -0000
Received: (qmail 50807 invoked by uid 500); 31 Mar 2005 07:29:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50775 invoked by uid 500); 31 Mar 2005 07:29:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50760 invoked by uid 99); 31 Mar 2005 07:29:45 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from shared4.hardhathosting.com (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 30 Mar 2005 23:29:43 -0800
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j2V7Tfq25394
	for <java-user@lucene.apache.org>; Thu, 31 Mar 2005 01:29:41 -0600
Message-ID: <424BA6E3.7060706@getopt.org>
Date: Thu, 31 Mar 2005 09:29:39 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: LUKE [ NEW VERSION ]
References: <OBELINLGKPEMCIEIJJNKCELFCCAA.karthik@controlnet.co.in>
In-Reply-To: <OBELINLGKPEMCIEIJJNKCELFCCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Karthik N S wrote:
> * * 
> 
> * Can Somebody Please Tell me   How to add  Custom Analyzer's  to the  
> new Version of  LUKE  , *

The same way as to the old version - you put them on your classpath when 
you run Luke, like this:

	java -cp lukeall.jar;myAnalyzers.jar org.getopt.luke.Luke

-- 
Best regards,
Andrzej Bialecki
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 07:36:13 2005
Return-Path: <java-user-return-13839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19122 invoked from network); 31 Mar 2005 07:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 07:36:13 -0000
Received: (qmail 60020 invoked by uid 500); 31 Mar 2005 07:36:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59992 invoked by uid 500); 31 Mar 2005 07:36:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59971 invoked by uid 99); 31 Mar 2005 07:36:05 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web41215.mail.yahoo.com (HELO web41215.mail.yahoo.com) (66.218.93.48)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 30 Mar 2005 23:36:05 -0800
Received: (qmail 56167 invoked by uid 60001); 31 Mar 2005 07:36:02 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=wws/b4gJUOhGvTBVy8QA9X80yRhu3oQyk+ncNbbQXZi/MjOfNiVwchiWlNAJxGCvfLcHhZxzOfzRPjRQ7N3DhbHeqg/SvzeZpS+CBlNpFiGwlZVhPWc+NE7Sq80FtQOdtgwJTTcpK7Scp9jBC/zW5aKRpV4lMxCTy/y5axeBheI=  ;
Message-ID: <20050331073602.56165.qmail@web41215.mail.yahoo.com>
Received: from [69.106.48.157] by web41215.mail.yahoo.com via HTTP; Thu, 31 Mar 2005 08:36:02 BST
Date: Thu, 31 Mar 2005 08:36:02 +0100 (BST)
From: pashupathinath <pashupathinathk@yahoo.com>
Subject: new bie ..
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,
  i'm a new lucene user. i've few questions regarding
indexing and searching.
  1)how do i search within tokens ..for example if
i've a string "my name is abc123". using whitespace
analyser i can search for any of these strings but
when i search for 123 the search returns zero results.
how can i search such tokens r strings ?? i want the
search to display abc123 when i search for either abc
or 123 not as a complete string.
  2)i'm fetching records from the database and adding
it to the index. how can i update the existing index
when i add a new row or delete a row from the
database. 
  

thanks,
pashupathinath.k

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 07:44:05 2005
Return-Path: <java-user-return-13840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21090 invoked from network); 31 Mar 2005 07:44:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 07:44:05 -0000
Received: (qmail 71900 invoked by uid 500); 31 Mar 2005 07:43:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71835 invoked by uid 500); 31 Mar 2005 07:43:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71777 invoked by uid 99); 31 Mar 2005 07:43:41 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web41204.mail.yahoo.com (HELO web41204.mail.yahoo.com) (66.218.93.37)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 30 Mar 2005 23:43:41 -0800
Received: (qmail 24624 invoked by uid 60001); 31 Mar 2005 07:43:37 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=6SjjMmSD0qBybZqH0dKrrNGx7fJ3CRjozdpMS9yrV37JcpKIUXS/7LrCpz3Xjuab0a6HV+f6wJlLCZ5blW+FJbP9aScR70D4WudKhH8ZulxpPotPB1ygjlZx0aXCf8lhQXMppairFjb3P1Dw3mIDA71/ztrYDE8GSA1WjDwL0Zg=  ;
Message-ID: <20050331074337.24622.qmail@web41204.mail.yahoo.com>
Received: from [69.106.48.157] by web41204.mail.yahoo.com via HTTP; Thu, 31 Mar 2005 08:43:37 BST
Date: Thu, 31 Mar 2005 08:43:37 +0100 (BST)
From: pashupathinath <pashupathinathk@yahoo.com>
Subject: searching within tokens
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,
  i'm a new lucene user. i've few questions regarding
indexing and searching.
  1)how do i search within tokens ..for example if
i've a string "my name is abc123". using whitespace
analyser i can search for any of these strings but
when i search for 123 the search returns zero results.
how can i search such tokens r strings ?? i want the
search to display abc123 when i search for either abc
or 123 not as a complete string.
  2)i'm fetching records from the database and adding
it to the index. how can i update the existing index
when i add a new row or delete a row from the
database. 
  

thanks,
pashupathinath.k

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 13:47:38 2005
Return-Path: <java-user-return-13841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38077 invoked from network); 31 Mar 2005 13:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 13:47:38 -0000
Received: (qmail 61043 invoked by uid 500); 31 Mar 2005 13:47:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60533 invoked by uid 500); 31 Mar 2005 13:47:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60520 invoked by uid 99); 31 Mar 2005 13:47:33 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from web26004.mail.ukl.yahoo.com (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 31 Mar 2005 05:47:31 -0800
Received: (qmail 97560 invoked by uid 60001); 31 Mar 2005 13:47:28 -0000
Message-ID: <20050331134728.97558.qmail@web26004.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Thu, 31 Mar 2005 14:47:28 BST
Date: Thu, 31 Mar 2005 14:47:28 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: pre computing possible search results narrowing and hit counts on those
To: java-user@lucene.apache.org, Antony Sequeira <antony.sequeira@gmail.com>
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As suggested before, the real killer for performance
in Lucene is when you have to read a stored field. It
doesn't matter how small the one field you want is,
Lucene will read *all* fields for that document off
the disk. If you have a large "body" field that will
get read too when you try read the "state" stored
field.

Your example code in the last post will fall foul of
this. The two proposed solutions (Doug's and mine)
avoid the need to read *stored* fields by making use
of the *indexed* part of your "state" field. TermDocs
is the way to find all the docs that are related to
the value of an indexed field eg all docs in the state
"Texas". 
Doug's suggested solution uses a cached mapping of
docIds to field values (using FieldCache) whereas my
approach re-reads the termDocs each time. 
I have found re-reading termDocs to be pretty fast but
you may want to sacrifice some memory for extra speed
- your choice.

Cheers,
Mark


Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 14:56:16 2005
Return-Path: <java-user-return-13842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81970 invoked from network); 31 Mar 2005 14:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 14:56:16 -0000
Received: (qmail 86555 invoked by uid 500); 31 Mar 2005 14:56:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86534 invoked by uid 500); 31 Mar 2005 14:56:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86520 invoked by uid 99); 31 Mar 2005 14:56:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from smtp200.mail.sc5.yahoo.com (HELO smtp200.mail.sc5.yahoo.com) (216.136.130.125)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 31 Mar 2005 06:56:09 -0800
Received: from unknown (HELO ?24.232.184.152?) (desantisernesto@24.232.184.152 with login)
  by smtp200.mail.sc5.yahoo.com with SMTP; 31 Mar 2005 14:49:24 -0000
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.8.4]); Thu, 31 Mar 2005 11:51:15 -0300
Message-ID: <424C0E62.10002@colaborativa.net>
Date: Thu, 31 Mar 2005 11:51:14 -0300
From: Ernesto De Santis <ernesto.desantis@colaborativa.net>
Organization: Colaborativa.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-ar, es, en-us, en
MIME-Version: 1.0
To: Lucene Users List <java-user@lucene.apache.org>
Subject: Analyzer don't work with wildcard queries, snowball analyzer.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I get an unexpected behavior when use wildcards in my queries.
I use a EnglishAnalyzer developed with SnowballAnalyzer. version 1.1_dev 
from Lucene in Action lib.

Analysis case:
When use wildcards in the middle of one word, the word in not analyzed.
Examples:

            QueryParser qp = new QueryParser("body", analyzer);
            Query q = qp.parse("ex?mple");
            String strq = q.toString();
            assertEquals("body:ex?mpl", strq);
//FAIL strq == body:ex?mple

            qp = new QueryParser("body", analyzer);
            q = qp.parse("ex*ple");
            strq = q.toString();
            assertEquals("body:ex*pl", strq);
//FAIL strq == body:ex*ple

With this behavior, the search does not find any document.

Bye
Ernesto.

-- 
Ernesto De Santis - Colaborativa.net
Crdoba 1147 Piso 6 Oficinas 3 y 4
(S2000AWO) Rosario, SF, Argentina.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 15:52:44 2005
Return-Path: <java-user-return-13843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3771 invoked from network); 31 Mar 2005 15:52:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 15:52:43 -0000
Received: (qmail 74430 invoked by uid 500); 31 Mar 2005 15:52:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74407 invoked by uid 500); 31 Mar 2005 15:52:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74384 invoked by uid 99); 31 Mar 2005 15:52:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 07:52:38 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 23F3413E2120; Thu, 31 Mar 2005 10:52:34 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E42B613E2006
	for <java-user@lucene.apache.org>; Thu, 31 Mar 2005 10:51:27 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <424C0E62.10002@colaborativa.net>
References: <424C0E62.10002@colaborativa.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Analyzer don't work with wildcard queries, snowball analyzer.
Date: Thu, 31 Mar 2005 10:51:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wildcard terms simply are not analyzed.  How could it be possible to do=20=

this?  What if I search for "a*" - how could you stem that?

	Erik

On Mar 31, 2005, at 9:51 AM, Ernesto De Santis wrote:

> Hi
>
> I get an unexpected behavior when use wildcards in my queries.
> I use a EnglishAnalyzer developed with SnowballAnalyzer. version=20
> 1.1_dev from Lucene in Action lib.
>
> Analysis case:
> When use wildcards in the middle of one word, the word in not =
analyzed.
> Examples:
>
>            QueryParser qp =3D new QueryParser("body", analyzer);
>            Query q =3D qp.parse("ex?mple");
>            String strq =3D q.toString();
>            assertEquals("body:ex?mpl", strq);
> //FAIL strq =3D=3D body:ex?mple
>
>            qp =3D new QueryParser("body", analyzer);
>            q =3D qp.parse("ex*ple");
>            strq =3D q.toString();
>            assertEquals("body:ex*pl", strq);
> //FAIL strq =3D=3D body:ex*ple
>
> With this behavior, the search does not find any document.
>
> Bye
> Ernesto.
>
> --=20
> Ernesto De Santis - Colaborativa.net
> C=F3rdoba 1147 Piso 6 Oficinas 3 y 4
> (S2000AWO) Rosario, SF, Argentina.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 16:45:06 2005
Return-Path: <java-user-return-13844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25232 invoked from network); 31 Mar 2005 16:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 16:45:06 -0000
Received: (qmail 60324 invoked by uid 500); 31 Mar 2005 16:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60301 invoked by uid 500); 31 Mar 2005 16:45:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60288 invoked by uid 99); 31 Mar 2005 16:45:01 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web41208.mail.yahoo.com (HELO web41208.mail.yahoo.com) (66.218.93.41)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 31 Mar 2005 08:44:58 -0800
Received: (qmail 17676 invoked by uid 60001); 31 Mar 2005 16:44:55 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=RRa8nAfiuHrvvFy0w5Dv+zWIvro+SD+PPueK0yUDwrlTkAEoOrRWiuUxE06N0o1DKLvNzJlITpiPKK8O3s367OiuYjKu0+QwGwP1K4ueaI7QB4equTZAu0k9oNN4OCM5MOV86H1yPWgxJCBRJEz0V5sFLHhg02pZHMszPlB9WyU=  ;
Message-ID: <20050331164455.17674.qmail@web41208.mail.yahoo.com>
Received: from [63.196.227.32] by web41208.mail.yahoo.com via HTTP; Thu, 31 Mar 2005 17:44:55 BST
Date: Thu, 31 Mar 2005 17:44:55 +0100 (BST)
From: pashupathinath <pashupathinathk@yahoo.com>
Subject: using different analyzer for searching
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

  is it possible to index using a predefined analyzer
and search using a custom analyzer ??
  i'm searching using the built in whitespace
analyser. the problem is when i'm searching for a part
of a string the search results are zero.
  i'm using white space analyzer. for example if the
statement is "my name is abc123" the search for abc or
123 doesnt return any hits. 
  anyinsight into this ?? 

thanks,
pashupathinath.k

Send instant messages to your online friends http://uk.messenger.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 17:24:43 2005
Return-Path: <java-user-return-13845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42848 invoked from network); 31 Mar 2005 17:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 17:24:42 -0000
Received: (qmail 21815 invoked by uid 500); 31 Mar 2005 17:24:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21780 invoked by uid 500); 31 Mar 2005 17:24:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21764 invoked by uid 99); 31 Mar 2005 17:24:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from smtp200.mail.sc5.yahoo.com (HELO smtp200.mail.sc5.yahoo.com) (216.136.130.125)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 31 Mar 2005 09:24:32 -0800
Received: from unknown (HELO ?24.232.184.152?) (desantisernesto@24.232.184.152 with login)
  by smtp200.mail.sc5.yahoo.com with SMTP; 31 Mar 2005 17:24:28 -0000
Received: from 127.0.0.1 (AVG SMTP 7.0.308 [266.8.4]); Thu, 31 Mar 2005 14:26:20 -0300
Message-ID: <424C32BC.80304@colaborativa.net>
Date: Thu, 31 Mar 2005 14:26:20 -0300
From: Ernesto De Santis <ernesto.desantis@colaborativa.net>
Organization: Colaborativa.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-ar, es, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Analyzer don't work with wildcard queries, snowball analyzer.
References: <424C0E62.10002@colaborativa.net> <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
In-Reply-To: <297f128e646a94719e98205e5e42c4bc@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik

Ok, in PrefixQuery cases, non analyze is right.

But you think that non analyze in WildcardQuery is right?

You search "example" and obtain x results.
You search "ex?mple" and don't obtain any result.
This is correct for you?
It is difficult to analyze wildcard queries in lucene code?

Ernesto.


Erik Hatcher escribi:

> Wildcard terms simply are not analyzed.  How could it be possible to 
> do this?  What if I search for "a*" - how could you stem that?
>
>     Erik
>
> On Mar 31, 2005, at 9:51 AM, Ernesto De Santis wrote:
>
>> Hi
>>
>> I get an unexpected behavior when use wildcards in my queries.
>> I use a EnglishAnalyzer developed with SnowballAnalyzer. version 
>> 1.1_dev from Lucene in Action lib.
>>
>> Analysis case:
>> When use wildcards in the middle of one word, the word in not analyzed.
>> Examples:
>>
>>            QueryParser qp = new QueryParser("body", analyzer);
>>            Query q = qp.parse("ex?mple");
>>            String strq = q.toString();
>>            assertEquals("body:ex?mpl", strq);
>> //FAIL strq == body:ex?mple
>>
>>            qp = new QueryParser("body", analyzer);
>>            q = qp.parse("ex*ple");
>>            strq = q.toString();
>>            assertEquals("body:ex*pl", strq);
>> //FAIL strq == body:ex*ple
>>
>> With this behavior, the search does not find any document.
>>
>> Bye
>> Ernesto.
>>
>> -- 
>> Ernesto De Santis - Colaborativa.net
>> Crdoba 1147 Piso 6 Oficinas 3 y 4
>> (S2000AWO) Rosario, SF, Argentina.
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
Ernesto De Santis - Colaborativa.net
Crdoba 1147 Piso 6 Oficinas 3 y 4
(S2000AWO) Rosario, SF, Argentina.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 19:22:27 2005
Return-Path: <java-user-return-13846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97165 invoked from network); 31 Mar 2005 19:22:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 19:22:27 -0000
Received: (qmail 44977 invoked by uid 500); 31 Mar 2005 19:22:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44868 invoked by uid 500); 31 Mar 2005 19:22:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44832 invoked by uid 99); 31 Mar 2005 19:22:14 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31109.mail.mud.yahoo.com (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 31 Mar 2005 11:22:13 -0800
Received: (qmail 95928 invoked by uid 60001); 31 Mar 2005 19:22:10 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=qTs7KHCltUxA6ceg9kXkVxnb0FoPZjSXIK3Pc+0hGABaHvz54tTShut2TInJnRV8PbmtMQOpqR+YqM/7Irs32Jezi4eUm7F7wnRfDEIvZeg0kaKB02HOLs2DjVh2iQpN4ohulAet66SmiVNGhu5jfZ0UYvfIwm4GVYN5p6Hj1mQ=  ;
Message-ID: <20050331192210.95926.qmail@web31109.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31109.mail.mud.yahoo.com via HTTP; Thu, 31 Mar 2005 11:22:10 PST
Date: Thu, 31 Mar 2005 11:22:10 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: new bie ..
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

For 1) you'll need to write your own Analyzer that knows that you want
to be able to search on "abc", "123", and probably "abc123". 
WhitespaceAnalyzer just breaks input on spaces.

2) I think I answered that in the Lucene in Action forum.

Otis

--- pashupathinath <pashupathinathk@yahoo.com> wrote:
> hi,
>   i'm a new lucene user. i've few questions regarding
> indexing and searching.
>   1)how do i search within tokens ..for example if
> i've a string "my name is abc123". using whitespace
> analyser i can search for any of these strings but
> when i search for 123 the search returns zero results.
> how can i search such tokens r strings ?? i want the
> search to display abc123 when i search for either abc
> or 123 not as a complete string.
>   2)i'm fetching records from the database and adding
> it to the index. how can i update the existing index
> when i add a new row or delete a row from the
> database. 
>   
> 
> thanks,
> pashupathinath.k
> 
> Send instant messages to your online friends
> http://uk.messenger.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 19:24:38 2005
Return-Path: <java-user-return-13847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99407 invoked from network); 31 Mar 2005 19:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 19:24:38 -0000
Received: (qmail 55215 invoked by uid 500); 31 Mar 2005 19:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55184 invoked by uid 500); 31 Mar 2005 19:24:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55171 invoked by uid 99); 31 Mar 2005 19:24:31 -0000
X-ASF-Spam-Status: No, hits=2.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web31111.mail.mud.yahoo.com (HELO web31111.mail.mud.yahoo.com) (68.142.200.230)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 31 Mar 2005 11:24:25 -0800
Received: (qmail 15302 invoked by uid 60001); 31 Mar 2005 19:24:14 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=VCkuR7M2nEoZ423zaUj8nYlBX6JJlnPjZNi9VLOrXDLH0J2p8kCjxQC2+9o2zPlCPQlswv6tNqyjAZhZkJt/cUaFIB5wy0999VCTnQrgRiFMOGDyoQY7j+wPY4OKsx9nr1VjjEWj3SL16efhHJUTdid/dAjipcZ5FLV/D1ghfN4=  ;
Message-ID: <20050331192414.15300.qmail@web31111.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31111.mail.mud.yahoo.com via HTTP; Thu, 31 Mar 2005 11:24:14 PST
Date: Thu, 31 Mar 2005 11:24:14 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Newbie question
To: java-user@lucene.apache.org
In-Reply-To: 6667
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's as easy as replacing a Jar, if you are upgrading from a Lucene
version with compatible index format.  Some versions changed the index
format.  See
http://cvs.apache.org/viewcvs.cgi/*checkout*/jakarta-lucene/CHANGES.txt?rev=1.96.2.6
for index format change information.

If the index format changed, you will need to replace the Jar and
rebuild your index(es) with the new Jar.

Otis


--- Luis Medina <lmedina@ruralsource.com> wrote:
> Newbie question here,
> is upgrading Lucene as easy as replacing the old Jar file with a
> newer
> version's Jar file? or do I need to recompile the application's code?
> 
> Thanks,
> Luis
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 22:00:56 2005
Return-Path: <java-user-return-13848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96030 invoked from network); 31 Mar 2005 22:00:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 22:00:56 -0000
Received: (qmail 4550 invoked by uid 500); 31 Mar 2005 22:00:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4512 invoked by uid 500); 31 Mar 2005 22:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4499 invoked by uid 99); 31 Mar 2005 22:00:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 14:00:51 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: error when query contains numbers
Date: Thu, 31 Mar 2005 17:00:46 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829F4@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: error when query contains numbers
thread-index: AcU1lTNks9m8yIPCQN+TlSfP4Y/F8AApzaEQ
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have used luke to look inside the index and i haven't found any =
numbers except for the fields that were indexed as keywords. i have used =
the AnalyzerDemo class in LIA, I got the following output:

Analyzing "welcome to the year 2005 yahoo123"
  WhitespaceAnalyzer:
    [welcome] [to] [the] [year] [2005] [yahoo123]=20

  SimpleAnalyzer:
    [welcome] [to] [the] [year] [yahoo]=20

  StopAnalyzer:
    [welcome] [year] [yahoo]=20

  StandardAnalyzer:
    [welcome] [year] [2005] [yahoo123]=20

  CyAnalyzer:
    [year] [2005] [yahoo123]=20
the analyzer I am using doesn t discard numbers but I can t find them. =
any ideas??


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, March 30, 2005 8:58 PM
To: java-user@lucene.apache.org
Subject: Re: error when query contains numbers



On Mar 30, 2005, at 8:05 PM, Omar Didi wrote:
> the .toString() looks excactly like the query I enter: if I search for =

> "yahoo AND 200" it returns 0 hits. I am sure there are documents that=20
> have 200 hundreds in them. The analyzer I am using is a custom=20
> analyzer that has a list of stop words. I don t know much about the=20
> way data was indexed, I am just developing an aplication to search=20
> using the analyzer that was used while indexing.

Try the tips here:=20
http://wiki.apache.org/jakarta-lucene/AnalysisParalysis - you need to=20
analyze your analyzer and ensure what you think was indexed actually=20
was.  Also, look into using Luke - http://www.getopt.org/luke/ - to see=20
what makes your index tick.

> my concern now is if there is an error with the way the indexing was=20
> do I have to reindex the documents?

Yes.  That's just the nature of how it works.  Getting the analysis=20
right is important stuff, and if you didn't index it, you can't search=20
for it!

Feel free to share more details of your analyzer, and we'd be happy to=20
"analyze" it.

	Erik


> thanks
>
> On Mar 30, 2005, at 4:41 PM, Omar Didi wrote:
>> I am using a QueryParser to search the index. when the query has
>> numbers, i don t get any results??
>> any suggestions??
>
> What is the .toString of the Query object instance returned from
> QueryParser?  What Analyzer are you using?  How did you index the
> field(s) being queried?
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 22:20:37 2005
Return-Path: <java-user-return-13849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3287 invoked from network); 31 Mar 2005 22:20:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 22:20:37 -0000
Received: (qmail 29697 invoked by uid 500); 31 Mar 2005 22:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29664 invoked by uid 500); 31 Mar 2005 22:20:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29651 invoked by uid 99); 31 Mar 2005 22:20:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 14:20:22 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EB71813E2121; Thu, 31 Mar 2005 17:20:17 -0500 (EST)
Received: from [192.168.1.102] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 9021413E2120
	for <java-user@lucene.apache.org>; Thu, 31 Mar 2005 17:19:52 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619.2)
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA010829F4@hermes.corp.cyveillance.com>
References: <63434C14F9A6F74CB36B85033E4C30CA010829F4@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <562a5c7fdbb07703b7baabf705afafaa@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: error when query contains numbers
Date: Thu, 31 Mar 2005 17:19:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.619.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-1.2 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mar 31, 2005, at 5:00 PM, Omar Didi wrote:
>   CyAnalyzer:
>     [year] [2005] [yahoo123]
> the analyzer I am using doesn t discard numbers but I can t find them. 
> any ideas??

If that is the analyzer you are using for indexing and you are using a 
tokenized field type then those tokens will be indexed as you see 
there.

My only theory now is that you've got something misconfigured.  Back up 
and index a very simple single document index to the filesystem and 
check it out with Luke.  Send us that indexing code if you do not see 
numbers there.

	Erik


>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, March 30, 2005 8:58 PM
> To: java-user@lucene.apache.org
> Subject: Re: error when query contains numbers
>
>
>
> On Mar 30, 2005, at 8:05 PM, Omar Didi wrote:
>> the .toString() looks excactly like the query I enter: if I search for
>> "yahoo AND 200" it returns 0 hits. I am sure there are documents that
>> have 200 hundreds in them. The analyzer I am using is a custom
>> analyzer that has a list of stop words. I don t know much about the
>> way data was indexed, I am just developing an aplication to search
>> using the analyzer that was used while indexing.
>
> Try the tips here:
> http://wiki.apache.org/jakarta-lucene/AnalysisParalysis - you need to
> analyze your analyzer and ensure what you think was indexed actually
> was.  Also, look into using Luke - http://www.getopt.org/luke/ - to see
> what makes your index tick.
>
>> my concern now is if there is an error with the way the indexing was
>> do I have to reindex the documents?
>
> Yes.  That's just the nature of how it works.  Getting the analysis
> right is important stuff, and if you didn't index it, you can't search
> for it!
>
> Feel free to share more details of your analyzer, and we'd be happy to
> "analyze" it.
>
> 	Erik
>
>
>> thanks
>>
>> On Mar 30, 2005, at 4:41 PM, Omar Didi wrote:
>>> I am using a QueryParser to search the index. when the query has
>>> numbers, i don t get any results??
>>> any suggestions??
>>
>> What is the .toString of the Query object instance returned from
>> QueryParser?  What Analyzer are you using?  How did you index the
>> field(s) being queried?
>>
>> 	Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 22:35:13 2005
Return-Path: <java-user-return-13850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7992 invoked from network); 31 Mar 2005 22:35:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 22:35:12 -0000
Received: (qmail 48428 invoked by uid 500); 31 Mar 2005 22:35:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48407 invoked by uid 500); 31 Mar 2005 22:35:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48388 invoked by uid 99); 31 Mar 2005 22:35:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.cyveillance.com (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 14:35:08 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: error when query contains numbers
Date: Thu, 31 Mar 2005 17:35:02 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA010829F5@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: error when query contains numbers
thread-index: AcU2P9ivCQmDxVDPSheT2ttNyasB/AAAdKNg
From: "Omar Didi" <odidi@Cyveillance.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I did index new documents and they are fine. thanks for your help Eric.

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Thursday, March 31, 2005 5:20 PM
To: java-user@lucene.apache.org
Subject: Re: error when query contains numbers


On Mar 31, 2005, at 5:00 PM, Omar Didi wrote:
>   CyAnalyzer:
>     [year] [2005] [yahoo123]
> the analyzer I am using doesn t discard numbers but I can t find them. =

> any ideas??

If that is the analyzer you are using for indexing and you are using a=20
tokenized field type then those tokens will be indexed as you see=20
there.

My only theory now is that you've got something misconfigured.  Back up=20
and index a very simple single document index to the filesystem and=20
check it out with Luke.  Send us that indexing code if you do not see=20
numbers there.

	Erik


>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, March 30, 2005 8:58 PM
> To: java-user@lucene.apache.org
> Subject: Re: error when query contains numbers
>
>
>
> On Mar 30, 2005, at 8:05 PM, Omar Didi wrote:
>> the .toString() looks excactly like the query I enter: if I search =
for
>> "yahoo AND 200" it returns 0 hits. I am sure there are documents that
>> have 200 hundreds in them. The analyzer I am using is a custom
>> analyzer that has a list of stop words. I don t know much about the
>> way data was indexed, I am just developing an aplication to search
>> using the analyzer that was used while indexing.
>
> Try the tips here:
> http://wiki.apache.org/jakarta-lucene/AnalysisParalysis - you need to
> analyze your analyzer and ensure what you think was indexed actually
> was.  Also, look into using Luke - http://www.getopt.org/luke/ - to =
see
> what makes your index tick.
>
>> my concern now is if there is an error with the way the indexing was
>> do I have to reindex the documents?
>
> Yes.  That's just the nature of how it works.  Getting the analysis
> right is important stuff, and if you didn't index it, you can't search
> for it!
>
> Feel free to share more details of your analyzer, and we'd be happy to
> "analyze" it.
>
> 	Erik
>
>
>> thanks
>>
>> On Mar 30, 2005, at 4:41 PM, Omar Didi wrote:
>>> I am using a QueryParser to search the index. when the query has
>>> numbers, i don t get any results??
>>> any suggestions??
>>
>> What is the .toString of the Query object instance returned from
>> QueryParser?  What Analyzer are you using?  How did you index the
>> field(s) being queried?
>>
>> 	Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-13851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Mar 31 23:36:28 2005
Return-Path: <java-user-return-13851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31449 invoked from network); 31 Mar 2005 23:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Mar 2005 23:36:27 -0000
Received: (qmail 582 invoked by uid 500); 31 Mar 2005 23:36:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 554 invoked by uid 500); 31 Mar 2005 23:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 541 invoked by uid 99); 31 Mar 2005 23:36:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from nyhwwex001a.hwwilson.com (HELO NYHWWEX001.hwwilson.local) (208.238.105.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 31 Mar 2005 15:36:21 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: HTML pages highlighter
Date: Thu, 31 Mar 2005 18:36:18 -0500
Message-ID: <E3AD9C3F9EC34949855CDFC6FB5A6C11755123@NYHWWEX001.hwwilson.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTML pages highlighter
Thread-Index: AcU1igTUrMzmZsUrQFyVnbIIxwCGFwAwMbbQ
From: "Yagnesh Shah" <yshah@hwwilson.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi! Eric,
	I have modified HTMLDocument.java try section to used =
doc.add(Field.Text("contents", l)); I am able to compile with following =
warning about depricated API. But I am still unable to see any value.

############ compile warning #########
compile-demo:
    [javac] Compiling 1 source file to =
/opt/dynamo/trunk/build/classes/demo
    [javac] Note: =
/opt/dynamo/trunk/src/demo/org/apache/lucene/demo/HTMLDocument
.java uses or overrides a deprecated API.
    [javac] Note: Recompile with -deprecation for details.

jar-demo:
      [jar] Building jar: =
/opt/dynamo/trunk/build/lucene-demos-1.9-rc1-devYS.jar


############### code change #############

    try {
      fis =3D new FileInputStream(f);
      HTMLParser parser =3D new HTMLParser(fis);

      // Add the tag-stripped contents as a Reader-valued Text field so =
it will
      // get tokenized and indexed.
//      doc.add(new Field("contents", parser.getReader()));
      LineNumberReader reader =3D new =
LineNumberReader(parser.getReader());
      for (String l =3D reader.readLine(); l !=3D null; l =3D =
reader.readLine())
//        System.out.println(l);
      doc.add(Field.Text("contents", l));

      // Add the summary as a field that is stored and returned with
      // hit documents for display.
      doc.add(new Field("summary", parser.getSummary(), Field.Store.YES, =
Field.Index.NO));

      // Add the title as a field that it can be searched and that is =
stored.
      doc.add(new Field("title", parser.getTitle(), Field.Store.YES, =
Field.Index.TOKENIZED));
    }



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, March 30, 2005 7:38 PM
To: java-user@lucene.apache.org
Subject: Re: HTML pages highlighter



On Mar 30, 2005, at 4:46 PM, Yagnesh Shah wrote:

> Hi! Eric,

Erik - with a 'k' - Sorry, I let it slide once though :)

> 	I try to modified that with this but I get compile error. Do you have =

> any code snippet of highlighting code to pull the contents from the=20
> original source?

I have a whole book full of code examples :)  =20
http://www.lucenebook.com - Grab the source code and look in=20
src/lia/tools at Highlight*.java

>  or Do you know how I can do field store?
>
>       doc.add(new Field("contents", parser.getReader(),=20
> Field.Store.YES, Field.Index.NO));

You cannot store it with a Reader.  You need to use Field.Text(String,=20
String), or one of the other variations.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


