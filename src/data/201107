From java-user-return-50235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  1 05:57:55 2011
Return-Path: <java-user-return-50235-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A00E7463A
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  1 Jul 2011 05:57:55 +0000 (UTC)
Received: (qmail 40684 invoked by uid 500); 1 Jul 2011 05:57:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38433 invoked by uid 500); 1 Jul 2011 05:57:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38393 invoked by uid 99); 1 Jul 2011 05:57:20 -0000
Received: from minotaur.apache.org (HELO minotaur.apache.org) (140.211.11.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2011 05:57:20 +0000
Received: from localhost (HELO mail-bw0-f48.google.com) (127.0.0.1)
  (smtp-auth username rmuir, mechanism plain)
  by minotaur.apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2011 05:57:19 +0000
Received: by bwb5 with SMTP id 5so4134523bwb.35
        for <multiple recipients>; Thu, 30 Jun 2011 22:57:17 -0700 (PDT)
Received: by 10.205.82.67 with SMTP id ab3mr2632622bkc.166.1309499837253; Thu,
 30 Jun 2011 22:57:17 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.57.83 with HTTP; Thu, 30 Jun 2011 22:56:57 -0700 (PDT)
From: Robert Muir <rmuir@apache.org>
Date: Fri, 1 Jul 2011 01:56:57 -0400
Message-ID: <BANLkTikCEy6We+BQQg4wVexJJGiGUS8_ew@mail.gmail.com>
Subject: [ANNOUNCE] Apache Lucene 3.3
To: general@lucene.apache.org, dev@lucene.apache.org, 
	java-user@lucene.apache.org, announce@apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

July 2011, Apache Lucene=E2=84=A2 3.3 available
The Lucene PMC is pleased to announce the release of Apache Lucene 3.3.

Apache Lucene is a high-performance, full-featured text search engine
library written entirely in Java. It is a technology suitable for nearly
any application that requires full-text search, especially cross-platform.

This release contains numerous bug fixes, optimizations, and
improvements, some of which are highlighted below.  The release
is available for immediate download at:
   http://www.apache.org/dyn/closer.cgi/lucene/java (see note below).

See the CHANGES.txt file included with the release for a full list of detai=
ls.

Lucene 3.3 Release Highlights:

 * The spellchecker module now includes suggest/auto-complete functionality=
,
   with three implementations: Jaspell, Ternary Trie, and Finite State.

 * Support for merging results from multiple shards, for both "normal"
   search results (TopDocs.merge) as well as grouped results using the
   grouping module (SearchGroup.merge, TopGroups.merge).

 * An optimized implementation of KStem, a less aggressive stemmer
   for English.

 * Single-pass grouping implementation based on block document indexing.

 * Improvements to MMapDirectory (now also the default implementation
   returned by FSDirectory.open on 64-bit Linux).

 * NRTManager simplifies handling near-real-time search with multiple
   search threads, allowing the application to control which indexing
   changes must be visible to which search requests.

 * TwoPhaseCommitTool facilitates performing a multi-resource
   two-phased commit, including IndexWriter.

 * The default merge policy, TieredMergePolicy, has a new method
   (set/getReclaimDeletesWeight) to control how aggressively it
   targets segments with deletions, and is now more aggressive than
   before by default.

 * PKIndexSplitter tool splits an index by a mid-point term.

Note: The Apache Software Foundation uses an extensive mirroring network fo=
r
distributing releases.  It is possible that the mirror you are using may no=
t
have replicated the release yet.  If that is the case, please try another
mirror.  This also goes for Maven access.

Thanks,
Apache Lucene Developers

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jul  2 12:51:15 2011
Return-Path: <java-user-return-50236-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3FF2063CC
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat,  2 Jul 2011 12:51:15 +0000 (UTC)
Received: (qmail 19389 invoked by uid 500); 2 Jul 2011 12:51:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19246 invoked by uid 500); 2 Jul 2011 12:51:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19238 invoked by uid 99); 2 Jul 2011 12:51:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Jul 2011 12:51:10 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,MSGID_MULTIPLE_AT,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ralf.heyde@gmx.de designates 213.165.64.23 as permitted sender)
Received: from [213.165.64.23] (HELO mailout-de.gmx.net) (213.165.64.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 02 Jul 2011 12:51:02 +0000
Received: (qmail invoked by alias); 02 Jul 2011 12:50:41 -0000
Received: from e177082185.adsl.alicedsl.de (EHLO xooPC) [85.177.82.185]
  by mail.gmx.net (mp023) with SMTP; 02 Jul 2011 14:50:41 +0200
X-Authenticated: #33995810
X-Provags-ID: V01U2FsdGVkX1+SJjRxNJ+SPmWgfhvCzK6vOvUId7t0U39Joapu3t
	fffeEG15xe8rht
From: "Ralf Heyde" <ralf.heyde@gmx.de>
To: <java-user@lucene.apache.org>
References: <08230D4C8E666D479F6DE495A7684DCD0B463BDF@JSCPCWEXMAA1.bsg.ad.adp.com>
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0B463BDF@JSCPCWEXMAA1.bsg.ad.adp.com>
Subject: RE: Too many open files and ulimit limits reached 
Date: Sat, 2 Jul 2011 14:50:50 +0200
Message-ID: <000501cc38b6$ac767730$05636590$@heyde@gmx.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: Acw3Z5cmslosWQE7SJKzqxV+QsBvVgBTqi4Q
Content-Language: de
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Dean,

can you describe your problem more in detail? 
Some time ago I used Lucene to Index 50-Millions of medium-sized-text
documents. But I didn't run into a problem having 1000th of open files.
Maybe you can explain, what are you trying to do?

Regards, Ralf


-----Original Message-----
From: Hiller, Dean x66079 [mailto:dean.hiller@broadridge.com] 
Sent: Donnerstag, 30. Juni 2011 22:52
To: java-user@lucene.apache.org
Subject: Too many open files and ulimit limits reached 

When I do a writer.open(), writer.add(), writer.close(), how many files can
I expect to be opened with Lucene.

I am running indexes on some very big data so we have 160000 writers open
and I hit the limit of 200000 on my machine so I increased it to the max of
1048576 files open, BUT that might not be enough???  I may have to lower my
cache of 160000 to be smaller so curious on how many files open per index.

Thanks,
Dean

This message and any attachments are intended only for the use of the
addressee and may contain information that is privileged and confidential.
If the reader of the message is not the intended recipient or an authorized
representative of the intended recipient, you are hereby notified that any
dissemination of this communication is strictly prohibited. If you have
received this communication in error, please notify us immediately by e-mail
and delete the message and any attachments from your system.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jul  3 12:39:11 2011
Return-Path: <java-user-return-50237-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CA15D4964
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  3 Jul 2011 12:39:11 +0000 (UTC)
Received: (qmail 20298 invoked by uid 500); 3 Jul 2011 12:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20161 invoked by uid 500); 3 Jul 2011 12:39:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20152 invoked by uid 99); 3 Jul 2011 12:39:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jul 2011 12:39:08 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of matsuo@gmx.net designates 213.165.64.22 as permitted sender)
Received: from [213.165.64.22] (HELO mailout-de.gmx.net) (213.165.64.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 03 Jul 2011 12:39:00 +0000
Received: (qmail 10015 invoked by uid 0); 3 Jul 2011 12:38:40 -0000
Received: from 92.228.247.108 by www041.gmx.net with HTTP;
 Sun, 03 Jul 2011 14:38:39 +0200 (CEST)
Content-Type: text/plain; charset="utf-8"
Date: Sun, 03 Jul 2011 14:38:39 +0200
From: "Jan Rothhaar" <matsuo@gmx.net>
In-Reply-To: <1309696007.17226.ezmlm@lucene.apache.org>
Message-ID: <20110703123839.322920@gmx.net>
MIME-Version: 1.0
References: <1309696007.17226.ezmlm@lucene.apache.org>
Subject: Re: WELCOME to java-user@lucene.apache.org
To: java-user@lucene.apache.org
X-Authenticated: #12741154
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX189DPRiOgg9oNFo1Hd+NrZ86+mxy5VP4RJxJsdt1x
 rkUV+Pvr991o2ODaqMpyCM+IhAz8r0vu1ulQ== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: +Folem80RkkNTlYQsWRqqwZudWkvKBPR
X-Virus-Checked: Checked by ClamAV on apache.org

Hi everybody,

I have a pretty generic question about token filters, and I am not really sure whether it is a developer or a configuration question:

How exactly do I make lucene map letters to each other, e.g. make it treat both 'a' and 'á' as one and the same letter, or both '写' and '寫' one and the same character? I am sure this question has appeared before and there are sample implementations or sample configuration files out there, but I could not find them on my own.

I only need to map single letters (i.e. no 'oe' <=> 'ö'), but in a multi-byte charset. I have some modest experience in programming in java, but am far from being a guru.

Any help is appreciated.

Thanks in advance,

Jan
-- 
Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jul  3 16:06:22 2011
Return-Path: <java-user-return-50238-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 38DC243EB
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun,  3 Jul 2011 16:06:22 +0000 (UTC)
Received: (qmail 50569 invoked by uid 500); 3 Jul 2011 16:06:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50513 invoked by uid 500); 3 Jul 2011 16:06:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50505 invoked by uid 99); 3 Jul 2011 16:06:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jul 2011 16:06:19 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jul 2011 16:06:10 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 87E663672933;
	Sun,  3 Jul 2011 12:05:33 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id nyh1U5NV5p-G; Sun,  3 Jul 2011 12:05:28 -0400 (EDT)
Received: from [192.168.0.154] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 9D05936728CB;
	Sun,  3 Jul 2011 12:05:28 -0400 (EDT)
Message-ID: <4E109347.3040901@ifactory.com>
Date: Sun, 03 Jul 2011 12:05:27 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Jan Rothhaar <matsuo@gmx.net>
Subject: Re: WELCOME to java-user@lucene.apache.org
References: <1309696007.17226.ezmlm@lucene.apache.org> <20110703123839.322920@gmx.net>
In-Reply-To: <20110703123839.322920@gmx.net>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

You should take a look at org.apache.solr.analysis.MappingCharFilter, 
which provides a generic table-based approach for use with solr.  There 
are also a lot of other interesting CharFilters in the same package.  
For lucene-only use, there's 
org.apache.lucene.analysis.icu.ICUFoldingFilter, which looks very 
promising, and I'm sure there are others I don't know about.

-Mike

On 7/3/2011 8:38 AM, Jan Rothhaar wrote:
> Hi everybody,
>
> I have a pretty generic question about token filters, and I am not really sure whether it is a developer or a configuration question:
>
> How exactly do I make lucene map letters to each other, e.g. make it treat both 'a' and 'á' as one and the same letter, or both '写' and '寫' one and the same character? I am sure this question has appeared before and there are sample implementations or sample configuration files out there, but I could not find them on my own.
>
> I only need to map single letters (i.e. no 'oe'<=>  'ö'), but in a multi-byte charset. I have some modest experience in programming in java, but am far from being a guru.
>
> Any help is appreciated.
>
> Thanks in advance,
>
> Jan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul  4 08:22:29 2011
Return-Path: <java-user-return-50239-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A0F3D6E80
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  4 Jul 2011 08:22:29 +0000 (UTC)
Received: (qmail 46019 invoked by uid 500); 4 Jul 2011 08:22:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44634 invoked by uid 500); 4 Jul 2011 08:22:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44556 invoked by uid 99); 4 Jul 2011 08:21:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2011 08:21:52 +0000
X-ASF-Spam-Status: No, hits=1.6 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of govinsb90@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2011 08:21:45 +0000
Received: by vxd2 with SMTP id 2so5919893vxd.35
        for <java-user@lucene.apache.org>; Mon, 04 Jul 2011 01:21:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=2IHdNHn3xFfamgjt0nU5JmQ9n653MAgTA+R91apn7uI=;
        b=Ws78LHbVxdUU7NH52FSNXKaccoRPW0aPRnsoYqonajygxtINTh7rtUkoqNXETwKe0k
         TNjEENLuf48YqBMacUnFAZNd82tjAU1EOg3gvL8umG/mF7cCIImtLGZAStinvpmnOAKD
         CDAbJJ9I/kDK7YhI4BL0mMBS/NVWkA5X99W4c=
MIME-Version: 1.0
Received: by 10.220.80.76 with SMTP id s12mr2071290vck.266.1309767684636; Mon,
 04 Jul 2011 01:21:24 -0700 (PDT)
Received: by 10.220.202.137 with HTTP; Mon, 4 Jul 2011 01:21:24 -0700 (PDT)
Date: Mon, 4 Jul 2011 01:21:24 -0700
Message-ID: <CAArCri5eGmDns2FSu_Lhw=v6-Sb-85UmkStz38TZ3jH5d1S+AA@mail.gmail.com>
Subject: Escaping Special Characters
From: govind bhardwaj <govinsb90@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636283e1a94c15b04a73a0d2c

--001636283e1a94c15b04a73a0d2c
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I am using Lucene version 3.1
Previously I had trouble regarding special characters as when I entered
"---" as my input, it gave the following error


*Caused by: org.apache.lucene.queryParser.ParseException: Encountered " "-"
"- "" at line 1, column 1.
Was expecting one of:
    "(" ...
    "*" ...
    <QUOTED> ...
    <TERM> ...
    <PREFIXTERM> ...
    <WILDTERM> ...
    "[" ...
    "{" ...
    <NUMBER> ...
    <TERM> ...
    "*" ...

*To overcome this, I used escape() method of the QueryParser and worked
fine. But now, unlike previously, the search for "item*" yielded no results
because I guess it escaped the asterisk character too. How should I go about
preventing this from happening ? I am using MultiFieldQueryParser.



Govind
*

*--
No trees were harmed in the creation of this message, but several thousand
electrons were mildly inconvenienced.

--001636283e1a94c15b04a73a0d2c--

From java-user-return-50240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul  4 17:17:04 2011
Return-Path: <java-user-return-50240-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9A64A663C
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon,  4 Jul 2011 17:17:04 +0000 (UTC)
Received: (qmail 18858 invoked by uid 500); 4 Jul 2011 17:17:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18745 invoked by uid 500); 4 Jul 2011 17:17:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18737 invoked by uid 99); 4 Jul 2011 17:17:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2011 17:17:01 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adrianocrestani@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2011 17:16:53 +0000
Received: by pzk10 with SMTP id 10so1203156pzk.35
        for <java-user@lucene.apache.org>; Mon, 04 Jul 2011 10:16:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=HLdwf0ZSfJb/X7r5c+l6xMd846MLPw4tItalYjJgQr4=;
        b=RJrZs6j89kYX+XMmEZlw86gFY1zRzNLx8r7g71zkJsiYfdGN3pdUySLt/7p5VS/FcL
         zra3IqRDFIhVFuLfy1V5L++lGl5v5rcZu254RJLyDqV13OMQYiNSDYfydat/Joz1sSfu
         SGkubapQTYq6SEFrFHLbXsodMKucSrQsu+0No=
Received: by 10.68.37.68 with SMTP id w4mr7780362pbj.179.1309799792098; Mon,
 04 Jul 2011 10:16:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.59.9 with HTTP; Mon, 4 Jul 2011 10:16:12 -0700 (PDT)
In-Reply-To: <CAArCri5eGmDns2FSu_Lhw=v6-Sb-85UmkStz38TZ3jH5d1S+AA@mail.gmail.com>
References: <CAArCri5eGmDns2FSu_Lhw=v6-Sb-85UmkStz38TZ3jH5d1S+AA@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Mon, 4 Jul 2011 13:16:12 -0400
Message-ID: <CAN3gF-Ch-hPFu8BA=tq1DWG2usyKYYno1ODWbz6BgF9ECoAE+g@mail.gmail.com>
Subject: Re: Escaping Special Characters
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec51f93d755bd2f04a741875c
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec51f93d755bd2f04a741875c
Content-Type: text/plain; charset=ISO-8859-1

Hi Govind,

escape() method should only be used to escape term, not the query itself. If
the user is entering the query, it's his responsibility to escape the query.

On Mon, Jul 4, 2011 at 4:21 AM, govind bhardwaj <govinsb90@gmail.com> wrote:

> Hi,
>
> I am using Lucene version 3.1
> Previously I had trouble regarding special characters as when I entered
> "---" as my input, it gave the following error
>
>
> *Caused by: org.apache.lucene.queryParser.ParseException: Encountered " "-"
> "- "" at line 1, column 1.
> Was expecting one of:
>    "(" ...
>    "*" ...
>    <QUOTED> ...
>    <TERM> ...
>    <PREFIXTERM> ...
>    <WILDTERM> ...
>    "[" ...
>    "{" ...
>    <NUMBER> ...
>    <TERM> ...
>    "*" ...
>
> *To overcome this, I used escape() method of the QueryParser and worked
> fine. But now, unlike previously, the search for "item*" yielded no results
> because I guess it escaped the asterisk character too. How should I go
> about
> preventing this from happening ? I am using MultiFieldQueryParser.
>
>
>
> Govind
> *
>
> *--
> No trees were harmed in the creation of this message, but several thousand
> electrons were mildly inconvenienced.
>

--bcaec51f93d755bd2f04a741875c--

From java-user-return-50241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 03:28:55 2011
Return-Path: <java-user-return-50241-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7C2DD47F5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 03:28:55 +0000 (UTC)
Received: (qmail 2760 invoked by uid 500); 5 Jul 2011 03:28:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 864 invoked by uid 500); 5 Jul 2011 03:28:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 844 invoked by uid 99); 5 Jul 2011 03:28:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 03:28:24 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of fancyerii@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 03:28:15 +0000
Received: by wyg34 with SMTP id 34so5784045wyg.35
        for <multiple recipients>; Mon, 04 Jul 2011 20:27:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=7V3jZZjvWdK//Zf30Fl+W6aIGUVhVwUiT1F8mgflVDw=;
        b=leyKvQhwnEKzz7Dic2WbWpXWbo/HAk27nPpN/a2NIPkFSqLv+K9UAQs2NERXPC/t1D
         7DF8mjswNghy2QwBMdcMBEQqLGIJLnwpSzance8tXtJsq6fcv2tS7ea/iHvTZTxlPgCR
         FmkIMs8Hsv1uYaM70iX5nm60PSrK/qho12CHM=
MIME-Version: 1.0
Received: by 10.216.8.80 with SMTP id 58mr5631963weq.0.1309836475352; Mon, 04
 Jul 2011 20:27:55 -0700 (PDT)
Received: by 10.216.23.14 with HTTP; Mon, 4 Jul 2011 20:27:55 -0700 (PDT)
Date: Tue, 5 Jul 2011 11:27:55 +0800
Message-ID: <CAFAd71X1rM6pNdEYSu7PMGdH5g4m5-JjsKizkktPptaO9_n6HQ@mail.gmail.com>
Subject: full text searching in cloud for minor enterprises
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org, solr-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

hi all,
    I want to provide full text searching for some "small" websites.
It seems cloud computing is  popular now. And it will save costs
because it don't need employ engineer to maintain
the machine.
    For now, there are many services such as amazon s3, google app
engine, ms azure etc. I am not familiar with cloud computing. Anyone
give me a direction or some advice? thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 07:13:06 2011
Return-Path: <java-user-return-50242-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A432A41B3
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 07:13:06 +0000 (UTC)
Received: (qmail 60617 invoked by uid 500); 5 Jul 2011 07:13:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57527 invoked by uid 500); 5 Jul 2011 07:12:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57518 invoked by uid 99); 5 Jul 2011 07:12:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 07:12:37 +0000
X-ASF-Spam-Status: No, hits=4.1 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,FREEMAIL_REPLY,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of govinsb90@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 07:12:30 +0000
Received: by vxd2 with SMTP id 2so6771452vxd.35
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2011 00:12:10 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=meA1GNFTtRMPxGTh4kSbv1woT4fxpWsGWfC31o/lTWg=;
        b=Dspr5oTuUFx36lENatMoReY9CYy8DxbdTY9P+rC8sX0IsYACcP3SkmarNA72/O6Flr
         wHQh/vabXRQqVgYvvgGFGJLpM0tvI+rmHwByxnKMcZjcCoxxZrRu5cw8TUMXQNXUVzfE
         KQ+9K90OB0BIVw71UnGOMuqCCxw0NVcBhewsY=
MIME-Version: 1.0
Received: by 10.52.94.36 with SMTP id cz4mr6024842vdb.147.1309849929968; Tue,
 05 Jul 2011 00:12:09 -0700 (PDT)
Received: by 10.220.202.137 with HTTP; Tue, 5 Jul 2011 00:12:09 -0700 (PDT)
In-Reply-To: <CAN3gF-Ch-hPFu8BA=tq1DWG2usyKYYno1ODWbz6BgF9ECoAE+g@mail.gmail.com>
References: <CAArCri5eGmDns2FSu_Lhw=v6-Sb-85UmkStz38TZ3jH5d1S+AA@mail.gmail.com>
	<CAN3gF-Ch-hPFu8BA=tq1DWG2usyKYYno1ODWbz6BgF9ECoAE+g@mail.gmail.com>
Date: Tue, 5 Jul 2011 00:12:09 -0700
Message-ID: <CAArCri4D0dYjTXCC1SqTcexVbg1e2_UMcobefB_zkwi7bX3ejQ@mail.gmail.com>
Subject: Re: Escaping Special Characters
From: govind bhardwaj <govinsb90@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf307f3166c8ec8c04a74d3306

--20cf307f3166c8ec8c04a74d3306
Content-Type: text/plain; charset=ISO-8859-1

Hi,
I'm not getting you. escape() method takes String as an argument.

The code snippet I am using is as follows

*String escaped = MultiFieldQueryParser.escape(queryString);
Query query1 = parser.parse(escaped);
TopDocs results = searcher.search(query1);

*Please point out where I may be going wrong.

Govind

On Mon, Jul 4, 2011 at 10:16 AM, Adriano Crestani <adrianocrestani@gmail.com
> wrote:

> Hi Govind,
>
> escape() method should only be used to escape term, not the query itself.
> If
> the user is entering the query, it's his responsibility to escape the
> query.
>
> On Mon, Jul 4, 2011 at 4:21 AM, govind bhardwaj <govinsb90@gmail.com>
> wrote:
>
> > Hi,
> >
> > I am using Lucene version 3.1
> > Previously I had trouble regarding special characters as when I entered
> > "---" as my input, it gave the following error
> >
> >
> > *Caused by: org.apache.lucene.queryParser.ParseException: Encountered "
> "-"
> > "- "" at line 1, column 1.
> > Was expecting one of:
> >    "(" ...
> >    "*" ...
> >    <QUOTED> ...
> >    <TERM> ...
> >    <PREFIXTERM> ...
> >    <WILDTERM> ...
> >    "[" ...
> >    "{" ...
> >    <NUMBER> ...
> >    <TERM> ...
> >    "*" ...
> >
> > *To overcome this, I used escape() method of the QueryParser and worked
> > fine. But now, unlike previously, the search for "item*" yielded no
> results
> > because I guess it escaped the asterisk character too. How should I go
> > about
> > preventing this from happening ? I am using MultiFieldQueryParser.
> >
> >
> >
> > Govind
> > *
> >
> > *--
> > No trees were harmed in the creation of this message, but several
> thousand
> > electrons were mildly inconvenienced.
> >
>



-- 
No trees were harmed in the creation of this message, but several thousand
electrons were mildly inconvenienced.

--20cf307f3166c8ec8c04a74d3306--

From java-user-return-50243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 11:03:03 2011
Return-Path: <java-user-return-50243-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE8C041FD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 11:03:02 +0000 (UTC)
Received: (qmail 15229 invoked by uid 500); 5 Jul 2011 11:03:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14955 invoked by uid 500); 5 Jul 2011 11:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14922 invoked by uid 99); 5 Jul 2011 11:02:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 11:02:54 +0000
X-ASF-Spam-Status: No, hits=2.6 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL,TVD_FROM_1
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 11:02:49 +0000
Received: by iyi20 with SMTP id 20so7901366iyi.35
        for <multiple recipients>; Tue, 05 Jul 2011 04:02:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.27.137 with SMTP id j9mr4118076icc.311.1309863747919; Tue,
 05 Jul 2011 04:02:27 -0700 (PDT)
Received: by 10.42.174.4 with HTTP; Tue, 5 Jul 2011 04:02:27 -0700 (PDT)
In-Reply-To: <CAFAd71X1rM6pNdEYSu7PMGdH5g4m5-JjsKizkktPptaO9_n6HQ@mail.gmail.com>
References: <CAFAd71X1rM6pNdEYSu7PMGdH5g4m5-JjsKizkktPptaO9_n6HQ@mail.gmail.com>
Date: Tue, 5 Jul 2011 07:02:27 -0400
Message-ID: <CAPuV3DkEggg+DSRYXUex0hLnFwQqYm7969wLAjS-m65xgPaYMA@mail.gmail.com>
Subject: Re: full text searching in cloud for minor enterprises
From: Joe Scanlon <jscanlon@element115.net>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Cc: "solr-user@lucene.apache.org" <solr-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Look at searchblox

On Monday, July 4, 2011, Li Li <fancyerii@gmail.com> wrote:
> hi all,
>  =A0 =A0I want to provide full text searching for some "small" websites.
> It seems cloud computing is =A0popular now. And it will save costs
> because it don't need employ engineer to maintain
> the machine.
>  =A0 =A0For now, there are many services such as amazon s3, google app
> engine, ms azure etc. I am not familiar with cloud computing. Anyone
> give me a direction or some advice? thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--=20
Joe Scanlon

jscanlon@element115.net

Mobile: 603 459 3242
Office:  312 445 0018

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 12:30:56 2011
Return-Path: <java-user-return-50244-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D829346FF
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 12:30:56 +0000 (UTC)
Received: (qmail 30658 invoked by uid 500); 5 Jul 2011 12:30:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30466 invoked by uid 500); 5 Jul 2011 12:30:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30458 invoked by uid 99); 5 Jul 2011 12:30:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 12:30:53 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [134.91.34.194] (HELO rousseau.informatik.uni-duisburg.de) (134.91.34.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 12:30:44 +0000
Received: from freinet.inf.uni-due.de ([134.91.34.217])
	by rousseau.informatik.uni-duisburg.de with esmtpsa (TLS1.0:RSA_AES_256_CBC_SHA1:32)
	(Exim 4.72)
	(envelope-from <engler@collide.info>)
	id 1Qe4lc-0001Na-Ig
	for java-user@lucene.apache.org; Tue, 05 Jul 2011 14:30:22 +0200
Message-ID: <4E1303D4.40300@collide.info>
Date: Tue, 05 Jul 2011 14:30:12 +0200
From: Jan Engler <engler@collide.info>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.18) Gecko/20110616 Lightning/1.0b2 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <BANLkTikCEy6We+BQQg4wVexJJGiGUS8_ew@mail.gmail.com>
In-Reply-To: <BANLkTikCEy6We+BQQg4wVexJJGiGUS8_ew@mail.gmail.com>
X-Enigmail-Version: 1.1.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-SA-Exim-Connect-IP: 134.91.34.217
X-SA-Exim-Mail-From: engler@collide.info
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	rousseau.informatik.uni-duisburg.de
X-Spam-Level: 
Subject: Re: [ANNOUNCE] Apache Lucene 3.3
X-SA-Exim-Version: 4.2.1 (built Mon, 22 Mar 2010 06:51:10 +0000)
X-SA-Exim-Scanned: Yes (on rousseau.informatik.uni-duisburg.de)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.0 required=5.0 tests=ALL_TRUSTED
	autolearn=disabled version=3.3.1

Hi,

does anyone know where I could find the class "ChainedFilter" in Lucene
3.3.? Before our Upgrade (from 3.0.2 to 3.3.3) it was located in
lucene-misc....but I cannot find that anymore at that location...

Thx for your help,
 Jan

Am 01.07.2011 07:56, schrieb Robert Muir:
> July 2011, Apache Lucene™ 3.3 available
> The Lucene PMC is pleased to announce the release of Apache Lucene 3.3.
> 
> Apache Lucene is a high-performance, full-featured text search engine
> library written entirely in Java. It is a technology suitable for nearly
> any application that requires full-text search, especially cross-platform.
> 
> This release contains numerous bug fixes, optimizations, and
> improvements, some of which are highlighted below.  The release
> is available for immediate download at:
>    http://www.apache.org/dyn/closer.cgi/lucene/java (see note below).
> 
> See the CHANGES.txt file included with the release for a full list of details.
> 
> Lucene 3.3 Release Highlights:
> 
>  * The spellchecker module now includes suggest/auto-complete functionality,
>    with three implementations: Jaspell, Ternary Trie, and Finite State.
> 
>  * Support for merging results from multiple shards, for both "normal"
>    search results (TopDocs.merge) as well as grouped results using the
>    grouping module (SearchGroup.merge, TopGroups.merge).
> 
>  * An optimized implementation of KStem, a less aggressive stemmer
>    for English.
> 
>  * Single-pass grouping implementation based on block document indexing.
> 
>  * Improvements to MMapDirectory (now also the default implementation
>    returned by FSDirectory.open on 64-bit Linux).
> 
>  * NRTManager simplifies handling near-real-time search with multiple
>    search threads, allowing the application to control which indexing
>    changes must be visible to which search requests.
> 
>  * TwoPhaseCommitTool facilitates performing a multi-resource
>    two-phased commit, including IndexWriter.
> 
>  * The default merge policy, TieredMergePolicy, has a new method
>    (set/getReclaimDeletesWeight) to control how aggressively it
>    targets segments with deletions, and is now more aggressive than
>    before by default.
> 
>  * PKIndexSplitter tool splits an index by a mid-point term.
> 
> Note: The Apache Software Foundation uses an extensive mirroring network for
> distributing releases.  It is possible that the mirror you are using may not
> have replicated the release yet.  If that is the case, please try another
> mirror.  This also goes for Maven access.
> 
> Thanks,
> Apache Lucene Developers
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 12:35:28 2011
Return-Path: <java-user-return-50245-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3ED624AFE
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 12:35:28 +0000 (UTC)
Received: (qmail 37194 invoked by uid 500); 5 Jul 2011 12:35:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37124 invoked by uid 500); 5 Jul 2011 12:35:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37111 invoked by uid 99); 5 Jul 2011 12:35:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 12:35:25 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 12:35:18 +0000
Received: by bwb5 with SMTP id 5so7914729bwb.35
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2011 05:34:58 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=C/1qe9JxKGOErprm9n7RVBRBZCOzmsEowp3Yidgdp0g=;
        b=f4NUd8QMh+haDw1qsglvYGpxSVbUR7HFt2NiXrNtqVlJSHpRQst1kgiNlJT3Hln3qO
         H+arfyFFL6e/kZbzADR5CeoIoRpz5PbQfHZrwNr130ugQjuAN7nEZugnyR3/Ym5Q+Rkr
         AVxQC3usZjp6qKHLxCbJbr2K6mHHo906fBOn0=
Received: by 10.204.18.195 with SMTP id x3mr688370bka.137.1309869289116; Tue,
 05 Jul 2011 05:34:49 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.26.143 with HTTP; Tue, 5 Jul 2011 05:34:29 -0700 (PDT)
In-Reply-To: <4E1303D4.40300@collide.info>
References: <BANLkTikCEy6We+BQQg4wVexJJGiGUS8_ew@mail.gmail.com> <4E1303D4.40300@collide.info>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 5 Jul 2011 08:34:29 -0400
Message-ID: <CAOdYfZUyNFDKJdyoD7gnE6r-b3GdWbp2JwUXk0QjNvBcD2RYyg@mail.gmail.com>
Subject: Re: [ANNOUNCE] Apache Lucene 3.3
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Jan,

 * LUCENE-2323: Moved contrib/regex into contrib/queries. Moved the
   queryparsers under contrib/misc and contrib/surround into
contrib/queryparser.
   Moved contrib/fast-vector-highlighter into contrib/highlighter.
   Moved ChainedFilter from contrib/misc to contrib/queries. contrib/spatia=
l now
   depends on contrib/queries instead of contrib/misc.

for future reference, you can find this information in CHANGES.txt ,
contrib/CHANGES.txt
http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/contrib/CHANGES.txt


On Tue, Jul 5, 2011 at 8:30 AM, Jan Engler <engler@collide.info> wrote:
> Hi,
>
> does anyone know where I could find the class "ChainedFilter" in Lucene
> 3.3.? Before our Upgrade (from 3.0.2 to 3.3.3) it was located in
> lucene-misc....but I cannot find that anymore at that location...
>
> Thx for your help,
> =C2=A0Jan
>
> Am 01.07.2011 07:56, schrieb Robert Muir:
>> July 2011, Apache Lucene=E2=84=A2 3.3 available
>> The Lucene PMC is pleased to announce the release of Apache Lucene 3.3.
>>
>> Apache Lucene is a high-performance, full-featured text search engine
>> library written entirely in Java. It is a technology suitable for nearly
>> any application that requires full-text search, especially cross-platfor=
m.
>>
>> This release contains numerous bug fixes, optimizations, and
>> improvements, some of which are highlighted below. =C2=A0The release
>> is available for immediate download at:
>> =C2=A0 =C2=A0http://www.apache.org/dyn/closer.cgi/lucene/java (see note =
below).
>>
>> See the CHANGES.txt file included with the release for a full list of de=
tails.
>>
>> Lucene 3.3 Release Highlights:
>>
>> =C2=A0* The spellchecker module now includes suggest/auto-complete funct=
ionality,
>> =C2=A0 =C2=A0with three implementations: Jaspell, Ternary Trie, and Fini=
te State.
>>
>> =C2=A0* Support for merging results from multiple shards, for both "norm=
al"
>> =C2=A0 =C2=A0search results (TopDocs.merge) as well as grouped results u=
sing the
>> =C2=A0 =C2=A0grouping module (SearchGroup.merge, TopGroups.merge).
>>
>> =C2=A0* An optimized implementation of KStem, a less aggressive stemmer
>> =C2=A0 =C2=A0for English.
>>
>> =C2=A0* Single-pass grouping implementation based on block document inde=
xing.
>>
>> =C2=A0* Improvements to MMapDirectory (now also the default implementati=
on
>> =C2=A0 =C2=A0returned by FSDirectory.open on 64-bit Linux).
>>
>> =C2=A0* NRTManager simplifies handling near-real-time search with multip=
le
>> =C2=A0 =C2=A0search threads, allowing the application to control which i=
ndexing
>> =C2=A0 =C2=A0changes must be visible to which search requests.
>>
>> =C2=A0* TwoPhaseCommitTool facilitates performing a multi-resource
>> =C2=A0 =C2=A0two-phased commit, including IndexWriter.
>>
>> =C2=A0* The default merge policy, TieredMergePolicy, has a new method
>> =C2=A0 =C2=A0(set/getReclaimDeletesWeight) to control how aggressively i=
t
>> =C2=A0 =C2=A0targets segments with deletions, and is now more aggressive=
 than
>> =C2=A0 =C2=A0before by default.
>>
>> =C2=A0* PKIndexSplitter tool splits an index by a mid-point term.
>>
>> Note: The Apache Software Foundation uses an extensive mirroring network=
 for
>> distributing releases. =C2=A0It is possible that the mirror you are usin=
g may not
>> have replicated the release yet. =C2=A0If that is the case, please try a=
nother
>> mirror. =C2=A0This also goes for Maven access.
>>
>> Thanks,
>> Apache Lucene Developers
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 12:44:25 2011
Return-Path: <java-user-return-50246-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BE7354F34
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 12:44:25 +0000 (UTC)
Received: (qmail 51731 invoked by uid 500); 5 Jul 2011 12:44:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51627 invoked by uid 500); 5 Jul 2011 12:44:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51536 invoked by uid 99); 5 Jul 2011 12:44:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 12:44:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [134.91.34.194] (HELO rousseau.informatik.uni-duisburg.de) (134.91.34.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 12:44:16 +0000
Received: from freinet.inf.uni-due.de ([134.91.34.217])
	by rousseau.informatik.uni-duisburg.de with esmtpsa (TLS1.0:RSA_AES_256_CBC_SHA1:32)
	(Exim 4.72)
	(envelope-from <engler@collide.info>)
	id 1Qe4yg-0001ok-S4
	for java-user@lucene.apache.org; Tue, 05 Jul 2011 14:43:52 +0200
Message-ID: <4E1306FF.7050104@collide.info>
Date: Tue, 05 Jul 2011 14:43:43 +0200
From: Jan Engler <engler@collide.info>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.18) Gecko/20110616 Lightning/1.0b2 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
References: <BANLkTikCEy6We+BQQg4wVexJJGiGUS8_ew@mail.gmail.com> <4E1303D4.40300@collide.info> <CAOdYfZUyNFDKJdyoD7gnE6r-b3GdWbp2JwUXk0QjNvBcD2RYyg@mail.gmail.com>
In-Reply-To: <CAOdYfZUyNFDKJdyoD7gnE6r-b3GdWbp2JwUXk0QjNvBcD2RYyg@mail.gmail.com>
X-Enigmail-Version: 1.1.1
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
X-SA-Exim-Connect-IP: 134.91.34.217
X-SA-Exim-Mail-From: engler@collide.info
X-Spam-Checker-Version: SpamAssassin 3.3.1 (2010-03-16) on
	rousseau.informatik.uni-duisburg.de
X-Spam-Level: 
Subject: Re: [ANNOUNCE] Apache Lucene 3.3
X-SA-Exim-Version: 4.2.1 (built Mon, 22 Mar 2010 06:51:10 +0000)
X-SA-Exim-Scanned: Yes (on rousseau.informatik.uni-duisburg.de)
X-Old-Spam-Status: No, score=-1.0 required=5.0 tests=ALL_TRUSTED
	autolearn=disabled version=3.3.1

Hi Robert,

thanks a lot....found the right one ;-)

Thx again,
 Jan

Am 05.07.2011 14:34, schrieb Robert Muir:
> Hi Jan,
> 
>  * LUCENE-2323: Moved contrib/regex into contrib/queries. Moved the
>    queryparsers under contrib/misc and contrib/surround into
> contrib/queryparser.
>    Moved contrib/fast-vector-highlighter into contrib/highlighter.
>    Moved ChainedFilter from contrib/misc to contrib/queries. contrib/spatial now
>    depends on contrib/queries instead of contrib/misc.
> 
> for future reference, you can find this information in CHANGES.txt ,
> contrib/CHANGES.txt
> http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/contrib/CHANGES.txt
> 
> 
> On Tue, Jul 5, 2011 at 8:30 AM, Jan Engler <engler@collide.info> wrote:
>> Hi,
>>
>> does anyone know where I could find the class "ChainedFilter" in Lucene
>> 3.3.? Before our Upgrade (from 3.0.2 to 3.3.3) it was located in
>> lucene-misc....but I cannot find that anymore at that location...
>>
>> Thx for your help,
>>  Jan
>>
>> Am 01.07.2011 07:56, schrieb Robert Muir:
>>> July 2011, Apache Lucene™ 3.3 available
>>> The Lucene PMC is pleased to announce the release of Apache Lucene 3.3.
>>>
>>> Apache Lucene is a high-performance, full-featured text search engine
>>> library written entirely in Java. It is a technology suitable for nearly
>>> any application that requires full-text search, especially cross-platform.
>>>
>>> This release contains numerous bug fixes, optimizations, and
>>> improvements, some of which are highlighted below.  The release
>>> is available for immediate download at:
>>>    http://www.apache.org/dyn/closer.cgi/lucene/java (see note below).
>>>
>>> See the CHANGES.txt file included with the release for a full list of details.
>>>
>>> Lucene 3.3 Release Highlights:
>>>
>>>  * The spellchecker module now includes suggest/auto-complete functionality,
>>>    with three implementations: Jaspell, Ternary Trie, and Finite State.
>>>
>>>  * Support for merging results from multiple shards, for both "normal"
>>>    search results (TopDocs.merge) as well as grouped results using the
>>>    grouping module (SearchGroup.merge, TopGroups.merge).
>>>
>>>  * An optimized implementation of KStem, a less aggressive stemmer
>>>    for English.
>>>
>>>  * Single-pass grouping implementation based on block document indexing.
>>>
>>>  * Improvements to MMapDirectory (now also the default implementation
>>>    returned by FSDirectory.open on 64-bit Linux).
>>>
>>>  * NRTManager simplifies handling near-real-time search with multiple
>>>    search threads, allowing the application to control which indexing
>>>    changes must be visible to which search requests.
>>>
>>>  * TwoPhaseCommitTool facilitates performing a multi-resource
>>>    two-phased commit, including IndexWriter.
>>>
>>>  * The default merge policy, TieredMergePolicy, has a new method
>>>    (set/getReclaimDeletesWeight) to control how aggressively it
>>>    targets segments with deletions, and is now more aggressive than
>>>    before by default.
>>>
>>>  * PKIndexSplitter tool splits an index by a mid-point term.
>>>
>>> Note: The Apache Software Foundation uses an extensive mirroring network for
>>> distributing releases.  It is possible that the mirror you are using may not
>>> have replicated the release yet.  If that is the case, please try another
>>> mirror.  This also goes for Maven access.
>>>
>>> Thanks,
>>> Apache Lucene Developers
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 15:51:29 2011
Return-Path: <java-user-return-50247-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CEB0C425C
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 15:51:29 +0000 (UTC)
Received: (qmail 12173 invoked by uid 500); 5 Jul 2011 15:51:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12062 invoked by uid 500); 5 Jul 2011 15:51:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12054 invoked by uid 99); 5 Jul 2011 15:51:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 15:51:26 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dean.hiller@broadridge.com designates 64.18.2.167 as permitted sender)
Received: from [64.18.2.167] (HELO exprod7og107.obsmtp.com) (64.18.2.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 15:51:19 +0000
Received: from gwm.broadridge.com ([167.212.2.180]) (using TLSv1) by exprod7ob107.postini.com ([64.18.6.12]) with SMTP
	ID DSNKThMy4eVYE1PNgPYosPkQ74/W20FHDAUN@postini.com; Tue, 05 Jul 2011 08:50:58 PDT
Received: from jsppsldlpsi01.broadridge.net ([10.98.54.11])
	by gwm.broadridge.com (8.13.8/8.13.8) with ESMTP id p65FouPN925702
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 5 Jul 2011 11:50:57 -0400
Received: from JSIPSWEXHA02.bsg.ad.adp.com (jsipswexha02.bsg.ad.adp.com [10.17.69.34]) by jsppsldlpsi01.broadridge.net (RSA Interceptor) for <java-user@lucene.apache.org>; Tue, 5 Jul 2011 11:50:47 -0400
Received: from jscpcwexmaa1.bsg.ad.adp.com ([fe80::bd03:d3d2:b433:1ecb]) by
 JSIPSWEXHA02.bsg.ad.adp.com ([::1]) with mapi; Tue, 5 Jul 2011 11:50:43 -0400
From: "Hiller, Dean  x66079" <dean.hiller@broadridge.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Tue, 5 Jul 2011 11:50:40 -0400
Subject: deleting 8,000,000 indexes takes forever!!!!  any solution to
 this...
Thread-Topic: deleting 8,000,000 indexes takes forever!!!!  any solution to
 this...
Thread-Index: Acw7K0qeb3LJiphlSF2poiZ+EmVW9Q==
Message-ID: <08230D4C8E666D479F6DE495A7684DCD0B4641D1@JSCPCWEXMAA1.bsg.ad.adp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-cr-puzzleid: {F4F0A217-62C1-46B6-8E85-B77CE914BF43}
x-cr-hashedpuzzle: s4g= AtqG CQhu CuUR C7Ma DbB9 D1es GBmI GlJy HI2Z IM2O
 Ihfr IifD JEC5 JTLF
 Jdg1;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{F4F0A217-62C1-46B6-8E85-B77CE914BF43};ZABlAGEAbgAuAGgAaQBsAGwAZQByAEAAYgByAG8AYQBkAHIAaQBkAGcAZQAuAGMAbwBtAA==;Tue,
 05 Jul 2011 15:50:40
 GMT;ZABlAGwAZQB0AGkAbgBnACAAOAAsADAAMAAwACwAMAAwADAAIABpAG4AZABlAHgAZQBzACAAdABhAGsAZQBzACAAZgBvAHIAZQB2AGUAcgAhACEAIQAhACAAIABhAG4AeQAgAHMAbwBsAHUAdABpAG8AbgAgAHQAbwAgAHQAaABpAHMALgAuAC4A
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_08230D4C8E666D479F6DE495A7684DCD0B4641D1JSCPCWEXMAA1bsg_"
MIME-Version: 1.0
X-RSA-Inspected: yes
X-RSA-Classifications: public
X-RSA-Action: allow

--_000_08230D4C8E666D479F6DE495A7684DCD0B4641D1JSCPCWEXMAA1bsg_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We are using a sort of nosql environment and deleting 200 gig on one machin=
e from the database is fast, but then we go and delete 5 gigs of indexes th=
at were created and it takes forever!!!!

Is there any option in lucene to make it so it uses LARGER files and less c=
ount of files so it is easier to maintain and wipe out an index much faster=
?

Thanks,
Dean

This message and any attachments are intended only for the use of the add=
ressee and may contain information that is privileged and confidential. I=
f the reader of the message is not the intended recipient or an authorize=
d representative of the intended recipient, you are hereby notified that =
any dissemination of this communication is strictly prohibited. If you ha=
ve received this communication in error, please notify us immediately by =
e-mail and delete the message and any attachments from your system.
=0D
--_000_08230D4C8E666D479F6DE495A7684DCD0B4641D1JSCPCWEXMAA1bsg_--

From java-user-return-50248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 16:12:26 2011
Return-Path: <java-user-return-50248-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A06434238
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 16:12:26 +0000 (UTC)
Received: (qmail 40466 invoked by uid 500); 5 Jul 2011 16:12:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40423 invoked by uid 500); 5 Jul 2011 16:12:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40415 invoked by uid 99); 5 Jul 2011 16:12:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 16:12:23 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adrianocrestani@gmail.com designates 209.85.210.48 as permitted sender)
Received: from [209.85.210.48] (HELO mail-pz0-f48.google.com) (209.85.210.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 16:12:17 +0000
Received: by pzk10 with SMTP id 10so2373322pzk.35
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2011 09:11:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=1NAyLvy7kLY49Kzaea98J/InizTxoSpPcOh3SbltILE=;
        b=wRt9ciVAAxQoDHtCUO0FzdyMTgV7eV+VjZhsQP5pI8gifC5oC+F34iM4HDXmT3mzMS
         xqWt4oFXOtiRdwIL32euSYi2qow1deA5jkkTQxvb9XknBhDcLknkDYE6Eg4zEhOfKWbp
         pH/rIZoyDBjaw/4dtrd6D0kGTkU2JUZVxzv8o=
Received: by 10.68.29.130 with SMTP id k2mr8856140pbh.514.1309882292125; Tue,
 05 Jul 2011 09:11:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.68.59.9 with HTTP; Tue, 5 Jul 2011 09:11:12 -0700 (PDT)
In-Reply-To: <CAArCri4D0dYjTXCC1SqTcexVbg1e2_UMcobefB_zkwi7bX3ejQ@mail.gmail.com>
References: <CAArCri5eGmDns2FSu_Lhw=v6-Sb-85UmkStz38TZ3jH5d1S+AA@mail.gmail.com>
 <CAN3gF-Ch-hPFu8BA=tq1DWG2usyKYYno1ODWbz6BgF9ECoAE+g@mail.gmail.com> <CAArCri4D0dYjTXCC1SqTcexVbg1e2_UMcobefB_zkwi7bX3ejQ@mail.gmail.com>
From: Adriano Crestani <adrianocrestani@gmail.com>
Date: Tue, 5 Jul 2011 12:11:12 -0400
Message-ID: <CAN3gF-BNxoaLu2M6RWa3+g9X3Wj4zqAW_1HbTvSokLyv_mgJFg@mail.gmail.com>
Subject: Re: Escaping Special Characters
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec520f14bb8419804a754bc84

--bcaec520f14bb8419804a754bc84
Content-Type: text/plain; charset=ISO-8859-1

Hi Govind,

I think you are wrong by assuming escape should receive a query string as
parameter. However, it's meant to receive a term as parameter, which will
later be used to create a query. See the example below:

// this is bad, since +, &, * and - will be escaped
String query = "+lucene&solr -apache*";
String escapedQuery = MultiQueryParser.escape(query);
Query q = queryparser.parse(escapedQuery,...);

// this is good, the operators +, * and - will not be escaped
String term1 = "lucene&solr";
String term2 = "apache"
String term1Escaped = MultiQueryParser.escape(term1);
String term2Escaped = MultiQueryParser.escape(term2);
String escapedQuery = "+" + term1Escaped + " " + term2Escaped + "*";
Query q = queryparser.parse(escapedQuery,...);

As you can see in the second example, escape method should be used to escape
terms, not the entire query. The method should only be used to make sure
syntax characters are escaped and not treated as query operator, so it's
wrong to assume escape() will not escape * in the query term*.

On Tue, Jul 5, 2011 at 3:12 AM, govind bhardwaj <govinsb90@gmail.com> wrote:

> Hi,
> I'm not getting you. escape() method takes String as an argument.
>
> The code snippet I am using is as follows
>
> *String escaped = MultiFieldQueryParser.escape(queryString);
> Query query1 = parser.parse(escaped);
> TopDocs results = searcher.search(query1);
>
> *Please point out where I may be going wrong.
>
> Govind
>
> On Mon, Jul 4, 2011 at 10:16 AM, Adriano Crestani <
> adrianocrestani@gmail.com
> > wrote:
>
> > Hi Govind,
> >
> > escape() method should only be used to escape term, not the query itself.
> > If
> > the user is entering the query, it's his responsibility to escape the
> > query.
> >
> > On Mon, Jul 4, 2011 at 4:21 AM, govind bhardwaj <govinsb90@gmail.com>
> > wrote:
> >
> > > Hi,
> > >
> > > I am using Lucene version 3.1
> > > Previously I had trouble regarding special characters as when I entered
> > > "---" as my input, it gave the following error
> > >
> > >
> > > *Caused by: org.apache.lucene.queryParser.ParseException: Encountered "
> > "-"
> > > "- "" at line 1, column 1.
> > > Was expecting one of:
> > >    "(" ...
> > >    "*" ...
> > >    <QUOTED> ...
> > >    <TERM> ...
> > >    <PREFIXTERM> ...
> > >    <WILDTERM> ...
> > >    "[" ...
> > >    "{" ...
> > >    <NUMBER> ...
> > >    <TERM> ...
> > >    "*" ...
> > >
> > > *To overcome this, I used escape() method of the QueryParser and worked
> > > fine. But now, unlike previously, the search for "item*" yielded no
> > results
> > > because I guess it escaped the asterisk character too. How should I go
> > > about
> > > preventing this from happening ? I am using MultiFieldQueryParser.
> > >
> > >
> > >
> > > Govind
> > > *
> > >
> > > *--
> > > No trees were harmed in the creation of this message, but several
> > thousand
> > > electrons were mildly inconvenienced.
> > >
> >
>
>
>
> --
> No trees were harmed in the creation of this message, but several thousand
> electrons were mildly inconvenienced.
>

--bcaec520f14bb8419804a754bc84--

From java-user-return-50249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 18:12:12 2011
Return-Path: <java-user-return-50249-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A81664F69
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 18:12:12 +0000 (UTC)
Received: (qmail 63850 invoked by uid 500); 5 Jul 2011 18:12:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63610 invoked by uid 500); 5 Jul 2011 18:12:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63602 invoked by uid 99); 5 Jul 2011 18:12:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 18:12:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 18:12:04 +0000
Received: by iwi5 with SMTP id 5so8380339iwi.35
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2011 11:11:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=XBAxkOY3l5azak3C5AbskHX1sT4Y0bEhODZRpOI5+LE=;
        b=fl8yq/90dAwLuXLptlsK28xB7LX/lD5ex+Jo/9s3n6bY5Tdx3XAtjqNc9bJ9bRjh0H
         gj212o0AnkAq4dX4gFoXnevvZ3C/TqJGwqOZZniWSNyS7k48Qms7pyzKWqWZEZj3fLHz
         VNzKDpdfJTf6mZIBnUpMT8GaA/rhz3Kmo2UsM=
MIME-Version: 1.0
Received: by 10.42.175.133 with SMTP id ba5mr3104570icb.243.1309889503574;
 Tue, 05 Jul 2011 11:11:43 -0700 (PDT)
Received: by 10.43.46.69 with HTTP; Tue, 5 Jul 2011 11:11:43 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0B4641D1@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0B4641D1@JSCPCWEXMAA1.bsg.ad.adp.com>
Date: Tue, 5 Jul 2011 21:11:43 +0300
Message-ID: <CALfq-2TLmv+HQX+1kHBV1WuJoCDhZBoeL71k+NDZb3N6o3yCSw@mail.gmail.com>
Subject: Re: deleting 8,000,000 indexes takes forever!!!! any solution to this...
From: Shai Erera <serera@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba6e8f8e8e399904a7566ae8

--90e6ba6e8f8e8e399904a7566ae8
Content-Type: text/plain; charset=ISO-8859-1

Hi Dean

Could you share a little more information about those indexes (and your
problem in general), such as:
* Is there one index, or 8M indexes?
* How many files do those indexes contain? Do you use compound file format?
* What is the command/API you use to delete the indexes?
* Lucene version, IndexWriter settings etc.

Shai

On Tue, Jul 5, 2011 at 6:50 PM, Hiller, Dean x66079 <
dean.hiller@broadridge.com> wrote:

> We are using a sort of nosql environment and deleting 200 gig on one
> machine from the database is fast, but then we go and delete 5 gigs of
> indexes that were created and it takes forever!!!!
>
> Is there any option in lucene to make it so it uses LARGER files and less
> count of files so it is easier to maintain and wipe out an index much
> faster?
>
> Thanks,
> Dean
>
> This message and any attachments are intended only for the use of the
> addressee and may contain information that is privileged and confidential.
> If the reader of the message is not the intended recipient or an authorized
> representative of the intended recipient, you are hereby notified that any
> dissemination of this communication is strictly prohibited. If you have
> received this communication in error, please notify us immediately by e-mail
> and delete the message and any attachments from your system.
>
>

--90e6ba6e8f8e8e399904a7566ae8--

From java-user-return-50250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 18:19:41 2011
Return-Path: <java-user-return-50250-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1931C454B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 18:19:41 +0000 (UTC)
Received: (qmail 86582 invoked by uid 500); 5 Jul 2011 18:19:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86442 invoked by uid 500); 5 Jul 2011 18:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86434 invoked by uid 99); 5 Jul 2011 18:19:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 18:19:37 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of andres.taylor@neopersistence.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 18:19:31 +0000
Received: by vxd2 with SMTP id 2so7417121vxd.35
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2011 11:19:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.74.134 with SMTP id u6mr2901599vcj.99.1309889949975; Tue,
 05 Jul 2011 11:19:09 -0700 (PDT)
Sender: andres.taylor@neopersistence.com
Received: by 10.220.186.140 with HTTP; Tue, 5 Jul 2011 11:19:09 -0700 (PDT)
Date: Tue, 5 Jul 2011 20:19:09 +0200
X-Google-Sender-Auth: JGPZCfqr6dYQMzSjbeABI2Aqg0E
Message-ID: <CAHKVbKJs60uS1YZwh1t6vTYSzC0H10574poYyx=vtYAUAaPeZg@mail.gmail.com>
Subject: Index statistics
From: Andres Taylor <andres.taylor@neotechnology.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016363105ef29c36e04a7568553
X-Virus-Checked: Checked by ClamAV on apache.org

--0016363105ef29c36e04a7568553
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi there,

A work with Neo4j <http://neo4j.org/>, a NoSQL graph
database tightly coupled with Lucene. I am now working on an optimizing
execution engine. To do this well, I would like to know more about the
existing Lucene indices. Ideally, I'd like to be able to ask a Lucene index
how many hits a query might give me, before I actually run the query. The
answer will probably just be an estimation, but that's fine.

Is this possible today?

Best regards,

Andr=E9s

--0016363105ef29c36e04a7568553--

From java-user-return-50251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 19:39:40 2011
Return-Path: <java-user-return-50251-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 62B5445E5
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 19:39:40 +0000 (UTC)
Received: (qmail 27295 invoked by uid 500); 5 Jul 2011 19:39:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27029 invoked by uid 500); 5 Jul 2011 19:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27021 invoked by uid 99); 5 Jul 2011 19:39:37 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 19:39:36 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 19:39:31 +0000
Received: by vws7 with SMTP id 7so7502005vws.35
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2011 12:39:10 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.180.234 with SMTP id dr10mr7134542vdc.124.1309894750367;
 Tue, 05 Jul 2011 12:39:10 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Tue, 5 Jul 2011 12:39:10 -0700 (PDT)
In-Reply-To: <CAHKVbKJs60uS1YZwh1t6vTYSzC0H10574poYyx=vtYAUAaPeZg@mail.gmail.com>
References: <CAHKVbKJs60uS1YZwh1t6vTYSzC0H10574poYyx=vtYAUAaPeZg@mail.gmail.com>
Date: Tue, 5 Jul 2011 15:39:10 -0400
Message-ID: <CAL8PwkYiUQTEgEoRHBpckJ9dsMVmPt80EayOLEiP346MJobXzw@mail.gmail.com>
Subject: Re: Index statistics
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

This API doesn't exist today.

Lucene has long needed for queries impls to do this, so that we can
properly plan/optimize how the query is run.  EG an AND query would
use this to pick the more restrictive clause to drive the
intersection.

For TermQuery you could just call IR.docFreq?  (Doesn't take deletions
into account so it'll always be an upper bound).

For other queries... you could pull the scorer, iterate over some
number of docs, and then "guestimate" based on what docID you got up
to vs how many docs you asked for, how many matches there would be for
the full index?  This would assume matches are uniformly distributed
throughout the index (eg, that docs are indexed in random order) which
is definitely not the case typically in practice.

Mike McCandless

http://blog.mikemccandless.com

On Tue, Jul 5, 2011 at 2:19 PM, Andres Taylor
<andres.taylor@neotechnology.com> wrote:
> Hi there,
>
> A work with Neo4j <http://neo4j.org/>, a NoSQL graph
> database tightly coupled with Lucene. I am now working on an optimizing
> execution engine. To do this well, I would like to know more about the
> existing Lucene indices. Ideally, I'd like to be able to ask a Lucene ind=
ex
> how many hits a query might give me, before I actually run the query. The
> answer will probably just be an estimation, but that's fine.
>
> Is this possible today?
>
> Best regards,
>
> Andr=E9s
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul  5 19:52:52 2011
Return-Path: <java-user-return-50252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0844F4FFD
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue,  5 Jul 2011 19:52:52 +0000 (UTC)
Received: (qmail 48618 invoked by uid 500); 5 Jul 2011 19:52:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48480 invoked by uid 500); 5 Jul 2011 19:52:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48472 invoked by uid 99); 5 Jul 2011 19:52:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2011 19:52:49 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.23 as permitted sender)
Received: from [213.165.64.23] (HELO mailout-de.gmx.net) (213.165.64.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 05 Jul 2011 19:52:41 +0000
Received: (qmail invoked by alias); 05 Jul 2011 19:52:19 -0000
Received: from p5B0E772F.dip.t-dialin.net (EHLO [192.168.178.25]) [91.14.119.47]
  by mail.gmx.net (mp069) with SMTP; 05 Jul 2011 21:52:19 +0200
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX1/O8DRvLpTOFBNFmViRGYYS1EqJrFmuCi4cAaGf2Q
	nl6WxQSudXtLpn
Message-ID: <4E136B77.8040808@gmx.de>
Date: Tue, 05 Jul 2011 21:52:23 +0200
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.18) Gecko/20110616 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene 3.3: Self referring deprecation use insteads in LowerCaseTokenizer
Content-Type: multipart/alternative;
 boundary="------------030805050301010901030304"
X-Y-GMX-Trusted: 0

--------------030805050301010901030304
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit

Hi,

just noted that the deprecation use ... insteads in LowerCaseTokenizer 
(Lucene 3.3) refer to themselves instead of the new constructors with 
(Version...).

E.g. *@deprecated*use {@link #LowerCaseTokenizer(Reader)}instead.

should be #LowerCaseTokenizer(Version, Reader). Same for the two other 
constructors.

Thanks,
Rene

--------------030805050301010901030304--

From java-user-return-50253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 06:24:27 2011
Return-Path: <java-user-return-50253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4C8E16C38
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 06:24:27 +0000 (UTC)
Received: (qmail 62391 invoked by uid 500); 6 Jul 2011 06:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59419 invoked by uid 500); 6 Jul 2011 06:24:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59383 invoked by uid 99); 6 Jul 2011 06:23:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 06:23:54 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of fancyerii@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 06:23:48 +0000
Received: by wyg34 with SMTP id 34so6919331wyg.35
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2011 23:23:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=WsYoJtokLLcrNojtNagIjJ/XQSJYwU75pKiZS9DDz3g=;
        b=aNpcKB7lNAmpuyiizLHRmndw2SocmES6uRkxMh38XFDOsZxzPXP5VYJaCC1FT7/Rp5
         HQOSYgEDBKzkHr57bjiACu1YJDGw2awIfidvCCvv8+2D5SJzXG5MaFPU5J49ZAfYcIg1
         NnQAJWh2mlw8i/iA0cDduuuqrIaiJfVRngTHw=
MIME-Version: 1.0
Received: by 10.216.229.165 with SMTP id h37mr5038059weq.69.1309933407340;
 Tue, 05 Jul 2011 23:23:27 -0700 (PDT)
Received: by 10.216.8.133 with HTTP; Tue, 5 Jul 2011 23:23:27 -0700 (PDT)
In-Reply-To: <CAPuV3DkEggg+DSRYXUex0hLnFwQqYm7969wLAjS-m65xgPaYMA@mail.gmail.com>
References: <CAFAd71X1rM6pNdEYSu7PMGdH5g4m5-JjsKizkktPptaO9_n6HQ@mail.gmail.com>
	<CAPuV3DkEggg+DSRYXUex0hLnFwQqYm7969wLAjS-m65xgPaYMA@mail.gmail.com>
Date: Wed, 6 Jul 2011 14:23:27 +0800
Message-ID: <CAFAd71Up0jqA4V3rOKkAhXi_Nf=WCD-NctFdUyx2=aYpz8VKBw@mail.gmail.com>
Subject: Re: full text searching in cloud for minor enterprises
From: Li Li <fancyerii@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

  sounds great.
  but I'd like to do it myself.
  searchblox did provide a cloud hosting service and it seems it
implements cloud computing itself other than using
common services that are provided by google, amazon etc.

On Tue, Jul 5, 2011 at 7:02 PM, Joe Scanlon <jscanlon@element115.net> wrote=
:
> Look at searchblox
>
> On Monday, July 4, 2011, Li Li <fancyerii@gmail.com> wrote:
>> hi all,
>> =A0=A0 =A0I want to provide full text searching for some "small" website=
s.
>> It seems cloud computing is =A0popular now. And it will save costs
>> because it don't need employ engineer to maintain
>> the machine.
>> =A0=A0 =A0For now, there are many services such as amazon s3, google app
>> engine, ms azure etc. I am not familiar with cloud computing. Anyone
>> give me a direction or some advice? thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> --
> Joe Scanlon
>
> jscanlon@element115.net
>
> Mobile: 603 459 3242
> Office: =A0312 445 0018
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 08:11:39 2011
Return-Path: <java-user-return-50254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2003C6317
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 08:11:39 +0000 (UTC)
Received: (qmail 75912 invoked by uid 500); 6 Jul 2011 08:11:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75556 invoked by uid 500); 6 Jul 2011 08:11:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75546 invoked by uid 99); 6 Jul 2011 08:11:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 08:11:23 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.68] (HELO sbexch03.sb.statsbiblioteket.dk) (130.225.24.68)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 08:11:14 +0000
Received: from [130.225.25.23] (130.225.25.23) by
 sbexch03.sb.statsbiblioteket.dk (130.225.24.68) with Microsoft SMTP Server id
 8.3.159.2; Wed, 6 Jul 2011 10:10:53 +0200
Subject: Re: deleting 8,000,000 indexes takes forever!!!!  any solution to
 this...
From: Toke Eskildsen <te@statsbiblioteket.dk>
Reply-To: te@statsbiblioteket.dk
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0B4641D1@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0B4641D1@JSCPCWEXMAA1.bsg.ad.adp.com>
Content-Type: text/plain; charset="UTF-8"
Organization: State and University Library, Denmark
Date: Wed, 6 Jul 2011 10:10:53 +0200
Message-ID: <1309939853.3261.178.camel@te-prime>
MIME-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, 2011-07-05 at 17:50 +0200, Hiller, Dean x66079 wrote:
> We are using a sort of nosql environment and deleting 200 gig on one machine from the database is fast, but then we go and delete 5 gigs of indexes that were created and it takes forever!!!!

8 million indexes is at a minimum 16 (24?) million files. If you are
using a conventional harddisk for that, then yes, it takes forever.
SSD is the answer to that problem, but then again, SSD is the answer to
most IO-performance problems.

Just a quick sanity check: I hope you are not storing the individual
index folders under the same root folder? If you have
indexes/index0000001/
indexes/index0000002/
indexes/index0000003/
...
indexes/index8000000/
in the same folder, you are asking for trouble since most file systems
don't perform well with folders with millions of entries. If that is the
case, split them in sub folders for every X order of magnitude, such as
indexes/000/000/index0000001/
indexes/000/000/index0000002/
indexes/000/000/index0000003/
...
indexes/000/500/index0500001/
...
indexes/008/000/index8000000/


Having that many tiny indexes sets off an alarm bell for me. That's
quite a special use of Lucene you've got going.

> Is there any option in lucene to make it so it uses LARGER files and less count of files so it is easier to maintain and wipe out an index much faster?

Use compound files, optimize to single segment. If I understand
correctly, your indexes are tiny, so this should not give any noticeable
performance hit.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 10:51:07 2011
Return-Path: <java-user-return-50255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3F1E66A0C
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 10:51:07 +0000 (UTC)
Received: (qmail 72214 invoked by uid 500); 6 Jul 2011 10:51:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71794 invoked by uid 500); 6 Jul 2011 10:51:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71786 invoked by uid 99); 6 Jul 2011 10:50:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 10:50:59 +0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_NEUTRAL,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [81.88.50.248] (HELO hostingsmtp.register.it) (81.88.50.248)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 10:50:54 +0000
Received: (qmail 22386 invoked from network); 6 Jul 2011 10:50:31 -0000
Received: from unknown (HELO vivaldi09.register.it)
  by hostingsmtp.register.it with ESMTP; 6 Jul 2011 10:50:31 -0000
Received: (from popuser@localhost)
	by vivaldi09.register.it (8.13.8/8.12.11/Submit) id p66AoV8s030380;
	Wed, 6 Jul 2011 12:50:31 +0200
Message-Id: <201107061050.p66AoV8s030380@vivaldi09.register.it>
From: <jedim@vige.it>
Reply-To: <jedim@vige.it>
To: java-user@lucene.apache.org
Subject: how are built the packages in the maven repository?
Date: Wed, 06 Jul 2011 12:50:31 +0200
X-RID: dDsnI2c7dkBtO2Qjag==|dDsnI2c7dg==|+fInPaMnLDonXuBe|TElBTUJFVw==
MIME-Version: 1.0
X-Priority: 3
X-Mailer: Webmail Client v1.5
Content-Type: text/plain;
	charset="iso-8859-1"

Hi.... I'm looking inside the jenkins maven repository. For example the package in https://builds.apache.org/job/Lucene-Solr-Maven-trunk/lastSuccessfulBuild/artifact/maven_artifacts/org/apache/lucene/lucene-misc/4.0-SNAPSHOT/lucene-misc-4.0-20110705.223250-1.jar seems to be built with ant instead of maven. It is visible from the MANIFEST.MF

Is it correct? should not be built with maven? Actually maven has the OSGI support respect to the ant version



 


------------------------------------------
Luca Stancapiano
javaee consultant 
website: www.vige.it
tel: 3381584484
skype: flashboss62


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 11:42:37 2011
Return-Path: <java-user-return-50256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A430D69BB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 11:42:37 +0000 (UTC)
Received: (qmail 52047 invoked by uid 500); 6 Jul 2011 11:42:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51452 invoked by uid 500); 6 Jul 2011 11:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51442 invoked by uid 99); 6 Jul 2011 11:42:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 11:42:29 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of andres.taylor@neopersistence.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 11:42:24 +0000
Received: by vxd2 with SMTP id 2so8147821vxd.35
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 04:42:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.117.16 with SMTP id o16mr3231199vcq.64.1309952523359; Wed,
 06 Jul 2011 04:42:03 -0700 (PDT)
Sender: andres.taylor@neopersistence.com
Received: by 10.220.186.140 with HTTP; Wed, 6 Jul 2011 04:42:03 -0700 (PDT)
In-Reply-To: <CAL8PwkYiUQTEgEoRHBpckJ9dsMVmPt80EayOLEiP346MJobXzw@mail.gmail.com>
References: <CAHKVbKJs60uS1YZwh1t6vTYSzC0H10574poYyx=vtYAUAaPeZg@mail.gmail.com>
	<CAL8PwkYiUQTEgEoRHBpckJ9dsMVmPt80EayOLEiP346MJobXzw@mail.gmail.com>
Date: Wed, 6 Jul 2011 13:42:03 +0200
X-Google-Sender-Auth: qtwGj_94doRr_NCtJsCdFGBenDM
Message-ID: <CAHKVbK+hSa2-PbQUe9owsjL15uovs_W6-tRoijko0J9fYC1C9A@mail.gmail.com>
Subject: Re: Index statistics
From: Andres Taylor <andres.taylor@neotechnology.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=485b396188aad3d6cb04a76516cf

--485b396188aad3d6cb04a76516cf
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Thanks. It was what I expected, but it's nice to have it confirmed.

On Tue, Jul 5, 2011 at 9:39 PM, Michael McCandless <
lucene@mikemccandless.com> wrote:

> This API doesn't exist today.
>
> Lucene has long needed for queries impls to do this, so that we can
> properly plan/optimize how the query is run.  EG an AND query would
> use this to pick the more restrictive clause to drive the
> intersection.
>
> For TermQuery you could just call IR.docFreq?  (Doesn't take deletions
> into account so it'll always be an upper bound).
>
> For other queries... you could pull the scorer, iterate over some
> number of docs, and then "guestimate" based on what docID you got up
> to vs how many docs you asked for, how many matches there would be for
> the full index?  This would assume matches are uniformly distributed
> throughout the index (eg, that docs are indexed in random order) which
> is definitely not the case typically in practice.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Tue, Jul 5, 2011 at 2:19 PM, Andres Taylor
> <andres.taylor@neotechnology.com> wrote:
> > Hi there,
> >
> > A work with Neo4j <http://neo4j.org/>, a NoSQL graph
> > database tightly coupled with Lucene. I am now working on an optimizing
> > execution engine. To do this well, I would like to know more about the
> > existing Lucene indices. Ideally, I'd like to be able to ask a Lucene
> index
> > how many hits a query might give me, before I actually run the query. T=
he
> > answer will probably just be an estimation, but that's fine.
> >
> > Is this possible today?
> >
> > Best regards,
> >
> > Andr=E9s
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--485b396188aad3d6cb04a76516cf--

From java-user-return-50257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 12:23:17 2011
Return-Path: <java-user-return-50257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81BC96727
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 12:23:17 +0000 (UTC)
Received: (qmail 12759 invoked by uid 500); 6 Jul 2011 12:23:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12650 invoked by uid 500); 6 Jul 2011 12:23:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12429 invoked by uid 99); 6 Jul 2011 12:23:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 12:23:14 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.18.92] (HELO smtp2.syr.edu) (128.230.18.92)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 12:23:05 +0000
Received: from suex07-hub-01.ad.syr.edu (suex07-hub-01.ad.syr.edu [128.230.108.195])
	by smtp2.syr.edu (8.14.3/8.14.3) with ESMTP id p66CMi6s024683
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Wed, 6 Jul 2011 08:22:44 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-01.ad.syr.edu ([128.230.108.195]) with mapi; Wed, 6 Jul 2011
 08:22:44 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 6 Jul 2011 08:22:45 -0400
Subject: RE: how are built the packages in the maven repository?
Thread-Topic: how are built the packages in the maven repository?
Thread-Index: Acw7yp9xxwk1z7BfRRGwdqGutQVkAwADDuKQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FC9460AFF@suex07-mbx-03.ad.syr.edu>
References: <201107061050.p66AoV8s030380@vivaldi09.register.it>
In-Reply-To: <201107061050.p66AoV8s030380@vivaldi09.register.it>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.4.6813,1.0.211,0.0.0000
 definitions=2011-07-06_05:2011-07-06,2011-07-06,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe
X-Virus-Checked: Checked by ClamAV on apache.org

Ant is the official Lucene/Solr build system.  Snapshot and release artifac=
ts are produced with Ant.

While Maven is capable of producing artifacts, the artifacts produced in th=
is way may not be the same as the official Ant artifacts.  For this reason:=
 no, the artifacts should not be built with Maven.

Sorry, I know nothing about OSGI.

Steve

-----Original Message-----
From: jedim@vige.it [mailto:jedim@vige.it]=20
Sent: Wednesday, July 06, 2011 6:51 AM
To: java-user@lucene.apache.org
Subject: how are built the packages in the maven repository?

Hi.... I'm looking inside the jenkins maven repository. For example the pac=
kage in https://builds.apache.org/job/Lucene-Solr-Maven-trunk/lastSuccessfu=
lBuild/artifact/maven_artifacts/org/apache/lucene/lucene-misc/4.0-SNAPSHOT/=
lucene-misc-4.0-20110705.223250-1.jar seems to be built with ant instead of=
 maven. It is visible from the MANIFEST.MF

Is it correct? should not be built with maven? Actually maven has the OSGI =
support respect to the ant version



=20


------------------------------------------
Luca Stancapiano
javaee consultant=20
website: www.vige.it
tel: 3381584484
skype: flashboss62


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 14:49:22 2011
Return-Path: <java-user-return-50258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3A0D2670F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 14:49:22 +0000 (UTC)
Received: (qmail 65983 invoked by uid 500); 6 Jul 2011 14:49:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65942 invoked by uid 500); 6 Jul 2011 14:49:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65934 invoked by uid 99); 6 Jul 2011 14:49:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 14:49:18 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.113.200.5] (HELO homiemail-a53.g.dreamhost.com) (208.113.200.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 14:49:11 +0000
Received: from homiemail-a53.g.dreamhost.com (localhost [127.0.0.1])
	by homiemail-a53.g.dreamhost.com (Postfix) with ESMTP id D25D913806D
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2011 07:48:49 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; c=nofws; d=getopt.org; h=message-id:date
	:from:mime-version:to:subject:content-type:
	content-transfer-encoding; q=dns; s=getopt.org; b=i+ThDcqp7tAGt4
	sqOQr5T7oU3nwW8EzL6KtsF6T9AwIdkwrwClOugNsEfpWWHCsJkS2z/Liqef/epb
	qEKf8ohN2cT+rmE6ZXvKljmwK7a2TlIAJrkg56ExVm4+sZ+gyDwf/mpN0hW17kjY
	4vUoNXQ795lLfhAHS7CcyBBdaNnFE=
DKIM-Signature: v=1; a=rsa-sha1; c=relaxed; d=getopt.org; h=message-id
	:date:from:mime-version:to:subject:content-type:
	content-transfer-encoding; s=getopt.org; bh=oOfWNOo8FgJB8shfR4tX
	bvQ5AxM=; b=sN/tT9ezhr9Pyw73aeALWrRYtEwdVbvueaq8wetaAsDIqYyT3zDG
	XlCd5RqfPHEaKikXEBf+HsYdpa4dw+z2ZF9DuzGKgWr6MFl0zBIoZAblg/sSl9SZ
	CJcIFBW/9HyY05tjIJLcgYPluZ2j4N/qfpyLZIO8uE+EPdpwAkBzgTQ=
Received: from abacus.local (unknown [81.219.54.251])
	(using TLSv1 with cipher AES256-SHA (256/256 bits))
	(No client certificate requested)
	(Authenticated sender: ab@getopt.org)
	by homiemail-a53.g.dreamhost.com (Postfix) with ESMTPSA id 74B4D138057
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2011 07:48:43 -0700 (PDT)
Message-ID: <4E1475C7.2080505@getopt.org>
Date: Wed, 06 Jul 2011 16:48:39 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.18) Gecko/20110616 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [ANN] Luke 3.3.0 released.
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

Luke 3.3.0 has been released and is available for download here:

http://code.google.com/p/luke/

Apart from the updated Lucene libraries there were no changes in 
functionality.

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 15:11:21 2011
Return-Path: <java-user-return-50259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 016B061E7
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 15:11:21 +0000 (UTC)
Received: (qmail 4942 invoked by uid 500); 6 Jul 2011 15:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4684 invoked by uid 500); 6 Jul 2011 15:11:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4675 invoked by uid 99); 6 Jul 2011 15:11:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 15:11:17 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trewig@mufin.com designates 195.214.216.124 as permitted sender)
Received: from [195.214.216.124] (HELO mx4.de.magix.net) (195.214.216.124)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 15:11:09 +0000
Received: from [192.168.1.18] (port=45066)
	by mx4.de.magix.net with esmtpa (Exim 4.69)
	(envelope-from <trewig@mufin.com>)
	id 1QeTkW-0005pb-Sg
	for java-user@lucene.apache.org; Wed, 06 Jul 2011 17:10:48 +0200
Message-ID: <4E147AAD.5080907@mufin.com>
Date: Wed, 06 Jul 2011 17:09:33 +0200
From: Thomas Rewig <trewig@mufin.com>
Organization: mufin
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; de; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: name matching / mapping
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-SA-Exim-Connect-IP: 192.168.1.18
X-SA-Exim-Mail-From: trewig@mufin.com
X-SA-Exim-Scanned: No (on mx4.de.magix.net); SAEximRunCond expanded to false
X-Virus-Checked: Checked by ClamAV on apache.org

  Hello,

until now, we use a stupid %like% SQL query script to assign the 
following terms for Id/Item mapping in different id-spaces:

john wayne == john wayne
wayne, john == john wayne

I can imagine that Lucene offers much more possibilities for this 
assignment.
Maybe with Lucene is also possible to match:

j. wayne == john wayne
john w. == john wayne

and do not link

J. Smith != john wayne
John S. != john wayne

I've searched the web on this topic and found a very old forum post that 
it suggesting that lucene had not yet developed so far to solve this task.

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200704.mbox/%3C84A3C846-73CB-4D04-AA7D-FD7D957803D3@gmail.com%3E

I wonder whether there is now a clever standard approach using Lucene to 
solve this problem?

I can imagine that a approach like the Spellchecker is using might work. 
If the Spellindex holds all names of the second id-space and the first 
id-space is used for the querrys.

String[] suggestions = spellchecker.suggestSimilar("john w.", 5);

But is there a better approach?
Can someone point me in the right direction for a effective approach?

Thanks in advance
Thomas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 15:25:07 2011
Return-Path: <java-user-return-50260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C7ED16A35
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 15:25:07 +0000 (UTC)
Received: (qmail 33426 invoked by uid 500); 6 Jul 2011 15:25:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33354 invoked by uid 500); 6 Jul 2011 15:25:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 23909 invoked by uid 99); 6 Jul 2011 15:20:07 -0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of aradon@gmail.com designates 74.125.83.48 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=K+n5ITujao/aphAdj9vKi3t9Gb98fxQeK/nDPmjM8Mo=;
        b=GwX96Xq9guucjIBwPjQpkTYy/8PGgnxU59xMxOiGTfBFOtON6ahU5jr+R0HRok5LIZ
         0IDbxqxYfwBkYR/Fy6BpOSha+MtRVEN7Pw5T4aSx/vKnMheqMy+ZtzG4GcRI29ZYHroI
         N5ismJRqZafEsTHR7uwi05pYk+aO0dsU9kqRA=
MIME-Version: 1.0
Date: Wed, 6 Jul 2011 11:19:40 -0400
Message-ID: <CA+PLKQLcfow1VTgF01=7U7d0y=04hnQyqKsyd4DM8cijk9xhdQ@mail.gmail.com>
Subject: # as a special character?
From: Aradon Strider <aradon@gmail.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Content-Type: text/plain; charset=ISO-8859-1

Hello,

  First off I am using the QueryParser with the standardanalyzer.  It
seems that whenever I search for the # symbol, nothing is found.  This
wouldn't be a problem but the documents I am searching have C# used
and needing to be searched for.

  I have tried escaping the # symbol but when I do escape it I just
get the following after calling parse from queryparser using "C#":
Text:c

  This is the same as searching just C.  Now I know that the toString
can't be relied upon for special characters (C++ escaped correctly is
shown as Text:c), but I know c++ works since it only returns those
hits involved with c++ and not just the letter c (like c# is)

Any help would be appreciated!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 16:08:53 2011
Return-Path: <java-user-return-50261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 49450608B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 16:08:53 +0000 (UTC)
Received: (qmail 34848 invoked by uid 500); 6 Jul 2011 16:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34759 invoked by uid 500); 6 Jul 2011 16:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34751 invoked by uid 99); 6 Jul 2011 16:08:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 16:08:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 209.85.161.53 as permitted sender)
Received: from [209.85.161.53] (HELO mail-fx0-f53.google.com) (209.85.161.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 16:08:41 +0000
Received: by fxd23 with SMTP id 23so174081fxd.12
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 09:08:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=subject:from:to:content-type:date:message-id:mime-version:x-mailer
         :content-transfer-encoding;
        bh=TjASEavy8TGRiYCgfB1MPoc0Mt+ULlJDN/Lu9fJ6hKQ=;
        b=UJq9T6722H6muervJ7yA2pvHeaQiIm2zjel1uSpeujSREzEXhPv8rcnE2xlFMeB5BN
         4MfxDy+vdn5yKbGYL32+sUeZwjZ/DwBrMhyWent9duzDK8lstZvbEmPumo7q7PKZ69To
         7+zWVso238LOMTnxgKjtYn7kVRVVqaxuvK3bM=
Received: by 10.223.10.150 with SMTP id p22mr13263323fap.86.1309968501289;
        Wed, 06 Jul 2011 09:08:21 -0700 (PDT)
Received: from [130.161.159.138] (dutijj.st.ewi.tudelft.nl [130.161.159.138])
        by mx.google.com with ESMTPS id j23sm1732562fai.39.2011.07.06.09.08.19
        (version=SSLv3 cipher=OTHER);
        Wed, 06 Jul 2011 09:08:20 -0700 (PDT)
Subject: Autocompletion on large index
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset="UTF-8"
Date: Wed, 06 Jul 2011 18:08:18 +0200
Message-ID: <1309968498.25963.17.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi again.

I have created my own autocompleter based on the spellchecker. This
works well in a sense that it is able to create an auto completion index
from my 'publication' index. However, integrated in my web application,
each keypress asks autocompleter to search the index, which is stored on
disk (not in mem), just like spellchecker does (except that spellchecker
is not invoked every keypress).
With Lucene 3.3.0, auto completion modules are included, which load
their trees/fsa/... in memory. I'd like to use these modules, but the
problem is that they use more than 2.5GB, causing heap space exceptions.
This happens when I try to build a LookUp index (fst,jaspell or tst,
doesn't matter) from my 'publication' index consisting of 1.3M
publications. The field I use for autocompletion holds the titles of the
publications indexed untokenized (but lowercased).

Code:
Lookup autoCompleter = new TSTLookup();
FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
LuceneDictionary dict = new
LuceneDictionary(IndexReader.open(dir),"title_suggest");
autoCompleter.build(dict);

Is it possible to have the autocompletion module to work in-memory on
such a dataset without increasing java's heapspace?
FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
my own autocompleter index is stored on disk using about 300MB.

BR,
Elmer


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 16:24:28 2011
Return-Path: <java-user-return-50262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 240F56131
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 16:24:28 +0000 (UTC)
Received: (qmail 67708 invoked by uid 500); 6 Jul 2011 16:24:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67648 invoked by uid 500); 6 Jul 2011 16:24:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67639 invoked by uid 99); 6 Jul 2011 16:24:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 16:24:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 16:24:19 +0000
Received: by vws7 with SMTP id 7so129263vws.35
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 09:23:58 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.93.67 with SMTP id cs3mr11928019vdb.4.1309969436933; Wed,
 06 Jul 2011 09:23:56 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Wed, 6 Jul 2011 09:23:56 -0700 (PDT)
In-Reply-To: <1309968498.25963.17.camel@elmer-P35-DS3P>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
Date: Wed, 6 Jul 2011 12:23:56 -0400
Message-ID: <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
Subject: Re: Autocompletion on large index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

You could try storing your autocomplete index in a RAMDirectory?

But: I'm surprised you see the FST suggest impl using up so much RAM;
very low memory usage is one of the strengths of the FST approach.
Can you share the text (titles) you are feeding to the suggest module?

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
> Hi again.
>
> I have created my own autocompleter based on the spellchecker. This
> works well in a sense that it is able to create an auto completion index
> from my 'publication' index. However, integrated in my web application,
> each keypress asks autocompleter to search the index, which is stored on
> disk (not in mem), just like spellchecker does (except that spellchecker
> is not invoked every keypress).
> With Lucene 3.3.0, auto completion modules are included, which load
> their trees/fsa/... in memory. I'd like to use these modules, but the
> problem is that they use more than 2.5GB, causing heap space exceptions.
> This happens when I try to build a LookUp index (fst,jaspell or tst,
> doesn't matter) from my 'publication' index consisting of 1.3M
> publications. The field I use for autocompletion holds the titles of the
> publications indexed untokenized (but lowercased).
>
> Code:
> Lookup autoCompleter = new TSTLookup();
> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
> LuceneDictionary dict = new
> LuceneDictionary(IndexReader.open(dir),"title_suggest");
> autoCompleter.build(dict);
>
> Is it possible to have the autocompletion module to work in-memory on
> such a dataset without increasing java's heapspace?
> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
> my own autocompleter index is stored on disk using about 300MB.
>
> BR,
> Elmer
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 17:50:42 2011
Return-Path: <java-user-return-50263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A3E2F6120
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 17:50:42 +0000 (UTC)
Received: (qmail 21750 invoked by uid 500); 6 Jul 2011 17:50:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21677 invoked by uid 500); 6 Jul 2011 17:50:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21669 invoked by uid 99); 6 Jul 2011 17:50:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 17:50:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 17:50:33 +0000
Received: by eya28 with SMTP id 28so72214eya.35
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 10:50:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:in-reply-to:subject:date:mime-version
         :content-type:content-transfer-encoding:x-priority:x-msmail-priority
         :importance:x-mailer:x-mimeole;
        bh=H+sutmU8nnwJ/Za3pVx5u6UzjVNT60ZfdPUs1/B11Kk=;
        b=LgWiLL5dM32JEZldinGOeETp1yhPtQLNRWwYipUa4b+MPigoAJVjTnkVXdo6RrfaXo
         E//AIeLqAkEeGLuxoXKTbOQuAuIfBrVpkZtBE5efJRRamtAHMN+9WBn7e+JS8aQyPQJb
         8CeMqON+wH2CKJR5V/A18PopW/JWXHo/Ki5bs=
Received: by 10.213.17.148 with SMTP id s20mr2035880eba.33.1309974612159;
        Wed, 06 Jul 2011 10:50:12 -0700 (PDT)
Received: from ElmerPC (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id r39sm6365196eeb.11.2011.07.06.10.50.10
        (version=SSLv3 cipher=OTHER);
        Wed, 06 Jul 2011 10:50:11 -0700 (PDT)
Message-ID: <5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
From: "Elmer" <evanchastelet@gmail.com>
To: <java-user@lucene.apache.org>
References: <1309968498.25963.17.camel@elmer-P35-DS3P> <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
In-Reply-To: <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
Subject: Re: Autocompletion on large index
Date: Wed, 6 Jul 2011 19:50:08 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3508.1109
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3508.1109

Hi Mike,

That's what I thought when I started indexing it. To be clear, it happens on 
build time.
I don't know if memory efficiency is better when building has finished.

The titles I index are titles from the dblp computer sience bibliography. 
They can take up to... say 100 characters.
Examples:
-------
- Auditory stimulus optimization with feedback from fuzzy clustering of 
neuronal responses
- Two-objective method for crisp and fuzzy interval comparison in 
optimization
- Bound Constrained Smooth Optimization for Solving Variational Inequalities 
and Related Problems
- Retrieval of bibliographic records using Apache Lucene
- Digital Library Information Appliances
-------

The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter in 
that order.

I also tried to do the same for the author names, and this works without 
problems. Actually it builds the tree/fsa/... faster from dictionary than 
from file (the lookup data file that can be stored and loaded through the 
.store and .load methods). But the larger set of publication titles is 
currently no-go with 2.5GB of heapspace, only having a main class that 
builds the LookUp data.

BR,
Elmer


-----Oorspronkelijk bericht----- 
From: Michael McCandless
Sent: Wednesday, July 06, 2011 6:23 PM
To: java-user@lucene.apache.org
Subject: Re: Autocompletion on large index

You could try storing your autocomplete index in a RAMDirectory?

But: I'm surprised you see the FST suggest impl using up so much RAM;
very low memory usage is one of the strengths of the FST approach.
Can you share the text (titles) you are feeding to the suggest module?

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
> Hi again.
>
> I have created my own autocompleter based on the spellchecker. This
> works well in a sense that it is able to create an auto completion index
> from my 'publication' index. However, integrated in my web application,
> each keypress asks autocompleter to search the index, which is stored on
> disk (not in mem), just like spellchecker does (except that spellchecker
> is not invoked every keypress).
> With Lucene 3.3.0, auto completion modules are included, which load
> their trees/fsa/... in memory. I'd like to use these modules, but the
> problem is that they use more than 2.5GB, causing heap space exceptions.
> This happens when I try to build a LookUp index (fst,jaspell or tst,
> doesn't matter) from my 'publication' index consisting of 1.3M
> publications. The field I use for autocompletion holds the titles of the
> publications indexed untokenized (but lowercased).
>
> Code:
> Lookup autoCompleter = new TSTLookup();
> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
> LuceneDictionary dict = new
> LuceneDictionary(IndexReader.open(dir),"title_suggest");
> autoCompleter.build(dict);
>
> Is it possible to have the autocompletion module to work in-memory on
> such a dataset without increasing java's heapspace?
> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
> my own autocompleter index is stored on disk using about 300MB.
>
> BR,
> Elmer
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 18:03:06 2011
Return-Path: <java-user-return-50264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id CEFCD63DF
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 18:03:06 +0000 (UTC)
Received: (qmail 49051 invoked by uid 500); 6 Jul 2011 18:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48967 invoked by uid 500); 6 Jul 2011 18:03:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48954 invoked by uid 99); 6 Jul 2011 18:03:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 18:03:03 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 18:02:55 +0000
Received: by ewy22 with SMTP id 22so83856ewy.35
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 11:02:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:in-reply-to:subject:date:mime-version
         :content-type:content-transfer-encoding:x-priority:x-msmail-priority
         :importance:x-mailer:x-mimeole;
        bh=HeDPlzJYpoMKL/gqp9ZC3/8rOgNvxYgCtZrugF94QbA=;
        b=QHS0tn6pGvYwyaDrVg/XTpUUpjbYCtYQUpQM4sBCXbDmda7HCv1ro5R7VhGPAJQ9TS
         j+xYWHZZMVUkD3BO90gMUIEbiT1PwPYQWpkHXPfuZ1MYnlYViQGZAl0FG3jpnogGgn/o
         vkVOC9Nnxkxc2naRkF8J5xuxpf4TnHIU3Xw5E=
Received: by 10.14.22.6 with SMTP id s6mr1281545ees.95.1309975355449;
        Wed, 06 Jul 2011 11:02:35 -0700 (PDT)
Received: from ElmerPC (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id b9sm6373318een.8.2011.07.06.11.02.33
        (version=SSLv3 cipher=OTHER);
        Wed, 06 Jul 2011 11:02:33 -0700 (PDT)
Message-ID: <79155CF3ACA84442B7C89EF837361380@ElmerPC>
From: "Elmer" <evanchastelet@gmail.com>
To: <java-user@lucene.apache.org>
References: <1309968498.25963.17.camel@elmer-P35-DS3P> <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
In-Reply-To: <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
Subject: Re: Autocompletion on large index
Date: Wed, 6 Jul 2011 20:02:31 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3508.1109
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3508.1109
X-Virus-Checked: Checked by ClamAV on apache.org

> You could try storing your autocomplete index in a RAMDirectory?

I forgot to mention. I tried this previously, but that also resulted in heap 
space problems. That's why I was interested in using the new suggest classes 
:)

BR,
Elmer

-----Oorspronkelijk bericht----- 
From: Michael McCandless
Sent: Wednesday, July 06, 2011 6:23 PM
To: java-user@lucene.apache.org
Subject: Re: Autocompletion on large index

You could try storing your autocomplete index in a RAMDirectory?

But: I'm surprised you see the FST suggest impl using up so much RAM;
very low memory usage is one of the strengths of the FST approach.
Can you share the text (titles) you are feeding to the suggest module?

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
> Hi again.
>
> I have created my own autocompleter based on the spellchecker. This
> works well in a sense that it is able to create an auto completion index
> from my 'publication' index. However, integrated in my web application,
> each keypress asks autocompleter to search the index, which is stored on
> disk (not in mem), just like spellchecker does (except that spellchecker
> is not invoked every keypress).
> With Lucene 3.3.0, auto completion modules are included, which load
> their trees/fsa/... in memory. I'd like to use these modules, but the
> problem is that they use more than 2.5GB, causing heap space exceptions.
> This happens when I try to build a LookUp index (fst,jaspell or tst,
> doesn't matter) from my 'publication' index consisting of 1.3M
> publications. The field I use for autocompletion holds the titles of the
> publications indexed untokenized (but lowercased).
>
> Code:
> Lookup autoCompleter = new TSTLookup();
> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
> LuceneDictionary dict = new
> LuceneDictionary(IndexReader.open(dir),"title_suggest");
> autoCompleter.build(dict);
>
> Is it possible to have the autocompletion module to work in-memory on
> such a dataset without increasing java's heapspace?
> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
> my own autocompleter index is stored on disk using about 300MB.
>
> BR,
> Elmer
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 18:40:03 2011
Return-Path: <java-user-return-50265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9955369A1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 18:40:03 +0000 (UTC)
Received: (qmail 99874 invoked by uid 500); 6 Jul 2011 18:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99762 invoked by uid 500); 6 Jul 2011 18:40:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99754 invoked by uid 99); 6 Jul 2011 18:40:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 18:40:00 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 18:39:55 +0000
Received: by vws7 with SMTP id 7so292199vws.35
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 11:39:34 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.180.234 with SMTP id dr10mr8848136vdc.124.1309977573850;
 Wed, 06 Jul 2011 11:39:33 -0700 (PDT)
Received: by 10.52.157.226 with HTTP; Wed, 6 Jul 2011 11:39:33 -0700 (PDT)
In-Reply-To: <5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	<CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	<5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
Date: Wed, 6 Jul 2011 14:39:33 -0400
Message-ID: <CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
Subject: Re: Autocompletion on large index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

Hmm... so I suspect the fst suggest module must first gather up all
titles, then sort them, in RAM, and then build the actual FST.  Maybe
it's this gather + sort that's taking so much RAM?

1.3 M publications times 100 chars times 2 bytes/char = ~248 MB.  So
that shouldn't be it...

Is this a an accessible corpus?  Can I somehow get a copy to play with...?

Are you able to [temporarily, once] build the full FST and other
suggest impls and compare how much RAM is required for building and
then lookups?

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jul 6, 2011 at 1:50 PM, Elmer <evanchastelet@gmail.com> wrote:
> Hi Mike,
>
> That's what I thought when I started indexing it. To be clear, it happens on
> build time.
> I don't know if memory efficiency is better when building has finished.
>
> The titles I index are titles from the dblp computer sience bibliography.
> They can take up to... say 100 characters.
> Examples:
> -------
> - Auditory stimulus optimization with feedback from fuzzy clustering of
> neuronal responses
> - Two-objective method for crisp and fuzzy interval comparison in
> optimization
> - Bound Constrained Smooth Optimization for Solving Variational Inequalities
> and Related Problems
> - Retrieval of bibliographic records using Apache Lucene
> - Digital Library Information Appliances
> -------
>
> The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter in
> that order.
>
> I also tried to do the same for the author names, and this works without
> problems. Actually it builds the tree/fsa/... faster from dictionary than
> from file (the lookup data file that can be stored and loaded through the
> .store and .load methods). But the larger set of publication titles is
> currently no-go with 2.5GB of heapspace, only having a main class that
> builds the LookUp data.
>
> BR,
> Elmer
>
>
> -----Oorspronkelijk bericht----- From: Michael McCandless
> Sent: Wednesday, July 06, 2011 6:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Autocompletion on large index
>
> You could try storing your autocomplete index in a RAMDirectory?
>
> But: I'm surprised you see the FST suggest impl using up so much RAM;
> very low memory usage is one of the strengths of the FST approach.
> Can you share the text (titles) you are feeding to the suggest module?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
>>
>> Hi again.
>>
>> I have created my own autocompleter based on the spellchecker. This
>> works well in a sense that it is able to create an auto completion index
>> from my 'publication' index. However, integrated in my web application,
>> each keypress asks autocompleter to search the index, which is stored on
>> disk (not in mem), just like spellchecker does (except that spellchecker
>> is not invoked every keypress).
>> With Lucene 3.3.0, auto completion modules are included, which load
>> their trees/fsa/... in memory. I'd like to use these modules, but the
>> problem is that they use more than 2.5GB, causing heap space exceptions.
>> This happens when I try to build a LookUp index (fst,jaspell or tst,
>> doesn't matter) from my 'publication' index consisting of 1.3M
>> publications. The field I use for autocompletion holds the titles of the
>> publications indexed untokenized (but lowercased).
>>
>> Code:
>> Lookup autoCompleter = new TSTLookup();
>> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
>> LuceneDictionary dict = new
>> LuceneDictionary(IndexReader.open(dir),"title_suggest");
>> autoCompleter.build(dict);
>>
>> Is it possible to have the autocompletion module to work in-memory on
>> such a dataset without increasing java's heapspace?
>> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
>> my own autocompleter index is stored on disk using about 300MB.
>>
>> BR,
>> Elmer
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 18:52:49 2011
Return-Path: <java-user-return-50266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 19A486105
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 18:52:49 +0000 (UTC)
Received: (qmail 17081 invoked by uid 500); 6 Jul 2011 18:52:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17027 invoked by uid 500); 6 Jul 2011 18:52:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17019 invoked by uid 99); 6 Jul 2011 18:52:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 18:52:46 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 18:52:39 +0000
Received: by ewy22 with SMTP id 22so107696ewy.35
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 11:52:18 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:in-reply-to:subject:date:mime-version
         :content-type:content-transfer-encoding:x-priority:x-msmail-priority
         :importance:x-mailer:x-mimeole;
        bh=cjvrbLFBNeIWUwH/UqbnhQFMpmygF06Hywz3ZkoqYAM=;
        b=rTisPkOEv8OE0iGhVvEKwl84wwxUYBn8htGR0y+OizrUFXae+vDkNMLNmjtGiEAlzH
         ASOBdnVhgQitg4yKuQAwy814AW6oDvUwhUknkSOKYYjpPFUXkEGkj3W1J6eMfJ3IchMD
         o7UDujSw8jcs1LNMY2V1r40KRXYBsmQpGgXng=
Received: by 10.213.23.6 with SMTP id p6mr1049841ebb.81.1309978337782;
        Wed, 06 Jul 2011 11:52:17 -0700 (PDT)
Received: from ElmerPC (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id q16sm6394453eef.21.2011.07.06.11.52.15
        (version=SSLv3 cipher=OTHER);
        Wed, 06 Jul 2011 11:52:16 -0700 (PDT)
Message-ID: <EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
From: "Elmer" <evanchastelet@gmail.com>
To: <java-user@lucene.apache.org>
References: <1309968498.25963.17.camel@elmer-P35-DS3P><CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com><5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC> <CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
In-Reply-To: <CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
Subject: Re: Autocompletion on large index
Date: Wed, 6 Jul 2011 20:52:13 +0200
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
Importance: Normal
X-Mailer: Microsoft Windows Live Mail 15.4.3508.1109
X-MimeOLE: Produced By Microsoft MimeOLE V15.4.3508.1109

I just profiled the application and tst.TernaryTreeNode takes 99.99..% of 
the memory.

I'll test further tomorrow and report on mem usage for runnable smaller 
indexes.
I will email you privately for sharing the index to work with.

BR,
Elmer


-----Oorspronkelijk bericht----- 
From: Michael McCandless
Sent: Wednesday, July 06, 2011 8:39 PM
To: java-user@lucene.apache.org
Subject: Re: Autocompletion on large index

Hmm... so I suspect the fst suggest module must first gather up all
titles, then sort them, in RAM, and then build the actual FST.  Maybe
it's this gather + sort that's taking so much RAM?

1.3 M publications times 100 chars times 2 bytes/char = ~248 MB.  So
that shouldn't be it...

Is this a an accessible corpus?  Can I somehow get a copy to play with...?

Are you able to [temporarily, once] build the full FST and other
suggest impls and compare how much RAM is required for building and
then lookups?

Mike McCandless

http://blog.mikemccandless.com

On Wed, Jul 6, 2011 at 1:50 PM, Elmer <evanchastelet@gmail.com> wrote:
> Hi Mike,
>
> That's what I thought when I started indexing it. To be clear, it happens 
> on
> build time.
> I don't know if memory efficiency is better when building has finished.
>
> The titles I index are titles from the dblp computer sience bibliography.
> They can take up to... say 100 characters.
> Examples:
> -------
> - Auditory stimulus optimization with feedback from fuzzy clustering of
> neuronal responses
> - Two-objective method for crisp and fuzzy interval comparison in
> optimization
> - Bound Constrained Smooth Optimization for Solving Variational 
> Inequalities
> and Related Problems
> - Retrieval of bibliographic records using Apache Lucene
> - Digital Library Information Appliances
> -------
>
> The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter in
> that order.
>
> I also tried to do the same for the author names, and this works without
> problems. Actually it builds the tree/fsa/... faster from dictionary than
> from file (the lookup data file that can be stored and loaded through the
> .store and .load methods). But the larger set of publication titles is
> currently no-go with 2.5GB of heapspace, only having a main class that
> builds the LookUp data.
>
> BR,
> Elmer
>
>
> -----Oorspronkelijk bericht----- From: Michael McCandless
> Sent: Wednesday, July 06, 2011 6:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Autocompletion on large index
>
> You could try storing your autocomplete index in a RAMDirectory?
>
> But: I'm surprised you see the FST suggest impl using up so much RAM;
> very low memory usage is one of the strengths of the FST approach.
> Can you share the text (titles) you are feeding to the suggest module?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
>>
>> Hi again.
>>
>> I have created my own autocompleter based on the spellchecker. This
>> works well in a sense that it is able to create an auto completion index
>> from my 'publication' index. However, integrated in my web application,
>> each keypress asks autocompleter to search the index, which is stored on
>> disk (not in mem), just like spellchecker does (except that spellchecker
>> is not invoked every keypress).
>> With Lucene 3.3.0, auto completion modules are included, which load
>> their trees/fsa/... in memory. I'd like to use these modules, but the
>> problem is that they use more than 2.5GB, causing heap space exceptions.
>> This happens when I try to build a LookUp index (fst,jaspell or tst,
>> doesn't matter) from my 'publication' index consisting of 1.3M
>> publications. The field I use for autocompletion holds the titles of the
>> publications indexed untokenized (but lowercased).
>>
>> Code:
>> Lookup autoCompleter = new TSTLookup();
>> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
>> LuceneDictionary dict = new
>> LuceneDictionary(IndexReader.open(dir),"title_suggest");
>> autoCompleter.build(dict);
>>
>> Is it possible to have the autocompletion module to work in-memory on
>> such a dataset without increasing java's heapspace?
>> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
>> my own autocompleter index is stored on disk using about 300MB.
>>
>> BR,
>> Elmer
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul  6 21:35:13 2011
Return-Path: <java-user-return-50267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1A2396C7B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed,  6 Jul 2011 21:35:13 +0000 (UTC)
Received: (qmail 93665 invoked by uid 500); 6 Jul 2011 21:35:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93627 invoked by uid 500); 6 Jul 2011 21:35:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93619 invoked by uid 99); 6 Jul 2011 21:35:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 21:35:09 +0000
X-ASF-Spam-Status: No, hits=1.6 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jahan9@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2011 21:35:03 +0000
Received: by iyi20 with SMTP id 20so517938iyi.35
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 14:34:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=EiD+gl9s2kwsJGnzuLvh0bLcEOFq7SuWXEDxAPXfcEY=;
        b=WVivaW0CbQAw7shKinlyLHkK9DPnCJUeN+cD0o7Gz5UTenttZ2LNy8DtnYOdQsbsp/
         kNUl6Gl6dSLc7rA6ox+i+WkoStsEfqNobs5fzdneMnPW1ukcUtWPJ9Fh7hsrZqW0QptT
         QbFvTXRivV8Y54CAHUdds7k1gYuC7h7iV6RvQ=
MIME-Version: 1.0
Received: by 10.42.8.65 with SMTP id h1mr65853ich.211.1309988082662; Wed, 06
 Jul 2011 14:34:42 -0700 (PDT)
Received: by 10.231.30.200 with HTTP; Wed, 6 Jul 2011 14:34:42 -0700 (PDT)
Date: Thu, 7 Jul 2011 00:34:42 +0300
Message-ID: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com>
Subject: Extracting span terms using WeightedSpanTermExtractor
From: Jahangir Anwari <jahan9@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00504501645b53bf0304a76d5ea6

--00504501645b53bf0304a76d5ea6
Content-Type: text/plain; charset=UTF-8

I have a CustomHighlighter that extends the SolrHighlighter and overrides
the doHighlighting() method. Then for each document I am trying to extract
the span terms so that later I can use it to get the span Positions. I tried
to get the weightedSpanTerms using WeightedSpanTermExtractor but was
unsuccessful. Below is the code that I am have. Is there something missing
that needs to be added to get the span terms?

// in CustomHighlighter.java
@Override
public NamedList doHighlighting(DocList docs, Query query, SolrQueryRequest
req, String[] defaultFields) throws IOException {

  NamedList highlightedSnippets = super.doHighlighting(docs, query, req,
defaultFields);

  IndexReader reader = req.getSearcher().getIndexReader();

  String[] fieldNames = getHighlightFields(query, req, defaultFields);
  for (String fieldName : fieldNames)
  {
  QueryScorer scorer = new QueryScorer(query, null);
  scorer.setExpandMultiTermQuery(true);
  scorer.setMaxDocCharsToAnalyze(51200);

  DocIterator iterator = docs.iterator();
  for (int i = 0; i < docs.size(); i++)
  {
int docId = iterator.nextDoc();
System.out.println("DocId: " + docId);
 TokenStream tokenStream = TokenSources.getTokenStream(reader, docId,
fieldName);
 WeightedSpanTermExtractor wste = new WeightedSpanTermExtractor(fieldName);
wste.setExpandMultiTermQuery(true);
wste.setWrapIfNotCachingTokenFilter(true);

Map<String,WeightedSpanTerm> weightedSpanTerms  =
wste.getWeightedSpanTerms(query, tokenStream, fieldName); // this is always
empty
System.out.println("weightedSpanTerms: " + weightedSpanTerms.values());

  }
  }
     return highlightedSnippets;

}

Thanks,
Jahangir

--00504501645b53bf0304a76d5ea6--

From java-user-return-50268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 00:29:27 2011
Return-Path: <java-user-return-50268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DE16260BC
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 00:29:27 +0000 (UTC)
Received: (qmail 14174 invoked by uid 500); 7 Jul 2011 00:29:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13964 invoked by uid 500); 7 Jul 2011 00:29:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13953 invoked by uid 99); 7 Jul 2011 00:29:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 00:29:24 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 00:29:16 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id A5E593672DA4;
	Wed,  6 Jul 2011 20:28:55 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 8RDzWwg7KEwJ; Wed,  6 Jul 2011 20:28:54 -0400 (EDT)
Received: from [192.168.0.154] (pool-108-7-217-216.bstnma.fios.verizon.net [108.7.217.216])
	by camelot.ifactory.com (Postfix) with ESMTPSA id 4AB6B367245C;
	Wed,  6 Jul 2011 20:28:54 -0400 (EDT)
Message-ID: <4E14FDC6.7040300@ifactory.com>
Date: Wed, 06 Jul 2011 20:28:54 -0400
From: Michael Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Jahangir Anwari <jahan9@gmail.com>
Subject: Re: Extracting span terms using WeightedSpanTermExtractor
References: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com>
In-Reply-To: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit

I tried something similar, and failed - I think the API is lacking 
there?  My only advice is to vote for this: 
https://issues.apache.org/jira/browse/LUCENE-2878 which should provide 
an alternative better API, but it's not near completion.

-Mike

On 7/6/2011 5:34 PM, Jahangir Anwari wrote:
> I have a CustomHighlighter that extends the SolrHighlighter and overrides
> the doHighlighting() method. Then for each document I am trying to extract
> the span terms so that later I can use it to get the span Positions. I tried
> to get the weightedSpanTerms using WeightedSpanTermExtractor but was
> unsuccessful. Below is the code that I am have. Is there something missing
> that needs to be added to get the span terms?
>
> // in CustomHighlighter.java
> @Override
> public NamedList doHighlighting(DocList docs, Query query, SolrQueryRequest
> req, String[] defaultFields) throws IOException {
>
>    NamedList highlightedSnippets = super.doHighlighting(docs, query, req,
> defaultFields);
>
>    IndexReader reader = req.getSearcher().getIndexReader();
>
>    String[] fieldNames = getHighlightFields(query, req, defaultFields);
>    for (String fieldName : fieldNames)
>    {
>    QueryScorer scorer = new QueryScorer(query, null);
>    scorer.setExpandMultiTermQuery(true);
>    scorer.setMaxDocCharsToAnalyze(51200);
>
>    DocIterator iterator = docs.iterator();
>    for (int i = 0; i<  docs.size(); i++)
>    {
> int docId = iterator.nextDoc();
> System.out.println("DocId: " + docId);
>   TokenStream tokenStream = TokenSources.getTokenStream(reader, docId,
> fieldName);
>   WeightedSpanTermExtractor wste = new WeightedSpanTermExtractor(fieldName);
> wste.setExpandMultiTermQuery(true);
> wste.setWrapIfNotCachingTokenFilter(true);
>
> Map<String,WeightedSpanTerm>  weightedSpanTerms  =
> wste.getWeightedSpanTerms(query, tokenStream, fieldName); // this is always
> empty
> System.out.println("weightedSpanTerms: " + weightedSpanTerms.values());
>
>    }
>    }
>       return highlightedSnippets;
>
> }
>
> Thanks,
> Jahangir
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 01:41:23 2011
Return-Path: <java-user-return-50269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BF7A9666F
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 01:41:23 +0000 (UTC)
Received: (qmail 82895 invoked by uid 500); 7 Jul 2011 01:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82771 invoked by uid 500); 7 Jul 2011 01:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82762 invoked by uid 99); 7 Jul 2011 01:41:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 01:41:20 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 01:41:12 +0000
Received: by qyk4 with SMTP id 4so369448qyk.14
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2011 18:40:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=R6Xk9BaMsYoJKlSwc9OzhEl0TPLi3U1vWd3N/rpCsDA=;
        b=VBXxvmjfuYeERrsRAu69bQNX+oXPSvOdogokuLX0MQpCrF/74PI2ZBoyMyb6GhBeUQ
         GmUVg7dBs3NFJw+eXDChxy42cL78XscspFqpU921JDMTdHXIZcwChAvAQF1aBmSGH53C
         aQ2wYSNskS+KuDws22Qa8UKfqDxOFZzWEeYwA=
Received: by 10.224.89.1 with SMTP id c1mr189634qam.7.1310002851585;
        Wed, 06 Jul 2011 18:40:51 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c78059.dyn.optonline.net [68.199.128.89])
        by mx.google.com with ESMTPS id m31sm4109308qck.37.2011.07.06.18.40.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 06 Jul 2011 18:40:50 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Extracting span terms using WeightedSpanTermExtractor
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com>
Date: Wed, 6 Jul 2011 21:40:48 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <F158D191-C949-4E20-B610-BF65DC13DF8C@gmail.com>
References: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry - kind of my fault. When I fixed this to use maxDocCharsToAnalyze, =
I didn't set a default other than 0 because I didn't really count on =
this being used beyond how it is in the Highlighter - which always sets =
maxDocCharsToAnalyze with it's default.
=20
You've got to explicitly set it higher than 0 for now.

Feel free to create a JIRA issue and we can give it's own default =
greater than 0.

- Mark Miller
lucidimagination.com


On Jul 6, 2011, at 5:34 PM, Jahangir Anwari wrote:

> I have a CustomHighlighter that extends the SolrHighlighter and =
overrides
> the doHighlighting() method. Then for each document I am trying to =
extract
> the span terms so that later I can use it to get the span Positions. I =
tried
> to get the weightedSpanTerms using WeightedSpanTermExtractor but was
> unsuccessful. Below is the code that I am have. Is there something =
missing
> that needs to be added to get the span terms?
>=20
> // in CustomHighlighter.java
> @Override
> public NamedList doHighlighting(DocList docs, Query query, =
SolrQueryRequest
> req, String[] defaultFields) throws IOException {
>=20
>  NamedList highlightedSnippets =3D super.doHighlighting(docs, query, =
req,
> defaultFields);
>=20
>  IndexReader reader =3D req.getSearcher().getIndexReader();
>=20
>  String[] fieldNames =3D getHighlightFields(query, req, =
defaultFields);
>  for (String fieldName : fieldNames)
>  {
>  QueryScorer scorer =3D new QueryScorer(query, null);
>  scorer.setExpandMultiTermQuery(true);
>  scorer.setMaxDocCharsToAnalyze(51200);
>=20
>  DocIterator iterator =3D docs.iterator();
>  for (int i =3D 0; i < docs.size(); i++)
>  {
> int docId =3D iterator.nextDoc();
> System.out.println("DocId: " + docId);
> TokenStream tokenStream =3D TokenSources.getTokenStream(reader, docId,
> fieldName);
> WeightedSpanTermExtractor wste =3D new =
WeightedSpanTermExtractor(fieldName);
> wste.setExpandMultiTermQuery(true);
> wste.setWrapIfNotCachingTokenFilter(true);
>=20
> Map<String,WeightedSpanTerm> weightedSpanTerms  =3D
> wste.getWeightedSpanTerms(query, tokenStream, fieldName); // this is =
always
> empty
> System.out.println("weightedSpanTerms: " + =
weightedSpanTerms.values());
>=20
>  }
>  }
>     return highlightedSnippets;
>=20
> }
>=20
> Thanks,
> Jahangir











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 03:50:33 2011
Return-Path: <java-user-return-50270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 59CA64E3B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 03:50:33 +0000 (UTC)
Received: (qmail 89750 invoked by uid 500); 7 Jul 2011 03:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88960 invoked by uid 500); 7 Jul 2011 03:50:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88952 invoked by uid 99); 7 Jul 2011 03:50:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 03:50:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [98.139.212.254] (HELO nm15-vm0.bullet.mail.bf1.yahoo.com) (98.139.212.254)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jul 2011 03:50:02 +0000
Received: from [98.139.212.153] by nm15.bullet.mail.bf1.yahoo.com with NNFMP; 07 Jul 2011 03:49:40 -0000
Received: from [98.139.212.217] by tm10.bullet.mail.bf1.yahoo.com with NNFMP; 07 Jul 2011 03:49:39 -0000
Received: from [127.0.0.1] by omp1026.mail.bf1.yahoo.com with NNFMP; 07 Jul 2011 03:49:39 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 983058.6579.bm@omp1026.mail.bf1.yahoo.com
Received: (qmail 55681 invoked by uid 60001); 7 Jul 2011 03:49:39 -0000
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1310010579; bh=NLJJdOu9JdI+TsQ0mvSgPqSHE97OvG8ByvCnZia3F8c=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding; b=xSrlrfgGazL5h7KPWpGmRkzoGKSRd4Oq6DIQDlzJJGRYTKD8zmXXzuvs/t3uq4PoMP6sNkrCqapxYI5G148o4s/b22yPJytOH+c967xzp2el315rzZijFBEQfjdNZVGsif2Xyv1C2sgkvDHtae1Uj8q57/xWjYPUpwXAgsHa/hM=
DomainKey-Signature:a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=JE+/m8vqDy1abc9mx9amIKsqvKSfPQCL7qiG4X0uU/DATutEHAU95DZnVDcr1FD/N7ZtdMML+vEjaM6OMgIoCoHiTR+daKMbdFSKNOJS5lH6um+AtxfW+VPpGmpPb7dCSw5BcDQl5WZLoe1WGgb5O61MujoRFRZxYdSq+g/YH00=;
X-YMail-OSG: X6OQRrcVM1lk.7mryhFw36uvfoK1ey8nV9SKG8CE4eniARO
 x0bvtJfuKLqZscWNIdn3NLkBUyua7q3NAwgV.RHBmcSwbkTXWs.Fv0dwwahG
 8CpIG0rqCM7LnTU9TWBjeOFfQ9H14C8gk2jgKDwUHA2wO3aY63C6uiF6ur7w
 eeJpso1SNJZ72GBFkruKluLqvjHit.93TS6ekddnwrYi.0pGhCQ5ZJnfstKh
 81lGqa5NRVBB.z5Tk9Pg8qbGinCWY5Mn7dAUkIGbi4fjdds.FakhLjNNWqO4
 d2gSKguckA8cUkUWydTVpRAL97KP6BwEtVPPR2ZfH714MSCmONtS_x2vBYbT
 p6yLwI7hhk3OMr88MNrjRAwxoteJ2DXDN2g5Cx2Fvw_qtlBVbQ_SKpirxspA
 JcjhWn.4cgfXKSYHi7ueNmyBa5kIilIaY8kbDXejqi_vkoZxwYklsban_LEp
 kq7k0LOvb8go8R3On53olzBHzvM4iNlxEoodyVogf2bL5K6oxD0XCmfHMJaX
 kXpADllW7bQ--
Received: from [74.73.25.254] by web130101.mail.mud.yahoo.com via HTTP; Wed, 06 Jul 2011 20:49:39 PDT
X-Mailer: YahooMailWebService/0.8.112.307740
References: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com>
Message-ID: <1310010579.54254.YahooMailNeo@web130101.mail.mud.yahoo.com>
Date: Wed, 6 Jul 2011 20:49:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: distributing the indexing process
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
In-Reply-To: <A101F1DEC1952E47BB64C4E78BB1CFC9010FCB34@IDCEXCHVS.made2manage.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

We've used Hadoop MapReduce with Solr to parallelize indexing for a custome=
r and that brought down their multi-hour indexing process down to a couple =
of minutes.=A0 There is/was also Lucene-level contrib in Hadoop that makes =
use of MapReduce to parallelize indexing.=0A=0AOtis=0A=0A----=0ASematext ::=
 http://sematext.com/ :: Solr - Lucene - Nutch=0ALucene ecosystem search ::=
 http://search-lucene.com/=0A=0A=0A----- Original Message -----=0A> From: G=
uru Chandar <Guru.Chandar@consona.com>=0A> To: java-user@lucene.apache.org=
=0A> Cc: =0A> Sent: Thursday, June 30, 2011 5:12 AM=0A> Subject: distributi=
ng the indexing process=0A> =0A> =0A> =0A> If we have to index a lot of doc=
uments, is there a way to divide the=0A> documents into multiple sets and i=
ndex them on multiple machines in=0A> parallel, and then merge the resultin=
g indexes back into a single=0A> machine? If yes, will the result be logica=
lly equivalent to indexing all=0A> the documents on a single machine?=0A> =
=0A> =0A> =0A> Thanks,=0A> =0A> -gc=0A>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 09:10:48 2011
Return-Path: <java-user-return-50271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1EC784C3D
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 09:10:48 +0000 (UTC)
Received: (qmail 5205 invoked by uid 500); 7 Jul 2011 09:10:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4444 invoked by uid 500); 7 Jul 2011 09:10:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4418 invoked by uid 99); 7 Jul 2011 09:10:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 09:10:09 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 09:10:03 +0000
Received: by yic24 with SMTP id 24so432211yic.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 02:09:43 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=HzaOVo78oxILFij/0a0F23+lG2rXow6Kc+TGiN51NJQ=;
        b=KPdvq4qSFYoVzoqohPjEEJmGoRWpiy8YzwQrJcO6afP4GMIqmWp1xM8ZCCbeX+sGI2
         HR3yNRMv3i5KLOXiO/UsdAHTejCVH0VYLk81rPlXv/Bbgf1ITvACB3Yz3WgcQvdmhVF+
         gPcTLvhTr4q/CIWqL/XRVlGw6BSf9bzt+57nk=
MIME-Version: 1.0
Received: by 10.91.121.16 with SMTP id y16mr717495agm.135.1310029782811; Thu,
 07 Jul 2011 02:09:42 -0700 (PDT)
Received: by 10.90.155.5 with HTTP; Thu, 7 Jul 2011 02:09:42 -0700 (PDT)
Received: by 10.90.155.5 with HTTP; Thu, 7 Jul 2011 02:09:42 -0700 (PDT)
In-Reply-To: <EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	<CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	<5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
	<CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
	<EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
Date: Thu, 7 Jul 2011 11:09:42 +0200
Message-ID: <CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
Subject: Re: Autocompletion on large index
From: Dawid Weiss <dawid.weiss@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001485f87cf6d9862004a777139e

--001485f87cf6d9862004a777139e
Content-Type: text/plain; charset=UTF-8

Elmer. Tst will have a large overhead. Fst may not be that much better if
your input has very few shared pre or suffixes. In your case i think this is
unfortunately true. What i would do is create a regular lucene index and
store it on disk. Then run prefix queries on it. Should work and scale to
large number of ops per sec. See lucene revolution 2011 talks - there was a
talk about using just this instead of a completion module.

Like mike said though, it'd be interesting to investigate on your data.
On Jul 6, 2011 8:52 PM, "Elmer" <evanchastelet@gmail.com> wrote:
> I just profiled the application and tst.TernaryTreeNode takes 99.99..% of
> the memory.
>
> I'll test further tomorrow and report on mem usage for runnable smaller
> indexes.
> I will email you privately for sharing the index to work with.
>
> BR,
> Elmer
>
>
> -----Oorspronkelijk bericht-----
> From: Michael McCandless
> Sent: Wednesday, July 06, 2011 8:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: Autocompletion on large index
>
> Hmm... so I suspect the fst suggest module must first gather up all
> titles, then sort them, in RAM, and then build the actual FST. Maybe
> it's this gather + sort that's taking so much RAM?
>
> 1.3 M publications times 100 chars times 2 bytes/char = ~248 MB. So
> that shouldn't be it...
>
> Is this a an accessible corpus? Can I somehow get a copy to play with...?
>
> Are you able to [temporarily, once] build the full FST and other
> suggest impls and compare how much RAM is required for building and
> then lookups?
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Wed, Jul 6, 2011 at 1:50 PM, Elmer <evanchastelet@gmail.com> wrote:
>> Hi Mike,
>>
>> That's what I thought when I started indexing it. To be clear, it happens

>> on
>> build time.
>> I don't know if memory efficiency is better when building has finished.
>>
>> The titles I index are titles from the dblp computer sience bibliography.
>> They can take up to... say 100 characters.
>> Examples:
>> -------
>> - Auditory stimulus optimization with feedback from fuzzy clustering of
>> neuronal responses
>> - Two-objective method for crisp and fuzzy interval comparison in
>> optimization
>> - Bound Constrained Smooth Optimization for Solving Variational
>> Inequalities
>> and Related Problems
>> - Retrieval of bibliographic records using Apache Lucene
>> - Digital Library Information Appliances
>> -------
>>
>> The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter
in
>> that order.
>>
>> I also tried to do the same for the author names, and this works without
>> problems. Actually it builds the tree/fsa/... faster from dictionary than
>> from file (the lookup data file that can be stored and loaded through the
>> .store and .load methods). But the larger set of publication titles is
>> currently no-go with 2.5GB of heapspace, only having a main class that
>> builds the LookUp data.
>>
>> BR,
>> Elmer
>>
>>
>> -----Oorspronkelijk bericht----- From: Michael McCandless
>> Sent: Wednesday, July 06, 2011 6:23 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Autocompletion on large index
>>
>> You could try storing your autocomplete index in a RAMDirectory?
>>
>> But: I'm surprised you see the FST suggest impl using up so much RAM;
>> very low memory usage is one of the strengths of the FST approach.
>> Can you share the text (titles) you are feeding to the suggest module?
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
>>>
>>> Hi again.
>>>
>>> I have created my own autocompleter based on the spellchecker. This
>>> works well in a sense that it is able to create an auto completion index
>>> from my 'publication' index. However, integrated in my web application,
>>> each keypress asks autocompleter to search the index, which is stored on
>>> disk (not in mem), just like spellchecker does (except that spellchecker
>>> is not invoked every keypress).
>>> With Lucene 3.3.0, auto completion modules are included, which load
>>> their trees/fsa/... in memory. I'd like to use these modules, but the
>>> problem is that they use more than 2.5GB, causing heap space exceptions.
>>> This happens when I try to build a LookUp index (fst,jaspell or tst,
>>> doesn't matter) from my 'publication' index consisting of 1.3M
>>> publications. The field I use for autocompletion holds the titles of the
>>> publications indexed untokenized (but lowercased).
>>>
>>> Code:
>>> Lookup autoCompleter = new TSTLookup();
>>> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
>>> LuceneDictionary dict = new
>>> LuceneDictionary(IndexReader.open(dir),"title_suggest");
>>> autoCompleter.build(dict);
>>>
>>> Is it possible to have the autocompletion module to work in-memory on
>>> such a dataset without increasing java's heapspace?
>>> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
>>> my own autocompleter index is stored on disk using about 300MB.
>>>
>>> BR,
>>> Elmer
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--001485f87cf6d9862004a777139e--

From java-user-return-50272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 10:24:52 2011
Return-Path: <java-user-return-50272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 89EE04604
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 10:24:52 +0000 (UTC)
Received: (qmail 14495 invoked by uid 500); 7 Jul 2011 10:24:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12421 invoked by uid 500); 7 Jul 2011 10:24:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12400 invoked by uid 99); 7 Jul 2011 10:24:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 10:24:31 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 10:24:23 +0000
Received: by vws7 with SMTP id 7so943318vws.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 03:24:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.76.193 with SMTP id m1mr860523vdw.204.1310034241970; Thu,
 07 Jul 2011 03:24:01 -0700 (PDT)
Received: by 10.52.161.41 with HTTP; Thu, 7 Jul 2011 03:24:01 -0700 (PDT)
In-Reply-To: <CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	<CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	<5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
	<CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
	<EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
	<CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
Date: Thu, 7 Jul 2011 06:24:01 -0400
Message-ID: <CAL8PwkbArUDSE-FutZ8QKpRcpQshJ5sdyPesDpL2nJESoc_KMQ@mail.gmail.com>
Subject: Re: Autocompletion on large index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

OK, Elmer sent me the titles (thanks!) and I ran some quick tests...

There are 1.32M titles, avg 67.3 chars per title (total 84.5 MB text
as utf8 on disk so at least 168.9 MB RAM for utf16, ie when loaded
in RAM).

I built the suggest FST from these titles, and it required 1.25 GB
heap (anything less hits OOME).  BUT: my test does not load all the
terms into RAM (just builds the FST directly from the TermsEnum), so
the "real" FSTLookup construction will require more RAM.

It took 22.5 seconds to build and the resulting FST is 91.6 MB.

Next I tried turning off suffix sharing, ie this "downgrades" the
resulting FST a prefix trie, but it saves RAM and CPU during building:
it built in 8.2 seconds and with 450 MB heap; the resulting FST is 129
MB.  The suggest module doesn't make this an option today but maybe we
should?  Suffix sharing requires sizable RAM while building because it
maintains a hash containing all nodes in order to locate the dups.

It's also possible to improve FST to have shades of gray between
on/off... I'll open an issue.

Mike McCandless

http://blog.mikemccandless.com

On Thu, Jul 7, 2011 at 5:09 AM, Dawid Weiss <dawid.weiss@gmail.com> wrote:
> Elmer. Tst will have a large overhead. Fst may not be that much better if
> your input has very few shared pre or suffixes. In your case i think this is
> unfortunately true. What i would do is create a regular lucene index and
> store it on disk. Then run prefix queries on it. Should work and scale to
> large number of ops per sec. See lucene revolution 2011 talks - there was a
> talk about using just this instead of a completion module.
>
> Like mike said though, it'd be interesting to investigate on your data.
> On Jul 6, 2011 8:52 PM, "Elmer" <evanchastelet@gmail.com> wrote:
>> I just profiled the application and tst.TernaryTreeNode takes 99.99..% of
>> the memory.
>>
>> I'll test further tomorrow and report on mem usage for runnable smaller
>> indexes.
>> I will email you privately for sharing the index to work with.
>>
>> BR,
>> Elmer
>>
>>
>> -----Oorspronkelijk bericht-----
>> From: Michael McCandless
>> Sent: Wednesday, July 06, 2011 8:39 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Autocompletion on large index
>>
>> Hmm... so I suspect the fst suggest module must first gather up all
>> titles, then sort them, in RAM, and then build the actual FST. Maybe
>> it's this gather + sort that's taking so much RAM?
>>
>> 1.3 M publications times 100 chars times 2 bytes/char = ~248 MB. So
>> that shouldn't be it...
>>
>> Is this a an accessible corpus? Can I somehow get a copy to play with...?
>>
>> Are you able to [temporarily, once] build the full FST and other
>> suggest impls and compare how much RAM is required for building and
>> then lookups?
>>
>> Mike McCandless
>>
>> http://blog.mikemccandless.com
>>
>> On Wed, Jul 6, 2011 at 1:50 PM, Elmer <evanchastelet@gmail.com> wrote:
>>> Hi Mike,
>>>
>>> That's what I thought when I started indexing it. To be clear, it happens
>
>>> on
>>> build time.
>>> I don't know if memory efficiency is better when building has finished.
>>>
>>> The titles I index are titles from the dblp computer sience bibliography.
>>> They can take up to... say 100 characters.
>>> Examples:
>>> -------
>>> - Auditory stimulus optimization with feedback from fuzzy clustering of
>>> neuronal responses
>>> - Two-objective method for crisp and fuzzy interval comparison in
>>> optimization
>>> - Bound Constrained Smooth Optimization for Solving Variational
>>> Inequalities
>>> and Related Problems
>>> - Retrieval of bibliographic records using Apache Lucene
>>> - Digital Library Information Appliances
>>> -------
>>>
>>> The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter
> in
>>> that order.
>>>
>>> I also tried to do the same for the author names, and this works without
>>> problems. Actually it builds the tree/fsa/... faster from dictionary than
>>> from file (the lookup data file that can be stored and loaded through the
>>> .store and .load methods). But the larger set of publication titles is
>>> currently no-go with 2.5GB of heapspace, only having a main class that
>>> builds the LookUp data.
>>>
>>> BR,
>>> Elmer
>>>
>>>
>>> -----Oorspronkelijk bericht----- From: Michael McCandless
>>> Sent: Wednesday, July 06, 2011 6:23 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Autocompletion on large index
>>>
>>> You could try storing your autocomplete index in a RAMDirectory?
>>>
>>> But: I'm surprised you see the FST suggest impl using up so much RAM;
>>> very low memory usage is one of the strengths of the FST approach.
>>> Can you share the text (titles) you are feeding to the suggest module?
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
>>>>
>>>> Hi again.
>>>>
>>>> I have created my own autocompleter based on the spellchecker. This
>>>> works well in a sense that it is able to create an auto completion index
>>>> from my 'publication' index. However, integrated in my web application,
>>>> each keypress asks autocompleter to search the index, which is stored on
>>>> disk (not in mem), just like spellchecker does (except that spellchecker
>>>> is not invoked every keypress).
>>>> With Lucene 3.3.0, auto completion modules are included, which load
>>>> their trees/fsa/... in memory. I'd like to use these modules, but the
>>>> problem is that they use more than 2.5GB, causing heap space exceptions.
>>>> This happens when I try to build a LookUp index (fst,jaspell or tst,
>>>> doesn't matter) from my 'publication' index consisting of 1.3M
>>>> publications. The field I use for autocompletion holds the titles of the
>>>> publications indexed untokenized (but lowercased).
>>>>
>>>> Code:
>>>> Lookup autoCompleter = new TSTLookup();
>>>> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
>>>> LuceneDictionary dict = new
>>>> LuceneDictionary(IndexReader.open(dir),"title_suggest");
>>>> autoCompleter.build(dict);
>>>>
>>>> Is it possible to have the autocompletion module to work in-memory on
>>>> such a dataset without increasing java's heapspace?
>>>> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
>>>> my own autocompleter index is stored on disk using about 300MB.
>>>>
>>>> BR,
>>>> Elmer
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 11:00:57 2011
Return-Path: <java-user-return-50273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C27A64360
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 11:00:57 +0000 (UTC)
Received: (qmail 65160 invoked by uid 500); 7 Jul 2011 11:00:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64973 invoked by uid 500); 7 Jul 2011 11:00:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64931 invoked by uid 99); 7 Jul 2011 11:00:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 11:00:47 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dawid.weiss@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 11:00:40 +0000
Received: by gxk7 with SMTP id 7so458560gxk.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 04:00:19 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=4z+TWI46EY5C6GmpcNa1E11mVqITJVo/GgnL0NKsPKQ=;
        b=Xdvb4wLoO9CdfRCb8jmirTM1I55hbpIBxpJkDGHp4+tzZ/J4fVtk2hFwKdobvaawCN
         PuvM6IDDZK0XVOkYDcrvppBLacl8aAEv0izC8OAeNG5RhpXkm6aY4cIJf9O6WVOtKv+H
         4mLYMHOcZ9iZbGmHGyUvZj1uKEhcjYOMLDGZQ=
MIME-Version: 1.0
Received: by 10.91.199.39 with SMTP id b39mr850280agq.27.1310036419500; Thu,
 07 Jul 2011 04:00:19 -0700 (PDT)
Received: by 10.90.155.5 with HTTP; Thu, 7 Jul 2011 04:00:19 -0700 (PDT)
Received: by 10.90.155.5 with HTTP; Thu, 7 Jul 2011 04:00:19 -0700 (PDT)
In-Reply-To: <CAL8PwkbArUDSE-FutZ8QKpRcpQshJ5sdyPesDpL2nJESoc_KMQ@mail.gmail.com>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	<CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	<5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
	<CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
	<EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
	<CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
	<CAL8PwkbArUDSE-FutZ8QKpRcpQshJ5sdyPesDpL2nJESoc_KMQ@mail.gmail.com>
Date: Thu, 7 Jul 2011 13:00:19 +0200
Message-ID: <CAM21Rt8ThVD2Zib2TDmT=XgE8ZKZRHjWuFbOhPMYETKEUw89LA@mail.gmail.com>
Subject: Re: Autocompletion on large index
From: Dawid Weiss <dawid.weiss@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001636af01316d5a4604a7789fbc

--001636af01316d5a4604a7789fbc
Content-Type: text/plain; charset=UTF-8

Another option to tradeoff dize and mem is to do a lru like cache of suffix
nodes/ registry. Im still working on that api replacement patch so any
changes to fst right now scare me...
On Jul 7, 2011 12:24 PM, "Michael McCandless" <lucene@mikemccandless.com>
wrote:
>
> OK, Elmer sent me the titles (thanks> OK, Elmer sent me the titles
(thanks!) and I ran some quick tests...
>
> There are 1.32M titles, avg 67.3 chars per title (total 84.5 MB text
> as utf8 on disk so at least 168.9 MB RAM for utf16, ie when loaded
> in RAM).
>
> I built the suggest FST from these titles, and it required 1.25 GB
> heap (anything less hits OOME). BUT: my test does not load all the
> terms into RAM (just builds the FST directly from the TermsEnum), so
> the "real" FSTLookup construction will require more RAM.
>
> It took 22.5 seconds to build and the resulting FST is 91.6 MB.
>
> Next I tried turning off suffix sharing, ie this "downgrades" the
> resulting FST a prefix trie, but it saves RAM and CPU during building:
> it built in 8.2 seconds and with 450 MB heap; the resulting FST is 129
> MB. The suggest module doesn't make this an option today but maybe we
> should? Suffix sharing requires sizable RAM while building because it
> maintains a hash containing all nodes in order to locate the dups.
>
> It's also possible to improve FST to have shades of gray between
> on/off... I'll open an issue.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> On Thu, Jul 7, 2011 at 5:09 AM, Dawid Weiss <dawid.weiss@gmail.com> wrote:
>> Elmer. Tst will have a large overhead. Fst may not be that much better if
>> your input has very few shared pre or suffixes. In your case i think this
is
>> unfortunately true. What i would do is create a regular lucene index and
>> store it on disk. Then run prefix queries on it. Should work and scale to
>> large number of ops per sec. See lucene revolution 2011 talks - there was
a
>> talk about using just this instead of a completion module.
>>
>> Like mike said though, it'd be interesting to investigate on your data.
>> On Jul 6, 2011 8:52 PM, "Elmer" <evanchastelet@gmail.com> wrote:
>>> I just profiled the application and tst.TernaryTreeNode takes 99.99..%
of
>>> the memory.
>>>
>>> I'll test further tomorrow and report on mem usage for runnable smaller
>>> indexes.
>>> I will email you privately for sharing the index to work with.
>>>
>>> BR,
>>> Elmer
>>>
>>>
>>> -----Oorspronkelijk bericht-----
>>> From: Michael McCandless
>>> Sent: Wednesday, July 06, 2011 8:39 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Autocompletion on large index
>>>
>>> Hmm... so I suspect the fst suggest module must first gather up all
>>> titles, then sort them, in RAM, and then build the actual FST. Maybe
>>> it's this gather + sort that's taking so much RAM?
>>>
>>> 1.3 M publications times 100 chars times 2 bytes/char = ~248 MB. So
>>> that shouldn't be it...
>>>
>>> Is this a an accessible corpus? Can I somehow get a copy to play
with...?
>>>
>>> Are you able to [temporarily, once] build the full FST and other
>>> suggest impls and compare how much RAM is required for building and
>>> then lookups?
>>>
>>> Mike McCandless
>>>
>>> http://blog.mikemccandless.com
>>>
>>> On Wed, Jul 6, 2011 at 1:50 PM, Elmer <evanchastelet@gmail.com> wrote:
>>>> Hi Mike,
>>>>
>>>> That's what I thought when I started indexing it. To be clear, it
happens
>>
>>>> on
>>>> build time.
>>>> I don't know if memory efficiency is better when building has finished.
>>>>
>>>> The titles I index are titles from the dblp computer sience
bibliography.
>>>> They can take up to... say 100 characters.
>>>> Examples:
>>>> -------
>>>> - Auditory stimulus optimization with feedback from fuzzy clustering of
>>>> neuronal responses
>>>> - Two-objective method for crisp and fuzzy interval comparison in
>>>> optimization
>>>> - Bound Constrained Smooth Optimization for Solving Variational
>>>> Inequalities
>>>> and Related Problems
>>>> - Retrieval of bibliographic records using Apache Lucene
>>>> - Digital Library Information Appliances
>>>> -------
>>>>
>>>> The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter
>> in
>>>> that order.
>>>>
>>>> I also tried to do the same for the author names, and this works
without
>>>> problems. Actually it builds the tree/fsa/... faster from dictionary
than
>>>> from file (the lookup data file that can be stored and loaded through
the
>>>> .store and .load methods). But the larger set of publication titles is
>>>> currently no-go with 2.5GB of heapspace, only having a main class that
>>>> builds the LookUp data.
>>>>
>>>> BR,
>>>> Elmer
>>>>
>>>>
>>>> -----Oorspronkelijk bericht----- From: Michael McCandless
>>>> Sent: Wednesday, July 06, 2011 6:23 PM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Autocompletion on large index
>>>>
>>>> You could try storing your autocomplete index in a RAMDirectory?
>>>>
>>>> But: I'm surprised you see the FST suggest impl using up so much RAM;
>>>> very low memory usage is one of the strengths of the FST approach.
>>>> Can you share the text (titles) you are feeding to the suggest module?
>>>>
>>>> Mike McCandless
>>>>
>>>> http://blog.mikemccandless.com
>>>>
>>>> On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
>>>>>
>>>>> Hi again.
>>>>>
>>>>> I have created my own autocompleter based on the spellchecker. This
>>>>> works well in a sense that it is able to create an auto completion
index
>>>>> from my 'publication' index. However, integrated in my web
application,
>>>>> each keypress asks autocompleter to search the index, which is stored
on
>>>>> disk (not in mem), just like spellchecker does (except that
spellchecker
>>>>> is not invoked every keypress).
>>>>> With Lucene 3.3.0, auto completion modules are included, which load
>>>>> their trees/fsa/... in memory. I'd like to use these modules, but the
>>>>> problem is that they use more than 2.5GB, causing heap space
exceptions.
>>>>> This happens when I try to build a LookUp index (fst,jaspell or tst,
>>>>> doesn't matter) from my 'publication' index consisting of 1.3M
>>>>> publications. The field I use for autocompletion holds the titles of
the
>>>>> publications indexed untokenized (but lowercased).
>>>>>
>>>>> Code:
>>>>> Lookup autoCompleter = new TSTLookup();
>>>>> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
>>>>> LuceneDictionary dict = new
>>>>> LuceneDictionary(IndexReader.open(dir),"title_suggest");
>>>>> autoCompleter.build(dict);
>>>>>
>>>>> Is it possible to have the autocompletion module to work in-memory on
>>>>> such a dataset without increasing java's heapspace?
>>>>> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM,
where
>>>>> my own autocompleter index is stored on disk using about 300MB.
>>>>>
>>>>> BR,
>>>>> Elmer
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--001636af01316d5a4604a7789fbc--

From java-user-return-50274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 11:09:07 2011
Return-Path: <java-user-return-50274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 239614758
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 11:09:07 +0000 (UTC)
Received: (qmail 75421 invoked by uid 500); 7 Jul 2011 11:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75211 invoked by uid 500); 7 Jul 2011 11:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75196 invoked by uid 99); 7 Jul 2011 11:08:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 11:08:57 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.48 as permitted sender)
Received: from [209.85.215.48] (HELO mail-ew0-f48.google.com) (209.85.215.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 11:08:51 +0000
Received: by ewy22 with SMTP id 22so395946ewy.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 04:08:30 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        bh=mIKRSDWzm6x/LfVnjoYTC7ONzJfhKLHqEBT2qjiAEps=;
        b=cZTuA1AViFxNZ7JbSvf3l7izEB3R/WZ1tvS2hRfzu7Q57SN6QsAkdJAak+5hPlYAhx
         38b/ryY/eQXvI5VM+N8m2E7RP0cTjR95PUzZGSTQXUq/R8lY36MICfsqPiHoPsbno2i/
         RJcPFgciIoOf9LE+Ofps70hucRum2yfzD5Uac=
Received: by 10.213.34.193 with SMTP id m1mr231565ebd.144.1310033001802;
        Thu, 07 Jul 2011 03:03:21 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id a45sm6864404eec.23.2011.07.07.03.03.19
        (version=SSLv3 cipher=OTHER);
        Thu, 07 Jul 2011 03:03:20 -0700 (PDT)
Subject: Re: Autocompletion on large index
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	 <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	 <5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
	 <CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
	 <EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
Content-Type: text/plain; charset="UTF-8"
Date: Thu, 07 Jul 2011 12:03:18 +0200
Message-ID: <1310032998.1964.19.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit

I got it working by modifying TSTAutocomplete to have a limit on the
prefix length. :)
The depth of the tree will not go deeper than this prefix length.

When set to 20 chars, total mem usage is ~520MB, of which 48,9% is for
the TernaryTreeNode objects.
Building took 7 seconds, reading from external HDD.

I created a zip, with JAR and sourcecode, available here:
http://www.computer-tuning.nl/lucene/TSTLookupWithPrefixLimit.zip

You still need the spellchecker for dependencies.

BR,
Elmer

On Wed, 2011-07-06 at 20:52 +0200, Elmer wrote:
> I just profiled the application and tst.TernaryTreeNode takes 99.99..% of 
> the memory.
> 
> I'll test further tomorrow and report on mem usage for runnable smaller 
> indexes.
> I will email you privately for sharing the index to work with.
> 
> BR,
> Elmer
> 
> 
> -----Oorspronkelijk bericht----- 
> From: Michael McCandless
> Sent: Wednesday, July 06, 2011 8:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: Autocompletion on large index
> 
> Hmm... so I suspect the fst suggest module must first gather up all
> titles, then sort them, in RAM, and then build the actual FST.  Maybe
> it's this gather + sort that's taking so much RAM?
> 
> 1.3 M publications times 100 chars times 2 bytes/char = ~248 MB.  So
> that shouldn't be it...
> 
> Is this a an accessible corpus?  Can I somehow get a copy to play with...?
> 
> Are you able to [temporarily, once] build the full FST and other
> suggest impls and compare how much RAM is required for building and
> then lookups?
> 
> Mike McCandless
> 
> http://blog.mikemccandless.com
> 
> On Wed, Jul 6, 2011 at 1:50 PM, Elmer <evanchastelet@gmail.com> wrote:
> > Hi Mike,
> >
> > That's what I thought when I started indexing it. To be clear, it happens 
> > on
> > build time.
> > I don't know if memory efficiency is better when building has finished.
> >
> > The titles I index are titles from the dblp computer sience bibliography.
> > They can take up to... say 100 characters.
> > Examples:
> > -------
> > - Auditory stimulus optimization with feedback from fuzzy clustering of
> > neuronal responses
> > - Two-objective method for crisp and fuzzy interval comparison in
> > optimization
> > - Bound Constrained Smooth Optimization for Solving Variational 
> > Inequalities
> > and Related Problems
> > - Retrieval of bibliographic records using Apache Lucene
> > - Digital Library Information Appliances
> > -------
> >
> > The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter in
> > that order.
> >
> > I also tried to do the same for the author names, and this works without
> > problems. Actually it builds the tree/fsa/... faster from dictionary than
> > from file (the lookup data file that can be stored and loaded through the
> > .store and .load methods). But the larger set of publication titles is
> > currently no-go with 2.5GB of heapspace, only having a main class that
> > builds the LookUp data.
> >
> > BR,
> > Elmer
> >
> >
> > -----Oorspronkelijk bericht----- From: Michael McCandless
> > Sent: Wednesday, July 06, 2011 6:23 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Autocompletion on large index
> >
> > You could try storing your autocomplete index in a RAMDirectory?
> >
> > But: I'm surprised you see the FST suggest impl using up so much RAM;
> > very low memory usage is one of the strengths of the FST approach.
> > Can you share the text (titles) you are feeding to the suggest module?
> >
> > Mike McCandless
> >
> > http://blog.mikemccandless.com
> >
> > On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
> >>
> >> Hi again.
> >>
> >> I have created my own autocompleter based on the spellchecker. This
> >> works well in a sense that it is able to create an auto completion index
> >> from my 'publication' index. However, integrated in my web application,
> >> each keypress asks autocompleter to search the index, which is stored on
> >> disk (not in mem), just like spellchecker does (except that spellchecker
> >> is not invoked every keypress).
> >> With Lucene 3.3.0, auto completion modules are included, which load
> >> their trees/fsa/... in memory. I'd like to use these modules, but the
> >> problem is that they use more than 2.5GB, causing heap space exceptions.
> >> This happens when I try to build a LookUp index (fst,jaspell or tst,
> >> doesn't matter) from my 'publication' index consisting of 1.3M
> >> publications. The field I use for autocompletion holds the titles of the
> >> publications indexed untokenized (but lowercased).
> >>
> >> Code:
> >> Lookup autoCompleter = new TSTLookup();
> >> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
> >> LuceneDictionary dict = new
> >> LuceneDictionary(IndexReader.open(dir),"title_suggest");
> >> autoCompleter.build(dict);
> >>
> >> Is it possible to have the autocompletion module to work in-memory on
> >> such a dataset without increasing java's heapspace?
> >> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
> >> my own autocompleter index is stored on disk using about 300MB.
> >>
> >> BR,
> >> Elmer
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 12:52:56 2011
Return-Path: <java-user-return-50275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 99F3245DE
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 12:52:56 +0000 (UTC)
Received: (qmail 36057 invoked by uid 500); 7 Jul 2011 12:52:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35960 invoked by uid 500); 7 Jul 2011 12:52:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35952 invoked by uid 99); 7 Jul 2011 12:52:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 12:52:53 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sanne.grinovero@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 12:52:48 +0000
Received: by iwi5 with SMTP id 5so1205084iwi.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 05:52:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=Su2ps1nBYbpqH/TmsBhkGeOLpMiC7i/tuDXaEGhGLYI=;
        b=h0wXIZkM6VaiwIwt1uzhe6mD787O90YcBwMzyBQdOkk4D8AHhtDPo8m32BGybREHZ/
         eNYlxVGLJbIo6s0AehAE24AOWD5yMEJv0eioUG9tmF1Rku6s3uHnfbNzAXcq87vi+0yc
         MWNRDGG1D83z6wrAFRVZ9pajQXWLQUQgFltx0=
Received: by 10.42.171.196 with SMTP id k4mr799969icz.225.1310043147106; Thu,
 07 Jul 2011 05:52:27 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.3.195 with HTTP; Thu, 7 Jul 2011 05:52:07 -0700 (PDT)
In-Reply-To: <CAFAd71Up0jqA4V3rOKkAhXi_Nf=WCD-NctFdUyx2=aYpz8VKBw@mail.gmail.com>
References: <CAFAd71X1rM6pNdEYSu7PMGdH5g4m5-JjsKizkktPptaO9_n6HQ@mail.gmail.com>
 <CAPuV3DkEggg+DSRYXUex0hLnFwQqYm7969wLAjS-m65xgPaYMA@mail.gmail.com> <CAFAd71Up0jqA4V3rOKkAhXi_Nf=WCD-NctFdUyx2=aYpz8VKBw@mail.gmail.com>
From: Sanne Grinovero <sanne.grinovero@gmail.com>
Date: Thu, 7 Jul 2011 13:52:07 +0100
Message-ID: <CAFm4XO2qp3SWWD_tiy7s5LQ=UdOoD-gq9GeEhjE262ArV6oM2Q@mail.gmail.com>
Subject: Re: full text searching in cloud for minor enterprises
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello,
We can try giving you some directions if you could explain some more
details of what you need.
First thing, cloud providers are rather different: most allow you to
fully control the hosts assigned to you (root access) such as Amazon
and Openshift, while others like the google app engine impose some
restrictions on what your application can do (for example Java
applications on GAE aren't allowed to start threads or open sockets).

If your applications expect a REST interface, you could deploy Solr or
other similar engines such as ElasticSearch: these provide helpers to
distribute/replicate the index to multiple nodes and how to query them
properly.
If you need to embed Lucene in your application directly, then you
could look at the Infinispan Lucene Directory[1] - pardon for the plug
as I maintain it - this allows to use the standard Lucene APIs just
changing the way in which you store the index: instead of using a
filesystem it's stored in a distributed datagrid[*2] which makes it
easier to add/remove more nodes on the fly from your cluster.

Regards,
Sanne

[1] - https://docs.jboss.org/author/display/ISPN/Infinispan+as+a+Directory+=
for+Lucene
[2] - I'm personally focusing on Infinispan, but it was ported to
Voldemort too and should be easy to port to any grid. I don't know
much about Voldemort but in case of Infinispan it supports several
cloud friendly auto-discovery protocols and the capability to
write-through to a permanent backup via JClouds, to long term store
and backup on cloud persistence services such as Amazon's S3.

2011/7/6 Li Li <fancyerii@gmail.com>:
> =C2=A0sounds great.
> =C2=A0but I'd like to do it myself.
> =C2=A0searchblox did provide a cloud hosting service and it seems it
> implements cloud computing itself other than using
> common services that are provided by google, amazon etc.
>
> On Tue, Jul 5, 2011 at 7:02 PM, Joe Scanlon <jscanlon@element115.net> wro=
te:
>> Look at searchblox
>>
>> On Monday, July 4, 2011, Li Li <fancyerii@gmail.com> wrote:
>>> hi all,
>>> =C2=A0=C2=A0 =C2=A0I want to provide full text searching for some "smal=
l" websites.
>>> It seems cloud computing is =C2=A0popular now. And it will save costs
>>> because it don't need employ engineer to maintain
>>> the machine.
>>> =C2=A0=C2=A0 =C2=A0For now, there are many services such as amazon s3, =
google app
>>> engine, ms azure etc. I am not familiar with cloud computing. Anyone
>>> give me a direction or some advice? thanks
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> --
>> Joe Scanlon
>>
>> jscanlon@element115.net
>>
>> Mobile: 603 459 3242
>> Office: =C2=A0312 445 0018
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 13:42:33 2011
Return-Path: <java-user-return-50276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1A2ED4143
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 13:42:33 +0000 (UTC)
Received: (qmail 44405 invoked by uid 500); 7 Jul 2011 13:42:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44271 invoked by uid 500); 7 Jul 2011 13:42:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44262 invoked by uid 99); 7 Jul 2011 13:42:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 13:42:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of evanchastelet@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 13:42:23 +0000
Received: by wyg34 with SMTP id 34so1022621wyg.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 06:42:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        bh=vNFah2zOGrRV1FE17Zti89XdKkBJeF+/Y0ARvE39ny8=;
        b=mTJIgMHCum5EBdyf6MdLv6MSj+HCDHv0UqxOExp73HwPdalQdv6IfzMCvb8jQWNjXv
         h8E3PWhYEVJMJkt9paBRaLUCKjzIQj1q9Rt5Bp61PzA0QgelKRBDAwmAnmpaYhBCYNbx
         DYtOheU6UyX7/s2CGATJh8BtO0H3Tdz3qFECs=
Received: by 10.216.229.86 with SMTP id g64mr6831369weq.50.1310046121999;
        Thu, 07 Jul 2011 06:42:01 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id ex2sm6888691wbb.48.2011.07.07.06.42.00
        (version=SSLv3 cipher=OTHER);
        Thu, 07 Jul 2011 06:42:01 -0700 (PDT)
Subject: Re: Autocompletion on large index
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <79155CF3ACA84442B7C89EF837361380@ElmerPC>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	 <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	 <79155CF3ACA84442B7C89EF837361380@ElmerPC>
Content-Type: text/plain; charset="UTF-8"
Date: Thu, 07 Jul 2011 15:41:59 +0200
Message-ID: <1310046119.12503.41.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit

I just tested my autocompleter in a clean environment (instead of
sharing a lot of resources with the java servlet) and I was able to run
the autocompletion in mem, using the RAMDirectory.

This morning I posted a modified TST implementation in this thread. I
have compared my autocompleter with the TST (with max prefix length set
to 20 chars).

Compared to the TST implementation, my autocompleter is able to match
tokens from the complete titles (tokenizes on whitespace), i.e.  'inf'
will match titles:
"information retrieval"
"best practices in information retrieval"
It also ranks the lookups by their popularity using the frequency of the
terms in the source index to sort the lookup results.
If somebody is interested, I can provide my autocompletion class (based
on spellcheck class in Lucene 3.1.0).

How I tested:
Both auto completion implementations use the same index, holding 1.32M
titles. I generated 1000 random prefixes of length 1,2 or 3 chars. Both
implementations 'warmed up' by looking up 1000 prefixes prior to
measuring the time it takes to perform 1000 lookups that each return 20
results (at most). Heapspace set to 2.5GB

Result:
-TST uses at least 600MB of memory with a ~10 GC activities
-My autocompleter uses at least 407MB with 1 GC activity
-TST runs 1000  completions in  7262ms
-My implementation runs 1000 completions in 18617ms
-Both used ~100% cpu from 1 core during test

For now, I think I'm gonna stick to my own autocompleter until TST can
be used 'efficiently' and can sort by popularity based on frequency. It
seems that current TSTLookup implementation doesn't use term frequencies
from a source dictionary. Also, I'd like to match tokens from within
each term in the source index. I don't think that's possible without
changing the inner working of the TSTLookup?

BR,
Elmer

On Wed, 2011-07-06 at 20:02 +0200, Elmer wrote:
> > You could try storing your autocomplete index in a RAMDirectory?
> 
> I forgot to mention. I tried this previously, but that also resulted in heap 
> space problems. That's why I was interested in using the new suggest classes 
> :)
> 
> BR,
> Elmer
> 
> -----Oorspronkelijk bericht----- 
> From: Michael McCandless
> Sent: Wednesday, July 06, 2011 6:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Autocompletion on large index
> 
> You could try storing your autocomplete index in a RAMDirectory?
> 
> But: I'm surprised you see the FST suggest impl using up so much RAM;
> very low memory usage is one of the strengths of the FST approach.
> Can you share the text (titles) you are feeding to the suggest module?
> 
> Mike McCandless
> 
> http://blog.mikemccandless.com
> 
> On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
> > Hi again.
> >
> > I have created my own autocompleter based on the spellchecker. This
> > works well in a sense that it is able to create an auto completion index
> > from my 'publication' index. However, integrated in my web application,
> > each keypress asks autocompleter to search the index, which is stored on
> > disk (not in mem), just like spellchecker does (except that spellchecker
> > is not invoked every keypress).
> > With Lucene 3.3.0, auto completion modules are included, which load
> > their trees/fsa/... in memory. I'd like to use these modules, but the
> > problem is that they use more than 2.5GB, causing heap space exceptions.
> > This happens when I try to build a LookUp index (fst,jaspell or tst,
> > doesn't matter) from my 'publication' index consisting of 1.3M
> > publications. The field I use for autocompletion holds the titles of the
> > publications indexed untokenized (but lowercased).
> >
> > Code:
> > Lookup autoCompleter = new TSTLookup();
> > FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
> > LuceneDictionary dict = new
> > LuceneDictionary(IndexReader.open(dir),"title_suggest");
> > autoCompleter.build(dict);
> >
> > Is it possible to have the autocompletion module to work in-memory on
> > such a dataset without increasing java's heapspace?
> > FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
> > my own autocompleter index is stored on disk using about 300MB.
> >
> > BR,
> > Elmer
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 14:14:52 2011
Return-Path: <java-user-return-50277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1C4164C32
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 14:14:52 +0000 (UTC)
Received: (qmail 50949 invoked by uid 500); 7 Jul 2011 14:14:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50862 invoked by uid 500); 7 Jul 2011 14:14:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50837 invoked by uid 99); 7 Jul 2011 14:14:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 14:14:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evanchastelet@gmail.com designates 209.85.215.176 as permitted sender)
Received: from [209.85.215.176] (HELO mail-ey0-f176.google.com) (209.85.215.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 14:14:40 +0000
Received: by eya28 with SMTP id 28so472247eya.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 07:14:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=subject:from:to:in-reply-to:references:content-type:date:message-id
         :mime-version:x-mailer:content-transfer-encoding;
        bh=gDAkqpuqyQldj7CTDEEy3N7pQudlte8hSk9hB+SGrM0=;
        b=nPuhrn3ilf8XJapnkMqphcUD3oS8hVkqOeTwhbf2M55O/rQaprICiYSD/SO6VHvnlS
         WBi1G4fjxCGAEdJrY/EG3cSvJbNeD1Vjkimdba92dPrcbT0L3PnbPNXFOUCvS4eOtIRb
         MDfr2cEpmyNhBynov8l3iK4qnE/tZPIXMZ4vQ=
Received: by 10.213.3.147 with SMTP id 19mr308208ebn.81.1310048060413;
        Thu, 07 Jul 2011 07:14:20 -0700 (PDT)
Received: from [192.168.2.132] (g214168.upc-g.chello.nl [80.57.214.168])
        by mx.google.com with ESMTPS id a45sm7049852eec.23.2011.07.07.07.14.18
        (version=SSLv3 cipher=OTHER);
        Thu, 07 Jul 2011 07:14:19 -0700 (PDT)
Subject: Re: Autocompletion on large index
From: Elmer <evanchastelet@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	 <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	 <5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
	 <CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
	 <EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
	 <CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
Content-Type: text/plain; charset="UTF-8"
Date: Thu, 07 Jul 2011 16:14:17 +0200
Message-ID: <1310048057.12503.51.camel@elmer-P35-DS3P>
Mime-Version: 1.0
X-Mailer: Evolution 2.32.2 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks,
Your replies ended up in my spam box and therefore I missed your
recommendation to use FST. I'll do more testing soon with FST instead of
TST. And I'll surely take a look at that talk!

BR,
Elmer

On Thu, 2011-07-07 at 11:09 +0200, Dawid Weiss wrote:
> Elmer. Tst will have a large overhead. Fst may not be that much better if
> your input has very few shared pre or suffixes. In your case i think this is
> unfortunately true. What i would do is create a regular lucene index and
> store it on disk. Then run prefix queries on it. Should work and scale to
> large number of ops per sec. See lucene revolution 2011 talks - there was a
> talk about using just this instead of a completion module.
> 
> Like mike said though, it'd be interesting to investigate on your data.
> On Jul 6, 2011 8:52 PM, "Elmer" <evanchastelet@gmail.com> wrote:
> > I just profiled the application and tst.TernaryTreeNode takes 99.99..% of
> > the memory.
> >
> > I'll test further tomorrow and report on mem usage for runnable smaller
> > indexes.
> > I will email you privately for sharing the index to work with.
> >
> > BR,
> > Elmer
> >
> >
> > -----Oorspronkelijk bericht-----
> > From: Michael McCandless
> > Sent: Wednesday, July 06, 2011 8:39 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Autocompletion on large index
> >
> > Hmm... so I suspect the fst suggest module must first gather up all
> > titles, then sort them, in RAM, and then build the actual FST. Maybe
> > it's this gather + sort that's taking so much RAM?
> >
> > 1.3 M publications times 100 chars times 2 bytes/char = ~248 MB. So
> > that shouldn't be it...
> >
> > Is this a an accessible corpus? Can I somehow get a copy to play with...?
> >
> > Are you able to [temporarily, once] build the full FST and other
> > suggest impls and compare how much RAM is required for building and
> > then lookups?
> >
> > Mike McCandless
> >
> > http://blog.mikemccandless.com
> >
> > On Wed, Jul 6, 2011 at 1:50 PM, Elmer <evanchastelet@gmail.com> wrote:
> >> Hi Mike,
> >>
> >> That's what I thought when I started indexing it. To be clear, it happens
> 
> >> on
> >> build time.
> >> I don't know if memory efficiency is better when building has finished.
> >>
> >> The titles I index are titles from the dblp computer sience bibliography.
> >> They can take up to... say 100 characters.
> >> Examples:
> >> -------
> >> - Auditory stimulus optimization with feedback from fuzzy clustering of
> >> neuronal responses
> >> - Two-objective method for crisp and fuzzy interval comparison in
> >> optimization
> >> - Bound Constrained Smooth Optimization for Solving Variational
> >> Inequalities
> >> and Related Problems
> >> - Retrieval of bibliographic records using Apache Lucene
> >> - Digital Library Information Appliances
> >> -------
> >>
> >> The "title_suggest" field uses the KeyWordTokenizer and LowerCaseFilter
> in
> >> that order.
> >>
> >> I also tried to do the same for the author names, and this works without
> >> problems. Actually it builds the tree/fsa/... faster from dictionary than
> >> from file (the lookup data file that can be stored and loaded through the
> >> .store and .load methods). But the larger set of publication titles is
> >> currently no-go with 2.5GB of heapspace, only having a main class that
> >> builds the LookUp data.
> >>
> >> BR,
> >> Elmer
> >>
> >>
> >> -----Oorspronkelijk bericht----- From: Michael McCandless
> >> Sent: Wednesday, July 06, 2011 6:23 PM
> >> To: java-user@lucene.apache.org
> >> Subject: Re: Autocompletion on large index
> >>
> >> You could try storing your autocomplete index in a RAMDirectory?
> >>
> >> But: I'm surprised you see the FST suggest impl using up so much RAM;
> >> very low memory usage is one of the strengths of the FST approach.
> >> Can you share the text (titles) you are feeding to the suggest module?
> >>
> >> Mike McCandless
> >>
> >> http://blog.mikemccandless.com
> >>
> >> On Wed, Jul 6, 2011 at 12:08 PM, Elmer <evanchastelet@gmail.com> wrote:
> >>>
> >>> Hi again.
> >>>
> >>> I have created my own autocompleter based on the spellchecker. This
> >>> works well in a sense that it is able to create an auto completion index
> >>> from my 'publication' index. However, integrated in my web application,
> >>> each keypress asks autocompleter to search the index, which is stored on
> >>> disk (not in mem), just like spellchecker does (except that spellchecker
> >>> is not invoked every keypress).
> >>> With Lucene 3.3.0, auto completion modules are included, which load
> >>> their trees/fsa/... in memory. I'd like to use these modules, but the
> >>> problem is that they use more than 2.5GB, causing heap space exceptions.
> >>> This happens when I try to build a LookUp index (fst,jaspell or tst,
> >>> doesn't matter) from my 'publication' index consisting of 1.3M
> >>> publications. The field I use for autocompletion holds the titles of the
> >>> publications indexed untokenized (but lowercased).
> >>>
> >>> Code:
> >>> Lookup autoCompleter = new TSTLookup();
> >>> FSDirectory dir = FSDirectory.open(new File("PATHTOINDEX"));
> >>> LuceneDictionary dict = new
> >>> LuceneDictionary(IndexReader.open(dir),"title_suggest");
> >>> autoCompleter.build(dict);
> >>>
> >>> Is it possible to have the autocompletion module to work in-memory on
> >>> such a dataset without increasing java's heapspace?
> >>> FTR, the 3.3.0 autocompletion modules use more than 2.5GB of RAM, where
> >>> my own autocompleter index is stored on disk using about 300MB.
> >>>
> >>> BR,
> >>> Elmer
> >>>
> >>>
> >>> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 17:17:13 2011
Return-Path: <java-user-return-50278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 81D974D5C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 17:17:13 +0000 (UTC)
Received: (qmail 75757 invoked by uid 500); 7 Jul 2011 17:17:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75682 invoked by uid 500); 7 Jul 2011 17:17:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75674 invoked by uid 99); 7 Jul 2011 17:17:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 17:17:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 17:17:05 +0000
Received: by vxd2 with SMTP id 2so1349686vxd.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 10:16:44 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.73.163 with SMTP id m3mr1467305vdv.244.1310059003988; Thu,
 07 Jul 2011 10:16:43 -0700 (PDT)
Received: by 10.52.161.41 with HTTP; Thu, 7 Jul 2011 10:16:43 -0700 (PDT)
In-Reply-To: <CAM21Rt8ThVD2Zib2TDmT=XgE8ZKZRHjWuFbOhPMYETKEUw89LA@mail.gmail.com>
References: <1309968498.25963.17.camel@elmer-P35-DS3P>
	<CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
	<5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC>
	<CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
	<EB02D4123D664693B338F5CBBA8772C0@ElmerPC>
	<CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
	<CAL8PwkbArUDSE-FutZ8QKpRcpQshJ5sdyPesDpL2nJESoc_KMQ@mail.gmail.com>
	<CAM21Rt8ThVD2Zib2TDmT=XgE8ZKZRHjWuFbOhPMYETKEUw89LA@mail.gmail.com>
Date: Thu, 7 Jul 2011 13:16:43 -0400
Message-ID: <CAL8PwkY4_5rpuG195DihfQFUNshet5gi95Vkf7FfedeAOqDUAw@mail.gmail.com>
Subject: Re: Autocompletion on large index
From: Michael McCandless <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1

On Thu, Jul 7, 2011 at 7:00 AM, Dawid Weiss <dawid.weiss@gmail.com> wrote:
> Another option to tradeoff dize and mem is to do a lru like cache of suffix
> nodes/ registry. Im still working on that api replacement patch so any
> changes to fst right now scare me...

That sounds cool too!

I opened LUCENE-3289 to allow controlling how hard the Builder tries
to share suffixes... ie tradeoff CPU/RAM usage while building against
final FST size.

Mike McCandless

http://blog.mikemccandless.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 17:50:01 2011
Return-Path: <java-user-return-50279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B89E44414
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 17:50:01 +0000 (UTC)
Received: (qmail 35464 invoked by uid 500); 7 Jul 2011 17:49:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35292 invoked by uid 500); 7 Jul 2011 17:49:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35284 invoked by uid 99); 7 Jul 2011 17:49:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 17:49:58 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 17:49:54 +0000
Received: by ywn13 with SMTP id 13so666523ywn.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 10:49:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=ISQ1ltlD6uBJYX6UWf3DsnL5l7sIlhw7JgXT7HobYZ0=;
        b=kYwZdq34R0Wc23B6oKqWPTLNXknjSD9MdULIJRLkQohv4Ua6/gGl5DpPZLz2aiOImw
         EoNBPMdKynr4plY3I6W09pNoVcil4MfUxc1KOIIW5W2AdgzVYVCeWhUDaYfpT5cep23Q
         FXbaQezlVdxdgAv55Q5kBg3RywGhrt4SoxefA=
MIME-Version: 1.0
Received: by 10.236.143.104 with SMTP id k68mr1273249yhj.78.1310060973474;
 Thu, 07 Jul 2011 10:49:33 -0700 (PDT)
Received: by 10.147.114.8 with HTTP; Thu, 7 Jul 2011 10:49:33 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <4E136B77.8040808@gmx.de>
References: <4E136B77.8040808@gmx.de>
Date: Thu, 7 Jul 2011 19:49:33 +0200
Message-ID: <CAAHmpkhmn65pz0bWTZuQV5Saha_MtEtf=5aDuwANdEuK0yqbqA@mail.gmail.com>
Subject: Re: Lucene 3.3: Self referring deprecation use insteads in LowerCaseTokenizer
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

Fixed in revision 1143934

thanks Rene!

simon

On Tue, Jul 5, 2011 at 9:52 PM, Rene Hackl-Sommer <rene.a.hackl@gmx.de> wrote:
> Hi,
>
> just noted that the deprecation use ... insteads in LowerCaseTokenizer
> (Lucene 3.3) refer to themselves instead of the new constructors with
> (Version...).
>
> E.g. *@deprecated*use {@link #LowerCaseTokenizer(Reader)}instead.
>
> should be #LowerCaseTokenizer(Version, Reader). Same for the two other
> constructors.
>
> Thanks,
> Rene
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 18:18:23 2011
Return-Path: <java-user-return-50280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A43F2403C
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 18:18:23 +0000 (UTC)
Received: (qmail 802 invoked by uid 500); 7 Jul 2011 18:18:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 711 invoked by uid 500); 7 Jul 2011 18:18:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 702 invoked by uid 99); 7 Jul 2011 18:18:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 18:18:20 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 18:18:15 +0000
Received: by vws7 with SMTP id 7so1449216vws.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 11:17:54 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.220.38.74 with SMTP id a10mr397129vce.15.1310062674269; Thu,
 07 Jul 2011 11:17:54 -0700 (PDT)
Received: by 10.220.176.69 with HTTP; Thu, 7 Jul 2011 11:17:54 -0700 (PDT)
Date: Thu, 7 Jul 2011 14:17:54 -0400
Message-ID: <CAHKrUQn_tBDKerd+N3UxF9ZxzC-fVdMuyaWSckQEBqqmrTneQw@mail.gmail.com>
Subject: Lucene Architecture Site (Prototype)
From: Abhishek Rakshit <abhishek@architexa.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec54ee69e55573b04a77ebc90

--bcaec54ee69e55573b04a77ebc90
Content-Type: text/plain; charset=ISO-8859-1

Hey folks,

We received great feedback on the Lucene Architecture site that we have been
building. Thanks for the all the awesome response.

One of the larger pieces of feedback was on making the architectural
information aligned around concepts. We have created a prototype of the site
based on this and other feedback. It will be great to hear your thoughts.

Current Site:
*http://www.codemaps.org/s/Lucene_Core*

Prototype:
*http://www.architexa.com/codemapsDev/lucene/*
*http://www.architexa.com/codemapsDev/lucene/analyzer.htm*

What do you guys think? I am really looking forward to hearing what parts of
the current site and the prototype you like.

We want to keep refining this site till it is a great resource for the
Lucene community and your advice is very much appreciated.

Cheers,
Abhishek Rakshit
--
Lead Engineer - User Experience,
Architexa - www.architexa.com
abhishek@architexa.com

--bcaec54ee69e55573b04a77ebc90--

From java-user-return-50281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 18:27:37 2011
Return-Path: <java-user-return-50281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9F11B4CBD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 18:27:37 +0000 (UTC)
Received: (qmail 15395 invoked by uid 500); 7 Jul 2011 18:27:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15344 invoked by uid 500); 7 Jul 2011 18:27:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15336 invoked by uid 99); 7 Jul 2011 18:27:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 18:27:34 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of glen.newton@gmail.com designates 209.85.214.53 as permitted sender)
Received: from [209.85.214.53] (HELO mail-bw0-f53.google.com) (209.85.214.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 18:27:28 +0000
Received: by bwg12 with SMTP id 12so1293876bwg.12
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 11:27:08 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=n+E8vUEJpScYXVhdzcmh5RoGY2MIiPndoXypYxpQxFc=;
        b=w+prsdCJTvdEqC4p5Lb1Qg3TZ4Zffvgk/wVSUc/jRVOdrz1dqMXeW5ZJci3Jy5OJee
         /VcICAJI3UBb4n6X9pDvLnV3JJYOLYt5nATsZoap+G2F1fiHaN53jr1ZXA5yJG662/rO
         pbRhZ7DWl78tdLoBTjpe73Z8KVYKFOWUAVJew=
Received: by 10.204.9.197 with SMTP id m5mr1067314bkm.38.1310063228127; Thu,
 07 Jul 2011 11:27:08 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.23.77 with HTTP; Thu, 7 Jul 2011 11:26:48 -0700 (PDT)
In-Reply-To: <CAHKrUQn_tBDKerd+N3UxF9ZxzC-fVdMuyaWSckQEBqqmrTneQw@mail.gmail.com>
References: <CAHKrUQn_tBDKerd+N3UxF9ZxzC-fVdMuyaWSckQEBqqmrTneQw@mail.gmail.com>
From: Glen Newton <glen.newton@gmail.com>
Date: Thu, 7 Jul 2011 14:26:48 -0400
Message-ID: <CANL2-4N+MvckkLnc_qdhp3tQVLW9yRqm1McLT3SaqnX+z7EqkQ@mail.gmail.com>
Subject: Re: Lucene Architecture Site (Prototype)
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

gmail interprets the closing asterisk as part of the URL, for all
three URLs --> 404s
You might want to add a space before the '*'...

-glen

On Thu, Jul 7, 2011 at 2:17 PM, Abhishek Rakshit <abhishek@architexa.com> wrote:
> Hey folks,
>
> We received great feedback on the Lucene Architecture site that we have been
> building. Thanks for the all the awesome response.
>
> One of the larger pieces of feedback was on making the architectural
> information aligned around concepts. We have created a prototype of the site
> based on this and other feedback. It will be great to hear your thoughts.
>
> Current Site:
> *http://www.codemaps.org/s/Lucene_Core*
>
> Prototype:
> *http://www.architexa.com/codemapsDev/lucene/*
> *http://www.architexa.com/codemapsDev/lucene/analyzer.htm*
>
> What do you guys think? I am really looking forward to hearing what parts of
> the current site and the prototype you like.
>
> We want to keep refining this site till it is a great resource for the
> Lucene community and your advice is very much appreciated.
>
> Cheers,
> Abhishek Rakshit
> --
> Lead Engineer - User Experience,
> Architexa - www.architexa.com
> abhishek@architexa.com
>



-- 

-

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 19:23:03 2011
Return-Path: <java-user-return-50282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 08DA44096
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 19:23:02 +0000 (UTC)
Received: (qmail 10633 invoked by uid 500); 7 Jul 2011 19:23:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10537 invoked by uid 500); 7 Jul 2011 19:23:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10529 invoked by uid 99); 7 Jul 2011 19:23:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 19:23:00 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dawid.weiss@gmail.com designates 209.85.161.176 as permitted sender)
Received: from [209.85.161.176] (HELO mail-gx0-f176.google.com) (209.85.161.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 19:22:53 +0000
Received: by gxk7 with SMTP id 7so743242gxk.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 12:22:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=FpnHbqxdkuhs5Yr1ens0UoTP1BHjVkRoSHwObJCYdvc=;
        b=OMxRf2eAG3RQpx2rZdFnKZr1U6UGl0ndfD1Qp0KwvlaWa/yYs+JeeC2LUfiDNQwA31
         cME5WUVHQA3FDqXYI07inihxmEzeKNX2U3VcaX5OUjzfPwirg3ALLNhEas2Kj5W+eplm
         i4AG3Qff7HCQZHC7xH6s/uPapRB3x5YYs6tNw=
Received: by 10.91.199.39 with SMTP id b39mr1382490agq.27.1310066552094; Thu,
 07 Jul 2011 12:22:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.90.14.23 with HTTP; Thu, 7 Jul 2011 12:22:11 -0700 (PDT)
In-Reply-To: <CAL8PwkY4_5rpuG195DihfQFUNshet5gi95Vkf7FfedeAOqDUAw@mail.gmail.com>
References: <1309968498.25963.17.camel@elmer-P35-DS3P> <CAL8PwkaK18wqCvAmvg9L3tS1-hxX5KKcf1Buo2n45256AzSgBg@mail.gmail.com>
 <5D6C36CFCB0B4AF38BEAC2E0240D22E5@ElmerPC> <CAL8Pwka3p=-WBQ+UUQzTbvCypgGHi03gKzUHp-v_BjWUzz6=yw@mail.gmail.com>
 <EB02D4123D664693B338F5CBBA8772C0@ElmerPC> <CAM21Rt_T+QZyC4bH4+oE7+kcttpyny6dFpmGVZ3mBAGkZfBBnQ@mail.gmail.com>
 <CAL8PwkbArUDSE-FutZ8QKpRcpQshJ5sdyPesDpL2nJESoc_KMQ@mail.gmail.com>
 <CAM21Rt8ThVD2Zib2TDmT=XgE8ZKZRHjWuFbOhPMYETKEUw89LA@mail.gmail.com> <CAL8PwkY4_5rpuG195DihfQFUNshet5gi95Vkf7FfedeAOqDUAw@mail.gmail.com>
From: Dawid Weiss <dawid.weiss@gmail.com>
Date: Thu, 7 Jul 2011 21:22:11 +0200
Message-ID: <CAM21Rt--1MS1pkjxn4cw7dS698GP616hz6Nq5GrTmtu=aT05uA@mail.gmail.com>
Subject: Re: Autocompletion on large index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

You can actually make an (relatively easy) change to FSTLookup to
allow infix matches (or word-boundary matches). This should have
little impact on memory and nearly zero on performance. This issue is
tracking this:

https://issues.apache.org/jira/browse/SOLR-2479

I should have implemented it a while ago, but I've been swamped with
other work, sorry.

Dawid

On Thu, Jul 7, 2011 at 7:16 PM, Michael McCandless
<lucene@mikemccandless.com> wrote:
> On Thu, Jul 7, 2011 at 7:00 AM, Dawid Weiss <dawid.weiss@gmail.com> wrote:
>> Another option to tradeoff dize and mem is to do a lru like cache of suffix
>> nodes/ registry. Im still working on that api replacement patch so any
>> changes to fst right now scare me...
>
> That sounds cool too!
>
> I opened LUCENE-3289 to allow controlling how hard the Builder tries
> to share suffixes... ie tradeoff CPU/RAM usage while building against
> final FST size.
>
> Mike McCandless
>
> http://blog.mikemccandless.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 21:14:35 2011
Return-Path: <java-user-return-50283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2C1D74152
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 21:14:35 +0000 (UTC)
Received: (qmail 70186 invoked by uid 500); 7 Jul 2011 21:14:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70127 invoked by uid 500); 7 Jul 2011 21:14:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70118 invoked by uid 99); 7 Jul 2011 21:14:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 21:14:31 +0000
X-ASF-Spam-Status: No, hits=1.6 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jahan9@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 21:14:24 +0000
Received: by iwi5 with SMTP id 5so1853294iwi.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 14:14:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=QbU/k8wTdNwBU+bWFaFbP0g+F0ZRUVPxcwpZkV02dec=;
        b=ZeRqtzi27FoyNlvmg0dwZDsu3iqWA/id18faBjeu7jZ6tSOPUAgz1UTtqfMRcsU2uU
         yKKi33jMpiEA8da7RPBhM2NP+acgz3SETZxQVtYTn4Ohy0qkqZVG8OQQy3v9A+xxHkDt
         QYFldyyag7DeLppYzUMXBXPsBYIRHjesoPJvU=
MIME-Version: 1.0
Received: by 10.42.96.8 with SMTP id h8mr1334152icn.185.1310073243388; Thu, 07
 Jul 2011 14:14:03 -0700 (PDT)
Received: by 10.231.15.65 with HTTP; Thu, 7 Jul 2011 14:14:03 -0700 (PDT)
In-Reply-To: <F158D191-C949-4E20-B610-BF65DC13DF8C@gmail.com>
References: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com>
	<F158D191-C949-4E20-B610-BF65DC13DF8C@gmail.com>
Date: Fri, 8 Jul 2011 00:14:03 +0300
Message-ID: <CAHBqfespyGuvdBuCsxLtQFimaeiE=ZyEntSP5DDptPEorw3CqA@mail.gmail.com>
Subject: Re: Extracting span terms using WeightedSpanTermExtractor
From: Jahangir Anwari <jahan9@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303bfb104d4c1304a7813245
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303bfb104d4c1304a7813245
Content-Type: text/plain; charset=UTF-8

Thanks Mark. After setting maxDocCharsToAnalyze to a value greater than 0, I
can now extract the span terms.

I did noticed a strange issue though. When the query is just a
PhraseQuery(e.g. "everlasting glory"), getWeightedSpanTerms() returns all
the span terms along with their span positions. But when the query is a
BooleanQuery containing phrase and non-phrase terms(e.g. "everlasting
glory"+unity), getWeightedSpanTerms() returns all the span terms but the
span positions are returned only for the phrase terms(i.e. "everlasting" and
"glory"). Span positions for the non-phrase term(i.e. "unity") is empty. Any
ideas why this could be happening?

-Jahangir

On Thu, Jul 7, 2011 at 4:40 AM, Mark Miller <markrmiller@gmail.com> wrote:

> Sorry - kind of my fault. When I fixed this to use maxDocCharsToAnalyze, I
> didn't set a default other than 0 because I didn't really count on this
> being used beyond how it is in the Highlighter - which always sets
> maxDocCharsToAnalyze with it's default.
>
> You've got to explicitly set it higher than 0 for now.
>
> Feel free to create a JIRA issue and we can give it's own default greater
> than 0.
>
> - Mark Miller
> lucidimagination.com
>
>
> On Jul 6, 2011, at 5:34 PM, Jahangir Anwari wrote:
>
> > I have a CustomHighlighter that extends the SolrHighlighter and overrides
> > the doHighlighting() method. Then for each document I am trying to
> extract
> > the span terms so that later I can use it to get the span Positions. I
> tried
> > to get the weightedSpanTerms using WeightedSpanTermExtractor but was
> > unsuccessful. Below is the code that I am have. Is there something
> missing
> > that needs to be added to get the span terms?
> >
> > // in CustomHighlighter.java
> > @Override
> > public NamedList doHighlighting(DocList docs, Query query,
> SolrQueryRequest
> > req, String[] defaultFields) throws IOException {
> >
> >  NamedList highlightedSnippets = super.doHighlighting(docs, query, req,
> > defaultFields);
> >
> >  IndexReader reader = req.getSearcher().getIndexReader();
> >
> >  String[] fieldNames = getHighlightFields(query, req, defaultFields);
> >  for (String fieldName : fieldNames)
> >  {
> >  QueryScorer scorer = new QueryScorer(query, null);
> >  scorer.setExpandMultiTermQuery(true);
> >  scorer.setMaxDocCharsToAnalyze(51200);
> >
> >  DocIterator iterator = docs.iterator();
> >  for (int i = 0; i < docs.size(); i++)
> >  {
> > int docId = iterator.nextDoc();
> > System.out.println("DocId: " + docId);
> > TokenStream tokenStream = TokenSources.getTokenStream(reader, docId,
> > fieldName);
> > WeightedSpanTermExtractor wste = new
> WeightedSpanTermExtractor(fieldName);
> > wste.setExpandMultiTermQuery(true);
> > wste.setWrapIfNotCachingTokenFilter(true);
> >
> > Map<String,WeightedSpanTerm> weightedSpanTerms  =
> > wste.getWeightedSpanTerms(query, tokenStream, fieldName); // this is
> always
> > empty
> > System.out.println("weightedSpanTerms: " + weightedSpanTerms.values());
> >
> >  }
> >  }
> >     return highlightedSnippets;
> >
> > }
> >
> > Thanks,
> > Jahangir
>
>
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf303bfb104d4c1304a7813245--

From java-user-return-50284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul  7 23:48:05 2011
Return-Path: <java-user-return-50284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 810BA40DD
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu,  7 Jul 2011 23:48:05 +0000 (UTC)
Received: (qmail 61840 invoked by uid 500); 7 Jul 2011 23:48:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61740 invoked by uid 500); 7 Jul 2011 23:48:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61731 invoked by uid 99); 7 Jul 2011 23:48:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 23:48:02 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2011 23:47:54 +0000
Received: by vws7 with SMTP id 7so1754716vws.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 16:47:33 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=LrBC3Aq0h948MfAFGRiu/7zUN/ypxIpTeBGXWcqInf4=;
        b=MwbE1bGuXRIOMCPGO5ku/uC/YDL61gTJx5QdgNg7rP41zKakr2KRManN3QFk/9HqNu
         tgleHCfMKYg5uRGeeLRTOdJg/IB+C/x/EEbOpHRrldXfgkLEO8NtLtZF8BFnwaOPo4on
         vJnVHrAkZhQjJzyxnDeuGVxQTS+BZvb+6ROE0=
Received: by 10.52.111.5 with SMTP id ie5mr1873147vdb.213.1310082453010;
        Thu, 07 Jul 2011 16:47:33 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c78059.dyn.optonline.net [68.199.128.89])
        by mx.google.com with ESMTPS id du9sm5802394vbb.10.2011.07.07.16.47.31
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 07 Jul 2011 16:47:32 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Extracting span terms using WeightedSpanTermExtractor
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <CAHBqfespyGuvdBuCsxLtQFimaeiE=ZyEntSP5DDptPEorw3CqA@mail.gmail.com>
Date: Thu, 7 Jul 2011 19:47:30 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <8DF98893-A7F7-4EE6-9357-8CDA0AD3C15B@gmail.com>
References: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com> <F158D191-C949-4E20-B610-BF65DC13DF8C@gmail.com> <CAHBqfespyGuvdBuCsxLtQFimaeiE=ZyEntSP5DDptPEorw3CqA@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 7, 2011, at 5:14 PM, Jahangir Anwari wrote:

> I did noticed a strange issue though. When the query is just a
> PhraseQuery(e.g. "everlasting glory"), getWeightedSpanTerms() returns =
all
> the span terms along with their span positions. But when the query is =
a
> BooleanQuery containing phrase and non-phrase terms(e.g. "everlasting
> glory"+unity), getWeightedSpanTerms() returns all the span terms but =
the
> span positions are returned only for the phrase terms(i.e. =
"everlasting" and
> "glory"). Span positions for the non-phrase term(i.e. "unity") is =
empty. Any
> ideas why this could be happening?


Positions are only collected for "position sensitive" queries. The =
Highlighter framework that I plugged this into already runs through the =
TokenStream one token at a time - to highlight a TermQuery, there is no =
need to consult positions - just highlight every occurrence seen while =
marching through the TokenStream. Which means there is no need to find =
those positions either.

If you are looking for those positions, here is a patch to calculate =
them for TermQuerys as well. If you open a JIRA issue, seems like a =
reasonable option to add to the class.

Index: =
lucene/contrib/highlighter/src/java/org/apache/lucene/search/highlight/Wei=
ghtedSpanTermExtractor.java
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
--- =
lucene/contrib/highlighter/src/java/org/apache/lucene/search/highlight/Wei=
ghtedSpanTermExtractor.java	(revision 1143407)
+++ =
lucene/contrib/highlighter/src/java/org/apache/lucene/search/highlight/Wei=
ghtedSpanTermExtractor.java	(working copy)
@@ -133,7 +133,7 @@
       sp.setBoost(query.getBoost());
       extractWeightedSpanTerms(terms, sp);
     } else if (query instanceof TermQuery) {
-      extractWeightedTerms(terms, query);
+      extractWeightedSpanTerms(terms, new =
SpanTermQuery(((TermQuery)query).getTerm()));
     } else if (query instanceof SpanQuery) {
       extractWeightedSpanTerms(terms, (SpanQuery) query);
     } else if (query instanceof FilteredQuery) {


- Mark Miller
lucidimagination.com









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 03:05:34 2011
Return-Path: <java-user-return-50285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D20066E21
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 03:05:34 +0000 (UTC)
Received: (qmail 66608 invoked by uid 500); 8 Jul 2011 03:05:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66369 invoked by uid 500); 8 Jul 2011 03:05:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66354 invoked by uid 99); 8 Jul 2011 03:05:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 03:05:20 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of robin.bygrave@gmail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 03:05:11 +0000
Received: by yic24 with SMTP id 24so923380yic.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 20:04:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=KXe/xCSL/YA94AqrvJKE2bL4rMJ3SMkRTfYg14oZD3Y=;
        b=d4Ou0OGowK73MIjYwP2LX8lK/llNIOlokBQD+ohn2t08kne+ocW1p63G76HAPgMiJM
         way4CcajRHnHGJqwsgrz//32kzZz3F9oC300JSPZ9sdTVEqIKUXYkVtueCTmYfVhapvJ
         //b/PrgzJypTTvVB391N1FKw7VFSeh2WSwXAs=
MIME-Version: 1.0
Received: by 10.101.200.1 with SMTP id c1mr1311108anq.132.1310094290655; Thu,
 07 Jul 2011 20:04:50 -0700 (PDT)
Received: by 10.100.8.6 with HTTP; Thu, 7 Jul 2011 20:04:50 -0700 (PDT)
Date: Fri, 8 Jul 2011 15:04:50 +1200
Message-ID: <CAC=ts-Gti-hBCvE9cGcfARwseKGjDLsCDovdAR6ZT39MD303og@mail.gmail.com>
Subject: Bug in v3.3.0? - IndexNotFoundException: no segments* file found in org.apache.lucene.store.SimpleFSDirectory@
From: Rob Bygrave <robin.bygrave@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68deca8d119f404a786189c
X-Virus-Checked: Checked by ClamAV on apache.org

--0016e68deca8d119f404a786189c
Content-Type: text/plain; charset=ISO-8859-1

This looks like a Bug in v3.3.0.

The code below works in 3.0.1 without calling the writer.commit() before
 IndexReader.open(directory).

In v3.3.0 when the index does not yet exist I need to add the
writer.commit() and I believe that creates the segments. If I don't add the
writer.commit() then I get the IndexNotFoundException: no segments* file
found exception below.


            IndexWriterConfig config = new
IndexWriterConfig(Version.LUCENE_33, analyzer);
            config.setOpenMode(OpenMode.CREATE_OR_APPEND);
            config.setIndexDeletionPolicy(commitDeletionPolicy);
            IndexWriter writer = new IndexWriter(directory, config);

            // -----------------
            // Need to add this w.commit() when the index is does not exist
            writer.commit();
            // -----------------

            // without the commit above this fails with
a IndexNotFoundException when the index does not exist
            IndexReader reader = IndexReader.open(directory);



The exception when writer.commit() is not there and the index does not exist
is:

Caused by: org.apache.lucene.index.IndexNotFoundException: no segments* file
found in org.apache.lucene.store.SimpleFSDirectory@C:\dev\workspace-sts\uoa-tmp-copydb\lucene\dst\model.indexdefn.OrgUnitIndexDefn
lockFactory=org.apache.lucene.store.NativeFSLockFactory@3bc257: files:
[write.lock]
at
org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:708)
at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:75)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:428)
at org.apache.lucene.index.IndexReader.open(IndexReader.java:274)


The workaround is to add the writer.commit() and that seems pretty
reasonable to me.

Thanks, Rob.

--0016e68deca8d119f404a786189c--

From java-user-return-50286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 03:09:59 2011
Return-Path: <java-user-return-50286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 594476F22
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 03:09:59 +0000 (UTC)
Received: (qmail 73857 invoked by uid 500); 8 Jul 2011 03:09:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73370 invoked by uid 500); 8 Jul 2011 03:09:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73361 invoked by uid 99); 8 Jul 2011 03:09:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 03:09:40 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 03:09:32 +0000
Received: by bwb5 with SMTP id 5so443833bwb.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 20:09:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=znvM59TUPkWZrvg3qMELUpQMf9MgUKM3mPmz35Rh1a8=;
        b=L7eyYojstH+m6waFzwpSRcelyKckHychDSCllc8W30MJVCmWmppH4mLARMgRrKP/Im
         PvNWJLV0Zbz85dGAlO4L32udSQfBgzPk1/LYbul1Xydhv+0Scwpl85tq08xBZjhfSZFO
         HCyYx3GBojTOGr2+htEZUwbk7qcIiw/TFgtr4=
Received: by 10.204.75.138 with SMTP id y10mr129729bkj.391.1310094551195; Thu,
 07 Jul 2011 20:09:11 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.26.143 with HTTP; Thu, 7 Jul 2011 20:08:51 -0700 (PDT)
In-Reply-To: <CAC=ts-Gti-hBCvE9cGcfARwseKGjDLsCDovdAR6ZT39MD303og@mail.gmail.com>
References: <CAC=ts-Gti-hBCvE9cGcfARwseKGjDLsCDovdAR6ZT39MD303og@mail.gmail.com>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 7 Jul 2011 23:08:51 -0400
Message-ID: <CAOdYfZX5hWx4gPfHh3as7_EETnZcj_sD6Uk5mGeVwiZ8ahg9gQ@mail.gmail.com>
Subject: Re: Bug in v3.3.0? - IndexNotFoundException: no segments* file found
 in org.apache.lucene.store.SimpleFSDirectory@
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, this isn't a bug, its a documented change in behavior in the 3.1
CHANGES.txt notes:

* LUCENE-2386: IndexWriter no longer performs an empty commit upon new inde=
x
  creation. Previously, if you passed an empty Directory and set OpenMode t=
o
  CREATE*, IndexWriter would make a first empty commit. If you need that
  behavior you can call writer.commit()/close() immediately after you creat=
e it.

http://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_3_1/lucene/CHAN=
GES.txt

On Thu, Jul 7, 2011 at 11:04 PM, Rob Bygrave <robin.bygrave@gmail.com> wrot=
e:
> This looks like a Bug in v3.3.0.
>
> The code below works in 3.0.1 without calling the writer.commit() before
> =C2=A0IndexReader.open(directory).
>
> In v3.3.0 when the index does not yet exist I need to add the
> writer.commit() and I believe that creates the segments. If I don't add t=
he
> writer.commit() then I get the IndexNotFoundException: no segments* file
> found exception below.
>
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexWriterConfig config =3D new
> IndexWriterConfig(Version.LUCENE_33, analyzer);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0config.setOpenMode(OpenMode.CREA=
TE_OR_APPEND);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0config.setIndexDeletionPolicy(co=
mmitDeletionPolicy);
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexWriter writer =3D new Index=
Writer(directory, config);
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// -----------------
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// Need to add this w.commit() w=
hen the index is does not exist
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0writer.commit();
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// -----------------
>
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0// without the commit above this=
 fails with
> a IndexNotFoundException when the index does not exist
> =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0 =C2=A0IndexReader reader =3D IndexRead=
er.open(directory);
>
>
>
> The exception when writer.commit() is not there and the index does not ex=
ist
> is:
>
> Caused by: org.apache.lucene.index.IndexNotFoundException: no segments* f=
ile
> found in org.apache.lucene.store.SimpleFSDirectory@C:\dev\workspace-sts\u=
oa-tmp-copydb\lucene\dst\model.indexdefn.OrgUnitIndexDefn
> lockFactory=3Dorg.apache.lucene.store.NativeFSLockFactory@3bc257: files:
> [write.lock]
> at
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.ja=
va:708)
> at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:75)
> at org.apache.lucene.index.IndexReader.open(IndexReader.java:428)
> at org.apache.lucene.index.IndexReader.open(IndexReader.java:274)
>
>
> The workaround is to add the writer.commit() and that seems pretty
> reasonable to me.
>
> Thanks, Rob.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 04:23:19 2011
Return-Path: <java-user-return-50287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 446A662F6
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 04:23:19 +0000 (UTC)
Received: (qmail 33272 invoked by uid 500); 8 Jul 2011 04:23:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32819 invoked by uid 500); 8 Jul 2011 04:23:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32794 invoked by uid 99); 8 Jul 2011 04:22:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 04:22:54 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of robin.bygrave@gmail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 04:22:47 +0000
Received: by gyb11 with SMTP id 11so934734gyb.35
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2011 21:22:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=BcQfzTCdFlQcZSHq5tKyu6QAhzLzsKVZD/34HB3AYTw=;
        b=nC7vAj+2uhb6S6E8yJma+yLWThITJJeWb+OXbqy0mt71crU7uJBc5827wsWAQ9XTQ1
         eH3yXO3AIFhy+d8El8lPzzHhaw9U10fNiePXHVp4aSKNPJevohoFzwgozDDOqYwR860W
         rJ2X5JOeL+nyWDKsFqEV9MxEdSciaQGSHjVPI=
MIME-Version: 1.0
Received: by 10.101.200.1 with SMTP id c1mr1344486anq.132.1310098945360; Thu,
 07 Jul 2011 21:22:25 -0700 (PDT)
Received: by 10.100.8.6 with HTTP; Thu, 7 Jul 2011 21:22:25 -0700 (PDT)
In-Reply-To: <CAOdYfZX5hWx4gPfHh3as7_EETnZcj_sD6Uk5mGeVwiZ8ahg9gQ@mail.gmail.com>
References: <CAC=ts-Gti-hBCvE9cGcfARwseKGjDLsCDovdAR6ZT39MD303og@mail.gmail.com>
	<CAOdYfZX5hWx4gPfHh3as7_EETnZcj_sD6Uk5mGeVwiZ8ahg9gQ@mail.gmail.com>
Date: Fri, 8 Jul 2011 16:22:25 +1200
Message-ID: <CAC=ts-EK8Fc5paGkWVzFr_GFZWn2M0FferC_XGyUcEL-ig6k7w@mail.gmail.com>
Subject: Re: Bug in v3.3.0? - IndexNotFoundException: no segments* file found
 in org.apache.lucene.store.SimpleFSDirectory@
From: Rob Bygrave <robin.bygrave@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e68deca84244a304a7872e82

--0016e68deca84244a304a7872e82
Content-Type: text/plain; charset=ISO-8859-1

Great, thanks.

On 8 July 2011 15:08, Robert Muir <rcmuir@gmail.com> wrote:

> Hi, this isn't a bug, its a documented change in behavior in the 3.1
> CHANGES.txt notes:
>
> * LUCENE-2386: IndexWriter no longer performs an empty commit upon new
> index
>  creation. Previously, if you passed an empty Directory and set OpenMode to
>  CREATE*, IndexWriter would make a first empty commit. If you need that
>  behavior you can call writer.commit()/close() immediately after you create
> it.
>
>
> http://svn.apache.org/repos/asf/lucene/dev/tags/lucene_solr_3_1/lucene/CHANGES.txt
>
> On Thu, Jul 7, 2011 at 11:04 PM, Rob Bygrave <robin.bygrave@gmail.com>
> wrote:
> > This looks like a Bug in v3.3.0.
> >
> > The code below works in 3.0.1 without calling the writer.commit() before
> >  IndexReader.open(directory).
> >
> > In v3.3.0 when the index does not yet exist I need to add the
> > writer.commit() and I believe that creates the segments. If I don't add
> the
> > writer.commit() then I get the IndexNotFoundException: no segments* file
> > found exception below.
> >
> >
> >            IndexWriterConfig config = new
> > IndexWriterConfig(Version.LUCENE_33, analyzer);
> >            config.setOpenMode(OpenMode.CREATE_OR_APPEND);
> >            config.setIndexDeletionPolicy(commitDeletionPolicy);
> >            IndexWriter writer = new IndexWriter(directory, config);
> >
> >            // -----------------
> >            // Need to add this w.commit() when the index is does not
> exist
> >            writer.commit();
> >            // -----------------
> >
> >            // without the commit above this fails with
> > a IndexNotFoundException when the index does not exist
> >            IndexReader reader = IndexReader.open(directory);
> >
> >
> >
> > The exception when writer.commit() is not there and the index does not
> exist
> > is:
> >
> > Caused by: org.apache.lucene.index.IndexNotFoundException: no segments*
> file
> > found in org.apache.lucene.store.SimpleFSDirectory@C
> :\dev\workspace-sts\uoa-tmp-copydb\lucene\dst\model.indexdefn.OrgUnitIndexDefn
> > lockFactory=org.apache.lucene.store.NativeFSLockFactory@3bc257: files:
> > [write.lock]
> > at
> >
> org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:708)
> > at org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:75)
> > at org.apache.lucene.index.IndexReader.open(IndexReader.java:428)
> > at org.apache.lucene.index.IndexReader.open(IndexReader.java:274)
> >
> >
> > The workaround is to add the writer.commit() and that seems pretty
> > reasonable to me.
> >
> > Thanks, Rob.
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0016e68deca84244a304a7872e82--

From java-user-return-50288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 08:22:26 2011
Return-Path: <java-user-return-50288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1FAC56D34
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 08:22:26 +0000 (UTC)
Received: (qmail 91933 invoked by uid 500); 8 Jul 2011 08:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91301 invoked by uid 500); 8 Jul 2011 08:22:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91207 invoked by uid 99); 8 Jul 2011 08:21:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 08:21:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of evert.wagenaar@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 08:21:50 +0000
Received: by vws7 with SMTP id 7so2016599vws.35
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2011 01:21:29 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=veZlOwwkUOtP8iuBKU5n/2FELcx7bCwMGU5/WB0trCQ=;
        b=RKQXdD99TMGkRNxqmbQ1+XXpi4mSSyZQiq5+BJjEqc0tnNJJpC9GSn93D34ADW2f7r
         zfJDBtqjcEU4PGKYe64Qeu5Djg8wdoXFz6Gwe6MIgp3F1w0LFO7VPXgHJPklLdkwGFai
         mAhXHaTimsGhhSSLY51U9foENbK6ErFBhJt+k=
MIME-Version: 1.0
Received: by 10.52.175.133 with SMTP id ca5mr2457058vdc.82.1310113289344; Fri,
 08 Jul 2011 01:21:29 -0700 (PDT)
Received: by 10.52.116.70 with HTTP; Fri, 8 Jul 2011 01:21:28 -0700 (PDT)
Date: Fri, 8 Jul 2011 10:21:28 +0200
Message-ID: <CALBRC1ZCOzJeAv-4LKSDAEwb98Z1o7aDxxx2tr-e4uo2fv5qKw@mail.gmail.com>
Subject: Advise regarding drawing search
From: Evert Wagenaar <evert.wagenaar@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5014c6b3a152104a78a8527
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5014c6b3a152104a78a8527
Content-Type: text/plain; charset=ISO-8859-1

Hello all,

Me and my collegues would like some advise on the following;

We have a really large amount of technical drawings (about 300 Million)
which we want to make searchable. An OCR library has already been developed
which is able to identify all components which may be available on a
drawing, remove noise, etc.

Next to adding components we also add x,y coordinates (normalized for
drawing size) for each component with the goal to provide our users with
some kind of (real, 2D) proximity search on the drawing itself. For example
search for a drawing which has a condensator near a resistor.

Especially because of the amount of drawings, any advise will be
appriciated, like wether or not to use payloads,spatial search etc.

Thanks in advance.


-- 
Evert

--bcaec5014c6b3a152104a78a8527--

From java-user-return-50289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 09:44:36 2011
Return-Path: <java-user-return-50289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED75F6B76
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 09:44:36 +0000 (UTC)
Received: (qmail 7827 invoked by uid 500); 8 Jul 2011 09:44:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7319 invoked by uid 500); 8 Jul 2011 09:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7297 invoked by uid 99); 8 Jul 2011 09:44:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 09:44:23 +0000
X-ASF-Spam-Status: No, hits=1.6 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of jahan9@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 09:44:15 +0000
Received: by iwi5 with SMTP id 5so2439221iwi.35
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2011 02:43:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=rGFotsG4taeFH8+g8On4RjCQsicjxCEhtNpLVFwEVOw=;
        b=h67dnhVY//SVkiQOnyB773BpbL2edjLwfp1VSr7Q2vlSkIRxvClP1vEzFKib6V1R3O
         V5YE+kAXb8ajjVnVW9K6845GCF65c/KlGp21pG5was/QTg0CccS6UcyPPnOOxxwNXQDy
         uaVYAW0fpSh85wb2yi9j2LOz7Ei6eOT6obTw0=
MIME-Version: 1.0
Received: by 10.42.96.8 with SMTP id h8mr1951707icn.185.1310118234357; Fri, 08
 Jul 2011 02:43:54 -0700 (PDT)
Received: by 10.231.15.65 with HTTP; Fri, 8 Jul 2011 02:43:54 -0700 (PDT)
In-Reply-To: <8DF98893-A7F7-4EE6-9357-8CDA0AD3C15B@gmail.com>
References: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com>
	<F158D191-C949-4E20-B610-BF65DC13DF8C@gmail.com>
	<CAHBqfespyGuvdBuCsxLtQFimaeiE=ZyEntSP5DDptPEorw3CqA@mail.gmail.com>
	<8DF98893-A7F7-4EE6-9357-8CDA0AD3C15B@gmail.com>
Date: Fri, 8 Jul 2011 12:43:54 +0300
Message-ID: <CAHBqfeuGYd15+4_9Q3h+msH+QxRj9iuCUaaPNyP57Dr6m7M22w@mail.gmail.com>
Subject: Re: Extracting span terms using WeightedSpanTermExtractor
From: Jahangir Anwari <jahan9@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf303bfb10f9013104a78babfe
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf303bfb10f9013104a78babfe
Content-Type: text/plain; charset=UTF-8

After applying the patch I was able to get the span positions for all the
terms in the query. But now when I tried to access the positionSpans of each
span term I cannot because they are stored in a package-private PositionSpan
class in WeightedSpanTerm.java which prevents them from being visible
outside the package. I was able to work around it in a by making
PositionSpan utility class public. I moved PositionSpan class it into its
own file in o.a.l.search.highlight package. I don't think this is the best
solution, am open to other alternatives.

This is the content of o.a.l.search.highlight.PositionSpan.java

// Utility class to store a Span
public class PositionSpan {
  int start;
  int end;

  public PositionSpan(int start, int end) {
    this.start = start;
    this.end = end;
  }

  public int getEndPositionSpan() {
     return end;
  }

   public int getStartPositionSpan() {
     return start;
  }
}

-Jahangir

On Fri, Jul 8, 2011 at 2:47 AM, Mark Miller <markrmiller@gmail.com> wrote:

>
> On Jul 7, 2011, at 5:14 PM, Jahangir Anwari wrote:
>
> > I did noticed a strange issue though. When the query is just a
> > PhraseQuery(e.g. "everlasting glory"), getWeightedSpanTerms() returns all
> > the span terms along with their span positions. But when the query is a
> > BooleanQuery containing phrase and non-phrase terms(e.g. "everlasting
> > glory"+unity), getWeightedSpanTerms() returns all the span terms but the
> > span positions are returned only for the phrase terms(i.e. "everlasting"
> and
> > "glory"). Span positions for the non-phrase term(i.e. "unity") is empty.
> Any
> > ideas why this could be happening?
>
>
> Positions are only collected for "position sensitive" queries. The
> Highlighter framework that I plugged this into already runs through the
> TokenStream one token at a time - to highlight a TermQuery, there is no need
> to consult positions - just highlight every occurrence seen while marching
> through the TokenStream. Which means there is no need to find those
> positions either.
>
> If you are looking for those positions, here is a patch to calculate them
> for TermQuerys as well. If you open a JIRA issue, seems like a reasonable
> option to add to the class.
>
> Index:
> lucene/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
> ===================================================================
> ---
> lucene/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
>       (revision 1143407)
> +++
> lucene/contrib/highlighter/src/java/org/apache/lucene/search/highlight/WeightedSpanTermExtractor.java
>       (working copy)
> @@ -133,7 +133,7 @@
>       sp.setBoost(query.getBoost());
>       extractWeightedSpanTerms(terms, sp);
>     } else if (query instanceof TermQuery) {
> -      extractWeightedTerms(terms, query);
> +      extractWeightedSpanTerms(terms, new
> SpanTermQuery(((TermQuery)query).getTerm()));
>     } else if (query instanceof SpanQuery) {
>       extractWeightedSpanTerms(terms, (SpanQuery) query);
>     } else if (query instanceof FilteredQuery) {
>
>
> - Mark Miller
> lucidimagination.com
>
>
>
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf303bfb10f9013104a78babfe--

From java-user-return-50290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 11:32:12 2011
Return-Path: <java-user-return-50290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4789B6DE8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 11:32:12 +0000 (UTC)
Received: (qmail 71259 invoked by uid 500); 8 Jul 2011 11:32:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70773 invoked by uid 500); 8 Jul 2011 11:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70762 invoked by uid 99); 8 Jul 2011 11:32:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 11:32:06 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 11:31:59 +0000
Received: by iyi20 with SMTP id 20so2579010iyi.35
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2011 04:31:39 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=bO1z++TJ5XgWAmOIsacp3BWtyD7HzYMe3XTcwt2948w=;
        b=SY/5X0xXXbLVehvCrxiZuynrVSi/RK0iSLVwAnQ4bb/H83Y9zZ0c3exRhNPE/LjS//
         GVmRCg4U7DYaGVWmcFgX8Q79zG9N2QhaCpAVBrIVefZs20cd+YxT7ENlaNZ5pEOp/3Pr
         81D6wDTXDw3FzGozpb5dVRD3z3ON4nxwJaoP4=
Received: by 10.231.111.39 with SMTP id q39mr1613604ibp.106.1310124699177;
 Fri, 08 Jul 2011 04:31:39 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.199 with HTTP; Fri, 8 Jul 2011 04:31:19 -0700 (PDT)
In-Reply-To: <CA+PLKQLcfow1VTgF01=7U7d0y=04hnQyqKsyd4DM8cijk9xhdQ@mail.gmail.com>
References: <CA+PLKQLcfow1VTgF01=7U7d0y=04hnQyqKsyd4DM8cijk9xhdQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 8 Jul 2011 12:31:19 +0100
Message-ID: <CAEY5pxXZx34dhTWRdkVvEp1sPs2wZfOkgXwGRxmgma3s7Jn-jQ@mail.gmail.com>
Subject: Re: # as a special character?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Searching for special characters can be a pain.  There is a message
thread from this list called "Lucene  Analyzer that can handle C++ vs
C#" that might help.


--
Ian.


On Wed, Jul 6, 2011 at 4:19 PM, Aradon Strider <aradon@gmail.com> wrote:
> Hello,
>
> =A0First off I am using the QueryParser with the standardanalyzer. =A0It
> seems that whenever I search for the # symbol, nothing is found. =A0This
> wouldn't be a problem but the documents I am searching have C# used
> and needing to be searched for.
>
> =A0I have tried escaping the # symbol but when I do escape it I just
> get the following after calling parse from queryparser using "C#":
> Text:c
>
> =A0This is the same as searching just C. =A0Now I know that the toString
> can't be relied upon for special characters (C++ escaped correctly is
> shown as Text:c), but I know c++ works since it only returns those
> hits involved with c++ and not just the letter c (like c# is)
>
> Any help would be appreciated!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 14:39:48 2011
Return-Path: <java-user-return-50291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C3C276C4F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 14:39:48 +0000 (UTC)
Received: (qmail 92846 invoked by uid 500); 8 Jul 2011 14:39:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92724 invoked by uid 500); 8 Jul 2011 14:39:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92714 invoked by uid 99); 8 Jul 2011 14:39:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 14:39:45 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,MIME_QP_LONG_LINE,RCVD_IN_DNSWL_NONE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of chris.bamford@talktalk.net designates 62.24.128.240 as permitted sender)
Received: from [62.24.128.240] (HELO out1.ip04ir2.opaltelecom.net) (62.24.128.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 14:39:36 +0000
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: ApwGACQWF07O3uJS/2dsb2JhbABTglGVf44RgVusRZ8fhjgEoyw
X-IronPort-AV: E=Sophos;i="4.65,499,1304290800"; 
   d="scan'208";a="338830878"
Received: from frr2-l18.sis.aol.com (HELO FRR2-L18) ([206.222.226.82])
  by out1.ip04ir2.opaltelecom.net with ESMTP; 08 Jul 2011 15:39:15 +0100
To: java-user@lucene.apache.org
Subject: Large indexes
Date: Fri, 08 Jul 2011 10:39:15 -0400
X-MB-Message-Source: WebUI
X-MB-Message-Type: User
MIME-Version: 1.0
From: Chris Bamford <chris.bamford@talktalk.net>
Content-Type: multipart/alternative; 
 boundary="--------MB_8CE0B93F2060437_1598_18BD_FRR2-L18./f"
X-Mailer: Webmail 33953-STANDARD
Received: from 213.235.23.5 by FRR2-L18./f (206.222.226.82) with HTTP (WebMailUI); Fri, 08 Jul 2011 10:39:14 -0400
Message-Id: <8CE0B93F1A6CD87-1598-6B1@FRR2-L18./f>
X-Virus-Checked: Checked by ClamAV on apache.org

----------MB_8CE0B93F2060437_1598_18BD_FRR2-L18./f
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="us-ascii"

=0A=20Hi=20=0A=0A=20=0AI=20was=20wondering=20how=20to=20improve=20search=20perfo=
rmance=20over=20a=20set=20of=20indexes=20like=20this:=0A=0A=2027G=20=20=20=20K1-=
1/index=0A=2019G=20=20=20=20K1-2/index=0A=2024G=20=20=20=20K1-3/index=0A=2015G=20=
=20=20=20K1-4/index=0A=2019G=20=20=20=20K1-5/index=0A=2031G=20=20=20=20K2-1/inde=
x=0A=2016G=20=20=20=20K2-2/index=0A=208.1G=20=20=20K2-3/index=0A=2012G=20=20=20=20=
K2-4/index=0A=2015G=20=20=20=20K2-5/index=0A=0AIn=20total=20it=20is=20~192Gb.=20=
=20All=20have=20the=20same=20schema,=20with=20data=20partitioned=20by=20my=20app=
lication=20into=20separate=20=0Aindexes=20(rather=20than=20just=201=20big=20one)=
.=0AI=20have=20tried=20searching=20with=20both=20a=20MultiSearcher=20and=20a=20P=
arallelMultiSearcher=20(with=20lots=20of=20memory),=20but=20it=20=0Ais=20way=20t=
oo=20slow=20(sometimes=20hangs,=20otherwise=20it=20takes=20tens=20of=20minutes).=
=20=20Do=20you=20have=20any=20tips=20for=20improving=20speed?=0AI=20have=20reduc=
ed=20the=20stored=20data=20as=20much=20as=20possible=20(without=20using=20compre=
ssion)=20and=20use=20a=20FieldSelector=20when=20querying=0Abut=20neither=20seem=20=
to=20help..=0A=0AIs=20this=20the=20right=20approach?=20=20If=20I=20query=20them=20=
one=20by=20one=20I=20response=20time=20is=20reasonable=20(a=20few=20seconds=20ea=
ch),=20but=20I=20was=20=0Akind=20of=20hoping=20to=20treat=20them=20as=20one=20la=
rge=20index=20if=20possible.=0A=0AAny=20thoughts=20welcomed.=0A=0AThanks,=0A=0A=20=
-=20Chris=0A=0A
----------MB_8CE0B93F2060437_1598_18BD_FRR2-L18./f--


From java-user-return-50292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 14:50:56 2011
Return-Path: <java-user-return-50292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 20F8E65BC
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 14:50:56 +0000 (UTC)
Received: (qmail 12490 invoked by uid 500); 8 Jul 2011 14:50:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12437 invoked by uid 500); 8 Jul 2011 14:50:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12429 invoked by uid 99); 8 Jul 2011 14:50:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 14:50:52 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 14:50:46 +0000
Received: by iwi5 with SMTP id 5so2754585iwi.35
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2011 07:50:25 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=IjxqnsAvf8BOboc4XZLEckQ/bPfR8ejQr5hmg8mLdYg=;
        b=N6kbyVzri0w/9S96M6Wiq9nt7fM4IjWT7TmgydExT6AZc3P1nEy9poomylkIBdwJB8
         KixDy2pMNhzndi2SPO05RzVZYv8X600nKHVJ3JGEZOSqdmWnjjECILcrdR5Q2Cs0JFU/
         J0G9rcmSsiDE+nLe2ogm9n9T3QiJC6NRyOc+U=
Received: by 10.42.97.68 with SMTP id m4mr860477icn.292.1310136625109; Fri, 08
 Jul 2011 07:50:25 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.199 with HTTP; Fri, 8 Jul 2011 07:50:04 -0700 (PDT)
In-Reply-To: <8CE0B93F1A6CD87-1598-6B1@FRR2-L18./f>
References: <8CE0B93F1A6CD87-1598-6B1@FRR2-L18./f>
From: Ian Lea <ian.lea@gmail.com>
Date: Fri, 8 Jul 2011 15:50:04 +0100
Message-ID: <CAEY5pxUA1tjHEz4LYazWCC06r4yt4AOC5-Cgp7O2SrV29pC2rw@mail.gmail.com>
Subject: Re: Large indexes
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

There are lots of general tips at
http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.

What version of lucene?  Recent releases should be faster. Have you
tried with one big index? If everything is running on the same server
that may well be faster.

Even on single indexes, response of a few seconds sounds high. Are the
searches complex?  Are you sorting?  Reading lots of hits for each
search?


--
Ian.

On Fri, Jul 8, 2011 at 3:39 PM, Chris Bamford
<chris.bamford@talktalk.net> wrote:
>
> =A0Hi
>
>
> I was wondering how to improve search performance over a set of indexes l=
ike this:
>
> =A027G =A0 =A0K1-1/index
> =A019G =A0 =A0K1-2/index
> =A024G =A0 =A0K1-3/index
> =A015G =A0 =A0K1-4/index
> =A019G =A0 =A0K1-5/index
> =A031G =A0 =A0K2-1/index
> =A016G =A0 =A0K2-2/index
> =A08.1G =A0 K2-3/index
> =A012G =A0 =A0K2-4/index
> =A015G =A0 =A0K2-5/index
>
> In total it is ~192Gb. =A0All have the same schema, with data partitioned=
 by my application into separate
> indexes (rather than just 1 big one).
> I have tried searching with both a MultiSearcher and a ParallelMultiSearc=
her (with lots of memory), but it
> is way too slow (sometimes hangs, otherwise it takes tens of minutes). =
=A0Do you have any tips for improving speed?
> I have reduced the stored data as much as possible (without using compres=
sion) and use a FieldSelector when querying
> but neither seem to help..
>
> Is this the right approach? =A0If I query them one by one I response time=
 is reasonable (a few seconds each), but I was
> kind of hoping to treat them as one large index if possible.
>
> Any thoughts welcomed.
>
> Thanks,
>
> =A0- Chris
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 15:41:58 2011
Return-Path: <java-user-return-50293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 91AA66ACE
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 15:41:58 +0000 (UTC)
Received: (qmail 27263 invoked by uid 500); 8 Jul 2011 15:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27222 invoked by uid 500); 8 Jul 2011 15:41:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27214 invoked by uid 99); 8 Jul 2011 15:41:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 15:41:55 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 15:41:47 +0000
Received: by vxd2 with SMTP id 2so2362008vxd.35
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2011 08:41:27 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=7hFHt3d2HVo3SGG0/fR9zEMhyfD6CuAgWx7ecD/tQXA=;
        b=GsrbwHDXi6153FgvMNKO0AV8MHlzRQbHcI0g2vwikkCqgSD12RwK8Zl1XrQZbj0+5e
         aruBMmOAqhVfVDtTsiMLg89O2f11CCSKtfUOtveRGiyfCD2AsiyqLpmJIdxfiASxWI2z
         VGY1LO4X2pJRHieV1sSVcYsPYbl7krSN2cD5Q=
Received: by 10.52.179.161 with SMTP id dh1mr2901898vdc.177.1310139687029;
        Fri, 08 Jul 2011 08:41:27 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c78059.dyn.optonline.net [68.199.128.89])
        by mx.google.com with ESMTPS id f1sm1207907vcn.10.2011.07.08.08.41.24
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 08 Jul 2011 08:41:26 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Extracting span terms using WeightedSpanTermExtractor
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <CAHBqfeuGYd15+4_9Q3h+msH+QxRj9iuCUaaPNyP57Dr6m7M22w@mail.gmail.com>
Date: Fri, 8 Jul 2011 11:41:15 -0400
Content-Transfer-Encoding: 7bit
Message-Id: <4205F376-F344-45EF-A071-1C80A40DF4AC@gmail.com>
References: <CAHBqfetQ+gtUu7RnpCCHOSkG46sF_PyXFusCF=hfqU07DTEE8w@mail.gmail.com> <F158D191-C949-4E20-B610-BF65DC13DF8C@gmail.com> <CAHBqfespyGuvdBuCsxLtQFimaeiE=ZyEntSP5DDptPEorw3CqA@mail.gmail.com> <8DF98893-A7F7-4EE6-9357-8CDA0AD3C15B@gmail.com> <CAHBqfeuGYd15+4_9Q3h+msH+QxRj9iuCUaaPNyP57Dr6m7M22w@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)
X-Virus-Checked: Checked by ClamAV on apache.org


On Jul 8, 2011, at 5:43 AM, Jahangir Anwari wrote:

> I don't think this is the best
> solution, am open to other alternatives.


Could also make it static public where it is? Either way.


- Mark Miller
lucidimagination.com









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 15:58:03 2011
Return-Path: <java-user-return-50294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A88DF6620
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 15:58:03 +0000 (UTC)
Received: (qmail 55874 invoked by uid 500); 8 Jul 2011 15:58:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55839 invoked by uid 500); 8 Jul 2011 15:58:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55831 invoked by uid 99); 8 Jul 2011 15:58:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 15:58:00 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.160.176 as permitted sender)
Received: from [209.85.160.176] (HELO mail-gy0-f176.google.com) (209.85.160.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 15:57:54 +0000
Received: by gyb11 with SMTP id 11so1175755gyb.35
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2011 08:57:34 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=Xa3yaJA51V+wbMKo0yYTeClOxK9CsztySbTSDoQ+oUI=;
        b=s9pLRo2yBxVfqOHAakQPD0sU5ral1CUjno+75osGOq1+WV1KeQORPzxs7+Tyu5wt4g
         WqM6LYDtK+pukvjSnGW2E178rXf5CP0AJiX/w0ffddHOD9CuQ+pQnLr2O0wujRqSILJQ
         ibALPMUqP+PEcUftbYXFIKwgs5S32gaH9lnBQ=
MIME-Version: 1.0
Received: by 10.151.61.4 with SMTP id o4mr2061194ybk.354.1310140653714; Fri,
 08 Jul 2011 08:57:33 -0700 (PDT)
Received: by 10.147.114.8 with HTTP; Fri, 8 Jul 2011 08:57:33 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <CAEY5pxUA1tjHEz4LYazWCC06r4yt4AOC5-Cgp7O2SrV29pC2rw@mail.gmail.com>
References: <8CE0B93F1A6CD87-1598-6B1@FRR2-L18./f>
	<CAEY5pxUA1tjHEz4LYazWCC06r4yt4AOC5-Cgp7O2SrV29pC2rw@mail.gmail.com>
Date: Fri, 8 Jul 2011 17:57:33 +0200
Message-ID: <CAAHmpkiK=23BH-Aa+jMpTSwZz2EjUfshYXZ7aNMgQrcdvfDjfw@mail.gmail.com>
Subject: Re: Large indexes
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jul 8, 2011 at 4:50 PM, Ian Lea <ian.lea@gmail.com> wrote:
> There are lots of general tips at
> http://wiki.apache.org/lucene-java/ImproveSearchingSpeed.
>
> What version of lucene? =C2=A0Recent releases should be faster. Have you
> tried with one big index? If everything is running on the same server
> that may well be faster.
>
> Even on single indexes, response of a few seconds sounds high. Are the
> searches complex? =C2=A0Are you sorting? =C2=A0Reading lots of hits for e=
ach
> search?
>
>
> --
> Ian.
>
> On Fri, Jul 8, 2011 at 3:39 PM, Chris Bamford
> <chris.bamford@talktalk.net> wrote:
>>
>> =C2=A0Hi
>>
>>
>> I was wondering how to improve search performance over a set of indexes =
like this:
>>
>> =C2=A027G =C2=A0 =C2=A0K1-1/index
>> =C2=A019G =C2=A0 =C2=A0K1-2/index
>> =C2=A024G =C2=A0 =C2=A0K1-3/index
>> =C2=A015G =C2=A0 =C2=A0K1-4/index
>> =C2=A019G =C2=A0 =C2=A0K1-5/index
>> =C2=A031G =C2=A0 =C2=A0K2-1/index
>> =C2=A016G =C2=A0 =C2=A0K2-2/index
>> =C2=A08.1G =C2=A0 K2-3/index
>> =C2=A012G =C2=A0 =C2=A0K2-4/index
>> =C2=A015G =C2=A0 =C2=A0K2-5/index
>>
>> In total it is ~192Gb. =C2=A0All have the same schema, with data partiti=
oned by my application into separate
>> indexes (rather than just 1 big one).
>> I have tried searching with both a MultiSearcher and a ParallelMultiSear=
cher (with lots of memory), but it
>> is way too slow (sometimes hangs, otherwise it takes tens of minutes). =
=C2=A0Do you have any tips for improving speed?
>> I have reduced the stored data as much as possible (without using compre=
ssion) and use a FieldSelector when querying
>> but neither seem to help..
>>
>> Is this the right approach? =C2=A0If I query them one by one I response =
time is reasonable (a few seconds each), but I was
>> kind of hoping to treat them as one large index if possible.

a few seconds? what are you doing that a search takes a few seconds.

simon
>>
>> Any thoughts welcomed.
>>
>> Thanks,
>>
>> =C2=A0- Chris
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul  8 16:24:32 2011
Return-Path: <java-user-return-50295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 76C77683D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri,  8 Jul 2011 16:24:32 +0000 (UTC)
Received: (qmail 7751 invoked by uid 500); 8 Jul 2011 16:24:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7680 invoked by uid 500); 8 Jul 2011 16:24:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7671 invoked by uid 99); 8 Jul 2011 16:24:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 16:24:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2011 16:24:23 +0000
Received: by pve37 with SMTP id 37so1867984pve.35
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2011 09:24:01 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=7t7VZj0HA8GfUY/tC5R6FYrqSUcHzWFZr8JEEF7EXRg=;
        b=genXe4FayPGdKzpqgamgvcLSer7nenSC+1Nl2wkAe4XmmfVVaJgrdv9tHlmZvC1guu
         YBLjY7X0x565oK6t5pSGoJZ2J0t/xxXyo+SfAyQCR+3l/Eh4RAv2Rvo932o+ag7MWJb1
         IkW0vf/SzBL7JuNNlZwiK06bZUEeeqlo4+43I=
MIME-Version: 1.0
Received: by 10.68.14.164 with SMTP id q4mr3103596pbc.352.1310142241721; Fri,
 08 Jul 2011 09:24:01 -0700 (PDT)
Received: by 10.68.46.227 with HTTP; Fri, 8 Jul 2011 09:24:01 -0700 (PDT)
In-Reply-To: <8CE0B93F1A6CD87-1598-6B1@FRR2-L18./f>
References: <8CE0B93F1A6CD87-1598-6B1@FRR2-L18./f>
Date: Fri, 8 Jul 2011 12:24:01 -0400
Message-ID: <CAN4YXveVF_GHfTErmiPg8kSC4J2-amxbZC1MFp1-tXKuvyaG+g@mail.gmail.com>
Subject: Re: Large indexes
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Simply breaking up your index into separate pieces on the same machine
buys you nothing, in fact it costs you considerably. Have you put
a profiler on the system to see what's happening? I expect you're swapping
all over the place and are memory-constrained.

Have you considered sharding your index across multiple machines? That
is often an approach to use assuming that logically this is a single index.=
..

Best
Erick

On Fri, Jul 8, 2011 at 10:39 AM, Chris Bamford
<chris.bamford@talktalk.net> wrote:
>
> =A0Hi
>
>
> I was wondering how to improve search performance over a set of indexes l=
ike this:
>
> =A027G =A0 =A0K1-1/index
> =A019G =A0 =A0K1-2/index
> =A024G =A0 =A0K1-3/index
> =A015G =A0 =A0K1-4/index
> =A019G =A0 =A0K1-5/index
> =A031G =A0 =A0K2-1/index
> =A016G =A0 =A0K2-2/index
> =A08.1G =A0 K2-3/index
> =A012G =A0 =A0K2-4/index
> =A015G =A0 =A0K2-5/index
>
> In total it is ~192Gb. =A0All have the same schema, with data partitioned=
 by my application into separate
> indexes (rather than just 1 big one).
> I have tried searching with both a MultiSearcher and a ParallelMultiSearc=
her (with lots of memory), but it
> is way too slow (sometimes hangs, otherwise it takes tens of minutes). =
=A0Do you have any tips for improving speed?
> I have reduced the stored data as much as possible (without using compres=
sion) and use a FieldSelector when querying
> but neither seem to help..
>
> Is this the right approach? =A0If I query them one by one I response time=
 is reasonable (a few seconds each), but I was
> kind of hoping to treat them as one large index if possible.
>
> Any thoughts welcomed.
>
> Thanks,
>
> =A0- Chris
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jul 10 16:07:53 2011
Return-Path: <java-user-return-50296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7DDC36144
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 10 Jul 2011 16:07:53 +0000 (UTC)
Received: (qmail 46362 invoked by uid 500); 10 Jul 2011 16:07:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46062 invoked by uid 500); 10 Jul 2011 16:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 27871 invoked by uid 99); 10 Jul 2011 15:36:19 -0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of parsa.moshrefi@gmail.com designates 74.125.83.176 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=7YJL9jv04ONFZxHz8hzlukcr0V46Gt6YWx3pp4FI/M0=;
        b=suBhi5wcPs+P6mhviibMUvA6b7yc0I/pyGPPxE9c6q5mHNo5T0elLz/i6ie3rfwXc/
         Ga0LqEZwR97vk6I+XUY75ajkC7QmSEMRHO0+eZYxsHItJrGdW5+duyigD3eyHBMoiHye
         vkMyLdeOEHDCtGZ1EqB+KqijtzCPyXXvAkfEI=
MIME-Version: 1.0
Date: Sun, 10 Jul 2011 20:05:50 +0430
Message-ID: <CAFjzacYks2TMOAGh7d3OhGSVF_o4_O0csFa=gqEo4UBveCRgOQ@mail.gmail.com>
Subject: FSDirectory source code mistake!
From: Parsa Moshrefi <parsa.moshrefi@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=bcaec5215bd94ca47604a7b8d225
X-Virus-Checked: Checked by ClamAV on apache.org

--bcaec5215bd94ca47604a7b8d225
Content-Type: text/plain; charset=ISO-8859-1

Greeting,
There's a mistake in writing the type of the class FSDirectory in the core
of Lucene 3.3. This class is defined as an abstract one while No abstract
method is found inside. Also it yields some other problems like not being
able to create an instance of FSDirectory in the code.
Please answer me as soon as possible !!

regards

--bcaec5215bd94ca47604a7b8d225--

From java-user-return-50297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jul 10 16:11:46 2011
Return-Path: <java-user-return-50297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 27EBC61FA
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 10 Jul 2011 16:11:46 +0000 (UTC)
Received: (qmail 50994 invoked by uid 500); 10 Jul 2011 16:11:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50692 invoked by uid 500); 10 Jul 2011 16:11:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50681 invoked by uid 99); 10 Jul 2011 16:11:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2011 16:11:42 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.218.48 as permitted sender)
Received: from [209.85.218.48] (HELO mail-yi0-f48.google.com) (209.85.218.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2011 16:11:36 +0000
Received: by yic24 with SMTP id 24so1801309yic.35
        for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 09:11:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type;
        bh=vBbraSteLVYOl8GVKi/sQVFuvssoCR7aWW+1YWZPdJY=;
        b=M4IHJ/tKCgGKyX9b3ahol9iNcO+k/bvgthLTY91vElOyvQveoemUwROG2jgUg2ODuZ
         1u1gaCS/EBOcUwA3JAXeyuQEc1k+hrD6HTJKYKd7WxNLt2a+BXPZJLWZmrHQek6stM9c
         sxDHC9jJKX53Pa9zsmHEYm9poo0x9T4gwceOw=
MIME-Version: 1.0
Received: by 10.150.100.6 with SMTP id x6mr3431945ybb.297.1310314275828; Sun,
 10 Jul 2011 09:11:15 -0700 (PDT)
Received: by 10.147.114.8 with HTTP; Sun, 10 Jul 2011 09:11:15 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <CAFjzacYks2TMOAGh7d3OhGSVF_o4_O0csFa=gqEo4UBveCRgOQ@mail.gmail.com>
References: <CAFjzacYks2TMOAGh7d3OhGSVF_o4_O0csFa=gqEo4UBveCRgOQ@mail.gmail.com>
Date: Sun, 10 Jul 2011 18:11:15 +0200
Message-ID: <CAAHmpkg05SXD9qFiqwP3ivmWVqpg5pxXVxTopHkrweK2BmMH-w@mail.gmail.com>
Subject: Re: FSDirectory source code mistake!
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

Hey,

you are right FSDirectory is abstract, yet the fact that it doesn't
declare an abstract method doesn't make it wrong. Please use the
static factory methods FSDirectory.open(File) to create an instance.
This factory will create a reasonable default for your platform. see
the javadoc for details
(http://lucene.apache.org/java/3_3_0/api/core/org/apache/lucene/store/FSDirectory.html)

simon

On Sun, Jul 10, 2011 at 5:35 PM, Parsa Moshrefi
<parsa.moshrefi@gmail.com> wrote:
> Greeting,
> There's a mistake in writing the type of the class FSDirectory in the core
> of Lucene 3.3. This class is defined as an abstract one while No abstract
> method is found inside. Also it yields some other problems like not being
> able to create an instance of FSDirectory in the code.
> Please answer me as soon as possible !!
>
> regards
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 11 01:31:08 2011
Return-Path: <java-user-return-50298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 384B467DB
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 11 Jul 2011 01:31:08 +0000 (UTC)
Received: (qmail 164 invoked by uid 500); 11 Jul 2011 01:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99741 invoked by uid 500); 11 Jul 2011 01:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99733 invoked by uid 99); 11 Jul 2011 01:31:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 01:31:04 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yhdelgado@uci.cu designates 200.55.140.180 as permitted sender)
Received: from [200.55.140.180] (HELO mx3.uci.cu) (200.55.140.180)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2011 01:30:56 +0000
Received: (qmail 15613 invoked by uid 507); 11 Jul 2011 01:30:31 -0000
Received: from 10.0.0.184 by ns3.uci.cu (envelope-from <yhdelgado@uci.cu>, uid 501) with qmail-scanner-2.01st 
 (avp: 5.0.2.0. spamassassin: 3.0.6. perlscan: 2.01st.  
 Clear:RC:1(10.0.0.184):. 
 Processed in 0.658889 secs); 11 Jul 2011 01:30:31 -0000
Received: from unknown (HELO ucimail3.uci.cu) (10.0.0.184)
  by 0 with SMTP; 11 Jul 2011 01:30:30 -0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by ucimail3.uci.cu (Postfix) with ESMTP id 01DA5B48FD5
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 21:30:30 -0400 (CDT)
X-Virus-Scanned: amavisd-new at uci.cu
Received: from ucimail3.uci.cu ([127.0.0.1])
	by localhost (ucimail3.uci.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id tgXJvhQoAlhP; Sun, 10 Jul 2011 21:30:29 -0400 (CDT)
Received: from ucimail3.uci.cu (ucimail3.uci.cu [10.0.0.184])
	by ucimail3.uci.cu (Postfix) with ESMTP id C1387B48FD8
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 21:30:29 -0400 (CDT)
Date: Sun, 10 Jul 2011 21:30:29 -0400 (CDT)
From: "Ing. Yusniel Hidalgo Delgado" <yhdelgado@uci.cu>
To: java-user@lucene.apache.org
Message-ID: <2069773167.1883761310347829765.JavaMail.root@ucimail3.uci.cu>
In-Reply-To: <184109845.1883541310347751368.JavaMail.root@ucimail3.uci.cu>
Subject: Some question about Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61080_402608631.1310347829764"
X-Originating-IP: [10.0.0.186]
X-Mailer: Zimbra 5.0.16_GA_2921.RHEL5_64 (ZimbraWebClient - FF3.0 (Linux)/5.0.16_GA_2921.RHEL5_64)
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_61080_402608631.1310347829764
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit


Hello 

I'm a new Lucene user. I have the following question: is posible to build a crawler/spider with Lucene library or Lucene is only for index/search phases. I am studying three project: Nutch, Lucene and Solr but I don't see what is the main difference between them. 

Greetings . 
-- 
-------------------------------------------------------------------------------------------- 
Eng. Yusniel Hidalgo Delgado 
University of Informatics Sciences 
-------------------------------------------------------------------------------------------- 

------=_Part_61080_402608631.1310347829764--

From java-user-return-50299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 11 01:46:20 2011
Return-Path: <java-user-return-50299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 348356312
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 11 Jul 2011 01:46:20 +0000 (UTC)
Received: (qmail 12850 invoked by uid 500); 11 Jul 2011 01:46:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12809 invoked by uid 500); 11 Jul 2011 01:46:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12801 invoked by uid 99); 11 Jul 2011 01:46:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 01:46:16 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.18.82] (HELO smtp1.syr.edu) (128.230.18.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 01:46:10 +0000
Received: from suex07-hub-02.ad.syr.edu (suex07-hub-02.ad.syr.edu [128.230.108.196])
	by smtp1.syr.edu (8.14.3/8.14.3) with ESMTP id p6B1jm3f009103
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=FAIL)
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 21:45:49 -0400
Received: from suex07-mbx-03.ad.syr.edu ([128.230.108.133]) by
 suex07-hub-02.ad.syr.edu ([128.230.108.196]) with mapi; Sun, 10 Jul 2011
 21:45:48 -0400
From: Steven A Rowe <sarowe@syr.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Sun, 10 Jul 2011 21:45:48 -0400
Subject: RE: Some question about Lucene
Thread-Topic: Some question about Lucene
Thread-Index: Acw/ajnXwf4sYwPRSIGN8JnhwW41BgAAe3cQ
Message-ID: <2D127F11DC79714E9B6A43AC9458147FC9460BE0@suex07-mbx-03.ad.syr.edu>
References: <184109845.1883541310347751368.JavaMail.root@ucimail3.uci.cu>
 <2069773167.1883761310347829765.JavaMail.root@ucimail3.uci.cu>
In-Reply-To: <2069773167.1883761310347829765.JavaMail.root@ucimail3.uci.cu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Proofpoint-Virus-Version: vendor=fsecure engine=2.50.10432:5.4.6813,1.0.211,0.0.0000
 definitions=2011-07-11_01:2011-07-08,2011-07-11,1970-01-01 signatures=0
X-Proofpoint-Spam-Reason: safe

VGhpcyBzbGlkZSBzaG93IGlzIGEgZmV3IHllYXJzIG9sZCwgYnV0IEkgdGhpbmsgaXQgbWlnaHQg
YmUgYSBnb29kIGludHJvZHVjdGlvbiBmb3IgeW91IHRvIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVu
IHRoZSBwcm9qZWN0czoNCg0KaHR0cDovL3d3dy5zbGlkZXNoYXJlLm5ldC9kbmFiZXIvYXBhY2hl
LWx1Y2VuZS1zZWFyY2hpbmctdGhlLXdlYi1hbmQtZXZlcnl0aGluZy1lbHNlLWphem9vbjA3Lw0K
DQpTdGV2ZQ0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJvbTogSW5nLiBZdXNuaWVs
IEhpZGFsZ28gRGVsZ2FkbyBbbWFpbHRvOnloZGVsZ2Fkb0B1Y2kuY3VdIA0KU2VudDogU3VuZGF5
LCBKdWx5IDEwLCAyMDExIDk6MzAgUE0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmcN
ClN1YmplY3Q6IFNvbWUgcXVlc3Rpb24gYWJvdXQgTHVjZW5lDQoNCg0KSGVsbG8gDQoNCkknbSBh
IG5ldyBMdWNlbmUgdXNlci4gSSBoYXZlIHRoZSBmb2xsb3dpbmcgcXVlc3Rpb246IGlzIHBvc2li
bGUgdG8gYnVpbGQgYSBjcmF3bGVyL3NwaWRlciB3aXRoIEx1Y2VuZSBsaWJyYXJ5IG9yIEx1Y2Vu
ZSBpcyBvbmx5IGZvciBpbmRleC9zZWFyY2ggcGhhc2VzLiBJIGFtIHN0dWR5aW5nIHRocmVlIHBy
b2plY3Q6IE51dGNoLCBMdWNlbmUgYW5kIFNvbHIgYnV0IEkgZG9uJ3Qgc2VlIHdoYXQgaXMgdGhl
IG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZW0uIA0KDQpHcmVldGluZ3MgLiANCi0tIA0KLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gDQpFbmcuIFl1c25pZWwgSGlkYWxnbyBE
ZWxnYWRvIA0KVW5pdmVyc2l0eSBvZiBJbmZvcm1hdGljcyBTY2llbmNlcyANCi0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIA0K


From java-user-return-50300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 11 02:14:48 2011
Return-Path: <java-user-return-50300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 34495429E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 11 Jul 2011 02:14:48 +0000 (UTC)
Received: (qmail 27535 invoked by uid 500); 11 Jul 2011 02:14:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27472 invoked by uid 500); 11 Jul 2011 02:14:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27464 invoked by uid 99); 11 Jul 2011 02:14:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 02:14:44 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yhdelgado@uci.cu designates 200.55.140.180 as permitted sender)
Received: from [200.55.140.180] (HELO mx3.uci.cu) (200.55.140.180)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2011 02:14:40 +0000
Received: (qmail 22206 invoked by uid 507); 11 Jul 2011 02:14:13 -0000
Received: from 10.0.0.184 by ns3.uci.cu (envelope-from <yhdelgado@uci.cu>, uid 501) with qmail-scanner-2.01st 
 (avp: 5.0.2.0. spamassassin: 3.0.6. perlscan: 2.01st.  
 Clear:RC:1(10.0.0.184):. 
 Processed in 0.663565 secs); 11 Jul 2011 02:14:13 -0000
Received: from unknown (HELO ucimail3.uci.cu) (10.0.0.184)
  by 0 with SMTP; 11 Jul 2011 02:14:12 -0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by ucimail3.uci.cu (Postfix) with ESMTP id 59D68B48FDD
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 22:14:12 -0400 (CDT)
X-Virus-Scanned: amavisd-new at uci.cu
Received: from ucimail3.uci.cu ([127.0.0.1])
	by localhost (ucimail3.uci.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id hGmUzG5wCser; Sun, 10 Jul 2011 22:14:11 -0400 (CDT)
Received: from ucimail3.uci.cu (ucimail3.uci.cu [10.0.0.184])
	by ucimail3.uci.cu (Postfix) with ESMTP id 800BDB48FD8
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 22:14:11 -0400 (CDT)
Date: Sun, 10 Jul 2011 22:14:11 -0400 (CDT)
From: Yusniel Hidalgo Delgado <yhdelgado@uci.cu>
To: java-user@lucene.apache.org
Message-ID: <2129913807.1890431310350451478.JavaMail.root@ucimail3.uci.cu>
In-Reply-To: <1524048390.1890001310350328270.JavaMail.root@ucimail3.uci.cu>
Subject: Re: Some question about Lucene
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61267_1842615821.1310350451478"
X-Originating-IP: [10.0.0.186]
X-Mailer: Zimbra 5.0.16_GA_2921.RHEL5_64 (ZimbraWebClient - FF3.0 (Linux)/5.0.16_GA_2921.RHEL5_64)

------=_Part_61267_1842615821.1310350451478
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: 7bit

Thanks Steve. Helpful this slide. Greetings. 

----- Mensaje original ----- 
De: "Steven A Rowe" <sarowe@syr.edu> 
Para: java-user@lucene.apache.org 
Enviados: Domingo, 10 de Julio 2011 21:45:48 (GMT-0500) Auto-Detected 
Asunto: RE: Some question about Lucene 

This slide show is a few years old, but I think it might be a good introduction for you to the differences between the projects: 

http://www.slideshare.net/dnaber/apache-lucene-searching-the-web-and-everything-else-jazoon07/ 

Steve 

-----Original Message----- 
From: Ing. Yusniel Hidalgo Delgado [mailto:yhdelgado@uci.cu] 
Sent: Sunday, July 10, 2011 9:30 PM 
To: java-user@lucene.apache.org 
Subject: Some question about Lucene 


Hello 

I'm a new Lucene user. I have the following question: is posible to build a crawler/spider with Lucene library or Lucene is only for index/search phases. I am studying three project: Nutch, Lucene and Solr but I don't see what is the main difference between them. 

Greetings . 
-- 
-------------------------------------------------------------------------------------------- 
Eng. Yusniel Hidalgo Delgado 
University of Informatics Sciences 
-------------------------------------------------------------------------------------------- 


-- 
-------------------------------------------------------------------------------------------- 
Eng. Yusniel Hidalgo Delgado 
University of Informatics Sciences 
-------------------------------------------------------------------------------------------- 

------=_Part_61267_1842615821.1310350451478--

From java-user-return-50301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 11 02:44:15 2011
Return-Path: <java-user-return-50301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2D0F74612
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 11 Jul 2011 02:44:15 +0000 (UTC)
Received: (qmail 43821 invoked by uid 500); 11 Jul 2011 02:44:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43430 invoked by uid 500); 11 Jul 2011 02:44:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43409 invoked by uid 99); 11 Jul 2011 02:44:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 02:44:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 02:44:00 +0000
Received: by ywn13 with SMTP id 13so1898163ywn.35
        for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 19:43:39 -0700 (PDT)
Received: by 10.151.118.2 with SMTP id v2mr3698441ybm.99.1310352219018;
        Sun, 10 Jul 2011 19:43:39 -0700 (PDT)
Received: from mail-gy0-f176.google.com (mail-gy0-f176.google.com [209.85.160.176])
        by mx.google.com with ESMTPS id a47sm2088055yhj.24.2011.07.10.19.43.37
        (version=SSLv3 cipher=OTHER);
        Sun, 10 Jul 2011 19:43:38 -0700 (PDT)
Received: by gyb11 with SMTP id 11so1907955gyb.35
        for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 19:43:37 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.208.15 with SMTP id f15mr3070445ybg.422.1310352217398;
 Sun, 10 Jul 2011 19:43:37 -0700 (PDT)
Received: by 10.151.100.17 with HTTP; Sun, 10 Jul 2011 19:43:37 -0700 (PDT)
Date: Mon, 11 Jul 2011 12:43:37 +1000
Message-ID: <CADuAvzcUMCn-0jSRqB-j3Oa7DLTzk3gaPJJautXUt0kO5S+hLw@mail.gmail.com>
Subject: StandardAnalyzer compatibility between 2.3 and 3.0
From: Trejkaz <trejkaz@trypticon.org>
To: Lucene Users Mailing List <java-user@lucene.apache.org>
Content-Type: text/plain; charset=UTF-8

Hi all.

I created a test using Lucene 2.3.  When run, this generates a single token:

    public static void main(String[] args) throws Exception {
        String string =
"\u0412\u0430\u0441\u0438\u0301\u043B\u044C\u0435\u0432";
        StandardAnalyzer analyser = new StandardAnalyzer();
        TokenStream stream = analyser.tokenStream("text", new
StringReader(string));
        Token token;
        while ((token = stream.next()) != null)
        {
            System.out.println(new String(token.termBuffer(), 0,
token.termLength()));
        }
    }

I then wrote much a similar test on Lucene 3.0, but specifying the
version of StandardAnalyzer behaviour to use:

    public static void main(String[] args) throws Exception {
        String string =
"\u0412\u0430\u0441\u0438\u0301\u043B\u044C\u0435\u0432";
        StandardAnalyzer analyser = new StandardAnalyzer(Version.LUCENE_23);
        TokenStream stream = analyser.tokenStream("text", new
StringReader(string));
        TermAttribute termAttribute = stream.getAttribute(TermAttribute.class);
        while (stream.incrementToken())
        {
            System.out.println(termAttribute.term());
        }
    }

But this generates two tokens, splitting at the accent.  (I assume
that this accent issue itself has already been fixed since v3.1.)

I was under the impression that the Version parameter was for
supporting this sort of backwards compatibility, so that indexes
created in the past could still be searched meaningfully using an
updated version of Lucene, but have I found a gap in the backwards
compatibility support here?

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 11 04:12:46 2011
Return-Path: <java-user-return-50302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E36F849E6
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 11 Jul 2011 04:12:45 +0000 (UTC)
Received: (qmail 81379 invoked by uid 500); 11 Jul 2011 04:12:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80883 invoked by uid 500); 11 Jul 2011 04:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80875 invoked by uid 99); 11 Jul 2011 04:12:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 04:12:30 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of settinghead@gmail.com designates 74.125.82.176 as permitted sender)
Received: from [74.125.82.176] (HELO mail-wy0-f176.google.com) (74.125.82.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 04:12:22 +0000
Received: by wyg34 with SMTP id 34so383107wyg.35
        for <java-user@lucene.apache.org>; Sun, 10 Jul 2011 21:12:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:sender:from:date:x-google-sender-auth:message-id
         :subject:to:content-type;
        bh=hyE0yuVd90TlrHSHvfYXfvhfOFYe9f1gSG3/GF28J08=;
        b=BJzHlo5MlqzIMF2bSdkEoZbQJVNw5c1oteUOFgHF4zlSS5narTA3VNOhoIvsAfsALy
         DlPd4U9oV20TexYz3u4VDJUHolbNLXhiddE/mtt559n6622tcgBbEzc2i2xoWIRpH13h
         zJiCE+Hw96EJo9y3U6Yx0x950RPp7/SQ6B1Ug=
Received: by 10.216.60.203 with SMTP id u53mr2581212wec.96.1310357522115; Sun,
 10 Jul 2011 21:12:02 -0700 (PDT)
MIME-Version: 1.0
Sender: settinghead@gmail.com
Received: by 10.216.7.138 with HTTP; Sun, 10 Jul 2011 21:11:42 -0700 (PDT)
From: Xiyang Chen <xiyang.g.chen@gmail.com>
Date: Mon, 11 Jul 2011 00:11:42 -0400
X-Google-Sender-Auth: aWIpt3swjh6rBROkq8H2w0W0yrE
Message-ID: <CADVmVNAz6+fP+ZTjka5CMu5p3idntS8JSSrDH1Hew5kJeJRvVQ@mail.gmail.com>
Subject: Index a manually constructed term vector as a Lucene document
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0ce0f792a26be104a7c362e3
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0ce0f792a26be104a7c362e3
Content-Type: text/plain; charset=ISO-8859-1

Hi,

I have some term vectors each with a number of (term, score) pairs. These
vectors were derived from text documents which are no longer obtainable. I
want to be able to add these vectors as individual documents to Lucene
index.

I understand this can be accomplished by writing my own analyzer class, but
just want to make sure if there is already an implementation or if there is
a better approach to this before I dive into the coding. Could someone shed
some light on this? Thanks!

Xiyang

--000e0ce0f792a26be104a7c362e3--

From java-user-return-50303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 11 15:20:18 2011
Return-Path: <java-user-return-50303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A23564FF5
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 11 Jul 2011 15:20:18 +0000 (UTC)
Received: (qmail 12985 invoked by uid 500); 11 Jul 2011 15:20:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12910 invoked by uid 500); 11 Jul 2011 15:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12902 invoked by uid 99); 11 Jul 2011 15:20:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 15:20:15 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 15:20:09 +0000
Received: by bwb5 with SMTP id 5so3534200bwb.35
        for <java-user@lucene.apache.org>; Mon, 11 Jul 2011 08:19:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=4LYzmmDkkLEOkJIPKmxkYU5DwM5Zy4H7QjJh+D/Xu6Y=;
        b=XhJJgyqhRgGPOYI//NSLmdE0mB5AwW1CBAsGDPKU5MiHBiV68ALxs3mDvdtqlGDBO1
         IHAkYskF8O0B/YDJsoAMkeUeCYrFGegTvtJUnZI2nKNrKFThCB2aAxUVE77VkiRPbFdX
         6h6u2GAkObo/N/GQilhp0Gd78ihQRCcZMdCd0=
Received: by 10.204.15.78 with SMTP id j14mr525120bka.371.1310397588183; Mon,
 11 Jul 2011 08:19:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.103.207 with HTTP; Mon, 11 Jul 2011 08:19:18 -0700 (PDT)
From: jm <jmuguruza@gmail.com>
Date: Mon, 11 Jul 2011 17:19:18 +0200
Message-ID: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>
Subject: analizer not doing the same thing at index and query time?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00032555a33ec21b1204a7ccb60f

--00032555a33ec21b1204a7ccb60f
Content-Type: text/plain; charset=ISO-8859-1

*Hi,*
*
*
*My env is jdk1.6 and lucene3.3.*
*
*
*At index time I have this:*
*
*
*
        Directory directory = FSDirectory.open(new
File("d:\\temp\\lucene.index"));
        IndexWriter writer = new IndexWriter(directory, myAnalizer,
IndexWriter.MaxFieldLength.UNLIMITED);
        Document doc = new Document();
        doc.add((Fieldable) new Field("bbbb", "bloom's bird", Field.Store.NO,
Field.Index.ANALYZED));
         writer.addDocument(doc);
        // add another doc
**
        writer.close(); // 3
*
*

*
*
And I know only 'bloom' and 'bird' are indexed (I verify with luke). My
analyzer removes all non-alphanumeric chars.
*
*

*
*
At query time I do this:
*
*

*
*
        QueryParser
**
qp
**
= new QueryParser(LUCENEVERSIONCOMPAT, FBODY,
**
myAnalizer
**
);
*
*
        printHitCountQP(directory, qp, "bbbb:(*bloom's*)");
        printHitCountQP(directory, qp, "bbbb:(*bloom)");
        printHitCountQP(directory, qp, "bbbb:(*bloom AND b*)");

    protected static void printHitCountQP(Directory directory, QueryParser
qp, String searchString) throws IOException, ParseException {
        IndexSearcher searcher = new IndexSearcher(directory, true); //5
        Query query = qp.parse(searchString);
        int hitCount = searcher.search(query, 1).totalHits;
        searcher.close();
        System.out.println(searchString + " got " + hitCount + " Query is: "
+ query.toString());
    }

And I get this:

bbbb:(*bloom's*) got 0 Query is: bbbb:*bloom's*
bbbb:(*bloom) got 2 Query is: bbbb:*bloom
bbbb:(*bloom AND b*) got 1 Query is: +bbbb:*bloom +bbbb:b*

Queries 2 and 3 are ok, but I don't understand the first case, shouldn't
have it removed the ' as I am using the same analyzer than I did at index
time??

thanks
*

--00032555a33ec21b1204a7ccb60f--

From java-user-return-50304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 11 22:04:21 2011
Return-Path: <java-user-return-50304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 77DB34C8A
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 11 Jul 2011 22:04:21 +0000 (UTC)
Received: (qmail 27691 invoked by uid 500); 11 Jul 2011 22:04:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27456 invoked by uid 500); 11 Jul 2011 22:04:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27443 invoked by uid 99); 11 Jul 2011 22:04:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 22:04:18 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2011 22:04:13 +0000
Received: by vws7 with SMTP id 7so4832186vws.35
        for <java-user@lucene.apache.org>; Mon, 11 Jul 2011 15:03:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.52.178.99 with SMTP id cx3mr5711947vdc.191.1310421832271; Mon,
 11 Jul 2011 15:03:52 -0700 (PDT)
Received: by 10.220.176.69 with HTTP; Mon, 11 Jul 2011 15:03:52 -0700 (PDT)
In-Reply-To: <CANL2-4N+MvckkLnc_qdhp3tQVLW9yRqm1McLT3SaqnX+z7EqkQ@mail.gmail.com>
References: <CAHKrUQn_tBDKerd+N3UxF9ZxzC-fVdMuyaWSckQEBqqmrTneQw@mail.gmail.com>
	<CANL2-4N+MvckkLnc_qdhp3tQVLW9yRqm1McLT3SaqnX+z7EqkQ@mail.gmail.com>
Date: Mon, 11 Jul 2011 18:03:52 -0400
Message-ID: <CAHKrUQm5pjRyTqX50CX8741s3JXwuWaL+O2rjjRiyDi1BdDEbQ@mail.gmail.com>
Subject: Re: Lucene Architecture Site (Prototype)
From: Abhishek Rakshit <abhishek@architexa.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071cd10d1871c04a7d25b29

--20cf3071cd10d1871c04a7d25b29
Content-Type: text/plain; charset=ISO-8859-1

Hey Glen,

Thanks for notifying. I am not sure why the * came. Posting the links again.
Current Site:
http://www.codemaps.org/s/Lucene_Core<http://www.codemaps.org/s/Lucene_Core*>

Prototype:
http://www.architexa.com/codemapsDev/lucene/<http://www.architexa.com/codemapsDev/lucene/*>
http://www.architexa.com/codemapsDev/lucene/analyzer.htm<http://www.architexa.com/codemapsDev/lucene/analyzer.htm*>

On Thu, Jul 7, 2011 at 2:26 PM, Glen Newton <glen.newton@gmail.com> wrote:

> gmail interprets the closing asterisk as part of the URL, for all
> three URLs --> 404s
> You might want to add a space before the '*'...
>
> -glen
>
> On Thu, Jul 7, 2011 at 2:17 PM, Abhishek Rakshit <abhishek@architexa.com>
> wrote:
> > Hey folks,
> >
> > We received great feedback on the Lucene Architecture site that we have
> been
> > building. Thanks for the all the awesome response.
> >
> > One of the larger pieces of feedback was on making the architectural
> > information aligned around concepts. We have created a prototype of the
> site
> > based on this and other feedback. It will be great to hear your thoughts.
> >
> > Current Site:
> > *http://www.codemaps.org/s/Lucene_Core*
> >
> > Prototype:
> > *http://www.architexa.com/codemapsDev/lucene/*
> > *http://www.architexa.com/codemapsDev/lucene/analyzer.htm*
> >
> > What do you guys think? I am really looking forward to hearing what parts
> of
> > the current site and the prototype you like.
> >
> > We want to keep refining this site till it is a great resource for the
> > Lucene community and your advice is very much appreciated.
> >
> > Cheers,
> > Abhishek Rakshit
> > --
> > Lead Engineer - User Experience,
> > Architexa - www.architexa.com
> > abhishek@architexa.com
> >
>
>
>
> --
>
> -
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--20cf3071cd10d1871c04a7d25b29--

From java-user-return-50305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 10:52:41 2011
Return-Path: <java-user-return-50305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 3CA2A690A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 10:52:41 +0000 (UTC)
Received: (qmail 98762 invoked by uid 500); 12 Jul 2011 10:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97572 invoked by uid 500); 12 Jul 2011 10:52:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97065 invoked by uid 99); 12 Jul 2011 10:52:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 10:52:29 +0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 216.139.236.26 is neither permitted nor denied by domain of dangabhay@gmail.com)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 10:52:23 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <dangabhay@gmail.com>)
	id 1QgaZO-0001kT-7B
	for java-user@lucene.apache.org; Tue, 12 Jul 2011 03:52:02 -0700
Date: Tue, 12 Jul 2011 03:52:02 -0700 (PDT)
From: dangabhay <dangabhay@gmail.com>
To: java-user@lucene.apache.org
Message-ID: <1310467922212-3162070.post@n3.nabble.com>
Subject: Memory leak with Lucene Search ?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

We are using Lucene 2.9.0 to power a search and are performing a large
number of searches. We are initializing our searcher with the code:

Directory directory = FSDirectory.open(new File(Constants.IndexLocation));
Searcher searcher = new IndexSearcher(directory,true);

Upon every search request, we are performing the following

TopDocs results = searcher.search(query,Constants.MAXHITS);

As expected, the first request takes up a large amount of time as the index
warms up. However, we have noticed that the time taken keeps decreasing
continuously as and when more results are served. My guess is that results
are being cached somewhere.

The runtime classes for directory and index reader are as follows:
org.apache.lucene.store.NIOFSDirectory
org.apache.lucene.index.ReadOnlyDirectoryReader

Eventually, JVM runs out of memory as we see from jvm stats that old
generation capacity reaches the maximum. We are using Concurrent Mark sweep
GC strategy, and it gets invoked during every search request thereafter.

I have tried looking for answers in forums, but couldn't find any. As per
many threads, there is no caching involved in Lucene by default, unless
QueryFilter and CachingWrapperFilter are used. I tried looking into Lucene
code also a bit, but couldn't find any clues.

Does anyone have any pointers as to why this could be happening ? 

Thanks!
Abhay

--
View this message in context: http://lucene.472066.n3.nabble.com/Memory-leak-with-Lucene-Search-tp3162070p3162070.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 11:02:32 2011
Return-Path: <java-user-return-50306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A31756525
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 11:02:32 +0000 (UTC)
Received: (qmail 8077 invoked by uid 500); 12 Jul 2011 11:02:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7156 invoked by uid 500); 12 Jul 2011 11:02:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7137 invoked by uid 99); 12 Jul 2011 11:02:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 11:02:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 11:02:13 +0000
Received: by iwi5 with SMTP id 5so6667994iwi.35
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 04:01:52 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=3FjgI5aP54bJo6BrSg6gocfSVhDJUmhxiK1qP5vS1a0=;
        b=mWwO6QnrIDV2a13ci17jA1YWfs2SH7ZHS6WRp3P4s/Kyr00XmviYtQAAZauqR5OG8u
         /85/hdmJMPWyVpRfKu/6FfPNUefT+Xs+rPjdI2rVHLyYjpBX7yt02CMA4eohawnpxAQ/
         7US1UpeoaxhQV1pUsPzfMcNTtfSSO75j+Hh6s=
Received: by 10.42.97.68 with SMTP id m4mr5228884icn.292.1310468512102; Tue,
 12 Jul 2011 04:01:52 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.199 with HTTP; Tue, 12 Jul 2011 04:01:32 -0700 (PDT)
In-Reply-To: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>
References: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 12 Jul 2011 12:01:32 +0100
Message-ID: <CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com>
Subject: Re: analizer not doing the same thing at index and query time?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

If I've read your example correctly it appears that at indexing your
analyzer is converting "bloom's" to "bloom" but not at search time.
Which implies that you aren't using the same analyzer in both cases.


--
Ian.


On Mon, Jul 11, 2011 at 4:19 PM, jm <jmuguruza@gmail.com> wrote:
> *Hi,*
> *
> *
> *My env is jdk1.6 and lucene3.3.*
> *
> *
> *At index time I have this:*
> *
> *
> *
> =A0 =A0 =A0 =A0Directory directory =3D FSDirectory.open(new
> File("d:\\temp\\lucene.index"));
> =A0 =A0 =A0 =A0IndexWriter writer =3D new IndexWriter(directory, myAnaliz=
er,
> IndexWriter.MaxFieldLength.UNLIMITED);
> =A0 =A0 =A0 =A0Document doc =3D new Document();
> =A0 =A0 =A0 =A0doc.add((Fieldable) new Field("bbbb", "bloom's bird", Fiel=
d.Store.NO,
> Field.Index.ANALYZED));
> =A0 =A0 =A0 =A0 writer.addDocument(doc);
> =A0 =A0 =A0 =A0// add another doc
> **
> =A0 =A0 =A0 =A0writer.close(); // 3
> *
> *
>
> *
> *
> And I know only 'bloom' and 'bird' are indexed (I verify with luke). My
> analyzer removes all non-alphanumeric chars.
> *
> *
>
> *
> *
> At query time I do this:
> *
> *
>
> *
> *
> =A0 =A0 =A0 =A0QueryParser
> **
> qp
> **
> =3D new QueryParser(LUCENEVERSIONCOMPAT, FBODY,
> **
> myAnalizer
> **
> );
> *
> *
> =A0 =A0 =A0 =A0printHitCountQP(directory, qp, "bbbb:(*bloom's*)");
> =A0 =A0 =A0 =A0printHitCountQP(directory, qp, "bbbb:(*bloom)");
> =A0 =A0 =A0 =A0printHitCountQP(directory, qp, "bbbb:(*bloom AND b*)");
>
> =A0 =A0protected static void printHitCountQP(Directory directory, QueryPa=
rser
> qp, String searchString) throws IOException, ParseException {
> =A0 =A0 =A0 =A0IndexSearcher searcher =3D new IndexSearcher(directory, tr=
ue); //5
> =A0 =A0 =A0 =A0Query query =3D qp.parse(searchString);
> =A0 =A0 =A0 =A0int hitCount =3D searcher.search(query, 1).totalHits;
> =A0 =A0 =A0 =A0searcher.close();
> =A0 =A0 =A0 =A0System.out.println(searchString + " got " + hitCount + " Q=
uery is: "
> + query.toString());
> =A0 =A0}
>
> And I get this:
>
> bbbb:(*bloom's*) got 0 Query is: bbbb:*bloom's*
> bbbb:(*bloom) got 2 Query is: bbbb:*bloom
> bbbb:(*bloom AND b*) got 1 Query is: +bbbb:*bloom +bbbb:b*
>
> Queries 2 and 3 are ok, but I don't understand the first case, shouldn't
> have it removed the ' as I am using the same analyzer than I did at index
> time??
>
> thanks
> *
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 11:25:03 2011
Return-Path: <java-user-return-50307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 811E36BD2
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 11:25:03 +0000 (UTC)
Received: (qmail 38115 invoked by uid 500); 12 Jul 2011 11:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37791 invoked by uid 500); 12 Jul 2011 11:24:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37783 invoked by uid 99); 12 Jul 2011 11:24:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 11:24:56 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 11:24:49 +0000
Received: by iwi5 with SMTP id 5so6688937iwi.35
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 04:24:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=RYJpJ6bKnkz7xEy2srisuFEB+Gle7EKmAMzYr72ntwg=;
        b=E7/rwiidfU7eunY1/nijtN0m9IdyZH+CzbMSYcFRoF00dC5Gj9z26T7f/ZbUEl5St0
         PPjYXrFm95rnFGaRAHaV7YGqu6FphTGMOgPlOkUBDPq+ujYjwwDXvhbf9VzDYAFijPQJ
         ijK2peJ/OnCqFKiMkmas5nofERqcCSihsbxD8=
Received: by 10.42.163.10 with SMTP id a10mr7217577icy.493.1310469868194; Tue,
 12 Jul 2011 04:24:28 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.199 with HTTP; Tue, 12 Jul 2011 04:24:08 -0700 (PDT)
In-Reply-To: <1310467922212-3162070.post@n3.nabble.com>
References: <1310467922212-3162070.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Tue, 12 Jul 2011 12:24:08 +0100
Message-ID: <CAEY5pxWTk1trkJswKMu+sZn4aFYuzo_JQ1jFTPkYt2WFrO9y-g@mail.gmail.com>
Subject: Re: Memory leak with Lucene Search ?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene does not cache results.  Operating systems do cache things and
on unix anyway (no idea about windows) some speedups over time can
reasonably be attributed to disk caching by the OS.

Have you profiled your app to find out exactly what is using the
memory? Do you just use the one searcher or are you opening new ones
from time to time?  If the latter, are you closing the old ones?


--
Ian.


On Tue, Jul 12, 2011 at 11:52 AM, dangabhay <dangabhay@gmail.com> wrote:
> Hi all,
>
> We are using Lucene 2.9.0 to power a search and are performing a large
> number of searches. We are initializing our searcher with the code:
>
> Directory directory = FSDirectory.open(new File(Constants.IndexLocation));
> Searcher searcher = new IndexSearcher(directory,true);
>
> Upon every search request, we are performing the following
>
> TopDocs results = searcher.search(query,Constants.MAXHITS);
>
> As expected, the first request takes up a large amount of time as the index
> warms up. However, we have noticed that the time taken keeps decreasing
> continuously as and when more results are served. My guess is that results
> are being cached somewhere.
>
> The runtime classes for directory and index reader are as follows:
> org.apache.lucene.store.NIOFSDirectory
> org.apache.lucene.index.ReadOnlyDirectoryReader
>
> Eventually, JVM runs out of memory as we see from jvm stats that old
> generation capacity reaches the maximum. We are using Concurrent Mark sweep
> GC strategy, and it gets invoked during every search request thereafter.
>
> I have tried looking for answers in forums, but couldn't find any. As per
> many threads, there is no caching involved in Lucene by default, unless
> QueryFilter and CachingWrapperFilter are used. I tried looking into Lucene
> code also a bit, but couldn't find any clues.
>
> Does anyone have any pointers as to why this could be happening ?
>
> Thanks!
> Abhay
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Memory-leak-with-Lucene-Search-tp3162070p3162070.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 11:32:06 2011
Return-Path: <java-user-return-50308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8F651664F
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 11:32:06 +0000 (UTC)
Received: (qmail 45223 invoked by uid 500); 12 Jul 2011 11:32:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44499 invoked by uid 500); 12 Jul 2011 11:31:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44484 invoked by uid 99); 12 Jul 2011 11:31:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 11:31:58 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 11:31:52 +0000
Received: by bwb5 with SMTP id 5so4635314bwb.35
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 04:31:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=DJ/8dZiJoDKTLqsDR/QOoAvWyHyv6r6AAsZaMb2sfeo=;
        b=OkQpBMp4nZ0uXhFsvhieZVArckVoQempp7lSqIhJfL3Tyy4BLMAcgmKuBlR9oltjIa
         0Q7oEVPtxWaU+c83JW5+JL9CQ6UA7eOCny2HlydC2ikSszscyHQxuI1QvjJPBds1elhF
         eV+S1k3oYxFpKV5Y0avIgb83zODPbZJQo+Osw=
Received: by 10.204.140.18 with SMTP id g18mr3054327bku.59.1310470290213; Tue,
 12 Jul 2011 04:31:30 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.103.207 with HTTP; Tue, 12 Jul 2011 04:31:00 -0700 (PDT)
In-Reply-To: <CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com>
References: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>
 <CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com>
From: jm <jmuguruza@gmail.com>
Date: Tue, 12 Jul 2011 13:31:00 +0200
Message-ID: <CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com>
Subject: Re: analizer not doing the same thing at index and query time?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015174c3b0e230c3c04a7dda4d4

--0015174c3b0e230c3c04a7dda4d4
Content-Type: text/plain; charset=ISO-8859-1

*But I think I am! I build the QueryParser with the same analyzer I used at
index time...
*
*
*
*Anyway, I'll try to build a self contained example independent of my app
code.
*

On Tue, Jul 12, 2011 at 1:01 PM, Ian Lea <ian.lea@gmail.com> wrote:

> If I've read your example correctly it appears that at indexing your
> analyzer is converting "bloom's" to "bloom" but not at search time.
> Which implies that you aren't using the same analyzer in both cases.
>
>
> --
> Ian.
>
>
> On Mon, Jul 11, 2011 at 4:19 PM, jm <jmuguruza@gmail.com> wrote:
> > *Hi,*
> > *
> > *
> > *My env is jdk1.6 and lucene3.3.*
> > *
> > *
> > *At index time I have this:*
> > *
> > *
> > *
> >        Directory directory = FSDirectory.open(new
> > File("d:\\temp\\lucene.index"));
> >        IndexWriter writer = new IndexWriter(directory, myAnalizer,
> > IndexWriter.MaxFieldLength.UNLIMITED);
> >        Document doc = new Document();
> >        doc.add((Fieldable) new Field("bbbb", "bloom's bird",
> Field.Store.NO,
> > Field.Index.ANALYZED));
> >         writer.addDocument(doc);
> >        // add another doc
> > **
> >        writer.close(); // 3
> > *
> > *
> >
> > *
> > *
> > And I know only 'bloom' and 'bird' are indexed (I verify with luke). My
> > analyzer removes all non-alphanumeric chars.
> > *
> > *
> >
> > *
> > *
> > At query time I do this:
> > *
> > *
> >
> > *
> > *
> >        QueryParser
> > **
> > qp
> > **
> > = new QueryParser(LUCENEVERSIONCOMPAT, FBODY,
> > **
> > myAnalizer
> > **
> > );
> > *
> > *
> >        printHitCountQP(directory, qp, "bbbb:(*bloom's*)");
> >        printHitCountQP(directory, qp, "bbbb:(*bloom)");
> >        printHitCountQP(directory, qp, "bbbb:(*bloom AND b*)");
> >
> >    protected static void printHitCountQP(Directory directory, QueryParser
> > qp, String searchString) throws IOException, ParseException {
> >        IndexSearcher searcher = new IndexSearcher(directory, true); //5
> >        Query query = qp.parse(searchString);
> >        int hitCount = searcher.search(query, 1).totalHits;
> >        searcher.close();
> >        System.out.println(searchString + " got " + hitCount + " Query is:
> "
> > + query.toString());
> >    }
> >
> > And I get this:
> >
> > bbbb:(*bloom's*) got 0 Query is: bbbb:*bloom's*
> > bbbb:(*bloom) got 2 Query is: bbbb:*bloom
> > bbbb:(*bloom AND b*) got 1 Query is: +bbbb:*bloom +bbbb:b*
> >
> > Queries 2 and 3 are ok, but I don't understand the first case, shouldn't
> > have it removed the ' as I am using the same analyzer than I did at index
> > time??
> >
> > thanks
> > *
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--0015174c3b0e230c3c04a7dda4d4--

From java-user-return-50309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 12:53:15 2011
Return-Path: <java-user-return-50309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 97328637B
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 12:53:15 +0000 (UTC)
Received: (qmail 75781 invoked by uid 500); 12 Jul 2011 12:53:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75655 invoked by uid 500); 12 Jul 2011 12:53:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75642 invoked by uid 99); 12 Jul 2011 12:53:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 12:53:12 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jmuguruza@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 12:53:06 +0000
Received: by bwb5 with SMTP id 5so4717924bwb.35
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 05:52:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=N0P0Qg0gO49j3z0k7OLRKVHc1PVq+vouLlVuXKONgWY=;
        b=TKWaAezY6m4NsVXuPd2HRaL/Lj/wKfqnD5SJ22WmRgx49keXh+UCC3VwJIXiZvLerf
         vR6SyUGV62p0bS8qj5lq5LQnK813fPUHXBgOmyL00xvHuGl8OCMPBhHIgcL+oD3B+nMK
         vwdhkiX0Tp2feWY0YfSs6TUaZ0gjudAAiFTNE=
Received: by 10.204.103.2 with SMTP id i2mr3069370bko.7.1310475165147; Tue, 12
 Jul 2011 05:52:45 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.103.207 with HTTP; Tue, 12 Jul 2011 05:52:15 -0700 (PDT)
In-Reply-To: <CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com>
References: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>
 <CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com> <CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com>
From: jm <jmuguruza@gmail.com>
Date: Tue, 12 Jul 2011 14:52:15 +0200
Message-ID: <CADg-VB0ZfXtJ2sbO3EmifXvMsQPeMsDGiG-c0W-TdcropQSbFg@mail.gmail.com>
Subject: Re: analizer not doing the same thing at index and query time?
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016368e2b9fb4a1fb04a7dec639

--0016368e2b9fb4a1fb04a7dec639
Content-Type: text/plain; charset=ISO-8859-1

*Here is a self contained code:
*
*
*
*
I verified with luke no 's' is indexed in the index. The output I get is:
testChars
bbbb:(bloom's*) got 0 Query is: bbbb:bloom's*
bbbb:(bloom) got 1 Query is: bbbb:bloom
bbbb:(bloom AND b*) got 1 Query is: +bbbb:bloom +bbbb:b*

So what I don't understand why is the ' in the first query not being
removed.
thanks


public class AnalyzerTest {
    public static void main(String[] args) throws IOException,
ParseException {
        System.out.println("testChars ");
        Analyzer analyzer = getAnalyzer();

        //test search
        //        Directory directory = new RAMDirectory();
        Directory directory = FSDirectory.open(new
File("d:\\temp\\lucene.index"));
        IndexWriter writer = new IndexWriter(directory, analyzer,
IndexWriter.MaxFieldLength.UNLIMITED); //2
        Document doc = new Document(); // 3
        String text = "bloom's bird";
        doc.add((Fieldable) new Field("bbbb", text, Field.Store.NO,
Field.Index.ANALYZED)); // 3
        writer.addDocument(doc); // 3
        doc = new Document();
        doc.add((Fieldable) new Field("bbbb", "ungry abloom card",
Field.Store.NO, Field.Index.ANALYZED)); // 3
        writer.addDocument(doc); // 3
        writer.close(); // 3
        //proximity
        QueryParser qp = new QueryParser(Version.LUCENE_24, "bbbb",
analyzer);
        printHitCountQP(directory, qp, "bbbb:(bloom's*)");
        printHitCountQP(directory, qp, "bbbb:(bloom)");
        printHitCountQP(directory, qp, "bbbb:(bloom AND b*)");
    }

    private static Analyzer getAnalyzer() {
        return new MyAnalyzer();
    }

    protected static void printHitCountQP(Directory directory, QueryParser
qp, String searchString) throws IOException, ParseException {
        IndexSearcher searcher = new IndexSearcher(directory, true); //5
        Query query = qp.parse(searchString);
        int hitCount = searcher.search(query, 1).totalHits;
        searcher.close();
        System.out.println(searchString + " got " + hitCount + " Query is: "
+ query.toString());
    }
}

class MyAnalyzer extends Analyzer {

    private static final String[] STOPS = { "i", "s" };
    private final Set<?> stopWords;
    private final boolean enablePositionIncrements;
    private int maxWordLength = 2000;
    private int minWordLength = 2;

    public Set getStopWords() {
        return stopWords;
    }

    public TokenStream tokenStream(String fieldName, Reader reader) {
        TokenStream result = new MyLowerCaseLetterNumberTokenizer(reader);
        result = new LengthFilter(result, minWordLength, maxWordLength);
        result = new StopFilter(enablePositionIncrements, result, stopWords,
true);
        return result;
    }

    public MyAnalyzer() {
        this.stopWords = StopFilter.makeStopSet(STOPS);
        enablePositionIncrements =
StopFilter.getEnablePositionIncrementsVersionDefault(Version.LUCENE_24);
    }

    private class SavedStreams {
        Tokenizer source;
        TokenStream result;
    };

    @Override
    public TokenStream reusableTokenStream(String fieldName, Reader reader)
throws IOException {
        SavedStreams streams = (SavedStreams) getPreviousTokenStream();
        if (streams == null) {
            streams = new SavedStreams();

            streams.source = new MyLowerCaseLetterNumberTokenizer(reader);
            streams.result = new LengthFilter(streams.source, minWordLength,
maxWordLength);
            streams.result = new StopFilter(enablePositionIncrements,
streams.result, stopWords, true);
            setPreviousTokenStream(streams);
        } else
            streams.source.reset(reader);
        return streams.result;
    }
}

class MyLowerCaseLetterNumberTokenizer extends LetterTokenizer {

    public MyLowerCaseLetterNumberTokenizer(Reader in) {
        super(in);
    }

    public MyLowerCaseLetterNumberTokenizer(AttributeSource source, Reader
in) {
        super(source, in);
    }

    public MyLowerCaseLetterNumberTokenizer(AttributeFactory factory, Reader
in) {
        super(factory, in);
    }

    protected boolean isTokenChar(char c) {
        return Character.isLetterOrDigit(c);
    }

    protected char normalize(char c) {
        return Character.toLowerCase(c);
    }
}

*

--0016368e2b9fb4a1fb04a7dec639--

From java-user-return-50310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 12:59:17 2011
Return-Path: <java-user-return-50310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ECD2B64C7
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 12:59:17 +0000 (UTC)
Received: (qmail 86231 invoked by uid 500); 12 Jul 2011 12:59:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86179 invoked by uid 500); 12 Jul 2011 12:59:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86171 invoked by uid 99); 12 Jul 2011 12:59:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 12:59:14 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 12:59:06 +0000
Received: from VEGA (gate1.marum.de [134.102.237.1])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 97B1C14AA38B
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 12:58:42 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com> <CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com> <CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com> <CADg-VB0ZfXtJ2sbO3EmifXvMsQPeMsDGiG-c0W-TdcropQSbFg@mail.gmail.com>
In-Reply-To: <CADg-VB0ZfXtJ2sbO3EmifXvMsQPeMsDGiG-c0W-TdcropQSbFg@mail.gmail.com>
Subject: RE: analizer not doing the same thing at index and query time?
Date: Tue, 12 Jul 2011 14:58:44 +0200
Message-ID: <003b01cc4093$709b7c30$51d27490$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQJYt8dkVGuMnzJ442F7hIo50oNg5wH1oHJpAcWeyqUA/rgTQZOp51Gw
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Wildcard queries don't use the analyzer, as the analyzer may also remove the
"*". To work around this, there is an AnalyzingQueryParser in contrib, but
be aware, that it may not always work as expected.

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: jm [mailto:jmuguruza@gmail.com]
> Sent: Tuesday, July 12, 2011 2:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: analizer not doing the same thing at index and query time?
> 
> *Here is a self contained code:
> *
> *
> *
> *
> I verified with luke no 's' is indexed in the index. The output I get is:
> testChars
> bbbb:(bloom's*) got 0 Query is: bbbb:bloom's*
> bbbb:(bloom) got 1 Query is: bbbb:bloom
> bbbb:(bloom AND b*) got 1 Query is: +bbbb:bloom +bbbb:b*
> 
> So what I don't understand why is the ' in the first query not being
removed.
> thanks
> 
> 
> public class AnalyzerTest {
>     public static void main(String[] args) throws IOException,
ParseException {
>         System.out.println("testChars ");
>         Analyzer analyzer = getAnalyzer();
> 
>         //test search
>         //        Directory directory = new RAMDirectory();
>         Directory directory = FSDirectory.open(new
> File("d:\\temp\\lucene.index"));
>         IndexWriter writer = new IndexWriter(directory, analyzer,
> IndexWriter.MaxFieldLength.UNLIMITED); //2
>         Document doc = new Document(); // 3
>         String text = "bloom's bird";
>         doc.add((Fieldable) new Field("bbbb", text, Field.Store.NO,
> Field.Index.ANALYZED)); // 3
>         writer.addDocument(doc); // 3
>         doc = new Document();
>         doc.add((Fieldable) new Field("bbbb", "ungry abloom card",
> Field.Store.NO, Field.Index.ANALYZED)); // 3
>         writer.addDocument(doc); // 3
>         writer.close(); // 3
>         //proximity
>         QueryParser qp = new QueryParser(Version.LUCENE_24, "bbbb",
> analyzer);
>         printHitCountQP(directory, qp, "bbbb:(bloom's*)");
>         printHitCountQP(directory, qp, "bbbb:(bloom)");
>         printHitCountQP(directory, qp, "bbbb:(bloom AND b*)");
>     }
> 
>     private static Analyzer getAnalyzer() {
>         return new MyAnalyzer();
>     }
> 
>     protected static void printHitCountQP(Directory directory, QueryParser
qp,
> String searchString) throws IOException, ParseException {
>         IndexSearcher searcher = new IndexSearcher(directory, true); //5
>         Query query = qp.parse(searchString);
>         int hitCount = searcher.search(query, 1).totalHits;
>         searcher.close();
>         System.out.println(searchString + " got " + hitCount + " Query is:
"
> + query.toString());
>     }
> }
> 
> class MyAnalyzer extends Analyzer {
> 
>     private static final String[] STOPS = { "i", "s" };
>     private final Set<?> stopWords;
>     private final boolean enablePositionIncrements;
>     private int maxWordLength = 2000;
>     private int minWordLength = 2;
> 
>     public Set getStopWords() {
>         return stopWords;
>     }
> 
>     public TokenStream tokenStream(String fieldName, Reader reader) {
>         TokenStream result = new
> MyLowerCaseLetterNumberTokenizer(reader);
>         result = new LengthFilter(result, minWordLength, maxWordLength);
>         result = new StopFilter(enablePositionIncrements, result,
stopWords,
> true);
>         return result;
>     }
> 
>     public MyAnalyzer() {
>         this.stopWords = StopFilter.makeStopSet(STOPS);
>         enablePositionIncrements =
> StopFilter.getEnablePositionIncrementsVersionDefault(Version.LUCENE_24);
>     }
> 
>     private class SavedStreams {
>         Tokenizer source;
>         TokenStream result;
>     };
> 
>     @Override
>     public TokenStream reusableTokenStream(String fieldName, Reader
> reader) throws IOException {
>         SavedStreams streams = (SavedStreams) getPreviousTokenStream();
>         if (streams == null) {
>             streams = new SavedStreams();
> 
>             streams.source = new MyLowerCaseLetterNumberTokenizer(reader);
>             streams.result = new LengthFilter(streams.source,
minWordLength,
> maxWordLength);
>             streams.result = new StopFilter(enablePositionIncrements,
> streams.result, stopWords, true);
>             setPreviousTokenStream(streams);
>         } else
>             streams.source.reset(reader);
>         return streams.result;
>     }
> }
> 
> class MyLowerCaseLetterNumberTokenizer extends LetterTokenizer {
> 
>     public MyLowerCaseLetterNumberTokenizer(Reader in) {
>         super(in);
>     }
> 
>     public MyLowerCaseLetterNumberTokenizer(AttributeSource source,
> Reader
> in) {
>         super(source, in);
>     }
> 
>     public MyLowerCaseLetterNumberTokenizer(AttributeFactory factory,
> Reader
> in) {
>         super(factory, in);
>     }
> 
>     protected boolean isTokenChar(char c) {
>         return Character.isLetterOrDigit(c);
>     }
> 
>     protected char normalize(char c) {
>         return Character.toLowerCase(c);
>     }
> }
> 
> *


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 14:43:16 2011
Return-Path: <java-user-return-50311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 354F863F6
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 14:43:16 +0000 (UTC)
Received: (qmail 72126 invoked by uid 500); 12 Jul 2011 14:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72073 invoked by uid 500); 12 Jul 2011 14:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72065 invoked by uid 99); 12 Jul 2011 14:43:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 14:43:12 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.23 as permitted sender)
Received: from [213.165.64.23] (HELO mailout-de.gmx.net) (213.165.64.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Jul 2011 14:43:05 +0000
Received: (qmail 26300 invoked by uid 0); 12 Jul 2011 14:42:43 -0000
Received: from 91.14.63.161 by www005.gmx.net with HTTP;
 Tue, 12 Jul 2011 16:42:41 +0200 (CEST)
Content-Type: text/plain; charset="utf-8"
Date: Tue, 12 Jul 2011 16:42:41 +0200
From: =?iso-8859-1?Q?=22Ren=E9_Hackl=22?= <rene.a.hackl@gmx.de>
Message-ID: <20110712144241.207420@gmx.net>
MIME-Version: 1.0
Subject: AutomatonQuery Caching
To: java-user@lucene.apache.org
X-Authenticated: #24166002
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX18CMtwIdGkCzrJvQBtitcvurdErjkPDORH42B3Sqv
 cQ9x0AzShyiZFr8ha9CklsLySw8KR2M5MKQg== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: Lih9Km8wa0A7JxPRBTAzpsY/Njh6dA5f

Hi, 

I am running some AutomatonQueries and see caching effects happening, that I can't seem to get rid of. E.g. an AutomatonQuery takes

Run 1: 3000 ms
Run 2 and all subsequent runs: 250 ms 

The IndexSearcher is closed after every full query circle (and opened via open(Directory), so the IndexReader should be closed, too, right?). I have changed indexes, restarted Eclipse, and run GC to no effect. I am thinking FieldCache.purge might help, but how do i get there?

Also, how to reasonably assess execution times for AQs? The very first runs can last pretty long, yet cached queries are fast. Overlap seems to benefit queries down the line, e.g. "*ration" is much faster if sometime before "*ation" has been run. Would it be feasible to warm an index with the most frequent ngrams for AutomatonQueries? 

Any pointers?

Thanks,
Rene
-- 
NEU: FreePhone - kostenlos mobil telefonieren!			
Jetzt informieren: http://www.gmx.net/de/go/freephone

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 15:00:06 2011
Return-Path: <java-user-return-50312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D8A946F91
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 15:00:06 +0000 (UTC)
Received: (qmail 13301 invoked by uid 500); 12 Jul 2011 15:00:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13219 invoked by uid 500); 12 Jul 2011 15:00:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13205 invoked by uid 99); 12 Jul 2011 15:00:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 15:00:02 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [200.14.55.1] (HELO mail.uho.edu.cu) (200.14.55.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 14:59:55 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 960F113AD2B
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 10:57:49 -0400 (CDT)
Received: from mail.uho.edu.cu ([127.0.0.1])
	by localhost (ns1.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Mwip0g6brOez for <java-user@lucene.apache.org>;
	Tue, 12 Jul 2011 10:57:49 -0400 (CDT)
Received: from facinf.uho.edu.cu (correoweb.uho.edu.cu [10.26.2.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 8369A13AD29
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 10:57:49 -0400 (CDT)
Received: from localhost (localhost [127.0.0.1])
	by facinf.uho.edu.cu (Postfix) with ESMTP id C42817D6ED
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 10:55:10 -0400 (CDT)
Received: from facinf.uho.edu.cu ([127.0.0.1])
	by localhost (facinf.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 460ppFDqGikz for <java-user@lucene.apache.org>;
	Tue, 12 Jul 2011 10:55:10 -0400 (CDT)
Received: from correoweb.uho.edu.cu (facinf.uho.edu.cu [10.26.2.1])
	by facinf.uho.edu.cu (Postfix) with ESMTPA id 9BFB77D6E3
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 10:55:10 -0400 (CDT)
Received: from 10.26.0.2
        (SquirrelMail authenticated user zmachado)
        by correoweb.uho.edu.cu with HTTP;
        Tue, 12 Jul 2011 10:55:10 -0400 (CDT)
Message-ID: <c0c22030e20d9e8957e2f0519295d76c.squirrel@correoweb.uho.edu.cu>
In-Reply-To: 
     <CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com>
References:
    <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>
    <CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com>
    <CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com>
Date: Tue, 12 Jul 2011 10:55:10 -0400 (CDT)
Subject: I have an error and need help.. please
From: zmachado@facinf.uho.edu.cu
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.15
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

The index looks to be fine but when I tip "http://localhost:8080/nutch/"
this come out

Estado HTTP 500 -

type Informe de Excepcin

mensaje

descripcin El servidor encontr un error interno () que hizo que no
pudiera rellenar este requerimiento.

excepcin

org.apache.jasper.JasperException: java.util.MissingResourceException:
Can't find bundle for base name org.nutch.jsp.search, locale en_US
	org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:531)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:454)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:332)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

causa raz

java.util.MissingResourceException: Can't find bundle for base name
org.nutch.jsp.search, locale en_US
	java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1539)
	java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1278)
	java.util.ResourceBundle.getBundle(ResourceBundle.java:805)
	org.apache.jsp.index_jsp._jspService(index_jsp.java:56)
	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:68)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:416)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:332)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

nota La traza completa de la causa de este error se encuentra en los
archivos de diario de Apache Tomcat/7.0.5.
Apache Tomcat/7.0.5


-----------------------------------------------------------------------
Participe en Universidad 2012, del 13 al 17 de febrero de 2012. Havana
Cuba. http://www.congresouniversidad.cu
Consulte la enciclopedia colaborativa cubana. http://www.ecured.cu


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 16:52:06 2011
Return-Path: <java-user-return-50313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 535CD61CB
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 16:52:06 +0000 (UTC)
Received: (qmail 62091 invoked by uid 500); 12 Jul 2011 16:52:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62049 invoked by uid 500); 12 Jul 2011 16:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62041 invoked by uid 99); 12 Jul 2011 16:52:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 16:52:03 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [200.14.55.1] (HELO mail.uho.edu.cu) (200.14.55.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 16:51:56 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 199AC13AD74
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 12:50:03 -0400 (CDT)
Received: from mail.uho.edu.cu ([127.0.0.1])
	by localhost (ns1.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OjmwTqLLrOcr for <java-user@lucene.apache.org>;
	Tue, 12 Jul 2011 12:50:03 -0400 (CDT)
Received: from facinf.uho.edu.cu (correoweb.uho.edu.cu [10.26.2.1])
	by mail.uho.edu.cu (Postfix) with ESMTP id 07A7A13AD4C
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 12:50:03 -0400 (CDT)
Received: from localhost (localhost [127.0.0.1])
	by facinf.uho.edu.cu (Postfix) with ESMTP id A52657D6FD
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 12:47:23 -0400 (CDT)
Received: from facinf.uho.edu.cu ([127.0.0.1])
	by localhost (facinf.uho.edu.cu [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id wrSaD+OxrtSM for <java-user@lucene.apache.org>;
	Tue, 12 Jul 2011 12:47:23 -0400 (CDT)
Received: from [10.26.0.2] (unknown [10.26.0.2])
	by facinf.uho.edu.cu (Postfix) with ESMTPA id 830107D6F9
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 12:47:23 -0400 (CDT)
Message-ID: <4E1C7AE7.9040508@facinf.uho.edu.cu>
Date: Tue, 12 Jul 2011 12:48:39 -0400
From: Marlen <zmachado@facinf.uho.edu.cu>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.11) Gecko/20101013 Lightning/1.0b2 Thunderbird/3.1.5 ThunderBrowse/3.3.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: I have an error and need help.. please
References: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>    <CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com>    <CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com> <c0c22030e20d9e8957e2f0519295d76c.squirrel@correoweb.uho.edu.cu>
In-Reply-To: <c0c22030e20d9e8957e2f0519295d76c.squirrel@correoweb.uho.edu.cu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit

I forgot to say .. Im using Nutch,,,,,
> The index looks to be fine but when I tip "http://localhost:8080/nutch/"
> this come out
>
> Estado HTTP 500 -
>
> type Informe de Excepcin
>
> mensaje
>
> descripcin El servidor encontr un error interno () que hizo que no
> pudiera rellenar este requerimiento.
>
> excepcin
>
> org.apache.jasper.JasperException: java.util.MissingResourceException:
> Can't find bundle for base name org.nutch.jsp.search, locale en_US
> 	org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:531)
> 	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:454)
> 	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
> 	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:332)
> 	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
>
> causa raz
>
> java.util.MissingResourceException: Can't find bundle for base name
> org.nutch.jsp.search, locale en_US
> 	java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1539)
> 	java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1278)
> 	java.util.ResourceBundle.getBundle(ResourceBundle.java:805)
> 	org.apache.jsp.index_jsp._jspService(index_jsp.java:56)
> 	org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:68)
> 	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
> 	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:416)
> 	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
> 	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:332)
> 	javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
>
> nota La traza completa de la causa de este error se encuentra en los
> archivos de diario de Apache Tomcat/7.0.5.
> Apache Tomcat/7.0.5
>
>
> -----------------------------------------------------------------------
> Participe en Universidad 2012, del 13 al 17 de febrero de 2012. Havana
> Cuba. http://www.congresouniversidad.cu
> Consulte la enciclopedia colaborativa cubana. http://www.ecured.cu
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 17:22:51 2011
Return-Path: <java-user-return-50314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D5ED36E64
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 17:22:51 +0000 (UTC)
Received: (qmail 56412 invoked by uid 500); 12 Jul 2011 17:22:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56227 invoked by uid 500); 12 Jul 2011 17:22:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56219 invoked by uid 99); 12 Jul 2011 17:22:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 17:22:48 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rcmuir@gmail.com designates 209.85.214.48 as permitted sender)
Received: from [209.85.214.48] (HELO mail-bw0-f48.google.com) (209.85.214.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 17:22:41 +0000
Received: by bwb5 with SMTP id 5so5089625bwb.35
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 10:22:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=4JQpCeUqcWaRu57lKuTfgpgkKHej1923wNLtJbcXagA=;
        b=J2zSGwc1GAdxMcvTEDNctf4v/H6gLdNOaIzNqfvNqbkGl/Asd9Gmwj2iOoZcpfRgN6
         KVh261bVgD+s0VJGTtDcCeC/wolh8ucpWEI8mZIEcXU9pRbZ3Gfay8G3ASZ+RW9RboRs
         YrztHPOZ3P11rf98CtApnQ9PtRsn8TzApobGk=
Received: by 10.204.138.205 with SMTP id b13mr97865bku.27.1310491340196; Tue,
 12 Jul 2011 10:22:20 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.66.132 with HTTP; Tue, 12 Jul 2011 10:22:00 -0700 (PDT)
In-Reply-To: <20110712144241.207420@gmx.net>
References: <20110712144241.207420@gmx.net>
From: Robert Muir <rcmuir@gmail.com>
Date: Tue, 12 Jul 2011 13:22:00 -0400
Message-ID: <CAOdYfZWNRGK89rhZeJqQN4MmczTUS36=bvYDVrK6btPv+o7RLQ@mail.gmail.com>
Subject: Re: AutomatonQuery Caching
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

On Tue, Jul 12, 2011 at 10:42 AM, "Ren=C3=A9 Hackl" <rene.a.hackl@gmx.de> w=
rote:
> Hi,
>
> I am running some AutomatonQueries and see caching effects happening, tha=
t I can't seem to get rid of. E.g. an AutomatonQuery takes
>
> Run 1: 3000 ms
> Run 2 and all subsequent runs: 250 ms
>
> The IndexSearcher is closed after every full query circle (and opened via=
 open(Directory), so the IndexReader should be closed, too, right?). I have=
 changed indexes, restarted Eclipse, and run GC to no effect. I am thinking=
 FieldCache.purge might help, but how do i get there?
>
> Also, how to reasonably assess execution times for AQs? The very first ru=
ns can last pretty long, yet cached queries are fast. Overlap seems to bene=
fit queries down the line, e.g. "*ration" is much faster if sometime before=
 "*ation" has been run. Would it be feasible to warm an index with the most=
 frequent ngrams for AutomatonQueries?
>

This is probably just your OS caching? this query has no caching.

--=20
lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 18:21:23 2011
Return-Path: <java-user-return-50315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 304EB645A
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 18:21:23 +0000 (UTC)
Received: (qmail 23340 invoked by uid 500); 12 Jul 2011 18:21:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23237 invoked by uid 500); 12 Jul 2011 18:21:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23222 invoked by uid 99); 12 Jul 2011 18:21:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 18:21:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 18:21:09 +0000
Received: by vws7 with SMTP id 7so5760191vws.35
        for <multiple recipients>; Tue, 12 Jul 2011 11:20:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=from:content-type:content-transfer-encoding:subject:date:message-id
         :to:mime-version:x-mailer;
        bh=e1pz3uc1O0MFeVnaJwVjHwhaMHhURMQjqXXjke8djQA=;
        b=prEsFAN+Vd/q37fiy4i7HPJi6yfUDUWCABVdz5NNRdRh/JwQJz9jr+LsHMGqN+/dIf
         6XKVeml4YOE0uLhXbByIJaIOMzirxeLBDJgRhu787fb7uYqXk+rJcm5gJVru5+qrU9Fp
         fwGtUnhkZHGdfCEWWZXgdwbghVIZKPDZ4jRoM=
Received: by 10.220.180.201 with SMTP id bv9mr80099vcb.117.1310494847456;
        Tue, 12 Jul 2011 11:20:47 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c78059.dyn.optonline.net [68.199.128.89])
        by mx.google.com with ESMTPS id r12sm2336976vcq.12.2011.07.12.11.20.46
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 12 Jul 2011 11:20:46 -0700 (PDT)
From: Mark Miller <markrmiller@gmail.com>
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
Subject: [Announce] Lucene-Eurocon Call for Participation Closes Friday, JULY 15
Date: Tue, 12 Jul 2011 14:20:45 -0400
Message-Id: <813B51AA-D9CF-4DB4-B59A-CE01F8213930@gmail.com>
To: solr-user@lucene.apache.org,
 java-user@lucene.apache.org
Mime-Version: 1.0 (Apple Message framework v1084)
X-Mailer: Apple Mail (2.1084)

Hey all - just a friendly FYI reminder:

CALL FOR PARTICIPATION CLOSES FRIDAY, JULY 15!
TO SUBMIT A TOPIC, GO TO: http://2011.lucene-eurocon.org/pages/cfp

Now in its second year, Apache Lucene Eurocon 2011 comes to Barcelona, =
Spain, providing an unparalleled opportunity for  European search =
application developers and technologists to connect and  network. The =
conference takes place October 19 - 20, preceded by two days of optional =
training workshops October 17 - 18.

Get Involved Today! The Call for Participation Closes This Week!  =20

Consider presenting at Apache Lucene EuroCon 2011. Submit your ideas by =
July 15. If  you have a great Solr or Lucene story to tell, the =
community wants to hear about it. Share your expertise and innovations! =
To submit a topic, go to:
http://2011.lucene-eurocon.org/pages/cfp

Sample topics of interest include:

* Lucene and Solr in the Enterprise (case studies, implementation, =
return on investment, etc.)
* =93How We Did It=94  Development Case Studies
* Relevance in Practice
* Spatial/Geo search
* Lucene and Solr in the Cloud
* Scalability and Performance Tuning
* Large Scale Search
* Real Time Search
* Data Integration/Data Management
* Tika, Nutch and Mahout
* Faceting and Categorization
* Lucene & Solr for Mobile Applications
* Multi-language Support
* Indexing and Analysis Techniques
* Advanced Topics in Lucene & Solr Development

Want to be added to the conference mailing list? Is your organization =
interested in sponsorship opportunities? Please send an email to  =
info@lucene-eurocon.org=20

Best Regards,

Suzanne Kushner
Lucid Imagination Corporate Marketing
www.lucidimagination.com

DATE: OCTOBER 17 - 20 2011

LOCATION:
Hotel Meli=E1 Barcelona
C/ Avenida Sarri=E1,
50 Barcelona - SPAIN 08029
Tel: (0034) 93 4106060

Apache Lucene EuroCon 2011 is presented by Lucid Imagination, the =
commercial entity for Apache Solr/Lucene Open Source Search; proceeds of =
the conference benefit The Apache Software Foundation.

"Lucene" and "Apache Solr" are trademarks of the Apache Software =
Foundation.





- Mark Miller
lucidimagination.com









---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 20:13:26 2011
Return-Path: <java-user-return-50316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B7DB67A4
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 20:13:26 +0000 (UTC)
Received: (qmail 30431 invoked by uid 500); 12 Jul 2011 20:13:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30231 invoked by uid 500); 12 Jul 2011 20:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30223 invoked by uid 99); 12 Jul 2011 20:13:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 20:13:22 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.23 as permitted sender)
Received: from [213.165.64.23] (HELO mailout-de.gmx.net) (213.165.64.23)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Jul 2011 20:13:16 +0000
Received: (qmail invoked by alias); 12 Jul 2011 20:12:54 -0000
Received: from p5B0E3FA1.dip.t-dialin.net (EHLO [192.168.178.25]) [91.14.63.161]
  by mail.gmx.net (mp007) with SMTP; 12 Jul 2011 22:12:54 +0200
X-Authenticated: #24166002
X-Provags-ID: V01U2FsdGVkX19glRYW3U1gUYSO+4UYiibv2AyMv/71G5eDvQCS7C
	rduVgRKsmIuZg/
Message-ID: <4E1CAAC6.80507@gmx.de>
Date: Tue, 12 Jul 2011 22:12:54 +0200
From: Rene Hackl-Sommer <rene.a.hackl@gmx.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; de; rv:1.9.2.18) Gecko/20110616 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: AutomatonQuery Caching
References: <20110712144241.207420@gmx.net> <CAOdYfZWNRGK89rhZeJqQN4MmczTUS36=bvYDVrK6btPv+o7RLQ@mail.gmail.com>
In-Reply-To: <CAOdYfZWNRGK89rhZeJqQN4MmczTUS36=bvYDVrK6btPv+o7RLQ@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Y-GMX-Trusted: 0

This sounds plausible, even if manually cleaning the Java cache has no 
effect. Probably a JDK/JRE mismatch somewhere, just have to find the spot.

Thanks,
Rene

Am 12.07.2011 19:22, schrieb Robert Muir:
> On Tue, Jul 12, 2011 at 10:42 AM, "René Hackl"<rene.a.hackl@gmx.de>  wrote:
>> Hi,
>>
>> I am running some AutomatonQueries and see caching effects happening, that I can't seem to get rid of. E.g. an AutomatonQuery takes
>>
>> Run 1: 3000 ms
>> Run 2 and all subsequent runs: 250 ms
>>
>> The IndexSearcher is closed after every full query circle (and opened via open(Directory), so the IndexReader should be closed, too, right?). I have changed indexes, restarted Eclipse, and run GC to no effect. I am thinking FieldCache.purge might help, but how do i get there?
>>
>> Also, how to reasonably assess execution times for AQs? The very first runs can last pretty long, yet cached queries are fast. Overlap seems to benefit queries down the line, e.g. "*ration" is much faster if sometime before "*ation" has been run. Would it be feasible to warm an index with the most frequent ngrams for AutomatonQueries?
>>
> This is probably just your OS caching? this query has no caching.
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 20:43:15 2011
Return-Path: <java-user-return-50317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id DA3106B95
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 20:43:15 +0000 (UTC)
Received: (qmail 80643 invoked by uid 500); 12 Jul 2011 20:43:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80586 invoked by uid 500); 12 Jul 2011 20:43:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80442 invoked by uid 99); 12 Jul 2011 20:43:12 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 20:43:12 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 20:43:05 +0000
Received: by ywn13 with SMTP id 13so2976315ywn.35
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 13:42:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=KHMB99LbejRO0jkqehfu5Ip/gf74cJiIwjjNl/GvMaY=;
        b=Zs+kMj6HRQWWXiSMvgdphVvKm0J0Xi4/KhjveA5fuHZE8iydc+qy49dB6YbHUN1xAP
         gcW1iKliIzJXAn6ILwNqDi32AYDEprXHGIhnP9yurAQUWElXL9VLXmE3nSZxvL6csePg
         Gmp07HsWo8o7YpFXuVBDjebH71DEZPkEwWz3w=
MIME-Version: 1.0
Received: by 10.236.165.40 with SMTP id d28mr540929yhl.217.1310503365017; Tue,
 12 Jul 2011 13:42:45 -0700 (PDT)
Received: by 10.147.98.16 with HTTP; Tue, 12 Jul 2011 13:42:44 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <4E1CAAC6.80507@gmx.de>
References: <20110712144241.207420@gmx.net>
	<CAOdYfZWNRGK89rhZeJqQN4MmczTUS36=bvYDVrK6btPv+o7RLQ@mail.gmail.com>
	<4E1CAAC6.80507@gmx.de>
Date: Tue, 12 Jul 2011 22:42:44 +0200
Message-ID: <CAAHmpkjjvbF8rnpkUvj7PwGj=i2QRxWohtySshMBGj3=HkoCDQ@mail.gmail.com>
Subject: Re: AutomatonQuery Caching
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Hi rene,

On Tue, Jul 12, 2011 at 10:12 PM, Rene Hackl-Sommer <rene.a.hackl@gmx.de> w=
rote:
> This sounds plausible, even if manually cleaning the Java cache has no
> effect. Probably a JDK/JRE mismatch somewhere, just have to find the spot=
.

this is very likely your OS pushing frequently use data into RAM via
FS cache. if you run on linux try to flush your caches with
echo 3 > /proc/sys/vm/drop_caches

and see if it changes anything.

simon
>
> Thanks,
> Rene
>
> Am 12.07.2011 19:22, schrieb Robert Muir:
>>
>> On Tue, Jul 12, 2011 at 10:42 AM, "Ren=C3=A9 Hackl"<rene.a.hackl@gmx.de>
>> =C2=A0wrote:
>>>
>>> Hi,
>>>
>>> I am running some AutomatonQueries and see caching effects happening,
>>> that I can't seem to get rid of. E.g. an AutomatonQuery takes
>>>
>>> Run 1: 3000 ms
>>> Run 2 and all subsequent runs: 250 ms
>>>
>>> The IndexSearcher is closed after every full query circle (and opened v=
ia
>>> open(Directory), so the IndexReader should be closed, too, right?). I h=
ave
>>> changed indexes, restarted Eclipse, and run GC to no effect. I am think=
ing
>>> FieldCache.purge might help, but how do i get there?
>>>
>>> Also, how to reasonably assess execution times for AQs? The very first
>>> runs can last pretty long, yet cached queries are fast. Overlap seems t=
o
>>> benefit queries down the line, e.g. "*ration" is much faster if sometim=
e
>>> before "*ation" has been run. Would it be feasible to warm an index wit=
h the
>>> most frequent ngrams for AutomatonQueries?
>>>
>> This is probably just your OS caching? this query has no caching.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 20:44:18 2011
Return-Path: <java-user-return-50318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id C267E6C00
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 20:44:18 +0000 (UTC)
Received: (qmail 83964 invoked by uid 500); 12 Jul 2011 20:44:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83889 invoked by uid 500); 12 Jul 2011 20:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83871 invoked by uid 99); 12 Jul 2011 20:44:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 20:44:14 +0000
X-ASF-Spam-Status: No, hits=2.1 required=5.0
	tests=FREEMAIL_FROM,FREEMAIL_REPLYTO,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 20:44:06 +0000
Received: by ywn13 with SMTP id 13so2976848ywn.35
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 13:43:45 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=j4l9HgvKQOTxRzks/xlJUqB/NyRTmkadnHKnzZ/m7Js=;
        b=uewaukbRtQqMsFAsfbJiPlm/ljSgethFSj39g3jsHewiLny0fOhqdDSFwGoPP1/X+s
         cunSYHg7TUngmikUXVUdTAtF1UcbEoP6LOTWXej0Ys40T/zhAqw1HZRrLh/oBPOIjtfP
         hJpPlPLXmuiI4KsiCbtbmI2TsthcxAJulQMjI=
MIME-Version: 1.0
Received: by 10.146.208.15 with SMTP id f15mr432194yag.5.1310503425437; Tue,
 12 Jul 2011 13:43:45 -0700 (PDT)
Received: by 10.147.98.16 with HTTP; Tue, 12 Jul 2011 13:43:45 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <4E1C7AE7.9040508@facinf.uho.edu.cu>
References: <CADg-VB2+o1vVpwTSo9MvrNWokka_0C4+3iJ2qL2WoGhYNpC7ZA@mail.gmail.com>
	<CAEY5pxVzNDW+_fNsd=XEZiCS8wvcFCxHFEDOfgZ-+einxoy3_Q@mail.gmail.com>
	<CADg-VB1F-MiZQQ4r7KCOmLPLEthifrVKBTqz=KkLAQPEDp8HSA@mail.gmail.com>
	<c0c22030e20d9e8957e2f0519295d76c.squirrel@correoweb.uho.edu.cu>
	<4E1C7AE7.9040508@facinf.uho.edu.cu>
Date: Tue, 12 Jul 2011 22:43:45 +0200
Message-ID: <CAAHmpkhRzab+tTHbTWD3ELjc5HCk2aWK+LcR1s68so5-5q4k0g@mail.gmail.com>
Subject: Re: I have an error and need help.. please
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

maybe you should try the nutch mailing list, this one is for lucene users.

-- > http://nutch.apache.org/mailing_lists.html

simon

On Tue, Jul 12, 2011 at 6:48 PM, Marlen <zmachado@facinf.uho.edu.cu> wrote:
> I forgot to say .. Im using Nutch,,,,,
>>
>> The index looks to be fine but when I tip "http://localhost:8080/nutch/"
>> this come out
>>
>> Estado HTTP 500 -
>>
>> type Informe de Excepci=C3=B3n
>>
>> mensaje
>>
>> descripci=C3=B3n El servidor encontr=C3=B3 un error interno () que hizo =
que no
>> pudiera rellenar este requerimiento.
>>
>> excepci=C3=B3n
>>
>> org.apache.jasper.JasperException: java.util.MissingResourceException:
>> Can't find bundle for base name org.nutch.jsp.search, locale en_US
>>
>> =C2=A0org.apache.jasper.servlet.JspServletWrapper.handleJspException(Jsp=
ServletWrapper.java:531)
>>
>> =C2=A0org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrap=
per.java:454)
>>
>> =C2=A0org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.jav=
a:389)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.jasper.servlet.JspServlet.service(=
JspServlet.java:332)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0javax.servlet.http.HttpServlet.service(HttpSe=
rvlet.java:722)
>>
>> causa ra=C3=ADz
>>
>> java.util.MissingResourceException: Can't find bundle for base name
>> org.nutch.jsp.search, locale en_US
>>
>> =C2=A0java.util.ResourceBundle.throwMissingResourceException(ResourceBun=
dle.java:1539)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0java.util.ResourceBundle.getBundleImpl(Resour=
ceBundle.java:1278)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0java.util.ResourceBundle.getBundle(ResourceBu=
ndle.java:805)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.jsp.index_jsp._jspService(index_js=
p.java:56)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.jasper.runtime.HttpJspBase.service=
(HttpJspBase.java:68)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0javax.servlet.http.HttpServlet.service(HttpSe=
rvlet.java:722)
>>
>> =C2=A0org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrap=
per.java:416)
>>
>> =C2=A0org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.jav=
a:389)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0org.apache.jasper.servlet.JspServlet.service(=
JspServlet.java:332)
>> =C2=A0 =C2=A0 =C2=A0 =C2=A0javax.servlet.http.HttpServlet.service(HttpSe=
rvlet.java:722)
>>
>> nota La traza completa de la causa de este error se encuentra en los
>> archivos de diario de Apache Tomcat/7.0.5.
>> Apache Tomcat/7.0.5
>>
>>
>> -----------------------------------------------------------------------
>> Participe en Universidad 2012, del 13 al 17 de febrero de 2012. Havana
>> Cuba. http://www.congresouniversidad.cu
>> Consulte la enciclopedia colaborativa cubana. http://www.ecured.cu
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Tue Jul 12 21:58:31 2011
Return-Path: <java-user-return-50319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A9A50613D
	for <apmail-lucene-java-user-archive@www.apache.org>; Tue, 12 Jul 2011 21:58:31 +0000 (UTC)
Received: (qmail 3666 invoked by uid 500); 12 Jul 2011 21:58:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3590 invoked by uid 500); 12 Jul 2011 21:58:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3581 invoked by uid 99); 12 Jul 2011 21:58:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 21:58:28 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.85.161.53] (HELO mail-fx0-f53.google.com) (209.85.161.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2011 21:58:20 +0000
Received: by fxd23 with SMTP id 23so3608780fxd.12
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2011 14:58:00 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.223.93.134 with SMTP id v6mr69169fam.115.1310507820198; Tue,
 12 Jul 2011 14:57:00 -0700 (PDT)
Received: by 10.223.28.21 with HTTP; Tue, 12 Jul 2011 14:57:00 -0700 (PDT)
Date: Tue, 12 Jul 2011 18:57:00 -0300
Message-ID: <CANJ90WdM614TYMqULDKCfPrRMoG75ypFpezKQ81wAQDShUKLXQ@mail.gmail.com>
Subject: searching/filtering by field's value length
From: Federico Schroder <fschroder@runway10.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf30433f74192a0e04a7e6617f
X-Virus-Checked: Checked by ClamAV on apache.org

--20cf30433f74192a0e04a7e6617f
Content-Type: text/plain; charset=ISO-8859-1

Hello,
I need some help doing a search.
Say I have a really simple document structure, just 1 field, labeled name.
I need to retrieve all the names whose length is more or less than a
specified value. By length I mean String.length().
A range filter seems close in concept, but I couldn't find a good example to
write my specific case.
Thanks for the help,
Federico

--20cf30433f74192a0e04a7e6617f--

From java-user-return-50320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 07:53:21 2011
Return-Path: <java-user-return-50320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B10EB4369
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 07:53:21 +0000 (UTC)
Received: (qmail 48266 invoked by uid 500); 13 Jul 2011 07:53:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48067 invoked by uid 500); 13 Jul 2011 07:53:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48052 invoked by uid 99); 13 Jul 2011 07:53:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 07:53:11 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rene.a.hackl@gmx.de designates 213.165.64.22 as permitted sender)
Received: from [213.165.64.22] (HELO mailout-de.gmx.net) (213.165.64.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2011 07:53:03 +0000
Received: (qmail 10487 invoked by uid 0); 13 Jul 2011 07:52:42 -0000
Received: from 91.14.115.238 by www007.gmx.net with HTTP;
 Wed, 13 Jul 2011 09:52:41 +0200 (CEST)
Content-Type: text/plain; charset="utf-8"
Date: Wed, 13 Jul 2011 09:52:42 +0200
From: =?iso-8859-1?Q?=22Ren=E9_Hackl=22?= <rene.a.hackl@gmx.de>
In-Reply-To: <CAAHmpkjjvbF8rnpkUvj7PwGj=i2QRxWohtySshMBGj3=HkoCDQ@mail.gmail.com>
Message-ID: <20110713075242.159210@gmx.net>
MIME-Version: 1.0
References: <20110712144241.207420@gmx.net>
	<CAOdYfZWNRGK89rhZeJqQN4MmczTUS36=bvYDVrK6btPv+o7RLQ@mail.gmail.com>
	<4E1CAAC6.80507@gmx.de>
 <CAAHmpkjjvbF8rnpkUvj7PwGj=i2QRxWohtySshMBGj3=HkoCDQ@mail.gmail.com>
Subject: Re: AutomatonQuery Caching
To: java-user@lucene.apache.org
X-Authenticated: #24166002
X-Flags: 0001
X-Mailer: WWW-Mail 6100 (Global Message Exchange)
X-Priority: 3
X-Provags-ID: V01U2FsdGVkX1+94xEP/He9X5qiz9j5Ejzz/C6STRjZWk+hVh2ni3
 dFOmiLlZ6oa87YftelZbgwObCAUIq3RmJdnA== 
Content-Transfer-Encoding: 8bit
X-GMX-UID: rz90IUMGMydhByXrGmtlRWFjaGRhZhoJ
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Simon,

Thanks for the tip! Unfortunately I am running this on win. Tried a couple of command line tools / memory clearing apps without success. Will transfer stuff to another machine and see how that pans out.

Thanks again,
Rene


-------- Original-Nachricht --------
> Datum: Tue, 12 Jul 2011 22:42:44 +0200
> Von: Simon Willnauer <simon.willnauer@googlemail.com>
> An: java-user@lucene.apache.org
> Betreff: Re: AutomatonQuery Caching

> Hi rene,
> 
> On Tue, Jul 12, 2011 at 10:12 PM, Rene Hackl-Sommer <rene.a.hackl@gmx.de>
> wrote:
> > This sounds plausible, even if manually cleaning the Java cache has no
> > effect. Probably a JDK/JRE mismatch somewhere, just have to find the
> spot.
> 
> this is very likely your OS pushing frequently use data into RAM via
> FS cache. if you run on linux try to flush your caches with
> echo 3 > /proc/sys/vm/drop_caches
> 
> and see if it changes anything.
> 
> simon
> >
> > Thanks,
> > Rene
> >
> > Am 12.07.2011 19:22, schrieb Robert Muir:
> >>
> >> On Tue, Jul 12, 2011 at 10:42 AM, "René Hackl"<rene.a.hackl@gmx.de>
> >>  wrote:
> >>>
> >>> Hi,
> >>>
> >>> I am running some AutomatonQueries and see caching effects happening,
> >>> that I can't seem to get rid of. E.g. an AutomatonQuery takes
> >>>
> >>> Run 1: 3000 ms
> >>> Run 2 and all subsequent runs: 250 ms
> >>>
> >>> The IndexSearcher is closed after every full query circle (and opened
> via
> >>> open(Directory), so the IndexReader should be closed, too, right?). I
> have
> >>> changed indexes, restarted Eclipse, and run GC to no effect. I am
> thinking
> >>> FieldCache.purge might help, but how do i get there?
> >>>
> >>> Also, how to reasonably assess execution times for AQs? The very first
> >>> runs can last pretty long, yet cached queries are fast. Overlap seems
> to
> >>> benefit queries down the line, e.g. "*ration" is much faster if
> sometime
> >>> before "*ation" has been run. Would it be feasible to warm an index
> with the
> >>> most frequent ngrams for AutomatonQueries?
> >>>
> >> This is probably just your OS caching? this query has no caching.
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

-- 
NEU: FreePhone - kostenlos mobil telefonieren!			
Jetzt informieren: http://www.gmx.net/de/go/freephone

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 07:56:25 2011
Return-Path: <java-user-return-50321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E467A4681
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 07:56:25 +0000 (UTC)
Received: (qmail 53247 invoked by uid 500); 13 Jul 2011 07:55:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51845 invoked by uid 500); 13 Jul 2011 07:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51772 invoked by uid 99); 13 Jul 2011 07:55:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 07:55:20 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of Christof.Schablinski@devoteam.com designates 213.190.82.43 as permitted sender)
Received: from [213.190.82.43] (HELO mail.devoteam.com) (213.190.82.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 07:55:14 +0000
Message-ID: <4E1D4F4B.4090005@devoteam.com>
Date: Wed, 13 Jul 2011 09:54:51 +0200
From: Christof Schablinski <christof.schablinski@devoteam.com>
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20110624 Thunderbird/5.0
MIME-Version: 1.0
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: Snowball analyzers and stop words?
Content-Type: text/plain; charset="ISO-8859-15"; format=flowed
Content-Transfer-Encoding: quoted-printable

Hello,

is there a reason why the Snowball analyzers don't have a default set of st=
op=20
words
although there are stop word files in the Snowball repository? At least for=
=20
English as
posted in an earlier message here:

http://svn.tartarus.org/snowball/trunk/website/algorithms/english/stop.txt?=
view=3Dmarkup


--=20
Mit freundlichen Gr=FC=DFen

Christof Schablinski

Devoteam Danet GmbH, Waldburgstrasse 17 - 19, 70563 Stuttgart, Germany
Phone: +49 711 13353-8730, Fax: +49 711 13353 8753
E-Mail: christof.schablinski@devoteam.com, URL: www.devoteam.de
------------------------------------------------------------------------
Managing Board: J=FCrgen Hatzipantelis, Dr. Burkhard Austerm=FChl;
Address of Record: Weiterstadt;
Commercial Register: Amtsgericht Darmstadt HRB 6450;
Tax Number: DE 172 993 071




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 08:37:32 2011
Return-Path: <java-user-return-50322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D0FDC4D86
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 08:37:32 +0000 (UTC)
Received: (qmail 11874 invoked by uid 500); 13 Jul 2011 08:37:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11636 invoked by uid 500); 13 Jul 2011 08:36:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11617 invoked by uid 99); 13 Jul 2011 08:36:38 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 08:36:38 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 08:36:30 +0000
Received: by iyi20 with SMTP id 20so8004673iyi.35
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2011 01:36:09 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type;
        bh=wbKSocnnZW7gDORqAStSwZGVg8BiuzKNBYUqZuoRLvo=;
        b=b0grHJqihjVoNRMYXgsNGsRAdd8z2mv3RzJguiCR58KPdkapL1lXmD7kTQXb79jxPl
         m5odCJypLIKrM9ZdX2xtC34JiisS6RyawKUyWG34GEXpFfy2t0EJXuKn4lHgEg0yNPtB
         VchJsvWyKNENmMoSj/mFHFY5T9eemFQmg3d2I=
Received: by 10.231.82.197 with SMTP id c5mr780968ibl.131.1310546169296; Wed,
 13 Jul 2011 01:36:09 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.23.131 with HTTP; Wed, 13 Jul 2011 01:35:49 -0700 (PDT)
In-Reply-To: <CANJ90WdM614TYMqULDKCfPrRMoG75ypFpezKQ81wAQDShUKLXQ@mail.gmail.com>
References: <CANJ90WdM614TYMqULDKCfPrRMoG75ypFpezKQ81wAQDShUKLXQ@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Wed, 13 Jul 2011 09:35:49 +0100
Message-ID: <CAEY5pxU0uDHMpo6Xf_ByUc-b9CcAFZTcyP+_6OOddrmmaRFV=A@mail.gmail.com>
Subject: Re: searching/filtering by field's value length
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Store the string length as a NumericField with each document and use
NumericRangeQuery. There are examples in the javadocs.


--
Ian.


On Tue, Jul 12, 2011 at 10:57 PM, Federico Schroder
<fschroder@runway10.com> wrote:
> Hello,
> I need some help doing a search.
> Say I have a really simple document structure, just 1 field, labeled name.
> I need to retrieve all the names whose length is more or less than a
> specified value. By length I mean String.length().
> A range filter seems close in concept, but I couldn't find a good example to
> write my specific case.
> Thanks for the help,
> Federico
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 09:10:41 2011
Return-Path: <java-user-return-50323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 1B86C43B1
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 09:10:41 +0000 (UTC)
Received: (qmail 72463 invoked by uid 500); 13 Jul 2011 09:10:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72181 invoked by uid 500); 13 Jul 2011 09:10:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72163 invoked by uid 99); 13 Jul 2011 09:10:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 09:10:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of caraman.mihai@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 09:10:15 +0000
Received: by iyi20 with SMTP id 20so8031267iyi.35
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2011 02:09:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=u3RlwyNRiPkqnzR+G659+LNYtypzCz5wKHfjNeZnZJ4=;
        b=GAV927pZk11C1x+eGOecepGoDn6uxmWwJO7kAbywL3tOKv6h43B7NyhB+6qlb4YzZv
         fl7dfJT/b+mZrVVv+HbT1YxfayZtIy3+Nfo6GdNcLPKikjq8tx7Zr1zNproiAsjvaOhg
         SPDFKzch2IZXsaRiImU6qD+lMgkG3STSk6ODQ=
MIME-Version: 1.0
Received: by 10.231.63.81 with SMTP id a17mr832117ibi.66.1310548194879; Wed,
 13 Jul 2011 02:09:54 -0700 (PDT)
Received: by 10.231.13.73 with HTTP; Wed, 13 Jul 2011 02:09:54 -0700 (PDT)
Date: Wed, 13 Jul 2011 12:09:54 +0300
Message-ID: <CAJ-pxHYk6=zqs81EBNLrFT4ya-+1xSzG+_JS64FT93eGWqdraA@mail.gmail.com>
Subject: Performance question
From: Mihai Caraman <caraman.mihai@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=000e0cd56bb09de84704a7efc7b4
X-Virus-Checked: Checked by ClamAV on apache.org

--000e0cd56bb09de84704a7efc7b4
Content-Type: text/plain; charset=ISO-8859-1

Hello,

My name is Mihai and I'm trying to write a java (later I'll need to port it
to pylucene) search on billions of mentions like twitter statuses. Mentions
are grouped by some containing keywords.

I'm thinking of partitioning the index for faster results as follows:

                              common index for the past week

common index for earlier small groups  |  individual indexes for very large
groups

My questions are:

-if i search on last week's index and the individual index (this needs to be
opened at search request!?) will it be faster than using a single huge index
for all groups, for all weeks?
-is* IndexSearcher searcher= new
IndexSearcher(IndexReader.open(writer,false));*  read only? if not how can i
build numerous near-real-time readers on same writer(index)?
-How can i give NearRealTime acces to an IndexWriter started in another
application.
-How can i store alldocuments from results. Something like AllDocs
(equivalent to TopDocs) of AllDocsCollector(
TopDocsCollector).

I understood that Tweeter submitted their code on realTime architecture to
lucene, can i get my hands on that ?

Thank you in advance,
Mihai

--000e0cd56bb09de84704a7efc7b4--

From java-user-return-50324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 12:56:32 2011
Return-Path: <java-user-return-50324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id ED95E460B
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 12:56:31 +0000 (UTC)
Received: (qmail 2303 invoked by uid 500); 13 Jul 2011 12:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1927 invoked by uid 500); 13 Jul 2011 12:56:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1919 invoked by uid 99); 13 Jul 2011 12:56:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 12:56:27 +0000
X-ASF-Spam-Status: No, hits=2.2 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [213.199.154.141] (HELO DB3EHSOBE003.bigfish.com) (213.199.154.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 12:56:19 +0000
Received: from mail117-db3-R.bigfish.com (10.3.81.242) by
 DB3EHSOBE003.bigfish.com (10.3.84.23) with Microsoft SMTP Server id
 14.1.225.22; Wed, 13 Jul 2011 12:55:57 +0000
Received: from mail117-db3 (localhost.localdomain [127.0.0.1])	by
 mail117-db3-R.bigfish.com (Postfix) with ESMTP id 1EDF4140033A	for
 <java-user@lucene.apache.org>; Wed, 13 Jul 2011 12:55:57 +0000 (UTC)
X-SpamScore: -3
X-BigFish: VPS-3(zzc85fh4082Kzz1202hzz8275bh8275dhz2dh2a8h668h839h61h)
X-Spam-TCS-SCL: 0:0
X-Forefront-Antispam-Report: CIP:212.123.12.34;KIP:(null);UIP:(null);IPVD:NLI;H:mercurius02.brepols.net;RD:none;EFVD:NLI
Received: from mail117-db3 (localhost.localdomain [127.0.0.1]) by mail117-db3
 (MessageSwitch) id 1310561755652309_29989; Wed, 13 Jul 2011 12:55:55 +0000
 (UTC)
Received: from DB3EHSMHS007.bigfish.com (unknown [10.3.81.245])	by
 mail117-db3.bigfish.com (Postfix) with ESMTP id 9774F170053	for
 <java-user@lucene.apache.org>; Wed, 13 Jul 2011 12:55:55 +0000 (UTC)
Received: from mercurius02.brepols.net (212.123.12.34) by
 DB3EHSMHS007.bigfish.com (10.3.87.107) with Microsoft SMTP Server (TLS) id
 14.1.225.22; Wed, 13 Jul 2011 12:55:54 +0000
Received: from mercurius02.brepols.net ([172.0.0.228]) by
 mercurius02.brepols.net ([172.0.0.228]) with mapi; Wed, 13 Jul 2011 14:53:21
 +0200
From: Jeroen Lauwers <Jeroen.Lauwers@CTLO.NET>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 13 Jul 2011 14:53:20 +0200
Subject: Advanced NearSpanQuery
Thread-Topic: Advanced NearSpanQuery
Thread-Index: AcxBWeuGztKGcQWqQ4WwZmV11PsCgg==
Message-ID: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>
Accept-Language: en-US, nl-BE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, nl-BE
Content-Type: multipart/alternative;
	boundary="_000_1ABD04F5A978B74B950BF85B535E73C926E99BFFA0mercurius02br_"
MIME-Version: 1.0
X-OriginatorOrg: ctlo.net

--_000_1ABD04F5A978B74B950BF85B535E73C926E99BFFA0mercurius02br_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

I was wondering if anyone could help me on this:

I want to search for:

1.       a set of words (eg. 10)

2.       only a couple of words may come in between (eg. 3) in the result d=
ocument

3.       of the supplied set of (10) words, at least 8 must be present (or =
in other words: 2 of the supplied words can be missing)

I use the SpanNearQuery for (1.) and (2.), but it is the third part that's =
lacking.

Any ideas?

Jeroen

--_000_1ABD04F5A978B74B950BF85B535E73C926E99BFFA0mercurius02br_--

From java-user-return-50325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 13:23:34 2011
Return-Path: <java-user-return-50325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E892860FB
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 13:23:33 +0000 (UTC)
Received: (qmail 43975 invoked by uid 500); 13 Jul 2011 13:23:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43895 invoked by uid 500); 13 Jul 2011 13:23:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43887 invoked by uid 99); 13 Jul 2011 13:23:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 13:23:30 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 13:23:23 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 611E93672E8D;
	Wed, 13 Jul 2011 09:23:01 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id FgO7KtevNgoJ; Wed, 13 Jul 2011 09:23:00 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id 3269C3672EA9;
	Wed, 13 Jul 2011 09:23:00 -0400 (EDT)
Message-ID: <4E1D9C34.7000700@ifactory.com>
Date: Wed, 13 Jul 2011 09:23:00 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Jeroen Lauwers <Jeroen.Lauwers@CTLO.NET>
Subject: Re: Advanced NearSpanQuery
References: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>
In-Reply-To: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Can you wrap a SpanNearQuery around an DisjunctionSumQuery with 
minNrShouldMatch=8?

-Mike

On 07/13/2011 08:53 AM, Jeroen Lauwers wrote:
> Hi,
>
> I was wondering if anyone could help me on this:
>
> I want to search for:
>
> 1.       a set of words (eg. 10)
>
> 2.       only a couple of words may come in between (eg. 3) in the result document
>
> 3.       of the supplied set of (10) words, at least 8 must be present (or in other words: 2 of the supplied words can be missing)
>
> I use the SpanNearQuery for (1.) and (2.), but it is the third part that's lacking.
>
> Any ideas?
>
> Jeroen
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 15:10:06 2011
Return-Path: <java-user-return-50326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 01A126325
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 15:10:06 +0000 (UTC)
Received: (qmail 12400 invoked by uid 500); 13 Jul 2011 15:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12332 invoked by uid 500); 13 Jul 2011 15:10:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12324 invoked by uid 99); 13 Jul 2011 15:10:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 15:10:02 +0000
X-ASF-Spam-Status: No, hits=-1.6 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [65.55.88.14] (HELO TX2EHSOBE008.bigfish.com) (65.55.88.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 15:09:53 +0000
Received: from mail37-tx2-R.bigfish.com (10.9.14.241) by
 TX2EHSOBE008.bigfish.com (10.9.40.28) with Microsoft SMTP Server id
 14.1.225.22; Wed, 13 Jul 2011 15:09:32 +0000
Received: from mail37-tx2 (localhost.localdomain [127.0.0.1])	by
 mail37-tx2-R.bigfish.com (Postfix) with ESMTP id F10CA17300E4	for
 <java-user@lucene.apache.org>; Wed, 13 Jul 2011 15:09:31 +0000 (UTC)
X-SpamScore: -28
X-BigFish: VPS-28(zzbb2dK9371M62a3K4082K542M1432N98dKzz1202hzz8275dhz2dh2a8h668h839h944h61h)
X-Spam-TCS-SCL: 0:0
X-Forefront-Antispam-Report: CIP:212.123.12.34;KIP:(null);UIP:(null);IPVD:NLI;H:mercurius02.brepols.net;RD:none;EFVD:NLI
Received: from mail37-tx2 (localhost.localdomain [127.0.0.1]) by mail37-tx2
 (MessageSwitch) id 1310569771627224_3433; Wed, 13 Jul 2011 15:09:31 +0000
 (UTC)
Received: from TX2EHSMHS005.bigfish.com (unknown [10.9.14.247])	by
 mail37-tx2.bigfish.com (Postfix) with ESMTP id 9566E4F804F	for
 <java-user@lucene.apache.org>; Wed, 13 Jul 2011 15:09:31 +0000 (UTC)
Received: from mercurius02.brepols.net (212.123.12.34) by
 TX2EHSMHS005.bigfish.com (10.9.99.105) with Microsoft SMTP Server (TLS) id
 14.1.225.22; Wed, 13 Jul 2011 15:09:31 +0000
Received: from mercurius02.brepols.net ([172.0.0.228]) by
 mercurius02.brepols.net ([172.0.0.228]) with mapi; Wed, 13 Jul 2011 17:09:28
 +0200
From: Jeroen Lauwers <Jeroen.Lauwers@CTLO.NET>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Wed, 13 Jul 2011 17:09:28 +0200
Subject: RE: Advanced NearSpanQuery
Thread-Topic: Advanced NearSpanQuery
Thread-Index: AcxBYBHLApr5Y50URv+e5mM8tHCsswADoQjA
Message-ID: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA2@mercurius02.brepols.net>
References: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>
 <4E1D9C34.7000700@ifactory.com>
In-Reply-To: <4E1D9C34.7000700@ifactory.com>
Accept-Language: en-US, nl-BE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, nl-BE
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0
X-OriginatorOrg: ctlo.net
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Mike,

Thanks for your quick reply, but do not seem to find any documentation on "=
DisjunctionSumQuery" and I'm not familiar with that concept.

Could you point me in the right direction?

Jeroen

-----Original Message-----
From: Mike Sokolov [mailto:sokolov@ifactory.com]=20
Sent: woensdag 13 juli 2011 15:23
To: java-user@lucene.apache.org
Cc: Jeroen Lauwers
Subject: Re: Advanced NearSpanQuery

Can you wrap a SpanNearQuery around an DisjunctionSumQuery with minNrShould=
Match=3D8?

-Mike

On 07/13/2011 08:53 AM, Jeroen Lauwers wrote:
> Hi,
>
> I was wondering if anyone could help me on this:
>
> I want to search for:
>
> 1.       a set of words (eg. 10)
>
> 2.       only a couple of words may come in between (eg. 3) in the result=
 document
>
> 3.       of the supplied set of (10) words, at least 8 must be present (o=
r in other words: 2 of the supplied words can be missing)
>
> I use the SpanNearQuery for (1.) and (2.), but it is the third part that'=
s lacking.
>
> Any ideas?
>
> Jeroen
>
>   =20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 15:38:04 2011
Return-Path: <java-user-return-50327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 86FF86924
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 15:38:04 +0000 (UTC)
Received: (qmail 80067 invoked by uid 500); 13 Jul 2011 15:38:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80028 invoked by uid 500); 13 Jul 2011 15:38:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80020 invoked by uid 99); 13 Jul 2011 15:38:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 15:38:01 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of simon.willnauer@googlemail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 15:37:55 +0000
Received: by ywn13 with SMTP id 13so3421802ywn.35
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2011 08:37:35 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=googlemail.com; s=gamma;
        h=mime-version:reply-to:in-reply-to:references:date:message-id
         :subject:from:to:content-type:content-transfer-encoding;
        bh=poA2MsFJ3iPujc3QX6Tz5m7UiJk8A/RWX41WO7UI1Lo=;
        b=bPJTT3GoQ0yWNPkqc3uvXSN/8T4z8faVNwTzNcGOte8rZhXvRxPK+QV7zb5MCi+x+b
         ThWLIwaiEBcpkkextfmJMrNB0EbLM0vv7/C9QDb40ddiCbKlTkRv9DgLsjmYn+ZJZghw
         ENYpihCOSwTL7lYOrtcxKOBHFbywxJk3ihDU8=
MIME-Version: 1.0
Received: by 10.236.201.197 with SMTP id b45mr1736819yho.16.1310571454980;
 Wed, 13 Jul 2011 08:37:34 -0700 (PDT)
Received: by 10.147.98.16 with HTTP; Wed, 13 Jul 2011 08:37:34 -0700 (PDT)
Reply-To: simon.willnauer@gmail.com
In-Reply-To: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA2@mercurius02.brepols.net>
References: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>
	<4E1D9C34.7000700@ifactory.com>
	<1ABD04F5A978B74B950BF85B535E73C926E99BFFA2@mercurius02.brepols.net>
Date: Wed, 13 Jul 2011 17:37:34 +0200
Message-ID: <CAAHmpkgQ179NmY4x4Ls_=70Hb-XdbGtu=rmLXruCea_dYBdDOg@mail.gmail.com>
Subject: Re: Advanced NearSpanQuery
From: Simon Willnauer <simon.willnauer@googlemail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

I don't think this is possible with spans today. Once
https://issues.apache.org/jira/browse/LUCENE-2878 is due this should
be possible with a boolean query I think.

to work around this you need to write a SpanOR query with a
minShouldMatch functionality though.

simon

On Wed, Jul 13, 2011 at 5:09 PM, Jeroen Lauwers <Jeroen.Lauwers@ctlo.net> w=
rote:
> Hi Mike,
>
> Thanks for your quick reply, but do not seem to find any documentation on=
 "DisjunctionSumQuery" and I'm not familiar with that concept.
>
> Could you point me in the right direction?
>
> Jeroen
>
> -----Original Message-----
> From: Mike Sokolov [mailto:sokolov@ifactory.com]
> Sent: woensdag 13 juli 2011 15:23
> To: java-user@lucene.apache.org
> Cc: Jeroen Lauwers
> Subject: Re: Advanced NearSpanQuery
>
> Can you wrap a SpanNearQuery around an DisjunctionSumQuery with minNrShou=
ldMatch=3D8?
>
> -Mike
>
> On 07/13/2011 08:53 AM, Jeroen Lauwers wrote:
>> Hi,
>>
>> I was wondering if anyone could help me on this:
>>
>> I want to search for:
>>
>> 1. =C2=A0 =C2=A0 =C2=A0 a set of words (eg. 10)
>>
>> 2. =C2=A0 =C2=A0 =C2=A0 only a couple of words may come in between (eg. =
3) in the result document
>>
>> 3. =C2=A0 =C2=A0 =C2=A0 of the supplied set of (10) words, at least 8 mu=
st be present (or in other words: 2 of the supplied words can be missing)
>>
>> I use the SpanNearQuery for (1.) and (2.), but it is the third part that=
's lacking.
>>
>> Any ideas?
>>
>> Jeroen
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 21:02:58 2011
Return-Path: <java-user-return-50328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id E4B6B687F
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 21:02:58 +0000 (UTC)
Received: (qmail 92337 invoked by uid 500); 13 Jul 2011 21:02:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92293 invoked by uid 500); 13 Jul 2011 21:02:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92284 invoked by uid 99); 13 Jul 2011 21:02:55 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 21:02:55 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of sokolov@ifactory.com designates 68.236.111.2 as permitted sender)
Received: from [68.236.111.2] (HELO camelot.ifactory.com) (68.236.111.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2011 21:02:48 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by camelot.ifactory.com (Postfix) with ESMTP id 43D7B3672EE7;
	Wed, 13 Jul 2011 17:02:27 -0400 (EDT)
Received: from camelot.ifactory.com ([127.0.0.1])
	by localhost (camelot.ifactory.com [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id iQw0Jyrerg18; Wed, 13 Jul 2011 17:02:10 -0400 (EDT)
Received: from aix.ifactory.com (aix.ifactory.com [192.168.10.27])
	by camelot.ifactory.com (Postfix) with ESMTPA id 84ED23672EE0;
	Wed, 13 Jul 2011 17:02:10 -0400 (EDT)
Message-ID: <4E1E07D2.40305@ifactory.com>
Date: Wed, 13 Jul 2011 17:02:10 -0400
From: Mike Sokolov <sokolov@ifactory.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.9) Gecko/20100317 Lightning/1.0b1 Thunderbird/3.0.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
CC: Simon Willnauer <simon.willnauer@googlemail.com>
Subject: Re: Advanced NearSpanQuery
References: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>	<4E1D9C34.7000700@ifactory.com>	<1ABD04F5A978B74B950BF85B535E73C926E99BFFA2@mercurius02.brepols.net> <CAAHmpkgQ179NmY4x4Ls_=70Hb-XdbGtu=rmLXruCea_dYBdDOg@mail.gmail.com>
In-Reply-To: <CAAHmpkgQ179NmY4x4Ls_=70Hb-XdbGtu=rmLXruCea_dYBdDOg@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry for the misdirection ...

On 07/13/2011 11:37 AM, Simon Willnauer wrote:
> I don't think this is possible with spans today. Once
> https://issues.apache.org/jira/browse/LUCENE-2878 is due this should
> be possible with a boolean query I think.
>
> to work around this you need to write a SpanOR query with a
> minShouldMatch functionality though.
>
> simon
>
> On Wed, Jul 13, 2011 at 5:09 PM, Jeroen Lauwers<Jeroen.Lauwers@ctlo.net>  wrote:
>    
>> Hi Mike,
>>
>> Thanks for your quick reply, but do not seem to find any documentation on "DisjunctionSumQuery" and I'm not familiar with that concept.
>>
>> Could you point me in the right direction?
>>
>> Jeroen
>>
>> -----Original Message-----
>> From: Mike Sokolov [mailto:sokolov@ifactory.com]
>> Sent: woensdag 13 juli 2011 15:23
>> To: java-user@lucene.apache.org
>> Cc: Jeroen Lauwers
>> Subject: Re: Advanced NearSpanQuery
>>
>> Can you wrap a SpanNearQuery around an DisjunctionSumQuery with minNrShouldMatch=8?
>>
>> -Mike
>>
>> On 07/13/2011 08:53 AM, Jeroen Lauwers wrote:
>>      
>>> Hi,
>>>
>>> I was wondering if anyone could help me on this:
>>>
>>> I want to search for:
>>>
>>> 1.       a set of words (eg. 10)
>>>
>>> 2.       only a couple of words may come in between (eg. 3) in the result document
>>>
>>> 3.       of the supplied set of (10) words, at least 8 must be present (or in other words: 2 of the supplied words can be missing)
>>>
>>> I use the SpanNearQuery for (1.) and (2.), but it is the third part that's lacking.
>>>
>>> Any ideas?
>>>
>>> Jeroen
>>>
>>>
>>>        
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>      
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>    

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Wed Jul 13 21:30:55 2011
Return-Path: <java-user-return-50329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 7861C6870
	for <apmail-lucene-java-user-archive@www.apache.org>; Wed, 13 Jul 2011 21:30:55 +0000 (UTC)
Received: (qmail 66812 invoked by uid 500); 13 Jul 2011 21:30:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66590 invoked by uid 500); 13 Jul 2011 21:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 5663 invoked by uid 99); 13 Jul 2011 05:50:34 -0000
X-ASF-Spam-Status: No, hits=1.6 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jigargandhi5@gmail.com designates 209.85.216.169 as permitted sender)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=C4c/lW3vd/F2yFoLVS0t2Vx3VuRd7cqLdWCvUiECuP4=;
        b=GvsfrmdlZ97FL79UIJzPyIVzJfF8tEwBfUvGujZDydlbZNDXTpQpJOQ+C8BZwJFWYI
         ruMvO93M98DEWi9p7IP8xaGA+0Iahm/T4XCA22x0g2m+AKS5pYR1SMbwySuvwMWLCeTW
         gjq2h+NFaA3f/xJdnVCUBSH1675tFbNcemK7c=
MIME-Version: 1.0
Date: Wed, 13 Jul 2011 11:20:06 +0530
Message-ID: <CALktp3RvPTe=ssv09AW61Qbv3LiEfLE7g=mC2Z7nk1uQnFKmRg@mail.gmail.com>
Subject: jigar query please help me
From: jigar gandhi <jigargandhi5@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00235429d1d407302a04a7ecfd09

--00235429d1d407302a04a7ecfd09
Content-Type: text/plain; charset=ISO-8859-1

hi.. i am jigar.

while running lucene test file i m getting this errror please help me in its
solution.

Note: LuceneTest.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.

this two notes are cmng.

code is compiled but not running.

i am put lucene jar files at my class path.

plz give me prpper solution

thanks and regards.

jigar gandhi
9662763299

--00235429d1d407302a04a7ecfd09--

From java-user-return-50330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 11:51:30 2011
Return-Path: <java-user-return-50330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 922017BB1
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 11:51:30 +0000 (UTC)
Received: (qmail 11352 invoked by uid 500); 14 Jul 2011 11:51:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10883 invoked by uid 500); 14 Jul 2011 11:51:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10870 invoked by uid 99); 14 Jul 2011 11:51:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 11:51:21 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of ian.lea@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 11:51:15 +0000
Received: by iyi20 with SMTP id 20so173450iyi.35
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 04:50:55 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=Fh+nsx02m0ZWzb1b/XFkOD3ygV9FE6fwHvfOTwApJUc=;
        b=YJE0ts490oGDh8OlrqWqW3Zr/TbzECjCvQh+/khu82dwklpRLtssppX0/zIWX8WALP
         l5HoUmzTGuZEXaMOCDKrgsMrm/YAf500OLXZ4VbYcFFtz/7Tqt733XWQVFbiDzPEsfXW
         fPuOaYu7AaxQE7os8HNFBUyekZMVwYqKbY/VA=
Received: by 10.42.170.193 with SMTP id g1mr2209515icz.426.1310644255122; Thu,
 14 Jul 2011 04:50:55 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.23.131 with HTTP; Thu, 14 Jul 2011 04:50:35 -0700 (PDT)
In-Reply-To: <CAJ-pxHYk6=zqs81EBNLrFT4ya-+1xSzG+_JS64FT93eGWqdraA@mail.gmail.com>
References: <CAJ-pxHYk6=zqs81EBNLrFT4ya-+1xSzG+_JS64FT93eGWqdraA@mail.gmail.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Thu, 14 Jul 2011 12:50:35 +0100
Message-ID: <CAEY5pxXnYtfkpD0HTNfeqHRDDaPXJW_XOxXpM10eJq01iXQCcg@mail.gmail.com>
Subject: Re: Performance question
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Searching billions of anything is likely to be challenging. Mark
Miller's document at
http://www.lucidimagination.com/content/scaling-lucene-and-solr looks
well worth a read.

> -if i search on last week's index and the individual index (this needs to=
 be
> opened at search request!?) will it be faster than using a single huge in=
dex
> for all groups, for all weeks?

Too many variables to say.


> -is* IndexSearcher searcher=3D new
> IndexSearcher(IndexReader.open(writer,false));*  read only?

Surely searchers are read only, by definition.


> -How can i give NearRealTime acces to an IndexWriter started in another
> application.

Sounds impossible.


> -How can i store alldocuments from results. Something like AllDocs
> (equivalent to TopDocs) of AllDocsCollector(
> TopDocsCollector).

Not clear what you are asking here, but you can pass whatever you like
as the max doc count to the assorted search methods, and do whatever
you want with the results.  Storing all docs from search results on a
massive index doesn't sound a very clever idea.


> I understood that Tweeter submitted their code on realTime architecture t=
o
> lucene, can i get my hands on that ?

No idea.


--
Ian.


On Wed, Jul 13, 2011 at 10:09 AM, Mihai Caraman <caraman.mihai@gmail.com> w=
rote:
> Hello,
>
> My name is Mihai and I'm trying to write a java (later I'll need to port =
it
> to pylucene) search on billions of mentions like twitter statuses. Mentio=
ns
> are grouped by some containing keywords.
>
> I'm thinking of partitioning the index for faster results as follows:
>
> =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0 =A0common index f=
or the past week
>
> common index for earlier small groups =A0| =A0individual indexes for very=
 large
> groups
>
> My questions are:
>
> -if i search on last week's index and the individual index (this needs to=
 be
> opened at search request!?) will it be faster than using a single huge in=
dex
> for all groups, for all weeks?
> -is* IndexSearcher searcher=3D new
> IndexSearcher(IndexReader.open(writer,false));* =A0read only? if not how =
can i
> build numerous near-real-time readers on same writer(index)?
> -How can i give NearRealTime acces to an IndexWriter started in another
> application.
> -How can i store alldocuments from results. Something like AllDocs
> (equivalent to TopDocs) of AllDocsCollector(
> TopDocsCollector).
>
> I understood that Tweeter submitted their code on realTime architecture t=
o
> lucene, can i get my hands on that ?
>
> Thank you in advance,
> Mihai
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 12:46:00 2011
Return-Path: <java-user-return-50331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 964A77A85
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 12:46:00 +0000 (UTC)
Received: (qmail 89589 invoked by uid 500); 14 Jul 2011 12:45:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89448 invoked by uid 500); 14 Jul 2011 12:45:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89440 invoked by uid 99); 14 Jul 2011 12:45:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 12:45:57 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of caraman.mihai@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 12:45:49 +0000
Received: by iyi20 with SMTP id 20so229167iyi.35
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 05:45:28 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=gTR7BGU/DrbC7cp5bjxbxBVu4RwdmtYn6HmjXp/CNBo=;
        b=F/90L12mcICYnKSMzrTPnK3arsFy4T4a2eBqxZg7A37zRcwj3vzERisA0QEEPFtKr3
         vK9cu70GYg/MM2jPdayA5rKHiKzNe9M35/FIKKvyGqGk1eWEj7cw0uDqLJcyFsAh+PDR
         xSrtMXJzaVHposmSGsC3vwwJ8qjRshOJPuAPw=
MIME-Version: 1.0
Received: by 10.42.243.65 with SMTP id ll1mr2226332icb.405.1310647528472; Thu,
 14 Jul 2011 05:45:28 -0700 (PDT)
Received: by 10.231.14.133 with HTTP; Thu, 14 Jul 2011 05:45:28 -0700 (PDT)
In-Reply-To: <CAEY5pxXnYtfkpD0HTNfeqHRDDaPXJW_XOxXpM10eJq01iXQCcg@mail.gmail.com>
References: <CAJ-pxHYk6=zqs81EBNLrFT4ya-+1xSzG+_JS64FT93eGWqdraA@mail.gmail.com>
	<CAEY5pxXnYtfkpD0HTNfeqHRDDaPXJW_XOxXpM10eJq01iXQCcg@mail.gmail.com>
Date: Thu, 14 Jul 2011 15:45:28 +0300
Message-ID: <CAJ-pxHZh3Bu00WMeXpWc5unu2Zc11_+gB+7kGPArG=xZW3uoFw@mail.gmail.com>
Subject: Re: Performance question
From: Mihai Caraman <caraman.mihai@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=90e6ba3fcd4f5c41ad04a806e8f4
X-Virus-Checked: Checked by ClamAV on apache.org

--90e6ba3fcd4f5c41ad04a806e8f4
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable

Thank you for the reply, if you need more info to understand the question,
I'll try to be as prompt as possible.

> -if i search on last week's index and the individual index (this needs to
be
> opened at search request!?) will it be faster than using a single huge
index
> for all groups, for all weeks?

Searches will be made on only one group at a time(disjoint groups of
documents). So for very large groups, the old documents will have they're
own index. I'm hopping that this shortens the work load on a search by not
having to skip other groups while searching for large quantities of old
documents.  In other words, I won't be needing a filter for the group neede=
d
to be searched, this being the filter with most hits.


  Storing all docs from search results on a
> massive index doesn't sound a very clever idea.
>
> It's a necessary step because i need to group results by they're date, so
I'm only storing doc-id's and retrieving they're date field.

>
> > I understood that Tweeter submitted their code on realTime architecture
> to
> > lucene, can i get my hands on that ?
>
> No idea.
>
>
> "... we=92re planning on contributing all these changes back to Lucene; s=
ome
of which have already made it into Lucene=92s trunk and its new realtime
branch." Read more<http://engineering.twitter.com/2010/10/twitters-new-sear=
ch-architecture.html>

--90e6ba3fcd4f5c41ad04a806e8f4--

From java-user-return-50332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 12:59:19 2011
Return-Path: <java-user-return-50332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 05ED87068
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 12:59:19 +0000 (UTC)
Received: (qmail 14527 invoked by uid 500); 14 Jul 2011 12:59:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14369 invoked by uid 500); 14 Jul 2011 12:59:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14361 invoked by uid 99); 14 Jul 2011 12:59:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 12:59:15 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yahya.mohamed@gmail.com designates 209.85.213.48 as permitted sender)
Received: from [209.85.213.48] (HELO mail-yw0-f48.google.com) (209.85.213.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 12:59:09 +0000
Received: by ywn13 with SMTP id 13so101432ywn.35
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 05:58:48 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:from:date:message-id:subject:to:content-type;
        bh=W4zp0LWSs6cBn0oMfh+D6GAIqYZ18b1N9Lbk7HT4bzk=;
        b=k6qKot7oWymhX+F1E30InzGzfUYVVAVrBP1Yma20KwENump4SrKuKu/RqKyse+BRV+
         YrN8lXzsm8XR8ejIUjpoe4AUMv3Gd9WiOxf5bDinDpZSQdXGnz1Thk1v7Va9PNxAVuAL
         z0USmtSjH4hrEQewwdnpN/UTzYh4K4NglT5to=
Received: by 10.236.185.132 with SMTP id u4mr3413621yhm.224.1310648328075;
 Thu, 14 Jul 2011 05:58:48 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.236.202.135 with HTTP; Thu, 14 Jul 2011 05:58:28 -0700 (PDT)
From: Mohamed Yahya <yahya.mohamed@gmail.com>
Date: Thu, 14 Jul 2011 14:58:28 +0200
Message-ID: <CAKFFYL6ZbUTJ4H7CMOcdKTqhpuDWGxZK_wEE8jpDB+_gYLLztw@mail.gmail.com>
Subject: Jaccard Similarity in Lucene
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8

I need to calculate the similarity of a query and document in Lucene
using Jaccard similarity over n-grams. As Jaccard similarity is is a
very common measure in IR, I expected to find a Lucene implementation
for it, but I couldn't.

Is anyone aware of such an implementation?

Regards,
Mohamed

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 13:49:31 2011
Return-Path: <java-user-return-50333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6537A7414
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 13:49:31 +0000 (UTC)
Received: (qmail 10361 invoked by uid 500); 14 Jul 2011 13:49:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10285 invoked by uid 500); 14 Jul 2011 13:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10277 invoked by uid 99); 14 Jul 2011 13:49:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 13:49:28 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of sanne.grinovero@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 13:49:22 +0000
Received: by iwi5 with SMTP id 5so285076iwi.35
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 06:49:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type:content-transfer-encoding;
        bh=iLBLecIS8fwp26fQsAUZC0M4F1lymELAmouy3/CMSnA=;
        b=KEmIGQ0oNaf/CFJK5zkIuyY53CFg9VovPis83p1l2s3IiFHtJrUs80rKyqOE5kRZp/
         P03nZv/n9nQkY+sY8B8ZTrs4Jam/EtINy42bPksI2Nu2L/15Ic2jL8K4IrLVqeT8+lZE
         jvkgba43haz4bTYZLxji5YLVVINdGflq9H+Mc=
Received: by 10.42.28.69 with SMTP id m5mr2622964icc.33.1310651342113; Thu, 14
 Jul 2011 06:49:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.42.154.73 with HTTP; Thu, 14 Jul 2011 06:48:42 -0700 (PDT)
In-Reply-To: <08230D4C8E666D479F6DE495A7684DCD0ABA9668@JSCPCWEXMAA1.bsg.ad.adp.com>
References: <08230D4C8E666D479F6DE495A7684DCD0ABA965D@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTinGShn3Y8a=eD=XGGF=0SydatKtdA@mail.gmail.com> <08230D4C8E666D479F6DE495A7684DCD0ABA9663@JSCPCWEXMAA1.bsg.ad.adp.com>
 <BANLkTi=A9B+XqC5k2LuP8seJg4XFj91juA@mail.gmail.com> <08230D4C8E666D479F6DE495A7684DCD0ABA9668@JSCPCWEXMAA1.bsg.ad.adp.com>
From: Sanne Grinovero <sanne.grinovero@gmail.com>
Date: Thu, 14 Jul 2011 14:48:42 +0100
Message-ID: <CAFm4XO1EXKkX9atUcTXsS7MBKw4+Q2dw3dajXjRrb=aekoZEkQ@mail.gmail.com>
Subject: Re: how to do simple search paging results of 100 each? and query
 syntax question
To: java-user@lucene.apache.org
Cc: "simon.willnauer@gmail.com" <simon.willnauer@gmail.com>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

Hello,
sorry for the late reply.
I don't think that generally noSQL users need a ScrollableResult as
usually NoSQL is being used in big data environments, in which case
it's preferred to send your computation and data crunching to the data
as with Map/Reduce operations (but not limited to) rather than
fetching all the data locally.
This is just my opinion in the general case. With Lucene specifically
you can implement something similar, and in fact we implemented
exactly Hibernate's interface in Hibernate Search, which is providing
the full JPA api to a Lucene index; feel free to have a look:

Implementation:
  https://github.com/hibernate/hibernate-search/blob/master/hibernate-searc=
h/src/main/java/org/hibernate/search/query/hibernate/impl/ScrollableResults=
Impl.java

Tests:
  https://github.com/hibernate/hibernate-search/blob/master/hibernate-searc=
h/src/test/java/org/hibernate/search/test/query/ScrollableResultsTest.java

This code is implementing the full Hibernate semantics (including
keeping loaded entities attached to the session), so if you don't need
that you could extract the logic into something much simpler - or use
it directly and clear the Session regularly, as with all batch
operations.

Generally I think (and hope!) this implementation makes sense as the
goal is to facilitate developers having a JPA or Hibernate
applications to get started with Lucene.

Regards,
Sanne

2011/6/19 Hiller, Dean  x66079 <dean.hiller@broadridge.com>:
> No need to score at all. =C2=A0Just need paging and typically it is a loo=
p since this is an overnight batch job pairing up a trade with one or many =
trades on a nosql system. =C2=A0We do need a sorted order as well so we kin=
d of want to
>
> 1. have something like ScrollableResultSet
> 2. be able to pass in order by xxx
> 3. page over the results without releasing the cursor until we are all ma=
tched up(which can typically be the third page once in a while is the 80th =
page).
>
> BIG NOTE: Our first page even with indexing is slow because the index is =
HUGE. =C2=A0The second page incurs that same hit if it starts over which is=
 why ScrollableResultSet is very desired in the noSQL world. =C2=A0Ideally,=
 we only want the first page to have that hit, and the second page picks up=
 in the tree where the first one left off.
>
> I did post on the hbase list as I am curious if other noSQL users are sta=
rting to see this need yet. =C2=A0I am sure people well just as ScrollableR=
esultSet was eventually added into hibernate.
>
> Thanks,
> Dean
>
> -----Original Message-----
> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
> Sent: Sunday, June 19, 2011 1:48 PM
> To: Hiller, Dean x66079
> Cc: java-user@lucene.apache.org
> Subject: Re: how to do simple search paging results of 100 each? and quer=
y syntax question
>
> So do you need to score the documents or can they be in arbitrary order?
>
> On Sun, Jun 19, 2011 at 8:45 PM, Hiller, Dean =C2=A0x66079
> <dean.hiller@broadridge.com> wrote:
>> Hmmm, maybe I am using the wrong library?
>>
>> See the post I just sent especially on the hibernate section where in hi=
bernate
>> you can do select * from xxx where yyy and page the results(gets slower =
and slower
>> as you go to the nth page) vs. using ScrollableResultSet in hibernate wh=
ich does
>> not get any slower as you move towards the nth page.
>>
>> I am not close to a web app search at all. =C2=A0More of a noSQL environ=
ment that I need indexing on.
>>
>> Thanks,
>> Dean
>>
>> -----Original Message-----
>> From: Simon Willnauer [mailto:simon.willnauer@googlemail.com]
>> Sent: Sunday, June 19, 2011 11:48 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: how to do simple search paging results of 100 each? and que=
ry syntax question
>>
>> On Sun, Jun 19, 2011 at 7:29 PM, Hiller, Dean =C2=A0x66079
>> <dean.hiller@broadridge.com> wrote:
>>> On the link
>>> http://lucene.apache.org/java/3_0_3/queryparsersyntax.html#Range%20Sear=
ches
>>>
>>>
>>> There is ranged searched, how do I specify everything above a date from=
 date 20020101 =C2=A0to end of time?
>>
>> here you can simply go for field:[20020101 TO ] and leave the end
>> blank. If you want to do fast numeric searches you should use
>> NumericRangeQuery instead.
>>>
>>>
>>>
>>> Next, I am temporarily using lucene in a noSQL solution(to switch to So=
lr later after prototype) and
>>>
>>> So I am just indexing basic columns..no need for "top search results", =
etc.
>>>
>>>
>>>
>>> When I look at the IndexSearcher and it's list of methods I am not sure=
 how I can grab the first 100
>>>
>>> Results, then the second 100 results(that is if I need them), then the =
third 100 results (again if needed)
>>
>> so what you do here is basically requesting as many documents as you
>> need lets say 100, then you display it. Once you need the next hundred
>> you search again requesting 200 results and once the search returns
>> simply discard the first 100
>> use this as the basic method if you simply use a query without filters
>> or anything.
>>
>> =C2=A0public TopDocs search(Query query, int n)
>>>
>>>
>>>
>>> I see a TopScoreDocCollector.create method but the IndexSearcher.search=
(Query, Collector) method states only to call that method if you need ALL t=
he results. =C2=A0I definitely don't need all but need to page through the
>>>
>>> Results and typically exit out around the third page. =C2=A0This is not=
 a web app, so ideally I want a reference held into the indexed tree so it =
can keep giving me the next 100 results.
>>
>> in lucene you must search again to the the next 100 but in general the
>> search should be very fast.
>>
>> lemme know if you have more quesitons.
>>
>> simon
>>>
>>>
>>>
>>> Thanks,
>>>
>>> Dean
>>>
>>> This message and any attachments are intended only for the use of the a=
ddressee and
>>> may contain information that is privileged and confidential. If the rea=
der of the
>>> message is not the intended recipient or an authorized representative o=
f the
>>> intended recipient, you are hereby notified that any dissemination of t=
his
>>> communication is strictly prohibited. If you have received this communi=
cation in
>>> error, please notify us immediately by e-mail and delete the message an=
d any
>>> attachments from your system.
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> This message and any attachments are intended only for the use of the ad=
dressee and
>> may contain information that is privileged and confidential. If the read=
er of the
>> message is not the intended recipient or an authorized representative of=
 the
>> intended recipient, you are hereby notified that any dissemination of th=
is
>> communication is strictly prohibited. If you have received this communic=
ation in
>> error, please notify us immediately by e-mail and delete the message and=
 any
>> attachments from your system.
>>
>>
>
> This message and any attachments are intended only for the use of the add=
ressee and
> may contain information that is privileged and confidential. If the reade=
r of the
> message is not the intended recipient or an authorized representative of =
the
> intended recipient, you are hereby notified that any dissemination of thi=
s
> communication is strictly prohibited. If you have received this communica=
tion in
> error, please notify us immediately by e-mail and delete the message and =
any
> attachments from your system.
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 18:09:07 2011
Return-Path: <java-user-return-50334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0BE5F7B7E
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 18:09:07 +0000 (UTC)
Received: (qmail 60082 invoked by uid 500); 14 Jul 2011 18:09:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60030 invoked by uid 500); 14 Jul 2011 18:09:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60022 invoked by uid 99); 14 Jul 2011 18:09:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 18:09:03 +0000
X-ASF-Spam-Status: No, hits=-0.1 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [141.211.3.202] (HELO itcs-ehub-02.adsroot.itcs.umich.edu) (141.211.3.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 18:08:54 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.234]) by
 itcs-ehub-02.adsroot.itcs.umich.edu ([141.211.3.202]) with mapi; Thu, 14 Jul
 2011 14:08:33 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 14 Jul 2011 14:08:30 -0400
Subject: Does change to ICU in Lucene/Solr 3.3 require re-indexing?
Thread-Topic: Does change to ICU in Lucene/Solr 3.3 require re-indexing?
Thread-Index: AcxCUQmJG54r08gLRtygwWoJDvvB2Q==
Message-ID: <47316FE3F6BA0D4DADF99663512552680D04DB45BF@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-cr-hashedpuzzle: B3U1 B3rB CRDz DWn5 FBN2 Fou7 F4Iu GDUu Gwlf Hhoc Ihxg
 IzJA I7st JhUA KWUs
 KdUr;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{BE77DE71-C882-427D-A6E0-9F992F3A5C2B};dABiAHUAcgB0AG8AbgB3AEAAdQBtAGkAYwBoAC4AZQBkAHUA;Thu,
 14 Jul 2011 18:08:30
 GMT;RABvAGUAcwAgAGMAaABhAG4AZwBlACAAdABvACAASQBDAFUAIABpAG4AIABMAHUAYwBlAG4AZQAvAFMAbwBsAHIAIAAzAC4AMwAgAHIAZQBxAHUAaQByAGUAIAByAGUALQBpAG4AZABlAHgAaQBuAGcAPwA=
x-cr-puzzleid: {BE77DE71-C882-427D-A6E0-9F992F3A5C2B}
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_47316FE3F6BA0D4DADF99663512552680D04DB45BFITCSECLS1VS3a_"
MIME-Version: 1.0
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_47316FE3F6BA0D4DADF99663512552680D04DB45BFITCSECLS1VS3a_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

We are about to upgrade to Solr/Lucene 3.3 from a 3.1dev version (Lucene Im=
plementation Version: 3.1-SNAPSHOT 1036094 - 2010-11-19 16:01:10)

We have a 6 TB + index that includes somewhere over 200 languages that was =
indexed with the ICUTokenizer and ICUFoldingFilter from  3.1dev and would l=
ike to avoid re-indexing if possible.

LUCENE-3149<http://issues.apache.org/jira/browse/LUCENE-3149>: Upgrade cont=
rib/icu's ICU jar file to ICU 4.8.
I couldn't tell from looking at the release notes from ICU 4.8 whether the =
changes affected internal API's or actual rules for tokenizing or folding

Do the changes to the ICU filters/tokenizers in Solr/Lucene 3.3 change how =
tokenizing and the folding filter work in terms of queries run through the =
3.3 filters possibly not matching documents indexed with the 3.1dev filters=
?

Tom Burton-West



--_000_47316FE3F6BA0D4DADF99663512552680D04DB45BFITCSECLS1VS3a_--

From java-user-return-50335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 18:30:08 2011
Return-Path: <java-user-return-50335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4E2D37AED
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 18:30:08 +0000 (UTC)
Received: (qmail 6240 invoked by uid 500); 14 Jul 2011 18:30:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6179 invoked by uid 500); 14 Jul 2011 18:30:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6167 invoked by uid 99); 14 Jul 2011 18:30:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 18:30:05 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.161.53 as permitted sender)
Received: from [209.85.161.53] (HELO mail-fx0-f53.google.com) (209.85.161.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 18:29:59 +0000
Received: by fxd23 with SMTP id 23so905252fxd.12
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 11:29:38 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=ZQfb8yYM+UAd4zVwbY+RshtTxTsLh/GKtHc4IHFkZ3I=;
        b=XKRNnTDh8ZKvzHTXxTj84S+F78uTH1RcgrFTMNo9ox8+SLGvHviMvHEmsZpM7ncGJ9
         ERpvK/X5qOagnI8u2DWAn3l1rbD+t3FCs3Ur80oYwiH4dWuFLzOI5uN5lLE9g+HKK8SV
         Tn8v86hBTOgqdF2qD+ZSIiJJ0Quk81ADfEJTM=
Received: by 10.204.101.10 with SMTP id a10mr1080328bko.183.1310668178161;
 Thu, 14 Jul 2011 11:29:38 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.66.132 with HTTP; Thu, 14 Jul 2011 11:29:18 -0700 (PDT)
In-Reply-To: <47316FE3F6BA0D4DADF99663512552680D04DB45BF@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <47316FE3F6BA0D4DADF99663512552680D04DB45BF@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 14 Jul 2011 14:29:18 -0400
Message-ID: <CAOdYfZXq+e=pcTnVUqNATjg_kwfGyShxFbpZmmJJa4bjLzmnCw@mail.gmail.com>
Subject: Re: Does change to ICU in Lucene/Solr 3.3 require re-indexing?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

It could be the case, but I am not sure what version of icu jar you
had before without looking thru svn logs.

if you are currently using 4.6, you are probably ok, as that was when
the unicode version was bumped to 6.0.
most of the rules etc are driven by the unicode version itself.

I would suggest just using your old icu jar and lucene-icu.jar until
you yourself want to upgrade... its not guaranteed to work but I
suspect it will :)

On Thu, Jul 14, 2011 at 2:08 PM, Burton-West, Tom <tburtonw@umich.edu> wrot=
e:
> We are about to upgrade to Solr/Lucene 3.3 from a 3.1dev version (Lucene =
Implementation Version: 3.1-SNAPSHOT 1036094 - 2010-11-19 16:01:10)
>
> We have a 6 TB + index that includes somewhere over 200 languages that wa=
s indexed with the ICUTokenizer and ICUFoldingFilter from =C2=A03.1dev and =
would like to avoid re-indexing if possible.
>
> LUCENE-3149<http://issues.apache.org/jira/browse/LUCENE-3149>: Upgrade co=
ntrib/icu's ICU jar file to ICU 4.8.
> I couldn't tell from looking at the release notes from ICU 4.8 whether th=
e changes affected internal API's or actual rules for tokenizing or folding
>
> Do the changes to the ICU filters/tokenizers in Solr/Lucene 3.3 change ho=
w tokenizing and the folding filter work in terms of queries run through th=
e 3.3 filters possibly not matching documents indexed with the 3.1dev filte=
rs?
>
> Tom Burton-West
>
>
>



--=20
lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 19:35:03 2011
Return-Path: <java-user-return-50336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 881D57C34
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 19:35:03 +0000 (UTC)
Received: (qmail 70391 invoked by uid 500); 14 Jul 2011 19:35:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70341 invoked by uid 500); 14 Jul 2011 19:35:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70331 invoked by uid 99); 14 Jul 2011 19:35:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 19:35:00 +0000
X-ASF-Spam-Status: No, hits=-2.3 required=5.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.211.3.201] (HELO itcs-ehub-01.adsroot.itcs.umich.edu) (141.211.3.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 19:34:54 +0000
Received: from ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu ([141.211.3.234]) by
 itcs-ehub-01.adsroot.itcs.umich.edu ([141.211.3.201]) with mapi; Thu, 14 Jul
 2011 15:34:31 -0400
From: "Burton-West, Tom" <tburtonw@umich.edu>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Thu, 14 Jul 2011 15:34:31 -0400
Subject: RE: Does change to ICU in Lucene/Solr 3.3 require re-indexing?
Thread-Topic: Does change to ICU in Lucene/Solr 3.3 require re-indexing?
Thread-Index: AcxCVBCZJb8A6ciGS1ybacoMaKIuJgABdevw
Message-ID: <47316FE3F6BA0D4DADF99663512552680D04DB45F1@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <47316FE3F6BA0D4DADF99663512552680D04DB45BF@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <CAOdYfZXq+e=pcTnVUqNATjg_kwfGyShxFbpZmmJJa4bjLzmnCw@mail.gmail.com>
In-Reply-To: <CAOdYfZXq+e=pcTnVUqNATjg_kwfGyShxFbpZmmJJa4bjLzmnCw@mail.gmail.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

VGhhbmtzIFJvYmVydCwNCg0KTG9va3MgbGlrZSB3ZSBpbmRleGVkIHdpdGggaWN1NGotNF80XzIu
amFyLCB3aGljaCBJIGFzc3VtZSBpcyBhIDQuNCB2ZXJzaW9uIHVzaW5nIHVuaWNvZGUgNS4yDQoN
CjMuMSBkZXY6IGljdTRqLTRfNF8yLmphcg0KMy4zOiAgICAgaWN1NGotNF84Lmphcg0KDQpTbyBk
byBJIGp1c3QgcHV0IHRoZSBpY3U0ai00XzRfMi5qYXIgaW4gJFNPTFJfSE9NRS9saWIgYWxvbmdz
aWRlIHRoZSBsdWNlbmUtaWN1LTMuMS1TTkFQU0hPVC5qYXI/DQoNCklzIHRoZXJlIGFueSBlYXN5
IHdheSB0byB0ZXN0Pw0KDQpTb3VuZHMgbGlrZSB3ZSB3aWxsIG5lZWQgdG8gcmUtaW5kZXggdGhl
IHdob2xlIDkgbWlsbGlvbiBib29rcyB3aXRoIHRoZSBTb2xyL0x1Y2VuZSAzLjMgKDQuOCBqYXIp
IHRvIGJlIG9uIHRoZSBzYWZlIHNpZGUuDQoNCg0KVG9tDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2Ut
LS0tLQ0KRnJvbTogUm9iZXJ0IE11aXIgW21haWx0bzpyY211aXJAZ21haWwuY29tXSANClNlbnQ6
IFRodXJzZGF5LCBKdWx5IDE0LCAyMDExIDI6MjkgUE0NClRvOiBqYXZhLXVzZXJAbHVjZW5lLmFw
YWNoZS5vcmcNClN1YmplY3Q6IFJlOiBEb2VzIGNoYW5nZSB0byBJQ1UgaW4gTHVjZW5lL1NvbHIg
My4zIHJlcXVpcmUgcmUtaW5kZXhpbmc/DQoNCkl0IGNvdWxkIGJlIHRoZSBjYXNlLCBidXQgSSBh
bSBub3Qgc3VyZSB3aGF0IHZlcnNpb24gb2YgaWN1IGphciB5b3UNCmhhZCBiZWZvcmUgd2l0aG91
dCBsb29raW5nIHRocnUgc3ZuIGxvZ3MuDQoNCmlmIHlvdSBhcmUgY3VycmVudGx5IHVzaW5nIDQu
NiwgeW91IGFyZSBwcm9iYWJseSBvaywgYXMgdGhhdCB3YXMgd2hlbg0KdGhlIHVuaWNvZGUgdmVy
c2lvbiB3YXMgYnVtcGVkIHRvIDYuMC4NCm1vc3Qgb2YgdGhlIHJ1bGVzIGV0YyBhcmUgZHJpdmVu
IGJ5IHRoZSB1bmljb2RlIHZlcnNpb24gaXRzZWxmLg0KDQpJIHdvdWxkIHN1Z2dlc3QganVzdCB1
c2luZyB5b3VyIG9sZCBpY3UgamFyIGFuZCBsdWNlbmUtaWN1LmphciB1bnRpbA0KeW91IHlvdXJz
ZWxmIHdhbnQgdG8gdXBncmFkZS4uLiBpdHMgbm90IGd1YXJhbnRlZWQgdG8gd29yayBidXQgSQ0K
c3VzcGVjdCBpdCB3aWxsIDopDQoNCk9uIFRodSwgSnVsIDE0LCAyMDExIGF0IDI6MDggUE0sIEJ1
cnRvbi1XZXN0LCBUb20gPHRidXJ0b253QHVtaWNoLmVkdT4gd3JvdGU6DQo+IFdlIGFyZSBhYm91
dCB0byB1cGdyYWRlIHRvIFNvbHIvTHVjZW5lIDMuMyBmcm9tIGEgMy4xZGV2IHZlcnNpb24gKEx1
Y2VuZSBJbXBsZW1lbnRhdGlvbiBWZXJzaW9uOiAzLjEtU05BUFNIT1QgMTAzNjA5NCAtIDIwMTAt
MTEtMTkgMTY6MDE6MTApDQo+DQo+IFdlIGhhdmUgYSA2IFRCICsgaW5kZXggdGhhdCBpbmNsdWRl
cyBzb21ld2hlcmUgb3ZlciAyMDAgbGFuZ3VhZ2VzIHRoYXQgd2FzIGluZGV4ZWQgd2l0aCB0aGUg
SUNVVG9rZW5pemVyIGFuZCBJQ1VGb2xkaW5nRmlsdGVyIGZyb20gwqAzLjFkZXYgYW5kIHdvdWxk
IGxpa2UgdG8gYXZvaWQgcmUtaW5kZXhpbmcgaWYgcG9zc2libGUuDQo+DQo+IExVQ0VORS0zMTQ5
PGh0dHA6Ly9pc3N1ZXMuYXBhY2hlLm9yZy9qaXJhL2Jyb3dzZS9MVUNFTkUtMzE0OT46IFVwZ3Jh
ZGUgY29udHJpYi9pY3UncyBJQ1UgamFyIGZpbGUgdG8gSUNVIDQuOC4NCj4gSSBjb3VsZG4ndCB0
ZWxsIGZyb20gbG9va2luZyBhdCB0aGUgcmVsZWFzZSBub3RlcyBmcm9tIElDVSA0Ljggd2hldGhl
ciB0aGUgY2hhbmdlcyBhZmZlY3RlZCBpbnRlcm5hbCBBUEkncyBvciBhY3R1YWwgcnVsZXMgZm9y
IHRva2VuaXppbmcgb3IgZm9sZGluZw0KPg0KPiBEbyB0aGUgY2hhbmdlcyB0byB0aGUgSUNVIGZp
bHRlcnMvdG9rZW5pemVycyBpbiBTb2xyL0x1Y2VuZSAzLjMgY2hhbmdlIGhvdyB0b2tlbml6aW5n
IGFuZCB0aGUgZm9sZGluZyBmaWx0ZXIgd29yayBpbiB0ZXJtcyBvZiBxdWVyaWVzIHJ1biB0aHJv
dWdoIHRoZSAzLjMgZmlsdGVycyBwb3NzaWJseSBub3QgbWF0Y2hpbmcgZG9jdW1lbnRzIGluZGV4
ZWQgd2l0aCB0aGUgMy4xZGV2IGZpbHRlcnM/DQo+DQo+IFRvbSBCdXJ0b24tV2VzdA0KPg0KPg0K
Pg0KDQoNCg0KLS0gDQpsdWNpZGltYWdpbmF0aW9uLmNvbQ0KDQotLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NClRvIHVu
c3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9y
Zw0KRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5l
LmFwYWNoZS5vcmcNCg0K


From java-user-return-50337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Thu Jul 14 20:05:42 2011
Return-Path: <java-user-return-50337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A96B7F2B
	for <apmail-lucene-java-user-archive@www.apache.org>; Thu, 14 Jul 2011 20:05:42 +0000 (UTC)
Received: (qmail 30030 invoked by uid 500); 14 Jul 2011 20:05:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29964 invoked by uid 500); 14 Jul 2011 20:05:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29956 invoked by uid 99); 14 Jul 2011 20:05:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 20:05:39 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rcmuir@gmail.com designates 209.85.161.53 as permitted sender)
Received: from [209.85.161.53] (HELO mail-fx0-f53.google.com) (209.85.161.53)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2011 20:05:34 +0000
Received: by fxd23 with SMTP id 23so987754fxd.12
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 13:05:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=Dde2zyzNzh204Kg0zqmE7Kmsvw9jC8EWyjPKrBZ1GZA=;
        b=w/SZ6WkbZ1sDAG0w6xcSvra+tKebVhTqdM7YpygFmiTyLBIoeK1KzXkfu9nobuMTvY
         MzrRukOEh2lln8NNxo8acGENxYC+wc146F/ItaMznfO2/OqV/ObXVt9ZSC6bhuW5larF
         rqWeImagO8TlDw485X3FFVtJdiiLom7vk1ox0=
Received: by 10.204.101.10 with SMTP id a10mr1102956bko.183.1310673912419;
 Thu, 14 Jul 2011 13:05:12 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.204.66.132 with HTTP; Thu, 14 Jul 2011 13:04:52 -0700 (PDT)
In-Reply-To: <47316FE3F6BA0D4DADF99663512552680D04DB45F1@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
References: <47316FE3F6BA0D4DADF99663512552680D04DB45BF@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
 <CAOdYfZXq+e=pcTnVUqNATjg_kwfGyShxFbpZmmJJa4bjLzmnCw@mail.gmail.com> <47316FE3F6BA0D4DADF99663512552680D04DB45F1@ITCS-ECLS-1-VS3.adsroot.itcs.umich.edu>
From: Robert Muir <rcmuir@gmail.com>
Date: Thu, 14 Jul 2011 16:04:52 -0400
Message-ID: <CAOdYfZX1+ueviTkHGo=KjM+xvrkiaSSy1m9+q9foaWt4KgU9OA@mail.gmail.com>
Subject: Re: Does change to ICU in Lucene/Solr 3.3 require re-indexing?
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Thu, Jul 14, 2011 at 3:34 PM, Burton-West, Tom <tburtonw@umich.edu> wrot=
e:
> Thanks Robert,
>
> Looks like we indexed with icu4j-4_4_2.jar, which I assume is a 4.4 versi=
on using unicode 5.2
>
> 3.1 dev: icu4j-4_4_2.jar
> 3.3: =C2=A0 =C2=A0 icu4j-4_8.jar
>
> So do I just put the icu4j-4_4_2.jar in $SOLR_HOME/lib alongside the luce=
ne-icu-3.1-SNAPSHOT.jar?
>

this is just what i would do.

the only reason this would not work, is if we broke backwards
compatibility in lucene itself.
When we do this, its always at the top of the CHANGES.txt... I don't
think we did this since 3.1 with anything analysis related.

But if you want to be super-careful! I would do this:

take your specific revision of contrib/icu and plop it in a lucene 3.3 chec=
kout.
then run all its tests, and use that, so its recompiled and tested
against lucene-3.3's core.

I definitely would not reindex though!
--=20
lucidimagination.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 00:03:24 2011
Return-Path: <java-user-return-50338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id AA0617B55
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 00:03:24 +0000 (UTC)
Received: (qmail 26974 invoked by uid 500); 15 Jul 2011 00:03:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26853 invoked by uid 500); 15 Jul 2011 00:03:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26845 invoked by uid 99); 15 Jul 2011 00:03:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 00:03:21 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Trieu.Jason@con-way.com designates 63.230.177.41 as permitted sender)
Received: from [63.230.177.41] (HELO idcxpr0408.con-way.com) (63.230.177.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 00:03:13 +0000
Received: from idcxpr0408.con-way.com (localhost [127.0.0.1])
	by idcxpr0408.con-way.com (Postfix) with ESMTP id AC5AA10993
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 17:02:51 -0700 (PDT)
Received: from DCXPRCL013.cnf.prod.cnf.com (dcxprcl013.cnf.prod.cnf.com [10.1.23.213])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by idcxpr0408.con-way.com (Postfix) with ESMTPS id A156710305
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 17:02:51 -0700 (PDT)
Received: from DCXPRCL017.cnf.prod.cnf.com ([10.1.23.217]) by
 DCXPRCL013.cnf.prod.cnf.com ([10.1.23.213]) with mapi; Thu, 14 Jul 2011
 17:02:51 -0700
From: "Trieu, Jason T" <Trieu.Jason@con-way.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Date: Thu, 14 Jul 2011 17:02:50 -0700
Subject: Searching for Empty Field
Thread-Topic: Searching for Empty Field
Thread-Index: AcxCgomxQB1WKMptT56rHMf3eLbMVA==
Message-ID: <535ACC431D43F445A7AF14BCE480EF800175F613FA@DCXPRCL017.cnf.prod.cnf.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US
Content-Type: multipart/alternative;
	boundary="_000_535ACC431D43F445A7AF14BCE480EF800175F613FADCXPRCL017cnf_"
MIME-Version: 1.0
X-Virus-Scanned: ClamAV using ClamSMTP
X-Virus-Checked: Checked by ClamAV on apache.org

--_000_535ACC431D43F445A7AF14BCE480EF800175F613FADCXPRCL017cnf_
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

I read postings about searching for empty field with but did not find any c=
ases of successful search using query language syntax itself(-myField:[* TO=
 *] for example). I  saw that other techniques like using a filter were use=
d to get around this syntax string limitation.   Given that the latest post=
ings on this topic were a few years old, I am wondering  if there have been=
 any changes in Lucene query syntax to support searching for empty fields. =
  Has anyone been successfully searched for empty fields with recent Lucene=
 releases?

Thanks

Jason



--_000_535ACC431D43F445A7AF14BCE480EF800175F613FADCXPRCL017cnf_--

From java-user-return-50339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 04:53:00 2011
Return-Path: <java-user-return-50339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 30E9D6FF8
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 04:53:00 +0000 (UTC)
Received: (qmail 41786 invoked by uid 500); 15 Jul 2011 04:52:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41030 invoked by uid 500); 15 Jul 2011 04:52:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41006 invoked by uid 99); 15 Jul 2011 04:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 04:52:50 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of findbestopensource@gmail.com designates 209.85.220.176 as permitted sender)
Received: from [209.85.220.176] (HELO mail-vx0-f176.google.com) (209.85.220.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 04:52:45 +0000
Received: by vxd2 with SMTP id 2so1132106vxd.35
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 21:52:24 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=VWmZU4Xe+qy9wBvS7cSTCke+W98wWMgpuQ7zuZlYRHg=;
        b=lhpR1faLCWhjF8jLAxCUekCxVsh6EanrCObzaSrZpa/V4NaFbArRj8HX8zLfGeCGJO
         1EUMz5hAFMAzQlB+ryfrfpPjDxoFb7iOmbz0t1D5NB8HnV8Jky7fZrWnt0VEIKbbwrox
         wGn/cfcZ+oBnPjzCfX67L2YOUE18lhSw3Hw/c=
MIME-Version: 1.0
Received: by 10.52.177.104 with SMTP id cp8mr3273924vdc.132.1310705544618;
 Thu, 14 Jul 2011 21:52:24 -0700 (PDT)
Received: by 10.52.185.199 with HTTP; Thu, 14 Jul 2011 21:52:24 -0700 (PDT)
In-Reply-To: <535ACC431D43F445A7AF14BCE480EF800175F613FA@DCXPRCL017.cnf.prod.cnf.com>
References: <535ACC431D43F445A7AF14BCE480EF800175F613FA@DCXPRCL017.cnf.prod.cnf.com>
Date: Fri, 15 Jul 2011 10:22:24 +0530
Message-ID: <CAE9W93MpSMdV7bQ3Tgb3X2ib8JPKXtDjaY=6qTUxPBsDWYwjgw@mail.gmail.com>
Subject: Re: Searching for Empty Field
From: findbestopensource <findbestopensource@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf3071c81264649104a8146aa0

--20cf3071c81264649104a8146aa0
Content-Type: text/plain; charset=ISO-8859-1

Hi Jason,

The easiest way would be to set some default value for the field which is
empty, Say EMPTY and search for this string to check out the records having
empty field.

Regards
Aditya
www.findbestopensource.com


On Fri, Jul 15, 2011 at 5:32 AM, Trieu, Jason T <Trieu.Jason@con-way.com>wrote:

> Hi all,
>
> I read postings about searching for empty field with but did not find any
> cases of successful search using query language syntax itself(-myField:[* TO
> *] for example). I  saw that other techniques like using a filter were used
> to get around this syntax string limitation.   Given that the latest
> postings on this topic were a few years old, I am wondering  if there have
> been any changes in Lucene query syntax to support searching for empty
> fields.   Has anyone been successfully searched for empty fields with recent
> Lucene releases?
>
> Thanks
>
> Jason
>
>
>

--20cf3071c81264649104a8146aa0--

From java-user-return-50340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 06:11:05 2011
Return-Path: <java-user-return-50340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5465B69BF
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 06:11:05 +0000 (UTC)
Received: (qmail 7021 invoked by uid 500); 15 Jul 2011 06:11:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6170 invoked by uid 500); 15 Jul 2011 06:10:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6151 invoked by uid 99); 15 Jul 2011 06:10:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 06:10:36 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of trejkaz@trypticon.org designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 06:10:26 +0000
Received: by gwj22 with SMTP id 22so570161gwj.35
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 23:10:05 -0700 (PDT)
Received: by 10.236.181.9 with SMTP id k9mr475113yhm.435.1310710205231;
        Thu, 14 Jul 2011 23:10:05 -0700 (PDT)
Received: from mail-gy0-f176.google.com (mail-gy0-f176.google.com [209.85.160.176])
        by mx.google.com with ESMTPS id v4sm924390yhm.34.2011.07.14.23.10.03
        (version=SSLv3 cipher=OTHER);
        Thu, 14 Jul 2011 23:10:04 -0700 (PDT)
Received: by gyb11 with SMTP id 11so576034gyb.35
        for <java-user@lucene.apache.org>; Thu, 14 Jul 2011 23:10:03 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.151.118.10 with SMTP id v10mr3356987ybm.23.1310710203047; Thu,
 14 Jul 2011 23:10:03 -0700 (PDT)
Received: by 10.151.100.17 with HTTP; Thu, 14 Jul 2011 23:10:03 -0700 (PDT)
In-Reply-To: <535ACC431D43F445A7AF14BCE480EF800175F613FA@DCXPRCL017.cnf.prod.cnf.com>
References: <535ACC431D43F445A7AF14BCE480EF800175F613FA@DCXPRCL017.cnf.prod.cnf.com>
Date: Fri, 15 Jul 2011 16:10:03 +1000
Message-ID: <CADuAvzcLPPNqbuAgnjWCx73ZLcwRpQG+Y9rH_qUwmuDX_w9HFw@mail.gmail.com>
Subject: Re: Searching for Empty Field
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
X-Virus-Checked: Checked by ClamAV on apache.org

On Fri, Jul 15, 2011 at 10:02 AM, Trieu, Jason T
<Trieu.Jason@con-way.com> wrote:
> Hi all,
>
> I read postings about searching for empty field with but did not find any cases of successful search using query language syntax itself(-myField:[* TO *] for example).

We have been using:  -myField:*

You would need to use setAllowLeadingWildcard on the QueryParser and
it wouldn't exactly be fast, but it works for us.

The suggestion to use a magic token is a good idea, though I would put
it in a separate field called "has" or something... so you can do:

    has:title   (same results as title:* but quicker to run)

The crappy thing is that to actually detect if there are any tokens in
the field you need to make a TokenStream which can be used to read the
first token and then rewind again.  I'm not sure if there is such a
thing in Lucene at the moment.  We had to write it ourselves but we
were on a considerably older version at the time.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 06:46:09 2011
Return-Path: <java-user-return-50341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6E7E862A0
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 06:46:09 +0000 (UTC)
Received: (qmail 43475 invoked by uid 500); 15 Jul 2011 06:46:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43074 invoked by uid 500); 15 Jul 2011 06:45:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43031 invoked by uid 99); 15 Jul 2011 06:45:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 06:45:47 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 06:45:37 +0000
Received: from VEGA (port-92-196-55-61.dynamic.qsc.de [92.196.55.61])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id 2B4A514AA3F7
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2011 06:45:17 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <535ACC431D43F445A7AF14BCE480EF800175F613FA@DCXPRCL017.cnf.prod.cnf.com> <CADuAvzcLPPNqbuAgnjWCx73ZLcwRpQG+Y9rH_qUwmuDX_w9HFw@mail.gmail.com>
In-Reply-To: <CADuAvzcLPPNqbuAgnjWCx73ZLcwRpQG+Y9rH_qUwmuDX_w9HFw@mail.gmail.com>
Subject: RE: Searching for Empty Field
Date: Fri, 15 Jul 2011 08:45:25 +0200
Message-ID: <006b01cc42ba$c6fc8550$54f58ff0$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQKYMFColfp8ji3m5KZccqLJ2DPtUwEKKOhPk0zDaYA=
Content-Language: de
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

> The crappy thing is that to actually detect if there are any tokens in =
the field
> you need to make a TokenStream which can be used to read the first =
token
> and then rewind again.  I'm not sure if there is such a thing in =
Lucene at the
> moment.  We had to write it ourselves but we were on a considerably =
older
> version at the time.

CachingTokenFilter plugged over any other TokenStream.

Uwe


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 07:00:54 2011
Return-Path: <java-user-return-50342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 8ECA06642
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 07:00:54 +0000 (UTC)
Received: (qmail 51617 invoked by uid 500); 15 Jul 2011 07:00:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50927 invoked by uid 500); 15 Jul 2011 07:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50871 invoked by uid 99); 15 Jul 2011 07:00:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 07:00:32 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trejkaz@trypticon.org designates 74.125.83.48 as permitted sender)
Received: from [74.125.83.48] (HELO mail-gw0-f48.google.com) (74.125.83.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 07:00:25 +0000
Received: by gwj22 with SMTP id 22so581431gwj.35
        for <java-user@lucene.apache.org>; Fri, 15 Jul 2011 00:00:04 -0700 (PDT)
Received: by 10.146.75.33 with SMTP id x33mr2966556yaa.31.1310713204245;
        Fri, 15 Jul 2011 00:00:04 -0700 (PDT)
Received: from mail-gy0-f176.google.com (mail-gy0-f176.google.com [209.85.160.176])
        by mx.google.com with ESMTPS id o4sm1002028anj.48.2011.07.15.00.00.02
        (version=SSLv3 cipher=OTHER);
        Fri, 15 Jul 2011 00:00:03 -0700 (PDT)
Received: by gyb11 with SMTP id 11so587649gyb.35
        for <java-user@lucene.apache.org>; Fri, 15 Jul 2011 00:00:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.150.114.11 with SMTP id m11mr3046363ybc.137.1310713202210;
 Fri, 15 Jul 2011 00:00:02 -0700 (PDT)
Received: by 10.151.100.17 with HTTP; Fri, 15 Jul 2011 00:00:02 -0700 (PDT)
In-Reply-To: <006b01cc42ba$c6fc8550$54f58ff0$@thetaphi.de>
References: <535ACC431D43F445A7AF14BCE480EF800175F613FA@DCXPRCL017.cnf.prod.cnf.com>
	<CADuAvzcLPPNqbuAgnjWCx73ZLcwRpQG+Y9rH_qUwmuDX_w9HFw@mail.gmail.com>
	<006b01cc42ba$c6fc8550$54f58ff0$@thetaphi.de>
Date: Fri, 15 Jul 2011 17:00:02 +1000
Message-ID: <CADuAvzdPiAeJDOP7+dA4TZ7agoqd15CJnsxaM2pLEePf0tH4Fw@mail.gmail.com>
Subject: Re: Searching for Empty Field
From: Trejkaz <trejkaz@trypticon.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

On Fri, Jul 15, 2011 at 4:45 PM, Uwe Schindler <uwe@thetaphi.de> wrote:
> Hi,
>
>> The crappy thing is that to actually detect if there are any tokens in t=
he field
>> you need to make a TokenStream which can be used to read the first token
>> and then rewind again. =C2=A0I'm not sure if there is such a thing in Lu=
cene at the
>> moment. =C2=A0We had to write it ourselves but we were on a considerably=
 older
>> version at the time.
>
> CachingTokenFilter plugged over any other TokenStream.

Ah, quite right.  If you can afford the memory it will eat (or if your
documents are all relatively small), CachingTokenFilter will work.  I
think in our case it caused OOME for larger character streams, which
is why we ended up falling back to one which only cached the first
token.

TX

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 14:02:15 2011
Return-Path: <java-user-return-50343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 96701663D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 14:02:15 +0000 (UTC)
Received: (qmail 71921 invoked by uid 500); 15 Jul 2011 14:02:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71785 invoked by uid 500); 15 Jul 2011 14:02:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71777 invoked by uid 99); 15 Jul 2011 14:02:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 14:02:11 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trewig@mufin.com designates 195.214.216.124 as permitted sender)
Received: from [195.214.216.124] (HELO mx4.de.magix.net) (195.214.216.124)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 14:02:04 +0000
Received: from [192.168.1.18] (port=41561)
	by mx4.de.magix.net with esmtpa (Exim 4.69)
	(envelope-from <trewig@mufin.com>)
	id 1Qhixb-0003CN-8V
	for java-user@lucene.apache.org; Fri, 15 Jul 2011 16:01:43 +0200
Message-ID: <4E204844.6020502@mufin.com>
Date: Fri, 15 Jul 2011 16:01:40 +0200
From: Thomas Rewig <trewig@mufin.com>
Organization: mufin
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; de; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: TermQuery - ExactMatching, Lucene 3.1.0 vs. 3.3.0, special character
 behavior
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-SA-Exim-Connect-IP: 192.168.1.18
X-SA-Exim-Mail-From: trewig@mufin.com
X-SA-Exim-Scanned: No (on mx4.de.magix.net); SAEximRunCond expanded to false

  Hello,

there is a index with a lot of docs, 2 of them are:

doc1:

     1.Field=id            ITSVopfOLB=ITS---f0-- Value= 192
     2.Field=name     ITSVopfOLB=ITS----0-- Value= queen

doc2:

     1.Field=id            ITSVopfOLB=ITS---f0-- Value= 701492
     2.Field=name     ITSVopfOLB=ITS----0-- Value= queen板野友美 (Here 
are chinese characters - hopefully you can see them)

if I search in the index - with a TermQuery there is a different 
behavior between Lucene 3.1.0 and 3.3.0 :

Query:

     Term:field='name' text='queen'

Result Lucene 3.1.0:

     0    Score=13,2132    Doc.Id=176002    id=192 name=queen
     1    Score=13,2132    Doc.Id=523407    id=701492 name=queen板野友美

Result Lucene 3.3.0:

     0    Score=13,2132    Doc.Id=523407    id=701492 name=queen板野友美
     1    Score=13,2132    Doc.Id=176002    id=192 name=queen

The result from Lucene 3.1.0 is that, what I would expect if I do a 
'exact matching' Term Query.
Each index was indexed with its associated LuceneVersion.
I tested it with luke and with my own Code - the result was always the 
same.

Is it a new feature in Lucene 3.3.0 or a bug?

Thanks in advance!
Thomas


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 15:01:25 2011
Return-Path: <java-user-return-50344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id BA54E6B9D
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 15:01:25 +0000 (UTC)
Received: (qmail 99895 invoked by uid 500); 15 Jul 2011 15:01:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99674 invoked by uid 500); 15 Jul 2011 15:01:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99666 invoked by uid 99); 15 Jul 2011 15:01:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 15:01:22 +0000
X-ASF-Spam-Status: No, hits=1.2 required=5.0
	tests=FREEMAIL_FROM,HK_RANDOM_ENVFROM,HK_RANDOM_FROM,RCVD_IN_DNSWL_NONE,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of junkwrc@comcast.net designates 76.96.27.212 as permitted sender)
Received: from [76.96.27.212] (HELO qmta14.emeryville.ca.mail.comcast.net) (76.96.27.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 15:01:12 +0000
Received: from omta12.emeryville.ca.mail.comcast.net ([76.96.30.44])
	by qmta14.emeryville.ca.mail.comcast.net with comcast
	id 8Eql1h0030x6nqcAEF0oUC; Fri, 15 Jul 2011 15:00:48 +0000
Received: from [192.168.0.2] ([71.233.183.69])
	by omta12.emeryville.ca.mail.comcast.net with comcast
	id 8F0k1h01x1WFBJX8YF0lsq; Fri, 15 Jul 2011 15:00:46 +0000
Message-ID: <4E20561F.7010509@comcast.net>
Date: Fri, 15 Jul 2011 11:00:47 -0400
From: Walt <junkwrc@comcast.net>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.17) Gecko/20110424 Thunderbird/3.1.10
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: teragram to Lucene
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
    I am responsible for moving a Teragram application to Lucene. I have
identified the following issues so I would like verification that what
the existing rules have do not exist in Lucene or there is a work-around.

1) Teragram uses a Polish Notation for its rules, i.e.
Note: DIST_2 is a proximity of within 2 words

DIST_2     (OR (phrase1, phrase 2, .... phrase 20)
                (OR(phrasea, phraseb, phrase c)
)

This says "if any phrase in this group is within 2 words of any phrase
in the second group".

My understanding is proximity in Lucene is only against individual
phrases, not between two groups. Is there any way to do the functional
equivalent short of

"phrase1 phrasea"~2 "phrase1 phraseb"~2 "phrase2 phrasea"~2 "phrase2
phraseb"~2 etc

The other question I have is "is there a notion of a sentence such that
one could say do these word occur in the same sentence?

Thanks,

Walt Corey

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 15:12:26 2011
Return-Path: <java-user-return-50345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 835F46F94
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 15:12:26 +0000 (UTC)
Received: (qmail 20485 invoked by uid 500); 15 Jul 2011 15:12:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20187 invoked by uid 500); 15 Jul 2011 15:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19959 invoked by uid 99); 15 Jul 2011 15:12:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 15:12:22 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=MIME_BASE64_BLANKS,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.32.180.14] (HELO VA3EHSOBE004.bigfish.com) (216.32.180.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 15:12:14 +0000
Received: from mail54-va3-R.bigfish.com (10.7.14.237) by
 VA3EHSOBE004.bigfish.com (10.7.40.24) with Microsoft SMTP Server id
 14.1.225.22; Fri, 15 Jul 2011 15:11:51 +0000
Received: from mail54-va3 (localhost.localdomain [127.0.0.1])	by
 mail54-va3-R.bigfish.com (Postfix) with ESMTP id 3862EC50634	for
 <java-user@lucene.apache.org>; Fri, 15 Jul 2011 15:11:51 +0000 (UTC)
X-SpamScore: -27
X-BigFish: VPS-27(zzbb2dK9371M62a3K4082K542M1432N98dK111aL9db4mzz1202hzz8275ch8275dhz2dh2a8h668h839h93fh61h)
X-Spam-TCS-SCL: 0:0
X-Forefront-Antispam-Report: CIP:212.123.12.34;KIP:(null);UIP:(null);IPVD:NLI;H:mercurius02.brepols.net;RD:none;EFVD:NLI
Received: from mail54-va3 (localhost.localdomain [127.0.0.1]) by mail54-va3
 (MessageSwitch) id 1310742664780946_14656; Fri, 15 Jul 2011 15:11:04 +0000
 (UTC)
Received: from VA3EHSMHS002.bigfish.com (unknown [10.7.14.241])	by
 mail54-va3.bigfish.com (Postfix) with ESMTP id C420E1C50089	for
 <java-user@lucene.apache.org>; Fri, 15 Jul 2011 15:08:55 +0000 (UTC)
Received: from mercurius02.brepols.net (212.123.12.34) by
 VA3EHSMHS002.bigfish.com (10.7.99.12) with Microsoft SMTP Server (TLS) id
 14.1.225.22; Fri, 15 Jul 2011 15:08:42 +0000
Received: from mercurius02.brepols.net ([172.0.0.228]) by
 mercurius02.brepols.net ([172.0.0.228]) with mapi; Fri, 15 Jul 2011 17:08:21
 +0200
From: Jeroen Lauwers <Jeroen.Lauwers@CTLO.NET>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Fri, 15 Jul 2011 17:08:20 +0200
Subject: RE: Advanced NearSpanQuery
Thread-Topic: Advanced NearSpanQuery
Thread-Index: AcxBoEDpbIex//9PSfe7BoqkUB588gBXuEkw
Message-ID: <1ABD04F5A978B74B950BF85B535E73C926E99BFFAA@mercurius02.brepols.net>
References: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>
	<4E1D9C34.7000700@ifactory.com>
	<1ABD04F5A978B74B950BF85B535E73C926E99BFFA2@mercurius02.brepols.net>
 <CAAHmpkgQ179NmY4x4Ls_=70Hb-XdbGtu=rmLXruCea_dYBdDOg@mail.gmail.com>
 <4E1E07D2.40305@ifactory.com>
In-Reply-To: <4E1E07D2.40305@ifactory.com>
Accept-Language: en-US, nl-BE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, nl-BE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: ctlo.net

SGkgTWlrZSBhbmQgU2ltb24sDQoNClRoYW5rcyBhZ2FpbiBmb3IgeW91ciBoZWxwLCBidXQgSSd2
ZSBjcmVhdGVkIG15IG93biBzb2x1dGlvbiBieSB3cml0aW5nIGEgY3VzdG9tIHNwYW4gcXVlcnku
DQpOb3csIEkgY2FuIHBlcmZvcm0gc2VhcmNoZXMgd2hlcmUgc29tZSBvZiB0aGUgdGVybXMgdGhh
dCBJIHN1cHBseSBpbiB0aGUgcXVlcnkgY2FuIGJlIG1pc3NpbmcgZnJvbSB0aGUgcmVzdWx0Lg0K
VGhpcyB3YXkgaXQgYWxsb3dzIGZvciBhIHNsb3AgYXQgdGhlIHF1ZXJ5IHNpZGUgQU5EIG9uIHRo
ZSByZXN1bHQgc2lkZS4NCg0KSW4gY2FzZSB5b3UgYXJlIGludGVyZXN0ZWQsIGhlcmUncyB0aGUg
Y29kZTogSXQncyBDIyBhbmQgbm90IEphdmEsIEkga25vdywgYnV0IGhleSwgbG9vayBhdCBpdCBh
cyBwc2V1ZG8tY29kZS4NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQp1c2luZyBTeXN0
ZW07DQoNCnVzaW5nIEluZGV4UmVhZGVyID0gTHVjZW5lLk5ldC5JbmRleC5JbmRleFJlYWRlcjsN
CnVzaW5nIFF1ZXJ5ID0gTHVjZW5lLk5ldC5TZWFyY2guUXVlcnk7DQp1c2luZyBUb1N0cmluZ1V0
aWxzID0gTHVjZW5lLk5ldC5VdGlsLlRvU3RyaW5nVXRpbHM7DQoNCm5hbWVzcGFjZSBMdWNlbmUu
TmV0LlNlYXJjaC5TcGFucw0Kew0KICAgIFtTZXJpYWxpemFibGVdDQogICAgcHVibGljIGNsYXNz
IFNwYW5OZWFyV2l0aE1pblJlcXVpcmVkU3ViU3BhbkhpdHNRdWVyeSA6IFNwYW5RdWVyeQ0KICAg
IHsNCiAgICAgICAgcHJpdmF0ZSBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0IGNsYXVzZXM7
DQogICAgICAgIHByaXZhdGUgaW50IHNsb3A7DQogICAgICAgIHByaXZhdGUgYm9vbCBpbk9yZGVy
Ow0KICAgICAgICBwcml2YXRlIGludCBtaW5SZXF1aXJlZFRlcm1zOw0KDQogICAgICAgIHByaXZh
dGUgU3lzdGVtLlN0cmluZyBmaWVsZDsNCg0KDQogICAgICAgIHB1YmxpYyBTcGFuTmVhcldpdGhN
aW5SZXF1aXJlZFN1YlNwYW5IaXRzUXVlcnkoU3BhblF1ZXJ5W10gY2xhdXNlcywgaW50IHNsb3As
IGJvb2wgaW5PcmRlciwgaW50IG1pblJlcXVpcmVkU3ViU3BhbkhpdHMpDQogICAgICAgIHsNCg0K
ICAgICAgICAgICAgLy8gY29weSBjbGF1c2VzIGFycmF5IGludG8gYW4gQXJyYXlMaXN0DQogICAg
ICAgICAgICB0aGlzLmNsYXVzZXMgPSBuZXcgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdChj
bGF1c2VzLkxlbmd0aCk7DQogICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IGNsYXVzZXMu
TGVuZ3RoOyBpKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgU3BhblF1ZXJ5IGNs
YXVzZSA9IGNsYXVzZXNbaV07DQogICAgICAgICAgICAgICAgaWYgKGkgPT0gMCkNCiAgICAgICAg
ICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGZpZWxkDQogICAgICAgICAg
ICAgICAgICAgIGZpZWxkID0gY2xhdXNlLkdldEZpZWxkKCk7DQogICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFjbGF1c2UuR2V0RmllbGQoKS5FcXVhbHMoZmllbGQp
KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5c3Rl
bS5Bcmd1bWVudEV4Y2VwdGlvbigiQ2xhdXNlcyBtdXN0IGhhdmUgc2FtZSBmaWVsZC4iKTsNCiAg
ICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5jbGF1c2VzLkFkZChjbGF1c2Up
Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICB0aGlzLnNsb3AgPSBzbG9wOw0KICAgICAg
ICAgICAgdGhpcy5pbk9yZGVyID0gaW5PcmRlcjsNCiAgICAgICAgICAgIHRoaXMubWluUmVxdWly
ZWRUZXJtcyA9IG1pblJlcXVpcmVkU3ViU3BhbkhpdHM7DQogICAgICAgIH0NCg0KICAgICAgICAv
Ly8gPHN1bW1hcnk+UmV0dXJuIHRoZSBjbGF1c2VzIHdob3NlIHNwYW5zIGFyZSBtYXRjaGVkLiA8
L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyB2aXJ0dWFsIFNwYW5RdWVyeVtdIEdldENsYXVzZXMo
KQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gKFNwYW5RdWVyeVtdKWNsYXVzZXMuVG9B
cnJheSh0eXBlb2YoU3BhblF1ZXJ5KSk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHN1bW1h
cnk+UmV0dXJuIHRoZSBtYXhpbXVtIG51bWJlciBvZiB1bm1hdGNoZWQgdGVybXMgcGVybWl0dGVk
Ljwvc3VtbWFyeT4NCiAgICAgICAgcHVibGljIHZpcnR1YWwgaW50IEdldE1pblJlcXVpcmVkVGVy
bXMoKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gbWluUmVxdWlyZWRUZXJtczsNCiAg
ICAgICAgfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT5SZXR1cm4gdGhlIG1heGltdW0gbnVtYmVy
IG9mIGludGVydmVuaW5nIHVubWF0Y2hlZCBwb3NpdGlvbnMgcGVybWl0dGVkLjwvc3VtbWFyeT4N
CiAgICAgICAgcHVibGljIHZpcnR1YWwgaW50IEdldFNsb3AoKQ0KICAgICAgICB7DQogICAgICAg
ICAgICByZXR1cm4gc2xvcDsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT5SZXR1
cm4gdHJ1ZSBpZiBtYXRjaGVzIGFyZSByZXF1aXJlZCB0byBiZSBpbi1vcmRlci48L3N1bW1hcnk+
DQogICAgICAgIHB1YmxpYyB2aXJ0dWFsIGJvb2wgSXNJbk9yZGVyKCkNCiAgICAgICAgew0KICAg
ICAgICAgICAgcmV0dXJuIGluT3JkZXI7DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgb3Zl
cnJpZGUgU3lzdGVtLlN0cmluZyBHZXRGaWVsZCgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJl
dHVybiBmaWVsZDsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgcHVibGljIG92ZXJyaWRlIFN5c3Rl
bS5Db2xsZWN0aW9ucy5JQ29sbGVjdGlvbiBHZXRUZXJtcygpDQogICAgICAgIHsNCiAgICAgICAg
ICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QgdGVybXMgPSBuZXcgU3lzdGVtLkNvbGxl
Y3Rpb25zLkFycmF5TGlzdCgpOw0KICAgICAgICAgICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVt
ZXJhdG9yIGkgPSBjbGF1c2VzLkdldEVudW1lcmF0b3IoKTsNCiAgICAgICAgICAgIHdoaWxlIChp
Lk1vdmVOZXh0KCkpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgU3BhblF1ZXJ5IGNs
YXVzZSA9IChTcGFuUXVlcnkpaS5DdXJyZW50Ow0KICAgICAgICAgICAgICAgIHRlcm1zLkFkZFJh
bmdlKGNsYXVzZS5HZXRUZXJtcygpKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVy
biB0ZXJtczsNCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBvdmVycmlkZSB2b2lkIEV4dHJh
Y3RUZXJtcyhTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlIHRlcm1zKQ0KICAgICAgICB7DQog
ICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgaSA9IGNsYXVzZXMuR2V0
RW51bWVyYXRvcigpOw0KICAgICAgICAgICAgd2hpbGUgKGkuTW92ZU5leHQoKSkNCiAgICAgICAg
ICAgIHsNCiAgICAgICAgICAgICAgICBTcGFuUXVlcnkgY2xhdXNlID0gKFNwYW5RdWVyeSlpLkN1
cnJlbnQ7DQogICAgICAgICAgICAgICAgY2xhdXNlLkV4dHJhY3RUZXJtcyh0ZXJtcyk7DQogICAg
ICAgICAgICB9DQogICAgICAgIH0NCg0KDQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTeXN0ZW0u
U3RyaW5nIFRvU3RyaW5nKFN5c3RlbS5TdHJpbmcgZmllbGQpDQogICAgICAgIHsNCiAgICAgICAg
ICAgIFN5c3RlbS5UZXh0LlN0cmluZ0J1aWxkZXIgYnVmZmVyID0gbmV3IFN5c3RlbS5UZXh0LlN0
cmluZ0J1aWxkZXIoKTsNCiAgICAgICAgICAgIGJ1ZmZlci5BcHBlbmQoInNwYW5OZWFyKFsiKTsN
CiAgICAgICAgICAgIFN5c3RlbS5Db2xsZWN0aW9ucy5JRW51bWVyYXRvciBpID0gY2xhdXNlcy5H
ZXRFbnVtZXJhdG9yKCk7DQogICAgICAgICAgICB3aGlsZSAoaS5Nb3ZlTmV4dCgpKQ0KICAgICAg
ICAgICAgew0KICAgICAgICAgICAgICAgIFNwYW5RdWVyeSBjbGF1c2UgPSAoU3BhblF1ZXJ5KWku
Q3VycmVudDsNCiAgICAgICAgICAgICAgICBidWZmZXIuQXBwZW5kKGNsYXVzZS5Ub1N0cmluZyhm
aWVsZCkpOw0KICAgICAgICAgICAgICAgIGJ1ZmZlci5BcHBlbmQoIiwgIik7DQogICAgICAgICAg
ICB9DQogICAgICAgICAgICBpZiAoY2xhdXNlcy5Db3VudCA+IDApIGJ1ZmZlci5MZW5ndGggLT0g
MjsNCiAgICAgICAgICAgIGJ1ZmZlci5BcHBlbmQoIl0sICIpOw0KICAgICAgICAgICAgYnVmZmVy
LkFwcGVuZChzbG9wKTsNCiAgICAgICAgICAgIGJ1ZmZlci5BcHBlbmQoIiwgIik7DQogICAgICAg
ICAgICBidWZmZXIuQXBwZW5kKGluT3JkZXIpOw0KICAgICAgICAgICAgYnVmZmVyLkFwcGVuZCgi
KSIpOw0KICAgICAgICAgICAgYnVmZmVyLkFwcGVuZChUb1N0cmluZ1V0aWxzLkJvb3N0KEdldEJv
b3N0KCkpKTsNCiAgICAgICAgICAgIHJldHVybiBidWZmZXIuVG9TdHJpbmcoKTsNCiAgICAgICAg
fQ0KDQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBTcGFucyBHZXRTcGFucyhJbmRleFJlYWRlciBy
ZWFkZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChjbGF1c2VzLkNvdW50ID09IDApDQog
ICAgICAgICAgICAgICAgLy8gb3B0aW1pemUgMC1jbGF1c2UgY2FzZQ0KICAgICAgICAgICAgICAg
IHJldHVybiBuZXcgU3Bhbk9yUXVlcnkoR2V0Q2xhdXNlcygpKS5HZXRTcGFucyhyZWFkZXIpOw0K
DQogICAgICAgICAgICBpZiAoY2xhdXNlcy5Db3VudCA9PSAxKQ0KICAgICAgICAgICAgICAgIC8v
IG9wdGltaXplIDEtY2xhdXNlIGNhc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gKChTcGFuUXVl
cnkpY2xhdXNlc1swXSkuR2V0U3BhbnMocmVhZGVyKTsNCg0KICAgICAgICAgICAgcmV0dXJuIGlu
T3JkZXIgPyAoU3BhbnMpbmV3IE5lYXJTcGFuc1dpdGhNaW5SZXF1aXJlZFN1YlNwYW5IaXRzT3Jk
ZXJlZCh0aGlzLCByZWFkZXIpIDogKFNwYW5zKW5ldyBOZWFyU3BhbnNXaXRoTWluUmVxdWlyZWRT
dWJTcGFuSGl0c1Vub3JkZXJlZCh0aGlzLCByZWFkZXIpOw0KICAgICAgICB9DQoNCiAgICAgICAg
cHVibGljIG92ZXJyaWRlIFF1ZXJ5IFJld3JpdGUoSW5kZXhSZWFkZXIgcmVhZGVyKQ0KICAgICAg
ICB7DQogICAgICAgICAgICBTcGFuTmVhcldpdGhNaW5SZXF1aXJlZFN1YlNwYW5IaXRzUXVlcnkg
Y2xvbmUgPSBudWxsOw0KICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjbGF1c2VzLkNv
dW50OyBpKyspDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgU3BhblF1ZXJ5IGMgPSAo
U3BhblF1ZXJ5KWNsYXVzZXNbaV07DQogICAgICAgICAgICAgICAgU3BhblF1ZXJ5IHF1ZXJ5ID0g
KFNwYW5RdWVyeSljLlJld3JpdGUocmVhZGVyKTsNCiAgICAgICAgICAgICAgICBpZiAocXVlcnkg
IT0gYykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIC8vIGNsYXVzZSBy
ZXdyb3RlOiBtdXN0IGNsb25lDQogICAgICAgICAgICAgICAgICAgIGlmIChjbG9uZSA9PSBudWxs
KQ0KICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSAoU3Bhbk5lYXJXaXRoTWluUmVxdWly
ZWRTdWJTcGFuSGl0c1F1ZXJ5KXRoaXMuQ2xvbmUoKTsNCiAgICAgICAgICAgICAgICAgICAgY2xv
bmUuY2xhdXNlc1tpXSA9IHF1ZXJ5Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0N
CiAgICAgICAgICAgIGlmIChjbG9uZSAhPSBudWxsKQ0KICAgICAgICAgICAgew0KICAgICAgICAg
ICAgICAgIHJldHVybiBjbG9uZTsgLy8gc29tZSBjbGF1c2VzIHJld3JvdGUNCiAgICAgICAgICAg
IH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICByZXR1
cm4gdGhpczsgLy8gbm8gY2xhdXNlcyByZXdyb3RlDQogICAgICAgICAgICB9DQogICAgICAgIH0N
Cg0KICAgICAgICAvLy8gPHN1bW1hcnk+UmV0dXJucyB0cnVlIGlmZiA8Y29kZT5vPC9jb2RlPiBp
cyBlcXVhbCB0byB0aGlzLiA8L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyBvdmVycmlkZSBib29s
IEVxdWFscyhTeXN0ZW0uT2JqZWN0IG8pDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmICh0aGlz
ID09IG8pDQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICBpZiAoIShv
IGlzIFNwYW5OZWFyV2l0aE1pblJlcXVpcmVkU3ViU3BhbkhpdHNRdWVyeSkpDQogICAgICAgICAg
ICAgICAgcmV0dXJuIGZhbHNlOw0KDQogICAgICAgICAgICBTcGFuTmVhcldpdGhNaW5SZXF1aXJl
ZFN1YlNwYW5IaXRzUXVlcnkgc3Bhbk5lYXJRdWVyeSA9IChTcGFuTmVhcldpdGhNaW5SZXF1aXJl
ZFN1YlNwYW5IaXRzUXVlcnkpbzsNCg0KICAgICAgICAgICAgaWYgKGluT3JkZXIgIT0gc3Bhbk5l
YXJRdWVyeS5pbk9yZGVyKQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAg
ICAgIGlmIChzbG9wICE9IHNwYW5OZWFyUXVlcnkuc2xvcCkNCiAgICAgICAgICAgICAgICByZXR1
cm4gZmFsc2U7DQogICAgICAgICAgICBpZiAoY2xhdXNlcy5Db3VudCAhPSBzcGFuTmVhclF1ZXJ5
LmNsYXVzZXMuQ291bnQpDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAg
ICAgU3lzdGVtLkNvbGxlY3Rpb25zLklFbnVtZXJhdG9yIGl0ZXIxID0gY2xhdXNlcy5HZXRFbnVt
ZXJhdG9yKCk7DQogICAgICAgICAgICBTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmF0b3IgaXRl
cjIgPSBzcGFuTmVhclF1ZXJ5LmNsYXVzZXMuR2V0RW51bWVyYXRvcigpOw0KICAgICAgICAgICAg
d2hpbGUgKGl0ZXIxLk1vdmVOZXh0KCkgJiYgaXRlcjIuTW92ZU5leHQoKSkNCiAgICAgICAgICAg
IHsNCiAgICAgICAgICAgICAgICBTcGFuTmVhcldpdGhNaW5SZXF1aXJlZFN1YlNwYW5IaXRzUXVl
cnkgaXRlbTEgPSAoU3Bhbk5lYXJXaXRoTWluUmVxdWlyZWRTdWJTcGFuSGl0c1F1ZXJ5KWl0ZXIx
LkN1cnJlbnQ7DQogICAgICAgICAgICAgICAgU3Bhbk5lYXJXaXRoTWluUmVxdWlyZWRTdWJTcGFu
SGl0c1F1ZXJ5IGl0ZW0yID0gKFNwYW5OZWFyV2l0aE1pblJlcXVpcmVkU3ViU3BhbkhpdHNRdWVy
eSlpdGVyMi5DdXJyZW50Ow0KICAgICAgICAgICAgICAgIGlmICghaXRlbTEuRXF1YWxzKGl0ZW0y
KSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KDQog
ICAgICAgICAgICByZXR1cm4gR2V0Qm9vc3QoKSA9PSBzcGFuTmVhclF1ZXJ5LkdldEJvb3N0KCk7
DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgb3ZlcnJpZGUgaW50IEdldEhhc2hDb2RlKCkN
CiAgICAgICAgew0KICAgICAgICAgICAgbG9uZyByZXN1bHQ7DQogICAgICAgICAgICByZXN1bHQg
PSBjbGF1c2VzLkdldEhhc2hDb2RlKCk7DQogICAgICAgICAgICAvLyBNaXggYml0cyBiZWZvcmUg
Zm9sZGluZyBpbiB0aGluZ3MgbGlrZSBib29zdCwgc2luY2UgaXQgY291bGQgY2FuY2VsIHRoZQ0K
ICAgICAgICAgICAgLy8gbGFzdCBlbGVtZW50IG9mIGNsYXVzZXMuICBUaGlzIHBhcnRpY3VsYXIg
bWl4IGFsc28gc2VydmVzIHRvDQogICAgICAgICAgICAvLyBkaWZmZXJlbnRpYXRlIFNwYW5OZWFy
UXVlcnkgaGFzaGNvZGVzIGZyb20gb3RoZXJzLg0KICAgICAgICAgICAgcmVzdWx0IF49ICgocmVz
dWx0IDw8IDE0KSB8IChyZXN1bHQgPj4gMTkpKTsgLy8gcmV2ZXJzaWJsZQ0KICAgICAgICAgICAg
cmVzdWx0ICs9IFN5c3RlbS5Db252ZXJ0LlRvSW50MzIoR2V0Qm9vc3QoKSk7DQogICAgICAgICAg
ICByZXN1bHQgKz0gc2xvcDsNCiAgICAgICAgICAgIHJlc3VsdCBePSAoaW5PcmRlciA/IChsb25n
KTB4OTlBRkQzQkQgOiAwKTsNCiAgICAgICAgICAgIHJldHVybiAoaW50KXJlc3VsdDsNCiAgICAg
ICAgfQ0KICAgIH0NCn0NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCnVzaW5nIFN5c3RlbTsNCnVzaW5nIFN5c3RlbS5Db2xs
ZWN0aW9ucy5HZW5lcmljOw0KDQp1c2luZyBJbmRleFJlYWRlciA9IEx1Y2VuZS5OZXQuSW5kZXgu
SW5kZXhSZWFkZXI7DQoNCm5hbWVzcGFjZSBMdWNlbmUuTmV0LlNlYXJjaC5TcGFucw0Kew0KICAg
IGNsYXNzIE5lYXJTcGFuc1dpdGhNaW5SZXF1aXJlZFN1YlNwYW5IaXRzT3JkZXJlZCA6IFNwYW5z
DQogICAgew0KICAgICAgICBwcml2YXRlIGludCBhbGxvd2VkU2xvcDsNCiAgICAgICAgcHJpdmF0
ZSBib29sIGZpcnN0VGltZSA9IHRydWU7DQogICAgICAgIHByaXZhdGUgYm9vbCBtb3JlID0gdHJ1
ZTsNCg0KICAgICAgICAvLy8gPHN1bW1hcnk+VGhlIHNwYW5zIGluIHRoZSBzYW1lIG9yZGVyIGFz
IHRoZSBTcGFuTmVhclF1ZXJ5IDwvc3VtbWFyeT4NCiAgICAgICAgcHJpdmF0ZSBTcGFuc1tdIHN1
YlNwYW5zOw0KDQogICAgICAgIHByaXZhdGUgaW50IG1hdGNoRG9jID0gLTE7DQogICAgICAgIHBy
aXZhdGUgaW50IG1hdGNoU3RhcnQgPSAtMTsNCiAgICAgICAgcHJpdmF0ZSBpbnQgbWF0Y2hFbmQg
PSAtMTsNCg0KICAgICAgICBwcml2YXRlIFNwYW5OZWFyV2l0aE1pblJlcXVpcmVkU3ViU3Bhbkhp
dHNRdWVyeSBxdWVyeTsNCg0KICAgICAgICBwdWJsaWMgTmVhclNwYW5zV2l0aE1pblJlcXVpcmVk
U3ViU3BhbkhpdHNPcmRlcmVkKFNwYW5OZWFyV2l0aE1pblJlcXVpcmVkU3ViU3BhbkhpdHNRdWVy
eSBzcGFuTmVhcldpdGhUZXJtU2tpcFF1ZXJ5LCBJbmRleFJlYWRlciByZWFkZXIpDQogICAgICAg
IHsNCiAgICAgICAgICAgIGlmIChzcGFuTmVhcldpdGhUZXJtU2tpcFF1ZXJ5LkdldENsYXVzZXMo
KS5MZW5ndGggPCAyKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIHRocm93IG5ldyBT
eXN0ZW0uQXJndW1lbnRFeGNlcHRpb24oIkxlc3MgdGhhbiAyIGNsYXVzZXM6ICIgKyBzcGFuTmVh
cldpdGhUZXJtU2tpcFF1ZXJ5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGFsbG93ZWRT
bG9wID0gc3Bhbk5lYXJXaXRoVGVybVNraXBRdWVyeS5HZXRTbG9wKCk7DQoNCiAgICAgICAgICAg
IC8vIGdldCBzdWIgc3BhbnMNCiAgICAgICAgICAgIFNwYW5RdWVyeVtdIGNsYXVzZXMgPSBzcGFu
TmVhcldpdGhUZXJtU2tpcFF1ZXJ5LkdldENsYXVzZXMoKTsNCiAgICAgICAgICAgIHN1YlNwYW5z
ID0gbmV3IFNwYW5zW2NsYXVzZXMuTGVuZ3RoXTsNCiAgICAgICAgICAgIGZvciAoaW50IGkgPSAw
OyBpIDwgY2xhdXNlcy5MZW5ndGg7IGkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAg
ICBzdWJTcGFuc1tpXSA9IGNsYXVzZXNbaV0uR2V0U3BhbnMocmVhZGVyKTsNCiAgICAgICAgICAg
IH0NCg0KICAgICAgICAgICAgcXVlcnkgPSBzcGFuTmVhcldpdGhUZXJtU2tpcFF1ZXJ5OyAvLyBr
ZXB0IGZvciB0b1N0cmluZygpIG9ubHkuDQoNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGluaGVy
aXQgamF2YWRvY3MNCiAgICAgICAgcHVibGljIHZpcnR1YWwgaW50IERvYygpDQogICAgICAgIHsN
CiAgICAgICAgICAgIHJldHVybiBtYXRjaERvYzsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vIGlu
aGVyaXQgamF2YWRvY3MNCiAgICAgICAgcHVibGljIHZpcnR1YWwgaW50IFN0YXJ0KCkNCiAgICAg
ICAgew0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoU3RhcnQ7DQogICAgICAgIH0NCg0KICAgICAg
ICAvLyBpbmhlcml0IGphdmFkb2NzDQogICAgICAgIHB1YmxpYyB2aXJ0dWFsIGludCBFbmQoKQ0K
ICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gbWF0Y2hFbmQ7DQogICAgICAgIH0NCg0KICAg
ICAgICAvLyBpbmhlcml0IGphdmFkb2NzDQogICAgICAgIHB1YmxpYyB2aXJ0dWFsIGJvb2wgTmV4
dCgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChmaXJzdFRpbWUpDQogICAgICAgICAgICB7
DQogICAgICAgICAgICAgICAgZmlyc3RUaW1lID0gZmFsc2U7DQogICAgICAgICAgICAgICAgLy8g
cmVhZCBhbGwgc3ViIHNwYW5zDQogICAgICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBz
dWJTcGFucy5MZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAg
ICAgIGlmICghc3ViU3BhbnNbaV0uTmV4dCgpKSAvLyByZWFkDQogICAgICAgICAgICAgICAgICAg
ICAgICBzdWJTcGFuc1tpXSA9IG51bGw7IC8vIHNldCBudWxsIHdoZW4gRU9GDQogICAgICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSBpZiAobW9yZSkNCiAgICAg
ICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyByZWFkIGZyb20gdGhlIGZpcnN0IHN0aWxsIGFj
dGl2ZSBzdWIgc3Bhbg0KICAgICAgICAgICAgICAgIGJvb2wgYXRMZWFzdE9uZVJlYWQgPSBmYWxz
ZTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YlNwYW5zLkxlbmd0aDsg
aSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlNwYW5z
W2ldICE9IG51bGwpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViU3BhbnNbaV0uTmV4
dCgpKSAvLyByZWFkDQogICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgYXRMZWFzdE9uZVJlYWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
ICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlNwYW5zW2ldID0g
bnVsbDsgLy8gc2V0IG51bGwgd2hlbiBFT0YNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAg
ICAgICAgaWYgKCFhdExlYXN0T25lUmVhZCkgLy8gaWYgbm90aGluZyByZWFkID0+IHF1aXQNCiAg
ICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIG1vcmUgPSBmYWxzZTsNCiAgICAg
ICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQoN
CiAgICAgICAgICAgIG1vcmUgPSBBZHZhbmNlVG9OZXh0KCk7IC8vIG1ha2Ugc2h1cmUgYWxsIGhp
dHMgb2YgdGhlIHN1YiBzcGFucyBhcmUgaW4gdGhlIHNhbWUgZG9jLCBpbiBvcmRlciBhbmQgc2xv
cCBpcyBPSw0KDQogICAgICAgICAgICByZXR1cm4gbW9yZTsNCiAgICAgICAgfQ0KDQogICAgICAg
IC8vIGluaGVyaXQgamF2YWRvY3MNCiAgICAgICAgcHVibGljIHZpcnR1YWwgYm9vbCBTa2lwVG8o
aW50IHRhcmdldCkNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKGZpcnN0VGltZSkNCiAgICAg
ICAgICAgIHsNCiAgICAgICAgICAgICAgICBmaXJzdFRpbWUgPSBmYWxzZTsNCiAgICAgICAgICAg
ICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YlNwYW5zLkxlbmd0aDsgaSsrKQ0KICAgICAgICAg
ICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdWJTcGFuc1tpXS5Ta2lwVG8odGFy
Z2V0KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlNwYW5zW2ldID0gbnVsbDsNCiAgICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIGlmIChtb3JlKQ0K
ICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJvb2wgYXRMZWFzdE9uZVJlYWQgPSBmYWxz
ZTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YlNwYW5zLkxlbmd0aDsg
aSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlNwYW5z
W2ldICE9IG51bGwpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIGlmIChzdWJTcGFuc1swXS5Eb2MoKSA8IHRhcmdldCkNCiAgICAgICAgICAgICAgICAgICAg
ICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViU3BhbnNbaV0uU2tpcFRv
KHRhcmdldCkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBhdExlYXN0T25lUmVhZCA9IHRydWU7DQogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN1YlNwYW5zW2ldID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBy
ZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAg
ICAgICAgICAgICAgICBpZiAoIWF0TGVhc3RPbmVSZWFkKQ0KICAgICAgICAgICAgICAgIHsNCiAg
ICAgICAgICAgICAgICAgICAgbW9yZSA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByZXR1
cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCg0KICAgICAgICAgICAgbW9yZSA9
IEFkdmFuY2VUb05leHQoKTsNCg0KICAgICAgICAgICAgcmV0dXJuIG1vcmU7DQogICAgICAgIH0N
Cg0KICAgICAgICBwcml2YXRlIGJvb2wgQWR2YW5jZVRvTmV4dCgpDQogICAgICAgIHsNCiAgICAg
ICAgICAgIHdoaWxlICh0cnVlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIC8vIGdl
dCBkb2MgaWQncyBmcm9tIHN1YiBzcGFucw0KICAgICAgICAgICAgICAgIGludFtdIGRvY0lkcyA9
IG5ldyBpbnRbc3ViU3BhbnMuTGVuZ3RoXTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0g
MDsgaSA8IHN1YlNwYW5zLkxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAg
ICAgICAgICAgICAgaWYgKHN1YlNwYW5zW2ldID09IG51bGwpDQogICAgICAgICAgICAgICAgICAg
ICAgICBkb2NJZHNbaV0gPSBpbnQuTWF4VmFsdWU7DQogICAgICAgICAgICAgICAgICAgIGVsc2UN
CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY0lkc1tpXSA9IHN1YlNwYW5zW2ldLkRvYygpOw0K
ICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIC8vIFNvcnQgZG9jIGlkcw0KICAg
ICAgICAgICAgICAgIEFycmF5LlNvcnQoZG9jSWRzKTsNCg0KICAgICAgICAgICAgICAgIC8vIGdl
dCBkb2NpZCBvZiAnR2V0TWluUmVxdWlyZWRUZXJtcyctdGggaXRlbQ0KICAgICAgICAgICAgICAg
IGludCBkb2NJZE9mWHRoc3BhbiA9IGRvY0lkc1txdWVyeS5HZXRNaW5SZXF1aXJlZFRlcm1zKCkg
LSAxXTsNCg0KICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRvbyBtYW55IG1pc3NpbmcNCiAgICAg
ICAgICAgICAgICBpZiAoZG9jSWRPZlh0aHNwYW4gPT0gaW50Lk1heFZhbHVlKQ0KICAgICAgICAg
ICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbW9yZSA9IGZhbHNlOw0KICAgICAgICAgICAg
ICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAg
ICAgLy8gd2UgbmVlZCBhdCBsZWFzdCAuLi4gaXRlbXMgaW4gdGhlIHNhbWUgZG9jLCBzbyB0aGUg
ZG9jSWQgb2YgdGhlIC4uLnRoIGl0ZW0gc2hvdWxkIGJlIGVxdWFsIHRvIHRoZSBkb2MgaWQgb2Yg
dGhlIGZpcnN0IGl0ZW0uDQogICAgICAgICAgICAgICAgLy8gaWYgbm90LCBhbGwgaXRlbXMgYmVm
b3JlIHRoZSAuLi50aCBjYW4gYmUgbW92ZWQgZm9yd2FyZCB0byB0aGUgZG9jIGlkIG9mIHRoZSAu
Li50aCBpdGVtDQogICAgICAgICAgICAgICAgaWYgKGRvY0lkT2ZYdGhzcGFuICE9IGRvY0lkc1sw
XSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGZvciAoaW50IGkgPSAw
OyBpIDwgc3ViU3BhbnMuTGVuZ3RoOyBpKyspDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIGlmIChzdWJTcGFuc1tpXSAhPSBudWxsKQ0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGlmIChzdWJTcGFuc1tpXS5Eb2MoKSA8IGRvY0lkT2ZYdGhzcGFuKQ0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN1YlNwYW5zW2ldLlNraXBUbyhk
b2NJZE9mWHRoc3BhbikpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJT
cGFuc1tpXSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAg
ICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy8vLyBn
ZXQgbnVtYmVyIG9mIHN1YnNwYW5zIGluIGxvd2VzdCBkb2MgaWQNCiAgICAgICAgICAgICAgICBM
aXN0PGludD4gbWF0Y2hpbmdTcGFucyA9IG5ldyBMaXN0PGludD4oKTsNCiAgICAgICAgICAgICAg
ICBmb3IgKGludCBpID0gMDsgaSA8IHN1YlNwYW5zLkxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAg
ICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlNwYW5zW2ldICE9IG51bGwgJiYgc3Vi
U3BhbnNbaV0uRG9jKCkgPT0gZG9jSWRPZlh0aHNwYW4pDQogICAgICAgICAgICAgICAgICAgICAg
ICBtYXRjaGluZ1NwYW5zLkFkZChpKTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAg
ICAgICAvLyBjaGVjayBpZiBzcGFucyBhcmUgaW4gb3JkZXIgd2l0aGluIHRoZSBkb2N1bWVudA0K
ICAgICAgICAgICAgICAgIGJvb2wgZXh0cmFSZWFkTmVlZGVkID0gZmFsc2U7DQogICAgICAgICAg
ICAgICAgaW50IHRtcE1hdGNoRG9jID0gc3ViU3BhbnNbbWF0Y2hpbmdTcGFuc1swXV0uRG9jKCk7
DQogICAgICAgICAgICAgICAgZm9yKGludCBpID0gMTsgaSA8IG1hdGNoaW5nU3BhbnMuQ291bnQ7
IGkrKykNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIGlmICAoIURvY1Nw
YW5zT3JkZXJlZChzdWJTcGFuc1ttYXRjaGluZ1NwYW5zW2kgLSAxXV0sIHN1YlNwYW5zW21hdGNo
aW5nU3BhbnNbaV1dKSkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAg
ICAgICAgaWYgKCFzdWJTcGFuc1ttYXRjaGluZ1NwYW5zW2ldXS5OZXh0KCkpDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgc3ViU3BhbnNbbWF0Y2hpbmdTcGFuc1tpXV0gPSBudWxsOw0KDQog
ICAgICAgICAgICAgICAgICAgICAgICBleHRyYVJlYWROZWVkZWQgPSB0cnVlOw0KICAgICAgICAg
ICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBhIHJlYWQgd2FzIG5lZWRlZCwg
aWYgc28gcmVzdGFydCBmcm9tIGJlZ2lubmluZyAob3B0aW1pemF0aW9uIHBvc3NpYmxlKQ0KICAg
ICAgICAgICAgICAgIGlmIChleHRyYVJlYWROZWVkZWQpDQogICAgICAgICAgICAgICAgew0KICAg
ICAgICAgICAgICAgICAgICBtYXRjaERvYyA9IC0xOw0KICAgICAgICAgICAgICAgICAgICBjb250
aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyBjaGVjayBzbG9w
DQogICAgICAgICAgICAgICAgbWF0Y2hTdGFydCA9IHN1YlNwYW5zW21hdGNoaW5nU3BhbnNbMF1d
LlN0YXJ0KCk7DQogICAgICAgICAgICAgICAgbWF0Y2hFbmQgPSBzdWJTcGFuc1ttYXRjaGluZ1Nw
YW5zW21hdGNoaW5nU3BhbnMuQ291bnQtMV1dLkVuZCgpOw0KICAgICAgICAgICAgICAgIGludCBt
YXRjaFNsb3AgPSBtYXRjaEVuZCAtIG1hdGNoU3RhcnQgLSAocXVlcnkuR2V0TWluUmVxdWlyZWRU
ZXJtcygpIC0gMSk7DQogICAgICAgICAgICAgICAgaWYgKG1hdGNoU2xvcCA+IGFsbG93ZWRTbG9w
KQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYoIXN1YlNwYW5zW21h
dGNoaW5nU3BhbnNbMF1dLk5leHQoKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlNwYW5z
W21hdGNoaW5nU3BhbnNbMF1dID0gbnVsbDsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7
DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgLy9hbGwgY2hlY2tzIHBhc3MN
CiAgICAgICAgICAgICAgICBtYXRjaERvYyA9IHRtcE1hdGNoRG9jOw0KICAgICAgICAgICAgICAg
IGJyZWFrOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAg
ICAgfQ0KDQogICAgICAgIGludGVybmFsIHN0YXRpYyBib29sIERvY1NwYW5zT3JkZXJlZChTcGFu
cyBzcGFuczEsIFNwYW5zIHNwYW5zMikNCiAgICAgICAgew0KICAgICAgICAgICAgaWYgKHNwYW5z
MS5Eb2MoKSA9PSBpbnQuTWF4VmFsdWUgfHwgc3BhbnMyLkRvYygpID09IGludC5NYXhWYWx1ZSkN
CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIFN5c3RlbS5EaWFnbm9z
dGljcy5EZWJ1Zy5Bc3NlcnQoc3BhbnMxLkRvYygpID09IHNwYW5zMi5Eb2MoKSwgImRvYzEgIiAr
IHNwYW5zMS5Eb2MoKSArICIgIT0gZG9jMiAiICsgc3BhbnMyLkRvYygpKTsNCiAgICAgICAgICAg
IGludCBzdGFydDEgPSBzcGFuczEuU3RhcnQoKTsNCiAgICAgICAgICAgIGludCBzdGFydDIgPSBz
cGFuczIuU3RhcnQoKTsNCiAgICAgICAgICAgIC8qIERvIG5vdCBjYWxsIERvY1NwYW5zT3JkZXJl
ZChpbnQsaW50LGludCxpbnQpIHRvIGF2b2lkIGludm9raW5nIC5lbmQoKSA6ICovDQogICAgICAg
ICAgICByZXR1cm4gKHN0YXJ0MSA9PSBzdGFydDIpID8gKHNwYW5zMS5FbmQoKSA8IHNwYW5zMi5F
bmQoKSkgOiAoc3RhcnQxIDwgc3RhcnQyKTsNCiAgICAgICAgfQ0KDQogICAgICAgICBwdWJsaWMg
b3ZlcnJpZGUgU3lzdGVtLlN0cmluZyBUb1N0cmluZygpDQogICAgICAgIHsNCiAgICAgICAgICAg
IHJldHVybiBHZXRUeXBlKCkuRnVsbE5hbWUgKyAiKCIgKyBxdWVyeS5Ub1N0cmluZygpICsgIilA
IiArIChmaXJzdFRpbWUgPyAiU1RBUlQiIDogKG1vcmUgPyAoRG9jKCkgKyAiOiIgKyBTdGFydCgp
ICsgIi0iICsgRW5kKCkpIDogIkVORCIpKTsNCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQp1c2luZyBT
eXN0ZW07DQp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsNCg0KdXNpbmcgSW5kZXhS
ZWFkZXIgPSBMdWNlbmUuTmV0LkluZGV4LkluZGV4UmVhZGVyOw0KDQpuYW1lc3BhY2UgTHVjZW5l
Lk5ldC5TZWFyY2guU3BhbnMNCnsNCiAgICBjbGFzcyBOZWFyU3BhbnNXaXRoTWluUmVxdWlyZWRT
dWJTcGFuSGl0c1Vub3JkZXJlZA0KICAgIHsNCiAgICAgICAgcHJpdmF0ZSBpbnQgYWxsb3dlZFNs
b3A7DQogICAgICAgIHByaXZhdGUgYm9vbCBmaXJzdFRpbWUgPSB0cnVlOw0KICAgICAgICBwcml2
YXRlIGJvb2wgbW9yZSA9IHRydWU7DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5PlRoZSBzcGFucyBp
biB0aGUgc2FtZSBvcmRlciBhcyB0aGUgU3Bhbk5lYXJRdWVyeSA8L3N1bW1hcnk+DQogICAgICAg
IHByaXZhdGUgU3BhbnNbXSBzdWJTcGFuczsNCg0KICAgICAgICBwcml2YXRlIGludCBtYXRjaERv
YyA9IC0xOw0KICAgICAgICBwcml2YXRlIGludCBtYXRjaFN0YXJ0ID0gLTE7DQogICAgICAgIHBy
aXZhdGUgaW50IG1hdGNoRW5kID0gLTE7DQoNCiAgICAgICAgcHJpdmF0ZSBTcGFuTmVhcldpdGhN
aW5SZXF1aXJlZFN1YlNwYW5IaXRzUXVlcnkgcXVlcnk7DQoNCiAgICAgICAgcHVibGljIE5lYXJT
cGFuc1dpdGhNaW5SZXF1aXJlZFN1YlNwYW5IaXRzVW5vcmRlcmVkKFNwYW5OZWFyV2l0aE1pblJl
cXVpcmVkU3ViU3BhbkhpdHNRdWVyeSBzcGFuTmVhcldpdGhUZXJtU2tpcFF1ZXJ5LCBJbmRleFJl
YWRlciByZWFkZXIpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChzcGFuTmVhcldpdGhUZXJt
U2tpcFF1ZXJ5LkdldENsYXVzZXMoKS5MZW5ndGggPCAyKQ0KICAgICAgICAgICAgew0KICAgICAg
ICAgICAgICAgIHRocm93IG5ldyBTeXN0ZW0uQXJndW1lbnRFeGNlcHRpb24oIkxlc3MgdGhhbiAy
IGNsYXVzZXM6ICIgKyBzcGFuTmVhcldpdGhUZXJtU2tpcFF1ZXJ5KTsNCiAgICAgICAgICAgIH0N
CiAgICAgICAgICAgIGFsbG93ZWRTbG9wID0gc3Bhbk5lYXJXaXRoVGVybVNraXBRdWVyeS5HZXRT
bG9wKCk7DQoNCiAgICAgICAgICAgIC8vIGdldCBzdWIgc3BhbnMNCiAgICAgICAgICAgIFNwYW5R
dWVyeVtdIGNsYXVzZXMgPSBzcGFuTmVhcldpdGhUZXJtU2tpcFF1ZXJ5LkdldENsYXVzZXMoKTsN
CiAgICAgICAgICAgIHN1YlNwYW5zID0gbmV3IFNwYW5zW2NsYXVzZXMuTGVuZ3RoXTsNCiAgICAg
ICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY2xhdXNlcy5MZW5ndGg7IGkrKykNCiAgICAgICAg
ICAgIHsNCiAgICAgICAgICAgICAgICBzdWJTcGFuc1tpXSA9IGNsYXVzZXNbaV0uR2V0U3BhbnMo
cmVhZGVyKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgcXVlcnkgPSBzcGFuTmVhcldp
dGhUZXJtU2tpcFF1ZXJ5OyAvLyBrZXB0IGZvciB0b1N0cmluZygpIG9ubHkuDQoNCiAgICAgICAg
fQ0KDQogICAgICAgIC8vIGluaGVyaXQgamF2YWRvY3MNCiAgICAgICAgcHVibGljIHZpcnR1YWwg
aW50IERvYygpDQogICAgICAgIHsNCiAgICAgICAgICAgIHJldHVybiBtYXRjaERvYzsNCiAgICAg
ICAgfQ0KDQogICAgICAgIC8vIGluaGVyaXQgamF2YWRvY3MNCiAgICAgICAgcHVibGljIHZpcnR1
YWwgaW50IFN0YXJ0KCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0dXJuIG1hdGNoU3RhcnQ7
DQogICAgICAgIH0NCg0KICAgICAgICAvLyBpbmhlcml0IGphdmFkb2NzDQogICAgICAgIHB1Ymxp
YyB2aXJ0dWFsIGludCBFbmQoKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gbWF0Y2hF
bmQ7DQogICAgICAgIH0NCg0KICAgICAgICAvLyBpbmhlcml0IGphdmFkb2NzDQogICAgICAgIHB1
YmxpYyB2aXJ0dWFsIGJvb2wgTmV4dCgpDQogICAgICAgIHsNCiAgICAgICAgICAgIGlmIChmaXJz
dFRpbWUpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgZmlyc3RUaW1lID0gZmFsc2U7
DQogICAgICAgICAgICAgICAgLy8gcmVhZCBhbGwgc3ViIHNwYW5zDQogICAgICAgICAgICAgICAg
Zm9yIChpbnQgaSA9IDA7IGkgPCBzdWJTcGFucy5MZW5ndGg7IGkrKykNCiAgICAgICAgICAgICAg
ICB7DQogICAgICAgICAgICAgICAgICAgIGlmICghc3ViU3BhbnNbaV0uTmV4dCgpKSAvLyByZWFk
DQogICAgICAgICAgICAgICAgICAgICAgICBzdWJTcGFuc1tpXSA9IG51bGw7IC8vIHNldCBudWxs
IHdoZW4gRU9GDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAg
ZWxzZSBpZiAobW9yZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyByZWFkIGZy
b20gdGhlIGZpcnN0IHN0aWxsIGFjdGl2ZSBzdWIgc3Bhbg0KICAgICAgICAgICAgICAgIGJvb2wg
YXRMZWFzdE9uZVJlYWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsg
aSA8IHN1YlNwYW5zLkxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAg
ICAgICAgICAgaWYgKHN1YlNwYW5zW2ldICE9IG51bGwpDQogICAgICAgICAgICAgICAgICAgICAg
ICBpZiAoc3ViU3BhbnNbaV0uTmV4dCgpKSAvLyByZWFkDQogICAgICAgICAgICAgICAgICAgICAg
ICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYXRMZWFzdE9uZVJlYWQgPSB0cnVlOw0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIHN1YlNwYW5zW2ldID0gbnVsbDsgLy8gc2V0IG51bGwgd2hlbiBFT0YNCiAgICAgICAg
ICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKCFhdExlYXN0T25lUmVhZCkgLy8gaWYgbm90
aGluZyByZWFkID0+IHF1aXQNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAg
IG1vcmUgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAg
ICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAg
ICAgICByZXR1cm4gZmFsc2U7DQoNCiAgICAgICAgICAgIG1vcmUgPSBBZHZhbmNlVG9OZXh0KCk7
IC8vIG1ha2Ugc2h1cmUgYWxsIGhpdHMgb2YgdGhlIHN1YiBzcGFucyBhcmUgaW4gdGhlIHNhbWUg
ZG9jLCBpbiBvcmRlciBhbmQgc2xvcCBpcyBPSw0KDQogICAgICAgICAgICByZXR1cm4gbW9yZTsN
CiAgICAgICAgfQ0KDQogICAgICAgIC8vIGluaGVyaXQgamF2YWRvY3MNCiAgICAgICAgcHVibGlj
IHZpcnR1YWwgYm9vbCBTa2lwVG8oaW50IHRhcmdldCkNCiAgICAgICAgew0KICAgICAgICAgICAg
aWYgKGZpcnN0VGltZSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmaXJzdFRpbWUg
PSBmYWxzZTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YlNwYW5zLkxl
bmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKCFz
dWJTcGFuc1tpXS5Ta2lwVG8odGFyZ2V0KSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlNw
YW5zW2ldID0gbnVsbDsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAg
ICAgICBlbHNlIGlmIChtb3JlKQ0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJvb2wg
YXRMZWFzdE9uZVJlYWQgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsg
aSA8IHN1YlNwYW5zLkxlbmd0aDsgaSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAg
ICAgICAgICAgaWYgKHN1YlNwYW5zW2ldICE9IG51bGwpDQogICAgICAgICAgICAgICAgICAgIHsN
CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJTcGFuc1swXS5Eb2MoKSA8IHRhcmdldCkN
CiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
ZiAoc3ViU3BhbnNbaV0uU2tpcFRvKHRhcmdldCkpDQogICAgICAgICAgICAgICAgICAgICAgICAg
ICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdExlYXN0T25lUmVhZCA9IHRy
dWU7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlDQogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlNwYW5zW2ldID0gbnVsbDsNCiAgICAgICAg
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoIWF0TGVhc3RPbmVSZWFkKQ0K
ICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbW9yZSA9IGZhbHNlOw0KICAg
ICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgfQ0KICAgICAg
ICAgICAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsN
Cg0KICAgICAgICAgICAgbW9yZSA9IEFkdmFuY2VUb05leHQoKTsNCg0KICAgICAgICAgICAgcmV0
dXJuIG1vcmU7DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIGJvb2wgQWR2YW5jZVRvTmV4
dCgpDQogICAgICAgIHsNCiAgICAgICAgICAgIHdoaWxlICh0cnVlKQ0KICAgICAgICAgICAgew0K
ICAgICAgICAgICAgICAgIC8vIGdldCBkb2MgaWQncyBmcm9tIHN1YiBzcGFucw0KICAgICAgICAg
ICAgICAgIGludFtdIGRvY0lkcyA9IG5ldyBpbnRbc3ViU3BhbnMuTGVuZ3RoXTsNCiAgICAgICAg
ICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YlNwYW5zLkxlbmd0aDsgaSsrKQ0KICAgICAg
ICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlNwYW5zW2ldID09IG51bGwp
DQogICAgICAgICAgICAgICAgICAgICAgICBkb2NJZHNbaV0gPSBpbnQuTWF4VmFsdWU7DQogICAg
ICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY0lkc1tpXSA9
IHN1YlNwYW5zW2ldLkRvYygpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAg
IC8vIFNvcnQgZG9jIGlkcw0KICAgICAgICAgICAgICAgIEFycmF5LlNvcnQoZG9jSWRzKTsNCg0K
ICAgICAgICAgICAgICAgIC8vIGdldCBkb2NpZCBvZiAnR2V0TWluUmVxdWlyZWRUZXJtcyctdGgg
aXRlbQ0KICAgICAgICAgICAgICAgIGludCBkb2NJZE9mWHRoc3BhbiA9IGRvY0lkc1txdWVyeS5H
ZXRNaW5SZXF1aXJlZFRlcm1zKCkgLSAxXTsNCg0KICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRv
byBtYW55IG1pc3NpbmcNCiAgICAgICAgICAgICAgICBpZiAoZG9jSWRPZlh0aHNwYW4gPT0gaW50
Lk1heFZhbHVlKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgbW9yZSA9
IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAg
ICAgfQ0KDQogICAgICAgICAgICAgICAgLy8gd2UgbmVlZCBhdCBsZWFzdCAuLi4gaXRlbXMgaW4g
dGhlIHNhbWUgZG9jLCBzbyB0aGUgZG9jSWQgb2YgdGhlIC4uLnRoIGl0ZW0gc2hvdWxkIGJlIGVx
dWFsIHRvIHRoZSBkb2MgaWQgb2YgdGhlIGZpcnN0IGl0ZW0uDQogICAgICAgICAgICAgICAgLy8g
aWYgbm90LCBhbGwgaXRlbXMgYmVmb3JlIHRoZSAuLi50aCBjYW4gYmUgbW92ZWQgZm9yd2FyZCB0
byB0aGUgZG9jIGlkIG9mIHRoZSAuLi50aCBpdGVtDQogICAgICAgICAgICAgICAgaWYgKGRvY0lk
T2ZYdGhzcGFuICE9IGRvY0lkc1swXSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAg
ICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc3ViU3BhbnMuTGVuZ3RoOyBpKyspDQogICAgICAg
ICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJTcGFuc1tpXSAh
PSBudWxsKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJTcGFuc1tpXS5Eb2Mo
KSA8IGRvY0lkT2ZYdGhzcGFuKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAo
IXN1YlNwYW5zW2ldLlNraXBUbyhkb2NJZE9mWHRoc3BhbikpDQogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdWJTcGFuc1tpXSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAg
IH0NCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KDQog
ICAgICAgICAgICAgICAgLy8vLyBnZXQgbnVtYmVyIG9mIHN1YnNwYW5zIGluIGxvd2VzdCBkb2Mg
aWQNCiAgICAgICAgICAgICAgICBMaXN0PGludD4gbWF0Y2hpbmdTcGFucyA9IG5ldyBMaXN0PGlu
dD4oKTsNCiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHN1YlNwYW5zLkxlbmd0
aDsgaSsrKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlNw
YW5zW2ldICE9IG51bGwgJiYgc3ViU3BhbnNbaV0uRG9jKCkgPT0gZG9jSWRPZlh0aHNwYW4pDQog
ICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ1NwYW5zLkFkZChpKTsNCiAgICAgICAgICAg
ICAgICB9DQoNCiAgICAgICAgICAgICAgICBpbnQgdG1wTWF0Y2hEb2MgPSBzdWJTcGFuc1ttYXRj
aGluZ1NwYW5zWzBdXS5Eb2MoKTsNCg0KICAgICAgICAgICAgICAgIC8vIGNoZWNrIHNsb3ANCiAg
ICAgICAgICAgICAgICBtYXRjaFN0YXJ0ID0gc3ViU3BhbnNbbWF0Y2hpbmdTcGFuc1swXV0uU3Rh
cnQoKTsNCiAgICAgICAgICAgICAgICBtYXRjaEVuZCA9IHN1YlNwYW5zW21hdGNoaW5nU3BhbnNb
bWF0Y2hpbmdTcGFucy5Db3VudC0xXV0uRW5kKCk7DQogICAgICAgICAgICAgICAgaW50IG1hdGNo
U2xvcCA9IG1hdGNoRW5kIC0gbWF0Y2hTdGFydCAtIChxdWVyeS5HZXRNaW5SZXF1aXJlZFRlcm1z
KCkgLSAxKTsNCiAgICAgICAgICAgICAgICBpZiAobWF0Y2hTbG9wID4gYWxsb3dlZFNsb3ApDQog
ICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBpZighc3ViU3BhbnNbbWF0Y2hp
bmdTcGFuc1swXV0uTmV4dCgpKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3ViU3BhbnNbbWF0
Y2hpbmdTcGFuc1swXV0gPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAg
ICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvL2FsbCBjaGVja3MgcGFzcw0KICAg
ICAgICAgICAgICAgIG1hdGNoRG9jID0gdG1wTWF0Y2hEb2M7DQogICAgICAgICAgICAgICAgYnJl
YWs7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9
DQoNCiAgICAgICAgaW50ZXJuYWwgc3RhdGljIGJvb2wgRG9jU3BhbnNPcmRlcmVkKFNwYW5zIHNw
YW5zMSwgU3BhbnMgc3BhbnMyKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoc3BhbnMxLkRv
YygpID09IGludC5NYXhWYWx1ZSB8fCBzcGFuczIuRG9jKCkgPT0gaW50Lk1heFZhbHVlKQ0KICAg
ICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgU3lzdGVtLkRpYWdub3N0aWNz
LkRlYnVnLkFzc2VydChzcGFuczEuRG9jKCkgPT0gc3BhbnMyLkRvYygpLCAiZG9jMSAiICsgc3Bh
bnMxLkRvYygpICsgIiAhPSBkb2MyICIgKyBzcGFuczIuRG9jKCkpOw0KICAgICAgICAgICAgaW50
IHN0YXJ0MSA9IHNwYW5zMS5TdGFydCgpOw0KICAgICAgICAgICAgaW50IHN0YXJ0MiA9IHNwYW5z
Mi5TdGFydCgpOw0KICAgICAgICAgICAgLyogRG8gbm90IGNhbGwgRG9jU3BhbnNPcmRlcmVkKGlu
dCxpbnQsaW50LGludCkgdG8gYXZvaWQgaW52b2tpbmcgLmVuZCgpIDogKi8NCiAgICAgICAgICAg
IHJldHVybiAoc3RhcnQxID09IHN0YXJ0MikgPyAoc3BhbnMxLkVuZCgpIDwgc3BhbnMyLkVuZCgp
KSA6IChzdGFydDEgPCBzdGFydDIpOw0KICAgICAgICB9DQoNCiAgICAgICAgIHB1YmxpYyBvdmVy
cmlkZSBTeXN0ZW0uU3RyaW5nIFRvU3RyaW5nKCkNCiAgICAgICAgew0KICAgICAgICAgICAgcmV0
dXJuIEdldFR5cGUoKS5GdWxsTmFtZSArICIoIiArIHF1ZXJ5LlRvU3RyaW5nKCkgKyAiKUAiICsg
KGZpcnN0VGltZSA/ICJTVEFSVCIgOiAobW9yZSA/IChEb2MoKSArICI6IiArIFN0YXJ0KCkgKyAi
LSIgKyBFbmQoKSkgOiAiRU5EIikpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQoNCg0KLS0tLS1P
cmlnaW5hbCBNZXNzYWdlLS0tLS0NCkZyb206IE1pa2UgU29rb2xvdiBbbWFpbHRvOnNva29sb3ZA
aWZhY3RvcnkuY29tXQ0KU2VudDogd29lbnNkYWcgMTMganVsaSAyMDExIDIzOjAyDQpUbzogamF2
YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpDYzogU2ltb24gV2lsbG5hdWVyDQpTdWJqZWN0OiBS
ZTogQWR2YW5jZWQgTmVhclNwYW5RdWVyeQ0KDQpTb3JyeSBmb3IgdGhlIG1pc2RpcmVjdGlvbiAu
Li4NCg0KT24gMDcvMTMvMjAxMSAxMTozNyBBTSwgU2ltb24gV2lsbG5hdWVyIHdyb3RlOg0KPiBJ
IGRvbid0IHRoaW5rIHRoaXMgaXMgcG9zc2libGUgd2l0aCBzcGFucyB0b2RheS4gT25jZQ0KPiBo
dHRwczovL2lzc3Vlcy5hcGFjaGUub3JnL2ppcmEvYnJvd3NlL0xVQ0VORS0yODc4IGlzIGR1ZSB0
aGlzIHNob3VsZA0KPiBiZSBwb3NzaWJsZSB3aXRoIGEgYm9vbGVhbiBxdWVyeSBJIHRoaW5rLg0K
Pg0KPiB0byB3b3JrIGFyb3VuZCB0aGlzIHlvdSBuZWVkIHRvIHdyaXRlIGEgU3Bhbk9SIHF1ZXJ5
IHdpdGggYQ0KPiBtaW5TaG91bGRNYXRjaCBmdW5jdGlvbmFsaXR5IHRob3VnaC4NCj4NCj4gc2lt
b24NCj4NCj4gT24gV2VkLCBKdWwgMTMsIDIwMTEgYXQgNTowOSBQTSwgSmVyb2VuIExhdXdlcnM8
SmVyb2VuLkxhdXdlcnNAY3Rsby5uZXQ+ICB3cm90ZToNCj4NCj4+IEhpIE1pa2UsDQo+Pg0KPj4g
VGhhbmtzIGZvciB5b3VyIHF1aWNrIHJlcGx5LCBidXQgZG8gbm90IHNlZW0gdG8gZmluZCBhbnkg
ZG9jdW1lbnRhdGlvbiBvbiAiRGlzanVuY3Rpb25TdW1RdWVyeSIgYW5kIEknbSBub3QgZmFtaWxp
YXIgd2l0aCB0aGF0IGNvbmNlcHQuDQo+Pg0KPj4gQ291bGQgeW91IHBvaW50IG1lIGluIHRoZSBy
aWdodCBkaXJlY3Rpb24/DQo+Pg0KPj4gSmVyb2VuDQo+Pg0KPj4gLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0NCj4+IEZyb206IE1pa2UgU29rb2xvdiBbbWFpbHRvOnNva29sb3ZAaWZhY3Rvcnku
Y29tXQ0KPj4gU2VudDogd29lbnNkYWcgMTMganVsaSAyMDExIDE1OjIzDQo+PiBUbzogamF2YS11
c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBDYzogSmVyb2VuIExhdXdlcnMNCj4+IFN1YmplY3Q6
IFJlOiBBZHZhbmNlZCBOZWFyU3BhblF1ZXJ5DQo+Pg0KPj4gQ2FuIHlvdSB3cmFwIGEgU3Bhbk5l
YXJRdWVyeSBhcm91bmQgYW4gRGlzanVuY3Rpb25TdW1RdWVyeSB3aXRoIG1pbk5yU2hvdWxkTWF0
Y2g9OD8NCj4+DQo+PiAtTWlrZQ0KPj4NCj4+IE9uIDA3LzEzLzIwMTEgMDg6NTMgQU0sIEplcm9l
biBMYXV3ZXJzIHdyb3RlOg0KPj4NCj4+PiBIaSwNCj4+Pg0KPj4+IEkgd2FzIHdvbmRlcmluZyBp
ZiBhbnlvbmUgY291bGQgaGVscCBtZSBvbiB0aGlzOg0KPj4+DQo+Pj4gSSB3YW50IHRvIHNlYXJj
aCBmb3I6DQo+Pj4NCj4+PiAxLiAgICAgICBhIHNldCBvZiB3b3JkcyAoZWcuIDEwKQ0KPj4+DQo+
Pj4gMi4gICAgICAgb25seSBhIGNvdXBsZSBvZiB3b3JkcyBtYXkgY29tZSBpbiBiZXR3ZWVuIChl
Zy4gMykgaW4gdGhlIHJlc3VsdCBkb2N1bWVudA0KPj4+DQo+Pj4gMy4gICAgICAgb2YgdGhlIHN1
cHBsaWVkIHNldCBvZiAoMTApIHdvcmRzLCBhdCBsZWFzdCA4IG11c3QgYmUgcHJlc2VudCAob3Ig
aW4gb3RoZXIgd29yZHM6IDIgb2YgdGhlIHN1cHBsaWVkIHdvcmRzIGNhbiBiZSBtaXNzaW5nKQ0K
Pj4+DQo+Pj4gSSB1c2UgdGhlIFNwYW5OZWFyUXVlcnkgZm9yICgxLikgYW5kICgyLiksIGJ1dCBp
dCBpcyB0aGUgdGhpcmQgcGFydCB0aGF0J3MgbGFja2luZy4NCj4+Pg0KPj4+IEFueSBpZGVhcz8N
Cj4+Pg0KPj4+IEplcm9lbg0KPj4+DQo+Pj4NCj4+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcNCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPj4NCj4+DQo+Pg0KPj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQo+PiBUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcNCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPj4NCj4+DQo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPiBUbyB1bnN1YnNj
cmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCj4g
Rm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFw
YWNoZS5vcmcNCj4NCj4NCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBq
YXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcNCkZvciBhZGRpdGlvbmFsIGNv
bW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQoNCg0K



From java-user-return-50346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 19:04:12 2011
Return-Path: <java-user-return-50346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 061B860A9
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 19:04:12 +0000 (UTC)
Received: (qmail 94590 invoked by uid 500); 15 Jul 2011 19:04:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94510 invoked by uid 500); 15 Jul 2011 19:04:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94502 invoked by uid 99); 15 Jul 2011 19:04:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 19:04:08 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 19:04:02 +0000
Received: by qwj9 with SMTP id 9so1092946qwj.35
        for <java-user@lucene.apache.org>; Fri, 15 Jul 2011 12:03:41 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=E9tww+pwN6v+Gfubiw/ZMQ12A11tRToofYksZ96ySPI=;
        b=I26JNAuEl/FVv9hLUsr10HS87CAgdt/50MXsjUpKyksjHjBXAww3KWq6537nlMC6gP
         DQ1AZfuTXxbhNE8gpdgmK0Vwb3L3pscYc6qjaId37BAi2OKK8AWyN87Txfabp+jraLG0
         Fg7N5GtgZ30t09NjWMSDPGD13TYF19jWNO9f0=
MIME-Version: 1.0
Received: by 10.224.194.194 with SMTP id dz2mr3332738qab.382.1310756620393;
 Fri, 15 Jul 2011 12:03:40 -0700 (PDT)
Received: by 10.229.70.148 with HTTP; Fri, 15 Jul 2011 12:03:40 -0700 (PDT)
Date: Fri, 15 Jul 2011 14:03:40 -0500
Message-ID: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
Subject: Questions on index Writer
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf300fa9dfbede9f04a8204ebc

--20cf300fa9dfbede9f04a8204ebc
Content-Type: text/plain; charset=ISO-8859-1

Hi All,

I have following questions about lucene indexWriter. I am using version
3.1.0.

While indexing documents,
1. When is the good time to commit changes? (indexWriter.commit) or just
close the writer after the indexing is done so that commit automatically
happens.
2. When is the good time to merge indexes (indexWriter.maybeMerge()).  Is it
just before committing the changes or after indexing say X number of
documents. (I recently upgraded from 2.9.4 to 3.1 and I see 3.1 lucene
generates lot of small index files while indexing document)

Also I have a problem where my lucene index files sometimes gets deleted
from the index folder. I am not sure what code snippet is causing the
existing index files to accidently get removed.

My indexer runs in a thread loop where it indexes file whenever they are
available. When no more files are available, indexer thread closes the
writer and goes to sleep, after specific time, it again creates a new index
on the same folder and starts indexing new files if any available.

A. Is it a wrong way to index files?
B. Because I close the index and open it again later, am I seeing my lucene
index files getting deleted?

Thanks

Saurabh

--20cf300fa9dfbede9f04a8204ebc--

From java-user-return-50347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 19:52:10 2011
Return-Path: <java-user-return-50347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0FF4E631B
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 19:52:10 +0000 (UTC)
Received: (qmail 78402 invoked by uid 500); 15 Jul 2011 19:52:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78344 invoked by uid 500); 15 Jul 2011 19:52:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78336 invoked by uid 99); 15 Jul 2011 19:52:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 19:52:07 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 74.125.83.176 as permitted sender)
Received: from [74.125.83.176] (HELO mail-pv0-f176.google.com) (74.125.83.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 19:51:59 +0000
Received: by pve37 with SMTP id 37so2208609pve.35
        for <java-user@lucene.apache.org>; Fri, 15 Jul 2011 12:51:37 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=TAjyFFiSUrotTJx4IFSqKWqzEd/KQpOs6vBQQSKtfBg=;
        b=FGUfP7ZMEQRUJQ2r+Vv1OoQqMqtYLrDPFGX7c09C0v1w6gcNDR/z9lva8UAYN1iOdp
         A0DYKqiGuwAkMqX7iVhtCY57esPRNFEUYajr3mpuZDUTVSi17YP+UO+Mnl0IQEJgG6a5
         dYKtRE1pLughy2DLgktVHOaWzTZ1MuP7KSA4I=
MIME-Version: 1.0
Received: by 10.68.60.7 with SMTP id d7mr4293862pbr.262.1310759497688; Fri, 15
 Jul 2011 12:51:37 -0700 (PDT)
Received: by 10.68.54.201 with HTTP; Fri, 15 Jul 2011 12:51:37 -0700 (PDT)
In-Reply-To: <CALktp3RvPTe=ssv09AW61Qbv3LiEfLE7g=mC2Z7nk1uQnFKmRg@mail.gmail.com>
References: <CALktp3RvPTe=ssv09AW61Qbv3LiEfLE7g=mC2Z7nk1uQnFKmRg@mail.gmail.com>
Date: Fri, 15 Jul 2011 15:51:37 -0400
Message-ID: <CAN4YXvd972GYfDKFXT=Anz3ciN7h+zABmrMk5ckoZ1eh1wA-TA@mail.gmail.com>
Subject: Re: jigar query please help me
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

You can ignore the warning.

But you haven't told us a thing about *how* the failure occurs or
what gets reported. What exactly are you doing? What exactly
fails (i.e.do you just not find files? Get a stack trace? Get a
"class not found error"?)

We really cannot help at all without more information.

Best
Erick

On Wed, Jul 13, 2011 at 1:50 AM, jigar gandhi <jigargandhi5@gmail.com> wrote:
> hi.. i am jigar.
>
> while running lucene test file i m getting this errror please help me in its
> solution.
>
> Note: LuceneTest.java uses or overrides a deprecated API.
> Note: Recompile with -Xlint:deprecation for details.
>
> this two notes are cmng.
>
> code is compiled but not running.
>
> i am put lucene jar files at my class path.
>
> plz give me prpper solution
>
> thanks and regards.
>
> jigar gandhi
> 9662763299
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Fri Jul 15 20:03:33 2011
Return-Path: <java-user-return-50348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 16FCA660F
	for <apmail-lucene-java-user-archive@www.apache.org>; Fri, 15 Jul 2011 20:03:33 +0000 (UTC)
Received: (qmail 563 invoked by uid 500); 15 Jul 2011 20:03:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 252 invoked by uid 500); 15 Jul 2011 20:03:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 244 invoked by uid 99); 15 Jul 2011 20:03:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 20:03:29 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.210.52 as permitted sender)
Received: from [209.85.210.52] (HELO mail-pz0-f52.google.com) (209.85.210.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2011 20:03:23 +0000
Received: by pzd13 with SMTP id 13so2470046pzd.25
        for <java-user@lucene.apache.org>; Fri, 15 Jul 2011 13:03:03 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type:content-transfer-encoding;
        bh=tR3gnVGvFzKDnzk8wpYdbTvIuN6SQdco8Xn6jFQ4AwE=;
        b=QUyp0rpErTlVT8+zgiE1zobj2tD9MtMBkRVSZAynWU8yq0Q/ttHnQWjlccBPtn7Hvv
         mIEHBzCtxH0wzZwjgHfGVIJUDEHIEM08gWz7re3beNaojc15xDvOE8IO6YPr9xaZol/0
         qsGvE2WygUvk3k82T+ouIHtZ73OvHhx1x+n+I=
MIME-Version: 1.0
Received: by 10.68.56.10 with SMTP id w10mr4739641pbp.329.1310760182701; Fri,
 15 Jul 2011 13:03:02 -0700 (PDT)
Received: by 10.68.54.201 with HTTP; Fri, 15 Jul 2011 13:03:02 -0700 (PDT)
In-Reply-To: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
References: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
Date: Fri, 15 Jul 2011 16:03:02 -0400
Message-ID: <CAN4YXveMRbucz=AdABBMX=S-iHbUiV=623oAmkmLF3RR-zoJZA@mail.gmail.com>
Subject: Re: Questions on index Writer
From: Erick Erickson <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Index files should not be disappearing unless you're using the form
of opening an indexwriter that creates a new index. We'd need to see
the code you use top open the IW to provide more help.

If all you're doing is looking at the index directory, segments will disapp=
ear
as they are merged so that's also what you might be seeing. Can you give
us more details?

A good time to commit? Well, that depends. It really depends upon your app.
Given what you've described, and assuming that you've set reasonable
numbers for, say, setMaxBufferedDocs, setRAMBufferSizeMB just letting the
commit happen when you close is probably fine.

What do you hope to accomplish by executing maybeMerge()? Personally I'd
stay away from that unless you're solving a specific question and just let =
the
segment merge process operate to handle all that...

Best
Erick

On Fri, Jul 15, 2011 at 3:03 PM, Saurabh Gokhale
<saurabhgokhale@gmail.com> wrote:
> Hi All,
>
> I have following questions about lucene indexWriter. I am using version
> 3.1.0.
>
> While indexing documents,
> 1. When is the good time to commit changes? (indexWriter.commit) or just
> close the writer after the indexing is done so that commit automatically
> happens.
> 2. When is the good time to merge indexes (indexWriter.maybeMerge()). =A0=
Is it
> just before committing the changes or after indexing say X number of
> documents. (I recently upgraded from 2.9.4 to 3.1 and I see 3.1 lucene
> generates lot of small index files while indexing document)
>
> Also I have a problem where my lucene index files sometimes gets deleted
> from the index folder. I am not sure what code snippet is causing the
> existing index files to accidently get removed.
>
> My indexer runs in a thread loop where it indexes file whenever they are
> available. When no more files are available, indexer thread closes the
> writer and goes to sleep, after specific time, it again creates a new ind=
ex
> on the same folder and starts indexing new files if any available.
>
> A. Is it a wrong way to index files?
> B. Because I close the index and open it again later, am I seeing my luce=
ne
> index files getting deleted?
>
> Thanks
>
> Saurabh
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jul 16 16:21:23 2011
Return-Path: <java-user-return-50349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 0F89D772C
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 16 Jul 2011 16:21:23 +0000 (UTC)
Received: (qmail 77145 invoked by uid 500); 16 Jul 2011 16:21:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76995 invoked by uid 500); 16 Jul 2011 16:21:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76982 invoked by uid 99); 16 Jul 2011 16:21:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2011 16:21:19 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2011 16:21:11 +0000
Received: by qyk4 with SMTP id 4so1503126qyk.14
        for <java-user@lucene.apache.org>; Sat, 16 Jul 2011 09:20:50 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=yh9nACFbAy5VQTaR6Ribf/jE/U8hT2wRplbm8DL0abY=;
        b=I6XfDEjU9ivZzpzjBuxUEccNXlHRNDZXbiGvw3wnPdnWS+b1DsBbNi1eTQYVbzyQjj
         eICML7YA8sDLA2RZX77pHv+yBz99lt1EJ0R12aThNh9Cqb5LblPD1mFEpfW9KpSMicmH
         ejEIgllG1Qmo0gZdVz7CCa5H2owOy3fiXc/RI=
MIME-Version: 1.0
Received: by 10.229.189.8 with SMTP id dc8mr3620084qcb.174.1310833250451; Sat,
 16 Jul 2011 09:20:50 -0700 (PDT)
Received: by 10.229.70.148 with HTTP; Sat, 16 Jul 2011 09:20:50 -0700 (PDT)
In-Reply-To: <CAN4YXveMRbucz=AdABBMX=S-iHbUiV=623oAmkmLF3RR-zoJZA@mail.gmail.com>
References: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
	<CAN4YXveMRbucz=AdABBMX=S-iHbUiV=623oAmkmLF3RR-zoJZA@mail.gmail.com>
Date: Sat, 16 Jul 2011 11:20:50 -0500
Message-ID: <CANg0dT+dsxa3eo9hUsTGu7r2KjDf0W2r7AGNN9X37w3W0-wuRA@mail.gmail.com>
Subject: Re: Questions on index Writer
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=00163630f07540c1ad04a83226a0
X-Virus-Checked: Checked by ClamAV on apache.org

--00163630f07540c1ad04a83226a0
Content-Type: text/plain; charset=ISO-8859-1

Hi Eric

Thanks for the reply.

*Index Code:*

Here is the code snippet that I am using for creating index writer.

indexWriter = new IndexWriter(FSDirectory.open(new File(indexDirName)),
getAnalyzer(), true, MaxFieldLength.UNLIMITED);

Does this statement cleans up existing index files? If yes, then how do I
tackle a scenario where lets say I brought down my application server
hosting code to create lucene index and then start it again, this way a new
JVM will start creating indexWriter instance again which will eventually
clean up my existing index files.

*Code Setup:*

I have a singleton IndexObjectsCreator factory class with indexWriter as an
instance level variable. This factory creates all the objects required like
writer, reader, searcher etc. I create factory instance and indexwriter
instance only once and returns the same instance to the client.

Client can eventually call close on the indexWriter. If it does, then
I create a new indexWriter and return back for the next call for the writer.
My factory instance remains singleton for the duration of the application
run.


*MayBeMerge:*
Yes, as per your suggestion, I will skip this method call, if the segment
merge process operates well within itself automatically then I dont see a
need to call this method as my intetions were to suggest a merge request to
lucene.


thanks again

Saurabh


On Fri, Jul 15, 2011 at 3:03 PM, Erick Erickson <erickerickson@gmail.com>wrote:

> Index files should not be disappearing unless you're using the form
> of opening an indexwriter that creates a new index. We'd need to see
> the code you use top open the IW to provide more help.
>
> If all you're doing is looking at the index directory, segments will
> disappear
> as they are merged so that's also what you might be seeing. Can you give
> us more details?
>
> A good time to commit? Well, that depends. It really depends upon your app.
> Given what you've described, and assuming that you've set reasonable
> numbers for, say, setMaxBufferedDocs, setRAMBufferSizeMB just letting the
> commit happen when you close is probably fine.
>
> What do you hope to accomplish by executing maybeMerge()? Personally I'd
> stay away from that unless you're solving a specific question and just let
> the
> segment merge process operate to handle all that...
>
> Best
> Erick
>
> On Fri, Jul 15, 2011 at 3:03 PM, Saurabh Gokhale
> <saurabhgokhale@gmail.com> wrote:
> > Hi All,
> >
> > I have following questions about lucene indexWriter. I am using version
> > 3.1.0.
> >
> > While indexing documents,
> > 1. When is the good time to commit changes? (indexWriter.commit) or just
> > close the writer after the indexing is done so that commit automatically
> > happens.
> > 2. When is the good time to merge indexes (indexWriter.maybeMerge()).  Is
> it
> > just before committing the changes or after indexing say X number of
> > documents. (I recently upgraded from 2.9.4 to 3.1 and I see 3.1 lucene
> > generates lot of small index files while indexing document)
> >
> > Also I have a problem where my lucene index files sometimes gets deleted
> > from the index folder. I am not sure what code snippet is causing the
> > existing index files to accidently get removed.
> >
> > My indexer runs in a thread loop where it indexes file whenever they are
> > available. When no more files are available, indexer thread closes the
> > writer and goes to sleep, after specific time, it again creates a new
> index
> > on the same folder and starts indexing new files if any available.
> >
> > A. Is it a wrong way to index files?
> > B. Because I close the index and open it again later, am I seeing my
> lucene
> > index files getting deleted?
> >
> > Thanks
> >
> > Saurabh
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

--00163630f07540c1ad04a83226a0--

From java-user-return-50350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jul 16 19:34:54 2011
Return-Path: <java-user-return-50350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 12D5F7780
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 16 Jul 2011 19:34:54 +0000 (UTC)
Received: (qmail 8680 invoked by uid 500); 16 Jul 2011 19:34:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8618 invoked by uid 500); 16 Jul 2011 19:34:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8610 invoked by uid 99); 16 Jul 2011 19:34:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2011 19:34:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2011 19:34:43 +0000
Received: by qwj9 with SMTP id 9so1528625qwj.35
        for <java-user@lucene.apache.org>; Sat, 16 Jul 2011 12:34:23 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=content-type:mime-version:subject:from:in-reply-to:date
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=27hh6O/A6D9JwQNwrj89g5c8hxnA+hC1ASFjUtI8OqY=;
        b=OLjVvY6vEC/4uNovZGHmnYuAikvbWhEF5paRzi0+g7kZEP4knsHscp/EtjIbW9obQC
         kqoXNEYUM5KQqBpdm6/UXNpqtGYd2NJ2zJDBHwmjQZpZXbsEYYGRVvusF9NhVNRl2Hf0
         pdNmOViAiP1Ca5D7K5koS21DfGqrPgmeEaYG8=
Received: by 10.224.200.74 with SMTP id ev10mr1535097qab.130.1310844861324;
        Sat, 16 Jul 2011 12:34:21 -0700 (PDT)
Received: from [192.168.1.201] (ool-44c78059.dyn.optonline.net [68.199.128.89])
        by mx.google.com with ESMTPS id q9sm852154qct.20.2011.07.16.12.34.19
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 16 Jul 2011 12:34:20 -0700 (PDT)
Content-Type: text/plain; charset=us-ascii
Mime-Version: 1.0 (Apple Message framework v1084)
Subject: Re: Questions on index Writer
From: Mark Miller <markrmiller@gmail.com>
In-Reply-To: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
Date: Sat, 16 Jul 2011 15:34:17 -0400
Content-Transfer-Encoding: quoted-printable
Message-Id: <F07936DD-4185-482A-BFA9-B65A26432C6B@gmail.com>
References: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.1084)

My advice: Don't close the IndexWriter - just call commit. Don't worry =
about forcing merges - let them happen as they do when you call commit.

If you are going to use the IndexWriter again, you generally do not want =
to close it. Calling commit is the preferred option.

- Mark Miller
lucidimagination.com

On Jul 15, 2011, at 3:03 PM, Saurabh Gokhale wrote:

> Hi All,
>=20
> I have following questions about lucene indexWriter. I am using =
version
> 3.1.0.
>=20
> While indexing documents,
> 1. When is the good time to commit changes? (indexWriter.commit) or =
just
> close the writer after the indexing is done so that commit =
automatically
> happens.
> 2. When is the good time to merge indexes (indexWriter.maybeMerge()).  =
Is it
> just before committing the changes or after indexing say X number of
> documents. (I recently upgraded from 2.9.4 to 3.1 and I see 3.1 lucene
> generates lot of small index files while indexing document)
>=20
> Also I have a problem where my lucene index files sometimes gets =
deleted
> from the index folder. I am not sure what code snippet is causing the
> existing index files to accidently get removed.
>=20
> My indexer runs in a thread loop where it indexes file whenever they =
are
> available. When no more files are available, indexer thread closes the
> writer and goes to sleep, after specific time, it again creates a new =
index
> on the same folder and starts indexing new files if any available.
>=20
> A. Is it a wrong way to index files?
> B. Because I close the index and open it again later, am I seeing my =
lucene
> index files getting deleted?
>=20
> Thanks
>=20
> Saurabh











---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sat Jul 16 20:08:36 2011
Return-Path: <java-user-return-50351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 648A1770A
	for <apmail-lucene-java-user-archive@www.apache.org>; Sat, 16 Jul 2011 20:08:36 +0000 (UTC)
Received: (qmail 42287 invoked by uid 500); 16 Jul 2011 20:08:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42173 invoked by uid 500); 16 Jul 2011 20:08:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42165 invoked by uid 99); 16 Jul 2011 20:08:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2011 20:08:33 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of caraman.mihai@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2011 20:08:26 +0000
Received: by iwi5 with SMTP id 5so2896434iwi.35
        for <java-user@lucene.apache.org>; Sat, 16 Jul 2011 13:08:06 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=TVbGqe/2C/ZXEI18YvxSRK/8RAn0zEjC+knmJIAu6NQ=;
        b=nGWmr2B7w9/9134oRn72uZgUnrEnHSftr0aRYzER13jxMhQVgXaZhuT3mlndVLoCtB
         A7Nz48qCY3gcZbq2fvcWJrTjbYRxoQumdpC1se6/reO1HvE1+PRLevZULXG1DXHtUUkK
         HOxPd0xCvJesinK0RJbQs4HwN9JWnkncQDqWY=
MIME-Version: 1.0
Received: by 10.231.67.18 with SMTP id p18mr4537055ibi.48.1310846886299; Sat,
 16 Jul 2011 13:08:06 -0700 (PDT)
Received: by 10.231.44.7 with HTTP; Sat, 16 Jul 2011 13:08:06 -0700 (PDT)
In-Reply-To: <CANg0dT+dsxa3eo9hUsTGu7r2KjDf0W2r7AGNN9X37w3W0-wuRA@mail.gmail.com>
References: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
	<CAN4YXveMRbucz=AdABBMX=S-iHbUiV=623oAmkmLF3RR-zoJZA@mail.gmail.com>
	<CANg0dT+dsxa3eo9hUsTGu7r2KjDf0W2r7AGNN9X37w3W0-wuRA@mail.gmail.com>
Date: Sat, 16 Jul 2011 23:08:06 +0300
Message-ID: <CAJ-pxHZdHxmj6mCU=q5VanBtF5t+JyvwVR7eDtzqSequS_mRXw@mail.gmail.com>
Subject: Re: Questions on index Writer
From: Mihai Caraman <caraman.mihai@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0015176f0b38034a0404a8355360

--0015176f0b38034a0404a8355360
Content-Type: text/plain; charset=ISO-8859-1

>
> indexWriter = new IndexWriter(FSDirectory.open(new File(indexDirName)),
> getAnalyzer(), true, MaxFieldLength.UNLIMITED);
>
> Does this statement cleans up existing index files?

yes


> If yes, then how do I
> tackle a scenario where lets say I brought down my application server
> hosting code to create lucene index and then start it again, this way a new
> JVM will start creating indexWriter instance again which will eventually
> clean up my existing index files.
>

indexWriter = new IndexWriter(FSDirectory.open(new File(indexDirName)),
           getAnalyzer(), *false*, MaxFieldLength.UNLIMITED);

Note:
 To avoid using deprecated method use the equivalent code:

        Directory idx = new NIOFSDirectory(new File(indexDirName), null);
        IndexWriterConfig iConfig = new
IndexWriterConfig(Version.LUCENE_31,getAnalyzer());
        iConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);
        indexWriter = new IndexWriter(idx, iConfig);

--0015176f0b38034a0404a8355360--

From java-user-return-50352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jul 17 03:04:40 2011
Return-Path: <java-user-return-50352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A274F60A6
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 17 Jul 2011 03:04:40 +0000 (UTC)
Received: (qmail 54881 invoked by uid 500); 17 Jul 2011 03:04:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54289 invoked by uid 500); 17 Jul 2011 03:04:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54279 invoked by uid 99); 17 Jul 2011 03:04:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2011 03:04:14 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of saurabhgokhale@gmail.com designates 209.85.216.48 as permitted sender)
Received: from [209.85.216.48] (HELO mail-qw0-f48.google.com) (209.85.216.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2011 03:04:07 +0000
Received: by qwj9 with SMTP id 9so1622843qwj.35
        for <java-user@lucene.apache.org>; Sat, 16 Jul 2011 20:03:46 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=xttSzPY+05UWZfmYte2Z32MYUq+6NN3who01vTBC2js=;
        b=P8aSyZRYnKPX1Hf4DFJuDPTyVVCOlxZXwhdmRLCMlIQDe6o3IjeSlJjliO5fxR/Izp
         N0OOynOkN3QyH0LA4ZsqLC0+aeafBiwMti0BJvngehedRnUZ+vdUjpGsiTqqe7ZEv409
         V8FBzqG02f9fzCNLFZTI2b8w685avE3LMGGyQ=
MIME-Version: 1.0
Received: by 10.229.66.200 with SMTP id o8mr3712654qci.250.1310871826467; Sat,
 16 Jul 2011 20:03:46 -0700 (PDT)
Received: by 10.229.70.148 with HTTP; Sat, 16 Jul 2011 20:03:46 -0700 (PDT)
In-Reply-To: <CAJ-pxHZdHxmj6mCU=q5VanBtF5t+JyvwVR7eDtzqSequS_mRXw@mail.gmail.com>
References: <CANg0dT+-4hpTtooAm6_bLBtXyU=C3GoCjXH=vND+Hr8E6XPhKw@mail.gmail.com>
	<CAN4YXveMRbucz=AdABBMX=S-iHbUiV=623oAmkmLF3RR-zoJZA@mail.gmail.com>
	<CANg0dT+dsxa3eo9hUsTGu7r2KjDf0W2r7AGNN9X37w3W0-wuRA@mail.gmail.com>
	<CAJ-pxHZdHxmj6mCU=q5VanBtF5t+JyvwVR7eDtzqSequS_mRXw@mail.gmail.com>
Date: Sat, 16 Jul 2011 22:03:46 -0500
Message-ID: <CANg0dTKEAqjqA7s-+e_0Z1+SiRkBOFLqUTwdn3M6Wp1otBGYww@mail.gmail.com>
Subject: Re: Questions on index Writer
From: Saurabh Gokhale <saurabhgokhale@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=0016e64f45da900d0304a83b217d

--0016e64f45da900d0304a83b217d
Content-Type: text/plain; charset=ISO-8859-1

Thanks guys, that helped a lot.

Saurabh

On Sat, Jul 16, 2011 at 3:08 PM, Mihai Caraman <caraman.mihai@gmail.com>wrote:

> >
> > indexWriter = new IndexWriter(FSDirectory.open(new File(indexDirName)),
> > getAnalyzer(), true, MaxFieldLength.UNLIMITED);
> >
> > Does this statement cleans up existing index files?
>
> yes
>
>
> > If yes, then how do I
> > tackle a scenario where lets say I brought down my application server
> > hosting code to create lucene index and then start it again, this way a
> new
> > JVM will start creating indexWriter instance again which will eventually
> > clean up my existing index files.
> >
>
> indexWriter = new IndexWriter(FSDirectory.open(new File(indexDirName)),
>            getAnalyzer(), *false*, MaxFieldLength.UNLIMITED);
>
> Note:
>  To avoid using deprecated method use the equivalent code:
>
>        Directory idx = new NIOFSDirectory(new File(indexDirName), null);
>        IndexWriterConfig iConfig = new
> IndexWriterConfig(Version.LUCENE_31,getAnalyzer());
>        iConfig.setOpenMode(IndexWriterConfig.OpenMode.CREATE_OR_APPEND);
>        indexWriter = new IndexWriter(idx, iConfig);
>

--0016e64f45da900d0304a83b217d--

From java-user-return-50353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jul 17 12:40:38 2011
Return-Path: <java-user-return-50353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id B0D14690D
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 17 Jul 2011 12:40:38 +0000 (UTC)
Received: (qmail 3860 invoked by uid 500); 17 Jul 2011 12:40:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3716 invoked by uid 500); 17 Jul 2011 12:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3708 invoked by uid 99); 17 Jul 2011 12:40:34 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2011 12:40:34 +0000
X-ASF-Spam-Status: No, hits=3.0 required=5.0
	tests=FORGED_YAHOO_RCVD,FREEMAIL_FROM,SPF_NEUTRAL,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.139.236.26] (HELO sam.nabble.com) (216.139.236.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2011 12:40:28 +0000
Received: from ben.nabble.com ([192.168.236.152])
	by sam.nabble.com with esmtp (Exim 4.72)
	(envelope-from <farag_ahmed@yahoo.com>)
	id 1QiQdi-0000i6-Sw
	for java-user@lucene.apache.org; Sun, 17 Jul 2011 05:40:06 -0700
Date: Sun, 17 Jul 2011 05:40:06 -0700 (PDT)
From: starz10de <farag_ahmed@yahoo.com>
To: java-user@lucene.apache.org
Message-ID: <1310906406889-3176703.post@n3.nabble.com>
Subject: Store the documents content in the index
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

HI,=20

Currently my text source files (800 000) are stored in folder which make
retrieving it by many users some how slow. I heard it might be possible tha=
t
these files content can be stored in the index it self although I found thi=
s
unrealistic.=20

Is it possible storing the source text files content in the index instead o=
f
just =E2=80=9Cdoc id=E2=80=9D which is assigned with each term in the index=
?=20
=20



--
View this message in context: http://lucene.472066.n3.nabble.com/Store-the-=
documents-content-in-the-index-tp3176703p3176703.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Sun Jul 17 14:08:53 2011
Return-Path: <java-user-return-50354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 247CD6745
	for <apmail-lucene-java-user-archive@www.apache.org>; Sun, 17 Jul 2011 14:08:53 +0000 (UTC)
Received: (qmail 64216 invoked by uid 500); 17 Jul 2011 14:08:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63985 invoked by uid 500); 17 Jul 2011 14:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63977 invoked by uid 99); 17 Jul 2011 14:08:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2011 14:08:50 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of pavel.goncharik@gmail.com designates 209.85.212.48 as permitted sender)
Received: from [209.85.212.48] (HELO mail-vw0-f48.google.com) (209.85.212.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2011 14:08:42 +0000
Received: by vws7 with SMTP id 7so3034922vws.35
        for <java-user@lucene.apache.org>; Sun, 17 Jul 2011 07:08:21 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=x3DvpIy9BY1fQl4nUeA57pydEcvIWtQCEq7gcCjwlGU=;
        b=FExbifGCFX4/3aeOu3JwXHwU3fle6utVqWls5uKehCFx5Lei4CcgVnnLAfgPcTFWSx
         1c1/4aJidfYu9wUstmYDRPnhSxlhoeMy+S5rz9GymAJ9rtLt33Qp5+rYNpkiCTiaal0B
         YAuIsguG4O0/ufPAxoDjTkqkhKDi8eylj2xzo=
MIME-Version: 1.0
Received: by 10.52.176.73 with SMTP id cg9mr5312955vdc.117.1310911701838; Sun,
 17 Jul 2011 07:08:21 -0700 (PDT)
Received: by 10.52.167.105 with HTTP; Sun, 17 Jul 2011 07:08:21 -0700 (PDT)
Date: Sun, 17 Jul 2011 16:08:21 +0200
Message-ID: <CAM4KGskekFY=zAREGaQjEPc8W-5BREwRfKsta--uRqTz1b42QQ@mail.gmail.com>
Subject: multiply sub-scores in boolean query
From: Pavel Goncharik <pavel.goncharik@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

as far as I can see, boolean scorers always sum up scores of their
sub-scorers. It works, but in case of my application it's required to
multiply sub-scores.
Is there a simple/efficient way to do this (apart from modifying
lucene's source code)?
It seems to me that standard tricks (e.g. CustomScoreQuery or custom
Similarity) would not help me in this case.

Thanks in advance for helping!

Pavel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 06:33:24 2011
Return-Path: <java-user-return-50355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 5F8457DF8
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 06:33:24 +0000 (UTC)
Received: (qmail 31019 invoked by uid 500); 18 Jul 2011 06:33:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30258 invoked by uid 500); 18 Jul 2011 06:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30016 invoked by uid 99); 18 Jul 2011 06:32:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 06:32:59 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mickey.guoyun@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 06:32:52 +0000
Received: by iyi20 with SMTP id 20so3935856iyi.35
        for <java-user@lucene.apache.org>; Sun, 17 Jul 2011 23:32:31 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=date:from:to:subject:message-id:x-mailer:mime-version:content-type;
        bh=66UqazrYS+Om8ctTKrEMqMGH5Up4Tm0BfmA4lVoR2Ek=;
        b=CttSuPD02v/hDUIrrg86qlkdvRHOS23WsSgyVGNE1J6uHixQOF2VjMckwT1D7idrR+
         Rx6M3tU7Er+F0t7MI7dLwWQPPNfYlz6zES2AvPPU1M0q4nqfNMcf/QD8XYXtMEf0GVdw
         4zpm7thTRSVKN8inxExESkrqKAFnQgQzf3YIM=
Received: by 10.42.163.9 with SMTP id a9mr1552637icy.345.1310970751813;
        Sun, 17 Jul 2011 23:32:31 -0700 (PDT)
Received: from www-03303ae7c50 ([210.22.154.182])
        by mx.google.com with ESMTPS id q4sm2717053ibb.32.2011.07.17.23.32.29
        (version=SSLv3 cipher=OTHER);
        Sun, 17 Jul 2011 23:32:30 -0700 (PDT)
Date: Mon, 18 Jul 2011 14:32:29 +0800
From: "mickey.guoyun" <mickey.guoyun@gmail.com>
To: "lucene-core" <java-user@lucene.apache.org>
Subject: store and query the relation between the terms
Message-ID: <201107181432265140636@gmail.com>
X-mailer: Foxmail 6, 15, 201, 23 [cn]
Mime-Version: 1.0
Content-Type: multipart/alternative;
	boundary="=====003_Dragon155008068560_====="

--=====003_Dragon155008068560_=====
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,I have a reqiment,i need to calculate the relation between the terms.for example

Term1    Term2    relation(Weight)
iphone    ipad      0.99999
iphone   apple     0.88888
iphone   food      0.33333

theare are a lot of term in my dictionary,about 600,000.it means that  i must store about 
600,000*(600,000-1) records.so it can not store in memory fully.
and when i search iphone ,i must get  top N terms(order by relation desc,get top n).

does there have open source freamework to complete this reqiment?like Lucene to store and search the term's tf,df
Thank you!

2011-07-18 



mickey.guoyun 

--=====003_Dragon155008068560_=====--


From java-user-return-50356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 08:09:52 2011
Return-Path: <java-user-return-50356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9EFE8729F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 08:09:52 +0000 (UTC)
Received: (qmail 18803 invoked by uid 500); 18 Jul 2011 08:09:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16758 invoked by uid 500); 18 Jul 2011 08:09:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16720 invoked by uid 99); 18 Jul 2011 08:09:30 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 08:09:30 +0000
X-ASF-Spam-Status: No, hits=-0.7 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 08:09:23 +0000
Received: by iwi5 with SMTP id 5so3967445iwi.35
        for <java-user@lucene.apache.org>; Mon, 18 Jul 2011 01:09:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=lRR/PdUumS3k9ztb+WmE0ucg2AFu8JiTp2UeAVDMXgM=;
        b=qRMT28K2SZMG2VrI/CJco617+FONFEZbnu/3pDiZ41G0OcSPrGclaPPjg8KRqO2AJb
         zPBKCJvJB03jfSvY1lMxtiuDUkquuHWntGcEHvXgMhyKhMq+DQW9eNaUn2y6eq/OQZwz
         gWPrEvVkpL8a9JT4H907FeY945owFiFixZwaw=
Received: by 10.231.17.10 with SMTP id q10mr2392827iba.179.1310976542145; Mon,
 18 Jul 2011 01:09:02 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.67 with HTTP; Mon, 18 Jul 2011 01:08:42 -0700 (PDT)
In-Reply-To: <4E204844.6020502@mufin.com>
References: <4E204844.6020502@mufin.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 18 Jul 2011 09:08:42 +0100
Message-ID: <CAEY5pxVza9PJ6ZQmOGQQrA_CJXfhFoD202PfVXEC7bE8PKSifA@mail.gmail.com>
Subject: Re: TermQuery - ExactMatching, Lucene 3.1.0 vs. 3.3.0, special
 character behavior
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I'm not sure what you are getting at.  A search using 3.1.0 and 3.3.0
returns the same docs with identical scores, except that one gives
them in order A,B and the other in order B,A?  What search method are
you using?  Does it guarantee anything about the order of returning
docs with identical scores?


--
Ian.


On Fri, Jul 15, 2011 at 3:01 PM, Thomas Rewig <trewig@mufin.com> wrote:
>  Hello,
>
> there is a index with a lot of docs, 2 of them are:
>
> doc1:
>
>    1.Field=id            ITSVopfOLB=ITS---f0-- Value= 192
>    2.Field=name     ITSVopfOLB=ITS----0-- Value= queen
>
> doc2:
>
>    1.Field=id            ITSVopfOLB=ITS---f0-- Value= 701492
>    2.Field=name     ITSVopfOLB=ITS----0-- Value= queen$BHDLnM'H~(B (Here are chinese
> characters - hopefully you can see them)
>
> if I search in the index - with a TermQuery there is a different behavior
> between Lucene 3.1.0 and 3.3.0 :
>
> Query:
>
>    Term:field='name' text='queen'
>
> Result Lucene 3.1.0:
>
>    0    Score=13,2132    Doc.Id=176002    id=192 name=queen
>    1    Score=13,2132    Doc.Id=523407    id=701492 name=queen$BHDLnM'H~(B
>
> Result Lucene 3.3.0:
>
>    0    Score=13,2132    Doc.Id=523407    id=701492 name=queen$BHDLnM'H~(B
>    1    Score=13,2132    Doc.Id=176002    id=192 name=queen
>
> The result from Lucene 3.1.0 is that, what I would expect if I do a 'exact
> matching' Term Query.
> Each index was indexed with its associated LuceneVersion.
> I tested it with luke and with my own Code - the result was always the same.
>
> Is it a new feature in Lucene 3.3.0 or a bug?
>
> Thanks in advance!
> Thomas
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 08:12:59 2011
Return-Path: <java-user-return-50357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6343A731E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 08:12:59 +0000 (UTC)
Received: (qmail 22717 invoked by uid 500); 18 Jul 2011 08:12:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22558 invoked by uid 500); 18 Jul 2011 08:12:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22550 invoked by uid 99); 18 Jul 2011 08:12:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 08:12:43 +0000
X-ASF-Spam-Status: No, hits=0.6 required=5.0
	tests=FREEMAIL_FROM,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of ian.lea@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 08:12:37 +0000
Received: by iwi5 with SMTP id 5so3969720iwi.35
        for <java-user@lucene.apache.org>; Mon, 18 Jul 2011 01:12:16 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :content-type:content-transfer-encoding;
        bh=rAG5pUcb/2qaWXDOoR/P0qD9QGGVVrAREkgQy1+mBkE=;
        b=wiEud99nP3oy5772mYxaporyZbU96zpnNVM41Ql83Ea5rccKjhXtPCLf8WIO6x+7CL
         gqqIhK9+fs98uHgwNy0Y3aOaPvioBxmyMdldNE22V03ZWdIrnziKVENxgU3paGNgrExK
         JhjAxSCdp8gB9JphI00sfJ5sxywpa7zY1vDIA=
Received: by 10.231.125.212 with SMTP id z20mr5718593ibr.154.1310976736136;
 Mon, 18 Jul 2011 01:12:16 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.231.199.67 with HTTP; Mon, 18 Jul 2011 01:11:56 -0700 (PDT)
In-Reply-To: <1310906406889-3176703.post@n3.nabble.com>
References: <1310906406889-3176703.post@n3.nabble.com>
From: Ian Lea <ian.lea@gmail.com>
Date: Mon, 18 Jul 2011 09:11:56 +0100
Message-ID: <CAEY5pxUPeXZgfACSbxMUn_hvTdtz1J0CF78pz-xQWZnXzifopA@mail.gmail.com>
Subject: Re: Store the documents content in the index
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=windows-1252
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org

Of course.  See the javadocs for Field, Field.Store and Field.Index.


--
Ian.


On Sun, Jul 17, 2011 at 1:40 PM, starz10de <farag_ahmed@yahoo.com> wrote:
> HI,
>
> Currently my text source files (800 000) are stored in folder which make
> retrieving it by many users some how slow. I heard it might be possible t=
hat
> these files content can be stored in the index it self although I found t=
his
> unrealistic.
>
> Is it possible storing the source text files content in the index instead=
 of
> just =93doc id=94 which is assigned with each term in the index?
>
>
>
>
> --
> View this message in context: http://lucene.472066.n3.nabble.com/Store-th=
e-documents-content-in-the-index-tp3176703p3176703.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 10:06:23 2011
Return-Path: <java-user-return-50358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9861C7474
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 10:06:23 +0000 (UTC)
Received: (qmail 61188 invoked by uid 500); 18 Jul 2011 10:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60390 invoked by uid 500); 18 Jul 2011 10:06:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60373 invoked by uid 99); 18 Jul 2011 10:06:10 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 10:06:10 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of trewig@mufin.com designates 195.214.216.122 as permitted sender)
Received: from [195.214.216.122] (HELO mx2.de.magix.net) (195.214.216.122)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 10:06:04 +0000
Received: from [192.168.1.18] (port=36617)
	by mx2.de.magix.net with esmtpa (Exim 4.69)
	(envelope-from <trewig@mufin.com>)
	id 1Qikhq-0007Qj-KT
	for java-user@lucene.apache.org; Mon, 18 Jul 2011 12:05:42 +0200
Message-ID: <4E24056F.6090908@mufin.com>
Date: Mon, 18 Jul 2011 12:05:35 +0200
From: Thomas Rewig <trewig@mufin.com>
Organization: mufin
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; de; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: TermQuery - ExactMatching, Lucene 3.1.0 vs. 3.3.0, special character
 behavior
References: <4E204844.6020502@mufin.com> <CAEY5pxVza9PJ6ZQmOGQQrA_CJXfhFoD202PfVXEC7bE8PKSifA@mail.gmail.com>
In-Reply-To: <CAEY5pxVza9PJ6ZQmOGQQrA_CJXfhFoD202PfVXEC7bE8PKSifA@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-SA-Exim-Connect-IP: 192.168.1.18
X-SA-Exim-Mail-From: trewig@mufin.com
X-SA-Exim-Scanned: No (on mx2.de.magix.net); SAEximRunCond expanded to false

  Hi Ian,

yes the score is identical but the inner ordering of same scores seems 
to be different in the versions.

In Lucene 3.3.0 it seems that terms with special characters will be 
preferred before the exact hit.

My code is:

     PhraseQuery query = new PhraseQuery();
         query.add(new Term("name", strQueryName));

         //topDocs = this.indexSeacher.search(query, 10);
         //topDocs = this.indexSeacher.search(query, 10, Sort.RELEVANCE);
             topDocs = this.indexSeacher.search(query, 10, Sort.INDEXORDER);

In all variants there are similar ordering problems even if they do not 
always occur at the same query.
e.g. if I order by Sort.RELEVANCE the "queen" Doc problem doesn't occur 
but there is a wrong ordering in the token aim (query name:aim)


0    Score=12,2324     Doc.Id=8060       id=709579     name=aim溝脇しほみ
1    Score=12,2324    Doc.Id=227606   id=716893      name=aim


Is there a way to guarantee the inner sorting of same scores? Or how can 
I avoid that documente with special characters have the same score as 
documente of exact matches?

Thanks in advance!
Thomas




Am 18.07.2011 10:08, schrieb Ian Lea:
> I'm not sure what you are getting at.  A search using 3.1.0 and 3.3.0
> returns the same docs with identical scores, except that one gives
> them in order A,B and the other in order B,A?  What search method are
> you using?  Does it guarantee anything about the order of returning
> docs with identical scores?
>
>
> --
> Ian.
>
>
> On Fri, Jul 15, 2011 at 3:01 PM, Thomas Rewig<trewig@mufin.com>  wrote:
>>   Hello,
>>
>> there is a index with a lot of docs, 2 of them are:
>>
>> doc1:
>>
>>     1.Field=id            ITSVopfOLB=ITS---f0-- Value= 192
>>     2.Field=name     ITSVopfOLB=ITS----0-- Value= queen
>>
>> doc2:
>>
>>     1.Field=id            ITSVopfOLB=ITS---f0-- Value= 701492
>>     2.Field=name     ITSVopfOLB=ITS----0-- Value= queen板野友美 (Here are chinese
>> characters - hopefully you can see them)
>>
>> if I search in the index - with a TermQuery there is a different behavior
>> between Lucene 3.1.0 and 3.3.0 :
>>
>> Query:
>>
>>     Term:field='name' text='queen'
>>
>> Result Lucene 3.1.0:
>>
>>     0    Score=13,2132    Doc.Id=176002    id=192 name=queen
>>     1    Score=13,2132    Doc.Id=523407    id=701492 name=queen板野友美
>>
>> Result Lucene 3.3.0:
>>
>>     0    Score=13,2132    Doc.Id=523407    id=701492 name=queen板野友美
>>     1    Score=13,2132    Doc.Id=176002    id=192 name=queen
>>
>> The result from Lucene 3.1.0 is that, what I would expect if I do a 'exact
>> matching' Term Query.
>> Each index was indexed with its associated LuceneVersion.
>> I tested it with luke and with my own Code - the result was always the same.
>>
>> Is it a new feature in Lucene 3.3.0 or a bug?
>>
>> Thanks in advance!
>> Thomas
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 10:13:41 2011
Return-Path: <java-user-return-50359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id D2893766D
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 10:13:41 +0000 (UTC)
Received: (qmail 70109 invoked by uid 500); 18 Jul 2011 10:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68810 invoked by uid 500); 18 Jul 2011 10:13:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68792 invoked by uid 99); 18 Jul 2011 10:13:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 10:13:28 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of uwe@thetaphi.de designates 188.138.97.18 as permitted sender)
Received: from [188.138.97.18] (HELO mail.sd-datasolutions.de) (188.138.97.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 10:13:23 +0000
Received: from VEGA (gate1.marum.de [134.102.237.1])
	by mail.sd-datasolutions.de (Postfix) with ESMTPSA id F1DB814AA3D7
	for <java-user@lucene.apache.org>; Mon, 18 Jul 2011 10:13:01 +0000 (UTC)
From: "Uwe Schindler" <uwe@thetaphi.de>
To: <java-user@lucene.apache.org>
References: <4E204844.6020502@mufin.com> <CAEY5pxVza9PJ6ZQmOGQQrA_CJXfhFoD202PfVXEC7bE8PKSifA@mail.gmail.com> <4E24056F.6090908@mufin.com>
In-Reply-To: <4E24056F.6090908@mufin.com>
Subject: RE: TermQuery - ExactMatching, Lucene 3.1.0 vs. 3.3.0, special character behavior
Date: Mon, 18 Jul 2011 12:13:13 +0200
Message-ID: <002401cc4533$4e4d7710$eae86530$@thetaphi.de>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Outlook 14.0
Thread-Index: AQI2VyAuA5P7BLBB6zRbmKN6jtzqzAIJeSNAAuk4JVCT9iFZEA==
Content-Language: de

Hi Thomas,

Just one question: Are these docIds from Lucene or your own ones? And =
second, are the underlying indexes also built with the corresponding =
Lucene versions?

The reason behind: Nothing in Lucene guarantees the order of docIds for =
same scores, they can be arbitrary. One change in Lucene 3.3 is for =
example the use of TieredMergePolicy, that reorders documents during =
indexing for more efficient merging. So when you indexed also with =
Lucene 3.3 and the displayed document IDs are your own application =
specific ones (not the internal Lucene ones), the different order of =
search results can simply be caused by the fact, that the indexer in 3.3 =
can suddenly reorder the documents during merging (TieredMergePolicy). =
There is nothing wrong with that.

Uwe

-----
Uwe Schindler
H.-H.-Meier-Allee 63, D-28213 Bremen
http://www.thetaphi.de
eMail: uwe@thetaphi.de


> -----Original Message-----
> From: Thomas Rewig [mailto:trewig@mufin.com]
> Sent: Monday, July 18, 2011 12:06 PM
> To: java-user@lucene.apache.org
> Subject: Re: TermQuery - ExactMatching, Lucene 3.1.0 vs. 3.3.0, =
special
> character behavior
>=20
>   Hi Ian,
>=20
> yes the score is identical but the inner ordering of same scores seems =
to be
> different in the versions.
>=20
> In Lucene 3.3.0 it seems that terms with special characters will be =
preferred
> before the exact hit.
>=20
> My code is:
>=20
>      PhraseQuery query =3D new PhraseQuery();
>          query.add(new Term("name", strQueryName));
>=20
>          //topDocs =3D this.indexSeacher.search(query, 10);
>          //topDocs =3D this.indexSeacher.search(query, 10, =
Sort.RELEVANCE);
>              topDocs =3D this.indexSeacher.search(query, 10, =
Sort.INDEXORDER);
>=20
> In all variants there are similar ordering problems even if they do =
not always
> occur at the same query.
> e.g. if I order by Sort.RELEVANCE the "queen" Doc problem doesn't =
occur but
> there is a wrong ordering in the token aim (query name:aim)
>=20
>=20
> 0    Score=3D12,2324     Doc.Id=3D8060       id=3D709579     =
name=3Daim=E6=BA=9D=E8=84=87=E3=81=97=E3=81=BB=E3=81=BF
> 1    Score=3D12,2324    Doc.Id=3D227606   id=3D716893      name=3Daim
>=20
>=20
> Is there a way to guarantee the inner sorting of same scores? Or how =
can I
> avoid that documente with special characters have the same score as
> documente of exact matches?
>=20
> Thanks in advance!
> Thomas
>=20
>=20
>=20
>=20
> Am 18.07.2011 10:08, schrieb Ian Lea:
> > I'm not sure what you are getting at.  A search using 3.1.0 and =
3.3.0
> > returns the same docs with identical scores, except that one gives
> > them in order A,B and the other in order B,A?  What search method =
are
> > you using?  Does it guarantee anything about the order of returning
> > docs with identical scores?
> >
> >
> > --
> > Ian.
> >
> >
> > On Fri, Jul 15, 2011 at 3:01 PM, Thomas Rewig<trewig@mufin.com>  =
wrote:
> >>   Hello,
> >>
> >> there is a index with a lot of docs, 2 of them are:
> >>
> >> doc1:
> >>
> >>     1.Field=3Did            ITSVopfOLB=3DITS---f0-- Value=3D 192
> >>     2.Field=3Dname     ITSVopfOLB=3DITS----0-- Value=3D queen
> >>
> >> doc2:
> >>
> >>     1.Field=3Did            ITSVopfOLB=3DITS---f0-- Value=3D 701492
> >>     2.Field=3Dname     ITSVopfOLB=3DITS----0-- Value=3D =
queen=E6=9D=BF=E9=87=8E=E5=8F=8B=E7=BE=8E (Here
> are chinese
> >> characters - hopefully you can see them)
> >>
> >> if I search in the index - with a TermQuery there is a different
> >> behavior between Lucene 3.1.0 and 3.3.0 :
> >>
> >> Query:
> >>
> >>     Term:field=3D'name' text=3D'queen'
> >>
> >> Result Lucene 3.1.0:
> >>
> >>     0    Score=3D13,2132    Doc.Id=3D176002    id=3D192 =
name=3Dqueen
> >>     1    Score=3D13,2132    Doc.Id=3D523407    id=3D701492 =
name=3Dqueen=E6=9D=BF=E9=87=8E=E5=8F=8B=E7=BE=8E
> >>
> >> Result Lucene 3.3.0:
> >>
> >>     0    Score=3D13,2132    Doc.Id=3D523407    id=3D701492 =
name=3Dqueen=E6=9D=BF=E9=87=8E=E5=8F=8B=E7=BE=8E
> >>     1    Score=3D13,2132    Doc.Id=3D176002    id=3D192 =
name=3Dqueen
> >>
> >> The result from Lucene 3.1.0 is that, what I would expect if I do a
> >> 'exact matching' Term Query.
> >> Each index was indexed with its associated LuceneVersion.
> >> I tested it with luke and with my own Code - the result was always =
the
> same.
> >>
> >> Is it a new feature in Lucene 3.3.0 or a bug?
> >>
> >> Thanks in advance!
> >> Thomas
> >>
> >>
> >> =
---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 12:34:28 2011
Return-Path: <java-user-return-50360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 9AC227822
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 12:34:28 +0000 (UTC)
Received: (qmail 76845 invoked by uid 500); 18 Jul 2011 12:34:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76700 invoked by uid 500); 18 Jul 2011 12:34:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76692 invoked by uid 99); 18 Jul 2011 12:34:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 12:34:24 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of caraman.mihai@gmail.com designates 209.85.214.176 as permitted sender)
Received: from [209.85.214.176] (HELO mail-iw0-f176.google.com) (209.85.214.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 12:34:17 +0000
Received: by iwi5 with SMTP id 5so4184011iwi.35
        for <java-user@lucene.apache.org>; Mon, 18 Jul 2011 05:33:56 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:date:message-id:subject:from:to:content-type;
        bh=qFAri6Ozo/BUrejydYY1JdIk7NrdaAY7pL09DB18f2Y=;
        b=J/irr0c/arP1GUz1jjmOyT+xBAi/o6VzFI4tQdD6tGSb3bhJ9EIFMUvE8pPjn0wiF5
         qJmqGFJKgg/gVYoJdGws0XlfC4/iZ5dWhcPB0lkgqgHouewVhKk75+HjogwDSTFS1fiz
         wWl+8C+b+p7aYl/bzPwK9SR/v6hHZotUB8nDI=
MIME-Version: 1.0
Received: by 10.231.61.202 with SMTP id u10mr6086777ibh.73.1310992436402; Mon,
 18 Jul 2011 05:33:56 -0700 (PDT)
Received: by 10.231.44.7 with HTTP; Mon, 18 Jul 2011 05:33:56 -0700 (PDT)
Date: Mon, 18 Jul 2011 15:33:56 +0300
Message-ID: <CAJ-pxHYNw+ZD3DrUkAmWiq7gwCxzH8vfT4o-TBFroG4X0SCh5w@mail.gmail.com>
Subject: HighFreqTerms for results set
From: Mihai Caraman <caraman.mihai@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517740b0a799b6204a85736f7
X-Virus-Checked: Checked by ClamAV on apache.org

--001517740b0a799b6204a85736f7
Content-Type: text/plain; charset=ISO-8859-1

So I looked around and found no viable solution for this problem:
How to extract the most frequent terms in the search result set after
submitting the query.

HighFreqTerms
<http://lucene.apache.org/java/3_2_0/api/contrib-misc/index.html>and docFreq
<http://lucene.apache.org/java/3_2_0/api/core/org/apache/lucene/index/FilterIndexReader.html#docFreq%28org.apache.lucene.index.Term%29>don't
do the job for specific documents.

- is it plausible to make a vector of resulted docID's and intersect it with
each term's posting list in the index? bigger intersection meaning higher
frequency.
  *because search results could be really custom, this method can't be
optimize to intersect only the highest frequency terms for the entire index.

--001517740b0a799b6204a85736f7--

From java-user-return-50361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 12:47:50 2011
Return-Path: <java-user-return-50361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 4A3287C3E
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 12:47:50 +0000 (UTC)
Received: (qmail 93667 invoked by uid 500); 18 Jul 2011 12:47:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93599 invoked by uid 500); 18 Jul 2011 12:47:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93591 invoked by uid 99); 18 Jul 2011 12:47:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 12:47:47 +0000
X-ASF-Spam-Status: No, hits=1.6 required=5.0
	tests=FREEMAIL_ENVFROM_END_DIGIT,FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of manish.bafna.82@gmail.com designates 209.85.216.176 as permitted sender)
Received: from [209.85.216.176] (HELO mail-qy0-f176.google.com) (209.85.216.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 12:47:40 +0000
Received: by qyk4 with SMTP id 4so2194201qyk.14
        for <java-user@lucene.apache.org>; Mon, 18 Jul 2011 05:47:20 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=V8MiwwICdpsasVO556mzs53JGch/20tWY2Atq+5bDN4=;
        b=I+vSvOXhDckVNoQ0zke/oEN+z9qRG4sgFG7BY7aa90TPuqmHbbXsfpalMdc05hWXlu
         mqbYsIes8ZytNh+5DP8cAcSF2eyTOPY+tNeoBo6JGJ3WqkMWJOBIeUskmWq/g7DzsqaZ
         1lICtOnA6ti4U3RZfP9VzzRxD+FZTkCEeTh70=
MIME-Version: 1.0
Received: by 10.224.183.145 with SMTP id cg17mr4910469qab.16.1310993239904;
 Mon, 18 Jul 2011 05:47:19 -0700 (PDT)
Received: by 10.224.28.144 with HTTP; Mon, 18 Jul 2011 05:47:19 -0700 (PDT)
In-Reply-To: <CAJ-pxHYNw+ZD3DrUkAmWiq7gwCxzH8vfT4o-TBFroG4X0SCh5w@mail.gmail.com>
References: <CAJ-pxHYNw+ZD3DrUkAmWiq7gwCxzH8vfT4o-TBFroG4X0SCh5w@mail.gmail.com>
Date: Mon, 18 Jul 2011 18:17:19 +0530
Message-ID: <CA+ymubXK3JBSuCiyVDrMfcGUjw+kKyqtX2Fd6hD=WbTOBUnDTQ@mail.gmail.com>
Subject: Re: HighFreqTerms for results set
From: Manish Bafna <manish.bafna.82@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=20cf302d4d6e5e117804a85766b6

--20cf302d4d6e5e117804a85766b6
Content-Type: text/plain; charset=ISO-8859-1

Use Facet by that field. It will bring up top words.

On Mon, Jul 18, 2011 at 6:03 PM, Mihai Caraman <caraman.mihai@gmail.com>wrote:

> So I looked around and found no viable solution for this problem:
> How to extract the most frequent terms in the search result set after
> submitting the query.
>
> HighFreqTerms
> <http://lucene.apache.org/java/3_2_0/api/contrib-misc/index.html>and
> docFreq
> <
> http://lucene.apache.org/java/3_2_0/api/core/org/apache/lucene/index/FilterIndexReader.html#docFreq%28org.apache.lucene.index.Term%29
> >don't
> do the job for specific documents.
>
> - is it plausible to make a vector of resulted docID's and intersect it
> with
> each term's posting list in the index? bigger intersection meaning higher
> frequency.
>  *because search results could be really custom, this method can't be
> optimize to intersect only the highest frequency terms for the entire
> index.
>

--20cf302d4d6e5e117804a85766b6--

From java-user-return-50362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 13:38:17 2011
Return-Path: <java-user-return-50362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 6D7167881
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 13:38:17 +0000 (UTC)
Received: (qmail 79476 invoked by uid 500); 18 Jul 2011 13:38:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79289 invoked by uid 500); 18 Jul 2011 13:38:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79281 invoked by uid 99); 18 Jul 2011 13:38:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 13:38:13 +0000
X-ASF-Spam-Status: No, hits=1.5 required=5.0
	tests=FREEMAIL_FROM,HTML_MESSAGE,RCVD_IN_DNSWL_LOW,SPF_PASS,T_TO_NO_BRKTS_FREEMAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of caraman.mihai@gmail.com designates 209.85.210.176 as permitted sender)
Received: from [209.85.210.176] (HELO mail-iy0-f176.google.com) (209.85.210.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 13:38:05 +0000
Received: by iyi20 with SMTP id 20so4296683iyi.35
        for <java-user@lucene.apache.org>; Mon, 18 Jul 2011 06:37:44 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :content-type;
        bh=dDIrSHMf5TusQPt0Uq6HS2M7Ub5KCkqonKz8y9addVw=;
        b=OkzRipV3oX2fxSZnwHBmh251nj58QmU6dEuw7BVRyiX9d2cRcfROnDchI9MYwk72aL
         uQEhgRbpt6G2/GORRXu89iJG3nRweOzsvU22M8w+51ooymdBFbmqNwZVd+tcZb9rdTg/
         skxWXjgihYv7J4QC4INxhstKE/EzJ6hfXVm1k=
MIME-Version: 1.0
Received: by 10.231.61.202 with SMTP id u10mr6137394ibh.73.1310996264477; Mon,
 18 Jul 2011 06:37:44 -0700 (PDT)
Received: by 10.231.44.7 with HTTP; Mon, 18 Jul 2011 06:37:44 -0700 (PDT)
In-Reply-To: <CA+ymubXK3JBSuCiyVDrMfcGUjw+kKyqtX2Fd6hD=WbTOBUnDTQ@mail.gmail.com>
References: <CAJ-pxHYNw+ZD3DrUkAmWiq7gwCxzH8vfT4o-TBFroG4X0SCh5w@mail.gmail.com>
	<CA+ymubXK3JBSuCiyVDrMfcGUjw+kKyqtX2Fd6hD=WbTOBUnDTQ@mail.gmail.com>
Date: Mon, 18 Jul 2011 16:37:44 +0300
Message-ID: <CAJ-pxHa5zmC0hgt8M0nfysHhgGpeF51oo08SxTnC1tL-3FndJA@mail.gmail.com>
Subject: Re: HighFreqTerms for results set
From: Mihai Caraman <caraman.mihai@gmail.com>
To: java-user@lucene.apache.org
Content-Type: multipart/alternative; boundary=001517740b0aa563d304a8581a29
X-Virus-Checked: Checked by ClamAV on apache.org

--001517740b0aa563d304a8581a29
Content-Type: text/plain; charset=ISO-8859-1

Faceted search is for single-term fields, wright? Isn't it bad practice to
apply it for each word in each field in the resulting set?(if it's even
posible)

Again, I want to find the most frequent word in a resulting set. Words are
in fields that contain phrases, not in their own field.

2011/7/18 Manish Bafna <manish.bafna.82@gmail.com>

> Use Facet by that field. It will bring up top words.
>
> On Mon, Jul 18, 2011 at 6:03 PM, Mihai Caraman <caraman.mihai@gmail.com
> >wrote:
>
> > So I looked around and found no viable solution for this problem:
> > How to extract the most frequent terms in the search result set after
> > submitting the query.
> >
> > HighFreqTerms
> > <http://lucene.apache.org/java/3_2_0/api/contrib-misc/index.html>and
> > docFreq
> > <
> >
> http://lucene.apache.org/java/3_2_0/api/core/org/apache/lucene/index/FilterIndexReader.html#docFreq%28org.apache.lucene.index.Term%29
> > >don't
> > do the job for specific documents.
> >
> > - is it plausible to make a vector of resulted docID's and intersect it
> > with
> > each term's posting list in the index? bigger intersection meaning higher
> > frequency.
> >  *because search results could be really custom, this method can't be
> > optimize to intersect only the highest frequency terms for the entire
> > index.
> >
>

--001517740b0aa563d304a8581a29--

From java-user-return-50363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 14:25:10 2011
Return-Path: <java-user-return-50363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id A88837DF7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 14:25:10 +0000 (UTC)
Received: (qmail 54535 invoked by uid 500); 18 Jul 2011 14:25:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54318 invoked by uid 500); 18 Jul 2011 14:25:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54310 invoked by uid 99); 18 Jul 2011 14:25:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 14:25:07 +0000
X-ASF-Spam-Status: No, hits=-0.0 required=5.0
	tests=MIME_BASE64_BLANKS,RCVD_IN_DNSWL_LOW,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [216.32.180.30] (HELO VA3EHSOBE010.bigfish.com) (216.32.180.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 14:24:57 +0000
Received: from mail78-va3-R.bigfish.com (10.7.14.253) by
 VA3EHSOBE010.bigfish.com (10.7.40.12) with Microsoft SMTP Server id
 14.1.225.22; Mon, 18 Jul 2011 14:24:36 +0000
Received: from mail78-va3 (localhost.localdomain [127.0.0.1])	by
 mail78-va3-R.bigfish.com (Postfix) with ESMTP id B124FE013B	for
 <java-user@lucene.apache.org>; Mon, 18 Jul 2011 14:24:36 +0000 (UTC)
X-SpamScore: -32
X-BigFish: VPS-32(zzbb2dK9371M62a3K4082K542M1432N98dK111aLzz1202hzz8275ch8275dhz2dh2a8h668h839h93fh61h)
X-Spam-TCS-SCL: 0:0
X-Forefront-Antispam-Report: CIP:212.123.12.34;KIP:(null);UIP:(null);IPVD:NLI;H:mercurius02.brepols.net;RD:none;EFVD:NLI
Received: from mail78-va3 (localhost.localdomain [127.0.0.1]) by mail78-va3
 (MessageSwitch) id 1310999075817599_21397; Mon, 18 Jul 2011 14:24:35 +0000
 (UTC)
Received: from VA3EHSMHS003.bigfish.com (unknown [10.7.14.241])	by
 mail78-va3.bigfish.com (Postfix) with ESMTP id C1E4DBB8051	for
 <java-user@lucene.apache.org>; Mon, 18 Jul 2011 14:24:35 +0000 (UTC)
Received: from mercurius02.brepols.net (212.123.12.34) by
 VA3EHSMHS003.bigfish.com (10.7.99.13) with Microsoft SMTP Server (TLS) id
 14.1.225.22; Mon, 18 Jul 2011 14:24:33 +0000
Received: from mercurius02.brepols.net ([172.0.0.228]) by
 mercurius02.brepols.net ([172.0.0.228]) with mapi; Mon, 18 Jul 2011 16:24:12
 +0200
From: Jeroen Lauwers <Jeroen.Lauwers@CTLO.NET>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Date: Mon, 18 Jul 2011 16:24:10 +0200
Subject: RE: Advanced NearSpanQuery
Thread-Topic: Advanced NearSpanQuery
Thread-Index: AcxBoEDpbIex//9PSfe7BoqkUB588gBXuEkwAJWktJA=
Message-ID: <1ABD04F5A978B74B950BF85B535E73C926E99BFFAF@mercurius02.brepols.net>
References: <1ABD04F5A978B74B950BF85B535E73C926E99BFFA0@mercurius02.brepols.net>
	<4E1D9C34.7000700@ifactory.com>
	<1ABD04F5A978B74B950BF85B535E73C926E99BFFA2@mercurius02.brepols.net>
 <CAAHmpkgQ179NmY4x4Ls_=70Hb-XdbGtu=rmLXruCea_dYBdDOg@mail.gmail.com>
 <4E1E07D2.40305@ifactory.com>
 <1ABD04F5A978B74B950BF85B535E73C926E99BFFAA@mercurius02.brepols.net>
In-Reply-To: <1ABD04F5A978B74B950BF85B535E73C926E99BFFAA@mercurius02.brepols.net>
Accept-Language: en-US, nl-BE
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
acceptlanguage: en-US, nl-BE
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: ctlo.net
X-Virus-Checked: Checked by ClamAV on apache.org

Rm9yIHlvdXIgaW5mb3JtYXRpb246DQpBZnRlciBhIGNsb3NlciBpbnNwZWN0aW9uLCBJIGZvdW5k
IGEgY291cGxlIG9mIGVycm9ycyBpbiBteSBjb2RlLiBJJ3ZlIGZpeGVkIG1vc3Qgb2YgdGhlbSBz
byBpZiBhbnlvbmUgaXMgaW50ZXJlc3RlZCwganVzdCBsZXQgbWUga25vdy4NCg0KSmVyb2VuDQoN
Ci0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQpGcm9tOiBKZXJvZW4gTGF1d2VycyBbbWFpbHRv
Okplcm9lbi5MYXV3ZXJzQENUTE8uTkVUXSANClNlbnQ6IHZyaWpkYWcgMTUganVsaSAyMDExIDE3
OjA4DQpUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnDQpTdWJqZWN0OiBSRTogQWR2YW5j
ZWQgTmVhclNwYW5RdWVyeQ0KDQpIaSBNaWtlIGFuZCBTaW1vbiwNCg0KVGhhbmtzIGFnYWluIGZv
ciB5b3VyIGhlbHAsIGJ1dCBJJ3ZlIGNyZWF0ZWQgbXkgb3duIHNvbHV0aW9uIGJ5IHdyaXRpbmcg
YSBjdXN0b20gc3BhbiBxdWVyeS4NCk5vdywgSSBjYW4gcGVyZm9ybSBzZWFyY2hlcyB3aGVyZSBz
b21lIG9mIHRoZSB0ZXJtcyB0aGF0IEkgc3VwcGx5IGluIHRoZSBxdWVyeSBjYW4gYmUgbWlzc2lu
ZyBmcm9tIHRoZSByZXN1bHQuDQpUaGlzIHdheSBpdCBhbGxvd3MgZm9yIGEgc2xvcCBhdCB0aGUg
cXVlcnkgc2lkZSBBTkQgb24gdGhlIHJlc3VsdCBzaWRlLg0KDQpJbiBjYXNlIHlvdSBhcmUgaW50
ZXJlc3RlZCwgaGVyZSdzIHRoZSBjb2RlOiBJdCdzIEMjIGFuZCBub3QgSmF2YSwgSSBrbm93LCBi
dXQgaGV5LCBsb29rIGF0IGl0IGFzIHBzZXVkby1jb2RlLg0KDQotLS0tLU9yaWdpbmFsIE1lc3Nh
Z2UtLS0tLQ0KRnJvbTogTWlrZSBTb2tvbG92IFttYWlsdG86c29rb2xvdkBpZmFjdG9yeS5jb21d
DQpTZW50OiB3b2Vuc2RhZyAxMyBqdWxpIDIwMTEgMjM6MDINClRvOiBqYXZhLXVzZXJAbHVjZW5l
LmFwYWNoZS5vcmcNCkNjOiBTaW1vbiBXaWxsbmF1ZXINClN1YmplY3Q6IFJlOiBBZHZhbmNlZCBO
ZWFyU3BhblF1ZXJ5DQoNClNvcnJ5IGZvciB0aGUgbWlzZGlyZWN0aW9uIC4uLg0KDQpPbiAwNy8x
My8yMDExIDExOjM3IEFNLCBTaW1vbiBXaWxsbmF1ZXIgd3JvdGU6DQo+IEkgZG9uJ3QgdGhpbmsg
dGhpcyBpcyBwb3NzaWJsZSB3aXRoIHNwYW5zIHRvZGF5LiBPbmNlDQo+IGh0dHBzOi8vaXNzdWVz
LmFwYWNoZS5vcmcvamlyYS9icm93c2UvTFVDRU5FLTI4NzggaXMgZHVlIHRoaXMgc2hvdWxkIA0K
PiBiZSBwb3NzaWJsZSB3aXRoIGEgYm9vbGVhbiBxdWVyeSBJIHRoaW5rLg0KPg0KPiB0byB3b3Jr
IGFyb3VuZCB0aGlzIHlvdSBuZWVkIHRvIHdyaXRlIGEgU3Bhbk9SIHF1ZXJ5IHdpdGggYSANCj4g
bWluU2hvdWxkTWF0Y2ggZnVuY3Rpb25hbGl0eSB0aG91Z2guDQo+DQo+IHNpbW9uDQo+DQo+IE9u
IFdlZCwgSnVsIDEzLCAyMDExIGF0IDU6MDkgUE0sIEplcm9lbiBMYXV3ZXJzPEplcm9lbi5MYXV3
ZXJzQGN0bG8ubmV0PiAgd3JvdGU6DQo+DQo+PiBIaSBNaWtlLA0KPj4NCj4+IFRoYW5rcyBmb3Ig
eW91ciBxdWljayByZXBseSwgYnV0IGRvIG5vdCBzZWVtIHRvIGZpbmQgYW55IGRvY3VtZW50YXRp
b24gb24gIkRpc2p1bmN0aW9uU3VtUXVlcnkiIGFuZCBJJ20gbm90IGZhbWlsaWFyIHdpdGggdGhh
dCBjb25jZXB0Lg0KPj4NCj4+IENvdWxkIHlvdSBwb2ludCBtZSBpbiB0aGUgcmlnaHQgZGlyZWN0
aW9uPw0KPj4NCj4+IEplcm9lbg0KPj4NCj4+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+
PiBGcm9tOiBNaWtlIFNva29sb3YgW21haWx0bzpzb2tvbG92QGlmYWN0b3J5LmNvbV0NCj4+IFNl
bnQ6IHdvZW5zZGFnIDEzIGp1bGkgMjAxMSAxNToyMw0KPj4gVG86IGphdmEtdXNlckBsdWNlbmUu
YXBhY2hlLm9yZw0KPj4gQ2M6IEplcm9lbiBMYXV3ZXJzDQo+PiBTdWJqZWN0OiBSZTogQWR2YW5j
ZWQgTmVhclNwYW5RdWVyeQ0KPj4NCj4+IENhbiB5b3Ugd3JhcCBhIFNwYW5OZWFyUXVlcnkgYXJv
dW5kIGFuIERpc2p1bmN0aW9uU3VtUXVlcnkgd2l0aCBtaW5OclNob3VsZE1hdGNoPTg/DQo+Pg0K
Pj4gLU1pa2UNCj4+DQo+PiBPbiAwNy8xMy8yMDExIDA4OjUzIEFNLCBKZXJvZW4gTGF1d2VycyB3
cm90ZToNCj4+DQo+Pj4gSGksDQo+Pj4NCj4+PiBJIHdhcyB3b25kZXJpbmcgaWYgYW55b25lIGNv
dWxkIGhlbHAgbWUgb24gdGhpczoNCj4+Pg0KPj4+IEkgd2FudCB0byBzZWFyY2ggZm9yOg0KPj4+
DQo+Pj4gMS4gICAgICAgYSBzZXQgb2Ygd29yZHMgKGVnLiAxMCkNCj4+Pg0KPj4+IDIuICAgICAg
IG9ubHkgYSBjb3VwbGUgb2Ygd29yZHMgbWF5IGNvbWUgaW4gYmV0d2VlbiAoZWcuIDMpIGluIHRo
ZSByZXN1bHQgZG9jdW1lbnQNCj4+Pg0KPj4+IDMuICAgICAgIG9mIHRoZSBzdXBwbGllZCBzZXQg
b2YgKDEwKSB3b3JkcywgYXQgbGVhc3QgOCBtdXN0IGJlIHByZXNlbnQgKG9yIGluIG90aGVyIHdv
cmRzOiAyIG9mIHRoZSBzdXBwbGllZCB3b3JkcyBjYW4gYmUgbWlzc2luZykNCj4+Pg0KPj4+IEkg
dXNlIHRoZSBTcGFuTmVhclF1ZXJ5IGZvciAoMS4pIGFuZCAoMi4pLCBidXQgaXQgaXMgdGhlIHRo
aXJkIHBhcnQgdGhhdCdzIGxhY2tpbmcuDQo+Pj4NCj4+PiBBbnkgaWRlYXM/DQo+Pj4NCj4+PiBK
ZXJvZW4NCj4+Pg0KPj4+DQo+Pj4NCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPj4gVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZw0KPj4NCj4+DQo+Pg0KPj4NCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KPj4gVG8gdW5zdWJzY3JpYmUs
IGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+PiBGb3Ig
YWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hl
Lm9yZw0KPj4NCj4+DQo+Pg0KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFp
bDogamF2YS11c2VyLXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQo+IEZvciBhZGRpdGlv
bmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+
DQo+DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVu
c3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQoNCg==



From java-user-return-50364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 14:44:28 2011
Return-Path: <java-user-return-50364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 2A7D677F2
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 14:44:28 +0000 (UTC)
Received: (qmail 90826 invoked by uid 500); 18 Jul 2011 14:44:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90749 invoked by uid 500); 18 Jul 2011 14:44:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90741 invoked by uid 99); 18 Jul 2011 14:44:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2011 14:44:25 +0000
X-ASF-Spam-Status: No, hits=0.0 required=5.0
	tests=FROM_12LTRDOM,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [173.164.230.50] (HELO mailhost.transaxtions.com) (173.164.230.50)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Jul 2011 14:44:19 +0000
Received: (qmail 29395 invoked from network); 18 Jul 2011 07:31:46 -0700
Received: from unknown (HELO ?192.168.1.120?) (192.168.1.120)
  by mymailhost.transaxtions.com with SMTP; 18 Jul 2011 07:31:46 -0700
Message-ID: <4E2446AD.6090409@transaxtions.com>
Date: Mon, 18 Jul 2011 07:43:57 -0700
From: Nagendra Nagarajayya <nnagarajayya@transaxtions.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.18) Gecko/20110616 Lightning/1.0b2 Thunderbird/3.1.11
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Announce] Solr 3.3 with RankingAlgorithm NRT capability, very high
 performance 10000 tps
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi!

I would like to announce the availability of Solr 3.3 with 
RankingAlgorithm and Near Real Time (NRT) search capability now. The NRT 
performance is very high, 10,000 documents/sec with the MBArtists 390k 
index. The NRT functionality allows you to add documents without the 
IndexSearchers being closed or caches being cleared. A commit is also 
not needed with the document update. Searches can run concurrently with 
document updates. No changes are needed except for enabling the NRT 
through solrconfig.xml.

RankingAlgorithm query performance is now 3x times faster than before 
and is exposed as the Lucene API. This release also adds supports for 
the last document with a unique id to be searchable and visible in 
search results in case of multiple updates of the document.

I have a wiki page that describes NRT performance in detail and can be 
accessed from here:

http://solr-ra.tgels.org/wiki/en/Near_Real_Time_Search_ver3.x

You can download Solr 3.3 with RankingAlgorithm (NRT version) from here:

http://solr-ra.tgels.org

I would like to invite you to give this version a try as the performance 
is very high.

Regards,

- Nagendra Nagarajayya
http://solr-ra.tgels.org
http://rankingalgorithm.tgels.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 17:15:53 2011
Return-Path: <java-user-return-50365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 834E971D7
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 17:15:53 +0000 (UTC)
Received: (qmail 11412 invoked by uid 500); 18 Jul 2011 17:15:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11216 invoked by uid 500); 18 Jul 2011 17:15:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 50100 invoked by uid 99); 18 Jul 2011 11:20:32 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Date: Mon, 18 Jul 2011 04:20:03 -0700 (PDT)
From: Sabeer Hussain <shussain@del.aithent.com>
To: java-user@lucene.apache.org
Message-ID: <1310988003601-3178841.post@n3.nabble.com>
In-Reply-To: <OFF9C5851C.5F7246FE-ON882571F5.000503F7-882571F5.00084DA4@il.ibm.com>
References: <e129b0e70609230239j1e39f27dm3a179c8ed53013bd@mail.gmail.com> <OF4B437209.B0E87AF8-ON882571F4.007257A2-882571F4.0077BA6E@il.ibm.com> <e129b0e70609251548w2852281ge83aa4f2511a01d5@mail.gmail.com> <OFF9C5851C.5F7246FE-ON882571F5.000503F7-882571F5.00084DA4@il.ibm.com>
Subject: Re: highlighting
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am using Lucene 4.0 and trying to use its highlighting feature. I am not
getting the desired result due to some mistake that I am not able to
identify. My source code looks like 

String sourceText  = "liver disease kidney transplant";
String termString ="\"transplant\"";
			
SimpleAnalyzer simpleAnalyzer = new SimpleAnalyzer(Version.LUCENE_40);
Query query = new QueryParser(Version.LUCENE_40,"contents",
simpleAnalyzer).parse(termString);

TokenStream tokenStream = simpleAnalyzer.tokenStream("contents", new
StringReader(sourceText));
QueryScorer scorer = new QueryScorer(query,"contents");
scorer.setExpandMultiTermQuery(true);
Fragmenter fragmenter = new SimpleSpanFragmenter(scorer);

SimpleHTMLFormatter simpleHTMLFormatter = new SimpleHTMLFormatter( "*", 
"*") ;
Highlighter highlighter = new Highlighter(simpleHTMLFormatter, scorer );
highlighter.setTextFragmenter(fragmenter);
highlighter.setMaxDocCharsToAnalyze(10000);
String resultString =
highlighter.getBestFragments(tokenStream,sourceText,1000, "...");
System.out.println("Source Text1 = "+sourceText);
System.out.println("Result Text1 = "+resultString);
			
sourceText = "for liver transplantation.";
tokenStream = simpleAnalyzer.tokenStream("contents", new
StringReader(sourceText));
resultString = highlighter.getBestFragments(tokenStream,sourceText,1000,
"...");

System.out.println("Source Text2 = "+sourceText);
System.out.println("Result Text2 = "+resultString);
			
For the first text, I am getting the result properly but not for the second
one

Source Text1 = liver disease kidney transplant
Result Text1 = liver disease kidney *transplant*
			
Source Text2 = for liver transplantation.
Result Text2 = 

I am expecting the result for second one like  
for liver *transplant*ation

or
for liver *transplantation*

What is wrong in my code?



--
View this message in context: http://lucene.472066.n3.nabble.com/highlighting-tp542569p3178841.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 17:16:12 2011
Return-Path: <java-user-return-50366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id EC28672D5
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 17:16:11 +0000 (UTC)
Received: (qmail 13341 invoked by uid 500); 18 Jul 2011 17:16:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13210 invoked by uid 500); 18 Jul 2011 17:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 85770 invoked by uid 99); 18 Jul 2011 11:46:02 -0000
X-ASF-Spam-Status: No, hits=0.7 required=5.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
From: Jagdish Vasani <JVasani@capitalnovus.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: teragram to Lucene
Thread-Topic: teragram to Lucene
Thread-Index: AQHMQv+rbb3Q93jRX0S2jOzfnwOYW5Tx+CiA
Date: Mon, 18 Jul 2011 11:42:07 +0000
Message-ID: <8AFCA7C6D9C95D4DA4786A0BCC2730EE015373@MSGIN.CAPITALNOVUS.COM>
References: <4E20561F.7010509@comcast.net>
In-Reply-To: <4E20561F.7010509@comcast.net>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.1.1.52]
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
MIME-Version: 1.0

See the surround query in lucene/contrib.
It support proximity search ....query syntax is diff..but you can customize=
 it.
By customizing javacc language file-"QueryParser .jj" you can get as you wi=
sh.

Thanks,
Jagdish

-----Original Message-----
From: Walt [mailto:junkwrc@comcast.net]=20
Sent: Friday, July 15, 2011 8:31 PM
To: java-user@lucene.apache.org
Subject: teragram to Lucene

Hi,
    I am responsible for moving a Teragram application to Lucene. I have
identified the following issues so I would like verification that what
the existing rules have do not exist in Lucene or there is a work-around.

1) Teragram uses a Polish Notation for its rules, i.e.
Note: DIST_2 is a proximity of within 2 words

DIST_2     (OR (phrase1, phrase 2, .... phrase 20)
                (OR(phrasea, phraseb, phrase c)
)

This says "if any phrase in this group is within 2 words of any phrase
in the second group".

My understanding is proximity in Lucene is only against individual
phrases, not between two groups. Is there any way to do the functional
equivalent short of

"phrase1 phrasea"~2 "phrase1 phraseb"~2 "phrase2 phrasea"~2 "phrase2
phraseb"~2 etc

The other question I have is "is there a notion of a sentence such that
one could say do these word occur in the same sentence?

Thanks,

Walt Corey

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-50367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org  Mon Jul 18 17:16:35 2011
Return-Path: <java-user-return-50367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
X-Original-To: apmail-lucene-java-user-archive@www.apache.org
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: from mail.apache.org (hermes.apache.org [140.211.11.3])
	by minotaur.apache.org (Postfix) with SMTP id 431C4743F
	for <apmail-lucene-java-user-archive@www.apache.org>; Mon, 18 Jul 2011 17:16:35 +0000 (UTC)
Received: (qmail 15370 invoked by uid 500); 18 Jul 2011 17:16:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15258 invoked by uid 500); 18 Jul 2011 17:16:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 1138 invoked by uid 99); 18 Jul 2011 11:52:37 -0000
X-ASF-Spam-Status: No, hits=2.0 required=5.0
	tests=SPF_NEUTRAL,URI_HEX
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
From: Jagdish Vasani <JVasani@capitalnovus.com>
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Subject: RE: Store the documents content in the index
Thread-Topic: Store the documents content in the index
Thread-Index: AQHMRH5Rp+NnmMF1UUG7HRkHTUjxBpTx+A9Q
Date: Mon, 18 Jul 2011 11:48:53 +0000
Message-ID: <8AFCA7C6D9C95D4DA4786A0BCC2730EE01538F@MSGIN.CAPITALNOVUS.COM>
References: <1310906406889-3176703.post@n3.nabble.com>
In-Reply-To: <1310906406889-3176703.post@n3.nabble.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
x-originating-ip: [10.1.1.52]
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
MIME-Version: 1.0

WWVzLi55b3UgY2FuIFN0b3JlIFRleHQgZmlsZSBjb250ZW50IGJ5IHNheWluZyB0aGF0IGZpZWxk
IHN0b3JlLUZpZWxkLlN0b3JlLllFUy5zYW1lIHRpbWUgeW91IGNhbiBhbHNvIGluZGV4IGl0IGJ5
IHNheWluZyBGaWVsZC5JbmRleC5BTkFMWVpFRCBhcyBhbm90aGVyIHBhcmFtZXRlciBvZiBGaWVs
ZCBjbGFzcyBjb250cnVjdG9yLg0KDQpUaGFua3MsDQpKYWdkaXNoDQoNCi0tLS0tT3JpZ2luYWwg
TWVzc2FnZS0tLS0tDQpGcm9tOiBzdGFyejEwZGUgW21haWx0bzpmYXJhZ19haG1lZEB5YWhvby5j
b21dIA0KU2VudDogU3VuZGF5LCBKdWx5IDE3LCAyMDExIDY6MTAgUE0NClRvOiBqYXZhLXVzZXJA
bHVjZW5lLmFwYWNoZS5vcmcNClN1YmplY3Q6IFN0b3JlIHRoZSBkb2N1bWVudHMgY29udGVudCBp
biB0aGUgaW5kZXgNCg0KSEksIA0KDQpDdXJyZW50bHkgbXkgdGV4dCBzb3VyY2UgZmlsZXMgKDgw
MCAwMDApIGFyZSBzdG9yZWQgaW4gZm9sZGVyIHdoaWNoIG1ha2UNCnJldHJpZXZpbmcgaXQgYnkg
bWFueSB1c2VycyBzb21lIGhvdyBzbG93LiBJIGhlYXJkIGl0IG1pZ2h0IGJlIHBvc3NpYmxlIHRo
YXQNCnRoZXNlIGZpbGVzIGNvbnRlbnQgY2FuIGJlIHN0b3JlZCBpbiB0aGUgaW5kZXggaXQgc2Vs
ZiBhbHRob3VnaCBJIGZvdW5kIHRoaXMNCnVucmVhbGlzdGljLiANCg0KSXMgaXQgcG9zc2libGUg
c3RvcmluZyB0aGUgc291cmNlIHRleHQgZmlsZXMgY29udGVudCBpbiB0aGUgaW5kZXggaW5zdGVh
ZCBvZg0KanVzdCDigJxkb2MgaWTigJ0gd2hpY2ggaXMgYXNzaWduZWQgd2l0aCBlYWNoIHRlcm0g
aW4gdGhlIGluZGV4PyANCiANCg0KDQoNCi0tDQpWaWV3IHRoaXMgbWVzc2FnZSBpbiBjb250ZXh0
OiBodHRwOi8vbHVjZW5lLjQ3MjA2Ni5uMy5uYWJibGUuY29tL1N0b3JlLXRoZS1kb2N1bWVudHMt
Y29udGVudC1pbi10aGUtaW5kZXgtdHAzMTc2NzAzcDMxNzY3MDMuaHRtbA0KU2VudCBmcm9tIHRo
ZSBMdWNlbmUgLSBKYXZhIFVzZXJzIG1haWxpbmcgbGlzdCBhcmNoaXZlIGF0IE5hYmJsZS5jb20u
DQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLQ0KVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vi
c2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnDQpGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWls
OiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZw0KDQo=


