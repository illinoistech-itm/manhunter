From java-user-return-17783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 01 08:49:50 2005
Return-Path: <java-user-return-17783-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25469 invoked from network); 1 Dec 2005 08:49:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Dec 2005 08:49:50 -0000
Received: (qmail 68332 invoked by uid 500); 1 Dec 2005 08:49:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68302 invoked by uid 500); 1 Dec 2005 08:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68285 invoked by uid 99); 1 Dec 2005 08:49:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Dec 2005 00:49:40 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Dec 2005 00:51:06 -0800
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id E435BE47D5;
	Thu,  1 Dec 2005 09:49:08 +0100 (CET)
Received: from [127.0.0.1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 9C20BE47C3;
	Thu,  1 Dec 2005 09:49:08 +0100 (CET)
Message-ID: <438EB903.80503@activemath.org>
Date: Thu, 01 Dec 2005 09:49:07 +0100
From: Paul Libbrecht <paul@activemath.org>
Reply-To: paul@activemath.org
User-Agent: Thunderbird 1.5 (Macintosh/20051025)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>	 <001c01c5f60d$5089c0e0$b900a8c0@jhi> <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
In-Reply-To: <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We're also thinking about implementing something similar to LSI within 
ActiveMath which is lucene-powered where both formulae and text 
searching would benefit of the latent-semantic-similarity. I've been 
refrained of doing "exactly this" at least since LSI is patented. This 
might also be a reason why there's no implementation in Lucene's sandbox.

Have you looked at other vector-based approaches which are not exactly LSI ?
Have you looked at InfoMap NLP ?

paul


rrshwrk@gmail.com wrote:
> Yeah, its Latent Semantic Indexing
>
> On 12/1/05, gekkokid <me@gekkokid.org.uk> wrote:
>   
>> sorry have to ask - whats LSI - " latent semantic indexing"?
>>
>> _gk
>> ----- Original Message -----
>> From: "Lorenzo Viscanti" <lorenzo.viscanti@gmail.com>
>> To: <java-user@lucene.apache.org>; <chandana3002@gmail.com>
>> Sent: Thursday, December 01, 2005 12:02 AM
>> Subject: Re: Lucene + LSI
>>
>>
>> It depends on the kind of implementation you are thinking of.
>> You can use Lucene to create the inputs to the LSI, and then use them in
>> your own system. I've written that code and it works, for searches and
>> clustering.
>> But if you are figuring out an LSI enhanced Lucene search system (based on
>> a
>> specific Similarity implementation?), I have to tell you that It wouldn't
>> be
>> so easy to integrate LSI into the Lucene's APIs.
>> Lorenzo
>>
>> On 12/1/05, Chandana <chandana3002@gmail.com> wrote:
>>     
>>> Have any one implemented LSI in Lucene?
>>> Kindly let me know how hard/easy it is.
>>>       

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 01 08:52:48 2005
Return-Path: <java-user-return-17784-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27057 invoked from network); 1 Dec 2005 08:52:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Dec 2005 08:52:47 -0000
Received: (qmail 73978 invoked by uid 500); 1 Dec 2005 08:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73943 invoked by uid 500); 1 Dec 2005 08:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73932 invoked by uid 99); 1 Dec 2005 08:52:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Dec 2005 00:52:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.28.130.38] (HELO hostedexchange.hostedservice.com) (217.28.130.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Dec 2005 00:54:07 -0800
Received: from THHS2EXBE1X.hostedservice2.net ([192.168.16.22]) by hostedexchange.hostedservice.com with Microsoft SMTPSVC(6.0.3790.211);
	 Thu, 1 Dec 2005 08:52:14 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5F654.867174A6"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: IO Error/Jira
Date: Thu, 1 Dec 2005 08:52:14 -0000
Message-ID: <B17B1CFF4282214AB8BAADDDC207112205119EF5@THHS2EXBE1X.hostedservice2.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IO Error/Jira
Thread-Index: AcX2VIZnhaQAXe5OQd+ScR/0MacAsQ==
From: "Andy Hind" <andy.hind@alfresco.org>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Dec 2005 08:52:14.0634 (UTC) FILETIME=[86A170A0:01C5F654]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5F654.867174A6
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi

=20

I would like some pointers for causes of the following error, using
lucene 1.4.3.

=20

I have not really got much to go on at the moment other then the error.

(I am aware of the IBM JVM issue and would be surprise if this JVM is
being used - but I do not have enough information to rule this out)

Has anyone seen anything similar?

=20

=20

Caused by: java.io.IOException: read past EOF

            at
org.apache.lucene.store.InputStream.refill(InputStream.java:154)

            at
org.apache.lucene.store.InputStream.readByte(InputStream.java:43)

            at
org.apache.lucene.store.InputStream.readBytes(InputStream.java:57)

            at
org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:356)

            at
org.apache.lucene.index.MultiReader.norms(MultiReader.java:159)

            at
org.apache.lucene.search.TermQuery$TermWeight.scorer(TermQuery.java:64)

            at
org.apache.lucene.search.BooleanQuery$BooleanWeight.scorer(BooleanQuery.
java:165)

            at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)

            at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)

            at org.apache.lucene.search.Hits.<init>(Hits.java:43)

            at
org.apache.lucene.search.Searcher.search(Searcher.java:33)

            at
org.apache.lucene.search.Searcher.search(Searcher.java:27)

=20

I am assuming the index has been corrupted in some way.

Is it possible this could be related to issue 415?

=20

When I look at bugs on Jira it is not clear to me what version of lucene
I need to include a fix.

=20

Has version 1.4.3 been fixed up beyond the latest official binary dated
29-Nov-2004?

Should I be getting and building from the repository?

=20

Any help appreciated,

=20

Regards

=20

Andy


------_=_NextPart_001_01C5F654.867174A6--

From java-user-return-17785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 01 20:29:17 2005
Return-Path: <java-user-return-17785-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56383 invoked from network); 1 Dec 2005 20:29:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Dec 2005 20:29:16 -0000
Received: (qmail 2352 invoked by uid 500); 1 Dec 2005 20:29:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2322 invoked by uid 500); 1 Dec 2005 20:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2310 invoked by uid 99); 1 Dec 2005 20:29:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 01 Dec 2005 12:29:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.128] (HELO psmtp.com) (64.18.1.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 01 Dec 2005 12:30:34 -0800
Received: from source ([139.56.4.14]) by exprod6ob8.obsmtp.com ([64.18.5.12]) with SMTP;
	Thu, 01 Dec 2005 12:28:40 PST
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id jB1KPiL15801
	for <java-user@lucene.apache.org>; Thu, 1 Dec 2005 12:25:44 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id MAA03979
	for <java-user@lucene.apache.org>; Thu, 1 Dec 2005 12:28:42 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <W3KTGLH8>; Thu, 1 Dec 2005 12:29:51 -0800
Message-ID: <8220B8D6B56A9A4E8480489F38E425298E470A@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: NullPointerException in ParallelMultiSearcher
Date: Thu, 1 Dec 2005 12:29:50 -0800 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

We are using lucene v1.4.3 for some time, in general it is working well.

We often try to search multiple collections at the same time, so we 
are using ParallelMultiSearcher, but sometimes we got the following
exception:

########
java.lang.NullPointerException
    at
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.java
:281)
    at
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.
java:134)
    at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
    at org.apache.lucene.search.Hits.<init>(Hits.java:51)
    at org.apache.lucene.search.Searcher.search(Searcher.java:41)
########

It seems this happens when searching site is heavily used, also when
we switch to MultiSearcher, we never see this kind of problems?

Your guidance would be very appreciated!

Best regards, Lisheng



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 02 09:19:13 2005
Return-Path: <java-user-return-17786-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15279 invoked from network); 2 Dec 2005 09:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Dec 2005 09:19:12 -0000
Received: (qmail 55332 invoked by uid 500); 2 Dec 2005 09:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55297 invoked by uid 500); 2 Dec 2005 09:19:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55273 invoked by uid 99); 2 Dec 2005 09:19:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 01:19:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 01:20:32 -0800
Received: from [61.12.8.66] (helo=[192.168.1.180])
	by mrelay.perfora.net (node=mrelayus0) with ESMTP (Nemesis),
	id 0MKoyl-1Ei73t0Y9T-0006OQ; Fri, 02 Dec 2005 04:18:41 -0500
Message-ID: <439010F9.7080307@insideview.com>
Date: Fri, 02 Dec 2005 14:46:41 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how to control terms to be highlighted?
References: <20051130134215.4460.qmail@web26008.mail.ukl.yahoo.com> <438E8559.2080308@insideview.com> <Pine.LNX.4.58.0511302257040.29242@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0511302257040.29242@hal.rescomp.berkeley.edu>
Content-Type: multipart/mixed;
 boundary="------------030408080102070100010900"
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030408080102070100010900
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Chris,

Can we pass a different query object for searching and a different one 
to the highlighter? I am not sure of that.
In any case,  based on Mark's suggestion I modified the 
QueryTermsExtractor class and filtered the query  terms by the fieldName.
Attached is the modified file.

Thanks,
Harini



Chris Hostetter wrote:

>I don't know what your application is, and I have no experience with the
>Highlighter code, so forgive me if this is a silly suggestion:
>
>It looks like you are building a query up programaticaly, which
>contains some words to search on, and some other stuff that's mainly
>being used to "filter" the results (i'll avoid my usual rant about
>people underutilizing Filters).  So why not pass the Higherlighter just
>the portion of the Query that you acctaully want to contribute to the
>highlighting?  In this query...
>
>: >> +DocumentType:news
>: >> +(CompanyId:10 CompanyId:20 CompanyId:30 CompanyId:40)
>: >> +FilingDate:[20041201 TO 20051201]
>: >> +(Content:"cost saving" Content:"cost savings"
>: >>Content:outsource
>: >>Content:outsources Content:downsize
>: >>Content:downsizes
>: >>Content:restructuring Content:restructure)
>
>...just give the highlighter...
>
>    (Content:"cost saving" Content:"cost savings"
>     Content:outsource
>     Content:outsources Content:downsize
>     Content:downsizes
>     Content:restructuring Content:restructure)
>
>
>: Date: Thu, 01 Dec 2005 10:38:41 +0530
>: From: Harini Raghavan <harini.raghavan@insideview.com>
>: Reply-To: java-user@lucene.apache.org
>: To: java-user@lucene.apache.org
>: Subject: Re: how to control terms to be highlighted?
>:
>: Hi Mark,
>:
>: It would be great if you can make this change and send the
>: QueryTermsExtractor class. I am invoking the QueryScorer(Query)
>: contructor. Should I use QueryScorer(Query query, IndexReader reader,
>: String fieldName) instead for this to work?
>:
>: Thanks,
>: Harini
>:
>: mark harwood wrote:
>:
>: >>>>Is there anyway to restrict the highlighter to
>: >>>>
>: >>>>
>: >>highlight only the values
>: >>mentioned for the field 'Content'?
>: >>
>: >>
>: >
>: >The problem lies in the QueryTermsExtractor class
>: >which is typically used to provide the Highlighter
>: >with the list of strings to identify in the text. It
>: >currently has no filter for fieldname - you could add
>: >this without too much effort.
>: >
>: >I could make this modification but it may change the
>: >behaviour of existing applications - currently the
>: >QueryTermsExtractor method that takes a fieldname only
>: >uses that fieldname to derive IDF weightings, the
>: >proposed change would also have the effect of
>: >filtering out any query terms that weren't for this
>: >field.
>: >Would this change be a problem for anyone?
>: >
>: >Cheers,
>: >Mark
>: >
>: >--- Harini Raghavan <harini.raghavan@insideview.com>
>: >wrote:
>: >
>: >
>: >
>: >>Hi,
>: >>
>: >>I have a requirement to highlight search keywords in
>: >>the results and
>: >>display the matching fragment of the text with the
>: >>results. I am using
>: >>the Hits highlighting mentioned in Lucene in Action.
>: >>
>: >>Here is the search query(BooleanQuery) I am passing
>: >>to the IndexSearcher
>: >>and QueryScorer:
>: >> +DocumentType:news
>: >> +(CompanyId:10 CompanyId:20 CompanyId:30
>: >>CompanyId:40)
>: >> +FilingDate:[20041201 TO 20051201]
>: >> +(Content:"cost saving" Content:"cost savings"
>: >>Content:outsource
>: >>Content:outsources Content:downsize
>: >>Content:downsizes
>: >>Content:restructuring Content:restructure)
>: >>
>: >>My requirement is to highlight only the keywords for
>: >>'Content' field,
>: >>but the highlighter api is also highlighting words
>: >>like 'news', '10',
>: >>'40' etc.
>: >>Is there anyway to restrict the highlighter to
>: >>highlight only the values
>: >>mentioned for the field 'Content'?
>: >>
>: >>Thanks,
>: >>Harini
>: >>
>: >>
>: >>
>: >>
>: >>
>: >>
>: >>
>: >>
>: >---------------------------------------------------------------------
>: >
>: >
>: >>To unsubscribe, e-mail:
>: >>java-user-unsubscribe@lucene.apache.org
>: >>For additional commands, e-mail:
>: >>java-user-help@lucene.apache.org
>: >>
>: >>
>: >>
>: >>
>: >
>: >
>: >
>: >
>: >___________________________________________________________
>: >Yahoo! Model Search 2005 - Find the next catwalk superstars - http://uk.news.yahoo.com/hot/model-search/
>: >
>: >---------------------------------------------------------------------
>: >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>: >For additional commands, e-mail: java-user-help@lucene.apache.org
>: >
>: >
>: >
>: >
>:
>:
>: ---------------------------------------------------------------------
>: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>: For additional commands, e-mail: java-user-help@lucene.apache.org
>:
>
>
>
>-Hoss
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>

--------------030408080102070100010900
Content-Type: text/plain;
 name="QueryTermExtractor.java"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="QueryTermExtractor.java"

package org.apache.lucene.search.highlight;
/**
 * Copyright 2002-2004 The Apache Software Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

import java.io.IOException;
import java.util.Collection;
import java.util.HashSet;
import java.util.Iterator;

import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.spans.SpanNearQuery;

/**
 * Utility class used to extract the terms used in a query, plus any weights.
 * This class will not find terms for MultiTermQuery, RangeQuery and PrefixQuery classes
 * so the caller must pass a rewritten query (see Query.rewrite) to obtain a list of
 * expanded terms.
 *
 */
public final class QueryTermExtractor
{

	/**
	 * Extracts all terms texts of a given Query into an array of WeightedTerms
	 *
	 * @param query      Query to extract term texts from
	 * @return an array of the terms used in a query, plus their weights.
	 */
	public static final WeightedTerm[] getTerms(Query query)
	{
		return getTerms(query,false,"");
	}

	/**
	 * Extracts all terms texts of a given Query into an array of WeightedTerms
	 *
	 * @param query      Query to extract term texts from
	 * @param reader used to compute IDF which can be used to a) score selected fragments better
	 * b) use graded highlights eg chaning intensity of font color
	 * @param fieldName the field on which Inverse Document Frequency (IDF) calculations are based
	 * @return an array of the terms used in a query, plus their weights.
	 */
	public static final WeightedTerm[] getIdfWeightedTerms(Query query, IndexReader reader, String fieldName)
	{
	    WeightedTerm[] terms=getTerms(query,false,fieldName);
	    int totalNumDocs=reader.numDocs();
	    for (int i = 0; i < terms.length; i++)
        {
	        try
            {
                int docFreq=reader.docFreq(new Term(fieldName,terms[i].term));
                //IDF algorithm taken from DefaultSimilarity class
                float idf=(float)(Math.log((float)totalNumDocs/(double)(docFreq+1)) + 1.0);
                terms[i].weight*=idf;
            }
	        catch (IOException e)
            {
	            //ignore
            }
        }
		return terms;
	}

	/**
	 * Extracts all terms texts of a given Query into an array of WeightedTerms
	 *
	 * @param query      Query to extract term texts from
	 * @param prohibited <code>true</code> to extract "prohibited" terms, too
   * @return an array of the terms used in a query, plus their weights.
   */
	public static final WeightedTerm[] getTerms(Query query, boolean prohibited, String fieldName)
	{
		HashSet terms=new HashSet();
		getTerms(query,terms,prohibited,fieldName);
		return (WeightedTerm[]) terms.toArray(new WeightedTerm[0]);
	}

	private static final void getTerms(Query query, HashSet terms,boolean prohibited, String fieldName)
	{
		if (query instanceof BooleanQuery)
			getTermsFromBooleanQuery((BooleanQuery) query, terms, prohibited, fieldName);
		else
			if (query instanceof PhraseQuery)
				getTermsFromPhraseQuery((PhraseQuery) query, terms, fieldName);
			else
				if (query instanceof TermQuery)
					getTermsFromTermQuery((TermQuery) query, terms, fieldName);
				else
		        if(query instanceof SpanNearQuery)
		            getTermsFromSpanNearQuery((SpanNearQuery) query, terms, fieldName);
	}

	private static final void getTermsFromBooleanQuery(BooleanQuery query, HashSet terms, boolean prohibited, String fieldName)
	{
		BooleanClause[] queryClauses = query.getClauses();
		int i;

		for (i = 0; i < queryClauses.length; i++)
		{
			if (prohibited || !queryClauses[i].prohibited)
				getTerms(queryClauses[i].query, terms, prohibited, fieldName);
		}
	}

	private static final void getTermsFromPhraseQuery(PhraseQuery query, HashSet terms, String fieldName)
	{
		Term[] queryTerms = query.getTerms();
		int i;
		String field;

		for (i = 0; i < queryTerms.length; i++)
		{
			if(fieldName.equals(""))
				terms.add(new WeightedTerm(query.getBoost(),queryTerms[i].text()));
			else {
				field = queryTerms[i].field();
				if(field.equals(fieldName))
					terms.add(new WeightedTerm(query.getBoost(),queryTerms[i].text()));
			}
		}
	}

	private static final void getTermsFromTermQuery(TermQuery query, HashSet terms, String fieldName)
	{
		String field = query.getTerm().field();
		if(fieldName.equals(""))
			terms.add(new WeightedTerm(query.getBoost(),query.getTerm().text()));
		else if(field.equals(fieldName)) {
			terms.add(new WeightedTerm(query.getBoost(),query.getTerm().text()));
		}
	}

    private static final void getTermsFromSpanNearQuery(SpanNearQuery query, HashSet terms, String fieldName){

        Collection queryTerms = query.getTerms();

        for(Iterator iterator = queryTerms.iterator(); iterator.hasNext();){

            // break it out for debugging.

            Term term = (Term) iterator.next();

            String text = term.text();

			String field = term.field();

			if(fieldName.equals(""))
				terms.add(new WeightedTerm(query.getBoost(), text));
			else if(field.equals(fieldName)) {
        	    terms.add(new WeightedTerm(query.getBoost(), text));
			}

        }

    }

}



--------------030408080102070100010900
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------030408080102070100010900--

From java-user-return-17787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 02 11:54:10 2005
Return-Path: <java-user-return-17787-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95566 invoked from network); 2 Dec 2005 11:54:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Dec 2005 11:54:10 -0000
Received: (qmail 58858 invoked by uid 500); 2 Dec 2005 11:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58549 invoked by uid 500); 2 Dec 2005 11:54:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58538 invoked by uid 99); 2 Dec 2005 11:54:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 03:54:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 03:55:32 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jB2BrhV13301
	for <java-user@lucene.apache.org>; Fri, 2 Dec 2005 05:53:46 -0600
Message-ID: <43903645.6000705@getopt.org>
Date: Fri, 02 Dec 2005 12:55:49 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Lucene performance bottlenecks
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm doing some performance profiling of a Nutch installation, working 
with relatively large individual indexes (10 mln docs), and I'm puzzled 
with the results.

Here's the listing of the index:
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f0
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f1
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f2
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f3
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f4
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f5
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:25 _0.f6
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:25 _0.f7
-rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:25 _0.f8
-rw-r--r--  1 andrzej andrzej  2494445020 Dec  2 04:58 _0.fdt
-rw-r--r--  1 andrzej andrzej    78424800 Dec  2 04:58 _0.fdx
-rw-r--r--  1 andrzej andrzej          92 Dec  2 04:55 _0.fnm
-rw-r--r--  1 andrzej andrzej  7436259508 Dec  2 05:24 _0.frq
-rw-r--r--  1 andrzej andrzej 12885589796 Dec  2 05:24 _0.prx
-rw-r--r--  1 andrzej andrzej     3483642 Dec  2 05:24 _0.tii
-rw-r--r--  1 andrzej andrzej   280376933 Dec  2 05:24 _0.tis
-rw-r--r--  1 andrzej andrzej           4 Dec  2 05:25 deletable
-rw-r--r--  1 andrzej andrzej          27 Dec  2 05:25 segments


I run it on an AMD Opteron 246, 2Ghz, 4GB RAM, java -version says:

Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_05-b05, mixed mode)

I run it with a heap of 1.5-2.5 GB, which doesn't make any difference 
(see below). I'm using the latest SVN code (from yesterday) + 
performance enhancements to ConjunctionScorer and BooleanScorer2 from JIRA.

The performance is less than impressive, response times being more than 
1 sec. Nutch produces complex queries for phrases, so the user query 
"term1 term2" gets rewritten like this:

+(url:term1^4.0 anchor:term1^2.0 content:term1 title:term1^1.5 
host:term1^2.0) +(url:term2^4.0 anchor:term2^2.0 content:term2 
title:term2^1.5 host:term2^2.0) url:"term1 term2"~2147483647^4.0 
anchor:"term1 term2"~4^2.0 content:"term1 term2"~2147483647 title:"term1 
term2"~2147483647^1.5 host:"term1 term2"~2147483647^2.0

For a simple TermQuery, if the DF(term) is above 10%, the response time 
from IndexSearcher.search() is around 400ms (repeatable, after warm-up). 
For such complex phrase queries the response time is around 1 sec or 
more (again, after warm-up).

Initially I thought the process is I/O or heap/GC bound, this is a large 
index after all, but the profiler shows it's purely CPU bound. I tracked 
the bottleneck to the scorers (see my previous email on this), but also 
to IndexInput.readVInt.. What's even more curious, most of the heap is 
unused - I had the impression that Lucene tries to read as much of the 
index as it can to memory in order to speed up the access, but 
apparently that's not the case. The heap consumption was always in the 
order of 100-200MB, no matter how large heap I set (and I tried values 
between 1-4GB).

For those interested in profiler info, look here:

http://www.getopt.org/lucene/20051202/

Here's an example of elapsed times [ms] for IndexSearcher.search, and 
for getting the first 100 docs using Hits.doc(i):

19. Complex search1:
 search: 1309
 hits.doc: 4
19. Complex search2:
 search: 2492
 hits.doc: 5
19. Simple search:
 search: 392
 hits.doc: 5
20. Complex search1:
 search: 1307
 hits.doc: 5
20. Complex search2:
 search: 2499
 hits.doc: 5
20. Simple search:
 search: 391
 hits.doc: 5


I would appreciate any suggestions how to proceed with this...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 02 12:34:48 2005
Return-Path: <java-user-return-17788-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15402 invoked from network); 2 Dec 2005 12:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Dec 2005 12:34:48 -0000
Received: (qmail 23760 invoked by uid 500); 2 Dec 2005 12:34:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23738 invoked by uid 500); 2 Dec 2005 12:34:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23727 invoked by uid 99); 2 Dec 2005 12:34:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 04:34:40 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.35] (HELO web26013.mail.ukl.yahoo.com) (217.146.177.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Dec 2005 04:36:09 -0800
Received: (qmail 53027 invoked by uid 60001); 2 Dec 2005 12:34:18 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AxuGSb453RITKwY457ShrtKYevCQ7klBqIDdP+gFcDE/OA+blt89zfvGe3ohk+m0THoE6f8w9jgU8VtlEY7kho0o2fNuZu5qeLiArnS+9YzaR9rc6pI78LbxjT7LW6dR78d3oaXZnpFOOXLLdXI5gQixiY4PQ3S6wX1D485Csb4=  ;
Message-ID: <20051202123418.53023.qmail@web26013.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Fri, 02 Dec 2005 12:34:17 GMT
Date: Fri, 2 Dec 2005 12:34:17 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: how to control terms to be highlighted?
To: java-user@lucene.apache.org
In-Reply-To: <439010F9.7080307@insideview.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Harini, 
I updated QueryTermsExtractor in Subversion last night
to support your requirement.

The JUnit test is also updated with a field-specific
example.

Cheers,
Mark


--- Harini Raghavan <harini.raghavan@insideview.com>
wrote:

> Hi Chris,
> 
> Can we pass a different query object for searching
> and a different one 
> to the highlighter? I am not sure of that.
> In any case,  based on Mark's suggestion I modified
> the 
> QueryTermsExtractor class and filtered the query 
> terms by the fieldName.
> Attached is the modified file.
> 
> Thanks,
> Harini
> 
> 
> 
> Chris Hostetter wrote:
> 
> >I don't know what your application is, and I have
> no experience with the
> >Highlighter code, so forgive me if this is a silly
> suggestion:
> >
> >It looks like you are building a query up
> programaticaly, which
> >contains some words to search on, and some other
> stuff that's mainly
> >being used to "filter" the results (i'll avoid my
> usual rant about
> >people underutilizing Filters).  So why not pass
> the Higherlighter just
> >the portion of the Query that you acctaully want to
> contribute to the
> >highlighting?  In this query...
> >
> >: >> +DocumentType:news
> >: >> +(CompanyId:10 CompanyId:20 CompanyId:30
> CompanyId:40)
> >: >> +FilingDate:[20041201 TO 20051201]
> >: >> +(Content:"cost saving" Content:"cost savings"
> >: >>Content:outsource
> >: >>Content:outsources Content:downsize
> >: >>Content:downsizes
> >: >>Content:restructuring Content:restructure)
> >
> >...just give the highlighter...
> >
> >    (Content:"cost saving" Content:"cost savings"
> >     Content:outsource
> >     Content:outsources Content:downsize
> >     Content:downsizes
> >     Content:restructuring Content:restructure)
> >
> >
> >: Date: Thu, 01 Dec 2005 10:38:41 +0530
> >: From: Harini Raghavan
> <harini.raghavan@insideview.com>
> >: Reply-To: java-user@lucene.apache.org
> >: To: java-user@lucene.apache.org
> >: Subject: Re: how to control terms to be
> highlighted?
> >:
> >: Hi Mark,
> >:
> >: It would be great if you can make this change and
> send the
> >: QueryTermsExtractor class. I am invoking the
> QueryScorer(Query)
> >: contructor. Should I use QueryScorer(Query query,
> IndexReader reader,
> >: String fieldName) instead for this to work?
> >:
> >: Thanks,
> >: Harini
> >:
> >: mark harwood wrote:
> >:
> >: >>>>Is there anyway to restrict the highlighter
> to
> >: >>>>
> >: >>>>
> >: >>highlight only the values
> >: >>mentioned for the field 'Content'?
> >: >>
> >: >>
> >: >
> >: >The problem lies in the QueryTermsExtractor
> class
> >: >which is typically used to provide the
> Highlighter
> >: >with the list of strings to identify in the
> text. It
> >: >currently has no filter for fieldname - you
> could add
> >: >this without too much effort.
> >: >
> >: >I could make this modification but it may change
> the
> >: >behaviour of existing applications - currently
> the
> >: >QueryTermsExtractor method that takes a
> fieldname only
> >: >uses that fieldname to derive IDF weightings,
> the
> >: >proposed change would also have the effect of
> >: >filtering out any query terms that weren't for
> this
> >: >field.
> >: >Would this change be a problem for anyone?
> >: >
> >: >Cheers,
> >: >Mark
> >: >
> >: >--- Harini Raghavan
> <harini.raghavan@insideview.com>
> >: >wrote:
> >: >
> >: >
> >: >
> >: >>Hi,
> >: >>
> >: >>I have a requirement to highlight search
> keywords in
> >: >>the results and
> >: >>display the matching fragment of the text with
> the
> >: >>results. I am using
> >: >>the Hits highlighting mentioned in Lucene in
> Action.
> >: >>
> >: >>Here is the search query(BooleanQuery) I am
> passing
> >: >>to the IndexSearcher
> >: >>and QueryScorer:
> >: >> +DocumentType:news
> >: >> +(CompanyId:10 CompanyId:20 CompanyId:30
> >: >>CompanyId:40)
> >: >> +FilingDate:[20041201 TO 20051201]
> >: >> +(Content:"cost saving" Content:"cost savings"
> >: >>Content:outsource
> >: >>Content:outsources Content:downsize
> >: >>Content:downsizes
> >: >>Content:restructuring Content:restructure)
> >: >>
> >: >>My requirement is to highlight only the
> keywords for
> >: >>'Content' field,
> >: >>but the highlighter api is also highlighting
> words
> >: >>like 'news', '10',
> >: >>'40' etc.
> >: >>Is there anyway to restrict the highlighter to
> >: >>highlight only the values
> >: >>mentioned for the field 'Content'?
> >: >>
> >: >>Thanks,
> >: >>Harini
> >: >>
> >: >>
> >: >>
> >: >>
> >: >>
> >: >>
> >: >>
> >: >>
> >:
>
>---------------------------------------------------------------------
> >: >
> >: >
> >: >>To unsubscribe, e-mail:
> >: >>java-user-unsubscribe@lucene.apache.org
> >: >>For additional commands, e-mail:
> >: >>java-user-help@lucene.apache.org
> >: >>
> >: >>
> >: >>
> >: >>
> >: >
> >: >
> >: >
> >: >
> >:
>
>___________________________________________________________
> >: >Yahoo! Model Search 2005 - Find the next catwalk
> superstars -
> http://uk.news.yahoo.com/hot/model-search/
> >: >
> >:
>
>---------------------------------------------------------------------
> >: >To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >: >For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >: >
> >: >
> >: >
> >: >
> >:
> >:
> >:
>
---------------------------------------------------------------------
> 
=== message truncated ===> package
org.apache.lucene.search.highlight;
> /**
>  * Copyright 2002-2004 The Apache Software
> Foundation
>  *
>  * Licensed under the Apache License, Version 2.0
> (the "License");
>  * you may not use this file except in compliance
> with the License.
>  * You may obtain a copy of the License at
>  *
>  *     http://www.apache.org/licenses/LICENSE-2.0
>  *
>  * Unless required by applicable law or agreed to in
> writing, software
>  * distributed under the License is distributed on
> an "AS IS" BASIS,
>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
> either express or implied.
>  * See the License for the specific language
> governing permissions and
>  * limitations under the License.
>  */
> 
> import java.io.IOException;
> import java.util.Collection;
> import java.util.HashSet;
> import java.util.Iterator;
> 
> import org.apache.lucene.index.IndexReader;
> import org.apache.lucene.index.Term;
> import org.apache.lucene.search.BooleanClause;
> import org.apache.lucene.search.BooleanQuery;
> import org.apache.lucene.search.PhraseQuery;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.search.TermQuery;
> import org.apache.lucene.search.spans.SpanNearQuery;
> 
> /**
>  * Utility class used to extract the terms used in a
> query, plus any weights.
>  * This class will not find terms for
> MultiTermQuery, RangeQuery and PrefixQuery classes
>  * so the caller must pass a rewritten query (see
> Query.rewrite) to obtain a list of
>  * expanded terms.
>  *
>  */
> public final class QueryTermExtractor
> {
> 
> 	/**
> 	 * Extracts all terms texts of a given Query into
> an array of WeightedTerms
> 	 *
> 	 * @param query      Query to extract term texts
> from
> 	 * @return an array of the terms used in a query,
> plus their weights.
> 	 */
> 	public static final WeightedTerm[] getTerms(Query
> query)
> 	{
> 		return getTerms(query,false,"");
> 	}
> 
> 	/**
> 	 * Extracts all terms texts of a given Query into
> an array of WeightedTerms
> 	 *
> 	 * @param query      Query to extract term texts
> from
> 	 * @param reader used to compute IDF which can be
> used to a) score selected fragments better
> 	 * b) use graded highlights eg chaning intensity of
> font color
> 	 * @param fieldName the field on which Inverse
> Document Frequency (IDF) calculations are based
> 	 * @return an array of the terms used in a query,
> plus their weights.
> 	 */
> 	public static final WeightedTerm[]
> getIdfWeightedTerms(Query query, IndexReader reader,
> String fieldName)
> 	{
> 	    WeightedTerm[]
> terms=getTerms(query,false,fieldName);
> 	    int totalNumDocs=reader.numDocs();
> 	    for (int i = 0; i < terms.length; i++)
>         {
> 	        try
>             {
>                 int docFreq=reader.docFreq(new
> Term(fieldName,terms[i].term));
>                 //IDF algorithm taken from
> DefaultSimilarity class
>                 float
>
idf=(float)(Math.log((float)totalNumDocs/(double)(docFreq+1))
> + 1.0);
>                 terms[i].weight*=idf;
>             }
> 	        catch (IOException e)
>             {
> 	            //ignore
>             }
>         }
> 		return terms;
> 	}
> 
> 	/**
> 	 * Extracts all terms texts of a given Query into
> an array of WeightedTerms
> 	 *
> 	 * @param query      Query to extract term texts
> from
> 	 * @param prohibited <code>true</code> to extract
> "prohibited" terms, too
>    * @return an array of the terms used in a query,
> plus their weights.
>    */
> 	public static final WeightedTerm[] getTerms(Query
> query, boolean prohibited, String fieldName)
> 	{
> 		HashSet terms=new HashSet();
> 		getTerms(query,terms,prohibited,fieldName);
> 		return (WeightedTerm[]) terms.toArray(new
> WeightedTerm[0]);
> 	}
> 
> 	private static final void getTerms(Query query,
> HashSet terms,boolean prohibited, String fieldName)
> 	{
> 		if (query instanceof BooleanQuery)
> 			getTermsFromBooleanQuery((BooleanQuery) query,
> terms, prohibited, fieldName);
> 		else
> 			if (query instanceof PhraseQuery)
> 				getTermsFromPhraseQuery((PhraseQuery) query,
> terms, fieldName);
> 			else
> 				if (query instanceof TermQuery)
> 					getTermsFromTermQuery((TermQuery) query, terms,
> fieldName);
> 				else
> 		        if(query instanceof SpanNearQuery)
> 		           
> getTermsFromSpanNearQuery((SpanNearQuery) query,
> terms, fieldName);
> 	}
> 
> 	private static final void
> getTermsFromBooleanQuery(BooleanQuery query, HashSet
> terms, boolean prohibited, String fieldName)
> 	{
> 		BooleanClause[] queryClauses = query.getClauses();
> 		int i;
> 
> 		for (i = 0; i < queryClauses.length; i++)
> 		{
> 			if (prohibited || !queryClauses[i].prohibited)
> 				getTerms(queryClauses[i].query, terms,
> prohibited, fieldName);
> 		}
> 	}
> 
> 	private static final void
> getTermsFromPhraseQuery(PhraseQuery query, HashSet
> terms, String fieldName)
> 	{
> 		Term[] queryTerms = query.getTerms();
> 		int i;
> 		String field;
> 
> 		for (i = 0; i < queryTerms.length; i++)
> 		{
> 			if(fieldName.equals(""))
> 				terms.add(new
>
WeightedTerm(query.getBoost(),queryTerms[i].text()));
> 			else {
> 				field = queryTerms[i].field();
> 				if(field.equals(fieldName))
> 					terms.add(new
>
WeightedTerm(query.getBoost(),queryTerms[i].text()));
> 			}
> 		}
> 	}
> 
> 	private static final void
> getTermsFromTermQuery(TermQuery query, HashSet
> terms, String fieldName)
> 	{
> 		String field = query.getTerm().field();
> 		if(fieldName.equals(""))
> 			terms.add(new
>
WeightedTerm(query.getBoost(),query.getTerm().text()));
> 		else if(field.equals(fieldName)) {
> 			terms.add(new
>
WeightedTerm(query.getBoost(),query.getTerm().text()));
> 		}
> 	}
> 
> 
=== message truncated ===>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
java-user-help@lucene.apache.org



		
___________________________________________________________ 
WIN ONE OF THREE YAHOO! VESPAS - Enter now! - http://uk.cars.yahoo.com/features/competitions/vespa.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 02 23:37:55 2005
Return-Path: <java-user-return-17789-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78141 invoked from network); 2 Dec 2005 23:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Dec 2005 23:37:54 -0000
Received: (qmail 11986 invoked by uid 500); 2 Dec 2005 23:35:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5458 invoked by uid 500); 2 Dec 2005 23:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3472 invoked by uid 99); 2 Dec 2005 23:34:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 15:34:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 12:28:52 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id jB2KR0hP039929
	for <java-user@lucene.apache.org>; Fri, 2 Dec 2005 21:27:00 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
Date: Fri, 2 Dec 2005 21:27:00 +0100
User-Agent: KMail/1.5.4
References: <43903645.6000705@getopt.org>
In-Reply-To: <43903645.6000705@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200512022127.00278.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej,

On Friday 02 December 2005 12:55, Andrzej Bialecki wrote:
> Hi,
>=20
> I'm doing some performance profiling of a Nutch installation, working=20
> with relatively large individual indexes (10 mln docs), and I'm puzzled=20
> with the results.
>=20
> Here's the listing of the index:
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f0
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f1
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f2
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f3
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f4
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:24 _0.f5
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:25 _0.f6
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:25 _0.f7
> -rw-r--r--  1 andrzej andrzej     9803100 Dec  2 05:25 _0.f8
> -rw-r--r--  1 andrzej andrzej  2494445020 Dec  2 04:58 _0.fdt
> -rw-r--r--  1 andrzej andrzej    78424800 Dec  2 04:58 _0.fdx
> -rw-r--r--  1 andrzej andrzej          92 Dec  2 04:55 _0.fnm
> -rw-r--r--  1 andrzej andrzej  7436259508 Dec  2 05:24 _0.frq
> -rw-r--r--  1 andrzej andrzej 12885589796 Dec  2 05:24 _0.prx
> -rw-r--r--  1 andrzej andrzej     3483642 Dec  2 05:24 _0.tii
> -rw-r--r--  1 andrzej andrzej   280376933 Dec  2 05:24 _0.tis
> -rw-r--r--  1 andrzej andrzej           4 Dec  2 05:25 deletable
> -rw-r--r--  1 andrzej andrzej          27 Dec  2 05:25 segments
>=20
>=20
> I run it on an AMD Opteron 246, 2Ghz, 4GB RAM, java -version says:
>=20
> Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_05-b05, mixed mode)
>=20
> I run it with a heap of 1.5-2.5 GB, which doesn't make any difference=20
> (see below). I'm using the latest SVN code (from yesterday) +=20
> performance enhancements to ConjunctionScorer and BooleanScorer2 from JIR=
A.
>=20
> The performance is less than impressive, response times being more than=20
> 1 sec. Nutch produces complex queries for phrases, so the user query=20
> "term1 term2" gets rewritten like this:

In somewhat more readable layout:
=20
+(url:term1^4.0 anchor:term1^2.0 content:term1
   title:term1^1.5  host:term1^2.0)
+(url:term2^4.0 anchor:term2^2.0 content:term2
   title:term2^1.5 host:term2^2.0)
url:"term1 term2"~2147483647^4.0=20
anchor:"term1 term2"~4^2.0
content:"term1 term2"~2147483647
title:"term1 term2"~2147483647^1.5
host:"term1 term2"~2147483647^2.0

The first two clauses with + prefixes are required, and I would guess
that the 5 way disjunctions inside these clauses take most of the cpu time
during search.
The remaining clauses will be skipped to only when the two required
clauses are both present, so these are probably not the problem.
In the call tree for scoring these can be identified by the skipTo()
being called inside the score() method at the top level.

This is one of the cases in which BooleanScorer2 can be faster
than the 1.4 BooleanScorer because the 1.4 BooleanScorer does
not use skipTo() for the optional clauses.
Could you try this by calling the static method
BooleanQuery.setUseScorer14(true) and repeating the test?
=20
> For a simple TermQuery, if the DF(term) is above 10%, the response time=20
> from IndexSearcher.search() is around 400ms (repeatable, after warm-up).=
=20
> For such complex phrase queries the response time is around 1 sec or=20
> more (again, after warm-up).
>=20
> Initially I thought the process is I/O or heap/GC bound, this is a large=
=20
> index after all, but the profiler shows it's purely CPU bound. I tracked=
=20
> the bottleneck to the scorers (see my previous email on this), but also=20
> to IndexInput.readVInt.. What's even more curious, most of the heap is=20
> unused - I had the impression that Lucene tries to read as much of the=20
> index as it can to memory in order to speed up the access, but=20
> apparently that's not the case. The heap consumption was always in the=20
> order of 100-200MB, no matter how large heap I set (and I tried values=20
> between 1-4GB).
>=20
> For those interested in profiler info, look here:
>=20
> http://www.getopt.org/lucene/20051202/

Thanks for making this available.
I had a short look and noticed that the times in the call tree are cumulati=
ve.
Would it be possible to record cpu time per method by subtracting the
times of the called methods?
Another interesting statistic is the actual numbers of times the methods get
called. The scorers used by BooleanScorer2 can use rather deep
call trees for scoring. These method calls are not free, and I would like
to know whether these form a bottleneck.=20

=46rom the hot spots output of the profiler info I see that the following m=
ethods:
=2D PhrasePositions.nextPosition
=2D SegmentTermDocs.read
have a larger portion of cpu time spent in the method.
Looking at the expanded query, seeing PhrasePositions.nextPosition
here is not a surprise.

The fact that SegmentTermDocs.read shows up might explain
the reason why only a little heap is used:  Lucene normally leaves
the file buffering to the operating system, and
when the file buffers are read the index data is decompressed
mostly by the readVInt method.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 02 23:44:22 2005
Return-Path: <java-user-return-17790-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88381 invoked from network); 2 Dec 2005 23:44:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Dec 2005 23:44:21 -0000
Received: (qmail 79266 invoked by uid 500); 2 Dec 2005 23:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78771 invoked by uid 500); 2 Dec 2005 23:43:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75263 invoked by uid 99); 2 Dec 2005 23:42:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 15:42:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 15:23:19 -0800
Received: from 192.168.100.99 ([192.168.100.99]) by bettylou.configureone.net ([192.168.100.7]) with Microsoft Exchange Server HTTP-DAV ;
 Fri,  2 Dec 2005 23:20:59 +0000
User-Agent: Microsoft-Entourage/11.2.1.051004
Date: Fri, 02 Dec 2005 17:21:47 -0600
Subject: Wildcard
From: John Powers <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
Message-ID: <BFB6332B.1DFA%jpowers@configureone.com>
Thread-Topic: Wildcard
Thread-Index: AcX3lyoyaHcV3mOKEdq0KwANk2AiFA==
In-Reply-To: <8220B8D6B56A9A4E8480489F38E425298E470A@rw-msg-02.broadvision.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
Lucene only lets you use a wildcard after a term, not before, correct?
What work arounds are there for that?

If I have an item 108585-123
And another 332323-123
How can I look for all the -123 family of items?

John Powers


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 02 23:58:27 2005
Return-Path: <java-user-return-17791-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10919 invoked from network); 2 Dec 2005 23:58:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Dec 2005 23:58:25 -0000
Received: (qmail 78584 invoked by uid 500); 2 Dec 2005 23:56:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78238 invoked by uid 500); 2 Dec 2005 23:56:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78140 invoked by uid 99); 2 Dec 2005 23:56:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 15:56:51 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of george.abraham.lucene@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 13:05:25 -0800
Received: by zproxy.gmail.com with SMTP id i1so547132nzh
        for <java-user@lucene.apache.org>; Fri, 02 Dec 2005 13:03:35 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=L5M5HALPlo0r08stbaCCAtU46km2UcWHjtsjR8YUchP6rslQ0PpsNJnftnvAGA1sExhS5waqnONvSXxbxAmTbsmiJ+mcgTbX4hzWwHR5xJX7M9QeqUDd8xn8hN9HUMmuMRXMNTMed4MKr6kMoiWsdgycwIQE9x0+6/1ppb2QEVo=
Received: by 10.65.73.3 with SMTP id a3mr1789961qbl;
        Fri, 02 Dec 2005 13:03:34 -0800 (PST)
Received: by 10.65.153.19 with HTTP; Fri, 2 Dec 2005 13:03:34 -0800 (PST)
Message-ID: <9ba0336c0512021303q37b0ced6s8cb201b7246bc515@mail.gmail.com>
Date: Fri, 2 Dec 2005 16:03:34 -0500
From: George Abraham <george.abraham.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: lucene and database searching, keeping score
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3407_13767808.1133557414777"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3407_13767808.1133557414777
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

All,
I have created a Lucene index from data in a SQL Server db. When I conduct =
a
Lucene search, I get back in the hits the primary key (WorkID) and the
scores associated with the hits. Then using the list of WorkIDs, I query th=
e
database for the other associated information of the assets associated with
the WorkIDs. Since this is a SQL query, it is independent of the Lucene
scoring and the order is all screwed up. How do I then add the scores to th=
e
resultset returned from the database? Basically I would want to merge the
resultset from Lucene with the resultset from the SQL query.

Thanks,
George

------=_Part_3407_13767808.1133557414777--

From java-user-return-17792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 00:14:41 2005
Return-Path: <java-user-return-17792-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30659 invoked from network); 3 Dec 2005 00:14:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 00:14:40 -0000
Received: (qmail 7831 invoked by uid 500); 3 Dec 2005 00:12:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7756 invoked by uid 500); 3 Dec 2005 00:12:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7700 invoked by uid 99); 3 Dec 2005 00:12:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:12:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 10:37:57 -0800
Received: (qmail 78707 invoked by uid 89); 2 Dec 2005 18:36:04 -0000
Received: from unknown (HELO ?192.168.168.81?) (69.228.81.200)
  by londo.swishmail.com with SMTP; 2 Dec 2005 18:36:04 -0000
Message-ID: <43909413.4030503@apache.org>
Date: Fri, 02 Dec 2005 10:36:03 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <43903645.6000705@getopt.org>
In-Reply-To: <43903645.6000705@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> For a simple TermQuery, if the DF(term) is above 10%, the response time 
> from IndexSearcher.search() is around 400ms (repeatable, after warm-up). 
> For such complex phrase queries the response time is around 1 sec or 
> more (again, after warm-up).

Are you specifying -server to the JVM?

> I tracked 
> the bottleneck to the scorers (see my previous email on this), but also 
> to IndexInput.readVInt.. 

It might be interesting to benchmark GCJ-compiled Lucene, since 
IndexInput.readVInt is highly optimized there.

> What's even more curious, most of the heap is 
> unused - I had the impression that Lucene tries to read as much of the 
> index as it can to memory in order to speed up the access, but 
> apparently that's not the case. The heap consumption was always in the 
> order of 100-200MB, no matter how large heap I set (and I tried values 
> between 1-4GB).

Lucene relies on the kernel to cache i/o, outside of the Java heap.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 00:16:33 2005
Return-Path: <java-user-return-17793-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32721 invoked from network); 3 Dec 2005 00:16:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 00:16:32 -0000
Received: (qmail 25237 invoked by uid 500); 3 Dec 2005 00:14:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24843 invoked by uid 500); 3 Dec 2005 00:14:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24574 invoked by uid 99); 3 Dec 2005 00:14:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:14:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.152 as permitted sender)
Received: from [205.158.62.152] (HELO ws6-5.us4.outblaze.com) (205.158.62.152)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 02 Dec 2005 15:57:12 -0800
Received: (qmail 9873 invoked from network); 2 Dec 2005 23:55:42 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@69.212.48.46)
  by ws6-5.us4.outblaze.com with SMTP; 2 Dec 2005 23:55:42 -0000
Message-ID: <4390DF00.5030401@curtin.com>
Date: Fri, 02 Dec 2005 18:55:44 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Wildcard
References: <BFB6332B.1DFA%jpowers@configureone.com>
In-Reply-To: <BFB6332B.1DFA%jpowers@configureone.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

John Powers wrote:

> Hello,
> Lucene only lets you use a wildcard after a term, not before, correct?
> What work arounds are there for that?
> 
> If I have an item 108585-123
> And another 332323-123
> How can I look for all the -123 family of items?

Classic indexing problem.  Here are a couple simple ideas.

1.  If the dash in these items means that the two sets of numbers are, 
in fact, different attributes, AND you only want to prefix entire 
attributes, then separate them into their own fields in Lucene.  That 
is, instead of a FOOBAR field with entries like 108585-123, have a FOO 
field with entries like 108585 and 332323, and a BAR field with entries 
like 123.  To look for all items in the 123 family, simply search only 
on the BAR field.

2.  If you want arbitrary postfixing for ITEM (in addition to the 
arbitrary prefixing Lucene already provides), encode ITEM in the index 
in forward and reverse directions.  In other words, ITEM has entries 
like 108585-123 and 332323-123, and REVITEM has entries like 321-585801 
and 321-332323.  To look for all items in the 123 family,  search for 
"321*" on REVITEM.  To look for all items in a family ending in 3, the 
equivalent of "*3" in ITEM, search for "3*" in REVITEM.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 00:16:57 2005
Return-Path: <java-user-return-17794-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33612 invoked from network); 3 Dec 2005 00:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 00:16:56 -0000
Received: (qmail 31931 invoked by uid 500); 3 Dec 2005 00:14:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31452 invoked by uid 500); 3 Dec 2005 00:14:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30925 invoked by uid 99); 3 Dec 2005 00:14:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:14:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [128.59.29.5] (HELO jalapeno.cc.columbia.edu) (128.59.29.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:00:07 -0800
Received: from [156.145.29.81] ([156.145.29.81])
	(user=mh2371 mech=PLAIN bits=0)
	by jalapeno.cc.columbia.edu (8.13.0/8.13.0) with ESMTP id jB2NwYH8007441
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT);
	Fri, 2 Dec 2005 18:58:35 -0500 (EST)
Message-ID: <4390DFAB.2080303@animarc.com>
Date: Fri, 02 Dec 2005 18:58:35 -0500
From: Marc Hadfield <marc@animarc.com>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Wildcard
References: <BFB6332B.1DFA%jpowers@configureone.com>
In-Reply-To: <BFB6332B.1DFA%jpowers@configureone.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-No-Spam-Score: Local
X-Scanned-By: MIMEDefang 2.48 on 128.59.29.5
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



The standard way to do this is to additionally index the reverse of all 
strings/tokens, potentially in a different field "reverse:", ie  index 
forward:abcd as well as reverse:dcba.  Then in queries of the form 
"*cd",  reverse the query to "dc*" so that you end up with "reverse:dc*"

in your example that would be "reverse:321-*"

--marc




John Powers wrote:

>Hello,
>Lucene only lets you use a wildcard after a term, not before, correct?
>What work arounds are there for that?
>
>If I have an item 108585-123
>And another 332323-123
>How can I look for all the -123 family of items?
>
>John Powers
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 00:17:34 2005
Return-Path: <java-user-return-17795-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33897 invoked from network); 3 Dec 2005 00:17:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 00:17:33 -0000
Received: (qmail 33902 invoked by uid 500); 3 Dec 2005 00:15:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33217 invoked by uid 500); 3 Dec 2005 00:15:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32417 invoked by uid 99); 3 Dec 2005 00:15:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:15:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:01:06 -0800
Received: from 192.168.100.99 ([192.168.100.99]) by bettylou.configureone.net ([192.168.100.7]) with Microsoft Exchange Server HTTP-DAV ;
 Fri,  2 Dec 2005 23:58:47 +0000
User-Agent: Microsoft-Entourage/11.2.1.051004
Date: Fri, 02 Dec 2005 17:59:35 -0600
Subject: Re: lucene and database searching, keeping score
From: John Powers <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
Message-ID: <BFB63C07.1DFE%jpowers@configureone.com>
Thread-Topic: lucene and database searching, keeping score
Thread-Index: AcX3nHIHsG5uf2OPEdq0KwANk2AiFA==
In-Reply-To: <9ba0336c0512021303q37b0ced6s8cb201b7246bc515@mail.gmail.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Instead of just putting the keys in the index, can you put all the data you
might be getting out to display to the user, or whatever the final thing is?
That's what we do.    Search on the id as you are, and then the hit has
documents that are loaded with all your final information instead of just
the keys.   It'll save you a db connection at result time.

On 12/2/05 3:03 PM, "George Abraham" <george.abraham.lucene@gmail.com>
wrote:

> All,
> I have created a Lucene index from data in a SQL Server db. When I conduct a
> Lucene search, I get back in the hits the primary key (WorkID) and the
> scores associated with the hits. Then using the list of WorkIDs, I query the
> database for the other associated information of the assets associated with
> the WorkIDs. Since this is a SQL query, it is independent of the Lucene
> scoring and the order is all screwed up. How do I then add the scores to the
> resultset returned from the database? Basically I would want to merge the
> resultset from Lucene with the resultset from the SQL query.
> 
> Thanks,
> George


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 00:20:12 2005
Return-Path: <java-user-return-17796-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38997 invoked from network); 3 Dec 2005 00:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 00:20:12 -0000
Received: (qmail 65693 invoked by uid 500); 3 Dec 2005 00:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65584 invoked by uid 500); 3 Dec 2005 00:18:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65521 invoked by uid 99); 3 Dec 2005 00:18:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:18:42 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.125.162] (HELO cpanel37.gzo.com) (69.93.125.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:20:05 -0800
Received: from home-pool7-2.com2com.ru ([195.98.167.2] helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.52)
	id 1EiL6h-0005C2-Gp
	for java-user@lucene.apache.org; Fri, 02 Dec 2005 18:18:27 -0600
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Wildcard
Date: Sat, 3 Dec 2005 03:25:09 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
In-Reply-To: <BFB6332B.1DFA%jpowers@configureone.com>
Thread-Index: AcX3lyoyaHcV3mOKEdq0KwANk2AiFAABWi9w
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20051203002005.D542610FB01E@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> From: John Powers [mailto:jpowers@configureone.com] 

> Lucene only lets you use a wildcard after a term, not before, correct?
> What work arounds are there for that?

RegexQuery?
http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene
/search/regex/
 
Also:
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12254.html
And 
http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg12268.html

> If I have an item 108585-123
> And another 332323-123
> How can I look for all the -123 family of items?

Pasha Bizhan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 00:39:19 2005
Return-Path: <java-user-return-17797-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58294 invoked from network); 3 Dec 2005 00:39:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 00:39:19 -0000
Received: (qmail 24092 invoked by uid 500); 3 Dec 2005 00:39:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24054 invoked by uid 500); 3 Dec 2005 00:39:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24028 invoked by uid 99); 3 Dec 2005 00:39:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:39:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO zproxy.gmail.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 02 Dec 2005 16:40:43 -0800
Received: by zproxy.gmail.com with SMTP id l1so727040nzf
        for <java-user@lucene.apache.org>; Fri, 02 Dec 2005 16:38:53 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Ba9nc8hqmQ1ijXsh3j/LmVkKMghway3UwYVpcs2iIyAAhzFUd18NuJpuLPkOjgOzCWPo1P7gIBMQr9SA2rP24tmqrgm0Az2inKgAoVSEMhByE6tl/Be+HxCrT287wQROtu0kBIknKTXnzz1ZBNfzXfOROU989Gh3gVFky6N0mI0=
Received: by 10.64.150.8 with SMTP id x8mr1907282qbd;
        Fri, 02 Dec 2005 16:38:52 -0800 (PST)
Received: by 10.65.23.13 with HTTP; Fri, 2 Dec 2005 16:38:52 -0800 (PST)
Message-ID: <50f433360512021638w33583abx60844b9bbbc75071@mail.gmail.com>
Date: Fri, 2 Dec 2005 16:38:52 -0800
From: Jeff Rodenburg <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: lucene and database searching, keeping score
In-Reply-To: <9ba0336c0512021303q37b0ced6s8cb201b7246bc515@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8785_28307970.1133570332782"
References: <9ba0336c0512021303q37b0ced6s8cb201b7246bc515@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8785_28307970.1133570332782
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

George -

There are a number of SQL Server specific ways you can do this.  Email me
off-list as the solution is not relevant to Lucene.

-- j

On 12/2/05, George Abraham <george.abraham.lucene@gmail.com> wrote:
>
> All,
> I have created a Lucene index from data in a SQL Server db. When I conduc=
t
> a
> Lucene search, I get back in the hits the primary key (WorkID) and the
> scores associated with the hits. Then using the list of WorkIDs, I query
> the
> database for the other associated information of the assets associated
> with
> the WorkIDs. Since this is a SQL query, it is independent of the Lucene
> scoring and the order is all screwed up. How do I then add the scores to
> the
> resultset returned from the database? Basically I would want to merge the
> resultset from Lucene with the resultset from the SQL query.
>
> Thanks,
> George
>
>

------=_Part_8785_28307970.1133570332782--

From java-user-return-17798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 09:42:51 2005
Return-Path: <java-user-return-17798-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11900 invoked from network); 3 Dec 2005 09:42:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 09:42:50 -0000
Received: (qmail 21509 invoked by uid 500); 3 Dec 2005 09:42:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21475 invoked by uid 500); 3 Dec 2005 09:42:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21440 invoked by uid 99); 3 Dec 2005 09:42:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 01:42:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 01:44:13 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8399113E200E; Sat,  3 Dec 2005 04:42:21 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 242D213E2006
	for <java-user@lucene.apache.org>; Sat,  3 Dec 2005 04:41:55 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <BFB6332B.1DFA%jpowers@configureone.com>
References: <BFB6332B.1DFA%jpowers@configureone.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A6848CB1-6051-495E-9FA7-C20DA4422544@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wildcard
Date: Sat, 3 Dec 2005 04:41:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 2, 2005, at 6:21 PM, John Powers wrote:

> Hello,
> Lucene only lets you use a wildcard after a term, not before, correct?
> What work arounds are there for that?
>
> If I have an item 108585-123
> And another 332323-123
> How can I look for all the -123 family of items?

To clarify something that no one else has mentioned, its only  
QueryParser itself that prevents terms from beginning with a wildcard  
character.  WildcardQuery itself supports this.  The reason  
QueryParser prevents it is to avoid runaway queries, as the  
underlying mechanism iterates through all terms in the index,  
optimizing it for the terms that begin with the static prefix.  With  
a leading wildcard character, there is no static prefix so literally  
all terms in the index are checked.

So, you could try:

	Query query = new WildcardQuery(new Term("fieldname", "*-123"));

and see if the performance is acceptable.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 11:14:37 2005
Return-Path: <java-user-return-17799-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33102 invoked from network); 3 Dec 2005 11:14:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 11:14:37 -0000
Received: (qmail 58484 invoked by uid 500); 3 Dec 2005 11:14:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57986 invoked by uid 500); 3 Dec 2005 11:14:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57958 invoked by uid 99); 3 Dec 2005 11:14:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 03:14:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 03:15:59 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jB3BECS01967
	for <java-user@lucene.apache.org>; Sat, 3 Dec 2005 05:14:12 -0600
Message-ID: <43917E85.2040903@getopt.org>
Date: Sat, 03 Dec 2005 12:16:21 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <43903645.6000705@getopt.org> <43909413.4030503@apache.org>
In-Reply-To: <43909413.4030503@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Doug Cutting wrote:

> Andrzej Bialecki wrote:
>
>> For a simple TermQuery, if the DF(term) is above 10%, the response 
>> time from IndexSearcher.search() is around 400ms (repeatable, after 
>> warm-up). For such complex phrase queries the response time is around 
>> 1 sec or more (again, after warm-up).
>
>
> Are you specifying -server to the JVM?


Yes.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 13:08:04 2005
Return-Path: <java-user-return-17800-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70012 invoked from network); 3 Dec 2005 13:08:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 13:08:04 -0000
Received: (qmail 26509 invoked by uid 500); 3 Dec 2005 13:07:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26042 invoked by uid 500); 3 Dec 2005 13:07:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26025 invoked by uid 99); 3 Dec 2005 13:07:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 05:07:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 05:09:14 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jB3D7Tw26341
	for <java-user@lucene.apache.org>; Sat, 3 Dec 2005 07:07:29 -0600
Message-ID: <43919910.1070007@getopt.org>
Date: Sat, 03 Dec 2005 14:09:36 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <43903645.6000705@getopt.org> <200512022127.00278.paul.elschot@xs4all.nl>
In-Reply-To: <200512022127.00278.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Elschot wrote:

>In somewhat more readable layout:
> 
>+(url:term1^4.0 anchor:term1^2.0 content:term1
>   title:term1^1.5  host:term1^2.0)
>+(url:term2^4.0 anchor:term2^2.0 content:term2
>   title:term2^1.5 host:term2^2.0)
>url:"term1 term2"~2147483647^4.0 
>anchor:"term1 term2"~4^2.0
>content:"term1 term2"~2147483647
>title:"term1 term2"~2147483647^1.5
>host:"term1 term2"~2147483647^2.0
>
>The first two clauses with + prefixes are required, and I would guess
>that the 5 way disjunctions inside these clauses take most of the cpu time
>during search.
>  
>

That's an interesting observation. This suggests that it could pay off 
to glue these fields together and change this to a query on a single 
combined field, right? I.e. to trade off space for speed.

>The remaining clauses will be skipped to only when the two required
>clauses are both present, so these are probably not the problem.
>In the call tree for scoring these can be identified by the skipTo()
>being called inside the score() method at the top level.
>
>This is one of the cases in which BooleanScorer2 can be faster
>than the 1.4 BooleanScorer because the 1.4 BooleanScorer does
>not use skipTo() for the optional clauses.
>Could you try this by calling the static method
>BooleanQuery.setUseScorer14(true) and repeating the test?
>  
>

Ok, I'll be able to do this on Monday.

>
>>For those interested in profiler info, look here:
>>
>>http://www.getopt.org/lucene/20051202/
>>    
>>
>
>Thanks for making this available.
>I had a short look and noticed that the times in the call tree are cumulative.
>Would it be possible to record cpu time per method by subtracting the
>times of the called methods?
>  
>

I think so, I'll check it back on Monday.

>Another interesting statistic is the actual numbers of times the methods get
>called. The scorers used by BooleanScorer2 can use rather deep
>call trees for scoring. These method calls are not free, and I would like
>to know whether these form a bottleneck. 
>  
>

This statistics is available when I run with a high-detail profiling 
(which slows down JVM considerably, like 10x). I can collect these too, 
if it's interesting.

>>>From the hot spots output of the profiler info I see that the following methods:
>- PhrasePositions.nextPosition
>- SegmentTermDocs.read
>have a larger portion of cpu time spent in the method.
>Looking at the expanded query, seeing PhrasePositions.nextPosition
>here is not a surprise.
>
>The fact that SegmentTermDocs.read shows up might explain
>the reason why only a little heap is used:  Lucene normally leaves
>the file buffering to the operating system, and
>when the file buffers are read the index data is decompressed
>mostly by the readVInt method.
>  
>

Yes, I understand it now. But perhaps it's time to contest this 
approach: if there is so much heap available, does it still make sense 
to rely so much on OS caching, if we have the space to do the caching 
inside JVM (at least for a large portion of the index)?

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 13:49:28 2005
Return-Path: <java-user-return-17801-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80066 invoked from network); 3 Dec 2005 13:49:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 13:49:28 -0000
Received: (qmail 95426 invoked by uid 500); 3 Dec 2005 13:49:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95405 invoked by uid 500); 3 Dec 2005 13:49:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95372 invoked by uid 99); 3 Dec 2005 13:49:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 05:49:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.188] (HELO moutng.kundenserver.de) (212.227.126.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 05:50:49 -0800
Received: from [80.184.160.135] (helo=[192.168.2.2])
	by mrelayeu.kundenserver.de (node=mrelayeu5) with ESMTP (Nemesis),
	id 0ML25U-1EiXl40aJB-0008A6; Sat, 03 Dec 2005 14:48:58 +0100
Message-ID: <4391A249.10508@artentis.com>
Date: Sat, 03 Dec 2005 14:48:57 +0100
From: Gaston <gasi@artentis.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: best html parser for html documents generated by microsoft products
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:e856510009f74cf6d851f8e7132753ec
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hallo,


JTidy is a very good HTMLParser but for HTML Websites made with the help 
of Microssoft Office Products like Word for example it is not optimal. 
Because ist returns "Microsoft specific HTML Tags" instead of only text. 
Or as should I handle HTML Pages with source begins so

"

<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<link rel=File-List href="index-Dateien/filelist.xml">

"

like XML Files and using a XML -Parser instead of a HTML-Parser?


I think it should be a HTML page because of

"<meta http-equiv=Content-Type content="text/html; charset=windows-1252">"

I am glad for every kind



Greetings


Gaston



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 18:26:33 2005
Return-Path: <java-user-return-17802-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68911 invoked from network); 3 Dec 2005 18:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 18:26:32 -0000
Received: (qmail 12038 invoked by uid 500); 3 Dec 2005 18:26:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12001 invoked by uid 500); 3 Dec 2005 18:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11986 invoked by uid 99); 3 Dec 2005 18:26:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 10:26:26 -0800
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=HTML_10_20,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 10:26:25 -0800
Received: by wproxy.gmail.com with SMTP id i4so863871wra
        for <java-user@lucene.apache.org>; Sat, 03 Dec 2005 10:26:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=V9ZmZzsOlOwPHeVLOkdsR2Hr7ZYyqOdjziHLKUaftgg3dIQb+6BxBnyk+Y+zq1wDoxm9QcpAluXW6ENBfJ7+whI02FmROzD7XoXxsA6sntArXm3I9OUzZ94KIB79Y/09FGp2rgFCGnHqTNHVw/YqZ5ybuJ2i/8+tx68YSrRENiE=
Received: by 10.64.150.8 with SMTP id x8mr2100720qbd;
        Sat, 03 Dec 2005 10:26:05 -0800 (PST)
Received: by 10.65.23.13 with HTTP; Sat, 3 Dec 2005 10:26:04 -0800 (PST)
Message-ID: <50f433360512031026p33e9d1f0teefab8bf774819f5@mail.gmail.com>
Date: Sat, 3 Dec 2005 10:26:05 -0800
From: Jeff Rodenburg <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Distributed sort
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16105_22488319.1133634365014"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_16105_22488319.1133634365014
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

In one of the Google Labs whitepapers (
http://labs.google.com/papers/mapreduce-osdi04.pdf), a programming construc=
t
known as MapReduce is used in a variety of jobs/tasks within Google's
operation.  As an example of the application of MapReduce, the whitepaper
refers to Distributed Sorting.

Essentially this looks like a data storage strategy to facilitate a
distributed sort feature.  How does this approach compare to Lucene's
sorting mechanism?

------=_Part_16105_22488319.1133634365014--

From java-user-return-17803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 21:43:30 2005
Return-Path: <java-user-return-17803-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40781 invoked from network); 3 Dec 2005 21:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 21:43:29 -0000
Received: (qmail 67468 invoked by uid 500); 3 Dec 2005 21:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67254 invoked by uid 500); 3 Dec 2005 21:43:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67239 invoked by uid 99); 3 Dec 2005 21:43:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 13:43:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.36] (HELO smtp-vbr16.xs4all.nl) (194.109.24.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 13:43:21 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr16.xs4all.nl (8.13.3/8.13.3) with ESMTP id jB3Lh0vJ054679
	for <java-user@lucene.apache.org>; Sat, 3 Dec 2005 22:43:00 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
Date: Sat, 3 Dec 2005 22:42:59 +0100
User-Agent: KMail/1.5.4
References: <43903645.6000705@getopt.org> <200512022127.00278.paul.elschot@xs4all.nl> <43919910.1070007@getopt.org>
In-Reply-To: <43919910.1070007@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512032242.59982.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 03 December 2005 14:09, Andrzej Bialecki wrote:
> Paul Elschot wrote:
> 
> >In somewhat more readable layout:
> > 
> >+(url:term1^4.0 anchor:term1^2.0 content:term1
> >   title:term1^1.5  host:term1^2.0)
> >+(url:term2^4.0 anchor:term2^2.0 content:term2
> >   title:term2^1.5 host:term2^2.0)
> >url:"term1 term2"~2147483647^4.0 
> >anchor:"term1 term2"~4^2.0
> >content:"term1 term2"~2147483647
> >title:"term1 term2"~2147483647^1.5
> >host:"term1 term2"~2147483647^2.0
> >
> >The first two clauses with + prefixes are required, and I would guess
> >that the 5 way disjunctions inside these clauses take most of the cpu time
> >during search.
> >  
> >
> 
> That's an interesting observation. This suggests that it could pay off 
> to glue these fields together and change this to a query on a single 
> combined field, right? I.e. to trade off space for speed.

Yes.
Querying the host field like this in a web page index can be dangerous
business. For example when term1 is "wikipedia" and term2 is "org",
the query will match at least all pages from wikipedia.org.

> 
> >The remaining clauses will be skipped to only when the two required
> >clauses are both present, so these are probably not the problem.
> >In the call tree for scoring these can be identified by the skipTo()
> >being called inside the score() method at the top level.
> >
> >This is one of the cases in which BooleanScorer2 can be faster
> >than the 1.4 BooleanScorer because the 1.4 BooleanScorer does
> >not use skipTo() for the optional clauses.
> >Could you try this by calling the static method
> >BooleanQuery.setUseScorer14(true) and repeating the test?
> >  
> >
> 
> Ok, I'll be able to do this on Monday.
> 
> >
> >>For those interested in profiler info, look here:
> >>
> >>http://www.getopt.org/lucene/20051202/
> >>    
> >>
> >
> >Thanks for making this available.
> >I had a short look and noticed that the times in the call tree are 
cumulative.
> >Would it be possible to record cpu time per method by subtracting the
> >times of the called methods?
> >  
> >
> 
> I think so, I'll check it back on Monday.
> 
> >Another interesting statistic is the actual numbers of times the methods 
get
> >called. The scorers used by BooleanScorer2 can use rather deep
> >call trees for scoring. These method calls are not free, and I would like
> >to know whether these form a bottleneck. 
> >  
> >
> 
> This statistics is available when I run with a high-detail profiling 
> (which slows down JVM considerably, like 10x). I can collect these too, 
> if it's interesting.

One measurement at a time is more than enough for me, and the slow
down does not seem to make this a good candidate to do first.

> >>From the hot spots output of the profiler info I see that the following 
methods:
> >- PhrasePositions.nextPosition
> >- SegmentTermDocs.read
> >have a larger portion of cpu time spent in the method.
> >Looking at the expanded query, seeing PhrasePositions.nextPosition
> >here is not a surprise.
> >
> >The fact that SegmentTermDocs.read shows up might explain
> >the reason why only a little heap is used:  Lucene normally leaves
> >the file buffering to the operating system, and
> >when the file buffers are read the index data is decompressed
> >mostly by the readVInt method.
> >  
> >
> 
> Yes, I understand it now. But perhaps it's time to contest this 
> approach: if there is so much heap available, does it still make sense 
> to rely so much on OS caching, if we have the space to do the caching 
> inside JVM (at least for a large portion of the index)?

You can try and use Lucene's RAMDirectory when you have enough RAM.
However, for larger indexes, It is easier to fit the index files  in RAM
(in OS buffers) than the decompressed index data (inside the JVM).

Also, caching query results by query text is probably more effective
than caching the JVM version of the searched index data.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 03 22:48:33 2005
Return-Path: <java-user-return-17804-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76198 invoked from network); 3 Dec 2005 22:48:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Dec 2005 22:48:33 -0000
Received: (qmail 98748 invoked by uid 500); 3 Dec 2005 22:48:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98703 invoked by uid 500); 3 Dec 2005 22:48:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98692 invoked by uid 99); 3 Dec 2005 22:48:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 14:48:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 14:48:24 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BBB7113E2006; Sat,  3 Dec 2005 17:48:01 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 5CD1B13E2005
	for <java-user@lucene.apache.org>; Sat,  3 Dec 2005 17:47:54 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <50f433360512031026p33e9d1f0teefab8bf774819f5@mail.gmail.com>
References: <50f433360512031026p33e9d1f0teefab8bf774819f5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F33E4D00-64D3-49B2-8283-1242B84D5822@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Distributed sort
Date: Sat, 3 Dec 2005 17:47:47 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 3, 2005, at 1:26 PM, Jeff Rodenburg wrote:

> In one of the Google Labs whitepapers (
> http://labs.google.com/papers/mapreduce-osdi04.pdf), a programming  
> construct
> known as MapReduce is used in a variety of jobs/tasks within Google's
> operation.  As an example of the application of MapReduce, the  
> whitepaper
> refers to Distributed Sorting.
>
> Essentially this looks like a data storage strategy to facilitate a
> distributed sort feature.  How does this approach compare to Lucene's
> sorting mechanism?

Look to Nutch to see how MapReduce is being implemented around Lucene  
(but useful in other ways than Lucene also).

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 04 00:22:50 2005
Return-Path: <java-user-return-17805-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11531 invoked from network); 4 Dec 2005 00:22:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Dec 2005 00:22:50 -0000
Received: (qmail 78512 invoked by uid 500); 4 Dec 2005 00:22:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78491 invoked by uid 500); 4 Dec 2005 00:22:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78480 invoked by uid 99); 4 Dec 2005 00:22:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 16:22:44 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mark_benussi@hotmail.com designates 65.54.162.77 as permitted sender)
Received: from [65.54.162.77] (HELO hotmail.com) (65.54.162.77)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 03 Dec 2005 16:22:43 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sat, 3 Dec 2005 16:22:23 -0800
Message-ID: <BAY108-DAV5B3C153135CB31E1E6487F04E0@phx.gbl>
Received: from 86.131.69.35 by BAY108-DAV5.phx.gbl with DAV;
	Sun, 04 Dec 2005 00:22:23 +0000
X-Originating-IP: [86.131.69.35]
X-Originating-Email: [mark_benussi@hotmail.com]
X-Sender: mark_benussi@hotmail.com
From: "Mark Benussi" <mark_benussi@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: best html parser for html documents generated by microsoft products
Date: Sun, 4 Dec 2005 00:22:09 -0000
Message-ID: <000701c5f868$c3bedd40$0201a8c0@episys.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
Thread-Index: AcX4EF39Nj4csErgQ76EngvptHUdxQAWEYig
In-Reply-To: <4391A249.10508@artentis.com>
X-OriginalArrivalTime: 04 Dec 2005 00:22:23.0438 (UTC) FILETIME=[CC189EE0:01C5F868]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I use JTidy also, but not for Lucene parsing. There is no easy way of
handling this, you simply have to remove all crappy Microsoft inserts as
they come.

-----Original Message-----
From: Gaston [mailto:gasi@artentis.com] 
Sent: 03 December 2005 13:49
To: java-user@lucene.apache.org
Subject: best html parser for html documents generated by microsoft products

Hallo,


JTidy is a very good HTMLParser but for HTML Websites made with the help 
of Microssoft Office Products like Word for example it is not optimal. 
Because ist returns "Microsoft specific HTML Tags" instead of only text. 
Or as should I handle HTML Pages with source begins so

"

<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:dt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<link rel=File-List href="index-Dateien/filelist.xml">

"

like XML Files and using a XML -Parser instead of a HTML-Parser?


I think it should be a HTML page because of

"<meta http-equiv=Content-Type content="text/html; charset=windows-1252">"

I am glad for every kind



Greetings


Gaston



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 04 22:05:11 2005
Return-Path: <java-user-return-17806-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8471 invoked from network); 4 Dec 2005 22:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Dec 2005 22:05:11 -0000
Received: (qmail 96525 invoked by uid 500); 4 Dec 2005 22:05:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96493 invoked by uid 500); 4 Dec 2005 22:05:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96466 invoked by uid 99); 4 Dec 2005 22:05:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Dec 2005 14:05:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO zproxy.gmail.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Dec 2005 14:05:05 -0800
Received: by zproxy.gmail.com with SMTP id z31so922743nzd
        for <java-user@lucene.apache.org>; Sun, 04 Dec 2005 14:04:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=raZqMacX1Vwa/NTFEzXvhi2z7/CIrq49oihrqIfc5PH1ig4SmPHoCMg44dUGUOpx0FsVjltDB1T7BPnuE3CRe2R1iqedEao77puddsE+hc5qEMx9D8MSkDWwPp41WfHXsAHA4uNSDL+o0E0wMbccft4GrH7HfABcS+wsuzyIBOI=
Received: by 10.64.183.2 with SMTP id g2mr2366775qbf;
        Sun, 04 Dec 2005 14:04:44 -0800 (PST)
Received: by 10.65.23.13 with HTTP; Sun, 4 Dec 2005 14:04:44 -0800 (PST)
Message-ID: <50f433360512041404x5a9a182eu384b39245ef72de2@mail.gmail.com>
Date: Sun, 4 Dec 2005 14:04:44 -0800
From: Jeff Rodenburg <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Distributed sort
In-Reply-To: <F33E4D00-64D3-49B2-8283-1242B84D5822@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26938_25201440.1133733884735"
References: <50f433360512031026p33e9d1f0teefab8bf774819f5@mail.gmail.com>
	 <F33E4D00-64D3-49B2-8283-1242B84D5822@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_26938_25201440.1133733884735
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

thanks Erik

On 12/3/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Dec 3, 2005, at 1:26 PM, Jeff Rodenburg wrote:
>
> > In one of the Google Labs whitepapers (
> > http://labs.google.com/papers/mapreduce-osdi04.pdf), a programming
> > construct
> > known as MapReduce is used in a variety of jobs/tasks within Google's
> > operation.  As an example of the application of MapReduce, the
> > whitepaper
> > refers to Distributed Sorting.
> >
> > Essentially this looks like a data storage strategy to facilitate a
> > distributed sort feature.  How does this approach compare to Lucene's
> > sorting mechanism?
>
> Look to Nutch to see how MapReduce is being implemented around Lucene
> (but useful in other ways than Lucene also).
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_26938_25201440.1133733884735--

From java-user-return-17807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 06:30:06 2005
Return-Path: <java-user-return-17807-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61462 invoked from network); 5 Dec 2005 06:30:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 06:30:05 -0000
Received: (qmail 6765 invoked by uid 500); 5 Dec 2005 06:29:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6433 invoked by uid 500); 5 Dec 2005 06:29:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6419 invoked by uid 99); 5 Dec 2005 06:29:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Dec 2005 22:29:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 04 Dec 2005 22:29:56 -0800
Received: (qmail 19883 invoked by uid 3001); 5 Dec 2005 07:29:34 +0100
Received: from 82.144.201.6 by p15105029 (envelope-from <max@osua.de>, uid 89) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.87.1/1203. spamassassin: 3.1.0. perlscan: 1.25-st-qms.  
 Clear:RC:0(82.144.201.6):SA:0(3.6/6.5):. 
 Processed in 1.549379 secs); 05 Dec 2005 06:29:34 -0000
X-Spam-Level: +++
X-Spam-Report: SA TESTS
  0.1 FORGED_RCVD_HELO       Received: contains a forged HELO
  3.2 BAYES_99               BODY: Bayesian spam probability is 99 to 100%
                             [score: 1.0000]
  0.3 AWL                    AWL: From: address is in the auto white-list
X-Qmail-Scanner-Mail-From: max@osua.de via p15105029
X-Qmail-Scanner: 1.25-st-qms (Clear:RC:0(82.144.201.6):SA:0(3.6/6.5):. Processed in 1.549379 secs Process 19872)
Received: from ip.82.144.201.6.stat-3.volia.net (HELO max.osuatech.local) (max%osua.de@82.144.201.6)
  by p15105029.pureserver.info with SMTP; 5 Dec 2005 07:29:32 +0100
Date: Mon, 5 Dec 2005 08:31:57 +0200
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <1391607236843.20051205083157@osua.de>
To: Paul Elschot <java-user@lucene.apache.org>
Subject: Re[2]: Does order of BooleanQuery clauses affect search performance?
In-Reply-To: <200508262040.44974.paul.elschot@xs4all.nl>
References:
 <OFACB54F66.172A5E94-ON80257069.0056E746-80257069.0057895E@SAAConsultants.com>
 <200508262040.44974.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=3.6 required=6.5
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Paul,

Friday, August 26, 2005, 8:40:44 PM, you wrote:

PE> On Friday 26 August 2005 17:58, Paul.Illingworth@saaconsultants.com wrote:
>> 
>> A simple question and I guess it may have been asked before.
>> 
>> Does the order of Querys in a BooleanQuery affect search speed? By this I
>> mean if the first clause of a BooleanQuery only returns a few results and
>> the second clause returns lots of results and the two are ANDed is this
>> faster than the other way around? Similarly, does searching stop if no

PE> Subqueries of BooleanQuery are called clauses in Lucene.
PE> The order of clauses does not matter.
PE> Having only required clauses does matter, normally a lot.

>> results are found and the logical operations would mean no results can be
>> found (similar to Javas "short circuiting" of logical operations)?

PE> The development version tries to do as much "short circuiting" as possible.
PE> Lucene 1.4.3 neither short circuits for "or" (optional clauses)
PE> nor for "not" (prohibited clauses).
PE> Both do short circuiting for "and" (required clauses).

PE> Regards,
PE> Paul Elschot


PE> ---------------------------------------------------------------------
PE> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
PE> For additional commands, e-mail: java-user-help@lucene.apache.org




-- 
Best regards,
 Maxim                            mailto:max@osua.de


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 06:43:29 2005
Return-Path: <java-user-return-17808-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97411 invoked from network); 5 Dec 2005 06:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 06:39:50 -0000
Received: (qmail 37695 invoked by uid 500); 5 Dec 2005 06:35:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20221 invoked by uid 500); 5 Dec 2005 06:32:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18996 invoked by uid 99); 5 Dec 2005 06:32:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 04 Dec 2005 22:32:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 04 Dec 2005 22:31:43 -0800
Received: (qmail 20064 invoked by uid 3001); 5 Dec 2005 07:31:21 +0100
Received: from 82.144.201.6 by p15105029 (envelope-from <max@osua.de>, uid 89) with qmail-scanner-1.25-st-qms 
 (clamdscan: 0.87.1/1203. spamassassin: 3.1.0. perlscan: 1.25-st-qms.  
 Clear:RC:0(82.144.201.6):SA:0(3.6/6.5):. 
 Processed in 2.376514 secs); 05 Dec 2005 06:31:21 -0000
X-Spam-Level: +++
X-Spam-Report: SA TESTS
  0.1 FORGED_RCVD_HELO       Received: contains a forged HELO
  3.2 BAYES_99               BODY: Bayesian spam probability is 99 to 100%
                             [score: 1.0000]
  0.3 AWL                    AWL: From: address is in the auto white-list
X-Qmail-Scanner-Mail-From: max@osua.de via p15105029
X-Qmail-Scanner: 1.25-st-qms (Clear:RC:0(82.144.201.6):SA:0(3.6/6.5):. Processed in 2.376514 secs Process 20054)
Received: from ip.82.144.201.6.stat-3.volia.net (HELO max.osuatech.local) (max%osua.de@82.144.201.6)
  by p15105029.pureserver.info with SMTP; 5 Dec 2005 07:31:19 +0100
Date: Mon, 5 Dec 2005 08:33:17 +0200
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <341607317500.20051205083317@osua.de>
To: Paul Elschot <java-user@lucene.apache.org>
Subject: Re[2]: Does order of BooleanQuery clauses affect search performance?
In-Reply-To: <200508262040.44974.paul.elschot@xs4all.nl>
References:
 <OFACB54F66.172A5E94-ON80257069.0056E746-80257069.0057895E@SAAConsultants.com>
 <200508262040.44974.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=3.6 required=6.5
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Paul,

Friday, August 26, 2005, 8:40:44 PM, you wrote:

PE> On Friday 26 August 2005 17:58, Paul.Illingworth@saaconsultants.com wrote:
>> 
>> A simple question and I guess it may have been asked before.
>> 
>> Does the order of Querys in a BooleanQuery affect search speed? By this I
>> mean if the first clause of a BooleanQuery only returns a few results and
>> the second clause returns lots of results and the two are ANDed is this
>> faster than the other way around? Similarly, does searching stop if no

PE> Subqueries of BooleanQuery are called clauses in Lucene.
PE> The order of clauses does not matter.
PE> Having only required clauses does matter, normally a lot.

>> results are found and the logical operations would mean no results can be
>> found (similar to Javas "short circuiting" of logical operations)?

PE> The development version tries to do as much "short circuiting" as possible.
PE> Lucene 1.4.3 neither short circuits for "or" (optional clauses)
PE> nor for "not" (prohibited clauses).
PE> Both do short circuiting for "and" (required clauses).

PE> Regards,
PE> Paul Elschot


PE> ---------------------------------------------------------------------
PE> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
PE> For additional commands, e-mail: java-user-help@lucene.apache.org




-- 
Best regards,
 Maxim                            mailto:max@osua.de


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 11:30:57 2005
Return-Path: <java-user-return-17809-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94205 invoked from network); 5 Dec 2005 11:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 11:30:49 -0000
Received: (qmail 35144 invoked by uid 500); 5 Dec 2005 11:30:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34906 invoked by uid 500); 5 Dec 2005 11:30:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34895 invoked by uid 99); 5 Dec 2005 11:30:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 03:30:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 03:30:32 -0800
Received: from [61.12.8.66] (helo=[192.168.1.180])
	by mrelay.perfora.net (node=mrelayus1) with ESMTP (Nemesis),
	id 0MKp2t-1EjEXo1LBT-0004EO; Mon, 05 Dec 2005 06:30:11 -0500
Message-ID: <4394244D.8080001@insideview.com>
Date: Mon, 05 Dec 2005 16:58:13 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: how to control terms to be highlighted?
References: <20051130134215.4460.qmail@web26008.mail.ukl.yahoo.com> <438E8559.2080308@insideview.com> <Pine.LNX.4.58.0511302257040.29242@hal.rescomp.berkeley.edu> <439010F9.7080307@insideview.com>
In-Reply-To: <439010F9.7080307@insideview.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I was able to use the Highlighter API to extract the text where the 
keywords occur.  However I am facing another related problem. My 
application downloads the news items to the local server. The indexer 
api parses these HTML files and extracts the content and stores it in 
the index. The parser extracts all the text in the html page including 
title, headings etc. So when the highlighter is run on this content, 
instead of highlighting the keywords in the main content, it just shows 
the title or words found in the beginning of the page.

For example for the article in the link:  
http://biz.yahoo.com/rb/051130/apple.html , the highlighted text is 
something like below:
/Options Order Book Symbol Lookup Reuters Apple may launch Intel 
laptops: analyst Wednesday November 30, 10:24 am ET NEW

/My requirement is to extract the best fragment/sentence from the news 
article where the keywords appear(similar to google) and display below 
the search result. But, the above text extracted is not really the best 
fragment, it seems to be the first fragment which has the keywords.  Has 
someone implemented this kind of functionality?

-Harini



Harini Raghavan wrote:

> Hi Chris,
>
> Can we pass a different query object for searching and a different one 
> to the highlighter? I am not sure of that.
> In any case,  based on Mark's suggestion I modified the 
> QueryTermsExtractor class and filtered the query  terms by the fieldName.
> Attached is the modified file.
>
> Thanks,
> Harini
>
>
>
> Chris Hostetter wrote:
>
>> I don't know what your application is, and I have no experience with the
>> Highlighter code, so forgive me if this is a silly suggestion:
>>
>> It looks like you are building a query up programaticaly, which
>> contains some words to search on, and some other stuff that's mainly
>> being used to "filter" the results (i'll avoid my usual rant about
>> people underutilizing Filters).  So why not pass the Higherlighter just
>> the portion of the Query that you acctaully want to contribute to the
>> highlighting?  In this query...
>>
>> : >> +DocumentType:news
>> : >> +(CompanyId:10 CompanyId:20 CompanyId:30 CompanyId:40)
>> : >> +FilingDate:[20041201 TO 20051201]
>> : >> +(Content:"cost saving" Content:"cost savings"
>> : >>Content:outsource
>> : >>Content:outsources Content:downsize
>> : >>Content:downsizes
>> : >>Content:restructuring Content:restructure)
>>
>> ...just give the highlighter...
>>
>>    (Content:"cost saving" Content:"cost savings"
>>     Content:outsource
>>     Content:outsources Content:downsize
>>     Content:downsizes
>>     Content:restructuring Content:restructure)
>>
>>
>> : Date: Thu, 01 Dec 2005 10:38:41 +0530
>> : From: Harini Raghavan <harini.raghavan@insideview.com>
>> : Reply-To: java-user@lucene.apache.org
>> : To: java-user@lucene.apache.org
>> : Subject: Re: how to control terms to be highlighted?
>> :
>> : Hi Mark,
>> :
>> : It would be great if you can make this change and send the
>> : QueryTermsExtractor class. I am invoking the QueryScorer(Query)
>> : contructor. Should I use QueryScorer(Query query, IndexReader reader,
>> : String fieldName) instead for this to work?
>> :
>> : Thanks,
>> : Harini
>> :
>> : mark harwood wrote:
>> :
>> : >>>>Is there anyway to restrict the highlighter to
>> : >>>>
>> : >>>>
>> : >>highlight only the values
>> : >>mentioned for the field 'Content'?
>> : >>
>> : >>
>> : >
>> : >The problem lies in the QueryTermsExtractor class
>> : >which is typically used to provide the Highlighter
>> : >with the list of strings to identify in the text. It
>> : >currently has no filter for fieldname - you could add
>> : >this without too much effort.
>> : >
>> : >I could make this modification but it may change the
>> : >behaviour of existing applications - currently the
>> : >QueryTermsExtractor method that takes a fieldname only
>> : >uses that fieldname to derive IDF weightings, the
>> : >proposed change would also have the effect of
>> : >filtering out any query terms that weren't for this
>> : >field.
>> : >Would this change be a problem for anyone?
>> : >
>> : >Cheers,
>> : >Mark
>> : >
>> : >--- Harini Raghavan <harini.raghavan@insideview.com>
>> : >wrote:
>> : >
>> : >
>> : >
>> : >>Hi,
>> : >>
>> : >>I have a requirement to highlight search keywords in
>> : >>the results and
>> : >>display the matching fragment of the text with the
>> : >>results. I am using
>> : >>the Hits highlighting mentioned in Lucene in Action.
>> : >>
>> : >>Here is the search query(BooleanQuery) I am passing
>> : >>to the IndexSearcher
>> : >>and QueryScorer:
>> : >> +DocumentType:news
>> : >> +(CompanyId:10 CompanyId:20 CompanyId:30
>> : >>CompanyId:40)
>> : >> +FilingDate:[20041201 TO 20051201]
>> : >> +(Content:"cost saving" Content:"cost savings"
>> : >>Content:outsource
>> : >>Content:outsources Content:downsize
>> : >>Content:downsizes
>> : >>Content:restructuring Content:restructure)
>> : >>
>> : >>My requirement is to highlight only the keywords for
>> : >>'Content' field,
>> : >>but the highlighter api is also highlighting words
>> : >>like 'news', '10',
>> : >>'40' etc.
>> : >>Is there anyway to restrict the highlighter to
>> : >>highlight only the values
>> : >>mentioned for the field 'Content'?
>> : >>
>> : >>Thanks,
>> : >>Harini
>> : >>
>> : >>
>> : >>
>> : >>
>> : >>
>> : >>
>> : >>
>> : >>
>> : >---------------------------------------------------------------------
>> : >
>> : >
>> : >>To unsubscribe, e-mail:
>> : >>java-user-unsubscribe@lucene.apache.org
>> : >>For additional commands, e-mail:
>> : >>java-user-help@lucene.apache.org
>> : >>
>> : >>
>> : >>
>> : >>
>> : >
>> : >
>> : >
>> : >
>> : >___________________________________________________________
>> : >Yahoo! Model Search 2005 - Find the next catwalk superstars - 
>> http://uk.news.yahoo.com/hot/model-search/
>> : >
>> : >---------------------------------------------------------------------
>> : >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : >For additional commands, e-mail: java-user-help@lucene.apache.org
>> : >
>> : >
>> : >
>> : >
>> :
>> :
>> : ---------------------------------------------------------------------
>> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : For additional commands, e-mail: java-user-help@lucene.apache.org
>> :
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>  
>>
>------------------------------------------------------------------------
>
>package org.apache.lucene.search.highlight;
>/**
> * Copyright 2002-2004 The Apache Software Foundation
> *
> * Licensed under the Apache License, Version 2.0 (the "License");
> * you may not use this file except in compliance with the License.
> * You may obtain a copy of the License at
> *
> *     http://www.apache.org/licenses/LICENSE-2.0
> *
> * Unless required by applicable law or agreed to in writing, software
> * distributed under the License is distributed on an "AS IS" BASIS,
> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> * See the License for the specific language governing permissions and
> * limitations under the License.
> */
>
>import java.io.IOException;
>import java.util.Collection;
>import java.util.HashSet;
>import java.util.Iterator;
>
>import org.apache.lucene.index.IndexReader;
>import org.apache.lucene.index.Term;
>import org.apache.lucene.search.BooleanClause;
>import org.apache.lucene.search.BooleanQuery;
>import org.apache.lucene.search.PhraseQuery;
>import org.apache.lucene.search.Query;
>import org.apache.lucene.search.TermQuery;
>import org.apache.lucene.search.spans.SpanNearQuery;
>
>/**
> * Utility class used to extract the terms used in a query, plus any weights.
> * This class will not find terms for MultiTermQuery, RangeQuery and PrefixQuery classes
> * so the caller must pass a rewritten query (see Query.rewrite) to obtain a list of
> * expanded terms.
> *
> */
>public final class QueryTermExtractor
>{
>
>	/**
>	 * Extracts all terms texts of a given Query into an array of WeightedTerms
>	 *
>	 * @param query      Query to extract term texts from
>	 * @return an array of the terms used in a query, plus their weights.
>	 */
>	public static final WeightedTerm[] getTerms(Query query)
>	{
>		return getTerms(query,false,"");
>	}
>
>	/**
>	 * Extracts all terms texts of a given Query into an array of WeightedTerms
>	 *
>	 * @param query      Query to extract term texts from
>	 * @param reader used to compute IDF which can be used to a) score selected fragments better
>	 * b) use graded highlights eg chaning intensity of font color
>	 * @param fieldName the field on which Inverse Document Frequency (IDF) calculations are based
>	 * @return an array of the terms used in a query, plus their weights.
>	 */
>	public static final WeightedTerm[] getIdfWeightedTerms(Query query, IndexReader reader, String fieldName)
>	{
>	    WeightedTerm[] terms=getTerms(query,false,fieldName);
>	    int totalNumDocs=reader.numDocs();
>	    for (int i = 0; i < terms.length; i++)
>        {
>	        try
>            {
>                int docFreq=reader.docFreq(new Term(fieldName,terms[i].term));
>                //IDF algorithm taken from DefaultSimilarity class
>                float idf=(float)(Math.log((float)totalNumDocs/(double)(docFreq+1)) + 1.0);
>                terms[i].weight*=idf;
>            }
>	        catch (IOException e)
>            {
>	            //ignore
>            }
>        }
>		return terms;
>	}
>
>	/**
>	 * Extracts all terms texts of a given Query into an array of WeightedTerms
>	 *
>	 * @param query      Query to extract term texts from
>	 * @param prohibited <code>true</code> to extract "prohibited" terms, too
>   * @return an array of the terms used in a query, plus their weights.
>   */
>	public static final WeightedTerm[] getTerms(Query query, boolean prohibited, String fieldName)
>	{
>		HashSet terms=new HashSet();
>		getTerms(query,terms,prohibited,fieldName);
>		return (WeightedTerm[]) terms.toArray(new WeightedTerm[0]);
>	}
>
>	private static final void getTerms(Query query, HashSet terms,boolean prohibited, String fieldName)
>	{
>		if (query instanceof BooleanQuery)
>			getTermsFromBooleanQuery((BooleanQuery) query, terms, prohibited, fieldName);
>		else
>			if (query instanceof PhraseQuery)
>				getTermsFromPhraseQuery((PhraseQuery) query, terms, fieldName);
>			else
>				if (query instanceof TermQuery)
>					getTermsFromTermQuery((TermQuery) query, terms, fieldName);
>				else
>		        if(query instanceof SpanNearQuery)
>		            getTermsFromSpanNearQuery((SpanNearQuery) query, terms, fieldName);
>	}
>
>	private static final void getTermsFromBooleanQuery(BooleanQuery query, HashSet terms, boolean prohibited, String fieldName)
>	{
>		BooleanClause[] queryClauses = query.getClauses();
>		int i;
>
>		for (i = 0; i < queryClauses.length; i++)
>		{
>			if (prohibited || !queryClauses[i].prohibited)
>				getTerms(queryClauses[i].query, terms, prohibited, fieldName);
>		}
>	}
>
>	private static final void getTermsFromPhraseQuery(PhraseQuery query, HashSet terms, String fieldName)
>	{
>		Term[] queryTerms = query.getTerms();
>		int i;
>		String field;
>
>		for (i = 0; i < queryTerms.length; i++)
>		{
>			if(fieldName.equals(""))
>				terms.add(new WeightedTerm(query.getBoost(),queryTerms[i].text()));
>			else {
>				field = queryTerms[i].field();
>				if(field.equals(fieldName))
>					terms.add(new WeightedTerm(query.getBoost(),queryTerms[i].text()));
>			}
>		}
>	}
>
>	private static final void getTermsFromTermQuery(TermQuery query, HashSet terms, String fieldName)
>	{
>		String field = query.getTerm().field();
>		if(fieldName.equals(""))
>			terms.add(new WeightedTerm(query.getBoost(),query.getTerm().text()));
>		else if(field.equals(fieldName)) {
>			terms.add(new WeightedTerm(query.getBoost(),query.getTerm().text()));
>		}
>	}
>
>    private static final void getTermsFromSpanNearQuery(SpanNearQuery query, HashSet terms, String fieldName){
>
>        Collection queryTerms = query.getTerms();
>
>        for(Iterator iterator = queryTerms.iterator(); iterator.hasNext();){
>
>            // break it out for debugging.
>
>            Term term = (Term) iterator.next();
>
>            String text = term.text();
>
>			String field = term.field();
>
>			if(fieldName.equals(""))
>				terms.add(new WeightedTerm(query.getBoost(), text));
>			else if(field.equals(fieldName)) {
>        	    terms.add(new WeightedTerm(query.getBoost(), text));
>			}
>
>        }
>
>    }
>
>}
>
>
>  
>
>------------------------------------------------------------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 12:35:54 2005
Return-Path: <java-user-return-17810-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26258 invoked from network); 5 Dec 2005 12:35:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 12:35:50 -0000
Received: (qmail 66379 invoked by uid 500); 5 Dec 2005 12:35:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66360 invoked by uid 500); 5 Dec 2005 12:35:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66349 invoked by uid 99); 5 Dec 2005 12:35:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 04:35:41 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.146.177.37] (HELO web26015.mail.ukl.yahoo.com) (217.146.177.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 05 Dec 2005 04:35:41 -0800
Received: (qmail 23157 invoked by uid 60001); 5 Dec 2005 12:35:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=FVDxljW1zggubhfHfDXN3N0cK9hxDG+40fgBklNKkHjOd03WhsC2tI4xsrBp39FdFVJ4tu6pVjrF3Q2J8ak3p7zcrRGT8Y5OF5jycSGRMKrpJKcR09pyOb1c7HfBMfSMasViGovlQGGQhqQg45INPb+HFLRJ2IYldCxR1l0sMKc=  ;
Message-ID: <20051205123519.23155.qmail@web26015.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26015.mail.ukl.yahoo.com via HTTP; Mon, 05 Dec 2005 12:35:19 GMT
Date: Mon, 5 Dec 2005 12:35:19 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: how to control terms to be highlighted?
To: java-user@lucene.apache.org
In-Reply-To: <4394244D.8080001@insideview.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Looks like you may need to do more intelligent parsing
of the source document.

In the specific example you gave the text comes from a
drop-down combo in a form unrelated to the article
text I imagine you are interested in. There is a lot
of other "guff" around the edges to do with related
news stories I see as hard to remove too without
special knowledge of that page structure.

All assuming of course this doesn't violate the Yahoo
TOS.




		
___________________________________________________________ 
To help you stay safe and secure online, we've developed the all new Yahoo! Security Centre. http://uk.security.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 13:21:27 2005
Return-Path: <java-user-return-17811-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51333 invoked from network); 5 Dec 2005 13:21:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 13:21:26 -0000
Received: (qmail 71768 invoked by uid 500); 5 Dec 2005 13:21:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71446 invoked by uid 500); 5 Dec 2005 13:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71387 invoked by uid 99); 5 Dec 2005 13:21:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 05:21:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.115.132.21] (HELO mx2.compuware.com) (63.115.132.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 05:21:10 -0800
Received: from bh1.compuware.com (unknown [10.10.1.31])
	by mx2.compuware.com (Postfix) with ESMTP id 9AA302C0452
	for <java-user@lucene.apache.org>; Mon,  5 Dec 2005 08:20:46 -0500 (EST)
Received: by compuware.com with Internet Mail Service (5.5.2657.72)
	id <YH7L7KHP>; Mon, 5 Dec 2005 08:20:45 -0500
Message-ID: <41C33488FEC67C43BC564F5F086C21FF012BAFD4@nasa-dtw-ex001.nasa.cpwr.corp>
From: "Combs, Craig" <Craig.Combs@compuware.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Why are tokens not being indexed?
Date: Mon, 5 Dec 2005 08:20:12 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


This is very mysterious

I have check my parser and I'm returned body:<token>.  My analyzer =
during
indexing returns <token> in the token stream.  But when I perform my =
search
no results are found.

Is there a way I can see what tokens are actually written by the index
writer of lucene?

My analyzer returns the tokens and my queryparser returns the tokens so =
I'm
not sure why "SOME" tokens are not being found in the index.  These are
tokens in the middle of a token stream so it's not like they are at the =
end
or beginning, and I have not found a pattern to them yet.

Any help would be much appreciated.

-Craig

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Wednesday, November 30, 2005 3:41 PM
To: java-user@lucene.apache.org
Subject: Re: Why are tokens not being indexed?


On 30 Nov 2005, at 10:53, Combs, Craig wrote:
> I wrote my own analyzer:  When I view the tokens returned from the
> StemFilter the words I'm searching for are returned from the "Token =20
> Next()"
> function.  My terms are under 10,000. I have used luke before how =20
> can I make
> it use a custom analyzer?  Thank you for the information.
>
> .... <general code and default stop words> ....
> 	public final TokenStream tokenStream(String fieldName, Reader
> reader) {
> 		TokenStream result =3D new StandardTokenizer( reader );
> 		result =3D new LowerCaseFilter( result );
> 		result =3D new StopFilter( result, stoptable );
> 		result =3D new ISOLatin1AccentFilter( result );
> 		result =3D new ItalianStemFilter( result, excltable );
> 		return result;
> 	}
> }
>

If the tokens you're searching for are returned from your analyzer, =20
then they will be searchable.  If you're using QueryParser for =20
searching, then you need to be sure your Query is being constructed =20
as you'd like.

To get Luke to use a custom Analyzer, it should have a no-arg =20
constructor, and be put in the classpath that you launch Luke from =20
and it should appear in the list.

Hope this helps.

	Erik



>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, November 30, 2005 8:47 AM
> To: java-user@lucene.apache.org
> Subject: Re: Why are tokens not being indexed?
>
> What Analyzer are you using?   Have a look at the Analyzer demo with
> Lucene in Action's code, or from my java.net article so you can
> analyze your analyzer.  Also try out Luke, it really is handy for
> seeing inside your index.
>
> And is your text really long (> 10,000 terms)?   If so, you'll need
> to set the max. field length higher on IndexWriter (I always use
> Integer.MAX_VALUE).
>
> 	Erik
>
>
>
> On 30 Nov 2005, at 08:04, Combs, Craig wrote:
>
>> I have a body of text which is being added to a document as
>> unstored.  All
>> the words in the body text are coming through in the token stream =
for
>> analyzing.  For some reason I can search on some of tokens and
>> others I can
>> not.
>>
>> Take the following string:
>>
>> "L'amministrazione di Uniface View consente un elevato grado di
>> flessibilit=E0
>> e pu=F2 essere realizzata in base ai requisiti del proprio sito. Nel
>> manuale
>> Guida all'amministrazione di Uniface View  vengono descritte le
>> procedure di
>> amministrazione del sistema. Utilizzare le informazioni riportate
>> di seguito
>> per creare il portale pi=F9 adatto alle proprie esigenze."
>>
>> If I search for "consente" or "elevato" no results are found.  If I
>> search
>> for "view" or "grado" results are found.  I find an explanation for
>> this
>> behavior.  These tokens are being returned to the reader but don't
>> seem to
>> be making it into the index.
>>
>> Any ideas on how to debugs or an explanation why this might be
>> happening?
>>
>> Regards,
>> Craig Combs
>>
>>
>>
>>
>> The contents of this e-mail are intended for the named addressee
>> only. It
>> contains information that may be confidential. Unless you are the
>> named
>> addressee or an authorized designee, you may not copy or use it, or
>> disclose
>> it to anyone else. If you received it in error please notify us
>> immediately
>> and then destroy it.
>>
>>
>> =
---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> The contents of this e-mail are intended for the named addressee =20
> only. It
> contains information that may be confidential. Unless you are the =20
> named
> addressee or an authorized designee, you may not copy or use it, or =20
> disclose
> it to anyone else. If you received it in error please notify us =20
> immediately
> and then destroy it.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



The contents of this e-mail are intended for the named addressee only. =
It
contains information that may be confidential. Unless you are the named
addressee or an authorized designee, you may not copy or use it, or =
disclose
it to anyone else. If you received it in error please notify us =
immediately
and then destroy it.=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 17:24:39 2005
Return-Path: <java-user-return-17812-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40587 invoked from network); 5 Dec 2005 17:24:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 17:24:38 -0000
Received: (qmail 24528 invoked by uid 500); 5 Dec 2005 17:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24263 invoked by uid 500); 5 Dec 2005 17:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24252 invoked by uid 99); 5 Dec 2005 17:24:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 09:24:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 09:24:29 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 45CB113E2006; Mon,  5 Dec 2005 12:24:05 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 60EE613E2005
	for <java-user@lucene.apache.org>; Mon,  5 Dec 2005 12:23:43 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <41C33488FEC67C43BC564F5F086C21FF012BAFD4@nasa-dtw-ex001.nasa.cpwr.corp>
References: <41C33488FEC67C43BC564F5F086C21FF012BAFD4@nasa-dtw-ex001.nasa.cpwr.corp>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <39ACD061-6C24-4DE1-8456-6CCA79855F24@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Why are tokens not being indexed?
Date: Mon, 5 Dec 2005 12:23:26 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 5, 2005, at 8:20 AM, Combs, Craig wrote:
> This is very mysterious
>
> I have check my parser and I'm returned body:<token>.  My analyzer  
> during
> indexing returns <token> in the token stream.  But when I perform  
> my search
> no results are found.
>
> Is there a way I can see what tokens are actually written by the index
> writer of lucene?

My java.net article and the (free) code from lucenebook.com has an  
analyzer demo that will show what comes out of the analyzer, but  
sounds like you've already troubleshot that aspect.

Luke (google for "luke lucene") will let you see what got indexed - I  
recommend trying that out.

> My analyzer returns the tokens and my queryparser returns the  
> tokens so I'm
> not sure why "SOME" tokens are not being found in the index.  These  
> are
> tokens in the middle of a token stream so it's not like they are at  
> the end
> or beginning, and I have not found a pattern to them yet.

Are you searching with QueryParser?   If you look at the generated  
Query.toString() does it match what you indexed?   If not, try a  
simple TermQuery for what gets returned from your analyzer and see if  
that works.  If not, Lucene is broken :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 17:40:03 2005
Return-Path: <java-user-return-17813-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48578 invoked from network); 5 Dec 2005 17:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 17:39:55 -0000
Received: (qmail 69081 invoked by uid 500); 5 Dec 2005 17:39:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69059 invoked by uid 500); 5 Dec 2005 17:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69035 invoked by uid 99); 5 Dec 2005 17:39:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 09:39:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.115.132.21] (HELO mx2.compuware.com) (63.115.132.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 09:39:47 -0800
Received: from bh1.compuware.com (unknown [10.10.1.31])
	by mx2.compuware.com (Postfix) with ESMTP id 5CF802C06E1
	for <java-user@lucene.apache.org>; Mon,  5 Dec 2005 12:39:26 -0500 (EST)
Received: by compuware.com with Internet Mail Service (5.5.2657.72)
	id <YH7L81RC>; Mon, 5 Dec 2005 12:39:25 -0500
Message-ID: <41C33488FEC67C43BC564F5F086C21FF012BAFD7@nasa-dtw-ex001.nasa.cpwr.corp>
From: "Combs, Craig" <Craig.Combs@compuware.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Why are tokens not being indexed?
Date: Mon, 5 Dec 2005 12:39:02 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm able to see the documents that were indexed but not the tokens
associated with the document in Luke.

I'm using the multifield query parser and I did do the query.toString and
the tokens returned by the query parser matched the tokens returned from the
analyzer.  Some how I need to see which tokens are associated with what
documents in the Lucene index database.

I'm not sure Luke can do this.  I don't need to know which documents were
indexed but I need to know what tokens are actually indexed in lucene.  What
is the best way to look into an index that Lucene has created and what
tokens are associated with that given index.

-Craig

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Monday, December 05, 2005 12:23 PM
To: java-user@lucene.apache.org
Subject: Re: Why are tokens not being indexed?


On Dec 5, 2005, at 8:20 AM, Combs, Craig wrote:
> This is very mysterious
>
> I have check my parser and I'm returned body:<token>.  My analyzer  
> during
> indexing returns <token> in the token stream.  But when I perform  
> my search
> no results are found.
>
> Is there a way I can see what tokens are actually written by the index
> writer of lucene?

My java.net article and the (free) code from lucenebook.com has an  
analyzer demo that will show what comes out of the analyzer, but  
sounds like you've already troubleshot that aspect.

Luke (google for "luke lucene") will let you see what got indexed - I  
recommend trying that out.

> My analyzer returns the tokens and my queryparser returns the  
> tokens so I'm
> not sure why "SOME" tokens are not being found in the index.  These  
> are
> tokens in the middle of a token stream so it's not like they are at  
> the end
> or beginning, and I have not found a pattern to them yet.

Are you searching with QueryParser?   If you look at the generated  
Query.toString() does it match what you indexed?   If not, try a  
simple TermQuery for what gets returned from your analyzer and see if  
that works.  If not, Lucene is broken :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



The contents of this e-mail are intended for the named addressee only. It
contains information that may be confidential. Unless you are the named
addressee or an authorized designee, you may not copy or use it, or disclose
it to anyone else. If you received it in error please notify us immediately
and then destroy it. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 18:07:15 2005
Return-Path: <java-user-return-17814-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63813 invoked from network); 5 Dec 2005 18:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 18:07:14 -0000
Received: (qmail 49508 invoked by uid 500); 5 Dec 2005 18:07:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49488 invoked by uid 500); 5 Dec 2005 18:07:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49477 invoked by uid 99); 5 Dec 2005 18:07:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 10:07:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 10:07:06 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jB5I6uP32252
	for <java-user@lucene.apache.org>; Mon, 5 Dec 2005 12:06:56 -0600
Message-ID: <4394822E.3020501@getopt.org>
Date: Mon, 05 Dec 2005 19:08:46 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Why are tokens not being indexed?
References: <41C33488FEC67C43BC564F5F086C21FF012BAFD7@nasa-dtw-ex001.nasa.cpwr.corp>
In-Reply-To: <41C33488FEC67C43BC564F5F086C21FF012BAFD7@nasa-dtw-ex001.nasa.cpwr.corp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Combs, Craig wrote:

>I'm able to see the documents that were indexed but not the tokens
>associated with the document in Luke.
>
>I'm using the multifield query parser and I did do the query.toString and
>the tokens returned by the query parser matched the tokens returned from the
>analyzer.  Some how I need to see which tokens are associated with what
>documents in the Lucene index database.
>
>I'm not sure Luke can do this.  I don't need to know which documents were
>indexed but I need to know what tokens are actually indexed in lucene.  What
>is the best way to look into an index that Lucene has created and what
>tokens are associated with that given index.
>  
>

What you (probably) need is to browse through all terms in the index. 
You can do this with Luke - go to the "Documents" tab, and on the 
right-hand side you have a term browser. For each term you can display 
the list of documents containing this term.

Also, you could use the Overview tab, and the Top N terms for a specific 
field, with a large N.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 18:43:13 2005
Return-Path: <java-user-return-17815-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83687 invoked from network); 5 Dec 2005 18:43:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 18:43:12 -0000
Received: (qmail 46833 invoked by uid 500); 5 Dec 2005 18:42:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46521 invoked by uid 500); 5 Dec 2005 18:42:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46451 invoked by uid 99); 5 Dec 2005 18:42:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 10:42:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 10:42:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 90BC313E2006; Mon,  5 Dec 2005 13:42:28 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 77A8413E2005
	for <java-user@lucene.apache.org>; Mon,  5 Dec 2005 13:42:22 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <41C33488FEC67C43BC564F5F086C21FF012BAFD7@nasa-dtw-ex001.nasa.cpwr.corp>
References: <41C33488FEC67C43BC564F5F086C21FF012BAFD7@nasa-dtw-ex001.nasa.cpwr.corp>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <1881CF20-9253-4024-ABC5-6FF9D25FE516@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Why are tokens not being indexed?
Date: Mon, 5 Dec 2005 13:42:18 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Craig,

Again, please try a TermQuery(new Term(fieldname, value)) for a known  
field/term combination that you are having issues with.   
MultiFieldQueryParser is adding complexity on top of complexity.   
Start simple, get a known term query to work, and move up from there.

	Erik


On Dec 5, 2005, at 12:39 PM, Combs, Craig wrote:

> I'm able to see the documents that were indexed but not the tokens
> associated with the document in Luke.
>
> I'm using the multifield query parser and I did do the  
> query.toString and
> the tokens returned by the query parser matched the tokens returned  
> from the
> analyzer.  Some how I need to see which tokens are associated with  
> what
> documents in the Lucene index database.
>
> I'm not sure Luke can do this.  I don't need to know which  
> documents were
> indexed but I need to know what tokens are actually indexed in  
> lucene.  What
> is the best way to look into an index that Lucene has created and what
> tokens are associated with that given index.
>
> -Craig
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, December 05, 2005 12:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Why are tokens not being indexed?
>
>
> On Dec 5, 2005, at 8:20 AM, Combs, Craig wrote:
>> This is very mysterious
>>
>> I have check my parser and I'm returned body:<token>.  My analyzer
>> during
>> indexing returns <token> in the token stream.  But when I perform
>> my search
>> no results are found.
>>
>> Is there a way I can see what tokens are actually written by the  
>> index
>> writer of lucene?
>
> My java.net article and the (free) code from lucenebook.com has an
> analyzer demo that will show what comes out of the analyzer, but
> sounds like you've already troubleshot that aspect.
>
> Luke (google for "luke lucene") will let you see what got indexed - I
> recommend trying that out.
>
>> My analyzer returns the tokens and my queryparser returns the
>> tokens so I'm
>> not sure why "SOME" tokens are not being found in the index.  These
>> are
>> tokens in the middle of a token stream so it's not like they are at
>> the end
>> or beginning, and I have not found a pattern to them yet.
>
> Are you searching with QueryParser?   If you look at the generated
> Query.toString() does it match what you indexed?   If not, try a
> simple TermQuery for what gets returned from your analyzer and see if
> that works.  If not, Lucene is broken :)
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> The contents of this e-mail are intended for the named addressee  
> only. It
> contains information that may be confidential. Unless you are the  
> named
> addressee or an authorized designee, you may not copy or use it, or  
> disclose
> it to anyone else. If you received it in error please notify us  
> immediately
> and then destroy it.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 05 19:41:14 2005
Return-Path: <java-user-return-17816-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16866 invoked from network); 5 Dec 2005 19:41:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Dec 2005 19:41:14 -0000
Received: (qmail 43543 invoked by uid 500); 5 Dec 2005 19:41:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43525 invoked by uid 500); 5 Dec 2005 19:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43514 invoked by uid 99); 5 Dec 2005 19:41:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 11:41:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.115.132.34] (HELO mx1.compuware.com) (63.115.132.34)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 11:41:05 -0800
Received: from bh1.compuware.com (unknown [10.10.1.31])
	by mx1.compuware.com (Postfix) with ESMTP id 1234472D452
	for <java-user@lucene.apache.org>; Mon,  5 Dec 2005 14:40:45 -0500 (EST)
Received: by compuware.com with Internet Mail Service (5.5.2657.72)
	id <YH7L8R0G>; Mon, 5 Dec 2005 14:40:44 -0500
Message-ID: <41C33488FEC67C43BC564F5F086C21FF012BAFDA@nasa-dtw-ex001.nasa.cpwr.corp>
From: "Combs, Craig" <Craig.Combs@compuware.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Why are tokens not being indexed?
Date: Mon, 5 Dec 2005 14:40:20 -0500 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I hate to admit this but I must.  My error was caused by a simple offset on
a counter.  Luke was very helpful in helping me determine this error.
Although the benefit is that I learned more about the internals of Lucene
and have a much better understanding.

I appreciate the responses and apologize for bothering the list when my
problem was so simple and was caused by the lack of foresight on my part.

Regards,
Craig

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Monday, December 05, 2005 1:42 PM
To: java-user@lucene.apache.org
Subject: Re: Why are tokens not being indexed?

Craig,

Again, please try a TermQuery(new Term(fieldname, value)) for a known  
field/term combination that you are having issues with.   
MultiFieldQueryParser is adding complexity on top of complexity.   
Start simple, get a known term query to work, and move up from there.

	Erik


On Dec 5, 2005, at 12:39 PM, Combs, Craig wrote:

> I'm able to see the documents that were indexed but not the tokens
> associated with the document in Luke.
>
> I'm using the multifield query parser and I did do the  
> query.toString and
> the tokens returned by the query parser matched the tokens returned  
> from the
> analyzer.  Some how I need to see which tokens are associated with  
> what
> documents in the Lucene index database.
>
> I'm not sure Luke can do this.  I don't need to know which  
> documents were
> indexed but I need to know what tokens are actually indexed in  
> lucene.  What
> is the best way to look into an index that Lucene has created and what
> tokens are associated with that given index.
>
> -Craig
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, December 05, 2005 12:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Why are tokens not being indexed?
>
>
> On Dec 5, 2005, at 8:20 AM, Combs, Craig wrote:
>> This is very mysterious
>>
>> I have check my parser and I'm returned body:<token>.  My analyzer
>> during
>> indexing returns <token> in the token stream.  But when I perform
>> my search
>> no results are found.
>>
>> Is there a way I can see what tokens are actually written by the  
>> index
>> writer of lucene?
>
> My java.net article and the (free) code from lucenebook.com has an
> analyzer demo that will show what comes out of the analyzer, but
> sounds like you've already troubleshot that aspect.
>
> Luke (google for "luke lucene") will let you see what got indexed - I
> recommend trying that out.
>
>> My analyzer returns the tokens and my queryparser returns the
>> tokens so I'm
>> not sure why "SOME" tokens are not being found in the index.  These
>> are
>> tokens in the middle of a token stream so it's not like they are at
>> the end
>> or beginning, and I have not found a pattern to them yet.
>
> Are you searching with QueryParser?   If you look at the generated
> Query.toString() does it match what you indexed?   If not, try a
> simple TermQuery for what gets returned from your analyzer and see if
> that works.  If not, Lucene is broken :)
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> The contents of this e-mail are intended for the named addressee  
> only. It
> contains information that may be confidential. Unless you are the  
> named
> addressee or an authorized designee, you may not copy or use it, or  
> disclose
> it to anyone else. If you received it in error please notify us  
> immediately
> and then destroy it.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



The contents of this e-mail are intended for the named addressee only. It
contains information that may be confidential. Unless you are the named
addressee or an authorized designee, you may not copy or use it, or disclose
it to anyone else. If you received it in error please notify us immediately
and then destroy it. 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 04:32:36 2005
Return-Path: <java-user-return-17817-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67969 invoked from network); 6 Dec 2005 04:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 04:32:36 -0000
Received: (qmail 97964 invoked by uid 500); 6 Dec 2005 04:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96974 invoked by uid 500); 6 Dec 2005 04:32:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96960 invoked by uid 99); 6 Dec 2005 04:32:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 20:32:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dcliman@keepmedia.com designates 63.82.1.162 as permitted sender)
Received: from [63.82.1.162] (HELO mx1.keepmedia.com) (63.82.1.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 05 Dec 2005 20:32:29 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx1.keepmedia.com (Postfix) with ESMTP id 1663723345E
	for <java-user@lucene.apache.org>; Mon,  5 Dec 2005 20:31:37 -0800 (PST)
Received: from mx1.keepmedia.com ([127.0.0.1])
 by localhost (lucky.corp.keepmedia.int [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 28226-05 for <java-user@lucene.apache.org>;
 Mon,  5 Dec 2005 20:31:36 -0800 (PST)
Received: from KEEP14 (keep14.corp.keepmedia.int [192.168.1.147])
	by mx1.keepmedia.com (Postfix) with ESMTP id C741F233442
	for <java-user@lucene.apache.org>; Mon,  5 Dec 2005 20:31:36 -0800 (PST)
From: "Dan Climan" <dcliman@keepmedia.com>
To: <java-user@lucene.apache.org>
Subject: Highlighter, Term Positions and Stopwords
Date: Mon, 5 Dec 2005 20:32:12 -0800
Organization: KeepMedia, Inc.
Message-ID: <003901c5fa1e$06f3c8d0$a701a8c0@corp.keepmedia.int>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003A_01C5F9DA.F8D088D0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Scanned: by amavisd-new at keepmedia.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003A_01C5F9DA.F8D088D0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Do stopfilters create non-contiguous token positions?
=20
I was interested in experimenting with the highlighter and using the
TokenSources.getTokenStream(TermPositionVector
<file:///C:\mysvn\lucene\build\docs\api\org\apache\lucene\index\TermPosit=
ion
Vector.html>  tpv,                                       boolean
tokenPositionsGuaranteedContiguous) method
=20
The javadocs for this method note that:

tokenPositionsGuaranteedContiguous - true if the token position numbers =
have
no overlaps or gaps.

=20

The example used for comparison to re-Analyzing the the text includes
stopwords ("timings above were using a stemmer/lowercaser/stopword =
combo").

I was curious if a stopwords, by definition meant that tokens were not
contiguous? Is this still true if the the query uses the same analyzer =
and
filters out the same stopwords?

=20

Thanks,

Dan


------=_NextPart_000_003A_01C5F9DA.F8D088D0--


From java-user-return-17818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 09:36:14 2005
Return-Path: <java-user-return-17818-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5962 invoked from network); 6 Dec 2005 09:36:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 09:36:13 -0000
Received: (qmail 55937 invoked by uid 500); 6 Dec 2005 09:36:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55882 invoked by uid 500); 6 Dec 2005 09:36:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55871 invoked by uid 99); 6 Dec 2005 09:36:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 01:36:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.9 as permitted sender)
Received: from [195.188.213.9] (HELO smtp-out6.blueyonder.co.uk) (195.188.213.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 01:36:01 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out6.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 6 Dec 2005 09:36:33 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1EjZEY-0000ld-4D
	for java-user@lucene.apache.org; Tue, 06 Dec 2005 09:35:38 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Getting Dates Back out of lucene
Date: Tue, 6 Dec 2005 09:35:41 +0000
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512060935.41680.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 06 Dec 2005 09:36:33.0350 (UTC) FILETIME=[8B6A0E60:01C5FA48]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I added a date field to a document with 

doc.add(Field.keyword("A Date",myDate));

How do I get it back out again as a date?

-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 10:13:41 2005
Return-Path: <java-user-return-17819-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22523 invoked from network); 6 Dec 2005 10:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 10:13:40 -0000
Received: (qmail 27626 invoked by uid 500); 6 Dec 2005 10:13:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27517 invoked by uid 500); 6 Dec 2005 10:13:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27483 invoked by uid 99); 6 Dec 2005 10:13:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 02:13:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 02:13:27 -0800
Received: from [82.153.237.45] (helo=[192.168.1.9])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1EjZol-00039Y-00
	for <java-user@lucene.apache.org>; Tue, 06 Dec 2005 10:13:03 +0000
Subject: Re: Getting Dates Back out of lucene
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <200512060935.41680.alan@chandlerfamily.org.uk>
References: <200512060935.41680.alan@chandlerfamily.org.uk>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 06 Dec 2005 10:10:48 +0000
Message-Id: <1133863849.9514.14.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-12-06 at 09:35 +0000, Alan Chandler wrote:
> I added a date field to a document with 
> 
> doc.add(Field.keyword("A Date",myDate));
> 
> How do I get it back out again as a date?

You should be able to use the
org.apache.lucene.document.DateField#stringToDate(String) method.



Miles




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 10:20:18 2005
Return-Path: <java-user-return-17820-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25691 invoked from network); 6 Dec 2005 10:20:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 10:20:18 -0000
Received: (qmail 43368 invoked by uid 500); 6 Dec 2005 10:20:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43349 invoked by uid 500); 6 Dec 2005 10:20:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43338 invoked by uid 99); 6 Dec 2005 10:20:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 02:20:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.8 as permitted sender)
Received: from [195.188.213.8] (HELO smtp-out5.blueyonder.co.uk) (195.188.213.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 02:20:10 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out5.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 6 Dec 2005 10:20:43 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1EjZvH-0000qO-TP
	for java-user@lucene.apache.org; Tue, 06 Dec 2005 10:19:47 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Getting Dates Back out of lucene
Date: Tue, 6 Dec 2005 10:19:51 +0000
User-Agent: KMail/1.8.2
References: <200512060935.41680.alan@chandlerfamily.org.uk> <1133863849.9514.14.camel@localhost.localdomain>
In-Reply-To: <1133863849.9514.14.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-6"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512061019.51852.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 06 Dec 2005 10:20:43.0093 (UTC) FILETIME=[B6C8C050:01C5FA4E]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 06 Dec 2005 10:10, Miles Barr wrote:
> On Tue, 2005-12-06 at 09:35 +0000, Alan Chandler wrote:
> > I added a date field to a document with
> >
> > doc.add(Field.keyword("A Date",myDate));
> >
> > How do I get it back out again as a date?
>
> You should be able to use the
> org.apache.lucene.document.DateField#stringToDate(String) method.

Thanks, exactly what I was looking for.  

-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 10:48:16 2005
Return-Path: <java-user-return-17821-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38113 invoked from network); 6 Dec 2005 10:48:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 10:48:13 -0000
Received: (qmail 86328 invoked by uid 500); 6 Dec 2005 10:48:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85311 invoked by uid 500); 6 Dec 2005 10:48:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85298 invoked by uid 99); 6 Dec 2005 10:48:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 02:48:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 02:48:00 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C8FF613E200E; Tue,  6 Dec 2005 05:47:37 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 15EC613E2006
	for <java-user@lucene.apache.org>; Tue,  6 Dec 2005 05:47:20 -0500 (EST)
In-Reply-To: <003901c5fa1e$06f3c8d0$a701a8c0@corp.keepmedia.int>
References: <003901c5fa1e$06f3c8d0$a701a8c0@corp.keepmedia.int>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <483FC54A-C75A-43B4-979B-8CE080D26E14@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Highlighter, Term Positions and Stopwords
Date: Tue, 6 Dec 2005 05:47:17 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 5, 2005, at 11:32 PM, Dan Climan wrote:
> Do stopfilters create non-contiguous token positions?

No, not currently.  StopFilter leaves token positions in their  
original state, which defaults to contiguous (offset of 1).

There is an open issue to change this behavior though, and at one  
point I changed it temporarily but it caused issues with PhraseQuery  
and QueryParser.  PhraseQuery now supports term positions, and  
QueryParser also supports setting the PhraseQuery term positions  
appropriately.  So perhaps it is time to change StopFilter, or  
perhaps make it an optional feature.

I like the idea of leaving holes in the token positions so there is a  
more accurate picture of the original text so that phrase queries can  
avoid matching across where stop words were removed unless some slop  
is specified.

> The javadocs for this method note that:
>
> tokenPositionsGuaranteedContiguous - true if the token position  
> numbers have
> no overlaps or gaps.

You will want this to be set true.

> I was curious if a stopwords, by definition meant that tokens were not
> contiguous? Is this still true if the the query uses the same  
> analyzer and
> filters out the same stopwords?

Currently tokens are contiguous by all built-in analyzers, regardless  
of any tokens that may have been removed.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 12:05:18 2005
Return-Path: <java-user-return-17822-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71694 invoked from network); 6 Dec 2005 12:05:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 12:05:18 -0000
Received: (qmail 46784 invoked by uid 500); 6 Dec 2005 12:05:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46747 invoked by uid 500); 6 Dec 2005 12:05:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46736 invoked by uid 99); 6 Dec 2005 12:05:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 04:05:10 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.161] (HELO web30908.mail.mud.yahoo.com) (68.142.200.161)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Dec 2005 04:05:09 -0800
Received: (qmail 11415 invoked by uid 60001); 6 Dec 2005 12:04:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4n7RQCHPHaRbrIxFBDm8UHMbZ9qo6wXw4H2l4nJbiIX4qfBK3/eD8IjgoW7SLBdos+L5sV5xEdCgqBlYZVpiJyuT1qSPNcgnZ+POSdvXtQ1zz9T/MkBJ42KkBE3TOAxr63OuAgt+1TNxE2VgKCMf24pqUErJ48E3ncVs6Pi1V6c=  ;
Message-ID: <20051206120448.11406.qmail@web30908.mail.mud.yahoo.com>
Received: from [217.219.195.10] by web30908.mail.mud.yahoo.com via HTTP; Tue, 06 Dec 2005 04:04:48 PST
Date: Tue, 6 Dec 2005 04:04:48 -0800 (PST)
From: Amir Hosein Jadidi Nejad <master_ai_ir@yahoo.com>
Subject: Persian/Arabic Analyzer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1422458222-1133870688=:11386"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1422458222-1133870688=:11386
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi All,
  is anybody have a "persian (farsi) analyzer" for lucene search engine. if "arabic" is available, i can customize it to farsi/persian.
  Regard,


------------------------------------------------------------------- 
Amir Hosein Jadidi Nejad 
Student Of Computer Science 
Bu-Ali Sina University, Hamedan-Iran 

E-Mail : jadidi@basu.ac.ir , master_ai_ir@yahoo.com







			
---------------------------------
Yahoo! Shopping
 Find Great Deals on Gifts at Yahoo! Shopping 
--0-1422458222-1133870688=:11386--

From java-user-return-17823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 13:12:45 2005
Return-Path: <java-user-return-17823-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9371 invoked from network); 6 Dec 2005 13:12:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 13:12:44 -0000
Received: (qmail 34121 invoked by uid 500); 6 Dec 2005 13:12:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34078 invoked by uid 500); 6 Dec 2005 13:12:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34067 invoked by uid 99); 6 Dec 2005 13:12:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 05:12:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.126.201.210] (HELO hermes.culture.fr) (143.126.201.210)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 05:12:36 -0800
Received: by mta.culture.fr with id jB6DCEFg007847
 for <java-user@lucene.apache.org>; Tue, 6 Dec 2005 14:12:14 +0100
Received: from bretagne.culture.fr (bretagne.culture.fr) by pasteur.culture.fr
 (Content Technologies SMTPRS 4.3.17) with ESMTP id <T750cd3165b8f7ec9dc354@pasteur.culture.fr> for <java-user@lucene.apache.org>;
 Tue, 6 Dec 2005 14:12:14 +0100
Received: by bretagne.culture.fr with ESMTP id jB6DCDGf006357
  for <java-user@lucene.apache.org>; Tue, 6 Dec 2005 14:12:13 +0100
Message-ID: <43958E3C.20909@culture.gouv.fr>
Date: Tue, 06 Dec 2005 14:12:28 +0100
From: Pierrick Brihaye <pierrick.brihaye@culture.gouv.fr>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Persian/Arabic Analyzer
References: <20051206120448.11406.qmail@web30908.mail.mud.yahoo.com>
In-Reply-To: <20051206120448.11406.qmail@web30908.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Amir Hosein Jadidi Nejad wrote:

>   if "arabic" is available, i can customize it to farsi/persian.

There is indeed an arabic analyzer : 
http://savannah.nongnu.org/projects/aramorph

... but, given the difference of structure between the 2 languages, I 
doubt it can be very helpful.

Cheers,

-- 
Pierrick Brihaye, informaticien
Service rgional de l'Inventaire / DRAC Bretagne
mailto:pierrick.brihaye@culture.gouv.fr / tl : +33 (0)2 99 29 67 78
http://usenet-fr.news.eu.org/fr-chartes/rfc1855.html#31. L'avez-vous lu ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 14:34:27 2005
Return-Path: <java-user-return-17824-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63637 invoked from network); 6 Dec 2005 14:34:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 14:34:25 -0000
Received: (qmail 51874 invoked by uid 500); 6 Dec 2005 14:34:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51844 invoked by uid 500); 6 Dec 2005 14:34:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51631 invoked by uid 99); 6 Dec 2005 14:34:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 06:34:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.h.funk@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 06:34:02 -0800
Received: by wproxy.gmail.com with SMTP id 57so47281wri
        for <java-user@lucene.apache.org>; Tue, 06 Dec 2005 06:33:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:mime-version:content-type;
        b=umq21Oz7+3t8vU6RqGxdfqfCG0ZZJaAs1b81yB6LaOc/X7LPYHGhJvjisrLMLRf1HfD0Rq4eEbe+c6pFOXrtbXhWzvCQsFFu/KLcWsbAJ4SjQBmSjCbG+J97uLDbql6+Q2BoRSH1bKTACwlebH9Kji8NsLWEWg+TFDPdrBnyjTE=
Received: by 10.54.140.12 with SMTP id n12mr582835wrd;
        Tue, 06 Dec 2005 06:33:41 -0800 (PST)
Received: by 10.54.144.13 with HTTP; Tue, 6 Dec 2005 06:33:41 -0800 (PST)
Message-ID: <fb81d4720512060633r2908b2e0tf70d46201bfc38a9@mail.gmail.com>
Date: Tue, 6 Dec 2005 14:33:41 +0000
From: Dan Funk <dan@danandtamara.com>
Sender: daniel.h.funk@gmail.com
To: java-user@lucene.apache.org
Subject: Broken Link to WordNet on Sandbox
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6814_32276081.1133879621503"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_6814_32276081.1133879621503
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

In the sandbox at
http://lucene.apache.org/java/docs/lucene-sandbox/

There is a link to the WordNet repository:
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/WordNet

it should be:
http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/wordnet

Where "wordnet" is not capitalized.

Just wanted to let someone know.

------=_Part_6814_32276081.1133879621503--

From java-user-return-17825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 17:02:56 2005
Return-Path: <java-user-return-17825-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51861 invoked from network); 6 Dec 2005 17:02:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 17:02:55 -0000
Received: (qmail 10539 invoked by uid 500); 6 Dec 2005 17:02:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10288 invoked by uid 500); 6 Dec 2005 17:02:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10261 invoked by uid 99); 6 Dec 2005 17:02:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 09:02:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [194.217.242.90] (HELO anchor-post-32.mail.demon.net) (194.217.242.90)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 09:02:43 -0800
Received: from rselvaraj.demon.co.uk ([83.104.137.62] helo=Taurus)
	by anchor-post-32.mail.demon.net with esmtp (Exim 4.42)
	id 1EjgCr-000IE1-7f; Tue, 06 Dec 2005 17:02:21 +0000
Reply-To: <lucene@searchblox.com>
From: "Robert Selvaraj" <lucene@searchblox.com>
To: <java-user@lucene.apache.org>,
	<java-dev@lucene.apache.org>
Subject: SearchBlox adds REST-API and Spelling Suggestions in Version 3.1
Date: Tue, 6 Dec 2005 17:02:17 -0000
Organization: SearchBlox Software, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcX6hs/dOgbq9+tjQTa0XkhA6KpSyA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20051206170244.3E63A10FB00B@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


SearchBlox Software has released Version 3.1 of its J2EE Content Search
Software. SearchBlox delivers out-of-the-box search functionality for quick
and easy integration with websites, applications, intranets and portals.
SearchBlox uses the Lucene Search API and incorporates integrated
HTTP/HTTPS, File System and Feed (RSS/Atom) crawlers, support for various
document formats including HTML, Word, PDF, PowerPoint and Excel, support
for indexing and searching content in 30 languages and customizable search
results, all controlled from a browser-based Admin Console. 

Main features in Version 3.1: 
=====================
- REST API (Free and Enterprise Editions Only) for indexing and deleting
custom content. The built-in browser-based SearchBlox Development
Environment provides developers with an easy-to-use interface to develop and
test using the REST API. 
- Spelling Suggestions based on the indexed content in the collection
- Support for selective indexing of content within HTML documents using
<noindex> </noindex> or <!--stopindex--> <!--startindex--> tags 
- Support for JDK 1.5. 


SearchBlox is available as a Web Archive (WAR) and has been tested with all
major Java Application Servers. It is also available as a standalone
application for Windows and Mac OS X.

The SearchBlox FREE Edition is available free of charge and can index up to
1000 documents. 

The software can be downloaded from http://www.searchblox.com





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 18:13:51 2005
Return-Path: <java-user-return-17826-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94099 invoked from network); 6 Dec 2005 18:13:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 18:13:51 -0000
Received: (qmail 19468 invoked by uid 500); 6 Dec 2005 18:13:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19433 invoked by uid 500); 6 Dec 2005 18:13:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19406 invoked by uid 99); 6 Dec 2005 18:13:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 10:13:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 10:13:43 -0800
Received: from 192.168.100.99 ([192.168.100.99]) by bettylou.configureone.net ([192.168.100.7]) with Microsoft Exchange Server HTTP-DAV ;
 Tue,  6 Dec 2005 18:12:32 +0000
User-Agent: Microsoft-Entourage/11.2.1.051004
Date: Tue, 06 Dec 2005 12:13:21 -0600
Subject: Basic lucene usage
From: John Powers <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
Message-ID: <BFBB30E1.1E61%jpowers@configureone.com>
Thread-Topic: Basic lucene usage
Thread-Index: AcX6kL1p/B0ZcGaDEdqHZQANk2AiFA==
In-Reply-To: <8220B8D6B56A9A4E8480489F38E425298E470A@rw-msg-02.broadvision.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Am I correct in assuming that I can use lucene by itself as a search engine
in a website?   If each user session is looking at the fsdirectory and
searching on it, is that ok?   Or do I need to put in a queue or pool that
handles searching it; only allowing the one thing application-wide to
actually get to the fsdirectory?    Can 100 people look at the fsdirectory
at the same time?  Or do you generally put in a single entry point that
queues requests for a search from those 100 people?

And I guess I have the same question about writing/indexing.  Locks are
creating as apart of the indexing process, correct?  So you'd definitly not
want multiple people doing that at the same time?  What is the best practice
to stop that?   

Are locks created as apart of searching?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 18:18:48 2005
Return-Path: <java-user-return-17827-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98718 invoked from network); 6 Dec 2005 18:18:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 18:18:47 -0000
Received: (qmail 30965 invoked by uid 500); 6 Dec 2005 18:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30914 invoked by uid 500); 6 Dec 2005 18:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30874 invoked by uid 99); 6 Dec 2005 18:18:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 10:18:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.14 as permitted sender)
Received: from [80.67.18.14] (HELO smtprelay02.ispgateway.de) (80.67.18.14)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 10:18:37 -0800
Received: (qmail 28116 invoked from network); 6 Dec 2005 18:18:14 -0000
Received: from unknown (HELO p5496fc10.dip.t-dialin.net) ([pbs]695637@[84.150.252.16])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay02.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 6 Dec 2005 18:18:14 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Broken Link to WordNet on Sandbox
Date: Tue, 6 Dec 2005 19:19:18 +0100
User-Agent: KMail/1.8.2
References: <fb81d4720512060633r2908b2e0tf70d46201bfc38a9@mail.gmail.com>
In-Reply-To: <fb81d4720512060633r2908b2e0tf70d46201bfc38a9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512061919.18368@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Dienstag 06 Dezember 2005 15:33, Dan Funk wrote:

> There is a link to the WordNet repository:
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/WordNet
>
> it should be:
> http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/wordnet

Thanks, it has been fixed now.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 18:19:44 2005
Return-Path: <java-user-return-17828-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99792 invoked from network); 6 Dec 2005 18:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 18:19:43 -0000
Received: (qmail 33579 invoked by uid 500); 6 Dec 2005 18:19:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33558 invoked by uid 500); 6 Dec 2005 18:19:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33547 invoked by uid 99); 6 Dec 2005 18:19:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 10:19:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 10:19:36 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id jB6IJFpY002521
	for <java-user@lucene.apache.org>; Tue, 6 Dec 2005 13:19:15 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IR300E019K36N@lmco.com> for java-user@lucene.apache.org; Tue, 06 Dec 2005 13:19:15 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IR300K199K3LR@lmco.com> for java-user@lucene.apache.org; Tue, 06 Dec 2005 13:19:15 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Tue,
 06 Dec 2005 13:19:15 -0500
Date: Tue, 06 Dec 2005 13:19:14 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Basic lucene usage
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3A11@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: Basic lucene usage
Thread-Index: AcX6kL1p/B0ZcGaDEdqHZQANk2AiFAAAGCMg
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 06 Dec 2005 18:19:15.0185 (UTC) FILETIME=[90864E10:01C5FA91]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene is thread safe, it is recommended that you only have one
IndexSearcher instance. No problems with multiple searches on the same
IndexSearcher.

You can index while searching, as soon as you want the new entries to be
found by the IndexSearcher, just get a new instance of IndexSearcher

Aviran
http://www.aviransplace.com

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com] 
Sent: Tuesday, December 06, 2005 1:13 PM
To: java-user@lucene.apache.org
Subject: Basic lucene usage

Am I correct in assuming that I can use lucene by itself as a search
engine
in a website?   If each user session is looking at the fsdirectory and
searching on it, is that ok?   Or do I need to put in a queue or pool
that
handles searching it; only allowing the one thing application-wide to
actually get to the fsdirectory?    Can 100 people look at the
fsdirectory
at the same time?  Or do you generally put in a single entry point that
queues requests for a search from those 100 people?

And I guess I have the same question about writing/indexing.  Locks are
creating as apart of the indexing process, correct?  So you'd definitly
not want multiple people doing that at the same time?  What is the best
practice
to stop that?   

Are locks created as apart of searching?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 19:47:52 2005
Return-Path: <java-user-return-17829-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55712 invoked from network); 6 Dec 2005 19:47:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 19:47:52 -0000
Received: (qmail 96830 invoked by uid 500); 6 Dec 2005 19:47:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96809 invoked by uid 500); 6 Dec 2005 19:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96795 invoked by uid 99); 6 Dec 2005 19:47:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 11:47:44 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=RCVD_IN_WHOIS_INVALID,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 200.82.134.5 is neither permitted nor denied by domain of jdpatterson@gmail.com)
Received: from [200.82.134.5] (HELO mailccs.icnet.com.ve) (200.82.134.5)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 06 Dec 2005 11:47:44 -0800
Received: from [200.8.20.214] (HELO [192.168.0.100])
  by mailccs.icnet.com.ve (CommuniGate Pro SMTP 4.1.8)
  with ESMTP id 91386464 for java-user@lucene.apache.org; Tue, 06 Dec 2005 15:47:27 -0400
From: John Patterson <jdpatterson@gmail.com>
To: java-user@lucene.apache.org
Subject: Non scoring search
Date: Tue, 6 Dec 2005 15:47:24 -0400
User-Agent: KMail/1.8.3
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512061547.24188.jdpatterson@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I was wondering if there is a standard way to retrive documents WITHOUT 
scoring and sorting them.  I need a list of documents that contain certain 
terms but I do not need them sorted or scored.

Looking at the source it appears that I can use the TermDocs directly and 
write a method similar to ConjunctionScorer.next()

Does such a Class already exist?

Thanks,

John.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 20:40:21 2005
Return-Path: <java-user-return-17830-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88784 invoked from network); 6 Dec 2005 20:40:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 20:40:21 -0000
Received: (qmail 40817 invoked by uid 500); 6 Dec 2005 20:40:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40799 invoked by uid 500); 6 Dec 2005 20:40:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40785 invoked by uid 99); 6 Dec 2005 20:40:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 12:40:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 12:40:13 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D50665BCAD; Tue,  6 Dec 2005 12:39:49 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id CFD287F4B1
	for <java-user@lucene.apache.org>; Tue,  6 Dec 2005 12:39:49 -0800 (PST)
Date: Tue, 6 Dec 2005 12:39:49 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Non scoring search
In-Reply-To: <200512061547.24188.jdpatterson@gmail.com>
Message-ID: <Pine.LNX.4.58.0512061238000.4277@hal.rescomp.berkeley.edu>
References: <200512061547.24188.jdpatterson@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I was wondering if there is a standard way to retrive documents WITHOUT
: scoring and sorting them.  I need a list of documents that contain certain
: terms but I do not need them sorted or scored.

Using Filters directly (ie: constructing them, and then calling the bits()
method yourself) is the most straight forward way i know of to achieve
what you describe.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 22:44:50 2005
Return-Path: <java-user-return-17831-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74474 invoked from network); 6 Dec 2005 22:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 22:44:50 -0000
Received: (qmail 84711 invoked by uid 500); 6 Dec 2005 22:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84579 invoked by uid 500); 6 Dec 2005 22:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84527 invoked by uid 99); 6 Dec 2005 22:44:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 14:44:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.7 as permitted sender)
Received: from [195.188.213.7] (HELO smtp-out4.blueyonder.co.uk) (195.188.213.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 14:44:41 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out4.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 6 Dec 2005 22:45:12 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1EjlXl-0002Rq-LT
	for java-user@lucene.apache.org; Tue, 06 Dec 2005 22:44:17 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Is there any timing constraints with lucene.
Date: Tue, 6 Dec 2005 22:44:23 +0000
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512062244.24247.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 06 Dec 2005 22:45:14.0640 (UTC) FILETIME=[B919E100:01C5FAB6]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have implemented a "Database" on top of lucene and am currently testing it.

When I manually step through my test suite in the debugger, it works fine.

When I run it without the debugger it fails.

The peice that fails is a where I update a document (by using a IndexReader to 
create a IndexSearcher to located it, the IndexReader to delete it and then 
close it) and then an indexwriter to put it back again(then optimize and then 
close it),  

I then immediately attempt to read it again (via IndexSearcher and a manually 
constructed query using a TermQuery and a Term). When I do this slowly it 
works, when it is running at full speed it doesn't.

Is there any attempt to create some background thread to update the index that 
could cause the problem?
-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 06 23:39:26 2005
Return-Path: <java-user-return-17832-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16166 invoked from network); 6 Dec 2005 23:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Dec 2005 23:39:26 -0000
Received: (qmail 34242 invoked by uid 500); 6 Dec 2005 23:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34198 invoked by uid 500); 6 Dec 2005 23:39:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34187 invoked by uid 99); 6 Dec 2005 23:39:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 15:39:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.8 as permitted sender)
Received: from [195.188.213.8] (HELO smtp-out5.blueyonder.co.uk) (195.188.213.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 15:39:18 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out5.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 6 Dec 2005 23:39:51 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1EjmOe-0002Wo-Pw
	for java-user@lucene.apache.org; Tue, 06 Dec 2005 23:38:56 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Is there any timing constraints with lucene.
Date: Tue, 6 Dec 2005 23:39:03 +0000
User-Agent: KMail/1.8.2
References: <200512062244.24247.alan@chandlerfamily.org.uk>
In-Reply-To: <200512062244.24247.alan@chandlerfamily.org.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512062339.03764.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 06 Dec 2005 23:39:51.0968 (UTC) FILETIME=[5A8A7200:01C5FABE]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tuesday 06 Dec 2005 22:44, Alan Chandler wrote:
> I have implemented a "Database" on top of lucene and am currently testing
> it.
>
> When I manually step through my test suite in the debugger, it works fine.
>
> When I run it without the debugger it fails.


My fault - I was throwing an exception before closing the reader.
-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 07:39:05 2005
Return-Path: <java-user-return-17833-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18532 invoked from network); 7 Dec 2005 07:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 07:39:05 -0000
Received: (qmail 24723 invoked by uid 500); 7 Dec 2005 07:38:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24688 invoked by uid 500); 7 Dec 2005 07:38:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24677 invoked by uid 99); 7 Dec 2005 07:38:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 23:38:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.9 as permitted sender)
Received: from [195.188.213.9] (HELO smtp-out6.blueyonder.co.uk) (195.188.213.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 06 Dec 2005 23:38:56 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out6.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 07:39:29 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1Ejtso-0003J3-3D
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 07:38:34 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 07:38:42 +0000
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512070738.42886.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 07:39:29.0280 (UTC) FILETIME=[5B27C800:01C5FB01]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am trying to construct, via individual query api, a query to search for 
documents with a field name of "Category" and a value of either "Category1" 
OR "Category2" (or both).

My code to do this (given categories is the set of strings with the category 
names I wish to search for) is as follows

		BooleanQuery query = new BooleanQuery();
		if (categories != null && !categories.isEmpty()) {
			for (String category : categories) {
				TermQuery t =new TermQuery(new Term("Category",category));
				query.add(t,false,false); //Saywould like that category
			}
		}

I have three documents in the index

Document 1 has zero fields called "Category"

Document 2 has one keyword  field called "Category" with value "Category1"

Document 3 has two keyword fields called "Category", one with a value of 
"Category1" and the other with a value of "Category2"

When I run a search with the above query, I get only one hit instead of the 
expected 2. (Hits.length()=1)

Worse than that, when I attempt to access Hits.doc(0) I am getting an 
immediate IOException with the message "Bad file descriptor".  I think this 
must be because by that time I have closed the indexSearcher (and therefore 
the Reader that sat behind it).  Its not clear to me how hits are associated 
with a reader.  Is it possible to close the reader and then re-open it later 
to access a document with the hit?
-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 08:06:37 2005
Return-Path: <java-user-return-17834-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30439 invoked from network); 7 Dec 2005 08:06:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 08:06:37 -0000
Received: (qmail 75449 invoked by uid 500); 7 Dec 2005 08:06:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75241 invoked by uid 500); 7 Dec 2005 08:06:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75213 invoked by uid 99); 7 Dec 2005 08:06:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 00:06:29 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 00:06:29 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A2BFA13E2006; Wed,  7 Dec 2005 03:06:07 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id BEEA413E201F
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 03:05:49 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <200512070738.42886.alan@chandlerfamily.org.uk>
References: <200512070738.42886.alan@chandlerfamily.org.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3ED83AB0-24B6-4510-B7C8-018CB23CD53C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 03:05:45 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 7, 2005, at 2:38 AM, Alan Chandler wrote:
> Worse than that, when I attempt to access Hits.doc(0) I am getting an
> immediate IOException with the message "Bad file descriptor".  I  
> think this
> must be because by that time I have closed the indexSearcher (and  
> therefore
> the Reader that sat behind it).  Its not clear to me how hits are  
> associated
> with a reader.  Is it possible to close the reader and then re-open  
> it later
> to access a document with the hit?

You must keep your IndexSearcher instance alive and well when working  
with Hits.  Hits internally uses the searcher to page through results  
- it does not keep all results in memory.  I'm not sure why you  
aren't seeing all the documents you expect, but if you package it up  
as a simple RAMDirectory-using JUnit TestCase then I'd be happy to  
run it and see.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 08:30:40 2005
Return-Path: <java-user-return-17835-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47800 invoked from network); 7 Dec 2005 08:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 08:30:39 -0000
Received: (qmail 28972 invoked by uid 500); 7 Dec 2005 08:30:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28917 invoked by uid 500); 7 Dec 2005 08:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 19243 invoked by uid 99); 7 Dec 2005 08:26:20 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
From: victorn@zipworld.com.au
To: java-user@lucene.apache.org, java-dev@lucene.apache.org
Subject: New Lucene-based application.
MIME-Version: 1.0
X-Mailer: Lotus Notes Release 6.5 September 26, 2003
Message-ID: <OFB353CBFB.A4F6E159-ONCA2570D0.002EABC5-CA2570D0.002F2810@zipworld.com.au>
Sender: victorn@zipworld.com.au
Date: Wed, 7 Dec 2005 19:35:04 +1100
X-MIMETrack: Serialize by Notes Client on Victor Negrin/Linux(Release 6.5|September 26, 2003) at
 12/07/2005 07:35:05 PM,
	Serialize complete at 12/07/2005 07:35:05 PM
Content-Type: multipart/alternative; boundary="=_alternative 002F280ECA2570D0_="
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_alternative 002F280ECA2570D0_=
Content-Type: text/plain; charset="US-ASCII"

kbforge.com is pleased to announce the first public release of "kbforge", 
a new, completely  free, desktop search application specifically designed 
for software developers. 
What differentiates kbforge from other desktop search programs, is its 
ability to assist the user in categorising the information before it is 
indexed. Using databases and collections of databases, kbforge can 
categorise information into meaningful subject matters. A host of other 
features and options make kbforge the ultimate tool for finding that 
elusive program fragment, or example or article.
Unlike most other Lucene based applications, kbforge uses Lucene as the 
default database manager (as well as for indexing and searching).
kbforge is a Java application, and possibly the first of its kind to run 
under Linux as well as Windows.

kbforge v1.20 can be downloaded free from http://www.kbforge.com

Victor Negrin
vnegrin@kbforge.com
--=_alternative 002F280ECA2570D0_=--

From java-user-return-17836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 08:50:15 2005
Return-Path: <java-user-return-17836-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57738 invoked from network); 7 Dec 2005 08:50:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 08:50:15 -0000
Received: (qmail 68233 invoked by uid 500); 7 Dec 2005 08:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68112 invoked by uid 500); 7 Dec 2005 08:50:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68101 invoked by uid 99); 7 Dec 2005 08:50:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 00:50:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rezaghp@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 00:50:06 -0800
Received: by wproxy.gmail.com with SMTP id 67so662585wri
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 00:49:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=bapsE+4rU5euRdyGNc0iAJclVRCifAlA82zHWzoBPj0ZJ+RAK3tqVtCFCRXidx9t5bWmczvN60fPvg0mX9ExHeJ+QXpJtF96Gr+F8FrD4SQhGuy1B4oS3vGhA3serCZqORZWhdJlVE6ngZPMmIvWU3YbMFWQb+6wP9nw9LqgO38=
Received: by 10.54.62.16 with SMTP id k16mr873963wra;
        Wed, 07 Dec 2005 00:49:45 -0800 (PST)
Received: by 10.54.135.5 with HTTP; Wed, 7 Dec 2005 00:49:45 -0800 (PST)
Message-ID: <45f31c860512070049m42ff1a72tef12157c63526d7d@mail.gmail.com>
Date: Wed, 7 Dec 2005 12:19:45 +0330
From: Reza Ghaffaripour <rezaghp@gmail.com>
To: java-user@lucene.apache.org
Subject: repeating fields
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8409_31206830.1133945385666"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8409_31206830.1133945385666
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

hi all,
im new to lucene. i have an xml with repeating tags.something like :
<a>
<p>x</p>
<p>xx</p>
<p>xxx</p>
<p>xxxx</p>
</a>

I add the "p" field as follows:
myDocument.add(Field.Text("p", "x"));
myDocument.add(Field.Text("p", "xx"));

but when i search for "x" it returns the first hit only.
what should i do ? i want to search for "x" and get all the 4 hits.

--
Reza Ghaffaripour
www.rezaghp.com

------=_Part_8409_31206830.1133945385666--

From java-user-return-17837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 09:03:29 2005
Return-Path: <java-user-return-17837-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63331 invoked from network); 7 Dec 2005 09:03:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 09:03:28 -0000
Received: (qmail 93491 invoked by uid 500); 7 Dec 2005 09:03:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93174 invoked by uid 500); 7 Dec 2005 09:03:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93163 invoked by uid 99); 7 Dec 2005 09:03:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 01:03:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [137.132.14.22] (HELO smtp.nus.edu.sg) (137.132.14.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 01:03:21 -0800
Received: from [192.168.1.100] ([202.156.249.91]) by smtp.nus.edu.sg over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 7 Dec 2005 17:03:00 +0800
Message-ID: <4396A543.8050807@nus.edu.sg>
Date: Wed, 07 Dec 2005 17:02:59 +0800
From: Eugene Ezekiel <u0200783@nus.edu.sg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Similarity scores for all docs
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 07 Dec 2005 09:03:00.0073 (UTC) FILETIME=[05D21D90:01C5FB0D]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Is there any way to get the similarity scores for each document in the 
index? I can iterate thru each doc in the index using the IndexReader 
but not sure how to get the similarity score for that doc.


Thanks.

--
Regards,
Eugene

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 09:19:28 2005
Return-Path: <java-user-return-17838-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71131 invoked from network); 7 Dec 2005 09:19:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 09:19:28 -0000
Received: (qmail 29013 invoked by uid 500); 7 Dec 2005 09:19:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28737 invoked by uid 500); 7 Dec 2005 09:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28725 invoked by uid 99); 7 Dec 2005 09:19:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 01:19:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=MAILTO_TO_SPAM_ADDR,RCVD_IN_NJABL_DUL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.12 as permitted sender)
Received: from [219.125.112.12] (HELO nm05omta05b.dion.ne.jp) (219.125.112.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Dec 2005 01:19:20 -0800
Received: from sekiguchi ([59.135.103.114])
	by nm05mta.dion.ne.jp
	id <20051207181858654.MAB4.84B12A0@nm05mta.dion.ne.jp>;
	Wed, 7 Dec 2005 18:18:58 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Subject: RE: Similarity scores for all docs
Date: Wed, 7 Dec 2005 18:18:56 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCIEANCCAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
In-Reply-To: <4396A543.8050807@nus.edu.sg>
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can get scores by calling Hits.score(). So you should search
at first to get Hits object.

regards,

Koji

> -----Original Message-----
> From: Eugene Ezekiel [mailto:u0200783@nus.edu.sg]
> Sent: Wednesday, December 07, 2005 6:03 PM
> To: java-user@lucene.apache.org
> Subject: Similarity scores for all docs
> 
> 
> Hi,
> 
> Is there any way to get the similarity scores for each document in the 
> index? I can iterate thru each doc in the index using the IndexReader 
> but not sure how to get the similarity score for that doc.
> 
> 
> Thanks.
> 
> --
> Regards,
> Eugene
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:04:21 2005
Return-Path: <java-user-return-17849-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1817 invoked from network); 7 Dec 2005 15:04:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:04:21 -0000
Received: (qmail 53527 invoked by uid 500); 7 Dec 2005 14:56:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53495 invoked by uid 500); 7 Dec 2005 14:56:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53484 invoked by uid 99); 7 Dec 2005 14:56:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 06:56:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.9 as permitted sender)
Received: from [195.188.213.9] (HELO smtp-out6.blueyonder.co.uk) (195.188.213.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 06:56:32 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out6.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 14:57:05 +0000
Received: from alan by home.chandlerfamily.org.uk with local (Exim 4.50)
	id 1Ek0iI-0003hh-L4
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 14:56:10 +0000
References: <200512070738.42886.alan@chandlerfamily.org.uk>
            <3ED83AB0-24B6-4510-B7C8-018CB23CD53C@ehatchersolutions.com>
            <E1Ejy40-0003Yc-SE@home.chandlerfamily.org.uk>
            <E52EEE80-BCF0-404A-AAA4-1C5405BEEB5F@ehatchersolutions.com>
In-Reply-To: <E52EEE80-BCF0-404A-AAA4-1C5405BEEB5F@ehatchersolutions.com>
From: "Alan Chandler" <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is
  associated with Hits
Date: Wed, 07 Dec 2005 14:56:10 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: 7bit
Message-Id: <E1Ek0iI-0003hh-L4@home.chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 14:57:05.0889 (UTC) FILETIME=[7D505D10:01C5FB3E]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher writes: 

> 
> On Dec 7, 2005, at 7:06 AM, Alan Chandler wrote: 
> 
>> Erik Hatcher writes:
>>> On Dec 7, 2005, at 2:38 AM, Alan Chandler wrote:
>>>> Worse than that, when I attempt to access Hits.doc(0) I am  getting an
>>>> immediate IOException with the message "Bad file descriptor".  I   
>>>> think
>> ...
>>> You must keep your IndexSearcher instance alive and well when  working  
>>> with Hits.  Hits internally uses the searcher to page  through results  
>>> - it does not keep all results in memory.  I'm  not sure why you  aren't 
>>> seeing all the documents you expect, but  if you package it up  as a 
>>> simple RAMDirectory-using JUnit  TestCase then I'd be happy to  run it 
>>> and see.
>> 
>> mmm!  Going to have to rething my "Database" interface, so that I  
>> actually get the page of results I need coupled with the search.
>> How do you get over the fact that the hits may be on several web  pages 
>> and the user may go away between getting the hits and  actually 
>> retrieving a document in detail.  Do you have to serialize  the searcher 
>> and put it into a session?
> 
> One option is to just carry along the key to the document, generally  
> something unique like an "id" field.  When a request comes in for a  
> document, it would pass it's document id, not the hit number.  Then  
> simply search using a TermQuery for that document, or use IndexReader  to 
> navigate to it.

Yes, I am doing all of that for the majority of what I am doing.  The tricky 
one is getting an index of all my documents stored.  This could be more than 
one pages worth. 

But I found a copy of chapter 3 of your book on the web, where you recommend 
that you re-do the query for each page (I assume by querying and then 
calculating n based on page number and items_per_page to the call 
hits.doc(n); 

 


 --
Alan Chandler
alan@chandlerfamily.org.uk 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:05:27 2005
Return-Path: <java-user-return-17850-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3454 invoked from network); 7 Dec 2005 15:05:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:05:27 -0000
Received: (qmail 57222 invoked by uid 500); 7 Dec 2005 14:57:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57199 invoked by uid 500); 7 Dec 2005 14:57:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57179 invoked by uid 99); 7 Dec 2005 14:57:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 06:57:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 06:57:39 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2B5E413E201F; Wed,  7 Dec 2005 09:57:15 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4B0A713E201E
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 09:55:54 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <45f31c860512070548t5a0888eby1c40635c52d08ddf@mail.gmail.com>
References: <45f31c860512070049m42ff1a72tef12157c63526d7d@mail.gmail.com> <004301c5fb31$d3a9d860$0301a8c0@MALCOLM> <45f31c860512070548t5a0888eby1c40635c52d08ddf@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BAE9D402-5C34-4A5F-BC13-52556714CD4F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: repeating fields
Date: Wed, 7 Dec 2005 09:55:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 
	autolearn=unavailable version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 7, 2005, at 8:48 AM, Reza Ghaffaripour wrote:
> I think having different documents  will not be a good idea.
> for me each xml is an ebook. and "p" means paragraph.
> i have hundereds of paragraphs in every ebook. and i think i should  
> keep
> each ebook in a single
> document. am i right ?

How you design your index requires consideration of all you're trying  
to do with it.  It's an art form, in fact.  So while we can offer  
some ideas, ultimately you have to find what fits.   The granularity  
of what you index as a Document is the granularity of what you get  
back from searches as Hits.

There are blended approaches - an index does not have to be  
homogeneous in Document design.  You could have documents that  
represent the entire e-book, and documents that represent each  
paragraph.  You can use a field on each document "type" to  
distinguish them and filter in a search.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:10:43 2005
Return-Path: <java-user-return-17851-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11995 invoked from network); 7 Dec 2005 15:10:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:10:41 -0000
Received: (qmail 92204 invoked by uid 500); 7 Dec 2005 15:10:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92183 invoked by uid 500); 7 Dec 2005 15:10:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92156 invoked by uid 99); 7 Dec 2005 15:10:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:10:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.5 as permitted sender)
Received: from [195.188.213.5] (HELO smtp-out2.blueyonder.co.uk) (195.188.213.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:10:51 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out2.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 15:11:24 +0000
Received: from alan by home.chandlerfamily.org.uk with local (Exim 4.50)
	id 1Ek0w9-0003kq-3X
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 15:10:29 +0000
References: <200512070738.42886.alan@chandlerfamily.org.uk>
            <3ED83AB0-24B6-4510-B7C8-018CB23CD53C@ehatchersolutions.com>
            <E1Ejy40-0003Yc-SE@home.chandlerfamily.org.uk>
            <E52EEE80-BCF0-404A-AAA4-1C5405BEEB5F@ehatchersolutions.com>
In-Reply-To: <E52EEE80-BCF0-404A-AAA4-1C5405BEEB5F@ehatchersolutions.com>
From: "Alan Chandler" <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is
  associated with Hits
Date: Wed, 07 Dec 2005 15:10:29 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: 7bit
Message-Id: <E1Ek0w9-0003kq-3X@home.chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 15:11:24.0352 (UTC) FILETIME=[7CFF6C00:01C5FB40]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher writes:
>... or use IndexReader  to 
> navigate to it.

That is something I wanted to ask about 

IndexReader.TermPositions(Term t) 

Returns an object which returns all occurrences of term.  Is that what I use 
to find the actual position in my documents of the seach item? 


 --
Alan Chandler
alan@chandlerfamily.org.uk 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:10:54 2005
Return-Path: <java-user-return-17852-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12312 invoked from network); 7 Dec 2005 15:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:10:52 -0000
Received: (qmail 93466 invoked by uid 500); 7 Dec 2005 15:11:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93445 invoked by uid 500); 7 Dec 2005 15:11:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93434 invoked by uid 99); 7 Dec 2005 15:11:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:11:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:11:00 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5B6D013E2006; Wed,  7 Dec 2005 10:10:38 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9964413E2006
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 10:10:27 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <E1Ek0iI-0003hh-L4@home.chandlerfamily.org.uk>
References: <200512070738.42886.alan@chandlerfamily.org.uk> <3ED83AB0-24B6-4510-B7C8-018CB23CD53C@ehatchersolutions.com> <E1Ejy40-0003Yc-SE@home.chandlerfamily.org.uk> <E52EEE80-BCF0-404A-AAA4-1C5405BEEB5F@ehatchersolutions.com> <E1Ek0iI-0003hh-L4@home.chandlerfamily.org.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C5CD4133-07AA-47C9-BC3D-A97A9727ACEF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 10:10:24 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 7, 2005, at 9:56 AM, Alan Chandler wrote:

> Erik Hatcher writes:
>> On Dec 7, 2005, at 7:06 AM, Alan Chandler wrote:
>>> Erik Hatcher writes:
>>>> On Dec 7, 2005, at 2:38 AM, Alan Chandler wrote:
>>>>> Worse than that, when I attempt to access Hits.doc(0) I am   
>>>>> getting an
>>>>> immediate IOException with the message "Bad file descriptor".   
>>>>> I   think
>>> ...
>>>> You must keep your IndexSearcher instance alive and well when   
>>>> working  with Hits.  Hits internally uses the searcher to page   
>>>> through results  - it does not keep all results in memory.  I'm   
>>>> not sure why you  aren't seeing all the documents you expect,  
>>>> but  if you package it up  as a simple RAMDirectory-using JUnit   
>>>> TestCase then I'd be happy to  run it and see.
>>> mmm!  Going to have to rething my "Database" interface, so that  
>>> I  actually get the page of results I need coupled with the search.
>>> How do you get over the fact that the hits may be on several web   
>>> pages and the user may go away between getting the hits and   
>>> actually retrieving a document in detail.  Do you have to  
>>> serialize  the searcher and put it into a session?
>> One option is to just carry along the key to the document,  
>> generally  something unique like an "id" field.  When a request  
>> comes in for a  document, it would pass it's document id, not the  
>> hit number.  Then  simply search using a TermQuery for that  
>> document, or use IndexReader  to navigate to it.
>
> Yes, I am doing all of that for the majority of what I am doing.   
> The tricky one is getting an index of all my documents stored.   
> This could be more than one pages worth.
> But I found a copy of chapter 3 of your book on the web, where you  
> recommend that you re-do the query for each page (I assume by  
> querying and then calculating n based on page number and  
> items_per_page to the call hits.doc(n);

Ah, sorry, my initial response was not about paging through search  
results.  Yes, re-searching to page through searches is most commonly  
the best first approach.  And I've never had to choose a different  
approach as it has always proven plenty fast enough.  It isn't  
necessary to use the same IndexSearcher instance for all requests in  
this case, but it is wise to keep it around if the index hasn't changed.

The Luuuuuuucene navigation at the bottom of the results from  
lucenebook.com uses this technique of just multiplying the page  
number requested by the number of items per page and using that as an  
offset for the Hits enumeration for each page.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:11:09 2005
Return-Path: <java-user-return-17853-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12556 invoked from network); 7 Dec 2005 15:11:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:11:08 -0000
Received: (qmail 95094 invoked by uid 500); 7 Dec 2005 15:11:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95074 invoked by uid 500); 7 Dec 2005 15:11:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95063 invoked by uid 99); 7 Dec 2005 15:11:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:11:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:11:20 -0800
Received: by wproxy.gmail.com with SMTP id i23so340655wra
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 07:10:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pWykgC8fSUQnw8K7zNjYEvZne6oc0QiwKGRrTxdXk1xkhSNxj6mC9hptIv5i9EIUTDqQ1dXH0F7/i3smz8jySdgsAM8utxUdX00tr3OM0DPas8pNhMEb6KV2BCfPyeWP7hh5nIHndfMrRv1qpQazbuZvpbLBygflaJVBFor+qQY=
Received: by 10.65.250.3 with SMTP id c3mr1819476qbs;
        Wed, 07 Dec 2005 07:10:57 -0800 (PST)
Received: by 10.64.220.11 with HTTP; Wed, 7 Dec 2005 07:10:57 -0800 (PST)
Message-ID: <c68e39170512070710y168e881fg92a4e67277783e36@mail.gmail.com>
Date: Wed, 7 Dec 2005 10:10:57 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
In-Reply-To: <200512032242.59982.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <43903645.6000705@getopt.org>
	 <200512022127.00278.paul.elschot@xs4all.nl>
	 <43919910.1070007@getopt.org>
	 <200512032242.59982.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I checked out readVInt() to see if I could optimize it any...
For a random distribution of integers <200 I was able to speed it up a
little bit, but nothing to write home about:

                     old       new    percent
Java14-client : 13547  12468   8%
Java14-server:  6047     5266  14%
Java15-client:  11688  11234    4%
Java15-server:   5813    4875  19%
Java16-client:   11125  10719   4%
Java16-server:  6031     4859   24%

Then I tested it with integers <128, and it was slower (up to 25%) for
Java15-server, Java16-server, Java16-client.  Since <128 could be an
important case, I stopped there.

On a P4 2.8GHz, I was getting around 180M readVInt() calls per second
for single byte VInts (including loop and method call overhead).

Here is the fastest version I could come up with on a P4.  It's faster
with variable length vInts, slower will single bytes.

  public int readVInt() throws IOException {
    byte b =3D readByte();
    if ((b&0x80)=3D=3D0) return b;
    b &=3D 0x7f;
    byte b2 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b2<<7) | b;
    b2 &=3D 0x7f;
    byte b3 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b3<<14) | (b2<<7) | b;
    b3 &=3D 0x7f;
    byte b4 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b4<<21) | (b3<<14) | (b2<<7) | b;
    b4 &=3D 0x7f;
    byte b5 =3D readByte();
    return (b5<<28) | (b4<<21) | (b3<<14) | (b2<<7) | b;
  }


-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:15:49 2005
Return-Path: <java-user-return-17848-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18870 invoked from network); 7 Dec 2005 15:15:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:15:35 -0000
Received: (qmail 31378 invoked by uid 500); 7 Dec 2005 14:11:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31353 invoked by uid 500); 7 Dec 2005 14:11:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31339 invoked by uid 99); 7 Dec 2005 14:11:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 06:11:26 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 06:11:25 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14C1556C@mailer.syr.edu>; Wed, 7 Dec 2005 9:11:04 -0500
Message-ID: <4396ED76.6050703@syr.edu>
Date: Wed, 07 Dec 2005 09:11:02 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Similarity scores for all docs
References: <PKEIKOCKCHNIIHNECPCCIEANCCAA.koji.sekiguchi@m4.dion.ne.jp> <4396AEF6.8020101@nus.edu.sg>
In-Reply-To: <4396AEF6.8020101@nus.edu.sg>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can use the HitCollector mechanism to fill your array, but what you 
are doing is essentially what the Hits object already does, plus it 
provides caching

Eugene Ezekiel wrote:

> Yes, but what I wanna be able to do is something like, fill an array of
> say size 100 such that:
> array[0] = similarity value of query and doc(0)
> array[1] = similarity value of query and doc(1)
> ....
>
> Any idea how to fill this array?
>
> Thanks.
> -- 
> Regards,
> Eugene
>
> Koji Sekiguchi wrote:
>
>> You can get scores by calling Hits.score(). So you should search
>> at first to get Hits object.
>>
>> regards,
>>
>> Koji
>>
>>> -----Original Message-----
>>> From: Eugene Ezekiel [mailto:u0200783@nus.edu.sg]
>>> Sent: Wednesday, December 07, 2005 6:03 PM
>>> To: java-user@lucene.apache.org
>>> Subject: Similarity scores for all docs
>>>
>>>
>>> Hi,
>>>
>>> Is there any way to get the similarity scores for each document in 
>>> the index? I can iterate thru each doc in the index using the 
>>> IndexReader but not sure how to get the similarity score for that doc.
>>>
>>>
>>> Thanks.
>>>
>>> -- 
>>> Regards,
>>> Eugene
>>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
337 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:19:08 2005
Return-Path: <java-user-return-17843-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26494 invoked from network); 7 Dec 2005 15:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:19:07 -0000
Received: (qmail 16809 invoked by uid 500); 7 Dec 2005 13:26:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16788 invoked by uid 500); 7 Dec 2005 13:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16777 invoked by uid 99); 7 Dec 2005 13:26:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:26:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.198] (HELO smtp808.mail.ukl.yahoo.com) (217.12.12.198)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Dec 2005 05:26:56 -0800
Received: (qmail 4759 invoked from network); 7 Dec 2005 13:26:34 -0000
Received: from unknown (HELO MALCOLM) (malcyclark@btinternet.com@86.132.234.70 with login)
  by smtp808.mail.ukl.yahoo.com with SMTP; 7 Dec 2005 13:26:33 -0000
Message-ID: <004301c5fb31$d3a9d860$0301a8c0@MALCOLM>
From: "Malcolm" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <45f31c860512070049m42ff1a72tef12157c63526d7d@mail.gmail.com>
Subject: Re: repeating fields
Date: Wed, 7 Dec 2005 13:26:26 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Firstly you should obtain LUKE and check everything is layed out correctly 
in your index.
Secondly maybe a Wildcard/prefix query or termquery.for example(termquery):

TermQuery heTerm = new TermQuery(
           new Term("p",
               "x"));
   TermQuery sheTerm = new TermQuery(
           new Term("p",
               "xx"));
   TermQuery theyTerm = new TermQuery(
           new Term("p",
               "xxx"));

I'm sure the folks on here will be able to come up with a more efficient 
method.Try obtaining Lucene in Action or look at the examples at 
http://lucenebook.com/
cheers,
Malcolm Clark 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:20:50 2005
Return-Path: <java-user-return-17839-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29184 invoked from network); 7 Dec 2005 15:20:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:20:50 -0000
Received: (qmail 77552 invoked by uid 500); 7 Dec 2005 09:44:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77532 invoked by uid 500); 7 Dec 2005 09:44:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77508 invoked by uid 99); 7 Dec 2005 09:44:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 01:44:45 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [137.132.14.21] (HELO smtp.nus.edu.sg) (137.132.14.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 01:44:45 -0800
Received: from [192.168.1.100] ([202.156.249.91]) by smtp.nus.edu.sg over TLS secured channel with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 7 Dec 2005 17:44:23 +0800
Message-ID: <4396AEF6.8020101@nus.edu.sg>
Date: Wed, 07 Dec 2005 17:44:22 +0800
From: Eugene Ezekiel <u0200783@nus.edu.sg>
User-Agent: Thunderbird 1.4 (Windows/20050908)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Similarity scores for all docs
References: <PKEIKOCKCHNIIHNECPCCIEANCCAA.koji.sekiguchi@m4.dion.ne.jp>
In-Reply-To: <PKEIKOCKCHNIIHNECPCCIEANCCAA.koji.sekiguchi@m4.dion.ne.jp>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 07 Dec 2005 09:44:23.0138 (UTC) FILETIME=[CDD7C420:01C5FB12]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, but what I wanna be able to do is something like, fill an array of
say size 100 such that:
array[0] = similarity value of query and doc(0)
array[1] = similarity value of query and doc(1)
....

Any idea how to fill this array?

Thanks.
--
Regards,
Eugene

Koji Sekiguchi wrote:
> You can get scores by calling Hits.score(). So you should search
> at first to get Hits object.
> 
> regards,
> 
> Koji
> 
>> -----Original Message-----
>> From: Eugene Ezekiel [mailto:u0200783@nus.edu.sg]
>> Sent: Wednesday, December 07, 2005 6:03 PM
>> To: java-user@lucene.apache.org
>> Subject: Similarity scores for all docs
>>
>>
>> Hi,
>>
>> Is there any way to get the similarity scores for each document in the 
>> index? I can iterate thru each doc in the index using the IndexReader 
>> but not sure how to get the similarity score for that doc.
>>
>>
>> Thanks.
>>
>> --
>> Regards,
>> Eugene
>> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:22:56 2005
Return-Path: <java-user-return-17854-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31874 invoked from network); 7 Dec 2005 15:22:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:22:53 -0000
Received: (qmail 37518 invoked by uid 500); 7 Dec 2005 15:22:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37492 invoked by uid 500); 7 Dec 2005 15:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37481 invoked by uid 99); 7 Dec 2005 15:22:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:22:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.131] (HELO exchange-mbx.bvdep.com) (193.194.158.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:22:44 -0800
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
Subject: RE: Lucene performance bottlenecks
Date: Wed, 7 Dec 2005 16:22:19 +0100
Message-ID: <3287125F0F0CCE4E8F55435208100CF534EE81@exchange-mbx.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene performance bottlenecks
Thread-Index: AcX7QH9LjDMeqcZLRHOmGkqBSa4fagAAOU+g
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Since 'byte' is signed in Java, can't the first test be simply written
as
if (b>0) return b;
Doing an 'and' of two bytes and checking if the result is 0 probably
requires masking operations on >8 bit processors...

Also perhaps change to
int b=3DreadByte()) so that all operators use int's...

Luc

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]=20
Sent: woensdag 7 december 2005 16:11
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks

I checked out readVInt() to see if I could optimize it any...
For a random distribution of integers <200 I was able to speed it up a
little bit, but nothing to write home about:

                     old       new    percent
Java14-client : 13547  12468   8%
Java14-server:  6047     5266  14%
Java15-client:  11688  11234    4%
Java15-server:   5813    4875  19%
Java16-client:   11125  10719   4%
Java16-server:  6031     4859   24%

Then I tested it with integers <128, and it was slower (up to 25%) for
Java15-server, Java16-server, Java16-client.  Since <128 could be an
important case, I stopped there.

On a P4 2.8GHz, I was getting around 180M readVInt() calls per second
for single byte VInts (including loop and method call overhead).

Here is the fastest version I could come up with on a P4.  It's faster
with variable length vInts, slower will single bytes.

  public int readVInt() throws IOException {
    byte b =3D readByte();
    if ((b&0x80)=3D=3D0) return b;
    b &=3D 0x7f;
    byte b2 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b2<<7) | b;
    b2 &=3D 0x7f;
    byte b3 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b3<<14) | (b2<<7) | b;
    b3 &=3D 0x7f;
    byte b4 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b4<<21) | (b3<<14) | (b2<<7) | b;
    b4 &=3D 0x7f;
    byte b5 =3D readByte();
    return (b5<<28) | (b4<<21) | (b3<<14) | (b2<<7) | b;
  }


-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:23:44 2005
Return-Path: <java-user-return-17844-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32976 invoked from network); 7 Dec 2005 15:23:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:23:40 -0000
Received: (qmail 22836 invoked by uid 500); 7 Dec 2005 13:28:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22792 invoked by uid 500); 7 Dec 2005 13:28:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22770 invoked by uid 99); 7 Dec 2005 13:28:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:28:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:28:40 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3057D13E2006; Wed,  7 Dec 2005 08:28:17 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7F9A213E201F
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 08:28:09 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <E1Ejy40-0003Yc-SE@home.chandlerfamily.org.uk>
References: <200512070738.42886.alan@chandlerfamily.org.uk> <3ED83AB0-24B6-4510-B7C8-018CB23CD53C@ehatchersolutions.com> <E1Ejy40-0003Yc-SE@home.chandlerfamily.org.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E52EEE80-BCF0-404A-AAA4-1C5405BEEB5F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 08:28:04 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 7, 2005, at 7:06 AM, Alan Chandler wrote:

> Erik Hatcher writes:
>> On Dec 7, 2005, at 2:38 AM, Alan Chandler wrote:
>>> Worse than that, when I attempt to access Hits.doc(0) I am  
>>> getting an
>>> immediate IOException with the message "Bad file descriptor".  I   
>>> think
> ...
>> You must keep your IndexSearcher instance alive and well when  
>> working  with Hits.  Hits internally uses the searcher to page  
>> through results  - it does not keep all results in memory.  I'm  
>> not sure why you  aren't seeing all the documents you expect, but  
>> if you package it up  as a simple RAMDirectory-using JUnit  
>> TestCase then I'd be happy to  run it and see.
>
> mmm!  Going to have to rething my "Database" interface, so that I  
> actually get the page of results I need coupled with the search.
> How do you get over the fact that the hits may be on several web  
> pages and the user may go away between getting the hits and  
> actually retrieving a document in detail.  Do you have to serialize  
> the searcher and put it into a session?

One option is to just carry along the key to the document, generally  
something unique like an "id" field.  When a request comes in for a  
document, it would pass it's document id, not the hit number.  Then  
simply search using a TermQuery for that document, or use IndexReader  
to navigate to it.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:28:36 2005
Return-Path: <java-user-return-17855-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44089 invoked from network); 7 Dec 2005 15:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:28:35 -0000
Received: (qmail 53995 invoked by uid 500); 7 Dec 2005 15:28:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53969 invoked by uid 500); 7 Dec 2005 15:28:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53958 invoked by uid 99); 7 Dec 2005 15:28:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:28:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO zproxy.gmail.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:28:27 -0800
Received: by zproxy.gmail.com with SMTP id o37so452039nzf
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 07:28:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=B3SXO0u4t+1BtmW4AleB/TSiWzkJpX7jDRQGQaztV4sm00CpKIVRvKu0PMhwvh6j+a0UBkh1qIhO2uE3hXr34h5AG4XOOaAIVkxmDV4tmfdLSmLjv8IadOtyX/LJ4x87XM9rBwPGf5clp8hwKKJ7wwzVwTwguvrYWdCVvG5fNMw=
Received: by 10.65.105.12 with SMTP id h12mr1841869qbm;
        Wed, 07 Dec 2005 07:28:06 -0800 (PST)
Received: by 10.64.220.11 with HTTP; Wed, 7 Dec 2005 07:28:06 -0800 (PST)
Message-ID: <c68e39170512070728o64534585mbe6b01a713f58956@mail.gmail.com>
Date: Wed, 7 Dec 2005 10:28:06 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
In-Reply-To: <3287125F0F0CCE4E8F55435208100CF534EE81@exchange-mbx.be.bvd>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <3287125F0F0CCE4E8F55435208100CF534EE81@exchange-mbx.be.bvd>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/7/05, Vanlerberghe, Luc <Luc.Vanlerberghe@bvdep.com> wrote:
> Since 'byte' is signed in Java, can't the first test be simply written
> as
> if (b>0) return b;
> Doing an 'and' of two bytes and checking if the result is 0 probably
> requires masking operations on >8 bit processors...

Yep, that was my assumption and what I started off with actually.
Lo and behold, it was slower than the mask.  I have no idea why.

> Also perhaps change to
> int b=3DreadByte()) so that all operators use int's...

That was also my instinct... didn't pan out.

Below is the test program I used, as well as most of the variations
(some I just edited and are gone...).  VInt2a was consistently fastest
of the variations.  VInt1 is the original nad is fastest for all
single byte vints.

-Yonik


import java.io.IOException;
import java.util.Random;

/**
 * @author yonik
 */


class VInt1 extends VInt {
  public int readVInt() throws IOException {
    byte b =3D readByte();
    int i =3D b & 0x7F;
    for (int shift =3D 7; (b & 0x80) !=3D 0; shift +=3D 7) {
      b =3D readByte();
      i |=3D (b & 0x7F) << shift;
    }
    return i;
  }
}



class VInt2 extends VInt {
  public int readVInt() throws IOException {
    byte b =3D readByte();
    if (b>=3D0) return b;
    b &=3D 0x7f;
    byte b2 =3D readByte();
    if (b2>=3D0) return (b2<<7) | b;
    b2 &=3D 0x7f;
    byte b3 =3D readByte();
    if (b3>=3D0) return (b3<<14) | (b2<<7) | b;
    b3 &=3D 0x7f;
    byte b4 =3D readByte();
    if (b4>=3D0) return (b4<<21) | (b3<<14) | (b2<<7) | b;
    b4 &=3D 0x7f;
    byte b5 =3D readByte();
    return (b5<<28) | (b4<<21) | (b3<<14) | (b2<<7) | b;
  }
}

class VInt2a extends VInt {
  public int readVInt() throws IOException {
    byte b =3D readByte();
    if ((b&0x80)=3D=3D0) return b;
    b &=3D 0x7f;
    byte b2 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b2<<7) | b;
    b2 &=3D 0x7f;
    byte b3 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b3<<14) | (b2<<7) | b;
    b3 &=3D 0x7f;
    byte b4 =3D readByte();
    if ((b&0x80)=3D=3D0) return (b4<<21) | (b3<<14) | (b2<<7) | b;
    b4 &=3D 0x7f;
    byte b5 =3D readByte();
    return (b5<<28) | (b4<<21) | (b3<<14) | (b2<<7) | b;
  }
}


class VInt3 extends VInt {
  public int readVInt() throws IOException {
    int b =3D readByte();
    if (b>=3D0) return b;
    b &=3D 0x7f;
    int b2 =3D readByte();
    if (b2>=3D0) return (b2<<7) | b;
    b2 &=3D 0x7f;
    int b3 =3D readByte();
    if (b3>=3D0) return (b3<<14) | (b2<<7) | b;
    b3 &=3D 0x7f;
    int b4 =3D readByte();
    if (b4>=3D0) return (b4<<21) | (b3<<14) | (b2<<7) | b;
    b4 &=3D 0x7f;
    int b5 =3D readByte();
    return (b5<<28) | (b4<<21) | (b3<<14) | (b2<<7) | b;
  }
}

class VInt3a extends VInt {
  public int readVInt() throws IOException {
    int b =3D readByte();
    if (b>=3D0) return b;
    b &=3D 0x7f;
    int b2 =3D readByte();
    if (b2>=3D0) return (b2<<7) | b;
    b2 &=3D 0x7f;
    int b3 =3D readByte();
    if (b3>=3D0) return (b3<<14) | (b2<<7) | b;
    b3 &=3D 0x7f;
    int b4 =3D readByte();
    if (b4>=3D0) return (b4<<21) | (b3<<14) | (b2<<7) | b;
    b4 &=3D 0x7f;
    int b5 =3D readByte();
    return (b5<<28) | (b4<<21) | (b3<<14) | (b2<<7) | b;
  }
}

class VInt4 extends VInt {
  public int readVInt() throws IOException {
     byte b =3D readByte();
     if (b>=3D0) return b;
     byte b2 =3D readByte();
     if (b2>=3D0) return (b2<<7) | (b&0x7f);
     byte b3 =3D readByte();
     if (b3>=3D0) return (b3<<14) | ((b2&0x7f)<<7) | (b&0x7f);
     byte b4 =3D readByte();
     if (b4>=3D0) return (b4<<21) | ((b3&0x7f)<<14) | ((b2&0x7f)<<7) | (b&0=
x7f);
     byte b5 =3D readByte();
     return (b5<<28) | ((b4&0x7f)<<21) | ((b3&0x7f)<<14) |
((b2&0x7f)<<7) | (b&0x7f);
   }
}

class VInt5 extends VInt {
  public int readVInt() throws IOException {
    int i =3D readByte();
    if (i>=3D0) return i;
    i =3D (i & 0x7f) | (readByte() << 7);
    if (i>=3D0) return i;
    i =3D (i & (-1>>>(32-14))) | (readByte() << 14);
    if (i>=3D0) return i;
    i =3D (i & (-1>>>(32-21))) | (readByte() << 21);
    if (i>=3D0) return i;
    i =3D (i & (-1>>>(32-28))) | (readByte() << 28);
    return i;
  }
}

class VInt6 extends VInt {
  public int readVInt() throws IOException {
    byte b =3D readByte();
    int i =3D b;
    if (b>=3D0) return i;
    i &=3D 0x7f;
    b =3D readByte();
    i |=3D (b & 0x7f)<<7;
    if (b>=3D0) return i;
    b =3D readByte();
    i |=3D (b & 0x7f)<<14;
    if (b>=3D0) return i;
    b =3D readByte();
    i |=3D (b & 0x7f)<<21;
    if (b>=3D0) return i;
    b =3D readByte();
    i |=3D b<<28;
    return i;
  }
}

class VInt6a extends VInt {
  public int readVInt() throws IOException {
    byte b =3D readByte();
    int i =3D b;
    if ((b&0x80)=3D=3D0) return i;
    i &=3D 0x7f;
    b =3D readByte();
    i |=3D (b & 0x7f)<<7;
    if ((b&0x80)=3D=3D0) return i;
    b =3D readByte();
    i |=3D (b & 0x7f)<<14;
    if ((b&0x80)=3D=3D0) return i;
    b =3D readByte();
    i |=3D (b & 0x7f)<<21;
    if ((b&0x80)=3D=3D0) return i;
    b =3D readByte();
    i |=3D b<<28;
    return i;
  }
}


public class VInt {
  byte[] arr =3D new byte[4096];
  int pos =3D 0;

  public void reset() { pos=3D0; }

  public byte readByte() {
    return arr[pos++];
  }

  public void writeByte(byte b) {
    arr[pos++] =3D b;
  }

  public int readVInt() throws IOException {
    return 0;
  }

  public void writeVInt(int i) throws IOException {
    while ((i & ~0x7F) !=3D 0) {
      writeByte((byte)((i & 0x7f) | 0x80));
      i >>>=3D 7;
    }
    writeByte((byte)i);
  }


  public static void main(String[] args) throws IOException,
ClassNotFoundException, IllegalAccessException, InstantiationException
{
    String impl =3D args[0];
    int maxnum=3D Integer.parseInt(args[1]);  // maximum vint value
    int iter =3D Integer.parseInt(args[2]);

    VInt vint =3D new VInt1();
    VInt test =3D (VInt)Class.forName(impl).newInstance();

    Random rand =3D new Random(0);
   while (vint.pos<vint.arr.length-5) {
      int i =3D rand.nextInt(maxnum);
      vint.writeVInt(i);
      test.writeVInt(i);
    }
    int end =3D vint.pos+1;



    test.reset(); vint.reset();
    while (vint.pos<end) {
      int i =3D vint.readVInt();
      int i2 =3D test.readVInt();
      if (i !=3D i2) {
        System.out.println("ERROR!!! " + Integer.toHexString(i) + ","
+ Integer.toHexString(i2));
      }
    }

    int ret=3D0;
    long start =3D System.currentTimeMillis();
    for (int i=3D0; i<iter; i++) {
      test.reset();
      while (test.pos < end) {
        ret +=3D test.readVInt();
      }
    }

    long stop =3D System.currentTimeMillis();
    System.out.println("TIME=3D"+(stop-start) + "\tret=3D"+ret);
  }

}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:30:17 2005
Return-Path: <java-user-return-17840-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47416 invoked from network); 7 Dec 2005 15:30:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:30:17 -0000
Received: (qmail 94035 invoked by uid 500); 7 Dec 2005 09:54:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94002 invoked by uid 500); 7 Dec 2005 09:54:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93990 invoked by uid 99); 7 Dec 2005 09:54:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 01:54:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 01:54:11 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jB79rr930026
	for <java-user@lucene.apache.org>; Wed, 7 Dec 2005 03:53:53 -0600
Message-ID: <4396B0B5.50901@getopt.org>
Date: Wed, 07 Dec 2005 10:51:49 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <43903645.6000705@getopt.org> <200512022127.00278.paul.elschot@xs4all.nl> <43919910.1070007@getopt.org> <200512032242.59982.paul.elschot@xs4all.nl>
In-Reply-To: <200512032242.59982.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Elschot wrote:

>On Saturday 03 December 2005 14:09, Andrzej Bialecki wrote:
>  
>
>>Paul Elschot wrote:
>>
>>    
>>
>>>In somewhat more readable layout:
>>>
>>>+(url:term1^4.0 anchor:term1^2.0 content:term1
>>>  title:term1^1.5  host:term1^2.0)
>>>+(url:term2^4.0 anchor:term2^2.0 content:term2
>>>  title:term2^1.5 host:term2^2.0)
>>>url:"term1 term2"~2147483647^4.0 
>>>anchor:"term1 term2"~4^2.0
>>>content:"term1 term2"~2147483647
>>>title:"term1 term2"~2147483647^1.5
>>>host:"term1 term2"~2147483647^2.0
>>>
>>>The first two clauses with + prefixes are required, and I would guess
>>>that the 5 way disjunctions inside these clauses take most of the cpu time
>>>during search.
>>> 
>>>
>>>      
>>>
>>That's an interesting observation. This suggests that it could pay off 
>>to glue these fields together and change this to a query on a single 
>>combined field, right? I.e. to trade off space for speed.
>>    
>>
>
>Yes.
>  
>

Unfortunately, that's not the option... Nutch uses these clauses to 
affect the final score value, i.e. it has to use different fields in 
order to apply different boost values per field, both in the query and 
in the encoded fieldNorms.

>Querying the host field like this in a web page index can be dangerous
>business. For example when term1 is "wikipedia" and term2 is "org",
>the query will match at least all pages from wikipedia.org.
>
>  
>

Well, that's the idea - all pages in wikipedia.org are somehow relevant 
to a query "wikipedia org". How relevant depends on the weights of 
individual clauses (in addition to the usual tf / idf / fieldNorm)..

>>>The remaining clauses will be skipped to only when the two required
>>>clauses are both present, so these are probably not the problem.
>>>In the call tree for scoring these can be identified by the skipTo()
>>>being called inside the score() method at the top level.
>>>
>>>This is one of the cases in which BooleanScorer2 can be faster
>>>than the 1.4 BooleanScorer because the 1.4 BooleanScorer does
>>>not use skipTo() for the optional clauses.
>>>Could you try this by calling the static method
>>>BooleanQuery.setUseScorer14(true) and repeating the test?
>>>      
>>>


As far as I can tell it doesn't make any statistically significant 
difference - all search times remain nearly the same. If anything the 
test runs with useScorer14 == true are fractionally faster.

>>>>>From the hot spots output of the profiler info I see that the following 
>>>      
>>>
>methods:
>  
>
>>>- PhrasePositions.nextPosition
>>>- SegmentTermDocs.read
>>>have a larger portion of cpu time spent in the method.
>>>Looking at the expanded query, seeing PhrasePositions.nextPosition
>>>here is not a surprise.
>>>
>>>The fact that SegmentTermDocs.read shows up might explain
>>>the reason why only a little heap is used:  Lucene normally leaves
>>>the file buffering to the operating system, and
>>>when the file buffers are read the index data is decompressed
>>>mostly by the readVInt method.
>>> 
>>>
>>>      
>>>
>>Yes, I understand it now. But perhaps it's time to contest this 
>>approach: if there is so much heap available, does it still make sense 
>>to rely so much on OS caching, if we have the space to do the caching 
>>inside JVM (at least for a large portion of the index)?
>>    
>>
>
>You can try and use Lucene's RAMDirectory when you have enough RAM.
>However, for larger indexes, It is easier to fit the index files  in RAM
>(in OS buffers) than the decompressed index data (inside the JVM).
>
>Also, caching query results by query text is probably more effective
>than caching the JVM version of the searched index data.
>  
>

The problem here is not with the disk I/O, so I don't think RAMDirectory 
would help, even if I had the required 30GB of RAM - the problem is with 
the number of invocations of readVInt(), which for my test scenarios was 
called on average 2.5 times for a single doc in the index, per query (in 
this case, for a single query run against a 10 mln docs index it was 
invoked ~25 mln times). I tried changing the TermIndexInterval (I tested 
it with values ranging from 16 to 512), but there were no significant 
differences in speed, although of course the memory consumption was very 
different. I would happily trade a lot of heap space in order to 
increase performence of such complex queries. But at the moment there is 
no way to do it that I can see...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:36:28 2005
Return-Path: <java-user-return-17845-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56544 invoked from network); 7 Dec 2005 15:36:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:36:18 -0000
Received: (qmail 64910 invoked by uid 500); 7 Dec 2005 13:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64720 invoked by uid 500); 7 Dec 2005 13:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64709 invoked by uid 99); 7 Dec 2005 13:43:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:43:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.204] (HELO smtp814.mail.ukl.yahoo.com) (217.12.12.204)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Dec 2005 05:43:56 -0800
Received: (qmail 79166 invoked from network); 7 Dec 2005 13:43:35 -0000
Received: from unknown (HELO MALCOLM) (malcyclark@btinternet.com@86.132.234.70 with login)
  by smtp814.mail.ukl.yahoo.com with SMTP; 7 Dec 2005 13:43:35 -0000
Message-ID: <005e01c5fb34$349b95d0$0301a8c0@MALCOLM>
From: "Malcolm" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <200512061547.24188.jdpatterson@gmail.com> <Pine.LNX.4.58.0512061238000.4277@hal.rescomp.berkeley.edu>
Subject: Re: Non scoring search
Date: Wed, 7 Dec 2005 13:43:28 -0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_005B_01C5FB34.342D91C0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_005B_01C5FB34.342D91C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Probably being very naive here but:
These are my index details:

Location:C:\LuceneDemo\Project6thDec
Number of documents in Index: 571
Index Current Version: 2
Last Modified: 1133899684000
The index has not had any deletions.

What is: Last Modified: 1133899684000?

I thought of indexing a date for each field but it's too inefficient as =
I only want it once.I just want the date for the index.Where does it =
lie?
cheers,
Malcolm
------=_NextPart_000_005B_01C5FB34.342D91C0--


From java-user-return-17846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:40:31 2005
Return-Path: <java-user-return-17846-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61976 invoked from network); 7 Dec 2005 15:40:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:40:31 -0000
Received: (qmail 81256 invoked by uid 500); 7 Dec 2005 13:48:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81232 invoked by uid 500); 7 Dec 2005 13:48:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81221 invoked by uid 99); 7 Dec 2005 13:48:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:48:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rezaghp@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:48:24 -0800
Received: by wproxy.gmail.com with SMTP id i14so663202wra
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 05:48:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CAWMH/gy/PvZWaATfWr8Mm1fNDAlVLUXH7Rfr90iflMlIgu9WOmoqmNJLHZG8IrdPICJMLiliBLKndOX61ekM4S0w0k6lRlTQ62OZpyZjZNQ8phnRKIW75tfDZw0yADqNAUXMbfc1ZPkKLMby4HdTukDIdFuAKIlw9L6rUF1Yfg=
Received: by 10.54.91.16 with SMTP id o16mr552901wrb;
        Wed, 07 Dec 2005 05:46:51 -0800 (PST)
Received: by 10.54.135.5 with HTTP; Wed, 7 Dec 2005 05:48:02 -0800 (PST)
Message-ID: <45f31c860512070548t5a0888eby1c40635c52d08ddf@mail.gmail.com>
Date: Wed, 7 Dec 2005 17:18:02 +0330
From: Reza Ghaffaripour <rezaghp@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: repeating fields
In-Reply-To: <004301c5fb31$d3a9d860$0301a8c0@MALCOLM>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9597_13983693.1133963282396"
References: <45f31c860512070049m42ff1a72tef12157c63526d7d@mail.gmail.com>
	 <004301c5fb31$d3a9d860$0301a8c0@MALCOLM>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9597_13983693.1133963282396
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I think having different documents  will not be a good idea.
for me each xml is an ebook. and "p" means paragraph.
i have hundereds of paragraphs in every ebook. and i think i should keep
each ebook in a single
document. am i right ?

On 12/7/05, Malcolm <malcyclark@btinternet.com> wrote:
>
>
> Firstly you should obtain LUKE and check everything is layed out correctl=
y
> in your index.
> Secondly maybe a Wildcard/prefix query or termquery.forexample(termquery)=
:
>
> TermQuery heTerm =3D new TermQuery(
>            new Term("p",
>                "x"));
>    TermQuery sheTerm =3D new TermQuery(
>            new Term("p",
>                "xx"));
>    TermQuery theyTerm =3D new TermQuery(
>            new Term("p",
>                "xxx"));
>
> I'm sure the folks on here will be able to come up with a more efficient
> method.Try obtaining Lucene in Action or look at the examples at
> http://lucenebook.com/
> cheers,
> Malcolm Clark
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Reza Ghaffaripour
www.rezaghp.com

------=_Part_9597_13983693.1133963282396--

From java-user-return-17847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:43:40 2005
Return-Path: <java-user-return-17847-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65914 invoked from network); 7 Dec 2005 15:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:43:37 -0000
Received: (qmail 87800 invoked by uid 500); 7 Dec 2005 13:51:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87763 invoked by uid 500); 7 Dec 2005 13:51:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87750 invoked by uid 99); 7 Dec 2005 13:51:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:51:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.195] (HELO smtp805.mail.ukl.yahoo.com) (217.12.12.195)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 07 Dec 2005 05:51:26 -0800
Received: (qmail 62084 invoked from network); 7 Dec 2005 13:51:05 -0000
Received: from unknown (HELO MALCOLM) (malcyclark@btinternet.com@86.132.234.70 with login)
  by smtp805.mail.ukl.yahoo.com with SMTP; 7 Dec 2005 13:51:04 -0000
Message-ID: <006f01c5fb35$406a3d70$0301a8c0@MALCOLM>
From: "Malcolm" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <45f31c860512070049m42ff1a72tef12157c63526d7d@mail.gmail.com> <004301c5fb31$d3a9d860$0301a8c0@MALCOLM> <45f31c860512070548t5a0888eby1c40635c52d08ddf@mail.gmail.com>
Subject: Re: repeating fields
Date: Wed, 7 Dec 2005 13:50:57 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2670
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


That's what I have, loads of different <p> tags and <abs>(abstract) tags etc 
in each xml document so a lucene document for each is okay.
malcolm 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:43:55 2005
Return-Path: <java-user-return-17856-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66324 invoked from network); 7 Dec 2005 15:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:43:53 -0000
Received: (qmail 1326 invoked by uid 500); 7 Dec 2005 15:43:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1299 invoked by uid 500); 7 Dec 2005 15:43:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1286 invoked by uid 99); 7 Dec 2005 15:43:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:43:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:43:45 -0800
Received: by zproxy.gmail.com with SMTP id 40so381498nzk
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 07:43:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bmgG4KPcATRVDJxoYpn0xnPVggrdOk55wb4FSl34zNEAj3g9ts5cvd+2rWJAnwqfC2n+g1pUyXBuiv4rHBYp7XX+1E9aGi10cfBAAGxVgeBqEPOX3PCDR8ijc7W42NK+RUfbbfWlxcd7VepRzXy1KNS6+JsDJbayFhDtfQOVJ40=
Received: by 10.65.126.18 with SMTP id d18mr1800695qbn;
        Wed, 07 Dec 2005 07:43:23 -0800 (PST)
Received: by 10.64.220.11 with HTTP; Wed, 7 Dec 2005 07:43:22 -0800 (PST)
Message-ID: <c68e39170512070743w3be062eal75ade9ce567f99d9@mail.gmail.com>
Date: Wed, 7 Dec 2005 10:43:22 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
In-Reply-To: <c68e39170512070728o64534585mbe6b01a713f58956@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <3287125F0F0CCE4E8F55435208100CF534EE81@exchange-mbx.be.bvd>
	 <c68e39170512070728o64534585mbe6b01a713f58956@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> if (b>0) return b;
> Doing an 'and' of two bytes and checking if the result is 0 probably
> requires masking operations on >8 bit processors...

Sometimes you can get a peek into how a JVM would optimize things by
looking at the asm output of the code from a C compiler.
Both (b>=3D0) and ((b&0x80)!=3D0) generated the exact same asm in gcc:

        testb   %al, %al
        js      L4

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 15:46:28 2005
Return-Path: <java-user-return-17857-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69210 invoked from network); 7 Dec 2005 15:46:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 15:46:26 -0000
Received: (qmail 9870 invoked by uid 500); 7 Dec 2005 15:46:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9726 invoked by uid 500); 7 Dec 2005 15:46:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9702 invoked by uid 99); 7 Dec 2005 15:46:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:46:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.6 as permitted sender)
Received: from [195.188.213.6] (HELO smtp-out3.blueyonder.co.uk) (195.188.213.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 07:46:18 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out3.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 15:46:50 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1Ek1UP-0003pP-7t
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 15:45:55 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 15:45:31 +0000
User-Agent: KMail/1.8.2
References: <200512070738.42886.alan@chandlerfamily.org.uk>
In-Reply-To: <200512070738.42886.alan@chandlerfamily.org.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512071545.32454.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 15:46:51.0211 (UTC) FILETIME=[70B459B0:01C5FB45]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 07 Dec 2005 07:38, Alan Chandler wrote:
> I am trying to construct, via individual query api, a query to search for
> documents with a field name of "Category" and a value of either "Category1"
> OR "Category2" (or both).
>
> My code to do this (given categories is the set of strings with the
> category names I wish to search for) is as follows
>
> 		BooleanQuery query = new BooleanQuery();

Actually I cheated a little when I posted that. Because I missed out  ...

		query.add(config,false,true); //This clause misses out the config document
		if (onlyPublished) {
			query.add(published,true,false); // limit to published articles
		}


> 		if (categories != null && !categories.isEmpty()) {
> 			for (String category : categories) {
> 				TermQuery t =new TermQuery(new Term("Category",category));
> 				query.add(t,false,false); //Saywould like that category
> 			}
> 		}
>

In otherwords my BooleanQuery was more complex than I let on.

Now I have solved the other problem or getting to see the Hits without an 
IOException (by keeping the indexWriter open) I can see that what is returned 
is ONLY the document defined by the first term (ie labelled config in the 
above code snippet).

(My config document has the field "ID" set to value "0" - all the other 
documents have a single field called "ID" set to the string of a positive 
integer so config is defined as 

private static final TermQuery config =new TermQuery(new Term("ID","0"));
)

I thought that term, with the "prohibited" set to true prevented this one 
being a match.

What I seem to have is therefore the inverse of what I was expecting - so what 
have I misunderstood here?

-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 16:15:02 2005
Return-Path: <java-user-return-17841-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3376 invoked from network); 7 Dec 2005 16:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 16:14:59 -0000
Received: (qmail 49324 invoked by uid 500); 7 Dec 2005 12:06:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49284 invoked by uid 500); 7 Dec 2005 12:06:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49255 invoked by uid 99); 7 Dec 2005 12:06:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 04:06:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.4 as permitted sender)
Received: from [195.188.213.4] (HELO smtp-out1.blueyonder.co.uk) (195.188.213.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 04:06:47 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out1.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 12:07:20 +0000
Received: from alan by home.chandlerfamily.org.uk with local (Exim 4.50)
	id 1Ejy40-0003Yc-SE
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 12:06:24 +0000
References: <200512070738.42886.alan@chandlerfamily.org.uk>
            <3ED83AB0-24B6-4510-B7C8-018CB23CD53C@ehatchersolutions.com>
In-Reply-To: <3ED83AB0-24B6-4510-B7C8-018CB23CD53C@ehatchersolutions.com>
From: "Alan Chandler" <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is
  associated with Hits
Date: Wed, 07 Dec 2005 12:06:24 +0000
Mime-Version: 1.0
Content-Type: text/plain; charset="utf-8"; format=flowed
Content-Transfer-Encoding: 7bit
Message-Id: <E1Ejy40-0003Yc-SE@home.chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 12:07:20.0186 (UTC) FILETIME=[C6296DA0:01C5FB26]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher writes: 

> 
> On Dec 7, 2005, at 2:38 AM, Alan Chandler wrote:
>> Worse than that, when I attempt to access Hits.doc(0) I am getting an
>> immediate IOException with the message "Bad file descriptor".  I  think 
...
> 
> You must keep your IndexSearcher instance alive and well when working  
> with Hits.  Hits internally uses the searcher to page through results  - 
> it does not keep all results in memory.  I'm not sure why you  aren't 
> seeing all the documents you expect, but if you package it up  as a simple 
> RAMDirectory-using JUnit TestCase then I'd be happy to  run it and see.

mmm!  Going to have to rething my "Database" interface, so that I actually 
get the page of results I need coupled with the search. 

How do you get over the fact that the hits may be on several web pages and 
the user may go away between getting the hits and actually retrieving a 
document in detail.  Do you have to serialize the searcher and put it into a 
session? 


 --
Alan Chandler
alan@chandlerfamily.org.uk 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 16:17:33 2005
Return-Path: <java-user-return-17842-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4974 invoked from network); 7 Dec 2005 16:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 16:17:04 -0000
Received: (qmail 6820 invoked by uid 500); 7 Dec 2005 13:23:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6637 invoked by uid 500); 7 Dec 2005 13:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6608 invoked by uid 99); 7 Dec 2005 13:23:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:23:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 05:23:05 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C99A913E2006; Wed,  7 Dec 2005 08:22:43 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id F02B413E2006
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 08:22:39 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <45f31c860512070049m42ff1a72tef12157c63526d7d@mail.gmail.com>
References: <45f31c860512070049m42ff1a72tef12157c63526d7d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <019BB9C6-530C-46D8-94FE-2D599A7FA0E1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: repeating fields
Date: Wed, 7 Dec 2005 08:22:33 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 7, 2005, at 3:49 AM, Reza Ghaffaripour wrote:

> hi all,
> im new to lucene. i have an xml with repeating tags.something like :
> <a>
> <p>x</p>
> <p>xx</p>
> <p>xxx</p>
> <p>xxxx</p>
> </a>
>
> I add the "p" field as follows:
> myDocument.add(Field.Text("p", "x"));
> myDocument.add(Field.Text("p", "xx"));
>
> but when i search for "x" it returns the first hit only.
> what should i do ? i want to search for "x" and get all the 4 hits.

Hits return Documents.  You indexed only a single document, not 4.   
If you would like each <p> element to be a separate hit then index  
each as a separate Document.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 18:36:50 2005
Return-Path: <java-user-return-17858-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94283 invoked from network); 7 Dec 2005 18:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 18:36:50 -0000
Received: (qmail 55599 invoked by uid 500); 7 Dec 2005 18:36:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55572 invoked by uid 500); 7 Dec 2005 18:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55545 invoked by uid 99); 7 Dec 2005 18:36:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 10:36:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 66.249.82.197 as permitted sender)
Received: from [66.249.82.197] (HELO xproxy.gmail.com) (66.249.82.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 10:36:42 -0800
Received: by xproxy.gmail.com with SMTP id i29so256073wxd
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 10:36:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=Z2KcfzqIBrDC6yZ8TapNUToZMgqXv3l+xoUDgxfZO9aqV5yvzWbOu2fhA9iXtjFxjhD3AaUe2i0qyVE0X1E15Kl4r4M2dQ3ixau1+gRHLhwDYKOWfdNAuWeHxtWYoebbp5OQhUqx3cGm5dTkbQ4az/9jN/uJekwSNyx8mJ2ywKw=
Received: by 10.70.78.1 with SMTP id a1mr2537651wxb;
        Wed, 07 Dec 2005 10:36:21 -0800 (PST)
Received: by 10.70.27.20 with HTTP; Wed, 7 Dec 2005 10:36:21 -0800 (PST)
Message-ID: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com>
Date: Wed, 7 Dec 2005 13:36:21 -0500
From: Beady Geraghty <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: words with more than 1 hyphen ?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3502_4943265.1133980581309"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3502_4943265.1133980581309
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I am back to doing something with Lucene after a short break from it.

I am trying to index/search hyphenated words,
and retrieve them from a token stream.

1. I modified the StandardTokenizer.jj file.

   Essentially, I added the following to StandardTokenizer.jj
 | <HYPHENWORD1: (<LETTER>)+"-"(<LETTER>)+("-"<LETTER>)*>

2. I used JavaCC to get a set of .java files including a
    tokenizer.

3. I modified the file to use
   org.apache.lucene.analysis.standard classes, such as Token,CharStream
   instead of the ones provided by javaCC.

4. I was able to index and retrieve words like
merry-go-round (as oppose to merry go round).  So, I
was quite happy.
Now I want to get "merry-go-round" from the token
stream.  And that doesn't seem to work.
Note that retrieve words with 1 hyphen seems to work,
but 2 hyphens seems to represent a problem.

In getting the tokens from the stream, I get
"Merry-go-r" and "ound"  instead of "Merry-go-round"
"editor-in-c" and "hief"  instead of "editor-in-chief".
This behaviour is so strange, and I don't know how
the indexer and query processing knows about "merry-go-round",
and yet the TokenStream doesn't.

"green-monster" would work.  But not words with more than
one hyphen.

There are two snippets of code I tried, both didn't
return the desired result:

Snippet 1:
 MyStandardAnalyzer bsa =3D new MyStandardAnalyzer();
 TokenStream ts =3D bsa.tokenStream("content", rdr );
 //Token t;
 while (true) {
  org.apache.lucene.analysis.Token t =3D ts.next();
  if (t =3D=3D null)
   break;
  System.out.println(t.termText());
  }

   MyStandardAnalyzer contains my special Tokenizer generated from the new
.jj file.
   Essentially, where replace StandardTokenizer with MyStandardTokenizer.
   Merry-go-round becomes Merry-go-r  ound


Snippet 2:
 StandardAnalyzer sa1 =3D new StandardAnalyzer();
 ts =3D sa1.tokenStream("content", new StringReader("this is a merry-go-rou=
nd
with 3 children")  );
 //Token t;
 while (true) {
  org.apache.lucene.analysis.Token t =3D ts.next();
  if (t =3D=3D null)
   break;
  System.out.println(t.termText());
 }


   Merry-go-round becomes 3 tokens as merry go round


Could someone give me some suggestions.
The reasons I need the tokens is so that I can get words before and after
the selected words to form some context.
(By the way, currently, I convert a hyphenated word into a phrase,
but to me, that seems like special casing hyphenated words, and I
just want to stay away from special casing.  People has been asking
for all sorts of punctuation, such as _ or / etc.  I thought that if I lear=
n
how to do modify the .jj files and produce the right tokens, I am better
off.


Thank you very much in advance.

------=_Part_3502_4943265.1133980581309--

From java-user-return-17859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 18:40:44 2005
Return-Path: <java-user-return-17859-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96546 invoked from network); 7 Dec 2005 18:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 18:40:44 -0000
Received: (qmail 80831 invoked by uid 500); 7 Dec 2005 18:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80676 invoked by uid 500); 7 Dec 2005 18:40:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80464 invoked by uid 99); 7 Dec 2005 18:40:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 10:40:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 10:40:33 -0800
Received: (qmail 55312 invoked by uid 89); 7 Dec 2005 18:40:10 -0000
Received: from unknown (HELO ?192.168.168.81?) (69.228.224.35)
  by londo.swishmail.com with SMTP; 7 Dec 2005 18:40:10 -0000
Message-ID: <43972C88.40207@apache.org>
Date: Wed, 07 Dec 2005 10:40:08 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <43903645.6000705@getopt.org> <200512022127.00278.paul.elschot@xs4all.nl> <43919910.1070007@getopt.org> <200512032242.59982.paul.elschot@xs4all.nl>
In-Reply-To: <200512032242.59982.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Elschot wrote:
> Querying the host field like this in a web page index can be dangerous
> business. For example when term1 is "wikipedia" and term2 is "org",
> the query will match at least all pages from wikipedia.org.

Note that if you search for wikipedia.org in Nutch this is interpreted 
as an implicit phrase query and is expanded differently, as:

+(url:"wikipedia org"^4.0
   anchor:"wikipedia org"^2.0
   content:"wikipedia org"
   title:"wikipedia org"^1.5
   host:"wikipedia org"^2.0)

Note also that Nutch can use N-grams for common terms.  One can thus 
configure things so that this would be instead:

+(url:"wikipedia-org"^4.0
   anchor:"wikipedia org"^2.0
   content:"wikipedia org"
   title:"wikipedia org"^1.5
   host:"wikipedia-org"^2.0)

where wikipedia-org is a bigram term indexed when org occurs in the url 
or host field.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 19:01:10 2005
Return-Path: <java-user-return-17860-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5639 invoked from network); 7 Dec 2005 19:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 19:01:10 -0000
Received: (qmail 20143 invoked by uid 500); 7 Dec 2005 19:00:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20126 invoked by uid 500); 7 Dec 2005 19:00:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20114 invoked by uid 99); 7 Dec 2005 19:00:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 11:00:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 11:00:48 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3D332676D4; Wed,  7 Dec 2005 11:00:27 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 39BE97F471
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 11:00:27 -0800 (PST)
Date: Wed, 7 Dec 2005 11:00:27 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is associated
 with Hits
In-Reply-To: <200512071545.32454.alan@chandlerfamily.org.uk>
Message-ID: <Pine.LNX.4.58.0512071054260.2062@hal.rescomp.berkeley.edu>
References: <200512070738.42886.alan@chandlerfamily.org.uk>
 <200512071545.32454.alan@chandlerfamily.org.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: In otherwords my BooleanQuery was more complex than I let on.

I believe I understand what you are saying, but it's a little hard to make
sense of given teh corrections and lack of context -- it sounds like it
shoudl work.  please print out query.toString() and make sure it looks
like what you are expecting.

As I remember someone else saying (I'm guessing Erik) if you're having
trouble, pelase post a simple, comlete, self contained (ideally JUnit)
example of your that uses a RAMDirectory.  You're sure to get lots of help
if everyone can immediately run your code to see your problem.


Something else you should think about *after* you get this working...

: (My config document has the field "ID" set to value "0" - all the other
: documents have a single field called "ID" set to the string of a positive
: integer so config is defined as
:
: private static final TermQuery config =new TermQuery(new Term("ID","0"));
: )

FYI: it sounds like what you're trying to achieve with this TermQuery in
particular could best be done with a Filter that only allows documents
which do not contain that magic term -- for stuff like this, filters can
be faster then BooleanQueries with negated clauses (especially if you know
that there will only ever be one of these config docs, you can short
circut all the others) and they can be cached and reused, saving even more
time.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 20:17:27 2005
Return-Path: <java-user-return-17861-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54641 invoked from network); 7 Dec 2005 20:17:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 20:17:17 -0000
Received: (qmail 30092 invoked by uid 500); 7 Dec 2005 20:16:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30051 invoked by uid 500); 7 Dec 2005 20:16:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30040 invoked by uid 99); 7 Dec 2005 20:16:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:16:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:16:56 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jB7KGme27872
	for <java-user@lucene.apache.org>; Wed, 7 Dec 2005 14:16:48 -0600
Message-ID: <439742A9.9010000@getopt.org>
Date: Wed, 07 Dec 2005 21:14:33 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <3287125F0F0CCE4E8F55435208100CF534EE81@exchange-mbx.be.bvd>	 <c68e39170512070728o64534585mbe6b01a713f58956@mail.gmail.com> <c68e39170512070743w3be062eal75ade9ce567f99d9@mail.gmail.com>
In-Reply-To: <c68e39170512070743w3be062eal75ade9ce567f99d9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik Seeley wrote:

>>if (b>0) return b;
>>Doing an 'and' of two bytes and checking if the result is 0 probably
>>requires masking operations on >8 bit processors...
>>    
>>
>
>Sometimes you can get a peek into how a JVM would optimize things by
>looking at the asm output of the code from a C compiler.
>Both (b>=0) and ((b&0x80)!=0) generated the exact same asm in gcc:
>
>        testb   %al, %al
>        js      L4
>  
>

It's nice to have these couple percent... however, it doesn't solve the 
main problem; I need 50 or more percent increase... :-) and I suspect 
this can be achieved only by some radical changes in the way Nutch uses 
Lucene. It seems the default query structure is too complex to get a 
decent performance.

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 20:25:41 2005
Return-Path: <java-user-return-17862-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60881 invoked from network); 7 Dec 2005 20:25:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 20:25:39 -0000
Received: (qmail 47859 invoked by uid 500); 7 Dec 2005 20:25:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47607 invoked by uid 500); 7 Dec 2005 20:25:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47596 invoked by uid 99); 7 Dec 2005 20:25:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:25:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:25:28 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9672A13E2006; Wed,  7 Dec 2005 15:25:07 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 17C0B13E2006
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 15:25:00 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com>
References: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C20BF185-E58E-42CC-965B-68AD6322BA32@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: words with more than 1 hyphen ?
Date: Wed, 7 Dec 2005 15:24:56 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

O
> 1. I modified the StandardTokenizer.jj file.
>
>    Essentially, I added the following to StandardTokenizer.jj
>  | <HYPHENWORD1: (<LETTER>)+"-"(<LETTER>)+("-"<LETTER>)*>

Is that the only change you made to the .jj file?   Where did you put  
that exactly?

Don't you need a * after the second <LETTER>?

> 4. I was able to index and retrieve words like
> merry-go-round (as oppose to merry go round).  So, I
> was quite happy.
> Now I want to get "merry-go-round" from the token
> stream.  And that doesn't seem to work.
> Note that retrieve words with 1 hyphen seems to work,
> but 2 hyphens seems to represent a problem.
>
> In getting the tokens from the stream, I get
> "Merry-go-r" and "ound"  instead of "Merry-go-round"
> "editor-in-c" and "hief"  instead of "editor-in-chief".
> This behaviour is so strange, and I don't know how
> the indexer and query processing knows about "merry-go-round",
> and yet the TokenStream doesn't.

I think the missing * above explains what you're seeing.

> "green-monster" would work.  But not words with more than
> one hyphen.

I'm surprised this one worked - maybe some other token in JavaCC is  
catching that?

JavaCC is perhaps overkill for what you want.  If you don't need any  
of the other fancy analysis tricks that StandardTokenizer has, you  
could just use WhiteSpaceAnalyzer, LowerCaseFilter, voila, your  
hyphenated tokens would come right out.

> (By the way, currently, I convert a hyphenated word into a phrase,
> but to me, that seems like special casing hyphenated words, and I
> just want to stay away from special casing.  People has been asking
> for all sorts of punctuation, such as _ or / etc.  I thought that  
> if I learn
> how to do modify the .jj files and produce the right tokens, I am  
> better
> off.

Unless you need the other features of StandardTokenizer, you may be  
best staying away from JavaCC altogether.  It is it's own complex  
world that might be more than what you need.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 20:45:16 2005
Return-Path: <java-user-return-17863-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86039 invoked from network); 7 Dec 2005 20:45:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 20:45:16 -0000
Received: (qmail 97919 invoked by uid 500); 7 Dec 2005 20:45:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97875 invoked by uid 500); 7 Dec 2005 20:45:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97856 invoked by uid 99); 7 Dec 2005 20:45:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:45:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.9 as permitted sender)
Received: from [195.188.213.9] (HELO smtp-out6.blueyonder.co.uk) (195.188.213.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:45:07 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out6.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 20:45:41 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1Ek69d-0004SK-VE
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 20:44:45 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 20:44:47 +0000
User-Agent: KMail/1.8.2
References: <200512070738.42886.alan@chandlerfamily.org.uk> <200512071545.32454.alan@chandlerfamily.org.uk> <Pine.LNX.4.58.0512071054260.2062@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0512071054260.2062@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512072044.47968.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 20:45:41.0390 (UTC) FILETIME=[2FEC8AE0:01C5FB6F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 07 Dec 2005 19:00, Chris Hostetter wrote:
> : In otherwords my BooleanQuery was more complex than I let on.
>
> I believe I understand what you are saying, but it's a little hard to make
> sense of given teh corrections and lack of context -- it sounds like it
> shoudl work.  please print out query.toString() and make sure it looks
> like what you are expecting.

 -ID:0 Category:Category1 Category:Category2

What I hope this says is

"Give me all documents whose ID is not "0" AND which have a Category Field 
which contains "Category1" or "Category2"

What I seem to be getting is only the document whose ID is "0"

> As I remember someone else saying (I'm guessing Erik) if you're having
> trouble, pelase post a simple, comlete, self contained (ideally JUnit)
> example of your that uses a RAMDirectory.  You're sure to get lots of help
> if everyone can immediately run your code to see your problem.



How do I do that?  As a jar file with the relevent source code in it?  Posted 
as an attachment to this mailing list?



>
>
> Something else you should think about *after* you get this working...
>
> : (My config document has the field "ID" set to value "0" - all the other
> : documents have a single field called "ID" set to the string of a positive
> : integer so config is defined as
> :
> : private static final TermQuery config =new TermQuery(new Term("ID","0"));
> : )
>
> FYI: it sounds like what you're trying to achieve with this TermQuery in
> particular could best be done with a Filter that only allows documents
> which do not contain that magic term -- for stuff like this, filters can
> be faster then BooleanQueries with negated clauses (especially if you know
> that there will only ever be one of these config docs, you can short
> circut all the others) and they can be cached and reused, saving even more
> time.

I'll take a look - I happen to use the single TermQuery quite a lot to access 
the "config" document (it holds the nextID for new documents, it also holds 
all the allowable categories, so I am always using it for that.


-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 20:54:18 2005
Return-Path: <java-user-return-17864-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93323 invoked from network); 7 Dec 2005 20:54:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 20:54:18 -0000
Received: (qmail 24872 invoked by uid 500); 7 Dec 2005 20:54:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24852 invoked by uid 500); 7 Dec 2005 20:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24841 invoked by uid 99); 7 Dec 2005 20:54:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:54:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 12:54:10 -0800
Received: (qmail 27488 invoked by uid 89); 7 Dec 2005 20:53:47 -0000
Received: from unknown (HELO ?192.168.168.81?) (69.228.224.35)
  by londo.swishmail.com with SMTP; 7 Dec 2005 20:53:47 -0000
Message-ID: <43974BDA.9040203@apache.org>
Date: Wed, 07 Dec 2005 12:53:46 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <3287125F0F0CCE4E8F55435208100CF534EE81@exchange-mbx.be.bvd>	 <c68e39170512070728o64534585mbe6b01a713f58956@mail.gmail.com> <c68e39170512070743w3be062eal75ade9ce567f99d9@mail.gmail.com> <439742A9.9010000@getopt.org>
In-Reply-To: <439742A9.9010000@getopt.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Andrzej Bialecki wrote:
> It's nice to have these couple percent... however, it doesn't solve the 
> main problem; I need 50 or more percent increase... :-) and I suspect 
> this can be achieved only by some radical changes in the way Nutch uses 
> Lucene. It seems the default query structure is too complex to get a 
> decent performance.

That would certainly help.

For what it's worth, the Internet Archive has ~10M page Nutch indexes 
that perform adequately.  See:

http://websearch.archive.org/katrina/

The performance is about what you report, but it is quite usable. 
(Please don't stress-test this server!)  We recently built a ~100M page 
Nutch index at the Internet Archive that is surprisingly usable on a 
single CPU.  (This is not yet publicly accessible.)

Perhaps your traffic will be much higher than the Internet Archive's, or 
you have contractual obligations that specify certain average query 
performance, but, if not, ~10M pages is quite searchable using Nutch on 
a single CPU.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 21:33:56 2005
Return-Path: <java-user-return-17865-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22301 invoked from network); 7 Dec 2005 21:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 21:33:55 -0000
Received: (qmail 52701 invoked by uid 500); 7 Dec 2005 21:33:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52659 invoked by uid 500); 7 Dec 2005 21:33:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52631 invoked by uid 99); 7 Dec 2005 21:33:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 13:33:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 13:33:45 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B364E5BD5F; Wed,  7 Dec 2005 13:33:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9E1737F505
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 13:33:16 -0800 (PST)
Date: Wed, 7 Dec 2005 13:33:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is associated
 with Hits
In-Reply-To: <200512072044.47968.alan@chandlerfamily.org.uk>
Message-ID: <Pine.LNX.4.58.0512071315010.8793@hal.rescomp.berkeley.edu>
References: <200512070738.42886.alan@chandlerfamily.org.uk>
 <200512071545.32454.alan@chandlerfamily.org.uk>
 <Pine.LNX.4.58.0512071054260.2062@hal.rescomp.berkeley.edu>
 <200512072044.47968.alan@chandlerfamily.org.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:  -ID:0 Category:Category1 Category:Category2
:
: What I hope this says is
:
: "Give me all documents whose ID is not "0" AND which have a Category Field
: which contains "Category1" or "Category2"

That's what you've got.  If it's not matching what you expect it to, then
i'm guessing your index wasn't built the way you expect.


: How do I do that?  As a jar file with the relevent source code in it?  Posted
: as an attachment to this mailing list?

Just doing a cut/paste inline is fine (the mailing list software doesn't
like most attachments).  Here's an example of what you're talking about
that seems to work just fine for me...


    public void sampleTest() throws Exception {

        Directory dir = new RAMDirectory();
        IndexWriter w = new IndexWriter(dir,new WhitespaceAnalyzer(),true);

        Document d = new Document();
        d.add(Field.Keyword("ID","0"));
        w.addDocument(d);
        d = new Document();
        d.add(Field.Keyword("Category","Category1"));
        w.addDocument(d);
        d = new Document();
        d.add(Field.Keyword("Category","Category1"));
        d.add(Field.Keyword("Category","Category2"));
        w.addDocument(d);
        d = new Document();
        d.add(Field.Keyword("Category","Category2"));
        w.addDocument(d);
        d = new Document();
        d.add(Field.Keyword("bogus","don't match"));
        w.addDocument(d);
        w.close();

        IndexSearcher s = new IndexSearcher(dir);
        BooleanQuery q = new BooleanQuery();
        q.add(new TermQuery(new Term("ID","0")),false,true);
        q.add(new TermQuery(new Term("Category","Category1")),false,false);
        q.add(new TermQuery(new Term("Category","Category2")),false,false);
        assertEquals(3, s.search(q).length());
    }






-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 22:04:06 2005
Return-Path: <java-user-return-17866-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38412 invoked from network); 7 Dec 2005 22:04:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 22:04:05 -0000
Received: (qmail 30064 invoked by uid 500); 7 Dec 2005 22:04:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30031 invoked by uid 500); 7 Dec 2005 22:03:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30020 invoked by uid 99); 7 Dec 2005 22:03:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 14:03:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.8 as permitted sender)
Received: from [195.188.213.8] (HELO smtp-out5.blueyonder.co.uk) (195.188.213.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 14:03:59 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out5.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 22:04:25 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1Ek7Nn-0004bv-Ev
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 22:03:27 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 22:03:29 +0000
User-Agent: KMail/1.8.2
References: <200512070738.42886.alan@chandlerfamily.org.uk> <200512072044.47968.alan@chandlerfamily.org.uk> <Pine.LNX.4.58.0512071315010.8793@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0512071315010.8793@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512072203.30007.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 22:04:25.0429 (UTC) FILETIME=[2FABB050:01C5FB7A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 07 Dec 2005 21:33, Chris Hostetter wrote:

>
> Just doing a cut/paste inline is fine (the mailing list software doesn't
> like most attachments).  Here's an example of what you're talking about
> that seems to work just fine for me...
>
>
>     public void sampleTest() throws Exception {
...
>     }
>

Thanks for the example - even if its not quite what I do, it gives me 
something to aim at.

Unfortunately, my current test is a lot more convoluted than that (because 
things are in layers).  I will try and break it down like you have done into 
a flat form and see were I get to, but its going to take a little time to do.

I think one of the things I am doing is inserting and deleting the "config" 
document a few times in the process and thats going to take a bit of work to 
flatten.  This test was about number 35 in a massive sequence of building 
functionality on top of functionality.


-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 22:23:45 2005
Return-Path: <java-user-return-17867-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46572 invoked from network); 7 Dec 2005 22:23:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 22:23:44 -0000
Received: (qmail 71744 invoked by uid 500); 7 Dec 2005 22:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71700 invoked by uid 500); 7 Dec 2005 22:23:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71689 invoked by uid 99); 7 Dec 2005 22:23:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 14:23:37 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 14:23:37 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5382A5BC08; Wed,  7 Dec 2005 14:23:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 50B347F4B4
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 14:23:16 -0800 (PST)
Date: Wed, 7 Dec 2005 14:23:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is associated
 with Hits
In-Reply-To: <200512072203.30007.alan@chandlerfamily.org.uk>
Message-ID: <Pine.LNX.4.58.0512071419250.7374@hal.rescomp.berkeley.edu>
References: <200512070738.42886.alan@chandlerfamily.org.uk>
 <200512072044.47968.alan@chandlerfamily.org.uk>
 <Pine.LNX.4.58.0512071315010.8793@hal.rescomp.berkeley.edu>
 <200512072203.30007.alan@chandlerfamily.org.uk>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Unfortunately, my current test is a lot more convoluted than that (because
: things are in layers).  I will try and break it down like you have done into
: a flat form and see were I get to, but its going to take a little time to do.
:
: I think one of the things I am doing is inserting and deleting the "config"
: document a few times in the process and thats going to take a bit of work to
: flatten.  This test was about number 35 in a massive sequence of building
: functionality on top of functionality.

Right, but all the more reason to start with simple test cases and build
up.  You started by saying that a BooleanQuery wasn't working the way you
expected.  When you take away all of the issues that aren't specific to
the BooleanQuery - it's working fine, which implies that the problem lies
somewhere else.

Adding/Deleting the config doc over and over shouldnt' matter in this case
-- the real issue is that your query should matches a certain set of
documents, if there is a document you've added to the index that you
expect to see in that result but isn't there, then use Luke or
something like it to verify:
  1) that the document realy is in the index
  2) exactly what Terms are indexed for that document.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 22:53:15 2005
Return-Path: <java-user-return-17868-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59941 invoked from network); 7 Dec 2005 22:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 22:53:15 -0000
Received: (qmail 32646 invoked by uid 500); 7 Dec 2005 22:53:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32626 invoked by uid 500); 7 Dec 2005 22:53:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32615 invoked by uid 99); 7 Dec 2005 22:53:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 14:53:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.8 as permitted sender)
Received: from [195.188.213.8] (HELO smtp-out5.blueyonder.co.uk) (195.188.213.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 14:53:08 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out5.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 7 Dec 2005 22:53:31 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1Ek89M-0004gl-CS
	for java-user@lucene.apache.org; Wed, 07 Dec 2005 22:52:36 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about boolean query and how an IndexReader is associated with Hits
Date: Wed, 7 Dec 2005 22:52:38 +0000
User-Agent: KMail/1.8.2
References: <200512070738.42886.alan@chandlerfamily.org.uk> <200512072203.30007.alan@chandlerfamily.org.uk> <Pine.LNX.4.58.0512071419250.7374@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0512071419250.7374@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512072252.39067.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 07 Dec 2005 22:53:31.0804 (UTC) FILETIME=[0BD8D5C0:01C5FB81]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 07 Dec 2005 22:23, Chris Hostetter wrote:
...
> -- the real issue is that your query should matches a certain set of
> documents, if there is a document you've added to the index that you
> expect to see in that result but isn't there, then use Luke or
> something like it to verify:
>   1) that the document realy is in the index
>   2) exactly what Terms are indexed for that document.

Well I have managed to flattern to a very simple test case that matches what I 
think should be in the index and this test case works (ie does NOT show the 
problems I was seeing before)

luke tells me the file based index also seems to have what I expect in it, so 
I guess the next step will be to run my test case over the file based index.

Now I KNOW that my understanding of the Boolean Query is correct, I think I 
will focus my attention on whether or not I have left an indexWriter open, or 
not re-opened the searcher after some updates.

-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 07 23:52:33 2005
Return-Path: <java-user-return-17869-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90880 invoked from network); 7 Dec 2005 23:52:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Dec 2005 23:52:33 -0000
Received: (qmail 82229 invoked by uid 500); 7 Dec 2005 23:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81988 invoked by uid 500); 7 Dec 2005 23:52:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81973 invoked by uid 99); 7 Dec 2005 23:52:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 15:52:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.112.197.235] (HELO mail.comergent.com) (67.112.197.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 15:52:22 -0800
Received: from hqexch1.cmgt.corp ([10.4.0.14]) by mail.comergent.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 7 Dec 2005 15:52:01 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5FB89.37BECCF4"
Subject: How to do refined search based on attributes and never return zero results
Date: Wed, 7 Dec 2005 15:51:33 -0800
Message-ID: <AAFDB8BBFB0D1D47BC52CB46BA499B3E077497@hqexch1.cmgt.corp>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to do refined search based on attributes and never return zero results
Thread-Index: AcX7iSbWJo/9qNOFQCeANVdEA2GojA==
From: "Ching-Pei Hsing" <cphsing@comergent.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 07 Dec 2005 23:52:01.0473 (UTC) FILETIME=[37C5D310:01C5FB89]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5FB89.37BECCF4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Has anyway solved the following problem, or have good suggestions?

=20

Each document is assigned to one or more category nodes in a hierarchy.

For example,

=20

Document1: /Computer/Desktop,

Document2: /Computer/Notebook; /Salesforce/ExtremePortable

Document3: /Computer/Server

......

=20

For each search operations, not only a list of documents hit is
presented but a list of categories containing those documents as well as
the count of documents are also computed

=20

/Computer/Desktop(30)

/Computer/Notebook(12)

/Computer/Accessories(51)

=20

One can see this really useful because it can "guide" the user while
refining the search criteria and quickly reduce the size of the result.
I know we can do this, by brut force, by going through the entire result
set, retrieving data for the category field and start aggregating and
counting. It's not scalable though if the number of documents needs to
go through is high. It can create performance issues under load if each
execution thread held on to the index reader for too long (due to the
number of documents needs to go through).

=20

Is there any API or approach we can leverage at search time? Is there
anything we can do at the indexing time? Or, is there any technology we
need to integrate, like those for data warehousing? Any comments or
pointers will be greatly appreciated.

=20

Thanks

=20

Ching-pei

=20

=20

=20

=20

=20

=20

=20


------_=_NextPart_001_01C5FB89.37BECCF4--

From java-user-return-17870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 02:08:37 2005
Return-Path: <java-user-return-17870-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44123 invoked from network); 8 Dec 2005 02:08:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 02:08:36 -0000
Received: (qmail 41861 invoked by uid 500); 8 Dec 2005 02:08:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40804 invoked by uid 500); 8 Dec 2005 02:08:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40745 invoked by uid 99); 8 Dec 2005 02:08:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 18:08:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 66.249.82.203 as permitted sender)
Received: from [66.249.82.203] (HELO xproxy.gmail.com) (66.249.82.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 18:08:29 -0800
Received: by xproxy.gmail.com with SMTP id i29so308048wxd
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 18:08:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a/4S8SE/xWP1A5HnkzlB+JlkCUrngydriIcOr9uBhvo8JvUp5BwlW32qJ5Vb0HbUpoBmFBkZAkMNCG9ILx2bHOIgxuCb4oQRHl4Ch+ms+HLVryJe/72SDwfMsTAv6/RqDU+ZABdhxvlGddzQFocfjJeeOFbltVggB0UtANNRZxU=
Received: by 10.70.125.10 with SMTP id x10mr2736227wxc;
        Wed, 07 Dec 2005 18:08:08 -0800 (PST)
Received: by 10.70.27.20 with HTTP; Wed, 7 Dec 2005 18:08:08 -0800 (PST)
Message-ID: <b487c1370512071808g72e2a498g48893f36f066ffdd@mail.gmail.com>
Date: Wed, 7 Dec 2005 21:08:08 -0500
From: Beady Geraghty <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: words with more than 1 hyphen ?
In-Reply-To: <C20BF185-E58E-42CC-965B-68AD6322BA32@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12328_4075936.1134007688674"
References: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com>
	 <C20BF185-E58E-42CC-965B-68AD6322BA32@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12328_4075936.1134007688674
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Erik,

Thank you so much for pointing out the error :-)
It should have been

 | <HYPHENWORD1: (<LETTER>)+"-"(<LETTER>)+("-"(<LETTER>)+)*>

I missed a pair of brackets for the 3rd LETTER (and a +)
I wonder how my indexer and query parser worked before,
but not the token stream.  Anyhow, it seems to work with both
indexing/query parsing and reading off token stream.

In general, do the rules in javaCC work pretty well.  Since
there may be more requests  to be included punctuations
in the search terms, so I have to keep modifying this .jj file.
I wonder if there are things that I should watch out for before
getting overly complicated and get stuck somewhere down the
road ?

Thanks again.



On 12/7/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
> O
> > 1. I modified the StandardTokenizer.jj file.
> >
> >    Essentially, I added the following to StandardTokenizer.jj
> >  | <HYPHENWORD1: (<LETTER>)+"-"(<LETTER>)+("-"<LETTER>)*>
>
> Is that the only change you made to the .jj file?   Where did you put
> that exactly?
>
> Don't you need a * after the second <LETTER>?
>
> > 4. I was able to index and retrieve words like
> > merry-go-round (as oppose to merry go round).  So, I
> > was quite happy.
> > Now I want to get "merry-go-round" from the token
> > stream.  And that doesn't seem to work.
> > Note that retrieve words with 1 hyphen seems to work,
> > but 2 hyphens seems to represent a problem.
> >
> > In getting the tokens from the stream, I get
> > "Merry-go-r" and "ound"  instead of "Merry-go-round"
> > "editor-in-c" and "hief"  instead of "editor-in-chief".
> > This behaviour is so strange, and I don't know how
> > the indexer and query processing knows about "merry-go-round",
> > and yet the TokenStream doesn't.
>
> I think the missing * above explains what you're seeing.
>
> > "green-monster" would work.  But not words with more than
> > one hyphen.
>
> I'm surprised this one worked - maybe some other token in JavaCC is
> catching that?
>
> JavaCC is perhaps overkill for what you want.  If you don't need any
> of the other fancy analysis tricks that StandardTokenizer has, you
> could just use WhiteSpaceAnalyzer, LowerCaseFilter, voila, your
> hyphenated tokens would come right out.
>
> > (By the way, currently, I convert a hyphenated word into a phrase,
> > but to me, that seems like special casing hyphenated words, and I
> > just want to stay away from special casing.  People has been asking
> > for all sorts of punctuation, such as _ or / etc.  I thought that
> > if I learn
> > how to do modify the .jj files and produce the right tokens, I am
> > better
> > off.
>
> Unless you need the other features of StandardTokenizer, you may be
> best staying away from JavaCC altogether.  It is it's own complex
> world that might be more than what you need.
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12328_4075936.1134007688674--

From java-user-return-17871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 02:27:23 2005
Return-Path: <java-user-return-17871-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59251 invoked from network); 8 Dec 2005 02:27:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 02:27:23 -0000
Received: (qmail 81212 invoked by uid 500); 8 Dec 2005 02:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81192 invoked by uid 500); 8 Dec 2005 02:27:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81181 invoked by uid 99); 8 Dec 2005 02:27:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 18:27:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 18:27:14 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 20D0713E201E; Wed,  7 Dec 2005 21:26:52 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id BB13413E2006
	for <java-user@lucene.apache.org>; Wed,  7 Dec 2005 21:26:21 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <b487c1370512071808g72e2a498g48893f36f066ffdd@mail.gmail.com>
References: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com> <C20BF185-E58E-42CC-965B-68AD6322BA32@ehatchersolutions.com> <b487c1370512071808g72e2a498g48893f36f066ffdd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F3265B8E-7C45-4CAF-8ECC-3490C8691956@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: words with more than 1 hyphen ?
Date: Wed, 7 Dec 2005 21:26:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 7, 2005, at 9:08 PM, Beady Geraghty wrote:
> In general, do the rules in javaCC work pretty well.

In general, all answers would be too general to be useful :)

JavaCC is great - I'm using it for a custom query parser myself.  But  
it's not for the feint of heart.  It may be more than you need, it  
all depends.  The main thing StandardTokenizer does is keep e-mail  
addresses intact, and a few other fiddly things.

If you provide us with some sample text and how you want that  
tokenized, I'm sure we could offer suggestions.

>   Since
> there may be more requests  to be included punctuations
> in the search terms, so I have to keep modifying this .jj file.
> I wonder if there are things that I should watch out for before
> getting overly complicated and get stuck somewhere down the
> road ?

There are many pitfalls with JavaCC grammars.  It takes practice and  
unit tests to get this stuff right.  The same could be said of any  
style of tokenization.  Make lots of tests to ensure you don't break  
expected behavior as you tweak.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 04:00:28 2005
Return-Path: <java-user-return-17872-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90696 invoked from network); 8 Dec 2005 04:00:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 04:00:26 -0000
Received: (qmail 67863 invoked by uid 500); 8 Dec 2005 04:00:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67840 invoked by uid 500); 8 Dec 2005 04:00:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67813 invoked by uid 99); 8 Dec 2005 04:00:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 20:00:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 07 Dec 2005 20:00:18 -0800
Received: by wproxy.gmail.com with SMTP id i32so506371wra
        for <java-user@lucene.apache.org>; Wed, 07 Dec 2005 19:59:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kvy0VfQ6QceUezOLDGokBjNPKey8x5lXO/MjuBolxQEDKfAc22duHqcGX6JYPBkBp/99K62CqgTtUtWwLtdX+KCoEwXEuq+kcIP6vG7vuilS/MzmzCrdeqVJ+/Xhx8+5POkwVHUl15rWFBZykyA24KDsimV9fcXDfUIzvHj6+d0=
Received: by 10.64.249.4 with SMTP id w4mr2527528qbh;
        Wed, 07 Dec 2005 19:59:57 -0800 (PST)
Received: by 10.65.23.13 with HTTP; Wed, 7 Dec 2005 19:59:57 -0800 (PST)
Message-ID: <50f433360512071959t762edee6xc05ef9fdd585bca2@mail.gmail.com>
Date: Wed, 7 Dec 2005 19:59:57 -0800
From: Jeff Rodenburg <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to do refined search based on attributes and never return zero results
In-Reply-To: <AAFDB8BBFB0D1D47BC52CB46BA499B3E077497@hqexch1.cmgt.corp>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12542_4360465.1134014397631"
References: <AAFDB8BBFB0D1D47BC52CB46BA499B3E077497@hqexch1.cmgt.corp>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_12542_4360465.1134014397631
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Check out Chris Hostetter's methodology for doing this at cnet.

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200508.mbox/%3cPi=
ne.LNX.4.58.0508301921310.5975@hal.rescomp.berkeley.edu%3e

This sounds like it matches your requirements.

cheers,
j

On 12/7/05, Ching-Pei Hsing <cphsing@comergent.com> wrote:
>
> Has anyway solved the following problem, or have good suggestions?
>
>
>
> Each document is assigned to one or more category nodes in a hierarchy.
>
> For example,
>
>
>
> Document1: /Computer/Desktop,
>
> Document2: /Computer/Notebook; /Salesforce/ExtremePortable
>
> Document3: /Computer/Server
>
> ......
>
>
>
> For each search operations, not only a list of documents hit is
> presented but a list of categories containing those documents as well as
> the count of documents are also computed
>
>
>
> /Computer/Desktop(30)
>
> /Computer/Notebook(12)
>
> /Computer/Accessories(51)
>
>
>
> One can see this really useful because it can "guide" the user while
> refining the search criteria and quickly reduce the size of the result.
> I know we can do this, by brut force, by going through the entire result
> set, retrieving data for the category field and start aggregating and
> counting. It's not scalable though if the number of documents needs to
> go through is high. It can create performance issues under load if each
> execution thread held on to the index reader for too long (due to the
> number of documents needs to go through).
>
>
>
> Is there any API or approach we can leverage at search time? Is there
> anything we can do at the indexing time? Or, is there any technology we
> need to integrate, like those for data warehousing? Any comments or
> pointers will be greatly appreciated.
>
>
>
> Thanks
>
>
>
> Ching-pei
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>

------=_Part_12542_4360465.1134014397631--

From java-user-return-17873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 08:31:00 2005
Return-Path: <java-user-return-17873-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18431 invoked from network); 8 Dec 2005 08:30:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 08:30:59 -0000
Received: (qmail 16013 invoked by uid 500); 8 Dec 2005 08:30:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15994 invoked by uid 500); 8 Dec 2005 08:30:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15983 invoked by uid 99); 8 Dec 2005 08:30:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 00:30:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.6 as permitted sender)
Received: from [195.188.213.6] (HELO smtp-out3.blueyonder.co.uk) (195.188.213.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 00:30:51 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out3.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 8 Dec 2005 08:31:24 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1EkHAb-0007HZ-B2
	for java-user@lucene.apache.org; Thu, 08 Dec 2005 08:30:29 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused about ... [SOLVED]
Date: Thu, 8 Dec 2005 08:30:33 +0000
User-Agent: KMail/1.8.2
References: <200512070738.42886.alan@chandlerfamily.org.uk> <200512072203.30007.alan@chandlerfamily.org.uk> <Pine.LNX.4.58.0512071419250.7374@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0512071419250.7374@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512080830.34008.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 08 Dec 2005 08:31:24.0664 (UTC) FILETIME=[C67B6780:01C5FBD1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 07 Dec 2005 22:23, Chris Hostetter wrote:
> -- the real issue is that your query should matches a certain set of
> documents, if there is a document you've added to the index that you
> expect to see in that result but isn't there, then use Luke or
> something like it to verify:
>   1) that the document realy is in the index
>   2) exactly what Terms are indexed for that document.


I just wanted to say thank you for your help.  By painstakingly breaking it 
down to the low level primitives (which worked) and then building it back up 
again enabled me to locate the problem in a simple typo of the querying I was 
doing.  Dooh!

-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 08:45:28 2005
Return-Path: <java-user-return-17874-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29708 invoked from network); 8 Dec 2005 08:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 08:45:27 -0000
Received: (qmail 32478 invoked by uid 500); 8 Dec 2005 08:45:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32459 invoked by uid 500); 8 Dec 2005 08:45:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32448 invoked by uid 99); 8 Dec 2005 08:45:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 00:45:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.63.50.168] (HELO gw.ncet.cov.net) (193.63.50.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 00:45:19 -0800
Received: from cov1mx1.becta.org..uk by gw.ncet.cov.net
          via smtpd (for asf.osuosl.org [140.211.166.49]) with ESMTP; Thu, 8 Dec 2005 08:26:32 +0000
Received: from Cov1MB1.becta.org.uk (cov1mb1.becta.org.uk) by cov1mx2.becta.org.uk
 (Clearswift SMTPRS 5.1.4) with ESMTP id <T7515f34d760a00006426c@cov1mx2.becta.org.uk> for <java-user@lucene.apache.org>;
 Thu, 8 Dec 2005 08:44:00 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5FBD3.88CCCBA2"
Subject: Top n Searches
Date: Thu, 8 Dec 2005 08:44:00 -0000
Message-ID: <37C2EF59D00B03419D3BC161B1CBB6EE06970698@Cov1MB1.becta.org.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Top n Searches
Thread-Index: AcX704ijzS5zf6p6Qkyh80IBRxLc8g==
From: "Paul Williams" <Paul.Williams@becta.org.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5FBD3.88CCCBA2
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,=20

=20

I've been asked whether we can do a Top n Searches functionality where
we record the most common searched for phrases on a daily basis.  I'm
not sure where to start with this or even if this is feasible with
Lucene.

=20

Anyone done anything similar?

=20

Cheers.

Paul Williams.


------_=_NextPart_001_01C5FBD3.88CCCBA2--


From java-user-return-17875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 08:51:55 2005
Return-Path: <java-user-return-17875-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33063 invoked from network); 8 Dec 2005 08:51:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 08:51:54 -0000
Received: (qmail 42569 invoked by uid 500); 8 Dec 2005 08:51:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42542 invoked by uid 500); 8 Dec 2005 08:51:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42531 invoked by uid 99); 8 Dec 2005 08:51:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 00:51:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of appler@gmail.com designates 64.233.162.196 as permitted sender)
Received: from [64.233.162.196] (HELO zproxy.gmail.com) (64.233.162.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 00:51:44 -0800
Received: by zproxy.gmail.com with SMTP id k1so578813nzf
        for <java-user@lucene.apache.org>; Thu, 08 Dec 2005 00:51:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hDgJFEix7X90WYInLfdErSqzcwYkX45o6g3gBv4p+T8rzDH2IKStlca5FxdlH4yIT33OjNXDN9tAx2o2d2MC9H7reJoDLbxa5IGqLQngDEn9oMHz6RMFTYUtnkyryDguogxw5I5/X9u76yXOtpSNjCd0ONyIdv9IpeSaZVqQexU=
Received: by 10.64.203.5 with SMTP id a5mr2591638qbg;
        Thu, 08 Dec 2005 00:51:23 -0800 (PST)
Received: by 10.64.185.10 with HTTP; Thu, 8 Dec 2005 00:51:23 -0800 (PST)
Message-ID: <48b708490512080051s127d167bq30eb1b3448a8b2e0@mail.gmail.com>
Date: Thu, 8 Dec 2005 17:51:23 +0900
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Top n Searches
In-Reply-To: <37C2EF59D00B03419D3BC161B1CBB6EE06970698@Cov1MB1.becta.org.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <37C2EF59D00B03419D3BC161B1CBB6EE06970698@Cov1MB1.becta.org.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

You first save those search keywords entered by users into some kind
of storage like a database system or even into a dedicated Lucene
index. So it's a database and web issue, not a Lucene one.

And, as you know, Lucene does not provide this functionality out of the box=
.

Good luck!

On 12/8/05, Paul Williams <Paul.Williams@becta.org.uk> wrote:
> Hi,
>
>
>
> I've been asked whether we can do a Top n Searches functionality where
> we record the most common searched for phrases on a daily basis.  I'm
> not sure where to start with this or even if this is feasible with
> Lucene.
>
>
>
> Anyone done anything similar?
>
>
>
> Cheers.
>
> Paul Williams.
>
>
>


--
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 09:07:06 2005
Return-Path: <java-user-return-17876-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40179 invoked from network); 8 Dec 2005 09:07:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 09:07:05 -0000
Received: (qmail 63292 invoked by uid 500); 8 Dec 2005 09:06:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63260 invoked by uid 500); 8 Dec 2005 09:06:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63210 invoked by uid 99); 8 Dec 2005 09:06:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 01:06:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 01:06:57 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jB896bh31725;
	Thu, 8 Dec 2005 03:06:37 -0600
Message-ID: <4397F720.9070007@getopt.org>
Date: Thu, 08 Dec 2005 10:04:32 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: nutch-dev@lucene.apache.org
CC: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <3287125F0F0CCE4E8F55435208100CF534EE81@exchange-mbx.be.bvd>	 <c68e39170512070728o64534585mbe6b01a713f58956@mail.gmail.com> <c68e39170512070743w3be062eal75ade9ce567f99d9@mail.gmail.com> <439742A9.9010000@getopt.org> <43974BDA.9040203@apache.org>
In-Reply-To: <43974BDA.9040203@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

(Moving the discussion to nutch-dev, please drop the cc: when responding)

Doug Cutting wrote:

> Andrzej Bialecki wrote:
>
>> It's nice to have these couple percent... however, it doesn't solve 
>> the main problem; I need 50 or more percent increase... :-) and I 
>> suspect this can be achieved only by some radical changes in the way 
>> Nutch uses Lucene. It seems the default query structure is too 
>> complex to get a decent performance.
>
>
> That would certainly help.
>
> For what it's worth, the Internet Archive has ~10M page Nutch indexes 
> that perform adequately.  See:
>
> http://websearch.archive.org/katrina/


Hmm... Please define what "adequate" means. :-) IMHO, "adequate" is when 
for any query the response time is well below 1 second. Otherwise the 
service seems sluggish. Response times over 3 seconds are normally not 
acceptable. This is just for a single concurrent query - the number of 
concurrent queries will be a function of the number of concurrent users, 
and the search response time, until it reaches the limit of the number 
of threads on the search servers. Then, the time it takes to return the 
results should give us the maximum concurrent query-per-second estimate.

There is a total of 8,435,793 pages in that index. Here's a short list 
of queries, the number of matching pages, and the average time (I made 
just a couple of tests, no stress-loading ;-) )

* hurricane: 1,273,805 pages, 1.75 seconds.
* katrina: 1,267,240 pages, 1.76 seconds
* gov: 979,820 pages, 1.01 seconds
* hurricane katrina: 773,001 pages, 3.5 seconds (!)
* "hurricane katrina": 600,867 pages, 1.35 seconds
* disaster relief: 205,066 pages, 1.12 seconds
* "disaster relief": 140,007 pages, 0.42 seconds
* hurricane katrina disaster relief: 129,353 pages, 1.99 seconds
* "hurricane katrina disaster relief": 2,006 pages, 0.705 seconds
* xys: 227 pages, 0.01 seconds
* xyz: 3,497 pages,  0.005 seconds

>
> The performance is about what you report, but it is quite usable. 
> (Please don't stress-test this server!)  We recently built a ~100M 
> page Nutch index at the Internet Archive that is surprisingly usable 
> on a single CPU.  (This is not yet publicly accessible.)


What I found out is that "usable" depends a lot on how you test it and 
what is your minimum expectation. There are some high-frequency terms 
(and by this I mean terms with frequency around 25%) that will 
consistently cause a dramatic slowdown. Multi-term queries, because of 
the way Nutch expands them into sloppy phrases, may take even more time, 
so even for such relatively small index (from the POV of the whole 
Internet!) the response time may drag into several seconds (try "com").

>
> Perhaps your traffic will be much higher than the Internet Archive's, 
> or you have contractual obligations that specify certain average query 
> performance, but, if not, ~10M pages is quite searchable using Nutch 
> on a single CPU.


I'm not concerned about the traffic - I believe the distributed search 
can handle a lot of traffic if need be. What I'm concerned about is the 
maximum response time from individual search servers. This is because 
the front-end response time is determined by the longest response time 
from any of the (active) search servers. Response times over 1 sec. from 
a 10 mln collection are IMHO not adequate, because the service will 
appear slow. Response times over several seconds would mean that users 
would say goodbye and never return... ;-)

If 10 mln docs is too much for a single server to meet such a 
performance target, then this explodes the total number of servers 
required to handle Internet-wide collections of billions pages...

So, I think it's time to re-think the query structure and scoring 
mechanisms, in order to simplify the Lucene queries generated by Nutch - 
or to do some other tricks...

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 09:25:10 2005
Return-Path: <java-user-return-17877-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49042 invoked from network); 8 Dec 2005 09:25:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 09:25:10 -0000
Received: (qmail 93830 invoked by uid 500); 8 Dec 2005 09:25:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93804 invoked by uid 500); 8 Dec 2005 09:25:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93793 invoked by uid 99); 8 Dec 2005 09:25:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 01:25:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sonjaloehr@arcor.de designates 151.189.21.42 as permitted sender)
Received: from [151.189.21.42] (HELO mail-in-02.arcor-online.net) (151.189.21.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 01:25:01 -0800
Received: from mail-in-02-z2.arcor-online.net (mail-in-02-z2.arcor-online.net [151.189.8.14])
	by mail-in-02.arcor-online.net (Postfix) with ESMTP id F28DD8FEF7
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 10:24:35 +0100 (CET)
Received: from mail-in-09.arcor-online.net (mail-in-09.arcor-online.net [151.189.21.49])
	by mail-in-02-z2.arcor-online.net (Postfix) with ESMTP id E7AC3196DB0
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 10:24:35 +0100 (CET)
Received: from nausikaa (dslb-084-058-007-115.pools.arcor-ip.net [84.58.7.115])
	by mail-in-09.arcor-online.net (Postfix) with ESMTP id B585EDC271
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 10:24:35 +0100 (CET)
From: =?iso-8859-1?Q?Sonja_L=F6hr?= <sonjaloehr@arcor.de>
To: <java-user@lucene.apache.org>
Subject: pdf and highlighting
Date: Thu, 8 Dec 2005 10:24:38 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcX72SDWvT/M/MLeQ1OAWvM20X4wig==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <20051208092435.B585EDC271@mail-in-09.arcor-online.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi, all!

I have a question concerning analysis and highlighting. I'm indexing
multiple document formats (up to now, only html and pdf occured, and use the
highlighter from the Lucene sandbox.
The documents text is extracted via JTidy and PDFBox, respectively, then in
both indexing and search analysed with a custom subclass of GermanAnalyzer,
which replaces character references and html entities.

Now the funny thing is that, even if I store the body text, highlighter uses
wrong positions with lucene Docs stemming from pdf documents, whereas html
is hightlighted correctly.  I really don't have an explanation for this
behaviour - for doc.get("body") is simply text, in either case, and stop
words were also removed in ALL kinds of documents (and through an instance
of the same analyzer passed to QueryParser.

Are there any hints to where I could find my error - or did anybody else
encounter the same problem?

Thanks in advance!

sonja




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 09:59:32 2005
Return-Path: <java-user-return-17878-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63319 invoked from network); 8 Dec 2005 09:59:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 09:59:32 -0000
Received: (qmail 40916 invoked by uid 500); 8 Dec 2005 09:59:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40738 invoked by uid 500); 8 Dec 2005 09:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40727 invoked by uid 99); 8 Dec 2005 09:59:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 01:59:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 01:59:24 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4CB0B13E202A; Thu,  8 Dec 2005 04:59:02 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 1471B13E2029
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 04:58:38 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20051208092435.B585EDC271@mail-in-09.arcor-online.net>
References: <20051208092435.B585EDC271@mail-in-09.arcor-online.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <105D94C4-C0F4-4FDD-87DD-822533D3D3BD@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: pdf and highlighting
Date: Thu, 8 Dec 2005 04:58:35 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sonja,

Do you have an example, or at least some relevant code, that would =20
help the community in helping resolve this?

	Erik

On Dec 8, 2005, at 4:24 AM, Sonja L=F6hr wrote:

>
> Hi, all!
>
> I have a question concerning analysis and highlighting. I'm indexing
> multiple document formats (up to now, only html and pdf occured, =20
> and use the
> highlighter from the Lucene sandbox.
> The documents text is extracted via JTidy and PDFBox, respectively, =20=

> then in
> both indexing and search analysed with a custom subclass of =20
> GermanAnalyzer,
> which replaces character references and html entities.
>
> Now the funny thing is that, even if I store the body text, =20
> highlighter uses
> wrong positions with lucene Docs stemming from pdf documents, =20
> whereas html
> is hightlighted correctly.  I really don't have an explanation for =20
> this
> behaviour - for doc.get("body") is simply text, in either case, and =20=

> stop
> words were also removed in ALL kinds of documents (and through an =20
> instance
> of the same analyzer passed to QueryParser.
>
> Are there any hints to where I could find my error - or did anybody =20=

> else
> encounter the same problem?
>
> Thanks in advance!
>
> sonja
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 11:04:39 2005
Return-Path: <java-user-return-17879-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89422 invoked from network); 8 Dec 2005 11:04:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 11:04:39 -0000
Received: (qmail 7051 invoked by uid 500); 8 Dec 2005 11:04:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6931 invoked by uid 500); 8 Dec 2005 11:04:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6911 invoked by uid 99); 8 Dec 2005 11:04:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 03:04:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sonjaloehr@arcor.de designates 151.189.21.48 as permitted sender)
Received: from [151.189.21.48] (HELO mail-in-08.arcor-online.net) (151.189.21.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 03:04:28 -0800
Received: from mail-in-06-z2.arcor-online.net (mail-in-06-z2.arcor-online.net [151.189.8.18])
	by mail-in-08.arcor-online.net (Postfix) with ESMTP id 14126BF6F9
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 12:04:07 +0100 (CET)
Received: from mail-in-09.arcor-online.net (mail-in-09.arcor-online.net [151.189.21.49])
	by mail-in-06-z2.arcor-online.net (Postfix) with ESMTP id AB7B216D2B5
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 12:04:06 +0100 (CET)
Received: from nausikaa (dslb-084-058-005-141.pools.arcor-ip.net [84.58.5.141])
	by mail-in-09.arcor-online.net (Postfix) with ESMTP id BA163DC7E6
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 12:04:05 +0100 (CET)
From: =?iso-8859-1?Q?Sonja_L=F6hr?= <sonjaloehr@arcor.de>
To: <java-user@lucene.apache.org>
Subject: RE: pdf and highlighting
Date: Thu, 8 Dec 2005 12:04:08 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <105D94C4-C0F4-4FDD-87DD-822533D3D3BD@ehatchersolutions.com>
Thread-Index: AcX73g47jL4LLAdTQ+Wnried9PxOmgAAmlIg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <20051208110405.BA163DC7E6@mail-in-09.arcor-online.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi, Eric and the other experts!

I'll try to collect some code fragments.=20
Many things are configurable and I wrote a Crawler for indexing, but the
rest is very close to the examples in "Lucene in Action". I hope I chose =
the
appropriate snippets.

The analyzer I use is created once and stored in a Config object made
available to almost every class, along with other configurable data.

INDEXING:

in JTidyHtmlHandler (extends CrawlDocumentHandler):
	// getBody() extracts the textual content under <body>
    String body =3D getBody(rawDoc);
    if(body =3D=3D null) {
    	return null;
    }  =20
    setMainField(doc, body);

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
in PdfBoxPDFHandler (extends CrawlDocumentHandler):

      PDFTextStripper stripper =3D new PDFTextStripper();
      pddoc =3D new PDDocument(cosDoc);
      docText =3D stripper.getText(pddoc);
	[...]
      if (docText !=3D null) {
        	setMainField(doc, docText);       =20
       }
=20
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
in CrawlDocumentHandler implements DocumentHandler (as found in Eric's
book):
	public void setMainField(Document doc, String txt) {
		if (txt =3D=3D null || txt.equals("")) return;
		if(conf.storeMainField()) {
			doc.add(Field.Text(conf.mainFieldName, txt));
		}
		else doc.add(Field.UnStored(conf.mainFieldName, txt));

	}
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

In CrawlIndexer:
while(crawler.hasNext()) {  =20
   CrawlDocumentHandler handler =3D getHandler(assoc, suffix, mime);
   ...
   doc =3D handler.getDocument(onlineDoc.getIn());
    if (doc !=3D null) {
	    	doc.add(Field.Keyword("url", onlineDoc.getUrl()));
	    	Iterator writers =3D
config.getWritersForUrl(onlineDoc.getUrl()).iterator();
	    	while(writers.hasNext()) {
	    		((IndexWriter)writers.next()).addDocument(doc);
	    	}
	=09
	}
}
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

(I have a Set of Index Objects each storing its writer which is =
initialised
like this, analyzer again comes from Config:

this.writer =3D new IndexWriter(dir, analyzer, true);

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D

Ok, now the index is made up with stored body text of the documents, =
each
analyzed with my Extension of GermanAnalyzer:


GermanHtmlAnalyzer extends Analyzer:
	public TokenStream tokenStream(String fieldName, Reader reader)  {
		try {
			return new GermanAnalyzer().tokenStream(fieldName,
resolveEntities(reader));
		}
		catch(IOException ioe) {
			return null;
		}	=09
	}

( resovleEntities returns a StringReader in which for example &#252; or
&uuml; are replaced by '=FC')
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D


SEARCH:

//Here some snippets of the code that provides the JavaBeans to be =
passed to
some JSP page:

// By now the only implementation is HtmlFragmentDisplay
FragmentDisplay fragDisp =3D
(FragmentDisplay)Class.forName(displayClassName).newInstance();
IndexSearcher searcher =3D new IndexSearcher(dir);	=09
Query q =3D MultiFieldQueryParser.parse(query, new String[]{"body", =
"title"},
conf.getAnalyzer());
Hits hits =3D searcher.search(q);
for( [hits to be shown to the user] ) {
	...
	if(conf.storeMainField()) {=20
		result.setFragment(fragDisp.getDisplayText(doc.get("body"),
q));
	}
	else result.setFragment(fragDisp.getDisplayText(new
URL(doc.get("url")), q));
	...
	results.add(result);
}

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=


In HtmlFragmentDisplay:

public String getDisplayText(String bodyText, Query query) {
 =20
	QueryScorer scorer =3D new QueryScorer(query);
	SimpleHTMLFormatter formatter =3D new SimpleHTMLFormatter("<span
class=3D\"highlighted\">","</span>");
	Highlighter highlighter =3D new Highlighter(formatter, scorer);
	Fragmenter fragmenter =3D new SimpleFragmenter(60);	=09
	highlighter.setTextFragmenter(fragmenter);
	Analyzer analyzer =3D conf.getAnalyzer();
	TokenStream tStream =3D analyzer.tokenStream("body", new
StringReader(bodyText));
	return =3D highlighter.getBestFragments(tStream, bodyText, 4, " .....
");
}

(getDisplayText(URL url, Query query) fetches the document by its URL, =
again
uses the DocumentHandlers and finally calls the above method. I switched
from not storing the body text to storing it, but that didn't affect the
highlighting problem.

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=


So...... Result.getFragment() is what the users sees on the JSP page.
If it happens to be taken from a JTidy-indexed Lucene document, =
everything
is well, if it comes from PdfBox, the wrong text is highlighted.
I also tried with QueryParser.parse() instead of MultiFieldQueryParser, =
but
the output didn't change.

Many many thanks if you read until here!=20

And even more if you hava an idea where the error is likely to be found.

sonja




> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
> Sent: Donnerstag, 8. Dezember 2005 10:59
> To: java-user@lucene.apache.org
> Subject: Re: pdf and highlighting
>=20
> Sonja,
>=20
> Do you have an example, or at least some relevant code, that=20
> would help the community in helping resolve this?
>=20
> 	Erik
>=20
> On Dec 8, 2005, at 4:24 AM, Sonja L=F6hr wrote:
>=20
> >
> > Hi, all!
> >
> > I have a question concerning analysis and highlighting. I'm=20
> indexing=20
> > multiple document formats (up to now, only html and pdf=20
> occured, and=20
> > use the highlighter from the Lucene sandbox.
> > The documents text is extracted via JTidy and PDFBox, respectively,=20
> > then in both indexing and search analysed with a custom subclass of=20
> > GermanAnalyzer, which replaces character references and=20
> html entities.
> >
> > Now the funny thing is that, even if I store the body text,=20
> > highlighter uses wrong positions with lucene Docs stemming from pdf=20
> > documents, whereas html is hightlighted correctly.  I really don't=20
> > have an explanation for this behaviour - for=20
> doc.get("body") is simply=20
> > text, in either case, and stop words were also removed in=20
> ALL kinds of=20
> > documents (and through an instance of the same analyzer passed to=20
> > QueryParser.
> >
> > Are there any hints to where I could find my error - or did anybody=20
> > else encounter the same problem?
> >
> > Thanks in advance!
> >
> > sonja
> >
> >
> >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 12:00:54 2005
Return-Path: <java-user-return-17880-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12850 invoked from network); 8 Dec 2005 12:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 12:00:53 -0000
Received: (qmail 83584 invoked by uid 500); 8 Dec 2005 12:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83363 invoked by uid 500); 8 Dec 2005 12:00:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83342 invoked by uid 99); 8 Dec 2005 12:00:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 04:00:46 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.221] (HELO web26010.mail.ukl.yahoo.com) (217.12.10.221)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Dec 2005 04:00:45 -0800
Received: (qmail 51755 invoked by uid 60001); 8 Dec 2005 12:00:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ACx/suuhDjHsAquxH7iuBbY5EklpHKtGUsVSKwG2EPMSKlr4dsejwTdv74PDMH/1KoP6OHQSS8cHJomU+qrV24/F0rTFPKPptQ0ext2H60ofRgVww7sHKSiknXkq5Jz3ONSAoSxaaMd7Stj4uYcB6Krt9qJ2CGygG3KRUI+O/PU=  ;
Message-ID: <20051208120023.51753.qmail@web26010.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26010.mail.ukl.yahoo.com via HTTP; Thu, 08 Dec 2005 12:00:23 GMT
Date: Thu, 8 Dec 2005 12:00:23 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: RE: pdf and highlighting
To: java-user@lucene.apache.org
In-Reply-To: <20051208110405.BA163DC7E6@mail-in-09.arcor-online.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> if it comes from PdfBox, the wrong text is
> highlighted.

Wrong in what sense?

A couple of things to consider from looking at your
code.
* It is preferable to pass a rewritten query to the
highlighter (pass the same rewritten query to searcher
if you want to avoid query rewriting costs twice).

* If you want to force the highlighter to strictly
match query terms with the document field you are
marking up, pass the relevant fieldname to QueryScorer
constructor (latest version of highlighter from SVN
required). This will then only consider matches for
query terms related to that field. If you dont do this
you could highlight "foo" in a body field when the
query was actually for "title:foo body:bar".


Cheers
Mark


		
___________________________________________________________ 
Yahoo! Exclusive Xmas Game, help Santa with his celebrity party - http://santas-christmas-party.yahoo.net/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 12:05:06 2005
Return-Path: <java-user-return-17881-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14709 invoked from network); 8 Dec 2005 12:05:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 12:05:06 -0000
Received: (qmail 87032 invoked by uid 500); 8 Dec 2005 12:05:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87006 invoked by uid 500); 8 Dec 2005 12:05:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86995 invoked by uid 99); 8 Dec 2005 12:05:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 04:05:01 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 04:05:00 -0800
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id MAA26159
	for <java-user@lucene.apache.org>; Thu, 8 Dec 2005 12:06:40 GMT
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma026155; Thu, 8 Dec 05 12:06:35 GMT
Subject: Index merging
Sensitivity: 
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.4 March 27, 2005
Message-ID: <OF558C1E9D.954794D6-ON802570D1.0037DFCB-802570D1.00423BCA@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Thu, 8 Dec 2005 12:05:55 +0000
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 08/12/2005 12:05:56
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N





Hello all,

Whilst merging one index into another using
IndexWriter.addIndexes(IndexReader[]) I got the following error.

(index _file_path)\_5z.fnm (The system cannot find the file specified)

It would appear that this occurred during the adding of the indexes.  The
indexes I was merging to and from were very small (target index 80kb, < 300
documents, source index only a few documents) but whilst merging this index
the same server process was also in middle of building another separate
relatively large index (>1000000 documents, around 350Mb). Any ideas as to
what may cause this to happen? (I am using Lucene 1.4.3.)

Whilst looking at my problem I noticed that whem I added indexes I got a
new .cfs file but none of the other files were removed so I end up with a
directory full of seemingly old .cfs files. Loading the index into Luke
seems to indicate that none of these older cfs files are being used. Am I
doing something wrong or not doing something I should?.

I also noticed that there is an inconsistency between the
IndexWriter.addIndexes(IndexReader[]) and the
IndexWriter.addIndexes(Directory[]) methods. The former only calls
optomize() before the adding of the indexes, the latter calls optomize()
both before and after. I therefore call optomize() myself after adding the
indexes.

Any help would be appreciated.

Regards

Paul I.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 13:03:41 2005
Return-Path: <java-user-return-17882-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42559 invoked from network); 8 Dec 2005 13:03:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 13:03:41 -0000
Received: (qmail 63812 invoked by uid 500); 8 Dec 2005 13:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63768 invoked by uid 500); 8 Dec 2005 13:03:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63748 invoked by uid 99); 8 Dec 2005 13:03:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 05:03:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 05:03:32 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3A1D513E202A; Thu,  8 Dec 2005 08:03:10 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 88D3413E2029
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 08:02:11 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20051208110405.BA163DC7E6@mail-in-09.arcor-online.net>
References: <20051208110405.BA163DC7E6@mail-in-09.arcor-online.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <4DEC1188-AF50-49C9-98D4-959E8AA2D7CA@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: pdf and highlighting
Date: Thu, 8 Dec 2005 08:02:10 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Wow, those were some great details.  But, as I hope you've seen with =20
some other recent issues, things become so much clearer when you can =20
isolate the issues.  This is one reason that test-driven development =20
with unit tests is so amazingly helpful.  If you could isolate a =20
single PDF going through the processes, individually, such as =20
parsing, tokenization, indexing, and then highlighting, you will =20
likely find the problem.  It is difficult, at best, to follow along =20
the various layers you have created without really digging with a lot =20=

of time.

If you have a unit test that still fails your expectations, then a =20
JUnit test and the offending PDF file would likely yield immediate =20
solutions from this list.

	Erik

On Dec 8, 2005, at 6:04 AM, Sonja L=F6hr wrote:

>
> Hi, Eric and the other experts!
>
> I'll try to collect some code fragments.
> Many things are configurable and I wrote a Crawler for indexing, =20
> but the
> rest is very close to the examples in "Lucene in Action". I hope I =20
> chose the
> appropriate snippets.
>
> The analyzer I use is created once and stored in a Config object made
> available to almost every class, along with other configurable data.
>
> INDEXING:
>
> in JTidyHtmlHandler (extends CrawlDocumentHandler):
> 	// getBody() extracts the textual content under <body>
>     String body =3D getBody(rawDoc);
>     if(body =3D=3D null) {
>     	return null;
>     }
>     setMainField(doc, body);
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> in PdfBoxPDFHandler (extends CrawlDocumentHandler):
>
>       PDFTextStripper stripper =3D new PDFTextStripper();
>       pddoc =3D new PDDocument(cosDoc);
>       docText =3D stripper.getText(pddoc);
> 	[...]
>       if (docText !=3D null) {
>         	setMainField(doc, docText);
>        }
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> in CrawlDocumentHandler implements DocumentHandler (as found in Eric's
> book):
> 	public void setMainField(Document doc, String txt) {
> 		if (txt =3D=3D null || txt.equals("")) return;
> 		if(conf.storeMainField()) {
> 			doc.add(Field.Text(conf.mainFieldName, txt));
> 		}
> 		else doc.add(Field.UnStored(conf.mainFieldName, txt));
>
> 	}
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>
> In CrawlIndexer:
> while(crawler.hasNext()) {
>    CrawlDocumentHandler handler =3D getHandler(assoc, suffix, mime);
>    ...
>    doc =3D handler.getDocument(onlineDoc.getIn());
>     if (doc !=3D null) {
> 	    	doc.add(Field.Keyword("url", onlineDoc.getUrl()));
> 	    	Iterator writers =3D
> config.getWritersForUrl(onlineDoc.getUrl()).iterator();
> 	    	while(writers.hasNext()) {
> 	    		((IndexWriter)writers.next()).addDocument(doc);
> 	    	}
> 	=09
> 	}
> }
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>
> (I have a Set of Index Objects each storing its writer which is =20
> initialised
> like this, analyzer again comes from Config:
>
> this.writer =3D new IndexWriter(dir, analyzer, true);
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
>
> Ok, now the index is made up with stored body text of the =20
> documents, each
> analyzed with my Extension of GermanAnalyzer:
>
>
> GermanHtmlAnalyzer extends Analyzer:
> 	public TokenStream tokenStream(String fieldName, Reader reader)  =
{
> 		try {
> 			return new =
GermanAnalyzer().tokenStream(fieldName,
> resolveEntities(reader));
> 		}
> 		catch(IOException ioe) {
> 			return null;
> 		}	=09
> 	}
>
> ( resovleEntities returns a StringReader in which for example =20
> &#252; or
> &uuml; are replaced by '=FC')
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
> =3D=3D
>
>
> SEARCH:
>
> //Here some snippets of the code that provides the JavaBeans to be =20
> passed to
> some JSP page:
>
> // By now the only implementation is HtmlFragmentDisplay
> FragmentDisplay fragDisp =3D
> (FragmentDisplay)Class.forName(displayClassName).newInstance();
> IndexSearcher searcher =3D new IndexSearcher(dir);	=09
> Query q =3D MultiFieldQueryParser.parse(query, new String[]{"body", =20=

> "title"},
> conf.getAnalyzer());
> Hits hits =3D searcher.search(q);
> for( [hits to be shown to the user] ) {
> 	...
> 	if(conf.storeMainField()) {
> 		=
result.setFragment(fragDisp.getDisplayText(doc.get("body"),
> q));
> 	}
> 	else result.setFragment(fragDisp.getDisplayText(new
> URL(doc.get("url")), q));
> 	...
> 	results.add(result);
> }
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
> =3D=3D=3D=3D=3D
>
> In HtmlFragmentDisplay:
>
> public String getDisplayText(String bodyText, Query query) {
>
> 	QueryScorer scorer =3D new QueryScorer(query);
> 	SimpleHTMLFormatter formatter =3D new SimpleHTMLFormatter("<span
> class=3D\"highlighted\">","</span>");
> 	Highlighter highlighter =3D new Highlighter(formatter, scorer);
> 	Fragmenter fragmenter =3D new SimpleFragmenter(60);	=09
> 	highlighter.setTextFragmenter(fragmenter);
> 	Analyzer analyzer =3D conf.getAnalyzer();
> 	TokenStream tStream =3D analyzer.tokenStream("body", new
> StringReader(bodyText));
> 	return =3D highlighter.getBestFragments(tStream, bodyText, 4, " =
.....
> ");
> }
>
> (getDisplayText(URL url, Query query) fetches the document by its =20
> URL, again
> uses the DocumentHandlers and finally calls the above method. I =20
> switched
> from not storing the body text to storing it, but that didn't =20
> affect the
> highlighting problem.
>
> =3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=20
> =3D=3D=3D=3D=3D
>
> So...... Result.getFragment() is what the users sees on the JSP page.
> If it happens to be taken from a JTidy-indexed Lucene document, =20
> everything
> is well, if it comes from PdfBox, the wrong text is highlighted.
> I also tried with QueryParser.parse() instead of =20
> MultiFieldQueryParser, but
> the output didn't change.
>
> Many many thanks if you read until here!
>
> And even more if you hava an idea where the error is likely to be =20
> found.
>
> sonja
>
>
>
>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Donnerstag, 8. Dezember 2005 10:59
>> To: java-user@lucene.apache.org
>> Subject: Re: pdf and highlighting
>>
>> Sonja,
>>
>> Do you have an example, or at least some relevant code, that
>> would help the community in helping resolve this?
>>
>> 	Erik
>>
>> On Dec 8, 2005, at 4:24 AM, Sonja L=F6hr wrote:
>>
>>>
>>> Hi, all!
>>>
>>> I have a question concerning analysis and highlighting. I'm
>> indexing
>>> multiple document formats (up to now, only html and pdf
>> occured, and
>>> use the highlighter from the Lucene sandbox.
>>> The documents text is extracted via JTidy and PDFBox, respectively,
>>> then in both indexing and search analysed with a custom subclass of
>>> GermanAnalyzer, which replaces character references and
>> html entities.
>>>
>>> Now the funny thing is that, even if I store the body text,
>>> highlighter uses wrong positions with lucene Docs stemming from pdf
>>> documents, whereas html is hightlighted correctly.  I really don't
>>> have an explanation for this behaviour - for
>> doc.get("body") is simply
>>> text, in either case, and stop words were also removed in
>> ALL kinds of
>>> documents (and through an instance of the same analyzer passed to
>>> QueryParser.
>>>
>>> Are there any hints to where I could find my error - or did anybody
>>> else encounter the same problem?
>>>
>>> Thanks in advance!
>>>
>>> sonja
>>>
>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 14:59:29 2005
Return-Path: <java-user-return-17883-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7666 invoked from network); 8 Dec 2005 14:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 14:59:29 -0000
Received: (qmail 85493 invoked by uid 500); 8 Dec 2005 14:59:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85467 invoked by uid 500); 8 Dec 2005 14:59:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85455 invoked by uid 99); 8 Dec 2005 14:59:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 06:59:21 -0800
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE,MSGID_FROM_MTA_HEADER,NO_REAL_NAME,SPF_PASS,UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Msftblows@aol.com designates 205.188.144.207 as permitted sender)
Received: from [205.188.144.207] (HELO imo-d21.mx.aol.com) (205.188.144.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 06:59:21 -0800
Received: from Msftblows@aol.com
	by imo-d21.mx.aol.com (mail_out_v38_r6.3.) id h.100.2187ad91 (15898)
	 for <java-user@lucene.apache.org>; Thu, 8 Dec 2005 09:58:50 -0500 (EST)
Received: from  FWM-D41 (fwm-d41.webmail.aol.com [205.188.162.17]) by air-id09.mx.aol.com (v108.32) with ESMTP id MAILINID91-3e1a43984a281cd; Thu, 08 Dec 2005 09:58:49 -0500
Date: Thu, 08 Dec 2005 09:58:46 -0500
Message-Id: <8C7CA1F05FD309B-1188-1127@FWM-D41.sysops.aol.com>
From: msftblows@aol.com
References: <37C2EF59D00B03419D3BC161B1CBB6EE06970698@Cov1MB1.becta.org.uk> <48b708490512080051s127d167bq30eb1b3448a8b2e0@mail.gmail.com>
Received: from 38.117.191.162 by FWM-D41.sysops.aol.com (205.188.162.17) with HTTP (WebMailUI); Thu, 08 Dec 2005 09:58:46 -0500
X-MB-Message-Source: WebUI
X-MB-Message-Type: User
In-Reply-To: <48b708490512080051s127d167bq30eb1b3448a8b2e0@mail.gmail.com>
X-Mailer: AOL WebMail 15106
Subject: Re: Top n Searches
Content-Type: multipart/alternative;
 boundary="--------MailBlocks_8C7CA1F05FD309B_1188_1088_FWM-D41.sysops.aol.com"
MIME-Version: 1.0
To: java-user@lucene.apache.org
X-AOL-IP: 205.188.162.17
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Flag: NO
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

----------MailBlocks_8C7CA1F05FD309B_1188_1088_FWM-D41.sysops.aol.com
Content-Type: text/plain; charset="us-ascii"

I had to do the same thing and I used Log4J...that will do the trick for you. 
 
-----Original Message-----
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Sent: Thu, 8 Dec 2005 17:51:23 +0900
Subject: Re: Top n Searches


Hi,

You first save those search keywords entered by users into some kind
of storage like a database system or even into a dedicated Lucene
index. So it's a database and web issue, not a Lucene one.

And, as you know, Lucene does not provide this functionality out of the box.

Good luck!

On 12/8/05, Paul Williams <Paul.Williams@becta.org.uk> wrote:
> Hi,
>
>
>
> I've been asked whether we can do a Top n Searches functionality where
> we record the most common searched for phrases on a daily basis.  I'm
> not sure where to start with this or even if this is feasible with
> Lucene.
>
>
>
> Anyone done anything similar?
>
>
>
> Cheers.
>
> Paul Williams.
>
>
>


--
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

----------MailBlocks_8C7CA1F05FD309B_1188_1088_FWM-D41.sysops.aol.com--

From java-user-return-17884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 15:13:04 2005
Return-Path: <java-user-return-17884-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14971 invoked from network); 8 Dec 2005 15:13:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 15:13:03 -0000
Received: (qmail 13534 invoked by uid 500); 8 Dec 2005 15:12:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13407 invoked by uid 500); 8 Dec 2005 15:12:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13342 invoked by uid 99); 8 Dec 2005 15:12:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 07:12:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.194.55.244] (HELO mail2.globalspec.com) (66.194.55.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 07:12:49 -0800
Received: from gshqxc01.globalspec.net ([172.16.2.52]) by mail2.globalspec.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 8 Dec 2005 10:12:23 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene performance bottlenecks
Date: Thu, 8 Dec 2005 10:12:26 -0500
Message-ID: <EBA3EEF096B29542928098329E1D5FDE06220BB9@gshqxc01.globalspec.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene performance bottlenecks
Thread-Index: AcX71sKpiNndlyRmSNak7i4o5euDHgAJBqZg
From: "Dalton, Jeffery" <jdalton@globalspec.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 08 Dec 2005 15:12:23.0929 (UTC) FILETIME=[CAEBE690:01C5FC09]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

=20
Andrzej, I think you did a great job elucidating my thoughts as well.  I
heartily concur with everything you said. =20

Andrzej Bialecki Wrote:
> Hmm... Please define what "adequate" means. :-) IMHO,=20
> "adequate" is when for any query the response time is well=20
> below 1 second. Otherwise the service seems sluggish.=20
> Response times over 3 seconds are normally not acceptable.=20
> This is just for a single concurrent query - the number of=20
> concurrent queries will be a function of the number of=20
> concurrent users, and the search response time, until it=20
> reaches the limit of the number of threads on the search=20
> servers. Then, the time it takes to return the results should=20
> give us the maximum concurrent query-per-second estimate.

Agreed!
=20
> What I found out is that "usable" depends a lot on how you=20
> test it and what is your minimum expectation. There are some=20
> high-frequency terms (and by this I mean terms with frequency=20
> around 25%) that will consistently cause a dramatic slowdown.=20
> Multi-term queries, because of the way Nutch expands them=20
> into sloppy phrases, may take even more time, so even for=20
> such relatively small index (from the POV of the whole
> Internet!) the response time may drag into several seconds=20
> (try "com").
>=20
> >
> > Perhaps your traffic will be much higher than the Internet=20
> Archive's,=20
> > or you have contractual obligations that specify certain=20
> average query=20
> > performance, but, if not, ~10M pages is quite searchable=20
> using Nutch=20
> > on a single CPU.
>=20
...
> If 10 mln docs is too much for a single server to meet such a=20
> performance target, then this explodes the total number of=20
> servers required to handle Internet-wide collections of=20
> billions pages...

Most definitely.   Here is a target I would like to set: ~50 million
pages per server that can handle query rates of 2-3 queries per second
with response times still being on average sub-second.   =20
=20
> So, I think it's time to re-think the query structure and=20
> scoring mechanisms, in order to simplify the Lucene queries=20
> generated by Nutch - or to do some other tricks...

Yes! Andrzej, do you have thoughts on how this could be re-structured?

Here are some ideas that I had ...
Could we expand the use of N-Grams so that all occurrences of
significant multi-word phrases are indexed (up to a certain length)?
This would index space for query time.

Next, let's examine a very simple query:
+(url:term1^4.0 anchor:term1^2.0 content:term1 title:term1^1.5
host:term1^2.0)
Let me re-iterate some discussion on this topic:

Paul Elschot wrote:
>The first two clauses with + prefixes are required, and I would guess
that the 5 way disjunctions inside these clauses take most of the cpu
time during
>search.

Andrzej Bialecki wrote:
>>That's an interesting observation. This suggests that it could pay off
to glue these fields together and change
>>this to a query on a single combined field, right? I.e. to trade off
space for speed.

Andrzej Bialecki wrote:
>Unfortunately, that's not the option... Nutch uses these clauses to
affect the final score value, i.e. it has to
>use different fields in order to apply different boost values per
field, both in the query and in the encoded=20
>fieldNorms.

What changes could be made to make this possible?  It might be as you
said, that this would require some re-thinking and re-structuring of
Nutch's query behavior.  Beyond glueing the fields together, another
more radical idea might be to combine all of those field scores together
into a single term-document score at index time.=20

Computing the term-document score across multiple fields at index time
would offload much of the CPU work necessary to rank and return
documents.  Addditionally,  the index could be sorted by the
term-document score with the best matching documents listed first,
providing an additional speed-up. The biggest drawback of this approach
is that you couldn't change weights/ranking parameters easily at query
time.  Instead, if you wanted to change your ranking factors you would
have to re-index the documents.  However, the CPU and performance
benefit of this at query time might well be worth the inconvenience of
re-indexing for re-ranking for very large scale implementations.   =20

In summary, it seems like Nutch performs the document scoring almost
entirely at query time and this behavior has an adverse affect upon
performance.  One alternative is to perform much of this calculation at
index time.  There is also some middle ground, such as glueing the
fields together as Andzej suggested.  No matter what change is made, I
agree with Andrzej that the query structure and scoring mechanisms
require some simplification in order to achieve acceptable performance
at scale.
=20
> --
> Best regards,
> Andrzej Bialecki     <><
>  ___. ___ ___ ___ _ _   __________________________________
> [__ || __|__/|__||\/|  Information Retrieval, Semantic Web=20
> ___|||__||  \|  ||  |  Embedded Unix, System Integration=20
> http://www.sigram.com  Contact: info at sigram dot com
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 15:16:18 2005
Return-Path: <java-user-return-17885-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16358 invoked from network); 8 Dec 2005 15:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 15:16:06 -0000
Received: (qmail 23011 invoked by uid 500); 8 Dec 2005 15:15:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22973 invoked by uid 500); 8 Dec 2005 15:15:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22937 invoked by uid 99); 8 Dec 2005 15:15:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 07:15:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 66.249.82.202 as permitted sender)
Received: from [66.249.82.202] (HELO xproxy.gmail.com) (66.249.82.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 07:15:42 -0800
Received: by xproxy.gmail.com with SMTP id i29so389035wxd
        for <java-user@lucene.apache.org>; Thu, 08 Dec 2005 07:15:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WKMMek7pgavPrljbLs1mZovbYC2FfwGNrXZmWW1dqUu7LUhb1PSAulfY/q0Zz5XPUuP90EIknvxvXe6gF27n9pKWkQUIGTfWoh60nD2QvmZUoI/9UqR764t0CXRABHj+7DxFqdQ3ppbVxA/Qqls/vA5Qu8vzt1PazGhB8HB2Mg8=
Received: by 10.70.126.2 with SMTP id y2mr3334649wxc;
        Thu, 08 Dec 2005 07:15:19 -0800 (PST)
Received: by 10.70.27.20 with HTTP; Thu, 8 Dec 2005 07:15:19 -0800 (PST)
Message-ID: <b487c1370512080715k5cedf159rb3342d5ac1694a77@mail.gmail.com>
Date: Thu, 8 Dec 2005 10:15:19 -0500
From: Beady Geraghty <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: words with more than 1 hyphen ?
In-Reply-To: <F3265B8E-7C45-4CAF-8ECC-3490C8691956@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_18899_14299483.1134054919618"
References: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com>
	 <C20BF185-E58E-42CC-965B-68AD6322BA32@ehatchersolutions.com>
	 <b487c1370512071808g72e2a498g48893f36f066ffdd@mail.gmail.com>
	 <F3265B8E-7C45-4CAF-8ECC-3490C8691956@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_18899_14299483.1134054919618
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thank you for your answer.

I would like to not give you a "general" question so that I can
understand more.
But, I have random requests from people.  For example,
this request for hyphen is originated from a colleaque who is French,
and she believes that hyphen is important, though, I don't
know whether existing users use hyphen or not.
It depends on who the users are.

Since someone suggested hyphen, the next requestion
is underscore.  I can see more and more of these requests.
Also, people might like to search  for "/usr/include/wchar.h"  (hence,
the slash) and apostrophe etc. There really isn't a set of requirements
upfront. In fact people wants EVERYTHING if
they could, and full flexibility (even though they don't know
whether they will need it or not.)
So it appears that doing something "general" is better.


I have been using StandardAnalyzer for the things you mentioned, like
email address, and www.google.com or i.b.m.  Those are good things
for me to have.  Since I've used it now, if I change it now, I might break
other
people's dependencies.

If you do have a list of pitfalls from javaCC, could you point me to it,
that way, I can think about some of the potential issues and decide
whether I should just abandon using javaCC ?

Thanks,


On 12/7/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Dec 7, 2005, at 9:08 PM, Beady Geraghty wrote:
> > In general, do the rules in javaCC work pretty well.
>
> In general, all answers would be too general to be useful :)
>
> JavaCC is great - I'm using it for a custom query parser myself.  But
> it's not for the feint of heart.  It may be more than you need, it
> all depends.  The main thing StandardTokenizer does is keep e-mail
> addresses intact, and a few other fiddly things.
>
> If you provide us with some sample text and how you want that
> tokenized, I'm sure we could offer suggestions.
>
> >   Since
> > there may be more requests  to be included punctuations
> > in the search terms, so I have to keep modifying this .jj file.
> > I wonder if there are things that I should watch out for before
> > getting overly complicated and get stuck somewhere down the
> > road ?
>
> There are many pitfalls with JavaCC grammars.  It takes practice and
> unit tests to get this stuff right.  The same could be said of any
> style of tokenization.  Make lots of tests to ensure you don't break
> expected behavior as you tweak.
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_18899_14299483.1134054919618--

From java-user-return-17886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 15:51:37 2005
Return-Path: <java-user-return-17886-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34721 invoked from network); 8 Dec 2005 15:51:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 15:51:36 -0000
Received: (qmail 92425 invoked by uid 500); 8 Dec 2005 15:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92406 invoked by uid 500); 8 Dec 2005 15:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92395 invoked by uid 99); 8 Dec 2005 15:51:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 07:51:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of sonjaloehr@arcor.de designates 151.189.21.41 as permitted sender)
Received: from [151.189.21.41] (HELO mail-in-01.arcor-online.net) (151.189.21.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 07:51:28 -0800
Received: from mail-in-03-z2.arcor-online.net (mail-in-03-z2.arcor-online.net [151.189.8.15])
	by mail-in-01.arcor-online.net (Postfix) with ESMTP id B05876DB1F
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 16:50:58 +0100 (CET)
Received: from mail-in-07.arcor-online.net (mail-in-07.arcor-online.net [151.189.21.47])
	by mail-in-03-z2.arcor-online.net (Postfix) with ESMTP id A228B20E90D
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 16:50:58 +0100 (CET)
Received: from nausikaa (dslb-084-058-005-141.pools.arcor-ip.net [84.58.5.141])
	by mail-in-07.arcor-online.net (Postfix) with ESMTP id F3EE69ED04
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 16:50:57 +0100 (CET)
From: =?iso-8859-1?Q?Sonja_L=F6hr?= <sonjaloehr@arcor.de>
To: <java-user@lucene.apache.org>
Subject: RE: pdf and highlighting
Date: Thu, 8 Dec 2005 16:51:00 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <4DEC1188-AF50-49C9-98D4-959E8AA2D7CA@ehatchersolutions.com>
Thread-Index: AcX7981QC5oqo5OFQi+qiHZ0PD1txwAFGvuA
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-Id: <20051208155057.F3EE69ED04@mail-in-07.arcor-online.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N



Thank you both, I found it=20
(I really asked a bit too early, sorry)=20

The highlighter works correct if I use my custom Analyzer during =
indexing
(and for QueryParser), BUT
when preparing the TokenStream to feed the highlighter, I must NOT use =
it.

TokenStream tStream =3D new GermanAnalyzer().tokenStream("body", new
StringReader(bodyText));	=09
System.out.println( highlighter.getBestFragments(tStream, bodyText, 4, "
..... "));=20

works, wheras

TokenStream tStream =3D new GermanHtmlAnalyzer().tokenStream("body", new
StringReader(bodyText));	=09
System.out.println( highlighter.getBestFragments(tStream, bodyText, 4, "
..... "));=20

gives rubbish highlighting.

GermanHtmlAnalyzer feeds a normal GermanAnalyzer with a shortened String
(native characters) if the input contains decimal or html entities, but =
then
I'm totally confused why there is a problem with pdf text and not with =
HTML
text...

Here is the Analyzer's tokenStream method again, the resolveEntities =
does
just String replacement.

public TokenStream tokenStream(String fieldName, Reader reader)  {
	try {
		return new GermanAnalyzer().tokenStream(fieldName,
resolveEntities(reader));
	}
	catch(IOException ioe) {
		return null;
	}	=09
}


Greetings!
sonja





> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
> Sent: Donnerstag, 8. Dezember 2005 14:02
> To: java-user@lucene.apache.org
> Subject: Re: pdf and highlighting
>=20
> Wow, those were some great details.  But, as I hope you've=20
> seen with some other recent issues, things become so much=20
> clearer when you can isolate the issues.  This is one reason=20
> that test-driven development with unit tests is so amazingly=20
> helpful.  If you could isolate a single PDF going through the=20
> processes, individually, such as parsing, tokenization,=20
> indexing, and then highlighting, you will likely find the=20
> problem.  It is difficult, at best, to follow along the=20
> various layers you have created without really digging with a=20
> lot of time.
>=20
> If you have a unit test that still fails your expectations,=20
> then a JUnit test and the offending PDF file would likely=20
> yield immediate solutions from this list.
>=20
> 	Erik
>=20
> On Dec 8, 2005, at 6:04 AM, Sonja L=F6hr wrote:
>=20
> >
> > Hi, Eric and the other experts!
> >
> > I'll try to collect some code fragments.
> > Many things are configurable and I wrote a Crawler for=20
> indexing, but=20
> > the rest is very close to the examples in "Lucene in=20
> Action". I hope I=20
> > chose the appropriate snippets.
> >
> > The analyzer I use is created once and stored in a Config=20
> object made=20
> > available to almost every class, along with other configurable data.
> >
> > INDEXING:
> >
> > in JTidyHtmlHandler (extends CrawlDocumentHandler):
> > 	// getBody() extracts the textual content under <body>
> >     String body =3D getBody(rawDoc);
> >     if(body =3D=3D null) {
> >     	return null;
> >     }
> >     setMainField(doc, body);
> >
> > =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> > in PdfBoxPDFHandler (extends CrawlDocumentHandler):
> >
> >       PDFTextStripper stripper =3D new PDFTextStripper();
> >       pddoc =3D new PDDocument(cosDoc);
> >       docText =3D stripper.getText(pddoc);
> > 	[...]
> >       if (docText !=3D null) {
> >         	setMainField(doc, docText);
> >        }
> >
> > =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> > in CrawlDocumentHandler implements DocumentHandler (as=20
> found in Eric's
> > book):
> > 	public void setMainField(Document doc, String txt) {
> > 		if (txt =3D=3D null || txt.equals("")) return;
> > 		if(conf.storeMainField()) {
> > 			doc.add(Field.Text(conf.mainFieldName, txt));
> > 		}
> > 		else doc.add(Field.UnStored(conf.mainFieldName, txt));
> >
> > 	}
> > =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> >
> > In CrawlIndexer:
> > while(crawler.hasNext()) {
> >    CrawlDocumentHandler handler =3D getHandler(assoc, suffix, mime);
> >    ...
> >    doc =3D handler.getDocument(onlineDoc.getIn());
> >     if (doc !=3D null) {
> > 	    	doc.add(Field.Keyword("url", onlineDoc.getUrl()));
> > 	    	Iterator writers =3D
> > config.getWritersForUrl(onlineDoc.getUrl()).iterator();
> > 	    	while(writers.hasNext()) {
> > 	    		((IndexWriter)writers.next()).addDocument(doc);
> > 	    	}
> > 	=09
> > 	}
> > }
> > =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> >
> > (I have a Set of Index Objects each storing its writer which is=20
> > initialised like this, analyzer again comes from Config:
> >
> > this.writer =3D new IndexWriter(dir, analyzer, true);
> >
> >=20
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> >
> > Ok, now the index is made up with stored body text of the=20
> documents,=20
> > each analyzed with my Extension of GermanAnalyzer:
> >
> >
> > GermanHtmlAnalyzer extends Analyzer:
> > 	public TokenStream tokenStream(String fieldName, Reader=20
> reader)  {
> > 		try {
> > 			return new=20
> GermanAnalyzer().tokenStream(fieldName,
> > resolveEntities(reader));
> > 		}
> > 		catch(IOException ioe) {
> > 			return null;
> > 		}	=09
> > 	}
> >
> > ( resovleEntities returns a StringReader in which for=20
> example &#252;=20
> > or &uuml; are replaced by '=FC')=20
> >=20
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> > =3D=3D
> >
> >
> > SEARCH:
> >
> > //Here some snippets of the code that provides the JavaBeans to be=20
> > passed to some JSP page:
> >
> > // By now the only implementation is HtmlFragmentDisplay=20
> > FragmentDisplay fragDisp =3D=20
> > (FragmentDisplay)Class.forName(displayClassName).newInstance();
> > IndexSearcher searcher =3D new IndexSearcher(dir);	=09
> > Query q =3D MultiFieldQueryParser.parse(query, new String[]{"body",=20
> > "title"}, conf.getAnalyzer()); Hits hits =3D searcher.search(q); =
for(=20
> > [hits to be shown to the user] ) {
> > 	...
> > 	if(conf.storeMainField()) {
> > 	=09
> result.setFragment(fragDisp.getDisplayText(doc.get("body"),
> > q));
> > 	}
> > 	else result.setFragment(fragDisp.getDisplayText(new
> > URL(doc.get("url")), q));
> > 	...
> > 	results.add(result);
> > }
> >
> >=20
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> > =3D=3D=3D=3D=3D
> >
> > In HtmlFragmentDisplay:
> >
> > public String getDisplayText(String bodyText, Query query) {
> >
> > 	QueryScorer scorer =3D new QueryScorer(query);
> > 	SimpleHTMLFormatter formatter =3D new SimpleHTMLFormatter("<span=20
> > class=3D\"highlighted\">","</span>");
> > 	Highlighter highlighter =3D new Highlighter(formatter, scorer);
> > 	Fragmenter fragmenter =3D new SimpleFragmenter(60);	=09
> > 	highlighter.setTextFragmenter(fragmenter);
> > 	Analyzer analyzer =3D conf.getAnalyzer();
> > 	TokenStream tStream =3D analyzer.tokenStream("body", new=20
> > StringReader(bodyText));
> > 	return =3D highlighter.getBestFragments(tStream,=20
> bodyText, 4, " .....
> > ");
> > }
> >
> > (getDisplayText(URL url, Query query) fetches the document=20
> by its URL,=20
> > again uses the DocumentHandlers and finally calls the above=20
> method. I=20
> > switched from not storing the body text to storing it, but=20
> that didn't=20
> > affect the highlighting problem.
> >
> >=20
> =
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D
> > =3D=3D=3D=3D=3D
> >
> > So...... Result.getFragment() is what the users sees on the=20
> JSP page.
> > If it happens to be taken from a JTidy-indexed Lucene document,=20
> > everything is well, if it comes from PdfBox, the wrong text is=20
> > highlighted.
> > I also tried with QueryParser.parse() instead of=20
> > MultiFieldQueryParser, but the output didn't change.
> >
> > Many many thanks if you read until here!
> >
> > And even more if you hava an idea where the error is likely to be=20
> > found.
> >
> > sonja
> >
> >
> >
> >
> >> -----Original Message-----
> >> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> >> Sent: Donnerstag, 8. Dezember 2005 10:59
> >> To: java-user@lucene.apache.org
> >> Subject: Re: pdf and highlighting
> >>
> >> Sonja,
> >>
> >> Do you have an example, or at least some relevant code, that would=20
> >> help the community in helping resolve this?
> >>
> >> 	Erik
> >>
> >> On Dec 8, 2005, at 4:24 AM, Sonja L=F6hr wrote:
> >>
> >>>
> >>> Hi, all!
> >>>
> >>> I have a question concerning analysis and highlighting. I'm
> >> indexing
> >>> multiple document formats (up to now, only html and pdf
> >> occured, and
> >>> use the highlighter from the Lucene sandbox.
> >>> The documents text is extracted via JTidy and PDFBox,=20
> respectively,=20
> >>> then in both indexing and search analysed with a custom=20
> subclass of=20
> >>> GermanAnalyzer, which replaces character references and
> >> html entities.
> >>>
> >>> Now the funny thing is that, even if I store the body text,=20
> >>> highlighter uses wrong positions with lucene Docs=20
> stemming from pdf=20
> >>> documents, whereas html is hightlighted correctly.  I=20
> really don't=20
> >>> have an explanation for this behaviour - for
> >> doc.get("body") is simply
> >>> text, in either case, and stop words were also removed in
> >> ALL kinds of
> >>> documents (and through an instance of the same analyzer passed to=20
> >>> QueryParser.
> >>>
> >>> Are there any hints to where I could find my error - or=20
> did anybody=20
> >>> else encounter the same problem?
> >>>
> >>> Thanks in advance!
> >>>
> >>> sonja
> >>>
> >>>
> >>>
> >>>
> >>>
> >>=20
> ---------------------------------------------------------------------
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>=20
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> >
> >=20
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 16:16:18 2005
Return-Path: <java-user-return-17887-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46741 invoked from network); 8 Dec 2005 16:16:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 16:16:17 -0000
Received: (qmail 44098 invoked by uid 500); 8 Dec 2005 16:15:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43940 invoked by uid 500); 8 Dec 2005 16:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43878 invoked by uid 99); 8 Dec 2005 16:15:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 08:15:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 08:15:53 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D025C13E202A; Thu,  8 Dec 2005 11:15:29 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E8ADC13E2029
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 11:15:12 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <b487c1370512080715k5cedf159rb3342d5ac1694a77@mail.gmail.com>
References: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com> <C20BF185-E58E-42CC-965B-68AD6322BA32@ehatchersolutions.com> <b487c1370512071808g72e2a498g48893f36f066ffdd@mail.gmail.com> <F3265B8E-7C45-4CAF-8ECC-3490C8691956@ehatchersolutions.com> <b487c1370512080715k5cedf159rb3342d5ac1694a77@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A4F25BAE-05D7-4E8B-9B0C-3D8745BD1503@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: words with more than 1 hyphen ?
Date: Thu, 8 Dec 2005 11:15:08 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 8, 2005, at 10:15 AM, Beady Geraghty wrote:
> Since someone suggested hyphen, the next requestion
> is underscore.  I can see more and more of these requests.
> Also, people might like to search  for "/usr/include/wchar.h"  (hence,
> the slash) and apostrophe etc. There really isn't a set of  
> requirements
> upfront. In fact people wants EVERYTHING if
> they could, and full flexibility (even though they don't know
> whether they will need it or not.)
> So it appears that doing something "general" is better.

Keep in mind that even if you tokenize "/usr/include" as "usr" and  
"include" that a query for "/usr/include" will still match if it is  
analyzed in a compatible manner.   It is important to realize that  
just because bits and pieces get eaten during analysis that it  
doesn't make things unfindable.  Sure, if someone literally wants to  
search for "/" only then it is important to keep upfront, but  
generally this is not the case.

> I have been using StandardAnalyzer for the things you mentioned, like
> email address, and www.google.com or i.b.m.  Those are good things
> for me to have.  Since I've used it now, if I change it now, I  
> might break
> other
> people's dependencies.

WhitespaceTokenizer followed by a LowerCaseFilter also catches the  
cases you mention.

Again, lots of tests to assert what the users expect is a strong  
recommendation I have with tokenization.

> If you do have a list of pitfalls from javaCC, could you point me  
> to it,
> that way, I can think about some of the potential issues and decide
> whether I should just abandon using javaCC ?

It all really depends.  JavaCC is complex, that is my only  
reservation for recommending it.  If you can get by with simpler  
analysis techniques, then I say go for those instead.

But, JavaCC is powerful.  It simply isn't necessary for the bulk of  
analysis cases I've come across.  Works great for parsing query  
expressions though.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 16:20:19 2005
Return-Path: <java-user-return-17888-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48579 invoked from network); 8 Dec 2005 16:20:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 16:20:19 -0000
Received: (qmail 53435 invoked by uid 500); 8 Dec 2005 16:20:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53414 invoked by uid 500); 8 Dec 2005 16:20:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53403 invoked by uid 99); 8 Dec 2005 16:20:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 08:20:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [70.183.3.246] (HELO TSIEXCHANGE.tridsys.com) (70.183.3.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 08:20:11 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5FC13.7F43E88D"
Subject: delete and optimize
Date: Thu, 8 Dec 2005 11:23:49 -0500
Message-ID: <D82CA75DCEF4A64BBB634AD53381FA9338EB14@TSIEXCHANGE.tridsys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: delete and optimize
Thread-Index: AcX8EHbyOECZz5g1TymwHdTEBDpNPwAAbxEgAABhXCA=
From: "Dan Liu" <dliu@tridsys.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5FC13.7F43E88D
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,

=20

What is the difference between following approaches?

=20

Approach1

1)     open IndexWriter and index documents

2)     optimize the indexWriter and close the indexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

=20

Approach2

1)     open IndexWriter and index documents

2)     close the IndexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

5)     open the IndexWriter again

6)     optimize the indexWriter and close the indexWriter

=20

The Approach1 is definitely faster than Approach2. The difference is
that the Approach1 does not renumber the document nubmer. While with the
Approach2, the document nubmer reflects the renumbered doucements. In
other words, that reader.maxDoc() gives different result between
Approach1 and 2.

=20

Since the optimize only affects the search speed, will I have any
performance diffenece between these approaches while searching? (note:
the documents are actually deleted when IndexReader is closed)

=20

Thanks /dan

=20


------_=_NextPart_001_01C5FC13.7F43E88D--

From java-user-return-17889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 17:42:03 2005
Return-Path: <java-user-return-17889-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90107 invoked from network); 8 Dec 2005 17:42:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 17:42:02 -0000
Received: (qmail 97726 invoked by uid 500); 8 Dec 2005 17:41:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97691 invoked by uid 500); 8 Dec 2005 17:41:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97680 invoked by uid 99); 8 Dec 2005 17:41:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 09:41:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of beadygeraghty@gmail.com designates 66.249.82.193 as permitted sender)
Received: from [66.249.82.193] (HELO xproxy.gmail.com) (66.249.82.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 09:41:55 -0800
Received: by xproxy.gmail.com with SMTP id i29so410558wxd
        for <java-user@lucene.apache.org>; Thu, 08 Dec 2005 09:41:34 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pMWovgvS+JgVsztP59j1gu5g4pV/wwSrHCsJx9H54f51lJK7/+4v68TLbuGwUn8e65Ay1isewKR5yVSzTnOkNxZUPxg0HXWbpN0DS0XdqCmhQYnwU+9/FnxAR/gyK8w733XRlbpzx+z6v9q5Toftxzwwd47C2I7ve9JOOqeJ1aQ=
Received: by 10.70.96.9 with SMTP id t9mr4205364wxb;
        Thu, 08 Dec 2005 09:41:34 -0800 (PST)
Received: by 10.70.27.20 with HTTP; Thu, 8 Dec 2005 09:41:34 -0800 (PST)
Message-ID: <b487c1370512080941q24ad472br17ef29152cd9e39b@mail.gmail.com>
Date: Thu, 8 Dec 2005 12:41:34 -0500
From: Beady Geraghty <beadygeraghty@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: words with more than 1 hyphen ?
In-Reply-To: <A4F25BAE-05D7-4E8B-9B0C-3D8745BD1503@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21631_5237049.1134063694456"
References: <b487c1370512071036l62757acaga18c335a64365d8f@mail.gmail.com>
	 <C20BF185-E58E-42CC-965B-68AD6322BA32@ehatchersolutions.com>
	 <b487c1370512071808g72e2a498g48893f36f066ffdd@mail.gmail.com>
	 <F3265B8E-7C45-4CAF-8ECC-3490C8691956@ehatchersolutions.com>
	 <b487c1370512080715k5cedf159rb3342d5ac1694a77@mail.gmail.com>
	 <A4F25BAE-05D7-4E8B-9B0C-3D8745BD1503@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_21631_5237049.1134063694456
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks for the advice.

It is hard to say whether the useability folks want
to distinguish between "/usr/include" as oppose to "usr include".
Actually, I am sure that they would, but whether they would
accept "usr include" is the right question to ask :-)
I'll have to sort it out with them :-(

Thanks again.


On 12/8/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>
> On Dec 8, 2005, at 10:15 AM, Beady Geraghty wrote:
> > Since someone suggested hyphen, the next requestion
> > is underscore.  I can see more and more of these requests.
> > Also, people might like to search  for "/usr/include/wchar.h"  (hence,
> > the slash) and apostrophe etc. There really isn't a set of
> > requirements
> > upfront. In fact people wants EVERYTHING if
> > they could, and full flexibility (even though they don't know
> > whether they will need it or not.)
> > So it appears that doing something "general" is better.
>
> Keep in mind that even if you tokenize "/usr/include" as "usr" and
> "include" that a query for "/usr/include" will still match if it is
> analyzed in a compatible manner.   It is important to realize that
> just because bits and pieces get eaten during analysis that it
> doesn't make things unfindable.  Sure, if someone literally wants to
> search for "/" only then it is important to keep upfront, but
> generally this is not the case.
>
> > I have been using StandardAnalyzer for the things you mentioned, like
> > email address, and www.google.com or i.b.m.  Those are good things
> > for me to have.  Since I've used it now, if I change it now, I
> > might break
> > other
> > people's dependencies.
>
> WhitespaceTokenizer followed by a LowerCaseFilter also catches the
> cases you mention.
>
> Again, lots of tests to assert what the users expect is a strong
> recommendation I have with tokenization.
>
> > If you do have a list of pitfalls from javaCC, could you point me
> > to it,
> > that way, I can think about some of the potential issues and decide
> > whether I should just abandon using javaCC ?
>
> It all really depends.  JavaCC is complex, that is my only
> reservation for recommending it.  If you can get by with simpler
> analysis techniques, then I say go for those instead.
>
> But, JavaCC is powerful.  It simply isn't necessary for the bulk of
> analysis cases I've come across.  Works great for parsing query
> expressions though.
>
>        Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21631_5237049.1134063694456--

From java-user-return-17890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 18:16:19 2005
Return-Path: <java-user-return-17890-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6867 invoked from network); 8 Dec 2005 18:16:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 18:16:18 -0000
Received: (qmail 53900 invoked by uid 500); 8 Dec 2005 18:16:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53868 invoked by uid 500); 8 Dec 2005 18:16:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53857 invoked by uid 99); 8 Dec 2005 18:16:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 10:16:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 10:16:09 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id jB8IFmpY021095
	for <java-user@lucene.apache.org>; Thu, 8 Dec 2005 13:15:48 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IR600501YQCYZ@lmco.com> for java-user@lucene.apache.org; Thu, 08 Dec 2005 13:15:48 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IR600ETHYQBQN@lmco.com> for java-user@lucene.apache.org; Thu, 08 Dec 2005 13:15:47 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 08 Dec 2005 13:15:47 -0500
Date: Thu, 08 Dec 2005 13:15:47 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: delete and optimize
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3A16@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: delete and optimize
Thread-Index: AcX8EHbyOECZz5g1TymwHdTEBDpNPwAAbxEgAABhXCAAA9Z54A==
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 08 Dec 2005 18:15:47.0516 (UTC) FILETIME=[699207C0:01C5FC23]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well the best way in my opinion is to: 

1) open the IndexReader and delete some documents from the same index

2)     close the IndexReader

3)     open IndexWriter and index documents

4)     optimize the indexWriter and close the indexWriter

For best performance you want the optimization to be that last operation


HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com] 
Sent: Thursday, December 08, 2005 11:24 AM
To: java-user@lucene.apache.org
Subject: delete and optimize

Hi,

 

What is the difference between following approaches?

 

Approach1

1)     open IndexWriter and index documents

2)     optimize the indexWriter and close the indexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

 

Approach2

1)     open IndexWriter and index documents

2)     close the IndexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

5)     open the IndexWriter again

6)     optimize the indexWriter and close the indexWriter

 

The Approach1 is definitely faster than Approach2. The difference is
that the Approach1 does not renumber the document nubmer. While with the
Approach2, the document nubmer reflects the renumbered doucements. In
other words, that reader.maxDoc() gives different result between
Approach1 and 2.

 

Since the optimize only affects the search speed, will I have any
performance diffenece between these approaches while searching? (note:
the documents are actually deleted when IndexReader is closed)

 

Thanks /dan

 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 18:40:01 2005
Return-Path: <java-user-return-17891-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20961 invoked from network); 8 Dec 2005 18:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 18:40:01 -0000
Received: (qmail 13284 invoked by uid 500); 8 Dec 2005 18:39:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13265 invoked by uid 500); 8 Dec 2005 18:39:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13252 invoked by uid 99); 8 Dec 2005 18:39:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 10:39:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 10:39:53 -0800
Received: (qmail 54243 invoked by uid 89); 8 Dec 2005 18:39:30 -0000
Received: from unknown (HELO ?192.168.168.81?) (69.228.224.35)
  by londo.swishmail.com with SMTP; 8 Dec 2005 18:39:30 -0000
Message-ID: <43987DE1.9090300@apache.org>
Date: Thu, 08 Dec 2005 10:39:29 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Merging with IndexWriter.addIndexes(...)
References: <p06210234bfaa69060cb2@[192.168.1.4]>
In-Reply-To: <p06210234bfaa69060cb2@[192.168.1.4]>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

J.J. Larrea wrote:
> So... I notice that both IndexWriter.addIndexes(...) merge methods start 
> and end with calls to optimize() on the target index.  I'm not sure 
> whether that is causing the unpacking and repacking I observe, but it 
> does wonder whether they truly need to be there:

I don't recall exactly why this was done.  (I should have written a 
comment!)

I think the concerns in addIndexes are that, before the segments file is 
written:
1. The segments must be sorted by size, with small segments on top, in 
order for future incremental merging to work correctly.
2. Segment names must be unique and less than the segment counter, so 
that they will not conflict with future segment names.
3. All segments must be stored in the same directory.

Optimizing before and after was a cheap way to ensure these, although 
this still does not explain why the first optimize is required, only the 
last.  I'm sure there was a reason, but I'm no longer sure that it is valid.

Note that the two addIndexes methods currently use different algorithms. 
  I think the addIndexes(Directory[]) uses a merge algorithm that 
observes mergeFactor, while addIndexes(IndexReader[]) does not, since 
all of the indexes are already open.

An improved algorithm for addIndexes(Directory[]) might be to:

0. Check that none of the Directories are the same as this directory.
1. Don't optimize first;
2. Run the existing algorithm, which combines the added segments until 
they are fewer than mergeFactor.
3. (new) Merge any segments that are not in this directory.  This will 
require first moving them to the top of the stack.
4. Re-sort the stack by size.
5. Don't optimize at end.

I think that should do it.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 18:56:15 2005
Return-Path: <java-user-return-17892-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30884 invoked from network); 8 Dec 2005 18:56:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 18:56:15 -0000
Received: (qmail 43802 invoked by uid 500); 8 Dec 2005 18:56:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43780 invoked by uid 500); 8 Dec 2005 18:56:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43768 invoked by uid 99); 8 Dec 2005 18:56:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 10:56:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [70.183.3.246] (HELO TSIEXCHANGE.tridsys.com) (70.183.3.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 10:56:06 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: delete and optimize
Date: Thu, 8 Dec 2005 13:59:44 -0500
Message-ID: <D82CA75DCEF4A64BBB634AD53381FA9338EB84@TSIEXCHANGE.tridsys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: delete and optimize
Thread-Index: AcX8EHbyOECZz5g1TymwHdTEBDpNPwAAbxEgAABhXCAAA9Z54AABcLgg
From: "Dan Liu" <dliu@tridsys.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The document is indexed first. This is required by the application.
Based on Lucene in Action", "Optimizaation" is to  merge multiple index
files together in order to reduce their number and thus minimize the
time it takes to read at search time"
The approach1 does deletion on an optimized index. So, the number of
index files are the same as before the deletion.

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]=20
Sent: Thursday, December 08, 2005 1:16 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize

Well the best way in my opinion is to:=20

1) open the IndexReader and delete some documents from the same index

2)     close the IndexReader

3)     open IndexWriter and index documents

4)     optimize the indexWriter and close the indexWriter

For best performance you want the optimization to be that last operation


HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com]=20
Sent: Thursday, December 08, 2005 11:24 AM
To: java-user@lucene.apache.org
Subject: delete and optimize

Hi,

=20

What is the difference between following approaches?

=20

Approach1

1)     open IndexWriter and index documents

2)     optimize the indexWriter and close the indexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

=20

Approach2

1)     open IndexWriter and index documents

2)     close the IndexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

5)     open the IndexWriter again

6)     optimize the indexWriter and close the indexWriter

=20

The Approach1 is definitely faster than Approach2. The difference is
that the Approach1 does not renumber the document nubmer. While with the
Approach2, the document nubmer reflects the renumbered doucements. In
other words, that reader.maxDoc() gives different result between
Approach1 and 2.

=20

Since the optimize only affects the search speed, will I have any
performance diffenece between these approaches while searching? (note:
the documents are actually deleted when IndexReader is closed)

=20

Thanks /dan

=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 19:18:02 2005
Return-Path: <java-user-return-17893-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40040 invoked from network); 8 Dec 2005 19:18:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 19:18:01 -0000
Received: (qmail 80245 invoked by uid 500); 8 Dec 2005 19:17:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80209 invoked by uid 500); 8 Dec 2005 19:17:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80197 invoked by uid 99); 8 Dec 2005 19:17:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 11:17:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 11:17:53 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id jB8JHWpY022859
	for <java-user@lucene.apache.org>; Thu, 8 Dec 2005 14:17:32 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IR700M011L7BB@lmco.com> for java-user@lucene.apache.org; Thu, 08 Dec 2005 14:17:32 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IR700KGW1KXPF@lmco.com> for java-user@lucene.apache.org; Thu, 08 Dec 2005 14:17:29 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 08 Dec 2005 14:17:24 -0500
Date: Thu, 08 Dec 2005 14:17:24 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: delete and optimize
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3A18@emss10m03.us.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-Topic: delete and optimize
Thread-Index: AcX8EHbyOECZz5g1TymwHdTEBDpNPwAAbxEgAABhXCAAA9Z54AABcLggAADAJ6A=
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 08 Dec 2005 19:17:24.0328 (UTC) FILETIME=[050AC680:01C5FC2C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Optimization also purges the deleted documents, thus reduces the size
(in bytes) of the index. Until you optimize documents stay in the index
only marked as deleted. 

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com] 
Sent: Thursday, December 08, 2005 2:00 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize

The document is indexed first. This is required by the application.
Based on Lucene in Action", "Optimizaation" is to  merge multiple index
files together in order to reduce their number and thus minimize the
time it takes to read at search time"
The approach1 does deletion on an optimized index. So, the number of
index files are the same as before the deletion.

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Thursday, December 08, 2005 1:16 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize

Well the best way in my opinion is to: 

1) open the IndexReader and delete some documents from the same index

2)     close the IndexReader

3)     open IndexWriter and index documents

4)     optimize the indexWriter and close the indexWriter

For best performance you want the optimization to be that last operation


HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com]
Sent: Thursday, December 08, 2005 11:24 AM
To: java-user@lucene.apache.org
Subject: delete and optimize

Hi,

 

What is the difference between following approaches?

 

Approach1

1)     open IndexWriter and index documents

2)     optimize the indexWriter and close the indexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

 

Approach2

1)     open IndexWriter and index documents

2)     close the IndexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

5)     open the IndexWriter again

6)     optimize the indexWriter and close the indexWriter

 

The Approach1 is definitely faster than Approach2. The difference is
that the Approach1 does not renumber the document nubmer. While with the
Approach2, the document nubmer reflects the renumbered doucements. In
other words, that reader.maxDoc() gives different result between
Approach1 and 2.

 

Since the optimize only affects the search speed, will I have any
performance diffenece between these approaches while searching? (note:
the documents are actually deleted when IndexReader is closed)

 

Thanks /dan

 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 19:38:04 2005
Return-Path: <java-user-return-17894-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48811 invoked from network); 8 Dec 2005 19:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 19:38:04 -0000
Received: (qmail 12594 invoked by uid 500); 8 Dec 2005 19:37:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12568 invoked by uid 500); 8 Dec 2005 19:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12554 invoked by uid 99); 8 Dec 2005 19:37:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 11:37:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 08 Dec 2005 11:37:53 -0800
Received: (qmail 17828 invoked from network); 8 Dec 2005 19:30:35 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@69.212.34.0)
  by ws6-3.us4.outblaze.com with SMTP; 8 Dec 2005 19:30:35 -0000
Message-ID: <439889DA.2020002@curtin.com>
Date: Thu, 08 Dec 2005 14:30:34 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: delete and optimize
References: <92A278501EF50444AD3EE1FFB51219550BCE3A18@emss10m03.us.lmco.com>
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE3A18@emss10m03.us.lmco.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mordo, Aviran (EXP N-NANNATEK) wrote:

> Optimization also purges the deleted documents, thus reduces the size
> (in bytes) of the index. Until you optimize documents stay in the index
> only marked as deleted. 

Deleted documents' space is reclaimed during optimization, 'tis true. 
But it can also be reclaimed as documents are added, if any automatic 
segment merging happens (due to IndexWriter's minMergeDocs and mergeFactor).

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 20:06:00 2005
Return-Path: <java-user-return-17895-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58854 invoked from network); 8 Dec 2005 20:06:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 20:06:00 -0000
Received: (qmail 53204 invoked by uid 500); 8 Dec 2005 20:05:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53182 invoked by uid 500); 8 Dec 2005 20:05:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53171 invoked by uid 99); 8 Dec 2005 20:05:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:05:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.86.66.194] (HELO TSIEXCHANGE.tridsys.com) (207.86.66.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:05:52 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: delete and optimize
Date: Thu, 8 Dec 2005 15:09:28 -0500
Message-ID: <D82CA75DCEF4A64BBB634AD53381FA9338EBBE@TSIEXCHANGE.tridsys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: delete and optimize
Thread-Index: AcX8EHbyOECZz5g1TymwHdTEBDpNPwAAbxEgAABhXCAAA9Z54AABcLggAADAJ6AAAbu/IA==
From: "Dan Liu" <dliu@tridsys.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The document is markded as "deleted" when reader.delete(i) is called. It
is actually deleted from index when reader.close().

The deleted douments seems put in a separate file with extension ".del"
in the index folder.

When optimiation happens after deletion, the ".del" file is gone, and
Document number are reclaimed.

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]=20
Sent: Thursday, December 08, 2005 2:17 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize

Optimization also purges the deleted documents, thus reduces the size
(in bytes) of the index. Until you optimize documents stay in the index
only marked as deleted.=20

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com]=20
Sent: Thursday, December 08, 2005 2:00 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize

The document is indexed first. This is required by the application.
Based on Lucene in Action", "Optimizaation" is to  merge multiple index
files together in order to reduce their number and thus minimize the
time it takes to read at search time"
The approach1 does deletion on an optimized index. So, the number of
index files are the same as before the deletion.

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Thursday, December 08, 2005 1:16 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize

Well the best way in my opinion is to:=20

1) open the IndexReader and delete some documents from the same index

2)     close the IndexReader

3)     open IndexWriter and index documents

4)     optimize the indexWriter and close the indexWriter

For best performance you want the optimization to be that last operation


HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com]
Sent: Thursday, December 08, 2005 11:24 AM
To: java-user@lucene.apache.org
Subject: delete and optimize

Hi,

=20

What is the difference between following approaches?

=20

Approach1

1)     open IndexWriter and index documents

2)     optimize the indexWriter and close the indexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

=20

Approach2

1)     open IndexWriter and index documents

2)     close the IndexWriter

3)     open the IndexReader and delete some documents from the same
index

4)     close the IndexReader

5)     open the IndexWriter again

6)     optimize the indexWriter and close the indexWriter

=20

The Approach1 is definitely faster than Approach2. The difference is
that the Approach1 does not renumber the document nubmer. While with the
Approach2, the document nubmer reflects the renumbered doucements. In
other words, that reader.maxDoc() gives different result between
Approach1 and 2.

=20

Since the optimize only affects the search speed, will I have any
performance diffenece between these approaches while searching? (note:
the documents are actually deleted when IndexReader is closed)

=20

Thanks /dan

=20



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 20:08:52 2005
Return-Path: <java-user-return-17896-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59992 invoked from network); 8 Dec 2005 20:08:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 20:08:52 -0000
Received: (qmail 62137 invoked by uid 500); 8 Dec 2005 20:08:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62113 invoked by uid 500); 8 Dec 2005 20:08:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62102 invoked by uid 99); 8 Dec 2005 20:08:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:08:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:08:44 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 049EB13E202A; Thu,  8 Dec 2005 15:08:21 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id EEE8813E202D
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 15:07:40 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20051208155057.F3EE69ED04@mail-in-07.arcor-online.net>
References: <20051208155057.F3EE69ED04@mail-in-07.arcor-online.net>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <182A9813-DA9E-45DB-9306-B3CFE9210DCD@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: pdf and highlighting
Date: Thu, 8 Dec 2005 15:07:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 8, 2005, at 10:51 AM, Sonja L=F6hr wrote:
> Thank you both, I found it
> (I really asked a bit too early, sorry)
>
> The highlighter works correct if I use my custom Analyzer during =20
> indexing
> (and for QueryParser), BUT
> when preparing the TokenStream to feed the highlighter, I must NOT =20
> use it.
>
> TokenStream tStream =3D new GermanAnalyzer().tokenStream("body", new
> StringReader(bodyText));	=09
> System.out.println( highlighter.getBestFragments(tStream, bodyText, =20=

> 4, "
> ..... "));
>
> works, wheras
>
> TokenStream tStream =3D new GermanHtmlAnalyzer().tokenStream("body", =
new
> StringReader(bodyText));	=09
> System.out.println( highlighter.getBestFragments(tStream, bodyText, =20=

> 4, "
> ..... "));
>
> gives rubbish highlighting.
>
> GermanHtmlAnalyzer feeds a normal GermanAnalyzer with a shortened =20
> String
> (native characters) if the input contains decimal or html entities, =20=

> but then
> I'm totally confused why there is a problem with pdf text and not =20
> with HTML
> text...

The likely reason is that the token offsets fed to the highlighter =20
don't jive with the positions of the text in the text you're =20
highlighting.  You're generating token offsets for strings that have =20
been replaced (and likely different sizes), but highlighting the =20
original text with the entities left intact.

Maybe??

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 20:19:17 2005
Return-Path: <java-user-return-17897-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63800 invoked from network); 8 Dec 2005 20:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 20:19:16 -0000
Received: (qmail 85962 invoked by uid 500); 8 Dec 2005 20:19:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85771 invoked by uid 500); 8 Dec 2005 20:19:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85756 invoked by uid 99); 8 Dec 2005 20:19:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:19:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: error (asf.osuosl.org: local policy)
Received: from [65.124.125.132] (HELO ponyexpress2.ad.openratings.com) (65.124.125.132)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:19:03 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: delete and optimize
Date: Thu, 8 Dec 2005 15:18:19 -0500
Message-ID: <9951857AC27D97449C62F7DD6C612248AA3067@ponyexpress2.ad.openratings.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: delete and optimize
Thread-Index: AcX8EHbyOECZz5g1TymwHdTEBDpNPwAAbxEgAABhXCAAA9Z54AABcLggAADAJ6AAAbu/IAAARYbQ
From: "Dan Quaroni" <dquaroni@OPENRATINGS.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm confused by what you mean - there is no difference between something =
being marked as deleted and deleted.  (Since it's not removed from the =
index until optimization)

I've found that unless I close(), the document isn't even marked for =
deletion.  And if I recall, I think I also had to close the Directory, =
but that may not be true.

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com]
Sent: Thursday, December 08, 2005 3:09 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize


The document is markded as "deleted" when reader.delete(i) is called. It
is actually deleted from index when reader.close().

The deleted douments seems put in a separate file with extension ".del"
in the index folder.

When optimiation happens after deletion, the ".del" file is gone, and
Document number are reclaimed.

Aviran
http://www.aviransplace.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 08 20:37:40 2005
Return-Path: <java-user-return-17898-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79208 invoked from network); 8 Dec 2005 20:37:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Dec 2005 20:37:40 -0000
Received: (qmail 39218 invoked by uid 500); 8 Dec 2005 20:37:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39195 invoked by uid 500); 8 Dec 2005 20:37:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39184 invoked by uid 99); 8 Dec 2005 20:37:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:37:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.86.66.194] (HELO TSIEXCHANGE.tridsys.com) (207.86.66.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 12:37:33 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: delete and optimize
Date: Thu, 8 Dec 2005 15:41:11 -0500
Message-ID: <D82CA75DCEF4A64BBB634AD53381FA9338EBE5@TSIEXCHANGE.tridsys.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: delete and optimize
Thread-Index: AcX8EHbyOECZz5g1TymwHdTEBDpNPwAAbxEgAABhXCAAA9Z54AABcLggAADAJ6AAAbu/IAAARYbQAADHFSA=
From: "Dan Liu" <dliu@tridsys.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There IS difference between something being marked as deleted and
something is actually deleted. As these marked as deleted can be
undeleted.=20

The document is marked as deleted even before the reader is closed.
There is an example in "Lucene in Action". /dan

-----Original Message-----
From: Dan Quaroni [mailto:dquaroni@OPENRATINGS.com]=20
Sent: Thursday, December 08, 2005 3:18 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize

I'm confused by what you mean - there is no difference between something
being marked as deleted and deleted.  (Since it's not removed from the
index until optimization)

I've found that unless I close(), the document isn't even marked for
deletion.  And if I recall, I think I also had to close the Directory,
but that may not be true.

-----Original Message-----
From: Dan Liu [mailto:dliu@tridsys.com]
Sent: Thursday, December 08, 2005 3:09 PM
To: java-user@lucene.apache.org
Subject: RE: delete and optimize


The document is markded as "deleted" when reader.delete(i) is called. It
is actually deleted from index when reader.close().

The deleted douments seems put in a separate file with extension ".del"
in the index folder.

When optimiation happens after deletion, the ".del" file is gone, and
Document number are reclaimed.

Aviran
http://www.aviransplace.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 02:32:03 2005
Return-Path: <java-user-return-17899-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41896 invoked from network); 9 Dec 2005 02:32:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 02:32:02 -0000
Received: (qmail 83476 invoked by uid 500); 9 Dec 2005 02:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83462 invoked by uid 500); 9 Dec 2005 02:31:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 45212 invoked by uid 99); 9 Dec 2005 01:49:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Date: Thu, 8 Dec 2005 20:49:11 -0500 (EST)
From: Dan Gould <dlg@cs.brown.edu>
X-X-Sender: dlg@wayland
To: java-user@lucene.apache.org
Subject: JVM Crash in Lucene
Message-ID: <Pine.LNX.4.62.0512082041270.30928@wayland>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at cs.brown.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi--

I'm relatively new to Lucene.  When I run my app, I get a JVM error. 
This gets called a lot, but only fails every once in awhile (maybe 1 in 
100 calls?)

I filed a report with Sun, but I don't expect to hear anything from them. 
So, I was wondering if any Lucene experts have run across this or have any 
ideas for workarounds (if not, I'll have to take lucene out of my system 
and manage the termvectors myself):

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0x0000002a95a5c300, pid=26545, tid=1085655392
#
# Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x4fa300]
#
# An error report file with more information is saved as 
hs_err_pid26545.log

That error file is huge, but the salient part seems to be:

Stack: [0x0000000040a5c000,0x0000000040b5d000),  sp=0x0000000040b59f70, 
free sp
ace=1015k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native 
code)
V  [libjvm.so+0x4fa300]
V  [libjvm.so+0x4fa3c2]
V  [libjvm.so+0x4fa876]
V  [libjvm.so+0x58051e]
V  [libjvm.so+0x58017c]
V  [libjvm.so+0x2b968b]
V  [libjvm.so+0x2b67ba]
V  [libjvm.so+0x25f3c7]
V  [libjvm.so+0x2bed06]
V  [libjvm.so+0x2be6b2]
V  [libjvm.so+0x6163f9]
V  [libjvm.so+0x610ffe]
V  [libjvm.so+0x554745]


Current CompileTask:
opto:1621 
org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object;
(99 bytes)

My code that is causing the JVM crash is:

         //Get the terms and frequencies
         IndexReader indexreader = null;
         TermFreqVector tv = null;
         try {
             indexreader = indexManager.getIndexReader();
             tv = indexManager.getTermVector(indexreader, item);
             if(null==tv) {
                 if(log.isErrorEnabled()) log.error("No term vector for item " + item.getId());
                 //??? better handling
                 return;
             }
         }
         finally {
             //XXX should close earlier
             if(null!=indexreader) {
                 try {
                     indexreader.close();
                 }
                 catch(IOException ex) {
                     if(log.isDebugEnabled()) log.debug("IOException cleaning up indexreader ", ex);
                 }
             }
         }

         //Replace the String[] with its equivalent long[]... (and tally up total occurs)
         String[] termstrings = tv.getTerms();
         int[] freqs = tv.getTermFrequencies();

Thank you for your help,
Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 02:49:39 2005
Return-Path: <java-user-return-17900-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49293 invoked from network); 9 Dec 2005 02:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 02:49:39 -0000
Received: (qmail 1378 invoked by uid 500); 9 Dec 2005 02:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1362 invoked by uid 500); 9 Dec 2005 02:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1345 invoked by uid 99); 9 Dec 2005 02:49:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 18:49:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 18:49:29 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 5A5995B854; Thu,  8 Dec 2005 18:49:08 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 529EB7F4F9
	for <java-user@lucene.apache.org>; Thu,  8 Dec 2005 18:49:08 -0800 (PST)
Date: Thu, 8 Dec 2005 18:49:08 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: JVM Crash in Lucene
In-Reply-To: <Pine.LNX.4.62.0512082041270.30928@wayland>
Message-ID: <Pine.LNX.4.58.0512081842180.4983@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.62.0512082041270.30928@wayland>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I'm relatively new to Lucene.  When I run my app, I get a JVM error.
: This gets called a lot, but only fails every once in awhile (maybe 1 in
: 100 calls?)

i'm not that familiar with TermFreqVectors, and I have no idea what
indexManager is, but I'm suprised this works at all ... I thought calling
the getters on a TermFreqVector required it to read from the underlying
files (which would require that the reader still be open).

Is it possible that that's your problem? .. is there perhaps some strange
GC interaction issue that results in the data TermFreqVector is looking
for to go bye-bye because you closed the reader?

(it sounds silly when I read it back to myself ... but it's the best guess
i've got just reading your code)

: My code that is causing the JVM crash is:
:
:          //Get the terms and frequencies
:          IndexReader indexreader = null;
:          TermFreqVector tv = null;
:          try {
:              indexreader = indexManager.getIndexReader();
:              tv = indexManager.getTermVector(indexreader, item);
:              if(null==tv) {
:                  if(log.isErrorEnabled()) log.error("No term vector for item " + item.getId());
:                  //??? better handling
:                  return;
:              }
:          }
:          finally {
:              //XXX should close earlier
:              if(null!=indexreader) {
:                  try {
:                      indexreader.close();
:                  }
:                  catch(IOException ex) {
:                      if(log.isDebugEnabled()) log.debug("IOException cleaning up indexreader ", ex);
:                  }
:              }
:          }
:
:          //Replace the String[] with its equivalent long[]... (and tally up total occurs)
:          String[] termstrings = tv.getTerms();
:          int[] freqs = tv.getTermFrequencies();




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 03:07:15 2005
Return-Path: <java-user-return-17901-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58633 invoked from network); 9 Dec 2005 03:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 03:07:14 -0000
Received: (qmail 26925 invoked by uid 500); 9 Dec 2005 03:07:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26899 invoked by uid 500); 9 Dec 2005 03:07:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26888 invoked by uid 99); 9 Dec 2005 03:07:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 19:07:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 08 Dec 2005 19:07:08 -0800
Received: by zproxy.gmail.com with SMTP id i1so977027nzh
        for <java-user@lucene.apache.org>; Thu, 08 Dec 2005 19:06:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=aZRHgw9pfbwsXg98JH8oQ553cKR37offvrQi86UVHzWc2JFMjBqrkekQPE0lBBPuCVco1Og2Yflpeo4mCvX48vMQSAmvgfiz7izwcIwVTDMbv/N0d7JRM2LK9JQlJMMAeasFjvaNHp9KiKE51/q14A9paIH/brGAJWwUFUJ7FPo=
Received: by 10.65.152.19 with SMTP id e19mr922696qbo;
        Thu, 08 Dec 2005 19:06:47 -0800 (PST)
Received: by 10.64.220.11 with HTTP; Thu, 8 Dec 2005 19:06:47 -0800 (PST)
Message-ID: <c68e39170512081906v2144f462ga2354a27da7f38ed@mail.gmail.com>
Date: Thu, 8 Dec 2005 22:06:47 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JVM Crash in Lucene
In-Reply-To: <Pine.LNX.4.62.0512082041270.30928@wayland>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <Pine.LNX.4.62.0512082041270.30928@wayland>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The only problems I've had with 1.5 JVM crashes and Lucene was related
to stack overflow... try increasing the stack size and see of anything
different happens.

My crashes happened while trying to use Luke to open a 4GB index with
thousands of indexed fields.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 14:31:33 2005
Return-Path: <java-user-return-17902-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24218 invoked from network); 9 Dec 2005 14:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 14:31:33 -0000
Received: (qmail 69404 invoked by uid 500); 9 Dec 2005 14:31:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68402 invoked by uid 500); 9 Dec 2005 14:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68389 invoked by uid 99); 9 Dec 2005 14:31:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 06:31:25 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 06:31:25 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14C3713A@mailer.syr.edu>; Fri, 9 Dec 2005 9:31:02 -0500
Message-ID: <43999525.9090903@syr.edu>
Date: Fri, 09 Dec 2005 09:31:01 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: ApacheCon next week
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Any one planning on going to ApacheCon next week?  I will be giving a 
talk on Lucene on Monday afternoon at 3pm on term vectors, span queries 
and some case studies from our work at CNLP with Lucene. 

Abstract for my talk can be found at 
http://www.apachecon.com/2005/US/html/sessions.html/e=MjAwNS9VUw#1400

-Grant

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
337 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 15:40:42 2005
Return-Path: <java-user-return-17903-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82107 invoked from network); 9 Dec 2005 15:40:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 15:40:41 -0000
Received: (qmail 87149 invoked by uid 500); 9 Dec 2005 15:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86831 invoked by uid 500); 9 Dec 2005 15:40:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 59918 invoked by uid 99); 9 Dec 2005 15:26:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: RE: JVM Crash in Lucene
Date: Fri, 9 Dec 2005 15:26:54 -0000
Message-ID: <D98ADD74A4E07445A943A90A184B51990156FB40@zebedee.magus.co.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: JVM Crash in Lucene
Thread-Index: AcX8aN+e3b22WMt7Q8e8A/4hkufK3gAbA6pA
From: "Dan Hanley" <dan.hanley@magus.co.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

MaxPermSize is a not-always-documented jvm flag similar to Xmx. You set =
it like this...


java -Xmx200M -XX:MaxPermSize=3D100m Myclass

It sets the maximum amount of space that will be available to the jvm =
for 'permanent' things (classes, etc.) and defaults to just 64MB. This =
can often run out with code that generates lots of classes as it goes =
along (e.g. all those proxies in jboss, something similar in big xdoclet =
tasks).

One important thing is how it relates to Xmx - whereas garbage collector =
limits (for the young and old parts of ram) are within the overall limit =
set by Xmx, Max Perm Size is separate from Xmx. This means you could =
chuck gigabytes of ram at your Xmx and still get something a bit like an =
out of memory error by using up the default 64mb limit for class =
definitions.

Here's some web pages that refer with more detail....

http://www.tagtraum.com/gcviewer-vmflags.html
http://java.sun.com/docs/hotspot/gc/
http://www.unixville.com/~moazam/stories/2004/05/17/maxpermsizeAndHowItRe=
latesToTheOverallHeap.html

hth
Dan

-----Original Message-----
From: Dan Gould [mailto:dlg@cs.brown.edu]
Sent: 09 December 2005 01:49
To: java-user@lucene.apache.org
Subject: JVM Crash in Lucene


Hi--

I'm relatively new to Lucene.  When I run my app, I get a JVM error.=20
This gets called a lot, but only fails every once in awhile (maybe 1 in=20
100 calls?)

I filed a report with Sun, but I don't expect to hear anything from =
them.=20
So, I was wondering if any Lucene experts have run across this or have =
any=20
ideas for workarounds (if not, I'll have to take lucene out of my system =

and manage the termvectors myself):

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=3D0x0000002a95a5c300, pid=3D26545, =
tid=3D1085655392
#
# Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_06-b05 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x4fa300]
#
# An error report file with more information is saved as=20
hs_err_pid26545.log

That error file is huge, but the salient part seems to be:

Stack: [0x0000000040a5c000,0x0000000040b5d000),  =
sp=3D0x0000000040b59f70,=20
free sp
ace=3D1015k
Native frames: (J=3Dcompiled Java code, j=3Dinterpreted, Vv=3DVM code, =
C=3Dnative=20
code)
V  [libjvm.so+0x4fa300]
V  [libjvm.so+0x4fa3c2]
V  [libjvm.so+0x4fa876]
V  [libjvm.so+0x58051e]
V  [libjvm.so+0x58017c]
V  [libjvm.so+0x2b968b]
V  [libjvm.so+0x2b67ba]
V  [libjvm.so+0x25f3c7]
V  [libjvm.so+0x2bed06]
V  [libjvm.so+0x2be6b2]
V  [libjvm.so+0x6163f9]
V  [libjvm.so+0x610ffe]
V  [libjvm.so+0x554745]


Current CompileTask:
opto:1621=20
org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object;
(99 bytes)

My code that is causing the JVM crash is:

         //Get the terms and frequencies
         IndexReader indexreader =3D null;
         TermFreqVector tv =3D null;
         try {
             indexreader =3D indexManager.getIndexReader();
             tv =3D indexManager.getTermVector(indexreader, item);
             if(null=3D=3Dtv) {
                 if(log.isErrorEnabled()) log.error("No term vector for =
item " + item.getId());
                 //??? better handling
                 return;
             }
         }
         finally {
             //XXX should close earlier
             if(null!=3Dindexreader) {
                 try {
                     indexreader.close();
                 }
                 catch(IOException ex) {
                     if(log.isDebugEnabled()) log.debug("IOException =
cleaning up indexreader ", ex);
                 }
             }
         }

         //Replace the String[] with its equivalent long[]... (and tally =
up total occurs)
         String[] termstrings =3D tv.getTerms();
         int[] freqs =3D tv.getTermFrequencies();

Thank you for your help,
Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 16:51:55 2005
Return-Path: <java-user-return-17904-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35491 invoked from network); 9 Dec 2005 16:51:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 16:51:55 -0000
Received: (qmail 25492 invoked by uid 500); 9 Dec 2005 16:51:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25469 invoked by uid 500); 9 Dec 2005 16:51:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25458 invoked by uid 99); 9 Dec 2005 16:51:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 08:51:48 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.h.funk@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 08:51:47 -0800
Received: by wproxy.gmail.com with SMTP id i32so894593wra
        for <java-user@lucene.apache.org>; Fri, 09 Dec 2005 08:51:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=L627MtPo327yqP7akMUQD0ASD1EyXQojWeTdHSTWkeGDn1Hdi3ZVyruHamHhy6FfDAPBpaLe+uWg5PsG5vtYb+h8zBwRBatsgqFi/l6v5XXc1Xl+rJVPJ4ixDtvJlEao2P7gNbEchruMSwGKCPlytYGlhW3/GHeg8am/peIBqM8=
Received: by 10.54.144.3 with SMTP id r3mr4343909wrd;
        Fri, 09 Dec 2005 08:51:26 -0800 (PST)
Received: by 10.54.144.13 with HTTP; Fri, 9 Dec 2005 08:51:25 -0800 (PST)
Message-ID: <fb81d4720512090851k6257c5efncc6379ce2b634ea7@mail.gmail.com>
Date: Fri, 9 Dec 2005 16:51:25 +0000
From: Dan Funk <daniel.h.funk@gmail.com>
To: java-user@lucene.apache.org
Subject: exporting and importing Lucene documents
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4979_17927620.1134147085138"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4979_17927620.1134147085138
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

We build indexes, then share those indexes (along with files and database
records) with our client installations.

 We now have multiple clients, and they are beginning to say things like,
"I'd like this group of documents here, and this little bit over here, and
ah .... yea that document there too, but not all that other stuff." Damn
clients.

We need to keep our installation simple and fairly idiot proof.  I don't
want them to spend hours/days building indexes at installation time.

What I would like to do is have a primary index with all documents pre-buil=
d
at our office, then pull select lucene documents out of that index, and
build a second that would be ready to send to our client.  Is this going to
be any more efficient than just building a new index from scratch?  Is ther=
e
a better method?  Such as duplicating the index and deleting ids that I
don't want in the new index?

Thanks,

Dan

------=_Part_4979_17927620.1134147085138--

From java-user-return-17905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 17:02:16 2005
Return-Path: <java-user-return-17905-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40696 invoked from network); 9 Dec 2005 17:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 17:02:16 -0000
Received: (qmail 38283 invoked by uid 500); 9 Dec 2005 17:02:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38021 invoked by uid 500); 9 Dec 2005 17:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38010 invoked by uid 99); 9 Dec 2005 17:02:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 09:02:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jd2810@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 09:02:09 -0800
Received: by wproxy.gmail.com with SMTP id i14so1244681wra
        for <java-user@lucene.apache.org>; Fri, 09 Dec 2005 09:01:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TeZ5eCjl4TKds30Sy+qBa6yZTq8Esd7RoVHxmQBBp49JpF9Ypj7GKGCAOIrG3fZefpJkQkAAfrbBAJnX+XXPHUyImV7FqkSCryTw8zIG/PkgG7GSFLl6t+6C0Sqr+X42mIE61+6NQeOYExiQcbaTvuOBEO+0du87BYqrVNz7X7o=
Received: by 10.54.80.1 with SMTP id d1mr4808147wrb;
        Fri, 09 Dec 2005 09:01:47 -0800 (PST)
Received: by 10.54.108.6 with HTTP; Fri, 9 Dec 2005 09:01:47 -0800 (PST)
Message-ID: <e72f06500512090901la0f5ab7l9f6e3494306d0788@mail.gmail.com>
Date: Fri, 9 Dec 2005 12:01:47 -0500
From: Srinivas Jadcharla <jd2810@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene Tutorial
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4176_28424072.1134147707917"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4176_28424072.1134147707917
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgdGhlcmUsCgppcyB0aGVzZSBhbnkgb25saW5lIHR1dG9yaWFsIHdoaWNoIGV4cGxhaW5zIGhv
dyB0byB1c2UgdGhlIGx1Y2VuZSB0aGF0IGlzClN0YXJ0aW5nIGZyb20gaW5zdGFsbGluZyBsdWNl
bmUgdG8gZGV2ZWxvcCBhIHNpbXBsZSBhcHBsaWNhdGlvbiB0aGF0CnNlYXJjaGVzIGEgc2ltcGxl
IHRleHQgZmlsZS5BbnkgYWR2aWNlIGlzIGhpZ2hseSBhcHByZWNpYWJsZS4KCi0tClRoYW5rcyAm
IFJlZ2FyZHMKClNyaW5pdmFzCjczMi02NDgtOTQyMShDZWxsKQo=
------=_Part_4176_28424072.1134147707917--

From java-user-return-17906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 17:14:52 2005
Return-Path: <java-user-return-17906-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47740 invoked from network); 9 Dec 2005 17:14:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 17:14:51 -0000
Received: (qmail 75734 invoked by uid 500); 9 Dec 2005 17:14:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75712 invoked by uid 500); 9 Dec 2005 17:14:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75701 invoked by uid 99); 9 Dec 2005 17:14:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 09:14:44 -0800
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.228] (HELO web50315.mail.yahoo.com) (206.190.39.228)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 09 Dec 2005 09:14:43 -0800
Received: (qmail 37645 invoked by uid 60001); 9 Dec 2005 17:14:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=a9GOOlzxgoVDkG0vv8aLpxRwyw+d32MJFRNw7skd4wIXmE2LaaG/N/mK71pfsnAwuabwxlxyv+rFN8+efuK90T0hW69vtqtLvHDsIMzJLRLJKTTb+ZpOWOcm8vmYsI/79dB/uBJXDfHRluHhNWvTemcyam4VoxvNxAsXcnf37ho=  ;
Message-ID: <20051209171421.37643.qmail@web50315.mail.yahoo.com>
Received: from [69.201.142.21] by web50315.mail.yahoo.com via HTTP; Fri, 09 Dec 2005 09:14:21 PST
Date: Fri, 9 Dec 2005 09:14:21 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene Tutorial
To: java-user@lucene.apache.org
In-Reply-To: <e72f06500512090901la0f5ab7l9f6e3494306d0788@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Srinivas,

There is Lucene in Action - see http://www.lucenebook.com/
You can get an eBook (PDF) version as well (quicker).  Other than the
book, there are several articles about Lucene listed in the Lucene
Wiki.

Otis

--- Srinivas Jadcharla <jd2810@gmail.com> wrote:

> Hi there,
> 
> is these any online tutorial which explains how to use the lucene
> that is
> Starting from installing lucene to develop a simple application that
> searches a simple text file.Any advice is highly appreciable.
> 
> --
> Thanks & Regards
> 
> Srinivas
> 732-648-9421(Cell)
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 17:16:58 2005
Return-Path: <java-user-return-17907-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49126 invoked from network); 9 Dec 2005 17:16:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 17:16:57 -0000
Received: (qmail 78994 invoked by uid 500); 9 Dec 2005 17:16:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78974 invoked by uid 500); 9 Dec 2005 17:16:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78961 invoked by uid 99); 9 Dec 2005 17:16:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 09:16:51 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jd2810@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 09:16:50 -0800
Received: by wproxy.gmail.com with SMTP id 55so1273765wri
        for <java-user@lucene.apache.org>; Fri, 09 Dec 2005 09:16:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=X9i4GqmmMB83w2XO2UPArBR+UgSCsqpCodk8XODLiHc4WidUrgdWuTFVYEErmFVEfVfbAVSaDlfzhzmHagwSreHcKtb8VOw2N8Kd7g7Qlulu8Uh1wjdqQgQ40Z/lwyqiajYCTxcsJcjVQJjdFN5WKpGZJJuT528ywYYmUX6sbhI=
Received: by 10.54.156.15 with SMTP id d15mr5997077wre;
        Fri, 09 Dec 2005 09:16:29 -0800 (PST)
Received: by 10.54.108.6 with HTTP; Fri, 9 Dec 2005 09:16:29 -0800 (PST)
Message-ID: <e72f06500512090916s23ebb120kf5db711c9fa9228a@mail.gmail.com>
Date: Fri, 9 Dec 2005 12:16:29 -0500
From: Srinivas Jadcharla <jd2810@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene Tutorial
In-Reply-To: <20051209171421.37643.qmail@web50315.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4280_19801219.1134148589395"
References: <e72f06500512090901la0f5ab7l9f6e3494306d0788@mail.gmail.com>
	 <20051209171421.37643.qmail@web50315.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4280_19801219.1134148589395
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIG90aXMKCk9uIDEyLzkvMDUsIE90aXMgR29zcG9kbmV0aWMgPG90aXNfZ29zcG9kbmV0
aWNAeWFob28uY29tPiB3cm90ZToKPgo+IFNyaW5pdmFzLAo+Cj4gVGhlcmUgaXMgTHVjZW5lIGlu
IEFjdGlvbiAtIHNlZSBodHRwOi8vd3d3Lmx1Y2VuZWJvb2suY29tLwo+IFlvdSBjYW4gZ2V0IGFu
IGVCb29rIChQREYpIHZlcnNpb24gYXMgd2VsbCAocXVpY2tlcikuICBPdGhlciB0aGFuIHRoZQo+
IGJvb2ssIHRoZXJlIGFyZSBzZXZlcmFsIGFydGljbGVzIGFib3V0IEx1Y2VuZSBsaXN0ZWQgaW4g
dGhlIEx1Y2VuZQo+IFdpa2kuCj4KPiBPdGlzCj4KPiAtLS0gU3Jpbml2YXMgSmFkY2hhcmxhIDxq
ZDI4MTBAZ21haWwuY29tPiB3cm90ZToKPgo+ID4gSGkgdGhlcmUsCj4gPgo+ID4gaXMgdGhlc2Ug
YW55IG9ubGluZSB0dXRvcmlhbCB3aGljaCBleHBsYWlucyBob3cgdG8gdXNlIHRoZSBsdWNlbmUK
PiA+IHRoYXQgaXMKPiA+IFN0YXJ0aW5nIGZyb20gaW5zdGFsbGluZyBsdWNlbmUgdG8gZGV2ZWxv
cCBhIHNpbXBsZSBhcHBsaWNhdGlvbiB0aGF0Cj4gPiBzZWFyY2hlcyBhIHNpbXBsZSB0ZXh0IGZp
bGUuQW55IGFkdmljZSBpcyBoaWdobHkgYXBwcmVjaWFibGUuCj4gPgo+ID4gLS0KPiA+IFRoYW5r
cyAmIFJlZ2FyZHMKPiA+Cj4gPiBTcmluaXZhcwo+ID4gNzMyLTY0OC05NDIxKENlbGwpCj4gPgo+
Cj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5z
dWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBGb3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1t
YWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBhY2hlLm9yZwo+Cj4KCgotLQpUaGFua3MgJiBS
ZWdhcmRzCgpTcmluaXZhcwo3MzItNjQ4LTk0MjEoQ2VsbCkK
------=_Part_4280_19801219.1134148589395--

From java-user-return-17908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 18:03:48 2005
Return-Path: <java-user-return-17908-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75897 invoked from network); 9 Dec 2005 18:03:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 18:03:48 -0000
Received: (qmail 84255 invoked by uid 500); 9 Dec 2005 18:03:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84191 invoked by uid 500); 9 Dec 2005 18:03:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84138 invoked by uid 99); 9 Dec 2005 18:03:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 10:03:41 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=MAILTO_TO_SPAM_ADDR
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 10:03:40 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14C3A489@mailer.syr.edu>; Fri, 9 Dec 2005 13:03:19 -0500
Message-ID: <4399C6E5.8060806@syr.edu>
Date: Fri, 09 Dec 2005 13:03:17 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene Tutorial
References: <e72f06500512090901la0f5ab7l9f6e3494306d0788@mail.gmail.com>	 <20051209171421.37643.qmail@web50315.mail.yahoo.com> <e72f06500512090916s23ebb120kf5db711c9fa9228a@mail.gmail.com>
In-Reply-To: <e72f06500512090916s23ebb120kf5db711c9fa9228a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Srinivas,

You may also find http://lucene.apache.org/java/docs/gettingstarted.html 
which describes the demo application that comes with Lucene.

-Grant

Srinivas Jadcharla wrote:

>Thanks otis
>
>On 12/9/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>  
>
>>Srinivas,
>>
>>There is Lucene in Action - see http://www.lucenebook.com/
>>You can get an eBook (PDF) version as well (quicker).  Other than the
>>book, there are several articles about Lucene listed in the Lucene
>>Wiki.
>>
>>Otis
>>
>>--- Srinivas Jadcharla <jd2810@gmail.com> wrote:
>>
>>    
>>
>>>Hi there,
>>>
>>>is these any online tutorial which explains how to use the lucene
>>>that is
>>>Starting from installing lucene to develop a simple application that
>>>searches a simple text file.Any advice is highly appreciable.
>>>
>>>--
>>>Thanks & Regards
>>>
>>>Srinivas
>>>732-648-9421(Cell)
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>
>--
>Thanks & Regards
>
>Srinivas
>732-648-9421(Cell)
>  
>

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
337 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 20:19:30 2005
Return-Path: <java-user-return-17909-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52733 invoked from network); 9 Dec 2005 20:19:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 20:19:29 -0000
Received: (qmail 45126 invoked by uid 500); 9 Dec 2005 20:19:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45106 invoked by uid 500); 9 Dec 2005 20:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45095 invoked by uid 99); 9 Dec 2005 20:19:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 12:19:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.5 as permitted sender)
Received: from [195.188.213.5] (HELO smtp-out2.blueyonder.co.uk) (195.188.213.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 12:19:20 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out2.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 9 Dec 2005 20:19:53 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1Ekohm-00029e-6C
	for java-user@lucene.apache.org; Fri, 09 Dec 2005 20:18:58 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Confused again ... Getting at results
Date: Fri, 9 Dec 2005 20:18:56 +0000
User-Agent: KMail/1.8.2
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512092018.57395.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 09 Dec 2005 20:19:53.0912 (UTC) FILETIME=[EA61A380:01C5FCFD]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am slowly making may way through lucene, as witnessed by earlier threads to 
this mailing list.

But I am stuck again, going round in circles with the Javadocs.

I want to display the results of a user entered search where for each document 
I put out a small summary with the searched for words highlighted.

When I wrote the Analyzer for my documents, I produced the tokenstream  to 
generate Token objects with the start end end positions of each term in them

Now, from my Hits object I can find each document I need to output, but how do 
I get back to the Tokens I originally produced.

I suspect it has something to do with FilterIndexReader and its nested class 
FilterTermPositions, but I can't see how to link these to the seach I have 
just done

How is it done?



-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 09 23:56:56 2005
Return-Path: <java-user-return-17910-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49314 invoked from network); 9 Dec 2005 23:56:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Dec 2005 23:56:56 -0000
Received: (qmail 35028 invoked by uid 500); 9 Dec 2005 23:56:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35007 invoked by uid 500); 9 Dec 2005 23:56:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34996 invoked by uid 99); 9 Dec 2005 23:56:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 15:56:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 15:56:48 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 919E35B944; Fri,  9 Dec 2005 15:56:28 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7A9A87F509
	for <java-user@lucene.apache.org>; Fri,  9 Dec 2005 15:56:28 -0800 (PST)
Date: Fri, 9 Dec 2005 15:56:28 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: exporting and importing Lucene documents
In-Reply-To: <fb81d4720512090851k6257c5efncc6379ce2b634ea7@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0512091550550.24339@hal.rescomp.berkeley.edu>
References: <fb81d4720512090851k6257c5efncc6379ce2b634ea7@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


as long as the you are interested in doing things at document granularity
(and not on a field granularity - ie: some clients want certain fields,
and others don't) then you can use a combination of composition from small
indexes, and deleting of unwanted data.

without understanding exactly what kidns of critera your clients are
talking about when they say "i want this and this and this but not that"
it's hard to know exactly what would be best for you, but assuming it's
and index of books that have categorization and publication years
you could easily do something like build a seperate index for each year,
then use create a new index for each client in which you call
IndexWriter.addIndexes(Directory) on the set of year specific indexes they
want, and then use IndexReader.delete(Term) to throw out books in
categories they don't like.



: Date: Fri, 9 Dec 2005 16:51:25 +0000
: From: Dan Funk <daniel.h.funk@gmail.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: exporting and importing Lucene documents
:
: We build indexes, then share those indexes (along with files and database
: records) with our client installations.
:
:  We now have multiple clients, and they are beginning to say things like,
: "I'd like this group of documents here, and this little bit over here, and
: ah .... yea that document there too, but not all that other stuff." Damn
: clients.
:
: We need to keep our installation simple and fairly idiot proof.  I don't
: want them to spend hours/days building indexes at installation time.
:
: What I would like to do is have a primary index with all documents pre-build
: at our office, then pull select lucene documents out of that index, and
: build a second that would be ready to send to our client.  Is this going to
: be any more efficient than just building a new index from scratch?  Is there
: a better method?  Such as duplicating the index and deleting ids that I
: don't want in the new index?
:
: Thanks,
:
: Dan
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 00:19:04 2005
Return-Path: <java-user-return-17911-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56990 invoked from network); 10 Dec 2005 00:19:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 00:19:04 -0000
Received: (qmail 61782 invoked by uid 500); 10 Dec 2005 00:18:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61749 invoked by uid 500); 10 Dec 2005 00:18:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61738 invoked by uid 99); 10 Dec 2005 00:18:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 16:18:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 16:18:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 861AE13E202A; Fri,  9 Dec 2005 19:18:35 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 4536613E202B
	for <java-user@lucene.apache.org>; Fri,  9 Dec 2005 19:18:11 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <200512092018.57395.alan@chandlerfamily.org.uk>
References: <200512092018.57395.alan@chandlerfamily.org.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DFDF7DD9-C868-4D3F-A17B-58199C40F237@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Confused again ... Getting at results
Date: Fri, 9 Dec 2005 19:17:54 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 9, 2005, at 3:18 PM, Alan Chandler wrote:
> I am slowly making may way through lucene, as witnessed by earlier  
> threads to
> this mailing list.
>
> But I am stuck again, going round in circles with the Javadocs.
>
> I want to display the results of a user entered search where for  
> each document
> I put out a small summary with the searched for words highlighted.
>
> When I wrote the Analyzer for my documents, I produced the  
> tokenstream  to
> generate Token objects with the start end end positions of each  
> term in them
>
> Now, from my Hits object I can find each document I need to output,  
> but how do
> I get back to the Tokens I originally produced.

Are you using Lucene 1.4.3?  Or the latest Subversion version?

The Lucene index does not keep all of the information in the Token's  
emitted by the analyzer (unless specified to do so, but 1.4.3 didn't  
support the fancier features).

So, the fail-safe way is to re-tokenize the original text (perhaps  
stored in the Lucene index) and hand that TokenStream to the  
Highlighter.

Or you can experiment with the additional Field constructors to  
enable the storage of token offsets and the Highlighter can use those  
for a little better performance, but it's likely to be unnoticeable  
for your application to simply re-tokenize on the fly for only the  
fields you're displaying.  Storing the token offsets increases the  
index size, of course.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 06:38:50 2005
Return-Path: <java-user-return-17912-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95410 invoked from network); 10 Dec 2005 06:38:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 06:38:50 -0000
Received: (qmail 71456 invoked by uid 500); 10 Dec 2005 06:38:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71432 invoked by uid 500); 10 Dec 2005 06:38:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71415 invoked by uid 99); 10 Dec 2005 06:38:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 22:38:45 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alan@chandlerfamily.org.uk designates 195.188.213.9 as permitted sender)
Received: from [195.188.213.9] (HELO smtp-out6.blueyonder.co.uk) (195.188.213.9)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 22:38:44 -0800
Received: from home.chandlerfamily.org.uk ([82.44.22.127]) by smtp-out6.blueyonder.co.uk with Microsoft SMTPSVC(5.0.2195.6713);
	 Sat, 10 Dec 2005 06:39:17 +0000
Received: from kanger.home ([192.168.0.21])
	by home.chandlerfamily.org.uk with esmtp (Exim 4.50)
	id 1EkyNC-00033U-93
	for java-user@lucene.apache.org; Sat, 10 Dec 2005 06:38:22 +0000
From: Alan Chandler <alan@chandlerfamily.org.uk>
To: java-user@lucene.apache.org
Subject: Re: Confused again ... Getting at results
Date: Sat, 10 Dec 2005 06:38:23 +0000
User-Agent: KMail/1.8.3
References: <200512092018.57395.alan@chandlerfamily.org.uk> <DFDF7DD9-C868-4D3F-A17B-58199C40F237@ehatchersolutions.com>
In-Reply-To: <DFDF7DD9-C868-4D3F-A17B-58199C40F237@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512100638.23445.alan@chandlerfamily.org.uk>
X-OriginalArrivalTime: 10 Dec 2005 06:39:18.0030 (UTC) FILETIME=[71EC02E0:01C5FD54]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 10 Dec 2005 00:17, Erik Hatcher wrote:

> > When I wrote the Analyzer for my documents, I produced the
> > tokenstream  to
> > generate Token objects with the start end end positions of each
> > term in them
> >
> > Now, from my Hits object I can find each document I need to output,
> > but how do
> > I get back to the Tokens I originally produced.
>
> Are you using Lucene 1.4.3?  Or the latest Subversion version?
1.4.3


>
> The Lucene index does not keep all of the information in the Token's
> emitted by the analyzer (unless specified to do so, but 1.4.3 didn't
> support the fancier features).
>
> So, the fail-safe way is to re-tokenize the original text (perhaps
> stored in the Lucene index) and hand that TokenStream to the
> Highlighter.

I found a highlighter in the sandbox - I think that is doing something like 
this, so am going to experiment with that.

Initial attempt failed to compile because I think it was assuming a later 
version of the lucene code, but it looks like I just cut out the offending 
class and its ok.


-- 
Alan Chandler
http://www.chandlerfamily.org.uk
Open Source. It's the difference between trust and antitrust.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 06:55:10 2005
Return-Path: <java-user-return-17913-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98586 invoked from network); 10 Dec 2005 06:55:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 06:55:09 -0000
Received: (qmail 80427 invoked by uid 500); 10 Dec 2005 06:55:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80392 invoked by uid 500); 10 Dec 2005 06:55:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80381 invoked by uid 99); 10 Dec 2005 06:55:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 22:55:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.151.139.144] (HELO mta1.Tavant.com) (66.151.139.144)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 22:55:04 -0800
Received: from mail2.CHEERS.HAATHI.COM ([192.168.101.17])
	by mta1.Tavant.com (8.11.6/8.11.6) with ESMTP id jBA6shk18327
	for <java-user@lucene.apache.org>; Fri, 9 Dec 2005 22:54:43 -0800
Received: by mail2.cheers.haathi.com with Internet Mail Service (5.5.2653.19)
	id <XZQ26KH4>; Fri, 9 Dec 2005 22:54:43 -0800
Message-ID: <DE336BA52EC1CF4AA8310BD1E12AD4B3096DA2@indiamail3.CHEERS.HAATHI.COM>
From: Vasudeva Rao <vasudeva.rao@tavant.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: index databases
Date: Fri, 9 Dec 2005 22:54:20 -0800 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


hi there

are there any APIs which will index mysql databases and run periodically ?
i have one more query: if i choose to search on multiple fields do i loose
the advantage of fuzzy search and stuff like that
plz give some suggestions

vasu

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 07:11:02 2005
Return-Path: <java-user-return-17914-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1830 invoked from network); 10 Dec 2005 07:11:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 07:11:01 -0000
Received: (qmail 86655 invoked by uid 500); 10 Dec 2005 07:10:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86587 invoked by uid 500); 10 Dec 2005 07:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86576 invoked by uid 99); 10 Dec 2005 07:10:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 23:10:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 09 Dec 2005 23:10:54 -0800
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1EkysA-0006ET-FI
	for java-user@lucene.apache.org; Sat, 10 Dec 2005 08:10:22 +0100
Received: from c-24-20-199-223.hsd1.or.comcast.net ([24.20.199.223])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 08:10:22 +0100
Received: from dobleerre by c-24-20-199-223.hsd1.or.comcast.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 08:10:22 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Raul Raja Martinez <dobleerre@estudiowebs.com>
Subject:  Integrating Lucene with hibernate3
Date:  Fri, 09 Dec 2005 22:58:49 -0800
Lines: 25
Message-ID: <dndubb$phk$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: c-24-20-199-223.hsd1.or.comcast.net
User-Agent: Thunderbird 1.5 (Macintosh/20051025)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm trying to integrate lucene with hibernate 3 in my tapestry CMS 
following the interceptor method (the second one in 
http://www.hibernate.org/138.html)

I run into two different problems:

1. Lucene's doesn't create the needed folder structure the first time 
and it complains that it can't find segments.

/Applications/OpenLaszlo Server 
3.1/Server/tomcat-5.0.24/webapps/com.estudiowebs.CMS/WEB-INF/luceneIndex/segments 
(No such file or directory)

I have even chmod the folder to 777 to make sure that it wasn't a 
permission problem.


2. My database uses native ids which means that in the interceptor 
onSave() method the id is null and it throws an exception.

Any help is appreciated.

Thank you.

Raul.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 08:27:38 2005
Return-Path: <java-user-return-17915-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23556 invoked from network); 10 Dec 2005 08:27:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 08:27:37 -0000
Received: (qmail 15467 invoked by uid 500); 10 Dec 2005 08:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15390 invoked by uid 500); 10 Dec 2005 08:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15374 invoked by uid 99); 10 Dec 2005 08:27:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 00:27:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 00:27:28 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 2B37B5B795; Sat, 10 Dec 2005 00:27:05 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 27E367F4AB
	for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 00:27:05 -0800 (PST)
Date: Sat, 10 Dec 2005 00:27:05 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Integrating Lucene with hibernate3
In-Reply-To: <dndubb$phk$1@sea.gmane.org>
Message-ID: <Pine.LNX.4.58.0512100005080.23718@hal.rescomp.berkeley.edu>
References: <dndubb$phk$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: following the interceptor method (the second one in
: http://www.hibernate.org/138.html)

I don't know much about hibernate, but I think i understand both of your
questions...

: 1. Lucene's doesn't create the needed folder structure the first time
: and it complains that it can't find segments.
:
: /Applications/OpenLaszlo Server
: 3.1/Server/tomcat-5.0.24/webapps/com.estudiowebs.CMS/WEB-INF/luceneIndex/segments
: (No such file or directory)

If you look at the javadocs for IndexWriter, you'll note that the last
argument in the constructor indicates wether or not you want the
IndexWriter to make a new index, or open an existing index.  In the
URL you cited, the arg is allways false -- so unless you've got
seperate code in your application that uses an IndexWriter to create the
index, It's not suprising that the code in the article would generate an
error like that.

: 2. My database uses native ids which means that in the interceptor
: onSave() method the id is null and it throws an exception.

if you copied the onSave method exactly as it appears, then i'm not sure
how a null id could ever cause it to throw an exception ("null
instanceof Long" will be false, and the method should do nothing) but if
you read the comments at the bottom on the page, you'll see suggestions to
use something called a "PostInsertEventListener" instead.


...a side commentary on this article -- the hibernate side of things may
make perfect sense to someone who understands hibernate really well, but
as someone who (I like to think) understands the basics of Lucene very
well, I think it's very lacking in it's explanation of Lucene concepts and
API usage.  I would not send this URL to anyone as an example of
integrating Hibernate and Lucene unless I felt they already understood
Lucene thoroughly.  You may want to start by learning more about Lucene
independent of hibernate, reading though the demo application for example,
before trying to bridge the two...

	http://lucene.apache.org/java/docs/gettingstarted.html


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 08:42:21 2005
Return-Path: <java-user-return-17916-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28409 invoked from network); 10 Dec 2005 08:42:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 08:42:20 -0000
Received: (qmail 22880 invoked by uid 500); 10 Dec 2005 08:42:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22855 invoked by uid 500); 10 Dec 2005 08:42:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22844 invoked by uid 99); 10 Dec 2005 08:42:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 00:42:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 00:42:15 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 3139D5B8A9; Sat, 10 Dec 2005 00:41:54 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 3002A7F477
	for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 00:41:54 -0800 (PST)
Date: Sat, 10 Dec 2005 00:41:54 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Re: index databases
In-Reply-To: <DE336BA52EC1CF4AA8310BD1E12AD4B3096DA2@indiamail3.CHEERS.HAATHI.COM>
Message-ID: <Pine.LNX.4.58.0512100033560.23718@hal.rescomp.berkeley.edu>
References: <DE336BA52EC1CF4AA8310BD1E12AD4B3096DA2@indiamail3.CHEERS.HAATHI.COM>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: are there any APIs which will index mysql databases and run periodically ?

I'll defer that question to someone else who knows more about it.

: i have one more query: if i choose to search on multiple fields do i loose
: the advantage of fuzzy search and stuff like that

Absolutely not.  Searching on multiple fields can be done with a
BooleanQuery, which allows you to compose multiple queries, each
"Sub-Clause" being either optional, required, or mandatory.  When building
up a BooleanQuery, the clauses can be term queres, or wild card queries or
any other type of query you want.

expressed in a "standard QueryParser syntax" you can easily do the
following...

    +title:Java author:Erik~ -category:Coffee

...which means find all documents where the title contains the word "Java"
and category does not contain the word "Coffee".  Documents with a word in
the author that has a fuzzy match on "Erik" will get higher scores.

More info on the QueryParser syntax can be found here...

http://lucene.apache.org/java/docs/queryparsersyntax.html




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 08:56:09 2005
Return-Path: <java-user-return-17917-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35217 invoked from network); 10 Dec 2005 08:56:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 08:56:09 -0000
Received: (qmail 30975 invoked by uid 500); 10 Dec 2005 08:56:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30949 invoked by uid 500); 10 Dec 2005 08:56:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30936 invoked by uid 99); 10 Dec 2005 08:56:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 00:56:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.203 as permitted sender)
Received: from [64.233.184.203] (HELO wproxy.gmail.com) (64.233.184.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 00:56:04 -0800
Received: by wproxy.gmail.com with SMTP id 69so1449117wri
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 00:55:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=hbOskDugscqmir+B9PAzT4goBQZakbwVdlD7hdm6u/KyGw/xEZ582IRHqaRhv61OaAQ0tafcSu7SFQe3Poa6yG2RkctAsq2xVDh8dTXD8ckZISzn/1ukZ7ZP5C9G8PLdN/3U4x6Oqy5CIFxO3WQjfAAkkTPUyBBWiuovTm2HNDw=
Received: by 10.65.182.4 with SMTP id j4mr4657441qbp;
        Sat, 10 Dec 2005 00:55:43 -0800 (PST)
Received: by 10.65.93.13 with HTTP; Sat, 10 Dec 2005 00:55:43 -0800 (PST)
Message-ID: <6e3ae6310512100055h168ee620tb6333c22a507b20a@mail.gmail.com>
Date: Sat, 10 Dec 2005 00:55:43 -0800
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index databases
In-Reply-To: <Pine.LNX.4.58.0512100033560.23718@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <DE336BA52EC1CF4AA8310BD1E12AD4B3096DA2@indiamail3.CHEERS.HAATHI.COM>
	 <Pine.LNX.4.58.0512100033560.23718@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/10/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
> : are there any APIs which will index mysql databases and run periodicall=
y ?
>
> I'll defer that question to someone else who knows more about it.
>

I may not know more than most people. But to index databases and run
periodically, you need a server instead of a simple API.
And you need to take care of notifying the searcher when you have new
index created if you want to cache the searcher for high performance.

I welcome you to take a look at DBSight.net
It's meant to help rapidly add a google-like search for any database
content, for any new/existing websites.

Chris Lu
--------------------
Lucene Search on Any Databases
http://www.dbsight.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 10:17:57 2005
Return-Path: <java-user-return-17918-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60766 invoked from network); 10 Dec 2005 10:17:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 10:17:56 -0000
Received: (qmail 75541 invoked by uid 500); 10 Dec 2005 10:17:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75515 invoked by uid 500); 10 Dec 2005 10:17:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75502 invoked by uid 99); 10 Dec 2005 10:17:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 02:17:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.174.197.139] (HELO mail.cds1.net) (216.174.197.139)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 02:17:49 -0800
Received: from localhost (mars.cds1.net [216.174.197.150])
	by mail.cds1.net (Postfix) with ESMTP id D435C61390
	for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 02:17:27 -0800 (PST)
Received: from mail.cds1.net ([216.174.197.139])
 by localhost (mars.cds1.net [216.174.197.150]) (amavisd-new, port 10024)
 with ESMTP id 06833-20 for <java-user@lucene.apache.org>;
 Sat, 10 Dec 2005 02:17:40 -0800 (PST)
Received: from [192.168.1.100] (dhcp-172-16-13-188.cds1.net [172.16.13.188])
	by mail.cds1.net (Postfix) with ESMTP id B30CD613EF
	for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 02:17:26 -0800 (PST)
Message-ID: <439AAB36.9070706@savant-is.com>
Date: Sat, 10 Dec 2005 02:17:26 -0800
From: Lawrence <lucene@savant-is.com>
User-Agent: Thunderbird 1.5 (Windows/20051025)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Releases
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by amavisd-new using ClamAV at mars.cds1.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

Is there a projected date for the next release?

I am using the code from SVN repos and I am hoping the next release will be before I go to production. I always like a little stability in my life.

Thanks for all your good work,
Lawrence


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 12:49:56 2005
Return-Path: <java-user-return-17919-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1792 invoked from network); 10 Dec 2005 12:49:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 12:49:56 -0000
Received: (qmail 36918 invoked by uid 500); 10 Dec 2005 12:49:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36769 invoked by uid 500); 10 Dec 2005 12:49:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36758 invoked by uid 99); 10 Dec 2005 12:49:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 04:49:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 04:49:48 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1El48i-0007co-LD
	for java-user@lucene.apache.org; Sat, 10 Dec 2005 13:47:48 +0100
Received: from c-24-20-199-223.hsd1.or.comcast.net ([24.20.199.223])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 13:47:48 +0100
Received: from dobleerre by c-24-20-199-223.hsd1.or.comcast.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 13:47:48 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Raul Raja Martinez <dobleerre@estudiowebs.com>
Subject:  Re: Integrating Lucene with hibernate3
Date:  Sat, 10 Dec 2005 04:47:15 -0800
Lines: 189
Message-ID: <dneiom$4js$1@sea.gmane.org>
References:  <dndubb$phk$1@sea.gmane.org> <Pine.LNX.4.58.0512100005080.23718@hal.rescomp.berkeley.edu>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: c-24-20-199-223.hsd1.or.comcast.net
User-Agent: Thunderbird 1.5 (Macintosh/20051025)
In-Reply-To: <Pine.LNX.4.58.0512100005080.23718@hal.rescomp.berkeley.edu>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Chris I appreciate your comments.
I have succesfully fixed the first changing the parameter to true and 
the second error implementing three interfaces in one class and adding 
some lines to hibernate.cfg.xml, below is the code in case somebody is 
interested:

****hibernate.cfg.xml**********

<listener type="post-update" 
class="com.estudiowebs.CMS.DAO.LuceneHibernateEventListener" />

<listener type="post-insert" 
class="com.estudiowebs.CMS.DAO.LuceneHibernateEventListener" />

<listener type="post-delete" 
class="com.estudiowebs.CMS.DAO.LuceneHibernateEventListener" />

*******************************


package com.estudiowebs.CMS.DAO;

import java.io.IOException;
import java.io.Serializable;

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.hibernate.CallbackException;
import org.hibernate.event.PostDeleteEvent;
import org.hibernate.event.PostDeleteEventListener;
import org.hibernate.event.PostInsertEvent;
import org.hibernate.event.PostInsertEventListener;
import org.hibernate.event.PostUpdateEvent;
import org.hibernate.event.PostUpdateEventListener;

public class LuceneHibernateEventListener implements 
PostInsertEventListener,
		PostUpdateEventListener, PostDeleteEventListener {

	/**
	 *
	 */
	private static final long serialVersionUID = 1L;

	/**
	 * Drop object from Lucene index
	 */
	public void drop(Searchable entity, Long id) throws IOException {

		System.out.println("Drop in index called for:" + entity);
		IndexReader reader = entity.getIndexReader();
		reader.delete(new Term("id", String.valueOf(id)));
	}

	/**
	 * Add object to Lucene index
	 */
	public void add(Searchable entity, Long id) throws IOException {

		System.out.println("Add to index called for:" + entity);

		Document doc = entity.getDocument();
		doc.add(Field.Keyword("id", String.valueOf(id)));
		doc.add(Field.Keyword("classname", entity.getClass().getName()));
		IndexWriter writer = entity.getIndexWriter();
		
		writer.addDocument(doc);
		writer.close();

	}

	public void onPostInsert(PostInsertEvent event) {

		System.out.println("LuceneInterceptor onSave called for: "
				+ event.getEntity() + " id " + event.getId());

		if (event.getEntity() instanceof Searchable) {

			try {
				add((Searchable) event.getEntity(),
						resolveToLong(event.getId()));
			} catch (IOException e) {
				throw new CallbackException(e.getMessage());
			}

		}

	}

	public void onPostUpdate(PostUpdateEvent event) {
		System.out.println("onFlushDirty called for:" + event.getEntity()
				+ " id " + event.getId());

		if (event.getEntity() instanceof Searchable) {

			try {
				drop((Searchable) event.getEntity(), resolveToLong(event
						.getId()));
				add((Searchable) event.getEntity(),
						resolveToLong(event.getId()));
			} catch (IOException e) {
				throw new CallbackException(e.getMessage());
			}

		}

	}

	public void onPostDelete(PostDeleteEvent event) {

		if (event.getEntity() instanceof Searchable) {

			try {
				drop((Searchable) event.getEntity(), resolveToLong(event
						.getId()));
			} catch (IOException e) {
				throw new CallbackException(e.getMessage());
			}

		}

	}

	private Long resolveToLong(Serializable id) {
		if (id instanceof Integer) {
			return new Long((Integer) id);
		} else if (id instanceof String) {
			return Long.valueOf((String) id);
		} else if (id instanceof Long) {
			return (Long) id;
		}

		return null;
	}

}




Chris Hostetter wrote:
> : following the interceptor method (the second one in
> : http://www.hibernate.org/138.html)
> 
> I don't know much about hibernate, but I think i understand both of your
> questions...
> 
> : 1. Lucene's doesn't create the needed folder structure the first time
> : and it complains that it can't find segments.
> :
> : /Applications/OpenLaszlo Server
> : 3.1/Server/tomcat-5.0.24/webapps/com.estudiowebs.CMS/WEB-INF/luceneIndex/segments
> : (No such file or directory)
> 
> If you look at the javadocs for IndexWriter, you'll note that the last
> argument in the constructor indicates wether or not you want the
> IndexWriter to make a new index, or open an existing index.  In the
> URL you cited, the arg is allways false -- so unless you've got
> seperate code in your application that uses an IndexWriter to create the
> index, It's not suprising that the code in the article would generate an
> error like that.
> 
> : 2. My database uses native ids which means that in the interceptor
> : onSave() method the id is null and it throws an exception.
> 
> if you copied the onSave method exactly as it appears, then i'm not sure
> how a null id could ever cause it to throw an exception ("null
> instanceof Long" will be false, and the method should do nothing) but if
> you read the comments at the bottom on the page, you'll see suggestions to
> use something called a "PostInsertEventListener" instead.
> 
> 
> ...a side commentary on this article -- the hibernate side of things may
> make perfect sense to someone who understands hibernate really well, but
> as someone who (I like to think) understands the basics of Lucene very
> well, I think it's very lacking in it's explanation of Lucene concepts and
> API usage.  I would not send this URL to anyone as an example of
> integrating Hibernate and Lucene unless I felt they already understood
> Lucene thoroughly.  You may want to start by learning more about Lucene
> independent of hibernate, reading though the demo application for example,
> before trying to bridge the two...
> 
> 	http://lucene.apache.org/java/docs/gettingstarted.html
> 
> 
> -Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 13:00:53 2005
Return-Path: <java-user-return-17920-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4663 invoked from network); 10 Dec 2005 13:00:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 13:00:53 -0000
Received: (qmail 44852 invoked by uid 500); 10 Dec 2005 13:00:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44820 invoked by uid 500); 10 Dec 2005 13:00:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44807 invoked by uid 99); 10 Dec 2005 13:00:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 05:00:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 05:00:47 -0800
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1El4Kt-0002lO-4s
	for java-user@lucene.apache.org; Sat, 10 Dec 2005 14:00:23 +0100
Received: from c-24-20-199-223.hsd1.or.comcast.net ([24.20.199.223])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 14:00:23 +0100
Received: from dobleerre by c-24-20-199-223.hsd1.or.comcast.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 14:00:23 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Raul Raja Martinez <dobleerre@estudiowebs.com>
Subject:  where to store the index
Date:  Sat, 10 Dec 2005 04:49:02 -0800
Lines: 6
Message-ID: <dneiru$4js$2@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: c-24-20-199-223.hsd1.or.comcast.net
User-Agent: Thunderbird 1.5 (Macintosh/20051025)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What would be the best practice storing the index in a webapp.
I mean in wich folder?

Thanks.

Raul.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 16:29:59 2005
Return-Path: <java-user-return-17921-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76917 invoked from network); 10 Dec 2005 16:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 16:29:59 -0000
Received: (qmail 79898 invoked by uid 500); 10 Dec 2005 16:29:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79866 invoked by uid 500); 10 Dec 2005 16:29:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79844 invoked by uid 99); 10 Dec 2005 16:29:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 08:29:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.h.funk@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 08:29:52 -0800
Received: by wproxy.gmail.com with SMTP id i28so1134004wra
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 08:29:32 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RnoNpRjLO30NxQFT0wbRlpJ7vy/h9dcn0Q+PTfHlG6E4Kia7cAuyaFbrb43fGgHTglhAfHSxOknfaQKbI398qenj85onajCUymvNth8IFipF6wf8hN3VM//dnQ0/Ql0j/FgtxhdP3iVGjFqCyTlEU0YIXoH8dh412UmMLZZ73x8=
Received: by 10.54.144.3 with SMTP id r3mr5562106wrd;
        Sat, 10 Dec 2005 08:29:32 -0800 (PST)
Received: by 10.54.106.10 with HTTP; Sat, 10 Dec 2005 08:29:32 -0800 (PST)
Message-ID: <fb81d4720512100829p620a9123o68492e991241150@mail.gmail.com>
Date: Sat, 10 Dec 2005 16:29:32 +0000
From: Dan Funk <daniel.h.funk@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: where to store the index
In-Reply-To: <dneiru$4js$2@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3257_114835.1134232172138"
References: <dneiru$4js$2@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3257_114835.1134232172138
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

If this is a small index and it won't change after install (you are just
using it to search, not to index), place it in a sub-directory of WEB-INF.

If it is a larger index (something you don't want to copy frequently), or i=
t
will change after install, then you shouldn't keep it inside your web
application at all, rather you should specify an external directory outside
the web application using some sort of configuration setting, maybe specify
it in your web.xml file.

On 12/10/05, Raul Raja Martinez <dobleerre@estudiowebs.com> wrote:
>
> What would be the best practice storing the index in a webapp.
> I mean in wich folder?
>
> Thanks.
>
> Raul.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_3257_114835.1134232172138--

From java-user-return-17922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 10 22:25:40 2005
Return-Path: <java-user-return-17922-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25708 invoked from network); 10 Dec 2005 22:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Dec 2005 22:25:40 -0000
Received: (qmail 72721 invoked by uid 500); 10 Dec 2005 22:25:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72674 invoked by uid 500); 10 Dec 2005 22:25:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72663 invoked by uid 99); 10 Dec 2005 22:25:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 14:25:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 14:25:33 -0800
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1ElD7o-0005CW-Sk
	for java-user@lucene.apache.org; Sat, 10 Dec 2005 23:23:29 +0100
Received: from c-24-20-199-223.hsd1.or.comcast.net ([24.20.199.223])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 23:23:28 +0100
Received: from dobleerre by c-24-20-199-223.hsd1.or.comcast.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 23:23:28 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Raul Raja Martinez <dobleerre@estudiowebs.com>
Subject:  Re: where to store the index
Date:  Sat, 10 Dec 2005 14:23:13 -0800
Lines: 38
Message-ID: <dnfkgi$smb$1@sea.gmane.org>
References:  <dneiru$4js$2@sea.gmane.org> <fb81d4720512100829p620a9123o68492e991241150@mail.gmail.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: c-24-20-199-223.hsd1.or.comcast.net
User-Agent: Thunderbird 1.5 (Macintosh/20051025)
In-Reply-To: <fb81d4720512100829p620a9123o68492e991241150@mail.gmail.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

first thanks for your response Dan,

It I'll be around 5.000 database records with three indexed fields:
id, title(1 line) and description(around three lines). I was even 
considering using the in memory feature for faster access but I'm new to 
lucene and I'don't know if that I'll cause my problems in the future.

Any help appreciated

best regards.

Raul.

Dan Funk wrote:
> If this is a small index and it won't change after install (you are just
> using it to search, not to index), place it in a sub-directory of WEB-INF.
> 
> If it is a larger index (something you don't want to copy frequently), or it
> will change after install, then you shouldn't keep it inside your web
> application at all, rather you should specify an external directory outside
> the web application using some sort of configuration setting, maybe specify
> it in your web.xml file.
> 
> On 12/10/05, Raul Raja Martinez <dobleerre@estudiowebs.com> wrote:
>> What would be the best practice storing the index in a webapp.
>> I mean in wich folder?
>>
>> Thanks.
>>
>> Raul.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 01:39:35 2005
Return-Path: <java-user-return-17923-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61373 invoked from network); 11 Dec 2005 01:39:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 01:39:35 -0000
Received: (qmail 49779 invoked by uid 500); 11 Dec 2005 01:39:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49693 invoked by uid 500); 11 Dec 2005 01:39:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49642 invoked by uid 99); 11 Dec 2005 01:39:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 17:39:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 17:39:24 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F21FA13E202A; Sat, 10 Dec 2005 20:39:03 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 63EAB13E202A
	for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 20:38:42 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <439AAB36.9070706@savant-is.com>
References: <439AAB36.9070706@savant-is.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2CDB2AE1-D98F-4034-8035-DDFBD1ED0713@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Releases
Date: Sat, 10 Dec 2005 20:38:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 10, 2005, at 5:17 AM, Lawrence wrote:
> Is there a projected date for the next release?

Real Soon Now :)

> I am using the code from SVN repos and I am hoping the next release  
> will be before I go to production. I always like a little stability  
> in my life.

You can pretty safely rely on the current state of Subversion not  
changing the API between now and a release.  No promises, but I don't  
know of any open issues that propose API changes.  So I don't think  
you have any worries  using Subversion.  However, I do realize that  
many organizations demand a release version for use (understandable  
in one sense, but also missing the point of open source IMO).

All we need is a release manager volunteer to step forward (one of  
the committers) and push through the logistics of making an official  
release.  If it goes long enough, maybe my plate will be clear  
enough, but currently I'm not in a position to tackle it myself.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 05:11:03 2005
Return-Path: <java-user-return-17924-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69175 invoked from network); 11 Dec 2005 05:11:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 05:11:03 -0000
Received: (qmail 8258 invoked by uid 500); 11 Dec 2005 05:10:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8239 invoked by uid 500); 11 Dec 2005 05:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8228 invoked by uid 99); 11 Dec 2005 05:10:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 21:10:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of appler@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 21:10:56 -0800
Received: by wproxy.gmail.com with SMTP id 70so28647wra
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 21:10:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=pQoH9iIwflkhHgOHcCHcsO+APGptoICeu9EOFnR1OLniK/Ei3USpLzOxOXrERmuuuXkNVo22QWUfYfnJJW95LUiI4EFyRCqkmjNvqiVkUKzfh4l2m3fJk0p+iW1UyClf7Xj8Ef9otJI8z9GpHhVour1klQt7rnyvN90mMrBjOpI=
Received: by 10.64.203.5 with SMTP id a5mr5026380qbg;
        Sat, 10 Dec 2005 21:10:36 -0800 (PST)
Received: by 10.64.185.10 with HTTP; Sat, 10 Dec 2005 21:10:36 -0800 (PST)
Message-ID: <48b708490512102110s6913a4c3k1c2c152596e50e06@mail.gmail.com>
Date: Sun, 11 Dec 2005 14:10:36 +0900
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: Can I warm-up my search for it's performance?
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm running an index on FSDirectory with 0.4M documents with each of 7 fiel=
ds.

When I open an IndexReader and an IndexSearcher, the average search
time with hits of 0.2M items (yeah, very common word) takes about
150~250 msec and it's pretty good. But the first time just after
opening IndexReader or IndexSearcher, search with the same keyword
takes about 3~4 secs (10 times more than the average) and this makes
our search system looks slow.

I think it could be the caching issue with OS and file system.

Any way, can I warm our IndexSearcher or IndexReader up to reduce this prob=
lem?

--
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 06:21:06 2005
Return-Path: <java-user-return-17925-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89344 invoked from network); 11 Dec 2005 06:21:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 06:21:06 -0000
Received: (qmail 42165 invoked by uid 500); 11 Dec 2005 06:21:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42139 invoked by uid 500); 11 Dec 2005 06:20:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42121 invoked by uid 99); 11 Dec 2005 06:20:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 22:20:59 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Dec 2005 22:20:58 -0800
Received: (qmail 62513 invoked by uid 60001); 11 Dec 2005 06:20:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4DaqfUU0ROjFRhqiNgbecUpWXlBzfSUpfpQzluFCWC5RSVw/C+AsmRc66iVJrqhQdDwGAkjyuN3FADNSfu02xGnozUKBcaOsdTyuhtbpEKIeAFUzK6E2csa1bcG9bmv4YJ/kn6W6yIC8zEeVNeucaKBPHh9twg/SQY4OOdFyxGs=  ;
Message-ID: <20051211062037.62511.qmail@web50308.mail.yahoo.com>
Received: from [69.201.142.21] by web50308.mail.yahoo.com via HTTP; Sat, 10 Dec 2005 22:20:37 PST
Date: Sat, 10 Dec 2005 22:20:37 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Can I warm-up my search for it's performance?
To: java-user@lucene.apache.org
In-Reply-To: <48b708490512102110s6913a4c3k1c2c152596e50e06@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes you can.  Just open an IndexReader/Searcher, say in a separate
thread, run a search on it, and then swap your previous
IndexReader/Searcher with the warm one.  If you use sorting, make your
"background query" with the sort option, so the FieldCaches get
populated and warmed up.

Otis

--- Cheolgoo Kang <appler@gmail.com> wrote:

> Hi,
> 
> I'm running an index on FSDirectory with 0.4M documents with each of
> 7 fields.
> 
> When I open an IndexReader and an IndexSearcher, the average search
> time with hits of 0.2M items (yeah, very common word) takes about
> 150~250 msec and it's pretty good. But the first time just after
> opening IndexReader or IndexSearcher, search with the same keyword
> takes about 3~4 secs (10 times more than the average) and this makes
> our search system looks slow.
> 
> I think it could be the caching issue with OS and file system.
> 
> Any way, can I warm our IndexSearcher or IndexReader up to reduce
> this problem?
> 
> --
> Cheolgoo
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 06:38:48 2005
Return-Path: <java-user-return-17926-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97853 invoked from network); 11 Dec 2005 06:38:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 06:38:48 -0000
Received: (qmail 53527 invoked by uid 500); 11 Dec 2005 06:38:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53330 invoked by uid 500); 11 Dec 2005 06:38:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53311 invoked by uid 99); 11 Dec 2005 06:38:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 22:38:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [199.185.220.223] (HELO priv-edtnes27.telusplanet.net) (199.185.220.223)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 22:38:42 -0800
Received: from [192.168.0.102] (really [205.206.238.213])
          by priv-edtnes27.telusplanet.net
          (InterMail vM.6.01.04.04 201-2131-118-104-20050224) with ESMTP
          id <20051211063820.BOK21541.priv-edtnes27.telusplanet.net@[192.168.0.102]>
          for <java-user@lucene.apache.org>;
          Sat, 10 Dec 2005 23:38:20 -0700
Message-ID: <439BC95A.5030800@kcallin.net>
Date: Sat, 10 Dec 2005 23:38:18 -0700
From: Keegan Callin <kc@kcallin.net>
User-Agent: Thunderbird 1.4.1 (Windows/20051006)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Large Numeric RangeQueries
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello and Good Day,

In my application of Lucene, I am must search through some fields that 
contain numbers with very large ranges on the order of 150000 or so.  
Suppose I wanted to retrieve all documents matching numbers 
10000-150000.  On first inspection I tried a RangeQuery but, of course, 
I quickly discovered that RangeQueries expand to boolean queries that 
enumerate every element in their range.  In my case, it does not seem 
realistic to enumerate all the possible values of the query range as 
RangeQuery tries to do.

It has widely been suggested on the web and in in Gospodnetic & 
Hatcher's venerable "Lucene In Action" that queries for date ranges be 
reduced to simpler terms by more-or-less rounding the dates to the 
minute, hour, or day.  Unfortunately, in my case the /whole/ number is 
significant and I cannot round the numbers.  Has anyone some suggestions 
as to how I might proceed?

Kindly,
Keegan Callin

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 07:30:28 2005
Return-Path: <java-user-return-17927-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42813 invoked from network); 11 Dec 2005 07:30:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 07:30:28 -0000
Received: (qmail 96121 invoked by uid 500); 11 Dec 2005 07:30:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96076 invoked by uid 500); 11 Dec 2005 07:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96065 invoked by uid 99); 11 Dec 2005 07:30:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 23:30:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of appler@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO zproxy.gmail.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 23:30:22 -0800
Received: by zproxy.gmail.com with SMTP id l8so1189383nzf
        for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 23:30:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Z0q84tRAGeEONAeFjnnT2zFtIxNyrY9L7pz+0n0EOO/bjPzPqwKws/nTQQdxALxq6qMAZrLb4y5Z5JAhLyG8VqE8vlZTvSQSaclbTg8m7gDWtGTmYvuw3DQFHnMURPN8S2+OBVJF7sN0oRvXZL7vA4VGdp2eM2mScD0WFelnY64=
Received: by 10.64.253.17 with SMTP id a17mr5096303qbi;
        Sat, 10 Dec 2005 23:30:01 -0800 (PST)
Received: by 10.64.185.10 with HTTP; Sat, 10 Dec 2005 23:30:01 -0800 (PST)
Message-ID: <48b708490512102330m5ffef0f7l22d349e7ae865546@mail.gmail.com>
Date: Sun, 11 Dec 2005 16:30:01 +0900
From: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I warm-up my search for it's performance?
In-Reply-To: <20051211062037.62511.qmail@web50308.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <48b708490512102110s6913a4c3k1c2c152596e50e06@mail.gmail.com>
	 <20051211062037.62511.qmail@web50308.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Otis,

I'm doing exactly what you've said, except the sorting. I'll try it
out immediately.

Anyway, will the warming up search with ANY term do the same job? Or
should I have to search with the worst term that has the longest hits?

On 12/11/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Yes you can.  Just open an IndexReader/Searcher, say in a separate
> thread, run a search on it, and then swap your previous
> IndexReader/Searcher with the warm one.  If you use sorting, make your
> "background query" with the sort option, so the FieldCaches get
> populated and warmed up.
>
> Otis
>
> --- Cheolgoo Kang <appler@gmail.com> wrote:
>
> > Hi,
> >
> > I'm running an index on FSDirectory with 0.4M documents with each of
> > 7 fields.
> >
> > When I open an IndexReader and an IndexSearcher, the average search
> > time with hits of 0.2M items (yeah, very common word) takes about
> > 150~250 msec and it's pretty good. But the first time just after
> > opening IndexReader or IndexSearcher, search with the same keyword
> > takes about 3~4 secs (10 times more than the average) and this makes
> > our search system looks slow.
> >
> > I think it could be the caching issue with OS and file system.
> >
> > Any way, can I warm our IndexSearcher or IndexReader up to reduce
> > this problem?
> >
> > --
> > Cheolgoo
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


--
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 07:35:09 2005
Return-Path: <java-user-return-17928-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95012 invoked from network); 11 Dec 2005 07:35:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 07:35:09 -0000
Received: (qmail 98841 invoked by uid 500); 11 Dec 2005 07:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97813 invoked by uid 500); 11 Dec 2005 07:35:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97793 invoked by uid 99); 11 Dec 2005 07:35:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 23:35:03 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.55] (HELO web50301.mail.yahoo.com) (206.190.38.55)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 10 Dec 2005 23:35:03 -0800
Received: (qmail 5100 invoked by uid 60001); 11 Dec 2005 07:34:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=qHxmAFGu3EKCTwqwO63XatYFng2+rUmsjjdV1pkZEwJDR/XnixLwjcFpskdaTp6EXkSMho3c3NCb8o50PxHP3GwLeSWlfPaOuzxKhSDRfu4wLLM3VYKrqJ6WbGz3yi0zdnu1qyCvwyUfUvuUvSLTNG2pgTJsWxW3xQY0d2k/DZo=  ;
Message-ID: <20051211073442.5098.qmail@web50301.mail.yahoo.com>
Received: from [69.201.142.21] by web50301.mail.yahoo.com via HTTP; Sat, 10 Dec 2005 23:34:42 PST
Date: Sat, 10 Dec 2005 23:34:42 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Can I warm-up my search for it's performance?
To: java-user@lucene.apache.org
In-Reply-To: <48b708490512102330m5ffef0f7l22d349e7ae865546@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Any term will do, although I'd personally choose a very common one.

Otis

--- Cheolgoo Kang <appler@gmail.com> wrote:

> Thanks Otis,
> 
> I'm doing exactly what you've said, except the sorting. I'll try it
> out immediately.
> 
> Anyway, will the warming up search with ANY term do the same job? Or
> should I have to search with the worst term that has the longest
> hits?
> 
> On 12/11/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > Yes you can.  Just open an IndexReader/Searcher, say in a separate
> > thread, run a search on it, and then swap your previous
> > IndexReader/Searcher with the warm one.  If you use sorting, make
> your
> > "background query" with the sort option, so the FieldCaches get
> > populated and warmed up.
> >
> > Otis
> >
> > --- Cheolgoo Kang <appler@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > I'm running an index on FSDirectory with 0.4M documents with each
> of
> > > 7 fields.
> > >
> > > When I open an IndexReader and an IndexSearcher, the average
> search
> > > time with hits of 0.2M items (yeah, very common word) takes about
> > > 150~250 msec and it's pretty good. But the first time just after
> > > opening IndexReader or IndexSearcher, search with the same
> keyword
> > > takes about 3~4 secs (10 times more than the average) and this
> makes
> > > our search system looks slow.
> > >
> > > I think it could be the caching issue with OS and file system.
> > >
> > > Any way, can I warm our IndexSearcher or IndexReader up to reduce
> > > this problem?
> > >
> > > --
> > > Cheolgoo
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> 
> 
> --
> Cheolgoo
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 07:51:13 2005
Return-Path: <java-user-return-17929-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12048 invoked from network); 11 Dec 2005 07:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 07:51:13 -0000
Received: (qmail 9567 invoked by uid 500); 11 Dec 2005 07:51:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9540 invoked by uid 500); 11 Dec 2005 07:51:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9529 invoked by uid 99); 11 Dec 2005 07:51:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 23:51:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 10 Dec 2005 23:51:04 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 925C75B788; Sat, 10 Dec 2005 23:49:36 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 912177F466
	for <java-user@lucene.apache.org>; Sat, 10 Dec 2005 23:49:36 -0800 (PST)
Date: Sat, 10 Dec 2005 23:49:36 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Large Numeric RangeQueries
In-Reply-To: <439BC95A.5030800@kcallin.net>
Message-ID: <Pine.LNX.4.58.0512102347001.16530@hal.rescomp.berkeley.edu>
References: <439BC95A.5030800@kcallin.net>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: 10000-150000.  On first inspection I tried a RangeQuery but, of course,
: I quickly discovered that RangeQueries expand to boolean queries that
: enumerate every element in their range.  In my case, it does not seem
: realistic to enumerate all the possible values of the query range as
: RangeQuery tries to do.

1) check out RangeFilter
2) check out ConstantScoreRangeQuery

http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/search/RangeFilter.java
http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/java/org/apache/lucene/search/ConstantScoreRangeQuery.java


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 10:22:52 2005
Return-Path: <java-user-return-17930-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65629 invoked from network); 11 Dec 2005 10:22:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 10:22:52 -0000
Received: (qmail 70864 invoked by uid 500); 11 Dec 2005 10:22:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70590 invoked by uid 500); 11 Dec 2005 10:22:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 45605 invoked by uid 99); 11 Dec 2005 09:11:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Date: Sun, 11 Dec 2005 04:10:49 -0500 (EST)
From: Dan Gould <dlg@cs.brown.edu>
X-X-Sender: dlg@wayland
To: java-user@lucene.apache.org
Subject: Re: JVM Crash in Lucene
Message-ID: <Pine.LNX.4.62.0512110400140.30928@wayland>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at cs.brown.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

First, thank you Chris, Yonik, and Dan for your ideas as to what might be 
causing this problem.

I tried moving things around so that the IndexReader is still open when it 
calls TermFreqVector.getTerms()/TermFreqVector.getTermFrequencies().  It 
didn't seem to make any difference.

I also tried running Java with the flags:
-Xmx2048m -XX:MaxPermSize=200m
(the box has 4GB of RAM) and it still crashes.  It's hard to tell, but the 
program does seem to run for a lot longer (maybe 10 hours), but that could 
just be randomness in my tests.

The JVM always seems to crash with

  Current CompileTask:
  opto:1836
  org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object;
  (99 bytes)

which in the Lucene source is:

   private static IndexReader open(final Directory directory, final boolean 
closeDirectory) throws IOException {
     synchronized (directory) {			  // in- & inter-process 
sync
       return (IndexReader)new Lock.With(
           directory.makeLock(IndexWriter.COMMIT_LOCK_NAME),
           IndexWriter.COMMIT_LOCK_TIMEOUT) {
           public Object doBody() throws IOException {
             SegmentInfos infos = new SegmentInfos();
             infos.read(directory);
             if (infos.size() == 1) {		  // index is optimized
               return SegmentReader.get(infos, infos.info(0), 
closeDirectory);
             }
             IndexReader[] readers = new IndexReader[infos.size()];
             for (int i = 0; i < infos.size(); i++)
               readers[i] = SegmentReader.get(infos.info(i));
             return new MultiReader(directory, infos, closeDirectory, 
readers);

           }
         }.run();
     }
   }

that's definitely a non-trivial bit of code, but I can't imagine that 
there's a problem that I'm seeing that no one else else.  Moreover, that 
code gets run hundreds or even thousands of times before it crashes, so I 
don't image it's being HotSpot-compiled for the first time.

I'm running the 1.4.3 release and the 1.5.0_06-b05 JVM on Centos Linux on 
an Opteron.

Any further guesses?

Thank you all very much,
Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 11:23:47 2005
Return-Path: <java-user-return-17931-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85285 invoked from network); 11 Dec 2005 11:23:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 11:23:46 -0000
Received: (qmail 3409 invoked by uid 500); 11 Dec 2005 11:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3034 invoked by uid 500); 11 Dec 2005 11:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3019 invoked by uid 99); 11 Dec 2005 11:23:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 03:23:41 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.95] (HELO smtp006.mail.ukl.yahoo.com) (217.12.11.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 11 Dec 2005 03:23:40 -0800
Received: (qmail 55775 invoked from network); 11 Dec 2005 11:23:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=4YvRPetMw4lXEttDdM/hE/NZHoQNbZVEJczfSHPd1cu36ecU/ARX+TL+8e2F65zc7QfgXThv2BI+uUAWJ45VwJOaVAAvswFFrTqA1BKtWU+xy+/pralDy8Ps2os6MITG6X7WQgCOCWTh8r2zdrWlaygwXm/hESKNHbOok0BRULs=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp006.mail.ukl.yahoo.com with SMTP; 11 Dec 2005 11:23:19 -0000
Message-ID: <439C0C22.9050605@yahoo.co.uk>
Date: Sun, 11 Dec 2005 11:23:14 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Large Numeric RangeQueries
References: <439BC95A.5030800@kcallin.net> <Pine.LNX.4.58.0512102347001.16530@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0512102347001.16530@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On a related topic: yesterday I posted a round-up of all the possible 
filtering options in Lucene with timings and example code to the WIKI :

http://wiki.apache.org/jakarta-lucene/FilteringOptions

One of the options demonstrated is along the lines of Chris's suggestion.


Cheers,
Mark







	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 15:38:59 2005
Return-Path: <java-user-return-17932-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58036 invoked from network); 11 Dec 2005 15:38:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 15:38:59 -0000
Received: (qmail 13733 invoked by uid 500); 11 Dec 2005 15:38:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13703 invoked by uid 500); 11 Dec 2005 15:38:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13691 invoked by uid 99); 11 Dec 2005 15:38:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 07:38:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO zproxy.gmail.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 07:38:52 -0800
Received: by zproxy.gmail.com with SMTP id 4so1259612nzn
        for <java-user@lucene.apache.org>; Sun, 11 Dec 2005 07:38:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dT960DTzRp63/FSVnLJGVsg15+DSaJ9dTp72q9AepgZU1aczEvZKkZ6zKGRieMDHmAMxWrsNpZDIIpFhCYQ1dwfu8ZGnRMsSjhNDx5FGyN1mtrAlOVKQIAN8TYfvZSFhFh0Io/0cmCG5CuK0luFKvLM4vZykXS29sWBbSGiTV0M=
Received: by 10.65.150.14 with SMTP id c14mr5063339qbo;
        Sun, 11 Dec 2005 07:38:31 -0800 (PST)
Received: by 10.64.220.11 with HTTP; Sun, 11 Dec 2005 07:38:31 -0800 (PST)
Message-ID: <c68e39170512110738p44702ae0t3a931c8ffbeed7c0@mail.gmail.com>
Date: Sun, 11 Dec 2005 10:38:31 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JVM Crash in Lucene
In-Reply-To: <Pine.LNX.4.62.0512110400140.30928@wayland>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <Pine.LNX.4.62.0512110400140.30928@wayland>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sounds like it's a hotspot bug.
AFAIK, hotspot doesn't just compile a method once... it can do
optimization over time.

To work around it, have you tried pre previous version: 1.5_05?
It's possible it's a fairly new bug.  We've been running with that
version and Lucene 1.4.3 without problems (on Opteron, RHEL4).

You could also try the latest Lucene 1.9 to see if that changes enough
to avoid the bug.

-Yonik

On 12/11/05, Dan Gould <dlg@cs.brown.edu> wrote:
> First, thank you Chris, Yonik, and Dan for your ideas as to what might be
> causing this problem.
>
> I tried moving things around so that the IndexReader is still open when i=
t
> calls TermFreqVector.getTerms()/TermFreqVector.getTermFrequencies().  It
> didn't seem to make any difference.
>
> I also tried running Java with the flags:
> -Xmx2048m -XX:MaxPermSize=3D200m
> (the box has 4GB of RAM) and it still crashes.  It's hard to tell, but th=
e
> program does seem to run for a lot longer (maybe 10 hours), but that coul=
d
> just be randomness in my tests.
>
> The JVM always seems to crash with
>
>   Current CompileTask:
>   opto:1836
>   org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object;
>   (99 bytes)
>
> which in the Lucene source is:
>
>    private static IndexReader open(final Directory directory, final boole=
an
> closeDirectory) throws IOException {
>      synchronized (directory) {                   // in- & inter-process
> sync
>        return (IndexReader)new Lock.With(
>            directory.makeLock(IndexWriter.COMMIT_LOCK_NAME),
>            IndexWriter.COMMIT_LOCK_TIMEOUT) {
>            public Object doBody() throws IOException {
>              SegmentInfos infos =3D new SegmentInfos();
>              infos.read(directory);
>              if (infos.size() =3D=3D 1) {             // index is optimiz=
ed
>                return SegmentReader.get(infos, infos.info(0),
> closeDirectory);
>              }
>              IndexReader[] readers =3D new IndexReader[infos.size()];
>              for (int i =3D 0; i < infos.size(); i++)
>                readers[i] =3D SegmentReader.get(infos.info(i));
>              return new MultiReader(directory, infos, closeDirectory,
> readers);
>
>            }
>          }.run();
>      }
>    }
>
> that's definitely a non-trivial bit of code, but I can't imagine that
> there's a problem that I'm seeing that no one else else.  Moreover, that
> code gets run hundreds or even thousands of times before it crashes, so I
> don't image it's being HotSpot-compiled for the first time.
>
> I'm running the 1.4.3 release and the 1.5.0_06-b05 JVM on Centos Linux on
> an Opteron.
>
> Any further guesses?
>
> Thank you all very much,
> Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 16:01:53 2005
Return-Path: <java-user-return-17933-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62634 invoked from network); 11 Dec 2005 16:01:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 16:01:53 -0000
Received: (qmail 22068 invoked by uid 500); 11 Dec 2005 16:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22047 invoked by uid 500); 11 Dec 2005 16:01:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22033 invoked by uid 99); 11 Dec 2005 16:01:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 08:01:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 08:01:47 -0800
Received: by zproxy.gmail.com with SMTP id i28so1283573nzi
        for <java-user@lucene.apache.org>; Sun, 11 Dec 2005 08:01:27 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SaKGX9saGKC5KahtHd7prWyNS/dP5UfHSJMV/z/JNA+nY8cueBb+xdNifN8u+BNgrSOdCmhO4U195gWZq/aDUKqwXOttL3bKOYTahZsqTg8QujvjwFLzFpb50mfrQ9keeztHJPrQxTdVFLvjjUVM0qZ1O/Z6zz2bXDuKbLFw3WU=
Received: by 10.65.105.12 with SMTP id h12mr5213444qbm;
        Sun, 11 Dec 2005 08:01:27 -0800 (PST)
Received: by 10.64.220.11 with HTTP; Sun, 11 Dec 2005 08:01:27 -0800 (PST)
Message-ID: <c68e39170512110801k40a5b7d9ha72febff7fd8ac6f@mail.gmail.com>
Date: Sun, 11 Dec 2005 11:01:27 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JVM Crash in Lucene
In-Reply-To: <c68e39170512110738p44702ae0t3a931c8ffbeed7c0@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <Pine.LNX.4.62.0512110400140.30928@wayland>
	 <c68e39170512110738p44702ae0t3a931c8ffbeed7c0@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You also might try -Xbatch or -Xcomp to see if that fixes it (or
reproduces it faster).

Here's a great list of JVM options:
http://blogs.sun.com/roller/resources/watt/jvm-options-list.html

-Yonik

On 12/11/05, Yonik Seeley <yseeley@gmail.com> wrote:
> Sounds like it's a hotspot bug.
> AFAIK, hotspot doesn't just compile a method once... it can do
> optimization over time.
>
> To work around it, have you tried pre previous version: 1.5_05?
> It's possible it's a fairly new bug.  We've been running with that
> version and Lucene 1.4.3 without problems (on Opteron, RHEL4).
>
> You could also try the latest Lucene 1.9 to see if that changes enough
> to avoid the bug.
>
> -Yonik
>
> On 12/11/05, Dan Gould <dlg@cs.brown.edu> wrote:
> > First, thank you Chris, Yonik, and Dan for your ideas as to what might =
be
> > causing this problem.
> >
> > I tried moving things around so that the IndexReader is still open when=
 it
> > calls TermFreqVector.getTerms()/TermFreqVector.getTermFrequencies().  I=
t
> > didn't seem to make any difference.
> >
> > I also tried running Java with the flags:
> > -Xmx2048m -XX:MaxPermSize=3D200m
> > (the box has 4GB of RAM) and it still crashes.  It's hard to tell, but =
the
> > program does seem to run for a lot longer (maybe 10 hours), but that co=
uld
> > just be randomness in my tests.
> >
> > The JVM always seems to crash with
> >
> >   Current CompileTask:
> >   opto:1836
> >   org.apache.lucene.index.IndexReader$1.doBody()Ljava/lang/Object;
> >   (99 bytes)
> >
> > which in the Lucene source is:
> >
> >    private static IndexReader open(final Directory directory, final boo=
lean
> > closeDirectory) throws IOException {
> >      synchronized (directory) {                   // in- & inter-proces=
s
> > sync
> >        return (IndexReader)new Lock.With(
> >            directory.makeLock(IndexWriter.COMMIT_LOCK_NAME),
> >            IndexWriter.COMMIT_LOCK_TIMEOUT) {
> >            public Object doBody() throws IOException {
> >              SegmentInfos infos =3D new SegmentInfos();
> >              infos.read(directory);
> >              if (infos.size() =3D=3D 1) {             // index is optim=
ized
> >                return SegmentReader.get(infos, infos.info(0),
> > closeDirectory);
> >              }
> >              IndexReader[] readers =3D new IndexReader[infos.size()];
> >              for (int i =3D 0; i < infos.size(); i++)
> >                readers[i] =3D SegmentReader.get(infos.info(i));
> >              return new MultiReader(directory, infos, closeDirectory,
> > readers);
> >
> >            }
> >          }.run();
> >      }
> >    }
> >
> > that's definitely a non-trivial bit of code, but I can't imagine that
> > there's a problem that I'm seeing that no one else else.  Moreover, tha=
t
> > code gets run hundreds or even thousands of times before it crashes, so=
 I
> > don't image it's being HotSpot-compiled for the first time.
> >
> > I'm running the 1.4.3 release and the 1.5.0_06-b05 JVM on Centos Linux =
on
> > an Opteron.
> >
> > Any further guesses?
> >
> > Thank you all very much,
> > Dan
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 16:40:19 2005
Return-Path: <java-user-return-17934-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74953 invoked from network); 11 Dec 2005 16:40:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 16:40:18 -0000
Received: (qmail 47175 invoked by uid 500); 11 Dec 2005 16:40:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47110 invoked by uid 500); 11 Dec 2005 16:40:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47041 invoked by uid 99); 11 Dec 2005 16:40:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 08:40:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.h.funk@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 08:40:10 -0800
Received: by wproxy.gmail.com with SMTP id i28so1240270wra
        for <java-user@lucene.apache.org>; Sun, 11 Dec 2005 08:39:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=hqeOsddJ64opXmp1ElYBYfXafrC67HAORckhbWPRqUvcRhtimNBFCWp3sQ+wsfjGjidr7Cib89uEoFr2gQr/cb5fN2vN6Jq2TRfNrIW4KtcJ+unzo7ZSSj8KKfLCCb0ZtJ6KgB7jYU5Y1Dwt0hFrowzZaclmrCngc0pAs67nblE=
Received: by 10.54.117.11 with SMTP id p11mr7207998wrc;
        Sun, 11 Dec 2005 08:39:49 -0800 (PST)
Received: by 10.54.106.10 with HTTP; Sun, 11 Dec 2005 08:39:49 -0800 (PST)
Message-ID: <fb81d4720512110839u3db5fb59v5e1aa4218d6f3fe0@mail.gmail.com>
Date: Sun, 11 Dec 2005 16:39:49 +0000
From: Dan Funk <dan@danandtamara.com>
Sender: daniel.h.funk@gmail.com
To: java-user@lucene.apache.org
Subject: Re: where to store the index
In-Reply-To: <dnfkgi$smb$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7391_11632209.1134319189509"
References: <dneiru$4js$2@sea.gmane.org>
	 <fb81d4720512100829p620a9123o68492e991241150@mail.gmail.com>
	 <dnfkgi$smb$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7391_11632209.1134319189509
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

I can't think of a good reason for you to keep the index in memory - The
performance increase (from blazing-fast to super-blazing-fast) just isn't
something your users are going to notice.  And it's at the cost of building
the index from scratch every time you start up.

Eventually, for one reason or another, you will end up having the lucene
index outside the web-app directory - i think your best bet would be to go
ahead and start out that way.

On 12/10/05, Raul Raja Martinez <dobleerre@estudiowebs.com> wrote:
>
> first thanks for your response Dan,
>
> It I'll be around 5.000 database records with three indexed fields:
> id, title(1 line) and description(around three lines). I was even
> considering using the in memory feature for faster access but I'm new to
> lucene and I'don't know if that I'll cause my problems in the future.
>
> Any help appreciated
>
> best regards.
>
> Raul.
>
> Dan Funk wrote:
> > If this is a small index and it won't change after install (you are jus=
t
> > using it to search, not to index), place it in a sub-directory of
> WEB-INF.
> >
> > If it is a larger index (something you don't want to copy frequently),
> or it
> > will change after install, then you shouldn't keep it inside your web
> > application at all, rather you should specify an external directory
> outside
> > the web application using some sort of configuration setting, maybe
> specify
> > it in your web.xml file.
> >
> > On 12/10/05, Raul Raja Martinez <dobleerre@estudiowebs.com> wrote:
> >> What would be the best practice storing the index in a webapp.
> >> I mean in wich folder?
> >>
> >> Thanks.
> >>
> >> Raul.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7391_11632209.1134319189509--

From java-user-return-17935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 18:29:10 2005
Return-Path: <java-user-return-17935-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18948 invoked from network); 11 Dec 2005 18:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 18:29:10 -0000
Received: (qmail 34119 invoked by uid 500); 11 Dec 2005 18:29:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34086 invoked by uid 500); 11 Dec 2005 18:29:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34075 invoked by uid 99); 11 Dec 2005 18:29:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 10:29:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lnezda@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 10:29:02 -0800
Received: by wproxy.gmail.com with SMTP id i24so1253822wra
        for <java-user@lucene.apache.org>; Sun, 11 Dec 2005 10:28:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lUHoXMz4rnceFHB+hd7Xsk6mjCwmcE4VKCA3CDdHekMyp6mKq2caRiN0oSBJZUJxVvcD3r0xhgstUL3IcIBYieQUNkPDZTpz5af7sqe0G+schMzl7QwDPoKO1Vm1bAKkleq0fgcBHo/w/ZZaklekDzgoff+146r4CYZR5eQK74w=
Received: by 10.64.203.5 with SMTP id a5mr5176799qbg;
        Sun, 11 Dec 2005 10:28:41 -0800 (PST)
Received: by 10.64.208.4 with HTTP; Sun, 11 Dec 2005 10:28:41 -0800 (PST)
Message-ID: <b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>
Date: Sun, 11 Dec 2005 12:28:41 -0600
From: Luke Nezda <lnezda@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ApacheCon next week
In-Reply-To: <43999525.9090903@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9023_8538622.1134325721325"
References: <43999525.9090903@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9023_8538622.1134325721325
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello Grant-
Could you post the material you present (eg slides, handouts, etc) for thos=
e
of us who cannot attend?
Thanks in advance,
-Luke

On 12/9/05, Grant Ingersoll <gsingers@syr.edu> wrote:
>
> Any one planning on going to ApacheCon next week?  I will be giving a
> talk on Lucene on Monday afternoon at 3pm on term vectors, span queries
> and some case studies from our work at CNLP with Lucene.
>
> Abstract for my talk can be found at
> http://www.apachecon.com/2005/US/html/sessions.html/e=3DMjAwNS9VUw#1400
>
> -Grant
>
> --
> -------------------------------------------------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> School of Information Studies
> 337 Hinds Hall
> Syracuse, NY 13244
>
> http://www.cnlp.org
> Voice:  315-443-5484
> Fax: 315-443-6886
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9023_8538622.1134325721325--

From java-user-return-17936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 22:06:52 2005
Return-Path: <java-user-return-17936-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27808 invoked from network); 11 Dec 2005 22:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 22:06:52 -0000
Received: (qmail 32961 invoked by uid 500); 11 Dec 2005 21:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32815 invoked by uid 500); 11 Dec 2005 21:04:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32776 invoked by uid 99); 11 Dec 2005 21:04:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 13:04:21 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.49] (HELO mta09-winn.ispmail.ntl.com) (81.103.221.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 13:04:19 -0800
Received: from aamta11-winn.ispmail.ntl.com ([81.103.221.35])
          by mta09-winn.ispmail.ntl.com with ESMTP
          id <20051211210356.VQWA8609.mta09-winn.ispmail.ntl.com@aamta11-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>;
          Sun, 11 Dec 2005 21:03:56 +0000
Received: from jhi ([81.98.13.34]) by aamta11-winn.ispmail.ntl.com
          with SMTP
          id <20051211210356.KUAM16192.aamta11-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>;
          Sun, 11 Dec 2005 21:03:56 +0000
Message-ID: <000601c5fe96$651c7340$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <43999525.9090903@syr.edu> <b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>
Subject: Re: ApacheCon next week
Date: Sun, 11 Dec 2005 21:03:52 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

please :)
----- Original Message ----- 
From: "Luke Nezda" <lnezda@gmail.com>
To: <java-user@lucene.apache.org>
Sent: Sunday, December 11, 2005 6:28 PM
Subject: Re: ApacheCon next week


Hello Grant-
Could you post the material you present (eg slides, handouts, etc) for those
of us who cannot attend?
Thanks in advance,
-Luke

On 12/9/05, Grant Ingersoll <gsingers@syr.edu> wrote:
>
> Any one planning on going to ApacheCon next week?  I will be giving a
> talk on Lucene on Monday afternoon at 3pm on term vectors, span queries
> and some case studies from our work at CNLP with Lucene.
>
> Abstract for my talk can be found at
> http://www.apachecon.com/2005/US/html/sessions.html/e=MjAwNS9VUw#1400
>
> -Grant
>
> --
> -------------------------------------------------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> School of Information Studies
> 337 Hinds Hall
> Syracuse, NY 13244
>
> http://www.cnlp.org
> Voice:  315-443-5484
> Fax: 315-443-6886
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 11 23:05:15 2005
Return-Path: <java-user-return-17937-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20811 invoked from network); 11 Dec 2005 23:05:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Dec 2005 23:05:15 -0000
Received: (qmail 75598 invoked by uid 500); 11 Dec 2005 21:49:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75426 invoked by uid 500); 11 Dec 2005 21:49:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75303 invoked by uid 99); 11 Dec 2005 21:49:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 13:49:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 13:49:24 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.13.3/8.13.3) with ESMTP id jBBLn20r059613
	for <java-user@lucene.apache.org>; Sun, 11 Dec 2005 22:49:02 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
Date: Sun, 11 Dec 2005 22:49:01 +0100
User-Agent: KMail/1.5.4
References: <43903645.6000705@getopt.org> <200512032242.59982.paul.elschot@xs4all.nl> <4396B0B5.50901@getopt.org>
In-Reply-To: <4396B0B5.50901@getopt.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200512112249.01961.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Wednesday 07 December 2005 10:51, Andrzej Bialecki wrote:
> Paul Elschot wrote:
> >On Saturday 03 December 2005 14:09, Andrzej Bialecki wrote:
> >>Paul Elschot wrote:
> >>
=2E..
> >>>This is one of the cases in which BooleanScorer2 can be faster
> >>>than the 1.4 BooleanScorer because the 1.4 BooleanScorer does
> >>>not use skipTo() for the optional clauses.
> >>>Could you try this by calling the static method
> >>>BooleanQuery.setUseScorer14(true) and repeating the test?
> >>> =A0 =A0 =A0
> >>>
>=20
>=20
> As far as I can tell it doesn't make any statistically significant=20
> difference - all search times remain nearly the same. If anything the=20
> test runs with useScorer14 =3D=3D true are fractionally faster.
>=20

There is one indexing parameter that might help performance
for BooleanScorer2, it is the skip interval in Lucene's TermInfosWriter.
The current value is 16, and there was a question about it
on 16 Oct 2005 on java-dev with title "skipInterval".
I don't know how the value of skipInterval was initially determined.
It's possible that a larger value gives somewhat better query
performance in this case.
Changing the skip interval might require reindexing, though.

I considered a specialised scorer for the earlier query:

+(url:term1^4.0 anchor:term1^2.0 content:term1
=A0 =A0title:term1^1.5 =A0host:term1^2.0)
+(url:term2^4.0 anchor:term2^2.0 content:term2
=A0 =A0title:term2^1.5 host:term2^2.0)
url:"term1 term2"~2147483647^4.0=20
anchor:"term1 term2"~4^2.0
content:"term1 term2"~2147483647
title:"term1 term2"~2147483647^1.5
host:"term1 term2"~2147483647^2.0

In this query, term1 and term2 are each used in 5 fields,
and each such combination is used in 2 clauses,
one required and one optional.
In the required clause the term scorer uses a TermDocs,
in the optional clause the phrase scorer uses a TermPositions.

=46or each combination of a query term and a field, a TermDocs
and a TermPositions is currently used.
TermPositions inherits from TermDocs, so there is
redundancy here, and one could try and reduce this by using
only a TermPositions. The redundancy consists ao. of
some double readVInt's from the index files for the TermDocs.
I don't know how much double work is actually going on
behind the scenes in the IndexReader. This depends
among others on how effective skipTo() on a TermPositions is.

On the top level of the query, the optional phrases are
skipTo()'ed when the two required clauses match.
The required clauses only use the TermDocs info, so
it should be straightforward to implement the optional phrase.
There is a catch here in that the advanceAfterCurrent() method
for the disjunctions inside the required clauses does what it sais:
it advances the scorers to documents after the current match,
and this makes it impossible to skipTo() a possible matching
phrase in the document being scored.
That means that to use only a TermPositions (and not also a
TermDocs) it will be necessary to rewrite DisjunctionSumScorer
so that it never advances after the current doc when the doc
matches.

=46or the rest one could try and refactor the existing scorers for
terms and phrases to use given TermDocs/TermPositions instead of
private ones.
A constructor for a specialized scorer for this query could be passed
term1 and term2, an array of the 5 field names and some
more arrays for weights and slops.

But there still are some unknowns: the cost of the method calls in
the current trees of scorers, how effective skipTo() is on a
TermPositions, and how much influence the skip interval has.

Regards,
Paul Elschot

P.S. Please feel free to use this on the nutch list(s).


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 05:05:57 2005
Return-Path: <java-user-return-17938-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90237 invoked from network); 12 Dec 2005 05:05:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 05:05:57 -0000
Received: (qmail 20430 invoked by uid 500); 12 Dec 2005 05:05:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20380 invoked by uid 500); 12 Dec 2005 05:05:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20354 invoked by uid 99); 12 Dec 2005 05:05:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 21:05:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lnezda@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 11 Dec 2005 21:05:49 -0800
Received: by wproxy.gmail.com with SMTP id 37so1614013wra
        for <java-user@lucene.apache.org>; Sun, 11 Dec 2005 21:05:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=nbNDkpZ14qNFo4kQomGEXc6HdoEwPI6NmJMZMXrBPCTFcvBwqDsz/F3T9C2gkWGk+aW3mb5xhwLJ48b1ZWLo1vvxOgUzXBasFLRbJQ+7NNmMDrNbNMwjFjfNFUdR0VtantPy4IB60A85mxmlhCHALRFt4qSqu2+qnWzJVZvl/ks=
Received: by 10.64.210.7 with SMTP id i7mr5410764qbg;
        Sun, 11 Dec 2005 21:05:28 -0800 (PST)
Received: by 10.64.208.4 with HTTP; Sun, 11 Dec 2005 21:05:28 -0800 (PST)
Message-ID: <b205e9650512112105i6de9c6c5va994c0893322bba6@mail.gmail.com>
Date: Sun, 11 Dec 2005 23:05:28 -0600
From: Luke Nezda <lnezda@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ApacheCon next week
In-Reply-To: <000601c5fe96$651c7340$b900a8c0@jhi>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17123_31172097.1134363928256"
References: <43999525.9090903@syr.edu>
	 <b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>
	 <000601c5fe96$651c7340$b900a8c0@jhi>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_17123_31172097.1134363928256
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Where are my manners :-/
Anyway, I found the answer to my own request.
http://www.cnlp.org/apachecon2005/
Looks like some cool work, I only wish I could hear the accompanying speech=
.
Cheers,
-Luke

On 12/11/05, gekkokid <me@gekkokid.org.uk> wrote:
>
> please :)
> ----- Original Message -----
> From: "Luke Nezda" <lnezda@gmail.com>
> To: <java-user@lucene.apache.org>
> Sent: Sunday, December 11, 2005 6:28 PM
> Subject: Re: ApacheCon next week
>
>
> Hello Grant-
> Could you post the material you present (eg slides, handouts, etc) for
> those
> of us who cannot attend?
> Thanks in advance,
> -Luke
>
> On 12/9/05, Grant Ingersoll <gsingers@syr.edu> wrote:
> >
> > Any one planning on going to ApacheCon next week?  I will be giving a
> > talk on Lucene on Monday afternoon at 3pm on term vectors, span queries
> > and some case studies from our work at CNLP with Lucene.
> >
> > Abstract for my talk can be found at
> > http://www.apachecon.com/2005/US/html/sessions.html/e=3DMjAwNS9VUw#1400
> >
> > -Grant
> >
> > --
> > -------------------------------------------------------------------
> > Grant Ingersoll
> > Sr. Software Engineer
> > Center for Natural Language Processing
> > Syracuse University
> > School of Information Studies
> > 337 Hinds Hall
> > Syracuse, NY 13244
> >
> > http://www.cnlp.org
> > Voice:  315-443-5484
> > Fax: 315-443-6886
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_17123_31172097.1134363928256--

From java-user-return-17939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 13:09:22 2005
Return-Path: <java-user-return-17939-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23386 invoked from network); 12 Dec 2005 13:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 13:09:21 -0000
Received: (qmail 46410 invoked by uid 500); 12 Dec 2005 13:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46376 invoked by uid 500); 12 Dec 2005 13:09:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46365 invoked by uid 99); 12 Dec 2005 13:09:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 05:09:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.128.105.12] (HELO King.Siti.com) (209.128.105.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 05:09:14 -0800
Received: from ravij ([10.2.152.215]) by King.Siti.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 12 Dec 2005 04:55:57 -0800
From: "Ravi" <ravi.jaladanki@siti.com>
To: <java-user@lucene.apache.org>
Subject: :how to add int fileds to lucene:
Date: Mon, 12 Dec 2005 18:40:56 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C5FF4B.9A8673E0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcX/HXzWoRQCxpo/Shm6g0+1RK58rg==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-ID: <KING7VafFxRu5FMj9in00000c8a@King.Siti.com>
X-OriginalArrivalTime: 12 Dec 2005 12:55:58.0640 (UTC) FILETIME=[65C2EB00:01C5FF1B]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C5FF4B.9A8673E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi,

 

I am trying to add some fields to lucene and I heard that adding int values
are going to give much faster retrieval than adding to String values. So I
want to add int values to document . But 

 

document.add(Field.Text("Candidate", objResultSet.getString("ROW_ID")));

document.add(Field.Keyword("lastmodified",
objResultSet.getDate("MODIFIED_ON")));

document.add(Field.Text("days",days) );

document.add(Field.Text("contents", objReader));

 

 

Days are int but it is giving error . Please suggest me with the steps to
add and search those integer fields 

 

 

 

Thanks

 

Ravi Kumar Jaladanki


------=_NextPart_000_0000_01C5FF4B.9A8673E0--


From java-user-return-17940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 16:06:09 2005
Return-Path: <java-user-return-17940-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36192 invoked from network); 12 Dec 2005 16:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 16:06:09 -0000
Received: (qmail 28023 invoked by uid 500); 12 Dec 2005 16:06:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27318 invoked by uid 500); 12 Dec 2005 16:06:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27307 invoked by uid 99); 12 Dec 2005 16:06:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 08:06:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 08:06:01 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3047D13E201A; Mon, 12 Dec 2005 11:05:39 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C8E5113E2005
	for <java-user@lucene.apache.org>; Mon, 12 Dec 2005 11:05:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <KING7VafFxRu5FMj9in00000c8a@King.Siti.com>
References: <KING7VafFxRu5FMj9in00000c8a@King.Siti.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <596BA4D8-9A93-4F34-BBA4-013BE9674AA0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: :how to add int fileds to lucene:
Date: Mon, 12 Dec 2005 11:05:21 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 12, 2005, at 8:10 AM, Ravi wrote:
> I am trying to add some fields to lucene and I heard that adding  
> int values
> are going to give much faster retrieval than adding to String  
> values. So I
> want to add int values to document . But
>
>
>
> document.add(Field.Text("Candidate", objResultSet.getString 
> ("ROW_ID")));
>
> document.add(Field.Keyword("lastmodified",
> objResultSet.getDate("MODIFIED_ON")));
>
> document.add(Field.Text("days",days) );
>
> document.add(Field.Text("contents", objReader));
>
>
>
>
>
> Days are int but it is giving error . Please suggest me with the  
> steps to
> add and search those integer fields
>

All stored field data in a Lucene index are Strings.  The performance  
difference you may be referring to is with sorting results, not in  
retrieval.

You will want to simply convert your int "days" into a String  
(Integer.toString(days) will do the trick.  Careful with your  
analyzer if you really do want days to be searchable/sortable.  Using  
Field.Keyword() is probably more appropriate.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 19:07:57 2005
Return-Path: <java-user-return-17941-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46741 invoked from network); 12 Dec 2005 19:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 19:07:55 -0000
Received: (qmail 189 invoked by uid 500); 12 Dec 2005 19:07:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 156 invoked by uid 500); 12 Dec 2005 19:07:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 145 invoked by uid 99); 12 Dec 2005 19:07:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 11:07:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 11:07:46 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14C5ABB1@mailer.syr.edu>; Mon, 12 Dec 2005 14:07:25 -0500
Message-ID: <439DCA6D.3020106@syr.edu>
Date: Mon, 12 Dec 2005 14:07:25 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: ApacheCon next week
References: <43999525.9090903@syr.edu>	 <b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>	 <000601c5fe96$651c7340$b900a8c0@jhi> <b205e9650512112105i6de9c6c5va994c0893322bba6@mail.gmail.com>
In-Reply-To: <b205e9650512112105i6de9c6c5va994c0893322bba6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You stole my thunder!  :-)  Was going to post the URL after doing the 
actual talk, but that's all right.  I will post a few changes I have 
made on the plane tonight or tomorrow to the website below.

Let me know if you have any questions...

Luke Nezda wrote:

>Where are my manners :-/
>Anyway, I found the answer to my own request.
>http://www.cnlp.org/apachecon2005/
>Looks like some cool work, I only wish I could hear the accompanying speech.
>Cheers,
>-Luke
>
>On 12/11/05, gekkokid <me@gekkokid.org.uk> wrote:
>  
>
>>please :)
>>----- Original Message -----
>>From: "Luke Nezda" <lnezda@gmail.com>
>>To: <java-user@lucene.apache.org>
>>Sent: Sunday, December 11, 2005 6:28 PM
>>Subject: Re: ApacheCon next week
>>
>>
>>Hello Grant-
>>Could you post the material you present (eg slides, handouts, etc) for
>>those
>>of us who cannot attend?
>>Thanks in advance,
>>-Luke
>>
>>On 12/9/05, Grant Ingersoll <gsingers@syr.edu> wrote:
>>    
>>
>>>Any one planning on going to ApacheCon next week?  I will be giving a
>>>talk on Lucene on Monday afternoon at 3pm on term vectors, span queries
>>>and some case studies from our work at CNLP with Lucene.
>>>
>>>Abstract for my talk can be found at
>>>http://www.apachecon.com/2005/US/html/sessions.html/e=MjAwNS9VUw#1400
>>>
>>>-Grant
>>>
>>>--
>>>-------------------------------------------------------------------
>>>Grant Ingersoll
>>>Sr. Software Engineer
>>>Center for Natural Language Processing
>>>Syracuse University
>>>School of Information Studies
>>>337 Hinds Hall
>>>Syracuse, NY 13244
>>>
>>>http://www.cnlp.org
>>>Voice:  315-443-5484
>>>Fax: 315-443-6886
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>  
>

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
337 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 20:10:30 2005
Return-Path: <java-user-return-17942-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81712 invoked from network); 12 Dec 2005 20:10:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 20:10:30 -0000
Received: (qmail 8243 invoked by uid 500); 12 Dec 2005 20:10:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8185 invoked by uid 500); 12 Dec 2005 20:10:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8171 invoked by uid 99); 12 Dec 2005 20:10:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 12:10:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.6.101.41] (HELO rogue.ncsl.nist.gov) (129.6.101.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 12:10:15 -0800
Received: from rogue.ncsl.nist.gov.nist.gov (localhost.localdomain [127.0.0.1])
	by rogue.ncsl.nist.gov (8.13.1/8.13.1) with ESMTP id jBCK9rOl018726
	for <java-user@lucene.apache.org>; Mon, 12 Dec 2005 15:09:53 -0500
From: Ian Soboroff <ian.soboroff@nist.gov>
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	<e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	<001c01c5f60d$5089c0e0$b900a8c0@jhi>
	<bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	<438EB903.80503@activemath.org>
Date: Mon, 12 Dec 2005 15:09:53 -0500
In-Reply-To: <438EB903.80503@activemath.org> (Paul Libbrecht's message of
	"Thu, 01 Dec 2005 09:49:07 +0100")
Message-ID: <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
User-Agent: Gnus/5.110004 (No Gnus v0.4) Emacs/21.3 (gnu/linux)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Libbrecht <paul@activemath.org> writes:

> We're also thinking about implementing something similar to LSI within
> ActiveMath which is lucene-powered where both formulae and text
> searching would benefit of the latent-semantic-similarity. I've been
> refrained of doing "exactly this" at least since LSI is patented. This
> might also be a reason why there's no implementation in Lucene's
> sandbox.
>
> Have you looked at other vector-based approaches which are not exactly LSI ?
> Have you looked at InfoMap NLP ?

Look for Thomas Hofmann's "probabilistic LSI", and other recent work
which cites it.

Ian


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 20:18:40 2005
Return-Path: <java-user-return-17943-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85218 invoked from network); 12 Dec 2005 20:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 20:18:39 -0000
Received: (qmail 19995 invoked by uid 500); 12 Dec 2005 20:18:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19967 invoked by uid 500); 12 Dec 2005 20:18:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19956 invoked by uid 99); 12 Dec 2005 20:18:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 12:18:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.6.101.41] (HELO rogue.ncsl.nist.gov) (129.6.101.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 12:18:30 -0800
Received: from rogue.ncsl.nist.gov.nist.gov (localhost.localdomain [127.0.0.1])
	by rogue.ncsl.nist.gov (8.13.1/8.13.1) with ESMTP id jBCKI9Q0018816
	for <java-user@lucene.apache.org>; Mon, 12 Dec 2005 15:18:09 -0500
From: Ian Soboroff <ian.soboroff@nist.gov>
To: java-user@lucene.apache.org
Subject: Re: ApacheCon next week
References: <43999525.9090903@syr.edu>
	<b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>
	<000601c5fe96$651c7340$b900a8c0@jhi>
	<b205e9650512112105i6de9c6c5va994c0893322bba6@mail.gmail.com>
	<439DCA6D.3020106@syr.edu>
Date: Mon, 12 Dec 2005 15:18:09 -0500
In-Reply-To: <439DCA6D.3020106@syr.edu> (Grant Ingersoll's message of "Mon, 12
	Dec 2005 14:07:25 -0500")
Message-ID: <9cfbqzmt6gu.fsf@rogue.ncsl.nist.gov>
User-Agent: Gnus/5.110004 (No Gnus v0.4) Emacs/21.3 (gnu/linux)
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Grant Ingersoll <gsingers@syr.edu> writes:

> You stole my thunder!  :-)  Was going to post the URL after doing the
> actual talk, but that's all right.  I will post a few changes I have
> made on the plane tonight or tomorrow to the website below.
>
> Let me know if you have any questions...

I have one.  I've been thinking about the problem with doing relevance
feedback in Lucene, and I appreciate seeing your code on getting the
top terms from a single document.

However, the real problem for RF and pseudo-RF techniques is forming
the query.  You can obviously add terms to a query, but how are you
handling the weighting?  With boosts, or something more sophisticated?

Ian


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 22:41:04 2005
Return-Path: <java-user-return-17944-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68074 invoked from network); 12 Dec 2005 22:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 22:41:01 -0000
Received: (qmail 86186 invoked by uid 500); 12 Dec 2005 22:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86166 invoked by uid 500); 12 Dec 2005 22:40:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86155 invoked by uid 99); 12 Dec 2005 22:40:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 14:40:54 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 14:40:52 -0800
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id jBCMekB12410
	for <java-user@lucene.apache.org>; Mon, 12 Dec 2005 16:40:47 -0600
Message-ID: <439DFC5C.5030400@getopt.org>
Date: Mon, 12 Dec 2005 23:40:28 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
References: <43903645.6000705@getopt.org> <200512032242.59982.paul.elschot@xs4all.nl> <4396B0B5.50901@getopt.org> <200512112249.01961.paul.elschot@xs4all.nl>
In-Reply-To: <200512112249.01961.paul.elschot@xs4all.nl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Elschot wrote:

>There is one indexing parameter that might help performance
>for BooleanScorer2, it is the skip interval in Lucene's TermInfosWriter.
>The current value is 16, and there was a question about it
>on 16 Oct 2005 on java-dev with title "skipInterval".
>I don't know how the value of skipInterval was initially determined.
>It's possible that a larger value gives somewhat better query
>performance in this case.
>Changing the skip interval might require reindexing, though.
>  
>

In Nutch the default is 128. And yes, changing this requires re-creating 
the index (actually, it's enough to optimize it, so that the .tii file 
is re-written).

>I considered a specialised scorer for the earlier query:
>
>+(url:term1^4.0 anchor:term1^2.0 content:term1
>   title:term1^1.5  host:term1^2.0)
>+(url:term2^4.0 anchor:term2^2.0 content:term2
>   title:term2^1.5 host:term2^2.0)
>url:"term1 term2"~2147483647^4.0 
>anchor:"term1 term2"~4^2.0
>content:"term1 term2"~2147483647
>title:"term1 term2"~2147483647^1.5
>host:"term1 term2"~2147483647^2.0
>  
>
[...]

Thank you for the detailed analysis. Currently we pursue a totally 
different approach: limiting the size of the index by clever selection 
of the most promising postings, and resorting the posting lists so that 
they are ordered according to a "pagerank"-like value, so that we could 
skip postings coming from less significant docs. Please see the 
nutch-dev discussion for more details.

Oh, BTW:  I just found the DisjunctionMaxQuery class, recently added it 
seems. Do you think this query structure could benefit from using it 
instead of the BooleanQuery?

-- 
Best regards,
Andrzej Bialecki     <><
 ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 12 23:37:12 2005
Return-Path: <java-user-return-17945-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98328 invoked from network); 12 Dec 2005 23:37:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Dec 2005 23:37:04 -0000
Received: (qmail 74188 invoked by uid 500); 12 Dec 2005 23:36:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73659 invoked by uid 500); 12 Dec 2005 23:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72472 invoked by uid 99); 12 Dec 2005 23:36:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 15:36:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 15:36:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id B1C0D5B788; Mon, 12 Dec 2005 15:35:54 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A6FEA7F49A
	for <java-user@lucene.apache.org>; Mon, 12 Dec 2005 15:35:54 -0800 (PST)
Date: Mon, 12 Dec 2005 15:35:54 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Lucene performance bottlenecks
In-Reply-To: <439DFC5C.5030400@getopt.org>
Message-ID: <Pine.LNX.4.58.0512121524080.7533@hal.rescomp.berkeley.edu>
References: <43903645.6000705@getopt.org> <200512032242.59982.paul.elschot@xs4all.nl>
 <4396B0B5.50901@getopt.org> <200512112249.01961.paul.elschot@xs4all.nl>
 <439DFC5C.5030400@getopt.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Oh, BTW:  I just found the DisjunctionMaxQuery class, recently added it
: seems. Do you think this query structure could benefit from using it
: instead of the BooleanQuery?

DisjunctionMaxQuery kicks ass (in my opinion), and It certainly seems like
(from your query structure) it's something you might want to consider
using, but I don't know thta it will sove the performance problems you're
having -- I can't think of any situations in which DisjunctionMaxScorer
could skip more docs/terms then DisjuntionSumScorer.

I believe Paul already suggested writting a completely new type of
specialized Query/Scorer for your purposes -- one possibility I can
imaging is a specialized version of BooleanQuery that skips past documents
in the optional scorers once it's gotten a score from at least one other
optional scorer (or N other optional scorers).  Then as long as you're
carefull to list the really usefull sub-clauses (ie: the shorter fields,
with the higher boosts) first, you can save a lot of calculation with
(what i expect would be)  little loss in functionality.

for example, looking at your sample query...

+(url:term1^4.0 anchor:term1^2.0 content:term1 title:term1^1.5 host:term1^2.0)
+(url:term2^4.0 anchor:term2^2.0 content:term2 title:term2^1.5 host:term2^2.0)
url:"term1 term2"~2147483647^4.0
anchor:"term1 term2"~4^2.0
content:"term1 term2"~2147483647
title:"term1 term2"~2147483647^1.5
host:"term1 term2"~2147483647^2.0

...if you reordered those first two clauses like this...

+(url:term1^4.0 anchor:term1^2.0 host:term1^2.0 title:term1^1.5 content:term1)

...once the Scorers from the url term query and the achor term query
have chimed in with a non-zero score for a document, the scores from the
other sub-clauses maynot be very relevant in the final score calculation
... so why not skip them?





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 01:30:26 2005
Return-Path: <java-user-return-17946-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50444 invoked from network); 13 Dec 2005 01:30:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 01:30:25 -0000
Received: (qmail 59511 invoked by uid 500); 13 Dec 2005 01:30:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59427 invoked by uid 500); 13 Dec 2005 01:30:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59243 invoked by uid 99); 13 Dec 2005 01:30:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 17:30:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 17:30:04 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14C60556@mailer.syr.edu>; Mon, 12 Dec 2005 20:29:43 -0500
Message-ID: <439E2406.3090802@syr.edu>
Date: Mon, 12 Dec 2005 20:29:42 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: ApacheCon next week
References: <43999525.9090903@syr.edu>	<b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>	<000601c5fe96$651c7340$b900a8c0@jhi>	<b205e9650512112105i6de9c6c5va994c0893322bba6@mail.gmail.com>	<439DCA6D.3020106@syr.edu> <9cfbqzmt6gu.fsf@rogue.ncsl.nist.gov>
In-Reply-To: <9cfbqzmt6gu.fsf@rogue.ncsl.nist.gov>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We use boosts that are calculated based on the frequencies and the 
standard alpha, beta, gamma multipliers from Rochio.  Non-relevant terms 
decrement the frequency.  If a term is <= 0, we remove the term (someone 
has posted a contribution for dealing with negative weights, we just 
haven't adopted it yet).  I am sure there are more things you could do, 
we just haven't investigated too much.  We also give different weights 
to things we think are more important based on our NLP analysis.


Ian Soboroff wrote:

>Grant Ingersoll <gsingers@syr.edu> writes:
>
>  
>
>>You stole my thunder!  :-)  Was going to post the URL after doing the
>>actual talk, but that's all right.  I will post a few changes I have
>>made on the plane tonight or tomorrow to the website below.
>>
>>Let me know if you have any questions...
>>    
>>
>
>I have one.  I've been thinking about the problem with doing relevance
>feedback in Lucene, and I appreciate seeing your code on getting the
>top terms from a single document.
>
>However, the real problem for RF and pseudo-RF techniques is forming
>the query.  You can obviously add terms to a query, but how are you
>handling the weighting?  With boosts, or something more sophisticated?
>
>Ian
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
337 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 02:22:31 2005
Return-Path: <java-user-return-17947-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81957 invoked from network); 13 Dec 2005 02:22:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 02:22:31 -0000
Received: (qmail 23702 invoked by uid 500); 13 Dec 2005 02:22:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23672 invoked by uid 500); 13 Dec 2005 02:22:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23657 invoked by uid 99); 13 Dec 2005 02:22:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 18:22:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 18:22:24 -0800
Received: by wproxy.gmail.com with SMTP id i1so26659wra
        for <java-user@lucene.apache.org>; Mon, 12 Dec 2005 18:22:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LXpm0BhDqPYfhvmWwtIlihJ1A8T/y5z0itPtdrWMMs7Evn1i3eQrCMne9dGnwd5IsFbPseQNwGSpPra2Msq51qPhKyMxxHTWkP/vJ2ZiJFoPCncNMfEw6U3AwJHw4TKAgja4/uyfkov4GoNuIB2DC05sczEyDrmwef3OT7mz2nY=
Received: by 10.54.149.3 with SMTP id w3mr209472wrd;
        Mon, 12 Dec 2005 18:22:02 -0800 (PST)
Received: by 10.54.131.1 with HTTP; Mon, 12 Dec 2005 18:22:02 -0800 (PST)
Message-ID: <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
Date: Tue, 13 Dec 2005 10:22:02 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
In-Reply-To: <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	 <001c01c5f60d$5089c0e0$b900a8c0@jhi>
	 <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	 <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/13/05, Ian Soboroff <ian.soboroff@nist.gov> wrote:
> Paul Libbrecht <paul@activemath.org> writes:
>
> > We're also thinking about implementing something similar to LSI within
> > ActiveMath which is lucene-powered where both formulae and text
> > searching would benefit of the latent-semantic-similarity. I've been
> > refrained of doing "exactly this" at least since LSI is patented. This
> > might also be a reason why there's no implementation in Lucene's
> > sandbox.
> >
> > Have you looked at other vector-based approaches which are not exactly =
LSI ?
> > Have you looked at InfoMap NLP ?
>
> Look for Thomas Hofmann's "probabilistic LSI", and other recent work
> which cites it.

You might also be interested in "Latent Dirichlet Allocation (LDA)" by
David Blei. In short, it is a more advanced version of "probabilistic
LSI". I am currently writing some code to dump Lucene documents into a
file format used by Blei's LDA implementation written in C.


Regards,
Dave.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 03:30:54 2005
Return-Path: <java-user-return-17948-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5972 invoked from network); 13 Dec 2005 03:30:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 03:30:54 -0000
Received: (qmail 96230 invoked by uid 500); 13 Dec 2005 03:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96201 invoked by uid 500); 13 Dec 2005 03:30:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96190 invoked by uid 99); 13 Dec 2005 03:30:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 19:30:46 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.128.105.12] (HELO King.Siti.com) (209.128.105.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 19:30:46 -0800
Received: from ravij ([10.2.152.215]) by King.Siti.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 12 Dec 2005 19:17:41 -0800
From: "Ravi" <ravi.jaladanki@siti.com>
To: <java-user@lucene.apache.org>
Subject: RE: :how to add int fileds to lucene:
Date: Tue, 13 Dec 2005 09:02:45 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcX/NC7jzZHeR2LTTAGf2SX0ysCfnAAYOZZg
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <596BA4D8-9A93-4F34-BBA4-013BE9674AA0@ehatchersolutions.com>
Message-ID: <KINGlUQ9cAgjHXwKHvy00000fc3@King.Siti.com>
X-OriginalArrivalTime: 13 Dec 2005 03:17:41.0937 (UTC) FILETIME=[C753F210:01C5FF93]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik

Thanks for your solution. I want to do exactly what you have mentioned in
the mail . I would like to search on the fields what I have added to lucene
.That is search on  days and sort on those days value and moreover how to
add multiple field querys to lucene . I don't have any idea how to Query on
multiple fields .ex  searching on the candidate and days where days >5 and
candidate>10 or days >one month and so on.. Please give me the code or let
me know where I can find test programs so that I can complete my project. 

Waiting for your reply.... 

Thanks
Ravi Kumar Jaladanki
408-328-6437


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Monday, December 12, 2005 9:35 PM
To: java-user@lucene.apache.org
Subject: Re: :how to add int fileds to lucene:


On Dec 12, 2005, at 8:10 AM, Ravi wrote:
> I am trying to add some fields to lucene and I heard that adding  
> int values
> are going to give much faster retrieval than adding to String  
> values. So I
> want to add int values to document . But
>
>
>
> document.add(Field.Text("Candidate", objResultSet.getString 
> ("ROW_ID")));
>
> document.add(Field.Keyword("lastmodified",
> objResultSet.getDate("MODIFIED_ON")));
>
> document.add(Field.Text("days",days) );
>
> document.add(Field.Text("contents", objReader));
>
>
>
>
>
> Days are int but it is giving error . Please suggest me with the  
> steps to
> add and search those integer fields
>

All stored field data in a Lucene index are Strings.  The performance  
difference you may be referring to is with sorting results, not in  
retrieval.

You will want to simply convert your int "days" into a String  
(Integer.toString(days) will do the trick.  Careful with your  
analyzer if you really do want days to be searchable/sortable.  Using  
Field.Keyword() is probably more appropriate.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 05:08:30 2005
Return-Path: <java-user-return-17949-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38865 invoked from network); 13 Dec 2005 05:08:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 05:08:30 -0000
Received: (qmail 77537 invoked by uid 500); 13 Dec 2005 05:08:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77513 invoked by uid 500); 13 Dec 2005 05:08:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77502 invoked by uid 99); 13 Dec 2005 05:08:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 21:08:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jeff.rodenburg@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 12 Dec 2005 21:08:23 -0800
Received: by wproxy.gmail.com with SMTP id i24so1571747wra
        for <java-user@lucene.apache.org>; Mon, 12 Dec 2005 21:08:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=d8vIjWhr84z2y0Isv9wShOJj71FdIWF8D3rfdAeyBj5/VQneERYTROtdrYsz8zJ1OlXsNXb9iEKHgfQshAHZ4+r6frctVoDUofeXagYMBXoJhE8lo0l1EzIeeGGt5EoDpErCwQAVfsMUoaK5WUl5880os868J5KSwIZGGsX0QGk=
Received: by 10.64.251.2 with SMTP id y2mr2905844qbh;
        Mon, 12 Dec 2005 21:08:02 -0800 (PST)
Received: by 10.65.35.9 with HTTP; Mon, 12 Dec 2005 21:08:02 -0800 (PST)
Message-ID: <50f433360512122108w289dc724h447ce30e143025d9@mail.gmail.com>
Date: Mon, 12 Dec 2005 21:08:02 -0800
From: Jeff Rodenburg <jeff.rodenburg@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ApacheCon next week
In-Reply-To: <439DCA6D.3020106@syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27760_30088910.1134450482363"
References: <43999525.9090903@syr.edu>
	 <b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>
	 <000601c5fe96$651c7340$b900a8c0@jhi>
	 <b205e9650512112105i6de9c6c5va994c0893322bba6@mail.gmail.com>
	 <439DCA6D.3020106@syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_27760_30088910.1134450482363
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well done, Grant.  Very informative.

Question on Term Vectors: with their inclusion in an index, have you notice=
d
any degradation in performance, either from a search effiiciency or
maintenance point-of-view?  Given the power of term vectors, if the perf
impact is negligible, I'm curious to the reasons why one would NOT include
term vectors in any and every index...

cheers,
j

On 12/12/05, Grant Ingersoll <gsingers@syr.edu> wrote:
>
> You stole my thunder!  :-)  Was going to post the URL after doing the
> actual talk, but that's all right.  I will post a few changes I have
> made on the plane tonight or tomorrow to the website below.
>
> Let me know if you have any questions...
>
> Luke Nezda wrote:
>
> >Where are my manners :-/
> >Anyway, I found the answer to my own request.
> >http://www.cnlp.org/apachecon2005/
> >Looks like some cool work, I only wish I could hear the accompanying
> speech.
> >Cheers,
> >-Luke
> >
> >On 12/11/05, gekkokid <me@gekkokid.org.uk> wrote:
> >
> >
> >>please :)
> >>----- Original Message -----
> >>From: "Luke Nezda" <lnezda@gmail.com>
> >>To: <java-user@lucene.apache.org>
> >>Sent: Sunday, December 11, 2005 6:28 PM
> >>Subject: Re: ApacheCon next week
> >>
> >>
> >>Hello Grant-
> >>Could you post the material you present (eg slides, handouts, etc) for
> >>those
> >>of us who cannot attend?
> >>Thanks in advance,
> >>-Luke
> >>
> >>On 12/9/05, Grant Ingersoll <gsingers@syr.edu> wrote:
> >>
> >>
> >>>Any one planning on going to ApacheCon next week?  I will be giving a
> >>>talk on Lucene on Monday afternoon at 3pm on term vectors, span querie=
s
> >>>and some case studies from our work at CNLP with Lucene.
> >>>
> >>>Abstract for my talk can be found at
> >>>http://www.apachecon.com/2005/US/html/sessions.html/e=3DMjAwNS9VUw#140=
0
> >>>
> >>>-Grant
> >>>
> >>>--
> >>>-------------------------------------------------------------------
> >>>Grant Ingersoll
> >>>Sr. Software Engineer
> >>>Center for Natural Language Processing
> >>>Syracuse University
> >>>School of Information Studies
> >>>337 Hinds Hall
> >>>Syracuse, NY 13244
> >>>
> >>>http://www.cnlp.org
> >>>Voice:  315-443-5484
> >>>Fax: 315-443-6886
> >>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >>
> >
> >
> >
>
> --
> -------------------------------------------------------------------
> Grant Ingersoll
> Sr. Software Engineer
> Center for Natural Language Processing
> Syracuse University
> School of Information Studies
> 337 Hinds Hall
> Syracuse, NY 13244
>
> http://www.cnlp.org
> Voice:  315-443-5484
> Fax: 315-443-6886
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27760_30088910.1134450482363--

From java-user-return-17960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:19:36 2005
Return-Path: <java-user-return-17960-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12536 invoked from network); 13 Dec 2005 16:19:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:19:13 -0000
Received: (qmail 97543 invoked by uid 500); 13 Dec 2005 16:11:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97519 invoked by uid 500); 13 Dec 2005 16:11:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97508 invoked by uid 99); 13 Dec 2005 16:11:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:11:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jjl@panix.com designates 166.84.1.74 as permitted sender)
Received: from [166.84.1.74] (HELO mail3.panix.com) (166.84.1.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:11:12 -0800
Received: from mailspool3.panix.com (mailspool3.panix.com [166.84.1.78])
	by mail3.panix.com (Postfix) with ESMTP id 1EDB713AA61
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 11:10:46 -0500 (EST)
Received: from [10.0.1.3] (pool-70-23-248-85.ny325.east.verizon.net [70.23.248.85])
	by mailspool3.panix.com (Postfix) with ESMTP id AD55C5A75A2
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 11:10:44 -0500 (EST)
Mime-Version: 1.0
Message-Id: <p06210207bfc49916b53f@[10.0.1.3]>
In-Reply-To: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
References: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
Date: Tue, 13 Dec 2005 11:10:33 -0500
To: java-user@lucene.apache.org
From: "J.J. Larrea" <jjl@panix.com>
Subject: Re: html parsers and numers of terms
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Beware of HTML/XML entities in your input stream!  The Lucene analyzers (including StandardAnalyzer) do not interpret these representation-specific encodings, and assume the & and ; delimiters are punctuation.  How they deal with punctuation depends on the specific Analyzer logic.

For example, here is the output from running the (horribly useful) Lucene In Action class lia.analyzer.AnalyzerDemo on the strings "Nause", "Naus&eacute;e", and "Naus&#233;e", all of which are equivalent in an HTML encoding:

Analyzing "Naus?e"
  WhitespaceAnalyzer:
    [Naus?e]

  SimpleAnalyzer:
    [naus?e]

  StopAnalyzer:
    [naus?e]

  StandardAnalyzer:
    [naus?e]

(The ? is an artifact of seeing the Unicode output on a text terminal)

Analyzing "Naus&eacute;e"
  WhitespaceAnalyzer:
    [Naus&eacute;e]

  SimpleAnalyzer:
    [naus] [eacute] [e]

  StopAnalyzer:
    [naus] [eacute] [e]

  StandardAnalyzer:
    [naus&eacute] [e]

Analyzing "Naus&#233;e"
  WhitespaceAnalyzer:
    [Naus&#233;e]

  SimpleAnalyzer:
    [naus] [e]

  StopAnalyzer:
    [naus] [e]

  StandardAnalyzer:
    [naus] [233] [e]

Nasty! Obviously indexing these tokens as shown will give a GIGO result.

So you must decode symbolic and numeric character references before they hit the analyzer, either in your XML/HTML parser or externally.

- J.J.

PS: Also note that when using Luke to see what is indexed, it uses NCRs eg. &#233; to display non-ASCII characters, allowing one to be easily confused as to whether the NCRs were indexed or the Unicode characters were indexed.

At 7:33 AM -0500 12/13/05, Robert Watkins wrote:
>I have been experimenting with a couple of HTML parsers, primarily to
>compare performance, but have discovered a difference in the index for
>which I haven't, with assurance discovered the cause.
>
>The difference is in the number of terms reported by Luke. The indexes
>created with the content parsed using JTidy generally have about 30%
>fewer terms than those created with content parsed using HTMLParser
>(htmlparser.org).
>
>The only difference I can discern (using debug logs and diff) is with
>the way entities are handled by the two parsers. Using JTidy, any HTML
>entities are converted to the literal character; using HTMLParser they
>are left as an entity (named or numeric). In the fields that are
>tokenized, entities not already converted are done so in the index, which
>leaves only the fields not tokenized. It does not seem likely to me that
>this could account for 30% of the terms indexed.
>
>Is it possible to use Luke (or some other tool) to make a more detailed
>comparison of the two indexes? I have tried to find a difference in the
>top terms indexed, and while the order of the top terms does change, the
>numbers do not. Am I missing something obvious?
>
>Thanks,
>-- Robert
>
>--------------------
>Robert Watkins
>rwatkins@foo-bar.org
>--------------------
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:28:04 2005
Return-Path: <java-user-return-17953-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31318 invoked from network); 13 Dec 2005 16:28:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:28:03 -0000
Received: (qmail 35363 invoked by uid 500); 13 Dec 2005 10:51:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35346 invoked by uid 500); 13 Dec 2005 10:51:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35331 invoked by uid 99); 13 Dec 2005 10:51:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 02:51:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.128.105.12] (HELO King.Siti.com) (209.128.105.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 02:51:57 -0800
Received: from ravij ([10.2.152.215]) by King.Siti.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 13 Dec 2005 02:38:49 -0800
From: "Ravi" <ravi.jaladanki@siti.com>
To: <java-user@lucene.apache.org>
Subject: :Creating  the search on last modified list value:
Date: Tue, 13 Dec 2005 16:23:46 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0006_01C60001.9F18AE80"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcX/031lNr3TXa4eSH2dRFPHBvsS6A==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Message-ID: <KINGSQeSOzNCWbzwWJv000010a2@King.Siti.com>
X-OriginalArrivalTime: 13 Dec 2005 10:38:51.0703 (UTC) FILETIME=[6889B470:01C5FFD1]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0006_01C60001.9F18AE80
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi ,

 

 I want create a  following search query

 

 

 search and  Return results updated in the                            any
time

 
Last 7 days

 
Last 2 weeks

Last  1 Month so on.

 

 

http://svn.apache.org/repos/asf/lucene/java/trunk/contrib/javascript/queryCo
nstructor/luceneQueryConstructor.html

 

This is just like what they have mentioned in sand box. Of Lucene as above
link . but I don't know how to construct this query and search in the
index.. Pls help me with the source code or link which can give me the
details to construct and search the data based on above condition.  And
moreover I want to return only top 1000  and want to display them just like
hot jobs or dice how they are showing in the search results.. Please help me
by giving  the suitable solution to this problem

 

 

 

            


------=_NextPart_000_0006_01C60001.9F18AE80--


From java-user-return-17961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:36:00 2005
Return-Path: <java-user-return-17961-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46889 invoked from network); 13 Dec 2005 16:36:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:36:00 -0000
Received: (qmail 34547 invoked by uid 500); 13 Dec 2005 16:35:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34520 invoked by uid 500); 13 Dec 2005 16:35:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34509 invoked by uid 99); 13 Dec 2005 16:35:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:35:51 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.69 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.69] (HELO imf21aec.mail.bellsouth.net) (205.152.59.69)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:35:51 -0800
Received: from ibm63aec.bellsouth.net ([68.209.119.157])
          by imf21aec.mail.bellsouth.net with ESMTP
          id <20051213163530.LAJA25645.imf21aec.mail.bellsouth.net@ibm63aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 11:35:30 -0500
Received: from jimwormold ([68.209.119.157]) by ibm63aec.bellsouth.net
          with ESMTP
          id <20051213163529.UBBT24930.ibm63aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 11:35:29 -0500
Date: Tue, 13 Dec 2005 11:36:38 -0500 (EST)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: html parsers and numers of terms
In-Reply-To: <p06210207bfc49916b53f@[10.0.1.3]>
Message-ID: <Pine.LNX.4.63.0512131133340.28139@jimwormold>
References: <Pine.LNX.4.63.0512130716100.5510@jimwormold> <p06210207bfc49916b53f@[10.0.1.3]>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Aha! I had, indeed, been fooled by Luke into thinking that the entities
had been converted upon analysis, but you have set me straight.

Thanks,
-- Robert

On Tue, 13 Dec 2005, J.J. Larrea wrote:

> Beware of HTML/XML entities in your input stream!  The Lucene analyzers (including StandardAnalyzer) do not interpret these representation-specific encodings, and assume the & and ; delimiters are punctuation.  How they deal with punctuation depends on the specific Analyzer logic.
>
> [ snipped ]
>
> PS: Also note that when using Luke to see what is indexed, it uses NCRs eg. &#233; to display non-ASCII characters, allowing one to be easily confused as to whether the NCRs were indexed or the Unicode characters were indexed.
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:39:19 2005
Return-Path: <java-user-return-17962-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55100 invoked from network); 13 Dec 2005 16:39:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:39:15 -0000
Received: (qmail 41648 invoked by uid 500); 13 Dec 2005 16:39:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41630 invoked by uid 500); 13 Dec 2005 16:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41619 invoked by uid 99); 13 Dec 2005 16:39:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:39:09 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [131.246.120.5] (HELO mailgate1.uni-kl.de) (131.246.120.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:39:08 -0800
Received: from dfki-2203.dfki.uni-kl.de (pc-210.dfki.uni-kl.de [131.246.241.70])
	by mailgate1.uni-kl.de (8.13.4/8.13.4/Debian-3) with ESMTP id jBDGckVU013715
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 17:38:46 +0100
Received: from serv-3100.kl.dfki.de (serv-3100.kl.dfki.de [192.168.31.180])
	by dfki-2203.dfki.uni-kl.de (8.11.7p1+Sun/8.11.4) with ESMTP id jBDGckS13940
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 17:38:46 +0100 (MET)
Received: from [192.168.31.173] (pc-3153 [192.168.31.173])
	by serv-3100.kl.dfki.de (8.12.10+Sun/8.12.10) with ESMTP id jBDGciLa001597
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 17:38:44 +0100 (CET)
Message-ID: <439EF917.9020508@web.de>
Date: Tue, 13 Dec 2005 17:38:47 +0100
From: duiduder@web.de
User-Agent: Mozilla Thunderbird 1.0 (X11/20041207)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: lucene similarity value range
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am wondering whether the range of the similarity values is guaranteed to be inside
a well-defined range (e.g. between [0..1]).
I use the DefaultSimilarity implementation from the SVN Lucene version and actually
recieve values of e.g. 1.84.
Is this a bug? Is there any range guaranteed? What does the normalization value inside
DefaultSimilarity? HELP  ;)

greetings

Christian



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:39:41 2005
Return-Path: <java-user-return-17954-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55918 invoked from network); 13 Dec 2005 16:39:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:39:41 -0000
Received: (qmail 38903 invoked by uid 500); 13 Dec 2005 10:54:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38855 invoked by uid 500); 13 Dec 2005 10:54:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38816 invoked by uid 99); 13 Dec 2005 10:54:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 02:54:04 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of adam.saltiel@gmail.com designates 66.249.82.206 as permitted sender)
Received: from [66.249.82.206] (HELO xproxy.gmail.com) (66.249.82.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 02:54:03 -0800
Received: by xproxy.gmail.com with SMTP id s10so1431867wxc
        for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 02:53:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=HK4iLgUcUABurT+XKWg6eVE34RFIf53mG/jCcCNt6BQjLKwhJuoQw9tTkrgyLlOTPowORDEikG9kONYYDOpQsa3L0ggmLFrgn/z/+sHFnfcUopwyKBjY7VjrqQunwGRaEocHjKoXrnx0pgegiufzFDJXupnbtYKRoPotXWOFci8=
Received: by 10.70.42.13 with SMTP id p13mr10003765wxp;
        Tue, 13 Dec 2005 02:53:42 -0800 (PST)
Received: by 10.70.24.10 with HTTP; Tue, 13 Dec 2005 02:53:42 -0800 (PST)
Message-ID: <e8aa138c0512130253t34b967a5h@mail.gmail.com>
Date: Tue, 13 Dec 2005 10:53:42 +0000
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
In-Reply-To: <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7533_15562531.1134471222902"
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	 <001c01c5f60d$5089c0e0$b900a8c0@jhi>
	 <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	 <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
	 <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_7533_15562531.1134471222902
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhlcmUgc2VlbSB0byBiZSBxdWl0ZSBhIGZldyBhbHRlcm5hdGl2ZXMgYXJvdW5kLiBJIHdvdWxk
IGJlIGludGVyZXN0ZWQgaW4KY29tbWVudHMgb24gdGhlIGZvbGxvd2luZzotClRoZSB3b3JrIGF0
IE5JVExFIDxodHRwOi8vd3d3Lm5pdGxlLm9yZy90b29scy9zZW1hbnRpYy9zZWFyY2guaHRtPgp1
c2luZyBDb250ZXh0dWFsCk5ldHdvcmsgU2VhcmNoIChDTlMpIGEgZ3JhcGgtYmFzZWQgYWx0ZXJu
YXRpdmUgdG8gTFNJLgpUaGlzIHdvcmsgKltQREZdKiBBbiBJbnRyb2R1Y3Rpb24gdG8gKlJhbmRv
bSoKSW5kZXhpbmc8aHR0cDovL3d3dy5zaWNzLnNlLyU3RW1hbmdlLz4KZm91bmQgb24gU2FobGdy
ZW4ncyBzaWNzIHNpdGUuClRoZSBmb3JtZXIgaXMgYWR2YW5jZWQgYW5kIGZlYXR1cmUgcmljaC4g
SXQgd291bGQgYmUgY29tcGxleCB0byBpbnRlZ3JhdGUKaW50byBMdWNlbmUgYW5kIHdvdWxkIHJl
cXVpcmUgbW9yZSBvciBsZXNzIHN0YXJ0aW5nIGZyb20gc2NyYXRjaC4gU2FobGdyZW4KZG9lc24n
dCBzZWVtIHRvIGhhdmUgYW4gb3BlbiBzb3VyY2UgaW1wbGVtZW50YXRpb24gYW5kIGlmIHRoZXJl
IHdlcmUgb25lIGl0Cm1heSBoYXZlIHRvIGJlIHJld3JpdHRlbi4gTmV2ZXJ0aGVsZXNzIHRoZSBr
ZXkgaGVyZSBpcyB0aGF0IGl0IGRlYWxzIHdpdGgKdGhlIHByb2JsZW0gb2YgbWF0cml4IHJlZHVj
dGlvbiBpbnRyaW5zaWNhbGx5IGluIHRoZSBtb2RlbCBhbmQgc28gaXMgbGVzcwpjb21wdXRhdGlv
bmFsbHkgaW50ZW5zaXZlLCBJIHRoaW5rLiBJdCBhbHNvIGRlYWxzIHdpdGggdGhlIHByb2JsZW0g
b2YgYWRkaW5nCmFuZCBzdWJ0cmFjdGluZyBmcm9tIHRoZSBtYXRyaXgsIGFzIEkgdW5kZXJzdGFu
ZCBpdCBhbmQgd2l0aG91dCBhCmNvbXB1dGF0aW9uYWwgcGVuYWxpdHkuCldoYXQgZG8gb3RoZXJz
IHRoaW5rPyBBcmUgS2FuZXJ2YSAodGhlIHByb2Zlc3NvciB3aG8gZGV2ZWxvcGVkIHRoZXNlCmFu
YWx5dGljYWwgdGVjaG5pcXVlcykgYW5kIGUuZy4gU2FobGdyZW4ncyBtZXRob2RzIGF2YWlsYWJs
ZSBmb3IKaW1wbGVtZW50YXRpb24gaW50byBhbiBvcGVuIHNvdXJjZSBwcm9qZWN0PwpBZGFtCgpP
biAxMy8xMi8wNSwgRGF2ZSBLb3IgPGRhdmVrb3JAZ21haWwuY29tPiB3cm90ZToKPgo+IE9uIDEy
LzEzLzA1LCBJYW4gU29ib3JvZmYgPGlhbi5zb2Jvcm9mZkBuaXN0Lmdvdj4gd3JvdGU6Cj4gPiBQ
YXVsIExpYmJyZWNodCA8cGF1bEBhY3RpdmVtYXRoLm9yZz4gd3JpdGVzOgo+ID4KPiA+ID4gV2Un
cmUgYWxzbyB0aGlua2luZyBhYm91dCBpbXBsZW1lbnRpbmcgc29tZXRoaW5nIHNpbWlsYXIgdG8g
TFNJIHdpdGhpbgo+ID4gPiBBY3RpdmVNYXRoIHdoaWNoIGlzIGx1Y2VuZS1wb3dlcmVkIHdoZXJl
IGJvdGggZm9ybXVsYWUgYW5kIHRleHQKPiA+ID4gc2VhcmNoaW5nIHdvdWxkIGJlbmVmaXQgb2Yg
dGhlIGxhdGVudC1zZW1hbnRpYy1zaW1pbGFyaXR5LiBJJ3ZlIGJlZW4KPiA+ID4gcmVmcmFpbmVk
IG9mIGRvaW5nICJleGFjdGx5IHRoaXMiIGF0IGxlYXN0IHNpbmNlIExTSSBpcyBwYXRlbnRlZC4g
VGhpcwo+ID4gPiBtaWdodCBhbHNvIGJlIGEgcmVhc29uIHdoeSB0aGVyZSdzIG5vIGltcGxlbWVu
dGF0aW9uIGluIEx1Y2VuZSdzCj4gPiA+IHNhbmRib3guCj4gPiA+Cj4gPiA+IEhhdmUgeW91IGxv
b2tlZCBhdCBvdGhlciB2ZWN0b3ItYmFzZWQgYXBwcm9hY2hlcyB3aGljaCBhcmUgbm90IGV4YWN0
bHkKPiBMU0kgPwo+ID4gPiBIYXZlIHlvdSBsb29rZWQgYXQgSW5mb01hcCBOTFAgPwo+ID4KPiA+
IExvb2sgZm9yIFRob21hcyBIb2ZtYW5uJ3MgInByb2JhYmlsaXN0aWMgTFNJIiwgYW5kIG90aGVy
IHJlY2VudCB3b3JrCj4gPiB3aGljaCBjaXRlcyBpdC4KPgo+IFlvdSBtaWdodCBhbHNvIGJlIGlu
dGVyZXN0ZWQgaW4gIkxhdGVudCBEaXJpY2hsZXQgQWxsb2NhdGlvbiAoTERBKSIgYnkKPiBEYXZp
ZCBCbGVpLiBJbiBzaG9ydCwgaXQgaXMgYSBtb3JlIGFkdmFuY2VkIHZlcnNpb24gb2YgInByb2Jh
YmlsaXN0aWMKPiBMU0kiLiBJIGFtIGN1cnJlbnRseSB3cml0aW5nIHNvbWUgY29kZSB0byBkdW1w
IEx1Y2VuZSBkb2N1bWVudHMgaW50byBhCj4gZmlsZSBmb3JtYXQgdXNlZCBieSBCbGVpJ3MgTERB
IGltcGxlbWVudGF0aW9uIHdyaXR0ZW4gaW4gQy4KPgo+Cj4gUmVnYXJkcywKPiBEYXZlLgo+Cj4g
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2VyLXVuc3Vic2Ny
aWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMsIGUtbWFpbDog
amF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cg==
------=_Part_7533_15562531.1134471222902--

From java-user-return-17963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:42:50 2005
Return-Path: <java-user-return-17963-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60363 invoked from network); 13 Dec 2005 16:42:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:42:49 -0000
Received: (qmail 52511 invoked by uid 500); 13 Dec 2005 16:42:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52447 invoked by uid 500); 13 Dec 2005 16:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52396 invoked by uid 99); 13 Dec 2005 16:42:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:42:33 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.64 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.64] (HELO imf16aec.mail.bellsouth.net) (205.152.59.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:42:31 -0800
Received: from ibm56aec.bellsouth.net ([68.209.119.157])
          by imf16aec.mail.bellsouth.net with ESMTP
          id <20051213164209.VNYC9291.imf16aec.mail.bellsouth.net@ibm56aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 11:42:09 -0500
Received: from jimwormold ([68.209.119.157]) by ibm56aec.bellsouth.net
          with ESMTP
          id <20051213164209.JUST24720.ibm56aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 11:42:09 -0500
Date: Tue, 13 Dec 2005 11:43:18 -0500 (EST)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: Re: html parsers and numers of terms
In-Reply-To: <8112448F-330B-4335-9203-BCF2428D3769@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.63.0512131137030.28139@jimwormold>
References: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
 <8112448F-330B-4335-9203-BCF2428D3769@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

So obvious I missed it (at least that's my excuse). I'm on the road at
the moment and -- can you believe it? -- didn't bring my copy of Lucene
In Action with me! Looks like I'll have to get the source code from
lucenebook.com to crib the analyzer demo code.

Much obliged,
-- Robert

On Tue, 13 Dec 2005, Erik Hatcher wrote:

> How about taking a single simple HTML file, running it through each parser, 
> dumping the tokens into separate collections (or output to a single text 
> file) and diff them?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:48:52 2005
Return-Path: <java-user-return-17958-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70084 invoked from network); 13 Dec 2005 16:48:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:48:51 -0000
Received: (qmail 80523 invoked by uid 500); 13 Dec 2005 13:55:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80490 invoked by uid 500); 13 Dec 2005 13:55:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80464 invoked by uid 99); 13 Dec 2005 13:55:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 05:55:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 05:55:12 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DB97D13E201A; Tue, 13 Dec 2005 08:54:50 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 6D00B13E2005
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 08:54:42 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
References: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8112448F-330B-4335-9203-BCF2428D3769@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: html parsers and numers of terms
Date: Tue, 13 Dec 2005 08:54:41 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How about taking a single simple HTML file, running it through each  
parser, dumping the tokens into separate collections (or output to a  
single text file) and diff them?

	Erik

On Dec 13, 2005, at 7:33 AM, Robert Watkins wrote:

> I have been experimenting with a couple of HTML parsers, primarily to
> compare performance, but have discovered a difference in the index for
> which I haven't, with assurance discovered the cause.
>
> The difference is in the number of terms reported by Luke. The indexes
> created with the content parsed using JTidy generally have about 30%
> fewer terms than those created with content parsed using HTMLParser
> (htmlparser.org).
>
> The only difference I can discern (using debug logs and diff) is with
> the way entities are handled by the two parsers. Using JTidy, any HTML
> entities are converted to the literal character; using HTMLParser they
> are left as an entity (named or numeric). In the fields that are
> tokenized, entities not already converted are done so in the index,  
> which
> leaves only the fields not tokenized. It does not seem likely to me  
> that
> this could account for 30% of the terms indexed.
>
> Is it possible to use Luke (or some other tool) to make a more  
> detailed
> comparison of the two indexes? I have tried to find a difference in  
> the
> top terms indexed, and while the order of the top terms does  
> change, the
> numbers do not. Am I missing something obvious?
>
> Thanks,
> -- Robert
>
> --------------------
> Robert Watkins
> rwatkins@foo-bar.org
> --------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:48:53 2005
Return-Path: <java-user-return-17950-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70126 invoked from network); 13 Dec 2005 16:48:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:48:52 -0000
Received: (qmail 21657 invoked by uid 500); 13 Dec 2005 09:31:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21634 invoked by uid 500); 13 Dec 2005 09:31:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21623 invoked by uid 99); 13 Dec 2005 09:31:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 01:31:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of breitzammer@gmail.com designates 64.233.182.203 as permitted sender)
Received: from [64.233.182.203] (HELO nproxy.gmail.com) (64.233.182.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 01:31:19 -0800
Received: by nproxy.gmail.com with SMTP id n15so567175nfc
        for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 01:30:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=MY9LVYf5ziph3J926xpswhUU4jbyo3UDVT/N5i2bg3vHiX4lHochYSv3XpuwnNcpX3MCxKID5BMXuPnDbrOkBqayaSUIXgDMsFUSsgWkdZVNlT5rhbkSAHhMRKzM6TLK2+5+NlAazBM+459SOrTGJiwf7KB9EAf/S6tjn/M3YTE=
Received: by 10.49.41.2 with SMTP id t2mr938066nfj;
        Tue, 13 Dec 2005 01:30:57 -0800 (PST)
Received: by 10.49.36.14 with HTTP; Tue, 13 Dec 2005 01:30:57 -0800 (PST)
Message-ID: <9eaa7ce50512130130p313886d1uc62317db7a5ba796@mail.gmail.com>
Date: Tue, 13 Dec 2005 10:30:57 +0100
From: Benjamin Reitzammer <benjamin@nur-eine-i.de>
Sender: breitzammer@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Integrating Lucene with hibernate3
In-Reply-To: <dneiom$4js$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline
References: <dndubb$phk$1@sea.gmane.org>
	 <Pine.LNX.4.58.0512100005080.23718@hal.rescomp.berkeley.edu>
	 <dneiom$4js$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGksCkhpYmVybmF0ZSAzLjEgaGFzIChydWRpbWVudGFyeSkgYnVpbHRpbiBzdXBwb3J0IGZvciBM
dWNlbmUsIHZpYQpBbm5vdGF0aW9ucy4gU2VlIGhlcmUKaHR0cDovL3d3dy5oaWJlcm5hdGUub3Jn
L2hpYl9kb2NzL2Fubm90YXRpb25zL3JlZmVyZW5jZS9lbi9odG1sL2x1Y2VuZS5odG1sCgpJIGhh
dmVuJ3QgdGVzdGVkIGl0IGV4dGVuc2l2ZWx5IGJ1dCBpdCB3b3JrZWQgcXVpdGUgd2VsbCBpbiBt
eSBiYXNpYwp0ZXN0aW5nLiBUaG91Z2ggIGNvdWxkbid0IGZpbmQgbXVjaCBkb2N1bWVudGF0aW9u
LiBCdXQgdGhlIHNvdXJjZSBpcwp2ZXJ5IHJlYWRhYmxlLCBhbmQgZW5vdWdoIGRvY3VtZW50YXRp
b24gZm9yIGEgc3RhcnQsIGlmIHlvdSBrbm93Ckx1Y2VuZS4KCmh0dHA6Ly9jdnMuc291cmNlZm9y
Z2UubmV0L3ZpZXdjdnMucHkvaGliZXJuYXRlL0hpYmVybmF0ZUV4dC9tZXRhZGF0YS9zcmMvamF2
YS9vcmcvaGliZXJuYXRlL2x1Y2VuZS9ldmVudC9MdWNlbmVFdmVudExpc3RlbmVyLmphdmEKCkNo
ZWVycwoKQmVuamFtaW4KCk9uIDEyLzEwLzA1LCBSYXVsIFJhamEgTWFydGluZXogPGRvYmxlZXJy
ZUBlc3R1ZGlvd2Vicy5jb20+IHdyb3RlOgo+IFRoYW5rcyBDaHJpcyBJIGFwcHJlY2lhdGUgeW91
ciBjb21tZW50cy4KPiBJIGhhdmUgc3VjY2VzZnVsbHkgZml4ZWQgdGhlIGZpcnN0IGNoYW5naW5n
IHRoZSBwYXJhbWV0ZXIgdG8gdHJ1ZSBhbmQKPiB0aGUgc2Vjb25kIGVycm9yIGltcGxlbWVudGlu
ZyB0aHJlZSBpbnRlcmZhY2VzIGluIG9uZSBjbGFzcyBhbmQgYWRkaW5nCj4gc29tZSBsaW5lcyB0
byBoaWJlcm5hdGUuY2ZnLnhtbCwgYmVsb3cgaXMgdGhlIGNvZGUgaW4gY2FzZSBzb21lYm9keSBp
cwo+IGludGVyZXN0ZWQ6CltzbmlwXQo=


From java-user-return-17964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 16:59:11 2005
Return-Path: <java-user-return-17964-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88357 invoked from network); 13 Dec 2005 16:59:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 16:59:11 -0000
Received: (qmail 4878 invoked by uid 500); 13 Dec 2005 16:59:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4818 invoked by uid 500); 13 Dec 2005 16:59:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4794 invoked by uid 99); 13 Dec 2005 16:59:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:59:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jjl@panix.com designates 166.84.1.72 as permitted sender)
Received: from [166.84.1.72] (HELO mail1.panix.com) (166.84.1.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 08:59:01 -0800
Received: from mailspool3.panix.com (mailspool3.panix.com [166.84.1.78])
	by mail1.panix.com (Postfix) with ESMTP id B7CD85962C
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 11:58:40 -0500 (EST)
Received: from [10.0.1.3] (pool-70-23-248-85.ny325.east.verizon.net [70.23.248.85])
	by mailspool3.panix.com (Postfix) with ESMTP id B02585A75A2
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 11:58:40 -0500 (EST)
Mime-Version: 1.0
Message-Id: <p06210208bfc4abdf1c7b@[10.0.1.3]>
In-Reply-To: <Pine.LNX.4.63.0512131133340.28139@jimwormold>
References: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
 <p06210207bfc49916b53f@[10.0.1.3]>
 <Pine.LNX.4.63.0512131133340.28139@jimwormold>
Date: Tue, 13 Dec 2005 11:58:31 -0500
To: java-user@lucene.apache.org
From: "J.J. Larrea" <jjl@panix.com>
Subject: Re: html parsers and numers of terms
Content-Type: text/plain; charset="us-ascii"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Glad that hint was useful.  I was totally bit by that artifact myself.  It turns out that there were XML numeric character references within VARCHAR fields in a database I was indexing, so I never suspected that the NCRs I was seeing in Luke had anything to do with the non-XML non-HTML (so I thought) source data.

Also take care that when fields are stored it is quite easy to get confused between the stored values, which aren't analyzed, and the indexed tokens, which obviously are.  Asking Luke to reconstruct a source document from its indexed tokens is a great way to see it from an "index-eye" view, which can be very revealing.

- J.J.

At 11:36 AM -0500 12/13/05, Robert Watkins wrote:
>Aha! I had, indeed, been fooled by Luke into thinking that the entities
>had been converted upon analysis, but you have set me straight.
>
>Thanks,
>-- Robert
>
>On Tue, 13 Dec 2005, J.J. Larrea wrote:
>
>>Beware of HTML/XML entities in your input stream!  The Lucene analyzers (including StandardAnalyzer) do not interpret these representation-specific encodings, and assume the & and ; delimiters are punctuation.  How they deal with punctuation depends on the specific Analyzer logic.
>>
>>[ snipped ]
>>
>>PS: Also note that when using Luke to see what is indexed, it uses NCRs eg. &#233; to display non-ASCII characters, allowing one to be easily confused as to whether the NCRs were indexed or the Unicode characters were indexed.
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:03:13 2005
Return-Path: <java-user-return-17955-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92855 invoked from network); 13 Dec 2005 17:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:02:56 -0000
Received: (qmail 90694 invoked by uid 500); 13 Dec 2005 11:26:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90667 invoked by uid 500); 13 Dec 2005 11:26:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90656 invoked by uid 99); 13 Dec 2005 11:26:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 03:26:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.169.158.23] (HELO mail.aurisp.de) (81.169.158.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 03:26:25 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.aurisp.de (Postfix) with ESMTP id 0ED34B811
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 12:26:04 +0100 (CET)
Received: from mail.aurisp.de ([127.0.0.1])
	by localhost (mail.aurisp.de [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id 06915-03 for <java-user@lucene.apache.org>;
	Tue, 13 Dec 2005 12:25:59 +0100 (CET)
Received: from localhost (24.42.63.81.cust.bluewin.ch [81.63.42.24])
	by mail.aurisp.de (Postfix) with ESMTP id F3C13B806
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 12:25:58 +0100 (CET)
Date: Tue, 13 Dec 2005 12:26:15 +0100
From: Sebastian Marius Kirsch <skirsch@sebastian-kirsch.org>
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
Message-ID: <20051213112615.GD614@amok.local>
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com> <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com> <001c01c5f60d$5089c0e0$b900a8c0@jhi> <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com> <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov> <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com> <e8aa138c0512130253t34b967a5h@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <e8aa138c0512130253t34b967a5h@mail.gmail.com>
User-Agent: Mutt/1.4i
X-Virus-Scanned: amavisd-new at mail.aurisp.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, Dec 13, 2005 at 10:53:42AM +0000, adasal wrote:
> There seem to be quite a few alternatives around. I would be interested in
> comments on the following:-
> The work at NITLE <http://www.nitle.org/tools/semantic/search.htm>
> using Contextual
> Network Search (CNS) a graph-based alternative to LSI.

Hi,

perhaps I can say a few words about CNS.

I evaluated spreading activation search (which is what CNS is based
on) for my master's thesis. I must conclude that SA is a rather fickle
method -- if you read Preece's thesis, you will see that it can be
used to implement a number of retrieval algorithms and techniques. The
devil is in the details: SA depends strongly on a suitable set of
adjustments and constraints which express exactly the kind of
retrieval (or inference) algorithm you want. 

For applications of SA in Retrieval, see for example the following
publications:

http://www.sebastian-kirsch.org/moebius/reading.html#Crestani1997a
http://www.sebastian-kirsch.org/moebius/reading.html#Crestani2000
http://www.sebastian-kirsch.org/moebius/reading.html#Belew1989
http://www.sebastian-kirsch.org/moebius/reading.html#Pirolli1996

You will notice that Crestani stresses the fact that no successful
commercial system based on SA was ever produced. I am also unaware of
any peer-reviewed publications on CNS, or follow-up publications by
NITLE. Maciej Ceglowski has since left NITLE, as far as I know.


So if I was you, I'd place my bet on probabilistic or linear algebra
methods like pLSI/LSI. 

If anyone wants to chime in, please feel free to comment ;)

Regards, Sebastian

-- 
Sebastian Kirsch <skirsch@sebastian-kirsch.org> [http://www.sebastian-kirsch.org/]

NOTE: New email address! Please update your address book.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:04:05 2005
Return-Path: <java-user-return-17951-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94604 invoked from network); 13 Dec 2005 17:04:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:04:02 -0000
Received: (qmail 44492 invoked by uid 500); 13 Dec 2005 09:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44473 invoked by uid 500); 13 Dec 2005 09:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44461 invoked by uid 99); 13 Dec 2005 09:46:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 01:46:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 01:46:35 -0800
Received: from [82.153.237.45] (helo=[192.168.1.132])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1Em6jb-0005CT-00
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 09:46:11 +0000
Subject: DistributingMultiFieldQueryParser and DisjunctionMaxQuery
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0512121524080.7533@hal.rescomp.berkeley.edu>
References: <43903645.6000705@getopt.org>
	 <200512032242.59982.paul.elschot@xs4all.nl> <4396B0B5.50901@getopt.org>
	 <200512112249.01961.paul.elschot@xs4all.nl> <439DFC5C.5030400@getopt.org>
	 <Pine.LNX.4.58.0512121524080.7533@hal.rescomp.berkeley.edu>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Tue, 13 Dec 2005 09:44:46 +0000
Message-Id: <1134467086.7337.24.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Mon, 2005-12-12 at 15:35 -0800, Chris Hostetter wrote:
> : Oh, BTW:  I just found the DisjunctionMaxQuery class, recently added it
> : seems. Do you think this query structure could benefit from using it
> : instead of the BooleanQuery?
> 
> DisjunctionMaxQuery kicks ass (in my opinion), and It certainly seems like
> (from your query structure) it's something you might want to consider
> using, but I don't know thta it will sove the performance problems you're
> having -- I can't think of any situations in which DisjunctionMaxScorer
> could skip more docs/terms then DisjuntionSumScorer.

I've only had a quick play with it so this problem is probably down to
my misuse of the class but I found that negations weren't handled
properly. e.g.

fruit AND -apples

The DistributingMultiFieldQueryParser would correctly generate a query
that would find fruit in one of the fields, but would only ensure that
apples did not appear in one field, not not appear in all the fields,
which was the behaviour I wanted. Hence negations didn't really work if
the term appeared in more than one field.

Has anyone else experienced this problem?



Cheers,
Miles



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:10:03 2005
Return-Path: <java-user-return-17957-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3482 invoked from network); 13 Dec 2005 17:09:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:09:59 -0000
Received: (qmail 69444 invoked by uid 500); 13 Dec 2005 12:32:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69376 invoked by uid 500); 13 Dec 2005 12:32:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69339 invoked by uid 99); 13 Dec 2005 12:32:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 04:32:33 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 205.152.59.65 is neither permitted nor denied by domain of rwatkins@foo-bar.org)
Received: from [205.152.59.65] (HELO imf17aec.mail.bellsouth.net) (205.152.59.65)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 04:32:31 -0800
Received: from ibm57aec.bellsouth.net ([68.209.119.157])
          by imf17aec.mail.bellsouth.net with ESMTP
          id <20051213123210.PRPI14183.imf17aec.mail.bellsouth.net@ibm57aec.bellsouth.net>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 07:32:10 -0500
Received: from jimwormold ([68.209.119.157]) by ibm57aec.bellsouth.net
          with ESMTP
          id <20051213123209.PNMT8479.ibm57aec.bellsouth.net@jimwormold>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 07:32:09 -0500
Date: Tue, 13 Dec 2005 07:33:18 -0500 (EST)
From: Robert Watkins <rwatkins@foo-bar.org>
To: java-user@lucene.apache.org
Subject: html parsers and numers of terms
Message-ID: <Pine.LNX.4.63.0512130716100.5510@jimwormold>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have been experimenting with a couple of HTML parsers, primarily to
compare performance, but have discovered a difference in the index for
which I haven't, with assurance discovered the cause.

The difference is in the number of terms reported by Luke. The indexes
created with the content parsed using JTidy generally have about 30%
fewer terms than those created with content parsed using HTMLParser
(htmlparser.org).

The only difference I can discern (using debug logs and diff) is with
the way entities are handled by the two parsers. Using JTidy, any HTML
entities are converted to the literal character; using HTMLParser they
are left as an entity (named or numeric). In the fields that are
tokenized, entities not already converted are done so in the index, which
leaves only the fields not tokenized. It does not seem likely to me that
this could account for 30% of the terms indexed.

Is it possible to use Luke (or some other tool) to make a more detailed
comparison of the two indexes? I have tried to find a difference in the
top terms indexed, and while the order of the top terms does change, the
numbers do not. Am I missing something obvious?

Thanks,
-- Robert

--------------------
Robert Watkins
rwatkins@foo-bar.org
--------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:24:53 2005
Return-Path: <java-user-return-17965-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18593 invoked from network); 13 Dec 2005 17:23:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:23:25 -0000
Received: (qmail 72291 invoked by uid 500); 13 Dec 2005 17:23:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72265 invoked by uid 500); 13 Dec 2005 17:23:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72253 invoked by uid 99); 13 Dec 2005 17:23:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 09:23:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.63.50.168] (HELO gw.ncet.cov.net) (193.63.50.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 09:23:10 -0800
Received: from cov1mx1.becta.org..uk by gw.ncet.cov.net
          via smtpd (for asf.osuosl.org [140.211.166.49]) with ESMTP; Tue, 13 Dec 2005 17:04:09 +0000
Received: from Cov1MB1.becta.org.uk (cov1mb1.becta.org.uk) by cov1mx2.becta.org.uk
 (Clearswift SMTPRS 5.1.4) with ESMTP id <T75318d81ba0a00006416d8@cov1mx2.becta.org.uk> for <java-user@lucene.apache.org>;
 Tue, 13 Dec 2005 17:22:11 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Top n Searches
Date: Tue, 13 Dec 2005 17:22:10 -0000
Message-ID: <37C2EF59D00B03419D3BC161B1CBB6EE069706B1@Cov1MB1.becta.org.uk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Top n Searches
Thread-Index: AcX71JElBl1VpiCaTduJ26ck6LFLFgENOXPw
From: "Paul Williams" <Paul.Williams@becta.org.uk>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That was the approach I was planning to take but I've been asked to
provide a more intelligent implementation.  Basically I need to count
search phrases like 'x y z' and 'y z x' as being the same.


-----Original Message-----
From: Cheolgoo Kang [mailto:appler@gmail.com]=20
Sent: 08 December 2005 08:51 am
To: java-user@lucene.apache.org
Subject: Re: Top n Searches

Hi,

You first save those search keywords entered by users into some kind
of storage like a database system or even into a dedicated Lucene
index. So it's a database and web issue, not a Lucene one.

And, as you know, Lucene does not provide this functionality out of the
box.

Good luck!

On 12/8/05, Paul Williams <Paul.Williams@becta.org.uk> wrote:
> Hi,
>
>
>
> I've been asked whether we can do a Top n Searches functionality where
> we record the most common searched for phrases on a daily basis.  I'm
> not sure where to start with this or even if this is feasible with
> Lucene.
>
>
>
> Anyone done anything similar?
>
>
>
> Cheers.
>
> Paul Williams.
>
>
>


--
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:27:32 2005
Return-Path: <java-user-return-17956-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22877 invoked from network); 13 Dec 2005 17:26:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:26:21 -0000
Received: (qmail 18715 invoked by uid 500); 13 Dec 2005 11:50:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18695 invoked by uid 500); 13 Dec 2005 11:50:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18684 invoked by uid 99); 13 Dec 2005 11:50:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 03:50:07 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of adam.saltiel@gmail.com designates 66.249.82.205 as permitted sender)
Received: from [66.249.82.205] (HELO xproxy.gmail.com) (66.249.82.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 03:50:06 -0800
Received: by xproxy.gmail.com with SMTP id i28so1248993wxd
        for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 03:49:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GYdzG1dbOz4rPeKAp0J9Rf/YZvCteC5QBXyvqaYFobuL1YI/rtLAc7FjONDJ7zj0LoO6SP0f4InGvu0WK3WYIzd8k1YdJ3yS/CaVqWQyVEmGDMl7CB0N98Yh5cxzeqNfTXMOnJ5RsYpDVqN8tSzq0JgOOGABIFALh8Waxa26lPQ=
Received: by 10.70.16.15 with SMTP id 15mr1332665wxp;
        Tue, 13 Dec 2005 03:49:45 -0800 (PST)
Received: by 10.70.24.10 with HTTP; Tue, 13 Dec 2005 03:49:45 -0800 (PST)
Message-ID: <e8aa138c0512130349mac2b881m@mail.gmail.com>
Date: Tue, 13 Dec 2005 11:49:45 +0000
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
In-Reply-To: <20051213112615.GD614@amok.local>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8225_11195584.1134474585940"
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	 <001c01c5f60d$5089c0e0$b900a8c0@jhi>
	 <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	 <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
	 <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
	 <e8aa138c0512130253t34b967a5h@mail.gmail.com>
	 <20051213112615.GD614@amok.local>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_8225_11195584.1134474585940
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSdtIHN1cmUgeW91ciBldmFsdWF0aW9uIGlzIGNvcnJlY3QgZnJvbSB0aGUgaW5zcGVjdGlvbiBJ
IGhhdmUgbWFkZSBvZiB0aGUKTklUTEUgZWZmb3J0LCBlLmcuIHRoZSBuZWVkIGZvciB0d2Vha2lu
Zy4KSSB3aWxsIGZvbGxvdyB1cCB5b3VyIGxpbmtzIHdoZW4gSSBoYXZlIGEgY2hhbmNlLCBhbmQg
dGhhbmsgeW91IGZvciB0aGVtLgpJIGRpZG4ndCBrbm93IHRoYXQgYWJvdXQgTWFjaWVqIENlZ2xv
d3NraS4gUGVvcGxlIGRvIG1vdmUgb24uIEkgd2lzaCBoaW0KbHVjayAoaW4gY2FzZSBoZSBpcyBy
ZWFkaW5nIHRoaXMgb3IgYSBtYXRlIG9mIGhpcyBpcyAtOikpCkFueSB0aG91Z2h0cyBvbiByYW5k
b20gaW5kZXhpbmcgbWV0aG9kcyAoYWxzbyBubyBjb21tZXJjaWFsIGltcGxlbWVudGF0aW9uIEkK
dGhpbmspLgpCdXQgdGhlcmUgbXVzdCBiZSBhIHNpbWlsYXJpdHkgdG8gcExTST8KQWRhbQoKT24g
MTMvMTIvMDUsIFNlYmFzdGlhbiBNYXJpdXMgS2lyc2NoIDxza2lyc2NoQHNlYmFzdGlhbi1raXJz
Y2gub3JnPiB3cm90ZToKPgo+IE9uIFR1ZSwgRGVjIDEzLCAyMDA1IGF0IDEwOjUzOjQyQU0gKzAw
MDAsIGFkYXNhbCB3cm90ZToKPiA+IFRoZXJlIHNlZW0gdG8gYmUgcXVpdGUgYSBmZXcgYWx0ZXJu
YXRpdmVzIGFyb3VuZC4gSSB3b3VsZCBiZSBpbnRlcmVzdGVkCj4gaW4KPiA+IGNvbW1lbnRzIG9u
IHRoZSBmb2xsb3dpbmc6LQo+ID4gVGhlIHdvcmsgYXQgTklUTEUgPGh0dHA6Ly93d3cubml0bGUu
b3JnL3Rvb2xzL3NlbWFudGljL3NlYXJjaC5odG0+Cj4gPiB1c2luZyBDb250ZXh0dWFsCj4gPiBO
ZXR3b3JrIFNlYXJjaCAoQ05TKSBhIGdyYXBoLWJhc2VkIGFsdGVybmF0aXZlIHRvIExTSS4KPgo+
IEhpLAo+Cj4gcGVyaGFwcyBJIGNhbiBzYXkgYSBmZXcgd29yZHMgYWJvdXQgQ05TLgo+Cj4gSSBl
dmFsdWF0ZWQgc3ByZWFkaW5nIGFjdGl2YXRpb24gc2VhcmNoICh3aGljaCBpcyB3aGF0IENOUyBp
cyBiYXNlZAo+IG9uKSBmb3IgbXkgbWFzdGVyJ3MgdGhlc2lzLiBJIG11c3QgY29uY2x1ZGUgdGhh
dCBTQSBpcyBhIHJhdGhlciBmaWNrbGUKPiBtZXRob2QgLS0gaWYgeW91IHJlYWQgUHJlZWNlJ3Mg
dGhlc2lzLCB5b3Ugd2lsbCBzZWUgdGhhdCBpdCBjYW4gYmUKPiB1c2VkIHRvIGltcGxlbWVudCBh
IG51bWJlciBvZiByZXRyaWV2YWwgYWxnb3JpdGhtcyBhbmQgdGVjaG5pcXVlcy4gVGhlCj4gZGV2
aWwgaXMgaW4gdGhlIGRldGFpbHM6IFNBIGRlcGVuZHMgc3Ryb25nbHkgb24gYSBzdWl0YWJsZSBz
ZXQgb2YKPiBhZGp1c3RtZW50cyBhbmQgY29uc3RyYWludHMgd2hpY2ggZXhwcmVzcyBleGFjdGx5
IHRoZSBraW5kIG9mCj4gcmV0cmlldmFsIChvciBpbmZlcmVuY2UpIGFsZ29yaXRobSB5b3Ugd2Fu
dC4KPgo+IEZvciBhcHBsaWNhdGlvbnMgb2YgU0EgaW4gUmV0cmlldmFsLCBzZWUgZm9yIGV4YW1w
bGUgdGhlIGZvbGxvd2luZwo+IHB1YmxpY2F0aW9uczoKPgo+IGh0dHA6Ly93d3cuc2ViYXN0aWFu
LWtpcnNjaC5vcmcvbW9lYml1cy9yZWFkaW5nLmh0bWwjQ3Jlc3RhbmkxOTk3YQo+IGh0dHA6Ly93
d3cuc2ViYXN0aWFuLWtpcnNjaC5vcmcvbW9lYml1cy9yZWFkaW5nLmh0bWwjQ3Jlc3RhbmkyMDAw
Cj4gaHR0cDovL3d3dy5zZWJhc3RpYW4ta2lyc2NoLm9yZy9tb2ViaXVzL3JlYWRpbmcuaHRtbCNC
ZWxldzE5ODkKPiBodHRwOi8vd3d3LnNlYmFzdGlhbi1raXJzY2gub3JnL21vZWJpdXMvcmVhZGlu
Zy5odG1sI1Bpcm9sbGkxOTk2Cj4KPiBZb3Ugd2lsbCBub3RpY2UgdGhhdCBDcmVzdGFuaSBzdHJl
c3NlcyB0aGUgZmFjdCB0aGF0IG5vIHN1Y2Nlc3NmdWwKPiBjb21tZXJjaWFsIHN5c3RlbSBiYXNl
ZCBvbiBTQSB3YXMgZXZlciBwcm9kdWNlZC4gSSBhbSBhbHNvIHVuYXdhcmUgb2YKPiBhbnkgcGVl
ci1yZXZpZXdlZCBwdWJsaWNhdGlvbnMgb24gQ05TLCBvciBmb2xsb3ctdXAgcHVibGljYXRpb25z
IGJ5Cj4gTklUTEUuIE1hY2llaiBDZWdsb3dza2kgaGFzIHNpbmNlIGxlZnQgTklUTEUsIGFzIGZh
ciBhcyBJIGtub3cuCj4KPgo+IFNvIGlmIEkgd2FzIHlvdSwgSSdkIHBsYWNlIG15IGJldCBvbiBw
cm9iYWJpbGlzdGljIG9yIGxpbmVhciBhbGdlYnJhCj4gbWV0aG9kcyBsaWtlIHBMU0kvTFNJLgo+
Cj4gSWYgYW55b25lIHdhbnRzIHRvIGNoaW1lIGluLCBwbGVhc2UgZmVlbCBmcmVlIHRvIGNvbW1l
bnQgOykKPgo+IFJlZ2FyZHMsIFNlYmFzdGlhbgo+Cj4gLS0KPiBTZWJhc3RpYW4gS2lyc2NoIDxz
a2lyc2NoQHNlYmFzdGlhbi1raXJzY2gub3JnPiBbCj4gaHR0cDovL3d3dy5zZWJhc3RpYW4ta2ly
c2NoLm9yZy9dCj4KPiBOT1RFOiBOZXcgZW1haWwgYWRkcmVzcyEgUGxlYXNlIHVwZGF0ZSB5b3Vy
IGFkZHJlc3MgYm9vay4KPgo+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRvIHVuc3Vic2NyaWJlLCBlLW1haWw6
IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hlLm9yZwo+IEZvciBhZGRpdGlvbmFs
IGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnCj4KPgo=
------=_Part_8225_11195584.1134474585940--

From java-user-return-17952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:37:48 2005
Return-Path: <java-user-return-17952-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34184 invoked from network); 13 Dec 2005 17:37:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:37:48 -0000
Received: (qmail 94627 invoked by uid 500); 13 Dec 2005 10:20:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94597 invoked by uid 500); 13 Dec 2005 10:20:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94586 invoked by uid 99); 13 Dec 2005 10:20:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 02:20:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.59.166.26] (HELO DROR.dror.globehosting.net) (209.59.166.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 02:20:22 -0800
Received: from bomb2 ([82.79.200.23]) by dror.globehosting.net with MailEnable ESMTP; Tue, 13 Dec 2005 12:19:59 +0200
From: "Dan Nicolici" <dan.nicolici@nexource.ro>
To: <java-user@lucene.apache.org>
Subject: newbie question
Date: Tue, 13 Dec 2005 12:20:04 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0004_01C5FFDF.8D0B8720"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcX/zsiW+WGF9khmR8uyIso3eXuHgA==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2670
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20051213102022.D9CEC10FB00F@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0004_01C5FFDF.8D0B8720
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi! For starters I want to apologize if this is the wrong place to post a
Cocoon-Lucene question.

 

This is my first encounter with Lucene. I am trying to integrate it with
Cocoon. From what I read so far I prefer the approach with
LuceneIndexTransformer. Here is where I need some assistance. From what I
understand, the transformer creates the index from .xml files with proper
Lucene annotations. I also read that the transformer not only creates the
index, but also transforms the file to an xml result format, containing data
about the indexed documents.

For searching I want to use SearchGenerator. It says that I'm searching the
index. Now why do I need the xml result from the LuceneIndexTransformer if
I'm searching the index.

 

So you see, I am kind of confused. If someone could please explain the
concept (focused on LuceneIndexTransformer - SearchGenerator pair) for me, I
would greatly appreciate it.

 

Thank you in advance!

 

Dan


------=_NextPart_000_0004_01C5FFDF.8D0B8720--



From java-user-return-17966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:41:01 2005
Return-Path: <java-user-return-17966-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35923 invoked from network); 13 Dec 2005 17:41:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:41:01 -0000
Received: (qmail 7286 invoked by uid 500); 13 Dec 2005 17:40:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7209 invoked by uid 500); 13 Dec 2005 17:40:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7161 invoked by uid 99); 13 Dec 2005 17:40:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 09:40:53 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 09:40:51 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14C69EF3@mailer.syr.edu>; Tue, 13 Dec 2005 12:40:29 -0500
Message-ID: <439F07A0.1030104@syr.edu>
Date: Tue, 13 Dec 2005 12:40:48 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: ApacheCon next week
References: <43999525.9090903@syr.edu>	 <b205e9650512111028re9f9467sa8b42159fbd1735a@mail.gmail.com>	 <000601c5fe96$651c7340$b900a8c0@jhi>	 <b205e9650512112105i6de9c6c5va994c0893322bba6@mail.gmail.com>	 <439DCA6D.3020106@syr.edu> <50f433360512122108w289dc724h447ce30e143025d9@mail.gmail.com>
In-Reply-To: <50f433360512122108w289dc724h447ce30e143025d9@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks, Jeff.

I have only done basic testing, so not completely sure on your 
question.  However, one trade off is definitely in disk space.  As far 
as searching, I don't think there should be any impact b/c you get the 
vector separate from a search via the IndexReader.  Perhaps, the 
compound file format might effect it as the file will be larger, but 
that is only speculation.  I haven't noticed any performance impact 
other than the increase in disk space needed. 

-Grant

Jeff Rodenburg wrote:

>Well done, Grant.  Very informative.
>
>Question on Term Vectors: with their inclusion in an index, have you noticed
>any degradation in performance, either from a search effiiciency or
>maintenance point-of-view?  Given the power of term vectors, if the perf
>impact is negligible, I'm curious to the reasons why one would NOT include
>term vectors in any and every index...
>
>cheers,
>j
>
>On 12/12/05, Grant Ingersoll <gsingers@syr.edu> wrote:
>  
>
>>You stole my thunder!  :-)  Was going to post the URL after doing the
>>actual talk, but that's all right.  I will post a few changes I have
>>made on the plane tonight or tomorrow to the website below.
>>
>>Let me know if you have any questions...
>>
>>Luke Nezda wrote:
>>
>>    
>>
>>>Where are my manners :-/
>>>Anyway, I found the answer to my own request.
>>>http://www.cnlp.org/apachecon2005/
>>>Looks like some cool work, I only wish I could hear the accompanying
>>>      
>>>
>>speech.
>>    
>>
>>>Cheers,
>>>-Luke
>>>
>>>On 12/11/05, gekkokid <me@gekkokid.org.uk> wrote:
>>>
>>>
>>>      
>>>
>>>>please :)
>>>>----- Original Message -----
>>>>From: "Luke Nezda" <lnezda@gmail.com>
>>>>To: <java-user@lucene.apache.org>
>>>>Sent: Sunday, December 11, 2005 6:28 PM
>>>>Subject: Re: ApacheCon next week
>>>>
>>>>
>>>>Hello Grant-
>>>>Could you post the material you present (eg slides, handouts, etc) for
>>>>those
>>>>of us who cannot attend?
>>>>Thanks in advance,
>>>>-Luke
>>>>
>>>>On 12/9/05, Grant Ingersoll <gsingers@syr.edu> wrote:
>>>>
>>>>
>>>>        
>>>>
>>>>>Any one planning on going to ApacheCon next week?  I will be giving a
>>>>>talk on Lucene on Monday afternoon at 3pm on term vectors, span queries
>>>>>and some case studies from our work at CNLP with Lucene.
>>>>>
>>>>>Abstract for my talk can be found at
>>>>>http://www.apachecon.com/2005/US/html/sessions.html/e=MjAwNS9VUw#1400
>>>>>
>>>>>-Grant
>>>>>
>>>>>--
>>>>>-------------------------------------------------------------------
>>>>>Grant Ingersoll
>>>>>Sr. Software Engineer
>>>>>Center for Natural Language Processing
>>>>>Syracuse University
>>>>>School of Information Studies
>>>>>337 Hinds Hall
>>>>>Syracuse, NY 13244
>>>>>
>>>>>http://www.cnlp.org
>>>>>Voice:  315-443-5484
>>>>>Fax: 315-443-6886
>>>>>
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>---------------------------------------------------------------------
>>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>        
>>>>
>>>
>>>      
>>>
>>--
>>-------------------------------------------------------------------
>>Grant Ingersoll
>>Sr. Software Engineer
>>Center for Natural Language Processing
>>Syracuse University
>>School of Information Studies
>>337 Hinds Hall
>>Syracuse, NY 13244
>>
>>http://www.cnlp.org
>>Voice:  315-443-5484
>>Fax: 315-443-6886
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>  
>

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
337 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 17:41:13 2005
Return-Path: <java-user-return-17967-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36021 invoked from network); 13 Dec 2005 17:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 17:41:11 -0000
Received: (qmail 8483 invoked by uid 500); 13 Dec 2005 17:41:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8465 invoked by uid 500); 13 Dec 2005 17:41:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8454 invoked by uid 99); 13 Dec 2005 17:41:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 09:41:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dcliman@keepmedia.com designates 63.82.1.162 as permitted sender)
Received: from [63.82.1.162] (HELO mx1.keepmedia.com) (63.82.1.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 09:41:01 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx1.keepmedia.com (Postfix) with ESMTP id 8E13123347F
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 09:40:07 -0800 (PST)
Received: from mx1.keepmedia.com ([127.0.0.1])
 by localhost (lucky.corp.keepmedia.int [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 05611-01 for <java-user@lucene.apache.org>;
 Tue, 13 Dec 2005 09:40:07 -0800 (PST)
Received: from KEEP14 (unknown [192.168.1.114])
	by mx1.keepmedia.com (Postfix) with ESMTP id 6936D23347B
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 09:40:07 -0800 (PST)
From: "Dan Climan" <dcliman@keepmedia.com>
To: <java-user@lucene.apache.org>
Subject: Impact of Term Vectors (was ApacheCon next week)
Date: Tue, 13 Dec 2005 09:40:40 -0800
Organization: KeepMedia, Inc.
Message-ID: <001601c6000c$55cbb960$9601a8c0@corp.keepmedia.int>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
In-Reply-To: <50f433360512122108w289dc724h447ce30e143025d9@mail.gmail.com>
X-Virus-Scanned: by amavisd-new at keepmedia.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Good question. I was wondering about the impact of adding term vectors =
with
the various options. For example, is adding term vectors with both =
positions
and offsets a significant impact? Which current parts of lucene =
(including
contributions) take advantage of term vectors being present? I know that
Highlighter class can make use of them if present.

Dan

-----Original Message-----
From: Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com]=20
Sent: Monday, December 12, 2005 9:08 PM
To: java-user@lucene.apache.org
Subject: Re: ApacheCon next week

Well done, Grant.  Very informative.

Question on Term Vectors: with their inclusion in an index, have you =
noticed
any degradation in performance, either from a search effiiciency or
maintenance point-of-view?  Given the power of term vectors, if the perf
impact is negligible, I'm curious to the reasons why one would NOT =
include
term vectors in any and every index...

cheers,
j




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 18:07:30 2005
Return-Path: <java-user-return-17959-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61083 invoked from network); 13 Dec 2005 18:07:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 18:07:24 -0000
Received: (qmail 87300 invoked by uid 500); 13 Dec 2005 13:59:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87279 invoked by uid 500); 13 Dec 2005 13:59:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87263 invoked by uid 99); 13 Dec 2005 13:59:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 05:59:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 05:59:05 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2619813E201A; Tue, 13 Dec 2005 08:58:43 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id A202A13E2005
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 08:58:13 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <KINGlUQ9cAgjHXwKHvy00000fc3@King.Siti.com>
References: <KINGlUQ9cAgjHXwKHvy00000fc3@King.Siti.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9B251B94-4034-48EC-8673-03BFE1F7954B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: :how to add int fileds to lucene:
Date: Tue, 13 Dec 2005 08:58:13 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ravi,

A few great starting points... the code from http:// 
www.lucenebook.com (and it wouldn't hurt my feelings if you picked up  
a copy of the book itself too :), the examples from the many articles  
that have been written on Lucene, and last but not least, the unit  
tests of Lucene itself which is a great place to learn the API.

	Erik


On Dec 12, 2005, at 10:32 PM, Ravi wrote:

> Hi Erik
>
> Thanks for your solution. I want to do exactly what you have  
> mentioned in
> the mail . I would like to search on the fields what I have added  
> to lucene
> .That is search on  days and sort on those days value and moreover  
> how to
> add multiple field querys to lucene . I don't have any idea how to  
> Query on
> multiple fields .ex  searching on the candidate and days where days  
> >5 and
> candidate>10 or days >one month and so on.. Please give me the code  
> or let
> me know where I can find test programs so that I can complete my  
> project.
>
> Waiting for your reply....
>
> Thanks
> Ravi Kumar Jaladanki
> 408-328-6437
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, December 12, 2005 9:35 PM
> To: java-user@lucene.apache.org
> Subject: Re: :how to add int fileds to lucene:
>
>
> On Dec 12, 2005, at 8:10 AM, Ravi wrote:
>> I am trying to add some fields to lucene and I heard that adding
>> int values
>> are going to give much faster retrieval than adding to String
>> values. So I
>> want to add int values to document . But
>>
>>
>>
>> document.add(Field.Text("Candidate", objResultSet.getString
>> ("ROW_ID")));
>>
>> document.add(Field.Keyword("lastmodified",
>> objResultSet.getDate("MODIFIED_ON")));
>>
>> document.add(Field.Text("days",days) );
>>
>> document.add(Field.Text("contents", objReader));
>>
>>
>>
>>
>>
>> Days are int but it is giving error . Please suggest me with the
>> steps to
>> add and search those integer fields
>>
>
> All stored field data in a Lucene index are Strings.  The performance
> difference you may be referring to is with sorting results, not in
> retrieval.
>
> You will want to simply convert your int "days" into a String
> (Integer.toString(days) will do the trick.  Careful with your
> analyzer if you really do want days to be searchable/sortable.  Using
> Field.Keyword() is probably more appropriate.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 18:09:29 2005
Return-Path: <java-user-return-17968-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63454 invoked from network); 13 Dec 2005 18:09:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 18:09:27 -0000
Received: (qmail 81325 invoked by uid 500); 13 Dec 2005 18:09:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81209 invoked by uid 500); 13 Dec 2005 18:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81158 invoked by uid 99); 13 Dec 2005 18:09:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 10:09:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.48] (HELO mta08-winn.ispmail.ntl.com) (81.103.221.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 10:09:14 -0800
Received: from aamta10-winn.ispmail.ntl.com ([81.103.221.35])
          by mta08-winn.ispmail.ntl.com with ESMTP
          id <20051213180853.IDEQ17804.mta08-winn.ispmail.ntl.com@aamta10-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 18:08:53 +0000
Received: from jhi ([81.98.13.34]) by aamta10-winn.ispmail.ntl.com
          with SMTP
          id <20051213180852.NVKM11396.aamta10-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>;
          Tue, 13 Dec 2005 18:08:52 +0000
Message-ID: <001301c60010$45d1ec60$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <37C2EF59D00B03419D3BC161B1CBB6EE069706B1@Cov1MB1.becta.org.uk>
Subject: Re: Top n Searches
Date: Tue, 13 Dec 2005 18:08:49 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

would 'x y z' and 'y z x' be the same results? i didnt think that was the 
case

----- Original Message ----- 
From: "Paul Williams" <Paul.Williams@becta.org.uk>
To: <java-user@lucene.apache.org>
Sent: Tuesday, December 13, 2005 5:22 PM
Subject: RE: Top n Searches


That was the approach I was planning to take but I've been asked to
provide a more intelligent implementation.  Basically I need to count
search phrases like 'x y z' and 'y z x' as being the same.


-----Original Message-----
From: Cheolgoo Kang [mailto:appler@gmail.com]
Sent: 08 December 2005 08:51 am
To: java-user@lucene.apache.org
Subject: Re: Top n Searches

Hi,

You first save those search keywords entered by users into some kind
of storage like a database system or even into a dedicated Lucene
index. So it's a database and web issue, not a Lucene one.

And, as you know, Lucene does not provide this functionality out of the
box.

Good luck!

On 12/8/05, Paul Williams <Paul.Williams@becta.org.uk> wrote:
> Hi,
>
>
>
> I've been asked whether we can do a Top n Searches functionality where
> we record the most common searched for phrases on a daily basis.  I'm
> not sure where to start with this or even if this is feasible with
> Lucene.
>
>
>
> Anyone done anything similar?
>
>
>
> Cheers.
>
> Paul Williams.
>
>
>


--
Cheolgoo

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 19:52:08 2005
Return-Path: <java-user-return-17969-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41763 invoked from network); 13 Dec 2005 19:51:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 19:51:57 -0000
Received: (qmail 11995 invoked by uid 500); 13 Dec 2005 19:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11966 invoked by uid 500); 13 Dec 2005 19:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11955 invoked by uid 99); 13 Dec 2005 19:51:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 11:51:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 11:51:41 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A190D5B799; Tue, 13 Dec 2005 11:51:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9D9847F479
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 11:51:16 -0800 (PST)
Date: Tue, 13 Dec 2005 11:51:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: DistributingMultiFieldQueryParser and DisjunctionMaxQuery
In-Reply-To: <1134467086.7337.24.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.58.0512131147520.2080@hal.rescomp.berkeley.edu>
References: <43903645.6000705@getopt.org>  <200512032242.59982.paul.elschot@xs4all.nl>
 <4396B0B5.50901@getopt.org>  <200512112249.01961.paul.elschot@xs4all.nl>
 <439DFC5C.5030400@getopt.org>  <Pine.LNX.4.58.0512121524080.7533@hal.rescomp.berkeley.edu>
 <1134467086.7337.24.camel@localhost.localdomain>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: The DistributingMultiFieldQueryParser would correctly generate a query
: that would find fruit in one of the fields, but would only ensure that
: apples did not appear in one field, not not appear in all the fields,
: which was the behaviour I wanted. Hence negations didn't really work if
: the term appeared in more than one field.
:
: Has anyone else experienced this problem?

As i mentioned in the comments for LUCENE-323,
DistributingMultiFieldQueryParser seems to be more of a demo of what's
possible with DisjunctionMaxQuery -- not neccessarily a full fledged
QueryParser.  I think that's why it wasn't commited (even though
DisjunctionMaxQuery was), and the issue was left open.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 21:17:54 2005
Return-Path: <java-user-return-17970-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99370 invoked from network); 13 Dec 2005 21:17:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 21:17:51 -0000
Received: (qmail 77664 invoked by uid 500); 13 Dec 2005 21:17:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77630 invoked by uid 500); 13 Dec 2005 21:17:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77614 invoked by uid 99); 13 Dec 2005 21:17:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 13:17:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 13:17:38 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BF4B813E2005; Tue, 13 Dec 2005 16:17:16 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id ED20513E2005
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 16:16:52 -0500 (EST)
In-Reply-To: <001301c60010$45d1ec60$b900a8c0@jhi>
References: <37C2EF59D00B03419D3BC161B1CBB6EE069706B1@Cov1MB1.becta.org.uk> <001301c60010$45d1ec60$b900a8c0@jhi>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6AB2F3D5-E48C-4AC7-A0F7-B617FA9B7C91@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Top n Searches
Date: Tue, 13 Dec 2005 16:16:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It would be if the PhraseQuery (or SpanNearQuery) were used with some  
slop specified.

	Erik


On Dec 13, 2005, at 1:08 PM, gekkokid wrote:

> would 'x y z' and 'y z x' be the same results? i didnt think that  
> was the case
>
> ----- Original Message ----- From: "Paul Williams"  
> <Paul.Williams@becta.org.uk>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, December 13, 2005 5:22 PM
> Subject: RE: Top n Searches
>
>
> That was the approach I was planning to take but I've been asked to
> provide a more intelligent implementation.  Basically I need to count
> search phrases like 'x y z' and 'y z x' as being the same.
>
>
> -----Original Message-----
> From: Cheolgoo Kang [mailto:appler@gmail.com]
> Sent: 08 December 2005 08:51 am
> To: java-user@lucene.apache.org
> Subject: Re: Top n Searches
>
> Hi,
>
> You first save those search keywords entered by users into some kind
> of storage like a database system or even into a dedicated Lucene
> index. So it's a database and web issue, not a Lucene one.
>
> And, as you know, Lucene does not provide this functionality out of  
> the
> box.
>
> Good luck!
>
> On 12/8/05, Paul Williams <Paul.Williams@becta.org.uk> wrote:
>> Hi,
>>
>>
>>
>> I've been asked whether we can do a Top n Searches functionality  
>> where
>> we record the most common searched for phrases on a daily basis.  I'm
>> not sure where to start with this or even if this is feasible with
>> Lucene.
>>
>>
>>
>> Anyone done anything similar?
>>
>>
>>
>> Cheers.
>>
>> Paul Williams.
>>
>>
>>
>
>
> --
> Cheolgoo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 13 22:56:25 2005
Return-Path: <java-user-return-17971-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58972 invoked from network); 13 Dec 2005 22:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Dec 2005 22:56:25 -0000
Received: (qmail 59254 invoked by uid 500); 13 Dec 2005 22:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59232 invoked by uid 500); 13 Dec 2005 22:56:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59221 invoked by uid 99); 13 Dec 2005 22:56:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 14:56:17 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [165.212.64.32] (HELO cmsout02.mbox.net) (165.212.64.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 14:56:16 -0800
Received: from cmsout02.mbox.net (cmsout02.mbox.net [165.212.64.32])
	by cmsout02.mbox.net (Postfix) with ESMTP id BFDBC4CA1A
	for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 22:55:54 +0000 (GMT)
Received: from uadvg137.cms.usa.net [165.212.11.137] by cmsout02.mbox.net via smtad (C8.MAIN.3.27I); 
	Tue, 13 Dec 2005 22:55:54 GMT
X-USANET-Source: 165.212.11.137  IN   iragoldstein@usa.net uadvg137.cms.usa.net
X-USANET-MsgId: XID697JLmw432671X02
Received: from cmsweb09.cms.usa.net [165.212.8.9] by uadvg137.cms.usa.net
	(ASMTP/) via mtad (C8.MAIN.3.27E) 
	with ESMTP id 501JLmw420497M37; Tue, 13 Dec 2005 22:55:53 GMT
X-USANET-Auth: 165.212.8.9     AUTO iragoldstein@usa.net cmsweb09.cms.usa.net
Received: from 163.153.230.137 [163.153.230.137] by cmsweb09.cms.usa.net 
	(USANET web-mailer CM.0402.7.36); Tue, 13 Dec 2005 22:55:52 -0000
Date: Tue, 13 Dec 2005 17:55:52 -0500
From: Ira Goldstein <iragoldstein@usa.net>
To: <java-user@lucene.apache.org>, <java-user@lucene.apache.org>
Subject: Re: Impact of Term Vectors
X-Mailer: USANET web-mailer (CM.0402.7.36)
Mime-Version: 1.0
Message-ID: <361JLmw416048S09.1134514552@cmsweb09.cms.usa.net>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Z-USANET-MsgId: XID501JLmw420497X37
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We've run into an issue with the term vectors. When indexing a small corp=
us
(~3k docs, 1.3G) everything works fine, as it does with a small number of=

documents from TREC-6 (so we believe that our indexing code is ok).  Howe=
ver,
when we tried to index the full TREC-6 corpus (~300,000 docs, 2G) the ter=
m
vectors all seem to come back as null.  When the indexing process is goin=
g on,
we can see the .frq file being built so it appears as if the index routin=
e is
doing its thing.

Has anyone experienced anything similar?

Thanks in advance for any insight you can offer
--Ira Goldstein
  =


------ Original Message ------
Received: Tue, 13 Dec 2005 12:41:07 PM EST
From: "Dan Climan" <dcliman@keepmedia.com>
To: <java-user@lucene.apache.org>
Subject: Impact of Term Vectors (was ApacheCon next week)

> Good question. I was wondering about the impact of adding term vectors =
with
> the various options. For example, is adding term vectors with both
positions
> and offsets a significant impact? Which current parts of lucene (includ=
ing
> contributions) take advantage of term vectors being present? I know tha=
t
> Highlighter class can make use of them if present.
> =

> Dan
> =

> -----Original Message-----
> From: Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com] =

> Sent: Monday, December 12, 2005 9:08 PM
> To: java-user@lucene.apache.org
> Subject: Re: ApacheCon next week
> =

> Well done, Grant.  Very informative.
> =

> Question on Term Vectors: with their inclusion in an index, have you
noticed
> any degradation in performance, either from a search effiiciency or
> maintenance point-of-view?  Given the power of term vectors, if the per=
f
> impact is negligible, I'm curious to the reasons why one would NOT incl=
ude
> term vectors in any and every index...
> =

> cheers,
> j
> =

> =

> =

> =

> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> =

> =





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 02:33:56 2005
Return-Path: <java-user-return-17972-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84229 invoked from network); 14 Dec 2005 02:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 02:33:46 -0000
Received: (qmail 27008 invoked by uid 500); 14 Dec 2005 02:33:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26971 invoked by uid 500); 14 Dec 2005 02:33:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26960 invoked by uid 99); 14 Dec 2005 02:33:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 18:33:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.196 as permitted sender)
Received: from [64.233.184.196] (HELO wproxy.gmail.com) (64.233.184.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 13 Dec 2005 18:33:37 -0800
Received: by wproxy.gmail.com with SMTP id i14so292309wra
        for <java-user@lucene.apache.org>; Tue, 13 Dec 2005 18:33:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=omnrzfUW1DHr/6arQ64x8IrShIl1towrvAihun0sT4sLiHmij600D/O+OIIqRxygJIPnTTxvsnC7st3PAFvaJqpke296QPdBkd46JTb+2zHZfRSHkMsYovD0pLuM9+YfX6Ms5iFTGV4tvj1K1yI1e9mVCKYviwIx7ql5MttBW44=
Received: by 10.54.151.9 with SMTP id y9mr89642wrd;
        Tue, 13 Dec 2005 18:33:16 -0800 (PST)
Received: by 10.54.131.1 with HTTP; Tue, 13 Dec 2005 18:33:16 -0800 (PST)
Message-ID: <901c03930512131833o3f2bd7b5ia5183746ee36f96d@mail.gmail.com>
Date: Wed, 14 Dec 2005 10:33:16 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
In-Reply-To: <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	 <001c01c5f60d$5089c0e0$b900a8c0@jhi>
	 <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	 <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
	 <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/13/05, Dave Kor <davekor@gmail.com> wrote:
> On 12/13/05, Ian Soboroff <ian.soboroff@nist.gov> wrote:
> > Paul Libbrecht <paul@activemath.org> writes:
> >
> > > We're also thinking about implementing something similar to LSI withi=
n
> > > ActiveMath which is lucene-powered where both formulae and text
> > > searching would benefit of the latent-semantic-similarity. I've been
> > > refrained of doing "exactly this" at least since LSI is patented. Thi=
s
> > > might also be a reason why there's no implementation in Lucene's
> > > sandbox.
> > >
> > > Have you looked at other vector-based approaches which are not exactl=
y LSI ?
> > > Have you looked at InfoMap NLP ?
> >
> > Look for Thomas Hofmann's "probabilistic LSI", and other recent work
> > which cites it.
>
> You might also be interested in "Latent Dirichlet Allocation (LDA)" by
> David Blei. In short, it is a more advanced version of "probabilistic
> LSI". I am currently writing some code to dump Lucene documents into a
> file format used by Blei's LDA implementation written in C.

Following up on my previous mail about LDA, here are a few links

David Blei, Andrew Ng and Michael Jordan's paper on LDA
http://www.cs.berkeley.edu/~blei/papers/blei03a.pdf

David Blei's C implementation of LDA http://www.cs.berkeley.edu/~blei/lda-c=
/

Gregor Heinrich's port of LDA-c to Java http://www.arbylon.net/projects/
Note: To use his code in non-windows platform, you will need to
replace his fast Mersenne Twister based random number generator with
Java's standard random number generator.



Regards,
Dave.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 10:45:07 2005
Return-Path: <java-user-return-17973-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 500 invoked from network); 14 Dec 2005 10:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 10:45:06 -0000
Received: (qmail 85759 invoked by uid 500); 14 Dec 2005 10:44:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85716 invoked by uid 500); 14 Dec 2005 10:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85700 invoked by uid 99); 14 Dec 2005 10:44:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 02:44:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 02:44:57 -0800
Received: from [82.153.237.45] (helo=[192.168.1.132])
	by mail.runtime-collective.com with smtp (Exim 3.35 #1 (Debian))
	id 1EmU7d-0005D4-00
	for <java-user@lucene.apache.org>; Wed, 14 Dec 2005 10:44:33 +0000
Subject: Re: DistributingMultiFieldQueryParser and DisjunctionMaxQuery
From: Miles Barr <miles@runtime-collective.com>
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0512131147520.2080@hal.rescomp.berkeley.edu>
References: <43903645.6000705@getopt.org>
	 <200512032242.59982.paul.elschot@xs4all.nl> <4396B0B5.50901@getopt.org>
	 <200512112249.01961.paul.elschot@xs4all.nl> <439DFC5C.5030400@getopt.org>
	 <Pine.LNX.4.58.0512121524080.7533@hal.rescomp.berkeley.edu>
	 <1134467086.7337.24.camel@localhost.localdomain>
	 <Pine.LNX.4.58.0512131147520.2080@hal.rescomp.berkeley.edu>
Content-Type: text/plain
Organization: Runtime Collective Ltd.
Date: Wed, 14 Dec 2005 10:43:04 +0000
Message-Id: <1134556984.5985.46.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.2.3 
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Tue, 2005-12-13 at 11:51 -0800, Chris Hostetter wrote:
> As i mentioned in the comments for LUCENE-323,
> DistributingMultiFieldQueryParser seems to be more of a demo of what's
> possible with DisjunctionMaxQuery -- not neccessarily a full fledged
> QueryParser.  I think that's why it wasn't commited (even though
> DisjunctionMaxQuery was), and the issue was left open.

I just tested putting together a prohibited boolean query with a
DisjunctionMaxQuery programmatically rather than via the
DistributingMultiFieldQueryParser and it works fine. 


Thanks for the heads up.


Miles


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 11:13:32 2005
Return-Path: <java-user-return-17974-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15094 invoked from network); 14 Dec 2005 11:13:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 11:13:32 -0000
Received: (qmail 29382 invoked by uid 500); 14 Dec 2005 11:13:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29349 invoked by uid 500); 14 Dec 2005 11:13:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29338 invoked by uid 99); 14 Dec 2005 11:13:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 03:13:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 03:13:24 -0800
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id F3C011BB62
	for <java-user@lucene.apache.org>; Wed, 14 Dec 2005 12:12:52 +0100 (CET)
Message-ID: <439FFE34.1050205@fib.upc.edu>
Date: Wed, 14 Dec 2005 12:12:52 +0100
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: A simple question
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a simple question  I'm sure that have a simple response, but now 
I don't have any idea.

If I have something indexed and stored in the field TITLE ("Hello") and 
I search with Standard analyzer (Hello or hello or h*) in this field. 
Why don't obtain any hit?

PD: Excuseme if it's so obvious what now i'm don't have the solution. thks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 11:43:57 2005
Return-Path: <java-user-return-17975-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28246 invoked from network); 14 Dec 2005 11:43:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 11:43:57 -0000
Received: (qmail 63438 invoked by uid 500); 14 Dec 2005 11:43:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63412 invoked by uid 500); 14 Dec 2005 11:43:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63397 invoked by uid 99); 14 Dec 2005 11:43:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 03:43:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [83.247.21.91] (HELO wis.nl) (83.247.21.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 03:43:50 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: A simple question
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Wed, 14 Dec 2005 12:42:52 +0100
Message-ID: <50CA25BD6EEA954FA592C097399942E303081F40@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: A simple question
Thread-Index: AcYAn1WdJ6puzYF3RhSlN4yOQJ6ergAA5hMA
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Because you did not specify a field to search in, the search
"TITLE:Hello or TITLE:hello or TITLE:h*" will return more I guess. You
can specify a default field to search in via QueryParser.parse(query,
field, analyzer)

-----Original Message-----
From: Daniel Cortes [mailto:dcortes@fib.upc.edu]=20
Sent: Wednesday, December 14, 2005 12:13
To: java-user@lucene.apache.org
Subject: A simple question

I have a simple question  I'm sure that have a simple response, but now=20
I don't have any idea.

If I have something indexed and stored in the field TITLE ("Hello") and=20
I search with Standard analyzer (Hello or hello or h*) in this field.=20
Why don't obtain any hit?

PD: Excuseme if it's so obvious what now i'm don't have the solution.
thks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 11:50:39 2005
Return-Path: <java-user-return-17976-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31152 invoked from network); 14 Dec 2005 11:50:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 11:50:38 -0000
Received: (qmail 75135 invoked by uid 500); 14 Dec 2005 11:50:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75112 invoked by uid 500); 14 Dec 2005 11:50:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75100 invoked by uid 99); 14 Dec 2005 11:50:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 03:50:31 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.128.105.12] (HELO King.Siti.com) (209.128.105.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 03:50:28 -0800
Received: from ravij ([10.2.152.215]) by King.Siti.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 14 Dec 2005 03:37:17 -0800
From: "Ravi" <ravi.jaladanki@siti.com>
To: <java-user@lucene.apache.org>
Subject: Retriving  the data from lucene
Date: Wed, 14 Dec 2005 17:22:13 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Thread-Index: AcX/6503qUaECmRIRda5mHnekC85CQAtzTGQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <9B251B94-4034-48EC-8673-03BFE1F7954B@ehatchersolutions.com>
Message-ID: <KINGFRaqbC8wSA1XvpF0000000b@King.Siti.com>
X-OriginalArrivalTime: 14 Dec 2005 11:37:19.0484 (UTC) FILETIME=[BDC05BC0:01C600A2]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Erik,
I have already have the copy of the book and I am referencing  the book to
solve the problems .You have given very nice examples to solve the problems.
I am going on reading this book to solve my problems .

But I still have following problems . 

1) I want to store all the details of the my data in the lucene and I want
to retrieve from the lucene than storing in the database and retrieve that
from database .Is this technique is good or bad  or any other solution to
this type of  problem  Please suggest me.

2) I have one more problem is I want to retrieve the max 1000 docs from the
search. How can I solve this problem .

3) I want to display page by page max 100. 
	a) load all the data at a time and store in temp location and
display 			1-100 ,101-200 and so on.... 900-1000.
	b)  load only first 1-00 and whenever user clicks next 100 I want to
display next hundred by loading or searching again..
  I am not able to figure out how to get the details like this.. Could you
please help to solve this problem . Please I need to submit to my Seniors on
this weekend... I want to have really good solution which can not take much
time in terms of performance... I am waiting for your kind reply

Thanks
     Ravi 



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Tuesday, December 13, 2005 7:28 PM
To: java-user@lucene.apache.org
Subject: Re: :how to add int fileds to lucene:

Ravi,

A few great starting points... the code from http:// 
www.lucenebook.com (and it wouldn't hurt my feelings if you picked up  
a copy of the book itself too :), the examples from the many articles  
that have been written on Lucene, and last but not least, the unit  
tests of Lucene itself which is a great place to learn the API.

	Erik


On Dec 12, 2005, at 10:32 PM, Ravi wrote:

> Hi Erik
>
> Thanks for your solution. I want to do exactly what you have  
> mentioned in
> the mail . I would like to search on the fields what I have added  
> to lucene
> .That is search on  days and sort on those days value and moreover  
> how to
> add multiple field querys to lucene . I don't have any idea how to  
> Query on
> multiple fields .ex  searching on the candidate and days where days  
> >5 and
> candidate>10 or days >one month and so on.. Please give me the code  
> or let
> me know where I can find test programs so that I can complete my  
> project.
>
> Waiting for your reply....
>
> Thanks
> Ravi Kumar Jaladanki
> 408-328-6437
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, December 12, 2005 9:35 PM
> To: java-user@lucene.apache.org
> Subject: Re: :how to add int fileds to lucene:
>
>
> On Dec 12, 2005, at 8:10 AM, Ravi wrote:
>> I am trying to add some fields to lucene and I heard that adding
>> int values
>> are going to give much faster retrieval than adding to String
>> values. So I
>> want to add int values to document . But
>>
>>
>>
>> document.add(Field.Text("Candidate", objResultSet.getString
>> ("ROW_ID")));
>>
>> document.add(Field.Keyword("lastmodified",
>> objResultSet.getDate("MODIFIED_ON")));
>>
>> document.add(Field.Text("days",days) );
>>
>> document.add(Field.Text("contents", objReader));
>>
>>
>>
>>
>>
>> Days are int but it is giving error . Please suggest me with the
>> steps to
>> add and search those integer fields
>>
>
> All stored field data in a Lucene index are Strings.  The performance
> difference you may be referring to is with sorting results, not in
> retrieval.
>
> You will want to simply convert your int "days" into a String
> (Integer.toString(days) will do the trick.  Careful with your
> analyzer if you really do want days to be searchable/sortable.  Using
> Field.Keyword() is probably more appropriate.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 12:37:14 2005
Return-Path: <java-user-return-17977-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50506 invoked from network); 14 Dec 2005 12:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 12:37:14 -0000
Received: (qmail 33965 invoked by uid 500); 14 Dec 2005 12:37:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33934 invoked by uid 500); 14 Dec 2005 12:37:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33923 invoked by uid 99); 14 Dec 2005 12:37:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 04:37:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of adam.saltiel@gmail.com designates 66.249.82.204 as permitted sender)
Received: from [66.249.82.204] (HELO xproxy.gmail.com) (66.249.82.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 04:37:04 -0800
Received: by xproxy.gmail.com with SMTP id i28so70345wxd
        for <java-user@lucene.apache.org>; Wed, 14 Dec 2005 04:36:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LcAEBSa7m+p5APpszK9GT7v2isBKN1772CjxemcIl0A7lS+OreVFev81DNdytrEnsRebjIbkr0L72KSc8LuWzE05g8NvLQmx4blbLY6GZHJdRXByqb68Ut4SSVyKgdlfUX9B6bsthSyYHJ28gO9FadjOLiNPVfuJ/EV7pKu828M=
Received: by 10.70.12.11 with SMTP id 11mr817157wxl;
        Wed, 14 Dec 2005 04:36:43 -0800 (PST)
Received: by 10.70.24.10 with HTTP; Wed, 14 Dec 2005 04:36:43 -0800 (PST)
Message-ID: <e8aa138c0512140436v4d12dae3m@mail.gmail.com>
Date: Wed, 14 Dec 2005 12:36:43 +0000
From: adasal <adam.saltiel@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
In-Reply-To: <901c03930512131833o3f2bd7b5ia5183746ee36f96d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25853_32503206.1134563803928"
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	 <001c01c5f60d$5089c0e0$b900a8c0@jhi>
	 <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	 <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
	 <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
	 <901c03930512131833o3f2bd7b5ia5183746ee36f96d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_25853_32503206.1134563803928
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

VGhhbmtzIGZvciB0aGVzZSBoZWxwZnVsIGxpbmtzLgpBZGFtCgpPbiAxNC8xMi8wNSwgRGF2ZSBL
b3IgPGRhdmVrb3JAZ21haWwuY29tPiB3cm90ZToKPgo+IE9uIDEyLzEzLzA1LCBEYXZlIEtvciA8
ZGF2ZWtvckBnbWFpbC5jb20+IHdyb3RlOgo+ID4gT24gMTIvMTMvMDUsIElhbiBTb2Jvcm9mZiA8
aWFuLnNvYm9yb2ZmQG5pc3QuZ292PiB3cm90ZToKPiA+ID4gUGF1bCBMaWJicmVjaHQgPHBhdWxA
YWN0aXZlbWF0aC5vcmc+IHdyaXRlczoKPiA+ID4KPiA+ID4gPiBXZSdyZSBhbHNvIHRoaW5raW5n
IGFib3V0IGltcGxlbWVudGluZyBzb21ldGhpbmcgc2ltaWxhciB0byBMU0kKPiB3aXRoaW4KPiA+
ID4gPiBBY3RpdmVNYXRoIHdoaWNoIGlzIGx1Y2VuZS1wb3dlcmVkIHdoZXJlIGJvdGggZm9ybXVs
YWUgYW5kIHRleHQKPiA+ID4gPiBzZWFyY2hpbmcgd291bGQgYmVuZWZpdCBvZiB0aGUgbGF0ZW50
LXNlbWFudGljLXNpbWlsYXJpdHkuIEkndmUgYmVlbgo+ID4gPiA+IHJlZnJhaW5lZCBvZiBkb2lu
ZyAiZXhhY3RseSB0aGlzIiBhdCBsZWFzdCBzaW5jZSBMU0kgaXMgcGF0ZW50ZWQuCj4gVGhpcwo+
ID4gPiA+IG1pZ2h0IGFsc28gYmUgYSByZWFzb24gd2h5IHRoZXJlJ3Mgbm8gaW1wbGVtZW50YXRp
b24gaW4gTHVjZW5lJ3MKPiA+ID4gPiBzYW5kYm94Lgo+ID4gPiA+Cj4gPiA+ID4gSGF2ZSB5b3Ug
bG9va2VkIGF0IG90aGVyIHZlY3Rvci1iYXNlZCBhcHByb2FjaGVzIHdoaWNoIGFyZSBub3QKPiBl
eGFjdGx5IExTSSA/Cj4gPiA+ID4gSGF2ZSB5b3UgbG9va2VkIGF0IEluZm9NYXAgTkxQID8KPiA+
ID4KPiA+ID4gTG9vayBmb3IgVGhvbWFzIEhvZm1hbm4ncyAicHJvYmFiaWxpc3RpYyBMU0kiLCBh
bmQgb3RoZXIgcmVjZW50IHdvcmsKPiA+ID4gd2hpY2ggY2l0ZXMgaXQuCj4gPgo+ID4gWW91IG1p
Z2h0IGFsc28gYmUgaW50ZXJlc3RlZCBpbiAiTGF0ZW50IERpcmljaGxldCBBbGxvY2F0aW9uIChM
REEpIiBieQo+ID4gRGF2aWQgQmxlaS4gSW4gc2hvcnQsIGl0IGlzIGEgbW9yZSBhZHZhbmNlZCB2
ZXJzaW9uIG9mICJwcm9iYWJpbGlzdGljCj4gPiBMU0kiLiBJIGFtIGN1cnJlbnRseSB3cml0aW5n
IHNvbWUgY29kZSB0byBkdW1wIEx1Y2VuZSBkb2N1bWVudHMgaW50byBhCj4gPiBmaWxlIGZvcm1h
dCB1c2VkIGJ5IEJsZWkncyBMREEgaW1wbGVtZW50YXRpb24gd3JpdHRlbiBpbiBDLgo+Cj4gRm9s
bG93aW5nIHVwIG9uIG15IHByZXZpb3VzIG1haWwgYWJvdXQgTERBLCBoZXJlIGFyZSBhIGZldyBs
aW5rcwo+Cj4gRGF2aWQgQmxlaSwgQW5kcmV3IE5nIGFuZCBNaWNoYWVsIEpvcmRhbidzIHBhcGVy
IG9uIExEQQo+IGh0dHA6Ly93d3cuY3MuYmVya2VsZXkuZWR1L35ibGVpL3BhcGVycy9ibGVpMDNh
LnBkZgo+Cj4gRGF2aWQgQmxlaSdzIEMgaW1wbGVtZW50YXRpb24gb2YgTERBCj4gaHR0cDovL3d3
dy5jcy5iZXJrZWxleS5lZHUvfmJsZWkvbGRhLWMvCj4KPiBHcmVnb3IgSGVpbnJpY2gncyBwb3J0
IG9mIExEQS1jIHRvIEphdmEgaHR0cDovL3d3dy5hcmJ5bG9uLm5ldC9wcm9qZWN0cy8KPiBOb3Rl
OiBUbyB1c2UgaGlzIGNvZGUgaW4gbm9uLXdpbmRvd3MgcGxhdGZvcm0sIHlvdSB3aWxsIG5lZWQg
dG8KPiByZXBsYWNlIGhpcyBmYXN0IE1lcnNlbm5lIFR3aXN0ZXIgYmFzZWQgcmFuZG9tIG51bWJl
ciBnZW5lcmF0b3Igd2l0aAo+IEphdmEncyBzdGFuZGFyZCByYW5kb20gbnVtYmVyIGdlbmVyYXRv
ci4KPgo+Cj4KPiBSZWdhcmRzLAo+IERhdmUuCj4KPiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiBUbyB1bnN1YnNj
cmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5vcmcKPiBG
b3IgYWRkaXRpb25hbCBjb21tYW5kcywgZS1tYWlsOiBqYXZhLXVzZXItaGVscEBsdWNlbmUuYXBh
Y2hlLm9yZwo+Cj4K
------=_Part_25853_32503206.1134563803928--

From java-user-return-17978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 14:22:51 2005
Return-Path: <java-user-return-17978-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12969 invoked from network); 14 Dec 2005 14:22:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 14:22:51 -0000
Received: (qmail 89335 invoked by uid 500); 14 Dec 2005 14:22:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89091 invoked by uid 500); 14 Dec 2005 14:22:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88819 invoked by uid 99); 14 Dec 2005 14:22:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 06:22:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 06:22:36 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EABEC13E202A; Wed, 14 Dec 2005 09:22:14 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id E5DF613E2005
	for <java-user@lucene.apache.org>; Wed, 14 Dec 2005 09:21:55 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <KINGFRaqbC8wSA1XvpF0000000b@King.Siti.com>
References: <KINGFRaqbC8wSA1XvpF0000000b@King.Siti.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CD1E87F5-A63E-4B83-9D04-254E25F46B7B@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Retriving  the data from lucene
Date: Wed, 14 Dec 2005 09:21:56 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 14, 2005, at 6:52 AM, Ravi wrote:
> 1) I want to store all the details of the my data in the lucene and  
> I want
> to retrieve from the lucene than storing in the database and  
> retrieve that
> from database .Is this technique is good or bad  or any other  
> solution to
> this type of  problem  Please suggest me.

This is one of those areas where it really depends.  It's fine to  
store information in Lucene, but whether that is best for your  
scenario really depends on the rest of your architecture.

> 2) I have one more problem is I want to retrieve the max 1000 docs  
> from the
> search. How can I solve this problem .

Stop iterating Hits after 1000 :)   Or use one of the other .search  
methods that allows you to specify (though this is entering expert- 
level API area) or use a HitCollector.

> 3) I want to display page by page max 100.
> 	a) load all the data at a time and store in temp location and
> display 			1-100 ,101-200 and so on.... 900-1000.
> 	b)  load only first 1-00 and whenever user clicks next 100 I want to
> display next hundred by loading or searching again..


The first hit here gives you some best practices:

	http://www.lucenebook.com/search?query=paging

The main idea is simply to re-search for each page, just picking up  
the Hits iteration at the proper offset.  If that is not performant  
enough, then it'd be time to seek another solution, but I've never  
had to go there myself.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 15:49:26 2005
Return-Path: <java-user-return-17979-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59807 invoked from network); 14 Dec 2005 15:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 15:49:25 -0000
Received: (qmail 86588 invoked by uid 500); 14 Dec 2005 15:49:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86568 invoked by uid 500); 14 Dec 2005 15:49:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86557 invoked by uid 99); 14 Dec 2005 15:49:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 07:49:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [128.230.18.29] (HELO mailer.syr.edu) (128.230.18.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 07:48:59 -0800
Received: from [128.230.84.109] (istcnlpd9hb3r31.syr.edu) by mailer.syr.edu (LSMTP for Windows NT v1.1b) with SMTP id <0.14C770C4@mailer.syr.edu>; Wed, 14 Dec 2005 10:48:38 -0500
Message-ID: <43A03F50.5000803@syr.edu>
Date: Wed, 14 Dec 2005 10:50:40 -0500
From: Grant Ingersoll <gsingers@syr.edu>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Impact of Term Vectors
References: <361JLmw416048S09.1134514552@cmsweb09.cms.usa.net>
In-Reply-To: <361JLmw416048S09.1134514552@cmsweb09.cms.usa.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have successfully used term vectors for both the TREC English and 
Arabic collections.  Take a look at the code I posted at 
http://www.cnlp.org/apachecon2005 or Erik and Otis' book, "Lucene In 
Action", which both have good examples of term vectors.  Perhaps there 
is something with how you are creating your fields.



Ira Goldstein wrote:

>We've run into an issue with the term vectors. When indexing a small corpus
>(~3k docs, 1.3G) everything works fine, as it does with a small number of
>documents from TREC-6 (so we believe that our indexing code is ok).  However,
>when we tried to index the full TREC-6 corpus (~300,000 docs, 2G) the term
>vectors all seem to come back as null.  When the indexing process is going on,
>we can see the .frq file being built so it appears as if the index routine is
>doing its thing.
>
>Has anyone experienced anything similar?
>
>Thanks in advance for any insight you can offer
>--Ira Goldstein
>  
>
>------ Original Message ------
>Received: Tue, 13 Dec 2005 12:41:07 PM EST
>From: "Dan Climan" <dcliman@keepmedia.com>
>To: <java-user@lucene.apache.org>
>Subject: Impact of Term Vectors (was ApacheCon next week)
>
>  
>
>>Good question. I was wondering about the impact of adding term vectors with
>>the various options. For example, is adding term vectors with both
>>    
>>
>positions
>  
>
>>and offsets a significant impact? Which current parts of lucene (including
>>contributions) take advantage of term vectors being present? I know that
>>Highlighter class can make use of them if present.
>>
>>Dan
>>
>>-----Original Message-----
>>From: Jeff Rodenburg [mailto:jeff.rodenburg@gmail.com] 
>>Sent: Monday, December 12, 2005 9:08 PM
>>To: java-user@lucene.apache.org
>>Subject: Re: ApacheCon next week
>>
>>Well done, Grant.  Very informative.
>>
>>Question on Term Vectors: with their inclusion in an index, have you
>>    
>>
>noticed
>  
>
>>any degradation in performance, either from a search effiiciency or
>>maintenance point-of-view?  Given the power of term vectors, if the perf
>>impact is negligible, I'm curious to the reasons why one would NOT include
>>term vectors in any and every index...
>>
>>cheers,
>>j
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>

-- 
------------------------------------------------------------------- 
Grant Ingersoll 
Sr. Software Engineer 
Center for Natural Language Processing 
Syracuse University 
School of Information Studies 
337 Hinds Hall 
Syracuse, NY 13244 

http://www.cnlp.org 
Voice:  315-443-5484 
Fax: 315-443-6886 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 14 20:12:29 2005
Return-Path: <java-user-return-17980-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12902 invoked from network); 14 Dec 2005 20:12:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Dec 2005 20:12:29 -0000
Received: (qmail 11493 invoked by uid 500); 14 Dec 2005 20:12:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11479 invoked by uid 500); 14 Dec 2005 20:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 63668 invoked by uid 99); 14 Dec 2005 19:48:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of petedaly@gmail.com designates 64.233.162.206 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=A5aZIEXMzmTNpq/ggeYaxzCJpVBNKFM2uPBKxAnwCmNBChZt+lcAuBKf6jNfO/WQA60L6Qi/JwyDAB4DktSWsy+65pM2W6P+Uvk1ZPQA48XkntC/CxpWaZfeMdEXBX+fUFCsWBA+lnrqCtgeUd0TgbV2Mi6VHoDNp4srf9gv/UY=
Message-ID: <6f0a20e10512141148g10d4adb1wfdd837877572f8c6@mail.gmail.com>
Date: Wed, 14 Dec 2005 14:48:07 -0500
From: "Peter A. Daly" <petedaly@gmail.com>
Reply-To: petedaly@ix.netcom.com
To: java-user@lucene.apache.org
Subject: Re: Top n Searches
In-Reply-To: <001301c60010$45d1ec60$b900a8c0@jhi>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1333_23329033.1134589687890"
References: <37C2EF59D00B03419D3BC161B1CBB6EE069706B1@Cov1MB1.becta.org.uk>
	 <001301c60010$45d1ec60$b900a8c0@jhi>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1333_23329033.1134589687890
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Well, for x y z to match y z x you could split words out based on spaces
then sort them.  I'd save in both x y z and sorted order.  Use the sorted
order for the top 10 list ordering, but take the most common (x y z)
ordering of each set of terms for what to actually show to the user.

-Pete

On 12/13/05, gekkokid <me@gekkokid.org.uk> wrote:
>
> would 'x y z' and 'y z x' be the same results? i didnt think that was the
> case
>
> ----- Original Message -----
> From: "Paul Williams" <Paul.Williams@becta.org.uk>
> To: <java-user@lucene.apache.org>
> Sent: Tuesday, December 13, 2005 5:22 PM
> Subject: RE: Top n Searches
>
>
> That was the approach I was planning to take but I've been asked to
> provide a more intelligent implementation.  Basically I need to count
> search phrases like 'x y z' and 'y z x' as being the same.
>
>
> -----Original Message-----
> From: Cheolgoo Kang [mailto:appler@gmail.com]
> Sent: 08 December 2005 08:51 am
> To: java-user@lucene.apache.org
> Subject: Re: Top n Searches
>
> Hi,
>
> You first save those search keywords entered by users into some kind
> of storage like a database system or even into a dedicated Lucene
> index. So it's a database and web issue, not a Lucene one.
>
> And, as you know, Lucene does not provide this functionality out of the
> box.
>
> Good luck!
>
> On 12/8/05, Paul Williams <Paul.Williams@becta.org.uk> wrote:
> > Hi,
> >
> >
> >
> > I've been asked whether we can do a Top n Searches functionality where
> > we record the most common searched for phrases on a daily basis.  I'm
> > not sure where to start with this or even if this is feasible with
> > Lucene.
> >
> >
> >
> > Anyone done anything similar?
> >
> >
> >
> > Cheers.
> >
> > Paul Williams.
> >
> >
> >
>
>
> --
> Cheolgoo
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1333_23329033.1134589687890--

From java-user-return-17981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 01:02:57 2005
Return-Path: <java-user-return-17981-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67203 invoked from network); 15 Dec 2005 01:02:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 01:02:57 -0000
Received: (qmail 20548 invoked by uid 500); 15 Dec 2005 01:02:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20521 invoked by uid 500); 15 Dec 2005 01:02:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 46446 invoked by uid 99); 15 Dec 2005 00:05:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Message-ID: <43A0B30C.9060302@manawiz.com>
Date: Wed, 14 Dec 2005 14:04:28 -1000
From: Chuck Williams <chuck@manawiz.com>
Organization: Manawiz
User-Agent: Debian Thunderbird 1.0.7 (X11/20051017)
X-Accept-Language: en-us, en
Mime-Version: 1.0
Content-Type: multipart/mixed; boundary="=_ohana.manawiz.com-6375-1134605082-0001-2"
To: java-user@lucene.apache.org
Subject: Re: DistributingMultiFieldQueryParser and DisjunctionMaxQuery
References: <43903645.6000705@getopt.org>	 <200512032242.59982.paul.elschot@xs4all.nl> <4396B0B5.50901@getopt.org>	 <200512112249.01961.paul.elschot@xs4all.nl> <439DFC5C.5030400@getopt.org>	 <Pine.LNX.4.58.0512121524080.7533@hal.rescomp.berkeley.edu>	 <1134467086.7337.24.camel@localhost.localdomain>	 <Pine.LNX.4.58.0512131147520.2080@hal.rescomp.berkeley.edu> <1134556984.5985.46.camel@localhost.localdomain>
In-Reply-To: <1134556984.5985.46.camel@localhost.localdomain>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--=_ohana.manawiz.com-6375-1134605082-0001-2
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit


----- Original Message -----
*From:* Miles Barr <miles@runtime-collective.com>
*To:* java-user@lucene.apache.org
*Sent:* 12/14/2005 12:43:04 AM
*Subject:* DistributingMultiFieldQueryParser and DisjunctionMaxQuery


>On Tue, 2005-12-13 at 11:51 -0800, Chris Hostetter wrote:
>  
>
>>As i mentioned in the comments for LUCENE-323,
>>DistributingMultiFieldQueryParser seems to be more of a demo of what's
>>possible with DisjunctionMaxQuery -- not neccessarily a full fledged
>>QueryParser.  I think that's why it wasn't commited (even though
>>DisjunctionMaxQuery was), and the issue was left open.
>>    
>>
It is not intended to be a demo.  I use it for real and believe it is
complete and correct.  At the moment, it uses a QueryParser api that is
deprecated in the latest Lucene source, but it still works.  There are a
couple To Do's marked where it could be improved, but its current
behavior is acceptable.

>I've only had a quick play with it so this problem is probably down to
>my misuse of the class but I found that negations weren't handled
>properly. e.g.
>
>fruit AND -apples
>
>The DistributingMultiFieldQueryParser would correctly generate a query
>that would find fruit in one of the fields, but would only ensure that
>apples did not appear in one field, not not appear in all the fields,
>which was the behaviour I wanted. Hence negations didn't really work if
>the term appeared in more than one field.
>  
>
>
>I just tested putting together a prohibited boolean query with a
>DisjunctionMaxQuery programmatically rather than via the
>DistributingMultiFieldQueryParser and it works fine. 
>  
>
Would you mind submitting a test case that shows the problem as I cannot
replicate this?  E.g the attached test cases runs an equivalent query,
"fruit AND -plum" and works properly.  Negation should work fine in
general.  The transformation performed on BooleanQuery's is this:
  BooleanQuery (q1.occur1 ... qn.occurn) applied to fields (f1 ... fm)
==> ((q1 applied to f1...fm).occur1 ... ((qn applied to f1...fm).occurn))
So for MUST_NOT clauses, the NOT is scoped around the OR over the fields
and so the value can be found in no fields.

If there are bugs in DistributingMultiFieldQueryParser, I will be happy
to fix them.  If there is some specific reason it is not deemed suitable
to commit, please let me know.  It is much harder to use
DisjunctionMaxQuery without this parser.

FYI, here is the output I get from the attached test case (running my
version of DistributingMultiFieldQueryParser, which is also attached in
case it is different than what you have):

------------- Standard Output ---------------
Collection:
  uid:{doc1}    title:{fruit}    body:{apple, pear, plum}
  uid:{doc2}    title:{plum fruit}    body:{delicious ripe plum}
  uid:{doc3}    title:{fruit medley}    body:{peach, banana, pear, cherry}

testParse
  Query:{fruit AND -plum} ==> +(title:fruit^5.0 | body:fruit)~0.1
-(title:plum^5.0 | body:plum)~0.1

  title:{fruit medley}    body:{peach, banana, pear, cherry}

------------- ---------------- ---------------

Chuck


--=_ohana.manawiz.com-6375-1134605082-0001-2
Content-Type: text/x-java; name="DistributingMultiFieldQueryParser.java"; charset=iso-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="DistributingMultiFieldQueryParser.java"

/*
 * DistributingMultiFieldQueryParser.java
 *
 * Created on December 13, 2004, 11:32 AM
 */

package org.apache.lucene.queryParser;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.index.Term;
import org.apache.lucene.search.BooleanClause;
import org.apache.lucene.search.BooleanQuery;
import org.apache.lucene.search.FuzzyQuery;
import org.apache.lucene.search.DisjunctionMaxQuery;
import org.apache.lucene.search.MultiTermQuery;
import org.apache.lucene.search.PhraseQuery;
import org.apache.lucene.search.PrefixQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.RangeQuery;
import org.apache.lucene.search.TermQuery;
import org.apache.lucene.search.WildcardQuery;

/**
 * Version of MultiFieldQueryParser to work with DisjunctionMaxQuery.
 * Extracted from real app -- NOT COMPLETE as a Lucene QueryParser.
 * @author Williams
 */
public class DistributingMultiFieldQueryParser {
    
    /** The tieBreakerMultiplier used in the automatically generated DisjunctionMaxQuery's that search for a single term
     * in all of the default fields */
    public static float EXPANDED_FIELD_TIE_BREAKER = 0.1f;
    
    private static final String DEFAULT_FIELD = "DMFQP_DEFAULT";
    
    /** Parse a query to search multiple fields, using DEFAULT_OPERATOR_AND.
     * @param queryString the string containing the query in standard Lucene surface form
     * @param field the names of the fields that terms and phraes search by default
     * @param boosts the corresponding boosts to be placed on fields
     * @param analyzer the analyzer to use for lexical analysis of query
     * @return the parsed Query
     */
    public static Query parse(String queryString, String[] fields, float[] boosts, Analyzer analyzer) throws ParseException {
        return expandDefaultFields(QueryParser.parse(queryString, DEFAULT_FIELD, analyzer), fields, boosts);
    }
    
    /** Parse a query to search multiple fields, using DEFAULT_OPERATOR_AND.
     * @param queryString the string containing the query in standard Lucene surface form
     * @param field the names of the fields that terms and phraes search by default
     * @param boosts the corresponding boosts to be placed on fields
     * @param analyzer the analyzer to use for lexical analysis of query
     * @return the parsed Query
     */
    public static Query parseDefaultAnd(String queryString, String[] fields, float[] boosts, Analyzer analyzer) throws ParseException {
        QueryParser qp = new QueryParser(DEFAULT_FIELD, analyzer);
        qp.setDefaultOperator(QueryParser.AND_OPERATOR);
        return expandDefaultFields(qp.parse(queryString), fields, boosts);
    }
     
    /**
     * Rewrite query such that every query term that does not specify a field searches all of the specified fields.
     * @param query the parsed query prior to field expansion of unfielded terms
     * @param fields the fields across which terms with no explicit fields should search
     * @param boosts the respective boosts for fields, in 1-1 correspondence
     * @throws ParseException if we cannot interpret the query
     * @return a new Query in which the unfielded terms will search the fields with the corresponding boosts
     */
    public static Query expandDefaultFields(Query query, String[]fields, float[] boosts) throws ParseException {
        if (query instanceof TermQuery) {
            Term t = ((TermQuery) query).getTerm();
            if (t.field().equals(DEFAULT_FIELD)) {
                String text = t.text();
                DisjunctionMaxQuery mdq = new DisjunctionMaxQuery(EXPANDED_FIELD_TIE_BREAKER);
                mdq.setBoost(query.getBoost());
                for (int i = 0; i < fields.length; i++) {
                    TermQuery tq = new TermQuery(new Term(fields[i], text));
                    tq.setBoost(boosts[i]);
                    mdq.add(tq);
                }
                return mdq;
            }
            else return query;
        }
        else if (query instanceof PhraseQuery) {
            PhraseQuery pq = (PhraseQuery)query;
            Term[] terms = pq.getTerms();
            if (terms.length == 0) return query;    // No need to expand empty phrase!
            if (terms[0].field().equals(DEFAULT_FIELD)) {
                int slop = pq.getSlop();
                DisjunctionMaxQuery mdq = new DisjunctionMaxQuery(EXPANDED_FIELD_TIE_BREAKER);
                mdq.setBoost(query.getBoost());
                for (int i=0; i<fields.length; i++) {
                    PhraseQuery npq = new PhraseQuery();
                    npq.setBoost(boosts[i]);
                    npq.setSlop(slop);
                    for (int j=0; j<terms.length; j++) {
                        npq.add(new Term(fields[i], terms[j].text()));
                    }
                    mdq.add(npq);
                }
                return mdq;
            }
            else return query;
        }
        else if (query instanceof BooleanQuery) {
            BooleanClause[] clauses = ((BooleanQuery) query).getClauses();
            BooleanQuery bq = new BooleanQuery();
            bq.setBoost(query.getBoost());
            for (int i=0; i<clauses.length; i++)
                bq.add(expandDefaultFields(clauses[i].getQuery(), fields, boosts), clauses[i].getOccur());
            return bq;
        }
        else if (query instanceof RangeQuery) {
            if (((RangeQuery)query).getField().equals(DEFAULT_FIELD))
                throw new ParseException("Range queries are meaningless without specifying a range field:  " + query.toString());
            return query;
        }
        else if (query instanceof MultiTermQuery) { // WildcardQuery or FuzzyQuery
            // ***** TODO:  DisjunctionMaxQuery vs. BooleanQuery for expansion is not clear in this case.
            // Ideally would get the disjunction of terms, put those in BooleanQuery, and then use
            // DisjunctionMaxQuery on each term to expand the fields.
            Term t = ((MultiTermQuery) query).getTerm();
            if (t.field().equals(DEFAULT_FIELD)) {
                String text = t.text();
                DisjunctionMaxQuery mdq = new DisjunctionMaxQuery(EXPANDED_FIELD_TIE_BREAKER);
                mdq.setBoost(query.getBoost());
                for (int i = 0; i < fields.length; i++) {
                    Term nt = new Term(fields[i], text);
                    Query nq;
                    if (query instanceof WildcardQuery) nq = new WildcardQuery(nt);
                    else if (query instanceof FuzzyQuery) nq = new FuzzyQuery(nt);
                    else throw new ParseException("Unknown type of MultiTermQuery:  " + query.toString());
                    nq.setBoost(boosts[i]);
                    mdq.add(nq);
                }
                return mdq;
            }
            else return query;
        }
        else if (query instanceof PrefixQuery) {
            // ***** TODO: See comment for MultiTermQuery.  Same applies here.
            Term t = ((PrefixQuery) query).getPrefix();
            if (t.field().equals(DEFAULT_FIELD)) {
                String text = t.text();
                DisjunctionMaxQuery mdq = new DisjunctionMaxQuery(EXPANDED_FIELD_TIE_BREAKER);
                mdq.setBoost(query.getBoost());
                for (int i = 0; i < fields.length; i++) {
                    Term nt = new Term(fields[i], text);
                    Query nq = new PrefixQuery(nt);
                    nq.setBoost(boosts[i]);
                    mdq.add(nq);
                }
                return mdq;
            }
            else return query;            
        }
        /* None of DisjunctionMaxQuery, PhrasePrefixQuery nor FilteredQuery should be possible results of a query string parse. */
        else throw new ParseException("UNKNOWN type of query:  " + query.getClass() + " PRINTS AS " + query.toString());
    }
 
}

--=_ohana.manawiz.com-6375-1134605082-0001-2
Content-Type: text/x-java; name="DistributingMultiFieldQueryParserTest.java"; charset=iso-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="DistributingMultiFieldQueryParserTest.java"

/*
 * DistributingMultiFieldQueryParserTest.java
 * JUnit based test
 *
 * Created on December 14, 2005, 12:38 PM
 */

package org.apache.lucene.queryParser;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;
import junit.framework.*;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.document.Field.Index;
import org.apache.lucene.document.Field.Store;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.search.Hits;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;

/**
 *
 * @author chuck
 */
public class DistributingMultiFieldQueryParserTest extends TestCase {
    
    Directory index = new RAMDirectory();
    String[] defaultFields = {"title", "body"};
    float[] defaultBoosts = {5.0f, 1.0f};
    Analyzer analyzer = new StandardAnalyzer();
    
    public DistributingMultiFieldQueryParserTest(String testName) {
        super(testName);
    }

    protected void setUp() throws Exception {
        IndexWriter writer = new IndexWriter(index, analyzer, true);
        System.out.println("Collection:");
        writer.addDocument(createDoc("doc1", "fruit", "apple, pear, plum"));
        writer.addDocument(createDoc("doc2", "plum fruit", "delicious ripe plum"));
        writer.addDocument(createDoc("doc3", "fruit medley", "peach, banana, pear, cherry"));
        System.out.println();
        writer.close();
    }
    
    private Document createDoc(String uid, String title, String body) {
        Document doc = new Document();
        doc.add(new Field("uid", uid, Store.YES, Index.NO));
        doc.add(new Field("title", title, Store.YES, Index.TOKENIZED));
        doc.add(new Field("body", body, Store.YES, Index.TOKENIZED));
        System.out.println("  " + "uid:{" + uid + "}    title:{" + title + "}    body:{" + body + "}");
        return doc;
    }

    protected void tearDown() throws Exception {
        index.close();
    }

    public static Test suite() {
        TestSuite suite = new TestSuite(DistributingMultiFieldQueryParserTest.class);
        
        return suite;
    }

    /**
     * Test of parse method, of class org.apache.lucene.queryParser.DistributingMultiFieldQueryParser.
     */
    public void test() {
        System.out.println("testParse");
        
        try {
            IndexSearcher searcher = new IndexSearcher(index);
            String querystr1 = "fruit AND -plum";
            Query query1 = DistributingMultiFieldQueryParser.parse(querystr1, defaultFields, defaultBoosts, analyzer);
            System.out.println("  Query:{" + querystr1 + "} ==> " + query1);
            System.out.println();
            List<Document> results = query(searcher, query1);
            for (Document doc : results)
                System.out.println("  title:{" + doc.get("title") + "}    body:{" + doc.get("body") + "}");
            System.out.println();
            assertEquals(results.size(), 1);
            assertEquals(results.get(0).get("uid"), "doc3");

        } catch (Exception e) {
            System.out.println(e.getMessage());
            fail("Test caused exception");
        }
    }
    
    private List<Document> query(IndexSearcher searcher, Query query) throws ParseException, IOException {
        Hits hits = searcher.search(query);
        List<Document> results = new ArrayList<Document>();
        for (int i=0; i<hits.length(); i++)
            results.add(hits.doc(i));
        return results;    
    }
    
}


--=_ohana.manawiz.com-6375-1134605082-0001-2
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--=_ohana.manawiz.com-6375-1134605082-0001-2--

From java-user-return-17982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 03:06:18 2005
Return-Path: <java-user-return-17982-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14953 invoked from network); 15 Dec 2005 03:06:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 03:06:17 -0000
Received: (qmail 45892 invoked by uid 500); 15 Dec 2005 03:06:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45866 invoked by uid 500); 15 Dec 2005 03:06:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45855 invoked by uid 99); 15 Dec 2005 03:06:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 19:06:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.203 as permitted sender)
Received: from [64.233.162.203] (HELO zproxy.gmail.com) (64.233.162.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 14 Dec 2005 19:06:11 -0800
Received: by zproxy.gmail.com with SMTP id i1so309520nzh
        for <java-user@lucene.apache.org>; Wed, 14 Dec 2005 19:05:50 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LxM4HtmTs8LwsdG60WDH48ymCkMbXeva4kcnNWdFNgak1KX1gr60jD8yqGOYSo6biQkTq0T+7vwydTjPI1vcycMq6zY0L1/QpN90rfKyNHmXYBAyzEKaDHSYhu67a3ErUs9Tx57luYT1ekSs2YOT+mTH2VUgYeprtoVxOeklEpo=
Received: by 10.65.237.3 with SMTP id o3mr868959qbr;
        Wed, 14 Dec 2005 19:05:50 -0800 (PST)
Received: by 10.65.252.16 with HTTP; Wed, 14 Dec 2005 19:05:50 -0800 (PST)
Message-ID: <c68e39170512141905q223f5202t81ccc41a5f75e945@mail.gmail.com>
Date: Wed, 14 Dec 2005 22:05:50 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: DistributingMultiFieldQueryParser and DisjunctionMaxQuery
In-Reply-To: <43A0B30C.9060302@manawiz.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <43903645.6000705@getopt.org>
	 <200512032242.59982.paul.elschot@xs4all.nl>
	 <4396B0B5.50901@getopt.org>
	 <200512112249.01961.paul.elschot@xs4all.nl>
	 <439DFC5C.5030400@getopt.org>
	 <Pine.LNX.4.58.0512121524080.7533@hal.rescomp.berkeley.edu>
	 <1134467086.7337.24.camel@localhost.localdomain>
	 <Pine.LNX.4.58.0512131147520.2080@hal.rescomp.berkeley.edu>
	 <1134556984.5985.46.camel@localhost.localdomain>
	 <43A0B30C.9060302@manawiz.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/14/05, Chuck Williams <chuck@manawiz.com> wrote:
> If there is some specific reason it is not deemed suitable
> to commit, please let me know.  It is much harder to use
> DisjunctionMaxQuery without this parser.

Hey Chuck,
  I committed DisjunctionMaxQuery after I took the time to understand
it, and realized how much it was needed in certain scenarios.  I
haven't committed DistributingMultiFieldQueryParser because I honestly
haven't had a chance to look at it yet.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 10:41:57 2005
Return-Path: <java-user-return-17983-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95411 invoked from network); 15 Dec 2005 10:41:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 10:41:56 -0000
Received: (qmail 27171 invoked by uid 500); 15 Dec 2005 10:41:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26924 invoked by uid 500); 15 Dec 2005 10:41:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26913 invoked by uid 500); 15 Dec 2005 10:41:50 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 26910 invoked by uid 99); 15 Dec 2005 10:41:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 02:41:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.196 as permitted sender)
Received: from [64.233.182.196] (HELO nproxy.gmail.com) (64.233.182.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 02:41:48 -0800
Received: by nproxy.gmail.com with SMTP id c31so124066nfb
        for <lucene-user@jakarta.apache.org>; Thu, 15 Dec 2005 02:41:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=CH1Bl5S4ZtRDvHHjN3VVPYfpSuLmnpqt1/yLmn2YZTDeQjnm2DBor9HhT61OQBbfaCyQWjrFov80J7VbUH0kCzKiDMhKQFgMRSY/RxRHf51zQ36IJZsL4UYejgd39Vl41/E6zFh9cxnWBvglQkpa/3fDEwe24de17CqowXcqdrY=
Received: by 10.48.229.9 with SMTP id b9mr73418nfh;
        Thu, 15 Dec 2005 02:41:26 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Thu, 15 Dec 2005 02:41:26 -0800 (PST)
Message-ID: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
Date: Thu, 15 Dec 2005 11:41:26 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: all stop words in exact phrase get 0 hits
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 Hi,

Suppose I have a query like this:
+attachments:purpose
 that returns N hits.
If I add another condition
+attachments:purpose +attachments:"hello world"
I still get some hits, but if the words in the "hello world" phrase
happen to be all stop words I get 0 hits.

I can fix that by checking at least one of them is not a stop word,
but just wanted to know wether thats expected behaviour.


Im using lucene1.9rc.
thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 11:01:11 2005
Return-Path: <java-user-return-17984-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6168 invoked from network); 15 Dec 2005 11:01:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 11:01:09 -0000
Received: (qmail 43684 invoked by uid 500); 15 Dec 2005 11:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43534 invoked by uid 500); 15 Dec 2005 11:01:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43523 invoked by uid 99); 15 Dec 2005 11:01:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 03:01:02 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [170.61.18.52] (HELO mail2.pershing.com) (170.61.18.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 03:01:01 -0800
Received: from plzlmh02.pershing.com ([172.19.110.13])
          by mail2.pershing.com (Lotus Domino Release 6.5.3)
          with ESMTP id 2005121505561196-200899 ;
          Thu, 15 Dec 2005 05:56:11 -0500 
Subject: Shui Cheung Yip/JerseyCity/iNautix is out of the office.
From: syip@pershing.com
To: java-user@lucene.apache.org
Message-ID: <OF1351DF4F.FF3D6A29-ON852570D8.003C795B-852570D8.003C795B@pershing.com>
Date: Thu, 15 Dec 2005 06:00:32 -0500
MIME-Version: 1.0
X-MIMETrack: Serialize by Router on PLZLMH02/Pershing(Release 6.0.4|June 01, 2004) at 12/15/2005
 06:00:38 AM,
	Itemize by SMTP Server on Pershing2/External(Release 6.5.3|September 14, 2004) at
 12/15/2005 05:56:12 AM,
	Serialize by Router on Pershing2/External(Release 6.5.3|September 14, 2004) at
 12/15/2005 05:56:34 AM,
	Serialize complete at 12/15/2005 05:56:34 AM
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I will be out of the office starting  12/15/2005 and will not return until
12/21/2005.

 I will respond to your message when I return.
For NXP issues, please contact Kasi Reddy/Stephen Thomson,  For
Harrisdirect issues, please contact Dave Wong/Clifford Newland

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 11:20:41 2005
Return-Path: <java-user-return-17985-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15179 invoked from network); 15 Dec 2005 11:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 11:20:40 -0000
Received: (qmail 73179 invoked by uid 500); 15 Dec 2005 11:20:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73129 invoked by uid 500); 15 Dec 2005 11:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73115 invoked by uid 99); 15 Dec 2005 11:20:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 03:20:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [194.152.90.190] (HELO MCB003.Emerald.Net) (194.152.90.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 03:20:31 -0800
Subject: all stop words in exact phrase get 0 hits
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 15 Dec 2005 11:20:08 -0000
Message-ID: <C87DEB58860CD54890F6CA2E840DB2F3039EE25E@MCB004.Emerald.Net>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Content-Class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: all stop words in exact phrase get 0 hits
Thread-Index: AcYBZCxd6dNl65JZRL2pJOj63ty38gAApWIA
From: "Steve Gaunt" <SGaunt@emeraldinsight.com>
To: <java-user@lucene.apache.org>,
	"Lucene Users List" <lucene-user@jakarta.apache.org>
Cc: "Vijaya Nirmala" <VNirmala@emeraldinsight.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

When we do a search for=20
"The integration of ERP into a logistics curriculum: applying a systems"

We get an index out of bounds exception.

There is a bug within bugzilla that indicates this problem.
Bug number. 10052


However this bug states the fixes have been included within the latest
release, however, these changes are not within the latest binary
release. =20

WE've decompiled the Queryparser.class and the changes do not seem to
appear. =20

Does anyone know when this bug fix will be released??

Cheers

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 11:20:47 2005
Return-Path: <java-user-return-17986-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15245 invoked from network); 15 Dec 2005 11:20:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 11:20:47 -0000
Received: (qmail 73356 invoked by uid 500); 15 Dec 2005 11:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73157 invoked by uid 500); 15 Dec 2005 11:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73138 invoked by uid 500); 15 Dec 2005 11:20:33 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 73116 invoked by uid 99); 15 Dec 2005 11:20:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 03:20:32 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [194.152.90.190] (HELO MCB003.Emerald.Net) (194.152.90.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 03:20:31 -0800
Subject: all stop words in exact phrase get 0 hits
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 15 Dec 2005 11:20:08 -0000
Message-ID: <C87DEB58860CD54890F6CA2E840DB2F3039EE25E@MCB004.Emerald.Net>
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Content-Class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: all stop words in exact phrase get 0 hits
Thread-Index: AcYBZCxd6dNl65JZRL2pJOj63ty38gAApWIA
From: "Steve Gaunt" <SGaunt@emeraldinsight.com>
To: <java-user@lucene.apache.org>,
	"Lucene Users List" <lucene-user@jakarta.apache.org>
Cc: "Vijaya Nirmala" <VNirmala@emeraldinsight.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

When we do a search for=20
"The integration of ERP into a logistics curriculum: applying a systems"

We get an index out of bounds exception.

There is a bug within bugzilla that indicates this problem.
Bug number. 10052


However this bug states the fixes have been included within the latest
release, however, these changes are not within the latest binary
release. =20

WE've decompiled the Queryparser.class and the changes do not seem to
appear. =20

Does anyone know when this bug fix will be released??

Cheers

Steve


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 13:24:51 2005
Return-Path: <java-user-return-17987-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69741 invoked from network); 15 Dec 2005 13:24:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 13:24:47 -0000
Received: (qmail 5585 invoked by uid 500); 15 Dec 2005 13:24:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5563 invoked by uid 500); 15 Dec 2005 13:24:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5551 invoked by uid 99); 15 Dec 2005 13:24:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:24:39 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.h.funk@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:24:38 -0800
Received: by wproxy.gmail.com with SMTP id i21so339540wra
        for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 05:24:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=ErnGQdN+QvhvLRLEmQhOP/3F5VzVcZ6IwMKICNWUlDADHaOhYjLCQ1k6XCj4Xf9s8lXrR90ZOK+fCVJGL1zaHuZo+nlc7mUM8twukwc+QhVJzn+ndhqxVu8Wh3GPHz1+r2qcloHEUbk8nBbDVe/3iI8zSc5l8WLUI5+ShpLx7f4=
Received: by 10.54.122.19 with SMTP id u19mr2245101wrc;
        Thu, 15 Dec 2005 05:24:17 -0800 (PST)
Received: by 10.54.106.10 with HTTP; Thu, 15 Dec 2005 05:24:17 -0800 (PST)
Message-ID: <fb81d4720512150524i78fdd89aqb67623555033d71f@mail.gmail.com>
Date: Thu, 15 Dec 2005 13:24:17 +0000
From: Dan Funk <dan@danandtamara.com>
Sender: daniel.h.funk@gmail.com
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4317_25650392.1134653057458"
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4317_25650392.1134653057458
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

That is certainly the behaviour I would expect. The "+" means the term or
phrase is required - you are requiring words that are not stored in your
index.

Why don't remove the "+"?  Alternately you could run the search, and if no
matches are found, run it again without the second argument.  I've found
lucene to be fairly fast at finding 0 results.


On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
>
> Hi,
>
> Suppose I have a query like this:
> +attachments:purpose
> that returns N hits.
> If I add another condition
> +attachments:purpose +attachments:"hello world"
> I still get some hits, but if the words in the "hello world" phrase
> happen to be all stop words I get 0 hits.
>
> I can fix that by checking at least one of them is not a stop word,
> but just wanted to know wether thats expected behaviour.
>
>
> Im using lucene1.9rc.
> thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4317_25650392.1134653057458--

From java-user-return-17988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 13:36:31 2005
Return-Path: <java-user-return-17988-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75117 invoked from network); 15 Dec 2005 13:36:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 13:36:31 -0000
Received: (qmail 25735 invoked by uid 500); 15 Dec 2005 13:36:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25683 invoked by uid 500); 15 Dec 2005 13:36:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25652 invoked by uid 99); 15 Dec 2005 13:36:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:36:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.h.funk@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:36:23 -0800
Received: by wproxy.gmail.com with SMTP id i21so341649wra
        for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 05:36:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=Cb3O1Bnb6aogBThSy/pjBETgKPTxBbqAPhBWREp8aljUjkh3bk6QEXb7KQmPBUYL0bUB6XsPajAVfOuY5Pj6URWXhFtksqzP4PA+7T3fi2VX3/Qv22Wvl+1KhDceuvreDUiaV15jI6Nzw1nOGOgpJrKKKDy9eRRbwiCgsw53z6I=
Received: by 10.54.77.16 with SMTP id z16mr1193496wra;
        Thu, 15 Dec 2005 05:35:57 -0800 (PST)
Received: by 10.54.106.10 with HTTP; Thu, 15 Dec 2005 05:35:57 -0800 (PST)
Message-ID: <fb81d4720512150535t3c9150cnd7c2eeaf3ca72774@mail.gmail.com>
Date: Thu, 15 Dec 2005 13:35:57 +0000
From: Dan Funk <dan@danandtamara.com>
Sender: daniel.h.funk@gmail.com
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <C87DEB58860CD54890F6CA2E840DB2F3039EE25E@MCB004.Emerald.Net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4437_16935568.1134653757850"
References: <C87DEB58860CD54890F6CA2E840DB2F3039EE25E@MCB004.Emerald.Net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_4437_16935568.1134653757850
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

The latest binary "stable" release is 1.4.3.  Though not officially
released, Lucene 1.9 is available from the source code repository, and,
IMHO, is more than ready for day to day use.  You will need to check the
code out with subversion or cvs via the apache code repository and build it
your self. It's well worth the time.

I've wathed the list and there is no exact date on when the developers will
make an official release. Erik recently ventured the word "soon".

On 12/15/05, Steve Gaunt <SGaunt@emeraldinsight.com> wrote:
>
>
> Hi,
>
> When we do a search for
> "The integration of ERP into a logistics curriculum: applying a systems"
>
> We get an index out of bounds exception.
>
> There is a bug within bugzilla that indicates this problem.
> Bug number. 10052
>
>
> However this bug states the fixes have been included within the latest
> release, however, these changes are not within the latest binary
> release.
>
> WE've decompiled the Queryparser.class and the changes do not seem to
> appear.
>
> Does anyone know when this bug fix will be released??
>
> Cheers
>
> Steve
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4437_16935568.1134653757850--

From java-user-return-17989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 13:43:39 2005
Return-Path: <java-user-return-17989-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77850 invoked from network); 15 Dec 2005 13:43:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 13:43:39 -0000
Received: (qmail 43269 invoked by uid 500); 15 Dec 2005 13:43:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43248 invoked by uid 500); 15 Dec 2005 13:43:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43237 invoked by uid 500); 15 Dec 2005 13:43:31 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 43234 invoked by uid 99); 15 Dec 2005 13:43:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:43:31 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:43:30 -0800
Received: by zproxy.gmail.com with SMTP id s1so408450nze
        for <lucene-user@jakarta.apache.org>; Thu, 15 Dec 2005 05:43:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jCo/V7fcHbRKOsKHZbbaUXdti8hvF34cIiNLW6mMjCq4thl3OV0RRUgaoC1pcVsteJjqjXjg/T95CpvQG3srZ9V6U2cqoSxLVXUORZlY/d5Naw8fVnokdzuxFOh3F0pbfqs/7QP7SOhc1NalvQ1vweMXnwXuLs+jL5DJeSmgwdM=
Received: by 10.65.237.3 with SMTP id o3mr1027009qbr;
        Thu, 15 Dec 2005 05:43:09 -0800 (PST)
Received: by 10.65.252.16 with HTTP; Thu, 15 Dec 2005 05:43:09 -0800 (PST)
Message-ID: <c68e39170512150543n40309d19w5a12acb7cea9ddf8@mail.gmail.com>
Date: Thu, 15 Dec 2005 08:43:09 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are you using the same Analyzer for both indexing and querying (or the
same StopFilter at least)?

-Yonik

On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
>  Hi,
>
> Suppose I have a query like this:
> +attachments:purpose
>  that returns N hits.
> If I add another condition
> +attachments:purpose +attachments:"hello world"
> I still get some hits, but if the words in the "hello world" phrase
> happen to be all stop words I get 0 hits.
>
> I can fix that by checking at least one of them is not a stop word,
> but just wanted to know wether thats expected behaviour.
>
>
> Im using lucene1.9rc.
> thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 13:43:47 2005
Return-Path: <java-user-return-17990-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77934 invoked from network); 15 Dec 2005 13:43:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 13:43:46 -0000
Received: (qmail 43608 invoked by uid 500); 15 Dec 2005 13:43:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43566 invoked by uid 500); 15 Dec 2005 13:43:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43534 invoked by uid 99); 15 Dec 2005 13:43:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:43:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:43:30 -0800
Received: by zproxy.gmail.com with SMTP id i1so422165nzh
        for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 05:43:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jCo/V7fcHbRKOsKHZbbaUXdti8hvF34cIiNLW6mMjCq4thl3OV0RRUgaoC1pcVsteJjqjXjg/T95CpvQG3srZ9V6U2cqoSxLVXUORZlY/d5Naw8fVnokdzuxFOh3F0pbfqs/7QP7SOhc1NalvQ1vweMXnwXuLs+jL5DJeSmgwdM=
Received: by 10.65.237.3 with SMTP id o3mr1027009qbr;
        Thu, 15 Dec 2005 05:43:09 -0800 (PST)
Received: by 10.65.252.16 with HTTP; Thu, 15 Dec 2005 05:43:09 -0800 (PST)
Message-ID: <c68e39170512150543n40309d19w5a12acb7cea9ddf8@mail.gmail.com>
Date: Thu, 15 Dec 2005 08:43:09 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are you using the same Analyzer for both indexing and querying (or the
same StopFilter at least)?

-Yonik

On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
>  Hi,
>
> Suppose I have a query like this:
> +attachments:purpose
>  that returns N hits.
> If I add another condition
> +attachments:purpose +attachments:"hello world"
> I still get some hits, but if the words in the "hello world" phrase
> happen to be all stop words I get 0 hits.
>
> I can fix that by checking at least one of them is not a stop word,
> but just wanted to know wether thats expected behaviour.
>
>
> Im using lucene1.9rc.
> thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 13:58:36 2005
Return-Path: <java-user-return-17991-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88286 invoked from network); 15 Dec 2005 13:58:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 13:58:36 -0000
Received: (qmail 68356 invoked by uid 500); 15 Dec 2005 13:58:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68325 invoked by uid 500); 15 Dec 2005 13:58:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68286 invoked by uid 99); 15 Dec 2005 13:58:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:58:30 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [170.61.18.52] (HELO mail2.pershing.com) (170.61.18.52)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 05:58:29 -0800
Received: from plzlmh02.pershing.com ([172.19.110.13])
          by mail2.pershing.com (Lotus Domino Release 6.5.3)
          with ESMTP id 2005121508534059-202045 ;
          Thu, 15 Dec 2005 08:53:40 -0500 
Subject: Shui Cheung Yip/JerseyCity/iNautix is out of the office.
From: syip@pershing.com
To: java-user@lucene.apache.org
Message-ID: <OFF215CC0D.E58951C0-ON852570D8.004CB9B1-852570D8.004CB9B1@pershing.com>
Date: Thu, 15 Dec 2005 08:58:02 -0500
MIME-Version: 1.0
X-MIMETrack: Serialize by Router on PLZLMH02/Pershing(Release 6.0.4|June 01, 2004) at 12/15/2005
 08:58:07 AM,
	Itemize by SMTP Server on Pershing2/External(Release 6.5.3|September 14, 2004) at
 12/15/2005 08:53:40 AM,
	Serialize by Router on Pershing2/External(Release 6.5.3|September 14, 2004) at
 12/15/2005 08:54:01 AM,
	Serialize complete at 12/15/2005 08:54:01 AM
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I will be out of the office starting  12/15/2005 and will not return until
12/21/2005.

 I will respond to your message when I return.
For NXP issues, please contact Kasi Reddy/Stephen Thompson,  For
Harrisdirect issues, please contact Dave Wong/Clifford Newlands

Thank you.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 14:20:28 2005
Return-Path: <java-user-return-17992-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3137 invoked from network); 15 Dec 2005 14:20:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 14:20:28 -0000
Received: (qmail 4789 invoked by uid 500); 15 Dec 2005 14:20:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4764 invoked by uid 500); 15 Dec 2005 14:20:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4753 invoked by uid 99); 15 Dec 2005 14:20:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 06:20:21 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=HTML_FONT_FACE_BAD,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of richard.krenek@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 06:20:19 -0800
Received: by zproxy.gmail.com with SMTP id i28so399585nzi
        for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 06:19:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=TJmcxBf7sHytIO007XY+wYyMXve+ctDTK55XD4OShKGkm0gwede+FZmalQ6TLVlZd+srV1VyyKSilE4VVr0HdsBwv+U1jTWvsU3wrrpzREyUjUzlgcstT6GGcq39KZ+Mu/uQPtUHVZe5b7JBHprG7QlYwtVvRmFcKe3GfFh4Kcs=
Received: by 10.36.177.19 with SMTP id z19mr1857489nze;
        Thu, 15 Dec 2005 06:19:58 -0800 (PST)
Received: by 10.37.2.13 with HTTP; Thu, 15 Dec 2005 06:19:58 -0800 (PST)
Message-ID: <4ef6647e0512150619l1dad6527ucf803979cd398696@mail.gmail.com>
Date: Thu, 15 Dec 2005 07:19:58 -0700
From: Richard Krenek <richard.krenek@gmail.com>
To: java-user@lucene.apache.org
Subject: How does Lucene compare to Dieselpoint?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3883_3687779.1134656398826"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_3883_3687779.1134656398826
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello All,
   We've been using Lucene here and like it, but we've been asked to look
into another engine also (Dieselpoint). Has anyone used both Dieselpoint an=
d
Lucene. Any comments. We have a lot of documents (50 million+) each documen=
t
contains many small fields (maybe 100s). Important features we care about
are refinements and faceted navigation. Any comments would be great.

Thanks

------=_Part_3883_3687779.1134656398826--

From java-user-return-17993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 14:54:32 2005
Return-Path: <java-user-return-17993-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24044 invoked from network); 15 Dec 2005 14:54:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 14:54:28 -0000
Received: (qmail 44667 invoked by uid 500); 15 Dec 2005 14:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44648 invoked by uid 500); 15 Dec 2005 14:54:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44637 invoked by uid 99); 15 Dec 2005 14:54:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 06:54:20 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.80.167.228] (HELO correo.telemadrid.org) (212.80.167.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 06:54:14 -0800
Received: from tm1.telemadrid.org ([212.80.167.225])
          by correo.telemadrid.org (Lotus Domino Release 6.5.1)
          with ESMTP id 2005121515532230-27503 ;
          Thu, 15 Dec 2005 15:53:22 +0100 
Importance: Normal
X-Priority: 3 (Normal)
Subject: Re: all stop words in exact phrase get 0 hits
MIME-Version: 1.0
From: dblanch@telemadrid.es
To: java-user@lucene.apache.org
X-MIMETrack: MIME-CD by Notes Server on tm1/TELEMADRID(Release 6.5.1|January 21, 2004) at
 15/12/2005 15:58:04,
	MIME-CD complete at 15/12/2005 15:58:04,
	Serialize by Router on tm1/TELEMADRID(Release 6.5.1|January 21, 2004) at 15/12/2005
 15:58:09,
	Itemize by SMTP Server on CORREO/TELEMADRID(Release 6.5.1|January 21, 2004) at
 15/12/2005 15:53:22,
	Serialize by Router on CORREO/TELEMADRID(Release 6.5.1|January 21, 2004) at
 15/12/2005 15:53:45,
	Serialize complete at 15/12/2005 15:53:45
Date: Thu, 15 Dec 2005 15:58:04 +0100
Message-ID: <OFC369BA68.851E71EF-ONC12570D8.00523884-C12570D8.00523897@telemadrid.es>
Content-transfer-encoding: quoted-printable
Content-type: text/plain; charset=ISO-8859-1
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






With the '+' prefix you are saying that both clauses must be true, so
looking for stopwords will return false since it won't find any match=2E=

Regards,

Daniel

-----javier muguruza <jmuguruza@gmail=2Ecom> escribi=F3: -----


Para: Lucene Users List <lucene-user@jakarta=2Eapache=2Eorg>
De: javier muguruza <jmuguruza@gmail=2Ecom>
Fecha: 15/12/2005 11:41
Asunto: all stop words in exact phrase get 0 hits

Hi,

Suppose I have a query like this:
+attachments:purpose
that returns N hits=2E
If I add another condition
+attachments:purpose +attachments:"hello world"
I still get some hits, but if the words in the "hello world" phrase
happen to be all stop words I get 0 hits=2E

I can fix that by checking at least one of them is not a stop word,
but just wanted to know wether thats expected behaviour=2E


Im using lucene1=2E9rc=2E
thanks

---------------------------------------------------------------------
 To unsubscribe, e-mail: java-user-unsubscribe@lucene=2Eapache=2Eorg
For additional commands, e-mail: java-user-help@lucene=2Eapache=2Eorg=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 15:35:26 2005
Return-Path: <java-user-return-17994-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43765 invoked from network); 15 Dec 2005 15:35:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 15:35:25 -0000
Received: (qmail 24452 invoked by uid 500); 15 Dec 2005 15:35:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24430 invoked by uid 500); 15 Dec 2005 15:35:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24419 invoked by uid 99); 15 Dec 2005 15:35:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 07:35:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.194 as permitted sender)
Received: from [64.233.182.194] (HELO nproxy.gmail.com) (64.233.182.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 07:35:18 -0800
Received: by nproxy.gmail.com with SMTP id h2so138289nfe
        for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 07:34:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ValjDX825dnHrmnBFVcNZ0rEwcmVu4PkcijRnZwKmRWGMSXeBFdaOwFkXP/G6fhoV0ijzT7+AeiPH8rkPpWx0dO1LmUUHXO2/+/gBRQwoY6ig3RTTNonfSF7N7AAEfRncWqdc/5exdx5/MBOc0lmBjmRdpVyMxUbR3RUtoUCekc=
Received: by 10.48.127.10 with SMTP id z10mr88597nfc;
        Thu, 15 Dec 2005 07:34:55 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Thu, 15 Dec 2005 07:34:55 -0800 (PST)
Message-ID: <f071061b0512150734m31e13740we37394f14174ccf0@mail.gmail.com>
Date: Thu, 15 Dec 2005 16:34:55 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <c68e39170512150543n40309d19w5a12acb7cea9ddf8@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
	 <c68e39170512150543n40309d19w5a12acb7cea9ddf8@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thanks all,

Yes, I know + means it must be true, but the phrase goes through the
same analyzer, so stop words are removed....

I made some debugging and I got this:
Query query =3D QueryParser.parse(searchexp, "body", LuceneHelper.getAnalyz=
er());

If searchexp is
((+(body:"I have")) OR (+(attachments:"I have")))
query .toString() is
(+()) (+())

but if searchexp is
+body:"I have" OR +attachments:"I have"
query .toString() is blank

so that makes it work differently I think. I have lots of parenthesis
cause I build the string by code from multiple UI boxes etc, to make
sure ands and ors are properly handled.

As i said i can overcome that by code, but I think that is a bug no?
it shoudl realize (+()) (+()) its just parenthesis...

javier
On 12/15/05, Yonik Seeley <yseeley@gmail.com> wrote:
> Are you using the same Analyzer for both indexing and querying (or the
> same StopFilter at least)?
>
> -Yonik
>
> On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
> >  Hi,
> >
> > Suppose I have a query like this:
> > +attachments:purpose
> >  that returns N hits.
> > If I add another condition
> > +attachments:purpose +attachments:"hello world"
> > I still get some hits, but if the words in the "hello world" phrase
> > happen to be all stop words I get 0 hits.
> >
> > I can fix that by checking at least one of them is not a stop word,
> > but just wanted to know wether thats expected behaviour.
> >
> >
> > Im using lucene1.9rc.
> > thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 15:39:50 2005
Return-Path: <java-user-return-17995-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46175 invoked from network); 15 Dec 2005 15:39:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 15:39:44 -0000
Received: (qmail 39190 invoked by uid 500); 15 Dec 2005 15:39:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39119 invoked by uid 500); 15 Dec 2005 15:39:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39073 invoked by uid 99); 15 Dec 2005 15:39:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 07:39:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 07:39:16 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 26B6313E2005; Thu, 15 Dec 2005 10:38:49 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C797C13E2029
	for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 10:38:33 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <f071061b0512150734m31e13740we37394f14174ccf0@mail.gmail.com>
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com> <c68e39170512150543n40309d19w5a12acb7cea9ddf8@mail.gmail.com> <f071061b0512150734m31e13740we37394f14174ccf0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D6ABF59E-4516-41A5-BAE0-7D148AC1D01D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: all stop words in exact phrase get 0 hits
Date: Thu, 15 Dec 2005 10:38:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 15, 2005, at 10:34 AM, javier muguruza wrote:

> thanks all,
>
> Yes, I know + means it must be true, but the phrase goes through the
> same analyzer, so stop words are removed....
>
> I made some debugging and I got this:
> Query query = QueryParser.parse(searchexp, "body",  
> LuceneHelper.getAnalyzer());
>
> If searchexp is
> ((+(body:"I have")) OR (+(attachments:"I have")))
> query .toString() is
> (+()) (+())
>
> but if searchexp is
> +body:"I have" OR +attachments:"I have"
> query .toString() is blank
>
> so that makes it work differently I think. I have lots of parenthesis
> cause I build the string by code from multiple UI boxes etc, to make
> sure ands and ors are properly handled.

If you're building up a Query from a UI, I strongly recommend you do  
so using the API rather than QueryParser.  Pieces of the expression  
may make sense to be parsed, or just analyzed of course, but  
QueryParser adds complexity to the equation.  Using BooleanQuery with  
nested PhraseQuery's and such directly will provide a much cleaner  
Query and much less trouble.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 17:09:58 2005
Return-Path: <java-user-return-17996-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97124 invoked from network); 15 Dec 2005 17:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 17:09:58 -0000
Received: (qmail 24299 invoked by uid 500); 15 Dec 2005 17:09:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24106 invoked by uid 500); 15 Dec 2005 17:09:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24047 invoked by uid 99); 15 Dec 2005 17:09:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 09:09:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [83.247.21.91] (HELO wis.nl) (83.247.21.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 09:09:39 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6019A.3302FAE4"
Subject: usage of parallelreader
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Thu, 15 Dec 2005 18:08:41 +0100
Message-ID: <50CA25BD6EEA954FA592C097399942E303081F43@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: usage of parallelreader
Thread-Index: AcYBmhatuOn1vJcgRhqlQPYIRx8BoA==
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6019A.3302FAE4
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi all,

=20

Within our application it is possible for users to add reactions for
files. It is a requirement that a search returns a file if the query
matches the contents or a reaction. I think it would be best to use to
different indexes, one for the file and another one for the reactions.
Searching could then be done via ParallelReader. If I understand that
class correctly I have to ensure that the documents in the two indexes
stay in the same order. If I'm not mistaken, updating a document must
thus be done by first deleting the to-update document from both indexes,
and then adding it back to both indexes. If this is correct, then it
would be much easier to implement this scenario using one index and
maybe use the Document update contrib
<http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34629>  by Nicolas
Maisonneuve.=20

Could anyone please enlighten me?

=20

Daan


------_=_NextPart_001_01C6019A.3302FAE4--

From java-user-return-17997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 18:31:44 2005
Return-Path: <java-user-return-17997-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38713 invoked from network); 15 Dec 2005 18:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 18:31:44 -0000
Received: (qmail 80124 invoked by uid 500); 15 Dec 2005 18:31:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79969 invoked by uid 500); 15 Dec 2005 18:31:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79958 invoked by uid 99); 15 Dec 2005 18:31:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 10:31:37 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tucros3141@hotmail.com designates 65.54.174.27 as permitted sender)
Received: from [65.54.174.27] (HELO hotmail.com) (65.54.174.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 10:31:36 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 15 Dec 2005 10:31:16 -0800
Message-ID: <BAY103-F1734B821AF2CF4A94C982EC43B0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Thu, 15 Dec 2005 18:31:15 GMT
X-Originating-IP: [64.50.99.83]
X-Originating-Email: [tucros3141@hotmail.com]
X-Sender: tucros3141@hotmail.com
From: "chandler burgess" <tucros3141@hotmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader.open crashes JVM
Date: Thu, 15 Dec 2005 18:31:15 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 15 Dec 2005 18:31:16.0174 (UTC) FILETIME=[BBFC3EE0:01C601A5]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello, I have a 6GB index consisting of about 4M documents, each with 2 
fields. The index built fine and then I optimized it. Whenever I try to open 
the index, though, the jvm crashes saying it has run out of heap space. Even 
when I increase the heap size it just runs longer and then crashes. With a 
heap of 512M, it ran for about 2 minutes and then crashed.

Anyone have clues as to what could cause this? Also, does it usually take 
this long to open an index?

Im using lucene1.4.3 on a XP machine with jdk1.5. Any help is appreciated.

Chandler Burgess



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 20:14:14 2005
Return-Path: <java-user-return-17998-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81609 invoked from network); 15 Dec 2005 20:14:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 20:14:14 -0000
Received: (qmail 54625 invoked by uid 500); 15 Dec 2005 20:14:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54528 invoked by uid 500); 15 Dec 2005 20:14:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54517 invoked by uid 99); 15 Dec 2005 20:14:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 12:14:06 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.12.139] (HELO smtp802.mail.ukl.yahoo.com) (217.12.12.139)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Dec 2005 12:14:05 -0800
Received: (qmail 32036 invoked from network); 15 Dec 2005 20:13:44 -0000
Received: from unknown (HELO MALCOLM) (malcyclark@btinternet.com@86.132.232.196 with login)
  by smtp802.mail.ukl.yahoo.com with SMTP; 15 Dec 2005 20:13:43 -0000
Message-ID: <000d01c601b4$0b65a670$0201a8c0@MALCOLM>
From: "Malcolm Clark" <malcyclark@btinternet.com>
To: <java-user@lucene.apache.org>
References: <BAY103-F1734B821AF2CF4A94C982EC43B0@phx.gbl>
Subject: Re: IndexReader.open crashes JVM
Date: Thu, 15 Dec 2005 20:13:41 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2527
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
Maybe post some of the code which is giving you problems and people can view 
it and try and see what's wrong.
Cheers,
MC 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-17999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 20:45:49 2005
Return-Path: <java-user-return-17999-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99332 invoked from network); 15 Dec 2005 20:45:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 20:45:49 -0000
Received: (qmail 98738 invoked by uid 500); 15 Dec 2005 20:45:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98711 invoked by uid 500); 15 Dec 2005 20:45:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98700 invoked by uid 99); 15 Dec 2005 20:45:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 12:45:42 -0800
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of tucros3141@hotmail.com designates 65.54.174.33 as permitted sender)
Received: from [65.54.174.33] (HELO hotmail.com) (65.54.174.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 12:45:40 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 15 Dec 2005 12:45:20 -0800
Message-ID: <BAY103-F23D17BF6C7FD49F050A4D1C43B0@phx.gbl>
Received: from 65.54.174.200 by by103fd.bay103.hotmail.msn.com with HTTP;
	Thu, 15 Dec 2005 20:45:19 GMT
X-Originating-IP: [64.50.99.83]
X-Originating-Email: [tucros3141@hotmail.com]
X-Sender: tucros3141@hotmail.com
In-Reply-To: <000d01c601b4$0b65a670$0201a8c0@MALCOLM>
From: "chandler burgess" <tucros3141@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader.open crashes JVM
Date: Thu, 15 Dec 2005 20:45:19 +0000
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 15 Dec 2005 20:45:20.0334 (UTC) FILETIME=[76ADA6E0:01C601B8]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There isn't much to the code. The first line of main() literally just calls 
IndexReader.open() and it never gets past that line. Nothing fancy. I have 
one app that built the index, and this one just searches it. Do you think it 
could the fact that I optimized it?

If you really insist on seeing the code I can post it, but its really 
straightforward. Thanks
Chandler Burgess


>From: "Malcolm Clark" <malcyclark@btinternet.com>
>Reply-To: java-user@lucene.apache.org
>To: <java-user@lucene.apache.org>
>Subject: Re: IndexReader.open crashes JVM
>Date: Thu, 15 Dec 2005 20:13:41 -0000
>
>
>Hi,
>Maybe post some of the code which is giving you problems and people can 
>view it and try and see what's wrong.
>Cheers,
>MC
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 15 21:04:43 2005
Return-Path: <java-user-return-18000-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6358 invoked from network); 15 Dec 2005 21:04:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Dec 2005 21:04:42 -0000
Received: (qmail 19418 invoked by uid 500); 15 Dec 2005 21:04:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19277 invoked by uid 500); 15 Dec 2005 21:04:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19151 invoked by uid 99); 15 Dec 2005 21:04:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 13:04:10 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 13:04:08 -0800
Received: (qmail 55793 invoked by uid 89); 15 Dec 2005 21:03:47 -0000
Received: from unknown (HELO ?192.168.168.81?) (69.228.213.158)
  by londo.swishmail.com with SMTP; 15 Dec 2005 21:03:47 -0000
Message-ID: <43A1DA32.4000906@apache.org>
Date: Thu, 15 Dec 2005 13:03:46 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.7-1.1.fc3 (X11/20050929)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: IndexReader.open crashes JVM
References: <BAY103-F1734B821AF2CF4A94C982EC43B0@phx.gbl>
In-Reply-To: <BAY103-F1734B821AF2CF4A94C982EC43B0@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

chandler burgess wrote:
> Im using lucene1.4.3 on a XP machine with jdk1.5. Any help is appreciated.

Try typing control-break to get some stack dumps.  I also recommend 
building the current Lucene code from subversion and trying that.  There 
have been lots of improvements since 1.4.3.

It would be interesting to see a directory listing of your index, but I 
suspect it is in compound format (the default), which makes this rather 
uninformative.  If you build the current sources then you can list the 
contents of a compound-format index with IndexReader.main().  So another 
reason to try the new code!

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 01:17:26 2005
Return-Path: <java-user-return-18001-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93327 invoked from network); 16 Dec 2005 01:17:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 01:17:25 -0000
Received: (qmail 66842 invoked by uid 500); 16 Dec 2005 01:17:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66714 invoked by uid 500); 16 Dec 2005 01:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66703 invoked by uid 99); 16 Dec 2005 01:17:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 17:17:18 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 24.94.166.122 is neither permitted nor denied by domain of plateau@gmail.com)
Received: from [24.94.166.122] (HELO ms-smtp-02.rdc-kc.rr.com) (24.94.166.122)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 17:17:14 -0800
Received: from dillfrog.com (rrcs-67-52-213-7.west.biz.rr.com [67.52.213.7])
	by ms-smtp-02.rdc-kc.rr.com (8.12.10/8.12.7) with ESMTP id jBG1DXdu024733
	for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 19:13:34 -0600 (CST)
Received: by dillfrog.com (Postfix, from userid 513)
	id 089A1F9D9; Thu, 15 Dec 2005 19:16:51 -0600 (CST)
Received: from [192.168.0.107] (rrcs-67-52-213-51.west.biz.rr.com [67.52.213.51])
	by dillfrog.com (Postfix) with ESMTP id D89F4F9D7
	for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 19:16:47 -0600 (CST)
Mime-Version: 1.0 (Apple Message framework v746.2)
Content-Transfer-Encoding: 7bit
Message-Id: <3B9B3E0F-AC5D-43AC-BF45-4EB9EA9DD13A@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Mr Plate <plateau@gmail.com>
Subject: How to retrieve distinct field matches?
Date: Thu, 15 Dec 2005 19:16:45 -0600
X-Mailer: Apple Mail (2.746.2)
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This puzzle has been bugging me for a while; I'm hoping there's an  
elegant way to handle it in Lucene.

DATA DESCRIPTION:

I've got an index of over 100,000 Documents. In addition to other  
fields, each of these Documents has 0 or more "category" field  
values. There are over 5,500 such categories (it's not a small set).  
Anywhere from 1 to 500+ Documents could belong to a single  
"category". This index does not get updated very often; anywhere from  
once a day to once a month. Indexing time is currently 15-30 minutes  
from start to finish/optimization.


PROBLEM:

I'd like to provide users a way to search these "category" values.  
For example, suppose the user searches for "fiction". They might see  
results of:  { "fiction", "non-fiction" }. However, I'd like to do  
this search as quickly and efficiently as reasonable. For example, if  
there are 500 Documents of category "fiction", and 400 of "non- 
fiction", I don't want to Sort and iterate through each Hit to weed  
out the duplicate values from my query.

For what it's worth, I imagine only 0-20 categories would match a  
given query.


SIMPLEST SOLUTION I CAN THINK OF:

The best I can imagine is to maintain a separate Lucene index for  
each of these category types. Each Document in this separate index  
would probably have fields of "field_name", and "field_value", and  
would not contain any duplicates. For example, you might see a  
Document of field_name "category" and field_value "non-fiction". My  
query would hit this second index instead, to perform these metadata  
searches.


I hope that makes sense; do you know of a more elegant way to handle  
this type of problem?


Thanks,

Tyler

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 01:42:40 2005
Return-Path: <java-user-return-18002-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 600 invoked from network); 16 Dec 2005 01:42:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 01:42:39 -0000
Received: (qmail 4342 invoked by uid 500); 16 Dec 2005 01:42:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3416 invoked by uid 500); 16 Dec 2005 01:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3405 invoked by uid 99); 16 Dec 2005 01:42:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 17:42:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.198 as permitted sender)
Received: from [64.233.184.198] (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 17:42:33 -0800
Received: by wproxy.gmail.com with SMTP id i32so501749wra
        for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 17:42:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eymUcacdCb1Jg5pSkNGW7YU4xMWW6srYQHqiufeUu+soPo/W06RXGgt7nTv/11c+0CwchIoYql1cVXyDodV6U+Mhjp1Es1AcpKRDhOQwt8Xwm+omRm/kBJTaCYrdk+R3jppFoOa0OP2lpkEBj7HW+rwSxHr15W8bVb2hM3JWOEY=
Received: by 10.65.148.13 with SMTP id a13mr1676735qbo;
        Thu, 15 Dec 2005 17:42:13 -0800 (PST)
Received: by 10.65.95.17 with HTTP; Thu, 15 Dec 2005 17:42:13 -0800 (PST)
Message-ID: <6e3ae6310512151742m43487dco13f6fc01ab538b51@mail.gmail.com>
Date: Thu, 15 Dec 2005 17:42:13 -0800
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How does Lucene compare to Dieselpoint?
In-Reply-To: <4ef6647e0512150619l1dad6527ucf803979cd398696@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <4ef6647e0512150619l1dad6527ucf803979cd398696@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene is more like an engine, while Dieselpoint is more like a car.
AFAIK, Dieselpoint is doing database search, but not using Lucene.

You are welcome to try DBSight, which crawls database in a
customizable way and uses Lucene. You can set it up quickly and see if
Lucene fit your performance and functionality needs.

Chris Lu
---------------
http://www.dbsight.net
Lucene Search on Any Database

On 12/15/05, Richard Krenek <richard.krenek@gmail.com> wrote:
> Hello All,
>    We've been using Lucene here and like it, but we've been asked to look
> into another engine also (Dieselpoint). Has anyone used both Dieselpoint =
and
> Lucene. Any comments. We have a lot of documents (50 million+) each docum=
ent
> contains many small fields (maybe 100s). Important features we care about
> are refinements and faceted navigation. Any comments would be great.
>
> Thanks
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 02:03:38 2005
Return-Path: <java-user-return-18003-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6971 invoked from network); 16 Dec 2005 02:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 02:03:38 -0000
Received: (qmail 22099 invoked by uid 500); 16 Dec 2005 02:03:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22070 invoked by uid 500); 16 Dec 2005 02:03:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22059 invoked by uid 99); 16 Dec 2005 02:03:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 18:03:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.196 as permitted sender)
Received: from [205.158.62.196] (HELO ws6-1.us4.outblaze.com) (205.158.62.196)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 15 Dec 2005 18:03:29 -0800
Received: (qmail 31014 invoked from network); 16 Dec 2005 02:03:05 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@69.212.34.0)
  by ws6-1.us4.outblaze.com with SMTP; 16 Dec 2005 02:03:05 -0000
Message-ID: <43A2205A.8080904@curtin.com>
Date: Thu, 15 Dec 2005 21:03:06 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to retrieve distinct field matches?
References: <3B9B3E0F-AC5D-43AC-BF45-4EB9EA9DD13A@gmail.com>
In-Reply-To: <3B9B3E0F-AC5D-43AC-BF45-4EB9EA9DD13A@gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Mr Plate wrote:

> This puzzle has been bugging me for a while; I'm hoping there's an  
> elegant way to handle it in Lucene.
> 
> DATA DESCRIPTION:
> 
> I've got an index of over 100,000 Documents. In addition to other  
> fields, each of these Documents has 0 or more "category" field  values. 
> There are over 5,500 such categories (it's not a small set).  Anywhere 
> from 1 to 500+ Documents could belong to a single  "category". This 
> index does not get updated very often; anywhere from  once a day to once 
> a month. Indexing time is currently 15-30 minutes  from start to 
> finish/optimization.
> 
> 
> PROBLEM:
> 
> I'd like to provide users a way to search these "category" values.  For 
> example, suppose the user searches for "fiction". They might see  
> results of:  { "fiction", "non-fiction" }. However, I'd like to do  this 
> search as quickly and efficiently as reasonable. For example, if  there 
> are 500 Documents of category "fiction", and 400 of "non- fiction", I 
> don't want to Sort and iterate through each Hit to weed  out the 
> duplicate values from my query.
> 
> For what it's worth, I imagine only 0-20 categories would match a  given 
> query.
> 
> 
> SIMPLEST SOLUTION I CAN THINK OF:
> 
> The best I can imagine is to maintain a separate Lucene index for  each 
> of these category types. Each Document in this separate index  would 
> probably have fields of "field_name", and "field_value", and  would not 
> contain any duplicates. For example, you might see a  Document of 
> field_name "category" and field_value "non-fiction". My  query would hit 
> this second index instead, to perform these metadata  searches.
> 
> 
> I hope that makes sense; do you know of a more elegant way to handle  
> this type of problem?

I'm guessing that each Document doesn't have a "category" field with 
multiple values in it but, instead, has a uniquely-named field for each 
category.  Would it work to change your data model to the former?  That 
is, have a Text field named "category" in each document, so that it gets 
tokenized and indexed.  Then you could do a search of the 5K category 
names (outside of Lucene, perhaps by getting the list of Terms from the 
"category" field) for the query term of interest, "fiction" in your 
example, then compose a Lucene query with the results.  Your example 
would produce a query equivalent to 'category:fiction 
category:non-fiction'.  For only 100K documents, this should be pretty fast.

Good luck!

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 04:53:55 2005
Return-Path: <java-user-return-18004-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69609 invoked from network); 16 Dec 2005 04:53:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 04:53:54 -0000
Received: (qmail 87577 invoked by uid 500); 16 Dec 2005 04:53:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87495 invoked by uid 500); 16 Dec 2005 04:53:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87422 invoked by uid 99); 16 Dec 2005 04:53:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 20:53:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of plateau@gmail.com designates 66.249.82.200 as permitted sender)
Received: from [66.249.82.200] (HELO xproxy.gmail.com) (66.249.82.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 15 Dec 2005 20:53:27 -0800
Received: by xproxy.gmail.com with SMTP id i28so388930wxd
        for <java-user@lucene.apache.org>; Thu, 15 Dec 2005 20:53:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bweASAqV0RPE3Jf2m8g6U3t7vG4m5yTmFuvSURDja52LFS84zZi8wvu7XsseTb8PWIVy605Ck0NsERdc79T5gsVh+UImeA83BoF2PfldA58qoYkux97n55XUeIFZh/DmKoObCz1AG8uzQLtIbbKLsorb8ZFmWL8w42QX0j2dXPM=
Received: by 10.70.7.10 with SMTP id 10mr372211wxg;
        Thu, 15 Dec 2005 20:53:06 -0800 (PST)
Received: by 10.70.83.9 with HTTP; Thu, 15 Dec 2005 20:53:06 -0800 (PST)
Message-ID: <a23af33b0512152053x1feeab75v1a34913509d6a265@mail.gmail.com>
Date: Thu, 15 Dec 2005 22:53:06 -0600
From: Plat <plateau@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: How to retrieve distinct field matches?
In-Reply-To: <43A2205A.8080904@curtin.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <3B9B3E0F-AC5D-43AC-BF45-4EB9EA9DD13A@gmail.com>
	 <43A2205A.8080904@curtin.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ahh, interesting point, though I'm afraid it solves a different
problem than my intentions. Re-reading this, I think I've described my
problem in a very obscure way. Sorry :-/.


Basically, pretend I do a regular search for "category:fiction". After
stemming/etc, this would match any Document with a category of
"fiction", "non-fiction", "fictitious", etc. All 900+ of them.

BUT as far as the results are concerned, I'm not actually interested
in each Document that was hit, nor about any other field besides the
"category" field. I just want a list of the unique categories that
matched the search string of "fiction".

In this example, my ultimate goal would be a String[] of:

     { "fiction", "fictitious", "non-fiction" }

... without any costly iterations of all 900+ Hit Documents' category value=
s of:

     { "fiction", "non-fiction", "fiction", "fiction", "fiction",
"fictitious", "non-fiction", ... }

Again, I want to find a *unique* list of "category" field values that
match certain query text.

I know this can be done using a second index, but wanted to be sure
there isn't an obvious, less-hacky way first. I'm used to Lucene
surprising me with sneaky efficiencies.

Thanks for the valiant effort to make sense of me! :)

Tyler

On 12/15/05, Michael D. Curtin <mike@curtin.com> wrote:
> Mr Plate wrote:
>
> > This puzzle has been bugging me for a while; I'm hoping there's an
> > elegant way to handle it in Lucene.
> >
> > DATA DESCRIPTION:
> >
> > I've got an index of over 100,000 Documents. In addition to other
> > fields, each of these Documents has 0 or more "category" field  values.
> > There are over 5,500 such categories (it's not a small set).  Anywhere
> > from 1 to 500+ Documents could belong to a single  "category". This
> > index does not get updated very often; anywhere from  once a day to onc=
e
> > a month. Indexing time is currently 15-30 minutes  from start to
> > finish/optimization.
> >
> >
> > PROBLEM:
> >
> > I'd like to provide users a way to search these "category" values.  For
> > example, suppose the user searches for "fiction". They might see
> > results of:  { "fiction", "non-fiction" }. However, I'd like to do  thi=
s
> > search as quickly and efficiently as reasonable. For example, if  there
> > are 500 Documents of category "fiction", and 400 of "non- fiction", I
> > don't want to Sort and iterate through each Hit to weed  out the
> > duplicate values from my query.
> >
> > For what it's worth, I imagine only 0-20 categories would match a  give=
n
> > query.
> >
> >
> > SIMPLEST SOLUTION I CAN THINK OF:
> >
> > The best I can imagine is to maintain a separate Lucene index for  each
> > of these category types. Each Document in this separate index  would
> > probably have fields of "field_name", and "field_value", and  would not
> > contain any duplicates. For example, you might see a  Document of
> > field_name "category" and field_value "non-fiction". My  query would hi=
t
> > this second index instead, to perform these metadata  searches.
> >
> >
> > I hope that makes sense; do you know of a more elegant way to handle
> > this type of problem?
>
> I'm guessing that each Document doesn't have a "category" field with
> multiple values in it but, instead, has a uniquely-named field for each
> category.  Would it work to change your data model to the former?  That
> is, have a Text field named "category" in each document, so that it gets
> tokenized and indexed.  Then you could do a search of the 5K category
> names (outside of Lucene, perhaps by getting the list of Terms from the
> "category" field) for the query term of interest, "fiction" in your
> example, then compose a Lucene query with the results.  Your example
> would produce a query equivalent to 'category:fiction
> category:non-fiction'.  For only 100K documents, this should be pretty fa=
st.
>
> Good luck!
>
> --MDC
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 08:56:50 2005
Return-Path: <java-user-return-18005-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83149 invoked from network); 16 Dec 2005 08:56:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 08:56:37 -0000
Received: (qmail 17519 invoked by uid 500); 16 Dec 2005 08:56:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17408 invoked by uid 500); 16 Dec 2005 08:56:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17306 invoked by uid 99); 16 Dec 2005 08:56:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 00:56:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 00:56:07 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D06B613E2005; Fri, 16 Dec 2005 03:55:46 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 5B35913E2029
	for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 03:55:33 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <3B9B3E0F-AC5D-43AC-BF45-4EB9EA9DD13A@gmail.com>
References: <3B9B3E0F-AC5D-43AC-BF45-4EB9EA9DD13A@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D1FECA91-7D5F-43A8-8110-9C78CBCBBA68@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to retrieve distinct field matches?
Date: Fri, 16 Dec 2005 03:55:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is pretty much the same problem that many of us have faced when  
it comes to faceted browsing.  I'm using a set of cached BitSet's  
that represent the documents that have a specific category (or  
general "facet" in my case).  I do a full-text search for "some query  
expression", using QueryFilter to get the BitSet for the query.  Then  
I AND the Hits BitSet with each of the facet BitSet's, and the  
cardinality of each gives me the number in each category that matches  
the query.  I load up these BitSet's when my search server is  
launched.  In my case I'm currently dealing with about 30k documents,  
with maybe 100 unique facet values, and these load in the blink of an  
eye.

I realize the above description was void of code specifics, but the  
gist is there.  Hope it helps.

	Erik



On Dec 15, 2005, at 8:16 PM, Mr Plate wrote:

> This puzzle has been bugging me for a while; I'm hoping there's an  
> elegant way to handle it in Lucene.
>
> DATA DESCRIPTION:
>
> I've got an index of over 100,000 Documents. In addition to other  
> fields, each of these Documents has 0 or more "category" field  
> values. There are over 5,500 such categories (it's not a small  
> set). Anywhere from 1 to 500+ Documents could belong to a single  
> "category". This index does not get updated very often; anywhere  
> from once a day to once a month. Indexing time is currently 15-30  
> minutes from start to finish/optimization.
>
>
> PROBLEM:
>
> I'd like to provide users a way to search these "category" values.  
> For example, suppose the user searches for "fiction". They might  
> see results of:  { "fiction", "non-fiction" }. However, I'd like to  
> do this search as quickly and efficiently as reasonable. For  
> example, if there are 500 Documents of category "fiction", and 400  
> of "non-fiction", I don't want to Sort and iterate through each Hit  
> to weed out the duplicate values from my query.
>
> For what it's worth, I imagine only 0-20 categories would match a  
> given query.
>
>
> SIMPLEST SOLUTION I CAN THINK OF:
>
> The best I can imagine is to maintain a separate Lucene index for  
> each of these category types. Each Document in this separate index  
> would probably have fields of "field_name", and "field_value", and  
> would not contain any duplicates. For example, you might see a  
> Document of field_name "category" and field_value "non-fiction". My  
> query would hit this second index instead, to perform these  
> metadata searches.
>
>
> I hope that makes sense; do you know of a more elegant way to  
> handle this type of problem?
>
>
> Thanks,
>
> Tyler
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 08:56:58 2005
Return-Path: <java-user-return-18006-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83321 invoked from network); 16 Dec 2005 08:56:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 08:56:54 -0000
Received: (qmail 20832 invoked by uid 500); 16 Dec 2005 08:56:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20806 invoked by uid 500); 16 Dec 2005 08:56:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20794 invoked by uid 99); 16 Dec 2005 08:56:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 00:56:45 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.245.231.211] (HELO mail117.messagelabs.com) (195.245.231.211)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Dec 2005 00:56:44 -0800
X-VirusChecked: Checked
X-Env-Sender: SGaunt@emeraldinsight.com
X-Msg-Ref: server-4.tower-117.messagelabs.com!1134723380!19789037!1
X-StarScan-Version: 5.5.9.1; banners=emeraldinsight.com,-,-
X-Originating-IP: [194.152.90.190]
Received: (qmail 22764 invoked from network); 16 Dec 2005 08:56:20 -0000
Received: from unknown (HELO MCB004.Emerald.Net) (194.152.90.190)
  by server-4.tower-117.messagelabs.com with SMTP; 16 Dec 2005 08:56:20 -0000
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C6021E.9540DEAE"
Subject: lucene arrayIndexOutOfBoundesException
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
Date: Fri, 16 Dec 2005 08:56:20 -0000
Message-ID: <C87DEB58860CD54890F6CA2E840DB2F3039EE478@MCB004.Emerald.Net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene arrayIndexOutOfBoundesException
Thread-Index: AcYCHpTYnDJADjRpSR2cNNXqpd4pag==
From: "Steve Gaunt" <SGaunt@emeraldinsight.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C6021E.9540DEAE
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

Hi,

=20

We=20have=20an=20index=20of=20around=20100,000=20documents.

=20

When=20we=20do=20a=20search=20for

"The=20integration=20of=20ERP=20into=20a=20logistics=20curriculum:=20apply=
ing=20a=20systems"

=20

We=20get=20an=20index=20out=20of=20bounds=20exception.

=20

There=20is=20a=20bug=20within=20bugzilla=20that=20indicates=20this=20probl=
em.

Bug=20number.=2010052

=20

=20

However=20this=20bug=20states=20the=20fixes=20have=20been=20included=20wit=
hin=20the=20latest
release,=20however,=20these=20changes=20are=20not=20within=20the=20latest=20=
binary
release.=20=20

=20

WE've=20decompiled=20the=20Queryparser.class=20and=20the=20changes=20do=20=
not=20seem=20to
appear.=20=20

=20

Does=20anyone=20know=20when=20this=20bug=20fix=20will=20be=20released??

=20

Cheers

=20

Steve

=20

=20


______________________________________________________________________
This=20email=20has=20been=20scanned=20by=20the=20MessageLabs=20Email=20Sec=
urity=20System.
For=20more=20information=20please=20visit=20http://www.messagelabs.com/ema=
il=20
______________________________________________________________________
------_=_NextPart_001_01C6021E.9540DEAE--

From java-user-return-18007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 09:03:53 2005
Return-Path: <java-user-return-18007-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87010 invoked from network); 16 Dec 2005 09:03:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 09:03:52 -0000
Received: (qmail 28480 invoked by uid 500); 16 Dec 2005 09:03:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28299 invoked by uid 500); 16 Dec 2005 09:03:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28287 invoked by uid 99); 16 Dec 2005 09:03:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 01:03:44 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 01:03:43 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2370313E2029; Fri, 16 Dec 2005 04:03:21 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 686D913E202A
	for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 04:03:13 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <C87DEB58860CD54890F6CA2E840DB2F3039EE478@MCB004.Emerald.Net>
References: <C87DEB58860CD54890F6CA2E840DB2F3039EE478@MCB004.Emerald.Net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <98E3853C-C736-4D8C-90A7-6B080D8B1884@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene arrayIndexOutOfBoundesException
Date: Fri, 16 Dec 2005 04:03:12 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Steve,

Have you tried the trunk version of Lucene to ensure it fixes the  
issue you've encountered?   That would be helpful information.

	Erik


On Dec 16, 2005, at 3:56 AM, Steve Gaunt wrote:

>
>
> Hi,
>
>
>
> We have an index of around 100,000 documents.
>
>
>
> When we do a search for
>
> "The integration of ERP into a logistics curriculum: applying a  
> systems"
>
>
>
> We get an index out of bounds exception.
>
>
>
> There is a bug within bugzilla that indicates this problem.
>
> Bug number. 10052
>
>
>
>
>
> However this bug states the fixes have been included within the latest
> release, however, these changes are not within the latest binary
> release.
>
>
>
> WE've decompiled the Queryparser.class and the changes do not seem to
> appear.
>
>
>
> Does anyone know when this bug fix will be released??
>
>
>
> Cheers
>
>
>
> Steve
>
>
>
>
>
>
> ______________________________________________________________________
> This email has been scanned by the MessageLabs Email Security System.
> For more information please visit http://www.messagelabs.com/email
> ______________________________________________________________________


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 09:20:56 2005
Return-Path: <java-user-return-18008-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96509 invoked from network); 16 Dec 2005 09:20:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 09:20:55 -0000
Received: (qmail 63784 invoked by uid 500); 16 Dec 2005 09:20:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63751 invoked by uid 500); 16 Dec 2005 09:20:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63740 invoked by uid 500); 16 Dec 2005 09:20:48 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 63737 invoked by uid 99); 16 Dec 2005 09:20:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 01:20:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.6.251.69] (HELO heuft.com) (217.6.251.69)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Dec 2005 01:20:47 -0800
Received: (qmail 23241 invoked by uid 504); 16 Dec 2005 09:20:23 -0000
Received: from unknown (HELO TFEW02) (172.17.0.26)
  by 0 with SMTP; 16 Dec 2005 09:20:21 -0000
Message-ID: <022a01c60221$f06f2530$1a0011ac@TFEW02>
From: "Guenter Kukies" <Guenter.Kukies@heuft.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Directory implementation on JAR's
Date: Fri, 16 Dec 2005 10:20:21 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0227_01C6022A.522A6570"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1106
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
X-Virus-Scanned: by AMaViS 0.3.12 with Virus Scan for Linux v4.16.0 and DAILYDAT
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0227_01C6022A.522A6570
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

does anybody have an solution for writing/reading an index from a =
JAR-Archive like 'JARDirectory'.  I need to create an Index on a box =
transfere the index to another and use it there.

G=FCnter
------=_NextPart_000_0227_01C6022A.522A6570--


From java-user-return-18009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 09:31:41 2005
Return-Path: <java-user-return-18009-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 856 invoked from network); 16 Dec 2005 09:31:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 09:31:41 -0000
Received: (qmail 76734 invoked by uid 500); 16 Dec 2005 09:31:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76711 invoked by uid 500); 16 Dec 2005 09:31:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76700 invoked by uid 99); 16 Dec 2005 09:31:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 01:31:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 01:31:33 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 72B7813E2005; Fri, 16 Dec 2005 04:31:12 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 9956813E2005
	for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 04:31:04 -0500 (EST)
In-Reply-To: <022a01c60221$f06f2530$1a0011ac@TFEW02>
References: <022a01c60221$f06f2530$1a0011ac@TFEW02>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <69883C8A-0635-486B-A9C7-1A3DAE1F0B32@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Directory implementation on JAR's
Date: Fri, 16 Dec 2005 04:31:05 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you need to transfer an index from one machine to another all you =20
need to do is move the index directory (by zipping it if you want).  =20
There isn't a need to put an index in a JAR just for transfer purposes.

There has been some work on a ZipDirectory (or JARDirectory?, not =20
sure what it was called exactly) that you might find in the =20
archives.  I don't think it was ever fully polished though.

	Erik


On Dec 16, 2005, at 4:20 AM, Guenter Kukies wrote:

> Hi,
>
> does anybody have an solution for writing/reading an index from a =20
> JAR-Archive like 'JARDirectory'.  I need to create an Index on a =20
> box transfere the index to another and use it there.
>
> G=FCnter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 15:58:59 2005
Return-Path: <java-user-return-18010-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82450 invoked from network); 16 Dec 2005 15:58:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 15:58:59 -0000
Received: (qmail 9242 invoked by uid 500); 16 Dec 2005 15:58:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9221 invoked by uid 500); 16 Dec 2005 15:58:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9210 invoked by uid 99); 16 Dec 2005 15:58:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 07:58:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.199 as permitted sender)
Received: from [205.158.62.199] (HELO ws6-3.us4.outblaze.com) (205.158.62.199)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 16 Dec 2005 07:58:48 -0800
Received: (qmail 28854 invoked from network); 16 Dec 2005 15:58:21 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@69.212.34.0)
  by ws6-3.us4.outblaze.com with SMTP; 16 Dec 2005 15:58:21 -0000
Message-ID: <43A2E41E.5040402@curtin.com>
Date: Fri, 16 Dec 2005 10:58:22 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to retrieve distinct field matches?
References: <3B9B3E0F-AC5D-43AC-BF45-4EB9EA9DD13A@gmail.com>	 <43A2205A.8080904@curtin.com> <a23af33b0512152053x1feeab75v1a34913509d6a265@mail.gmail.com>
In-Reply-To: <a23af33b0512152053x1feeab75v1a34913509d6a265@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Plat wrote:

> Basically, pretend I do a regular search for "category:fiction". After
> stemming/etc, this would match any Document with a category of
> "fiction", "non-fiction", "fictitious", etc. All 900+ of them.
> 
> BUT as far as the results are concerned, I'm not actually interested
> in each Document that was hit, nor about any other field besides the
> "category" field. I just want a list of the unique categories that
> matched the search string of "fiction".
> ...
> Again, I want to find a *unique* list of "category" field values that
> match certain query text.
> 
> I know this can be done using a second index, but wanted to be sure
> there isn't an obvious, less-hacky way first. I'm used to Lucene
> surprising me with sneaky efficiencies.

Ah, yes, I misunderstood what you are trying to do.  How about doing a 
simple string search (like String.indexOf) on the contents of a TermEnum 
from IndexReader.terms()?  Since you've only got a few thousand distinct 
values, that should be pretty fast.

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 18:47:11 2005
Return-Path: <java-user-return-18011-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62092 invoked from network); 16 Dec 2005 18:47:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 18:47:11 -0000
Received: (qmail 30826 invoked by uid 500); 16 Dec 2005 18:46:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30716 invoked by uid 500); 16 Dec 2005 18:46:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30675 invoked by uid 99); 16 Dec 2005 18:46:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 10:46:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 10:46:50 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A5AD55B77B; Fri, 16 Dec 2005 10:46:26 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 9DEAD7F459
	for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 10:46:26 -0800 (PST)
Date: Fri, 16 Dec 2005 10:46:26 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: How does Lucene compare to Dieselpoint?
In-Reply-To: <4ef6647e0512150619l1dad6527ucf803979cd398696@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0512161021260.20181@hal.rescomp.berkeley.edu>
References: <4ef6647e0512150619l1dad6527ucf803979cd398696@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


:    We've been using Lucene here and like it, but we've been asked to look
: into another engine also (Dieselpoint). Has anyone used both Dieselpoint and
: Lucene. Any comments. We have a lot of documents (50 million+) each document
: contains many small fields (maybe 100s). Important features we care about
: are refinements and faceted navigation. Any comments would be great.

As Chris Lu mentioned, lucene is a library for building applications, and
Dieselpoint is an application.  When I test drove the Dieselpoint demo a
while back, I got the impression that I could build everythign in
Dieselpoint using Lucene -- but I wasn't convinced Dieselpoint capable of
everything I could build with Lucene

In the end, it comes down to priorities:

  1) Do you want an out of hte box solution with a fixed fature set that
     you pay money for?
  2) Do you want a library that you can use to build your own
     applications?

Incidently, if you haven't tried out Dieselpoints free downloadable demo
version, I suggest you give it a shot.  They've definitely made it easy to
use.  It comes with a sample application for a ficticous company, and
their admin interface makes it trivial to create you own index, and then
slurp files on your local box or crawl a site and then do searches against
it.  Alas: there doesn't seem to be any way to do faceted filtering from
the admin screen -- but i think they give you all the code you need to try
writting your own applicaiton to use your new index...

	http://www.dieselpoint.com/login.jsp



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 20:41:04 2005
Return-Path: <java-user-return-18013-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15464 invoked from network); 16 Dec 2005 20:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 20:41:03 -0000
Received: (qmail 38669 invoked by uid 500); 16 Dec 2005 20:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38588 invoked by uid 500); 16 Dec 2005 20:40:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38575 invoked by uid 99); 16 Dec 2005 20:40:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 12:40:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO zproxy.gmail.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 12:40:48 -0800
Received: by zproxy.gmail.com with SMTP id i28so748471nzi
        for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 12:40:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=S9DKvJwRLQjAY5oA0PeBgBDARFNIxr33XjGcHrQubUaUx1thdLKRJR0ym+gzUG4gGncXZID4vtC+PFoMcAdG+ZmWkCDdvelhv7kze+DlsDd/0/sB8Qgz+BGhrO1ss3eqz51fN9beycGwXvhS09qMTHxb2nUDBSsCb3H3cE5UL9o=
Received: by 10.65.103.8 with SMTP id f8mr180161qbm;
        Fri, 16 Dec 2005 12:40:27 -0800 (PST)
Received: by 10.65.252.16 with HTTP; Fri, 16 Dec 2005 12:40:27 -0800 (PST)
Message-ID: <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
Date: Fri, 16 Dec 2005 15:40:27 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can't reproduce this behavior with the current version of Lucene.

+text:solar  =3D> 112 docs
+text:"a a a" =3D> 0 docs because a is a stop word
+text"solar" +text:"a a a" =3D> 112 docs

-Yonik


On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
>  Hi,
>
> Suppose I have a query like this:
> +attachments:purpose
>  that returns N hits.
> If I add another condition
> +attachments:purpose +attachments:"hello world"
> I still get some hits, but if the words in the "hello world" phrase
> happen to be all stop words I get 0 hits.
>
> I can fix that by checking at least one of them is not a stop word,
> but just wanted to know wether thats expected behaviour.
>
>
> Im using lucene1.9rc.
> thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 20:41:04 2005
Return-Path: <java-user-return-18012-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15458 invoked from network); 16 Dec 2005 20:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 20:41:03 -0000
Received: (qmail 38617 invoked by uid 500); 16 Dec 2005 20:40:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38576 invoked by uid 500); 16 Dec 2005 20:40:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38564 invoked by uid 500); 16 Dec 2005 20:40:49 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 38561 invoked by uid 99); 16 Dec 2005 20:40:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 12:40:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO zproxy.gmail.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 12:40:48 -0800
Received: by zproxy.gmail.com with SMTP id 8so701898nzo
        for <lucene-user@jakarta.apache.org>; Fri, 16 Dec 2005 12:40:28 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=S9DKvJwRLQjAY5oA0PeBgBDARFNIxr33XjGcHrQubUaUx1thdLKRJR0ym+gzUG4gGncXZID4vtC+PFoMcAdG+ZmWkCDdvelhv7kze+DlsDd/0/sB8Qgz+BGhrO1ss3eqz51fN9beycGwXvhS09qMTHxb2nUDBSsCb3H3cE5UL9o=
Received: by 10.65.103.8 with SMTP id f8mr180161qbm;
        Fri, 16 Dec 2005 12:40:27 -0800 (PST)
Received: by 10.65.252.16 with HTTP; Fri, 16 Dec 2005 12:40:27 -0800 (PST)
Message-ID: <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
Date: Fri, 16 Dec 2005 15:40:27 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I can't reproduce this behavior with the current version of Lucene.

+text:solar  =3D> 112 docs
+text:"a a a" =3D> 0 docs because a is a stop word
+text"solar" +text:"a a a" =3D> 112 docs

-Yonik


On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
>  Hi,
>
> Suppose I have a query like this:
> +attachments:purpose
>  that returns N hits.
> If I add another condition
> +attachments:purpose +attachments:"hello world"
> I still get some hits, but if the words in the "hello world" phrase
> happen to be all stop words I get 0 hits.
>
> I can fix that by checking at least one of them is not a stop word,
> but just wanted to know wether thats expected behaviour.
>
>
> Im using lucene1.9rc.
> thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 20:43:50 2005
Return-Path: <java-user-return-18014-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16779 invoked from network); 16 Dec 2005 20:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 20:43:49 -0000
Received: (qmail 43058 invoked by uid 500); 16 Dec 2005 20:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42993 invoked by uid 500); 16 Dec 2005 20:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42893 invoked by uid 99); 16 Dec 2005 20:43:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 12:43:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.196 as permitted sender)
Received: from [64.233.182.196] (HELO nproxy.gmail.com) (64.233.182.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 12:43:37 -0800
Received: by nproxy.gmail.com with SMTP id h2so247451nfe
        for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 12:43:15 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=KvV2LOhoUqxS+S0PlLnJ02mVbaAYiGMfQL4Fq9QZr3ig5Mw9MGDhmDi45kaQ7rjd/xPsebTMZxxpSi4Eia6R0/TohzU3D6KePTp0lq/lfY51qHIxwKAnXTthog4lD7XTo2brP4SzdmBcbkYzLKpaN+CIUdSCCKpjbLaDPxH/x8E=
Received: by 10.48.219.18 with SMTP id r18mr157696nfg;
        Fri, 16 Dec 2005 12:43:15 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Fri, 16 Dec 2005 12:43:15 -0800 (PST)
Message-ID: <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
Date: Fri, 16 Dec 2005 21:43:15 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
	 <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yonik,

this was due to the additional parenthses I was using, see my last
email. I think I'll rewrite with the lucene api as Erik said.

thanks,
javi


On 12/16/05, Yonik Seeley <yseeley@gmail.com> wrote:
> I can't reproduce this behavior with the current version of Lucene.
>
> +text:solar  =3D> 112 docs
> +text:"a a a" =3D> 0 docs because a is a stop word
> +text"solar" +text:"a a a" =3D> 112 docs
>
> -Yonik
>
>
> On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
> >  Hi,
> >
> > Suppose I have a query like this:
> > +attachments:purpose
> >  that returns N hits.
> > If I add another condition
> > +attachments:purpose +attachments:"hello world"
> > I still get some hits, but if the words in the "hello world" phrase
> > happen to be all stop words I get 0 hits.
> >
> > I can fix that by checking at least one of them is not a stop word,
> > but just wanted to know wether thats expected behaviour.
> >
> >
> > Im using lucene1.9rc.
> > thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 16 23:22:46 2005
Return-Path: <java-user-return-18015-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78641 invoked from network); 16 Dec 2005 23:22:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Dec 2005 23:22:46 -0000
Received: (qmail 39589 invoked by uid 500); 16 Dec 2005 23:22:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39560 invoked by uid 500); 16 Dec 2005 23:22:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39543 invoked by uid 99); 16 Dec 2005 23:22:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 15:22:40 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.81.59.41] (HELO messagesolution.com) (64.81.59.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 15:22:39 -0800
Subject: best strategy to deal with large index file
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Date: Fri, 16 Dec 2005 15:33:39 -0800
content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.0.4417.0
Message-ID: <195B28928A014F42A82C6900C2185F80020787@yosemite.messagesolution.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: WELCOME to java-user@lucene.apache.org
Thread-Index: AcYCi31hCm0jzKEDRAOYp4fBcT5/hQACzkrUAAB0AxM=
From: "Jeff Liang" <jeff@messagesolution.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SGkgYWxsLA0KDQpteSBpbmRleCBmaWxlIGlzIGh1Z2UgYmVjYXVzZSBvZiBsYXJnZSBzZXQgb2Yg
ZGF0YS4gIHdoZW4gSSBkbyBzZWFyY2gsIEkNCmdldCBvdXRvZm1lbW9yeSBleGNlcHRpb24gc29t
ZXRpbWUuICBJIGRvbid0IGtub3cgd2hhdCdzIHVzdWFsbHkgY2F1c2luZw0KdGhlIG91dG9mbWVt
b3J5IGV4Y2VwdGlvbi4gSXMgaXQgZHVyaW5nIHRoZSBzZWFyY2gNCmJlY2F1c2Ugb2YgdGhlIGlu
ZGV4IGZpbGUgaXMgdG9vIGJpZz8gIG9yIGJlY2F1c2UgdGhlcmUgYXJlIHRvbyBtYW55DQpoaXRz
PyAgbWVtb3J5IGV4Y2VwdGlvbiBqdXN0IGhhcHBlbnMgd2hlbiBJIGNhbGwNCkluZGV4U2VhcmNo
ZXIuc2VhcmNoKCkuIA0KaXQncyBhbHNvIGJhZCBmb3IgYmFja3VwIGJlY2F1c2UgSSBjYW4ndCBk
byBpbmNyZW1lbnRhbCBiYWNrdXAgYWZ0ZXINCmFkZGluZyBuZXcgZG9jdW1lbnRzIHNpbmNlIEkg
b25seSBoYXZlIG9uZSBiaWcgaW5kZXggZmlsZS4NCg0KV2hhdCdzIHRoZSBiZXN0IHN0cmF0ZWd5
IHRvIGRlYWwgd2l0aCBsYXJnZSBpbmRleCBmaWxlPyAgd2hhdCdzIGEgZ29vZA0Kd2F5IHRvIHNw
bGl0IHRoZSBpbmRleCBmaWxlPyAgDQpJIHN0YXJ0IGp2bSB3aXRoIDgwME1CLiAgDQp0aGFua3Ms
DQoNCkplZmYNCg0KIA0KDQo=


From java-user-return-18016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 17 00:35:22 2005
Return-Path: <java-user-return-18016-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 358 invoked from network); 17 Dec 2005 00:35:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Dec 2005 00:35:21 -0000
Received: (qmail 85857 invoked by uid 500); 17 Dec 2005 00:35:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85827 invoked by uid 500); 17 Dec 2005 00:35:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85816 invoked by uid 99); 17 Dec 2005 00:35:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 16:35:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.197 as permitted sender)
Received: from [64.233.162.197] (HELO zproxy.gmail.com) (64.233.162.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 16:35:15 -0800
Received: by zproxy.gmail.com with SMTP id i28so782103nzi
        for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 16:34:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nSRPmfLLwm3wcrF7PwaET8Vib9YBPGR/lFbxr8B+UOLX8TDFjzqltnym1c1dJRJiXcjB6ZMCYVoELmI6h0j06cc5bz9Y+j3lCtV8vPq4NPjM7n62NEo8IXQiRU64R/QpHe8E7NcIlYAxlVPh+xr86HUClfIzIE7/anhUCmsGOPY=
Received: by 10.65.239.2 with SMTP id q2mr286257qbr;
        Fri, 16 Dec 2005 16:34:54 -0800 (PST)
Received: by 10.65.252.16 with HTTP; Fri, 16 Dec 2005 16:34:54 -0800 (PST)
Message-ID: <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com>
Date: Fri, 16 Dec 2005 19:34:54 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
	 <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
	 <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah, sorry.

Still, this doesn't seem like the most desirable behavior.
It would be nice if we could fine a way to fix it.

-Yonik

On 12/16/05, javier muguruza <jmuguruza@gmail.com> wrote:
> Yonik,
>
> this was due to the additional parenthses I was using, see my last
> email. I think I'll rewrite with the lucene api as Erik said.
>
> thanks,
> javi
>
>
> On 12/16/05, Yonik Seeley <yseeley@gmail.com> wrote:
> > I can't reproduce this behavior with the current version of Lucene.
> >
> > +text:solar  =3D> 112 docs
> > +text:"a a a" =3D> 0 docs because a is a stop word
> > +text"solar" +text:"a a a" =3D> 112 docs
> >
> > -Yonik
> >
> >
> > On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
> > >  Hi,
> > >
> > > Suppose I have a query like this:
> > > +attachments:purpose
> > >  that returns N hits.
> > > If I add another condition
> > > +attachments:purpose +attachments:"hello world"
> > > I still get some hits, but if the words in the "hello world" phrase
> > > happen to be all stop words I get 0 hits.
> > >
> > > I can fix that by checking at least one of them is not a stop word,
> > > but just wanted to know wether thats expected behaviour.
> > >
> > >
> > > Im using lucene1.9rc.
> > > thanks
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 17 03:12:31 2005
Return-Path: <java-user-return-18017-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50320 invoked from network); 17 Dec 2005 03:12:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Dec 2005 03:12:31 -0000
Received: (qmail 59470 invoked by uid 500); 17 Dec 2005 03:12:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59425 invoked by uid 500); 17 Dec 2005 03:12:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59414 invoked by uid 99); 17 Dec 2005 03:12:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 19:12:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.h.funk@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 19:12:25 -0800
Received: by wproxy.gmail.com with SMTP id i21so697814wra
        for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 19:12:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=UekQXZxVF+hoUpgUiZ37S+z+Nzs7PAUCXJdtxrnKyuA0oPTzOtGCbk6sPRjUzr5pF87cdpBn++7W35t08ONxvp8bHWExkx8UICDdo2ixtSRd+SB6JgqYR5WUDInWMQe0z4gfSBpf1sWKe8Jn9/VxPx0kJGonWsaGXOZypGzjJwU=
Received: by 10.54.143.18 with SMTP id q18mr478002wrd;
        Fri, 16 Dec 2005 19:12:04 -0800 (PST)
Received: by 10.54.106.10 with HTTP; Fri, 16 Dec 2005 19:12:04 -0800 (PST)
Message-ID: <fb81d4720512161912j42c12bdbq4ca3f69e7447c6ad@mail.gmail.com>
Date: Sat, 17 Dec 2005 03:12:04 +0000
From: Dan Funk <dan@danandtamara.com>
Sender: daniel.h.funk@gmail.com
To: java-user@lucene.apache.org
Subject: Re: best strategy to deal with large index file
In-Reply-To: <195B28928A014F42A82C6900C2185F80020787@yosemite.messagesolution.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9428_2016762.1134789124386"
References: <195B28928A014F42A82C6900C2185F80020787@yosemite.messagesolution.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9428_2016762.1134789124386
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Are there specific queries that cause the out of memory problem? Or will an=
y
query do it?

How large is the index?

MultiSearcher allows you to search over multiple indexes, and is well
supported throughout the API.  How you split your indexes is depends on wha=
t
you want to achieve. There are many here on the list developing indexes for
large data sets.  Please be a little more specific on what you are indexing=
,
and how you are searching.

On 12/16/05, Jeff Liang <jeff@messagesolution.com> wrote:
>
> Hi all,
>
> my index file is huge because of large set of data.  when I do search, I
> get outofmemory exception sometime.  I don't know what's usually causing
> the outofmemory exception. Is it during the search
> because of the index file is too big?  or because there are too many
> hits?  memory exception just happens when I call
> IndexSearcher.search().
> it's also bad for backup because I can't do incremental backup after
> adding new documents since I only have one big index file.
>
> What's the best strategy to deal with large index file?  what's a good
> way to split the index file?
> I start jvm with 800MB.
> thanks,
>
> Jeff
>
>
>
>

------=_Part_9428_2016762.1134789124386--

From java-user-return-18018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 17 03:23:43 2005
Return-Path: <java-user-return-18018-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55730 invoked from network); 17 Dec 2005 03:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Dec 2005 03:23:43 -0000
Received: (qmail 65780 invoked by uid 500); 17 Dec 2005 03:23:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65760 invoked by uid 500); 17 Dec 2005 03:23:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65748 invoked by uid 99); 17 Dec 2005 03:23:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 19:23:38 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.81.59.41] (HELO messagesolution.com) (64.81.59.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 19:23:37 -0800
Subject: RE: best strategy to deal with large index file
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C602BA.CCD608D0"
Date: Fri, 16 Dec 2005 19:34:35 -0800
content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.0.4417.0
Message-ID: <195B28928A014F42A82C6900C2185F80020789@yosemite.messagesolution.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <195B28928A014F42A82C6900C2185F80020789@yosemite.messagesolution.com>
Thread-Topic: best strategy to deal with large index file
Thread-Index: AcYCuVK+RsW7UoL8R3aZjOsvvom9egAAEn3R
From: "Jeff Liang" <jeff@messagesolution.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C602BA.CCD608D0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64

dGhhbmtzIGZvciB0aGUgcmVwbHkuDQpJJ20gaW5kZXhpbmcgZW1haWxzLiAgRmllbGRzIGFyZSB0
aGUgY29tbW9uIGF0dHJpYnV0ZSBvbiBlbWFpbHM6DQpzdWJqZWN0LCBjb250ZW50LCBhdHRhY2ht
ZW50LCBtZXNzYWdlIHNpemUsIGRhdGUsIHNlbmRlciwgcmVjaXBpZW50cywNCmV0Yy4gIFRoZSBp
bmRleCBpcyBhIGZldyBHQi4gIElzIHRoZXJlIGEgZ29vZCBwcmFjdGljZSB0byBrZWVwIHRoZSBp
bmRleA0KZmlsZSBzaXplIGF0IGEgY2VydGFpbiBsZXZlbD8NCndoZW4gSSBkbyBhIHNlYXJjaCBv
biB0aGUgZGF0ZSBmaWVsZCB0aGF0IHNob3VsZCByZXRyaWV2ZSBhIGxvdCBvZg0KcmVjb3Jkcywg
aXQgbm9ybWFsbHkgdGhyb3dzIHRoZSBleGNlcHRpb24uICANCiANCkkgd2lsbCBsb29rIGF0IE11
bHRpU2VhcmNoZXIuICBkbyB5b3UgdGhpbmsgc3BsaXQgdGhlIGluZGV4IGZpbGUgYmFzZWQNCm9u
IGRhdGUgZmllbGQgaXMgYSBnb29kIGNob2ljZT8gIEkgc29tZWhvdyBmZWVsIGl0IHJlcXVpcmVz
IGEgbG90IG9mDQpjb2RpbmcgdG8gY3JlYXRlIG1hbnkgaW5kZXhlcyBiYXNlZCBvbiBkYXRlIGZp
ZWxkLg0KIA0KVGhhbmtzLA0KIA0KIA0KSmVmZg0KIA0KIA0KDQoJLS0tLS1PcmlnaW5hbCBNZXNz
YWdlLS0tLS0gDQoJRnJvbTogRGFuIEZ1bmsgDQoJU2VudDogRnJpIDEyLzE2LzIwMDUgNzoxMiBQ
TSANCglUbzogamF2YS11c2VyQGx1Y2VuZS5hcGFjaGUub3JnIA0KCUNjOiANCglTdWJqZWN0OiBS
ZTogYmVzdCBzdHJhdGVneSB0byBkZWFsIHdpdGggbGFyZ2UgaW5kZXggZmlsZQ0KCQ0KCQ0KDQoJ
QXJlIHRoZXJlIHNwZWNpZmljIHF1ZXJpZXMgdGhhdCBjYXVzZSB0aGUgb3V0IG9mIG1lbW9yeSBw
cm9ibGVtPw0KT3Igd2lsbCBhbnkNCglxdWVyeSBkbyBpdD8NCgkNCglIb3cgbGFyZ2UgaXMgdGhl
IGluZGV4Pw0KCQ0KCU11bHRpU2VhcmNoZXIgYWxsb3dzIHlvdSB0byBzZWFyY2ggb3ZlciBtdWx0
aXBsZSBpbmRleGVzLCBhbmQgaXMNCndlbGwNCglzdXBwb3J0ZWQgdGhyb3VnaG91dCB0aGUgQVBJ
LiAgSG93IHlvdSBzcGxpdCB5b3VyIGluZGV4ZXMgaXMNCmRlcGVuZHMgb24gd2hhdA0KCXlvdSB3
YW50IHRvIGFjaGlldmUuIFRoZXJlIGFyZSBtYW55IGhlcmUgb24gdGhlIGxpc3QgZGV2ZWxvcGlu
Zw0KaW5kZXhlcyBmb3INCglsYXJnZSBkYXRhIHNldHMuICBQbGVhc2UgYmUgYSBsaXR0bGUgbW9y
ZSBzcGVjaWZpYyBvbiB3aGF0IHlvdQ0KYXJlIGluZGV4aW5nLA0KCWFuZCBob3cgeW91IGFyZSBz
ZWFyY2hpbmcuDQoJDQoJT24gMTIvMTYvMDUsIEplZmYgTGlhbmcgPGplZmZAbWVzc2FnZXNvbHV0
aW9uLmNvbT4gd3JvdGU6DQoJPg0KCT4gSGkgYWxsLA0KCT4NCgk+IG15IGluZGV4IGZpbGUgaXMg
aHVnZSBiZWNhdXNlIG9mIGxhcmdlIHNldCBvZiBkYXRhLiAgd2hlbiBJIGRvDQpzZWFyY2gsIEkN
Cgk+IGdldCBvdXRvZm1lbW9yeSBleGNlcHRpb24gc29tZXRpbWUuICBJIGRvbid0IGtub3cgd2hh
dCdzDQp1c3VhbGx5IGNhdXNpbmcNCgk+IHRoZSBvdXRvZm1lbW9yeSBleGNlcHRpb24uIElzIGl0
IGR1cmluZyB0aGUgc2VhcmNoDQoJPiBiZWNhdXNlIG9mIHRoZSBpbmRleCBmaWxlIGlzIHRvbyBi
aWc/ICBvciBiZWNhdXNlIHRoZXJlIGFyZQ0KdG9vIG1hbnkNCgk+IGhpdHM/ICBtZW1vcnkgZXhj
ZXB0aW9uIGp1c3QgaGFwcGVucyB3aGVuIEkgY2FsbA0KCT4gSW5kZXhTZWFyY2hlci5zZWFyY2go
KS4NCgk+IGl0J3MgYWxzbyBiYWQgZm9yIGJhY2t1cCBiZWNhdXNlIEkgY2FuJ3QgZG8gaW5jcmVt
ZW50YWwgYmFja3VwDQphZnRlcg0KCT4gYWRkaW5nIG5ldyBkb2N1bWVudHMgc2luY2UgSSBvbmx5
IGhhdmUgb25lIGJpZyBpbmRleCBmaWxlLg0KCT4NCgk+IFdoYXQncyB0aGUgYmVzdCBzdHJhdGVn
eSB0byBkZWFsIHdpdGggbGFyZ2UgaW5kZXggZmlsZT8NCndoYXQncyBhIGdvb2QNCgk+IHdheSB0
byBzcGxpdCB0aGUgaW5kZXggZmlsZT8NCgk+IEkgc3RhcnQganZtIHdpdGggODAwTUIuDQoJPiB0
aGFua3MsDQoJPg0KCT4gSmVmZg0KCT4NCgk+DQoJPg0KCT4NCgkNCg0K


------_=_NextPart_001_01C602BA.CCD608D0
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C602BA.CCD608D0--

From java-user-return-18019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 17 05:26:53 2005
Return-Path: <java-user-return-18019-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87758 invoked from network); 17 Dec 2005 05:26:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Dec 2005 05:26:53 -0000
Received: (qmail 17941 invoked by uid 500); 17 Dec 2005 05:26:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17907 invoked by uid 500); 17 Dec 2005 05:26:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17896 invoked by uid 99); 17 Dec 2005 05:26:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 21:26:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 16 Dec 2005 21:26:47 -0800
Received: by wproxy.gmail.com with SMTP id i7so1031100wra
        for <java-user@lucene.apache.org>; Fri, 16 Dec 2005 21:26:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=BTCAqwxSuAiTMA7TL48hydj/NM2qzDmujzCm/Zlgs6slOfaNbjG1XSiGmoIusIDNvnJzbZr3SCUYXcg1YOnp8NJCKw/TOwxoN5HFV4lVA8H5eLOc1Y7VMoLOSWoNmDrIoFOxHthGAOmpivjQ/2LRBcWPz2QvErSWxBCiK5JGchE=
Received: by 10.54.119.2 with SMTP id r2mr3299261wrc;
        Fri, 16 Dec 2005 21:26:26 -0800 (PST)
Received: by 10.54.129.8 with HTTP; Fri, 16 Dec 2005 21:26:26 -0800 (PST)
Message-ID: <901c03930512162126n5e7398f3jaf604a21dad08cf6@mail.gmail.com>
Date: Sat, 17 Dec 2005 13:26:26 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: best strategy to deal with large index file
In-Reply-To: <195B28928A014F42A82C6900C2185F80020789@yosemite.messagesolution.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <195B28928A014F42A82C6900C2185F80020789@yosemite.messagesolution.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/17/05, Jeff Liang <jeff@messagesolution.com> wrote:
> thanks for the reply.
> I'm indexing emails.  Fields are the common attribute on emails:
> subject, content, attachment, message size, date, sender, recipients,
> etc.  The index is a few GB.  Is there a good practice to keep the index
> file size at a certain level?
> when I do a search on the date field that should retrieve a lot of
> records, it normally throws the exception.
>
> I will look at MultiSearcher.  do you think split the index file based
> on date field is a good choice?  I somehow feel it requires a lot of
> coding to create many indexes based on date field.
>

A few GB is typically considered a small index for Lucene. Without
seeing the exception call stack, its kind of hard to understand
exactly what is causing the out of memory problem. Based on past
experience, the only times I ever encountered out of memory issues
were during large queries that contain a few phrase, wildcard or fuzzy
sub-queries.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 17 16:05:02 2005
Return-Path: <java-user-return-18020-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75397 invoked from network); 17 Dec 2005 16:05:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Dec 2005 16:05:02 -0000
Received: (qmail 52121 invoked by uid 500); 17 Dec 2005 16:04:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51299 invoked by uid 500); 17 Dec 2005 16:04:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51288 invoked by uid 99); 17 Dec 2005 16:04:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Dec 2005 08:04:56 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [84.41.231.24] (HELO 127.0.0.1) (84.41.231.24)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 17 Dec 2005 08:04:56 -0800
Message-ID: <43A43705.8080606@pit.speedlinq.nl>
Date: Sat, 17 Dec 2005 17:04:21 +0100
From: Cret Hummin <hummin@pit.speedlinq.nl>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Filtering after Query
Content-Type: multipart/alternative;
 boundary="------------040500000009020508060301"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------040500000009020508060301
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi All,

When using Searcher.search(Query, Filter), and I use my own custom 
filter, it appears I'm presented with /all/ the documents in the index, 
i.e. in the method bits(IndexReader reader) from my custom Filter, the 
value of reader.maxDoc() is always the number of documents in the index. 
The same is true when do Searcher.search(FilteredQuery(Query, Filter)).

Is it possible to filter /after/ the query has limited the number of 
possible documents, /before/ returning a Hits collection?




Regards,
Laurens




--------------040500000009020508060301--

From java-user-return-18021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 17 17:27:33 2005
Return-Path: <java-user-return-18021-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10651 invoked from network); 17 Dec 2005 17:27:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Dec 2005 17:27:32 -0000
Received: (qmail 33336 invoked by uid 500); 17 Dec 2005 17:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32380 invoked by uid 500); 17 Dec 2005 17:27:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32368 invoked by uid 99); 17 Dec 2005 17:27:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Dec 2005 09:27:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Dec 2005 09:27:26 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id jBHHR520021949
	for <java-user@lucene.apache.org>; Sat, 17 Dec 2005 18:27:05 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Filtering after Query
Date: Sat, 17 Dec 2005 18:27:05 +0100
User-Agent: KMail/1.5.4
References: <43A43705.8080606@pit.speedlinq.nl>
In-Reply-To: <43A43705.8080606@pit.speedlinq.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512171827.05095.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Saturday 17 December 2005 17:04, Cret Hummin wrote:
> Hi All,
> 
> When using Searcher.search(Query, Filter), and I use my own custom 
> filter, it appears I'm presented with /all/ the documents in the index, 
> i.e. in the method bits(IndexReader reader) from my custom Filter, the 
> value of reader.maxDoc() is always the number of documents in the index. 
> The same is true when do Searcher.search(FilteredQuery(Query, Filter)).
>
> Is it possible to filter /after/ the query has limited the number of 
> possible documents, /before/ returning a Hits collection?

The easiest way to do this is by adding a required clause to a BooleanQuery.
You might consider using a ConstantScoringQuery for this clause:
http://issues.apache.org/jira/browse/LUCENE-383

In case you really want to filter only the documents that match a query
you'll need to implement a filtering HitCollector and use it on the
lower level search API. 
An easier way to implement such a filtering HitCollector could be
by adding to it the search methods that return a Hits as an alternative
to Filter.
A disadvantage of this approach is that skipTo() cannot be used
to combine the filter and the query, see also here:
http://issues.apache.org/jira/browse/LUCENE-330

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 18 07:15:31 2005
Return-Path: <java-user-return-18022-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6544 invoked from network); 18 Dec 2005 07:15:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Dec 2005 07:15:31 -0000
Received: (qmail 2162 invoked by uid 500); 18 Dec 2005 07:15:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2132 invoked by uid 500); 18 Dec 2005 07:15:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2121 invoked by uid 99); 18 Dec 2005 07:15:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Dec 2005 23:15:26 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.19.170.226] (HELO ns0.secureanonymous.com) (67.19.170.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Dec 2005 23:15:25 -0800
Received: from nyatapol by ns0.secureanonymous.com with local (Exim 4.52)
	id 1Ensl2-0003my-O1
	for java-user@lucene.apache.org; Sun, 18 Dec 2005 07:15:00 +0000
Received: from 202.79.50.29 ([202.79.50.29])
        (SquirrelMail authenticated user shreeya@nyatapol.com)
        by 67.19.170.226 with HTTP;
        Sun, 18 Dec 2005 07:15:00 -0000 (GMT)
Message-ID: <1905.202.79.50.29.1134890100.squirrel@67.19.170.226>
Date: Sun, 18 Dec 2005 07:15:00 -0000 (GMT)
Subject: help in indexing database tables
From: shreeya@nyatapol.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ns0.secureanonymous.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32730 32003] / [47 12]
X-AntiAbuse: Sender Address Domain - nyatapol.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi..
I would like to know how to index database tables using Lucene.

I am novice in using Lucene and appreciate generous help and thorough
guidelines as how and where to start in order to make Lucen index database
tables and perform searching.

Regards
Shreeya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 18 07:17:05 2005
Return-Path: <java-user-return-18023-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7672 invoked from network); 18 Dec 2005 07:17:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Dec 2005 07:17:04 -0000
Received: (qmail 3996 invoked by uid 500); 18 Dec 2005 07:17:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3971 invoked by uid 500); 18 Dec 2005 07:17:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3960 invoked by uid 99); 18 Dec 2005 07:16:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Dec 2005 23:16:59 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.19.170.226] (HELO ns0.secureanonymous.com) (67.19.170.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 17 Dec 2005 23:16:59 -0800
Received: from nyatapol by ns0.secureanonymous.com with local (Exim 4.52)
	id 1EnsmY-0005jJ-Gk
	for java-user@lucene.apache.org; Sun, 18 Dec 2005 07:16:34 +0000
Received: from 202.79.50.29 ([202.79.50.29])
        (SquirrelMail authenticated user shreeya@nyatapol.com)
        by 67.19.170.226 with HTTP;
        Sun, 18 Dec 2005 07:16:34 -0000 (GMT)
Message-ID: <1908.202.79.50.29.1134890194.squirrel@67.19.170.226>
Date: Sun, 18 Dec 2005 07:16:34 -0000 (GMT)
Subject: help in indexing database tables
From: shreeya@nyatapol.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - ns0.secureanonymous.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32730 32003] / [47 12]
X-AntiAbuse: Sender Address Domain - nyatapol.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi..
I would like to know how to index database tables using Lucene.

I am novice in using Lucene and appreciate generous help and thorough
guidelines as how and where to start in order to make Lucen index database
tables and perform searching.

Regards
Shreeya

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 18 14:46:47 2005
Return-Path: <java-user-return-18024-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35881 invoked from network); 18 Dec 2005 14:46:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Dec 2005 14:46:47 -0000
Received: (qmail 69033 invoked by uid 500); 18 Dec 2005 14:46:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69007 invoked by uid 500); 18 Dec 2005 14:46:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68996 invoked by uid 99); 18 Dec 2005 14:46:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 06:46:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [84.41.231.24] (HELO 127.0.0.1) (84.41.231.24)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 18 Dec 2005 06:46:40 -0800
Message-ID: <43A5762E.7030004@pit.speedlinq.nl>
Date: Sun, 18 Dec 2005 15:46:06 +0100
From: Cret Hummin <hummin@pit.speedlinq.nl>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Filtering after Query
References: <43A43705.8080606@pit.speedlinq.nl> <200512171827.05095.paul.elschot@xs4all.nl>
In-Reply-To: <200512171827.05095.paul.elschot@xs4all.nl>
Content-Type: multipart/alternative;
 boundary="------------030708070309060507010900"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------030708070309060507010900
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Paul,

W.r.t. ConstantScoringQuery, it contains a minor bug: it doesn't the 
handle the case where the Filter.bits method would return null. I think 
the ConstantScorer should look like:

    public boolean next() throws IOException {
      doc = (bits == null) ? doc+1 : bits.nextSetBit(doc+1);
      return doc >= 0;
    }

   public boolean skipTo(int target) throws IOException {
        doc = (bits == null) ? target : bits.nextSetBit(target);  // 
requires JDK 1.4
        return doc >= 0;
    }


Anyways, while the ConstantScoringQuery does offer a great new feature, 
it does not do what I want: when my custom filter bits method is called, 
I still have to create a BitSet object with size reader.maxDoc(), which 
value is the total number of documents in the index, and then determine 
for each document if it should be included or excluded. This is 
performance killing for me.

I have the same problem with HitCollector: I'd need to go through /all/ 
documents.

After playing around a bit, I think I could solve this by adding 
TermQuery's as the last terms to a BooleanQuery, but that would mean I'd 
also have to store certain (security related) values in separate fields 
in the index. I could live with that, if I'm seeing this right: when I 
set the boost factor of those fields to 0, then it won't affect the 
scoring, right?



Regards,
Cret


Paul Elschot wrote:

>On Saturday 17 December 2005 17:04, Cret Hummin wrote:
>  
>
>>Hi All,
>>
>>When using Searcher.search(Query, Filter), and I use my own custom 
>>filter, it appears I'm presented with /all/ the documents in the index, 
>>i.e. in the method bits(IndexReader reader) from my custom Filter, the 
>>value of reader.maxDoc() is always the number of documents in the index. 
>>The same is true when do Searcher.search(FilteredQuery(Query, Filter)).
>>
>>Is it possible to filter /after/ the query has limited the number of 
>>possible documents, /before/ returning a Hits collection?
>>    
>>
>
>The easiest way to do this is by adding a required clause to a BooleanQuery.
>You might consider using a ConstantScoringQuery for this clause:
>http://issues.apache.org/jira/browse/LUCENE-383
>
>In case you really want to filter only the documents that match a query
>you'll need to implement a filtering HitCollector and use it on the
>lower level search API. 
>An easier way to implement such a filtering HitCollector could be
>by adding to it the search methods that return a Hits as an alternative
>to Filter.
>A disadvantage of this approach is that skipTo() cannot be used
>to combine the filter and the query, see also here:
>http://issues.apache.org/jira/browse/LUCENE-330
>
>Regards,
>Paul Elschot
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


--------------030708070309060507010900--

From java-user-return-18025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 18 18:50:22 2005
Return-Path: <java-user-return-18025-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4909 invoked from network); 18 Dec 2005 18:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Dec 2005 18:50:21 -0000
Received: (qmail 12802 invoked by uid 500); 18 Dec 2005 18:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12748 invoked by uid 500); 18 Dec 2005 18:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12737 invoked by uid 99); 18 Dec 2005 18:50:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 10:50:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist2005@danielnaber.de designates 80.67.18.16 as permitted sender)
Received: from [80.67.18.16] (HELO smtprelay04.ispgateway.de) (80.67.18.16)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 10:50:14 -0800
Received: (qmail 12659 invoked from network); 18 Dec 2005 18:49:51 -0000
Received: from unknown (HELO p5496fa4d.dip.t-dialin.net) ([pbs]695637@[84.150.250.77])
          (envelope-sender <lucenelist2005@danielnaber.de>)
          by smtprelay04.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 18 Dec 2005 18:49:51 -0000
From: Daniel Naber <lucenelist2005@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: help in indexing database tables
Date: Sun, 18 Dec 2005 19:51:57 +0100
User-Agent: KMail/1.8.2
References: <1908.202.79.50.29.1134890194.squirrel@67.19.170.226>
In-Reply-To: <1908.202.79.50.29.1134890194.squirrel@67.19.170.226>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512181951.58033@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sonntag 18 Dezember 2005 08:16, shreeya@nyatapol.com wrote:

> hi..
> I would like to know how to index database tables using Lucene.

As this question comes up regularly, I have added a new FAQ item:
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-109358021acbfc89456e446740dc2bbf9049950f

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 18 19:56:16 2005
Return-Path: <java-user-return-18026-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23964 invoked from network); 18 Dec 2005 19:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Dec 2005 19:56:16 -0000
Received: (qmail 64388 invoked by uid 500); 18 Dec 2005 19:56:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64360 invoked by uid 500); 18 Dec 2005 19:56:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64345 invoked by uid 99); 18 Dec 2005 19:56:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 11:56:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 11:56:10 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr13.xs4all.nl (8.13.3/8.13.3) with ESMTP id jBIJtmBs003239
	for <java-user@lucene.apache.org>; Sun, 18 Dec 2005 20:55:48 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Filtering after Query
Date: Sun, 18 Dec 2005 20:55:48 +0100
User-Agent: KMail/1.5.4
References: <43A43705.8080606@pit.speedlinq.nl> <200512171827.05095.paul.elschot@xs4all.nl> <43A5762E.7030004@pit.speedlinq.nl>
In-Reply-To: <43A5762E.7030004@pit.speedlinq.nl>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200512182055.48208.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sunday 18 December 2005 15:46, Cret Hummin wrote:
> Hi Paul,
> 
> W.r.t. ConstantScoringQuery, it contains a minor bug: it doesn't the 
> handle the case where the Filter.bits method would return null. I think 
> the ConstantScorer should look like:
> 
>     public boolean next() throws IOException {
>       doc = (bits == null) ? doc+1 : bits.nextSetBit(doc+1);
>       return doc >= 0;
>     }
> 
>    public boolean skipTo(int target) throws IOException {
>         doc = (bits == null) ? target : bits.nextSetBit(target);  // 
> requires JDK 1.4
>         return doc >= 0;
>     }

There is a MatchAllDocsQuery in the svn trunk that does this.

> 
> Anyways, while the ConstantScoringQuery does offer a great new feature, 
> it does not do what I want: when my custom filter bits method is called, 
> I still have to create a BitSet object with size reader.maxDoc(), which 
> value is the total number of documents in the index, and then determine 
> for each document if it should be included or excluded. This is 
> performance killing for me.

A Filter can be computed once for a condition on an IndexReader,
and then reused when needed.
 
> I have the same problem with HitCollector: I'd need to go through /all/ 
> documents.
> 
> After playing around a bit, I think I could solve this by adding 
> TermQuery's as the last terms to a BooleanQuery, but that would mean I'd 
> also have to store certain (security related) values in separate fields 
> in the index. I could live with that, if I'm seeing this right: when I 

You can use QueryFilter as  a Filter from the TermQuery and
then use CachingWrapperFilter to cache it.

> set the boost factor of those fields to 0, then it won't affect the 
> scoring, right?

When using an extra TermQuery, that depends on the coordination
factor, which by default is the number of matching clauses divided
by the total number of clauses. But with a weight of 0 this would not
affect the scoring order of the matching documents.

However, I think I would use filter in your case, and recompute the
filter only after updating the index.

When you need lots of sparse filters and memory becomes a problem
for the BitSets there is a more space efficient filter here:
http://issues.apache.org/jira/browse/LUCENE-328
http://issues.apache.org/jira/browse/LUCENE-330

Regards,
Paul Elschot

> 
> 
> 
> Regards,
> Cret
> 
> 
> Paul Elschot wrote:
> 
> >On Saturday 17 December 2005 17:04, Cret Hummin wrote:
> >  
> >
> >>Hi All,
> >>
> >>When using Searcher.search(Query, Filter), and I use my own custom 
> >>filter, it appears I'm presented with /all/ the documents in the index, 
> >>i.e. in the method bits(IndexReader reader) from my custom Filter, the 
> >>value of reader.maxDoc() is always the number of documents in the index. 
> >>The same is true when do Searcher.search(FilteredQuery(Query, Filter)).
> >>
> >>Is it possible to filter /after/ the query has limited the number of 
> >>possible documents, /before/ returning a Hits collection?
> >>    
> >>
> >
> >The easiest way to do this is by adding a required clause to a 
BooleanQuery.
> >You might consider using a ConstantScoringQuery for this clause:
> >http://issues.apache.org/jira/browse/LUCENE-383
> >
> >In case you really want to filter only the documents that match a query
> >you'll need to implement a filtering HitCollector and use it on the
> >lower level search API. 
> >An easier way to implement such a filtering HitCollector could be
> >by adding to it the search methods that return a Hits as an alternative
> >to Filter.
> >A disadvantage of this approach is that skipTo() cannot be used
> >to combine the filter and the query, see also here:
> >http://issues.apache.org/jira/browse/LUCENE-330
> >
> >Regards,
> >Paul Elschot
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >  
> >
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 18 20:14:56 2005
Return-Path: <java-user-return-18027-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30872 invoked from network); 18 Dec 2005 20:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Dec 2005 20:14:56 -0000
Received: (qmail 87236 invoked by uid 500); 18 Dec 2005 20:14:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87202 invoked by uid 500); 18 Dec 2005 20:14:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87191 invoked by uid 99); 18 Dec 2005 20:14:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 12:14:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 12:14:51 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id F331F5B76E; Sun, 18 Dec 2005 12:14:25 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id ECA3D7F459
	for <java-user@lucene.apache.org>; Sun, 18 Dec 2005 12:14:25 -0800 (PST)
Date: Sun, 18 Dec 2005 12:14:25 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Filtering after Query
In-Reply-To: <43A5762E.7030004@pit.speedlinq.nl>
Message-ID: <Pine.LNX.4.58.0512181203410.7524@hal.rescomp.berkeley.edu>
References: <43A43705.8080606@pit.speedlinq.nl> <200512171827.05095.paul.elschot@xs4all.nl>
 <43A5762E.7030004@pit.speedlinq.nl>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: I have the same problem with HitCollector: I'd need to go through /all/
: documents.

Are you sure about that?  I'm fairly certain that IndexSearcher will never
give your HitCollector a doc to collect unless that doc matches the query.

(Note: i seem to recall that it is possibel you'll be given docids with a
score of 0, since it is theoretically possible for a Query to say a
document matches with a score of 0)

: After playing around a bit, I think I could solve this by adding
: TermQuery's as the last terms to a BooleanQuery, but that would mean I'd
: also have to store certain (security related) values in separate fields
: in the index. I could live with that, if I'm seeing this right: when I

The API for Filters is really designed arround the idea
that the Filter shouldn't know much about the context it's being used in
so that it can be cached and reused (ala CachingWrapperFilter or your own
home grown caching mechamism).  As Paul mentioned, for wthe use you
describe it soudns like using a filter and caching it for as long as your
IndexReader remains open is really the way to go.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 18 21:22:23 2005
Return-Path: <java-user-return-18028-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67606 invoked from network); 18 Dec 2005 21:22:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Dec 2005 21:22:22 -0000
Received: (qmail 43672 invoked by uid 500); 18 Dec 2005 21:22:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43587 invoked by uid 500); 18 Dec 2005 21:22:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43554 invoked by uid 99); 18 Dec 2005 21:22:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 13:22:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 13:22:08 -0800
Received: by zproxy.gmail.com with SMTP id i28so1063114nzi
        for <java-user@lucene.apache.org>; Sun, 18 Dec 2005 13:21:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=G9gJXxftW8gQsMI66zAdurH9S0ug4ADFHqYVDeZtOF1YJaSjYdmtlTXJjqXX9fYi3VZhiBUZGM+e/ROG8w9Zoh86/QeXhI+g+ni0ZznqTDSQgWQRQf7v1/zl/l7R2KxNeANKdZBUX8rpfqcriLb4ZzswNgSr3G9di7YyD0kgSTE=
Received: by 10.65.177.16 with SMTP id e16mr2347653qbp;
        Sun, 18 Dec 2005 13:21:44 -0800 (PST)
Received: by 10.65.252.16 with HTTP; Sun, 18 Dec 2005 13:21:44 -0800 (PST)
Message-ID: <c68e39170512181321j68140d25wd0daaf7e92135170@mail.gmail.com>
Date: Sun, 18 Dec 2005 16:21:44 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Filtering after Query
In-Reply-To: <43A5762E.7030004@pit.speedlinq.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <43A43705.8080606@pit.speedlinq.nl>
	 <200512171827.05095.paul.elschot@xs4all.nl>
	 <43A5762E.7030004@pit.speedlinq.nl>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> W.r.t. ConstantScoringQuery, it contains a minor bug: it doesn't the
> handle the case where the Filter.bits method would return null.

Can Filter.bits() ever return null though?  AFAIK, that's not in the contra=
ct.

The Filter.getBits() javadoc says:
          Returns a BitSet with true for documents which should be
permitted in search results, and false for those that should not.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 00:29:17 2005
Return-Path: <java-user-return-18029-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29122 invoked from network); 19 Dec 2005 00:29:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 00:29:17 -0000
Received: (qmail 40231 invoked by uid 500); 19 Dec 2005 00:29:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40200 invoked by uid 500); 19 Dec 2005 00:29:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 65482 invoked by uid 99); 18 Dec 2005 14:44:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Message-ID: <43A575B8.4000903@pit.speedlinq.nl>
Date: Sun, 18 Dec 2005 15:44:08 +0100
From: Laurens Pit <laurens@pit.speedlinq.nl>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Filtering after Query
References: <43A43705.8080606@pit.speedlinq.nl> <200512171827.05095.paul.elschot@xs4all.nl>
In-Reply-To: <200512171827.05095.paul.elschot@xs4all.nl>
Content-Type: multipart/alternative;
 boundary="------------070301020302030607080407"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------070301020302030607080407
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hi Paul,

W.r.t. ConstantScoringQuery, it contains a minor bug: it doesn't the 
handle the case where the Filter.bits method would return null. I think 
the ConstantScorer should look like:

    public boolean next() throws IOException {
      doc = (bits == null) ? doc+1 : bits.nextSetBit(doc+1);
      return doc >= 0;
    }

   public boolean skipTo(int target) throws IOException {
        doc = (bits == null) ? target : bits.nextSetBit(target);  // 
requires JDK 1.4
        return doc >= 0;
    }


Anyways, while the ConstantScoringQuery does offer a great new feature, 
it does not do what I want: when my custom filter bits method is called, 
I still have to create a BitSet object with size reader.maxDoc(), which 
value is the total number of documents in the index, and then determine 
for each document if it should be included or excluded. This is 
performance killing for me.

I have the same problem with HitCollector: I'd need to go through /all/ 
documents.

After playing around a bit, I think I could solve this by adding 
TermQuery's as the last terms to a BooleanQuery, but that would mean I'd 
also have to store certain (security related) values in separate fields 
in the index. I could live with that, if I'm seeing this right: when I 
set the boost factor of those fields to 0, then it won't affect the 
scoring, right?



Regards,
Cret


Paul Elschot wrote:

>On Saturday 17 December 2005 17:04, Cret Hummin wrote:
>  
>
>>Hi All,
>>
>>When using Searcher.search(Query, Filter), and I use my own custom 
>>filter, it appears I'm presented with /all/ the documents in the index, 
>>i.e. in the method bits(IndexReader reader) from my custom Filter, the 
>>value of reader.maxDoc() is always the number of documents in the index. 
>>The same is true when do Searcher.search(FilteredQuery(Query, Filter)).
>>
>>Is it possible to filter /after/ the query has limited the number of 
>>possible documents, /before/ returning a Hits collection?
>>    
>>
>
>The easiest way to do this is by adding a required clause to a BooleanQuery.
>You might consider using a ConstantScoringQuery for this clause:
>http://issues.apache.org/jira/browse/LUCENE-383
>
>In case you really want to filter only the documents that match a query
>you'll need to implement a filtering HitCollector and use it on the
>lower level search API. 
>An easier way to implement such a filtering HitCollector could be
>by adding to it the search methods that return a Hits as an alternative
>to Filter.
>A disadvantage of this approach is that skipTo() cannot be used
>to combine the filter and the query, see also here:
>http://issues.apache.org/jira/browse/LUCENE-330
>
>Regards,
>Paul Elschot
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


--------------070301020302030607080407--

From java-user-return-18030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 00:52:19 2005
Return-Path: <java-user-return-18030-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34547 invoked from network); 19 Dec 2005 00:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 00:52:19 -0000
Received: (qmail 54663 invoked by uid 500); 19 Dec 2005 00:52:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54301 invoked by uid 500); 19 Dec 2005 00:52:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54289 invoked by uid 99); 19 Dec 2005 00:52:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 16:52:12 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.237.125.220] (HELO stephens.ittc.ku.edu) (129.237.125.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 16:52:12 -0800
Received: from webmail.ittc.ku.edu (fiasco.ittc.ku.edu [129.237.125.27])
	by stephens.ittc.ku.edu (8.12.11/ITTC-3.1) with ESMTP id jBJ0pngo023578
	for <java-user@lucene.apache.org>; Sun, 18 Dec 2005 18:51:49 -0600
Received: from 129.237.127.202
        (SquirrelMail authenticated user praveenl)
        by webmail.ittc.ku.edu with HTTP;
        Sun, 18 Dec 2005 18:51:49 -0600 (CST)
Message-ID: <36444.129.237.127.202.1134953509.squirrel@webmail.ittc.ku.edu>
Date: Sun, 18 Dec 2005 18:51:49 -0600 (CST)
Subject: Index Question
From: praveenl@ittc.ku.edu
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.5
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-VirusScan: Clean
X-MailScanner-From: praveenl@ittc.ku.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I know that lucene index takes a directory of files to be indexed and
builds the index. Now is there a way to specify the number of files from
the directory to be indexed?

I mean if I have a directory of 10,000 files and I want an index of only
2000 files from these 10k files, how can specify the limit?

Thanks,

Praveen.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 01:53:42 2005
Return-Path: <java-user-return-18031-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55665 invoked from network); 19 Dec 2005 01:53:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 01:53:42 -0000
Received: (qmail 5065 invoked by uid 500); 19 Dec 2005 01:53:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4951 invoked by uid 500); 19 Dec 2005 01:53:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4776 invoked by uid 99); 19 Dec 2005 01:53:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 17:53:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 17:53:32 -0800
Received: by wproxy.gmail.com with SMTP id i7so1224943wra
        for <java-user@lucene.apache.org>; Sun, 18 Dec 2005 17:53:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SdkeYDPZ6Ipye4mOdfp2oIdHJVMPhXcu3HAfUw6C45CdfP56tsTYCNfQqyRwTQUwuigBeY2UhsBgwRjMaoTX09wuvF5TJh+Ei7QdCukUKCgJHM1q/ewwIRnauy5FAinsXAB+anDu6rdy/vAOqbAgvFQUUnJQSWKmXmZfFpdT/Qc=
Received: by 10.54.136.10 with SMTP id j10mr439054wrd;
        Sun, 18 Dec 2005 17:53:11 -0800 (PST)
Received: by 10.54.129.8 with HTTP; Sun, 18 Dec 2005 17:53:11 -0800 (PST)
Message-ID: <901c03930512181753g3a256829k9852cd540a0e1a57@mail.gmail.com>
Date: Mon, 19 Dec 2005 09:53:11 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index Question
In-Reply-To: <36444.129.237.127.202.1134953509.squirrel@webmail.ittc.ku.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <36444.129.237.127.202.1134953509.squirrel@webmail.ittc.ku.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/19/05, praveenl@ittc.ku.edu <praveenl@ittc.ku.edu> wrote:
> Hi,
>
> I know that lucene index takes a directory of files to be indexed and
> builds the index. Now is there a way to specify the number of files from
> the directory to be indexed?
>
> I mean if I have a directory of 10,000 files and I want an index of only
> 2000 files from these 10k files, how can specify the limit?
>

Lucene is only a search engine library. This means you can customize
Lucene to behave exactly how you want it to behave. For your issue, I
guess the fastest way is to modify the Lucene demo program to only
read 2000 files instead of every single file in the directory.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 02:08:33 2005
Return-Path: <java-user-return-18032-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60858 invoked from network); 19 Dec 2005 02:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 02:08:32 -0000
Received: (qmail 21279 invoked by uid 500); 19 Dec 2005 02:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20530 invoked by uid 500); 19 Dec 2005 02:08:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20519 invoked by uid 99); 19 Dec 2005 02:08:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 18:08:24 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.237.125.220] (HELO stephens.ittc.ku.edu) (129.237.125.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 18 Dec 2005 18:08:22 -0800
Received: from webmail.ittc.ku.edu (fiasco.ittc.ku.edu [129.237.125.27])
	by stephens.ittc.ku.edu (8.12.11/ITTC-3.1) with ESMTP id jBJ27s6x027039
	for <java-user@lucene.apache.org>; Sun, 18 Dec 2005 20:07:54 -0600
Received: from 129.237.127.202
        (SquirrelMail authenticated user praveenl)
        by webmail.ittc.ku.edu with HTTP;
        Sun, 18 Dec 2005 20:07:54 -0600 (CST)
Message-ID: <36483.129.237.127.202.1134958074.squirrel@webmail.ittc.ku.edu>
In-Reply-To: <901c03930512181753g3a256829k9852cd540a0e1a57@mail.gmail.com>
References: <36444.129.237.127.202.1134953509.squirrel@webmail.ittc.ku.edu>
    <901c03930512181753g3a256829k9852cd540a0e1a57@mail.gmail.com>
Date: Sun, 18 Dec 2005 20:07:54 -0600 (CST)
Subject: Re: Index Question
From: praveenl@ittc.ku.edu
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.5
MIME-Version: 1.0
Content-Type: multipart/mixed;boundary="----=_20051218200754_48319"
X-Priority: 3 (Normal)
Importance: Normal
X-VirusScan: Clean
X-MailScanner-From: praveenl@ittc.ku.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_20051218200754_48319
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: 8bit

Thanks for the reply. I thought of doing it. I downloaded the latest
source and tried to build it using ant. I am new to using 'ant'. It gives
me an error and I think the problem is with 'rmic'. I never came across
this before either. It says -

BUILD FAILED
/projects/keyconcept/praveen/lucene-1.4.3/build.xml:145: Rmic failed; see
the compiler error output for details.

I am also attaching the output from ant. Is it a problem with the
installation of rmic or java or ant or am I doing something wrong?

I dont know if this is the right place to ask this, but any help will be
greatly appreciated.

Thanks,

Praveen.


> On 12/19/05, praveenl@ittc.ku.edu <praveenl@ittc.ku.edu> wrote:
>> Hi,
>>
>> I know that lucene index takes a directory of files to be indexed and
>> builds the index. Now is there a way to specify the number of files from
>> the directory to be indexed?
>>
>> I mean if I have a directory of 10,000 files and I want an index of only
>> 2000 files from these 10k files, how can specify the limit?
>>
>
> Lucene is only a search engine library. This means you can customize
> Lucene to behave exactly how you want it to behave. For your issue, I
> guess the fastest way is to modify the Lucene demo program to only
> read 2000 files instead of every single file in the directory.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_20051218200754_48319
Content-Type: text/plain; name="ant_op.txt"
Content-Transfer-Encoding: 8bit
Content-Disposition: attachment; filename="ant_op.txt"

Buildfile: build.xml

init:
    [mkdir] Created dir: /projects/keyconcept/praveen/lucene-1.4.3/build
    [mkdir] Created dir: /projects/keyconcept/praveen/lucene-1.4.3/dist

compile-core:
    [mkdir] Created dir: /projects/keyconcept/praveen/lucene-1.4.3/build/classes/java
    [javac] Compiling 160 source files to /projects/keyconcept/praveen/lucene-1.4.3/build/classes/java
    [javac] ----------
    [javac] 1. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianAnalyzer.java
    [javac]  (at line 59)
    [javac] 	private static char F = 20;
    [javac] 	                    ^
    [javac] The field RussianAnalyzer.F is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 2. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianAnalyzer.java
    [javac]  (at line 61)
    [javac] 	private static char TS = 22;
    [javac] 	                    ^^
    [javac] The field RussianAnalyzer.TS is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 3. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianAnalyzer.java
    [javac]  (at line 65)
    [javac] 	private static char HARD = 26;
    [javac] 	                    ^^^^
    [javac] The field RussianAnalyzer.HARD is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 4. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/Russi
    [javac] anStemmer.java
    [javac]  (at line 30)
    [javac] 	private int RV, R1, R2;
    [javac] 	                ^^
    [javac] The field RussianStemmer.R1 is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 5. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/Russi
    [javac] anStemmer.java
    [javac]  (at line 34)
    [javac] 	private static char B = 1;
    [javac] 	                    ^
    [javac] The field RussianStemmer.B is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 6. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 37)
    [javac] 	private static char D = 4;
    [javac] 	                    ^
    [javac] The field RussianStemmer.D is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 7. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 39)
    [javac] 	private static char ZH = 6;
    [javac] 	                    ^^
    [javac] The field RussianStemmer.ZH is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 8. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 40)
    [javac] 	private static char Z = 7;
    [javac] 	                    ^
    [javac] The field RussianStemmer.Z is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 9. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 43)
    [javac] 	private static char K = 10;
    [javac] 	                    ^
    [javac] The field RussianStemmer.K is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 10. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/Russ
    [javac] ianStemmer.java
    [javac]  (at line 48)
    [javac] 	private static char P = 15;
    [javac] 	                    ^
    [javac] The field RussianStemmer.P is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 11. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 49)
    [javac] 	private static char R = 16;
    [javac] 	                    ^
    [javac] The field RussianStemmer.R is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 12. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 53)
    [javac] 	private static char F = 20;
    [javac] 	                    ^
    [javac] The field RussianStemmer.F is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 13. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 55)
    [javac] 	private static char TS = 22;
    [javac] 	                    ^^
    [javac] The field RussianStemmer.TS is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 14. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 56)
    [javac] 	private static char CH = 23;
    [javac] 	                    ^^
    [javac] The field RussianStemmer.CH is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 15. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/Russ
    [javac] ianStemmer.java
    [javac]  (at line 59)
    [javac] 	private static char HARD = 26;
    [javac] 	                    ^^^^
    [javac] The field RussianStemmer.HARD is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 16. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 276)
    [javac] 	boolean r =
    [javac] 	        ^
    [javac] The local variable r is never read
    [javac] ----------
    [javac] ----------
    [javac] 17. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 539)
    [javac] 	private void setEndings()
    [javac] 	             ^^^^^^^^^^^^
    [javac] The method setEndings() from the type RussianStemmer is never used locally
    [javac] ----------
    [javac] ----------
    [javac] 18. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/ru/RussianStemmer.java
    [javac]  (at line 737)
    [javac] 	boolean r =
    [javac] 	        ^
    [javac] The local variable r is never read
    [javac] ----------
    [javac] ----------
    [javac] 19. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/standard/ParseException.java
    [javac]  (at line 13)
    [javac] 	public class ParseException extends java.io.IOException {
    [javac] 	             ^^^^^^^^^^^^^^
    [javac] The serializable class ParseException does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 20. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/standard/StandardTokenizerTokenManager.java
    [javac]  (at line 37)
    [javac] 	private final void jjCheckNAddStates(int start)
    [javac] 	                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method jjCheckNAddStates(int) from the type StandardTokenizerTokenManager is never used locally
    [javac] ----------
    [javac] ----------
    [javac] 21. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/standar
    [javac] d/StandardTokenizerTokenManager.java
    [javac]  (at line 86)
    [javac] 	int[] nextStates;
    [javac] 	      ^^^^^^^^^^
    [javac] The local variable nextStates is never read
    [javac] ----------
    [javac] ----------
    [javac] 22. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/standard/StandardTokenizerTokenManager.java
    [javac]  (at line 91)
    [javac] 	int j, kind = 0x7fffffff;
    [javac] 	    ^
    [javac] The local variable j is never read
    [javac] ----------
    [javac] ----------
    [javac] 23. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/standard/StandardTokenizerTokenManager.java
    [javac]  (at line 1095)
    [javac] 	int kind;
    [javac] 	    ^^^^
    [javac] The local variable kind is never read
    [javac] ----------
    [javac] ----------
    [javac] 24. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/standard/StandardTokenizerTokenManager.java
    [javac]  (at line 1096)
    [javac] 	Token specialToken = null;
    [javac] 	      ^^^^^^^^^^^^
    [javac] The local variable specialToken is never read
    [javac] ----------
    [javac] ----------
    [javac] 25. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/analysis/standard/TokenMgrError.java
    [javac]  (at line 4)
    [javac] 	public class TokenMgrError extends Error
    [javac] 	             ^^^^^^^^^^^^^
    [javac] The serializable class TokenMgrError does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 26. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Document.java
    [javac]  (at line 24)
    [javac] 	import org.apache.lucene.index.IndexReader;       // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.index.IndexReader is never used
    [javac] ----------
    [javac] ----------
    [javac] 27. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Document.java
    [javac]  (at line 25)
    [javac] 	import org.apache.lucene.search.Searcher;         // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.search.Searcher is never used
    [javac] ----------
    [javac] ----------
    [javac] 28. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Document.java
    [javac]  (at line 26)
    [javac] 	import org.apache.lucene.search.Hits;             // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.search.Hits is never used
    [javac] ----------
    [javac] ----------
    [javac] 29. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Document.java
    [javac]  (at line 42)
    [javac] 	public final class Document implements java.io.Serializable {
    [javac] 	                   ^^^^^^^^
    [javac] The serializable class Document does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 30. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Field.java
    [javac]  (at line 21)
    [javac] 	import org.apache.lucene.index.IndexReader;       // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.index.IndexReader is never used
    [javac] ----------
    [javac] ----------
    [javac] 31. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Field.java
    [javac]  (at line 22)
    [javac] 	import org.apache.lucene.search.Similarity;       // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.search.Similarity is never used
    [javac] ----------
    [javac] ----------
    [javac] 32. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Field.java
    [javac]  (at line 23)
    [javac] 	import org.apache.lucene.search.Hits;             // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.search.Hits is never used
    [javac] ----------
    [javac] ----------
    [javac] 33. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/document/Field.java
    [javac]  (at line 33)
    [javac] 	public final class Field implements java.io.Serializable {
    [javac] 	                   ^^^^^
    [javac] The serializable class Field does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 34. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/index/CompoundFileReader.java
    [javac]  (at line 48)
    [javac] 	private boolean open;
    [javac] 	                ^^^^
    [javac] The field CompoundFileReader.open is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 35. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/index/FieldInfos.java
    [javac]  (at line 76)
    [javac] 	int j = 0;
    [javac] 	    ^
    [javac] The local variable j is never read
    [javac] ----------
    [javac] ----------
    [javac] 36. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/index/FieldInfos.java
    [javac]  (at line 91)
    [javac] 	int j = 0;
    [javac] 	    ^
    [javac] The local variable j is never read
    [javac] ----------
    [javac] ----------
    [javac] 37. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/index/IndexReader.java
    [javac]  (at line 27)
    [javac] 	import org.apache.lucene.document.Field;          // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.document.Field is never used
    [javac] ----------
    [javac] ----------
    [javac] 38. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/index/SegmentInfos.java
    [javac]  (at line 25)
    [javac] 	final class SegmentInfos extends Vector {
    [javac] 	            ^^^^^^^^^^^^
    [javac] The serializable class SegmentInfos does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 39. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/index/Term.java
    [javac]  (at line 27)
    [javac] 	public final class Term implements Comparable, java.io.Serializable {
    [javac] 	                   ^^^^
    [javac] The serializable class Term does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 40. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/index/TermVectorsReader.java
    [javac]  (at line 191)
    [javac] 	int length = numTerms + tvf.readVInt();
    [javac] 	    ^^^^^^
    [javac] The local variable length is never read
    [javac] ----------
    [javac] ----------
    [javac] 41. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/ParseException.java
    [javac]  (at line 13)
    [javac] 	public class ParseException extends Exception {
    [javac] 	             ^^^^^^^^^^^^^^
    [javac] The serializable class ParseException does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 42. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParser.java
    [javac]  (at line 701)
    [javac] 	boolean rangein = false;
    [javac] 	        ^^^^^^^
    [javac] The local variable rangein is never read
    [javac] ----------
    [javac] ----------
    [javac] 43. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParser.java
    [javac]  (at line 964)
    [javac] 	private boolean jj_semLA;
    [javac] 	                ^^^^^^^^
    [javac] The field QueryParser.jj_semLA is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 44. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/Quer
    [javac] yParser.java
    [javac]  (at line 1038)
    [javac] 	static private final class LookaheadSuccess extends java.lang.Error { }
    [javac] 	                           ^^^^^^^^^^^^^^^^
    [javac] The serializable class LookaheadSuccess does not declare a static final serialVersionUID field of ty
    [javac] pe long
    [javac] ----------
    [javac] ----------
    [javac] 45. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 3)
    [javac] 	import java.util.Vector;
    [javac] 	       ^^^^^^^^^^^^^^^^
    [javac] The import java.util.Vector is never used
    [javac] ----------
    [javac] ----------
    [javac] 46. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 4)
    [javac] 	import java.io.*;
    [javac] 	       ^^^^^^^
    [javac] The import java.io is never used
    [javac] ----------
    [javac] ----------
    [javac] 47. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 5)
    [javac] 	import java.text.*;
    [javac] 	       ^^^^^^^^^
    [javac] The import java.text is never used
    [javac] ----------
    [javac] ----------
    [javac] 48. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 6)
    [javac] 	import java.util.*;
    [javac] 	       ^^^^^^^^^
    [javac] The import java.util is never used
    [javac] ----------
    [javac] ----------
    [javac] 49. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 7)
    [javac] 	import org.apache.lucene.index.Term;
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.index.Term is never used
    [javac] ----------
    [javac] ----------
    [javac] 50. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 8)
    [javac] 	import org.apache.lucene.analysis.*;
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.analysis is never used
    [javac] ----------
    [javac] ----------
    [javac] 51. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 9)
    [javac] 	import org.apache.lucene.document.*;
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.document is never used
    [javac] ----------
    [javac] ----------
    [javac] 52. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 10)
    [javac] 	import org.apache.lucene.search.*;
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.search is never used
    [javac] ----------
    [javac] ----------
    [javac] 53. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 24)
    [javac] 	private final int jjStartNfa_3(int pos, long active0)
    [javac] 	                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method jjStartNfa_3(int, long) from the type QueryParserTokenManager is never used locally
    [javac] ----------
    [javac] ----------
    [javac] 54. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 34)
    [javac] 	private final int jjStartNfaWithStates_3(int pos, int kind, int state)
    [javac] 	             
    [javac]      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method jjStartNfaWithStates_3(int, int, int) from the type QueryParserTokenManager is never used locally
    [javac] ----------
    [javac] ----------
    [javac] 55. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 91)
    [javac] 	private final void jjCheckNAddStates(int start)
    [javac] 	                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method jjCheckNAddStates(int) from the type QueryParserTokenManager is never used locally
    [javac] ----------
    [javac] ----------
    [javac] 56. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 104)
    [javac] 	int[] nextStates;
    [javac] 	      ^^^^^^^^^^
    [javac] The local variable nextStates is never read
    [javac] ----------
    [javac] ----------
    [javac] 57. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 109)
    [javac] 	int j, kind = 0x7fffffff;
    [javac] 	    ^
    [javac] The local variable j is never read
    [javac] ----------
    [javac] ----------
    [javac] 58. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 496)
    [javac] 	int[] nextStates;
    [javac] 	      ^^^^^^^^^^
    [javac] The local variable nextStates is never read
    [javac] ----------
    [javac] ----------
    [javac] 59. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 501)
    [javac] 	int j, kind = 0x7fffffff;
    [javac] 	    ^
    [javac] The local variable j is never read
    [javac] ----------
    [javac] ----------
    [javac] 60. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 619)
    [javac] 	int[] nextStates;
    [javac] 	      ^^^^^^^^^^
    [javac] The local variable nextStates is never read
    [javac] ----------
    [javac] ----------
    [javac] 61. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 624)
    [javac] 	int j, kind = 0x7fffffff;
    [javac] 	    ^
    [javac] The local variable j is never read
    [javac] ----------
    [javac] ----------
    [javac] 62. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 660)
    [javac] 	long l = 1L << (curChar & 077);
    [javac] 	     ^
    [javac] The local variable l is never read
    [javac] ----------
    [javac] ----------
    [javac] 63. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 672)
    [javac] 	int i1 = hiByte >> 6;
    [javac] 	    ^^
    [javac] The local variable i1 is never read
    [javac] ----------
    [javac] ----------
    [javac] 64. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 673)
    [javac] 	long l1 = 1L << (hiByte & 077);
    [javac] 	     ^^
    [javac] The local variable l1 is never read
    [javac] ----------
    [javac] ----------
    [javac] 65. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 674)
    [javac] 	int i2 = (curChar & 0xff) >> 6;
    [javac] 	    ^^
    [javac] The local variable i2 is never read
    [javac] ----------
    [javac] ----------
    [javac] 66. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 675)
    [javac] 	long l2 = 1L << (curChar & 077);
    [javac] 	     ^^
    [javac] The local variable l2 is never read
    [javac] ----------
    [javac] ----------
    [javac] 67. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 756)
    [javac] 	int[] nextStates;
    [javac] 	      ^^^^^^^^^^
    [javac] The local variable nextStates is never read
    [javac] ----------
    [javac] ----------
    [javac] 68. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 761)
    [javac] 	int j, kind = 0x7fffffff;
    [javac] 	    ^
    [javac] The local variable j is never read
    [javac] ----------
    [javac] ----------
    [javac] 69. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 971)
    [javac] 	int kind;
    [javac] 	    ^^^^
    [javac] The local variable kind is never read
    [javac] ----------
    [javac] ----------
    [javac] 70. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/QueryParserTokenManager.java
    [javac]  (at line 972)
    [javac] 	Token specialToken = null;
    [javac] 	      ^^^^^^^^^^^^
    [javac] The local variable specialToken is never read
    [javac] ----------
    [javac] ----------
    [javac] 71. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/queryParser/TokenMgrError.java
    [javac]  (at line 4)
    [javac] 	public class TokenMgrError extends Error
    [javac] 	             ^^^^^^^^^^^^^
    [javac] The serializable class TokenMgrError does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 72. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/BooleanClause.java
    [javac]  (at line 20)
    [javac] 	public class BooleanClause implements java.io.Serializable {
    [javac] 	             ^^^^^^^^^^^^^
    [javac] The serializable class BooleanClause does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 73. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/BooleanQuery.java
    [javac]  (at line 26)
    [javac] 	public class BooleanQuery extends Query {
    [javac] 	             ^^^^^^^^^^^^
    [javac] The serializable class BooleanQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 74. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/BooleanQuery.java
    [javac]  (at line 38)
    [javac] 	public static class TooManyClauses extends RuntimeException {}
    [javac] 	                    ^^^^^^^^^^^^^^
    [javac] The serializable class TooManyClauses does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 75. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/BooleanQuery.java
    [javac]  (at line 89)
    [javac] 	private class BooleanWeight implements Weight {
    [javac] 	              ^^^^^^^^^^^^^
    [javac] The serializable class BooleanWeight does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 76. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/BooleanScorer.java
    [javac]  (at line 145)
    [javac] 	private BooleanScorer scorer;
    [javac] 	                      ^^^^^^
    [javac] The field BooleanScorer.BucketTable.scorer is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 77. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/CachingWrapperFilter.java
    [javac]  (at line 31)
    [javac] 	public class CachingWrapperFilter extends Filter {
    [javac] 	             ^^^^^^^^^^^^^^^^^^^^
    [javac] The serializable class CachingWrapperFilter does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 78. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/ConjunctionScorer.java
    [javac]  (at line 105)
    [javac] 	public boolean equals(Object o1, Object o2) {
    [javac] 	               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The method equals(Object, Object) from the type new Comparator(){} is never used locally
    [javac] ----------
    [javac] ----------
    [javac] 79. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/DateFilter.java
    [javac]  (at line 35)
    [javac] 	public class DateFilter extends Filter {
    [javac] 	             ^^^^^^^^^^
    [javac] The serializable class DateFilter does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 80. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/Explanation.java
    [javac]  (at line 22)
    [javac] 	public class Explanation implements java.io.Serializable {
    [javac] 	             ^^^^^^^^^^^
    [javac] The serializable class Explanation does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 81. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/FieldDoc.java
    [javac]  (at line 41)
    [javac] 	public class FieldDoc
    [javac] 	             ^^^^^^^^
    [javac] The serializable class FieldDoc does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 82. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/FilteredQuery.java
    [javac]  (at line 38)
    [javac] 	public class FilteredQuery
    [javac] 	             ^^^^^^^^^^^^^
    [javac] The serializable class FilteredQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 83. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/FilteredQuery.java
    [javac]  (at line 61)
    [javac] 	return new Weight() {
    [javac] 	           ^^^^^^^^
    [javac] The serializable class  does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 84. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/FuzzyQuery.java
    [javac]  (at line 26)
    [javac] 	public final class FuzzyQuery extends MultiTermQuery {
    [javac] 	                   ^^^^^^^^^^
    [javac] The serializable class FuzzyQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 85. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/PhrasePrefixQuery.java
    [javac]  (at line 41)
    [javac] 	public class PhrasePrefixQuery extends Query {
    [javac] 	             ^^^^^^^^^^^^^^^^^
    [javac] The serializable class PhrasePrefixQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 86. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/PhrasePrefixQuery.java
    [javac]  (at line 109)
    [javac] 	private class PhrasePrefixWeight implements Weight {
    [javac] 	              ^^^^^^^^^^^^^^^^^^
    [javac] The serializable class PhrasePrefixWeight does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 87. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/PhraseQuery.java
    [javac]  (at line 29)
    [javac] 	public class PhraseQuery extends Query {
    [javac] 	             ^^^^^^^^^^^
    [javac] The serializable class PhraseQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 88. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/PhraseQuery.java
    [javac]  (at line 102)
    [javac] 	private class PhraseWeight implements Weight {
    [javac] 	              ^^^^^^^^^^^^
    [javac] The serializable class PhraseWeight does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 89. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/PrefixQuery.java
    [javac]  (at line 26)
    [javac] 	public class PrefixQuery extends Query {
    [javac] 	             ^^^^^^^^^^^
    [javac] The serializable class PrefixQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 90. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/QueryFilter.java
    [javac]  (at line 36)
    [javac] 	public class QueryFilter extends Filter {
    [javac] 	             ^^^^^^^^^^^
    [javac] The serializable class QueryFilter does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 91. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/RangeQuery.java
    [javac]  (at line 30)
    [javac] 	public class RangeQuery extends Query
    [javac] 	             ^^^^^^^^^^
    [javac] The serializable class RangeQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 92. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/RemoteSearchable.java
    [javac]  (at line 30)
    [javac] 	public class RemoteSearchable
    [javac] 	             ^^^^^^^^^^^^^^^^
    [javac] The serializable class RemoteSearchable does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 93. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/ScoreDoc.java
    [javac]  (at line 21)
    [javac] 	public class ScoreDoc implements java.io.Serializable {
    [javac] 	             ^^^^^^^^
    [javac] The serializable class ScoreDoc does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 94. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/Searchable.java
    [javac]  (at line 23)
    [javac] 	import org.apache.lucene.index.IndexReader;       // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.index.IndexReader is never used
    [javac] ----------
    [javac] ----------
    [javac] 95. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/Similarity.java
    [javac]  (at line 26)
    [javac] 	import org.apache.lucene.index.IndexReader;       // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.index.IndexReader is never used
    [javac] ----------
    [javac] ----------
    [javac] 96. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/Similarity.java
    [javac]  (at line 27)
    [javac] 	import org.apache.lucene.index.IndexWriter;       // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.index.IndexWriter is never used
    [javac] ----------
    [javac] ----------
    [javac] 97. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/Similarity.java
    [javac]  (at line 28)
    [javac] 	import org.apache.lucene.document.Field;          // for javadoc
    [javac] 	       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    [javac] The import org.apache.lucene.document.Field is never used
    [javac] ----------
    [javac] ----------
    [javac] 98. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/Sort.java
    [javac]  (at line 100)
    [javac] 	public class Sort
    [javac] 	             ^^^^
    [javac] The serializable class Sort does not declare a static final serialVersionUID field of type long

    [javac] ----------
    [javac] ----------
    [javac] 99. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/SortField.java
    [javac]  (at line 33)
    [javac] 	public class SortField
    [javac] 	             ^^^^^^^^^
    [javac] The serializable class SortField does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 100. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/TermQuery.java
    [javac]  (at line 27)
    [javac] 	public class TermQuery extends Query {
    [javac] 	             ^^^^^^^^^
    [javac] The serializable class TermQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 101. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/TermQuery.java
    [javac]  (at line 30)
    [javac] 	private class TermWeight implements Weight {
    [javac] 	              ^^^^^^^^^^
    [javac] The serializable class TermWeight does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 102. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/TopDocs.java
    [javac]  (at line 21)
    [javac] 	public class TopDocs implements java.io.Serializable {
    [javac] 	             ^^^^^^^
    [javac] The serializable class TopDocs does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 103. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/TopFieldDocs.java
    [javac]  (at line 30)
    [javac] 	public class TopFieldDocs
    [javac] 	             ^^^^^^^^^^^^
    [javac] The serializable class TopFieldDocs does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 104. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/WildcardQuery.java
    [javac]  (at line 32)
    [javac] 	public class WildcardQuery extends MultiTermQuery {
    [javac] 	             ^^^^^^^^^^^^^
    [javac] The serializable class WildcardQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 105. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/spans/SpanFirstQuery.java
    [javac]  (at line 26)
    [javac] 	public class SpanFirstQuery extends SpanQuery {
    [javac] 	             ^^^^^^^^^^^^^^
    [javac] The serializable class SpanFirstQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 106. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/spans/SpanNearQuery.java
    [javac]  (at line 32)
    [javac] 	public class SpanNearQuery extends SpanQuery {
    [javac] 	             ^^^^^^^^^^^^^
    [javac] The serializable class SpanNearQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 107. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/spans/SpanNotQuery.java
    [javac]  (at line 26)
    [javac] 	public class SpanNotQuery extends SpanQuery {
    [javac] 	             ^^^^^^^^^^^^
    [javac] The serializable class SpanNotQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 108. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/spans/SpanOrQuery.java
    [javac]  (at line 30)
    [javac] 	public class SpanOrQuery extends SpanQuery {
    [javac] 	             ^^^^^^^^^^^
    [javac] The serializable class SpanOrQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 109. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/spans/SpanScorer.java
    [javac]  (at line 29)
    [javac] 	private Weight weight;
    [javac] 	               ^^^^^^
    [javac] The field SpanScorer.weight is never read locally
    [javac] ----------
    [javac] ----------
    [javac] 110. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/spans/SpanTermQuery.java
    [javac]  (at line 29)
    [javac] 	public class SpanTermQuery extends SpanQuery {
    [javac] 	             ^^^^^^^^^^^^^
    [javac] The serializable class SpanTermQuery does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] ----------
    [javac] 111. WARNING in /projects/keyconcept/praveen/lucene-1.4.3/src/java/org/apache/lucene/search/spans/SpanWeight.java
    [javac]  (at line 34)
    [javac] 	class SpanWeight implements Weight {
    [javac] 	      ^^^^^^^^^^
    [javac] The serializable class SpanWeight does not declare a static final serialVersionUID field of type long
    [javac] ----------
    [javac] 111 problems (111 warnings)
     [rmic] RMI Compiling 1 class to /projects/keyconcept/praveen/lucene-1.4.3/build/classes/java
     [rmic] java.lang.ClassNotFoundException: org.apache.lucene.search.RemoteSearchable not found in gnu.gcj.runtime.SystemClassLoader{urls=[file:/usr/share/java/ant.jar,file:./,file:/usr/share/java/ant-launcher.jar,file:/usr/share/java/jaxp_parser_impl.jar,file:./,file:/usr/share/java/xml-commons-apis.jar,file:/usr/share/java/antlr.jar,file:./,file:/usr/share/java/ant/ant-antlr.jar,file:/usr/share/java/bcel.jar,file:./,file:/usr/share/java/ant/ant-apache-bcel.jar,file:/usr/share/java/log4j.jar,file:./,file:/usr/share/java/ant/ant-apache-log4j.jar,file:/usr/share/java/oro.jar,file:./,file:/usr/share/java/ant/ant-apache-oro.jar,file:/usr/share/java/regexp.jar,file:./,file:/usr/share/java/ant/ant-apache-regexp.jar,file:/usr/share/java/xml-commons-resolver.jar,file:./,file:/usr/share/java/ant/ant-apache-resolver.jar,file:/usr/share/java/jakarta-commons-logging.jar,file:./,file:/usr/share/java/ant/ant-commons-logging.jar,file:/usr/share/java/javamail/mailapi-1.3.1.jar,file:./,fi!
 le:/usr/share/java/javamail/providers-1.3.1.jar,file:/usr/share/java/jaf.jar,file:./,file:/usr/share/java/ant/ant-javamail.jar,file:/usr/share/java/jdepend.jar,file:./,file:/usr/share/java/ant/ant-jdepend.jar,file:/usr/share/java/ant/ant-jmf.jar,file:./,file:/usr/share/java/junit.jar,file:/usr/share/java/ant/ant-junit.jar,file:./,file:/usr/share/java/ant/ant-nodeps.jar,file:/usr/share/java/ant/ant-swing.jar,file:./,file:/usr/share/java/jaxp_transform_impl.jar,file:/usr/share/java/ant/ant-trax.jar,file:./,file:/usr/lib/jvm/java/lib/tools.jar], parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}
     [rmic]    at java.net.URLClassLoader.findClass(java.lang.String) (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at java.lang.ClassLoader.loadClass(java.lang.String, boolean) (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at java.lang.ClassLoader.loadClass(java.lang.String) (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at java.lang.Class.forName(java.lang.String, boolean, java.lang.ClassLoader) (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at gnu.java.rmi.rmic.RMIC.findClass() (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at gnu.java.rmi.rmic.RMIC.analyzeClass(java.lang.String) (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at gnu.java.rmi.rmic.RMIC.processClass(java.lang.String) (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at gnu.java.rmi.rmic.RMIC.run() (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at sun.rmi.rmic.Main.compile(java.lang.String[]) (Unknown Source)
     [rmic]    at java.lang.reflect.Method.invoke(java.lang.Object, java.lang.Object[]) (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at org.apache.tools.ant.taskdefs.rmic.SunRmic.execute() (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.taskdefs.Rmic.execute() (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.UnknownElement.execute() (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.Task.perform() (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.Target.execute() (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.Target.performTasks() (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.Project.executeTarget(java.lang.String) (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.Project.executeTargets(java.util.Vector) (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.Main.runBuild(java.lang.ClassLoader) (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.Main.startAnt(java.lang.String[], java.util.Properties, java.lang.ClassLoader) (/usr/lib/libant-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.launch.Launcher.run(java.lang.String[]) (/usr/lib/libant-launcher-1.6.2.jar.so)
     [rmic]    at org.apache.tools.ant.launch.Launcher.main(java.lang.String[]) (/usr/lib/libant-launcher-1.6.2.jar.so)
     [rmic]    at gnu.java.lang.MainThread.call_main() (/usr/lib/libgcj.so.6.0.0)
     [rmic]    at gnu.java.lang.MainThread.run() (/usr/lib/libgcj.so.6.0.0)

------=_20051218200754_48319
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_20051218200754_48319--



From java-user-return-18033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 13:52:09 2005
Return-Path: <java-user-return-18033-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52961 invoked from network); 19 Dec 2005 13:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 13:52:08 -0000
Received: (qmail 96853 invoked by uid 500); 19 Dec 2005 13:52:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96827 invoked by uid 500); 19 Dec 2005 13:52:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96814 invoked by uid 99); 19 Dec 2005 13:52:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 05:52:00 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 05:51:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DA36C13E2005; Mon, 19 Dec 2005 08:51:30 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3205213E201A
	for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 08:50:38 -0500 (EST)
In-Reply-To: <36483.129.237.127.202.1134958074.squirrel@webmail.ittc.ku.edu>
References: <36444.129.237.127.202.1134953509.squirrel@webmail.ittc.ku.edu> <901c03930512181753g3a256829k9852cd540a0e1a57@mail.gmail.com> <36483.129.237.127.202.1134958074.squirrel@webmail.ittc.ku.edu>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DBAC59B9-A4D9-4376-A99D-CB5B8F6D289E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Index Question
Date: Mon, 19 Dec 2005 08:50:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please try using the JDK from Sun.  I believe this is the issue  
you're having with Ant and compiling Lucene.

	Erik


On Dec 18, 2005, at 9:07 PM, praveenl@ittc.ku.edu wrote:

> Thanks for the reply. I thought of doing it. I downloaded the latest
> source and tried to build it using ant. I am new to using 'ant'. It  
> gives
> me an error and I think the problem is with 'rmic'. I never came  
> across
> this before either. It says -
>
> BUILD FAILED
> /projects/keyconcept/praveen/lucene-1.4.3/build.xml:145: Rmic  
> failed; see
> the compiler error output for details.
>
> I am also attaching the output from ant. Is it a problem with the
> installation of rmic or java or ant or am I doing something wrong?
>
> I dont know if this is the right place to ask this, but any help  
> will be
> greatly appreciated.
>
> Thanks,
>
> Praveen.
>
>
>> On 12/19/05, praveenl@ittc.ku.edu <praveenl@ittc.ku.edu> wrote:
>>> Hi,
>>>
>>> I know that lucene index takes a directory of files to be indexed  
>>> and
>>> builds the index. Now is there a way to specify the number of  
>>> files from
>>> the directory to be indexed?
>>>
>>> I mean if I have a directory of 10,000 files and I want an index  
>>> of only
>>> 2000 files from these 10k files, how can specify the limit?
>>>
>>
>> Lucene is only a search engine library. This means you can customize
>> Lucene to behave exactly how you want it to behave. For your issue, I
>> guess the fastest way is to modify the Lucene demo program to only
>> read 2000 files instead of every single file in the directory.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> <ant_op.txt>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 16:31:32 2005
Return-Path: <java-user-return-18034-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48588 invoked from network); 19 Dec 2005 16:31:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 16:31:31 -0000
Received: (qmail 61862 invoked by uid 500); 19 Dec 2005 16:31:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61759 invoked by uid 500); 19 Dec 2005 16:31:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61697 invoked by uid 99); 19 Dec 2005 16:31:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 08:31:17 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 08:31:14 -0800
Received: by nproxy.gmail.com with SMTP id h2so399525nfe
        for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 08:30:52 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ToyxasOJsble2j/Q4jgw8XzxxiO55Mv+6KrIhvThTHr6vrlR3vSlfu+VdL0P6u53Yy2vHdhrErS0gSTo93CL/wplgn1NPQdXZ8BBobB4+sd0Ix2J2Wr5dg8ZG+Ccxpcbr0lurOr7MbxGrc7BeG0uL+vFKYKGSbj0bzWkq6w7+OQ=
Received: by 10.48.143.4 with SMTP id q4mr254539nfd;
        Mon, 19 Dec 2005 08:30:52 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Mon, 19 Dec 2005 08:30:52 -0800 (PST)
Message-ID: <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com>
Date: Mon, 19 Dec 2005 17:30:52 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
	 <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
	 <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
	 <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have moved from my approach:
Query query =3D QueryParser.parse("big lucene expression", "afield",
LuceneHelper.getAnalyzer());

to building the query based on BooleanQuery, PhareQuery, TermQuery
etc...But before the analyzer was doing a bunch of work in my incoming
words, and I dont see an easy way to do the same sort of stuff to the
incoming  words used in PhareQuery, TermQuery etc.

Isnt there such a  way I miss to see? Any example somewhere (LIA etc)

thanks

On 12/17/05, Yonik Seeley <yseeley@gmail.com> wrote:
> Ah, sorry.
>
> Still, this doesn't seem like the most desirable behavior.
> It would be nice if we could fine a way to fix it.
>
> -Yonik
>
> On 12/16/05, javier muguruza <jmuguruza@gmail.com> wrote:
> > Yonik,
> >
> > this was due to the additional parenthses I was using, see my last
> > email. I think I'll rewrite with the lucene api as Erik said.
> >
> > thanks,
> > javi
> >
> >
> > On 12/16/05, Yonik Seeley <yseeley@gmail.com> wrote:
> > > I can't reproduce this behavior with the current version of Lucene.
> > >
> > > +text:solar  =3D> 112 docs
> > > +text:"a a a" =3D> 0 docs because a is a stop word
> > > +text"solar" +text:"a a a" =3D> 112 docs
> > >
> > > -Yonik
> > >
> > >
> > > On 12/15/05, javier muguruza <jmuguruza@gmail.com> wrote:
> > > >  Hi,
> > > >
> > > > Suppose I have a query like this:
> > > > +attachments:purpose
> > > >  that returns N hits.
> > > > If I add another condition
> > > > +attachments:purpose +attachments:"hello world"
> > > > I still get some hits, but if the words in the "hello world" phrase
> > > > happen to be all stop words I get 0 hits.
> > > >
> > > > I can fix that by checking at least one of them is not a stop word,
> > > > but just wanted to know wether thats expected behaviour.
> > > >
> > > >
> > > > Im using lucene1.9rc.
> > > > thanks
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 18:23:50 2005
Return-Path: <java-user-return-18035-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6220 invoked from network); 19 Dec 2005 18:23:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 18:23:49 -0000
Received: (qmail 17074 invoked by uid 500); 19 Dec 2005 18:23:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17051 invoked by uid 500); 19 Dec 2005 18:23:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17040 invoked by uid 99); 19 Dec 2005 18:23:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 10:23:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.137.212.28] (HELO basicbox6.server-home.net) (195.137.212.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 10:23:39 -0800
Received: from sleipnir2 (dslb-084-061-020-223.pools.arcor-ip.net [84.61.20.223])
	by basicbox6.server-home.net (Postfix) with ESMTP id D4B857182B1
	for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 19:23:13 +0100 (CET)
From: "Klaus" <klaus@vommond.de>
To: <java-user@lucene.apache.org>
Subject: Similarity
Date: Mon, 19 Dec 2005 19:23:12 +0100
Message-ID: <002401c604c9$458a7fc0$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0025_01C604D1.A74EE7C0"
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcYEyUUA/KXDP7XaRJyHDB/CbJEXeQ==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0025_01C604D1.A74EE7C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

I'm new to lucene and a have some questions according to the entire system.

 

I) What is exactly written to the index? Is the index just an inverted list?
Is there term weight scoring stored?

 

II) How works the retrieval process work? I guess so:

 

1)       Get all the documents from the index via the inverted list. 

2)       Compute the score for every document and the query with the
similarity class. As far as i can see, the similarity is just based on the
tf-ddf weighting? Is there no cosine measure or so used, to compare the
document and the query vector?

 

Thanks a lot

 

Klaus


------=_NextPart_000_0025_01C604D1.A74EE7C0--


From java-user-return-18036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 18:50:24 2005
Return-Path: <java-user-return-18036-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18977 invoked from network); 19 Dec 2005 18:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 18:50:23 -0000
Received: (qmail 57893 invoked by uid 500); 19 Dec 2005 18:50:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57873 invoked by uid 500); 19 Dec 2005 18:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57862 invoked by uid 99); 19 Dec 2005 18:50:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 10:50:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 10:50:16 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5F26E13E201A; Mon, 19 Dec 2005 13:49:55 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3C5F213E2005
	for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 13:49:49 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com>
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com> <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com> <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com> <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com> <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <15EAD065-210A-46CD-AA06-8D5BC54C7733@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: all stop words in exact phrase get 0 hits
Date: Mon, 19 Dec 2005 13:49:48 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 19, 2005, at 11:30 AM, javier muguruza wrote:

> I have moved from my approach:
> Query query = QueryParser.parse("big lucene expression", "afield",
> LuceneHelper.getAnalyzer());
>
> to building the query based on BooleanQuery, PhareQuery, TermQuery
> etc...But before the analyzer was doing a bunch of work in my incoming
> words, and I dont see an easy way to do the same sort of stuff to the
> incoming  words used in PhareQuery, TermQuery etc.
>
> Isnt there such a  way I miss to see? Any example somewhere (LIA etc)

Look at the AnalyzerDemo code.  There isn't anything built in, as  
doing it only involves a few lines of code.  Run a String (via  
StringReader) through an Analyzer, pluck out the tokens from the  
resultant TokenStream, create the queries you want from those  
tokens.   I use this technique frequently to bypass the  
idiosyncrasies of QueryParser or in places where using the QP syntax  
is undesirable but analysis still needs to occur.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 19:01:56 2005
Return-Path: <java-user-return-18037-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23867 invoked from network); 19 Dec 2005 19:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 19:01:56 -0000
Received: (qmail 72856 invoked by uid 500); 19 Dec 2005 19:01:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72277 invoked by uid 500); 19 Dec 2005 19:01:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72258 invoked by uid 99); 19 Dec 2005 19:01:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 11:01:47 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 11:01:46 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7350A13E202A; Mon, 19 Dec 2005 14:01:25 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1C2B813E201A
	for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 14:01:07 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <002401c604c9$458a7fc0$6402a8c0@sleipnir2>
References: <002401c604c9$458a7fc0$6402a8c0@sleipnir2>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <63CFC758-884E-46E3-BFD7-262883409633@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Similarity
Date: Mon, 19 Dec 2005 14:01:07 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 19, 2005, at 1:23 PM, Klaus wrote:
> I) What is exactly written to the index? Is the index just an  
> inverted list?
> Is there term weight scoring stored?


	http://lucene.apache.org/java/docs/fileformats.html

> 1)       Get all the documents from the index via the inverted list.

You can random access documents from the IndexReader API, if this is  
what you mean.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 19:14:42 2005
Return-Path: <java-user-return-18038-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29076 invoked from network); 19 Dec 2005 19:14:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 19:14:42 -0000
Received: (qmail 87427 invoked by uid 500); 19 Dec 2005 19:14:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87389 invoked by uid 500); 19 Dec 2005 19:14:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87357 invoked by uid 99); 19 Dec 2005 19:14:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 11:14:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 11:14:34 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D05185B78A; Mon, 19 Dec 2005 11:14:13 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id C72967F459
	for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 11:14:13 -0800 (PST)
Date: Mon, 19 Dec 2005 11:14:13 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <15EAD065-210A-46CD-AA06-8D5BC54C7733@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0512191058470.9513@hal.rescomp.berkeley.edu>
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
 <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
 <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
 <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com>
 <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com>
 <15EAD065-210A-46CD-AA06-8D5BC54C7733@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > I have moved from my approach:
: > Query query = QueryParser.parse("big lucene expression", "afield",
: > LuceneHelper.getAnalyzer());
: >
: > to building the query based on BooleanQuery, PhareQuery, TermQuery
: > etc...But before the analyzer was doing a bunch of work in my incoming
: > words, and I dont see an easy way to do the same sort of stuff to the
: > incoming  words used in PhareQuery, TermQuery etc.

In addition to Erik's suggestion, something that i find frequently makes
sense is to use the QueryParser in each case where you are dealing with a
discrete "input string" -- and then combine them into a BooleanQuery
(along with any other progromatically generated TermQueries you might want
for other reasons)

For example, it looks like your applciation is targeted at searching email
right?  let's assume your application allows the user to specify the
following inputs

    * a text box for search words
    * a text box for people's names/email
    * pulldowns for picking date ranges

...and you want to look in the subject, body, and attachment fields for
the input words (with differnet boosts) and in all of the header fields
for the name/email input.   you can builda Date object out of the pulldown
yourself, and then do something like this with the two strings...

   QueryParser subP = new QueryParser("subject",SomeAnalyzer)
   QueryParser bodyP = new QueryParser("body",SomeAnalyzer)
   QueryParser attachP = new QueryParser("attachemnts",SomeAnalyzer)
   QueryParser headP = new QueryParser("headers",AnalyzerThatKnowsAboutEmailAddress)
   Query s = subP.parse(words);
   s.setBoost(2.0)
   Query b = bodyP.parse(words);
   Query a = attachP.parse(words);
   a.setBoost(0.5)
   Query h = headP.parse(person);
   h.setBoost(1.5)
   BooleanQuery bq = new BooleanQuery();
   bq.add(s,false,false);
   bq.add(b,false,false);
   bq.add(a,false,false);
   bq.add(h,false,false);

...and then execute your search using a filter built from the date range
pulldowns.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 21:18:39 2005
Return-Path: <java-user-return-18039-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95354 invoked from network); 19 Dec 2005 21:18:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 21:18:39 -0000
Received: (qmail 70347 invoked by uid 500); 19 Dec 2005 21:18:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70272 invoked by uid 500); 19 Dec 2005 21:18:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70261 invoked by uid 99); 19 Dec 2005 21:18:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 13:18:03 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 13:18:03 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 06C4913E201A; Mon, 19 Dec 2005 16:17:40 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 0483613E2005
	for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 16:17:35 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <Pine.LNX.4.58.0512191058470.9513@hal.rescomp.berkeley.edu>
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com> <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com> <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com> <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com> <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com> <15EAD065-210A-46CD-AA06-8D5BC54C7733@ehatchersolutions.com> <Pine.LNX.4.58.0512191058470.9513@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <14F8D9C2-8C61-4AFE-BC94-3D8C8F4AA00D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: all stop words in exact phrase get 0 hits
Date: Mon, 19 Dec 2005 16:17:35 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hoss - the main caveat with this approach is that a user could select  
a different field from any of the designated text boxes.  Putting  
"subject:foo" in the name text box for example.

I think this is one of my biggest issues with QueryParser these days,  
it exposes too much power.  It's like giving a SQL text box to your  
database application (read-only, of course).  There are generally  
fields not made for user querying.

Caveat asides, the technique you describe is a good one and worth  
considering when dealing with these types of situations.

	Erik



On Dec 19, 2005, at 2:14 PM, Chris Hostetter wrote:

>
> : > I have moved from my approach:
> : > Query query = QueryParser.parse("big lucene expression", "afield",
> : > LuceneHelper.getAnalyzer());
> : >
> : > to building the query based on BooleanQuery, PhareQuery, TermQuery
> : > etc...But before the analyzer was doing a bunch of work in my  
> incoming
> : > words, and I dont see an easy way to do the same sort of stuff  
> to the
> : > incoming  words used in PhareQuery, TermQuery etc.
>
> In addition to Erik's suggestion, something that i find frequently  
> makes
> sense is to use the QueryParser in each case where you are dealing  
> with a
> discrete "input string" -- and then combine them into a BooleanQuery
> (along with any other progromatically generated TermQueries you  
> might want
> for other reasons)
>
> For example, it looks like your applciation is targeted at  
> searching email
> right?  let's assume your application allows the user to specify the
> following inputs
>
>     * a text box for search words
>     * a text box for people's names/email
>     * pulldowns for picking date ranges
>
> ...and you want to look in the subject, body, and attachment fields  
> for
> the input words (with differnet boosts) and in all of the header  
> fields
> for the name/email input.   you can builda Date object out of the  
> pulldown
> yourself, and then do something like this with the two strings...
>
>    QueryParser subP = new QueryParser("subject",SomeAnalyzer)
>    QueryParser bodyP = new QueryParser("body",SomeAnalyzer)
>    QueryParser attachP = new QueryParser("attachemnts",SomeAnalyzer)
>    QueryParser headP = new QueryParser 
> ("headers",AnalyzerThatKnowsAboutEmailAddress)
>    Query s = subP.parse(words);
>    s.setBoost(2.0)
>    Query b = bodyP.parse(words);
>    Query a = attachP.parse(words);
>    a.setBoost(0.5)
>    Query h = headP.parse(person);
>    h.setBoost(1.5)
>    BooleanQuery bq = new BooleanQuery();
>    bq.add(s,false,false);
>    bq.add(b,false,false);
>    bq.add(a,false,false);
>    bq.add(h,false,false);
>
> ...and then execute your search using a filter built from the date  
> range
> pulldowns.
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 19 22:57:03 2005
Return-Path: <java-user-return-18040-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35939 invoked from network); 19 Dec 2005 22:57:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Dec 2005 22:57:03 -0000
Received: (qmail 16467 invoked by uid 500); 19 Dec 2005 22:56:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16435 invoked by uid 500); 19 Dec 2005 22:56:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16424 invoked by uid 99); 19 Dec 2005 22:56:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 14:56:55 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 14:56:55 -0800
Received: by nproxy.gmail.com with SMTP id h2so429748nfe
        for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 14:56:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pFTRd8rj4JyzfLwhENLoDukMdAjnxAJpMpwluDh0EsNGTI55NR1bdZQ8XIm+5xk3Xweyr+yOQU2DedfYdbVhhg3nTJ3WsrlzfoOmbg2uLCWnJv/f7o2DHsmupN5VTU8Di6+fIwzi8RclJYeeQ1VSs6jO9vitxcOM1sFN8Jb7lpQ=
Received: by 10.48.225.3 with SMTP id x3mr273297nfg;
        Mon, 19 Dec 2005 14:56:31 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Mon, 19 Dec 2005 14:56:33 -0800 (PST)
Message-ID: <f071061b0512191456u743f178dn2b7b530c603b84af@mail.gmail.com>
Date: Mon, 19 Dec 2005 23:56:33 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <14F8D9C2-8C61-4AFE-BC94-3D8C8F4AA00D@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
	 <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
	 <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
	 <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com>
	 <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com>
	 <15EAD065-210A-46CD-AA06-8D5BC54C7733@ehatchersolutions.com>
	 <Pine.LNX.4.58.0512191058470.9513@hal.rescomp.berkeley.edu>
	 <14F8D9C2-8C61-4AFE-BC94-3D8C8F4AA00D@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What Erik mentions is what I was looking for. I have not had a look at
the code yet, but it sounds like it. I'll have a look at the
AnalyzerDemo  code tomorrow.

In my case I guess I could use Chris' approach too, but it will be
easier the other one. For the record, my UI has both a 'simple' UI
with textboxes and an 'advanced' one where the user will have to use
proper queryparser syntax, if he dares :)

thanks guys,
javier

On 12/19/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> Hoss - the main caveat with this approach is that a user could select
> a different field from any of the designated text boxes.  Putting
> "subject:foo" in the name text box for example.
>
> I think this is one of my biggest issues with QueryParser these days,
> it exposes too much power.  It's like giving a SQL text box to your
> database application (read-only, of course).  There are generally
> fields not made for user querying.
>
> Caveat asides, the technique you describe is a good one and worth
> considering when dealing with these types of situations.
>
>         Erik
>
>
>
> On Dec 19, 2005, at 2:14 PM, Chris Hostetter wrote:
>
> >
> > : > I have moved from my approach:
> > : > Query query =3D QueryParser.parse("big lucene expression", "afield"=
,
> > : > LuceneHelper.getAnalyzer());
> > : >
> > : > to building the query based on BooleanQuery, PhareQuery, TermQuery
> > : > etc...But before the analyzer was doing a bunch of work in my
> > incoming
> > : > words, and I dont see an easy way to do the same sort of stuff
> > to the
> > : > incoming  words used in PhareQuery, TermQuery etc.
> >
> > In addition to Erik's suggestion, something that i find frequently
> > makes
> > sense is to use the QueryParser in each case where you are dealing
> > with a
> > discrete "input string" -- and then combine them into a BooleanQuery
> > (along with any other progromatically generated TermQueries you
> > might want
> > for other reasons)
> >
> > For example, it looks like your applciation is targeted at
> > searching email
> > right?  let's assume your application allows the user to specify the
> > following inputs
> >
> >     * a text box for search words
> >     * a text box for people's names/email
> >     * pulldowns for picking date ranges
> >
> > ...and you want to look in the subject, body, and attachment fields
> > for
> > the input words (with differnet boosts) and in all of the header
> > fields
> > for the name/email input.   you can builda Date object out of the
> > pulldown
> > yourself, and then do something like this with the two strings...
> >
> >    QueryParser subP =3D new QueryParser("subject",SomeAnalyzer)
> >    QueryParser bodyP =3D new QueryParser("body",SomeAnalyzer)
> >    QueryParser attachP =3D new QueryParser("attachemnts",SomeAnalyzer)
> >    QueryParser headP =3D new QueryParser
> > ("headers",AnalyzerThatKnowsAboutEmailAddress)
> >    Query s =3D subP.parse(words);
> >    s.setBoost(2.0)
> >    Query b =3D bodyP.parse(words);
> >    Query a =3D attachP.parse(words);
> >    a.setBoost(0.5)
> >    Query h =3D headP.parse(person);
> >    h.setBoost(1.5)
> >    BooleanQuery bq =3D new BooleanQuery();
> >    bq.add(s,false,false);
> >    bq.add(b,false,false);
> >    bq.add(a,false,false);
> >    bq.add(h,false,false);
> >
> > ...and then execute your search using a filter built from the date
> > range
> > pulldowns.
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 00:37:20 2005
Return-Path: <java-user-return-18041-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69164 invoked from network); 20 Dec 2005 00:37:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 00:37:20 -0000
Received: (qmail 21862 invoked by uid 500); 20 Dec 2005 00:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21799 invoked by uid 500); 20 Dec 2005 00:37:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21788 invoked by uid 99); 20 Dec 2005 00:37:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 16:37:14 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.237.125.220] (HELO stephens.ittc.ku.edu) (129.237.125.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 19 Dec 2005 16:37:13 -0800
Received: from webmail.ittc.ku.edu (fiasco.ittc.ku.edu [129.237.125.27])
	by stephens.ittc.ku.edu (8.12.11/ITTC-3.1) with ESMTP id jBK0andL030012
	for <java-user@lucene.apache.org>; Mon, 19 Dec 2005 18:36:49 -0600
Received: from 129.237.127.202
        (SquirrelMail authenticated user praveenl)
        by webmail.ittc.ku.edu with HTTP;
        Mon, 19 Dec 2005 18:36:49 -0600 (CST)
Message-ID: <37379.129.237.127.202.1135039009.squirrel@webmail.ittc.ku.edu>
In-Reply-To: <DBAC59B9-A4D9-4376-A99D-CB5B8F6D289E@ehatchersolutions.com>
References: <36444.129.237.127.202.1134953509.squirrel@webmail.ittc.ku.edu>
    <901c03930512181753g3a256829k9852cd540a0e1a57@mail.gmail.com>
    <36483.129.237.127.202.1134958074.squirrel@webmail.ittc.ku.edu>
    <DBAC59B9-A4D9-4376-A99D-CB5B8F6D289E@ehatchersolutions.com>
Date: Mon, 19 Dec 2005 18:36:49 -0600 (CST)
Subject: Re: Index Question
From: praveenl@ittc.ku.edu
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.5
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-VirusScan: Clean
X-MailScanner-From: praveenl@ittc.ku.edu
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That helped thanx.

Praveen.


> Please try using the JDK from Sun.  I believe this is the issue
> you're having with Ant and compiling Lucene.
>
> 	Erik
>
>
> On Dec 18, 2005, at 9:07 PM, praveenl@ittc.ku.edu wrote:
>
>> Thanks for the reply. I thought of doing it. I downloaded the latest
>> source and tried to build it using ant. I am new to using 'ant'. It
>> gives
>> me an error and I think the problem is with 'rmic'. I never came
>> across
>> this before either. It says -
>>
>> BUILD FAILED
>> /projects/keyconcept/praveen/lucene-1.4.3/build.xml:145: Rmic
>> failed; see
>> the compiler error output for details.
>>
>> I am also attaching the output from ant. Is it a problem with the
>> installation of rmic or java or ant or am I doing something wrong?
>>
>> I dont know if this is the right place to ask this, but any help
>> will be
>> greatly appreciated.
>>
>> Thanks,
>>
>> Praveen.
>>
>>
>>> On 12/19/05, praveenl@ittc.ku.edu <praveenl@ittc.ku.edu> wrote:
>>>> Hi,
>>>>
>>>> I know that lucene index takes a directory of files to be indexed
>>>> and
>>>> builds the index. Now is there a way to specify the number of
>>>> files from
>>>> the directory to be indexed?
>>>>
>>>> I mean if I have a directory of 10,000 files and I want an index
>>>> of only
>>>> 2000 files from these 10k files, how can specify the limit?
>>>>
>>>
>>> Lucene is only a search engine library. This means you can customize
>>> Lucene to behave exactly how you want it to behave. For your issue, I
>>> guess the fastest way is to modify the Lucene demo program to only
>>> read 2000 files instead of every single file in the directory.
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> <ant_op.txt>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 09:19:38 2005
Return-Path: <java-user-return-18042-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51668 invoked from network); 20 Dec 2005 09:19:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 09:19:37 -0000
Received: (qmail 65841 invoked by uid 500); 20 Dec 2005 09:19:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65822 invoked by uid 500); 20 Dec 2005 09:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65811 invoked by uid 99); 20 Dec 2005 09:19:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 01:19:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrshwrk@gmail.com designates 64.233.162.207 as permitted sender)
Received: from [64.233.162.207] (HELO zproxy.gmail.com) (64.233.162.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 01:19:29 -0800
Received: by zproxy.gmail.com with SMTP id i28so1403050nzi
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 01:19:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=VHxmrb3F5x5nqbksQc8nzkAZ6wAIqc0cZiz+emn7mGrcL4UELTos93KeFETuB9Z6ecmTgzbS/cYPNZ72Z9yzAEJ/pxUCiu1t0xcCuPi2ncgauNfnnMNApRpsxRKnZkVHjOF3PbAUUWXIdRfcbM6qwuy/FU2rStuijt7iiXVn6p0=
Received: by 10.64.10.15 with SMTP id 15mr3902530qbj;
        Tue, 20 Dec 2005 01:19:08 -0800 (PST)
Received: by 10.64.151.3 with HTTP; Tue, 20 Dec 2005 01:19:08 -0800 (PST)
Message-ID: <bf155c6c0512200119g2994aed8veea06df6415b38a5@mail.gmail.com>
Date: Tue, 20 Dec 2005 14:49:08 +0530
From: Chandana <chandana3002@gmail.com>
Reply-To: chandana3002@gmail.com
Sender: rrshwrk@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
In-Reply-To: <901c03930512131833o3f2bd7b5ia5183746ee36f96d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5324_32842702.1135070348096"
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	 <001c01c5f60d$5089c0e0$b900a8c0@jhi>
	 <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	 <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
	 <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
	 <901c03930512131833o3f2bd7b5ia5183746ee36f96d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5324_32842702.1135070348096
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi all,

This might be a little off topic to lucene. But i guess it is still in the
interest of IR.
I wanted a rough idea on  what applications/fields LDA has been used and
observations.
If any body did a simlar study (other than that given in the paper by Blei
et al . ), that will be of great help to me.

thanks
chandana

On 12/14/05, Dave Kor <davekor@gmail.com> wrote:
>
> On 12/13/05, Dave Kor <davekor@gmail.com> wrote:
> > On 12/13/05, Ian Soboroff <ian.soboroff@nist.gov> wrote:
> > > Paul Libbrecht <paul@activemath.org> writes:
> > >
> > > > We're also thinking about implementing something similar to LSI
> within
> > > > ActiveMath which is lucene-powered where both formulae and text
> > > > searching would benefit of the latent-semantic-similarity. I've bee=
n
> > > > refrained of doing "exactly this" at least since LSI is patented.
> This
> > > > might also be a reason why there's no implementation in Lucene's
> > > > sandbox.
> > > >
> > > > Have you looked at other vector-based approaches which are not
> exactly LSI ?
> > > > Have you looked at InfoMap NLP ?
> > >
> > > Look for Thomas Hofmann's "probabilistic LSI", and other recent work
> > > which cites it.
> >
> > You might also be interested in "Latent Dirichlet Allocation (LDA)" by
> > David Blei. In short, it is a more advanced version of "probabilistic
> > LSI". I am currently writing some code to dump Lucene documents into a
> > file format used by Blei's LDA implementation written in C.
>
> Following up on my previous mail about LDA, here are a few links
>
> David Blei, Andrew Ng and Michael Jordan's paper on LDA
> http://www.cs.berkeley.edu/~blei/papers/blei03a.pdf
>
> David Blei's C implementation of LDA
> http://www.cs.berkeley.edu/~blei/lda-c/
>
> Gregor Heinrich's port of LDA-c to Java http://www.arbylon.net/projects/
> Note: To use his code in non-windows platform, you will need to
> replace his fast Mersenne Twister based random number generator with
> Java's standard random number generator.
>
>
>
> Regards,
> Dave.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5324_32842702.1135070348096--

From java-user-return-18043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 09:20:30 2005
Return-Path: <java-user-return-18043-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52239 invoked from network); 20 Dec 2005 09:20:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 09:20:30 -0000
Received: (qmail 67924 invoked by uid 500); 20 Dec 2005 09:20:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67903 invoked by uid 500); 20 Dec 2005 09:20:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67892 invoked by uid 99); 20 Dec 2005 09:20:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 01:20:23 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_MESSAGE,MAILTO_TO_SPAM_ADDR,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rrshwrk@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO zproxy.gmail.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 01:20:22 -0800
Received: by zproxy.gmail.com with SMTP id i28so1403179nzi
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 01:20:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:sender:to:subject:in-reply-to:mime-version:content-type:references;
        b=gq5feTfLhSqbOnnKUTI/jTnXRT+5gpAGi2tpzzYo2mosm0QizxwGNu8DW9W2bdWRJdEUO5eO/9kQa5Sqe1/hQyss36sJT9XBTqMITzaR7GNGzGggiC7+l2bJGIpaE/8L3vuLkhuVA8EtxGN6ESbzP0DEAgHg73iP6tx28G3EM5U=
Received: by 10.64.156.20 with SMTP id d20mr3923545qbe;
        Tue, 20 Dec 2005 01:20:02 -0800 (PST)
Received: by 10.64.151.3 with HTTP; Tue, 20 Dec 2005 01:20:02 -0800 (PST)
Message-ID: <bf155c6c0512200120v6cf9923q8abdb0f6ca96a69c@mail.gmail.com>
Date: Tue, 20 Dec 2005 14:50:02 +0530
From: Chandana <chandana3002@gmail.com>
Reply-To: chandana3002@gmail.com
Sender: rrshwrk@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Lucene + LSI
In-Reply-To: <bf155c6c0512200119g2994aed8veea06df6415b38a5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5336_18260838.1135070402143"
References: <bf155c6c0511301541n6bbd97f0y52091aec4854a651@mail.gmail.com>
	 <e72c67f70511301602v7eef9aa3l6c435954c7376718@mail.gmail.com>
	 <001c01c5f60d$5089c0e0$b900a8c0@jhi>
	 <bf155c6c0511301757i20b17ee6h2319a2bffabae0b0@mail.gmail.com>
	 <438EB903.80503@activemath.org> <9cffyoyt6um.fsf@rogue.ncsl.nist.gov>
	 <901c03930512121822y96eb2c0vdfd0527a29921795@mail.gmail.com>
	 <901c03930512131833o3f2bd7b5ia5183746ee36f96d@mail.gmail.com>
	 <bf155c6c0512200119g2994aed8veea06df6415b38a5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_5336_18260838.1135070402143
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

by LDA, I mean
"Latent Dirichlet Allocation (LDA)" by  David Blei.

On 12/20/05, Chandana <chandana3002@gmail.com> wrote:
>
> Hi all,
>
> This might be a little off topic to lucene. But i guess it is still in th=
e
> interest of IR.
> I wanted a rough idea on  what applications/fields LDA has been used and
> observations.
> If any body did a simlar study (other than that given in the paper by Ble=
i
> et al . ), that will be of great help to me.
>
> thanks
> chandana
>
> On 12/14/05, Dave Kor <davekor@gmail.com> wrote:
> >
> > On 12/13/05, Dave Kor <davekor@gmail.com> wrote:
> > > On 12/13/05, Ian Soboroff <ian.soboroff@nist.gov> wrote:
> > > > Paul Libbrecht < paul@activemath.org> writes:
> > > >
> > > > > We're also thinking about implementing something similar to LSI
> > within
> > > > > ActiveMath which is lucene-powered where both formulae and text
> > > > > searching would benefit of the latent-semantic-similarity. I've
> > been
> > > > > refrained of doing "exactly this" at least since LSI is patented.
> > This
> > > > > might also be a reason why there's no implementation in Lucene's
> > > > > sandbox.
> > > > >
> > > > > Have you looked at other vector-based approaches which are not
> > exactly LSI ?
> > > > > Have you looked at InfoMap NLP ?
> > > >
> > > > Look for Thomas Hofmann's "probabilistic LSI", and other recent wor=
k
> >
> > > > which cites it.
> > >
> > > You might also be interested in "Latent Dirichlet Allocation (LDA)" b=
y
> > > David Blei. In short, it is a more advanced version of "probabilistic
> > > LSI". I am currently writing some code to dump Lucene documents into =
a
> >
> > > file format used by Blei's LDA implementation written in C.
> >
> > Following up on my previous mail about LDA, here are a few links
> >
> > David Blei, Andrew Ng and Michael Jordan's paper on LDA
> > http://www.cs.berkeley.edu/~blei/papers/blei03a.pdf<http://www.cs.berke=
ley.edu/%7Eblei/papers/blei03a.pdf>
> >
> > David Blei's C implementation of LDA
> > http://www.cs.berkeley.edu/~blei/lda-c/<http://www.cs.berkeley.edu/%7Eb=
lei/lda-c/>
> >
> > Gregor Heinrich's port of LDA-c to Java http://www.arbylon.net/projects=
/
> > Note: To use his code in non-windows platform, you will need to
> > replace his fast Mersenne Twister based random number generator with
> > Java's standard random number generator.
> >
> >
> >
> > Regards,
> > Dave.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_5336_18260838.1135070402143--

From java-user-return-18044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 15:17:34 2005
Return-Path: <java-user-return-18044-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55034 invoked from network); 20 Dec 2005 15:17:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 15:17:34 -0000
Received: (qmail 20839 invoked by uid 500); 20 Dec 2005 15:17:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20812 invoked by uid 500); 20 Dec 2005 15:17:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20801 invoked by uid 99); 20 Dec 2005 15:17:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 07:17:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [24.232.0.225] (HELO avas-mr12.fibertel.com.ar) (24.232.0.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 07:17:25 -0800
Received: from 65-166-126-200.fibertel.com.ar ([200.126.166.65]:21778 "EHLO
	[200.126.166.65]" smtp-auth: "eds_linux") by avas-mr12.fibertel.com.ar
	with ESMTP id S16616AbVLTPQt; Tue, 20 Dec 2005 12:16:49 -0300
X-Comment: RFC 2476 MSA function at avas-mr12.fibertel.com.ar logged sender identity as: eds_linux
Received: from 127.0.0.1 (AVG SMTP 7.1.371 [267.14.1/207]); Tue, 20 Dec 2005 12:18:22 -0300
Message-ID: <43A820BE.4020105@colaborativa.net>
Date:	Tue, 20 Dec 2005 12:18:22 -0300
From:	Ernesto De Santis <ernesto.desantis@colaborativa.net>
Organization: Colaborativa.net
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: es-es, es
MIME-Version: 1.0
To:	Lucene Users List <java-user@lucene.apache.org>
Subject: Asturian Analyzer 
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Fib-Al-Info: Al
X-Fib-Al-MRId: e9f9c3d5de0392be1ea8429e2c603e92
X-Fib-Al-From: ernesto.desantis@colaborativa.net
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All

Exist an analyzer for Asturian language?

Regards,
Ernesto.

-- 
Ernesto De Santis - Colaborativa.net
La Plata, Argentina.
http://www.colaborativa.net/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 17:42:34 2005
Return-Path: <java-user-return-18045-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64501 invoked from network); 20 Dec 2005 17:42:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 17:42:33 -0000
Received: (qmail 47857 invoked by uid 500); 20 Dec 2005 17:42:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47826 invoked by uid 500); 20 Dec 2005 17:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47815 invoked by uid 500); 20 Dec 2005 17:42:26 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 47812 invoked by uid 99); 20 Dec 2005 17:42:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:42:26 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.196 as permitted sender)
Received: from [64.233.182.196] (HELO nproxy.gmail.com) (64.233.182.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:42:25 -0800
Received: by nproxy.gmail.com with SMTP id c31so509254nfb
        for <lucene-user@jakarta.apache.org>; Tue, 20 Dec 2005 09:42:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=V5pClyTTSp3v9VAK1OhDjj1FjD8SjA1P+Rjk6HvbCLLnY+4kQpbsQL2Vp/CpX07/LNf8uk6G56Veh7Bzwx98VXSl/Y11LskiamZ9DtrzLNE0dPmtnkyU1HQLwXVn81Lm6JiaLFGP3HNgle31a1y9CrxvT9YaQjMK8Yatvo5zVzU=
Received: by 10.48.219.18 with SMTP id r18mr317475nfg;
        Tue, 20 Dec 2005 09:42:03 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Tue, 20 Dec 2005 09:42:03 -0800 (PST)
Message-ID: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
Date: Tue, 20 Dec 2005 18:42:03 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: MatchAllDocsQuery with BooleanClause.Occur.MUST_NOT
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

If I run a query like this:
-(-body:angel) -(-body:darpa)
I get 0 hits. As I did not find any thread about that case, I though
ANDing with a MatchAllDocsQuery would return my desired set (all docs
excepting the ones with angel or darpa).

So more I do the following:
BooleanQuery mbq =3D new BooleanQuery();
BooleanQuery mydocs =3D -body:darpa query;
MatchAllDocsQuery alldocs =3D new MatchAllDocsQuery();
mbq.add(mydocs , BooleanClause.Occur.MUST_NOT);
mbq.add(alld, BooleanClause.Occur.MUST);

and I still get 0 hits, if I only add the alldocs query I get some
hits, does anyone see something wrong with my approach?

javier

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 17:49:08 2005
Return-Path: <java-user-return-18046-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68237 invoked from network); 20 Dec 2005 17:49:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 17:49:07 -0000
Received: (qmail 61694 invoked by uid 500); 20 Dec 2005 17:48:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61648 invoked by uid 500); 20 Dec 2005 17:48:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61582 invoked by uid 99); 20 Dec 2005 17:48:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:48:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:48:47 -0800
Received: from 192.168.100.99 ([192.168.100.99]) by bettylou.configureone.net ([192.168.100.7]) with Microsoft Exchange Server HTTP-DAV ;
 Tue, 20 Dec 2005 17:47:31 +0000
User-Agent: Microsoft-Entourage/11.2.1.051004
Date: Tue, 20 Dec 2005 11:48:24 -0600
Subject: ParseQuery with quotes
From: John Powers <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
Message-ID: <BFCDA008.2143%jpowers@configureone.com>
Thread-Topic: ParseQuery with quotes
Thread-Index: AcYFjZLq0aoIJXGAEdqcEAANk2AiFA==
In-Reply-To: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I would like to be able to search for 19 inches with the quote.  So I get a
query like this:
Line 1:  +( (name:19"*^4 ld:19"*^2 sd:19"*^3 kw:19"*^1) )


That won't work, so I wanted to escape the quotes.    The docs said to use a
backslash.  So I'm doing this:

luceneQuery.toString().replaceAll("\"", "\\\\\"")

And the result is:

Line 2:  +( (name:19\"*^4 ld:19\"*^2 sd:19\"*^3 kw:19\"*^1) )

This looks right.  Then I put it into a MultiFieldQueryParser.parse() via:

            query =
MultiFieldQueryParser.parse(luceneQuery.toString().replaceAll("\"",
"\\\\\""), Indexer.CARTABLE, Indexer.analyzer);


and I get:

Parsed query: +(name:19"*^4.0 ld:19"*^2.0 sd:19"*^3.0 kw:19"*)

Which of course, won't work.   How can I get the escapes to survive through
the parsing?

Line two looks like what I want right before it gets parsed.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 17:52:17 2005
Return-Path: <java-user-return-18047-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69821 invoked from network); 20 Dec 2005 17:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 17:52:17 -0000
Received: (qmail 69449 invoked by uid 500); 20 Dec 2005 17:52:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69430 invoked by uid 500); 20 Dec 2005 17:52:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69419 invoked by uid 500); 20 Dec 2005 17:52:10 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 69416 invoked by uid 99); 20 Dec 2005 17:52:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:52:10 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.201 as permitted sender)
Received: from [64.233.162.201] (HELO zproxy.gmail.com) (64.233.162.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:52:09 -0800
Received: by zproxy.gmail.com with SMTP id 8so1575240nzo
        for <lucene-user@jakarta.apache.org>; Tue, 20 Dec 2005 09:51:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eubmHZBK/te/CUAV9m3647+/iL19EP8YidXG0Zf+m9cTNBWiqNwsBFFlLzltWSknmQH86o0F35sJ7Y0rbhjgvPNcEGByd2j8ar7zWdiV6j7E6cuBdIyOVwduB7oUX9dD+/NNvRBEESaVwhNSRXMDDG4MpioQVE4cIjo2c8eaF2A=
Received: by 10.65.126.18 with SMTP id d18mr906492qbn;
        Tue, 20 Dec 2005 09:51:47 -0800 (PST)
Received: by 10.65.211.5 with HTTP; Tue, 20 Dec 2005 09:51:47 -0800 (PST)
Message-ID: <c68e39170512200951u697b1775x799104df63f9ae20@mail.gmail.com>
Date: Tue, 20 Dec 2005 12:51:47 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MatchAllDocsQuery with BooleanClause.Occur.MUST_NOT
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm not sure I understand the purpose of the double negatives.
Also, a boolean query must have some non-prohibited clauses to match
anything (and mydocs in your code example violates this).

Is the following what you are trying to do?

BooleanQuery mbq =3D new BooleanQuery();
TermQuery mydocs =3D body:darpa query;
MatchAllDocsQuery alldocs =3D new MatchAllDocsQuery();
mbq.add(mydocs , BooleanClause.Occur.MUST_NOT);
mbq.add(alld, BooleanClause.Occur.MUST);

-Yonik


On 12/20/05, javier muguruza <jmuguruza@gmail.com> wrote:
> Hi,
>
> If I run a query like this:
> -(-body:angel) -(-body:darpa)
> I get 0 hits. As I did not find any thread about that case, I though
> ANDing with a MatchAllDocsQuery would return my desired set (all docs
> excepting the ones with angel or darpa).
>
> So more I do the following:
> BooleanQuery mbq =3D new BooleanQuery();
> BooleanQuery mydocs =3D -body:darpa query;
> MatchAllDocsQuery alldocs =3D new MatchAllDocsQuery();
> mbq.add(mydocs , BooleanClause.Occur.MUST_NOT);
> mbq.add(alld, BooleanClause.Occur.MUST);
>
> and I still get 0 hits, if I only add the alldocs query I get some
> hits, does anyone see something wrong with my approach?
>
> javier

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 17:52:25 2005
Return-Path: <java-user-return-18048-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69892 invoked from network); 20 Dec 2005 17:52:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 17:52:24 -0000
Received: (qmail 69689 invoked by uid 500); 20 Dec 2005 17:52:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69631 invoked by uid 500); 20 Dec 2005 17:52:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69581 invoked by uid 99); 20 Dec 2005 17:52:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:52:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO zproxy.gmail.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 09:52:09 -0800
Received: by zproxy.gmail.com with SMTP id i28so1521805nzi
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 09:51:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eubmHZBK/te/CUAV9m3647+/iL19EP8YidXG0Zf+m9cTNBWiqNwsBFFlLzltWSknmQH86o0F35sJ7Y0rbhjgvPNcEGByd2j8ar7zWdiV6j7E6cuBdIyOVwduB7oUX9dD+/NNvRBEESaVwhNSRXMDDG4MpioQVE4cIjo2c8eaF2A=
Received: by 10.65.126.18 with SMTP id d18mr906492qbn;
        Tue, 20 Dec 2005 09:51:47 -0800 (PST)
Received: by 10.65.211.5 with HTTP; Tue, 20 Dec 2005 09:51:47 -0800 (PST)
Message-ID: <c68e39170512200951u697b1775x799104df63f9ae20@mail.gmail.com>
Date: Tue, 20 Dec 2005 12:51:47 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MatchAllDocsQuery with BooleanClause.Occur.MUST_NOT
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm not sure I understand the purpose of the double negatives.
Also, a boolean query must have some non-prohibited clauses to match
anything (and mydocs in your code example violates this).

Is the following what you are trying to do?

BooleanQuery mbq =3D new BooleanQuery();
TermQuery mydocs =3D body:darpa query;
MatchAllDocsQuery alldocs =3D new MatchAllDocsQuery();
mbq.add(mydocs , BooleanClause.Occur.MUST_NOT);
mbq.add(alld, BooleanClause.Occur.MUST);

-Yonik


On 12/20/05, javier muguruza <jmuguruza@gmail.com> wrote:
> Hi,
>
> If I run a query like this:
> -(-body:angel) -(-body:darpa)
> I get 0 hits. As I did not find any thread about that case, I though
> ANDing with a MatchAllDocsQuery would return my desired set (all docs
> excepting the ones with angel or darpa).
>
> So more I do the following:
> BooleanQuery mbq =3D new BooleanQuery();
> BooleanQuery mydocs =3D -body:darpa query;
> MatchAllDocsQuery alldocs =3D new MatchAllDocsQuery();
> mbq.add(mydocs , BooleanClause.Occur.MUST_NOT);
> mbq.add(alld, BooleanClause.Occur.MUST);
>
> and I still get 0 hits, if I only add the alldocs query I get some
> hits, does anyone see something wrong with my approach?
>
> javier

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 18:08:01 2005
Return-Path: <java-user-return-18049-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78158 invoked from network); 20 Dec 2005 18:08:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 18:08:00 -0000
Received: (qmail 1941 invoked by uid 500); 20 Dec 2005 18:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1804 invoked by uid 500); 20 Dec 2005 18:07:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1759 invoked by uid 99); 20 Dec 2005 18:07:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 10:07:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.199 as permitted sender)
Received: from [64.233.162.199] (HELO zproxy.gmail.com) (64.233.162.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 10:07:51 -0800
Received: by zproxy.gmail.com with SMTP id i28so1525678nzi
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 10:07:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=K77xlRPUNvhLTIwRSY60TdfZVOM9Ex08/4NFbOcheEpfI4g0oe53sBkUWT1sUaGopi6GalXvbMKL5gt+NKAyCRtZkQfhxGlbnNmEz28VFoVSkrU60QtwNKyQTA3brmB9Q4Dnkgyv1GhgIwrCzeLPQJFV1Qo01bSZ3fyT7tfcxKw=
Received: by 10.65.132.20 with SMTP id j20mr4452644qbn;
        Tue, 20 Dec 2005 10:07:29 -0800 (PST)
Received: by 10.65.211.5 with HTTP; Tue, 20 Dec 2005 10:07:29 -0800 (PST)
Message-ID: <c68e39170512201007t6003ddfbt9d1bd011ccfa62aa@mail.gmail.com>
Date: Tue, 20 Dec 2005 13:07:29 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ParseQuery with quotes
In-Reply-To: <BFCDA008.2143%jpowers@configureone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
	 <BFCDA008.2143%jpowers@configureone.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/20/05, John Powers <jpowers@configureone.com> wrote:
> I would like to be able to search for 19 inches with the quote.  So I get=
 a
> query like this:
> Line 1:  +( (name:19"*^4 ld:19"*^2 sd:19"*^3 kw:19"*^1) )
>
>
> That won't work, so I wanted to escape the quotes.    The docs said to us=
e a
> backslash.  So I'm doing this:
>
> luceneQuery.toString().replaceAll("\"", "\\\\\"")

It should be " =3D> \",
so shouldn't that be luceneQuery.toString().replaceAll("\"", "\\\"")

> And the result is:
>
> Line 2:  +( (name:19\"*^4 ld:19\"*^2 sd:19\"*^3 kw:19\"*^1) )
>
> This looks right.  Then I put it into a MultiFieldQueryParser.parse() via=
:
>
>             query =3D
> MultiFieldQueryParser.parse(luceneQuery.toString().replaceAll("\"",
> "\\\\\""), Indexer.CARTABLE, Indexer.analyzer);
>
>
> and I get:
>
> Parsed query: +(name:19"*^4.0 ld:19"*^2.0 sd:19"*^3.0 kw:19"*)

This looks right.

> Which of course, won't work.   How can I get the escapes to survive throu=
gh
> the parsing?

The escapes are for parsing.  You don't want them to survive parsing
unless you also indexed them with escapes.
Perhaps what is causing your confusion is that Query.toString()
doesn't currently re-escape special characters.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 18:13:45 2005
Return-Path: <java-user-return-18050-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81662 invoked from network); 20 Dec 2005 18:13:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 18:13:45 -0000
Received: (qmail 11251 invoked by uid 500); 20 Dec 2005 18:13:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11199 invoked by uid 500); 20 Dec 2005 18:13:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11188 invoked by uid 99); 20 Dec 2005 18:13:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 10:13:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 10:13:38 -0800
Received: by zproxy.gmail.com with SMTP id i28so1527058nzi
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 10:13:17 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Z/m/ImL+6geGcxSsH1WDZS7aQBJt17E5LDVQg7uaiSjBt93nw+Gy1pj8CptD1efkQPrVuwZ2ZDlwJn3wUZCRIf9RnsNfHK/Ih+IGv3nxluptIGI1amxIZrGpBGRT9Jen+lBMiFt7LG/Dt67e5zOjNJd+GfB9XtuWRf5J+EwKQXQ=
Received: by 10.65.132.20 with SMTP id j20mr4458817qbn;
        Tue, 20 Dec 2005 10:13:16 -0800 (PST)
Received: by 10.65.211.5 with HTTP; Tue, 20 Dec 2005 10:13:16 -0800 (PST)
Message-ID: <c68e39170512201013y5ab171a7x7347bd8aed6b5861@mail.gmail.com>
Date: Tue, 20 Dec 2005 13:13:16 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ParseQuery with quotes
In-Reply-To: <c68e39170512201007t6003ddfbt9d1bd011ccfa62aa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
	 <BFCDA008.2143%jpowers@configureone.com>
	 <c68e39170512201007t6003ddfbt9d1bd011ccfa62aa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Here's more on query-parser escaping gotchas:

http://www.mail-archive.com/java-user@lucene.apache.org/msg02354.html

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 18:15:38 2005
Return-Path: <java-user-return-18051-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82860 invoked from network); 20 Dec 2005 18:15:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 18:15:37 -0000
Received: (qmail 14444 invoked by uid 500); 20 Dec 2005 18:15:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14381 invoked by uid 500); 20 Dec 2005 18:15:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14353 invoked by uid 99); 20 Dec 2005 18:15:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 10:15:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.203 as permitted sender)
Received: from [64.233.182.203] (HELO nproxy.gmail.com) (64.233.182.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 10:15:27 -0800
Received: by nproxy.gmail.com with SMTP id h2so502216nfe
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 10:15:05 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=j5QsyoeZFHgovAr8YnLv78JXNEtqPUGY6JbB6IJc+lyhns5qbybAWquP4YkrLjc63nrclelendUB6CxJc/oGMjeRUlUNbZs6/IqCEG7BX2qe5zG+/t1lW6HgMTO7d6VSnPU/sE7MgSMwLCP58BrR/w+zUIpORUO5bbr7oS1fK5w=
Received: by 10.48.143.4 with SMTP id q4mr319075nfd;
        Tue, 20 Dec 2005 10:15:05 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Tue, 20 Dec 2005 10:15:05 -0800 (PST)
Message-ID: <f071061b0512201015n7cfafb04q74c9243b0f68bf08@mail.gmail.com>
Date: Tue, 20 Dec 2005 19:15:05 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: MatchAllDocsQuery with BooleanClause.Occur.MUST_NOT
In-Reply-To: <c68e39170512200951u697b1775x799104df63f9ae20@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512200942q5c33cca6vcaa51c161fae8467@mail.gmail.com>
	 <c68e39170512200951u697b1775x799104df63f9ae20@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The double negatives are a byproduct of my code building the query, as
the user has several fields to choose from etc, it is not done on
purpose.

With luke I was able to see that:
+body:memo 1 hit
+body:memo -body:policy 0
+body:memo -(-body:policy) 1
+body:memo +(-body:policy) 0
In the last two cases, if I substitute policy by a non-existant word
(policy is in the index) I get the same results, so the extra -() is
screwing the query. For my previous tests while coding I noticed
(wrongly) the extra -() was harmless...my bad.

I have refactored my code so extra -() are avoided, now everything is
running ok,

thanks,
javier

On 12/20/05, Yonik Seeley <yseeley@gmail.com> wrote:
> I'm not sure I understand the purpose of the double negatives.
> Also, a boolean query must have some non-prohibited clauses to match
> anything (and mydocs in your code example violates this).
>
> Is the following what you are trying to do?
>
> BooleanQuery mbq =3D new BooleanQuery();
> TermQuery mydocs =3D body:darpa query;
> MatchAllDocsQuery alldocs =3D new MatchAllDocsQuery();
> mbq.add(mydocs , BooleanClause.Occur.MUST_NOT);
> mbq.add(alld, BooleanClause.Occur.MUST);
>
> -Yonik
>
>
> On 12/20/05, javier muguruza <jmuguruza@gmail.com> wrote:
> > Hi,
> >
> > If I run a query like this:
> > -(-body:angel) -(-body:darpa)
> > I get 0 hits. As I did not find any thread about that case, I though
> > ANDing with a MatchAllDocsQuery would return my desired set (all docs
> > excepting the ones with angel or darpa).
> >
> > So more I do the following:
> > BooleanQuery mbq =3D new BooleanQuery();
> > BooleanQuery mydocs =3D -body:darpa query;
> > MatchAllDocsQuery alldocs =3D new MatchAllDocsQuery();
> > mbq.add(mydocs , BooleanClause.Occur.MUST_NOT);
> > mbq.add(alld, BooleanClause.Occur.MUST);
> >
> > and I still get 0 hits, if I only add the alldocs query I get some
> > hits, does anyone see something wrong with my approach?
> >
> > javier
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 20:14:25 2005
Return-Path: <java-user-return-18052-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35976 invoked from network); 20 Dec 2005 20:14:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 20:14:25 -0000
Received: (qmail 22145 invoked by uid 500); 20 Dec 2005 20:14:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22127 invoked by uid 500); 20 Dec 2005 20:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22116 invoked by uid 99); 20 Dec 2005 20:14:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 12:14:17 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 12:14:16 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 609FE5B77F; Tue, 20 Dec 2005 12:13:53 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 571A87F459
	for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 12:13:53 -0800 (PST)
Date: Tue, 20 Dec 2005 12:13:53 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <14F8D9C2-8C61-4AFE-BC94-3D8C8F4AA00D@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0512201203400.19607@hal.rescomp.berkeley.edu>
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
 <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
 <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
 <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com>
 <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com>
 <15EAD065-210A-46CD-AA06-8D5BC54C7733@ehatchersolutions.com>
 <Pine.LNX.4.58.0512191058470.9513@hal.rescomp.berkeley.edu>
 <14F8D9C2-8C61-4AFE-BC94-3D8C8F4AA00D@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Hoss - the main caveat with this approach is that a user could select
: a different field from any of the designated text boxes.  Putting
: "subject:foo" in the name text box for example.

sorry ... yea, i left out a step...

     String words = QueryParser.escape(rawUserInputString)

Generally speaking this approach has been working well for me in my
current development as a bare bones method for converting raw user word
lists into pieces of queries that i then compose into a larger more
complex query structure.  the only hitch i've ever really run into is when
people try to search for things like:  42" tv ... becuase query parser
doesn't have any way to escape that quote, so it barfs thinking it's an
unterminated phrase query.  but even if there was a way to escape it, i
don't think i'd want to, beause as is it lets the (more common case) of
quoted phrases do what (i) expect and become phrase queries.

I still haven't completley decided what i want to do about the:   42" tv
case ... but i'm very close to preprocessing the input and saying: "even
number of quotes, leave them alone, odd number of quotes, yank them all
out."

: I think this is one of my biggest issues with QueryParser these days,
: it exposes too much power.  It's like giving a SQL text box to your
: database application (read-only, of course).  There are generally
: fields not made for user querying.

agreed.  If i don't take the easy way out on that 42" case, i think I may
spend some time on a generic "UserQueryParser" that doesn't support any
fancy syntax of the exsting QueryParser, and just knows how to build
TermQuery and phrases queries on a specified field -- with options forhow
to deal with uneven numbered quotes (looking at the white space arround
the quotes for guidence in interpreting it)

: > In addition to Erik's suggestion, something that i find frequently
: > makes
: > sense is to use the QueryParser in each case where you are dealing
: > with a
: > discrete "input string" -- and then combine them into a BooleanQuery
: > (along with any other progromatically generated TermQueries you
: > might want
: > for other reasons)
: >
: > For example, it looks like your applciation is targeted at
: > searching email
: > right?  let's assume your application allows the user to specify the
: > following inputs
: >
: >     * a text box for search words
: >     * a text box for people's names/email
: >     * pulldowns for picking date ranges
: >
: > ...and you want to look in the subject, body, and attachment fields
: > for
: > the input words (with differnet boosts) and in all of the header
: > fields
: > for the name/email input.   you can builda Date object out of the
: > pulldown
: > yourself, and then do something like this with the two strings...
: >
: >    QueryParser subP = new QueryParser("subject",SomeAnalyzer)
: >    QueryParser bodyP = new QueryParser("body",SomeAnalyzer)
: >    QueryParser attachP = new QueryParser("attachemnts",SomeAnalyzer)
: >    QueryParser headP = new QueryParser
: > ("headers",AnalyzerThatKnowsAboutEmailAddress)
: >    Query s = subP.parse(words);
: >    s.setBoost(2.0)
: >    Query b = bodyP.parse(words);
: >    Query a = attachP.parse(words);
: >    a.setBoost(0.5)
: >    Query h = headP.parse(person);
: >    h.setBoost(1.5)
: >    BooleanQuery bq = new BooleanQuery();
: >    bq.add(s,false,false);
: >    bq.add(b,false,false);
: >    bq.add(a,false,false);
: >    bq.add(h,false,false);
: >
: > ...and then execute your search using a filter built from the date
: > range
: > pulldowns.
: >
: >
: > -Hoss
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 21:14:43 2005
Return-Path: <java-user-return-18053-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87419 invoked from network); 20 Dec 2005 21:14:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 21:14:43 -0000
Received: (qmail 22315 invoked by uid 500); 20 Dec 2005 21:14:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22259 invoked by uid 500); 20 Dec 2005 21:14:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22248 invoked by uid 99); 20 Dec 2005 21:14:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 13:14:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 13:14:35 -0800
Received: from 192.168.100.99 ([192.168.100.99]) by bettylou.configureone.net ([192.168.100.7]) with Microsoft Exchange Server HTTP-DAV ;
 Tue, 20 Dec 2005 21:13:20 +0000
User-Agent: Microsoft-Entourage/11.2.1.051004
Date: Tue, 20 Dec 2005 15:14:13 -0600
Subject: Re: ParseQuery with quotes
From: John Powers <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
Message-ID: <BFCDD045.216C%jpowers@configureone.com>
Thread-Topic: ParseQuery with quotes
Thread-Index: AcYFqlN+kjG5JHGdEdqcEAANk2AiFA==
In-Reply-To: <c68e39170512201007t6003ddfbt9d1bd011ccfa62aa@mail.gmail.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ok, I understand the .toString() part.

But, if I have some 19" in the text of these items, and I do a search with
19", that has been escaped before parsing....why am I not getting anything?
The indexer analyzer took them out?   So then to find these documents, I
would want to either change the analyzer or take the quote out of the query?
Correct?


On 12/20/05 12:07 PM, "Yonik Seeley" <yseeley@gmail.com> wrote:

> On 12/20/05, John Powers <jpowers@configureone.com> wrote:
>> I would like to be able to search for 19 inches with the quote.  So I get a
>> query like this:
>> Line 1:  +( (name:19"*^4 ld:19"*^2 sd:19"*^3 kw:19"*^1) )
>> 
>> 
>> That won't work, so I wanted to escape the quotes.    The docs said to use a
>> backslash.  So I'm doing this:
>> 
>> luceneQuery.toString().replaceAll("\"", "\\\\\"")
> 
> It should be " => \",
> so shouldn't that be luceneQuery.toString().replaceAll("\"", "\\\"")
> 
>> And the result is:
>> 
>> Line 2:  +( (name:19\"*^4 ld:19\"*^2 sd:19\"*^3 kw:19\"*^1) )
>> 
>> This looks right.  Then I put it into a MultiFieldQueryParser.parse() via:
>> 
>>             query =
>> MultiFieldQueryParser.parse(luceneQuery.toString().replaceAll("\"",
>> "\\\\\""), Indexer.CARTABLE, Indexer.analyzer);
>> 
>> 
>> and I get:
>> 
>> Parsed query: +(name:19"*^4.0 ld:19"*^2.0 sd:19"*^3.0 kw:19"*)
> 
> This looks right.
> 
>> Which of course, won't work.   How can I get the escapes to survive through
>> the parsing?
> 
> The escapes are for parsing.  You don't want them to survive parsing
> unless you also indexed them with escapes.
> Perhaps what is causing your confusion is that Query.toString()
> doesn't currently re-escape special characters.
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 21:31:44 2005
Return-Path: <java-user-return-18054-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98810 invoked from network); 20 Dec 2005 21:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 21:31:44 -0000
Received: (qmail 58898 invoked by uid 500); 20 Dec 2005 21:31:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58857 invoked by uid 500); 20 Dec 2005 21:31:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58834 invoked by uid 99); 20 Dec 2005 21:31:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 13:31:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.200 as permitted sender)
Received: from [64.233.162.200] (HELO zproxy.gmail.com) (64.233.162.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 13:31:22 -0800
Received: by zproxy.gmail.com with SMTP id i28so1569002nzi
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 13:31:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YXYdCo0juEBhaxxe7YPOrC6bf0gf/S84pHoKgEXEJCoq7Y3TTdIkS1bKk903o/qsa3fKbn5d4AwPepzr0ZaslpEzj+V6ioQtnBrKHojtZfTENO75prlKqh8JfmvaZb7lkFwuAZfMYbkXGJzySfW3LaGrPcpNqUZIJXdLes2ugeI=
Received: by 10.65.200.7 with SMTP id c7mr2257qbq;
        Tue, 20 Dec 2005 13:31:01 -0800 (PST)
Received: by 10.65.211.5 with HTTP; Tue, 20 Dec 2005 13:31:01 -0800 (PST)
Message-ID: <c68e39170512201331n5fdd5806tbacc6eef71f1002b@mail.gmail.com>
Date: Tue, 20 Dec 2005 16:31:01 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ParseQuery with quotes
In-Reply-To: <BFCDD045.216C%jpowers@configureone.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <c68e39170512201007t6003ddfbt9d1bd011ccfa62aa@mail.gmail.com>
	 <BFCDD045.216C%jpowers@configureone.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/20/05, John Powers <jpowers@configureone.com> wrote:
> Ok, I understand the .toString() part.
>
> But, if I have some 19" in the text of these items, and I do a search wit=
h
> 19", that has been escaped before parsing....why am I not getting anythin=
g?
> The indexer analyzer took them out?   So then to find these documents, I
> would want to either change the analyzer or take the quote out of the que=
ry?
> Correct?

Right.  Most likely the index analyzer removed the quote.  You can
verify with something like Luke.

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 20 22:24:40 2005
Return-Path: <java-user-return-18055-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36426 invoked from network); 20 Dec 2005 22:24:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Dec 2005 22:24:39 -0000
Received: (qmail 51755 invoked by uid 500); 20 Dec 2005 22:24:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51731 invoked by uid 500); 20 Dec 2005 22:24:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51720 invoked by uid 99); 20 Dec 2005 22:24:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 14:24:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jmuguruza@gmail.com designates 64.233.182.196 as permitted sender)
Received: from [64.233.182.196] (HELO nproxy.gmail.com) (64.233.182.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 14:24:32 -0800
Received: by nproxy.gmail.com with SMTP id h2so521605nfe
        for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 14:24:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ynbpi0al3oVOTvf7WASIGDV1GDB5KjOibEuCrWcMiTrYkjiwVXyViiXCRlu1l5/MwjM8a+CWt4MBrcDg3kKskB2ARsZ/oZ4q15lSpQNUHQVNEYcgJx1rhn02LfgLDQwscNBSWYWa1O0KiProhZiGXChCXpEN/Y7+9LPR58NHJW0=
Received: by 10.48.215.17 with SMTP id n17mr2198nfg;
        Tue, 20 Dec 2005 14:24:10 -0800 (PST)
Received: by 10.48.244.19 with HTTP; Tue, 20 Dec 2005 14:24:10 -0800 (PST)
Message-ID: <f071061b0512201424y1344a48fh437493d9dc7c620b@mail.gmail.com>
Date: Tue, 20 Dec 2005 23:24:10 +0100
From: javier muguruza <jmuguruza@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: all stop words in exact phrase get 0 hits
In-Reply-To: <Pine.LNX.4.58.0512201203400.19607@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <f071061b0512150241j560dd7b8xa264c80079f6468c@mail.gmail.com>
	 <c68e39170512161240x7e02aa3ei39d8411c25f4066e@mail.gmail.com>
	 <f071061b0512161243w50aa982cq9d73d2afc24d966e@mail.gmail.com>
	 <c68e39170512161634xed3c7a5g36b6ff41264be14@mail.gmail.com>
	 <f071061b0512190830o9f5d91fr534d531111589a7e@mail.gmail.com>
	 <15EAD065-210A-46CD-AA06-8D5BC54C7733@ehatchersolutions.com>
	 <Pine.LNX.4.58.0512191058470.9513@hal.rescomp.berkeley.edu>
	 <14F8D9C2-8C61-4AFE-BC94-3D8C8F4AA00D@ehatchersolutions.com>
	 <Pine.LNX.4.58.0512201203400.19607@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

actually I ended up using your approach, also escaping the input
string. With the other approach I wasnt sure wether I could just take
the text from the token and go on etc...
its working fine in my tests so far.


On 12/20/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> : Hoss - the main caveat with this approach is that a user could select
> : a different field from any of the designated text boxes.  Putting
> : "subject:foo" in the name text box for example.
>
> sorry ... yea, i left out a step...
>
>      String words =3D QueryParser.escape(rawUserInputString)
>
> Generally speaking this approach has been working well for me in my
> current development as a bare bones method for converting raw user word
> lists into pieces of queries that i then compose into a larger more
> complex query structure.  the only hitch i've ever really run into is whe=
n
> people try to search for things like:  42" tv ... becuase query parser
> doesn't have any way to escape that quote, so it barfs thinking it's an
> unterminated phrase query.  but even if there was a way to escape it, i
> don't think i'd want to, beause as is it lets the (more common case) of
> quoted phrases do what (i) expect and become phrase queries.
>
> I still haven't completley decided what i want to do about the:   42" tv
> case ... but i'm very close to preprocessing the input and saying: "even
> number of quotes, leave them alone, odd number of quotes, yank them all
> out."
>
> : I think this is one of my biggest issues with QueryParser these days,
> : it exposes too much power.  It's like giving a SQL text box to your
> : database application (read-only, of course).  There are generally
> : fields not made for user querying.
>
> agreed.  If i don't take the easy way out on that 42" case, i think I may
> spend some time on a generic "UserQueryParser" that doesn't support any
> fancy syntax of the exsting QueryParser, and just knows how to build
> TermQuery and phrases queries on a specified field -- with options forhow
> to deal with uneven numbered quotes (looking at the white space arround
> the quotes for guidence in interpreting it)
>
> : > In addition to Erik's suggestion, something that i find frequently
> : > makes
> : > sense is to use the QueryParser in each case where you are dealing
> : > with a
> : > discrete "input string" -- and then combine them into a BooleanQuery
> : > (along with any other progromatically generated TermQueries you
> : > might want
> : > for other reasons)
> : >
> : > For example, it looks like your applciation is targeted at
> : > searching email
> : > right?  let's assume your application allows the user to specify the
> : > following inputs
> : >
> : >     * a text box for search words
> : >     * a text box for people's names/email
> : >     * pulldowns for picking date ranges
> : >
> : > ...and you want to look in the subject, body, and attachment fields
> : > for
> : > the input words (with differnet boosts) and in all of the header
> : > fields
> : > for the name/email input.   you can builda Date object out of the
> : > pulldown
> : > yourself, and then do something like this with the two strings...
> : >
> : >    QueryParser subP =3D new QueryParser("subject",SomeAnalyzer)
> : >    QueryParser bodyP =3D new QueryParser("body",SomeAnalyzer)
> : >    QueryParser attachP =3D new QueryParser("attachemnts",SomeAnalyzer=
)
> : >    QueryParser headP =3D new QueryParser
> : > ("headers",AnalyzerThatKnowsAboutEmailAddress)
> : >    Query s =3D subP.parse(words);
> : >    s.setBoost(2.0)
> : >    Query b =3D bodyP.parse(words);
> : >    Query a =3D attachP.parse(words);
> : >    a.setBoost(0.5)
> : >    Query h =3D headP.parse(person);
> : >    h.setBoost(1.5)
> : >    BooleanQuery bq =3D new BooleanQuery();
> : >    bq.add(s,false,false);
> : >    bq.add(b,false,false);
> : >    bq.add(a,false,false);
> : >    bq.add(h,false,false);
> : >
> : > ...and then execute your search using a filter built from the date
> : > range
> : > pulldowns.
> : >
> : >
> : > -Hoss
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 00:58:35 2005
Return-Path: <java-user-return-18056-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99670 invoked from network); 21 Dec 2005 00:58:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 00:58:35 -0000
Received: (qmail 16330 invoked by uid 500); 21 Dec 2005 00:58:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16277 invoked by uid 500); 21 Dec 2005 00:58:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16266 invoked by uid 99); 21 Dec 2005 00:58:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 16:58:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.128] (HELO exprod6og8.obsmtp.com) (64.18.1.128)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Dec 2005 16:56:36 -0800
Received: from source ([139.56.4.14]) by exprod6ob8.obsmtp.com ([64.18.5.12]) with SMTP;
	Tue, 20 Dec 2005 16:56:14 PST
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id jBL0r3L16414
	for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 16:53:03 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id QAA29147
	for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 16:56:20 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <W3KT2RKH>; Tue, 20 Dec 2005 16:57:35 -0800
Message-ID: <8220B8D6B56A9A4E8480489F38E425298E4809@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: NullPointerException in ParallelMultiSearcher
Date: Tue, 20 Dec 2005 16:57:35 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have not received any feedback yet, any comments
would be greatly appreciated!

Lisheng

-----Original Message-----
From: Zhang, Lisheng 
Sent: Thursday, December 01, 2005 12:30 PM
To: 'java-user@lucene.apache.org'
Subject: NullPointerException in ParallelMultiSearcher


Hi,

We are using lucene v1.4.3 for some time, in general it is working well.

We often try to search multiple collections at the same time, so we 
are using ParallelMultiSearcher, but sometimes we got the following
exception:

########
java.lang.NullPointerException
    at
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.java
:281)
    at
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.
java:134)
    at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
    at org.apache.lucene.search.Hits.<init>(Hits.java:51)
    at org.apache.lucene.search.Searcher.search(Searcher.java:41)
########

It seems this happens when searching site is heavily used, also when
we switch to MultiSearcher, we never see this kind of problems?

Your guidance would be very appreciated!

Best regards, Lisheng



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 03:51:06 2005
Return-Path: <java-user-return-18057-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68487 invoked from network); 21 Dec 2005 03:51:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 03:51:06 -0000
Received: (qmail 77546 invoked by uid 500); 21 Dec 2005 03:51:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77486 invoked by uid 500); 21 Dec 2005 03:51:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77475 invoked by uid 99); 21 Dec 2005 03:51:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 19:51:00 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.214] (HELO web51609.mail.yahoo.com) (206.190.38.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 20 Dec 2005 19:50:59 -0800
Received: (qmail 27214 invoked by uid 60001); 21 Dec 2005 03:50:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=eqeQrGe7N8yWktTDCmk2cEynpdSV4kKRjoSbPA0iuNhiHd4KO0UbDvqEBsct7HRb5OqQmNRE3ej3Oc4a9ZUlMORKNl6NhydcupyeMv+5YoAf6dgeCgr01TaDnGCP/W0q9++MQpukmXD7WeH3yoC/txJ56RzIWKJPLlwY3cQRSFo=  ;
Message-ID: <20051221035038.27212.qmail@web51609.mail.yahoo.com>
Received: from [210.19.195.20] by web51609.mail.yahoo.com via HTTP; Tue, 20 Dec 2005 19:50:38 PST
Date: Tue, 20 Dec 2005 19:50:38 -0800 (PST)
From: tariq md <asmdt@yahoo.com>
Subject: how to do serverside query escaping...
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1793516179-1135137038=:24665"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1793516179-1135137038=:24665
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi all;
   For me the queryescape.js(for queryvalidation) is juz wrking fine ,In same scenario how to do the query escaping in server side. using the java.util.regex.Pattern  r how plz let me knw

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1793516179-1135137038=:24665--

From java-user-return-18058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 04:21:21 2005
Return-Path: <java-user-return-18058-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78607 invoked from network); 21 Dec 2005 04:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 04:21:21 -0000
Received: (qmail 11780 invoked by uid 500); 21 Dec 2005 04:21:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11754 invoked by uid 500); 21 Dec 2005 04:21:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11740 invoked by uid 99); 21 Dec 2005 04:21:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 20:21:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 20 Dec 2005 20:21:15 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EB53313E2029; Tue, 20 Dec 2005 23:20:52 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 1880413E201A
	for <java-user@lucene.apache.org>; Tue, 20 Dec 2005 23:20:43 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <BFCDD045.216C%jpowers@configureone.com>
References: <BFCDD045.216C%jpowers@configureone.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C9CF23AB-0F30-4267-84F3-6B84F0695930@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: ParseQuery with quotes
Date: Tue, 20 Dec 2005 23:20:45 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As always, the best things to do are to know exactly what you indexed  
(AnalyzerDemo from Lucene in Action helps here, and of course the  
wonderful tool, Luke).  Then try simplifying your query to a  
TermQuery for a term you know or suspect you indexed.  QueryParser  
introduces a lot of variables to the equation, such as operators and  
special characters that get interpreted by the parser itself,  
escaping rules, and analysis - not to mention the Query.toString()  
issue you've discovered.

	Erik


On Dec 20, 2005, at 4:14 PM, John Powers wrote:

> Ok, I understand the .toString() part.
>
> But, if I have some 19" in the text of these items, and I do a  
> search with
> 19", that has been escaped before parsing....why am I not getting  
> anything?
> The indexer analyzer took them out?   So then to find these  
> documents, I
> would want to either change the analyzer or take the quote out of  
> the query?
> Correct?
>
>
> On 12/20/05 12:07 PM, "Yonik Seeley" <yseeley@gmail.com> wrote:
>
>> On 12/20/05, John Powers <jpowers@configureone.com> wrote:
>>> I would like to be able to search for 19 inches with the quote.   
>>> So I get a
>>> query like this:
>>> Line 1:  +( (name:19"*^4 ld:19"*^2 sd:19"*^3 kw:19"*^1) )
>>>
>>>
>>> That won't work, so I wanted to escape the quotes.    The docs  
>>> said to use a
>>> backslash.  So I'm doing this:
>>>
>>> luceneQuery.toString().replaceAll("\"", "\\\\\"")
>>
>> It should be " => \",
>> so shouldn't that be luceneQuery.toString().replaceAll("\"", "\\\"")
>>
>>> And the result is:
>>>
>>> Line 2:  +( (name:19\"*^4 ld:19\"*^2 sd:19\"*^3 kw:19\"*^1) )
>>>
>>> This looks right.  Then I put it into a  
>>> MultiFieldQueryParser.parse() via:
>>>
>>>             query =
>>> MultiFieldQueryParser.parse(luceneQuery.toString().replaceAll("\"",
>>> "\\\\\""), Indexer.CARTABLE, Indexer.analyzer);
>>>
>>>
>>> and I get:
>>>
>>> Parsed query: +(name:19"*^4.0 ld:19"*^2.0 sd:19"*^3.0 kw:19"*)
>>
>> This looks right.
>>
>>> Which of course, won't work.   How can I get the escapes to  
>>> survive through
>>> the parsing?
>>
>> The escapes are for parsing.  You don't want them to survive parsing
>> unless you also indexed them with escapes.
>> Perhaps what is causing your confusion is that Query.toString()
>> doesn't currently re-escape special characters.
>>
>> -Yonik
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 08:01:28 2005
Return-Path: <java-user-return-18059-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19445 invoked from network); 21 Dec 2005 08:01:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 08:01:28 -0000
Received: (qmail 32791 invoked by uid 500); 21 Dec 2005 08:01:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32770 invoked by uid 500); 21 Dec 2005 08:01:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32759 invoked by uid 99); 21 Dec 2005 08:01:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 00:01:20 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.238.164.5] (HELO elvira.ekonomikum.uu.se) (130.238.164.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 00:01:02 -0800
Received: by elvira.ekonomikum.uu.se (Postfix, from userid 204)
	id E6B8B11FD9; Wed, 21 Dec 2005 09:00:37 +0100 (MEZ)
Received: from elvira.its.uu.se(127.0.0.1) by elvira.its.uu.se via virus-scan 
	id s26782; Wed, 21 Dec 05 09:00:26 +0100
Received: from [130.238.171.116] (pc171-116.ub.uu.se [130.238.171.116])
	by elvira.ekonomikum.uu.se (Postfix) with ESMTP id 1DE5011FD3
	for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 08:59:25 +0100 (MEZ)
Message-ID: <43A90B5C.9070009@ub.uu.se>
Date: Wed, 21 Dec 2005 08:59:24 +0100
From: Ronnie Kolehmainen <ronnie.kolehmainen@ub.uu.se>
User-Agent: Mozilla Thunderbird 1.0.6 (X11/20050905)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: NullPointerException in ParallelMultiSearcher
References: <8220B8D6B56A9A4E8480489F38E425298E4809@rw-msg-02.broadvision.com>
In-Reply-To: <8220B8D6B56A9A4E8480489F38E425298E4809@rw-msg-02.broadvision.com>
Content-Type: text/plain; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I believe the most common case is when you do a search with Sort (AUTO 
feature), and one of the fields you sort by is empty. The underlying 
IndexSearcher throws a RuntimeException and "docs" (result from 
searcher.search()) is never set, which results in a NullPointerException 
when hits() is called later on after the searcher thread is joined.

I'm not sure if there are other scenarios where searcher.search() throws 
  exceptions other than IOException (which is handled by 
MultiSearcherThread). These will result in NullpointerExceptions as well.

Not much help I guess, but perhaps some more insight.

/Ronnie

Zhang, Lisheng wrote:
> Hi,
> 
> I have not received any feedback yet, any comments
> would be greatly appreciated!
> 
> Lisheng
> 
> -----Original Message-----
> From: Zhang, Lisheng 
> Sent: Thursday, December 01, 2005 12:30 PM
> To: 'java-user@lucene.apache.org'
> Subject: NullPointerException in ParallelMultiSearcher
> 
> 
> Hi,
> 
> We are using lucene v1.4.3 for some time, in general it is working well.
> 
> We often try to search multiple collections at the same time, so we 
> are using ParallelMultiSearcher, but sometimes we got the following
> exception:
> 
> ########
> java.lang.NullPointerException
>     at
> org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.java
> :281)
>     at
> org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.
> java:134)
>     at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>     at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:41)
> ########
> 
> It seems this happens when searching site is heavily used, also when
> we switch to MultiSearcher, we never see this kind of problems?
> 
> Your guidance would be very appreciated!
> 
> Best regards, Lisheng
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

-- 
________________________________________

   Ronnie Kolehmainen
   Systems Developer
   Electronic Publishing Centre
   Uppsala University Library
   +46 (0)18 471 5847
   mailto:ronnie.kolehmainen@ub.uu.se
________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 09:21:32 2005
Return-Path: <java-user-return-18060-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60759 invoked from network); 21 Dec 2005 09:21:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 09:21:30 -0000
Received: (qmail 34642 invoked by uid 500); 21 Dec 2005 09:21:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34611 invoked by uid 500); 21 Dec 2005 09:21:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34599 invoked by uid 99); 21 Dec 2005 09:21:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 01:21:14 -0800
X-ASF-Spam-Status: No, hits=1.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_HAS_ULINE_NUMS,HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.179.229] (HELO web36115.mail.mud.yahoo.com) (66.163.179.229)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Dec 2005 01:21:13 -0800
Received: (qmail 55643 invoked by uid 60001); 21 Dec 2005 09:20:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=pYkA3UwHYQd5FUAoMaD5yuwvYvuUL3ps4VKWqoJZvZ6IM55BLqLwpd7p639koa3GJnTSCOT0uValdC7wTwA3Te8qg90XszeijBWTyohoucKJny/fhi7WNVN46hXixZvI+ASkxQ10+6gjBCMwfFGnA96qyypENkDb0j95ihQmJtc=  ;
Message-ID: <20051221092052.55641.qmail@web36115.mail.mud.yahoo.com>
Received: from [203.197.47.185] by web36115.mail.mud.yahoo.com via HTTP; Wed, 21 Dec 2005 01:20:52 PST
Date: Wed, 21 Dec 2005 01:20:52 -0800 (PST)
From: revati joshi <revati_joshi83@yahoo.com>
Subject: indexing
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1236777137-1135156852=:55596"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1236777137-1135156852=:55596
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

we are lucene users .
  we have performed indexing .we are stuck up with a problem
  how do we perform constant indexing (or updating the index) without manually running the indexing.class file.
  and which is the better option either updating it at startup or while running the jar file.
   
   

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1236777137-1135156852=:55596--

From java-user-return-18061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 10:43:29 2005
Return-Path: <java-user-return-18061-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7278 invoked from network); 21 Dec 2005 10:43:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 10:43:29 -0000
Received: (qmail 67640 invoked by uid 500); 21 Dec 2005 10:43:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67619 invoked by uid 500); 21 Dec 2005 10:43:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67608 invoked by uid 99); 21 Dec 2005 10:43:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 02:43:21 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.213] (HELO web51608.mail.yahoo.com) (206.190.38.213)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Dec 2005 02:43:21 -0800
Received: (qmail 32583 invoked by uid 60001); 21 Dec 2005 10:43:00 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=XTZOFwv93tHcxfx4OE3hURxYA0dTw4Vc3ZXZMy34ZS7LNB+FWbX9fVpQQllFKNur+21lDEQva4WZ37gutLNwqHojKJM7lr/oy4k/RmkqWUsdMB52p47l5g2wnniTRtm0BuWZQvJhksYltsOE6Hwj8ow/3F2vKBEhz1+FleeeDH0=  ;
Message-ID: <20051221104300.32581.qmail@web51608.mail.yahoo.com>
Received: from [210.19.195.20] by web51608.mail.yahoo.com via HTTP; Wed, 21 Dec 2005 02:43:00 PST
Date: Wed, 21 Dec 2005 02:43:00 -0800 (PST)
From: tariq md <asmdt@yahoo.com>
Subject: Re: indexing
To: java-user@lucene.apache.org
In-Reply-To: <20051221092052.55641.qmail@web36115.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-293935006-1135161780=:22200"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-293935006-1135161780=:22200
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

hi revathi,
   we used quartz scheduler to schedul the in dexing,u try this url
  www.opensymphony.com/quartz/
   
  it may b useful
   
  Wit regards
  Tariq
  

revati joshi <revati_joshi83@yahoo.com> wrote:
  we are lucene users .
we have performed indexing .we are stuck up with a problem
how do we perform constant indexing (or updating the index) without manually running the indexing.class file.
and which is the better option either updating it at startup or while running the jar file.



__________________________________________________
Do You Yahoo!?
Tired of spam? Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com   


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-293935006-1135161780=:22200--

From java-user-return-18062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 17:33:11 2005
Return-Path: <java-user-return-18062-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71916 invoked from network); 21 Dec 2005 17:33:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 17:33:11 -0000
Received: (qmail 92892 invoked by uid 500); 21 Dec 2005 17:33:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92865 invoked by uid 500); 21 Dec 2005 17:33:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92839 invoked by uid 99); 21 Dec 2005 17:33:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 09:33:03 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of muralidharan@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 09:33:03 -0800
Received: by xproxy.gmail.com with SMTP id i28so128272wxd
        for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 09:32:42 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=bMgWA+g4BB51h7SCBSTCmBNPANNMzD0UVh+49ZSuFo+s/BPxv2mUYDKNCfS9DuXxqKdPv5HfcAkXaiQW0hkXHFHJ25Kavqtjbh2ql96R98Xd1MdMwQx/yTsmzwpDiIInUS36m9nuw1yxX6+95lUEi+XPp7eCrG0I34e6An+wnZw=
Received: by 10.70.24.4 with SMTP id 4mr932058wxx;
        Wed, 21 Dec 2005 09:32:42 -0800 (PST)
Received: by 10.70.38.11 with HTTP; Wed, 21 Dec 2005 09:32:42 -0800 (PST)
Message-ID: <26fbe3a70512210932kbe190d7sfacf79cd0a22906b@mail.gmail.com>
Date: Wed, 21 Dec 2005 23:02:42 +0530
From: Murali <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Subject: searching portions of an index
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9241_31858270.1135186362243"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_9241_31858270.1135186362243
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

    I am new to lucene. We need to provide search to several users of a
system. Each user has access to a (different)set of documents. The same
document might be accessible by different users. I want to implement this
without indexing a document multiple times. The approach I thought of was t=
o
use a field that is indexed, as well as stored in the index, which contains
the ids of all the users that can access the document. I could then use
boolean queries to search for documents accessible by a particular user. I
figured that I would have to delete and add the whole document again into
the system if a new user is to be given access to an already indexed
document(and I figure that this will happen frequently in the system). Is
there a better approach that I can take?

Thanks,
Murali

------=_Part_9241_31858270.1135186362243--

From java-user-return-18063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 17:55:32 2005
Return-Path: <java-user-return-18063-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81729 invoked from network); 21 Dec 2005 17:55:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 17:55:32 -0000
Received: (qmail 27648 invoked by uid 500); 21 Dec 2005 17:55:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27579 invoked by uid 500); 21 Dec 2005 17:55:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27565 invoked by uid 99); 21 Dec 2005 17:55:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 09:55:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 09:55:24 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id jBLHt2qX001732
	for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 12:55:03 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IRV00I010FQAJ@lmco.com> for java-user@lucene.apache.org; Wed, 21 Dec 2005 12:55:02 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IRV00H6C0FQIW@lmco.com> for java-user@lucene.apache.org; Wed, 21 Dec 2005 12:55:02 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Wed,
 21 Dec 2005 12:55:02 -0500
Date: Wed, 21 Dec 2005 12:55:02 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: searching portions of an index
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3A45@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: searching portions of an index
Thread-Index: AcYGVKBvkYIVdkanTve045r8oU8UMwAAreBw
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 21 Dec 2005 17:55:02.0877 (UTC) FILETIME=[AB13F0D0:01C60657]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You approach is correct but you should use groups instead of users. So
just give a group permission, and add users to groups, this way you
don't have to worry about reindexing when adding more users, just add
the user to the group.

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Murali [mailto:muralidharan@gmail.com] 
Sent: Wednesday, December 21, 2005 12:33 PM
To: java-user@lucene.apache.org
Subject: searching portions of an index

Hi,

    I am new to lucene. We need to provide search to several users of a
system. Each user has access to a (different)set of documents. The same
document might be accessible by different users. I want to implement
this without indexing a document multiple times. The approach I thought
of was to use a field that is indexed, as well as stored in the index,
which contains the ids of all the users that can access the document. I
could then use boolean queries to search for documents accessible by a
particular user. I figured that I would have to delete and add the whole
document again into the system if a new user is to be given access to an
already indexed document(and I figure that this will happen frequently
in the system). Is there a better approach that I can take?

Thanks,
Murali


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 18:01:40 2005
Return-Path: <java-user-return-18064-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85403 invoked from network); 21 Dec 2005 18:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 18:01:40 -0000
Received: (qmail 38830 invoked by uid 500); 21 Dec 2005 18:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38796 invoked by uid 500); 21 Dec 2005 18:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38779 invoked by uid 99); 21 Dec 2005 18:01:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 10:01:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.124] (HELO exprod6og4.obsmtp.com) (64.18.1.124)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 21 Dec 2005 10:01:33 -0800
Received: from source ([139.56.4.13]) by exprod6ob4.obsmtp.com ([64.18.5.12]) with SMTP;
	Wed, 21 Dec 2005 10:01:10 PST
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.102.101])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id jBLI19O00888
	for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 10:01:09 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA20199
	for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 10:03:38 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <W3KT2419>; Wed, 21 Dec 2005 10:02:32 -0800
Message-ID: <8220B8D6B56A9A4E8480489F38E425298E480B@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: NullPointerException in ParallelMultiSearcher
Date: Wed, 21 Dec 2005 10:02:31 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for helps, I know the RunTimeException when I use
a undefined field to sort, but this NullPointerException
is different.

>From the code we can see this exception is not due to throwing,
just because TopDocs object is null.

Best regards, Lisheng

-----Original Message-----
From: Ronnie Kolehmainen [mailto:ronnie.kolehmainen@ub.uu.se]
Sent: Tuesday, December 20, 2005 11:59 PM
To: java-user@lucene.apache.org
Subject: Re: NullPointerException in ParallelMultiSearcher


I believe the most common case is when you do a search with Sort (AUTO 
feature), and one of the fields you sort by is empty. The underlying 
IndexSearcher throws a RuntimeException and "docs" (result from 
searcher.search()) is never set, which results in a NullPointerException 
when hits() is called later on after the searcher thread is joined.

I'm not sure if there are other scenarios where searcher.search() throws 
  exceptions other than IOException (which is handled by 
MultiSearcherThread). These will result in NullpointerExceptions as well.

Not much help I guess, but perhaps some more insight.

/Ronnie

Zhang, Lisheng wrote:
> Hi,
> 
> I have not received any feedback yet, any comments
> would be greatly appreciated!
> 
> Lisheng
> 
> -----Original Message-----
> From: Zhang, Lisheng 
> Sent: Thursday, December 01, 2005 12:30 PM
> To: 'java-user@lucene.apache.org'
> Subject: NullPointerException in ParallelMultiSearcher
> 
> 
> Hi,
> 
> We are using lucene v1.4.3 for some time, in general it is working well.
> 
> We often try to search multiple collections at the same time, so we 
> are using ParallelMultiSearcher, but sometimes we got the following
> exception:
> 
> ########
> java.lang.NullPointerException
>     at
>
org.apache.lucene.search.MultiSearcherThread.hits(ParallelMultiSearcher.java
> :281)
>     at
>
org.apache.lucene.search.ParallelMultiSearcher.search(ParallelMultiSearcher.
> java:134)
>     at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>     at org.apache.lucene.search.Hits.<init>(Hits.java:51)
>     at org.apache.lucene.search.Searcher.search(Searcher.java:41)
> ########
> 
> It seems this happens when searching site is heavily used, also when
> we switch to MultiSearcher, we never see this kind of problems?
> 
> Your guidance would be very appreciated!
> 
> Best regards, Lisheng
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

-- 
________________________________________

   Ronnie Kolehmainen
   Systems Developer
   Electronic Publishing Centre
   Uppsala University Library
   +46 (0)18 471 5847
   mailto:ronnie.kolehmainen@ub.uu.se
________________________________________

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 18:43:15 2005
Return-Path: <java-user-return-18065-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5052 invoked from network); 21 Dec 2005 18:43:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 18:43:15 -0000
Received: (qmail 99694 invoked by uid 500); 21 Dec 2005 18:43:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99668 invoked by uid 500); 21 Dec 2005 18:43:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99656 invoked by uid 99); 21 Dec 2005 18:43:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 10:43:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of muralidharan@gmail.com designates 66.249.82.194 as permitted sender)
Received: from [66.249.82.194] (HELO xproxy.gmail.com) (66.249.82.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 10:43:06 -0800
Received: by xproxy.gmail.com with SMTP id i28so138055wxd
        for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 10:42:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=q62oI7khkNh9Kx8i3rrgqECPux17tQ5k7BwUAdMlZ8wN7XLAam8Y8q3zs0Arbv1dLIZ1K1JoV8ounbsqAL2uMMso/CzHcujkz81B4M4SHUFMhekQexbTfJpe210qQ9Wccw/4eC+OUg8V19SiE6p1FAWxf+yXgblpXEB5fILaCTI=
Received: by 10.70.131.11 with SMTP id e11mr973099wxd;
        Wed, 21 Dec 2005 10:42:44 -0800 (PST)
Received: by 10.70.38.11 with HTTP; Wed, 21 Dec 2005 10:42:44 -0800 (PST)
Message-ID: <26fbe3a70512211042q6219b6e0v99f9c6db96774224@mail.gmail.com>
Date: Thu, 22 Dec 2005 00:12:44 +0530
From: Murali <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching portions of an index
In-Reply-To: <92A278501EF50444AD3EE1FFB51219550BCE3A45@emss10m03.rck.atm.lmco.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10261_21961753.1135190564409"
References: <92A278501EF50444AD3EE1FFB51219550BCE3A45@emss10m03.rck.atm.lmco.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10261_21961753.1135190564409
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Thanks for your reply. But your suggestion is not applicable to my situatio=
n
because 'users' of our system dont correspond to unix users, and different
users are not related in any way, so there is no logical way to split them
into groups.

Murali
On 12/21/05, Mordo, Aviran (EXP N-NANNATEK) <aviran.mordo@lmco.com> wrote:
>
> You approach is correct but you should use groups instead of users. So
> just give a group permission, and add users to groups, this way you
> don't have to worry about reindexing when adding more users, just add
> the user to the group.
>
> Aviran
> http://www.aviransplace.com
>
> -----Original Message-----
> From: Murali [mailto:muralidharan@gmail.com]
> Sent: Wednesday, December 21, 2005 12:33 PM
> To: java-user@lucene.apache.org
> Subject: searching portions of an index
>
> Hi,
>
>     I am new to lucene. We need to provide search to several users of a
> system. Each user has access to a (different)set of documents. The same
> document might be accessible by different users. I want to implement
> this without indexing a document multiple times. The approach I thought
> of was to use a field that is indexed, as well as stored in the index,
> which contains the ids of all the users that can access the document. I
> could then use boolean queries to search for documents accessible by a
> particular user. I figured that I would have to delete and add the whole
> document again into the system if a new user is to be given access to an
> already indexed document(and I figure that this will happen frequently
> in the system). Is there a better approach that I can take?
>
> Thanks,
> Murali
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10261_21961753.1135190564409--

From java-user-return-18066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 19:04:40 2005
Return-Path: <java-user-return-18066-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19238 invoked from network); 21 Dec 2005 19:04:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 19:04:40 -0000
Received: (qmail 42687 invoked by uid 500); 21 Dec 2005 19:04:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42662 invoked by uid 500); 21 Dec 2005 19:04:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42651 invoked by uid 99); 21 Dec 2005 19:04:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 11:04:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 11:04:33 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 486D35B782; Wed, 21 Dec 2005 11:04:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 7634D7F459
	for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 11:04:06 -0800 (PST)
Date: Wed, 21 Dec 2005 11:04:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: searching portions of an index
In-Reply-To: <26fbe3a70512210932kbe190d7sfacf79cd0a22906b@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0512211052340.27590@hal.rescomp.berkeley.edu>
References: <26fbe3a70512210932kbe190d7sfacf79cd0a22906b@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: document might be accessible by different users. I want to implement this
: without indexing a document multiple times. The approach I thought of was to
: use a field that is indexed, as well as stored in the index, which contains
: the ids of all the users that can access the document. I could then use

The "Best" solution really depends on what determines if a user can view a
document.  If the set of documents visible to user "Bob" is based on
a set of document properties (ie: bob can view any documents in the
"reports" category that have an access level of "5" or less), then you can
store the properties bob is restricted to anywhere, and at search time
look them up and make a Filter out of them to apply to Bob's searches.
(ie: a ChainedFilter containing a simple TermFilter on the category field
and a RangeFilter on the level field)

If the set of documents viewable by a given person is truely an arbitrary
list of document identifiers stored in a DB somewhere, then build a Filter
that knows how to access that list, and sets the bits only on the document
identifiers in that list.

As always: accessing the stored fields of every document in your index
from a Filter is not a good idea -- make sure the identifier field is
indexed, and use the FieldCache to loop over all of the keys for all of
the docs


The key elements to any approach being:

  1) Don't store the lsit of users in the docs, that seems like a real
     waste.
  2) Use a Filter for each user (or if possible, group of users that have
     access permissions in common)
  3) Cache those Filters using something like CachingWrapperFilter (if
     your Index doesn't change very often, but you have lots of users, you
     may want a differnet caching approach that lets you expire Filters
     without closing the IndexReader.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 21 19:19:48 2005
Return-Path: <java-user-return-18067-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28090 invoked from network); 21 Dec 2005 19:19:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Dec 2005 19:19:48 -0000
Received: (qmail 68015 invoked by uid 500); 21 Dec 2005 19:19:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67988 invoked by uid 500); 21 Dec 2005 19:19:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67977 invoked by uid 99); 21 Dec 2005 19:19:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 11:19:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of muralidharan@gmail.com designates 66.249.82.205 as permitted sender)
Received: from [66.249.82.205] (HELO xproxy.gmail.com) (66.249.82.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 21 Dec 2005 11:19:41 -0800
Received: by xproxy.gmail.com with SMTP id i28so143433wxd
        for <java-user@lucene.apache.org>; Wed, 21 Dec 2005 11:19:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=QRmMXlgMhunAXaHl3Hg0CSqOaZ34QYr3HPwTkiamiIngdtvWhnL50N3+VpJX3sMa+49dq6WlzLazB2q9OJdJz2/r10Msfxbjn3cufIDJ47t1hCBJj5wgu25/sWtOSHuQytaAGIDVRf/n7a3ZIh3QIoIZffhaCG3WHYI0oUiCVJw=
Received: by 10.70.42.8 with SMTP id p8mr1018831wxp;
        Wed, 21 Dec 2005 11:19:20 -0800 (PST)
Received: by 10.70.38.11 with HTTP; Wed, 21 Dec 2005 11:19:19 -0800 (PST)
Message-ID: <26fbe3a70512211119n140240d1x85485bb91ce7602b@mail.gmail.com>
Date: Thu, 22 Dec 2005 00:49:19 +0530
From: Murali <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searching portions of an index
In-Reply-To: <Pine.LNX.4.58.0512211052340.27590@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10793_13406807.1135192759962"
References: <26fbe3a70512210932kbe190d7sfacf79cd0a22906b@mail.gmail.com>
	 <Pine.LNX.4.58.0512211052340.27590@hal.rescomp.berkeley.edu>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10793_13406807.1135192759962
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 12/22/05, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
>
> If the set of documents viewable by a given person is truely an arbitrary
> list of document identifiers stored in a DB somewhere, then build a Filte=
r
> that knows how to access that list, and sets the bits only on the documen=
t
> identifiers in that list.


This is indeed the case, only that since the system is being written from
scratch, the DB itself doesnt exist now and I am free to make any design
choice on this. Also, when the system goes live, I'm expecting that both
documents and users to the system will be added continually.

Thanks,
Murali

------=_Part_10793_13406807.1135192759962--

From java-user-return-18068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 18:46:21 2005
Return-Path: <java-user-return-18068-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8628 invoked from network); 22 Dec 2005 18:46:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 18:46:13 -0000
Received: (qmail 90485 invoked by uid 500); 22 Dec 2005 18:46:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90350 invoked by uid 500); 22 Dec 2005 18:46:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90291 invoked by uid 99); 22 Dec 2005 18:46:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 10:46:00 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.39.202] (HELO web50311.mail.yahoo.com) (206.190.39.202)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Dec 2005 10:45:58 -0800
Received: (qmail 59310 invoked by uid 60001); 22 Dec 2005 18:45:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type;
  b=ywMGhR88JrGy3X0+veumddzdftxdWfNV7tyHoiCbnfjMbpj3J6UDR8ntLCd1V7b+qCmOfY8aoHuxSLuXKcNZ7rlC//Z0jM1w/IQmTyiObsueB+guWiq80DchnjLdwIaQGojKlGjGtJGPGp6KdFk804YEFlEIzeyhaDyuZTNGHHo=  ;
Message-ID: <20051222184537.59308.qmail@web50311.mail.yahoo.com>
Date: Thu, 22 Dec 2005 10:45:37 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Reply-To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: usage of parallelreader
To: java-user@lucene.apache.org
In-Reply-To: <43A36AC3.2030608@manawiz.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

moving this to java-user.

Hello,

Is anyone using ParallelReader the way Chuck is describing his scenario?  I remember looking at the ParallelReader a few months ago and asking myself the same question: how can I update only one of the parallel indices and still keep the documents in two indices in sync?

Thanks,
Otis

----- Original Message ----
From: Chuck Williams <chuck@manawiz.com>
To: java-dev@lucene.apache.org
Sent: Fri 16 Dec 2005 08:32:51 PM EST
Subject: Re: usage of parallelreader

I also need the ability to achieve rapid updates.  ParallelReader is
attractive because my content naturally segments into a set of large and
small stored fields where the small fields need to be accessed quickly,
plus stable and mutable indexed fields where the mutable fields need to
be updated quickly.  Fortunately all the large fields are stable. 
Doug's comments in parallel reader seem to indicate it is designed to
solve this type of problem, but it is not clear how to perform the
update on only the mutable field index while keeping all indices
synchronized.

Is there a reason the update contrib cited below was not pursued; it
seems Otis had some interest in it initially?  It seems that integrating
this contrib with ParallelReader might be a good approach.  I'm going to
explore that and other approaches to this problem.  Any relevant
background or suggestions would be greatly appreciated.

Thanks,

Chuck

----- Original Message -----
*From:* "Daan de Wit" <d.de.wit@wis.nl>
*To:* java-user@lucene.apache.org
*Sent:* 12/15/2005 07:08:41 AM
*Subject:* usage of parallelreader


>Hi all,
>
> 
>
>Within our application it is possible for users to add reactions for
>files. It is a requirement that a search returns a file if the query
>matches the contents or a reaction. I think it would be best to use to
>different indexes, one for the file and another one for the reactions.
>Searching could then be done via ParallelReader. If I understand that
>class correctly I have to ensure that the documents in the two indexes
>stay in the same order. If I'm not mistaken, updating a document must
>thus be done by first deleting the to-update document from both indexes,
>and then adding it back to both indexes. If this is correct, then it
>would be much easier to implement this scenario using one index and
>maybe use the Document update contrib
><http://issues.apache.org/bugzilla/show_bug.cgi?id=34629>  by Nicolas
>Maisonneuve. 
>
>Could anyone please enlighten me?





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 20:41:22 2005
Return-Path: <java-user-return-18069-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10941 invoked from network); 22 Dec 2005 20:41:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 20:41:21 -0000
Received: (qmail 7271 invoked by uid 500); 22 Dec 2005 20:41:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7171 invoked by uid 500); 22 Dec 2005 20:41:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7140 invoked by uid 99); 22 Dec 2005 20:41:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 12:41:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 12:41:05 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Basic lucene usage
Date: Thu, 22 Dec 2005 14:39:32 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B2915E4DF@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Basic lucene usage
Thread-Index: AcX6kYJQxDUk40AMQG+U5x5heMBfSgMpe5+g
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you open an indexsearcher and keep a single indexsearcher open for
all sessions to use, then can an indexwriter delete the files and create
the new files as needed?   =20

To start an indexsearcher, you pass in the directory.  Doesn't that tie
the searcher to the files?  So an indexwriter couldn't come along and
reindex (delete and recreate) the directory while the searcher has a
hold of those files..correct?

So if I have a single indexsearcher, if I want to recreate the index, I
would have to stop the indexsearcher, go through creating the index,
then get a new fsdirectory for a new indexsearcher, correct?

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]=20
Sent: Tuesday, December 06, 2005 12:19 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

Lucene is thread safe, it is recommended that you only have one
IndexSearcher instance. No problems with multiple searches on the same
IndexSearcher.

You can index while searching, as soon as you want the new entries to be
found by the IndexSearcher, just get a new instance of IndexSearcher

Aviran
http://www.aviransplace.com

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]=20
Sent: Tuesday, December 06, 2005 1:13 PM
To: java-user@lucene.apache.org
Subject: Basic lucene usage

Am I correct in assuming that I can use lucene by itself as a search
engine
in a website?   If each user session is looking at the fsdirectory and
searching on it, is that ok?   Or do I need to put in a queue or pool
that
handles searching it; only allowing the one thing application-wide to
actually get to the fsdirectory?    Can 100 people look at the
fsdirectory
at the same time?  Or do you generally put in a single entry point that
queues requests for a search from those 100 people?

And I guess I have the same question about writing/indexing.  Locks are
creating as apart of the indexing process, correct?  So you'd definitly
not want multiple people doing that at the same time?  What is the best
practice
to stop that?  =20

Are locks created as apart of searching?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 21:09:05 2005
Return-Path: <java-user-return-18070-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25817 invoked from network); 22 Dec 2005 21:09:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 21:09:04 -0000
Received: (qmail 49081 invoked by uid 500); 22 Dec 2005 21:08:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49060 invoked by uid 500); 22 Dec 2005 21:08:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49047 invoked by uid 99); 22 Dec 2005 21:08:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:08:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:08:57 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id jBML8ZqX017345
	for <java-user@lucene.apache.org>; Thu, 22 Dec 2005 16:08:35 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IRX0040142BGF@lmco.com> for java-user@lucene.apache.org; Thu, 22 Dec 2005 16:08:35 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IRX006JN42BSG@lmco.com> for java-user@lucene.apache.org; Thu, 22 Dec 2005 16:08:35 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 22 Dec 2005 16:08:35 -0500
Date: Thu, 22 Dec 2005 16:08:35 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Basic lucene usage
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3A4A@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Basic lucene usage
Thread-Index: AcX6kYJQxDUk40AMQG+U5x5heMBfSgMpe5+gAADxUqA=
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 22 Dec 2005 21:08:35.0397 (UTC) FILETIME=[DF179F50:01C6073B]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com] 
Sent: Thursday, December 22, 2005 3:40 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

>If you open an indexsearcher and keep a single indexsearcher open for
all sessions to use, then can an indexwriter delete the files >and
create
>the new files as needed?    

Yes, but the changes will not show up in the search until you get a new
instance of IndexSearcher.

>To start an indexsearcher, you pass in the directory.  Doesn't that tie
the searcher to the files?  So an indexwriter couldn't come >along and
reindex (delete and recreate) the directory while the searcher has a
hold of those files..correct?

If you want to recreate the index, you'll need to do that on a different
folder and then get a new IndexSearcher Instance that points to the new
folder, once you are done.

>So if I have a single indexsearcher, if I want to recreate the index, I
would have to stop the indexsearcher, go through creating the index,
then get a new fsdirectory for a new indexsearcher, correct?

Yes, but see previous answer for better usability.

HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Tuesday, December 06, 2005 12:19 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

Lucene is thread safe, it is recommended that you only have one
IndexSearcher instance. No problems with multiple searches on the same
IndexSearcher.

You can index while searching, as soon as you want the new entries to be
found by the IndexSearcher, just get a new instance of IndexSearcher

Aviran
http://www.aviransplace.com

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Tuesday, December 06, 2005 1:13 PM
To: java-user@lucene.apache.org
Subject: Basic lucene usage

Am I correct in assuming that I can use lucene by itself as a search
engine
in a website?   If each user session is looking at the fsdirectory and
searching on it, is that ok?   Or do I need to put in a queue or pool
that
handles searching it; only allowing the one thing application-wide to
actually get to the fsdirectory?    Can 100 people look at the
fsdirectory
at the same time?  Or do you generally put in a single entry point that
queues requests for a search from those 100 people?

And I guess I have the same question about writing/indexing.  Locks are
creating as apart of the indexing process, correct?  So you'd definitly
not want multiple people doing that at the same time?  What is the best
practice
to stop that?   

Are locks created as apart of searching?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 21:12:59 2005
Return-Path: <java-user-return-18071-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27242 invoked from network); 22 Dec 2005 21:12:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 21:12:59 -0000
Received: (qmail 55071 invoked by uid 500); 22 Dec 2005 21:12:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55042 invoked by uid 500); 22 Dec 2005 21:12:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55031 invoked by uid 99); 22 Dec 2005 21:12:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:12:52 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:12:50 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Basic lucene usage
Date: Thu, 22 Dec 2005 15:11:16 -0600
Message-ID: <F9E303076B72074AB76B2C8F78952B2915E4E0@bettylou.configureone.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Basic lucene usage
Thread-Index: AcYHO85+lZX3kWDjRA+oygP5BY03hAAAEjGg
From: "John Powers" <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am unable to delete those files while an indexsearcher has them open.
Are you sure that's possible (question/response #1)?

I sorta have to stick to a single directory.   I guess I'll have to work
around that.

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]=20
Sent: Thursday, December 22, 2005 3:09 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

=20

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]=20
Sent: Thursday, December 22, 2005 3:40 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

>If you open an indexsearcher and keep a single indexsearcher open for
all sessions to use, then can an indexwriter delete the files >and
create
>the new files as needed?   =20

Yes, but the changes will not show up in the search until you get a new
instance of IndexSearcher.

>To start an indexsearcher, you pass in the directory.  Doesn't that tie
the searcher to the files?  So an indexwriter couldn't come >along and
reindex (delete and recreate) the directory while the searcher has a
hold of those files..correct?

If you want to recreate the index, you'll need to do that on a different
folder and then get a new IndexSearcher Instance that points to the new
folder, once you are done.

>So if I have a single indexsearcher, if I want to recreate the index, I
would have to stop the indexsearcher, go through creating the index,
then get a new fsdirectory for a new indexsearcher, correct?

Yes, but see previous answer for better usability.

HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Tuesday, December 06, 2005 12:19 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

Lucene is thread safe, it is recommended that you only have one
IndexSearcher instance. No problems with multiple searches on the same
IndexSearcher.

You can index while searching, as soon as you want the new entries to be
found by the IndexSearcher, just get a new instance of IndexSearcher

Aviran
http://www.aviransplace.com

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Tuesday, December 06, 2005 1:13 PM
To: java-user@lucene.apache.org
Subject: Basic lucene usage

Am I correct in assuming that I can use lucene by itself as a search
engine
in a website?   If each user session is looking at the fsdirectory and
searching on it, is that ok?   Or do I need to put in a queue or pool
that
handles searching it; only allowing the one thing application-wide to
actually get to the fsdirectory?    Can 100 people look at the
fsdirectory
at the same time?  Or do you generally put in a single entry point that
queues requests for a search from those 100 people?

And I guess I have the same question about writing/indexing.  Locks are
creating as apart of the indexing process, correct?  So you'd definitly
not want multiple people doing that at the same time?  What is the best
practice
to stop that?  =20

Are locks created as apart of searching?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 21:38:21 2005
Return-Path: <java-user-return-18072-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41119 invoked from network); 22 Dec 2005 21:38:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 21:38:20 -0000
Received: (qmail 97756 invoked by uid 500); 22 Dec 2005 21:38:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96734 invoked by uid 500); 22 Dec 2005 21:38:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96720 invoked by uid 99); 22 Dec 2005 21:38:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:38:15 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=UNPARSEABLE_RELAY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [192.35.35.7] (HELO mailgw3a.lmco.com) (192.35.35.7)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:38:14 -0800
Received: from emss04g01.ems.lmco.com (relay4.ems.lmco.com [166.17.13.122])
	by mailgw3a.lmco.com (8.12.10/8.12.10) with ESMTP id jBMLbmqX025505
	for <java-user@lucene.apache.org>; Thu, 22 Dec 2005 16:37:48 -0500 (EST)
Received: from CONVERSION-DAEMON.lmco.com by lmco.com (PMDF V6.1-1X6 #30884)
 id <0IRX00L015F0KD@lmco.com> for java-user@lucene.apache.org; Thu, 22 Dec 2005 16:37:48 -0500 (EST)
Received: from EMSS10M01.us.lmco.com ([158.187.0.150]) by lmco.com (PMDF V6.1-1X6 #30884)
 with ESMTP id <0IRX006Q85F0SG@lmco.com> for java-user@lucene.apache.org; Thu, 22 Dec 2005 16:37:48 -0500 (EST)
Received: from EMSS10M03.us.lmco.com ([158.187.0.148]) by EMSS10M01.us.lmco.com with Microsoft SMTPSVC(5.0.2195.6713); Thu,
 22 Dec 2005 16:37:48 -0500
Date: Thu, 22 Dec 2005 16:37:48 -0500
From: "Mordo, Aviran (EXP N-NANNATEK)" <aviran.mordo@lmco.com>
Subject: RE: Basic lucene usage
To: java-user@lucene.apache.org
Message-id: <92A278501EF50444AD3EE1FFB51219550BCE3A4B@emss10m03.rck.atm.lmco.com>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: Basic lucene usage
Thread-Index: AcYHO85+lZX3kWDjRA+oygP5BY03hAAAEjGgAADuxyA=
content-class: urn:content-classes:message
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
X-OriginalArrivalTime: 22 Dec 2005 21:37:48.0259 (UTC) FILETIME=[F3E12330:01C6073F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm sorry if I wasn't clear. You can not delete the files themselves,
you delete the documents within the index

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com] 
Sent: Thursday, December 22, 2005 4:11 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

I am unable to delete those files while an indexsearcher has them open.
Are you sure that's possible (question/response #1)?

I sorta have to stick to a single directory.   I guess I'll have to work
around that.

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Thursday, December 22, 2005 3:09 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

 

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Thursday, December 22, 2005 3:40 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

>If you open an indexsearcher and keep a single indexsearcher open for
all sessions to use, then can an indexwriter delete the files >and
create
>the new files as needed?    

Yes, but the changes will not show up in the search until you get a new
instance of IndexSearcher.

>To start an indexsearcher, you pass in the directory.  Doesn't that tie
the searcher to the files?  So an indexwriter couldn't come >along and
reindex (delete and recreate) the directory while the searcher has a
hold of those files..correct?

If you want to recreate the index, you'll need to do that on a different
folder and then get a new IndexSearcher Instance that points to the new
folder, once you are done.

>So if I have a single indexsearcher, if I want to recreate the index, I
would have to stop the indexsearcher, go through creating the index,
then get a new fsdirectory for a new indexsearcher, correct?

Yes, but see previous answer for better usability.

HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Tuesday, December 06, 2005 12:19 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

Lucene is thread safe, it is recommended that you only have one
IndexSearcher instance. No problems with multiple searches on the same
IndexSearcher.

You can index while searching, as soon as you want the new entries to be
found by the IndexSearcher, just get a new instance of IndexSearcher

Aviran
http://www.aviransplace.com

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Tuesday, December 06, 2005 1:13 PM
To: java-user@lucene.apache.org
Subject: Basic lucene usage

Am I correct in assuming that I can use lucene by itself as a search
engine
in a website?   If each user session is looking at the fsdirectory and
searching on it, is that ok?   Or do I need to put in a queue or pool
that
handles searching it; only allowing the one thing application-wide to
actually get to the fsdirectory?    Can 100 people look at the
fsdirectory
at the same time?  Or do you generally put in a single entry point that
queues requests for a search from those 100 people?

And I guess I have the same question about writing/indexing.  Locks are
creating as apart of the indexing process, correct?  So you'd definitly
not want multiple people doing that at the same time?  What is the best
practice
to stop that?   

Are locks created as apart of searching?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 21:48:46 2005
Return-Path: <java-user-return-18073-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48077 invoked from network); 22 Dec 2005 21:48:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 21:48:46 -0000
Received: (qmail 21805 invoked by uid 500); 22 Dec 2005 21:48:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21595 invoked by uid 500); 22 Dec 2005 21:48:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21556 invoked by uid 500); 22 Dec 2005 21:48:36 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 21478 invoked by uid 99); 22 Dec 2005 21:48:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:48:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.8.60.202] (HELO MUSCOVITE.igneous.opin.com) (206.8.60.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:48:34 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C60740.821CAE16"
Subject: OutOfMemory during optimize
Date: Thu, 22 Dec 2005 15:41:46 -0600
Message-ID: <44C71DE68669B045B760F2EE833AEF3005A314@muscovite.igneous.opin.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory during optimize
Thread-Index: AcYHQWe/rSfn3SEuRD6xJF40ldUWVw==
From: "Steve Rajavuori" <SteveR@opin.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60740.821CAE16
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am periodically getting "Too many open files" error when searching. =
Currently there are over 500 files in my Lucene directory. I am =
attempting to run optimize( ) to reduce the number of files. However, =
optimize never finishes because whenever I run it, it quits with a Java =
exception OutOfMemory error. I have tried using the -Xmx and -Xms =
switches to increase heap size, but that has not helped.
=20
Any suggestions?
=20
Steve Rajavuori
OPIN Systems

Voice: 651-994-6556
Fax:   651-994-7828

2600 Eagan Woods Dr., Suite 400
Eagan, MN  55121
800-888-1804
 <http://www.opin.com/> www.opin.com

------_=_NextPart_001_01C60740.821CAE16--

From java-user-return-18074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 21:51:41 2005
Return-Path: <java-user-return-18074-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50490 invoked from network); 22 Dec 2005 21:51:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 21:51:40 -0000
Received: (qmail 30191 invoked by uid 500); 22 Dec 2005 21:51:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30172 invoked by uid 500); 22 Dec 2005 21:51:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30161 invoked by uid 99); 22 Dec 2005 21:51:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:51:34 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.8.60.202] (HELO MUSCOVITE.igneous.opin.com) (206.8.60.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:51:32 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C60740.EB945FDD"
Subject: OutOfMemory error during optimize
Date: Thu, 22 Dec 2005 15:44:43 -0600
Message-ID: <44C71DE68669B045B760F2EE833AEF3005A315@muscovite.igneous.opin.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: OutOfMemory error during optimize
Thread-Index: AcYHQdE2mSWHmcYYQ06ojlsp/nKTBQ==
From: "Steve Rajavuori" <SteveR@opin.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60740.EB945FDD
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am periodically getting "Too many open files" error when searching. =
Currently there are over 500 files in my Lucene directory. I am =
attempting to run optimize( ) to reduce the number of files. However, =
optimize never finishes because whenever I run it, it quits with a Java =
exception OutOfMemory error. I have tried using the -Xmx and -Xms =
switches to increase heap size, but that has not helped.
=20
Any suggestions?
=20
Steve Rajavuori
OPIN Systems

Voice: 651-994-6556
Fax:   651-994-7828

2600 Eagan Woods Dr., Suite 400
Eagan, MN  55121
800-888-1804
 <http://www.opin.com/> www.opin.com

------_=_NextPart_001_01C60740.EB945FDD--

From java-user-return-18075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 22 21:56:53 2005
Return-Path: <java-user-return-18075-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55792 invoked from network); 22 Dec 2005 21:56:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Dec 2005 21:56:51 -0000
Received: (qmail 40335 invoked by uid 500); 22 Dec 2005 21:56:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40148 invoked by uid 500); 22 Dec 2005 21:56:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39842 invoked by uid 99); 22 Dec 2005 21:56:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 13:56:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mike@curtin.com designates 205.158.62.197 as permitted sender)
Received: from [205.158.62.197] (HELO ws6-2.us4.outblaze.com) (205.158.62.197)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 22 Dec 2005 13:56:34 -0800
Received: (qmail 10990 invoked from network); 22 Dec 2005 21:56:13 -0000
Received: from unknown (HELO ?10.1.1.2?) (mike@curtin.com@69.212.34.0)
  by ws6-2.us4.outblaze.com with SMTP; 22 Dec 2005 21:56:13 -0000
Message-ID: <43AB20FE.1020407@curtin.com>
Date: Thu, 22 Dec 2005 16:56:14 -0500
From: "Michael D. Curtin" <mike@curtin.com>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040804 Netscape/7.2 (ax)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: OutOfMemory during optimize
References: <44C71DE68669B045B760F2EE833AEF3005A314@muscovite.igneous.opin.com>
In-Reply-To: <44C71DE68669B045B760F2EE833AEF3005A314@muscovite.igneous.opin.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Steve Rajavuori wrote:
> I am periodically getting "Too many open files" error when searching. Currently there are over 500 files in my Lucene directory. I am attempting to run optimize( ) to reduce the number of files. However, optimize never finishes because whenever I run it, it quits with a Java exception OutOfMemory error. I have tried using the -Xmx and -Xms switches to increase heap size, but that has not helped.
>  
> Any suggestions?

What is mergeFactor set to in your IndexWriter?  Decreasing it makes 
optimize() take longer, but use less memory.  How much RAM does the 
machine you're running on have, compared to the size of your index's 
documents?

--MDC

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 23 06:55:01 2005
Return-Path: <java-user-return-18076-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63358 invoked from network); 23 Dec 2005 06:55:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Dec 2005 06:55:00 -0000
Received: (qmail 7081 invoked by uid 500); 23 Dec 2005 06:54:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7027 invoked by uid 500); 23 Dec 2005 06:54:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7011 invoked by uid 99); 23 Dec 2005 06:54:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 22:54:54 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [213.59.116.41] (HELO orbita1.ru) (213.59.116.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 22 Dec 2005 22:54:53 -0800
Received: from anton.ipt ([192.168.0.177] helo=anton)
	by orbita1.ru with esmtpa (Exim 4.42)
	id 1Epgow-00063o-4z
	for java-user@lucene.apache.org; Fri, 23 Dec 2005 09:54:30 +0300
From: <anton@orbita1.ru>
To: <java-user@lucene.apache.org>
Subject: RE: OutOfMemory during optimize
Date: Fri, 23 Dec 2005 09:54:16 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
In-Reply-To: <44C71DE68669B045B760F2EE833AEF3005A314@muscovite.igneous.opin.com>
Thread-Index: AcYHQWe/rSfn3SEuRD6xJF40ldUWVwATASSA
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20051223065454.1667410FB003@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We increase system parameter "max number open files". For do it use command
ulimit -n [max number]. 

-----Original Message-----
From: Steve Rajavuori [mailto:SteveR@opin.com] 
Sent: Friday, December 23, 2005 12:42 AM
To: lucene-user@jakarta.apache.org
Subject: OutOfMemory during optimize

I am periodically getting "Too many open files" error when searching.
Currently there are over 500 files in my Lucene directory. I am attempting
to run optimize( ) to reduce the number of files. However, optimize never
finishes because whenever I run it, it quits with a Java exception
OutOfMemory error. I have tried using the -Xmx and -Xms switches to increase
heap size, but that has not helped.
 
Any suggestions?
 
Steve Rajavuori
OPIN Systems

Voice: 651-994-6556
Fax:   651-994-7828

2600 Eagan Woods Dr., Suite 400
Eagan, MN  55121
800-888-1804
 <http://www.opin.com/> www.opin.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 23 08:14:50 2005
Return-Path: <java-user-return-18077-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92040 invoked from network); 23 Dec 2005 08:14:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Dec 2005 08:14:49 -0000
Received: (qmail 75027 invoked by uid 500); 23 Dec 2005 08:14:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74991 invoked by uid 500); 23 Dec 2005 08:14:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74975 invoked by uid 99); 23 Dec 2005 08:14:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Dec 2005 00:14:42 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.194.158.131] (HELO exchange-mbx.bvdep.com) (193.194.158.131)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Dec 2005 00:14:41 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6487.1
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Basic lucene usage
Date: Fri, 23 Dec 2005 09:14:18 +0100
Message-ID: <3287125F0F0CCE4E8F55435208100CF5575F52@exchange-mbx.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Basic lucene usage
Thread-Index: AcYHO85+lZX3kWDjRA+oygP5BY03hAAAEjGgAADuxyAAFfJS0A==
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

IndexWriter will try to delete obsolete files when it is closed.
If the files cannot be deleted immediately for whatever reason (usually
because some IndexReaderIndexSearcher has them open)
it will list the files to deleted in the file "deletable".

On the next update of the index, the other IndexReader(s) should have
closed and reopened by then and the deletes will succeed.

A mechanism to check if there are deletable files present would be handy
so IndexWriter.open and IndexWriter.close can be called even when there
are no other updates to be done.
Or even a method cleanupIndex() or something that retries to delete
deletable files.

The problem is even more present if you recreate an index by passing
true as last parameter while creating the IndexWriter.
Then all the old segments are left in the Directory, but they aren't
even marked as deletable...

I may attach a patch to JIRA one of these days, no promises though...

Luc


-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]=20
Sent: donderdag 22 december 2005 22:38
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

I'm sorry if I wasn't clear. You can not delete the files themselves,
you delete the documents within the index

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]=20
Sent: Thursday, December 22, 2005 4:11 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

I am unable to delete those files while an indexsearcher has them open.
Are you sure that's possible (question/response #1)?

I sorta have to stick to a single directory.   I guess I'll have to work
around that.

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Thursday, December 22, 2005 3:09 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

=20

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Thursday, December 22, 2005 3:40 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

>If you open an indexsearcher and keep a single indexsearcher open for
all sessions to use, then can an indexwriter delete the files >and
create
>the new files as needed?   =20

Yes, but the changes will not show up in the search until you get a new
instance of IndexSearcher.

>To start an indexsearcher, you pass in the directory.  Doesn't that tie
the searcher to the files?  So an indexwriter couldn't come >along and
reindex (delete and recreate) the directory while the searcher has a
hold of those files..correct?

If you want to recreate the index, you'll need to do that on a different
folder and then get a new IndexSearcher Instance that points to the new
folder, once you are done.

>So if I have a single indexsearcher, if I want to recreate the index, I
would have to stop the indexsearcher, go through creating the index,
then get a new fsdirectory for a new indexsearcher, correct?

Yes, but see previous answer for better usability.

HTH

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Mordo, Aviran (EXP N-NANNATEK) [mailto:aviran.mordo@lmco.com]
Sent: Tuesday, December 06, 2005 12:19 PM
To: java-user@lucene.apache.org
Subject: RE: Basic lucene usage

Lucene is thread safe, it is recommended that you only have one
IndexSearcher instance. No problems with multiple searches on the same
IndexSearcher.

You can index while searching, as soon as you want the new entries to be
found by the IndexSearcher, just get a new instance of IndexSearcher

Aviran
http://www.aviransplace.com

-----Original Message-----
From: John Powers [mailto:jpowers@configureone.com]
Sent: Tuesday, December 06, 2005 1:13 PM
To: java-user@lucene.apache.org
Subject: Basic lucene usage

Am I correct in assuming that I can use lucene by itself as a search
engine
in a website?   If each user session is looking at the fsdirectory and
searching on it, is that ok?   Or do I need to put in a queue or pool
that
handles searching it; only allowing the one thing application-wide to
actually get to the fsdirectory?    Can 100 people look at the
fsdirectory
at the same time?  Or do you generally put in a single entry point that
queues requests for a search from those 100 people?

And I guess I have the same question about writing/indexing.  Locks are
creating as apart of the indexing process, correct?  So you'd definitly
not want multiple people doing that at the same time?  What is the best
practice
to stop that?  =20

Are locks created as apart of searching?


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 23 11:02:25 2005
Return-Path: <java-user-return-18078-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60640 invoked from network); 23 Dec 2005 11:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Dec 2005 11:02:25 -0000
Received: (qmail 42443 invoked by uid 500); 23 Dec 2005 11:02:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41847 invoked by uid 500); 23 Dec 2005 11:02:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41836 invoked by uid 99); 23 Dec 2005 11:02:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Dec 2005 03:02:16 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.203] (HELO web25905.mail.ukl.yahoo.com) (217.12.10.203)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 23 Dec 2005 03:02:14 -0800
Received: (qmail 35264 invoked by uid 60001); 23 Dec 2005 11:01:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=XGnhMj0HkGuS0J5PA+UneaHsnSc7HqaJBK3etgBrxn9jWBa9K1LOton2hlsIIrhoXHMOXRMKNs3TyuOuLF7PzU+80Ol2KX0sFK7cMw7k0oQGK9Kinz1NOKkKJaLIdMdlNVIqliaL8XW0S6E8QBjBaZ9lalkRCSQz7uYOrdfHJ5s=  ;
Message-ID: <20051223110152.35262.qmail@web25905.mail.ukl.yahoo.com>
Received: from [84.131.215.178] by web25905.mail.ukl.yahoo.com via HTTP; Fri, 23 Dec 2005 11:01:52 GMT
Date: Fri, 23 Dec 2005 11:01:52 +0000 (GMT)
From: eks dev <eksdev@yahoo.co.uk>
Subject: Filter to support DocNrSkipper interface
To: java-user@lucene.apache.org
In-Reply-To: <20051111200442.90005.qmail@web25907.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Would it be OK to add one method in Filter class that
returns DocNrSkipper interface from Pauls's "Compact
sparse Filter" in jira LUCENE-328

This would be the first step for: 
- smooth integration of compact representations of the
underlaying BitSet in Filter (VInt and sorted int[]).
They are often faster for and/or operations. 
- ChainedFilter (see contrib from Hoss) enhancement
that operates on DocNrSkipper (see And(Or)DocNrSkipper
in Paul's work) 

Compatibility problems do not exist, only BitSet has
to be constructed in bits() method, the same as today
 
The reasoning that justifies effort in this direction
is that distribution of tokens in typical collection
is perfect for these 3 representations of BitVectors
(Very Low freq tokens in sorted int[],  Very HF tokens
in VInt and the rest in BitSet )

To put it another way, Filter forces us to use BitSet,
which is rather inefficient way to store a few
documents from the big collection.

Any feedback appreceated, could easily happen that I
overlooked something essential.

Cheers, e.


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 23 12:04:52 2005
Return-Path: <java-user-return-18079-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82714 invoked from network); 23 Dec 2005 12:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 23 Dec 2005 12:04:52 -0000
Received: (qmail 16535 invoked by uid 500); 23 Dec 2005 12:04:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16515 invoked by uid 500); 23 Dec 2005 12:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16504 invoked by uid 99); 23 Dec 2005 12:04:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Dec 2005 04:04:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of morus.walter.ml@googlemail.com designates 66.249.92.200 as permitted sender)
Received: from [66.249.92.200] (HELO uproxy.gmail.com) (66.249.92.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 23 Dec 2005 04:04:44 -0800
Received: by uproxy.gmail.com with SMTP id e2so142108ugf
        for <java-user@lucene.apache.org>; Fri, 23 Dec 2005 04:04:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=googlemail.com;
        h=received:date:from:to:subject:message-id:in-reply-to:references:x-mailer:mime-version:content-type:content-transfer-encoding;
        b=sduEDBm8Zi+9SseQGfwcqVIdgyrSllLOy8bYxAvhkE7J0OMmxarw94GznIELhcUS5/ugsGGodBSrbeq6ORR2gpGtwHk5TKBuwJoHQ/kzmUImLPaFJkwyypha6GyYQu3Zu3f0bmVms6d6t27mXP23jgswQ/bxsGwnr4WBNTIfD3k=
Received: by 10.66.186.5 with SMTP id j5mr840831ugf;
        Fri, 23 Dec 2005 04:04:22 -0800 (PST)
Received: from localhost.localdomain ( [82.135.98.132])
        by mx.gmail.com with ESMTP id a1sm1356744ugf.2005.12.23.04.04.21;
        Fri, 23 Dec 2005 04:04:21 -0800 (PST)
Date: Fri, 23 Dec 2005 13:04:14 +0100
From: Morus Walter <morus.walter.ml@googlemail.com>
To: java-user@lucene.apache.org
Subject: Re: Filter to support DocNrSkipper interface
Message-ID: <20051223130414.1d136aa3@localhost.localdomain>
In-Reply-To: <20051223110152.35262.qmail@web25905.mail.ukl.yahoo.com>
References: <20051111200442.90005.qmail@web25907.mail.ukl.yahoo.com>
	<20051223110152.35262.qmail@web25905.mail.ukl.yahoo.com>
X-Mailer: Sylpheed-Claws 1.0.5 (GTK+ 1.2.10; i686-pc-linux-gnu)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Fri, 23 Dec 2005 11:01:52 +0000 (GMT)
eks dev <eksdev@yahoo.co.uk> wrote:

> To put it another way, Filter forces us to use BitSet,
> which is rather inefficient way to store a few
> documents from the big collection.

I cannot comment on your suggestion, but I think the current  filter
should probably be replaced by a more general solution.
(I haven't had the time to read the lucene mailing for quite some time
so this has probably been discussed before.)

The sort extensions already provide a cached list of document values. So
if I'd like to filter and sort for some field (e.g. date) it would look
much more natural to me to use that list for filtering than create a
list of acceptable documents stored as a bitset or a sparse list. 

So IMHO a filter (as seen by the searcher) should just provide an
interface to query the information if some document is accecpted or
refused by the filter. So the interface would look like

public interface Filter {
	boolean filter(int docno);
}

The current type of bitset based filters could implement this interface
as well as other types of filter.

One could problably go one step further and allow the filter to
modify the score as well (e.g. to allow for a scoring that degrades the
score of a hit depending on it's age).

Actually I just did an extension of IndexSearcher that provides that
kind of filtering for a distance filter based on geographic coordinates.

Of course such a change would not be compatible, so my suggestion goes
far beyond the suggested change.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 25 20:16:48 2005
Return-Path: <java-user-return-18080-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30988 invoked from network); 25 Dec 2005 20:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Dec 2005 20:16:47 -0000
Received: (qmail 23224 invoked by uid 500); 25 Dec 2005 20:16:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23194 invoked by uid 500); 25 Dec 2005 20:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23181 invoked by uid 99); 25 Dec 2005 20:16:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Dec 2005 12:16:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 25 Dec 2005 12:16:40 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Sun, 25 Dec 2005 12:16:19 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C60990.10FEBF36"
Subject: RE: searching portions of an index
Date: Sun, 25 Dec 2005 12:16:19 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAD@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAD@ehost011-3.exch011.intermedia.net>
Thread-Topic: searching portions of an index
thread-index: AcYGVJp1C6QjquOQQxC9+lTJbZy+/gDOW9BU
References: <26fbe3a70512210932kbe190d7sfacf79cd0a22906b@mail.gmail.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 25 Dec 2005 20:16:19.0869 (UTC) FILETIME=[116944D0:01C60990]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60990.10FEBF36
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

You can implement a security filter, kind of like what the book Lucene =
in Action describes.  It is a class that extends =
org.apache.lucene.search.Filter; you're required to implement the =
following method:
=20
public BitSet bits(IndexReader reader)
=20
In it, you can decide whether a particular document may be viewed by the =
user.  The way I do it is I associate an instance of the Filter class =
with my searcher before I execute a search for a particular user:
=20
Hits hits =3D is.search(executableQuery, (Filter) filter, getSort());
=20
The Filter has a condition interface registered with it which knows how =
to check whether the user in question has specific access rights.  This =
condition is checked at runtime when I get to read from IndexReader in =
the bits(IndexReader reader) method.  This way, the BitSet returned by =
the Filter only contains the items viewable by the user in question.
=20
I think this is much better than indexing your access control lists =
along with the document data.  Any access changes may sometimes cause a =
significant amount of reindexing, as you pointed out.  The only thing to =
watch out for is to make sure that your authorization checking mechanism =
is optimized enough performance-wise so as not to clog up the results =
filtering process...
=20
Hope this helps,
- Dmitry

________________________________

From: Murali [mailto:muralidharan@gmail.com]
Sent: Wed 12/21/2005 9:32 AM
To: java-user@lucene.apache.org
Subject: searching portions of an index



Hi,

    I am new to lucene. We need to provide search to several users of a
system. Each user has access to a (different)set of documents. The same
document might be accessible by different users. I want to implement =
this
without indexing a document multiple times. The approach I thought of =
was to
use a field that is indexed, as well as stored in the index, which =
contains
the ids of all the users that can access the document. I could then use
boolean queries to search for documents accessible by a particular user. =
I
figured that I would have to delete and add the whole document again =
into
the system if a new user is to be given access to an already indexed
document(and I figure that this will happen frequently in the system). =
Is
there a better approach that I can take?

Thanks,
Murali




------_=_NextPart_001_01C60990.10FEBF36
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C60990.10FEBF36--

From java-user-return-18081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 26 23:31:44 2005
Return-Path: <java-user-return-18081-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65801 invoked from network); 26 Dec 2005 23:31:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Dec 2005 23:31:44 -0000
Received: (qmail 98512 invoked by uid 500); 26 Dec 2005 23:31:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98024 invoked by uid 500); 26 Dec 2005 23:31:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98013 invoked by uid 99); 26 Dec 2005 23:31:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Dec 2005 15:31:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of smoking81@gmail.com designates 64.233.162.206 as permitted sender)
Received: from [64.233.162.206] (HELO zproxy.gmail.com) (64.233.162.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Dec 2005 15:31:37 -0800
Received: by zproxy.gmail.com with SMTP id i11so693908nzi
        for <java-user@lucene.apache.org>; Mon, 26 Dec 2005 15:31:16 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=i1sPDC1iajXkQejcMLrgB+X7jKqwcCc9EaNLBUTmB7tJgEc+L916wTMMOrXNmrRQOhmRhR9fH1CVLb4yoM2EUYoVndTWKyzkhaYY55E1f4xbsYAqXb1YjTF4lR5bwprW3VDyFgHzJMLiJzxmosxcCTXGh1DME/g6HNq4C8+Sa8Q=
Received: by 10.64.149.14 with SMTP id w14mr2383935qbd;
        Mon, 26 Dec 2005 15:31:16 -0800 (PST)
Received: by 10.64.156.7 with HTTP; Mon, 26 Dec 2005 15:31:16 -0800 (PST)
Message-ID: <1e2216160512261531o583f88cel@mail.gmail.com>
Date: Tue, 27 Dec 2005 00:31:16 +0100
From: Federico Carbonetti <smoking81@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem Getting Started...
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello!
I'm new in the ML and in the Lucene world in general... :)
I re-installed JDK after a very long period in order to start using
Lucene but I had problems after few minutes I finished installing Java
and Lucene.

I installed:
JDK 1.5.0_06
Lucene 1.4.3

I've set the environment variables as follows:
PATH: C:\Sun\AppServer\bin; C:\Programmi\Java\jdk1.5.0_06\bin;
CLASSPATH: .; C:\Programmi\QuickTime\QTSystem\QTJava.zip;
C:\Programmi\lucene-1.4.3\lucene-1.4.3.jar;
C:\Programmi\lucene-1.4.3\lucene-demos-1.4.3.jar;

I then tried to follow the instructions found at
http://lucene.apache.org/java/docs/demo.html
so I opened a command prompt and typed: "java
org.apache.lucene.demo.IndexFiles C:\Programmi\lucene-1.4.3\src" and I
got the error "xception in thread "main" ... NoClassDefFound
org/apache/lucene/demo/IndexFiles" which means that it didn't find the
class definition.... But where is my mistake?

Can anybody help me pleeeeeeeease?? :)

Thanks a lot for your attention and, I hope, your help! :)
Bye, Federico

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 00:35:00 2005
Return-Path: <java-user-return-18082-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80479 invoked from network); 27 Dec 2005 00:35:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 00:35:00 -0000
Received: (qmail 32308 invoked by uid 500); 27 Dec 2005 00:34:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31294 invoked by uid 500); 27 Dec 2005 00:34:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31283 invoked by uid 99); 27 Dec 2005 00:34:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Dec 2005 16:34:55 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Dec 2005 16:34:53 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 74CC413E2005; Mon, 26 Dec 2005 19:34:31 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 97DD113E2005
	for <java-user@lucene.apache.org>; Mon, 26 Dec 2005 19:34:15 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <1e2216160512261531o583f88cel@mail.gmail.com>
References: <1e2216160512261531o583f88cel@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <ACEDCF75-A64B-4C3A-930E-F995749975F2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Problem Getting Started...
Date: Mon, 26 Dec 2005 19:34:26 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 26, 2005, at 6:31 PM, Federico Carbonetti wrote:
> I'm new in the ML and in the Lucene world in general... :)

ML?

> I then tried to follow the instructions found at
> http://lucene.apache.org/java/docs/demo.html
> so I opened a command prompt and typed: "java
> org.apache.lucene.demo.IndexFiles C:\Programmi\lucene-1.4.3\src" and I
> got the error "xception in thread "main" ... NoClassDefFound
> org/apache/lucene/demo/IndexFiles" which means that it didn't find the
> class definition.... But where is my mistake?
>
> Can anybody help me pleeeeeeeease?? :)

Federico,

I'm pasting below the relevant piece of the "Installing Lucene"  
appendix, I hope this helps.  At first glance, the environment and  
steps you described seemed fine, so I'm not sure what is awry.

I hope the info below helps:

Running the command-line demo
The command-line Lucene demo consists of two command-line programs: one
that indexes a directory tree of files and another that provides a  
simple search
interface. To run this demo, set your current working directory to  
the directory
where the binary distribution was expanded. Next, run the IndexFiles  
program
like this:

   java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar   
org.apache.lucene.demo.IndexFiles docs
.
.
.
adding docs/queryparsersyntax.html
adding docs/resources.html
adding docs/systemproperties.html
adding docs/whoweare.html
9454 total milliseconds

This command indexes the entire docs directory tree (339 files in our  
case) into
an index stored in the index subdirectory of the location where you  
executed
the command.

NOTE Literally every file in the docs directory tree is indexed,  
including .gif
and .jpg files. None of the files are parsed; instead, each file is  
indexed
by streaming its bytes into StandardAnalyzer.

To search the index just created, execute SearchFiles in this manner:

   java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
                 org.apache.lucene.demo.SearchFiles

Query: IndexSearcher AND QueryParser
Searching for: +indexsearcher +queryparser
10 total matching documents
0. docs/api/index-all.html
1. docs/api/allclasses-frame.html
2. docs/api/allclasses-noframe.html
3. docs/api/org/apache/lucene/search/class-use/Query.html
4. docs/api/overview-summary.html
5. docs/api/overview-tree.html
6. docs/demo2.html
7. docs/demo4.html
8. docs/api/org/apache/lucene/search/package-summary.html
9. docs/api/org/apache/lucene/search/package-tree.html

SearchFiles prompts interactively with Query:. QueryParser is used  
with Standard-
Analyzer to create a Query. A maximum of 10 hits are shown at a time;  
if there are
more, you can page through them. Press Ctrl-C to exit the program.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 01:24:52 2005
Return-Path: <java-user-return-18083-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92935 invoked from network); 27 Dec 2005 01:24:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 01:24:52 -0000
Received: (qmail 66151 invoked by uid 500); 27 Dec 2005 01:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66107 invoked by uid 500); 27 Dec 2005 01:24:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66096 invoked by uid 99); 27 Dec 2005 01:24:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 26 Dec 2005 17:24:47 -0800
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=RCVD_IN_NJABL_DUL,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of koji.sekiguchi@m4.dion.ne.jp designates 219.125.112.14 as permitted sender)
Received: from [219.125.112.14] (HELO nm05omta05c.dion.ne.jp) (219.125.112.14)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 26 Dec 2005 17:24:46 -0800
Received: from sekiguchi ([59.135.75.3])
	by nm05mta.dion.ne.jp
	id <20051227102423833.MAD2.824F8D0@nm05mta.dion.ne.jp>;
	Tue, 27 Dec 2005 10:24:23 +0900
From: "Koji Sekiguchi" <koji.sekiguchi@m4.dion.ne.jp>
To: <java-user@lucene.apache.org>
Cc: <gsingers@syr.edu>
Subject: RE: ApacheCon next week
Date: Tue, 27 Dec 2005 10:24:21 +0900
Message-ID: <PKEIKOCKCHNIIHNECPCCCEGLCCAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ISO-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <439DCA6D.3020106@syr.edu>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1106
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Grant,

> You stole my thunder!  :-)  Was going to post the URL after doing the
> actual talk, but that's all right.  I will post a few changes I have
> made on the plane tonight or tomorrow to the website below.
>
> Let me know if you have any questions...

I'm curious to know "Candidate Identification for QA".
At your PPT slide p.19,

"Can be as short as a word or as large as multiple documents, based on
system goals"

Can you explain it in more detail?
I expect that QAService.java implements the spirit of the above sentence,
but I couldn't understand the meaning.

Thanks in advance,

Koji




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 08:27:48 2005
Return-Path: <java-user-return-18084-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15603 invoked from network); 27 Dec 2005 08:27:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 08:27:48 -0000
Received: (qmail 63729 invoked by uid 500); 27 Dec 2005 08:27:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63479 invoked by uid 500); 27 Dec 2005 08:27:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63468 invoked by uid 99); 27 Dec 2005 08:27:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 00:27:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.179.233.113] (HELO acusis.com) (66.179.233.113)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 00:27:39 -0800
Received: from Manish [61.246.221.29] by acusis.com with ESMTP
  (SMTPD-8.21) id AAEB0450; Tue, 27 Dec 2005 03:27:23 -0500
From: =?iso-8859-1?Q?M_=E5_n_i_s_h_?= <manish.chowdhary@acusis.com>
To: <java-user@lucene.apache.org>
Subject: Lucene removing some words while searching
Date: Tue, 27 Dec 2005 13:57:14 +0530
Message-ID: <002901c60abf$5911fc20$8400a8c0@AcusisBlr.lan>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002A_01C60AED.72CA3820"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002A_01C60AED.72CA3820
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

=20

Hi erik and other gurus,

=20

I have some doubts over double quote queries (as it is)

Suppose I search =93lucene user forum=94 it should give correct =
continuous
occurrence of full text ,=20

=20

But if I search for =93when they occur=94 lucene is searching for =
=93when occur=94
also.

I think lucene is treating =93they=94  as stopword and removing it from =
the
search string.

But If I use double quotes it should not happen.

=20

Thanks in advance,

~ Manish Chowdhary

=20

=20

=20


------=_NextPart_000_002A_01C60AED.72CA3820--


From java-user-return-18085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 08:49:19 2005
Return-Path: <java-user-return-18085-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22000 invoked from network); 27 Dec 2005 08:49:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 08:49:18 -0000
Received: (qmail 77450 invoked by uid 500); 27 Dec 2005 08:49:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77256 invoked by uid 500); 27 Dec 2005 08:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77245 invoked by uid 99); 27 Dec 2005 08:49:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 00:49:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [220.225.120.3] (HELO mail.photoninfotech.com) (220.225.120.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 00:49:11 -0800
Received: (qmail 27477 invoked by uid 508); 27 Dec 2005 14:21:52 +0530
Received: from 192.168.8.151 by apsara.photon.dev (envelope-from <hussain@photoninfotech.com>, uid 507) with qmail-scanner-1.24-st-qms 
 (clamdscan: 0.80/640. spamassassin: 3.0.1. perlscan: 1.24-st-qms.  
 Clear:RC:0(192.168.8.151):SA:0(-5.6/5.0):. 
 Processed in 0.310267 secs); 27 Dec 2005 08:51:52 -0000
X-Antivirus-MYDOMAIN-Mail-From: hussain@photoninfotech.com via apsara.photon.dev
X-Antivirus-MYDOMAIN: 1.24-st-qms (Clear:RC:0(192.168.8.151):SA:0(-5.6/5.0):. Processed in 0.310267 secs Process 27469)
Received: from unknown (HELO HUSSAIN) (Hussain@photoninfotech.com@192.168.8.151)
  by mail.photoninfotech.com with SMTP; 27 Dec 2005 14:21:52 +0530
Message-ID: <002a01c60ac2$62c68b70$9708a8c0@HUSSAIN>
Reply-To: "K.A.Hussain Ali" <Hussain@photoninfotech.com>
From: "K.A.Hussain Ali" <Hussain@photoninfotech.com>
To: <java-user@lucene.apache.org>
Subject: Indexing and deleting simultaneously..
Date: Tue, 27 Dec 2005 14:19:02 +0530
Organization: Photoninfotech Pvt.LTd.
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0027_01C60AF0.7C5D5CC0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, hits=-5.6 required=5.0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0027_01C60AF0.7C5D5CC0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

HI all.

I am a newbie to Lucene..
Could we do indexing and deleting a document on the same file =
simultaneously ?

Do lucene provide such options to carry out  the tasks?

Any Help is greatly appreciated

Thanks in advacne

regards
-Hussain.
------=_NextPart_000_0027_01C60AF0.7C5D5CC0--


From java-user-return-18086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 09:16:55 2005
Return-Path: <java-user-return-18086-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31309 invoked from network); 27 Dec 2005 09:16:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 09:16:55 -0000
Received: (qmail 4125 invoked by uid 500); 27 Dec 2005 09:16:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4085 invoked by uid 500); 27 Dec 2005 09:16:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4074 invoked by uid 99); 27 Dec 2005 09:16:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 01:16:49 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.18.25.230] (HELO mail.zooplus.de) (212.18.25.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 01:16:48 -0800
Received: from exchange2.home.zooplus.de (unknown [192.168.10.72])
	by mail.zooplus.de (Postfix) with ESMTP id 81C3B576C9
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 10:16:25 +0100 (CET)
Received: by exchange2.home.zooplus.de with Internet Mail Service (5.5.2657.72)
	id <V3Q0N265>; Tue, 27 Dec 2005 10:16:25 +0100
Message-ID: <10361639FF4CA04ABB30F54683E4FB8505667660@exchange2.home.zooplus.de>
From: Steven Pannell <steven.pannell@zooplus.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Indexing and deleting simultaneously..
Date: Tue, 27 Dec 2005 10:16:22 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Basically you can update/delete and read an index simultaneously.

When you start to read the index and then update/delete the index, the
current read process will continue reading with the old data before the
delete took place.  A little bit like a transaction on the database.

You don't have to do anything, just use the standard lucene classes.

S.


-----Original Message-----
From: K.A.Hussain Ali [mailto:Hussain@photoninfotech.com]
Sent: 27 December 2005 09:49
To: java-user@lucene.apache.org
Subject: Indexing and deleting simultaneously..


HI all.

I am a newbie to Lucene..
Could we do indexing and deleting a document on the same file simultaneously
?

Do lucene provide such options to carry out  the tasks?

Any Help is greatly appreciated

Thanks in advacne

regards
-Hussain.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 09:23:51 2005
Return-Path: <java-user-return-18087-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36348 invoked from network); 27 Dec 2005 09:23:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 09:23:51 -0000
Received: (qmail 22159 invoked by uid 500); 27 Dec 2005 09:23:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21905 invoked by uid 500); 27 Dec 2005 09:23:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21894 invoked by uid 99); 27 Dec 2005 09:23:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 01:23:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 01:23:42 -0800
Received: by wproxy.gmail.com with SMTP id i6so1034181wra
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 01:23:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=pXRJj1fKYVxmSxUaMT7hjWke6bn8gcY8QIESfh4Txjnhv7z0xQC/fopMeyoiHQ/4Z3UflubV4SagnOzEI99sYIJFHncf21GQfvTM5b61LA7naqKeXTgJl+bM0BQciZIeD0qKA64dSextV8C8tFSVTh8o/u50MpV/K6P/QpqSAi0=
Received: by 10.65.228.18 with SMTP id f18mr1308293qbr;
        Tue, 27 Dec 2005 01:23:21 -0800 (PST)
Received: by 10.65.95.17 with HTTP; Tue, 27 Dec 2005 01:23:21 -0800 (PST)
Message-ID: <6e3ae6310512270123u61caadf5o487582facb2dd04@mail.gmail.com>
Date: Tue, 27 Dec 2005 01:23:21 -0800
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing and deleting simultaneously..
In-Reply-To: <10361639FF4CA04ABB30F54683E4FB8505667660@exchange2.home.zooplus.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <10361639FF4CA04ABB30F54683E4FB8505667660@exchange2.home.zooplus.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is generally true, most of the time.
But my experience is, there can be some FileNotFoundException, if your
searcher is opened for a while, and indexing is doing some file
deleting/renaming when merging.

Of course, if your data volumn is not that large and updating is not
often, maybe you won't meet with it.

Chris
---------------------------
http://www.dbsight.net
Lucene search on Any Database

On 12/27/05, Steven Pannell <steven.pannell@zooplus.com> wrote:
> Hi,
>
> Basically you can update/delete and read an index simultaneously.
>
> When you start to read the index and then update/delete the index, the
> current read process will continue reading with the old data before the
> delete took place.  A little bit like a transaction on the database.
>
> You don't have to do anything, just use the standard lucene classes.
>
> S.
>
>
> -----Original Message-----
> From: K.A.Hussain Ali [mailto:Hussain@photoninfotech.com]
> Sent: 27 December 2005 09:49
> To: java-user@lucene.apache.org
> Subject: Indexing and deleting simultaneously..
>
>
> HI all.
>
> I am a newbie to Lucene..
> Could we do indexing and deleting a document on the same file simultaneou=
sly
> ?
>
> Do lucene provide such options to carry out  the tasks?
>
> Any Help is greatly appreciated
>
> Thanks in advacne
>
> regards
> -Hussain.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 10:28:17 2005
Return-Path: <java-user-return-18088-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58475 invoked from network); 27 Dec 2005 10:28:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 10:28:11 -0000
Received: (qmail 89735 invoked by uid 500); 27 Dec 2005 10:28:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89679 invoked by uid 500); 27 Dec 2005 10:28:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89661 invoked by uid 99); 27 Dec 2005 10:27:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 02:27:59 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 02:27:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 926F713E2005; Tue, 27 Dec 2005 05:27:35 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id E6C6113E2005
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 05:24:31 -0500 (EST)
In-Reply-To: <002901c60abf$5911fc20$8400a8c0@AcusisBlr.lan>
References: <002901c60abf$5911fc20$8400a8c0@AcusisBlr.lan>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=WINDOWS-1252; delsp=yes; format=flowed
Message-Id: <92E93D69-A1DE-40B7-99CE-9C495DBC9B00@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene removing some words while searching
Date: Tue, 27 Dec 2005 05:24:28 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 27, 2005, at 3:27 AM, M =E5 n i s h wrote:
> Suppose I search =93lucene user forum=94 it should give correct =
continuous
> occurrence of full text ,
>
>
>
> But if I search for =93when they occur=94 lucene is searching for =
=93when =20
> occur=94
> also.
>
> I think lucene is treating =93they=94  as stopword and removing it =
from =20
> the
> search string.
>
> But If I use double quotes it should not happen.

As always, the analyzer is at the heart of the situation.  Below is =20
the output of running AnalyzerDemo (from Lucene in Action's code at =20
http://www.lucenebook.com).  It shows that "they" is a stop word. =20
(note: the output shown may not be the exact output given by LIA's =20
code as I tweak my local version to toy with analyzers when this type =20=

of thing crops on the list, but the StandardAnalyzer output is =20
accurate).

If you use a stop word removing analyzer at indexing time, =20
"they" (with the default StopFilter list) is not indexed, period.  So =20=

searching for the exact phrase "when they occur" would yield no =20
results even if it was in the original text.  Stop words removed =20
during indexing need to be removed during searching.  What is indexed =20=

is what is searchable.

It is possible to be a bit more clever with stop word removal and at =20
least have positional holes left during indexing (which is not done =20
by the default StopFilter currently, even in the latest codebase) and =20=

have QueryParser obey those holes (which was not the case in 1.4.3, =20
but is the case in the latest codebase).

So you have some decisions to make on whether you want to keep stop =20
words or remove them.  Generally I recommend against removing stop =20
words, which can be done like this with StandardAnalyzer:

	 new StandardAnalyzer(new String[] {})

But every scenario varies with this sort of thing, so you'll need to =20
decide how that fits with your project.

There is an even more interesting solution to stop words which Nutch =20
employs, and that is to bi-gram stop words during indexing.  During =20
searching, if no quotes are used the stop words are removed from the =20
query, but once quotes are used the bi-gramming happens.  Bi-gramming =20=

makes far more unique terms and thus improving performance =20
dramatically for the extremely large indexes that are typical with =20
Nutch usage.  The analyzer and query parser used by Nutch are quite =20
custom, and unfortunately a bit difficult to tease out to use =20
standalone because of some static configuration that ties to the rest =20=

of Nutch (though that situation is now being discussed and improved, =20
I believe).

	Erik


$ ant AnalyzerDemo
Buildfile: build.xml

check-environment:

compile:
     [javac] Compiling 1 source file to /Users/erik/dev/=20
LuceneInAction/temp/LuceneInAction/build/classes

build-test-index:

build-perf-index:

prepare:

AnalyzerDemo:
      [echo]
      [echo]       Demonstrates analysis of sample text.
      [echo]
      [echo]       Refer to the "Analysis" chapter for much more on this
      [echo]       extremely crucial topic.
      [echo]
     [input] Press return to continue...

     [input] String to analyze: [This string will be analyzed.]
when they occur
      [echo] Running lia.analysis.AnalyzerDemo...
      [java] Analyzing "when they occur"
      [java]   WhitespaceAnalyzer:
      [java]     [when] [they] [occur]

      [java]   SimpleAnalyzer:
      [java]     [when] [they] [occur]

      [java]   StopAnalyzer:
      [java]     [when] [occur]

      [java]   StandardAnalyzer:
      [java]     [when] [occur]

      [java]   SnowballAnalyzer:
      [java]     [when] [they] [occur]

      [java]   SnowballAnalyzer:
      [java]     [when] [they] [occur]

      [java]   SnowballAnalyzer:
      [java]     [when] [thei] [occur]


BUILD SUCCESSFUL
Total time: 28 seconds



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 11:45:59 2005
Return-Path: <java-user-return-18089-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87020 invoked from network); 27 Dec 2005 11:45:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 11:45:59 -0000
Received: (qmail 47741 invoked by uid 500); 27 Dec 2005 11:45:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47723 invoked by uid 500); 27 Dec 2005 11:45:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47712 invoked by uid 99); 27 Dec 2005 11:45:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 03:45:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 03:45:50 -0800
Received: by wproxy.gmail.com with SMTP id i14so1086539wra
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 03:45:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fUk9U2GHhzFRfrK7ZYBDPe9okUmH74YtflF+tL7B9uy7HUSJS7Cb6QD93Dr29oZhZm/ZcMtGtMIvUxe9CH5S3ivEB6ulcuctF4uJuFzmlh5rEFlb8tCdMTCqGDRGXhk1oYS7F94I6tF47yDvD1qrqghJ1p2tY5ulYdReEVtpLy4=
Received: by 10.54.79.15 with SMTP id c15mr6602250wrb;
        Tue, 27 Dec 2005 03:45:29 -0800 (PST)
Received: by 10.54.156.10 with HTTP; Tue, 27 Dec 2005 03:45:29 -0800 (PST)
Message-ID: <901c03930512270345o413af973q7103bc7b9ca5f959@mail.gmail.com>
Date: Tue, 27 Dec 2005 19:45:29 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: ApacheCon next week
In-Reply-To: <PKEIKOCKCHNIIHNECPCCCEGLCCAA.koji.sekiguchi@m4.dion.ne.jp>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <439DCA6D.3020106@syr.edu>
	 <PKEIKOCKCHNIIHNECPCCCEGLCCAA.koji.sekiguchi@m4.dion.ne.jp>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/27/05, Koji Sekiguchi <koji.sekiguchi@m4.dion.ne.jp> wrote:
> Hi Grant,
>
> > You stole my thunder!  :-)  Was going to post the URL after doing the
> > actual talk, but that's all right.  I will post a few changes I have
> > made on the plane tonight or tomorrow to the website below.
> >
> > Let me know if you have any questions...
>
> I'm curious to know "Candidate Identification for QA".
> At your PPT slide p.19,
>
> "Can be as short as a word or as large as multiple documents, based on
> system goals"
>
> Can you explain it in more detail?

In Question Answering, for questions that expect a single answer (Eg,
Which country won the most gold medals in the 1996 Atlanta Olympics?),
we typically just need to find a single document that contains the
answer we are seeking.

However there are other types of questions require extracting answers
from several different documents because a single document might not
contain all the relevant information. A simple example would be a
question with more than one valid answer (Eg, Who are the presidents
of the united states?). The QA system will have to find answers from
different documents since there might not be a single document that
contain  all the answers. Btw, in QA terminology we label this type of
question as a List question.

Another example are Definition questions, where we would like to
provide all interesting facets on a particular topic (Eg, Tell me all
there is to know about the Grand Canyon). Again, a set of documents
might each describe a single aspect about the Grand Canyon. To build a
complete picture, we may need to sample most documents that mention
the Grand Canyon.

I hope this helps.


Regards,
Dave Kor.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 11:52:57 2005
Return-Path: <java-user-return-18090-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89233 invoked from network); 27 Dec 2005 11:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 11:52:57 -0000
Received: (qmail 50923 invoked by uid 500); 27 Dec 2005 11:52:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50898 invoked by uid 500); 27 Dec 2005 11:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50881 invoked by uid 99); 27 Dec 2005 11:52:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 03:52:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of davekor@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 03:52:51 -0800
Received: by wproxy.gmail.com with SMTP id i14so1087380wra
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 03:52:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=huzSjC8n3TMYIXHH++t2TJvdq/ejzPfvP+JBDAIz8haNX+g+/P1mAjPaoMnAaY2hfZ4lbU3zQR3LVWPYWlQG5Cvp9684GIBxvCtK9P1iTsAt2PqlMyA4OlBIXf/HexjNLCFn8HiRohGwkA68tKiVoNDwqaH0Y5TDKbPvszaCttk=
Received: by 10.54.131.11 with SMTP id e11mr6702454wrd;
        Tue, 27 Dec 2005 03:52:30 -0800 (PST)
Received: by 10.54.156.10 with HTTP; Tue, 27 Dec 2005 03:52:30 -0800 (PST)
Message-ID: <901c03930512270352h4d46d0acv2686e74aeb0bcd3e@mail.gmail.com>
Date: Tue, 27 Dec 2005 19:52:30 +0800
From: Dave Kor <davekor@gmail.com>
To: java-user@lucene.apache.org, "K.A.Hussain Ali" <Hussain@photoninfotech.com>
Subject: Re: Indexing and deleting simultaneously..
In-Reply-To: <002a01c60ac2$62c68b70$9708a8c0@HUSSAIN>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <002a01c60ac2$62c68b70$9708a8c0@HUSSAIN>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On 12/27/05, K.A.Hussain Ali <Hussain@photoninfotech.com> wrote:
> HI all.
>
> I am a newbie to Lucene..
> Could we do indexing and deleting a document on the same file simultaneou=
sly ?

At any one time, there can only be a single Lucene index writer and
any number of index readers. You cannot have two different index
writer threads modifying the same index simultaneously. Thus, no, you
cannot have one thread indexing new documents and another thread
deleting documents from the same index at the same time.

What you can do is have a single index writer thread that interleave
add document and delete document operations in a sequential manner.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 14:49:38 2005
Return-Path: <java-user-return-18091-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53063 invoked from network); 27 Dec 2005 14:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 14:49:37 -0000
Received: (qmail 98527 invoked by uid 500); 27 Dec 2005 14:49:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98507 invoked by uid 500); 27 Dec 2005 14:49:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98496 invoked by uid 99); 27 Dec 2005 14:49:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:49:30 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.117.152.141] (HELO outmail.amdocs.com) (212.117.152.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:49:29 -0800
Received: from omail1.amdocs.com (omail.amdocs.com [80.179.114.1])
	by outmail.amdocs.com (8.12.9/8.12.9) with ESMTP id jBRFGCJA009122
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 17:16:14 +0200
Received: from tlvmail7.corp.amdocs.com (localhost [127.0.0.1])
	by omail1.amdocs.com (8.12.11/8.12.11) with ESMTP id jBREmtxt021842
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 16:48:55 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C60AF4.C99E7055"
Subject: More than 32 required/prohibited clauses in query
Date: Tue, 27 Dec 2005 16:49:49 +0200
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C85DE5856@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: More than 32 required/prohibited clauses in query
Thread-Index: AcYK9MlBkBlLE2/1R9O6bfREBM9RuQ==
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60AF4.C99E7055
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


Hi,

=0D

I got a strange exception "More than 32 required/prohibited clauses in
query" in using Boolean Query

Is there any way to avoid it ?

=0D

Thanks in advance

=0D

Alexander Kiselevski



=0D



The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.
------_=_NextPart_001_01C60AF4.C99E7055--

From java-user-return-18092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 14:51:22 2005
Return-Path: <java-user-return-18092-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54803 invoked from network); 27 Dec 2005 14:51:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 14:51:22 -0000
Received: (qmail 1476 invoked by uid 500); 27 Dec 2005 14:51:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1253 invoked by uid 500); 27 Dec 2005 14:51:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1242 invoked by uid 99); 27 Dec 2005 14:51:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:51:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:51:14 -0800
Received: by wproxy.gmail.com with SMTP id 69so1093263wra
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 06:50:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sNg+KVERb/NpjMdPK8qKeyGPxWWOXropmTkXMxrNJZLWWaRYBIuJp0ozaNlncpBBZKIwVJ4yJbys/VQaBgFokZgq/bJbM+J3MTl9dLup1eDmjdV+jKJXf3bIIyqRi5IRuvCsFZdk0wzoBgFKBkx/DP6zsQtZjhjzCezRmTgMghI=
Received: by 10.65.177.14 with SMTP id e14mr1834661qbp;
        Tue, 27 Dec 2005 06:50:53 -0800 (PST)
Received: by 10.65.252.6 with HTTP; Tue, 27 Dec 2005 06:50:53 -0800 (PST)
Message-ID: <c68e39170512270650h53374b36h65b17b05a28c082@mail.gmail.com>
Date: Tue, 27 Dec 2005 09:50:53 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing and deleting simultaneously..
In-Reply-To: <6e3ae6310512270123u61caadf5o487582facb2dd04@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <10361639FF4CA04ABB30F54683E4FB8505667660@exchange2.home.zooplus.de>
	 <6e3ae6310512270123u61caadf5o487582facb2dd04@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That shouldn't happen.
What platform(s) have you seen this on, and with what Lucene versions?

-Yonik

On 12/27/05, Chris Lu <chris.lu@gmail.com> wrote:
> This is generally true, most of the time.
> But my experience is, there can be some FileNotFoundException, if your
> searcher is opened for a while, and indexing is doing some file
> deleting/renaming when merging.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 14:52:53 2005
Return-Path: <java-user-return-18093-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55805 invoked from network); 27 Dec 2005 14:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 14:52:53 -0000
Received: (qmail 9155 invoked by uid 500); 27 Dec 2005 14:52:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9134 invoked by uid 500); 27 Dec 2005 14:52:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9123 invoked by uid 99); 27 Dec 2005 14:52:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:52:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:52:45 -0800
Received: by wproxy.gmail.com with SMTP id i4so1116586wra
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 06:52:24 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=J7tQzxNQ3oN86x5Phb/+8rLPfEihOX10M0/PaWk7GCe1+Xi9tGTmONlnLn4D7tlX/R1yFnfw9+SRv5jf9z0IOFUdGcBHeMiGA9INNYA/DUpXoVTwRrkOFJTfOf7SOTQYZzE0YAoQfzS3Tt3evqK60hnLlE74/py16GHEItgSt0I=
Received: by 10.65.124.7 with SMTP id b7mr1900463qbn;
        Tue, 27 Dec 2005 06:52:24 -0800 (PST)
Received: by 10.65.252.6 with HTTP; Tue, 27 Dec 2005 06:52:24 -0800 (PST)
Message-ID: <c68e39170512270652g53d1954cub1b6ee826f8f4bbd@mail.gmail.com>
Date: Tue, 27 Dec 2005 09:52:24 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More than 32 required/prohibited clauses in query
In-Reply-To: <191B11CF22BAC54292E97F3B5CDC9C85DE5856@tlvmail7.corp.amdocs.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <191B11CF22BAC54292E97F3B5CDC9C85DE5856@tlvmail7.corp.amdocs.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That's a Lucene 1.4 limitation, gone in the latest 1.9 development version.
If you want to stick with 1.4, try restructuring your query to avoid
this restriction.

-Yonik

On 12/27/05, Alex Kiselevski <ALEXKIS@amdocs.com> wrote:
> I got a strange exception "More than 32 required/prohibited clauses in
> query" in using Boolean Query
>
> Is there any way to avoid it ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 14:54:32 2005
Return-Path: <java-user-return-18094-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56234 invoked from network); 27 Dec 2005 14:54:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 14:54:32 -0000
Received: (qmail 10630 invoked by uid 500); 27 Dec 2005 14:54:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10609 invoked by uid 500); 27 Dec 2005 14:54:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10598 invoked by uid 99); 27 Dec 2005 14:54:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:54:26 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.117.152.141] (HELO outmail.amdocs.com) (212.117.152.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:54:25 -0800
Received: from omail1.amdocs.com (omail.amdocs.com [80.179.114.1])
	by outmail.amdocs.com (8.12.9/8.12.9) with ESMTP id jBRFLDJA009445
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 17:21:13 +0200
Received: from tlvmail7.corp.amdocs.com (localhost [127.0.0.1])
	by omail1.amdocs.com (8.12.11/8.12.11) with ESMTP id jBRErtKI023085
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 16:53:55 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: More than 32 required/prohibited clauses in query
Date: Tue, 27 Dec 2005 16:54:49 +0200
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C85DE585B@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: More than 32 required/prohibited clauses in query
Thread-Index: AcYK9VrUIRc39kp+Tpmb6bWqthKgYwAAB7Ag
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Thanks

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]=0D
Sent: Tuesday, December 27, 2005 4:52 PM
To: java-user@lucene.apache.org
Subject: Re: More than 32 required/prohibited clauses in query

That's a Lucene 1.4 limitation, gone in the latest 1.9 development
version.
If you want to stick with 1.4, try restructuring your query to avoid
this restriction.

-Yonik

On 12/27/05, Alex Kiselevski <ALEXKIS@amdocs.com> wrote:
> I got a strange exception "More than 32 required/prohibited clauses in
> query" in using Boolean Query
>
> Is there any way to avoid it ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 14:57:12 2005
Return-Path: <java-user-return-18095-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57004 invoked from network); 27 Dec 2005 14:57:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 14:57:11 -0000
Received: (qmail 15618 invoked by uid 500); 27 Dec 2005 14:57:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15599 invoked by uid 500); 27 Dec 2005 14:57:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15588 invoked by uid 99); 27 Dec 2005 14:57:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:57:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.117.152.141] (HELO outmail.amdocs.com) (212.117.152.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 06:57:04 -0800
Received: from omail1.amdocs.com (omail.amdocs.com [80.179.114.1])
	by outmail.amdocs.com (8.12.9/8.12.9) with ESMTP id jBRFNqJA009624
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 17:23:52 +0200
Received: from tlvmail7.corp.amdocs.com (localhost [127.0.0.1])
	by omail1.amdocs.com (8.12.11/8.12.11) with ESMTP id jBREuYfb023755
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 16:56:34 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: More than 32 required/prohibited clauses in query
Date: Tue, 27 Dec 2005 16:57:28 +0200
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C85DE585D@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: More than 32 required/prohibited clauses in query
Thread-Index: AcYK9VrUIRc39kp+Tpmb6bWqthKgYwAAHHDg
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


How can I get latest 1.9 development version ?

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]=0D
Sent: Tuesday, December 27, 2005 4:52 PM
To: java-user@lucene.apache.org
Subject: Re: More than 32 required/prohibited clauses in query

That's a Lucene 1.4 limitation, gone in the latest 1.9 development
version.
If you want to stick with 1.4, try restructuring your query to avoid
this restriction.

-Yonik

On 12/27/05, Alex Kiselevski <ALEXKIS@amdocs.com> wrote:
> I got a strange exception "More than 32 required/prohibited clauses in
> query" in using Boolean Query
>
> Is there any way to avoid it ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 15:21:09 2005
Return-Path: <java-user-return-18096-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65545 invoked from network); 27 Dec 2005 15:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 15:21:08 -0000
Received: (qmail 45129 invoked by uid 500); 27 Dec 2005 15:21:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45094 invoked by uid 500); 27 Dec 2005 15:21:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45083 invoked by uid 99); 27 Dec 2005 15:21:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 07:21:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.117.152.141] (HELO outmail.amdocs.com) (212.117.152.141)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 07:21:01 -0800
Received: from omail1.amdocs.com (omail.amdocs.com [80.179.114.1])
	by outmail.amdocs.com (8.12.9/8.12.9) with ESMTP id jBRFljJA011137
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 17:47:45 +0200
Received: from tlvmail7.corp.amdocs.com (localhost [127.0.0.1])
	by omail1.amdocs.com (8.12.11/8.12.11) with ESMTP id jBRFKRsP029619
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 17:20:27 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: More than 32 required/prohibited clauses in query
Date: Tue, 27 Dec 2005 17:21:21 +0200
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: More than 32 required/prohibited clauses in query
Thread-Index: AcYK9VrUIRc39kp+Tpmb6bWqthKgYwAA6+DQ
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I didn't find a mention about 1.9 version in Lucene site

-----Original Message-----
From: Yonik Seeley [mailto:yseeley@gmail.com]=0D
Sent: Tuesday, December 27, 2005 4:52 PM
To: java-user@lucene.apache.org
Subject: Re: More than 32 required/prohibited clauses in query

That's a Lucene 1.4 limitation, gone in the latest 1.9 development
version.
If you want to stick with 1.4, try restructuring your query to avoid
this restriction.

-Yonik

On 12/27/05, Alex Kiselevski <ALEXKIS@amdocs.com> wrote:
> I got a strange exception "More than 32 required/prohibited clauses in
> query" in using Boolean Query
>
> Is there any way to avoid it ?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 15:26:25 2005
Return-Path: <java-user-return-18097-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67573 invoked from network); 27 Dec 2005 15:26:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 15:26:24 -0000
Received: (qmail 52279 invoked by uid 500); 27 Dec 2005 15:26:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52254 invoked by uid 500); 27 Dec 2005 15:26:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52237 invoked by uid 99); 27 Dec 2005 15:26:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 07:26:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of smoking81@gmail.com designates 64.233.184.203 as permitted sender)
Received: from [64.233.184.203] (HELO wproxy.gmail.com) (64.233.184.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 07:26:17 -0800
Received: by wproxy.gmail.com with SMTP id 69so1098859wra
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 07:25:57 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oVL1KcUCKkYlJp2lFMtGvz/q4/gTv7QPh5pu2QpWjTjbVGDx2fAT2RynvSEOX5nk8hTLBorBh9pocEptyAE8+1SjL/9TDUIx5ypJoMEXuMCNhCVWilm5H5nzNvuZUdu319cy8roeLjqJmESy8ol5d2FPQU6p/Lnn4VrWY4DQf4E=
Received: by 10.65.22.18 with SMTP id z18mr1777233qbi;
        Tue, 27 Dec 2005 07:25:56 -0800 (PST)
Received: by 10.64.156.7 with HTTP; Tue, 27 Dec 2005 07:25:56 -0800 (PST)
Message-ID: <1e2216160512270725y1fa9b7e4h@mail.gmail.com>
Date: Tue, 27 Dec 2005 16:25:56 +0100
From: Federico Carbonetti <smoking81@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem Getting Started...
In-Reply-To: <ACEDCF75-A64B-4C3A-930E-F995749975F2@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1e2216160512261531o583f88cel@mail.gmail.com>
	 <ACEDCF75-A64B-4C3A-930E-F995749975F2@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hello erik and hello everybody!

2005/12/27, Erik Hatcher <erik@ehatchersolutions.com>:
>
> On Dec 26, 2005, at 6:31 PM, Federico Carbonetti wrote:
> > I'm new in the ML and in the Lucene world in general... :)
>
> ML?
>

Mailing List! ehehe! :)

this morning i changed some settings for the PATH variabile, but I'm
still experiencing the same trouble. I tried to extract lucene
following the hints given in the appendix of "lucene in action" (I've
that book) but without success... I downloaded lucene-1.4-final.zip,
extracted to C:\lucene-1.4-final\ and updated the classpath of
windows. Somebody told me to set the JVM classpath by typing:

java -cp lucene-1.4-final.jar; -jar lucene-demos-1.4-final.jar

but I got the following message:
Failed to load Main-Class manifest attribute from lucene-demos-1.4-final.ja=
r

While when i Try to set the classpath as suggested in the appendix
(java -cp lucene-1.4-final.jar; lucene-demos-1.4-final.jar) i got the
"usual" Exception in thread "main"...

Does anybody know the solution to my problem please? :)

Thanks again! Bye

>
> Federico,
>
> I'm pasting below the relevant piece of the "Installing Lucene"
> appendix, I hope this helps.  At first glance, the environment and
> steps you described seemed fine, so I'm not sure what is awry.
>
> I hope the info below helps:
>
> Running the command-line demo
> The command-line Lucene demo consists of two command-line programs: one
> that indexes a directory tree of files and another that provides a
> simple search
> interface. To run this demo, set your current working directory to
> the directory
> where the binary distribution was expanded. Next, run the IndexFiles
> program
> like this:
>
>    java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
> org.apache.lucene.demo.IndexFiles docs
> .
> .
> .
> adding docs/queryparsersyntax.html
> adding docs/resources.html
> adding docs/systemproperties.html
> adding docs/whoweare.html
> 9454 total milliseconds
>
> This command indexes the entire docs directory tree (339 files in our
> case) into
> an index stored in the index subdirectory of the location where you
> executed
> the command.
>
> NOTE Literally every file in the docs directory tree is indexed,
> including .gif
> and .jpg files. None of the files are parsed; instead, each file is
> indexed
> by streaming its bytes into StandardAnalyzer.
>
> To search the index just created, execute SearchFiles in this manner:
>
>    java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
>                  org.apache.lucene.demo.SearchFiles
>
> Query: IndexSearcher AND QueryParser
> Searching for: +indexsearcher +queryparser
> 10 total matching documents
> 0. docs/api/index-all.html
> 1. docs/api/allclasses-frame.html
> 2. docs/api/allclasses-noframe.html
> 3. docs/api/org/apache/lucene/search/class-use/Query.html
> 4. docs/api/overview-summary.html
> 5. docs/api/overview-tree.html
> 6. docs/demo2.html
> 7. docs/demo4.html
> 8. docs/api/org/apache/lucene/search/package-summary.html
> 9. docs/api/org/apache/lucene/search/package-tree.html
>
> SearchFiles prompts interactively with Query:. QueryParser is used
> with Standard-
> Analyzer to create a Query. A maximum of 10 hits are shown at a time;
> if there are
> more, you can page through them. Press Ctrl-C to exit the program.
>
>         Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 15:51:45 2005
Return-Path: <java-user-return-18098-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77486 invoked from network); 27 Dec 2005 15:51:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 15:51:45 -0000
Received: (qmail 77443 invoked by uid 500); 27 Dec 2005 15:51:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77415 invoked by uid 500); 27 Dec 2005 15:51:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77403 invoked by uid 99); 27 Dec 2005 15:51:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 07:51:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.193 as permitted sender)
Received: from [64.233.162.193] (HELO zproxy.gmail.com) (64.233.162.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 07:51:40 -0800
Received: by zproxy.gmail.com with SMTP id i1so758725nzh
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 07:51:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GyTlxgycZVEiwhw4N25gdF1I5Nm39W42951qO+eKbO0lTe3XCBU/Qd5t+vhXYztJnZlWmIp5TEg4b0Fm66KUzivMep4zNTYOTxFHeSl6k7PFceS2O9x4bTaAQibI6A5TDKbEkIjbgrhTs3iDmgSciu2GjdwPDc04K7o9aUKCiX4=
Received: by 10.65.132.5 with SMTP id j5mr537509qbn;
        Tue, 27 Dec 2005 07:51:19 -0800 (PST)
Received: by 10.65.252.6 with HTTP; Tue, 27 Dec 2005 07:51:19 -0800 (PST)
Message-ID: <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com>
Date: Tue, 27 Dec 2005 10:51:19 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More than 32 required/prohibited clauses in query
In-Reply-To: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

There is no officially released 1.9 version yet.  Many people are
using the current 1.9 branch for production, however, and it is stable
(moreso than 1.4.3 IMO).

You have to check the latest source out from subversion and build it.

mkdir lucene
svn checkout  http://svn.apache.org/repos/asf/lucene/java/trunk lucene
cd lucene
ant

-Yonik

On 12/27/05, Alex Kiselevski <ALEXKIS@amdocs.com> wrote:
>
> I didn't find a mention about 1.9 version in Lucene site
>
> -----Original Message-----
> From: Yonik Seeley [mailto:yseeley@gmail.com]
> Sent: Tuesday, December 27, 2005 4:52 PM
> To: java-user@lucene.apache.org
> Subject: Re: More than 32 required/prohibited clauses in query
>
> That's a Lucene 1.4 limitation, gone in the latest 1.9 development
> version.
> If you want to stick with 1.4, try restructuring your query to avoid
> this restriction.
>
> -Yonik
>
> On 12/27/05, Alex Kiselevski <ALEXKIS@amdocs.com> wrote:
> > I got a strange exception "More than 32 required/prohibited clauses in
> > query" in using Boolean Query
> >
> > Is there any way to avoid it ?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> The information contained in this message is proprietary of Amdocs,
> protected from disclosure, and may be privileged.
> The information is intended to be conveyed only to the designated recipie=
nt(s)
> of the message. If the reader of this message is not the intended recipie=
nt,
> you are hereby notified that any dissemination, use, distribution or copy=
ing of
> this communication is strictly prohibited and may be unlawful.
> If you have received this communication in error, please notify us immedi=
ately
> by replying to the message and deleting it from your computer.
> Thank you.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 17:38:56 2005
Return-Path: <java-user-return-18099-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25264 invoked from network); 27 Dec 2005 17:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 17:38:55 -0000
Received: (qmail 81595 invoked by uid 500); 27 Dec 2005 17:38:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80599 invoked by uid 500); 27 Dec 2005 17:38:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80588 invoked by uid 99); 27 Dec 2005 17:38:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 09:38:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of muralidharan@gmail.com designates 66.249.82.200 as permitted sender)
Received: from [66.249.82.200] (HELO xproxy.gmail.com) (66.249.82.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 09:38:49 -0800
Received: by xproxy.gmail.com with SMTP id i28so848052wxd
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 09:38:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=PAdd2v40yqCmxgVsGlhbQPtuTucNi2FxXxsQIXFe+/cO4jnoOgdYX5OPwANlFSPpFqoo9CCBvK7cKsT88/LAdM7+LdfBUCyT0dwsJDZnAYZeXVB0eculJWFVGb5ZxahPBFKU9uuNNGu11wsxJZFwjqEpIBZfsWHEnNSQq+YjvbQ=
Received: by 10.70.131.11 with SMTP id e11mr6869405wxd;
        Tue, 27 Dec 2005 09:38:29 -0800 (PST)
Received: by 10.70.11.5 with HTTP; Tue, 27 Dec 2005 09:38:28 -0800 (PST)
Message-ID: <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com>
Date: Tue, 27 Dec 2005 17:38:29 +0000
From: Murali <muralidharan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: More than 32 required/prohibited clauses in query
In-Reply-To: <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14941_22273741.1135705109002"
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com>
	 <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_14941_22273741.1135705109002
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

On 12/27/05, Yonik Seeley <yseeley@gmail.com> wrote:
>
> There is no officially released 1.9 version yet.  Many people are
> using the current 1.9 branch for production, however, and it is stable
> (moreso than 1.4.3 IMO).


Why hasn't there been a release since 1.4.3(11/29/04)? Is there a date set
for the next release?

------=_Part_14941_22273741.1135705109002--

From java-user-return-18100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 18:25:31 2005
Return-Path: <java-user-return-18100-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44650 invoked from network); 27 Dec 2005 18:25:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 18:25:31 -0000
Received: (qmail 23918 invoked by uid 500); 27 Dec 2005 18:25:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23891 invoked by uid 500); 27 Dec 2005 18:25:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23873 invoked by uid 99); 27 Dec 2005 18:25:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:25:24 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:25:23 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 009C213E2029; Tue, 27 Dec 2005 13:24:59 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 9302A13E201A
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 13:24:49 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com>
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: More than 32 required/prohibited clauses in query
Date: Tue, 27 Dec 2005 13:24:40 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 27, 2005, at 12:38 PM, Murali wrote:
> On 12/27/05, Yonik Seeley <yseeley@gmail.com> wrote:
>>
>> There is no officially released 1.9 version yet.  Many people are
>> using the current 1.9 branch for production, however, and it is  
>> stable
>> (moreso than 1.4.3 IMO).
>
>
> Why hasn't there been a release since 1.4.3(11/29/04)? Is there a  
> date set
> for the next release?

We're overdue for a release, no question.  It's a tough itch to  
scratch though, since I run from trunk myself for all my projects.   
No date is set and the only thing holding a release back is no one  
has yet stepped forward to push out a release.  If I ever find a free  
day I'd do it, but I can't predict when that would be.  Other  
committers are welcome to tackle it also.  There is a fair bit of  
administrative overhead to making a release, at least it seems that  
way to me since I've done it so infrequently that I have to re-learn  
how to do it each time.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 18:27:08 2005
Return-Path: <java-user-return-18101-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45093 invoked from network); 27 Dec 2005 18:27:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 18:27:08 -0000
Received: (qmail 25630 invoked by uid 500); 27 Dec 2005 18:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25612 invoked by uid 500); 27 Dec 2005 18:27:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25601 invoked by uid 99); 27 Dec 2005 18:27:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:27:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:27:01 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2E69913E201A; Tue, 27 Dec 2005 13:26:40 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 2AFD213E2005
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 13:26:33 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <1e2216160512270725y1fa9b7e4h@mail.gmail.com>
References: <1e2216160512261531o583f88cel@mail.gmail.com> <ACEDCF75-A64B-4C3A-930E-F995749975F2@ehatchersolutions.com> <1e2216160512270725y1fa9b7e4h@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <71FF53BB-3147-4955-963D-5EC78DD2A5ED@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Problem Getting Started...
Date: Tue, 27 Dec 2005 13:26:30 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are you running the Sun JVM?  Or some other JVM?


	Erik


On Dec 27, 2005, at 10:25 AM, Federico Carbonetti wrote:

> hello erik and hello everybody!
>
> 2005/12/27, Erik Hatcher <erik@ehatchersolutions.com>:
>>
>> On Dec 26, 2005, at 6:31 PM, Federico Carbonetti wrote:
>>> I'm new in the ML and in the Lucene world in general... :)
>>
>> ML?
>>
>
> Mailing List! ehehe! :)
>
> this morning i changed some settings for the PATH variabile, but I'm
> still experiencing the same trouble. I tried to extract lucene
> following the hints given in the appendix of "lucene in action" (I've
> that book) but without success... I downloaded lucene-1.4-final.zip,
> extracted to C:\lucene-1.4-final\ and updated the classpath of
> windows. Somebody told me to set the JVM classpath by typing:
>
> java -cp lucene-1.4-final.jar; -jar lucene-demos-1.4-final.jar
>
> but I got the following message:
> Failed to load Main-Class manifest attribute from lucene-demos-1.4- 
> final.jar
>
> While when i Try to set the classpath as suggested in the appendix
> (java -cp lucene-1.4-final.jar; lucene-demos-1.4-final.jar) i got the
> "usual" Exception in thread "main"...
>
> Does anybody know the solution to my problem please? :)
>
> Thanks again! Bye
>
>>
>> Federico,
>>
>> I'm pasting below the relevant piece of the "Installing Lucene"
>> appendix, I hope this helps.  At first glance, the environment and
>> steps you described seemed fine, so I'm not sure what is awry.
>>
>> I hope the info below helps:
>>
>> Running the command-line demo
>> The command-line Lucene demo consists of two command-line  
>> programs: one
>> that indexes a directory tree of files and another that provides a
>> simple search
>> interface. To run this demo, set your current working directory to
>> the directory
>> where the binary distribution was expanded. Next, run the IndexFiles
>> program
>> like this:
>>
>>    java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
>> org.apache.lucene.demo.IndexFiles docs
>> .
>> .
>> .
>> adding docs/queryparsersyntax.html
>> adding docs/resources.html
>> adding docs/systemproperties.html
>> adding docs/whoweare.html
>> 9454 total milliseconds
>>
>> This command indexes the entire docs directory tree (339 files in our
>> case) into
>> an index stored in the index subdirectory of the location where you
>> executed
>> the command.
>>
>> NOTE Literally every file in the docs directory tree is indexed,
>> including .gif
>> and .jpg files. None of the files are parsed; instead, each file is
>> indexed
>> by streaming its bytes into StandardAnalyzer.
>>
>> To search the index just created, execute SearchFiles in this manner:
>>
>>    java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
>>                  org.apache.lucene.demo.SearchFiles
>>
>> Query: IndexSearcher AND QueryParser
>> Searching for: +indexsearcher +queryparser
>> 10 total matching documents
>> 0. docs/api/index-all.html
>> 1. docs/api/allclasses-frame.html
>> 2. docs/api/allclasses-noframe.html
>> 3. docs/api/org/apache/lucene/search/class-use/Query.html
>> 4. docs/api/overview-summary.html
>> 5. docs/api/overview-tree.html
>> 6. docs/demo2.html
>> 7. docs/demo4.html
>> 8. docs/api/org/apache/lucene/search/package-summary.html
>> 9. docs/api/org/apache/lucene/search/package-tree.html
>>
>> SearchFiles prompts interactively with Query:. QueryParser is used
>> with Standard-
>> Analyzer to create a Query. A maximum of 10 hits are shown at a time;
>> if there are
>> more, you can page through them. Press Ctrl-C to exit the program.
>>
>>         Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 18:35:49 2005
Return-Path: <java-user-return-18102-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47622 invoked from network); 27 Dec 2005 18:35:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 18:35:49 -0000
Received: (qmail 40275 invoked by uid 500); 27 Dec 2005 18:35:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40255 invoked by uid 500); 27 Dec 2005 18:35:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40243 invoked by uid 99); 27 Dec 2005 18:35:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:35:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.186] (HELO moutng.kundenserver.de) (212.227.126.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:35:43 -0800
Received: from [80.184.186.206] (helo=[192.168.2.2])
	by mrelayeu.kundenserver.de (node=mrelayeu0) with ESMTP (Nemesis),
	id 0MKwh2-1ErJfM3RcP-00044F; Tue, 27 Dec 2005 19:35:21 +0100
Message-ID: <43B18868.2080005@artentis.com>
Date: Tue, 27 Dec 2005 19:31:04 +0100
From: Gaston <gasi@artentis.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Problem Getting Started...
References: <1e2216160512261531o583f88cel@mail.gmail.com> <ACEDCF75-A64B-4C3A-930E-F995749975F2@ehatchersolutions.com> <1e2216160512270725y1fa9b7e4h@mail.gmail.com> <71FF53BB-3147-4955-963D-5EC78DD2A5ED@ehatchersolutions.com>
In-Reply-To: <71FF53BB-3147-4955-963D-5EC78DD2A5ED@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:e856510009f74cf6d851f8e7132753ec
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I had the same problem at the beginning.

Try

java -classpath lucene-1.4-final.jar; lucene-demos-1.4-final.jar; 
org.apache.lucene.demo.IndexHTML -create -index webindex docs

If this fails go in the org/apache/lucene/demo directory and compile 
IndexHTML.java with the command
javac -classpath lucene-1.4-final.jar;lucene-demos-1.4-final.jar;  
org.apache.lucene.demo.IndexHTML.java

and then retry the first step out of  this mail.


Greetings


Gaston


Erik Hatcher schrieb:

> Are you running the Sun JVM?  Or some other JVM?
>
>
>     Erik
>
>
> On Dec 27, 2005, at 10:25 AM, Federico Carbonetti wrote:
>
>> hello erik and hello everybody!
>>
>> 2005/12/27, Erik Hatcher <erik@ehatchersolutions.com>:
>>
>>>
>>> On Dec 26, 2005, at 6:31 PM, Federico Carbonetti wrote:
>>>
>>>> I'm new in the ML and in the Lucene world in general... :)
>>>
>>>
>>> ML?
>>>
>>
>> Mailing List! ehehe! :)
>>
>> this morning i changed some settings for the PATH variabile, but I'm
>> still experiencing the same trouble. I tried to extract lucene
>> following the hints given in the appendix of "lucene in action" (I've
>> that book) but without success... I downloaded lucene-1.4-final.zip,
>> extracted to C:\lucene-1.4-final\ and updated the classpath of
>> windows. Somebody told me to set the JVM classpath by typing:
>>
>> java -cp lucene-1.4-final.jar; -jar lucene-demos-1.4-final.jar
>>
>> but I got the following message:
>> Failed to load Main-Class manifest attribute from lucene-demos-1.4- 
>> final.jar
>>
>> While when i Try to set the classpath as suggested in the appendix
>> (java -cp lucene-1.4-final.jar; lucene-demos-1.4-final.jar) i got the
>> "usual" Exception in thread "main"...
>>
>> Does anybody know the solution to my problem please? :)
>>
>> Thanks again! Bye
>>
>>>
>>> Federico,
>>>
>>> I'm pasting below the relevant piece of the "Installing Lucene"
>>> appendix, I hope this helps.  At first glance, the environment and
>>> steps you described seemed fine, so I'm not sure what is awry.
>>>
>>> I hope the info below helps:
>>>
>>> Running the command-line demo
>>> The command-line Lucene demo consists of two command-line  programs: 
>>> one
>>> that indexes a directory tree of files and another that provides a
>>> simple search
>>> interface. To run this demo, set your current working directory to
>>> the directory
>>> where the binary distribution was expanded. Next, run the IndexFiles
>>> program
>>> like this:
>>>
>>>    java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
>>> org.apache.lucene.demo.IndexFiles docs
>>> .
>>> .
>>> .
>>> adding docs/queryparsersyntax.html
>>> adding docs/resources.html
>>> adding docs/systemproperties.html
>>> adding docs/whoweare.html
>>> 9454 total milliseconds
>>>
>>> This command indexes the entire docs directory tree (339 files in our
>>> case) into
>>> an index stored in the index subdirectory of the location where you
>>> executed
>>> the command.
>>>
>>> NOTE Literally every file in the docs directory tree is indexed,
>>> including .gif
>>> and .jpg files. None of the files are parsed; instead, each file is
>>> indexed
>>> by streaming its bytes into StandardAnalyzer.
>>>
>>> To search the index just created, execute SearchFiles in this manner:
>>>
>>>    java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
>>>                  org.apache.lucene.demo.SearchFiles
>>>
>>> Query: IndexSearcher AND QueryParser
>>> Searching for: +indexsearcher +queryparser
>>> 10 total matching documents
>>> 0. docs/api/index-all.html
>>> 1. docs/api/allclasses-frame.html
>>> 2. docs/api/allclasses-noframe.html
>>> 3. docs/api/org/apache/lucene/search/class-use/Query.html
>>> 4. docs/api/overview-summary.html
>>> 5. docs/api/overview-tree.html
>>> 6. docs/demo2.html
>>> 7. docs/demo4.html
>>> 8. docs/api/org/apache/lucene/search/package-summary.html
>>> 9. docs/api/org/apache/lucene/search/package-tree.html
>>>
>>> SearchFiles prompts interactively with Query:. QueryParser is used
>>> with Standard-
>>> Analyzer to create a Query. A maximum of 10 hits are shown at a time;
>>> if there are
>>> more, you can page through them. Press Ctrl-C to exit the program.
>>>
>>>         Erik
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 18:37:07 2005
Return-Path: <java-user-return-18103-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47870 invoked from network); 27 Dec 2005 18:37:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 18:37:07 -0000
Received: (qmail 41718 invoked by uid 500); 27 Dec 2005 18:37:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41691 invoked by uid 500); 27 Dec 2005 18:37:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41680 invoked by uid 99); 27 Dec 2005 18:37:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:37:01 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:37:00 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 10:36:39 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C60B14.7955150C"
Subject: Field searches and special characters - ??
Date: Tue, 27 Dec 2005 10:34:56 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAE@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAE@ehost011-3.exch011.intermedia.net>
Thread-Topic: Field searches and special characters - ??
thread-index: AcYLEvCcoOneoyDKQhCsg+gpnfkNCgAAUt5f
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 18:36:39.0692 (UTC) FILETIME=[79C62CC0:01C60B14]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B14.7955150C
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
Trying to get my field searches to work with special characters.  It =
appears that Lucene is not able to interpret these searches correctly =
(but works as expected with generic content searches).
=20
For instance, I created a document named item+with+pluses (plus being =
the special character to test).  Verified that my index contains a =
document whose 'Keyword.Name' field is set to item\+with\+pluses. Now, =
when searching for this document, I have tried the following, per the =
recommended Lucene special char escaping rules:
=20
=3D>  Keyword.Name:item\+with\+pluses - this brought back no results
=3D>  Keyword.Name:item\\+with\\+pluses - no results, either
=3D>  Keyword.Name:item\\\+with\\\+pluses - nothing
=3D>  item\+with\+pluses - finds the right document that has =
"item+with+pluses" in the content
=20
The other thing I tried was indexing the value without first escaping =
it, as just item+with+pluses.  In this case, =
Keyword.Name:item\+with\+pluses still brought back no results.
=20
Has anyone run into this issue before?  Any recommendations?
=20
Thanks,
- Dmitry


------_=_NextPart_001_01C60B14.7955150C
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C60B14.7955150C--

From java-user-return-18104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 18:45:50 2005
Return-Path: <java-user-return-18104-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50567 invoked from network); 27 Dec 2005 18:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 18:45:50 -0000
Received: (qmail 48985 invoked by uid 500); 27 Dec 2005 18:45:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48967 invoked by uid 500); 27 Dec 2005 18:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48956 invoked by uid 99); 27 Dec 2005 18:45:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:45:41 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:45:40 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 10:45:20 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C60B15.AF728F81"
Subject: Proximity searches and Porter stemming - ??
Date: Tue, 27 Dec 2005 10:45:19 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAF@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAF@ehost011-3.exch011.intermedia.net>
Thread-Topic: Proximity searches and Porter stemming - ??
thread-index: AcYLEvCcoOneoyDKQhCsg+gpnfkNCgAAeUUH
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 18:45:20.0076 (UTC) FILETIME=[AFF278C0:01C60B15]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B15.AF728F81
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
I tried using Porter stemming in our application and it worked great =
except it broke the proximity searches.  Is there any way at all that =
these two pieces of functionality could coexist peacefully?
=20
I do not see any reason why they should not.  It seems to me that =
proximity query terms should be stemmed by the engine, then the query =
executed.  Personally, I would not care much if the following two =
proximity queries would bring back the same results:
=20
"character encoding"~3
and
"characters encode"~3
=20
I'd much rather they both returned the same results than no results at =
all, the latter being the case I've observed.
=20
Any recommendations?
Thanks,
- Dmitry


------_=_NextPart_001_01C60B15.AF728F81
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C60B15.AF728F81--

From java-user-return-18105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 18:57:48 2005
Return-Path: <java-user-return-18105-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53304 invoked from network); 27 Dec 2005 18:57:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 18:57:48 -0000
Received: (qmail 57089 invoked by uid 500); 27 Dec 2005 18:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56077 invoked by uid 500); 27 Dec 2005 18:57:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56066 invoked by uid 99); 27 Dec 2005 18:57:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:57:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:57:43 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 00B0D13E2029; Tue, 27 Dec 2005 13:57:19 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id EB6C613E201A
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 13:57:00 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAF@ehost011-3.exch011.intermedia.net>
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAF@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9DF000F8-4EE3-4DF9-88A7-3EF1074D0964@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Proximity searches and Porter stemming - ??
Date: Tue, 27 Dec 2005 13:56:58 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 27, 2005, at 1:45 PM, Dmitry Goldenberg wrote:
> I tried using Porter stemming in our application and it worked  
> great except it broke the proximity searches.  Is there any way at  
> all that these two pieces of functionality could coexist peacefully?
>
> I do not see any reason why they should not.  It seems to me that  
> proximity query terms should be stemmed by the engine, then the  
> query executed.  Personally, I would not care much if the following  
> two proximity queries would bring back the same results:
>
> "character encoding"~3
> and
> "characters encode"~3
>
> I'd much rather they both returned the same results than no results  
> at all, the latter being the case I've observed.
>
> Any recommendations?

Are you using the same Analyzer with QueryParser as you are with  
IndexWriter?  What does the generated Query.toString yield?

This absolutely works provided the analyzers jive between indexing  
and searching.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 18:59:38 2005
Return-Path: <java-user-return-18106-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53621 invoked from network); 27 Dec 2005 18:59:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 18:59:38 -0000
Received: (qmail 58608 invoked by uid 500); 27 Dec 2005 18:59:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57596 invoked by uid 500); 27 Dec 2005 18:59:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57585 invoked by uid 99); 27 Dec 2005 18:59:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:59:33 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 10:59:32 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 10:59:05 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C60B17.9B55AF08"
Subject: Wildcard and Fuzzy queries - no best fragments generated - ??
Date: Tue, 27 Dec 2005 10:55:07 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net>
Thread-Topic: Wildcard and Fuzzy queries - no best fragments generated - ??
thread-index: AcYLEvCcoOneoyDKQhCsg+gpnfkNCgABB2/l
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 18:59:05.0461 (UTC) FILETIME=[9BEA3A50:01C60B17]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B17.9B55AF08
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
While testing my code that integrates the Highlighter class from =
org.apache.lucene.search.highlight, I found out that for wildcard and =
fuzzy queries, it generates no best fragments.
=20
Any particular reason why that is the case?  Shouldn't the highlighter =
be able to work just like with any other query and highlight any =
matching token sequences?  E.g. if I'm searching for lava~, I'd expect =
it to highlight words like lava, java, etc.  This is the whole point of =
highlighting, is it not?
=20
Thanks,
- Dmitry


------_=_NextPart_001_01C60B17.9B55AF08
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C60B17.9B55AF08--

From java-user-return-18107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 19:04:34 2005
Return-Path: <java-user-return-18107-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55103 invoked from network); 27 Dec 2005 19:04:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 19:04:34 -0000
Received: (qmail 63089 invoked by uid 500); 27 Dec 2005 19:04:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62646 invoked by uid 500); 27 Dec 2005 19:04:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62635 invoked by uid 99); 27 Dec 2005 19:04:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:04:27 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:04:27 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8485613E201A; Tue, 27 Dec 2005 14:04:06 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id BB8E713E2005
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 14:04:03 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net>
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B768B92A-9B71-4372-ABD0-D99891694D64@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wildcard and Fuzzy queries - no best fragments generated - ??
Date: Tue, 27 Dec 2005 14:03:57 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You have to _rewrite_ the Query for this to work.  This, I believe,  
is mentioned in the javadocs.

I think you are hijacking a thread with your recent postings.  Please  
create a new message rather than reply to one and change the  
subject.  Thanks.

	Erik


On Dec 27, 2005, at 1:55 PM, Dmitry Goldenberg wrote:

> Hello,
>
> While testing my code that integrates the Highlighter class from  
> org.apache.lucene.search.highlight, I found out that for wildcard  
> and fuzzy queries, it generates no best fragments.
>
> Any particular reason why that is the case?  Shouldn't the  
> highlighter be able to work just like with any other query and  
> highlight any matching token sequences?  E.g. if I'm searching for  
> lava~, I'd expect it to highlight words like lava, java, etc.  This  
> is the whole point of highlighting, is it not?
>
> Thanks,
> - Dmitry
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 19:23:29 2005
Return-Path: <java-user-return-18108-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60962 invoked from network); 27 Dec 2005 19:23:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 19:23:28 -0000
Received: (qmail 93880 invoked by uid 500); 27 Dec 2005 19:23:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93514 invoked by uid 500); 27 Dec 2005 19:23:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93503 invoked by uid 99); 27 Dec 2005 19:23:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:23:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:23:21 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 11:23:00 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C60B1A.F2EF02D1"
Subject: RE: Proximity searches and Porter stemming - ??
Date: Tue, 27 Dec 2005 11:21:18 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB2@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB2@ehost011-3.exch011.intermedia.net>
Thread-Topic: Proximity searches and Porter stemming - ??
thread-index: AcYLF20t4P/z6SG9QkiV8SBTxMJaOAAA0lCp
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBAF@ehost011-3.exch011.intermedia.net> <9DF000F8-4EE3-4DF9-88A7-3EF1074D0964@ehatchersolutions.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 19:23:00.0808 (UTC) FILETIME=[F372CC80:01C60B1A]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B1A.F2EF02D1
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Erik, thanks for the quick response.  I believe we had an analyzer =
discrepancy.  I just retested and the queries work.
=20
I see "character encode eliminate"~3 and "character encoding =
eliminates"~3 returning the same results.
Thanks!

________________________________

From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Tue 12/27/2005 10:56 AM
To: java-user@lucene.apache.org
Subject: Re: Proximity searches and Porter stemming - ??




On Dec 27, 2005, at 1:45 PM, Dmitry Goldenberg wrote:
> I tried using Porter stemming in our application and it worked=20
> great except it broke the proximity searches.  Is there any way at=20
> all that these two pieces of functionality could coexist peacefully?
>
> I do not see any reason why they should not.  It seems to me that=20
> proximity query terms should be stemmed by the engine, then the=20
> query executed.  Personally, I would not care much if the following=20
> two proximity queries would bring back the same results:
>
> "character encoding"~3
> and
> "characters encode"~3
>
> I'd much rather they both returned the same results than no results=20
> at all, the latter being the case I've observed.
>
> Any recommendations?

Are you using the same Analyzer with QueryParser as you are with=20
IndexWriter?  What does the generated Query.toString yield?

This absolutely works provided the analyzers jive between indexing=20
and searching.

        Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C60B1A.F2EF02D1
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C60B1A.F2EF02D1--

From java-user-return-18109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 19:33:15 2005
Return-Path: <java-user-return-18109-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64375 invoked from network); 27 Dec 2005 19:33:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 19:33:15 -0000
Received: (qmail 20421 invoked by uid 500); 27 Dec 2005 19:33:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20323 invoked by uid 500); 27 Dec 2005 19:33:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20311 invoked by uid 99); 27 Dec 2005 19:33:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:33:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:33:08 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 11:32:48 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C60B1C.514F206B"
Subject: Wildcard and Fuzzy queries - no best fragments generated - ??
Date: Tue, 27 Dec 2005 11:32:47 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB3@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Wildcard and Fuzzy queries - no best fragments generated - ??
thread-index: AcYLHFFAlq9/3f9jQBe4l6zds0PcPw==
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 19:32:48.0457 (UTC) FILETIME=[51B6EB90:01C60B1C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B1C.514F206B
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,

While testing my code that integrates the Highlighter class from =
org.apache.lucene.search.highlight, I found out that for wildcard and =
fuzzy queries, it generates no best fragments.

Any particular reason why that is the case?  Shouldn't the highlighter =
be able to work just like with any other query and highlight any =
matching token sequences?  E.g. if I'm searching for lava~, I'd expect =
it to highlight words like lava, java, etc.  This is the whole point of =
highlighting, is it not?

Thanks,
- Dmitry


------_=_NextPart_001_01C60B1C.514F206B--

From java-user-return-18110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 19:34:03 2005
Return-Path: <java-user-return-18110-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64562 invoked from network); 27 Dec 2005 19:34:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 19:34:03 -0000
Received: (qmail 21905 invoked by uid 500); 27 Dec 2005 19:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21590 invoked by uid 500); 27 Dec 2005 19:33:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21579 invoked by uid 99); 27 Dec 2005 19:33:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:33:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:33:56 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 11:33:36 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C60B1C.6E030BD1"
Subject: Field searches and special characters - ??
Date: Tue, 27 Dec 2005 11:33:35 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB4@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Field searches and special characters - ??
thread-index: AcYLHG37iqLl4R5/Sbm8U/TJR1JJMA==
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 19:33:36.0598 (UTC) FILETIME=[6E68A760:01C60B1C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B1C.6E030BD1
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,

Trying to get my field searches to work with special characters.  It =
appears that Lucene is not able to interpret these searches correctly =
(but works as expected with generic content searches).

For instance, I created a document named item+with+pluses (plus being =
the special character to test).  Verified that my index contains a =
document whose 'Keyword.Name' field is set to item\+with\+pluses. Now, =
when searching for this document, I have tried the following, per the =
recommended Lucene special char escaping rules:

=3D>  Keyword.Name:item\+with\+pluses - this brought back no results
=3D>  Keyword.Name:item\\+with\\+pluses - no results, either
=3D>  Keyword.Name:item\\\+with\\\+pluses - nothing
=3D>  item\+with\+pluses - finds the right document that has =
"item+with+pluses" in the content

The other thing I tried was indexing the value without first escaping =
it, as just item+with+pluses.  In this case, =
Keyword.Name:item\+with\+pluses still brought back no results.

Has anyone run into this issue before?  Any recommendations?

Thanks,
- Dmitry
=20

------_=_NextPart_001_01C60B1C.6E030BD1--

From java-user-return-18111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 19:35:57 2005
Return-Path: <java-user-return-18111-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65168 invoked from network); 27 Dec 2005 19:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 19:35:57 -0000
Received: (qmail 24347 invoked by uid 500); 27 Dec 2005 19:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24322 invoked by uid 500); 27 Dec 2005 19:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24311 invoked by uid 99); 27 Dec 2005 19:35:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:35:50 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 11:35:49 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 11:35:29 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C60B1C.B110DAB1"
Subject: RE: Wildcard and Fuzzy queries - no best fragments generated - ??
Date: Tue, 27 Dec 2005 11:34:12 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB5@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB5@ehost011-3.exch011.intermedia.net>
Thread-Topic: Wildcard and Fuzzy queries - no best fragments generated - ??
thread-index: AcYLGF9P8ZSmXt8QQwukIWF/Gujs4wABCRMu
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net> <B768B92A-9B71-4372-ABD0-D99891694D64@ehatchersolutions.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 19:35:29.0176 (UTC) FILETIME=[B182B180:01C60B1C]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B1C.B110DAB1
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Erik,
What do you mean by _rewriting_ the query?  I checked all the classes in =
the highlighter package and did not see any mention of having to =
rewrite.
=20
Sorry for the highjacking, didn't mean to be a terrorist :)
- Dmitry

________________________________

From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Tue 12/27/2005 11:03 AM
To: java-user@lucene.apache.org
Subject: Re: Wildcard and Fuzzy queries - no best fragments generated - =
??



You have to _rewrite_ the Query for this to work.  This, I believe,=20
is mentioned in the javadocs.

I think you are hijacking a thread with your recent postings.  Please=20
create a new message rather than reply to one and change the=20
subject.  Thanks.

        Erik


On Dec 27, 2005, at 1:55 PM, Dmitry Goldenberg wrote:

> Hello,
>
> While testing my code that integrates the Highlighter class from=20
> org.apache.lucene.search.highlight, I found out that for wildcard=20
> and fuzzy queries, it generates no best fragments.
>
> Any particular reason why that is the case?  Shouldn't the=20
> highlighter be able to work just like with any other query and=20
> highlight any matching token sequences?  E.g. if I'm searching for=20
> lava~, I'd expect it to highlight words like lava, java, etc.  This=20
> is the whole point of highlighting, is it not?
>
> Thanks,
> - Dmitry
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C60B1C.B110DAB1
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C60B1C.B110DAB1--

From java-user-return-18112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 20:14:04 2005
Return-Path: <java-user-return-18112-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83975 invoked from network); 27 Dec 2005 20:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 20:14:04 -0000
Received: (qmail 77247 invoked by uid 500); 27 Dec 2005 20:13:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77039 invoked by uid 500); 27 Dec 2005 20:13:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77027 invoked by uid 99); 27 Dec 2005 20:13:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 12:13:57 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 12:13:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 62CEB13E201A; Tue, 27 Dec 2005 15:13:30 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 4F50F13E2005
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 15:13:22 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB5@ehost011-3.exch011.intermedia.net>
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net> <B768B92A-9B71-4372-ABD0-D99891694D64@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB5@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E0DCB80A-F460-4BCF-968F-98B3FAA4CE5C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wildcard and Fuzzy queries - no best fragments generated - ??
Date: Tue, 27 Dec 2005 15:13:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 27, 2005, at 2:34 PM, Dmitry Goldenberg wrote:
> What do you mean by _rewriting_ the query?  I checked all the  
> classes in the highlighter package and did not see any mention of  
> having to rewrite.

 From Highlighter's package.html in it's javadocs:

<pre>
	IndexSearcher searcher = new IndexSearcher(ramDir);
	Query query = QueryParser.parse("Kenne*", FIELD_NAME, analyzer);
	query = query.rewrite(reader); //required to expand search terms
	Hits hits = searcher.search(query);

	Highlighter highlighter = new Highlighter(this, new QueryScorer 
(query));
	for (int i = 0; i &lt; hits.length(); i++)
	{
		String text = hits.doc(i).get(FIELD_NAME);
		TokenStream tokenStream = analyzer.tokenStream(FIELD_NAME, new  
StringReader(text));
		// Get 3 best fragments and seperate with a "..."
		String result = highlighter.getBestFragments(tokenStream, text, 3,  
"...");
		System.out.println(result);
	}
</pre>





> ________________________________
>
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tue 12/27/2005 11:03 AM
> To: java-user@lucene.apache.org
> Subject: Re: Wildcard and Fuzzy queries - no best fragments  
> generated - ??
>
>
>
> You have to _rewrite_ the Query for this to work.  This, I believe,
> is mentioned in the javadocs.
>
> I think you are hijacking a thread with your recent postings.  Please
> create a new message rather than reply to one and change the
> subject.  Thanks.
>
>         Erik
>
>
> On Dec 27, 2005, at 1:55 PM, Dmitry Goldenberg wrote:
>
>> Hello,
>>
>> While testing my code that integrates the Highlighter class from
>> org.apache.lucene.search.highlight, I found out that for wildcard
>> and fuzzy queries, it generates no best fragments.
>>
>> Any particular reason why that is the case?  Shouldn't the
>> highlighter be able to work just like with any other query and
>> highlight any matching token sequences?  E.g. if I'm searching for
>> lava~, I'd expect it to highlight words like lava, java, etc.  This
>> is the whole point of highlighting, is it not?
>>
>> Thanks,
>> - Dmitry
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 21:07:34 2005
Return-Path: <java-user-return-18113-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5818 invoked from network); 27 Dec 2005 21:07:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 21:07:34 -0000
Received: (qmail 17035 invoked by uid 500); 27 Dec 2005 21:07:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17006 invoked by uid 500); 27 Dec 2005 21:07:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16995 invoked by uid 99); 27 Dec 2005 21:07:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 13:07:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 13:07:28 -0800
Received: by wproxy.gmail.com with SMTP id 69so1150286wra
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 13:07:08 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YAnxOK8xefCmrpVP3k5LZ+t5ZsCAxZq6m/fxbR3ysBVJW1Klh3Ir45vO2iQczkbTCLzkM5EO/+0B55CQ42tRQcwVEs65X33Hjkcw/s2S4E3Z8EI6sjechFO6N67wTIXkBx2i3QIfxb9eVoxV+H8L1M+IAMeaQPIJVujWFAZ9utY=
Received: by 10.65.177.14 with SMTP id e14mr2033810qbp;
        Tue, 27 Dec 2005 13:07:07 -0800 (PST)
Received: by 10.65.95.17 with HTTP; Tue, 27 Dec 2005 13:07:07 -0800 (PST)
Message-ID: <6e3ae6310512271307tf2d820dve1480e9b98c83e62@mail.gmail.com>
Date: Tue, 27 Dec 2005 13:07:07 -0800
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing and deleting simultaneously..
In-Reply-To: <c68e39170512270650h53374b36h65b17b05a28c082@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <10361639FF4CA04ABB30F54683E4FB8505667660@exchange2.home.zooplus.de>
	 <6e3ae6310512270123u61caadf5o487582facb2dd04@mail.gmail.com>
	 <c68e39170512270650h53374b36h65b17b05a28c082@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have got around it by using two indexes, one for searching, one for updat=
ing.
But searching "FileNotFoundException lucene" returns some previous emails.
Problems are more often on windows.

http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg11689.html

http://mail-archives.apache.org/mod_mbox/lucene-java-user/200406.mbox/%3C02=
4901c4499c$c12379f0$6501a8c0@POWERPACK%3E

Chris
---------------------------
http://www.dbsight.net
Lucene search on Any Database

On 12/27/05, Yonik Seeley <yseeley@gmail.com> wrote:
> That shouldn't happen.
> What platform(s) have you seen this on, and with what Lucene versions?
>
> -Yonik
>
> On 12/27/05, Chris Lu <chris.lu@gmail.com> wrote:
> > This is generally true, most of the time.
> > But my experience is, there can be some FileNotFoundException, if your
> > searcher is opened for a while, and indexing is doing some file
> > deleting/renaming when merging.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 21:18:38 2005
Return-Path: <java-user-return-18114-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8856 invoked from network); 27 Dec 2005 21:18:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 21:18:38 -0000
Received: (qmail 24764 invoked by uid 500); 27 Dec 2005 21:18:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24737 invoked by uid 500); 27 Dec 2005 21:18:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24726 invoked by uid 99); 27 Dec 2005 21:18:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 13:18:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.162.202 as permitted sender)
Received: from [64.233.162.202] (HELO zproxy.gmail.com) (64.233.162.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 13:18:31 -0800
Received: by zproxy.gmail.com with SMTP id i1so815633nzh
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 13:18:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uDScula1B+06aQJmnPrwTooWmV9cy/p9/cvVqIDLQkJILhD7JvC+KBU2XeUuQWauNfqd4sJhUFgfWKhyUpE3Jj4+t7knaiDb9VGIbHXu7bYlimmeZtRNcZJ7wBL9uvOX0ss0cRt7wP/WXEwql4XDAwSucm+ng3IxJ6yLV5E/qeo=
Received: by 10.65.148.3 with SMTP id a3mr481116qbo;
        Tue, 27 Dec 2005 13:18:10 -0800 (PST)
Received: by 10.65.252.6 with HTTP; Tue, 27 Dec 2005 13:18:10 -0800 (PST)
Message-ID: <c68e39170512271318n1156ef4cp8129d5162186697@mail.gmail.com>
Date: Tue, 27 Dec 2005 16:18:10 -0500
From: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing and deleting simultaneously..
In-Reply-To: <6e3ae6310512271307tf2d820dve1480e9b98c83e62@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <10361639FF4CA04ABB30F54683E4FB8505667660@exchange2.home.zooplus.de>
	 <6e3ae6310512270123u61caadf5o487582facb2dd04@mail.gmail.com>
	 <c68e39170512270650h53374b36h65b17b05a28c082@mail.gmail.com>
	 <6e3ae6310512271307tf2d820dve1480e9b98c83e62@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If anyone could provide a testcase that can reproduce this, it would
be a huge step toward fixing it!

-Yonik

On 12/27/05, Chris Lu <chris.lu@gmail.com> wrote:
> I have got around it by using two indexes, one for searching, one for upd=
ating.
> But searching "FileNotFoundException lucene" returns some previous emails=
.
> Problems are more often on windows.
>
> http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg11689.html
>
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200406.mbox/%3C=
024901c4499c$c12379f0$6501a8c0@POWERPACK%3E
>
> Chris
> ---------------------------
> http://www.dbsight.net
> Lucene search on Any Database
>
> On 12/27/05, Yonik Seeley <yseeley@gmail.com> wrote:
> > That shouldn't happen.
> > What platform(s) have you seen this on, and with what Lucene versions?
> >
> > -Yonik
> >
> > On 12/27/05, Chris Lu <chris.lu@gmail.com> wrote:
> > > This is generally true, most of the time.
> > > But my experience is, there can be some FileNotFoundException, if you=
r
> > > searcher is opened for a while, and indexing is doing some file
> > > deleting/renaming when merging.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 27 22:56:25 2005
Return-Path: <java-user-return-18115-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43267 invoked from network); 27 Dec 2005 22:56:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Dec 2005 22:56:24 -0000
Received: (qmail 24283 invoked by uid 500); 27 Dec 2005 22:56:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24175 invoked by uid 500); 27 Dec 2005 22:56:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24115 invoked by uid 99); 27 Dec 2005 22:56:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 14:56:16 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.129] (HELO mis011-2.exch011.intermedia.net) (64.78.21.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 14:56:15 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-2.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 27 Dec 2005 14:55:54 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C60B38.B1147260"
Subject: RE: Wildcard and Fuzzy queries - no best fragments generated - ??
Date: Tue, 27 Dec 2005 14:51:07 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB9@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB9@ehost011-3.exch011.intermedia.net>
Thread-Topic: Wildcard and Fuzzy queries - no best fragments generated - ??
thread-index: AcYLIhJ+StoKDkhxQnK9lVg9BH1jaQAFfNyc
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net> <B768B92A-9B71-4372-ABD0-D99891694D64@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB5@ehost011-3.exch011.intermedia.net> <E0DCB80A-F460-4BCF-968F-98B3FAA4CE5C@ehatchersolutions.com>
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Dec 2005 22:55:54.0785 (UTC) FILETIME=[B1550110:01C60B38]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60B38.B1147260
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Erik,
This is great.  Now, just so I understand how rewrite applies.  Are =
there specific cases when the rewrite method should or should not be =
invoked on the query before it is passed on to the search method?  Where =
I'm going with this is, if I have a UI which passes the user query to =
the back end, can the back end always call rewrite or not?
=20
By looking at the code, it seems that things just get reinterpreted as =
BooleanQuery's and such.  I just want to know if there are any pitfalls =
to watch out for.
=20
Thanks again,
- Dmitry

________________________________

From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Tue 12/27/2005 12:13 PM
To: java-user@lucene.apache.org
Subject: Re: Wildcard and Fuzzy queries - no best fragments generated - =
??




On Dec 27, 2005, at 2:34 PM, Dmitry Goldenberg wrote:
> What do you mean by _rewriting_ the query?  I checked all the=20
> classes in the highlighter package and did not see any mention of=20
> having to rewrite.

 From Highlighter's package.html in it's javadocs:

<pre>
        IndexSearcher searcher =3D new IndexSearcher(ramDir);
        Query query =3D QueryParser.parse("Kenne*", FIELD_NAME, =
analyzer);
        query =3D query.rewrite(reader); //required to expand search =
terms
        Hits hits =3D searcher.search(query);

        Highlighter highlighter =3D new Highlighter(this, new =
QueryScorer
(query));
        for (int i =3D 0; i &lt; hits.length(); i++)
        {
                String text =3D hits.doc(i).get(FIELD_NAME);
                TokenStream tokenStream =3D =
analyzer.tokenStream(FIELD_NAME, new=20
StringReader(text));
                // Get 3 best fragments and seperate with a "..."
                String result =3D =
highlighter.getBestFragments(tokenStream, text, 3,=20
"...");
                System.out.println(result);
        }
</pre>





> ________________________________
>
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tue 12/27/2005 11:03 AM
> To: java-user@lucene.apache.org
> Subject: Re: Wildcard and Fuzzy queries - no best fragments=20
> generated - ??
>
>
>
> You have to _rewrite_ the Query for this to work.  This, I believe,
> is mentioned in the javadocs.
>
> I think you are hijacking a thread with your recent postings.  Please
> create a new message rather than reply to one and change the
> subject.  Thanks.
>
>         Erik
>
>
> On Dec 27, 2005, at 1:55 PM, Dmitry Goldenberg wrote:
>
>> Hello,
>>
>> While testing my code that integrates the Highlighter class from
>> org.apache.lucene.search.highlight, I found out that for wildcard
>> and fuzzy queries, it generates no best fragments.
>>
>> Any particular reason why that is the case?  Shouldn't the
>> highlighter be able to work just like with any other query and
>> highlight any matching token sequences?  E.g. if I'm searching for
>> lava~, I'd expect it to highlight words like lava, java, etc.  This
>> is the whole point of highlighting, is it not?
>>
>> Thanks,
>> - Dmitry
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





------_=_NextPart_001_01C60B38.B1147260
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------_=_NextPart_001_01C60B38.B1147260--

From java-user-return-18116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 01:22:43 2005
Return-Path: <java-user-return-18116-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87321 invoked from network); 28 Dec 2005 01:22:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 01:22:43 -0000
Received: (qmail 54691 invoked by uid 500); 28 Dec 2005 01:22:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54672 invoked by uid 500); 28 Dec 2005 01:22:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54660 invoked by uid 99); 28 Dec 2005 01:22:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 17:22:36 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 17:22:35 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 28E7A13E2005; Tue, 27 Dec 2005 20:22:13 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 3724A13E2029
	for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 20:22:04 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB9@ehost011-3.exch011.intermedia.net>
References: <191B11CF22BAC54292E97F3B5CDC9C85DE586E@tlvmail7.corp.amdocs.com> <c68e39170512270751r45f7f56cif13f85f0103dd471@mail.gmail.com> <26fbe3a70512270938p6b120170u584adc7f5efcd954@mail.gmail.com> <7537F3D4-387C-46EE-BE99-D090C4C937C3@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB1@ehost011-3.exch011.intermedia.net> <B768B92A-9B71-4372-ABD0-D99891694D64@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB5@ehost011-3.exch011.intermedia.net> <E0DCB80A-F460-4BCF-968F-98B3FAA4CE5C@ehatchersolutions.com> <FAB00A8DC59FAB42B13C2B3B0F687701E7CBB9@ehost011-3.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E8BBB585-A2DE-4E86-84A4-F755C55DA569@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wildcard and Fuzzy queries - no best fragments generated - ??
Date: Tue, 27 Dec 2005 20:21:57 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 27, 2005, at 5:51 PM, Dmitry Goldenberg wrote:
> This is great.  Now, just so I understand how rewrite applies.  Are  
> there specific cases when the rewrite method should or should not  
> be invoked on the query before it is passed on to the search  
> method?  Where I'm going with this is, if I have a UI which passes  
> the user query to the back end, can the back end always call  
> rewrite or not?
> By looking at the code, it seems that things just get reinterpreted  
> as BooleanQuery's and such.  I just want to know if there are any  
> pitfalls to watch out for.

It is safe, and wise, to always call Query.rewrite before  
highlighting.  No worries or pitfalls that I know of.

	Erik



>
> Thanks again,
> - Dmitry
>
> ________________________________
>
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Tue 12/27/2005 12:13 PM
> To: java-user@lucene.apache.org
> Subject: Re: Wildcard and Fuzzy queries - no best fragments  
> generated - ??
>
>
>
>
> On Dec 27, 2005, at 2:34 PM, Dmitry Goldenberg wrote:
>> What do you mean by _rewriting_ the query?  I checked all the
>> classes in the highlighter package and did not see any mention of
>> having to rewrite.
>
>  From Highlighter's package.html in it's javadocs:
>
> <pre>
>         IndexSearcher searcher = new IndexSearcher(ramDir);
>         Query query = QueryParser.parse("Kenne*", FIELD_NAME,  
> analyzer);
>         query = query.rewrite(reader); //required to expand search  
> terms
>         Hits hits = searcher.search(query);
>
>         Highlighter highlighter = new Highlighter(this, new  
> QueryScorer
> (query));
>         for (int i = 0; i &lt; hits.length(); i++)
>         {
>                 String text = hits.doc(i).get(FIELD_NAME);
>                 TokenStream tokenStream = analyzer.tokenStream 
> (FIELD_NAME, new
> StringReader(text));
>                 // Get 3 best fragments and seperate with a "..."
>                 String result = highlighter.getBestFragments 
> (tokenStream, text, 3,
> "...");
>                 System.out.println(result);
>         }
> </pre>
>
>
>
>
>
>> ________________________________
>>
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: Tue 12/27/2005 11:03 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Wildcard and Fuzzy queries - no best fragments
>> generated - ??
>>
>>
>>
>> You have to _rewrite_ the Query for this to work.  This, I believe,
>> is mentioned in the javadocs.
>>
>> I think you are hijacking a thread with your recent postings.  Please
>> create a new message rather than reply to one and change the
>> subject.  Thanks.
>>
>>         Erik
>>
>>
>> On Dec 27, 2005, at 1:55 PM, Dmitry Goldenberg wrote:
>>
>>> Hello,
>>>
>>> While testing my code that integrates the Highlighter class from
>>> org.apache.lucene.search.highlight, I found out that for wildcard
>>> and fuzzy queries, it generates no best fragments.
>>>
>>> Any particular reason why that is the case?  Shouldn't the
>>> highlighter be able to work just like with any other query and
>>> highlight any matching token sequences?  E.g. if I'm searching for
>>> lava~, I'd expect it to highlight words like lava, java, etc.  This
>>> is the whole point of highlighting, is it not?
>>>
>>> Thanks,
>>> - Dmitry
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 02:18:40 2005
Return-Path: <java-user-return-18117-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6990 invoked from network); 28 Dec 2005 02:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 02:18:40 -0000
Received: (qmail 79944 invoked by uid 500); 28 Dec 2005 02:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79470 invoked by uid 500); 28 Dec 2005 02:18:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79459 invoked by uid 99); 28 Dec 2005 02:18:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 18:18:35 -0800
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of eschultee@gmail.com designates 64.233.182.202 as permitted sender)
Received: from [64.233.182.202] (HELO nproxy.gmail.com) (64.233.182.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 18:18:34 -0800
Received: by nproxy.gmail.com with SMTP id l35so461410nfa
        for <java-user@lucene.apache.org>; Tue, 27 Dec 2005 18:18:13 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type;
        b=PT12mJ7FmNvTKPp4NTArCMt5WVdJdSCs3SNGRXk7yRicR1bW24yGI08y7DJV7myxK0n8WIq5hlL+mLlQU+nk3vog42bisOkanDBFXafUw2xcjBIV9siARBZ9W1cir+T4Qkv7pEXwq5ZzR9ndzIP37GMRzBmWRnqp4Dix6NU0yw0=
Received: by 10.49.42.7 with SMTP id u7mr289783nfj;
        Tue, 27 Dec 2005 18:18:13 -0800 (PST)
Received: by 10.48.80.7 with HTTP; Tue, 27 Dec 2005 18:18:13 -0800 (PST)
Message-ID: <357325db0512271818y13771d59w73852cd2967db7b7@mail.gmail.com>
Date: Tue, 27 Dec 2005 21:18:13 -0500
From: Eric Schulte <eschultee@gmail.com>
Reply-To: schulte.eric@gmail.com
To: java-user@lucene.apache.org
Subject: filtering an IndexReader
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10168_20549149.1135736293278"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_10168_20549149.1135736293278
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

R29vZCBldmVuaW5nIGV2ZXJ5b25lLAoKU28sIEkgYXBvbG9naXplIGlmIHRoaXMgcXVlc3Rpb24g
aGFzIGEgc2ltcGxlIGFuc3dlciAoYWx0aG91Z2ggSSBob3BlIGl0CmRvZXMpLiBJIGFtIHRyeWlu
ZyB0byBhcHBseSBhIGZpbHRlciB0byBhbiBJbmRleFJlYWRlciwgc28gdGhhdCB0aGUgcmVhZGVy
CmNhbiBvbmx5IHNlZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgZmlsdGVyLiBUaGUgZ29hbCBo
ZXJlIGlzIHRvIGJlIGFibGUgdG8KaW1wbGVtZW50IHRoZSAndGVybXMnIGFuZCAndGVybURvY3Mn
IG1ldGhvZHMsIHdpdGggdGhlICdmaWx0ZXIgYXBwcm92ZWQnCmRvY3VtZW50cyB0YWtlbiBpbnRv
IGNvbnNpZGVyYXRpb24gaW4gcHV0dGluZyB0b2dldGhlciB0aGUgc3RhdHMuCgpJIGRvbid0IGJl
bGlldmUgdGhlIEZpbHRlckluZGV4UmVhZGVyIGNsYXNzIGNhbiBkbyB0aGlzIChJZiBpdCBjYW4g
SSBkb24ndAprbm93IGhvdykuCgpBbnkgaWRlYXMgd291bGQgYmUgYXBwcmVjaWF0ZWQuCgpUbyBh
bnlvbmUgb24gdGhlIGdlbmVyYWwgbHVjZW5lIG1haWxpbmcgbGlzdCBzb3JyeSBhYm91dCB0aGUg
Y3Jvc3MtcG9zdC4KCk1hbnkgVGhhbmtzLApFcmljCg==
------=_Part_10168_20549149.1135736293278--

From java-user-return-18118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 07:41:13 2005
Return-Path: <java-user-return-18118-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16147 invoked from network); 28 Dec 2005 07:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 07:41:13 -0000
Received: (qmail 31441 invoked by uid 500); 28 Dec 2005 07:41:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31405 invoked by uid 500); 28 Dec 2005 07:41:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31393 invoked by uid 99); 28 Dec 2005 07:41:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 23:41:08 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.179.127.169] (HELO koutmail.amdocs.com) (212.179.127.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 27 Dec 2005 23:41:07 -0800
Received: from omail2.amdocs.com ([212.179.127.133])
	by koutmail.amdocs.com (8.12.11/8.12.9) with ESMTP id jBS7Xljb014280
	for <java-user@lucene.apache.org>; Wed, 28 Dec 2005 09:33:48 +0200
Received: from tlvmail7.corp.amdocs.com (localhost.localdomain [127.0.0.1])
	by omail2.amdocs.com (8.12.11/8.12.11) with ESMTP id jBS7eb5S015306
	for <java-user@lucene.apache.org>; Wed, 28 Dec 2005 09:40:37 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: More than 32 required/prohibited clauses in query
Date: Wed, 28 Dec 2005 09:41:30 +0200
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C85DE597E@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: More than 32 required/prohibited clauses in query
Thread-Index: AcYLExD3bcot9p5oTsSziOtNfn/jbgAbv40Q
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Thanks, It works, I took binary jar from Luke site

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=0D
Sent: Tuesday, December 27, 2005 8:25 PM
To: java-user@lucene.apache.org
Subject: Re: More than 32 required/prohibited clauses in query


On Dec 27, 2005, at 12:38 PM, Murali wrote:
> On 12/27/05, Yonik Seeley <yseeley@gmail.com> wrote:
>>
>> There is no officially released 1.9 version yet.  Many people are
>> using the current 1.9 branch for production, however, and it is =0D
>> stable
>> (moreso than 1.4.3 IMO).
>
>
> Why hasn't there been a release since 1.4.3(11/29/04)? Is there a =0D
> date set
> for the next release?

We're overdue for a release, no question.  It's a tough itch to =0D
scratch though, since I run from trunk myself for all my projects.  =0D
No date is set and the only thing holding a release back is no one =0D
has yet stepped forward to push out a release.  If I ever find a free =0D
day I'd do it, but I can't predict when that would be.  Other =0D
committers are welcome to tackle it also.  There is a fair bit of =0D
administrative overhead to making a release, at least it seems that =0D
way to me since I've done it so infrequently that I have to re-learn =0D
how to do it each time.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 08:45:15 2005
Return-Path: <java-user-return-18119-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40727 invoked from network); 28 Dec 2005 08:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 08:45:15 -0000
Received: (qmail 72789 invoked by uid 500); 28 Dec 2005 08:45:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72750 invoked by uid 500); 28 Dec 2005 08:45:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72732 invoked by uid 99); 28 Dec 2005 08:45:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 00:45:00 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_HAS_ULINE_NUMS,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.179.226] (HELO web36112.mail.mud.yahoo.com) (66.163.179.226)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 28 Dec 2005 00:44:59 -0800
Received: (qmail 78006 invoked by uid 60001); 28 Dec 2005 08:44:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=SUe/kZPwU5sA/3etxrfudf2SYBX5lcCeSAv/Gs7c0ZCMYpsg4SVw9ENFKvh6VV57wDBqj5b7+EU+3nXxAYCzaATfoNNY7mInv0aZ1bN/hRL54Dbuu/Q+CXSUYoeEKgm5sO6sRxA4MqpzWu6cl4RrckHIfnuAoopEpocn7urENnA=  ;
Message-ID: <20051228084438.78004.qmail@web36112.mail.mud.yahoo.com>
Received: from [203.197.47.185] by web36112.mail.mud.yahoo.com via HTTP; Wed, 28 Dec 2005 00:44:38 PST
Date: Wed, 28 Dec 2005 00:44:38 -0800 (PST)
From: revati joshi <revati_joshi83@yahoo.com>
Subject: Highlighter
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1094189941-1135759478=:63539"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1094189941-1135759478=:63539
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello lucene members,
                                       i hve tried indexing n searching n it works properly.Now i want to use Highlighter class in my search class for highlighting terms.But when i call this class or import this class then this class is not interpreted by java.As lucene1.4.3 has got all .class files in it,there no .class file of Highlighter class.whether i hve to compile this class specifically n use it in my search class or wht is the procedure for implementing Highlighter class.Plz suggest  some solution for this.
   
                                      

		
---------------------------------
 Yahoo! DSL Something to write home about. Just $16.99/mo. or less
--0-1094189941-1135759478=:63539--

From java-user-return-18120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 13:13:06 2005
Return-Path: <java-user-return-18120-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44895 invoked from network); 28 Dec 2005 13:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 13:13:05 -0000
Received: (qmail 32036 invoked by uid 500); 28 Dec 2005 13:12:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31987 invoked by uid 500); 28 Dec 2005 13:12:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31975 invoked by uid 99); 28 Dec 2005 13:12:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 05:12:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 05:12:57 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B7E4513E2005; Wed, 28 Dec 2005 08:12:36 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 624DB13E201A
	for <java-user@lucene.apache.org>; Wed, 28 Dec 2005 08:12:32 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <357325db0512271818y13771d59w73852cd2967db7b7@mail.gmail.com>
References: <357325db0512271818y13771d59w73852cd2967db7b7@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E34346D0-615A-447C-B02E-6309F788CD0E@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: filtering an IndexReader
Date: Wed, 28 Dec 2005 06:00:21 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 27, 2005, at 9:18 PM, Eric Schulte wrote:

> Good evening everyone,
>
> So, I apologize if this question has a simple answer (although I  
> hope it
> does). I am trying to apply a filter to an IndexReader, so that the  
> reader
> can only see documents that match the filter. The goal here is to  
> be able to
> implement the 'terms' and 'termDocs' methods, with the 'filter  
> approved'
> documents taken into consideration in putting together the stats.
>
> I don't believe the FilterIndexReader class can do this (If it can  
> I don't
> know how).
>
> Any ideas would be appreciated.
>
> To anyone on the general lucene mailing list sorry about the cross- 
> post.

Eric,

I've not done something like this myself, but I did a quick perusal  
of the source code and tracked it into how it is used.  There are a  
few subclasses of FilterIndexReader out there.  To do anything useful  
with FilterIndexReader you must subclass it and provide your own  
"filtering".

TestFilterIndexReader has some clues that might help you:

	<http://svn.apache.org/viewcvs.cgi/lucene/java/trunk/src/test/org/ 
apache/lucene/index/TestFilterIndexReader.java?view=markup>

I'm definitely interested in seeing how to go about implementing what  
you're after, so keep us posted.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 13:23:12 2005
Return-Path: <java-user-return-18121-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48807 invoked from network); 28 Dec 2005 13:23:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 13:23:11 -0000
Received: (qmail 48367 invoked by uid 500); 28 Dec 2005 13:23:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48341 invoked by uid 500); 28 Dec 2005 13:23:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48325 invoked by uid 99); 28 Dec 2005 13:23:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 05:23:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 05:23:04 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C277413E201A; Wed, 28 Dec 2005 08:22:42 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B014A13E2005
	for <java-user@lucene.apache.org>; Wed, 28 Dec 2005 08:22:38 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <20051228084438.78004.qmail@web36112.mail.mud.yahoo.com>
References: <20051228084438.78004.qmail@web36112.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <18FB0D78-0241-4E65-9B9A-55A0D8B132A7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Highlighter
Date: Wed, 28 Dec 2005 08:22:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The Highlighter class is not in the core of Lucene.  When 1.4.3 was  
released, the add-ons such as the Highlighter were in a separate CVS  
repository called "sandbox".  When we moved to Subversion we put it  
all together and it is now under a directory called contrib/highlighter.

To have a Highlighter compatible with Lucene 1.4.3 you will not be  
able to use the Subversion code though.  The easiest thing to do is  
get the JAR file that comes with the Lucene in Action free code  
download at http://www.lucenebook.com

	Erik


On Dec 28, 2005, at 3:44 AM, revati joshi wrote:

> Hello lucene members,
>                                        i hve tried indexing n  
> searching n it works properly.Now i want to use Highlighter class  
> in my search class for highlighting terms.But when i call this  
> class or import this class then this class is not interpreted by  
> java.As lucene1.4.3 has got all .class files in it,there no .class  
> file of Highlighter class.whether i hve to compile this class  
> specifically n use it in my search class or wht is the procedure  
> for implementing Highlighter class.Plz suggest  some solution for  
> this.
>
>
>
> 		
> ---------------------------------
>  Yahoo! DSL Something to write home about. Just $16.99/mo. or less


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 16:49:19 2005
Return-Path: <java-user-return-18122-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3861 invoked from network); 28 Dec 2005 16:49:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 16:49:19 -0000
Received: (qmail 96721 invoked by uid 500); 28 Dec 2005 16:49:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96700 invoked by uid 500); 28 Dec 2005 16:49:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96689 invoked by uid 99); 28 Dec 2005 16:49:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 08:49:13 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.18.25.230] (HELO mail.zooplus.de) (212.18.25.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 08:49:12 -0800
Received: from exchange2.home.zooplus.de (unknown [192.168.10.72])
	by mail.zooplus.de (Postfix) with ESMTP id 44D605768C
	for <java-user@lucene.apache.org>; Wed, 28 Dec 2005 17:48:50 +0100 (CET)
Received: by exchange2.home.zooplus.de with Internet Mail Service (5.5.2657.72)
	id <V3Q03JT7>; Wed, 28 Dec 2005 17:48:50 +0100
Message-ID: <10361639FF4CA04ABB30F54683E4FB8505667667@exchange2.home.zooplus.de>
From: Steven Pannell <steven.pannell@zooplus.com>
To: java-user@lucene.apache.org
Subject: Boolean Query
Date: Wed, 28 Dec 2005 17:48:50 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I want to create a boolean query like:

'book' AND ( 'fred' OR 'ginger')

Anyone know how I can do the above in a BooleanQuery.  I tried this:

but it does not work.

        TermQuery t1 = new TermQuery(new Term("type","book"));
        TermQuery t2 = new TermQuery(new Term("author","fred"));
        TermQuery t3 = new TermQuery(new Term("title","ginger"));

        BooleanQuery q = new BooleanQuery();
        q.add(t3,false,false);
        q.add(t2,false,false);
        q.add(t1,true,false);


thx.
Steve.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 17:04:29 2005
Return-Path: <java-user-return-18123-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9587 invoked from network); 28 Dec 2005 17:04:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 17:04:28 -0000
Received: (qmail 6257 invoked by uid 500); 28 Dec 2005 17:04:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6232 invoked by uid 500); 28 Dec 2005 17:04:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6221 invoked by uid 99); 28 Dec 2005 17:04:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 09:04:23 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.93.125.162] (HELO cpanel37.gzo.com) (69.93.125.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 09:04:23 -0800
Received: from [195.96.81.145] (helo=pb)
	by cpanel37.gzo.com with esmtpa (Exim 4.52)
	id 1EreiQ-0001kM-Fu
	for java-user@lucene.apache.org; Wed, 28 Dec 2005 11:03:55 -0600
From: "Pasha Bizhan" <lucene-list@lucenedotnet.com>
To: <java-user@lucene.apache.org>
Subject: RE: Boolean Query
Date: Wed, 28 Dec 2005 20:10:44 +0300
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <10361639FF4CA04ABB30F54683E4FB8505667667@exchange2.home.zooplus.de>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
thread-index: AcYLzqEQ/5Zixe3GQ7iczRTxC1azxQAAmojg
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - cpanel37.gzo.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - lucenedotnet.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20051228170423.8874410FB00E@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 

> From: Steven Pannell [mailto:steven.pannell@zooplus.com] 

> I want to create a boolean query like:
> 
> 'book' AND ( 'fred' OR 'ginger')
>
> 
>         TermQuery t1 = new TermQuery(new Term("type","book"));
>         TermQuery t2 = new TermQuery(new Term("author","fred"));
>         TermQuery t3 = new TermQuery(new Term("title","ginger"));
> 
>         BooleanQuery q1 = new BooleanQuery();
>         q1.add(t3,false,false);
>         q1.add(t2,false,false);

Q1 is (t2 OR t3) now.

BooleanQuery q2 = new BooleanQuery();
q2.add(t1,true,false);
q2.add(q1,true,false);

Q2 is (t1 AND Q1).

I guess.

Pasha Bizhan


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 22:27:33 2005
Return-Path: <java-user-return-18124-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77069 invoked from network); 28 Dec 2005 22:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 22:27:33 -0000
Received: (qmail 62265 invoked by uid 500); 28 Dec 2005 22:27:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62173 invoked by uid 500); 28 Dec 2005 22:27:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62162 invoked by uid 99); 28 Dec 2005 22:27:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 14:27:28 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.47] (HELO mta07-winn.ispmail.ntl.com) (81.103.221.47)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 14:27:27 -0800
Received: from aamta09-winn.ispmail.ntl.com ([81.103.221.35])
          by mta07-winn.ispmail.ntl.com with ESMTP
          id <20051228222705.FHYM21883.mta07-winn.ispmail.ntl.com@aamta09-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>;
          Wed, 28 Dec 2005 22:27:05 +0000
Received: from jhi ([81.98.13.34]) by aamta09-winn.ispmail.ntl.com
          with SMTP
          id <20051228222705.UZVV13162.aamta09-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>;
          Wed, 28 Dec 2005 22:27:05 +0000
Message-ID: <003801c60bfd$d4ebc350$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <20051228170423.8874410FB00E@asf.osuosl.org>
Subject: (lucene 1.4.*) Field.Text = (lucene repository) Field.TermVector
Date: Wed, 28 Dec 2005 22:27:03 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, i have recently updated to the latest version of lucene in the source 
repository, the enclosed classes (field types) in Field have been 
depreciated, is the old Field.Text now Field.TermVector where it is 
analyzed, indexed and stored?

thanks,
_gk 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 28 23:53:11 2005
Return-Path: <java-user-return-18125-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4631 invoked from network); 28 Dec 2005 23:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Dec 2005 23:53:11 -0000
Received: (qmail 61825 invoked by uid 500); 28 Dec 2005 23:53:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60792 invoked by uid 500); 28 Dec 2005 23:53:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60780 invoked by uid 99); 28 Dec 2005 23:53:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 15:53:05 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 15:53:04 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9142713E2005; Wed, 28 Dec 2005 18:52:43 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 0AC2E13E2005
	for <java-user@lucene.apache.org>; Wed, 28 Dec 2005 18:52:40 -0500 (EST)
In-Reply-To: <003801c60bfd$d4ebc350$b900a8c0@jhi>
References: <20051228170423.8874410FB00E@asf.osuosl.org> <003801c60bfd$d4ebc350$b900a8c0@jhi>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5F8F27D6-581E-44B5-A738-1BB8D7733904@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: (lucene 1.4.*) Field.Text = (lucene repository) Field.TermVector
Date: Wed, 28 Dec 2005 18:52:38 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 28, 2005, at 5:27 PM, gekkokid wrote:

> Hi, i have recently updated to the latest version of lucene in the  
> source repository, the enclosed classes (field types) in Field have  
> been depreciated, is the old Field.Text now Field.TermVector where  
> it is analyzed, indexed and stored?

Your best bet is to generate the javadocs (ant javadocs), or peruse  
the source code, and see the comments for the @deprecated  
demarcations.  For example, for Field.Text, it says this:

   @deprecated use {@link #Field(String, String, Field.Store,  
Field.Index)
     Field(name, value, Field.Store.YES, Field.Index.TOKENIZED)} instead


Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 07:19:30 2005
Return-Path: <java-user-return-18126-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33326 invoked from network); 29 Dec 2005 07:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 07:19:30 -0000
Received: (qmail 50672 invoked by uid 500); 29 Dec 2005 07:19:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50458 invoked by uid 500); 29 Dec 2005 07:19:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50447 invoked by uid 99); 29 Dec 2005 07:19:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 23:19:22 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [81.103.221.48] (HELO mta08-winn.ispmail.ntl.com) (81.103.221.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 28 Dec 2005 23:19:21 -0800
Received: from aamta09-winn.ispmail.ntl.com ([81.103.221.35])
          by mta08-winn.ispmail.ntl.com with ESMTP
          id <20051229071859.KJBH17804.mta08-winn.ispmail.ntl.com@aamta09-winn.ispmail.ntl.com>
          for <java-user@lucene.apache.org>;
          Thu, 29 Dec 2005 07:18:59 +0000
Received: from jhi ([81.98.13.34]) by aamta09-winn.ispmail.ntl.com
          with SMTP
          id <20051229071859.WRYW13162.aamta09-winn.ispmail.ntl.com@jhi>
          for <java-user@lucene.apache.org>;
          Thu, 29 Dec 2005 07:18:59 +0000
Message-ID: <000601c60c48$2389cd50$b900a8c0@jhi>
From: "gekkokid" <me@gekkokid.org.uk>
To: <java-user@lucene.apache.org>
References: <20051228170423.8874410FB00E@asf.osuosl.org> <003801c60bfd$d4ebc350$b900a8c0@jhi> <5F8F27D6-581E-44B5-A738-1BB8D7733904@ehatchersolutions.com>
Subject: Re: (lucene 1.4.*) Field.Text = (lucene repository) Field.TermVector
Date: Thu, 29 Dec 2005 07:18:57 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

thank you

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: <java-user@lucene.apache.org>
Sent: Wednesday, December 28, 2005 11:52 PM
Subject: Re: (lucene 1.4.*) Field.Text = (lucene repository) 
Field.TermVector


>
> On Dec 28, 2005, at 5:27 PM, gekkokid wrote:
>
>> Hi, i have recently updated to the latest version of lucene in the 
>> source repository, the enclosed classes (field types) in Field have  been 
>> depreciated, is the old Field.Text now Field.TermVector where  it is 
>> analyzed, indexed and stored?
>
> Your best bet is to generate the javadocs (ant javadocs), or peruse  the 
> source code, and see the comments for the @deprecated  demarcations.  For 
> example, for Field.Text, it says this:
>
>   @deprecated use {@link #Field(String, String, Field.Store,  Field.Index)
>     Field(name, value, Field.Store.YES, Field.Index.TOKENIZED)} instead
>
>
> Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 10:17:34 2005
Return-Path: <java-user-return-18127-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92788 invoked from network); 29 Dec 2005 10:17:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 10:17:34 -0000
Received: (qmail 85078 invoked by uid 500); 29 Dec 2005 10:17:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84971 invoked by uid 500); 29 Dec 2005 10:17:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 30181 invoked by uid 500); 29 Dec 2005 06:41:18 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=HTML_00_10,HTML_MESSAGE,MISSING_HEADERS,SPF_PASS,TO_CC_NONE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of shyam.bhaskaran@gmail.com designates 64.233.184.196 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:subject:mime-version:content-type;
        b=f6YjtNHBvyOc4I1ZeTGREwLAgkbKFCWDch3i3f395NxVAsQ+dUYKfkshIvRr26K+CLj+HIa8GgtDKZTM7OZlDVO2trdcz5QgJ+Szl0jjc6aWemAriiIp83I71E0hwuRmkmAbpXjbFQ73rRI/n1nUrfjD1x9d058cCc88mFwZLIY=
Message-ID: <3beac0c40512282240h48f80d3bl89916c0a89e4272d@mail.gmail.com>
Date: Thu, 29 Dec 2005 12:10:57 +0530
From: Shyam Bhaskaran <shyam.bhaskaran@gmail.com>
Subject: Lucene parsing for PDF
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_61263_29822124.1135838457161"
X-Virus-Checked: Checked by ClamAV on apache.org
To: undisclosed-recipients:;
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_61263_29822124.1135838457161
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi,

I am working on a search project using Lucene and currently I am working on
parsing PDF documents. I was successful in implementing my parser using
Lucene and PDFBox. I have a doubt on how to exclude or (maybe delete) pages
from the index. I am not sure how to do this.. I mean when exactly it has t=
o
be done.. Looking at the Lucene book it tells about removing documents usin=
g
Lucene by id or by term, but I was not successful in implementing this.. Ca=
n
anyone help me with this...

Regards,
Shyam

------=_Part_61263_29822124.1135838457161--

From java-user-return-18128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 10:21:54 2005
Return-Path: <java-user-return-18128-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94111 invoked from network); 29 Dec 2005 10:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 10:21:54 -0000
Received: (qmail 91077 invoked by uid 500); 29 Dec 2005 10:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90134 invoked by uid 500); 29 Dec 2005 10:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90123 invoked by uid 99); 29 Dec 2005 10:21:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 02:21:48 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 02:21:48 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3661E13E201D; Thu, 29 Dec 2005 05:21:26 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 4F0C813E2005
	for <java-user@lucene.apache.org>; Thu, 29 Dec 2005 05:21:22 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <3beac0c40512282240h48f80d3bl89916c0a89e4272d@mail.gmail.com>
References: <3beac0c40512282240h48f80d3bl89916c0a89e4272d@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6680BFDE-AF3F-421A-B61F-E429663573A7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene parsing for PDF
Date: Thu, 29 Dec 2005 05:21:20 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Shyam - I moderated your message through, so please subscribe to the  
list to send to it in the future.

Please provide us with some details - a standalone RAMDirectory-using  
JUnit TestCase is the most ideal way to share an issue like this and  
have someone else take a look at it.  And frequently the act of  
distilling an issue down to a test case points out the error being  
made :)

	Erik


On Dec 29, 2005, at 1:40 AM, Shyam Bhaskaran wrote:

> Hi,
>
> I am working on a search project using Lucene and currently I am  
> working on
> parsing PDF documents. I was successful in implementing my parser  
> using
> Lucene and PDFBox. I have a doubt on how to exclude or (maybe  
> delete) pages
> from the index. I am not sure how to do this.. I mean when exactly  
> it has to
> be done.. Looking at the Lucene book it tells about removing  
> documents using
> Lucene by id or by term, but I was not successful in implementing  
> this.. Can
> anyone help me with this...
>
> Regards,
> Shyam


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 12:02:26 2005
Return-Path: <java-user-return-18129-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23174 invoked from network); 29 Dec 2005 12:02:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 12:02:26 -0000
Received: (qmail 64988 invoked by uid 500); 29 Dec 2005 12:02:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64674 invoked by uid 500); 29 Dec 2005 12:02:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64663 invoked by uid 99); 29 Dec 2005 12:02:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 04:02:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [195.137.212.28] (HELO basicbox6.server-home.net) (195.137.212.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 04:02:18 -0800
Received: from sleipnir2 (dslb-084-061-027-181.pools.arcor-ip.net [84.61.27.181])
	by basicbox6.server-home.net (Postfix) with ESMTP id DC4C07183D8
	for <java-user@lucene.apache.org>; Thu, 29 Dec 2005 13:01:54 +0100 (CET)
From: "Klaus" <klaus@vommond.de>
To: <java-user@lucene.apache.org>
Subject: AW: Lucene parsing for PDF
Date: Thu, 29 Dec 2005 13:01:54 +0100
Message-ID: <000b01c60c6f$a8fa0aa0$6402a8c0@sleipnir2>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 11
Thread-Index: AcYMYRddW0Z/weZmQ4Sje27Li0TRUQADjTYQ
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
In-Reply-To: <3beac0c40512282240h48f80d3bl89916c0a89e4272d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,

I think the easiest way is ro exclude the pages while you are parsing the
pdf document. So you will provide just the necessary pages to lucene.
Another solution is to create for each site an own document, this should
hafe a field "pagenumber" or, und you can delete the document from the
index. 

Peace


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 12:53:19 2005
Return-Path: <java-user-return-18130-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41473 invoked from network); 29 Dec 2005 12:53:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 12:53:19 -0000
Received: (qmail 4042 invoked by uid 500); 29 Dec 2005 12:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4011 invoked by uid 500); 29 Dec 2005 12:53:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4000 invoked by uid 99); 29 Dec 2005 12:53:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 04:53:14 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.186] (HELO moutng.kundenserver.de) (212.227.126.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 04:53:13 -0800
Received: from [80.184.181.4] (helo=[192.168.2.2])
	by mrelayeu.kundenserver.de (node=mrelayeu6) with ESMTP (Nemesis),
	id 0ML29c-1ErxH12q0c-0002xH; Thu, 29 Dec 2005 13:52:51 +0100
Message-ID: <43B3D9A4.6060500@artentis.com>
Date: Thu, 29 Dec 2005 13:42:12 +0100
From: Gaston <gasi@artentis.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: QueryParser over multiple fields
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:e856510009f74cf6d851f8e7132753ec
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hallo,


in my index every document consistsof multiple fields like 
url,contents,description etc.I want to search for documents in the url 
and the contents field.
My problem is that the constructor of QueryParser only provide one field 
like "Query query=QueryParser.parse("query",field1,analyzer);"
Is there an oppurtinity to construct an query Object like "Query 
query=QueryParser.parse("query",field1,field2,analyzer);" to provide a 
search over field1 and field2 ?
I solved this problem in a very unelegant way I think because I 
introduced two searching procedures in my application, one for field1 
and the another one for field2. But this is very bad for the performance 
because the application has to search two times.

I am glad about every suggestion


Greetings


Gaston


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 13:28:24 2005
Return-Path: <java-user-return-18131-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52776 invoked from network); 29 Dec 2005 13:28:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 13:28:24 -0000
Received: (qmail 31622 invoked by uid 500); 29 Dec 2005 13:28:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30631 invoked by uid 500); 29 Dec 2005 13:28:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30620 invoked by uid 99); 29 Dec 2005 13:28:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 05:28:19 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 05:28:18 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B428F13E201D; Thu, 29 Dec 2005 08:27:57 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 5AB4513E2005
	for <java-user@lucene.apache.org>; Thu, 29 Dec 2005 08:27:54 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43B3D9A4.6060500@artentis.com>
References: <43B3D9A4.6060500@artentis.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7E6FAC64-BBCA-4E02-BD1E-B41018418013@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser over multiple fields
Date: Thu, 29 Dec 2005 08:27:53 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 29, 2005, at 7:42 AM, Gaston wrote:
> in my index every document consistsof multiple fields like  
> url,contents,description etc.I want to search for documents in the  
> url and the contents field.
> My problem is that the constructor of QueryParser only provide one  
> field like "Query query=QueryParser.parse("query",field1,analyzer);"
> Is there an oppurtinity to construct an query Object like "Query  
> query=QueryParser.parse("query",field1,field2,analyzer);" to  
> provide a search over field1 and field2 ?
> I solved this problem in a very unelegant way I think because I  
> introduced two searching procedures in my application, one for  
> field1 and the another one for field2. But this is very bad for the  
> performance because the application has to search two times.

Two options - MultiFieldQueryParser or building an aggregate single  
field to search.  I use the aggregate field option, which entails  
building an additional field for each document, I call it "contents",  
and index _all_ of the searchable text into that field.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 13:33:18 2005
Return-Path: <java-user-return-18132-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55060 invoked from network); 29 Dec 2005 13:33:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 13:33:17 -0000
Received: (qmail 35238 invoked by uid 500); 29 Dec 2005 13:33:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35208 invoked by uid 500); 29 Dec 2005 13:33:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35196 invoked by uid 99); 29 Dec 2005 13:33:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 05:33:12 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [83.247.21.91] (HELO wis.nl) (83.247.21.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 05:33:11 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: QueryParser over multiple fields
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Thu, 29 Dec 2005 14:32:12 +0100
Message-ID: <50CA25BD6EEA954FA592C097399942E303081F53@CM1.wis.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser over multiple fields
Thread-Index: AcYMdsoxDeFAnnMLTo+jvi/nCJ5BIQABNqHA
From: "Daan de Wit" <d.de.wit@wis.nl>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Gaston,

Have a look at MultiFieldQueryParser.

Greetings,
Daan

-----Original Message-----
From: Gaston [mailto:gasi@artentis.com]=20
Sent: Thursday, December 29, 2005 13:42
To: java-user@lucene.apache.org
Subject: QueryParser over multiple fields

Hallo,


in my index every document consistsof multiple fields like=20
url,contents,description etc.I want to search for documents in the url=20
and the contents field.
My problem is that the constructor of QueryParser only provide one field

like "Query query=3DQueryParser.parse("query",field1,analyzer);"
Is there an oppurtinity to construct an query Object like "Query=20
query=3DQueryParser.parse("query",field1,field2,analyzer);" to provide a =

search over field1 and field2 ?
I solved this problem in a very unelegant way I think because I=20
introduced two searching procedures in my application, one for field1=20
and the another one for field2. But this is very bad for the performance

because the application has to search two times.

I am glad about every suggestion


Greetings


Gaston


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 13:50:48 2005
Return-Path: <java-user-return-18133-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62281 invoked from network); 29 Dec 2005 13:50:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 13:50:48 -0000
Received: (qmail 50486 invoked by uid 500); 29 Dec 2005 13:50:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50466 invoked by uid 500); 29 Dec 2005 13:50:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50455 invoked by uid 99); 29 Dec 2005 13:50:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 05:50:41 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.227.126.183] (HELO moutng.kundenserver.de) (212.227.126.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 05:50:41 -0800
Received: from [80.184.181.4] (helo=[192.168.2.2])
	by mrelayeu.kundenserver.de (node=mrelayeu3) with ESMTP (Nemesis),
	id 0MKxQS-1EryAd3Li2-0000b4; Thu, 29 Dec 2005 14:50:20 +0100
Message-ID: <43B3E71C.5040702@artentis.com>
Date: Thu, 29 Dec 2005 14:39:40 +0100
From: Gaston <gasi@artentis.com>
User-Agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: QueryParser over multiple fields
References: <50CA25BD6EEA954FA592C097399942E303081F53@CM1.wis.local>
In-Reply-To: <50CA25BD6EEA954FA592C097399942E303081F53@CM1.wis.local>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:e856510009f74cf6d851f8e7132753ec
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hallo Erik and Daan,

thank you for the help. MultFieldQueryParser is described in chapter 5, 
I was searching in chapter 3. Sorry.


Greetings and best wishes for the New Year 2006!

Gaston


Daan de Wit schrieb:

>Hi Gaston,
>
>Have a look at MultiFieldQueryParser.
>
>Greetings,
>Daan
>
>-----Original Message-----
>From: Gaston [mailto:gasi@artentis.com] 
>Sent: Thursday, December 29, 2005 13:42
>To: java-user@lucene.apache.org
>Subject: QueryParser over multiple fields
>
>Hallo,
>
>
>in my index every document consistsof multiple fields like 
>url,contents,description etc.I want to search for documents in the url 
>and the contents field.
>My problem is that the constructor of QueryParser only provide one field
>
>like "Query query=QueryParser.parse("query",field1,analyzer);"
>Is there an oppurtinity to construct an query Object like "Query 
>query=QueryParser.parse("query",field1,field2,analyzer);" to provide a 
>search over field1 and field2 ?
>I solved this problem in a very unelegant way I think because I 
>introduced two searching procedures in my application, one for field1 
>and the another one for field2. But this is very bad for the performance
>
>because the application has to search two times.
>
>I am glad about every suggestion
>
>
>Greetings
>
>
>Gaston
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 14:51:09 2005
Return-Path: <java-user-return-18134-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92359 invoked from network); 29 Dec 2005 14:51:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 14:51:08 -0000
Received: (qmail 15712 invoked by uid 500); 29 Dec 2005 14:51:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15462 invoked by uid 500); 29 Dec 2005 14:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15451 invoked by uid 99); 29 Dec 2005 14:51:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 06:51:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.18.25.230] (HELO mail.zooplus.de) (212.18.25.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 06:51:01 -0800
Received: from exchange2.home.zooplus.de (unknown [192.168.10.72])
	by mail.zooplus.de (Postfix) with ESMTP id A3A36576B6
	for <java-user@lucene.apache.org>; Thu, 29 Dec 2005 15:50:40 +0100 (CET)
Received: by exchange2.home.zooplus.de with Internet Mail Service (5.5.2657.72)
	id <V3Q034SF>; Thu, 29 Dec 2005 15:50:40 +0100
Message-ID: <10361639FF4CA04ABB30F54683E4FB850566766B@exchange2.home.zooplus.de>
From: Steven Pannell <steven.pannell@zooplus.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: QueryParser over multiple fields
Date: Thu, 29 Dec 2005 15:50:38 +0100
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: text/plain;
	charset="iso-8859-15"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

You can also do it like this:

QueryParser.parse("(summary:DOG OR title:DOG)", "title", getAnalyzer());

QueryParser.parse("(summary:DOG AND title:DOG)", "title", getAnalyzer());

The "title" is the default column, so no need to reference in the
queryString eg:

QueryParser.parse("(summary:DOG OR DOG)", "title", getAnalyzer());

Steve.


-----Original Message-----
From: Gaston [mailto:gasi@artentis.com]
Sent: 29 December 2005 13:42
To: java-user@lucene.apache.org
Subject: QueryParser over multiple fields


Hallo,


in my index every document consistsof multiple fields like 
url,contents,description etc.I want to search for documents in the url 
and the contents field.
My problem is that the constructor of QueryParser only provide one field 
like "Query query=QueryParser.parse("query",field1,analyzer);"
Is there an oppurtinity to construct an query Object like "Query 
query=QueryParser.parse("query",field1,field2,analyzer);" to provide a 
search over field1 and field2 ?
I solved this problem in a very unelegant way I think because I 
introduced two searching procedures in my application, one for field1 
and the another one for field2. But this is very bad for the performance 
because the application has to search two times.

I am glad about every suggestion


Greetings


Gaston


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 14:52:57 2005
Return-Path: <java-user-return-18135-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92755 invoked from network); 29 Dec 2005 14:52:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 14:52:57 -0000
Received: (qmail 16899 invoked by uid 500); 29 Dec 2005 14:52:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16880 invoked by uid 500); 29 Dec 2005 14:52:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 94867 invoked by uid 99); 29 Dec 2005 14:31:29 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
From: euw@cologne-systems.de
X-Authentication-Warning: mail.cologne-systems.de: apache set sender to euw@localhost using -f
Message-ID: <46804.194.8.219.27.1135866666.squirrel@194.8.219.28>
In-Reply-To: <7E6FAC64-BBCA-4E02-BD1E-B41018418013@ehatchersolutions.com>
References: <43B3D9A4.6060500@artentis.com>
    <7E6FAC64-BBCA-4E02-BD1E-B41018418013@ehatchersolutions.com>
Date: Thu, 29 Dec 2005 15:31:06 +0100 (CET)
Subject: Re: QueryParser over multiple fields
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4-2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


>
> Two options - MultiFieldQueryParser or building an aggregate single
> field to search.  I use the aggregate field option, which entails
> building an additional field for each document, I call it "contents",
> and index _all_ of the searchable text into that field.
>
> 	Erik


How about a BooleanQuery? I have documents with text, headlines, and
keywords, each needing a different analyzer and boost factor. I'm
experimenting with PerFieldAnalyzerWrapper and KeywordAnalyzer (as
described in your book), constructing the Query from a
QueryParser.parse(query, field, analyzer) query on each of the fields,
connected as a BooleanQuery. Like this, i can use a different boost factor
and a different analyzer for each field, and tune the whole thing quite
easily. The drawback is that analyzer and query construction look a little
cumbersome.

As i said, i've been only experimenting with this. I don't know if this
would work in production code, but i don't see why not. What's your take
on this?

Ernst-Udo Wallenborn



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 15:26:05 2005
Return-Path: <java-user-return-18136-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4935 invoked from network); 29 Dec 2005 15:26:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 15:26:05 -0000
Received: (qmail 51070 invoked by uid 500); 29 Dec 2005 15:26:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50541 invoked by uid 500); 29 Dec 2005 15:25:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50530 invoked by uid 99); 29 Dec 2005 15:25:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 07:25:58 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 07:25:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id CB75113E201D; Thu, 29 Dec 2005 10:25:35 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B347F13E2005
	for <java-user@lucene.apache.org>; Thu, 29 Dec 2005 10:25:31 -0500 (EST)
In-Reply-To: <46804.194.8.219.27.1135866666.squirrel@194.8.219.28>
References: <43B3D9A4.6060500@artentis.com> <7E6FAC64-BBCA-4E02-BD1E-B41018418013@ehatchersolutions.com> <46804.194.8.219.27.1135866666.squirrel@194.8.219.28>
Mime-Version: 1.0 (Apple Message framework v746.2)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6B2553C3-5AC5-4E52-90FA-70C06CDCCF91@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser over multiple fields
Date: Thu, 29 Dec 2005 10:25:30 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Dec 29, 2005, at 9:31 AM, euw@cologne-systems.de wrote:
>>
>> Two options - MultiFieldQueryParser or building an aggregate single
>> field to search.  I use the aggregate field option, which entails
>> building an additional field for each document, I call it "contents",
>> and index _all_ of the searchable text into that field.
>>
>> 	Erik
>
>
> How about a BooleanQuery? I have documents with text, headlines, and
> keywords, each needing a different analyzer and boost factor. I'm
> experimenting with PerFieldAnalyzerWrapper and KeywordAnalyzer (as
> described in your book), constructing the Query from a
> QueryParser.parse(query, field, analyzer) query on each of the fields,
> connected as a BooleanQuery. Like this, i can use a different boost  
> factor
> and a different analyzer for each field, and tune the whole thing  
> quite
> easily. The drawback is that analyzer and query construction look a  
> little
> cumbersome.
>
> As i said, i've been only experimenting with this. I don't know if  
> this
> would work in production code, but i don't see why not. What's your  
> take
> on this?

That's a perfectly good approach as well.  I didn't mean to imply  
that there were only "two options", just that the two I suggested  
were the most commonly used ones.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 29 21:52:14 2005
Return-Path: <java-user-return-18137-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69852 invoked from network); 29 Dec 2005 21:52:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Dec 2005 21:52:14 -0000
Received: (qmail 16375 invoked by uid 500); 29 Dec 2005 21:52:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15525 invoked by uid 500); 29 Dec 2005 21:52:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15513 invoked by uid 99); 29 Dec 2005 21:52:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 13:52:09 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 29 Dec 2005 13:52:08 -0800
Received: from ehost011-3.exch011.intermedia.net ([64.78.21.96]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 29 Dec 2005 13:51:47 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C60CC2.10D4F357"
Subject: Correlating best fragments back to native documents - ?
Date: Thu, 29 Dec 2005 13:51:47 -0800
Message-ID: <FAB00A8DC59FAB42B13C2B3B0F687701E7CBC0@ehost011-3.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Correlating best fragments back to native documents - ?
thread-index: AcYMwhDNHYI47cqwSnirTk1o+ER9GA==
From: "Dmitry Goldenberg" <dmitry.goldenberg@weblayers.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 29 Dec 2005 21:51:47.0811 (UTC) FILETIME=[112EDB30:01C60CC2]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60CC2.10D4F357
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,
=20
I was wondering if anyone has seen or implemented the kind of solution =
where the best fragments generated by Lucene's Highlighter, are =
correlated back to the native documents such as PDF or MS Word.
=20
Basically, I want to be able to use native (or any other) API's to =
highlight Lucene's findings in the actual documents.
=20
I am probably "all wet" but if this makes any sense, please give me a =
shout.
=20
Thanks,
- Dmitry

------_=_NextPart_001_01C60CC2.10D4F357--

From java-user-return-18138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 30 00:37:16 2005
Return-Path: <java-user-return-18138-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23131 invoked from network); 30 Dec 2005 00:37:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Dec 2005 00:37:15 -0000
Received: (qmail 37961 invoked by uid 500); 30 Dec 2005 00:37:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37936 invoked by uid 500); 30 Dec 2005 00:37:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 38393 invoked by uid 99); 29 Dec 2005 20:33:21 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
From: euw@cologne-systems.de
X-Authentication-Warning: mail.cologne-systems.de: apache set sender to euw@localhost using -f
Message-ID: <47143.194.8.219.27.1135888379.squirrel@194.8.219.28>
In-Reply-To: <6B2553C3-5AC5-4E52-90FA-70C06CDCCF91@ehatchersolutions.com>
References: <43B3D9A4.6060500@artentis.com>
    <7E6FAC64-BBCA-4E02-BD1E-B41018418013@ehatchersolutions.com>
    <46804.194.8.219.27.1135866666.squirrel@194.8.219.28>
    <6B2553C3-5AC5-4E52-90FA-70C06CDCCF91@ehatchersolutions.com>
Date: Thu, 29 Dec 2005 21:32:59 +0100 (CET)
Subject: Re: QueryParser over multiple fields
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4-2
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>

>
> That's a perfectly good approach as well.  I didn't mean to imply
> that there were only "two options", just that the two I suggested
> were the most commonly used ones.
>
> 	Erik
>


Ah, for a moment i thought i had overlooked a "canonical" solution, i'm
quite new to lucene. Thanks.

BTW, Lucene in Action is a great book.

Ernst-Udo



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 30 17:05:08 2005
Return-Path: <java-user-return-18139-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68872 invoked from network); 30 Dec 2005 17:05:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Dec 2005 17:05:08 -0000
Received: (qmail 36355 invoked by uid 500); 30 Dec 2005 17:05:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36323 invoked by uid 500); 30 Dec 2005 17:05:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36307 invoked by uid 99); 30 Dec 2005 17:05:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Dec 2005 09:05:02 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.41] (HELO mout.perfora.net) (217.160.230.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Dec 2005 09:05:01 -0800
Received: from [59.93.77.130] (helo=[59.93.77.130])
	by mrelay.perfora.net (node=mrelayus1) with ESMTP (Nemesis),
	id 0MKp2t-1EsNgD0w0h-0003Zk; Fri, 30 Dec 2005 12:04:39 -0500
Message-ID: <43B56809.3010904@insideview.com>
Date: Fri, 30 Dec 2005 22:32:01 +0530
From: Harini Raghavan <harini.raghavan@insideview.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Query Scoring
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have a requirement to highlight search keywords in the results and
display the matching fragment of the text with the results. I am using
the Hits highlighting mentioned in Lucene in Action.

Here is the search query(BooleanQuery) I am passing to the IndexSearcher
and QueryScorer:
+DocumentType:news
+(CompanyId:10 CompanyId:20 CompanyId:30 CompanyId:40)
+FilingDate:[20041201 TO 20051201]
+(Content:"cost saving" Content:"cost savings" Content:outsource
Content:outsources Content:downsize Content:downsizes
Content:restructuring Content:restructure)

I do not quite understand how the query scoring actually works & how 
Inverse Document Frequency(IDF) calculations are useful?  Can
someone shed some light on this using the given query as an example?

Thanks,
Harini


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 31 12:40:49 2005
Return-Path: <java-user-return-18140-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9754 invoked from network); 31 Dec 2005 12:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Dec 2005 12:40:48 -0000
Received: (qmail 61755 invoked by uid 500); 31 Dec 2005 12:40:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61705 invoked by uid 500); 31 Dec 2005 12:40:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61694 invoked by uid 99); 31 Dec 2005 12:40:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Dec 2005 04:40:43 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Dec 2005 04:40:42 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 224DE13E201A; Sat, 31 Dec 2005 07:40:21 -0500 (EST)
Received: from [172.16.1.101] (va-71-48-129-167.dhcp.sprint-hsd.net [71.48.129.167])
	by ehatchersolutions.com (Postfix) with ESMTP id 83A0C13E2005
	for <java-user@lucene.apache.org>; Sat, 31 Dec 2005 07:40:17 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v746.2)
In-Reply-To: <43B56809.3010904@insideview.com>
References: <43B56809.3010904@insideview.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7A43A249-FC36-4950-A4BF-84B5D5F3FEAA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query Scoring
Date: Sat, 31 Dec 2005 07:40:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.746.2)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Harini,

I'm not sure I understand what you're asking.  IDF doesn't factor  
into highlighting.

IDF calculations are useful in scoring documents during a search,  
such that the most relevant documents are returned, but again this is  
unrelated to highlighting.

Could you elaborate on what you're after?

	Erik

On Dec 30, 2005, at 12:02 PM, Harini Raghavan wrote:

> Hi,
>
> I have a requirement to highlight search keywords in the results and
> display the matching fragment of the text with the results. I am using
> the Hits highlighting mentioned in Lucene in Action.
>
> Here is the search query(BooleanQuery) I am passing to the  
> IndexSearcher
> and QueryScorer:
> +DocumentType:news
> +(CompanyId:10 CompanyId:20 CompanyId:30 CompanyId:40)
> +FilingDate:[20041201 TO 20051201]
> +(Content:"cost saving" Content:"cost savings" Content:outsource
> Content:outsources Content:downsize Content:downsizes
> Content:restructuring Content:restructure)
>
> I do not quite understand how the query scoring actually works &  
> how Inverse Document Frequency(IDF) calculations are useful?  Can
> someone shed some light on this using the given query as an example?
>
> Thanks,
> Harini
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 31 13:11:58 2005
Return-Path: <java-user-return-18141-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20752 invoked from network); 31 Dec 2005 13:11:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Dec 2005 13:11:58 -0000
Received: (qmail 78653 invoked by uid 500); 31 Dec 2005 13:11:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78626 invoked by uid 500); 31 Dec 2005 13:11:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78614 invoked by uid 99); 31 Dec 2005 13:11:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Dec 2005 05:11:51 -0800
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.34] (HELO smtp003.mail.ukl.yahoo.com) (217.12.11.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 31 Dec 2005 05:11:50 -0800
Received: (qmail 67605 invoked from network); 31 Dec 2005 13:11:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=PG33+rtCkyBoLPd/kgXmlOCyp9K0ShN3EgJVZBxZPRbmlVFYIGa/mrpIrsvjDrecLAcxPEE88cFQqsfyqnn/q3w9xl7pxL57ogVkpwN4ByGyysC5lPLXofJz1xxF9Q49OT/+C+oN4ej8hgxzTMrrMcDTTS7fOhs0yZOc9s0ekuw=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp003.mail.ukl.yahoo.com with SMTP; 31 Dec 2005 13:11:29 -0000
Message-ID: <43B6837C.5030901@yahoo.co.uk>
Date: Sat, 31 Dec 2005 13:11:24 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Query Scoring
References: <43B56809.3010904@insideview.com> <7A43A249-FC36-4950-A4BF-84B5D5F3FEAA@ehatchersolutions.com>
In-Reply-To: <7A43A249-FC36-4950-A4BF-84B5D5F3FEAA@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sorry to contradict, Erik, but the Highlighter's QueryScorer will make 
use of IDF, given a reader, in order to better prioritise which are the 
"best" bits of a document.
However, In the particular example given, the criteria includes several 
non-text fields which are not useful for IDF and general scoring 
purposes - these are perhaps better expressed using a filter of some 
form. Otherwise, why should the scarcity of a particular date in the 
given range boost one matching document above others? These numeric-type 
fields are simply mandatory boolean "hygiene factors" and  should 
ideally play no part in highlight selection or results ordering in 
general based on their IDF or TF.

Cheers,
Mark


Erik Hatcher wrote:

> Harini,
>
> I'm not sure I understand what you're asking.  IDF doesn't factor  
> into highlighting.
>
> IDF calculations are useful in scoring documents during a search,  
> such that the most relevant documents are returned, but again this is  
> unrelated to highlighting.
>
> Could you elaborate on what you're after?
>
>     Erik
>
> On Dec 30, 2005, at 12:02 PM, Harini Raghavan wrote:
>
>> Hi,
>>
>> I have a requirement to highlight search keywords in the results and
>> display the matching fragment of the text with the results. I am using
>> the Hits highlighting mentioned in Lucene in Action.
>>
>> Here is the search query(BooleanQuery) I am passing to the  
>> IndexSearcher
>> and QueryScorer:
>> +DocumentType:news
>> +(CompanyId:10 CompanyId:20 CompanyId:30 CompanyId:40)
>> +FilingDate:[20041201 TO 20051201]
>> +(Content:"cost saving" Content:"cost savings" Content:outsource
>> Content:outsources Content:downsize Content:downsizes
>> Content:restructuring Content:restructure)
>>
>> I do not quite understand how the query scoring actually works &  how 
>> Inverse Document Frequency(IDF) calculations are useful?  Can
>> someone shed some light on this using the given query as an example?
>>
>> Thanks,
>> Harini
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>



		
___________________________________________________________ 
NEW Yahoo! Cars - sell your car and browse thousands of new and used cars online! http://uk.cars.yahoo.com/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-18142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 31 15:21:41 2005
Return-Path: <java-user-return-18142-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52953 invoked from network); 31 Dec 2005 15:21:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Dec 2005 15:21:40 -0000
Received: (qmail 33221 invoked by uid 500); 31 Dec 2005 15:21:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33168 invoked by uid 500); 31 Dec 2005 15:21:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33155 invoked by uid 99); 31 Dec 2005 15:21:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Dec 2005 07:21:35 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [63.240.6.46] (HELO mail.mi8.com) (63.240.6.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Dec 2005 07:21:34 -0800
Received: from 172.16.1.24 by mail.mi8.com with ESMTP (- Welcome to Mi8
 Corporation www.Mi8.com (D2)); Sat, 31 Dec 2005 10:21:01 -0500
X-Server-Uuid: 7829E76E-BB9E-4995-8473-3C0929DF7DD1
Received: from MI8NYCMAIL07.Mi8.com ([172.16.1.162]) by
 d01smtp03.Mi8.com with Microsoft SMTPSVC(6.0.3790.1830); Sat, 31 Dec
 2005 10:21:01 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: Problems with sandbox - can't find
 org.apache.lucene.store.IndexInput
Date: Sat, 31 Dec 2005 10:21:03 -0500
Message-ID: <3AF76382C31760418AF0FBFD84F7140308B3E581@MI8NYCMAIL07.Mi8.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problems with sandbox - can't find
 org.apache.lucene.store.IndexInput
Thread-Index: AcYOHdAQUuSGZz8ZRpCLsrbXFbjQaQ==
From: "Colin Young" <Colin.Young@tembizi.com>
To: java-user@lucene.apache.org
X-OriginalArrivalTime: 31 Dec 2005 15:21:01.0684 (UTC)
 FILETIME=[CF074B40:01C60E1D]
X-WSS-ID: 6FA87E573TO4207384-01-01
Content-Type: multipart/alternative;
 boundary="----_=_NextPart_001_01C60E1D.CEEFEEAE"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C60E1D.CEEFEEAE
Content-Type: text/plain;
 charset=us-ascii
Content-Transfer-Encoding: quoted-printable

I'm attempting to compile Lucene with some sandbox code -- specifically
the Berkely DB index storage -- and I'm running into and issue where the
code is attempting to import IndexInput (apparently located in
org.apache.lucene.store.IndexInput) but I can't find it in the source
anywhere. I'm not sure if the sandbox code is maybe using a more recent
version of the Lucene code, or if I'm missing something obvious. My
personaly guess is that it's the latter.
=20
I'm using Lucene 1.4.3 source and the db directory from the source
repository at the apache site.
=20
Thanks for any tips.
=20
Colin
=20

Notice: This email message is for the sole use of the intended recipient(s)=
 =
and may contain confidential and privileged information. Any unauthorized =
review, use, disclosure or distribution is prohibited. If you are not the =
intended recipient, please contact the sender by reply email and destroy al=
l=
 copies of the original message.

------_=_NextPart_001_01C60E1D.CEEFEEAE--


From java-user-return-18143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 31 18:29:15 2005
Return-Path: <java-user-return-18143-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18240 invoked from network); 31 Dec 2005 18:29:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Dec 2005 18:29:15 -0000
Received: (qmail 56584 invoked by uid 500); 31 Dec 2005 18:29:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56531 invoked by uid 500); 31 Dec 2005 18:29:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56520 invoked by uid 99); 31 Dec 2005 18:29:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Dec 2005 10:29:09 -0800
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.105.41.166] (HELO bettylou.configureone.net) (66.105.41.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 31 Dec 2005 10:29:08 -0800
Received: from 67.39.188.115 ([67.39.188.115]) by bettylou.configureone.net ([192.168.100.7]) with Microsoft Exchange Server HTTP-DAV ;
 Sat, 31 Dec 2005 18:27:50 +0000
User-Agent: Microsoft-Entourage/11.2.1.051004
Date: Sat, 31 Dec 2005 12:28:58 -0600
Subject: Public List Hits.subList(int, int)
From: John Powers <jpowers@configureone.com>
To: <java-user@lucene.apache.org>
Message-ID: <BFDC2A0A.22A6%jpowers@configureone.com>
Thread-Topic: Public List Hits.subList(int, int)
Thread-Index: AcYOOBA8TtYmG3orEdq9mwANk2AiFA==
In-Reply-To: <7A43A249-FC36-4950-A4BF-84B5D5F3FEAA@ehatchersolutions.com>
Mime-version: 1.0
Content-type: text/plain;
	charset="US-ASCII"
Content-transfer-encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

What does everyone think about adding a subList(int, int) method to the Hits
class?   In all the lucene implementations I usually end up needing a small
section for pagination of the results.   So I go from X to Y and put them in
a List and return the List of Documents.   Since I seem to always be doing
this in the search methods of my session objects, I thought it may be a
better place to let the Hits class itself take care of that, much like List
does.   I guess we could return a Document[] instead.   I don't know which
would be better: a List or a Document[].   I guess a Document[] makes sense;
I had just always been using a List.   Any thoughts?
-jN 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


